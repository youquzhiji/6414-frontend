var x=Object.defineProperty;var C=(o,e,s)=>e in o?x(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var l=(o,e,s)=>(C(o,typeof e!="symbol"?e+"":e,s),s);import{d as h,c as _,a as i,b as d,w as u,F as b,e as c,r as p,o as m,n as f,V as $,E as D,p as k,f as A,g as T,h as S,i as E,j as H}from"./vendor.5f57c5f4.js";const I=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}};I();const L=c("Home"),O=c(" | "),F=c("About"),M=h({setup(o){return(e,s)=>{const a=p("router-link"),t=p("router-view");return m(),_(b,null,[i("p",null,[d(a,{class:"rlink",to:"/"},{default:u(()=>[L]),_:1}),O,d(a,{class:"rlink",to:"/about"},{default:u(()=>[F]),_:1})]),d(t)],64)}}});class v{constructor(e){l(this,"el");l(this,"ctx");l(this,"w");l(this,"h");this.el=e,this.ctx=e.getContext("2d");const s=window.getComputedStyle(e);this.w=e.width=parseInt(s.width.replace("px","")),this.h=e.height=parseInt(s.height.replace("px",""))}}const N="pink";class B extends v{drawAudio(e){const s=e.getChannelData(0),a=e.length/this.w,t=this.h/2;for(let n=0;n<this.w;n++){const r=s.slice(n*a,(n+1)*a).sort(),w=r[0],y=r[r.length-1];this.ctx.strokeStyle=N,this.ctx.moveTo(n,t-y*t),this.ctx.lineTo(n,t-w*t),this.ctx.stroke()}}}class V extends v{}var z=(o,e)=>{const s=o.__vccOpts||o;for(const[a,t]of e)s[a]=t;return s};class W extends ${constructor(){super(...arguments);l(this,"waveformCanvas");l(this,"spectrogramCanvas");l(this,"audio",null)}mounted(){this.waveformCanvas=new B(this.$refs.wfCanvas),this.spectrogramCanvas=new V(this.$refs.spCanvas)}async onDrop(e){if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.items)for(let s=0;s<e.dataTransfer.items.length;s++){const a=e.dataTransfer.items[s];if(a.kind=="file"){const t=a.getAsFile();console.log(`File Dropped: ${t.name}
- LastModified: ${t.lastModified}
- Size: ${t.size}
- Type: ${t.type}`);const n=await t.arrayBuffer();this.audio=await new AudioContext().decodeAudioData(n),this.waveformCanvas.drawAudio(this.audio),console.log(this.audio)}else D.error(`Error: The item dropped must be a file, not a ${a.kind}`)}}}const P=W,g=o=>(k("data-v-64f88378"),o=o(),A(),o),j={id:"home"},q=g(()=>i("div",{class:"usage"},[c(" Welcome to the voice training tool [TODO: \u60F3\u4E00\u4E2A\u540D\u5B57] "),i("p",null,"Drop an audio file below to start.")],-1)),K=g(()=>i("span",{class:"drop-label"},"Drop Here",-1)),R=[K],G={ref:"wfCanvas"},J={ref:"spCanvas"};function Q(o,e,s,a,t,n){return m(),_("div",j,[q,i("div",{class:"drop-box unselectable",onDragover:e[0]||(e[0]=r=>r.preventDefault()),onDrop:e[1]||(e[1]=(...r)=>o.onDrop&&o.onDrop(...r))},R,32),i("div",{class:"waveform",style:f({visibility:o.audio?"unset":"hidden"})},[i("canvas",G,null,512)],4),i("div",{class:"spectrogram",style:f({visibility:o.audio?"unset":"hidden"})},[i("canvas",J,null,512)],4)])}var U=z(P,[["render",Q],["__scopeId","data-v-64f88378"]]);const X=h({setup(o){return(e,s)=>" This is an about page. "}}),Y=[{path:"/",name:"Home",component:U},{path:"/about",name:"About",component:X}],Z=T({history:S(),routes:Y});E(M).use(Z).use(H).mount("#app");
