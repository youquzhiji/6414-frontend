var rK=Object.defineProperty,iK=Object.defineProperties;var aK=Object.getOwnPropertyDescriptors;var p0=Object.getOwnPropertySymbols;var aN=Object.prototype.hasOwnProperty,lN=Object.prototype.propertyIsEnumerable;var r2=(e,t,n)=>t in e?rK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Me=(e,t)=>{for(var n in t||(t={}))aN.call(t,n)&&r2(e,n,t[n]);if(p0)for(var n of p0(t))lN.call(t,n)&&r2(e,n,t[n]);return e},nt=(e,t)=>iK(e,aK(t));var uN=(e,t)=>{var n={};for(var s in e)aN.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&p0)for(var s of p0(e))t.indexOf(s)<0&&lN.call(e,s)&&(n[s]=e[s]);return n};var lK=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var on=(e,t,n)=>(r2(e,typeof t!="symbol"?t+"":t,n),n);var rst=lK((Ar,Dr)=>{function uK(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(s){if(s!=="default"&&!(s in e)){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:function(){return n[s]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const cK=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};cK();function WC(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const dK="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fK=WC(dK);function ZO(e){return!!e||e===""}function it(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Bt(s)?mK(s):it(s);if(o)for(const r in o)t[r]=o[r]}return t}else{if(Bt(e))return e;if(rn(e))return e}}const hK=/;(?![^(]*\))/g,pK=/:(.+)/;function mK(e){const t={};return e.split(hK).forEach(n=>{if(n){const s=n.split(pK);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function W(e){let t="";if(Bt(e))t=e;else if(Et(e))for(let n=0;n<e.length;n++){const s=W(e[n]);s&&(t+=s+" ")}else if(rn(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Oi(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Bt(t)&&(e.class=W(t)),n&&(e.style=it(n)),e}function gK(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Jd(e[s],t[s]);return n}function Jd(e,t){if(e===t)return!0;let n=cN(e),s=cN(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Et(e),s=Et(t),n||s)return n&&s?gK(e,t):!1;if(n=rn(e),s=rn(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const i in e){const a=e.hasOwnProperty(i),l=t.hasOwnProperty(i);if(a&&!l||!a&&l||!Jd(e[i],t[i]))return!1}}return String(e)===String(t)}function JO(e,t){return e.findIndex(n=>Jd(n,t))}const He=e=>Bt(e)?e:e==null?"":Et(e)||rn(e)&&(e.toString===eP||!zt(e.toString))?JSON.stringify(e,QO,2):String(e),QO=(e,t)=>t&&t.__v_isRef?QO(e,t.value):zd(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o])=>(n[`${s} =>`]=o,n),{})}:Jb(t)?{[`Set(${t.size})`]:[...t.values()]}:rn(t)&&!Et(t)&&!tP(t)?String(t):t,as={},Bd=[],In=()=>{},vK=()=>!1,bK=/^on[^a-z]/,Zb=e=>bK.test(e),HC=e=>e.startsWith("onUpdate:"),bo=Object.assign,UC=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},yK=Object.prototype.hasOwnProperty,en=(e,t)=>yK.call(e,t),Et=Array.isArray,zd=e=>lm(e)==="[object Map]",Jb=e=>lm(e)==="[object Set]",cN=e=>e instanceof Date,zt=e=>typeof e=="function",Bt=e=>typeof e=="string",jC=e=>typeof e=="symbol",rn=e=>e!==null&&typeof e=="object",gc=e=>rn(e)&&zt(e.then)&&zt(e.catch),eP=Object.prototype.toString,lm=e=>eP.call(e),av=e=>lm(e).slice(8,-1),tP=e=>lm(e)==="[object Object]",GC=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,lv=WC(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qb=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},wK=/-(\w)/g,ai=Qb(e=>e.replace(wK,(t,n)=>n?n.toUpperCase():"")),kK=/\B([A-Z])/g,su=Qb(e=>e.replace(kK,"-$1").toLowerCase()),$r=Qb(e=>e.charAt(0).toUpperCase()+e.slice(1)),uv=Qb(e=>e?`on${$r(e)}`:""),wp=(e,t)=>!Object.is(e,t),cv=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Hv=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Uv=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let dN;const xK=()=>dN||(dN=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Kr;class nP{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Kr&&(this.parent=Kr,this.index=(Kr.scopes||(Kr.scopes=[])).push(this)-1)}run(t){if(this.active)try{return Kr=this,t()}finally{Kr=this.parent}}on(){Kr=this}off(){Kr=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function CK(e){return new nP(e)}function $K(e,t=Kr){t&&t.active&&t.effects.push(e)}function SK(){return Kr}function sP(e){Kr&&Kr.cleanups.push(e)}const KC=e=>{const t=new Set(e);return t.w=0,t.n=0,t},oP=e=>(e.w&Kl)>0,rP=e=>(e.n&Kl)>0,IK=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Kl},EK=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];oP(o)&&!rP(o)?o.delete(e):t[n++]=o,o.w&=~Kl,o.n&=~Kl}t.length=n}},$k=new WeakMap;let Ph=0,Kl=1;const Sk=30;let ua;const nc=Symbol(""),Ik=Symbol("");class qC{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,$K(this,s)}run(){if(!this.active)return this.fn();let t=ua,n=Bl;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ua,ua=this,Bl=!0,Kl=1<<++Ph,Ph<=Sk?IK(this):fN(this),this.fn()}finally{Ph<=Sk&&EK(this),Kl=1<<--Ph,ua=this.parent,Bl=n,this.parent=void 0}}stop(){this.active&&(fN(this),this.onStop&&this.onStop(),this.active=!1)}}function fN(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Bl=!0;const iP=[];function zc(){iP.push(Bl),Bl=!1}function Vc(){const e=iP.pop();Bl=e===void 0?!0:e}function Mr(e,t,n){if(Bl&&ua){let s=$k.get(e);s||$k.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=KC()),aP(o)}}function aP(e,t){let n=!1;Ph<=Sk?rP(e)||(e.n|=Kl,n=!oP(e)):n=!e.has(ua),n&&(e.add(ua),ua.deps.push(e))}function Ya(e,t,n,s,o,r){const i=$k.get(e);if(!i)return;let a=[];if(t==="clear")a=[...i.values()];else if(n==="length"&&Et(e))i.forEach((l,u)=>{(u==="length"||u>=s)&&a.push(l)});else switch(n!==void 0&&a.push(i.get(n)),t){case"add":Et(e)?GC(n)&&a.push(i.get("length")):(a.push(i.get(nc)),zd(e)&&a.push(i.get(Ik)));break;case"delete":Et(e)||(a.push(i.get(nc)),zd(e)&&a.push(i.get(Ik)));break;case"set":zd(e)&&a.push(i.get(nc));break}if(a.length===1)a[0]&&Ek(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);Ek(KC(l))}}function Ek(e,t){for(const n of Et(e)?e:[...e])(n!==ua||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const TK=WC("__proto__,__v_isRef,__isVue"),lP=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(jC)),_K=YC(),NK=YC(!1,!0),AK=YC(!0),hN=DK();function DK(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=_n(this);for(let r=0,i=this.length;r<i;r++)Mr(s,"get",r+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(_n)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){zc();const s=_n(this)[t].apply(this,n);return Vc(),s}}),e}function YC(e=!1,t=!1){return function(s,o,r){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&r===(e?t?qK:hP:t?fP:dP).get(s))return s;const i=Et(s);if(!e&&i&&en(hN,o))return Reflect.get(hN,o,r);const a=Reflect.get(s,o,r);return(jC(o)?lP.has(o):TK(o))||(e||Mr(s,"get",o),t)?a:vs(a)?!i||!GC(o)?a.value:a:rn(a)?e?um(a):vn(a):a}}const RK=uP(),MK=uP(!0);function uP(e=!1){return function(n,s,o,r){let i=n[s];if(kp(i)&&vs(i)&&!vs(o))return!1;if(!e&&!kp(o)&&(pP(o)||(o=_n(o),i=_n(i)),!Et(n)&&vs(i)&&!vs(o)))return i.value=o,!0;const a=Et(n)&&GC(s)?Number(s)<n.length:en(n,s),l=Reflect.set(n,s,o,r);return n===_n(r)&&(a?wp(o,i)&&Ya(n,"set",s,o):Ya(n,"add",s,o)),l}}function OK(e,t){const n=en(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&Ya(e,"delete",t,void 0),s}function PK(e,t){const n=Reflect.has(e,t);return(!jC(t)||!lP.has(t))&&Mr(e,"has",t),n}function FK(e){return Mr(e,"iterate",Et(e)?"length":nc),Reflect.ownKeys(e)}const cP={get:_K,set:RK,deleteProperty:OK,has:PK,ownKeys:FK},LK={get:AK,set(e,t){return!0},deleteProperty(e,t){return!0}},BK=bo({},cP,{get:NK,set:MK}),XC=e=>e,ey=e=>Reflect.getPrototypeOf(e);function m0(e,t,n=!1,s=!1){e=e.__v_raw;const o=_n(e),r=_n(t);t!==r&&!n&&Mr(o,"get",t),!n&&Mr(o,"get",r);const{has:i}=ey(o),a=s?XC:n?QC:Cp;if(i.call(o,t))return a(e.get(t));if(i.call(o,r))return a(e.get(r));e!==o&&e.get(t)}function g0(e,t=!1){const n=this.__v_raw,s=_n(n),o=_n(e);return e!==o&&!t&&Mr(s,"has",e),!t&&Mr(s,"has",o),e===o?n.has(e):n.has(e)||n.has(o)}function v0(e,t=!1){return e=e.__v_raw,!t&&Mr(_n(e),"iterate",nc),Reflect.get(e,"size",e)}function pN(e){e=_n(e);const t=_n(this);return ey(t).has.call(t,e)||(t.add(e),Ya(t,"add",e,e)),this}function mN(e,t){t=_n(t);const n=_n(this),{has:s,get:o}=ey(n);let r=s.call(n,e);r||(e=_n(e),r=s.call(n,e));const i=o.call(n,e);return n.set(e,t),r?wp(t,i)&&Ya(n,"set",e,t):Ya(n,"add",e,t),this}function gN(e){const t=_n(this),{has:n,get:s}=ey(t);let o=n.call(t,e);o||(e=_n(e),o=n.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return o&&Ya(t,"delete",e,void 0),r}function vN(){const e=_n(this),t=e.size!==0,n=e.clear();return t&&Ya(e,"clear",void 0,void 0),n}function b0(e,t){return function(s,o){const r=this,i=r.__v_raw,a=_n(i),l=t?XC:e?QC:Cp;return!e&&Mr(a,"iterate",nc),i.forEach((u,c)=>s.call(o,l(u),l(c),r))}}function y0(e,t,n){return function(...s){const o=this.__v_raw,r=_n(o),i=zd(r),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,u=o[e](...s),c=n?XC:t?QC:Cp;return!t&&Mr(r,"iterate",l?Ik:nc),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function wl(e){return function(...t){return e==="delete"?!1:this}}function zK(){const e={get(r){return m0(this,r)},get size(){return v0(this)},has:g0,add:pN,set:mN,delete:gN,clear:vN,forEach:b0(!1,!1)},t={get(r){return m0(this,r,!1,!0)},get size(){return v0(this)},has:g0,add:pN,set:mN,delete:gN,clear:vN,forEach:b0(!1,!0)},n={get(r){return m0(this,r,!0)},get size(){return v0(this,!0)},has(r){return g0.call(this,r,!0)},add:wl("add"),set:wl("set"),delete:wl("delete"),clear:wl("clear"),forEach:b0(!0,!1)},s={get(r){return m0(this,r,!0,!0)},get size(){return v0(this,!0)},has(r){return g0.call(this,r,!0)},add:wl("add"),set:wl("set"),delete:wl("delete"),clear:wl("clear"),forEach:b0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=y0(r,!1,!1),n[r]=y0(r,!0,!1),t[r]=y0(r,!1,!0),s[r]=y0(r,!0,!0)}),[e,n,t,s]}const[VK,WK,HK,UK]=zK();function ZC(e,t){const n=t?e?UK:HK:e?WK:VK;return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(en(n,o)&&o in s?n:s,o,r)}const jK={get:ZC(!1,!1)},GK={get:ZC(!1,!0)},KK={get:ZC(!0,!1)},dP=new WeakMap,fP=new WeakMap,hP=new WeakMap,qK=new WeakMap;function YK(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function XK(e){return e.__v_skip||!Object.isExtensible(e)?0:YK(av(e))}function vn(e){return kp(e)?e:JC(e,!1,cP,jK,dP)}function ZK(e){return JC(e,!1,BK,GK,fP)}function um(e){return JC(e,!0,LK,KK,hP)}function JC(e,t,n,s,o){if(!rn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const i=XK(e);if(i===0)return e;const a=new Proxy(e,i===2?s:n);return o.set(e,a),a}function Vd(e){return kp(e)?Vd(e.__v_raw):!!(e&&e.__v_isReactive)}function kp(e){return!!(e&&e.__v_isReadonly)}function pP(e){return!!(e&&e.__v_isShallow)}function mP(e){return Vd(e)||kp(e)}function _n(e){const t=e&&e.__v_raw;return t?_n(t):e}function xp(e){return Hv(e,"__v_skip",!0),e}const Cp=e=>rn(e)?vn(e):e,QC=e=>rn(e)?um(e):e;function gP(e){Bl&&ua&&(e=_n(e),aP(e.dep||(e.dep=KC())))}function e$(e,t){e=_n(e),e.dep&&Ek(e.dep)}function vs(e){return!!(e&&e.__v_isRef===!0)}function j(e){return vP(e,!1)}function Ns(e){return vP(e,!0)}function vP(e,t){return vs(e)?e:new JK(e,t)}class JK{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:_n(t),this._value=n?t:Cp(t)}get value(){return gP(this),this._value}set value(t){t=this.__v_isShallow?t:_n(t),wp(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Cp(t),e$(this))}}function gh(e){e$(e)}function N(e){return vs(e)?e.value:e}const QK={get:(e,t,n)=>N(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return vs(o)&&!vs(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function jv(e){return Vd(e)?e:new Proxy(e,QK)}function oo(e){const t=Et(e)?new Array(e.length):{};for(const n in e)t[n]=qs(e,n);return t}class eq{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function qs(e,t,n){const s=e[t];return vs(s)?s:new eq(e,t,n)}class tq{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new qC(t,()=>{this._dirty||(this._dirty=!0,e$(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=_n(this);return gP(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function nq(e,t,n=!1){let s,o;const r=zt(e);return r?(s=e,o=In):(s=e.get,o=e.set),new tq(s,o,r||!o,n)}Promise.resolve();const Zh=[];function sq(e,...t){zc();const n=Zh.length?Zh[Zh.length-1].component:null,s=n&&n.appContext.config.warnHandler,o=oq();if(s)ja(s,n,11,[e+t.join(""),n&&n.proxy,o.map(({vnode:r})=>`at <${qP(n,r.type)}>`).join(`
`),o]);else{const r=[`[Vue warn]: ${e}`,...t];o.length&&r.push(`
`,...rq(o)),console.warn(...r)}Vc()}function oq(){let e=Zh[Zh.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function rq(e){const t=[];return e.forEach((n,s)=>{t.push(...s===0?[]:[`
`],...iq(n))}),t}function iq({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,o=` at <${qP(e.component,e.type,s)}`,r=">"+n;return e.props?[o,...aq(e.props),r]:[o+r]}function aq(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(s=>{t.push(...bP(s,e[s]))}),n.length>3&&t.push(" ..."),t}function bP(e,t,n){return Bt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:vs(t)?(t=bP(e,_n(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):zt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=_n(t),n?t:[`${e}=`,t])}function ja(e,t,n,s){let o;try{o=s?e(...s):e()}catch(r){ty(r,t,n)}return o}function si(e,t,n,s){if(zt(e)){const r=ja(e,t,n,s);return r&&gc(r)&&r.catch(i=>{ty(i,t,n)}),r}const o=[];for(let r=0;r<e.length;r++)o.push(si(e[r],t,n,s));return o}function ty(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,a=n;for(;r;){const u=r.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,i,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){ja(l,null,10,[e,i,a]);return}}lq(e,n,o,s)}function lq(e,t,n,s=!0){console.error(e)}let Gv=!1,Tk=!1;const Sr=[];let Pa=0;const Jh=[];let Fh=null,Td=0;const Qh=[];let Sl=null,_d=0;const yP=Promise.resolve();let t$=null,_k=null;function vt(e){const t=t$||yP;return e?t.then(this?e.bind(this):e):t}function uq(e){let t=Pa+1,n=Sr.length;for(;t<n;){const s=t+n>>>1;$p(Sr[s])<e?t=s+1:n=s}return t}function wP(e){(!Sr.length||!Sr.includes(e,Gv&&e.allowRecurse?Pa+1:Pa))&&e!==_k&&(e.id==null?Sr.push(e):Sr.splice(uq(e.id),0,e),kP())}function kP(){!Gv&&!Tk&&(Tk=!0,t$=yP.then($P))}function cq(e){const t=Sr.indexOf(e);t>Pa&&Sr.splice(t,1)}function xP(e,t,n,s){Et(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&n.push(e),kP()}function dq(e){xP(e,Fh,Jh,Td)}function fq(e){xP(e,Sl,Qh,_d)}function n$(e,t=null){if(Jh.length){for(_k=t,Fh=[...new Set(Jh)],Jh.length=0,Td=0;Td<Fh.length;Td++)Fh[Td]();Fh=null,Td=0,_k=null,n$(e,t)}}function CP(e){if(Qh.length){const t=[...new Set(Qh)];if(Qh.length=0,Sl){Sl.push(...t);return}for(Sl=t,Sl.sort((n,s)=>$p(n)-$p(s)),_d=0;_d<Sl.length;_d++)Sl[_d]();Sl=null,_d=0}}const $p=e=>e.id==null?1/0:e.id;function $P(e){Tk=!1,Gv=!0,n$(e),Sr.sort((n,s)=>$p(n)-$p(s));const t=In;try{for(Pa=0;Pa<Sr.length;Pa++){const n=Sr[Pa];n&&n.active!==!1&&ja(n,null,14)}}finally{Pa=0,Sr.length=0,CP(),Gv=!1,t$=null,(Sr.length||Jh.length||Qh.length)&&$P(e)}}function hq(e,t,...n){const s=e.vnode.props||as;let o=n;const r=t.startsWith("update:"),i=r&&t.slice(7);if(i&&i in s){const c=`${i==="modelValue"?"model":i}Modifiers`,{number:d,trim:f}=s[c]||as;f?o=n.map(h=>h.trim()):d&&(o=n.map(Uv))}let a,l=s[a=uv(t)]||s[a=uv(ai(t))];!l&&r&&(l=s[a=uv(su(t))]),l&&si(l,e,6,o);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,si(u,e,6,o)}}function SP(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let i={},a=!1;if(!zt(e)){const l=u=>{const c=SP(u,t,!0);c&&(a=!0,bo(i,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(s.set(e,null),null):(Et(r)?r.forEach(l=>i[l]=null):bo(i,r),s.set(e,i),i)}function s$(e,t){return!e||!Zb(t)?!1:(t=t.slice(2).replace(/Once$/,""),en(e,t[0].toLowerCase()+t.slice(1))||en(e,su(t))||en(e,t))}let Tr=null,ny=null;function Kv(e){const t=Tr;return Tr=e,ny=e&&e.type.__scopeId||null,t}function cm(e){ny=e}function dm(){ny=null}function de(e,t=Tr,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&_N(-1);const r=Kv(t),i=e(...o);return Kv(r),s._d&&_N(1),i};return s._n=!0,s._c=!0,s._d=!0,s}function i2(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:r,propsOptions:[i],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=e;let g,v;const b=Kv(e);try{if(n.shapeFlag&4){const y=o||s;g=na(c.call(y,y,d,r,h,f,p)),v=l}else{const y=t;g=na(y.length>1?y(r,{attrs:l,slots:a,emit:u}):y(r,null)),v=t.props?l:pq(l)}}catch(y){tp.length=0,ty(y,e,1),g=fe(fr)}let w=g;if(v&&m!==!1){const y=Object.keys(v),{shapeFlag:k}=w;y.length&&k&7&&(i&&y.some(HC)&&(v=mq(v,i)),w=vc(w,v))}return n.dirs&&(w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),g=w,Kv(b),g}const pq=e=>{let t;for(const n in e)(n==="class"||n==="style"||Zb(n))&&((t||(t={}))[n]=e[n]);return t},mq=(e,t)=>{const n={};for(const s in e)(!HC(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function gq(e,t,n){const{props:s,children:o,component:r}=e,{props:i,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?bN(s,i,u):!!i;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(i[f]!==s[f]&&!s$(u,f))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?bN(s,i,u):!0:!!i;return!1}function bN(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!s$(n,r))return!0}return!1}function vq({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const bq=e=>e.__isSuspense;function yq(e,t){t&&t.pendingBranch?Et(e)?t.effects.push(...e):t.effects.push(e):fq(e)}function Gt(e,t){if(po){let n=po.provides;const s=po.parent&&po.parent.provides;s===n&&(n=po.provides=Object.create(s)),n[e]=t}}function rt(e,t,n=!1){const s=po||Tr;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&zt(t)?t.call(s.proxy):t}}function oi(e,t){return o$(e,null,t)}const yN={};function We(e,t,n){return o$(e,t,n)}function o$(e,t,{immediate:n,deep:s,flush:o,onTrack:r,onTrigger:i}=as){const a=po;let l,u=!1,c=!1;if(vs(e)?(l=()=>e.value,u=pP(e)):Vd(e)?(l=()=>e,s=!0):Et(e)?(c=!0,u=e.some(Vd),l=()=>e.map(v=>{if(vs(v))return v.value;if(Vd(v))return qu(v);if(zt(v))return ja(v,a,2)})):zt(e)?t?l=()=>ja(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),si(e,a,3,[f])}:l=In,t&&s){const v=l;l=()=>qu(v())}let d,f=v=>{d=g.onStop=()=>{ja(v,a,4)}};if(Ep)return f=In,t?n&&si(t,a,3,[l(),c?[]:void 0,f]):l(),In;let h=c?[]:yN;const p=()=>{if(!!g.active)if(t){const v=g.run();(s||u||(c?v.some((b,w)=>wp(b,h[w])):wp(v,h)))&&(d&&d(),si(t,a,3,[v,h===yN?void 0:h,f]),h=v)}else g.run()};p.allowRecurse=!!t;let m;o==="sync"?m=p:o==="post"?m=()=>rr(p,a&&a.suspense):m=()=>{!a||a.isMounted?dq(p):p()};const g=new qC(l,m);return t?n?p():h=g.run():o==="post"?rr(g.run.bind(g),a&&a.suspense):g.run(),()=>{g.stop(),a&&a.scope&&UC(a.scope.effects,g)}}function wq(e,t,n){const s=this.proxy,o=Bt(e)?e.includes(".")?IP(s,e):()=>s[e]:e.bind(s,s);let r;zt(t)?r=t:(r=t.handler,n=t);const i=po;Qd(this);const a=o$(o,r.bind(s),n);return i?Qd(i):oc(),a}function IP(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function qu(e,t){if(!rn(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),vs(e))qu(e.value,t);else if(Et(e))for(let n=0;n<e.length;n++)qu(e[n],t);else if(Jb(e)||zd(e))e.forEach(n=>{qu(n,t)});else if(tP(e))for(const n in e)qu(e[n],t);return e}function EP(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ft(()=>{e.isMounted=!0}),qn(()=>{e.isUnmounting=!0}),e}const Vr=[Function,Array],kq={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vr,onEnter:Vr,onAfterEnter:Vr,onEnterCancelled:Vr,onBeforeLeave:Vr,onLeave:Vr,onAfterLeave:Vr,onLeaveCancelled:Vr,onBeforeAppear:Vr,onAppear:Vr,onAfterAppear:Vr,onAppearCancelled:Vr},setup(e,{slots:t}){const n=jt(),s=EP();let o;return()=>{const r=t.default&&r$(t.default(),!0);if(!r||!r.length)return;const i=_n(e),{mode:a}=i,l=r[0];if(s.isLeaving)return a2(l);const u=wN(l);if(!u)return a2(l);const c=Sp(u,i,s,n);Ip(u,c);const d=n.subTree,f=d&&wN(d);let h=!1;const{getTransitionKey:p}=u.type;if(p){const m=p();o===void 0?o=m:m!==o&&(o=m,h=!0)}if(f&&f.type!==fr&&(!Wu(u,f)||h)){const m=Sp(f,i,s,n);if(Ip(f,m),a==="out-in")return s.isLeaving=!0,m.afterLeave=()=>{s.isLeaving=!1,n.update()},a2(l);a==="in-out"&&u.type!==fr&&(m.delayLeave=(g,v,b)=>{const w=_P(s,f);w[String(f.key)]=f,g._leaveCb=()=>{v(),g._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=b})}return l}}},TP=kq;function _P(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Sp(e,t,n,s){const{appear:o,mode:r,persisted:i=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:b}=t,w=String(e.key),y=_P(n,e),k=(C,S)=>{C&&si(C,s,9,S)},x={mode:r,persisted:i,beforeEnter(C){let S=a;if(!n.isMounted)if(o)S=m||a;else return;C._leaveCb&&C._leaveCb(!0);const T=y[w];T&&Wu(e,T)&&T.el._leaveCb&&T.el._leaveCb(),k(S,[C])},enter(C){let S=l,T=u,A=c;if(!n.isMounted)if(o)S=g||l,T=v||u,A=b||c;else return;let R=!1;const L=C._enterCb=P=>{R||(R=!0,P?k(A,[C]):k(T,[C]),x.delayedLeave&&x.delayedLeave(),C._enterCb=void 0)};S?(S(C,L),S.length<=1&&L()):L()},leave(C,S){const T=String(e.key);if(C._enterCb&&C._enterCb(!0),n.isUnmounting)return S();k(d,[C]);let A=!1;const R=C._leaveCb=L=>{A||(A=!0,S(),L?k(p,[C]):k(h,[C]),C._leaveCb=void 0,y[T]===e&&delete y[T])};y[T]=e,f?(f(C,R),f.length<=1&&R()):R()},clone(C){return Sp(C,t,n,s)}};return x}function a2(e){if(sy(e))return e=vc(e),e.children=null,e}function wN(e){return sy(e)?e.children?e.children[0]:void 0:e}function Ip(e,t){e.shapeFlag&6&&e.component?Ip(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function r$(e,t=!1){let n=[],s=0;for(let o=0;o<e.length;o++){const r=e[o];r.type===lt?(r.patchFlag&128&&s++,n=n.concat(r$(r.children,t))):(t||r.type!==fr)&&n.push(r)}if(s>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function xe(e){return zt(e)?{setup:e,name:e.name}:e}const Nk=e=>!!e.type.__asyncLoader,sy=e=>e.type.__isKeepAlive;function xq(e,t){NP(e,"a",t)}function Cq(e,t){NP(e,"da",t)}function NP(e,t,n=po){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(oy(t,s,n),n){let o=n.parent;for(;o&&o.parent;)sy(o.parent.vnode)&&$q(s,t,n,o),o=o.parent}}function $q(e,t,n,s){const o=oy(t,e,s,!0);hm(()=>{UC(s[t],o)},n)}function oy(e,t,n=po,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;zc(),Qd(n);const a=si(t,n,e,i);return oc(),Vc(),a});return s?o.unshift(r):o.push(r),r}}const ol=e=>(t,n=po)=>(!Ep||e==="sp")&&oy(e,t,n),fm=ol("bm"),Ft=ol("m"),AP=ol("bu"),Ki=ol("u"),qn=ol("bum"),hm=ol("um"),Sq=ol("sp"),Iq=ol("rtg"),Eq=ol("rtc");function Tq(e,t=po){oy("ec",e,t)}let Ak=!0;function _q(e){const t=RP(e),n=e.proxy,s=e.ctx;Ak=!1,t.beforeCreate&&kN(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:i,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:b,destroyed:w,unmounted:y,render:k,renderTracked:x,renderTriggered:C,errorCaptured:S,serverPrefetch:T,expose:A,inheritAttrs:R,components:L,directives:P,filters:V}=t;if(u&&Nq(u,s,null,e.appContext.config.unwrapInjectedRef),i)for(const M in i){const B=i[M];zt(B)&&(s[M]=B.bind(n))}if(o){const M=o.call(n,n);rn(M)&&(e.data=vn(M))}if(Ak=!0,r)for(const M in r){const B=r[M],Y=zt(B)?B.bind(n,n):zt(B.get)?B.get.bind(n,n):In,J=!zt(B)&&zt(B.set)?B.set.bind(n):In,ee=O({get:Y,set:J});Object.defineProperty(s,M,{enumerable:!0,configurable:!0,get:()=>ee.value,set:te=>ee.value=te})}if(a)for(const M in a)DP(a[M],s,n,M);if(l){const M=zt(l)?l.call(n):l;Reflect.ownKeys(M).forEach(B=>{Gt(B,M[B])})}c&&kN(c,e,"c");function F(M,B){Et(B)?B.forEach(Y=>M(Y.bind(n))):B&&M(B.bind(n))}if(F(fm,d),F(Ft,f),F(AP,h),F(Ki,p),F(xq,m),F(Cq,g),F(Tq,S),F(Eq,x),F(Iq,C),F(qn,b),F(hm,y),F(Sq,T),Et(A))if(A.length){const M=e.exposed||(e.exposed={});A.forEach(B=>{Object.defineProperty(M,B,{get:()=>n[B],set:Y=>n[B]=Y})})}else e.exposed||(e.exposed={});k&&e.render===In&&(e.render=k),R!=null&&(e.inheritAttrs=R),L&&(e.components=L),P&&(e.directives=P)}function Nq(e,t,n=In,s=!1){Et(e)&&(e=Dk(e));for(const o in e){const r=e[o];let i;rn(r)?"default"in r?i=rt(r.from||o,r.default,!0):i=rt(r.from||o):i=rt(r),vs(i)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[o]=i}}function kN(e,t,n){si(Et(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function DP(e,t,n,s){const o=s.includes(".")?IP(n,s):()=>n[s];if(Bt(e)){const r=t[e];zt(r)&&We(o,r)}else if(zt(e))We(o,e.bind(n));else if(rn(e))if(Et(e))e.forEach(r=>DP(r,t,n,s));else{const r=zt(e.handler)?e.handler.bind(n):t[e.handler];zt(r)&&We(o,r,e)}}function RP(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,a=r.get(t);let l;return a?l=a:!o.length&&!n&&!s?l=t:(l={},o.length&&o.forEach(u=>qv(l,u,i,!0)),qv(l,t,i)),r.set(t,l),l}function qv(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&qv(e,r,n,!0),o&&o.forEach(i=>qv(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const a=Aq[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const Aq={data:xN,props:Pu,emits:Pu,methods:Pu,computed:Pu,beforeCreate:Go,created:Go,beforeMount:Go,mounted:Go,beforeUpdate:Go,updated:Go,beforeDestroy:Go,beforeUnmount:Go,destroyed:Go,unmounted:Go,activated:Go,deactivated:Go,errorCaptured:Go,serverPrefetch:Go,components:Pu,directives:Pu,watch:Rq,provide:xN,inject:Dq};function xN(e,t){return t?e?function(){return bo(zt(e)?e.call(this,this):e,zt(t)?t.call(this,this):t)}:t:e}function Dq(e,t){return Pu(Dk(e),Dk(t))}function Dk(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Go(e,t){return e?[...new Set([].concat(e,t))]:t}function Pu(e,t){return e?bo(bo(Object.create(null),e),t):t}function Rq(e,t){if(!e)return t;if(!t)return e;const n=bo(Object.create(null),e);for(const s in t)n[s]=Go(e[s],t[s]);return n}function Mq(e,t,n,s=!1){const o={},r={};Hv(r,ry,1),e.propsDefaults=Object.create(null),MP(e,t,o,r);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);n?e.props=s?o:ZK(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function Oq(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=e,a=_n(o),[l]=e.propsOptions;let u=!1;if((s||i>0)&&!(i&16)){if(i&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];const h=t[f];if(l)if(en(r,f))h!==r[f]&&(r[f]=h,u=!0);else{const p=ai(f);o[p]=Rk(l,a,p,h,e,!1)}else h!==r[f]&&(r[f]=h,u=!0)}}}else{MP(e,t,o,r)&&(u=!0);let c;for(const d in a)(!t||!en(t,d)&&((c=su(d))===d||!en(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(o[d]=Rk(l,a,d,void 0,e,!0)):delete o[d]);if(r!==a)for(const d in r)(!t||!en(t,d)&&!0)&&(delete r[d],u=!0)}u&&Ya(e,"set","$attrs")}function MP(e,t,n,s){const[o,r]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(lv(l))continue;const u=t[l];let c;o&&en(o,c=ai(l))?!r||!r.includes(c)?n[c]=u:(a||(a={}))[c]=u:s$(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,i=!0)}if(r){const l=_n(n),u=a||as;for(let c=0;c<r.length;c++){const d=r[c];n[d]=Rk(o,l,d,u[d],e,!en(u,d))}}return i}function Rk(e,t,n,s,o,r){const i=e[n];if(i!=null){const a=en(i,"default");if(a&&s===void 0){const l=i.default;if(i.type!==Function&&zt(l)){const{propsDefaults:u}=o;n in u?s=u[n]:(Qd(o),s=u[n]=l.call(null,t),oc())}else s=l}i[0]&&(r&&!a?s=!1:i[1]&&(s===""||s===su(n))&&(s=!0))}return s}function OP(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const r=e.props,i={},a=[];let l=!1;if(!zt(e)){const c=d=>{l=!0;const[f,h]=OP(d,t,!0);bo(i,f),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return s.set(e,Bd),Bd;if(Et(r))for(let c=0;c<r.length;c++){const d=ai(r[c]);CN(d)&&(i[d]=as)}else if(r)for(const c in r){const d=ai(c);if(CN(d)){const f=r[c],h=i[d]=Et(f)||zt(f)?{type:f}:f;if(h){const p=IN(Boolean,h.type),m=IN(String,h.type);h[0]=p>-1,h[1]=m<0||p<m,(p>-1||en(h,"default"))&&a.push(d)}}}const u=[i,a];return s.set(e,u),u}function CN(e){return e[0]!=="$"}function $N(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function SN(e,t){return $N(e)===$N(t)}function IN(e,t){return Et(t)?t.findIndex(n=>SN(n,e)):zt(t)&&SN(t,e)?0:-1}const PP=e=>e[0]==="_"||e==="$stable",i$=e=>Et(e)?e.map(na):[na(e)],Pq=(e,t,n)=>{const s=de((...o)=>i$(t(...o)),n);return s._c=!1,s},FP=(e,t,n)=>{const s=e._ctx;for(const o in e){if(PP(o))continue;const r=e[o];if(zt(r))t[o]=Pq(o,r,s);else if(r!=null){const i=i$(r);t[o]=()=>i}}},LP=(e,t)=>{const n=i$(t);e.slots.default=()=>n},Fq=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=_n(t),Hv(t,"_",n)):FP(t,e.slots={})}else e.slots={},t&&LP(e,t);Hv(e.slots,ry,1)},Lq=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,i=as;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:(bo(o,t),!n&&a===1&&delete o._):(r=!t.$stable,FP(t,o)),i=t}else t&&(LP(e,t),i={default:1});if(r)for(const a in o)!PP(a)&&!(a in i)&&delete o[a]};function It(e,t){const n=Tr;if(n===null)return e;const s=n.proxy,o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,l,u=as]=t[r];zt(i)&&(i={mounted:i,updated:i}),i.deep&&qu(a),o.push({dir:i,instance:s,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function Su(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let i=0;i<o.length;i++){const a=o[i];r&&(a.oldValue=r[i].value);let l=a.dir[s];l&&(zc(),si(l,n,8,[e.el,a,e,t]),Vc())}}function BP(){return{app:null,config:{isNativeTag:vK,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bq=0;function zq(e,t){return function(s,o=null){o!=null&&!rn(o)&&(o=null);const r=BP(),i=new Set;let a=!1;const l=r.app={_uid:Bq++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:aY,get config(){return r.config},set config(u){},use(u,...c){return i.has(u)||(u&&zt(u.install)?(i.add(u),u.install(l,...c)):zt(u)&&(i.add(u),u(l,...c))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,c){return c?(r.components[u]=c,l):r.components[u]},directive(u,c){return c?(r.directives[u]=c,l):r.directives[u]},mount(u,c,d){if(!a){const f=fe(s,o);return f.appContext=r,c&&t?t(f,u):e(f,u,d),a=!0,l._container=u,u.__vue_app__=l,d$(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return r.provides[u]=c,l}};return l}}function Mk(e,t,n,s,o=!1){if(Et(e)){e.forEach((f,h)=>Mk(f,t&&(Et(t)?t[h]:t),n,s,o));return}if(Nk(s)&&!o)return;const r=s.shapeFlag&4?d$(s.component)||s.component.proxy:s.el,i=o?null:r,{i:a,r:l}=e,u=t&&t.r,c=a.refs===as?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Bt(u)?(c[u]=null,en(d,u)&&(d[u]=null)):vs(u)&&(u.value=null)),zt(l))ja(l,a,12,[i,c]);else{const f=Bt(l),h=vs(l);if(f||h){const p=()=>{if(e.f){const m=f?c[l]:l.value;o?Et(m)&&UC(m,r):Et(m)?m.includes(r)||m.push(r):f?c[l]=[r]:(l.value=[r],e.k&&(c[e.k]=l.value))}else f?(c[l]=i,en(d,l)&&(d[l]=i)):vs(l)&&(l.value=i,e.k&&(c[e.k]=i))};i?(p.id=-1,rr(p,n)):p()}}}const rr=yq;function Vq(e){return Wq(e)}function Wq(e,t){const n=xK();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:i,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=In,cloneNode:p,insertStaticContent:m}=e,g=(ne,ue,Se,Fe=null,Le=null,Ke=null,ie=!1,ge=null,be=!!ue.dynamicChildren)=>{if(ne===ue)return;ne&&!Wu(ne,ue)&&(Fe=pe(ne),re(ne,Le,Ke,!0),ne=null),ue.patchFlag===-2&&(be=!1,ue.dynamicChildren=null);const{type:Ie,ref:ot,shapeFlag:ve}=ue;switch(Ie){case mm:v(ne,ue,Se,Fe);break;case fr:b(ne,ue,Se,Fe);break;case l2:ne==null&&w(ue,Se,Fe,ie);break;case lt:P(ne,ue,Se,Fe,Le,Ke,ie,ge,be);break;default:ve&1?x(ne,ue,Se,Fe,Le,Ke,ie,ge,be):ve&6?V(ne,ue,Se,Fe,Le,Ke,ie,ge,be):(ve&64||ve&128)&&Ie.process(ne,ue,Se,Fe,Le,Ke,ie,ge,be,Be)}ot!=null&&Le&&Mk(ot,ne&&ne.ref,Ke,ue||ne,!ue)},v=(ne,ue,Se,Fe)=>{if(ne==null)s(ue.el=a(ue.children),Se,Fe);else{const Le=ue.el=ne.el;ue.children!==ne.children&&u(Le,ue.children)}},b=(ne,ue,Se,Fe)=>{ne==null?s(ue.el=l(ue.children||""),Se,Fe):ue.el=ne.el},w=(ne,ue,Se,Fe)=>{[ne.el,ne.anchor]=m(ne.children,ue,Se,Fe,ne.el,ne.anchor)},y=({el:ne,anchor:ue},Se,Fe)=>{let Le;for(;ne&&ne!==ue;)Le=f(ne),s(ne,Se,Fe),ne=Le;s(ue,Se,Fe)},k=({el:ne,anchor:ue})=>{let Se;for(;ne&&ne!==ue;)Se=f(ne),o(ne),ne=Se;o(ue)},x=(ne,ue,Se,Fe,Le,Ke,ie,ge,be)=>{ie=ie||ue.type==="svg",ne==null?C(ue,Se,Fe,Le,Ke,ie,ge,be):A(ne,ue,Le,Ke,ie,ge,be)},C=(ne,ue,Se,Fe,Le,Ke,ie,ge)=>{let be,Ie;const{type:ot,props:ve,shapeFlag:Ve,transition:ft,patchFlag:K,dirs:E}=ne;if(ne.el&&p!==void 0&&K===-1)be=ne.el=p(ne.el);else{if(be=ne.el=i(ne.type,Ke,ve&&ve.is,ve),Ve&8?c(be,ne.children):Ve&16&&T(ne.children,be,null,Fe,Le,Ke&&ot!=="foreignObject",ie,ge),E&&Su(ne,null,Fe,"created"),ve){for(const G in ve)G!=="value"&&!lv(G)&&r(be,G,null,ve[G],Ke,ne.children,Fe,Le,ae);"value"in ve&&r(be,"value",null,ve.value),(Ie=ve.onVnodeBeforeMount)&&ea(Ie,Fe,ne)}S(be,ne,ne.scopeId,ie,Fe)}E&&Su(ne,null,Fe,"beforeMount");const I=(!Le||Le&&!Le.pendingBranch)&&ft&&!ft.persisted;I&&ft.beforeEnter(be),s(be,ue,Se),((Ie=ve&&ve.onVnodeMounted)||I||E)&&rr(()=>{Ie&&ea(Ie,Fe,ne),I&&ft.enter(be),E&&Su(ne,null,Fe,"mounted")},Le)},S=(ne,ue,Se,Fe,Le)=>{if(Se&&h(ne,Se),Fe)for(let Ke=0;Ke<Fe.length;Ke++)h(ne,Fe[Ke]);if(Le){let Ke=Le.subTree;if(ue===Ke){const ie=Le.vnode;S(ne,ie,ie.scopeId,ie.slotScopeIds,Le.parent)}}},T=(ne,ue,Se,Fe,Le,Ke,ie,ge,be=0)=>{for(let Ie=be;Ie<ne.length;Ie++){const ot=ne[Ie]=ge?_l(ne[Ie]):na(ne[Ie]);g(null,ot,ue,Se,Fe,Le,Ke,ie,ge)}},A=(ne,ue,Se,Fe,Le,Ke,ie)=>{const ge=ue.el=ne.el;let{patchFlag:be,dynamicChildren:Ie,dirs:ot}=ue;be|=ne.patchFlag&16;const ve=ne.props||as,Ve=ue.props||as;let ft;Se&&Iu(Se,!1),(ft=Ve.onVnodeBeforeUpdate)&&ea(ft,Se,ue,ne),ot&&Su(ue,ne,Se,"beforeUpdate"),Se&&Iu(Se,!0);const K=Le&&ue.type!=="foreignObject";if(Ie?R(ne.dynamicChildren,Ie,ge,Se,Fe,K,Ke):ie||Y(ne,ue,ge,null,Se,Fe,K,Ke,!1),be>0){if(be&16)L(ge,ue,ve,Ve,Se,Fe,Le);else if(be&2&&ve.class!==Ve.class&&r(ge,"class",null,Ve.class,Le),be&4&&r(ge,"style",ve.style,Ve.style,Le),be&8){const E=ue.dynamicProps;for(let I=0;I<E.length;I++){const G=E[I],Z=ve[G],he=Ve[G];(he!==Z||G==="value")&&r(ge,G,Z,he,Le,ne.children,Se,Fe,ae)}}be&1&&ne.children!==ue.children&&c(ge,ue.children)}else!ie&&Ie==null&&L(ge,ue,ve,Ve,Se,Fe,Le);((ft=Ve.onVnodeUpdated)||ot)&&rr(()=>{ft&&ea(ft,Se,ue,ne),ot&&Su(ue,ne,Se,"updated")},Fe)},R=(ne,ue,Se,Fe,Le,Ke,ie)=>{for(let ge=0;ge<ue.length;ge++){const be=ne[ge],Ie=ue[ge],ot=be.el&&(be.type===lt||!Wu(be,Ie)||be.shapeFlag&70)?d(be.el):Se;g(be,Ie,ot,null,Fe,Le,Ke,ie,!0)}},L=(ne,ue,Se,Fe,Le,Ke,ie)=>{if(Se!==Fe){for(const ge in Fe){if(lv(ge))continue;const be=Fe[ge],Ie=Se[ge];be!==Ie&&ge!=="value"&&r(ne,ge,Ie,be,ie,ue.children,Le,Ke,ae)}if(Se!==as)for(const ge in Se)!lv(ge)&&!(ge in Fe)&&r(ne,ge,Se[ge],null,ie,ue.children,Le,Ke,ae);"value"in Fe&&r(ne,"value",Se.value,Fe.value)}},P=(ne,ue,Se,Fe,Le,Ke,ie,ge,be)=>{const Ie=ue.el=ne?ne.el:a(""),ot=ue.anchor=ne?ne.anchor:a("");let{patchFlag:ve,dynamicChildren:Ve,slotScopeIds:ft}=ue;ft&&(ge=ge?ge.concat(ft):ft),ne==null?(s(Ie,Se,Fe),s(ot,Se,Fe),T(ue.children,Se,ot,Le,Ke,ie,ge,be)):ve>0&&ve&64&&Ve&&ne.dynamicChildren?(R(ne.dynamicChildren,Ve,Se,Le,Ke,ie,ge),(ue.key!=null||Le&&ue===Le.subTree)&&a$(ne,ue,!0)):Y(ne,ue,Se,ot,Le,Ke,ie,ge,be)},V=(ne,ue,Se,Fe,Le,Ke,ie,ge,be)=>{ue.slotScopeIds=ge,ne==null?ue.shapeFlag&512?Le.ctx.activate(ue,Se,Fe,ie,be):H(ue,Se,Fe,Le,Ke,ie,be):F(ne,ue,be)},H=(ne,ue,Se,Fe,Le,Ke,ie)=>{const ge=ne.component=eY(ne,Fe,Le);if(sy(ne)&&(ge.ctx.renderer=Be),tY(ge),ge.asyncDep){if(Le&&Le.registerDep(ge,M),!ne.el){const be=ge.subTree=fe(fr);b(null,be,ue,Se)}return}M(ge,ne,ue,Se,Le,Ke,ie)},F=(ne,ue,Se)=>{const Fe=ue.component=ne.component;if(gq(ne,ue,Se))if(Fe.asyncDep&&!Fe.asyncResolved){B(Fe,ue,Se);return}else Fe.next=ue,cq(Fe.update),Fe.update();else ue.component=ne.component,ue.el=ne.el,Fe.vnode=ue},M=(ne,ue,Se,Fe,Le,Ke,ie)=>{const ge=()=>{if(ne.isMounted){let{next:ot,bu:ve,u:Ve,parent:ft,vnode:K}=ne,E=ot,I;Iu(ne,!1),ot?(ot.el=K.el,B(ne,ot,ie)):ot=K,ve&&cv(ve),(I=ot.props&&ot.props.onVnodeBeforeUpdate)&&ea(I,ft,ot,K),Iu(ne,!0);const G=i2(ne),Z=ne.subTree;ne.subTree=G,g(Z,G,d(Z.el),pe(Z),ne,Le,Ke),ot.el=G.el,E===null&&vq(ne,G.el),Ve&&rr(Ve,Le),(I=ot.props&&ot.props.onVnodeUpdated)&&rr(()=>ea(I,ft,ot,K),Le)}else{let ot;const{el:ve,props:Ve}=ue,{bm:ft,m:K,parent:E}=ne,I=Nk(ue);if(Iu(ne,!1),ft&&cv(ft),!I&&(ot=Ve&&Ve.onVnodeBeforeMount)&&ea(ot,E,ue),Iu(ne,!0),ve&&qe){const G=()=>{ne.subTree=i2(ne),qe(ve,ne.subTree,ne,Le,null)};I?ue.type.__asyncLoader().then(()=>!ne.isUnmounted&&G()):G()}else{const G=ne.subTree=i2(ne);g(null,G,Se,Fe,ne,Le,Ke),ue.el=G.el}if(K&&rr(K,Le),!I&&(ot=Ve&&Ve.onVnodeMounted)){const G=ue;rr(()=>ea(ot,E,G),Le)}ue.shapeFlag&256&&ne.a&&rr(ne.a,Le),ne.isMounted=!0,ue=Se=Fe=null}},be=ne.effect=new qC(ge,()=>wP(ne.update),ne.scope),Ie=ne.update=be.run.bind(be);Ie.id=ne.uid,Iu(ne,!0),Ie()},B=(ne,ue,Se)=>{ue.component=ne;const Fe=ne.vnode.props;ne.vnode=ue,ne.next=null,Oq(ne,ue.props,Fe,Se),Lq(ne,ue.children,Se),zc(),n$(void 0,ne.update),Vc()},Y=(ne,ue,Se,Fe,Le,Ke,ie,ge,be=!1)=>{const Ie=ne&&ne.children,ot=ne?ne.shapeFlag:0,ve=ue.children,{patchFlag:Ve,shapeFlag:ft}=ue;if(Ve>0){if(Ve&128){ee(Ie,ve,Se,Fe,Le,Ke,ie,ge,be);return}else if(Ve&256){J(Ie,ve,Se,Fe,Le,Ke,ie,ge,be);return}}ft&8?(ot&16&&ae(Ie,Le,Ke),ve!==Ie&&c(Se,ve)):ot&16?ft&16?ee(Ie,ve,Se,Fe,Le,Ke,ie,ge,be):ae(Ie,Le,Ke,!0):(ot&8&&c(Se,""),ft&16&&T(ve,Se,Fe,Le,Ke,ie,ge,be))},J=(ne,ue,Se,Fe,Le,Ke,ie,ge,be)=>{ne=ne||Bd,ue=ue||Bd;const Ie=ne.length,ot=ue.length,ve=Math.min(Ie,ot);let Ve;for(Ve=0;Ve<ve;Ve++){const ft=ue[Ve]=be?_l(ue[Ve]):na(ue[Ve]);g(ne[Ve],ft,Se,null,Le,Ke,ie,ge,be)}Ie>ot?ae(ne,Le,Ke,!0,!1,ve):T(ue,Se,Fe,Le,Ke,ie,ge,be,ve)},ee=(ne,ue,Se,Fe,Le,Ke,ie,ge,be)=>{let Ie=0;const ot=ue.length;let ve=ne.length-1,Ve=ot-1;for(;Ie<=ve&&Ie<=Ve;){const ft=ne[Ie],K=ue[Ie]=be?_l(ue[Ie]):na(ue[Ie]);if(Wu(ft,K))g(ft,K,Se,null,Le,Ke,ie,ge,be);else break;Ie++}for(;Ie<=ve&&Ie<=Ve;){const ft=ne[ve],K=ue[Ve]=be?_l(ue[Ve]):na(ue[Ve]);if(Wu(ft,K))g(ft,K,Se,null,Le,Ke,ie,ge,be);else break;ve--,Ve--}if(Ie>ve){if(Ie<=Ve){const ft=Ve+1,K=ft<ot?ue[ft].el:Fe;for(;Ie<=Ve;)g(null,ue[Ie]=be?_l(ue[Ie]):na(ue[Ie]),Se,K,Le,Ke,ie,ge,be),Ie++}}else if(Ie>Ve)for(;Ie<=ve;)re(ne[Ie],Le,Ke,!0),Ie++;else{const ft=Ie,K=Ie,E=new Map;for(Ie=K;Ie<=Ve;Ie++){const Dt=ue[Ie]=be?_l(ue[Ie]):na(ue[Ie]);Dt.key!=null&&E.set(Dt.key,Ie)}let I,G=0;const Z=Ve-K+1;let he=!1,Te=0;const bt=new Array(Z);for(Ie=0;Ie<Z;Ie++)bt[Ie]=0;for(Ie=ft;Ie<=ve;Ie++){const Dt=ne[Ie];if(G>=Z){re(Dt,Le,Ke,!0);continue}let qt;if(Dt.key!=null)qt=E.get(Dt.key);else for(I=K;I<=Ve;I++)if(bt[I-K]===0&&Wu(Dt,ue[I])){qt=I;break}qt===void 0?re(Dt,Le,Ke,!0):(bt[qt-K]=Ie+1,qt>=Te?Te=qt:he=!0,g(Dt,ue[qt],Se,null,Le,Ke,ie,ge,be),G++)}const Lt=he?Hq(bt):Bd;for(I=Lt.length-1,Ie=Z-1;Ie>=0;Ie--){const Dt=K+Ie,qt=ue[Dt],un=Dt+1<ot?ue[Dt+1].el:Fe;bt[Ie]===0?g(null,qt,Se,un,Le,Ke,ie,ge,be):he&&(I<0||Ie!==Lt[I]?te(qt,Se,un,2):I--)}}},te=(ne,ue,Se,Fe,Le=null)=>{const{el:Ke,type:ie,transition:ge,children:be,shapeFlag:Ie}=ne;if(Ie&6){te(ne.component.subTree,ue,Se,Fe);return}if(Ie&128){ne.suspense.move(ue,Se,Fe);return}if(Ie&64){ie.move(ne,ue,Se,Be);return}if(ie===lt){s(Ke,ue,Se);for(let ve=0;ve<be.length;ve++)te(be[ve],ue,Se,Fe);s(ne.anchor,ue,Se);return}if(ie===l2){y(ne,ue,Se);return}if(Fe!==2&&Ie&1&&ge)if(Fe===0)ge.beforeEnter(Ke),s(Ke,ue,Se),rr(()=>ge.enter(Ke),Le);else{const{leave:ve,delayLeave:Ve,afterLeave:ft}=ge,K=()=>s(Ke,ue,Se),E=()=>{ve(Ke,()=>{K(),ft&&ft()})};Ve?Ve(Ke,K,E):E()}else s(Ke,ue,Se)},re=(ne,ue,Se,Fe=!1,Le=!1)=>{const{type:Ke,props:ie,ref:ge,children:be,dynamicChildren:Ie,shapeFlag:ot,patchFlag:ve,dirs:Ve}=ne;if(ge!=null&&Mk(ge,null,Se,ne,!0),ot&256){ue.ctx.deactivate(ne);return}const ft=ot&1&&Ve,K=!Nk(ne);let E;if(K&&(E=ie&&ie.onVnodeBeforeUnmount)&&ea(E,ue,ne),ot&6)Q(ne.component,Se,Fe);else{if(ot&128){ne.suspense.unmount(Se,Fe);return}ft&&Su(ne,null,ue,"beforeUnmount"),ot&64?ne.type.remove(ne,ue,Se,Le,Be,Fe):Ie&&(Ke!==lt||ve>0&&ve&64)?ae(Ie,ue,Se,!1,!0):(Ke===lt&&ve&384||!Le&&ot&16)&&ae(be,ue,Se),Fe&&$e(ne)}(K&&(E=ie&&ie.onVnodeUnmounted)||ft)&&rr(()=>{E&&ea(E,ue,ne),ft&&Su(ne,null,ue,"unmounted")},Se)},$e=ne=>{const{type:ue,el:Se,anchor:Fe,transition:Le}=ne;if(ue===lt){se(Se,Fe);return}if(ue===l2){k(ne);return}const Ke=()=>{o(Se),Le&&!Le.persisted&&Le.afterLeave&&Le.afterLeave()};if(ne.shapeFlag&1&&Le&&!Le.persisted){const{leave:ie,delayLeave:ge}=Le,be=()=>ie(Se,Ke);ge?ge(ne.el,Ke,be):be()}else Ke()},se=(ne,ue)=>{let Se;for(;ne!==ue;)Se=f(ne),o(ne),ne=Se;o(ue)},Q=(ne,ue,Se)=>{const{bum:Fe,scope:Le,update:Ke,subTree:ie,um:ge}=ne;Fe&&cv(Fe),Le.stop(),Ke&&(Ke.active=!1,re(ie,ne,ue,Se)),ge&&rr(ge,ue),rr(()=>{ne.isUnmounted=!0},ue),ue&&ue.pendingBranch&&!ue.isUnmounted&&ne.asyncDep&&!ne.asyncResolved&&ne.suspenseId===ue.pendingId&&(ue.deps--,ue.deps===0&&ue.resolve())},ae=(ne,ue,Se,Fe=!1,Le=!1,Ke=0)=>{for(let ie=Ke;ie<ne.length;ie++)re(ne[ie],ue,Se,Fe,Le)},pe=ne=>ne.shapeFlag&6?pe(ne.component.subTree):ne.shapeFlag&128?ne.suspense.next():f(ne.anchor||ne.el),ke=(ne,ue,Se)=>{ne==null?ue._vnode&&re(ue._vnode,null,null,!0):g(ue._vnode||null,ne,ue,null,null,null,Se),CP(),ue._vnode=ne},Be={p:g,um:re,m:te,r:$e,mt:H,mc:T,pc:Y,pbc:R,n:pe,o:e};let je,qe;return t&&([je,qe]=t(Be)),{render:ke,hydrate:je,createApp:zq(ke,je)}}function Iu({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function a$(e,t,n=!1){const s=e.children,o=t.children;if(Et(s)&&Et(o))for(let r=0;r<s.length;r++){const i=s[r];let a=o[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[r]=_l(o[r]),a.el=i.el),n||a$(i,a))}}function Hq(e){const t=e.slice(),n=[0];let s,o,r,i,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,e[n[a]]<u?r=a+1:i=a;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}const Uq=e=>e.__isTeleport,ep=e=>e&&(e.disabled||e.disabled===""),EN=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,Ok=(e,t)=>{const n=e&&e.to;return Bt(n)?t?t(n):null:n},jq={__isTeleport:!0,process(e,t,n,s,o,r,i,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:g}}=u,v=ep(t.props);let{shapeFlag:b,children:w,dynamicChildren:y}=t;if(e==null){const k=t.el=m(""),x=t.anchor=m("");h(k,n,s),h(x,n,s);const C=t.target=Ok(t.props,p),S=t.targetAnchor=m("");C&&(h(S,C),i=i||EN(C));const T=(A,R)=>{b&16&&c(w,A,R,o,r,i,a,l)};v?T(n,x):C&&T(C,S)}else{t.el=e.el;const k=t.anchor=e.anchor,x=t.target=e.target,C=t.targetAnchor=e.targetAnchor,S=ep(e.props),T=S?n:x,A=S?k:C;if(i=i||EN(x),y?(f(e.dynamicChildren,y,T,o,r,i,a),a$(e,t,!0)):l||d(e,t,T,A,o,r,i,a,!1),v)S||w0(t,n,k,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const R=t.target=Ok(t.props,p);R&&w0(t,R,null,u,0)}else S&&w0(t,x,C,u,1)}},remove(e,t,n,s,{um:o,o:{remove:r}},i){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:d,props:f}=e;if(d&&r(c),(i||!ep(f))&&(r(u),a&16))for(let h=0;h<l.length;h++){const p=l[h];o(p,t,n,!0,!!p.dynamicChildren)}},move:w0,hydrate:Gq};function w0(e,t,n,{o:{insert:s},m:o},r=2){r===0&&s(e.targetAnchor,t,n);const{el:i,anchor:a,shapeFlag:l,children:u,props:c}=e,d=r===2;if(d&&s(i,t,n),(!d||ep(c))&&l&16)for(let f=0;f<u.length;f++)o(u[f],t,n,2);d&&s(a,t,n)}function Gq(e,t,n,s,o,r,{o:{nextSibling:i,parentNode:a,querySelector:l}},u){const c=t.target=Ok(t.props,l);if(c){const d=c._lpa||c.firstChild;t.shapeFlag&16&&(ep(t.props)?(t.anchor=u(i(e),t,a(e),n,s,o,r),t.targetAnchor=d):(t.anchor=i(e),t.targetAnchor=u(d,t,c,n,s,o,r)),c._lpa=t.targetAnchor&&i(t.targetAnchor))}return t.anchor&&i(t.anchor)}const pm=jq,l$="components",Kq="directives";function Ne(e,t){return u$(l$,e,!0,t)||e}const zP=Symbol();function an(e){return Bt(e)?u$(l$,e,!1)||e:e||zP}function Or(e){return u$(Kq,e)}function u$(e,t,n=!0,s=!1){const o=Tr||po;if(o){const r=o.type;if(e===l$){const a=KP(r);if(a&&(a===t||a===ai(t)||a===$r(ai(t))))return r}const i=TN(o[e]||r[e],t)||TN(o.appContext[e],t);return!i&&s?r:i}}function TN(e,t){return e&&(e[t]||e[ai(t)]||e[$r(ai(t))])}const lt=Symbol(void 0),mm=Symbol(void 0),fr=Symbol(void 0),l2=Symbol(void 0),tp=[];let sc=null;function _(e=!1){tp.push(sc=e?null:[])}function qq(){tp.pop(),sc=tp[tp.length-1]||null}let Yv=1;function _N(e){Yv+=e}function VP(e){return e.dynamicChildren=Yv>0?sc||Bd:null,qq(),Yv>0&&sc&&sc.push(e),e}function U(e,t,n,s,o,r){return VP(q(e,t,n,s,o,r,!0))}function ye(e,t,n,s,o){return VP(fe(e,t,n,s,o,!0))}function Ts(e){return e?e.__v_isVNode===!0:!1}function Wu(e,t){return e.type===t.type&&e.key===t.key}const ry="__vInternal",WP=({key:e})=>e!=null?e:null,dv=({ref:e,ref_key:t,ref_for:n})=>e!=null?Bt(e)||vs(e)||zt(e)?{i:Tr,r:e,k:t,f:!!n}:e:null;function q(e,t=null,n=null,s=0,o=null,r=e===lt?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&WP(t),ref:t&&dv(t),scopeId:ny,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return a?(c$(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Bt(n)?8:16),Yv>0&&!i&&sc&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&sc.push(l),l}const fe=Yq;function Yq(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===zP)&&(e=fr),Ts(e)){const a=vc(e,t,!0);return n&&c$(a,n),a}if(iY(e)&&(e=e.__vccOpts),t){t=ql(t);let{class:a,style:l}=t;a&&!Bt(a)&&(t.class=W(a)),rn(l)&&(mP(l)&&!Et(l)&&(l=bo({},l)),t.style=it(l))}const i=Bt(e)?1:bq(e)?128:Uq(e)?64:rn(e)?4:zt(e)?2:0;return q(e,t,n,s,o,i,r,!0)}function ql(e){return e?mP(e)||ry in e?bo({},e):e:null}function vc(e,t,n=!1){const{props:s,ref:o,patchFlag:r,children:i}=e,a=t?Wn(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&WP(a),ref:t&&t.ref?n&&o?Et(o)?o.concat(dv(t)):[o,dv(t)]:dv(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==lt?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vc(e.ssContent),ssFallback:e.ssFallback&&vc(e.ssFallback),el:e.el,anchor:e.anchor}}function Yt(e=" ",t=0){return fe(mm,null,e,t)}function me(e="",t=!1){return t?(_(),ye(fr,null,e)):fe(fr,null,e)}function na(e){return e==null||typeof e=="boolean"?fe(fr):Et(e)?fe(lt,null,e.slice()):typeof e=="object"?_l(e):fe(mm,null,String(e))}function _l(e){return e.el===null||e.memo?e:vc(e)}function c$(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Et(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),c$(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(ry in t)?t._ctx=Tr:o===3&&Tr&&(Tr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else zt(t)?(t={default:t,_ctx:Tr},n=32):(t=String(t),s&64?(n=16,t=[Yt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Wn(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=W([t.class,s.class]));else if(o==="style")t.style=it([t.style,s.style]);else if(Zb(o)){const r=t[o],i=s[o];i&&r!==i&&!(Et(r)&&r.includes(i))&&(t[o]=r?[].concat(r,i):i)}else o!==""&&(t[o]=s[o])}return t}function ea(e,t,n,s=null){si(e,t,7,[n,s])}function Zt(e,t,n,s){let o;const r=n&&n[s];if(Et(e)||Bt(e)){o=new Array(e.length);for(let i=0,a=e.length;i<a;i++)o[i]=t(e[i],i,void 0,r&&r[i])}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,r&&r[i])}else if(rn(e))if(e[Symbol.iterator])o=Array.from(e,(i,a)=>t(i,a,void 0,r&&r[a]));else{const i=Object.keys(e);o=new Array(i.length);for(let a=0,l=i.length;a<l;a++){const u=i[a];o[a]=t(e[u],u,a,r&&r[a])}}else o=[];return n&&(n[s]=o),o}function Yl(e,t){for(let n=0;n<t.length;n++){const s=t[n];if(Et(s))for(let o=0;o<s.length;o++)e[s[o].name]=s[o].fn;else s&&(e[s.name]=s.fn)}return e}function Pe(e,t,n={},s,o){if(Tr.isCE)return fe("slot",t==="default"?null:{name:t},s&&s());let r=e[t];r&&r._c&&(r._d=!1),_();const i=r&&HP(r(n)),a=ye(lt,{key:n.key||`_${t}`},i||(s?s():[]),i&&e._===1?64:-2);return!o&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function HP(e){return e.some(t=>Ts(t)?!(t.type===fr||t.type===lt&&!HP(t.children)):!0)?e:null}function Xq(e){const t={};for(const n in e)t[uv(n)]=e[n];return t}const Pk=e=>e?UP(e)?d$(e)||e.proxy:Pk(e.parent):null,Xv=bo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pk(e.parent),$root:e=>Pk(e.root),$emit:e=>e.emit,$options:e=>RP(e),$forceUpdate:e=>()=>wP(e.update),$nextTick:e=>vt.bind(e.proxy),$watch:e=>wq.bind(e)}),Zq={get({_:e},t){const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(s!==as&&en(s,t))return i[t]=1,s[t];if(o!==as&&en(o,t))return i[t]=2,o[t];if((u=e.propsOptions[0])&&en(u,t))return i[t]=3,r[t];if(n!==as&&en(n,t))return i[t]=4,n[t];Ak&&(i[t]=0)}}const c=Xv[t];let d,f;if(c)return t==="$attrs"&&Mr(e,"get",t),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==as&&en(n,t))return i[t]=4,n[t];if(f=l.config.globalProperties,en(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return o!==as&&en(o,t)?(o[t]=n,!0):s!==as&&en(s,t)?(s[t]=n,!0):en(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r}},i){let a;return!!n[i]||e!==as&&en(e,i)||t!==as&&en(t,i)||(a=r[0])&&en(a,i)||en(s,i)||en(Xv,i)||en(o.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?this.set(e,t,n.get(),null):n.value!=null&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},Jq=BP();let Qq=0;function eY(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Jq,r={uid:Qq++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new nP(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:OP(s,o),emitsOptions:SP(s,o),emit:null,emitted:null,propsDefaults:as,inheritAttrs:s.inheritAttrs,ctx:as,data:as,props:as,attrs:as,slots:as,refs:as,setupState:as,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=hq.bind(null,r),e.ce&&e.ce(r),r}let po=null;const jt=()=>po||Tr,Qd=e=>{po=e,e.scope.on()},oc=()=>{po&&po.scope.off(),po=null};function UP(e){return e.vnode.shapeFlag&4}let Ep=!1;function tY(e,t=!1){Ep=t;const{props:n,children:s}=e.vnode,o=UP(e);Mq(e,n,o,t),Fq(e,s);const r=o?nY(e,t):void 0;return Ep=!1,r}function nY(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=xp(new Proxy(e.ctx,Zq));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?GP(e):null;Qd(e),zc();const r=ja(s,e,0,[e.props,o]);if(Vc(),oc(),gc(r)){if(r.then(oc,oc),t)return r.then(i=>{NN(e,i,t)}).catch(i=>{ty(i,e,0)});e.asyncDep=r}else NN(e,r,t)}else jP(e,t)}function NN(e,t,n){zt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:rn(t)&&(e.setupState=jv(t)),jP(e,n)}let AN;function jP(e,t,n){const s=e.type;if(!e.render){if(!t&&AN&&!s.render){const o=s.template;if(o){const{isCustomElement:r,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:l}=s,u=bo(bo({isCustomElement:r,delimiters:a},i),l);s.render=AN(o,u)}}e.render=s.render||In}Qd(e),zc(),_q(e),Vc(),oc()}function sY(e){return new Proxy(e.attrs,{get(t,n){return Mr(e,"get","$attrs"),t[n]}})}function GP(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=sY(e))},slots:e.slots,emit:e.emit,expose:t}}function d$(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(jv(xp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xv)return Xv[n](e)}}))}const oY=/(?:^|[-_])(\w)/g,rY=e=>e.replace(oY,t=>t.toUpperCase()).replace(/[-_]/g,"");function KP(e){return zt(e)&&e.displayName||e.name}function qP(e,t,n=!1){let s=KP(t);if(!s&&t.__file){const o=t.__file.match(/([^/\\]+)\.\w+$/);o&&(s=o[1])}if(!s&&e&&e.parent){const o=r=>{for(const i in r)if(r[i]===t)return i};s=o(e.components||e.parent.type.components)||o(e.appContext.components)}return s?rY(s):n?"App":"Anonymous"}function iY(e){return zt(e)&&"__vccOpts"in e}const O=(e,t)=>nq(e,t,Ep);function gm(){return XP().slots}function YP(){return XP().attrs}function XP(){const e=jt();return e.setupContext||(e.setupContext=GP(e))}function at(e,t,n){const s=arguments.length;return s===2?rn(t)&&!Et(t)?Ts(t)?fe(e,null,[t]):fe(e,t):fe(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ts(n)&&(n=[n]),fe(e,t,n))}const aY="3.2.31",lY="http://www.w3.org/2000/svg",Hu=typeof document!="undefined"?document:null,DN=Hu&&Hu.createElement("template"),uY={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t?Hu.createElementNS(lY,e):Hu.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Hu.createTextNode(e),createComment:e=>Hu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Hu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,s,o,r){const i=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{DN.innerHTML=s?`<svg>${e}</svg>`:e;const a=DN.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function cY(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function dY(e,t,n){const s=e.style,o=Bt(n);if(n&&!o){for(const r in n)Fk(s,r,n[r]);if(t&&!Bt(t))for(const r in t)n[r]==null&&Fk(s,r,"")}else{const r=s.display;o?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=r)}}const RN=/\s*!important$/;function Fk(e,t,n){if(Et(n))n.forEach(s=>Fk(e,t,s));else if(t.startsWith("--"))e.setProperty(t,n);else{const s=fY(e,t);RN.test(n)?e.setProperty(su(s),n.replace(RN,""),"important"):e[s]=n}}const MN=["Webkit","Moz","ms"],u2={};function fY(e,t){const n=u2[t];if(n)return n;let s=ai(t);if(s!=="filter"&&s in e)return u2[t]=s;s=$r(s);for(let o=0;o<MN.length;o++){const r=MN[o]+s;if(r in e)return u2[t]=r}return t}const ON="http://www.w3.org/1999/xlink";function hY(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ON,t.slice(6,t.length)):e.setAttributeNS(ON,t,n);else{const r=fK(t);n==null||r&&!ZO(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function pY(e,t,n,s,o,r,i){if(t==="innerHTML"||t==="textContent"){s&&i(s,o,r),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const a=n==null?"":n;(e.value!==a||e.tagName==="OPTION")&&(e.value=a),n==null&&e.removeAttribute(t);return}if(n===""||n==null){const a=typeof e[t];if(a==="boolean"){e[t]=ZO(n);return}else if(n==null&&a==="string"){e[t]="",e.removeAttribute(t);return}else if(a==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=n}catch{}}let Zv=Date.now,ZP=!1;if(typeof window!="undefined"){Zv()>document.createEvent("Event").timeStamp&&(Zv=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);ZP=!!(e&&Number(e[1])<=53)}let Lk=0;const mY=Promise.resolve(),gY=()=>{Lk=0},vY=()=>Lk||(mY.then(gY),Lk=Zv());function Dl(e,t,n,s){e.addEventListener(t,n,s)}function bY(e,t,n,s){e.removeEventListener(t,n,s)}function yY(e,t,n,s,o=null){const r=e._vei||(e._vei={}),i=r[t];if(s&&i)i.value=s;else{const[a,l]=wY(t);if(s){const u=r[t]=kY(s,o);Dl(e,a,u,l)}else i&&(bY(e,a,i,l),r[t]=void 0)}}const PN=/(?:Once|Passive|Capture)$/;function wY(e){let t;if(PN.test(e)){t={};let n;for(;n=e.match(PN);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[su(e.slice(2)),t]}function kY(e,t){const n=s=>{const o=s.timeStamp||Zv();(ZP||o>=n.attached-1)&&si(xY(s,n.value),t,5,[s])};return n.value=e,n.attached=vY(),n}function xY(e,t){if(Et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const FN=/^on[a-z]/,CY=(e,t,n,s,o=!1,r,i,a,l)=>{t==="class"?cY(e,s,o):t==="style"?dY(e,n,s):Zb(t)?HC(t)||yY(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):$Y(e,t,s,o))?pY(e,t,s,r,i,a,l):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),hY(e,t,s,o))};function $Y(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&FN.test(t)&&zt(n)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||FN.test(t)&&Bt(n)?!1:t in e}const kl="transition",vh="animation",Rs=(e,{slots:t})=>at(TP,QP(e),t);Rs.displayName="Transition";const JP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},SY=Rs.props=bo({},TP.props,JP),Eu=(e,t=[])=>{Et(e)?e.forEach(n=>n(...t)):e&&e(...t)},LN=e=>e?Et(e)?e.some(t=>t.length>1):e.length>1:!1;function QP(e){const t={};for(const L in e)L in JP||(t[L]=e[L]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:u=i,appearToClass:c=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,p=IY(o),m=p&&p[0],g=p&&p[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:w,onLeave:y,onLeaveCancelled:k,onBeforeAppear:x=v,onAppear:C=b,onAppearCancelled:S=w}=t,T=(L,P,V)=>{Fu(L,P?c:a),Fu(L,P?u:i),V&&V()},A=(L,P)=>{Fu(L,h),Fu(L,f),P&&P()},R=L=>(P,V)=>{const H=L?C:b,F=()=>T(P,L,V);Eu(H,[P,F]),BN(()=>{Fu(P,L?l:r),Da(P,L?c:a),LN(H)||zN(P,s,m,F)})};return bo(t,{onBeforeEnter(L){Eu(v,[L]),Da(L,r),Da(L,i)},onBeforeAppear(L){Eu(x,[L]),Da(L,l),Da(L,u)},onEnter:R(!1),onAppear:R(!0),onLeave(L,P){const V=()=>A(L,P);Da(L,d),tF(),Da(L,f),BN(()=>{Fu(L,d),Da(L,h),LN(y)||zN(L,s,g,V)}),Eu(y,[L,V])},onEnterCancelled(L){T(L,!1),Eu(w,[L])},onAppearCancelled(L){T(L,!0),Eu(S,[L])},onLeaveCancelled(L){A(L),Eu(k,[L])}})}function IY(e){if(e==null)return null;if(rn(e))return[c2(e.enter),c2(e.leave)];{const t=c2(e);return[t,t]}}function c2(e){return Uv(e)}function Da(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function Fu(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function BN(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let EY=0;function zN(e,t,n,s){const o=e._endId=++EY,r=()=>{o===e._endId&&s()};if(n)return setTimeout(r,n);const{type:i,timeout:a,propCount:l}=eF(e,t);if(!i)return s();const u=i+"end";let c=0;const d=()=>{e.removeEventListener(u,f),r()},f=h=>{h.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),e.addEventListener(u,f)}function eF(e,t){const n=window.getComputedStyle(e),s=p=>(n[p]||"").split(", "),o=s(kl+"Delay"),r=s(kl+"Duration"),i=VN(o,r),a=s(vh+"Delay"),l=s(vh+"Duration"),u=VN(a,l);let c=null,d=0,f=0;t===kl?i>0&&(c=kl,d=i,f=r.length):t===vh?u>0&&(c=vh,d=u,f=l.length):(d=Math.max(i,u),c=d>0?i>u?kl:vh:null,f=c?c===kl?r.length:l.length:0);const h=c===kl&&/\b(transform|all)(,|$)/.test(n[kl+"Property"]);return{type:c,timeout:d,propCount:f,hasTransform:h}}function VN(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>WN(n)+WN(e[s])))}function WN(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function tF(){return document.body.offsetHeight}const nF=new WeakMap,sF=new WeakMap,TY={name:"TransitionGroup",props:bo({},SY,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=jt(),s=EP();let o,r;return Ki(()=>{if(!o.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!RY(o[0].el,n.vnode.el,i))return;o.forEach(NY),o.forEach(AY);const a=o.filter(DY);tF(),a.forEach(l=>{const u=l.el,c=u.style;Da(u,i),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,Fu(u,i))};u.addEventListener("transitionend",d)})}),()=>{const i=_n(e),a=QP(i);let l=i.tag||lt;o=r,r=t.default?r$(t.default()):[];for(let u=0;u<r.length;u++){const c=r[u];c.key!=null&&Ip(c,Sp(c,a,s,n))}if(o)for(let u=0;u<o.length;u++){const c=o[u];Ip(c,Sp(c,a,s,n)),nF.set(c,c.el.getBoundingClientRect())}return fe(l,null,r)}}},_Y=TY;function NY(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function AY(e){sF.set(e,e.el.getBoundingClientRect())}function DY(e){const t=nF.get(e),n=sF.get(e),s=t.left-n.left,o=t.top-n.top;if(s||o){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${o}px)`,r.transitionDuration="0s",e}}function RY(e,t,n){const s=e.cloneNode();e._vtc&&e._vtc.forEach(i=>{i.split(/\s+/).forEach(a=>a&&s.classList.remove(a))}),n.split(/\s+/).forEach(i=>i&&s.classList.add(i)),s.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(s);const{hasTransform:r}=eF(s);return o.removeChild(s),r}const ef=e=>{const t=e.props["onUpdate:modelValue"];return Et(t)?n=>cv(t,n):t};function MY(e){e.target.composing=!0}function HN(e){const t=e.target;t.composing&&(t.composing=!1,OY(t,"input"))}function OY(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const f$={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e._assign=ef(o);const r=s||o.props&&o.props.type==="number";Dl(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;n?a=a.trim():r&&(a=Uv(a)),e._assign(a)}),n&&Dl(e,"change",()=>{e.value=e.value.trim()}),t||(Dl(e,"compositionstart",MY),Dl(e,"compositionend",HN),Dl(e,"change",HN))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:o}},r){if(e._assign=ef(r),e.composing||document.activeElement===e&&(n||s&&e.value.trim()===t||(o||e.type==="number")&&Uv(e.value)===t))return;const i=t==null?"":t;e.value!==i&&(e.value=i)}},Jv={deep:!0,created(e,t,n){e._assign=ef(n),Dl(e,"change",()=>{const s=e._modelValue,o=rF(e),r=e.checked,i=e._assign;if(Et(s)){const a=JO(s,o),l=a!==-1;if(r&&!l)i(s.concat(o));else if(!r&&l){const u=[...s];u.splice(a,1),i(u)}}else if(Jb(s)){const a=new Set(s);r?a.add(o):a.delete(o),i(a)}else i(iF(e,r))})},mounted:UN,beforeUpdate(e,t,n){e._assign=ef(n),UN(e,t,n)}};function UN(e,{value:t,oldValue:n},s){e._modelValue=t,Et(t)?e.checked=JO(t,s.props.value)>-1:Jb(t)?e.checked=t.has(s.props.value):t!==n&&(e.checked=Jd(t,iF(e,!0)))}const oF={created(e,{value:t},n){e.checked=Jd(t,n.props.value),e._assign=ef(n),Dl(e,"change",()=>{e._assign(rF(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e._assign=ef(s),t!==n&&(e.checked=Jd(t,s.props.value))}};function rF(e){return"_value"in e?e._value:e.value}function iF(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const PY=["ctrl","shift","alt","meta"],FY={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>PY.some(n=>e[`${n}Key`]&&!t.includes(n))},wt=(e,t)=>(n,...s)=>{for(let o=0;o<t.length;o++){const r=FY[t[o]];if(r&&r(n,t))return}return e(n,...s)},LY={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qt=(e,t)=>n=>{if(!("key"in n))return;const s=su(n.key);if(t.some(o=>o===s||LY[o]===s))return e(n)},cn={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):bh(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),bh(e,!0),s.enter(e)):s.leave(e,()=>{bh(e,!1)}):bh(e,t))},beforeUnmount(e,{value:t}){bh(e,t)}};function bh(e,t){e.style.display=t?e._vod:"none"}const BY=bo({patchProp:CY},uY);let jN;function aF(){return jN||(jN=Vq(BY))}const tf=(...e)=>{aF().render(...e)},lF=(...e)=>{const t=aF().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=zY(s);if(!o)return;const r=t._component;!zt(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function zY(e){return Bt(e)?document.querySelector(e):e}const VY=q("i",{class:"fa-solid fa-house"},null,-1),WY=q("span",null,"Home",-1),HY=q("i",{class:"fa-solid fa-circle-info"},null,-1),UY=q("span",null,"About",-1),jY=q("i",{class:"fa-solid fa-cog"},null,-1),GY=q("span",null,"Settings",-1),KY=xe({setup(e){return(t,n)=>{const s=Ne("router-link"),o=Ne("router-view");return _(),U(lt,null,[q("div",{id:"nav",class:"fbox-h fcenter unselectable anim",onDragstart:n[0]||(n[0]=r=>r.preventDefault())},[fe(s,{class:"rlink",to:"/"},{default:de(()=>[VY,WY]),_:1}),fe(s,{class:"rlink",to:"/about"},{default:de(()=>[HY,UY]),_:1}),fe(s,{class:"rlink",to:"/settings"},{default:de(()=>[jY,GY]),_:1})],32),fe(o)],64)}}});var qY=typeof global=="object"&&global&&global.Object===Object&&global,uF=qY,YY=typeof self=="object"&&self&&self.Object===Object&&self,XY=uF||YY||Function("return this")(),qi=XY,ZY=qi.Symbol,li=ZY,cF=Object.prototype,JY=cF.hasOwnProperty,QY=cF.toString,yh=li?li.toStringTag:void 0;function eX(e){var t=JY.call(e,yh),n=e[yh];try{e[yh]=void 0;var s=!0}catch{}var o=QY.call(e);return s&&(t?e[yh]=n:delete e[yh]),o}var tX=Object.prototype,nX=tX.toString;function sX(e){return nX.call(e)}var oX="[object Null]",rX="[object Undefined]",GN=li?li.toStringTag:void 0;function Ff(e){return e==null?e===void 0?rX:oX:GN&&GN in Object(e)?eX(e):sX(e)}function Xa(e){return e!=null&&typeof e=="object"}var iX="[object Symbol]";function iy(e){return typeof e=="symbol"||Xa(e)&&Ff(e)==iX}function aX(e,t){for(var n=-1,s=e==null?0:e.length,o=Array(s);++n<s;)o[n]=t(e[n],n,e);return o}var lX=Array.isArray,ui=lX,uX=1/0,KN=li?li.prototype:void 0,qN=KN?KN.toString:void 0;function dF(e){if(typeof e=="string")return e;if(ui(e))return aX(e,dF)+"";if(iy(e))return qN?qN.call(e):"";var t=e+"";return t=="0"&&1/e==-uX?"-0":t}var cX=/\s/;function dX(e){for(var t=e.length;t--&&cX.test(e.charAt(t)););return t}var fX=/^\s+/;function hX(e){return e&&e.slice(0,dX(e)+1).replace(fX,"")}function Vi(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var YN=0/0,pX=/^[-+]0x[0-9a-f]+$/i,mX=/^0b[01]+$/i,gX=/^0o[0-7]+$/i,vX=parseInt;function XN(e){if(typeof e=="number")return e;if(iy(e))return YN;if(Vi(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Vi(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=hX(e);var n=mX.test(e);return n||gX.test(e)?vX(e.slice(2),n?2:8):pX.test(e)?YN:+e}function fF(e){return e}var bX="[object AsyncFunction]",yX="[object Function]",wX="[object GeneratorFunction]",kX="[object Proxy]";function hF(e){if(!Vi(e))return!1;var t=Ff(e);return t==yX||t==wX||t==bX||t==kX}var xX=qi["__core-js_shared__"],d2=xX,ZN=function(){var e=/[^.]+$/.exec(d2&&d2.keys&&d2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function CX(e){return!!ZN&&ZN in e}var $X=Function.prototype,SX=$X.toString;function Wc(e){if(e!=null){try{return SX.call(e)}catch{}try{return e+""}catch{}}return""}var IX=/[\\^$.*+?()[\]{}|]/g,EX=/^\[object .+?Constructor\]$/,TX=Function.prototype,_X=Object.prototype,NX=TX.toString,AX=_X.hasOwnProperty,DX=RegExp("^"+NX.call(AX).replace(IX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function RX(e){if(!Vi(e)||CX(e))return!1;var t=hF(e)?DX:EX;return t.test(Wc(e))}function MX(e,t){return e==null?void 0:e[t]}function Hc(e,t){var n=MX(e,t);return RX(n)?n:void 0}var OX=Hc(qi,"WeakMap"),Bk=OX,JN=Object.create,PX=function(){function e(){}return function(t){if(!Vi(t))return{};if(JN)return JN(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),FX=PX;function LX(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function BX(){}function zX(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var VX=800,WX=16,HX=Date.now;function UX(e){var t=0,n=0;return function(){var s=HX(),o=WX-(s-n);if(n=s,o>0){if(++t>=VX)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function jX(e){return function(){return e}}var GX=function(){try{var e=Hc(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Qv=GX,KX=Qv?function(e,t){return Qv(e,"toString",{configurable:!0,enumerable:!1,value:jX(t),writable:!0})}:fF,qX=KX,YX=UX(qX),pF=YX;function XX(e,t){for(var n=-1,s=e==null?0:e.length;++n<s&&t(e[n],n,e)!==!1;);return e}function ZX(e,t,n,s){for(var o=e.length,r=n+(s?1:-1);s?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function JX(e){return e!==e}function QX(e,t,n){for(var s=n-1,o=e.length;++s<o;)if(e[s]===t)return s;return-1}function eZ(e,t,n){return t===t?QX(e,t,n):ZX(e,JX,n)}function tZ(e,t){var n=e==null?0:e.length;return!!n&&eZ(e,t,0)>-1}var nZ=9007199254740991,sZ=/^(?:0|[1-9]\d*)$/;function h$(e,t){var n=typeof e;return t=t==null?nZ:t,!!t&&(n=="number"||n!="symbol"&&sZ.test(e))&&e>-1&&e%1==0&&e<t}function mF(e,t,n){t=="__proto__"&&Qv?Qv(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function p$(e,t){return e===t||e!==e&&t!==t}var oZ=Object.prototype,rZ=oZ.hasOwnProperty;function m$(e,t,n){var s=e[t];(!(rZ.call(e,t)&&p$(s,n))||n===void 0&&!(t in e))&&mF(e,t,n)}function ay(e,t,n,s){var o=!n;n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),o?mF(n,a,l):m$(n,a,l)}return n}var QN=Math.max;function gF(e,t,n){return t=QN(t===void 0?e.length-1:t,0),function(){for(var s=arguments,o=-1,r=QN(s.length-t,0),i=Array(r);++o<r;)i[o]=s[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=s[o];return a[t]=n(i),LX(e,this,a)}}function iZ(e,t){return pF(gF(e,t,fF),e+"")}var aZ=9007199254740991;function g$(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=aZ}function ly(e){return e!=null&&g$(e.length)&&!hF(e)}var lZ=Object.prototype;function uy(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||lZ;return e===n}function uZ(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var cZ="[object Arguments]";function eA(e){return Xa(e)&&Ff(e)==cZ}var vF=Object.prototype,dZ=vF.hasOwnProperty,fZ=vF.propertyIsEnumerable,hZ=eA(function(){return arguments}())?eA:function(e){return Xa(e)&&dZ.call(e,"callee")&&!fZ.call(e,"callee")},cy=hZ;function pZ(){return!1}var bF=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,tA=bF&&typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,mZ=tA&&tA.exports===bF,nA=mZ?qi.Buffer:void 0,gZ=nA?nA.isBuffer:void 0,vZ=gZ||pZ,Tp=vZ,bZ="[object Arguments]",yZ="[object Array]",wZ="[object Boolean]",kZ="[object Date]",xZ="[object Error]",CZ="[object Function]",$Z="[object Map]",SZ="[object Number]",IZ="[object Object]",EZ="[object RegExp]",TZ="[object Set]",_Z="[object String]",NZ="[object WeakMap]",AZ="[object ArrayBuffer]",DZ="[object DataView]",RZ="[object Float32Array]",MZ="[object Float64Array]",OZ="[object Int8Array]",PZ="[object Int16Array]",FZ="[object Int32Array]",LZ="[object Uint8Array]",BZ="[object Uint8ClampedArray]",zZ="[object Uint16Array]",VZ="[object Uint32Array]",ks={};ks[RZ]=ks[MZ]=ks[OZ]=ks[PZ]=ks[FZ]=ks[LZ]=ks[BZ]=ks[zZ]=ks[VZ]=!0;ks[bZ]=ks[yZ]=ks[AZ]=ks[wZ]=ks[DZ]=ks[kZ]=ks[xZ]=ks[CZ]=ks[$Z]=ks[SZ]=ks[IZ]=ks[EZ]=ks[TZ]=ks[_Z]=ks[NZ]=!1;function WZ(e){return Xa(e)&&g$(e.length)&&!!ks[Ff(e)]}function v$(e){return function(t){return e(t)}}var yF=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,np=yF&&typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,HZ=np&&np.exports===yF,f2=HZ&&uF.process,UZ=function(){try{var e=np&&np.require&&np.require("util").types;return e||f2&&f2.binding&&f2.binding("util")}catch{}}(),nf=UZ,sA=nf&&nf.isTypedArray,jZ=sA?v$(sA):WZ,b$=jZ,GZ=Object.prototype,KZ=GZ.hasOwnProperty;function wF(e,t){var n=ui(e),s=!n&&cy(e),o=!n&&!s&&Tp(e),r=!n&&!s&&!o&&b$(e),i=n||s||o||r,a=i?uZ(e.length,String):[],l=a.length;for(var u in e)(t||KZ.call(e,u))&&!(i&&(u=="length"||o&&(u=="offset"||u=="parent")||r&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||h$(u,l)))&&a.push(u);return a}function kF(e,t){return function(n){return e(t(n))}}var qZ=kF(Object.keys,Object),YZ=qZ,XZ=Object.prototype,ZZ=XZ.hasOwnProperty;function xF(e){if(!uy(e))return YZ(e);var t=[];for(var n in Object(e))ZZ.call(e,n)&&n!="constructor"&&t.push(n);return t}function y$(e){return ly(e)?wF(e):xF(e)}function JZ(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var QZ=Object.prototype,eJ=QZ.hasOwnProperty;function tJ(e){if(!Vi(e))return JZ(e);var t=uy(e),n=[];for(var s in e)s=="constructor"&&(t||!eJ.call(e,s))||n.push(s);return n}function w$(e){return ly(e)?wF(e,!0):tJ(e)}var nJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sJ=/^\w*$/;function oJ(e,t){if(ui(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||iy(e)?!0:sJ.test(e)||!nJ.test(e)||t!=null&&e in Object(t)}var rJ=Hc(Object,"create"),_p=rJ;function iJ(){this.__data__=_p?_p(null):{},this.size=0}function aJ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lJ="__lodash_hash_undefined__",uJ=Object.prototype,cJ=uJ.hasOwnProperty;function dJ(e){var t=this.__data__;if(_p){var n=t[e];return n===lJ?void 0:n}return cJ.call(t,e)?t[e]:void 0}var fJ=Object.prototype,hJ=fJ.hasOwnProperty;function pJ(e){var t=this.__data__;return _p?t[e]!==void 0:hJ.call(t,e)}var mJ="__lodash_hash_undefined__";function gJ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_p&&t===void 0?mJ:t,this}function bc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}bc.prototype.clear=iJ;bc.prototype.delete=aJ;bc.prototype.get=dJ;bc.prototype.has=pJ;bc.prototype.set=gJ;function vJ(){this.__data__=[],this.size=0}function dy(e,t){for(var n=e.length;n--;)if(p$(e[n][0],t))return n;return-1}var bJ=Array.prototype,yJ=bJ.splice;function wJ(e){var t=this.__data__,n=dy(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():yJ.call(t,n,1),--this.size,!0}function kJ(e){var t=this.__data__,n=dy(t,e);return n<0?void 0:t[n][1]}function xJ(e){return dy(this.__data__,e)>-1}function CJ(e,t){var n=this.__data__,s=dy(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}function rl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}rl.prototype.clear=vJ;rl.prototype.delete=wJ;rl.prototype.get=kJ;rl.prototype.has=xJ;rl.prototype.set=CJ;var $J=Hc(qi,"Map"),Np=$J;function SJ(){this.size=0,this.__data__={hash:new bc,map:new(Np||rl),string:new bc}}function IJ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function fy(e,t){var n=e.__data__;return IJ(t)?n[typeof t=="string"?"string":"hash"]:n.map}function EJ(e){var t=fy(this,e).delete(e);return this.size-=t?1:0,t}function TJ(e){return fy(this,e).get(e)}function _J(e){return fy(this,e).has(e)}function NJ(e,t){var n=fy(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}function il(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}il.prototype.clear=SJ;il.prototype.delete=EJ;il.prototype.get=TJ;il.prototype.has=_J;il.prototype.set=NJ;var AJ="Expected a function";function hy(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(AJ);var n=function(){var s=arguments,o=t?t.apply(this,s):s[0],r=n.cache;if(r.has(o))return r.get(o);var i=e.apply(this,s);return n.cache=r.set(o,i)||r,i};return n.cache=new(hy.Cache||il),n}hy.Cache=il;var DJ=500;function RJ(e){var t=hy(e,function(s){return n.size===DJ&&n.clear(),s}),n=t.cache;return t}var MJ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,OJ=/\\(\\)?/g,PJ=RJ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(MJ,function(n,s,o,r){t.push(o?r.replace(OJ,"$1"):s||n)}),t}),FJ=PJ;function LJ(e){return e==null?"":dF(e)}function py(e,t){return ui(e)?e:oJ(e,t)?[e]:FJ(LJ(e))}var BJ=1/0;function k$(e){if(typeof e=="string"||iy(e))return e;var t=e+"";return t=="0"&&1/e==-BJ?"-0":t}function CF(e,t){t=py(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[k$(t[n++])];return n&&n==s?e:void 0}function ps(e,t,n){var s=e==null?void 0:CF(e,t);return s===void 0?n:s}function x$(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}var oA=li?li.isConcatSpreadable:void 0;function zJ(e){return ui(e)||cy(e)||!!(oA&&e&&e[oA])}function my(e,t,n,s,o){var r=-1,i=e.length;for(n||(n=zJ),o||(o=[]);++r<i;){var a=e[r];t>0&&n(a)?t>1?my(a,t-1,n,s,o):x$(o,a):s||(o[o.length]=a)}return o}function VJ(e){var t=e==null?0:e.length;return t?my(e,1):[]}function WJ(e){return pF(gF(e,void 0,VJ),e+"")}var HJ=kF(Object.getPrototypeOf,Object),$F=HJ;function Ap(){if(!arguments.length)return[];var e=arguments[0];return ui(e)?e:[e]}function UJ(){this.__data__=new rl,this.size=0}function jJ(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function GJ(e){return this.__data__.get(e)}function KJ(e){return this.__data__.has(e)}var qJ=200;function YJ(e,t){var n=this.__data__;if(n instanceof rl){var s=n.__data__;if(!Np||s.length<qJ-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new il(s)}return n.set(e,t),this.size=n.size,this}function Ga(e){var t=this.__data__=new rl(e);this.size=t.size}Ga.prototype.clear=UJ;Ga.prototype.delete=jJ;Ga.prototype.get=GJ;Ga.prototype.has=KJ;Ga.prototype.set=YJ;function XJ(e,t){return e&&ay(t,y$(t),e)}function ZJ(e,t){return e&&ay(t,w$(t),e)}var SF=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,rA=SF&&typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,JJ=rA&&rA.exports===SF,iA=JJ?qi.Buffer:void 0,aA=iA?iA.allocUnsafe:void 0;function QJ(e,t){if(t)return e.slice();var n=e.length,s=aA?aA(n):new e.constructor(n);return e.copy(s),s}function eQ(e,t){for(var n=-1,s=e==null?0:e.length,o=0,r=[];++n<s;){var i=e[n];t(i,n,e)&&(r[o++]=i)}return r}function IF(){return[]}var tQ=Object.prototype,nQ=tQ.propertyIsEnumerable,lA=Object.getOwnPropertySymbols,sQ=lA?function(e){return e==null?[]:(e=Object(e),eQ(lA(e),function(t){return nQ.call(e,t)}))}:IF,C$=sQ;function oQ(e,t){return ay(e,C$(e),t)}var rQ=Object.getOwnPropertySymbols,iQ=rQ?function(e){for(var t=[];e;)x$(t,C$(e)),e=$F(e);return t}:IF,EF=iQ;function aQ(e,t){return ay(e,EF(e),t)}function TF(e,t,n){var s=t(e);return ui(e)?s:x$(s,n(e))}function zk(e){return TF(e,y$,C$)}function lQ(e){return TF(e,w$,EF)}var uQ=Hc(qi,"DataView"),Vk=uQ,cQ=Hc(qi,"Promise"),Wk=cQ,dQ=Hc(qi,"Set"),Wd=dQ,uA="[object Map]",fQ="[object Object]",cA="[object Promise]",dA="[object Set]",fA="[object WeakMap]",hA="[object DataView]",hQ=Wc(Vk),pQ=Wc(Np),mQ=Wc(Wk),gQ=Wc(Wd),vQ=Wc(Bk),Lu=Ff;(Vk&&Lu(new Vk(new ArrayBuffer(1)))!=hA||Np&&Lu(new Np)!=uA||Wk&&Lu(Wk.resolve())!=cA||Wd&&Lu(new Wd)!=dA||Bk&&Lu(new Bk)!=fA)&&(Lu=function(e){var t=Ff(e),n=t==fQ?e.constructor:void 0,s=n?Wc(n):"";if(s)switch(s){case hQ:return hA;case pQ:return uA;case mQ:return cA;case gQ:return dA;case vQ:return fA}return t});var sf=Lu,bQ=Object.prototype,yQ=bQ.hasOwnProperty;function wQ(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&yQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var kQ=qi.Uint8Array,eb=kQ;function $$(e){var t=new e.constructor(e.byteLength);return new eb(t).set(new eb(e)),t}function xQ(e,t){var n=t?$$(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var CQ=/\w*$/;function $Q(e){var t=new e.constructor(e.source,CQ.exec(e));return t.lastIndex=e.lastIndex,t}var pA=li?li.prototype:void 0,mA=pA?pA.valueOf:void 0;function SQ(e){return mA?Object(mA.call(e)):{}}function IQ(e,t){var n=t?$$(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var EQ="[object Boolean]",TQ="[object Date]",_Q="[object Map]",NQ="[object Number]",AQ="[object RegExp]",DQ="[object Set]",RQ="[object String]",MQ="[object Symbol]",OQ="[object ArrayBuffer]",PQ="[object DataView]",FQ="[object Float32Array]",LQ="[object Float64Array]",BQ="[object Int8Array]",zQ="[object Int16Array]",VQ="[object Int32Array]",WQ="[object Uint8Array]",HQ="[object Uint8ClampedArray]",UQ="[object Uint16Array]",jQ="[object Uint32Array]";function GQ(e,t,n){var s=e.constructor;switch(t){case OQ:return $$(e);case EQ:case TQ:return new s(+e);case PQ:return xQ(e,n);case FQ:case LQ:case BQ:case zQ:case VQ:case WQ:case HQ:case UQ:case jQ:return IQ(e,n);case _Q:return new s;case NQ:case RQ:return new s(e);case AQ:return $Q(e);case DQ:return new s;case MQ:return SQ(e)}}function KQ(e){return typeof e.constructor=="function"&&!uy(e)?FX($F(e)):{}}var qQ="[object Map]";function YQ(e){return Xa(e)&&sf(e)==qQ}var gA=nf&&nf.isMap,XQ=gA?v$(gA):YQ,ZQ=XQ,JQ="[object Set]";function QQ(e){return Xa(e)&&sf(e)==JQ}var vA=nf&&nf.isSet,eee=vA?v$(vA):QQ,tee=eee,nee=1,see=2,oee=4,_F="[object Arguments]",ree="[object Array]",iee="[object Boolean]",aee="[object Date]",lee="[object Error]",NF="[object Function]",uee="[object GeneratorFunction]",cee="[object Map]",dee="[object Number]",AF="[object Object]",fee="[object RegExp]",hee="[object Set]",pee="[object String]",mee="[object Symbol]",gee="[object WeakMap]",vee="[object ArrayBuffer]",bee="[object DataView]",yee="[object Float32Array]",wee="[object Float64Array]",kee="[object Int8Array]",xee="[object Int16Array]",Cee="[object Int32Array]",$ee="[object Uint8Array]",See="[object Uint8ClampedArray]",Iee="[object Uint16Array]",Eee="[object Uint32Array]",fs={};fs[_F]=fs[ree]=fs[vee]=fs[bee]=fs[iee]=fs[aee]=fs[yee]=fs[wee]=fs[kee]=fs[xee]=fs[Cee]=fs[cee]=fs[dee]=fs[AF]=fs[fee]=fs[hee]=fs[pee]=fs[mee]=fs[$ee]=fs[See]=fs[Iee]=fs[Eee]=!0;fs[lee]=fs[NF]=fs[gee]=!1;function sp(e,t,n,s,o,r){var i,a=t&nee,l=t&see,u=t&oee;if(n&&(i=o?n(e,s,o,r):n(e)),i!==void 0)return i;if(!Vi(e))return e;var c=ui(e);if(c){if(i=wQ(e),!a)return zX(e,i)}else{var d=sf(e),f=d==NF||d==uee;if(Tp(e))return QJ(e,a);if(d==AF||d==_F||f&&!o){if(i=l||f?{}:KQ(e),!a)return l?aQ(e,ZJ(i,e)):oQ(e,XJ(i,e))}else{if(!fs[d])return o?e:{};i=GQ(e,d,a)}}r||(r=new Ga);var h=r.get(e);if(h)return h;r.set(e,i),tee(e)?e.forEach(function(g){i.add(sp(g,t,n,g,e,r))}):ZQ(e)&&e.forEach(function(g,v){i.set(v,sp(g,t,n,v,e,r))});var p=u?l?lQ:zk:l?w$:y$,m=c?void 0:p(e);return XX(m||e,function(g,v){m&&(v=g,g=e[v]),m$(i,v,sp(g,t,n,v,e,r))}),i}var Tee=4;function _ee(e){return sp(e,Tee)}var Nee=1,Aee=4;function wh(e){return sp(e,Nee|Aee)}var Dee="__lodash_hash_undefined__";function Ree(e){return this.__data__.set(e,Dee),this}function Mee(e){return this.__data__.has(e)}function Dp(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new il;++t<n;)this.add(e[t])}Dp.prototype.add=Dp.prototype.push=Ree;Dp.prototype.has=Mee;function Oee(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}function DF(e,t){return e.has(t)}var Pee=1,Fee=2;function RF(e,t,n,s,o,r){var i=n&Pee,a=e.length,l=t.length;if(a!=l&&!(i&&l>a))return!1;var u=r.get(e),c=r.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=n&Fee?new Dp:void 0;for(r.set(e,t),r.set(t,e);++d<a;){var p=e[d],m=t[d];if(s)var g=i?s(m,p,d,t,e,r):s(p,m,d,e,t,r);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!Oee(t,function(v,b){if(!DF(h,b)&&(p===v||o(p,v,n,s,r)))return h.push(b)})){f=!1;break}}else if(!(p===m||o(p,m,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}function Lee(e){var t=-1,n=Array(e.size);return e.forEach(function(s,o){n[++t]=[o,s]}),n}function S$(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var Bee=1,zee=2,Vee="[object Boolean]",Wee="[object Date]",Hee="[object Error]",Uee="[object Map]",jee="[object Number]",Gee="[object RegExp]",Kee="[object Set]",qee="[object String]",Yee="[object Symbol]",Xee="[object ArrayBuffer]",Zee="[object DataView]",bA=li?li.prototype:void 0,h2=bA?bA.valueOf:void 0;function Jee(e,t,n,s,o,r,i){switch(n){case Zee:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xee:return!(e.byteLength!=t.byteLength||!r(new eb(e),new eb(t)));case Vee:case Wee:case jee:return p$(+e,+t);case Hee:return e.name==t.name&&e.message==t.message;case Gee:case qee:return e==t+"";case Uee:var a=Lee;case Kee:var l=s&Bee;if(a||(a=S$),e.size!=t.size&&!l)return!1;var u=i.get(e);if(u)return u==t;s|=zee,i.set(e,t);var c=RF(a(e),a(t),s,o,r,i);return i.delete(e),c;case Yee:if(h2)return h2.call(e)==h2.call(t)}return!1}var Qee=1,ete=Object.prototype,tte=ete.hasOwnProperty;function nte(e,t,n,s,o,r){var i=n&Qee,a=zk(e),l=a.length,u=zk(t),c=u.length;if(l!=c&&!i)return!1;for(var d=l;d--;){var f=a[d];if(!(i?f in t:tte.call(t,f)))return!1}var h=r.get(e),p=r.get(t);if(h&&p)return h==t&&p==e;var m=!0;r.set(e,t),r.set(t,e);for(var g=i;++d<l;){f=a[d];var v=e[f],b=t[f];if(s)var w=i?s(b,v,f,t,e,r):s(v,b,f,e,t,r);if(!(w===void 0?v===b||o(v,b,n,s,r):w)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var y=e.constructor,k=t.constructor;y!=k&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof k=="function"&&k instanceof k)&&(m=!1)}return r.delete(e),r.delete(t),m}var ste=1,yA="[object Arguments]",wA="[object Array]",k0="[object Object]",ote=Object.prototype,kA=ote.hasOwnProperty;function rte(e,t,n,s,o,r){var i=ui(e),a=ui(t),l=i?wA:sf(e),u=a?wA:sf(t);l=l==yA?k0:l,u=u==yA?k0:u;var c=l==k0,d=u==k0,f=l==u;if(f&&Tp(e)){if(!Tp(t))return!1;i=!0,c=!1}if(f&&!c)return r||(r=new Ga),i||b$(e)?RF(e,t,n,s,o,r):Jee(e,t,l,n,s,o,r);if(!(n&ste)){var h=c&&kA.call(e,"__wrapped__"),p=d&&kA.call(t,"__wrapped__");if(h||p){var m=h?e.value():e,g=p?t.value():t;return r||(r=new Ga),o(m,g,n,s,r)}}return f?(r||(r=new Ga),nte(e,t,n,s,o,r)):!1}function MF(e,t,n,s,o){return e===t?!0:e==null||t==null||!Xa(e)&&!Xa(t)?e!==e&&t!==t:rte(e,t,n,s,MF,o)}function ite(e,t){return e!=null&&t in Object(e)}function ate(e,t,n){t=py(t,e);for(var s=-1,o=t.length,r=!1;++s<o;){var i=k$(t[s]);if(!(r=e!=null&&n(e,i)))break;e=e[i]}return r||++s!=o?r:(o=e==null?0:e.length,!!o&&g$(o)&&h$(i,o)&&(ui(e)||cy(e)))}function lte(e,t){return e!=null&&ate(e,t,ite)}var ute=function(){return qi.Date.now()},p2=ute,cte="Expected a function",dte=Math.max,fte=Math.min;function hr(e,t,n){var s,o,r,i,a,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(cte);t=XN(t)||0,Vi(n)&&(c=!!n.leading,d="maxWait"in n,r=d?dte(XN(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f);function h(x){var C=s,S=o;return s=o=void 0,u=x,i=e.apply(S,C),i}function p(x){return u=x,a=setTimeout(v,t),c?h(x):i}function m(x){var C=x-l,S=x-u,T=t-C;return d?fte(T,r-S):T}function g(x){var C=x-l,S=x-u;return l===void 0||C>=t||C<0||d&&S>=r}function v(){var x=p2();if(g(x))return b(x);a=setTimeout(v,m(x))}function b(x){return a=void 0,f&&s?h(x):(s=o=void 0,i)}function w(){a!==void 0&&clearTimeout(a),u=0,s=l=o=a=void 0}function y(){return a===void 0?i:b(p2())}function k(){var x=p2(),C=g(x);if(s=arguments,o=this,l=x,C){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(v,t),h(l)}return a===void 0&&(a=setTimeout(v,t)),i}return k.cancel=w,k.flush=y,k}function hte(e){return Xa(e)&&ly(e)}function pte(e,t,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(n(t,e[s]))return!0;return!1}var mte=1/0;function gte(e){var t=e==null?0:e.length;return t?my(e,mte):[]}function OF(e){for(var t=-1,n=e==null?0:e.length,s={};++t<n;){var o=e[t];s[o[0]]=o[1]}return s}var vte="[object Map]",bte="[object Set]",yte=Object.prototype,wte=yte.hasOwnProperty;function kte(e){if(e==null)return!0;if(ly(e)&&(ui(e)||typeof e=="string"||typeof e.splice=="function"||Tp(e)||b$(e)||cy(e)))return!e.length;var t=sf(e);if(t==vte||t==bte)return!e.size;if(uy(e))return!xF(e).length;for(var n in e)if(wte.call(e,n))return!1;return!0}function Zo(e,t){return MF(e,t)}function I$(e){return e==null}function PF(e,t,n,s){if(!Vi(e))return e;t=py(t,e);for(var o=-1,r=t.length,i=r-1,a=e;a!=null&&++o<r;){var l=k$(t[o]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(o!=i){var c=a[l];u=s?s(c,l,a):void 0,u===void 0&&(u=Vi(c)?c:h$(t[o+1])?[]:{})}m$(a,l,u),a=a[l]}return e}function xte(e,t,n){for(var s=-1,o=t.length,r={};++s<o;){var i=t[s],a=CF(e,i);n(a,i)&&PF(r,py(i,e),a)}return r}function Cte(e,t){return xte(e,t,function(n,s){return lte(e,s)})}var $te=WJ(function(e,t){return e==null?{}:Cte(e,t)}),Ml=$te;function Ste(e,t,n){return e==null?e:PF(e,t,n)}var Ite="Expected a function";function rc(e,t,n){var s=!0,o=!0;if(typeof e!="function")throw new TypeError(Ite);return Vi(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),hr(e,t,{leading:s,maxWait:t,trailing:o})}var Ete=1/0,Tte=Wd&&1/S$(new Wd([,-0]))[1]==Ete?function(e){return new Wd(e)}:BX,_te=Tte,Nte=200;function Ate(e,t,n){var s=-1,o=tZ,r=e.length,i=!0,a=[],l=a;if(n)i=!1,o=pte;else if(r>=Nte){var u=t?null:_te(e);if(u)return S$(u);i=!1,o=DF,l=new Dp}else l=t?[]:a;e:for(;++s<r;){var c=e[s],d=t?t(c):c;if(c=n||c!==0?c:0,i&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),a.push(c)}else o(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}var Dte=iZ(function(e){return Ate(my(e,1,hte,!0))}),m2=Dte;const Rte='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Mte=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,xA=e=>Array.from(e.querySelectorAll(Rte)).filter(t=>Ote(t)&&Mte(t)),Ote=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},fv=function(e,t,...n){let s;t.includes("mouse")||t.includes("click")?s="MouseEvents":t.includes("key")?s="KeyboardEvent":s="HTMLEvents";const o=document.createEvent(s);return o.initEvent(t,...n),e.dispatchEvent(o),e},FF=e=>!e.getAttribute("aria-owns"),LF=(e,t,n)=>{const{parentNode:s}=e;if(!s)return null;const o=s.querySelectorAll(n),r=Array.prototype.indexOf.call(o,e);return o[r+t]||null},hv=e=>{!e||(e.focus(),!FF(e)&&e.click())},ts=(e,t,n,s=!1)=>{e&&t&&n&&(e==null||e.addEventListener(t,n,s))},Ss=(e,t,n,s=!1)=>{e&&t&&n&&(e==null||e.removeEventListener(t,n,s))},Pte=(e,t,n)=>{const s=function(...o){n&&n.apply(this,o),Ss(e,t,s)};ts(e,t,s)},ms=(e,t,{checkForDefaultPrevented:n=!0}={})=>o=>{const r=e==null?void 0:e(o);if(n===!1||!r)return t==null?void 0:t(o)},CA=e=>t=>t.pointerType==="mouse"?e(t):void 0;var Fte=Object.defineProperty,Lte=Object.defineProperties,Bte=Object.getOwnPropertyDescriptors,$A=Object.getOwnPropertySymbols,zte=Object.prototype.hasOwnProperty,Vte=Object.prototype.propertyIsEnumerable,SA=(e,t,n)=>t in e?Fte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wte=(e,t)=>{for(var n in t||(t={}))zte.call(t,n)&&SA(e,n,t[n]);if($A)for(var n of $A(t))Vte.call(t,n)&&SA(e,n,t[n]);return e},Hte=(e,t)=>Lte(e,Bte(t));function IA(e,t){var n;const s=Ns();return oi(()=>{s.value=e()},Hte(Wte({},t),{flush:(n=t==null?void 0:t.flush)!=null?n:"sync"})),um(s)}function gy(e){return SK()?(sP(e),!0):!1}const sn=typeof window!="undefined",No=e=>typeof e=="boolean",mn=e=>typeof e=="number",Ute=e=>typeof e=="string",g2=()=>{};function BF(e,t){function n(...s){e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})}return n}function jte(e,t={}){let n,s;return r=>{const i=N(e),a=N(t.maxWait);if(n&&clearTimeout(n),i<=0||a!==void 0&&a<=0)return s&&(clearTimeout(s),s=null),r();a&&!s&&(s=setTimeout(()=>{n&&clearTimeout(n),s=null,r()},a)),n=setTimeout(()=>{s&&clearTimeout(s),s=null,r()},i)}}function Gte(e,t=!0,n=!0){let s=0,o,r=!n;const i=()=>{o&&(clearTimeout(o),o=void 0)};return l=>{const u=N(e),c=Date.now()-s;if(i(),u<=0)return s=Date.now(),l();c>u&&(s=Date.now(),r?r=!1:l()),t&&(o=setTimeout(()=>{s=Date.now(),n||(r=!0),i(),l()},u)),!n&&!o&&(o=setTimeout(()=>r=!0,u))}}function Kte(e,t=200,n={}){return BF(jte(t,n),e)}function qte(e,t=200,n={}){if(t<=0)return e;const s=j(e.value),o=Kte(()=>{s.value=e.value},t,n);return We(e,()=>o()),s}function zF(e,t=200,n=!0,s=!0){return BF(Gte(t,n,s),e)}function Yte(e,t=!0){jt()?Ft(e):t?e():vt(e)}function yc(e,t,n={}){const{immediate:s=!0}=n,o=j(!1);let r=null;function i(){r&&(clearTimeout(r),r=null)}function a(){o.value=!1,i()}function l(...u){i(),o.value=!0,r=setTimeout(()=>{o.value=!1,r=null,e(...u)},N(t))}return s&&(o.value=!0,sn&&l()),gy(a),{isPending:o,start:l,stop:a}}function Fi(e){var t;const n=N(e);return(t=n==null?void 0:n.$el)!=null?t:n}const vm=sn?window:void 0,Xte=sn?window.document:void 0;function _s(...e){let t,n,s,o;if(Ute(e[0])?([n,s,o]=e,t=vm):[t,n,s,o]=e,!t)return g2;let r=g2;const i=We(()=>Fi(t),l=>{r(),l&&(l.addEventListener(n,s,o),r=()=>{l.removeEventListener(n,s,o),r=g2})},{immediate:!0,flush:"post"}),a=()=>{i(),r()};return gy(a),a}function tb(e,t,n={}){const{window:s=vm,ignore:o,capture:r=!0}=n;if(!s)return;const i=j(!0),l=[_s(s,"click",c=>{const d=Fi(e),f=c.composedPath();!d||d===c.target||f.includes(d)||!i.value||o&&o.length>0&&o.some(h=>{const p=Fi(h);return p&&(c.target===p||f.includes(p))})||t(c)},{passive:!0,capture:r}),_s(s,"pointerdown",c=>{const d=Fi(e);i.value=!!d&&!c.composedPath().includes(d)},{passive:!0})];return()=>l.forEach(c=>c())}const Hk=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Uk="__vueuse_ssr_handlers__";Hk[Uk]=Hk[Uk]||{};Hk[Uk];function Zte({document:e=Xte}={}){if(!e)return j("visible");const t=j(e.visibilityState);return _s(e,"visibilitychange",()=>{t.value=e.visibilityState}),t}var EA=Object.getOwnPropertySymbols,Jte=Object.prototype.hasOwnProperty,Qte=Object.prototype.propertyIsEnumerable,ene=(e,t)=>{var n={};for(var s in e)Jte.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&EA)for(var s of EA(e))t.indexOf(s)<0&&Qte.call(e,s)&&(n[s]=e[s]);return n};function Lf(e,t,n={}){const s=n,{window:o=vm}=s,r=ene(s,["window"]);let i;const a=o&&"ResizeObserver"in o,l=()=>{i&&(i.disconnect(),i=void 0)},u=We(()=>Fi(e),d=>{l(),a&&o&&d&&(i=new ResizeObserver(t),i.observe(d,r))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return gy(c),{isSupported:a,stop:c}}function TA(e,t={}){const{reset:n=!0,windowResize:s=!0,windowScroll:o=!0}=t,r=j(0),i=j(0),a=j(0),l=j(0),u=j(0),c=j(0),d=j(0),f=j(0);function h(){const p=Fi(e);if(!p){n&&(r.value=0,i.value=0,a.value=0,l.value=0,u.value=0,c.value=0,d.value=0,f.value=0);return}const m=p.getBoundingClientRect();r.value=m.height,i.value=m.bottom,a.value=m.left,l.value=m.right,u.value=m.top,c.value=m.width,d.value=m.x,f.value=m.y}return Lf(e,h),We(()=>Fi(e),p=>!p&&h()),o&&_s("scroll",h,{passive:!0}),s&&_s("resize",h,{passive:!0}),{height:r,bottom:i,left:a,right:l,top:u,width:c,x:d,y:f,update:h}}var _A,NA;sn&&(window==null?void 0:window.navigator)&&((_A=window==null?void 0:window.navigator)==null?void 0:_A.platform)&&/iP(ad|hone|od)/.test((NA=window==null?void 0:window.navigator)==null?void 0:NA.platform);function tne({window:e=vm}={}){if(!e)return j(!1);const t=j(e.document.hasFocus());return _s(e,"blur",()=>{t.value=!1}),_s(e,"focus",()=>{t.value=!0}),t}function nne({window:e=vm,initialWidth:t=1/0,initialHeight:n=1/0}={}){const s=j(t),o=j(n),r=()=>{e&&(s.value=e.innerWidth,o.value=e.innerHeight)};return r(),Yte(r),_s("resize",r,{passive:!0}),{width:s,height:o}}const sne=(e,t)=>{if(!sn||!e||!t)return!1;const n=e.getBoundingClientRect();let s;return t instanceof Element?s=t.getBoundingClientRect():s={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<s.bottom&&n.bottom>s.top&&n.right>s.left&&n.left<s.right},AA=e=>{let t=0,n=e;for(;n;)t+=n.offsetTop,n=n.offsetParent;return t},one=(e,t)=>Math.abs(AA(e)-AA(t)),E$=e=>{let t,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}},rne=function(e){for(const t of e){const n=t.target.__resizeListeners__||[];n.length&&n.forEach(s=>{s()})}},Bf=function(e,t){!sn||!e||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new ResizeObserver(rne),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},zf=function(e,t){var n;!e||!e.__resizeListeners__||(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(n=e.__ro__)==null||n.disconnect())},Ir=e=>e===void 0,Rp=e=>!e&&e!==0||Et(e)&&e.length===0||rn(e)&&!Object.keys(e).length,wc=e=>typeof Element=="undefined"?!1:e instanceof Element,ine=e=>I$(e),ane=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),jk=e=>Object.keys(e),lne=e=>Object.entries(e),pv=(e,t,n)=>({get value(){return ps(e,t,n)},set value(s){Ste(e,t,s)}}),VF=(e="")=>e.split(" ").filter(t=>!!t.trim()),Li=(e,t)=>{if(!e||!t)return!1;if(t.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(t)},ca=(e,t)=>{!e||!t.trim()||e.classList.add(...VF(t))},ur=(e,t)=>{!e||!t.trim()||e.classList.remove(...VF(t))},aa=(e,t)=>{var n;if(!sn||!e||!t)return"";ai(t);try{const s=e.style[t];if(s)return s;const o=(n=document.defaultView)==null?void 0:n.getComputedStyle(e,"");return o?o[t]:""}catch{return e.style[t]}},une=(e,t)=>{if(!sn)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],s=aa(e,n);return["scroll","auto","overlay"].some(o=>s.includes(o))},T$=(e,t)=>{if(!sn)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(une(n,t))return n;n=n.parentNode}return n};let x0;const cne=()=>{var e;if(!sn)return 0;if(x0!==void 0)return x0;const t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const o=s.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),x0=n-o,x0};function WF(e,t){if(!sn)return;if(!t){e.scrollTop=0;return}const n=[];let s=t.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)n.push(s),s=s.offsetParent;const o=t.offsetTop+n.reduce((l,u)=>l+u.offsetTop,0),r=o+t.offsetHeight,i=e.scrollTop,a=i+e.clientHeight;o<i?e.scrollTop=o:r>a&&(e.scrollTop=r-e.clientHeight)}var bn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const dne=xe({name:"ArrowDown"}),fne={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},hne=q("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),pne=[hne];function mne(e,t,n,s,o,r){return _(),U("svg",fne,pne)}var Uc=bn(dne,[["render",mne]]);const gne=xe({name:"ArrowLeft"}),vne={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},bne=q("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),yne=[bne];function wne(e,t,n,s,o,r){return _(),U("svg",vne,yne)}var jc=bn(gne,[["render",wne]]);const kne=xe({name:"ArrowRight"}),xne={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Cne=q("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),$ne=[Cne];function Sne(e,t,n,s,o,r){return _(),U("svg",xne,$ne)}var bi=bn(kne,[["render",Sne]]);const Ine=xe({name:"ArrowUp"}),Ene={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Tne=q("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),_ne=[Tne];function Nne(e,t,n,s,o,r){return _(),U("svg",Ene,_ne)}var bm=bn(Ine,[["render",Nne]]);const Ane=xe({name:"Back"}),Dne={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Rne=q("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),Mne=q("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),One=[Rne,Mne];function Pne(e,t,n,s,o,r){return _(),U("svg",Dne,One)}var Fne=bn(Ane,[["render",Pne]]);const Lne=xe({name:"Calendar"}),Bne={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zne=q("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0v32zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64z"},null,-1),Vne=[zne];function Wne(e,t,n,s,o,r){return _(),U("svg",Bne,Vne)}var Hne=bn(Lne,[["render",Wne]]);const Une=xe({name:"CaretRight"}),jne={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Gne=q("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),Kne=[Gne];function qne(e,t,n,s,o,r){return _(),U("svg",jne,Kne)}var HF=bn(Une,[["render",qne]]);const Yne=xe({name:"CaretTop"}),Xne={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Zne=q("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"},null,-1),Jne=[Zne];function Qne(e,t,n,s,o,r){return _(),U("svg",Xne,Jne)}var ese=bn(Yne,[["render",Qne]]);const tse=xe({name:"Check"}),nse={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},sse=q("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),ose=[sse];function rse(e,t,n,s,o,r){return _(),U("svg",nse,ose)}var of=bn(tse,[["render",rse]]);const ise=xe({name:"CircleCheckFilled"}),ase={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},lse=q("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),use=[lse];function cse(e,t,n,s,o,r){return _(),U("svg",ase,use)}var dse=bn(ise,[["render",cse]]);const fse=xe({name:"CircleCheck"}),hse={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},pse=q("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),mse=q("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),gse=[pse,mse];function vse(e,t,n,s,o,r){return _(),U("svg",hse,gse)}var nb=bn(fse,[["render",vse]]);const bse=xe({name:"CircleCloseFilled"}),yse={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},wse=q("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),kse=[wse];function xse(e,t,n,s,o,r){return _(),U("svg",yse,kse)}var _$=bn(bse,[["render",xse]]);const Cse=xe({name:"CircleClose"}),$se={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Sse=q("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),Ise=q("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),Ese=[Sse,Ise];function Tse(e,t,n,s,o,r){return _(),U("svg",$se,Ese)}var Za=bn(Cse,[["render",Tse]]);const _se=xe({name:"Clock"}),Nse={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ase=q("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),Dse=q("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32z"},null,-1),Rse=q("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),Mse=[Ase,Dse,Rse];function Ose(e,t,n,s,o,r){return _(),U("svg",Nse,Mse)}var UF=bn(_se,[["render",Ose]]);const Pse=xe({name:"Close"}),Fse={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Lse=q("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Bse=[Lse];function zse(e,t,n,s,o,r){return _(),U("svg",Fse,Bse)}var ci=bn(Pse,[["render",zse]]);const Vse=xe({name:"DArrowLeft"}),Wse={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Hse=q("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"},null,-1),Use=[Hse];function jse(e,t,n,s,o,r){return _(),U("svg",Wse,Use)}var vy=bn(Vse,[["render",jse]]);const Gse=xe({name:"DArrowRight"}),Kse={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},qse=q("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"},null,-1),Yse=[qse];function Xse(e,t,n,s,o,r){return _(),U("svg",Kse,Yse)}var by=bn(Gse,[["render",Xse]]);const Zse=xe({name:"Delete"}),Jse={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Qse=q("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),eoe=[Qse];function toe(e,t,n,s,o,r){return _(),U("svg",Jse,eoe)}var noe=bn(Zse,[["render",toe]]);const soe=xe({name:"Document"}),ooe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},roe=q("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),ioe=[roe];function aoe(e,t,n,s,o,r){return _(),U("svg",ooe,ioe)}var loe=bn(soe,[["render",aoe]]);const uoe=xe({name:"FullScreen"}),coe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},doe=q("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),foe=[doe];function hoe(e,t,n,s,o,r){return _(),U("svg",coe,foe)}var poe=bn(uoe,[["render",hoe]]);const moe=xe({name:"Hide"}),goe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},voe=q("path",{d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z",fill:"currentColor"},null,-1),boe=q("path",{d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z",fill:"currentColor"},null,-1),yoe=[voe,boe];function woe(e,t,n,s,o,r){return _(),U("svg",goe,yoe)}var koe=bn(moe,[["render",woe]]);const xoe=xe({name:"InfoFilled"}),Coe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},$oe=q("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),Soe=[$oe];function Ioe(e,t,n,s,o,r){return _(),U("svg",Coe,Soe)}var N$=bn(xoe,[["render",Ioe]]);const Eoe=xe({name:"Loading"}),Toe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_oe=q("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Noe=[_oe];function Aoe(e,t,n,s,o,r){return _(),U("svg",Toe,Noe)}var ou=bn(Eoe,[["render",Aoe]]);const Doe=xe({name:"Minus"}),Roe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Moe=q("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),Ooe=[Moe];function Poe(e,t,n,s,o,r){return _(),U("svg",Roe,Ooe)}var Foe=bn(Doe,[["render",Poe]]);const Loe=xe({name:"MoreFilled"}),Boe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zoe=q("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),Voe=[zoe];function Woe(e,t,n,s,o,r){return _(),U("svg",Boe,Voe)}var Hoe=bn(Loe,[["render",Woe]]);const Uoe=xe({name:"More"}),joe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Goe=q("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),Koe=[Goe];function qoe(e,t,n,s,o,r){return _(),U("svg",joe,Koe)}var Yoe=bn(Uoe,[["render",qoe]]);const Xoe=xe({name:"PictureFilled"}),Zoe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Joe=q("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32H96zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112zM256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384z"},null,-1),Qoe=[Joe];function ere(e,t,n,s,o,r){return _(),U("svg",Zoe,Qoe)}var tre=bn(Xoe,[["render",ere]]);const nre=xe({name:"Plus"}),sre={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ore=q("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),rre=[ore];function ire(e,t,n,s,o,r){return _(),U("svg",sre,rre)}var jF=bn(nre,[["render",ire]]);const are=xe({name:"QuestionFilled"}),lre={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ure=q("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),cre=[ure];function dre(e,t,n,s,o,r){return _(),U("svg",lre,cre)}var fre=bn(are,[["render",dre]]);const hre=xe({name:"RefreshLeft"}),pre={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},mre=q("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),gre=[mre];function vre(e,t,n,s,o,r){return _(),U("svg",pre,gre)}var bre=bn(hre,[["render",vre]]);const yre=xe({name:"RefreshRight"}),wre={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},kre=q("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),xre=[kre];function Cre(e,t,n,s,o,r){return _(),U("svg",wre,xre)}var $re=bn(yre,[["render",Cre]]);const Sre=xe({name:"ScaleToOriginal"}),Ire={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ere=q("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),Tre=[Ere];function _re(e,t,n,s,o,r){return _(),U("svg",Ire,Tre)}var Nre=bn(Sre,[["render",_re]]);const Are=xe({name:"Search"}),Dre={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Rre=q("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Mre=[Rre];function Ore(e,t,n,s,o,r){return _(),U("svg",Dre,Mre)}var Pre=bn(Are,[["render",Ore]]);const Fre=xe({name:"StarFilled"}),Lre={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Bre=q("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"},null,-1),zre=[Bre];function Vre(e,t,n,s,o,r){return _(),U("svg",Lre,zre)}var C0=bn(Fre,[["render",Vre]]);const Wre=xe({name:"Star"}),Hre={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ure=q("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),jre=[Ure];function Gre(e,t,n,s,o,r){return _(),U("svg",Hre,jre)}var Kre=bn(Wre,[["render",Gre]]);const qre=xe({name:"SuccessFilled"}),Yre={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Xre=q("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),Zre=[Xre];function Jre(e,t,n,s,o,r){return _(),U("svg",Yre,Zre)}var GF=bn(qre,[["render",Jre]]);const Qre=xe({name:"View"}),eie={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},tie=q("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),nie=[tie];function sie(e,t,n,s,o,r){return _(),U("svg",eie,nie)}var oie=bn(Qre,[["render",sie]]);const rie=xe({name:"WarningFilled"}),iie={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},aie=q("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),lie=[aie];function uie(e,t,n,s,o,r){return _(),U("svg",iie,lie)}var Mp=bn(rie,[["render",uie]]);const cie=xe({name:"ZoomIn"}),die={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fie=q("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),hie=[fie];function pie(e,t,n,s,o,r){return _(),U("svg",die,hie)}var KF=bn(cie,[["render",pie]]);const mie=xe({name:"ZoomOut"}),gie={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},vie=q("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),bie=[vie];function yie(e,t,n,s,o,r){return _(),U("svg",gie,bie)}var wie=bn(mie,[["render",yie]]);const Gk=Symbol(),DA="__elPropsReservedKey";function Yi(e,t){if(!rn(e)||!!e[DA])return e;const{values:n,required:s,default:o,type:r,validator:i}=e,a=n||i?u=>{let c=!1,d=[];if(n&&(d=Array.from(n),en(e,"default")&&d.push(o),c||(c=d.includes(u))),i&&(c||(c=i(u))),!c&&d.length>0){const f=[...new Set(d)].map(h=>JSON.stringify(h)).join(", ");sq(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${f}], got value ${JSON.stringify(u)}.`)}return c}:void 0,l={type:rn(r)&&Object.getOwnPropertySymbols(r).includes(Gk)?r[Gk]:r,required:!!s,validator:a,[DA]:!0};return en(e,"default")&&(l.default=o),l}const pt=e=>OF(Object.entries(e).map(([t,n])=>[t,Yi(n,t)])),Qe=e=>({[Gk]:e}),Mo=Qe([String,Object,Function]),kie={Close:ci},yy={Close:ci,SuccessFilled:GF,InfoFilled:N$,WarningFilled:Mp,CircleCloseFilled:_$},Ja={success:GF,warning:Mp,error:_$,info:N$},qF={validating:ou,success:nb,error:Za},Kt=(e,t)=>{if(e.install=n=>{for(const s of[e,...Object.values(t!=null?t:{})])n.component(s.name,s)},t)for(const[n,s]of Object.entries(t))e[n]=s;return e},YF=(e,t)=>(e.install=n=>{e._context=n._context,n.config.globalProperties[t]=e},e),ws=e=>(e.install=In,e),A$=(...e)=>t=>{e.forEach(n=>{zt(n)?n(t):n.value=t})};class xie extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function Fs(e,t){throw new xie(`[${e}] ${t}`)}function Wi(e,t="px"){if(!e)return"";if(Bt(e))return e;if(mn(e))return`${e}${t}`}const ct={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Cie=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],v2=["sun","mon","tue","wed","thu","fri","sat"],Ht="update:modelValue",ro="change",Xl="input",$a=["","default","small","large"],Pr=e=>["",...$a].includes(e),XF=e=>[...Cie].includes(e);var qr=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(qr||{});function ZF(e){return Ts(e)&&e.type===lt}function $ie(e){return Ts(e)&&e.type===fr}function Sie(e){return Ts(e)&&!ZF(e)&&!$ie(e)}const Iie=e=>{if(!Ts(e))return{};const t=e.props||{},n=(Ts(e.type)?e.type.props:void 0)||{},s={};return Object.keys(n).forEach(o=>{en(n[o],"default")&&(s[o]=n[o].default)}),Object.keys(t).forEach(o=>{s[ai(o)]=t[o]}),s},Eie=e=>{if(!Et(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},RA=e=>e**3,Tie=e=>e<.5?RA(e*2)/2:1-RA((1-e)*2)/2,MA=e=>[...new Set(e)],ic=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],D$=()=>sn&&/firefox/i.test(window.navigator.userAgent),wy=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e),JF=e=>sn?window.requestAnimationFrame(e):setTimeout(e,16),QF=e=>sn?window.cancelAnimationFrame(e):clearTimeout(e),ym=()=>Math.floor(Math.random()*1e4),gs=e=>e,_ie=["class","style"],Nie=/^on[A-Z]/,R$=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n=[]}=e,s=n.concat(_ie),o=jt();return O(o?()=>{var r;return OF(Object.entries((r=o.proxy)==null?void 0:r.$attrs).filter(([i])=>!s.includes(i)&&!(t&&Nie.test(i))))}:()=>({}))},e4=Symbol("breadcrumbKey"),t4=Symbol("buttonGroupContextKey"),n4=Symbol("carouselContextKey"),s4=Symbol("collapseContextKey"),o4=Symbol(),r4=Symbol("dialogInjectionKey"),Lr=Symbol("formContextKey"),di=Symbol("formItemContextKey"),i4=Symbol("elPaginationKey"),a4=Symbol("radioGroupKey"),l4=Symbol("rowContextKey"),u4=Symbol("scrollbarContextKey"),ky=Symbol("tabsRootContextKey"),c4=Symbol("uploadContextKey"),M$=Symbol("popper"),d4=Symbol("popperContent"),xy=Symbol("tooltipV2"),f4=Symbol("tooltipV2Content"),b2="tooltip_v2.open",h4=e=>{const t=jt();return O(()=>{var n,s;return(s=(n=t.proxy)==null?void 0:n.$props[e])!=null?s:void 0})},sb=j();function Vf(e,t=void 0){const n=jt()?rt(o4,sb):sb;return e?O(()=>{var s,o;return(o=(s=n.value)==null?void 0:s[e])!=null?o:t}):n}const p4=(e,t,n=!1)=>{var s;const o=!!jt(),r=o?Vf():void 0,i=(s=t==null?void 0:t.provide)!=null?s:o?Gt:void 0;if(!i)return;const a=O(()=>{const l=N(e);return r!=null&&r.value?Aie(r.value,l):l});return i(o4,a),(n||!sb.value)&&(sb.value=a.value),a},Aie=(e,t)=>{var n;const s=[...new Set([...jk(e),...jk(t)])],o={};for(const r of s)o[r]=(n=t[r])!=null?n:e[r];return o},Cy=Yi({type:String,values:$a,required:!1}),Ls=(e,t={})=>{const n=j(void 0),s=t.prop?n:h4("size"),o=t.global?n:Vf("size"),r=t.form?{size:void 0}:rt(Lr,void 0),i=t.formItem?{size:void 0}:rt(di,void 0);return O(()=>s.value||N(e)||(i==null?void 0:i.size)||(r==null?void 0:r.size)||o.value||"")},Wf=e=>{const t=h4("disabled"),n=rt(Lr,void 0);return O(()=>t.value||N(e)||(n==null?void 0:n.disabled)||!1)},wm=({from:e,replacement:t,scope:n,version:s,ref:o,type:r="API"},i)=>{We(()=>N(i),a=>{},{immediate:!0})},m4=(e,t,n)=>{let s={offsetX:0,offsetY:0};const o=a=>{const l=a.clientX,u=a.clientY,{offsetX:c,offsetY:d}=s,f=e.value.getBoundingClientRect(),h=f.left,p=f.top,m=f.width,g=f.height,v=document.documentElement.clientWidth,b=document.documentElement.clientHeight,w=-h+c,y=-p+d,k=v-h-m+c,x=b-p-g+d,C=T=>{const A=Math.min(Math.max(c+T.clientX-l,w),k),R=Math.min(Math.max(d+T.clientY-u,y),x);s={offsetX:A,offsetY:R},e.value.style.transform=`translate(${Wi(A)}, ${Wi(R)})`},S=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",S)},r=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",o)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",o)};Ft(()=>{oi(()=>{n.value?r():i()})}),qn(()=>{i()})},Die=e=>({focus:()=>{var t,n;(n=(t=e.value)==null?void 0:t.focus)==null||n.call(t)}}),Hf=()=>{const e=rt(Lr,void 0),t=rt(di,void 0);return{form:e,formItem:t}};var Rie={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const Mie=e=>(t,n)=>Oie(t,n,N(e)),Oie=(e,t,n)=>ps(n,e,e).replace(/\{(\w+)\}/g,(s,o)=>{var r;return`${(r=t==null?void 0:t[o])!=null?r:`{${o}}`}`}),Pie=e=>{const t=O(()=>N(e).name),n=vs(e)?e:j(e);return{lang:t,locale:n,t:Mie(e)}},Dn=()=>{const e=Vf("locale");return Pie(O(()=>e.value||Rie))},g4=e=>{if(vs(e)||Fs("[useLockscreen]","You need to pass a ref param to this function"),!sn||Li(document.body,"el-popup-parent--hidden"))return;let t=0,n=!1,s="0",o=0;const r=()=>{ur(document.body,"el-popup-parent--hidden"),n&&(document.body.style.paddingRight=s)};We(e,i=>{if(!i){r();return}n=!Li(document.body,"el-popup-parent--hidden"),n&&(s=document.body.style.paddingRight,o=Number.parseInt(aa(document.body,"paddingRight"),10)),t=cne();const a=document.documentElement.clientHeight<document.body.scrollHeight,l=aa(document.body,"overflowY");t>0&&(a||l==="scroll")&&n&&(document.body.style.paddingRight=`${o+t}px`),ca(document.body,"el-popup-parent--hidden")}),sP(()=>r())},Hd=[],Fie=e=>{Hd.length!==0&&e.code===ct.esc&&(e.stopPropagation(),Hd[Hd.length-1].handleClose())},v4=(e,t)=>{We(t,n=>{n?Hd.push(e):Hd.splice(Hd.indexOf(e),1)})};sn&&_s(document,"keydown",Fie);const Lie=Yi({type:Qe(Boolean),default:null}),Bie=Yi({type:Qe(Function)}),zie=e=>{const t={[e]:Lie,[`onUpdate:${e}`]:Bie},n=[`update:${e}`];return{useModelToggle:({indicator:o,shouldHideWhenRouteChanges:r,shouldProceed:i,onShow:a,onHide:l})=>{const u=jt(),c=u.props,{emit:d}=u,f=`update:${e}`,h=O(()=>zt(c[`onUpdate:${e}`])),p=O(()=>c[e]===null),m=()=>{o.value!==!0&&(o.value=!0,zt(a)&&a())},g=()=>{o.value!==!1&&(o.value=!1,zt(l)&&l())},v=()=>{if(c.disabled===!0||zt(i)&&!i())return;const k=h.value&&sn;k&&d(f,!0),(p.value||!k)&&m()},b=()=>{if(c.disabled===!0||!sn)return;const k=h.value&&sn;k&&d(f,!1),(p.value||!k)&&g()},w=k=>{!No(k)||(c.disabled&&k?h.value&&d(f,!1):o.value!==k&&(k?m():g()))},y=()=>{o.value?b():v()};return We(()=>c[e],w),r&&u.appContext.config.globalProperties.$route!==void 0&&We(()=>Me({},u.proxy.$route),()=>{r.value&&o.value&&b()}),Ft(()=>{w(c[e])}),{hide:b,show:v,toggle:y}},useModelToggleProps:t,useModelToggleEmits:n}},Vie=(e,t,n)=>{const s=r=>{n(r)&&r.stopImmediatePropagation()};let o;We(()=>e.value,r=>{r?o=_s(document,t,s,!0):o==null||o()},{immediate:!0})},b4=(e,t)=>{let n;We(()=>e.value,s=>{var o,r;s?(n=document.activeElement,vs(t)&&((r=(o=t.value).focus)==null||r.call(o))):n.focus()})},O$=e=>{if(!e)return{onClick:In,onMousedown:In,onMouseup:In};let t=!1,n=!1;return{onClick:i=>{t&&n&&e(i),t=n=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},Wie=(e,t=0)=>{if(t===0)return e;const n=j(!1);let s=0;const o=()=>{s&&clearTimeout(s),s=window.setTimeout(()=>{n.value=e.value},t)};return Ft(o),We(()=>e.value,r=>{r?o():n.value=r}),n};function Hie(){let e;const t=(s,o)=>{n(),e=window.setTimeout(s,o)},n=()=>window.clearTimeout(e);return gy(()=>n()),{registerTimeout:t,cancelTimeout:n}}const Uie={prefix:Math.floor(Math.random()*1e4),current:0},jie=Symbol("elIdInjection"),P$=e=>{const t=rt(jie,Uie);return O(()=>N(e)||`el-id-${t.prefix}-${t.current++}`)},Gie=e=>{const t=n=>{const s=n;s.key===ct.esc&&(e==null||e(s))};Ft(()=>{ts(document,"keydown",t)}),qn(()=>{Ss(document,"keydown",t)})};let OA;const y4=`el-popper-container-${ym()}`,Kie=`#${y4}`,qie=()=>{fm(()=>{if(!!sn&&!OA){const e=document.createElement("div");e.id=y4,document.body.appendChild(e),OA=e}})},Yie=pt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200}}),Xie=({showAfter:e,hideAfter:t,open:n,close:s})=>{const{registerTimeout:o}=Hie();return{onOpen:()=>{o(()=>{n()},N(e))},onClose:()=>{o(()=>{s()},N(t))}}},w4=Symbol("elForwardRef"),Zie=e=>{Gt(w4,{setForwardRef:n=>{e.value=n}})},Jie=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}}),Qie="el",eae="is-",Tu=(e,t,n,s,o)=>{let r=`${e}-${t}`;return n&&(r+=`-${n}`),s&&(r+=`__${s}`),o&&(r+=`--${o}`),r},Xe=e=>{const t=Vf("namespace"),n=O(()=>t.value||Qie);return{namespace:n,b:(d="")=>Tu(N(n),e,d,"",""),e:d=>d?Tu(N(n),e,"",d,""):"",m:d=>d?Tu(N(n),e,"","",d):"",be:(d,f)=>d&&f?Tu(N(n),e,d,f,""):"",em:(d,f)=>d&&f?Tu(N(n),e,"",d,f):"",bm:(d,f)=>d&&f?Tu(N(n),e,d,"",f):"",bem:(d,f,h)=>d&&f&&h?Tu(N(n),e,d,f,h):"",is:(d,...f)=>{const h=f.length>=1?f[0]:!0;return d&&h?`${eae}${d}`:""}}},PA=j(0),al=()=>{const e=Vf("zIndex",2e3),t=O(()=>e.value+PA.value);return{initialZIndex:e,currentZIndex:t,nextZIndex:()=>(PA.value++,t.value)}};function F$(e){return e.split("-")[0]}function k4(e){return e.split("-")[1]}function L$(e){return["top","bottom"].includes(F$(e))?"x":"y"}function x4(e){return e==="y"?"height":"width"}function FA(e,t,n){let{reference:s,floating:o}=e;const r=s.x+s.width/2-o.width/2,i=s.y+s.height/2-o.height/2,a=L$(t),l=x4(a),u=s[l]/2-o[l]/2,c=a==="x";let d;switch(F$(t)){case"top":d={x:r,y:s.y-o.height};break;case"bottom":d={x:r,y:s.y+s.height};break;case"right":d={x:s.x+s.width,y:i};break;case"left":d={x:s.x-o.width,y:i};break;default:d={x:s.x,y:s.y}}switch(k4(t)){case"start":d[a]-=u*(n&&c?-1:1);break;case"end":d[a]+=u*(n&&c?-1:1)}return d}const tae=async(e,t,n)=>{const{placement:s="bottom",strategy:o="absolute",middleware:r=[],platform:i}=n,a=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:c}=FA(l,s,a),d=s,f={};for(let h=0;h<r.length;h++){const{name:p,fn:m}=r[h],{x:g,y:v,data:b,reset:w}=await m({x:u,y:c,initialPlacement:s,placement:d,strategy:o,middlewareData:f,rects:l,platform:i,elements:{reference:e,floating:t}});u=g!=null?g:u,c=v!=null?v:c,f=nt(Me({},f),{[p]:Me(Me({},f[p]),b)}),w&&(typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(l=w.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):w.rects),{x:u,y:c}=FA(l,d,a)),h=-1)}return{x:u,y:c,placement:d,strategy:o,middlewareData:f}};function nae(e){return typeof e!="number"?function(t){return Me({top:0,right:0,bottom:0,left:0},t)}(e):{top:e,right:e,bottom:e,left:e}}function LA(e){return nt(Me({},e),{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}const sae=Math.min,oae=Math.max;function rae(e,t,n){return oae(e,sae(t,n))}const iae=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:s=0}=e!=null?e:{},{x:o,y:r,placement:i,rects:a,platform:l}=t;if(n==null)return{};const u=nae(s),c={x:o,y:r},d=L$(i),f=x4(d),h=await l.getDimensions(n),p=d==="y"?"top":"left",m=d==="y"?"bottom":"right",g=a.reference[f]+a.reference[d]-c[d]-a.floating[f],v=c[d]-a.reference[d],b=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n)),w=b?d==="y"?b.clientHeight||0:b.clientWidth||0:0,y=g/2-v/2,k=u[p],x=w-h[f]-u[m],C=w/2-h[f]/2+y,S=rae(k,C,x);return{data:{[d]:S,centerOffset:C-S}}}}),aae=["top","right","bottom","left"];aae.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const lae=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:s,placement:o,rects:r,platform:i,elements:a}=t,l=function(u,c,d,f){f===void 0&&(f=!1);const h=F$(u),p=k4(u),m=L$(u)==="x",g=["left","top"].includes(h)?-1:1,v=f&&m?-1:1,b=typeof d=="function"?d(nt(Me({},c),{placement:u})):d,w=typeof b=="number";let{mainAxis:y,crossAxis:k,alignmentAxis:x}=w?{mainAxis:b,crossAxis:0,alignmentAxis:null}:Me({mainAxis:0,crossAxis:0,alignmentAxis:null},b);return p&&typeof x=="number"&&(k=p==="end"?-1*x:x),m?{x:k*v,y:y*g}:{x:y*g,y:k*v}}(o,r,e,await(i.isRTL==null?void 0:i.isRTL(a.floating)));return{x:n+l.x,y:s+l.y,data:l}}}};function C4(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function ll(e){if(e==null)return window;if(!C4(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function km(e){return ll(e).getComputedStyle(e)}function Ka(e){return C4(e)?"":e?(e.nodeName||"").toLowerCase():""}function ba(e){return e instanceof ll(e).HTMLElement}function rf(e){return e instanceof ll(e).Element}function B$(e){return e instanceof ll(e).ShadowRoot||e instanceof ShadowRoot}function $y(e){const{overflow:t,overflowX:n,overflowY:s}=km(e);return/auto|scroll|overlay|hidden/.test(t+s+n)}function uae(e){return["table","td","th"].includes(Ka(e))}function BA(e){const t=navigator.userAgent.toLowerCase().includes("firefox"),n=km(e);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"}function $4(){return!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const zA=Math.min,op=Math.max,ob=Math.round;function ac(e,t,n){var s,o,r,i;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let l=1,u=1;t&&ba(e)&&(l=e.offsetWidth>0&&ob(a.width)/e.offsetWidth||1,u=e.offsetHeight>0&&ob(a.height)/e.offsetHeight||1);const c=rf(e)?ll(e):window,d=!$4()&&n,f=(a.left+(d&&(s=(o=c.visualViewport)==null?void 0:o.offsetLeft)!=null?s:0))/l,h=(a.top+(d&&(r=(i=c.visualViewport)==null?void 0:i.offsetTop)!=null?r:0))/u,p=a.width/l,m=a.height/u;return{width:p,height:m,top:h,right:f+p,bottom:h+m,left:f,x:f,y:h}}function zl(e){return(t=e,(t instanceof ll(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function Sy(e){return rf(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function S4(e){return ac(zl(e)).left+Sy(e).scrollLeft}function cae(e,t,n){const s=ba(t),o=zl(t),r=ac(e,s&&function(l){const u=ac(l);return ob(u.width)!==l.offsetWidth||ob(u.height)!==l.offsetHeight}(t),n==="fixed");let i={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(s||!s&&n!=="fixed")if((Ka(t)!=="body"||$y(o))&&(i=Sy(t)),ba(t)){const l=ac(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else o&&(a.x=S4(o));return{x:r.left+i.scrollLeft-a.x,y:r.top+i.scrollTop-a.y,width:r.width,height:r.height}}function I4(e){return Ka(e)==="html"?e:e.assignedSlot||e.parentNode||(B$(e)?e.host:null)||zl(e)}function VA(e){return ba(e)&&getComputedStyle(e).position!=="fixed"?e.offsetParent:null}function Kk(e){const t=ll(e);let n=VA(e);for(;n&&uae(n)&&getComputedStyle(n).position==="static";)n=VA(n);return n&&(Ka(n)==="html"||Ka(n)==="body"&&getComputedStyle(n).position==="static"&&!BA(n))?t:n||function(s){let o=I4(s);for(B$(o)&&(o=o.host);ba(o)&&!["html","body"].includes(Ka(o));){if(BA(o))return o;o=o.parentNode}return null}(e)||t}function WA(e){if(ba(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=ac(e);return{width:t.width,height:t.height}}function E4(e){const t=I4(e);return["html","body","#document"].includes(Ka(t))?e.ownerDocument.body:ba(t)&&$y(t)?t:E4(t)}function T4(e,t){var n;t===void 0&&(t=[]);const s=E4(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),r=ll(s),i=o?[r].concat(r.visualViewport||[],$y(s)?s:[]):s,a=t.concat(i);return o?a:a.concat(T4(i))}function HA(e,t,n){return t==="viewport"?LA(function(s,o){const r=ll(s),i=zl(s),a=r.visualViewport;let l=i.clientWidth,u=i.clientHeight,c=0,d=0;if(a){l=a.width,u=a.height;const f=$4();(f||!f&&o==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:l,height:u,x:c,y:d}}(e,n)):rf(t)?function(s,o){const r=ac(s,!1,o==="fixed"),i=r.top+s.clientTop,a=r.left+s.clientLeft;return{top:i,left:a,x:a,y:i,right:a+s.clientWidth,bottom:i+s.clientHeight,width:s.clientWidth,height:s.clientHeight}}(t,n):LA(function(s){var o;const r=zl(s),i=Sy(s),a=(o=s.ownerDocument)==null?void 0:o.body,l=op(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=op(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-i.scrollLeft+S4(s);const d=-i.scrollTop;return km(a||r).direction==="rtl"&&(c+=op(r.clientWidth,a?a.clientWidth:0)-l),{width:l,height:u,x:c,y:d}}(zl(e)))}function dae(e){const t=T4(e),n=["absolute","fixed"].includes(km(e).position)&&ba(e)?Kk(e):e;return rf(n)?t.filter(s=>rf(s)&&function(o,r){const i=r==null||r.getRootNode==null?void 0:r.getRootNode();if(o!=null&&o.contains(r))return!0;if(i&&B$(i)){let a=r;do{if(a&&o===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(s,n)&&Ka(s)!=="body"):[]}const fae={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:s,strategy:o}=e;const r=[...n==="clippingAncestors"?dae(t):[].concat(n),s],i=r[0],a=r.reduce((l,u)=>{const c=HA(t,u,o);return l.top=op(c.top,l.top),l.right=zA(c.right,l.right),l.bottom=zA(c.bottom,l.bottom),l.left=op(c.left,l.left),l},HA(t,i,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:s}=e;const o=ba(n),r=zl(n);if(n===r)return t;let i={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((o||!o&&s!=="fixed")&&((Ka(n)!=="body"||$y(r))&&(i=Sy(n)),ba(n))){const l=ac(n,!0);a.x=l.x+n.clientLeft,a.y=l.y+n.clientTop}return nt(Me({},t),{x:t.x-i.scrollLeft+a.x,y:t.y-i.scrollTop+a.y})},isElement:rf,getDimensions:WA,getOffsetParent:Kk,getDocumentElement:zl,getElementRects:e=>{let{reference:t,floating:n,strategy:s}=e;return{reference:cae(t,Kk(n),s),floating:nt(Me({},WA(n)),{x:0,y:0})}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>km(e).direction==="rtl"},hae=(e,t,n)=>tae(e,t,Me({platform:fae},n));pt({});const pae=e=>{if(!sn)return;if(!e)return e;const t=Fi(e);return t||(vs(e)?t:e)},mae=({middleware:e,placement:t,strategy:n})=>{const s=j(),o=j(),r=j(),i=j(),a=j({}),l={x:r,y:i,placement:t,strategy:n,middlewareData:a},u=async()=>{if(!sn)return;const c=pae(s),d=Fi(o);if(!c||!d)return;const f=await hae(c,d,{placement:N(t),strategy:N(n),middleware:N(e)});Object.keys(l).forEach(h=>{l[h].value=f[h]})};return Ft(()=>{oi(()=>{u()})}),nt(Me({},l),{update:u,referenceRef:s,contentRef:o})},gae=({arrowRef:e,padding:t})=>({name:"arrow",options:{element:e,padding:t},fn(n){const s=N(e);return s?iae({element:s,padding:t}).fn(n):{}}}),vae="2.1.8",UA=Symbol("INSTALLED_KEY"),bae=(e=[])=>({version:vae,install:(n,s)=>{n[UA]||(n[UA]=!0,e.forEach(o=>n.use(o)),s&&p4(s,n,!0))}}),yae=pt({zIndex:{type:Qe([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),wae={scroll:({scrollTop:e,fixed:t})=>typeof e=="number"&&typeof t=="boolean",change:e=>typeof e=="boolean"};var Ye=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const kae={name:"ElAffix"},xae=xe(nt(Me({},kae),{props:yae,emits:wae,setup(e,{expose:t,emit:n}){const s=e,o="ElAffix",r=Xe("affix"),i=Ns(),a=Ns(),l=Ns(),{height:u}=nne(),{height:c,width:d,top:f,bottom:h,update:p}=TA(a),m=TA(i),g=j(!1),v=j(0),b=j(0),w=O(()=>({height:g.value?`${c.value}px`:"",width:g.value?`${d.value}px`:""})),y=O(()=>{if(!g.value)return{};const C=s.offset?`${s.offset}px`:0;return{height:`${c.value}px`,width:`${d.value}px`,top:s.position==="top"?C:"",bottom:s.position==="bottom"?C:"",transform:b.value?`translateY(${b.value}px)`:"",zIndex:s.zIndex}}),k=()=>{if(!!l.value)if(v.value=l.value instanceof Window?document.documentElement.scrollTop:l.value.scrollTop||0,s.position==="top")if(s.target){const C=m.bottom.value-s.offset-c.value;g.value=s.offset>f.value&&m.bottom.value>0,b.value=C<0?C:0}else g.value=s.offset>f.value;else if(s.target){const C=u.value-m.top.value-s.offset-c.value;g.value=u.value-s.offset<h.value&&u.value>m.top.value,b.value=C<0?-C:0}else g.value=u.value-s.offset<h.value},x=()=>{n("scroll",{scrollTop:v.value,fixed:g.value})};return We(g,C=>n("change",C)),Ft(()=>{var C;s.target?(i.value=(C=document.querySelector(s.target))!=null?C:void 0,i.value||Fs(o,`Target is not existed: ${s.target}`)):i.value=document.documentElement,l.value=T$(a.value,!0),p()}),_s(l,"scroll",x),oi(k),t({update:k}),(C,S)=>(_(),U("div",{ref_key:"root",ref:a,class:W(N(r).b()),style:it(N(w))},[q("div",{class:W({[N(r).m("fixed")]:g.value}),style:it(N(y))},[Pe(C.$slots,"default")],6)],6))}}));var Cae=Ye(xae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const $ae=Kt(Cae),Sae=pt({size:{type:Qe([Number,String])},color:{type:String}}),Iae={name:"ElIcon",inheritAttrs:!1},Eae=xe(nt(Me({},Iae),{props:Sae,setup(e){const t=e,n=Xe("icon"),s=O(()=>!t.size&&!t.color?{}:{fontSize:Ir(t.size)?void 0:Wi(t.size),"--color":t.color});return(o,r)=>(_(),U("i",Wn({class:N(n).b(),style:N(s)},o.$attrs),[Pe(o.$slots,"default")],16))}}));var Tae=Ye(Eae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const xt=Kt(Tae),_ae=["light","dark"],Nae=pt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:jk(Ja),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:_ae,default:"light"}}),Aae={close:e=>e instanceof MouseEvent},Dae={name:"ElAlert"},Rae=xe(nt(Me({},Dae),{props:Nae,emits:Aae,setup(e,{emit:t}){const n=e,{Close:s}=yy,o=gm(),r=Xe("alert"),i=j(!0),a=O(()=>Ja[n.type]||Ja.info),l=O(()=>n.description||{[r.is("big")]:o.default}),u=O(()=>n.description||{[r.is("bold")]:o.default}),c=d=>{i.value=!1,t("close",d)};return(d,f)=>(_(),ye(Rs,{name:N(r).b("fade")},{default:de(()=>[It(q("div",{class:W([N(r).b(),N(r).m(d.type),N(r).is("center",d.center),N(r).is(d.effect)]),role:"alert"},[d.showIcon&&N(a)?(_(),ye(N(xt),{key:0,class:W([N(r).e("icon"),N(l)])},{default:de(()=>[(_(),ye(an(N(a))))]),_:1},8,["class"])):me("v-if",!0),q("div",{class:W(N(r).e("content"))},[d.title||d.$slots.title?(_(),U("span",{key:0,class:W([N(r).e("title"),N(u)])},[Pe(d.$slots,"title",{},()=>[Yt(He(d.title),1)])],2)):me("v-if",!0),d.$slots.default||d.description?(_(),U("p",{key:1,class:W(N(r).e("description"))},[Pe(d.$slots,"default",{},()=>[Yt(He(d.description),1)])],2)):me("v-if",!0),d.closable?(_(),U(lt,{key:2},[d.closeText?(_(),U("div",{key:0,class:W([N(r).e("close-btn"),N(r).is("customed")]),onClick:c},He(d.closeText),3)):(_(),ye(N(xt),{key:1,class:W(N(r).e("close-btn")),onClick:c},{default:de(()=>[fe(N(s))]),_:1},8,["class"]))],2112)):me("v-if",!0)],2)],2),[[cn,i.value]])]),_:3},8,["name"]))}}));var Mae=Ye(Rae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const Oae=Kt(Mae);let _i;const Pae=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Fae=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Lae(e){const t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),s=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),o=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:Fae.map(i=>`${i}:${t.getPropertyValue(i)}`).join(";"),paddingSize:s,borderSize:o,boxSizing:n}}function jA(e,t=1,n){var s;_i||(_i=document.createElement("textarea"),document.body.appendChild(_i));const{paddingSize:o,borderSize:r,boxSizing:i,contextStyle:a}=Lae(e);_i.setAttribute("style",`${a};${Pae}`),_i.value=e.value||e.placeholder||"";let l=_i.scrollHeight;const u={};i==="border-box"?l=l+r:i==="content-box"&&(l=l-o),_i.value="";const c=_i.scrollHeight-o;if(mn(t)){let d=c*t;i==="border-box"&&(d=d+o+r),l=Math.max(d,l),u.minHeight=`${d}px`}if(mn(n)){let d=c*n;i==="border-box"&&(d=d+o+r),l=Math.min(d,l)}return u.height=`${l}px`,(s=_i.parentNode)==null||s.removeChild(_i),_i=void 0,u}const Bae=pt({size:Cy,disabled:Boolean,modelValue:{type:Qe([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Qe([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Mo,default:""},prefixIcon:{type:Mo,default:""},label:{type:String},tabindex:{type:[Number,String]},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Qe([Object,Array,String]),default:()=>gs({})}}),zae={[Ht]:e=>Bt(e),input:e=>Bt(e),change:e=>Bt(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Vae=["type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder"],Wae=["tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Hae={name:"ElInput",inheritAttrs:!1},Uae=xe(nt(Me({},Hae),{props:Bae,emits:zae,setup(e,{expose:t,emit:n}){const s=e,o={suffix:"append",prefix:"prepend"},r=jt(),i=YP(),a=gm(),l=R$(),{form:u,formItem:c}=Hf(),d=Ls(),f=Wf(),h=Xe("input"),p=Xe("textarea"),m=Ns(),g=Ns(),v=j(!1),b=j(!1),w=j(!1),y=j(!1),k=Ns(s.inputStyle),x=O(()=>m.value||g.value),C=O(()=>{var ie;return(ie=u==null?void 0:u.statusIcon)!=null?ie:!1}),S=O(()=>(c==null?void 0:c.validateState)||""),T=O(()=>qF[S.value]),A=O(()=>y.value?oie:koe),R=O(()=>[i.style,s.inputStyle]),L=O(()=>[s.inputStyle,k.value,{resize:s.resize}]),P=O(()=>I$(s.modelValue)?"":String(s.modelValue)),V=O(()=>s.clearable&&!f.value&&!s.readonly&&!!P.value&&(v.value||b.value)),H=O(()=>s.showPassword&&!f.value&&!s.readonly&&(!!P.value||v.value)),F=O(()=>s.showWordLimit&&!!l.value.maxlength&&(s.type==="text"||s.type==="textarea")&&!f.value&&!s.readonly&&!s.showPassword),M=O(()=>Array.from(P.value).length),B=O(()=>!!F.value&&M.value>Number(l.value.maxlength)),Y=O(()=>!!a.suffix||!!s.suffixIcon||V.value||s.showPassword||F.value||!!S.value&&C.value),J=()=>{const{type:ie,autosize:ge}=s;if(!(!sn||ie!=="textarea"))if(ge){const be=rn(ge)?ge.minRows:void 0,Ie=rn(ge)?ge.maxRows:void 0;k.value=Me({},jA(g.value,be,Ie))}else k.value={minHeight:jA(g.value).minHeight}},ee=()=>{const ie=x.value;!ie||ie.value===P.value||(ie.value=P.value)},te=ie=>{const{el:ge}=r.vnode;if(!ge)return;const Ie=Array.from(ge.querySelectorAll(`.${h.e(ie)}`)).find(ve=>ve.parentNode===ge);if(!Ie)return;const ot=o[ie];a[ot]?Ie.style.transform=`translateX(${ie==="suffix"?"-":""}${ge.querySelector(`.${h.be("group",ot)}`).offsetWidth}px)`:Ie.removeAttribute("style")},re=()=>{te("prefix"),te("suffix")},$e=async ie=>{const{value:ge}=ie.target;w.value||ge!==P.value&&(n(Ht,ge),n("input",ge),await vt(),ee())},se=ie=>{n("change",ie.target.value)},Q=ie=>{n("compositionstart",ie),w.value=!0},ae=ie=>{var ge;n("compositionupdate",ie);const be=(ge=ie.target)==null?void 0:ge.value,Ie=be[be.length-1]||"";w.value=!wy(Ie)},pe=ie=>{n("compositionend",ie),w.value&&(w.value=!1,$e(ie))},ke=()=>{y.value=!y.value,Be()},Be=async()=>{var ie;await vt(),(ie=x.value)==null||ie.focus()},je=()=>{var ie;return(ie=x.value)==null?void 0:ie.blur()},qe=ie=>{v.value=!0,n("focus",ie)},ne=ie=>{var ge;v.value=!1,n("blur",ie),s.validateEvent&&((ge=c==null?void 0:c.validate)==null||ge.call(c,"blur").catch(be=>void 0))},ue=ie=>{b.value=!1,n("mouseleave",ie)},Se=ie=>{b.value=!0,n("mouseenter",ie)},Fe=ie=>{n("keydown",ie)},Le=()=>{var ie;(ie=x.value)==null||ie.select()},Ke=()=>{n(Ht,""),n("change",""),n("clear"),n("input","")};return We(()=>s.modelValue,()=>{var ie;vt(()=>J()),s.validateEvent&&((ie=c==null?void 0:c.validate)==null||ie.call(c,"change").catch(ge=>void 0))}),We(P,()=>ee()),We(()=>s.type,async()=>{await vt(),ee(),J(),re()}),Ft(async()=>{ee(),re(),await vt(),J()}),Ki(async()=>{await vt(),re()}),t({input:m,textarea:g,ref:x,textareaStyle:L,autosize:qs(s,"autosize"),focus:Be,blur:je,select:Le,clear:Ke,resizeTextarea:J}),(ie,ge)=>It((_(),U("div",{class:W([ie.type==="textarea"?N(p).b():N(h).b(),N(h).m(N(d)),N(h).is("disabled",N(f)),N(h).is("exceed",N(B)),{[N(h).b("group")]:ie.$slots.prepend||ie.$slots.append,[N(h).bm("group","append")]:ie.$slots.append,[N(h).bm("group","prepend")]:ie.$slots.prepend,[N(h).m("prefix")]:ie.$slots.prefix||ie.prefixIcon,[N(h).m("suffix")]:ie.$slots.suffix||ie.suffixIcon||ie.clearable||ie.showPassword,[N(h).m("suffix--password-clear")]:N(V)&&N(H)},ie.$attrs.class]),style:it(N(R)),onMouseenter:Se,onMouseleave:ue},[me(" input "),ie.type!=="textarea"?(_(),U(lt,{key:0},[me(" prepend slot "),ie.$slots.prepend?(_(),U("div",{key:0,class:W(N(h).be("group","prepend"))},[Pe(ie.$slots,"prepend")],2)):me("v-if",!0),q("input",Wn({ref_key:"input",ref:m,class:N(h).e("inner")},N(l),{type:ie.showPassword?y.value?"text":"password":ie.type,disabled:N(f),readonly:ie.readonly,autocomplete:ie.autocomplete,tabindex:ie.tabindex,"aria-label":ie.label,placeholder:ie.placeholder,style:ie.inputStyle,onCompositionstart:Q,onCompositionupdate:ae,onCompositionend:pe,onInput:$e,onFocus:qe,onBlur:ne,onChange:se,onKeydown:Fe}),null,16,Vae),me(" prefix slot "),ie.$slots.prefix||ie.prefixIcon?(_(),U("span",{key:1,class:W(N(h).e("prefix"))},[q("span",{class:W(N(h).e("prefix-inner"))},[Pe(ie.$slots,"prefix"),ie.prefixIcon?(_(),ye(N(xt),{key:0,class:W(N(h).e("icon"))},{default:de(()=>[(_(),ye(an(ie.prefixIcon)))]),_:1},8,["class"])):me("v-if",!0)],2)],2)):me("v-if",!0),me(" suffix slot "),N(Y)?(_(),U("span",{key:2,class:W(N(h).e("suffix"))},[q("span",{class:W(N(h).e("suffix-inner"))},[!N(V)||!N(H)||!N(F)?(_(),U(lt,{key:0},[Pe(ie.$slots,"suffix"),ie.suffixIcon?(_(),ye(N(xt),{key:0,class:W(N(h).e("icon"))},{default:de(()=>[(_(),ye(an(ie.suffixIcon)))]),_:1},8,["class"])):me("v-if",!0)],64)):me("v-if",!0),N(V)?(_(),ye(N(xt),{key:1,class:W([N(h).e("icon"),N(h).e("clear")]),onMousedown:ge[0]||(ge[0]=wt(()=>{},["prevent"])),onClick:Ke},{default:de(()=>[fe(N(Za))]),_:1},8,["class"])):me("v-if",!0),N(H)?(_(),ye(N(xt),{key:2,class:W([N(h).e("icon"),N(h).e("clear")]),onClick:ke},{default:de(()=>[(_(),ye(an(N(A))))]),_:1},8,["class"])):me("v-if",!0),N(F)?(_(),U("span",{key:3,class:W(N(h).e("count"))},[q("span",{class:W(N(h).e("count-inner"))},He(N(M))+" / "+He(N(l).maxlength),3)],2)):me("v-if",!0)],2),N(S)&&N(T)&&N(C)?(_(),ye(N(xt),{key:0,class:W([N(h).e("icon"),N(h).e("validateIcon"),N(h).is("loading",N(S)==="validating")])},{default:de(()=>[(_(),ye(an(N(T))))]),_:1},8,["class"])):me("v-if",!0)],2)):me("v-if",!0),me(" append slot "),ie.$slots.append?(_(),U("div",{key:3,class:W(N(h).be("group","append"))},[Pe(ie.$slots,"append")],2)):me("v-if",!0)],64)):(_(),U(lt,{key:1},[me(" textarea "),q("textarea",Wn({ref_key:"textarea",ref:g,class:N(p).e("inner")},N(l),{tabindex:ie.tabindex,disabled:N(f),readonly:ie.readonly,autocomplete:ie.autocomplete,style:N(L),"aria-label":ie.label,placeholder:ie.placeholder,onCompositionstart:Q,onCompositionupdate:ae,onCompositionend:pe,onInput:$e,onFocus:qe,onBlur:ne,onChange:se,onKeydown:Fe}),null,16,Wae),N(F)?(_(),U("span",{key:0,class:W(N(h).e("count"))},He(N(M))+" / "+He(N(l).maxlength),3)):me("v-if",!0)],64))],38)),[[cn,ie.type!=="hidden"]])}}));var jae=Ye(Uae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const yi=Kt(jae),_4={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Gae=({move:e,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${e}%)`}),Kae=pt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),GA="Thumb",qae=xe({name:GA,props:Kae,setup(e){const t=rt(u4),n=Xe("scrollbar");t||Fs(GA,"can not inject scrollbar context");const s=j(),o=j(),r=j({}),i=j(!1);let a=!1,l=!1,u=sn?document.onselectstart:null;const c=O(()=>_4[e.vertical?"vertical":"horizontal"]),d=O(()=>Gae({size:e.size,move:e.move,bar:c.value})),f=O(()=>s.value[c.value.offset]**2/t.wrapElement[c.value.scrollSize]/e.ratio/o.value[c.value.offset]),h=k=>{var x;if(k.stopPropagation(),k.ctrlKey||[1,2].includes(k.button))return;(x=window.getSelection())==null||x.removeAllRanges(),m(k);const C=k.currentTarget;!C||(r.value[c.value.axis]=C[c.value.offset]-(k[c.value.client]-C.getBoundingClientRect()[c.value.direction]))},p=k=>{if(!o.value||!s.value||!t.wrapElement)return;const x=Math.abs(k.target.getBoundingClientRect()[c.value.direction]-k[c.value.client]),C=o.value[c.value.offset]/2,S=(x-C)*100*f.value/s.value[c.value.offset];t.wrapElement[c.value.scroll]=S*t.wrapElement[c.value.scrollSize]/100},m=k=>{k.stopImmediatePropagation(),a=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),u=document.onselectstart,document.onselectstart=()=>!1},g=k=>{if(!s.value||!o.value||a===!1)return;const x=r.value[c.value.axis];if(!x)return;const C=(s.value.getBoundingClientRect()[c.value.direction]-k[c.value.client])*-1,S=o.value[c.value.offset]-x,T=(C-S)*100*f.value/s.value[c.value.offset];t.wrapElement[c.value.scroll]=T*t.wrapElement[c.value.scrollSize]/100},v=()=>{a=!1,r.value[c.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v),y(),l&&(i.value=!1)},b=()=>{l=!1,i.value=!!e.size},w=()=>{l=!0,i.value=a};qn(()=>{y(),document.removeEventListener("mouseup",v)});const y=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return _s(qs(t,"scrollbarElement"),"mousemove",b),_s(qs(t,"scrollbarElement"),"mouseleave",w),{ns:n,instance:s,thumb:o,bar:c,thumbStyle:d,visible:i,clickTrackHandler:p,clickThumbHandler:h}}});function Yae(e,t,n,s,o,r){return _(),ye(Rs,{name:e.ns.b("fade")},{default:de(()=>[It(q("div",{ref:"instance",class:W([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:t[1]||(t[1]=(...i)=>e.clickTrackHandler&&e.clickTrackHandler(...i))},[q("div",{ref:"thumb",class:W(e.ns.e("thumb")),style:it(e.thumbStyle),onMousedown:t[0]||(t[0]=(...i)=>e.clickThumbHandler&&e.clickThumbHandler(...i))},null,38)],34),[[cn,e.always||e.visible]])]),_:1},8,["name"])}var Xae=Ye(qae,[["render",Yae],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Zae=pt({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Jae=xe({components:{Thumb:Xae},props:Zae,setup(e){const t=j(0),n=j(0),s=4;return{handleScroll:r=>{if(r){const i=r.offsetHeight-s,a=r.offsetWidth-s;n.value=r.scrollTop*100/i*e.ratioY,t.value=r.scrollLeft*100/a*e.ratioX}},moveX:t,moveY:n}}});function Qae(e,t,n,s,o,r){const i=Ne("thumb");return _(),U(lt,null,[fe(i,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),fe(i,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}var ele=Ye(Jae,[["render",Qae],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const tle=pt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Qe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),nle={scroll:({scrollTop:e,scrollLeft:t})=>mn(e)&&mn(t)},sle=xe({name:"ElScrollbar",components:{Bar:ele},props:tle,emits:nle,setup(e,{emit:t}){const n=Xe("scrollbar");let s,o;const r=j(),i=j(),a=j(),l=j("0"),u=j("0"),c=j(),d=j(0),f=j(0),h=j(1),p=j(1),m=4,g=O(()=>{const x={};return e.height&&(x.height=Wi(e.height)),e.maxHeight&&(x.maxHeight=Wi(e.maxHeight)),[e.wrapStyle,x]}),v=()=>{var x;i.value&&((x=c.value)==null||x.handleScroll(i.value),t("scroll",{scrollTop:i.value.scrollTop,scrollLeft:i.value.scrollLeft}))};function b(x,C){rn(x)?i.value.scrollTo(x):mn(x)&&mn(C)&&i.value.scrollTo(x,C)}const w=x=>{!mn(x)||(i.value.scrollTop=x)},y=x=>{!mn(x)||(i.value.scrollLeft=x)},k=()=>{if(!i.value)return;const x=i.value.offsetHeight-m,C=i.value.offsetWidth-m,S=x**2/i.value.scrollHeight,T=C**2/i.value.scrollWidth,A=Math.max(S,e.minSize),R=Math.max(T,e.minSize);h.value=S/(x-S)/(A/(x-A)),p.value=T/(C-T)/(R/(C-R)),u.value=A+m<x?`${A}px`:"",l.value=R+m<C?`${R}px`:""};return We(()=>e.noresize,x=>{x?(s==null||s(),o==null||o()):({stop:s}=Lf(a,k),o=_s("resize",k))},{immediate:!0}),We(()=>[e.maxHeight,e.height],()=>{e.native||vt(()=>{var x;k(),i.value&&((x=c.value)==null||x.handleScroll(i.value))})}),Gt(u4,vn({scrollbarElement:r,wrapElement:i})),Ft(()=>{e.native||vt(()=>k())}),{ns:n,scrollbar$:r,wrap$:i,resize$:a,barRef:c,moveX:d,moveY:f,ratioX:p,ratioY:h,sizeWidth:l,sizeHeight:u,style:g,update:k,handleScroll:v,scrollTo:b,setScrollTop:w,setScrollLeft:y}}});function ole(e,t,n,s,o,r){const i=Ne("bar");return _(),U("div",{ref:"scrollbar$",class:W(e.ns.b())},[q("div",{ref:"wrap$",class:W([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:it(e.style),onScroll:t[0]||(t[0]=(...a)=>e.handleScroll&&e.handleScroll(...a))},[(_(),ye(an(e.tag),{ref:"resize$",class:W([e.ns.e("view"),e.viewClass]),style:it(e.viewStyle)},{default:de(()=>[Pe(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?me("v-if",!0):(_(),ye(i,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var rle=Ye(sle,[["render",ole],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const ul=Kt(rle),ile={name:"ElPopperRoot",inheritAttrs:!1},ale=xe(nt(Me({},ile),{setup(e,{expose:t}){const n=j(),s=j(),o=j(),r=j(),i={triggerRef:n,popperInstanceRef:s,contentRef:o,referenceRef:r};return t(i),Gt(M$,i),(a,l)=>Pe(a.$slots,"default")}}));var lle=Ye(ale,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const N4=pt({arrowOffset:{type:Number,default:5}}),ule={name:"ElPopperArrow",inheritAttrs:!1},cle=xe(nt(Me({},ule),{props:N4,setup(e,{expose:t}){const n=e,s=Xe("popper"),{arrowOffset:o,arrowRef:r}=rt(d4,void 0);return We(()=>n.arrowOffset,i=>{o.value=i}),qn(()=>{r.value=void 0}),t({arrowRef:r}),(i,a)=>(_(),U("span",{ref_key:"arrowRef",ref:r,class:W(N(s).e("arrow")),"data-popper-arrow":""},null,2))}}));var dle=Ye(cle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const fle="ElOnlyChild",hle=xe({name:fle,setup(e,{slots:t,attrs:n}){var s;const o=rt(w4),r=Jie((s=o==null?void 0:o.setForwardRef)!=null?s:In);return()=>{var i;const a=(i=t.default)==null?void 0:i.call(t,n);if(!a||a.length>1)return null;const l=A4(a);return l?It(vc(l,n),[[r]]):null}}});function A4(e){if(!e)return null;const t=e;for(const n of t){if(rn(n))switch(n.type){case fr:continue;case mm:return y2(n);case"svg":return y2(n);case lt:return A4(n.children);default:return n}return y2(n)}return null}function y2(e){return fe("span",{class:"el-only-child__content"},[e])}const D4=pt({virtualRef:{type:Qe(Object)},virtualTriggering:Boolean,onMouseenter:Function,onMouseleave:Function,onClick:Function,onKeydown:Function,onFocus:Function,onBlur:Function,onContextmenu:Function,id:String,open:Boolean}),ple={name:"ElPopperTrigger",inheritAttrs:!1},mle=xe(nt(Me({},ple),{props:D4,setup(e,{expose:t}){const n=e,{triggerRef:s}=rt(M$,void 0);return Zie(s),Ft(()=>{We(()=>n.virtualRef,o=>{o&&(s.value=Fi(o))},{immediate:!0}),We(()=>s.value,(o,r)=>{wc(o)&&["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(i=>{var a;const l=n[i];l&&(o.addEventListener(i.slice(2).toLowerCase(),l),(a=r==null?void 0:r.removeEventListener)==null||a.call(r,i.slice(2).toLowerCase(),l))})},{immediate:!0})}),t({triggerRef:s}),(o,r)=>o.virtualTriggering?me("v-if",!0):(_(),ye(N(hle),Wn({key:0},o.$attrs,{"aria-describedby":o.open?o.id:void 0}),{default:de(()=>[Pe(o.$slots,"default")]),_:3},16,["aria-describedby"]))}}));var gle=Ye(mle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]),cr="top",fi="bottom",hi="right",dr="left",z$="auto",xm=[cr,fi,hi,dr],af="start",Op="end",vle="clippingParents",R4="viewport",kh="popper",ble="reference",KA=xm.reduce(function(e,t){return e.concat([t+"-"+af,t+"-"+Op])},[]),V$=[].concat(xm,[z$]).reduce(function(e,t){return e.concat([t,t+"-"+af,t+"-"+Op])},[]),yle="beforeRead",wle="read",kle="afterRead",xle="beforeMain",Cle="main",$le="afterMain",Sle="beforeWrite",Ile="write",Ele="afterWrite",Tle=[yle,wle,kle,xle,Cle,$le,Sle,Ile,Ele];function ya(e){return e?(e.nodeName||"").toLowerCase():null}function Xi(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function lf(e){var t=Xi(e).Element;return e instanceof t||e instanceof Element}function ri(e){var t=Xi(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function W$(e){if(typeof ShadowRoot=="undefined")return!1;var t=Xi(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function _le(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},o=t.attributes[n]||{},r=t.elements[n];!ri(r)||!ya(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(i){var a=o[i];a===!1?r.removeAttribute(i):r.setAttribute(i,a===!0?"":a)}))})}function Nle(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var o=t.elements[s],r=t.attributes[s]||{},i=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),a=i.reduce(function(l,u){return l[u]="",l},{});!ri(o)||!ya(o)||(Object.assign(o.style,a),Object.keys(r).forEach(function(l){o.removeAttribute(l)}))})}}var Ale={name:"applyStyles",enabled:!0,phase:"write",fn:_le,effect:Nle,requires:["computeStyles"]};function fa(e){return e.split("-")[0]}var lc=Math.max,rb=Math.min,uf=Math.round;function cf(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),s=1,o=1;if(ri(e)&&t){var r=e.offsetHeight,i=e.offsetWidth;i>0&&(s=uf(n.width)/i||1),r>0&&(o=uf(n.height)/r||1)}return{width:n.width/s,height:n.height/o,top:n.top/o,right:n.right/s,bottom:n.bottom/o,left:n.left/s,x:n.left/s,y:n.top/o}}function H$(e){var t=cf(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function M4(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&W$(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Qa(e){return Xi(e).getComputedStyle(e)}function Dle(e){return["table","td","th"].indexOf(ya(e))>=0}function ru(e){return((lf(e)?e.ownerDocument:e.document)||window.document).documentElement}function Iy(e){return ya(e)==="html"?e:e.assignedSlot||e.parentNode||(W$(e)?e.host:null)||ru(e)}function qA(e){return!ri(e)||Qa(e).position==="fixed"?null:e.offsetParent}function Rle(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&ri(e)){var s=Qa(e);if(s.position==="fixed")return null}var o=Iy(e);for(W$(o)&&(o=o.host);ri(o)&&["html","body"].indexOf(ya(o))<0;){var r=Qa(o);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return o;o=o.parentNode}return null}function Cm(e){for(var t=Xi(e),n=qA(e);n&&Dle(n)&&Qa(n).position==="static";)n=qA(n);return n&&(ya(n)==="html"||ya(n)==="body"&&Qa(n).position==="static")?t:n||Rle(e)||t}function U$(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function rp(e,t,n){return lc(e,rb(t,n))}function Mle(e,t,n){var s=rp(e,t,n);return s>n?n:s}function O4(){return{top:0,right:0,bottom:0,left:0}}function P4(e){return Object.assign({},O4(),e)}function F4(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var Ole=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,P4(typeof t!="number"?t:F4(t,xm))};function Ple(e){var t,n=e.state,s=e.name,o=e.options,r=n.elements.arrow,i=n.modifiersData.popperOffsets,a=fa(n.placement),l=U$(a),u=[dr,hi].indexOf(a)>=0,c=u?"height":"width";if(!(!r||!i)){var d=Ole(o.padding,n),f=H$(r),h=l==="y"?cr:dr,p=l==="y"?fi:hi,m=n.rects.reference[c]+n.rects.reference[l]-i[l]-n.rects.popper[c],g=i[l]-n.rects.reference[l],v=Cm(r),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,w=m/2-g/2,y=d[h],k=b-f[c]-d[p],x=b/2-f[c]/2+w,C=rp(y,x,k),S=l;n.modifiersData[s]=(t={},t[S]=C,t.centerOffset=C-x,t)}}function Fle(e){var t=e.state,n=e.options,s=n.element,o=s===void 0?"[data-popper-arrow]":s;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||!M4(t.elements.popper,o)||(t.elements.arrow=o))}var Lle={name:"arrow",enabled:!0,phase:"main",fn:Ple,effect:Fle,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function df(e){return e.split("-")[1]}var Ble={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zle(e){var t=e.x,n=e.y,s=window,o=s.devicePixelRatio||1;return{x:uf(t*o)/o||0,y:uf(n*o)/o||0}}function YA(e){var t,n=e.popper,s=e.popperRect,o=e.placement,r=e.variation,i=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=i.x,h=f===void 0?0:f,p=i.y,m=p===void 0?0:p,g=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var v=i.hasOwnProperty("x"),b=i.hasOwnProperty("y"),w=dr,y=cr,k=window;if(u){var x=Cm(n),C="clientHeight",S="clientWidth";if(x===Xi(n)&&(x=ru(n),Qa(x).position!=="static"&&a==="absolute"&&(C="scrollHeight",S="scrollWidth")),x=x,o===cr||(o===dr||o===hi)&&r===Op){y=fi;var T=d&&x===k&&k.visualViewport?k.visualViewport.height:x[C];m-=T-s.height,m*=l?1:-1}if(o===dr||(o===cr||o===fi)&&r===Op){w=hi;var A=d&&x===k&&k.visualViewport?k.visualViewport.width:x[S];h-=A-s.width,h*=l?1:-1}}var R=Object.assign({position:a},u&&Ble),L=c===!0?zle({x:h,y:m}):{x:h,y:m};if(h=L.x,m=L.y,l){var P;return Object.assign({},R,(P={},P[y]=b?"0":"",P[w]=v?"0":"",P.transform=(k.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",P))}return Object.assign({},R,(t={},t[y]=b?m+"px":"",t[w]=v?h+"px":"",t.transform="",t))}function Vle(e){var t=e.state,n=e.options,s=n.gpuAcceleration,o=s===void 0?!0:s,r=n.adaptive,i=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:fa(t.placement),variation:df(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,YA(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,YA(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Wle={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Vle,data:{}},$0={passive:!0};function Hle(e){var t=e.state,n=e.instance,s=e.options,o=s.scroll,r=o===void 0?!0:o,i=s.resize,a=i===void 0?!0:i,l=Xi(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&u.forEach(function(c){c.addEventListener("scroll",n.update,$0)}),a&&l.addEventListener("resize",n.update,$0),function(){r&&u.forEach(function(c){c.removeEventListener("scroll",n.update,$0)}),a&&l.removeEventListener("resize",n.update,$0)}}var Ule={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Hle,data:{}},jle={left:"right",right:"left",bottom:"top",top:"bottom"};function mv(e){return e.replace(/left|right|bottom|top/g,function(t){return jle[t]})}var Gle={start:"end",end:"start"};function XA(e){return e.replace(/start|end/g,function(t){return Gle[t]})}function j$(e){var t=Xi(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function G$(e){return cf(ru(e)).left+j$(e).scrollLeft}function Kle(e){var t=Xi(e),n=ru(e),s=t.visualViewport,o=n.clientWidth,r=n.clientHeight,i=0,a=0;return s&&(o=s.width,r=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=s.offsetLeft,a=s.offsetTop)),{width:o,height:r,x:i+G$(e),y:a}}function qle(e){var t,n=ru(e),s=j$(e),o=(t=e.ownerDocument)==null?void 0:t.body,r=lc(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=lc(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-s.scrollLeft+G$(e),l=-s.scrollTop;return Qa(o||n).direction==="rtl"&&(a+=lc(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:i,x:a,y:l}}function K$(e){var t=Qa(e),n=t.overflow,s=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+s)}function L4(e){return["html","body","#document"].indexOf(ya(e))>=0?e.ownerDocument.body:ri(e)&&K$(e)?e:L4(Iy(e))}function ip(e,t){var n;t===void 0&&(t=[]);var s=L4(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),r=Xi(s),i=o?[r].concat(r.visualViewport||[],K$(s)?s:[]):s,a=t.concat(i);return o?a:a.concat(ip(Iy(i)))}function qk(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Yle(e){var t=cf(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function ZA(e,t){return t===R4?qk(Kle(e)):lf(t)?Yle(t):qk(qle(ru(e)))}function Xle(e){var t=ip(Iy(e)),n=["absolute","fixed"].indexOf(Qa(e).position)>=0,s=n&&ri(e)?Cm(e):e;return lf(s)?t.filter(function(o){return lf(o)&&M4(o,s)&&ya(o)!=="body"}):[]}function Zle(e,t,n){var s=t==="clippingParents"?Xle(e):[].concat(t),o=[].concat(s,[n]),r=o[0],i=o.reduce(function(a,l){var u=ZA(e,l);return a.top=lc(u.top,a.top),a.right=rb(u.right,a.right),a.bottom=rb(u.bottom,a.bottom),a.left=lc(u.left,a.left),a},ZA(e,r));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function B4(e){var t=e.reference,n=e.element,s=e.placement,o=s?fa(s):null,r=s?df(s):null,i=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(o){case cr:l={x:i,y:t.y-n.height};break;case fi:l={x:i,y:t.y+t.height};break;case hi:l={x:t.x+t.width,y:a};break;case dr:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var u=o?U$(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(r){case af:l[u]=l[u]-(t[c]/2-n[c]/2);break;case Op:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function Pp(e,t){t===void 0&&(t={});var n=t,s=n.placement,o=s===void 0?e.placement:s,r=n.boundary,i=r===void 0?vle:r,a=n.rootBoundary,l=a===void 0?R4:a,u=n.elementContext,c=u===void 0?kh:u,d=n.altBoundary,f=d===void 0?!1:d,h=n.padding,p=h===void 0?0:h,m=P4(typeof p!="number"?p:F4(p,xm)),g=c===kh?ble:kh,v=e.rects.popper,b=e.elements[f?g:c],w=Zle(lf(b)?b:b.contextElement||ru(e.elements.popper),i,l),y=cf(e.elements.reference),k=B4({reference:y,element:v,strategy:"absolute",placement:o}),x=qk(Object.assign({},v,k)),C=c===kh?x:y,S={top:w.top-C.top+m.top,bottom:C.bottom-w.bottom+m.bottom,left:w.left-C.left+m.left,right:C.right-w.right+m.right},T=e.modifiersData.offset;if(c===kh&&T){var A=T[o];Object.keys(S).forEach(function(R){var L=[hi,fi].indexOf(R)>=0?1:-1,P=[cr,fi].indexOf(R)>=0?"y":"x";S[R]+=A[P]*L})}return S}function Jle(e,t){t===void 0&&(t={});var n=t,s=n.placement,o=n.boundary,r=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?V$:l,c=df(s),d=c?a?KA:KA.filter(function(p){return df(p)===c}):xm,f=d.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=Pp(e,{placement:m,boundary:o,rootBoundary:r,padding:i})[fa(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function Qle(e){if(fa(e)===z$)return[];var t=mv(e);return[XA(e),t,XA(t)]}function eue(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,m=n.allowedAutoPlacements,g=t.options.placement,v=fa(g),b=v===g,w=l||(b||!p?[mv(g)]:Qle(g)),y=[g].concat(w).reduce(function($e,se){return $e.concat(fa(se)===z$?Jle(t,{placement:se,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):se)},[]),k=t.rects.reference,x=t.rects.popper,C=new Map,S=!0,T=y[0],A=0;A<y.length;A++){var R=y[A],L=fa(R),P=df(R)===af,V=[cr,fi].indexOf(L)>=0,H=V?"width":"height",F=Pp(t,{placement:R,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),M=V?P?hi:dr:P?fi:cr;k[H]>x[H]&&(M=mv(M));var B=mv(M),Y=[];if(r&&Y.push(F[L]<=0),a&&Y.push(F[M]<=0,F[B]<=0),Y.every(function($e){return $e})){T=R,S=!1;break}C.set(R,Y)}if(S)for(var J=p?3:1,ee=function(se){var Q=y.find(function(ae){var pe=C.get(ae);if(pe)return pe.slice(0,se).every(function(ke){return ke})});if(Q)return T=Q,"break"},te=J;te>0;te--){var re=ee(te);if(re==="break")break}t.placement!==T&&(t.modifiersData[s]._skip=!0,t.placement=T,t.reset=!0)}}var tue={name:"flip",enabled:!0,phase:"main",fn:eue,requiresIfExists:["offset"],data:{_skip:!1}};function JA(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function QA(e){return[cr,hi,fi,dr].some(function(t){return e[t]>=0})}function nue(e){var t=e.state,n=e.name,s=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,i=Pp(t,{elementContext:"reference"}),a=Pp(t,{altBoundary:!0}),l=JA(i,s),u=JA(a,o,r),c=QA(l),d=QA(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var sue={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nue};function oue(e,t,n){var s=fa(e),o=[dr,cr].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,i=r[0],a=r[1];return i=i||0,a=(a||0)*o,[dr,hi].indexOf(s)>=0?{x:a,y:i}:{x:i,y:a}}function rue(e){var t=e.state,n=e.options,s=e.name,o=n.offset,r=o===void 0?[0,0]:o,i=V$.reduce(function(c,d){return c[d]=oue(d,t.rects,r),c},{}),a=i[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=i}var iue={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:rue};function aue(e){var t=e.state,n=e.name;t.modifiersData[n]=B4({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var lue={name:"popperOffsets",enabled:!0,phase:"read",fn:aue,data:{}};function uue(e){return e==="x"?"y":"x"}function cue(e){var t=e.state,n=e.options,s=e.name,o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,m=p===void 0?0:p,g=Pp(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),v=fa(t.placement),b=df(t.placement),w=!b,y=U$(v),k=uue(y),x=t.modifiersData.popperOffsets,C=t.rects.reference,S=t.rects.popper,T=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,A=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(!!x){if(r){var P,V=y==="y"?cr:dr,H=y==="y"?fi:hi,F=y==="y"?"height":"width",M=x[y],B=M+g[V],Y=M-g[H],J=h?-S[F]/2:0,ee=b===af?C[F]:S[F],te=b===af?-S[F]:-C[F],re=t.elements.arrow,$e=h&&re?H$(re):{width:0,height:0},se=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:O4(),Q=se[V],ae=se[H],pe=rp(0,C[F],$e[F]),ke=w?C[F]/2-J-pe-Q-A.mainAxis:ee-pe-Q-A.mainAxis,Be=w?-C[F]/2+J+pe+ae+A.mainAxis:te+pe+ae+A.mainAxis,je=t.elements.arrow&&Cm(t.elements.arrow),qe=je?y==="y"?je.clientTop||0:je.clientLeft||0:0,ne=(P=R==null?void 0:R[y])!=null?P:0,ue=M+ke-ne-qe,Se=M+Be-ne,Fe=rp(h?rb(B,ue):B,M,h?lc(Y,Se):Y);x[y]=Fe,L[y]=Fe-M}if(a){var Le,Ke=y==="x"?cr:dr,ie=y==="x"?fi:hi,ge=x[k],be=k==="y"?"height":"width",Ie=ge+g[Ke],ot=ge-g[ie],ve=[cr,dr].indexOf(v)!==-1,Ve=(Le=R==null?void 0:R[k])!=null?Le:0,ft=ve?Ie:ge-C[be]-S[be]-Ve+A.altAxis,K=ve?ge+C[be]+S[be]-Ve-A.altAxis:ot,E=h&&ve?Mle(ft,ge,K):rp(h?ft:Ie,ge,h?K:ot);x[k]=E,L[k]=E-ge}t.modifiersData[s]=L}}var due={name:"preventOverflow",enabled:!0,phase:"main",fn:cue,requiresIfExists:["offset"]};function fue(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function hue(e){return e===Xi(e)||!ri(e)?j$(e):fue(e)}function pue(e){var t=e.getBoundingClientRect(),n=uf(t.width)/e.offsetWidth||1,s=uf(t.height)/e.offsetHeight||1;return n!==1||s!==1}function mue(e,t,n){n===void 0&&(n=!1);var s=ri(t),o=ri(t)&&pue(t),r=ru(t),i=cf(e,o),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((ya(t)!=="body"||K$(r))&&(a=hue(t)),ri(t)?(l=cf(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=G$(r))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function gue(e){var t=new Map,n=new Set,s=[];e.forEach(function(r){t.set(r.name,r)});function o(r){n.add(r.name);var i=[].concat(r.requires||[],r.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&o(l)}}),s.push(r)}return e.forEach(function(r){n.has(r.name)||o(r)}),s}function vue(e){var t=gue(e);return Tle.reduce(function(n,s){return n.concat(t.filter(function(o){return o.phase===s}))},[])}function bue(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function yue(e){var t=e.reduce(function(n,s){var o=n[s.name];return n[s.name]=o?Object.assign({},o,s,{options:Object.assign({},o.options,s.options),data:Object.assign({},o.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var eD={placement:"bottom",modifiers:[],strategy:"absolute"};function tD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function wue(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,o=t.defaultOptions,r=o===void 0?eD:o;return function(a,l,u){u===void 0&&(u=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},eD,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(v){var b=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},r,c.options,b),c.scrollParents={reference:lf(a)?ip(a):a.contextElement?ip(a.contextElement):[],popper:ip(l)};var w=vue(yue([].concat(s,c.options.modifiers)));return c.orderedModifiers=w.filter(function(y){return y.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var v=c.elements,b=v.reference,w=v.popper;if(!!tD(b,w)){c.rects={reference:mue(b,Cm(w),c.options.strategy==="fixed"),popper:H$(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(A){return c.modifiersData[A.name]=Object.assign({},A.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var k=c.orderedModifiers[y],x=k.fn,C=k.options,S=C===void 0?{}:C,T=k.name;typeof x=="function"&&(c=x({state:c,options:S,name:T,instance:h})||c)}}}},update:bue(function(){return new Promise(function(g){h.forceUpdate(),g(c)})}),destroy:function(){m(),f=!0}};if(!tD(a,l))return h;h.setOptions(u).then(function(g){!f&&u.onFirstUpdate&&u.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var v=g.name,b=g.options,w=b===void 0?{}:b,y=g.effect;if(typeof y=="function"){var k=y({state:c,name:v,instance:h,options:w}),x=function(){};d.push(k||x)}})}function m(){d.forEach(function(g){return g()}),d=[]}return h}}var kue=[Ule,lue,Wle,Ale,iue,tue,due,Lle,sue],z4=wue({defaultModifiers:kue});const xue=["fixed","absolute"],Cue=pt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Qe(Array),default:()=>[]},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:V$,default:"bottom"},popperOptions:{type:Qe(Object),default:()=>({})},strategy:{type:String,values:xue,default:"absolute"}}),V4=pt(nt(Me({},Cue),{style:{type:Qe([String,Array,Object])},className:{type:Qe([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,popperClass:{type:Qe([String,Array,Object])},popperStyle:{type:Qe([String,Array,Object])},referenceEl:{type:Qe(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},zIndex:Number})),nD=(e,t)=>{const{placement:n,strategy:s,popperOptions:o}=e,r=nt(Me({placement:n,strategy:s},o),{modifiers:Sue(e)});return Iue(r,t),Eue(r,o==null?void 0:o.modifiers),r},$ue=e=>{if(!!sn)return Fi(e)};function Sue(e){const{offset:t,gpuAcceleration:n,fallbackPlacements:s}=e;return[{name:"offset",options:{offset:[0,t!=null?t:12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:s!=null?s:[]}},{name:"computeStyles",options:{gpuAcceleration:n,adaptive:n}}]}function Iue(e,{arrowEl:t,arrowOffset:n}){e.modifiers.push({name:"arrow",options:{element:t,padding:n!=null?n:5}})}function Eue(e,t){t&&(e.modifiers=[...e.modifiers,...t!=null?t:[]])}const Tue={name:"ElPopperContent"},_ue=xe(nt(Me({},Tue),{props:V4,emits:["mouseenter","mouseleave"],setup(e,{expose:t}){const n=e,{popperInstanceRef:s,contentRef:o,triggerRef:r}=rt(M$,void 0),{nextZIndex:i}=al(),a=Xe("popper"),l=j(),u=j(),c=j();Gt(d4,{arrowRef:u,arrowOffset:c});const d=j(n.zIndex||i()),f=O(()=>$ue(n.referenceEl)||N(r)),h=O(()=>[{zIndex:N(d)},n.popperStyle]),p=O(()=>[a.b(),a.is("pure",n.pure),a.is(n.effect),n.popperClass]),m=({referenceEl:b,popperContentEl:w,arrowEl:y})=>{const k=nD(n,{arrowEl:y,arrowOffset:N(c)});return z4(b,w,k)},g=()=>{var b;(b=N(s))==null||b.update(),d.value=n.zIndex||i()},v=()=>{var b,w;const y={name:"eventListeners",enabled:n.visible};(w=(b=N(s))==null?void 0:b.setOptions)==null||w.call(b,k=>nt(Me({},k),{modifiers:[...k.modifiers||[],y]})),g()};return Ft(()=>{let b;We(f,w=>{var y;b==null||b();const k=N(s);if((y=k==null?void 0:k.destroy)==null||y.call(k),w){const x=N(l);o.value=x,s.value=m({referenceEl:w,popperContentEl:x,arrowEl:N(u)}),b=We(()=>w.getBoundingClientRect(),()=>g(),{immediate:!0})}else s.value=void 0},{immediate:!0}),We(()=>n.visible,v,{immediate:!0}),We(()=>nD(n,{arrowEl:N(u),arrowOffset:N(c)}),w=>{var y;return(y=s.value)==null?void 0:y.setOptions(w)})}),t({popperContentRef:l,popperInstanceRef:s,updatePopper:g,contentStyle:h}),(b,w)=>(_(),U("div",{ref_key:"popperContentRef",ref:l,style:it(N(h)),class:W(N(p)),role:"tooltip",onMouseenter:w[0]||(w[0]=y=>b.$emit("mouseenter",y)),onMouseleave:w[1]||(w[1]=y=>b.$emit("mouseleave",y))},[Pe(b.$slots,"default")],38))}}));var Nue=Ye(_ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const Aue={LIGHT:"light",DARK:"dark"};pt({autoClose:{type:Number,default:0},cutoff:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}});function Uf(e,t){const n=jt(),s=O(()=>No(n.props[t])?n.props[t]:n.props.teleported);return wm({scope:e,from:t,replacement:"teleported",version:"2.1.0",ref:"https://element-plus.org/en-US/component/tooltip.html#attributes"},O(()=>No(n.props[t]))),{compatTeleported:s}}const W4=Kt(lle),Due=xe({name:"ElVisuallyHidden",props:{style:{type:[String,Object,Array]}},setup(e){return{computedStyle:O(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}])}}});function Rue(e,t,n,s,o,r){return _(),U("span",Wn(e.$attrs,{style:e.computedStyle}),[Pe(e.$slots,"default")],16)}var H4=Ye(Due,[["render",Rue],["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const Eo=pt(nt(Me(Me({},Yie),V4),{appendTo:{type:Qe([String,Object]),default:Kie},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Qe(Boolean),default:null},transition:{type:String,default:"el-fade-in-linear"},teleported:{type:Boolean,default:!0},disabled:{type:Boolean}})),Fp=pt(nt(Me({},D4),{disabled:Boolean,trigger:{type:Qe([String,Array]),default:"hover"}})),Mue=pt({openDelay:{type:Number},visibleArrow:{type:Boolean,default:void 0},hideAfter:{type:Number,default:200},showArrow:{type:Boolean,default:!0}}),Ey=Symbol("elTooltip"),Oue=xe({name:"ElTooltipContent",components:{ElPopperContent:Nue,ElVisuallyHidden:H4},inheritAttrs:!1,props:Eo,setup(e){const t=j(null),n=j(!1),s=j(!1),o=j(!1),r=j(!1),{controlled:i,id:a,open:l,trigger:u,onClose:c,onOpen:d,onShow:f,onHide:h,onBeforeShow:p,onBeforeHide:m}=rt(Ey,void 0),g=O(()=>e.persistent);qn(()=>{r.value=!0});const v=O(()=>N(g)?!0:N(l)),b=O(()=>e.disabled?!1:N(l)),w=O(()=>{var P;return(P=e.style)!=null?P:{}}),y=O(()=>!N(l));Gie(c);const k=()=>{h()},x=()=>{if(N(i))return!0},C=ms(x,()=>{e.enterable&&N(u)==="hover"&&d()}),S=ms(x,()=>{N(u)==="hover"&&c()}),T=()=>{var P,V;(V=(P=t.value)==null?void 0:P.updatePopper)==null||V.call(P),p==null||p()},A=()=>{m==null||m()},R=()=>{f()};let L;return We(()=>N(l),P=>{P?L=tb(O(()=>{var V;return(V=t.value)==null?void 0:V.popperContentRef}),()=>{if(N(i))return;N(u)!=="hover"&&c()}):L==null||L()},{flush:"post"}),{ariaHidden:y,entering:s,leaving:o,id:a,intermediateOpen:n,contentStyle:w,contentRef:t,destroyed:r,shouldRender:v,shouldShow:b,open:l,onAfterShow:R,onBeforeEnter:T,onBeforeLeave:A,onContentEnter:C,onContentLeave:S,onTransitionLeave:k}}});function Pue(e,t,n,s,o,r){const i=Ne("el-visually-hidden"),a=Ne("el-popper-content");return _(),ye(pm,{disabled:!e.teleported,to:e.appendTo},[fe(Rs,{name:e.transition,onAfterLeave:e.onTransitionLeave,onBeforeEnter:e.onBeforeEnter,onAfterEnter:e.onAfterShow,onBeforeLeave:e.onBeforeLeave},{default:de(()=>[e.shouldRender?It((_(),ye(a,Wn({key:0,ref:"contentRef"},e.$attrs,{"aria-hidden":e.ariaHidden,"boundaries-padding":e.boundariesPadding,"fallback-placements":e.fallbackPlacements,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,placement:e.placement,"popper-options":e.popperOptions,strategy:e.strategy,effect:e.effect,enterable:e.enterable,pure:e.pure,"popper-class":e.popperClass,"popper-style":[e.popperStyle,e.contentStyle],"reference-el":e.referenceEl,visible:e.shouldShow,"z-index":e.zIndex,onMouseenter:e.onContentEnter,onMouseleave:e.onContentLeave}),{default:de(()=>[me(" Workaround bug #6378 "),e.destroyed?me("v-if",!0):(_(),U(lt,{key:0},[Pe(e.$slots,"default"),fe(i,{id:e.id,role:"tooltip"},{default:de(()=>[Yt(He(e.ariaLabel),1)]),_:1},8,["id"])],64))]),_:3},16,["aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","visible","z-index","onMouseenter","onMouseleave"])),[[cn,e.shouldShow]]):me("v-if",!0)]),_:3},8,["name","onAfterLeave","onBeforeEnter","onAfterEnter","onBeforeLeave"])],8,["disabled","to"])}var Fue=Ye(Oue,[["render",Pue],["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const Lue=(e,t)=>Et(e)?e.includes(t):e===t,gd=(e,t,n)=>s=>{Lue(N(e),t)&&n(s)},Bue=xe({name:"ElTooltipTrigger",components:{ElPopperTrigger:gle},props:Fp,setup(e){const t=Xe("tooltip"),{controlled:n,id:s,open:o,onOpen:r,onClose:i,onToggle:a}=rt(Ey,void 0),l=j(null),u=()=>{if(N(n)||e.disabled)return!0},c=qs(e,"trigger"),d=ms(u,gd(c,"hover",r)),f=ms(u,gd(c,"hover",i)),h=ms(u,gd(c,"click",b=>{b.button===0&&a(b)})),p=ms(u,gd(c,"focus",r)),m=ms(u,gd(c,"focus",i)),g=ms(u,gd(c,"contextmenu",b=>{b.preventDefault(),a(b)})),v=ms(u,b=>{const{code:w}=b;(w===ct.enter||w===ct.space)&&a(b)});return{onBlur:m,onContextMenu:g,onFocus:p,onMouseenter:d,onMouseleave:f,onClick:h,onKeydown:v,open:o,id:s,triggerRef:l,ns:t}}});function zue(e,t,n,s,o,r){const i=Ne("el-popper-trigger");return _(),ye(i,{id:e.id,"virtual-ref":e.virtualRef,open:e.open,"virtual-triggering":e.virtualTriggering,class:W(e.ns.e("trigger")),onBlur:e.onBlur,onClick:e.onClick,onContextmenu:e.onContextMenu,onFocus:e.onFocus,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave,onKeydown:e.onKeydown},{default:de(()=>[Pe(e.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"])}var Vue=Ye(Bue,[["render",zue],["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const{useModelToggleProps:Wue,useModelToggle:Hue,useModelToggleEmits:Uue}=zie("visible"),jue=xe({name:"ElTooltip",components:{ElPopper:W4,ElPopperArrow:dle,ElTooltipContent:Fue,ElTooltipTrigger:Vue},props:Me(Me(Me(Me(Me({},Wue),Eo),Fp),N4),Mue),emits:[...Uue,"before-show","before-hide","show","hide"],setup(e,{emit:t}){qie();const n=O(()=>(Ir(e.openDelay),e.openDelay||e.showAfter)),s=O(()=>(Ir(e.visibleArrow),No(e.visibleArrow)?e.visibleArrow:e.showArrow)),o=P$(),r=j(null),i=()=>{var h;const p=N(r);p&&((h=p.popperInstanceRef)==null||h.update())},a=j(!1),{show:l,hide:u}=Hue({indicator:a}),{onOpen:c,onClose:d}=Xie({showAfter:n,hideAfter:qs(e,"hideAfter"),open:l,close:u}),f=O(()=>No(e.visible));return Gt(Ey,{controlled:f,id:o,open:um(a),trigger:qs(e,"trigger"),onOpen:c,onClose:d,onToggle:()=>{N(a)?d():c()},onShow:()=>{t("show")},onHide:()=>{t("hide")},onBeforeShow:()=>{t("before-show")},onBeforeHide:()=>{t("before-hide")},updatePopper:i}),We(()=>e.disabled,h=>{h&&a.value&&(a.value=!1)}),{compatShowAfter:n,compatShowArrow:s,popperRef:r,open:a,hide:u,updatePopper:i,onOpen:c,onClose:d}}}),Gue=["innerHTML"],Kue={key:1};function que(e,t,n,s,o,r){const i=Ne("el-tooltip-trigger"),a=Ne("el-popper-arrow"),l=Ne("el-tooltip-content"),u=Ne("el-popper");return _(),ye(u,{ref:"popperRef"},{default:de(()=>[fe(i,{disabled:e.disabled,trigger:e.trigger,"virtual-ref":e.virtualRef,"virtual-triggering":e.virtualTriggering},{default:de(()=>[e.$slots.default?Pe(e.$slots,"default",{key:0}):me("v-if",!0)]),_:3},8,["disabled","trigger","virtual-ref","virtual-triggering"]),fe(l,{"aria-label":e.ariaLabel,"boundaries-padding":e.boundariesPadding,content:e.content,disabled:e.disabled,effect:e.effect,enterable:e.enterable,"fallback-placements":e.fallbackPlacements,"hide-after":e.hideAfter,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,persistent:e.persistent,"popper-class":e.popperClass,"popper-style":e.popperStyle,placement:e.placement,"popper-options":e.popperOptions,pure:e.pure,"raw-content":e.rawContent,"reference-el":e.referenceEl,"show-after":e.compatShowAfter,strategy:e.strategy,teleported:e.teleported,transition:e.transition,"z-index":e.zIndex,"append-to":e.appendTo},{default:de(()=>[Pe(e.$slots,"content",{},()=>[e.rawContent?(_(),U("span",{key:0,innerHTML:e.content},null,8,Gue)):(_(),U("span",Kue,He(e.content),1))]),e.compatShowArrow?(_(),ye(a,{key:0,"arrow-offset":e.arrowOffset},null,8,["arrow-offset"])):me("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","show-after","strategy","teleported","transition","z-index","append-to"])]),_:3},512)}var Yue=Ye(jue,[["render",que],["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const vr=Kt(Yue),Xue=pt({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Qe(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Qe([Function,Array]),default:In},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:void 0},teleported:Eo.teleported,highlightFirstItem:{type:Boolean,default:!1}}),Zue={[Ht]:e=>Bt(e),input:e=>Bt(e),change:e=>Bt(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>rn(e)},Jue=["aria-expanded","aria-owns"],Que={key:0},ece=["id","aria-selected","onClick"],tce={name:"ElAutocomplete",inheritAttrs:!1},nce=xe(nt(Me({},tce),{props:Xue,emits:Zue,setup(e,{expose:t,emit:n}){const s=e,o="ElAutocomplete",r=Xe("autocomplete"),{compatTeleported:i}=Uf(o,"popperAppendToBody");let a=!1;const l=R$(),u=YP(),c=j([]),d=j(-1),f=j(""),h=j(!1),p=j(!1),m=j(!1),g=j(),v=j(),b=j(),w=j(),y=O(()=>r.b(String(ym()))),k=O(()=>u.style),x=O(()=>(Et(c.value)&&c.value.length>0||m.value)&&h.value),C=O(()=>!s.hideLoading&&m.value),S=()=>{vt(()=>{x.value&&(f.value=`${g.value.$el.offsetWidth}px`)})},A=hr(ee=>{if(p.value)return;m.value=!0;const te=re=>{m.value=!1,!p.value&&(Et(re)?(c.value=re,d.value=s.highlightFirstItem?0:-1):Fs(o,"autocomplete suggestions must be an array"))};if(Et(s.fetchSuggestions))te(s.fetchSuggestions);else{const re=s.fetchSuggestions(ee,te);Et(re)?te(re):gc(re)&&re.then(te)}},s.debounce),R=ee=>{const te=Boolean(ee);if(n("input",ee),n(Ht,ee),p.value=!1,h.value||(h.value=a&&te),!s.triggerOnFocus&&!ee){p.value=!0,c.value=[];return}a&&te&&(a=!1),A(ee)},L=ee=>{n("change",ee)},P=ee=>{h.value=!0,n("focus",ee),s.triggerOnFocus&&A(String(s.modelValue))},V=ee=>{n("blur",ee)},H=()=>{h.value=!1,a=!0,n(Ht,""),n("clear")},F=()=>{x.value&&d.value>=0&&d.value<c.value.length?Y(c.value[d.value]):s.selectWhenUnmatched&&(n("select",{value:s.modelValue}),vt(()=>{c.value=[],d.value=-1}))},M=()=>{h.value=!1},B=()=>{var ee;(ee=g.value)==null||ee.focus()},Y=ee=>{n("input",ee[s.valueKey]),n(Ht,ee[s.valueKey]),n("select",ee),vt(()=>{c.value=[],d.value=-1})},J=ee=>{if(!x.value||m.value)return;if(ee<0){d.value=-1;return}ee>=c.value.length&&(ee=c.value.length-1);const te=v.value.querySelector(`.${r.be("suggestion","wrap")}`),$e=te.querySelectorAll(`.${r.be("suggestion","list")} li`)[ee],se=te.scrollTop,{offsetTop:Q,scrollHeight:ae}=$e;Q+ae>se+te.clientHeight&&(te.scrollTop+=ae),Q<se&&(te.scrollTop-=ae),d.value=ee,g.value.ref.setAttribute("aria-activedescendant",`${y.value}-item-${d.value}`)};return tb(w,M),Ft(()=>{g.value.ref.setAttribute("role","textbox"),g.value.ref.setAttribute("aria-autocomplete","list"),g.value.ref.setAttribute("aria-controls","id"),g.value.ref.setAttribute("aria-activedescendant",`${y.value}-item-${d.value}`)}),t({highlightedIndex:d,activated:h,loading:m,inputRef:g,popperRef:b,suggestions:c,handleSelect:Y,handleKeyEnter:F,focus:B,close:M,highlight:J}),(ee,te)=>(_(),ye(N(vr),{ref_key:"popperRef",ref:b,visible:N(x),"onUpdate:visible":te[2]||(te[2]=re=>vs(x)?x.value=re:null),placement:ee.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[N(r).e("popper"),ee.popperClass],teleported:N(i),"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${N(r).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:S},{content:de(()=>[q("div",{ref_key:"regionRef",ref:v,class:W([N(r).b("suggestion"),N(r).is("loading",N(C))]),style:it({minWidth:f.value,outline:"none"}),role:"region"},[fe(N(ul),{id:N(y),tag:"ul","wrap-class":N(r).be("suggestion","wrap"),"view-class":N(r).be("suggestion","list"),role:"listbox"},{default:de(()=>[N(C)?(_(),U("li",Que,[fe(N(xt),{class:W(N(r).is("loading"))},{default:de(()=>[fe(N(ou))]),_:1},8,["class"])])):(_(!0),U(lt,{key:1},Zt(c.value,(re,$e)=>(_(),U("li",{id:`${N(y)}-item-${$e}`,key:$e,class:W({highlighted:d.value===$e}),role:"option","aria-selected":d.value===$e,onClick:se=>Y(re)},[Pe(ee.$slots,"default",{item:re},()=>[Yt(He(re[ee.valueKey]),1)])],10,ece))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:de(()=>[q("div",{ref_key:"listboxRef",ref:w,class:W([N(r).b(),ee.$attrs.class]),style:it(N(k)),role:"combobox","aria-haspopup":"listbox","aria-expanded":N(x),"aria-owns":N(y)},[fe(N(yi),Wn({ref_key:"inputRef",ref:g},N(l),{"model-value":ee.modelValue,onInput:R,onChange:L,onFocus:P,onBlur:V,onClear:H,onKeydown:[te[0]||(te[0]=Qt(wt(re=>J(d.value-1),["prevent"]),["up"])),te[1]||(te[1]=Qt(wt(re=>J(d.value+1),["prevent"]),["down"])),Qt(F,["enter"]),Qt(M,["tab"])]}),Yl({_:2},[ee.$slots.prepend?{name:"prepend",fn:de(()=>[Pe(ee.$slots,"prepend")])}:void 0,ee.$slots.append?{name:"append",fn:de(()=>[Pe(ee.$slots,"append")])}:void 0,ee.$slots.prefix?{name:"prefix",fn:de(()=>[Pe(ee.$slots,"prefix")])}:void 0,ee.$slots.suffix?{name:"suffix",fn:de(()=>[Pe(ee.$slots,"suffix")])}:void 0]),1040,["model-value","onKeydown"])],14,Jue)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}));var sce=Ye(nce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const oce=Kt(sce),rce=pt({size:{type:[Number,String],values:$a,default:"",validator:e=>typeof e=="number"},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Mo},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Qe(String),default:"cover"}}),ice={error:e=>e instanceof Event},ace=["src","alt","srcset"],lce={name:"ElAvatar"},uce=xe(nt(Me({},lce),{props:rce,emits:ice,setup(e,{emit:t}){const n=e,s=Xe("avatar"),o=j(!1),r=O(()=>{const{size:u,icon:c,shape:d}=n,f=[s.b()];return Bt(u)&&f.push(s.m(u)),c&&f.push(s.m("icon")),d&&f.push(s.m(d)),f}),i=O(()=>{const{size:u}=n;return mn(u)?{"--el-avatar-size":Wi(u)}:void 0}),a=O(()=>({objectFit:n.fit}));We(()=>n.src,()=>o.value=!1);function l(u){o.value=!0,t("error",u)}return(u,c)=>(_(),U("span",{class:W(N(r)),style:it(N(i))},[(u.src||u.srcSet)&&!o.value?(_(),U("img",{key:0,src:u.src,alt:u.alt,srcset:u.srcSet,style:it(N(a)),onError:l},null,44,ace)):u.icon?(_(),ye(N(xt),{key:1},{default:de(()=>[(_(),ye(an(u.icon)))]),_:1})):Pe(u.$slots,"default",{key:2})],6))}}));var cce=Ye(uce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const dce=Kt(cce),fce={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},hce={click:e=>e instanceof MouseEvent},pce=["onClick"],mce={name:"ElBacktop"},gce=xe(nt(Me({},mce),{props:fce,emits:hce,setup(e,{emit:t}){const n=e,s="ElBacktop",o=Xe("backtop"),r=Ns(),i=Ns(),a=j(!1),l=O(()=>({right:`${n.right}px`,bottom:`${n.bottom}px`})),u=()=>{if(!r.value)return;const h=Date.now(),p=r.value.scrollTop,m=()=>{if(!r.value)return;const g=(Date.now()-h)/500;g<1?(r.value.scrollTop=p*(1-Tie(g)),requestAnimationFrame(m)):r.value.scrollTop=0};requestAnimationFrame(m)},c=()=>{r.value&&(a.value=r.value.scrollTop>=n.visibilityHeight)},d=h=>{u(),t("click",h)},f=zF(c,300);return Ft(()=>{var h;i.value=document,r.value=document.documentElement,n.target&&(r.value=(h=document.querySelector(n.target))!=null?h:void 0,r.value||Fs(s,`target is not existed: ${n.target}`),i.value=r.value),_s(i,"scroll",f)}),(h,p)=>(_(),ye(Rs,{name:`${N(o).namespace.value}-fade-in`},{default:de(()=>[a.value?(_(),U("div",{key:0,style:it(N(l)),class:W(N(o).b()),onClick:wt(d,["stop"])},[Pe(h.$slots,"default",{},()=>[fe(N(xt),{class:W(N(o).e("icon"))},{default:de(()=>[fe(N(ese))]),_:1},8,["class"])])],14,pce)):me("v-if",!0)]),_:3},8,["name"]))}}));var vce=Ye(gce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const bce=Kt(vce),yce=pt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),wce=["textContent"],kce={name:"ElBadge"},xce=xe(nt(Me({},kce),{props:yce,setup(e,{expose:t}){const n=e,s=Xe("badge"),o=O(()=>n.isDot?"":mn(n.value)&&mn(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`);return t({content:o}),(r,i)=>(_(),U("div",{class:W(N(s).b())},[Pe(r.$slots,"default"),fe(Rs,{name:`${N(s).namespace.value}-zoom-in-center`},{default:de(()=>[It(q("sup",{class:W([N(s).e("content"),N(s).em("content",r.type),N(s).is("fixed",!!r.$slots.default),N(s).is("dot",r.isDot)]),textContent:He(N(o))},null,10,wce),[[cn,!r.hidden&&(N(o)||N(o)==="0"||r.isDot)]])]),_:1},8,["name"])],2))}}));var Cce=Ye(xce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const U4=Kt(Cce),$ce=pt({separator:{type:String,default:"/"},separatorIcon:{type:Mo,default:""}}),Sce={name:"ElBreadcrumb"},Ice=xe(nt(Me({},Sce),{props:$ce,setup(e){const t=e,n=Xe("breadcrumb"),s=j();return Gt(e4,t),Ft(()=>{const o=s.value.querySelectorAll(`.${n.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,r)=>(_(),U("div",{ref_key:"breadcrumb",ref:s,class:W(N(n).b()),"aria-label":"Breadcrumb",role:"navigation"},[Pe(o.$slots,"default")],2))}}));var Ece=Ye(Ice,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const Tce=pt({to:{type:Qe([String,Object]),default:""},replace:{type:Boolean,default:!1}}),_ce={name:"ElBreadcrumbItem"},Nce=xe(nt(Me({},_ce),{props:Tce,setup(e){const t=e,s=jt().appContext.config.globalProperties.$router,o=rt(e4,{}),r=Xe("breadcrumb"),{separator:i,separatorIcon:a}=o,l=j(),u=()=>{!t.to||!s||(t.replace?s.replace(t.to):s.push(t.to))};return(c,d)=>(_(),U("span",{class:W(N(r).e("item"))},[q("span",{ref_key:"link",ref:l,class:W([N(r).e("inner"),N(r).is("link",!!c.to)]),role:"link",onClick:u},[Pe(c.$slots,"default")],2),N(a)?(_(),ye(N(xt),{key:0,class:W(N(r).e("separator"))},{default:de(()=>[(_(),ye(an(N(a))))]),_:1},8,["class"])):(_(),U("span",{key:1,class:W(N(r).e("separator")),role:"presentation"},He(N(i)),3))],2))}}));var j4=Ye(Nce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const Ace=Kt(Ece,{BreadcrumbItem:j4}),Dce=ws(j4);function Ao(e,t){Rce(e)&&(e="100%");var n=Mce(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function S0(e){return Math.min(1,Math.max(0,e))}function Rce(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Mce(e){return typeof e=="string"&&e.indexOf("%")!==-1}function G4(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function I0(e){return e<=1?Number(e)*100+"%":e}function Yu(e){return e.length===1?"0"+e:String(e)}function Oce(e,t,n){return{r:Ao(e,255)*255,g:Ao(t,255)*255,b:Ao(n,255)*255}}function sD(e,t,n){e=Ao(e,255),t=Ao(t,255),n=Ao(n,255);var s=Math.max(e,t,n),o=Math.min(e,t,n),r=0,i=0,a=(s+o)/2;if(s===o)i=0,r=0;else{var l=s-o;switch(i=a>.5?l/(2-s-o):l/(s+o),s){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4;break}r/=6}return{h:r,s:i,l:a}}function w2(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Pce(e,t,n){var s,o,r;if(e=Ao(e,360),t=Ao(t,100),n=Ao(n,100),t===0)o=n,r=n,s=n;else{var i=n<.5?n*(1+t):n+t-n*t,a=2*n-i;s=w2(a,i,e+1/3),o=w2(a,i,e),r=w2(a,i,e-1/3)}return{r:s*255,g:o*255,b:r*255}}function oD(e,t,n){e=Ao(e,255),t=Ao(t,255),n=Ao(n,255);var s=Math.max(e,t,n),o=Math.min(e,t,n),r=0,i=s,a=s-o,l=s===0?0:a/s;if(s===o)r=0;else{switch(s){case e:r=(t-n)/a+(t<n?6:0);break;case t:r=(n-e)/a+2;break;case n:r=(e-t)/a+4;break}r/=6}return{h:r,s:l,v:i}}function Fce(e,t,n){e=Ao(e,360)*6,t=Ao(t,100),n=Ao(n,100);var s=Math.floor(e),o=e-s,r=n*(1-t),i=n*(1-o*t),a=n*(1-(1-o)*t),l=s%6,u=[n,i,r,r,a,n][l],c=[a,n,n,i,r,r][l],d=[r,r,a,n,n,i][l];return{r:u*255,g:c*255,b:d*255}}function rD(e,t,n,s){var o=[Yu(Math.round(e).toString(16)),Yu(Math.round(t).toString(16)),Yu(Math.round(n).toString(16))];return s&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function Lce(e,t,n,s,o){var r=[Yu(Math.round(e).toString(16)),Yu(Math.round(t).toString(16)),Yu(Math.round(n).toString(16)),Yu(Bce(s))];return o&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function Bce(e){return Math.round(parseFloat(e)*255).toString(16)}function iD(e){return kr(e)/255}function kr(e){return parseInt(e,16)}function zce(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var Yk={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Vce(e){var t={r:0,g:0,b:0},n=1,s=null,o=null,r=null,i=!1,a=!1;return typeof e=="string"&&(e=Uce(e)),typeof e=="object"&&(Na(e.r)&&Na(e.g)&&Na(e.b)?(t=Oce(e.r,e.g,e.b),i=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Na(e.h)&&Na(e.s)&&Na(e.v)?(s=I0(e.s),o=I0(e.v),t=Fce(e.h,s,o),i=!0,a="hsv"):Na(e.h)&&Na(e.s)&&Na(e.l)&&(s=I0(e.s),r=I0(e.l),t=Pce(e.h,s,r),i=!0,a="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=G4(n),{ok:i,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var Wce="[-\\+]?\\d+%?",Hce="[-\\+]?\\d*\\.\\d+%?",Ol="(?:"+Hce+")|(?:"+Wce+")",k2="[\\s|\\(]+("+Ol+")[,|\\s]+("+Ol+")[,|\\s]+("+Ol+")\\s*\\)?",x2="[\\s|\\(]+("+Ol+")[,|\\s]+("+Ol+")[,|\\s]+("+Ol+")[,|\\s]+("+Ol+")\\s*\\)?",Ni={CSS_UNIT:new RegExp(Ol),rgb:new RegExp("rgb"+k2),rgba:new RegExp("rgba"+x2),hsl:new RegExp("hsl"+k2),hsla:new RegExp("hsla"+x2),hsv:new RegExp("hsv"+k2),hsva:new RegExp("hsva"+x2),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Uce(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(Yk[e])e=Yk[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Ni.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Ni.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Ni.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=Ni.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Ni.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=Ni.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Ni.hex8.exec(e),n?{r:kr(n[1]),g:kr(n[2]),b:kr(n[3]),a:iD(n[4]),format:t?"name":"hex8"}:(n=Ni.hex6.exec(e),n?{r:kr(n[1]),g:kr(n[2]),b:kr(n[3]),format:t?"name":"hex"}:(n=Ni.hex4.exec(e),n?{r:kr(n[1]+n[1]),g:kr(n[2]+n[2]),b:kr(n[3]+n[3]),a:iD(n[4]+n[4]),format:t?"name":"hex8"}:(n=Ni.hex3.exec(e),n?{r:kr(n[1]+n[1]),g:kr(n[2]+n[2]),b:kr(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function Na(e){return Boolean(Ni.CSS_UNIT.exec(String(e)))}var K4=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var s;if(t instanceof e)return t;typeof t=="number"&&(t=zce(t)),this.originalInput=t;var o=Vce(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=n.format)!==null&&s!==void 0?s:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,s,o,r=t.r/255,i=t.g/255,a=t.b/255;return r<=.03928?n=r/12.92:n=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),a<=.03928?o=a/12.92:o=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*s+.0722*o},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=G4(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var t=oD(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=oD(this.r,this.g,this.b),n=Math.round(t.h*360),s=Math.round(t.s*100),o=Math.round(t.v*100);return this.a===1?"hsv("+n+", "+s+"%, "+o+"%)":"hsva("+n+", "+s+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHsl=function(){var t=sD(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=sD(this.r,this.g,this.b),n=Math.round(t.h*360),s=Math.round(t.s*100),o=Math.round(t.l*100);return this.a===1?"hsl("+n+", "+s+"%, "+o+"%)":"hsla("+n+", "+s+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHex=function(t){return t===void 0&&(t=!1),rD(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),Lce(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb("+t+", "+n+", "+s+")":"rgba("+t+", "+n+", "+s+", "+this.roundA+")"},e.prototype.toPercentageRgb=function(){var t=function(n){return Math.round(Ao(n,255)*100)+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(Ao(n,255)*100)};return this.a===1?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+rD(this.r,this.g,this.b,!1),n=0,s=Object.entries(Yk);n<s.length;n++){var o=s[n],r=o[0],i=o[1];if(t===i)return r}return!1},e.prototype.toString=function(t){var n=Boolean(t);t=t!=null?t:this.format;var s=!1,o=this.a<1&&this.a>=0,r=!n&&o&&(t.startsWith("hex")||t==="name");return r?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(s=this.toRgbString()),t==="prgb"&&(s=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(s=this.toHexString()),t==="hex3"&&(s=this.toHexString(!0)),t==="hex4"&&(s=this.toHex8String(!0)),t==="hex8"&&(s=this.toHex8String()),t==="name"&&(s=this.toName()),t==="hsl"&&(s=this.toHslString()),t==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=S0(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=S0(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=S0(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=S0(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),s=(n.h+t)%360;return n.h=s<0?360+s:s,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var s=this.toRgb(),o=new e(t).toRgb(),r=n/100,i={r:(o.r-s.r)*r+s.r,g:(o.g-s.g)*r+s.g,b:(o.b-s.b)*r+s.b,a:(o.a-s.a)*r+s.a};return new e(i)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var s=this.toHsl(),o=360/n,r=[this];for(s.h=(s.h-(o*t>>1)+720)%360;--t;)s.h=(s.h+o)%360,r.push(new e(s));return r},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),s=n.h,o=n.s,r=n.v,i=[],a=1/t;t--;)i.push(new e({h:s,s:o,v:r})),r=(r+a)%1;return i},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),s=new e(t).toRgb();return new e({r:s.r+(n.r-s.r)*n.a,g:s.g+(n.g-s.g)*n.a,b:s.b+(n.b-s.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),s=n.h,o=[this],r=360/t,i=1;i<t;i++)o.push(new e({h:(s+i*r)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();const Xk=["default","primary","success","warning","info","danger","text",""],jce=["button","submit","reset"],Zk=pt({size:Cy,disabled:Boolean,type:{type:String,values:Xk,default:""},icon:{type:Mo,default:""},nativeType:{type:String,values:jce,default:"button"},loading:Boolean,loadingIcon:{type:Mo,default:()=>ou},plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,autoInsertSpace:{type:Boolean,default:void 0}}),Gce={click:e=>e instanceof MouseEvent},Kce=["disabled","autofocus","type"],qce={name:"ElButton"},Yce=xe(nt(Me({},qce),{props:Zk,emits:Gce,setup(e,{expose:t,emit:n}){const s=e,o=gm(),r=rt(t4,void 0),i=Vf("button"),a=Xe("button"),{form:l}=Hf(),u=Ls(O(()=>r==null?void 0:r.size)),c=Wf(),d=j(),f=O(()=>s.type||(r==null?void 0:r.type)||""),h=O(()=>{var v,b,w;return(w=(b=s.autoInsertSpace)!=null?b:(v=i.value)==null?void 0:v.autoInsertSpace)!=null?w:!1}),p=O(()=>{var v;const b=(v=o.default)==null?void 0:v.call(o);if(h.value&&(b==null?void 0:b.length)===1){const w=b[0];if((w==null?void 0:w.type)===mm){const y=w.children;return/^\p{Unified_Ideograph}{2}$/u.test(y.trim())}}return!1}),m=O(()=>{let v={};const b=s.color;if(b){const w=new K4(b),y=w.shade(20).toString();if(s.plain)v={"--el-button-bg-color":w.tint(90).toString(),"--el-button-text-color":b,"--el-button-hover-text-color":"var(--el-color-white)","--el-button-hover-bg-color":b,"--el-button-hover-border-color":b,"--el-button-active-bg-color":y,"--el-button-active-text-color":"var(--el-color-white)","--el-button-active-border-color":y};else{const k=w.tint(30).toString();v={"--el-button-bg-color":b,"--el-button-border-color":b,"--el-button-hover-bg-color":k,"--el-button-hover-border-color":k,"--el-button-active-bg-color":y,"--el-button-active-border-color":y}}if(c.value){const k=w.tint(50).toString();v["--el-button-disabled-bg-color"]=k,v["--el-button-disabled-border-color"]=k}}return v}),g=v=>{s.nativeType==="reset"&&(l==null||l.resetFields()),n("click",v)};return t({ref:d,size:u,type:f,disabled:c,shouldAddSpace:p}),(v,b)=>(_(),U("button",{ref_key:"_ref",ref:d,class:W([N(a).b(),N(a).m(N(f)),N(a).m(N(u)),N(a).is("disabled",N(c)),N(a).is("loading",v.loading),N(a).is("plain",v.plain),N(a).is("round",v.round),N(a).is("circle",v.circle)]),disabled:N(c)||v.loading,autofocus:v.autofocus,type:v.nativeType,style:it(N(m)),onClick:g},[v.loading?(_(),U(lt,{key:0},[v.$slots.loading?Pe(v.$slots,"loading",{key:0}):(_(),ye(N(xt),{key:1,class:W(N(a).is("loading"))},{default:de(()=>[(_(),ye(an(v.loadingIcon)))]),_:1},8,["class"]))],2112)):v.icon||v.$slots.icon?(_(),ye(N(xt),{key:1},{default:de(()=>[v.icon?(_(),ye(an(v.icon),{key:0})):Pe(v.$slots,"icon",{key:1})]),_:3})):me("v-if",!0),v.$slots.default?(_(),U("span",{key:2,class:W({[N(a).em("text","expand")]:N(p)})},[Pe(v.$slots,"default")],2)):me("v-if",!0)],14,Kce))}}));var Xce=Ye(Yce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const Zce={size:Zk.size,type:Zk.type},Jce={name:"ElButtonGroup"},Qce=xe(nt(Me({},Jce),{props:Zce,setup(e){const t=e;Gt(t4,vn({size:qs(t,"size"),type:qs(t,"type")}));const n=Xe("button");return(s,o)=>(_(),U("div",{class:W(`${N(n).b("group")}`)},[Pe(s.$slots,"default")],2))}}));var q4=Ye(Qce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const ii=Kt(Xce,{ButtonGroup:q4}),Y4=ws(q4);var ss=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},X4={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){var n=1e3,s=6e4,o=36e5,r="millisecond",i="second",a="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},w=function(P,V,H){var F=String(P);return!F||F.length>=V?P:""+Array(V+1-F.length).join(H)+P},y={s:w,z:function(P){var V=-P.utcOffset(),H=Math.abs(V),F=Math.floor(H/60),M=H%60;return(V<=0?"+":"-")+w(F,2,"0")+":"+w(M,2,"0")},m:function P(V,H){if(V.date()<H.date())return-P(H,V);var F=12*(H.year()-V.year())+(H.month()-V.month()),M=V.clone().add(F,d),B=H-M<0,Y=V.clone().add(F+(B?-1:1),d);return+(-(F+(H-M)/(B?M-Y:Y-M))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:d,y:h,w:c,d:u,D:p,h:l,m:a,s:i,ms:r,Q:f}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},k="en",x={};x[k]=b;var C=function(P){return P instanceof R},S=function P(V,H,F){var M;if(!V)return k;if(typeof V=="string"){var B=V.toLowerCase();x[B]&&(M=B),H&&(x[B]=H,M=B);var Y=V.split("-");if(!M&&Y.length>1)return P(Y[0])}else{var J=V.name;x[J]=V,M=J}return!F&&M&&(k=M),M||!F&&k},T=function(P,V){if(C(P))return P.clone();var H=typeof V=="object"?V:{};return H.date=P,H.args=arguments,new R(H)},A=y;A.l=S,A.i=C,A.w=function(P,V){return T(P,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var R=function(){function P(H){this.$L=S(H.locale,null,!0),this.parse(H)}var V=P.prototype;return V.parse=function(H){this.$d=function(F){var M=F.date,B=F.utc;if(M===null)return new Date(NaN);if(A.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var Y=M.match(g);if(Y){var J=Y[2]-1||0,ee=(Y[7]||"0").substring(0,3);return B?new Date(Date.UTC(Y[1],J,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,ee)):new Date(Y[1],J,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,ee)}}return new Date(M)}(H),this.$x=H.x||{},this.init()},V.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},V.$utils=function(){return A},V.isValid=function(){return this.$d.toString()!==m},V.isSame=function(H,F){var M=T(H);return this.startOf(F)<=M&&M<=this.endOf(F)},V.isAfter=function(H,F){return T(H)<this.startOf(F)},V.isBefore=function(H,F){return this.endOf(F)<T(H)},V.$g=function(H,F,M){return A.u(H)?this[F]:this.set(M,H)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(H,F){var M=this,B=!!A.u(F)||F,Y=A.p(H),J=function(pe,ke){var Be=A.w(M.$u?Date.UTC(M.$y,ke,pe):new Date(M.$y,ke,pe),M);return B?Be:Be.endOf(u)},ee=function(pe,ke){return A.w(M.toDate()[pe].apply(M.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(ke)),M)},te=this.$W,re=this.$M,$e=this.$D,se="set"+(this.$u?"UTC":"");switch(Y){case h:return B?J(1,0):J(31,11);case d:return B?J(1,re):J(0,re+1);case c:var Q=this.$locale().weekStart||0,ae=(te<Q?te+7:te)-Q;return J(B?$e-ae:$e+(6-ae),re);case u:case p:return ee(se+"Hours",0);case l:return ee(se+"Minutes",1);case a:return ee(se+"Seconds",2);case i:return ee(se+"Milliseconds",3);default:return this.clone()}},V.endOf=function(H){return this.startOf(H,!1)},V.$set=function(H,F){var M,B=A.p(H),Y="set"+(this.$u?"UTC":""),J=(M={},M[u]=Y+"Date",M[p]=Y+"Date",M[d]=Y+"Month",M[h]=Y+"FullYear",M[l]=Y+"Hours",M[a]=Y+"Minutes",M[i]=Y+"Seconds",M[r]=Y+"Milliseconds",M)[B],ee=B===u?this.$D+(F-this.$W):F;if(B===d||B===h){var te=this.clone().set(p,1);te.$d[J](ee),te.init(),this.$d=te.set(p,Math.min(this.$D,te.daysInMonth())).$d}else J&&this.$d[J](ee);return this.init(),this},V.set=function(H,F){return this.clone().$set(H,F)},V.get=function(H){return this[A.p(H)]()},V.add=function(H,F){var M,B=this;H=Number(H);var Y=A.p(F),J=function(re){var $e=T(B);return A.w($e.date($e.date()+Math.round(re*H)),B)};if(Y===d)return this.set(d,this.$M+H);if(Y===h)return this.set(h,this.$y+H);if(Y===u)return J(1);if(Y===c)return J(7);var ee=(M={},M[a]=s,M[l]=o,M[i]=n,M)[Y]||1,te=this.$d.getTime()+H*ee;return A.w(te,this)},V.subtract=function(H,F){return this.add(-1*H,F)},V.format=function(H){var F=this,M=this.$locale();if(!this.isValid())return M.invalidDate||m;var B=H||"YYYY-MM-DDTHH:mm:ssZ",Y=A.z(this),J=this.$H,ee=this.$m,te=this.$M,re=M.weekdays,$e=M.months,se=function(ke,Be,je,qe){return ke&&(ke[Be]||ke(F,B))||je[Be].substr(0,qe)},Q=function(ke){return A.s(J%12||12,ke,"0")},ae=M.meridiem||function(ke,Be,je){var qe=ke<12?"AM":"PM";return je?qe.toLowerCase():qe},pe={YY:String(this.$y).slice(-2),YYYY:this.$y,M:te+1,MM:A.s(te+1,2,"0"),MMM:se(M.monthsShort,te,$e,3),MMMM:se($e,te),D:this.$D,DD:A.s(this.$D,2,"0"),d:String(this.$W),dd:se(M.weekdaysMin,this.$W,re,2),ddd:se(M.weekdaysShort,this.$W,re,3),dddd:re[this.$W],H:String(J),HH:A.s(J,2,"0"),h:Q(1),hh:Q(2),a:ae(J,ee,!0),A:ae(J,ee,!1),m:String(ee),mm:A.s(ee,2,"0"),s:String(this.$s),ss:A.s(this.$s,2,"0"),SSS:A.s(this.$ms,3,"0"),Z:Y};return B.replace(v,function(ke,Be){return Be||pe[ke]||Y.replace(":","")})},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(H,F,M){var B,Y=A.p(F),J=T(H),ee=(J.utcOffset()-this.utcOffset())*s,te=this-J,re=A.m(this,J);return re=(B={},B[h]=re/12,B[d]=re,B[f]=re/3,B[c]=(te-ee)/6048e5,B[u]=(te-ee)/864e5,B[l]=te/o,B[a]=te/s,B[i]=te/n,B)[Y]||te,M?re:A.a(re)},V.daysInMonth=function(){return this.endOf(d).$D},V.$locale=function(){return x[this.$L]},V.locale=function(H,F){if(!H)return this.$L;var M=this.clone(),B=S(H,F,!0);return B&&(M.$L=B),M},V.clone=function(){return A.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},P}(),L=R.prototype;return T.prototype=L,[["$ms",r],["$s",i],["$m",a],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function(P){L[P[1]]=function(V){return this.$g(V,P[0],P[1])}}),T.extend=function(P,V){return P.$i||(P(V,R,T),P.$i=!0),T},T.locale=S,T.isDayjs=C,T.unix=function(P){return T(1e3*P)},T.en=x[k],T.Ls=x,T.p={},T})})(X4);var Tt=X4.exports,Z4={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){return function(n,s,o){var r=s.prototype,i=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,f,h,p,m){var g=d.name?d:d.$locale(),v=i(g[f]),b=i(g[h]),w=v||b.map(function(k){return k.substr(0,p)});if(!m)return w;var y=g.weekStart;return w.map(function(k,x){return w[(x+(y||0))%7]})},l=function(){return o.Ls[o.locale()]},u=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,g){return m||g.slice(1)})}(d.formats[f.toUpperCase()])},c=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):a(d,"months")},monthsShort:function(f){return f?f.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):a(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return u(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return c.bind(this)()},o.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return o.weekdays()},weekdaysShort:function(){return o.weekdaysShort()},weekdaysMin:function(){return o.weekdaysMin()},months:function(){return o.months()},monthsShort:function(){return o.monthsShort()},longDateFormat:function(f){return u(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},o.months=function(){return a(l(),"months")},o.monthsShort=function(){return a(l(),"monthsShort","months",3)},o.weekdays=function(d){return a(l(),"weekdays",null,null,d)},o.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},o.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(Z4);var J4=Z4.exports,Q4={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,r=/\d\d?/,i=/\d*[^\s\d-_:/()]+/,a={},l=function(m){return(m=+m)+(m>68?1900:2e3)},u=function(m){return function(g){this[m]=+g}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var v=g.match(/([+-]|\d\d)/g),b=60*v[1]+(+v[2]||0);return b===0?0:v[0]==="+"?-b:b}(m)}],d=function(m){var g=a[m];return g&&(g.indexOf?g:g.s.concat(g.f))},f=function(m,g){var v,b=a.meridiem;if(b){for(var w=1;w<=24;w+=1)if(m.indexOf(b(w,0,g))>-1){v=w>12;break}}else v=m===(g?"pm":"PM");return v},h={A:[i,function(m){this.afternoon=f(m,!1)}],a:[i,function(m){this.afternoon=f(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[o,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[r,u("seconds")],ss:[r,u("seconds")],m:[r,u("minutes")],mm:[r,u("minutes")],H:[r,u("hours")],h:[r,u("hours")],HH:[r,u("hours")],hh:[r,u("hours")],D:[r,u("day")],DD:[o,u("day")],Do:[i,function(m){var g=a.ordinal,v=m.match(/\d+/);if(this.day=v[0],g)for(var b=1;b<=31;b+=1)g(b).replace(/\[|\]/g,"")===m&&(this.day=b)}],M:[r,u("month")],MM:[o,u("month")],MMM:[i,function(m){var g=d("months"),v=(d("monthsShort")||g.map(function(b){return b.substr(0,3)})).indexOf(m)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[i,function(m){var g=d("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[o,function(m){this.year=l(m)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function p(m){var g,v;g=m,v=a&&a.formats;for(var b=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(T,A,R){var L=R&&R.toUpperCase();return A||v[R]||n[R]||v[L].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(P,V,H){return V||H.slice(1)})})).match(s),w=b.length,y=0;y<w;y+=1){var k=b[y],x=h[k],C=x&&x[0],S=x&&x[1];b[y]=S?{regex:C,parser:S}:k.replace(/^\[|\]$/g,"")}return function(T){for(var A={},R=0,L=0;R<w;R+=1){var P=b[R];if(typeof P=="string")L+=P.length;else{var V=P.regex,H=P.parser,F=T.substr(L),M=V.exec(F)[0];H.call(A,M),T=T.replace(M,"")}}return function(B){var Y=B.afternoon;if(Y!==void 0){var J=B.hours;Y?J<12&&(B.hours+=12):J===12&&(B.hours=0),delete B.afternoon}}(A),A}}return function(m,g,v){v.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var b=g.prototype,w=b.parse;b.parse=function(y){var k=y.date,x=y.utc,C=y.args;this.$u=x;var S=C[1];if(typeof S=="string"){var T=C[2]===!0,A=C[3]===!0,R=T||A,L=C[2];A&&(L=C[2]),a=this.$locale(),!T&&L&&(a=v.Ls[L]),this.$d=function(F,M,B){try{if(["x","X"].indexOf(M)>-1)return new Date((M==="X"?1e3:1)*F);var Y=p(M)(F),J=Y.year,ee=Y.month,te=Y.day,re=Y.hours,$e=Y.minutes,se=Y.seconds,Q=Y.milliseconds,ae=Y.zone,pe=new Date,ke=te||(J||ee?1:pe.getDate()),Be=J||pe.getFullYear(),je=0;J&&!ee||(je=ee>0?ee-1:pe.getMonth());var qe=re||0,ne=$e||0,ue=se||0,Se=Q||0;return ae?new Date(Date.UTC(Be,je,ke,qe,ne,ue,Se+60*ae.offset*1e3)):B?new Date(Date.UTC(Be,je,ke,qe,ne,ue,Se)):new Date(Be,je,ke,qe,ne,ue,Se)}catch{return new Date("")}}(k,S,x),this.init(),L&&L!==!0&&(this.$L=this.locale(L).$L),R&&k!=this.format(S)&&(this.$d=new Date("")),a={}}else if(S instanceof Array)for(var P=S.length,V=1;V<=P;V+=1){C[1]=S[V-1];var H=v.apply(this,C);if(H.isValid()){this.$d=H.$d,this.$L=H.$L,this.init();break}V===P&&(this.$d=new Date(""))}else w.call(this,y)}}})})(Q4);var q$=Q4.exports;const Jk="HH:mm:ss",Lh="YYYY-MM-DD",ede={date:Lh,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${Lh} ${Jk}`,monthrange:"YYYY-MM",daterange:Lh,datetimerange:`${Lh} ${Jk}`},Y$={id:{type:[Array,String]},name:{type:[Array,String],default:""},popperClass:{type:String,default:""},format:{type:String},valueFormat:{type:String},type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Za},editable:{type:Boolean,default:!0},prefixIcon:{type:[String,Object],default:""},size:{type:String,validator:Pr},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},modelValue:{type:[Date,Array,String,Number],default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:[Date,Array]},defaultTime:{type:[Date,Array]},isRange:{type:Boolean,default:!1},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean},aD=function(e,t){const n=e instanceof Date,s=t instanceof Date;return n&&s?e.getTime()===t.getTime():!n&&!s?e===t:!1},lD=function(e,t){const n=Array.isArray(e),s=Array.isArray(t);return n&&s?e.length!==t.length?!1:e.every((o,r)=>aD(o,t[r])):!n&&!s?aD(e,t):!1},uD=function(e,t,n){const s=Rp(t)||t==="x"?Tt(e).locale(n):Tt(e,t).locale(n);return s.isValid()?s:void 0},cD=function(e,t,n){return Rp(t)?e:t==="x"?+e:Tt(e).locale(n).format(t)},tde=xe({name:"Picker",components:{ElInput:yi,ElTooltip:vr,ElIcon:xt},props:Y$,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change"],setup(e,t){const{lang:n}=Dn(),s=Xe("date"),o=Xe("input"),r=Xe("range"),i=rt(Lr,{}),a=rt(di,{}),l=rt("ElPopperOptions",{}),u=j(),c=j(),d=j(!1),f=j(!1),h=j(null);We(d,ve=>{var Ve;ve?h.value=e.modelValue:(pe.value=null,vt(()=>{p(e.modelValue)}),t.emit("blur"),Be(),e.validateEvent&&((Ve=a.validate)==null||Ve.call(a,"blur").catch(ft=>void 0)))});const p=(ve,Ve)=>{var ft;(Ve||!lD(ve,h.value))&&(t.emit("change",ve),e.validateEvent&&((ft=a.validate)==null||ft.call(a,"change").catch(K=>void 0)))},m=ve=>{if(!lD(e.modelValue,ve)){let Ve;Array.isArray(ve)?Ve=ve.map(ft=>cD(ft,e.valueFormat,n.value)):ve&&(Ve=cD(ve,e.valueFormat,n.value)),t.emit("update:modelValue",ve&&Ve,n.value)}},g=O(()=>{if(c.value){const ve=re.value?c.value:c.value.$el;return Array.from(ve.querySelectorAll("input"))}return[]}),v=O(()=>g==null?void 0:g.value[0]),b=O(()=>g==null?void 0:g.value[1]),w=(ve,Ve,ft)=>{const K=g.value;!K.length||(!ft||ft==="min"?(K[0].setSelectionRange(ve,Ve),K[0].focus()):ft==="max"&&(K[1].setSelectionRange(ve,Ve),K[1].focus()))},y=(ve="",Ve=!1)=>{d.value=Ve;let ft;Array.isArray(ve)?ft=ve.map(K=>K.toDate()):ft=ve&&ve.toDate(),pe.value=null,m(ft)},k=()=>{f.value=!0},x=()=>{t.emit("visible-change",!0)},C=()=>{f.value=!1,t.emit("visible-change",!1)},S=(ve=!0)=>{let Ve=v.value;!ve&&re.value&&(Ve=b.value),Ve&&Ve.focus()},T=ve=>{e.readonly||R.value||d.value||(d.value=!0,t.emit("focus",ve))},A=()=>{var ve;(ve=u.value)==null||ve.onClose(),Be()},R=O(()=>e.disabled||i.disabled),L=O(()=>{let ve;if(J.value?ge.value.getDefaultValue&&(ve=ge.value.getDefaultValue()):Array.isArray(e.modelValue)?ve=e.modelValue.map(Ve=>uD(Ve,e.valueFormat,n.value)):ve=uD(e.modelValue,e.valueFormat,n.value),ge.value.getRangeAvailableTime){const Ve=ge.value.getRangeAvailableTime(ve);Zo(Ve,ve)||(ve=Ve,m(Array.isArray(ve)?ve.map(ft=>ft.toDate()):ve.toDate()))}return Array.isArray(ve)&&ve.some(Ve=>!Ve)&&(ve=[]),ve}),P=O(()=>{if(!ge.value.panelReady)return;const ve=qe(L.value);if(Array.isArray(pe.value))return[pe.value[0]||ve&&ve[0]||"",pe.value[1]||ve&&ve[1]||""];if(pe.value!==null)return pe.value;if(!(!H.value&&J.value)&&!(!d.value&&J.value))return ve?F.value?ve.join(", "):ve:""}),V=O(()=>e.type.includes("time")),H=O(()=>e.type.startsWith("time")),F=O(()=>e.type==="dates"),M=O(()=>e.prefixIcon||(V.value?UF:Hne)),B=j(!1),Y=ve=>{e.readonly||R.value||B.value&&(ve.stopPropagation(),m(null),p(null,!0),B.value=!1,d.value=!1,ge.value.handleClear&&ge.value.handleClear())},J=O(()=>!e.modelValue||Array.isArray(e.modelValue)&&!e.modelValue.length),ee=()=>{e.readonly||R.value||!J.value&&e.clearable&&(B.value=!0)},te=()=>{B.value=!1},re=O(()=>e.type.includes("range")),$e=Ls(),se=O(()=>{var ve,Ve;return(Ve=(ve=u.value)==null?void 0:ve.popperRef)==null?void 0:Ve.contentRef}),Q=O(()=>{var ve,Ve;return(Ve=(ve=N(u))==null?void 0:ve.popperRef)==null?void 0:Ve.contentRef}),ae=O(()=>{var ve;return N(re)?N(c):(ve=N(c))==null?void 0:ve.$el});tb(ae,ve=>{const Ve=N(Q),ft=N(ae);Ve&&(ve.target===Ve||ve.composedPath().includes(Ve))||ve.target===ft||ve.composedPath().includes(ft)||(d.value=!1)});const pe=j(null),ke=()=>{if(pe.value){const ve=je(P.value);ve&&ne(ve)&&(m(Array.isArray(ve)?ve.map(Ve=>Ve.toDate()):ve.toDate()),pe.value=null)}pe.value===""&&(m(null),p(null),pe.value=null)},Be=()=>{g.value.forEach(ve=>ve.blur())},je=ve=>ve?ge.value.parseUserInput(ve):null,qe=ve=>ve?ge.value.formatToString(ve):null,ne=ve=>ge.value.isValidValue(ve),ue=ve=>{const Ve=ve.code;if(Ve===ct.esc){d.value=!1,ve.stopPropagation();return}if(Ve===ct.tab){re.value?setTimeout(()=>{g.value.includes(document.activeElement)||(d.value=!1,Be())},0):(ke(),d.value=!1,ve.stopPropagation());return}if(Ve===ct.enter||Ve===ct.numpadEnter){(pe.value===null||pe.value===""||ne(je(P.value)))&&(ke(),d.value=!1),ve.stopPropagation();return}if(pe.value){ve.stopPropagation();return}ge.value.handleKeydown&&ge.value.handleKeydown(ve)},Se=ve=>{pe.value=ve},Fe=ve=>{pe.value?pe.value=[ve.target.value,pe.value[1]]:pe.value=[ve.target.value,null]},Le=ve=>{pe.value?pe.value=[pe.value[0],ve.target.value]:pe.value=[null,ve.target.value]},Ke=()=>{const ve=je(pe.value&&pe.value[0]);if(ve&&ve.isValid()){pe.value=[qe(ve),P.value[1]];const Ve=[ve,L.value&&L.value[1]];ne(Ve)&&(m(Ve),pe.value=null)}},ie=()=>{const ve=je(pe.value&&pe.value[1]);if(ve&&ve.isValid()){pe.value=[P.value[0],qe(ve)];const Ve=[L.value&&L.value[0],ve];ne(Ve)&&(m(Ve),pe.value=null)}},ge=j({}),be=ve=>{ge.value[ve[0]]=ve[1],ge.value.panelReady=!0},Ie=ve=>{t.emit("calendar-change",ve)},ot=(ve,Ve,ft)=>{t.emit("panel-change",ve,Ve,ft)};return Gt("EP_PICKER_BASE",{props:e}),{nsDate:s,nsInput:o,nsRange:r,elPopperOptions:l,isDatesPicker:F,handleEndChange:ie,handleStartChange:Ke,handleStartInput:Fe,handleEndInput:Le,onUserInput:Se,handleChange:ke,handleKeydown:ue,popperPaneRef:se,onClickOutside:tb,pickerSize:$e,isRangeInput:re,onMouseLeave:te,onMouseEnter:ee,onClearIconClick:Y,showClose:B,triggerIcon:M,onPick:y,handleFocus:T,handleBlur:A,pickerVisible:d,pickerActualVisible:f,displayValue:P,parsedValue:L,setSelectionRange:w,refPopper:u,inputRef:c,pickerDisabled:R,onSetPickerOption:be,onCalendarChange:Ie,onPanelChange:ot,focus:S,onShow:x,onBeforeShow:k,onHide:C}}}),nde=["id","name","placeholder","value","disabled","readonly"],sde=["id","name","placeholder","value","disabled","readonly"];function ode(e,t,n,s,o,r){const i=Ne("el-icon"),a=Ne("el-input"),l=Ne("el-tooltip");return _(),ye(l,Wn({ref:"refPopper",visible:e.pickerVisible,"onUpdate:visible":t[17]||(t[17]=u=>e.pickerVisible=u),effect:"light",pure:"",trigger:"click"},e.$attrs,{"append-to-body":"",transition:`${e.nsDate.namespace.value}-zoom-in-top`,"popper-class":[`${e.nsDate.namespace.value}-picker__popper`,e.popperClass],"popper-options":e.elPopperOptions,"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:e.onBeforeShow,onShow:e.onShow,onHide:e.onHide}),{default:de(()=>[e.isRangeInput?(_(),U("div",{key:1,ref:"inputRef",class:W([e.nsDate.b("editor"),e.nsDate.bm("editor",e.type),e.nsInput.e("inner"),e.nsDate.is("disabled",e.pickerDisabled),e.nsDate.is("active",e.pickerVisible),e.nsRange.b("editor"),e.pickerSize?e.nsRange.bm("editor",e.pickerSize):"",e.$attrs.class]),style:it(e.$attrs.style),onClick:t[7]||(t[7]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onMouseenter:t[8]||(t[8]=(...u)=>e.onMouseEnter&&e.onMouseEnter(...u)),onMouseleave:t[9]||(t[9]=(...u)=>e.onMouseLeave&&e.onMouseLeave(...u)),onKeydown:t[10]||(t[10]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))},[e.triggerIcon?(_(),ye(i,{key:0,class:W([e.nsInput.e("icon"),e.nsRange.e("icon")]),onClick:e.handleFocus},{default:de(()=>[(_(),ye(an(e.triggerIcon)))]),_:1},8,["class","onClick"])):me("v-if",!0),q("input",{id:e.id&&e.id[0],autocomplete:"off",name:e.name&&e.name[0],placeholder:e.startPlaceholder,value:e.displayValue&&e.displayValue[0],disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,class:W(e.nsRange.b("input")),onInput:t[1]||(t[1]=(...u)=>e.handleStartInput&&e.handleStartInput(...u)),onChange:t[2]||(t[2]=(...u)=>e.handleStartChange&&e.handleStartChange(...u)),onFocus:t[3]||(t[3]=(...u)=>e.handleFocus&&e.handleFocus(...u))},null,42,nde),Pe(e.$slots,"range-separator",{},()=>[q("span",{class:W(e.nsRange.b("separator"))},He(e.rangeSeparator),3)]),q("input",{id:e.id&&e.id[1],autocomplete:"off",name:e.name&&e.name[1],placeholder:e.endPlaceholder,value:e.displayValue&&e.displayValue[1],disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,class:W(e.nsRange.b("input")),onFocus:t[4]||(t[4]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onInput:t[5]||(t[5]=(...u)=>e.handleEndInput&&e.handleEndInput(...u)),onChange:t[6]||(t[6]=(...u)=>e.handleEndChange&&e.handleEndChange(...u))},null,42,sde),e.clearIcon?(_(),ye(i,{key:1,class:W([e.nsInput.e("icon"),e.nsRange.e("close-icon"),{[e.nsRange.e("close-icon--hidden")]:!e.showClose}]),onClick:e.onClearIconClick},{default:de(()=>[(_(),ye(an(e.clearIcon)))]),_:1},8,["class","onClick"])):me("v-if",!0)],38)):(_(),ye(a,{key:0,id:e.id,ref:"inputRef","model-value":e.displayValue,name:e.name,size:e.pickerSize,disabled:e.pickerDisabled,placeholder:e.placeholder,class:W([e.nsDate.b("editor"),e.nsDate.bm("editor",e.type),e.$attrs.class]),style:it(e.$attrs.style),readonly:!e.editable||e.readonly||e.isDatesPicker||e.type==="week",onInput:e.onUserInput,onFocus:e.handleFocus,onKeydown:e.handleKeydown,onChange:e.handleChange,onMouseenter:e.onMouseEnter,onMouseleave:e.onMouseLeave,onClick:t[0]||(t[0]=wt(()=>{},["stop"]))},{prefix:de(()=>[e.triggerIcon?(_(),ye(i,{key:0,class:W(e.nsInput.e("icon")),onClick:e.handleFocus},{default:de(()=>[(_(),ye(an(e.triggerIcon)))]),_:1},8,["class","onClick"])):me("v-if",!0)]),suffix:de(()=>[e.showClose&&e.clearIcon?(_(),ye(i,{key:0,class:W(`${e.nsInput.e("icon")} clear-icon`),onClick:e.onClearIconClick},{default:de(()=>[(_(),ye(an(e.clearIcon)))]),_:1},8,["class","onClick"])):me("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","onInput","onFocus","onKeydown","onChange","onMouseenter","onMouseleave"]))]),content:de(()=>[Pe(e.$slots,"default",{visible:e.pickerVisible,actualVisible:e.pickerActualVisible,parsedValue:e.parsedValue,format:e.format,unlinkPanels:e.unlinkPanels,type:e.type,defaultValue:e.defaultValue,onPick:t[11]||(t[11]=(...u)=>e.onPick&&e.onPick(...u)),onSelectRange:t[12]||(t[12]=(...u)=>e.setSelectionRange&&e.setSelectionRange(...u)),onSetPickerOption:t[13]||(t[13]=(...u)=>e.onSetPickerOption&&e.onSetPickerOption(...u)),onCalendarChange:t[14]||(t[14]=(...u)=>e.onCalendarChange&&e.onCalendarChange(...u)),onPanelChange:t[15]||(t[15]=(...u)=>e.onPanelChange&&e.onPanelChange(...u)),onMousedown:t[16]||(t[16]=wt(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options","onBeforeShow","onShow","onHide"])}var eL=Ye(tde,[["render",ode],["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const Il=new Map;let dD;sn&&(document.addEventListener("mousedown",e=>dD=e),document.addEventListener("mouseup",e=>{for(const t of Il.values())for(const{documentHandler:n}of t)n(e,dD)}));function fD(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:wc(t.arg)&&n.push(t.arg),function(s,o){const r=t.instance.popperRef,i=s.target,a=o==null?void 0:o.target,l=!t||!t.instance,u=!i||!a,c=e.contains(i)||e.contains(a),d=e===i,f=n.length&&n.some(p=>p==null?void 0:p.contains(i))||n.length&&n.includes(a),h=r&&(r.contains(i)||r.contains(a));l||u||c||d||f||h||t.value(s,o)}}const Gc={beforeMount(e,t){Il.has(e)||Il.set(e,[]),Il.get(e).push({documentHandler:fD(e,t),bindingFn:t.value})},updated(e,t){Il.has(e)||Il.set(e,[]);const n=Il.get(e),s=n.findIndex(r=>r.bindingFn===t.oldValue),o={documentHandler:fD(e,t),bindingFn:t.value};s>=0?n.splice(s,1,o):n.push(o)},unmounted(e){Il.delete(e)}};var tL={beforeMount(e,t){let n=null,s;const o=()=>t.value&&t.value(),r=()=>{Date.now()-s<100&&o(),clearInterval(n),n=null};ts(e,"mousedown",i=>{i.button===0&&(s=Date.now(),Pte(document,"mouseup",r),clearInterval(n),n=setInterval(o,100))})}};const Qk="_trap-focus-children",Xu=[],hD=e=>{if(Xu.length===0)return;const t=Xu[Xu.length-1][Qk];if(t.length>0&&e.code===ct.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const n=e.shiftKey,s=e.target===t[0],o=e.target===t[t.length-1];s&&n&&(e.preventDefault(),t[t.length-1].focus()),o&&!n&&(e.preventDefault(),t[0].focus())}},nL={beforeMount(e){e[Qk]=xA(e),Xu.push(e),Xu.length<=1&&ts(document,"keydown",hD)},updated(e){vt(()=>{e[Qk]=xA(e)})},unmounted(){Xu.shift(),Xu.length===0&&Ss(document,"keydown",hD)}};var pD=!1,Uu,ex,tx,gv,vv,sL,bv,nx,sx,ox,oL,rx,ix,rL,iL;function or(){if(!pD){pD=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(rx=/\b(iPhone|iP[ao]d)/.exec(e),ix=/\b(iP[ao]d)/.exec(e),ox=/Android/i.exec(e),rL=/FBAN\/\w+;/i.exec(e),iL=/Mobile/i.exec(e),oL=!!/Win64/.exec(e),t){Uu=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Uu&&document&&document.documentMode&&(Uu=document.documentMode);var s=/(?:Trident\/(\d+.\d+))/.exec(e);sL=s?parseFloat(s[1])+4:Uu,ex=t[2]?parseFloat(t[2]):NaN,tx=t[3]?parseFloat(t[3]):NaN,gv=t[4]?parseFloat(t[4]):NaN,gv?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),vv=t&&t[1]?parseFloat(t[1]):NaN):vv=NaN}else Uu=ex=tx=vv=gv=NaN;if(n){if(n[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);bv=o?parseFloat(o[1].replace("_",".")):!0}else bv=!1;nx=!!n[2],sx=!!n[3]}else bv=nx=sx=!1}}var ax={ie:function(){return or()||Uu},ieCompatibilityMode:function(){return or()||sL>Uu},ie64:function(){return ax.ie()&&oL},firefox:function(){return or()||ex},opera:function(){return or()||tx},webkit:function(){return or()||gv},safari:function(){return ax.webkit()},chrome:function(){return or()||vv},windows:function(){return or()||nx},osx:function(){return or()||bv},linux:function(){return or()||sx},iphone:function(){return or()||rx},mobile:function(){return or()||rx||ix||ox||iL},nativeApp:function(){return or()||rL},android:function(){return or()||ox},ipad:function(){return or()||ix}},rde=ax,E0=!!(typeof window<"u"&&window.document&&window.document.createElement),ide={canUseDOM:E0,canUseWorkers:typeof Worker<"u",canUseEventListeners:E0&&!!(window.addEventListener||window.attachEvent),canUseViewport:E0&&!!window.screen,isInWorker:!E0},aL=ide,lL;aL.canUseDOM&&(lL=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function ade(e,t){if(!aL.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var o=document.createElement("div");o.setAttribute(n,"return;"),s=typeof o[n]=="function"}return!s&&lL&&e==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var lde=ade,mD=10,gD=40,vD=800;function uL(e){var t=0,n=0,s=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),s=t*mD,o=n*mD,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(s=e.deltaX),(s||o)&&e.deltaMode&&(e.deltaMode==1?(s*=gD,o*=gD):(s*=vD,o*=vD)),s&&!t&&(t=s<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:s,pixelY:o}}uL.getEventType=function(){return rde.firefox()?"DOMMouseScroll":lde("wheel")?"wheel":"mousewheel"};var ude=uL;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const cde=function(e,t){if(e&&e.addEventListener){const n=function(s){const o=ude(s);t&&Reflect.apply(t,this,[s,o])};D$()?e.addEventListener("DOMMouseScroll",n):e.onmousewheel=n}},dde={beforeMount(e,t){cde(e,t.value)}},fde={beforeMount(e,t){e._handleResize=()=>{var n;e&&((n=t.value)==null||n.call(t,e))},Bf(e,e._handleResize)},beforeUnmount(e){zf(e,e._handleResize)}},C2=(e,t,n)=>{const s=[],o=t&&n();for(let r=0;r<e;r++)s[r]=o?o.includes(r):!1;return s},$2=e=>e.map((t,n)=>t||n).filter(t=>t!==!0),cL=(e,t,n)=>({getHoursList:(i,a)=>C2(24,e,()=>e(i,a)),getMinutesList:(i,a,l)=>C2(60,t,()=>t(i,a,l)),getSecondsList:(i,a,l,u)=>C2(60,n,()=>n(i,a,l,u))}),dL=(e,t,n)=>{const{getHoursList:s,getMinutesList:o,getSecondsList:r}=cL(e,t,n);return{getAvailableHours:(u,c)=>$2(s(u,c)),getAvailableMinutes:(u,c,d)=>$2(o(u,c,d)),getAvailableSeconds:(u,c,d,f)=>$2(r(u,c,d,f))}},fL=e=>{const t=j(e.parsedValue);return We(()=>e.visible,n=>{n||(t.value=e.parsedValue)}),t},hde=xe({directives:{repeatClick:tL},components:{ElScrollbar:ul,ElIcon:xt,ArrowUp:bm,ArrowDown:Uc},props:{role:{type:String,required:!0},spinnerDate:{type:Object,required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function}},emits:["change","select-range","set-option"],setup(e,t){const n=Xe("time");let s=!1;const o=hr(Q=>{s=!1,T(Q)},200),r=j(null),i=j(null),a=j(null),l=j(null),u={hours:i,minutes:a,seconds:l},c=O(()=>{const Q=["hours","minutes","seconds"];return e.showSeconds?Q:Q.slice(0,2)}),d=O(()=>e.spinnerDate.hour()),f=O(()=>e.spinnerDate.minute()),h=O(()=>e.spinnerDate.second()),p=O(()=>({hours:d,minutes:f,seconds:h})),m=O(()=>re(e.role)),g=O(()=>$e(d.value,e.role)),v=O(()=>se(d.value,f.value,e.role)),b=O(()=>({hours:m,minutes:g,seconds:v})),w=O(()=>{const Q=d.value;return[Q>0?Q-1:void 0,Q,Q<23?Q+1:void 0]}),y=O(()=>{const Q=f.value;return[Q>0?Q-1:void 0,Q,Q<59?Q+1:void 0]}),k=O(()=>{const Q=h.value;return[Q>0?Q-1:void 0,Q,Q<59?Q+1:void 0]}),x=O(()=>({hours:w,minutes:y,seconds:k})),C=Q=>{if(!!!e.amPmMode)return"";const pe=e.amPmMode==="A";let ke=Q<12?" am":" pm";return pe&&(ke=ke.toUpperCase()),ke},S=Q=>{Q==="hours"?t.emit("select-range",0,2):Q==="minutes"?t.emit("select-range",3,5):Q==="seconds"&&t.emit("select-range",6,8),r.value=Q},T=Q=>{L(Q,p.value[Q].value)},A=()=>{T("hours"),T("minutes"),T("seconds")},R=Q=>Q.querySelector(`.${n.namespace.value}-scrollbar__wrap`),L=(Q,ae)=>{if(e.arrowControl)return;const pe=u[Q];pe&&pe.$el&&(R(pe.$el).scrollTop=Math.max(0,ae*P(Q)))},P=Q=>u[Q].$el.querySelector("li").offsetHeight,V=()=>{F(1)},H=()=>{F(-1)},F=Q=>{r.value||S("hours");const ae=r.value;let pe=p.value[ae].value;const ke=r.value==="hours"?24:60;pe=(pe+Q+ke)%ke,M(ae,pe),L(ae,pe),vt(()=>S(r.value))},M=(Q,ae)=>{if(!b.value[Q].value[ae])switch(Q){case"hours":t.emit("change",e.spinnerDate.hour(ae).minute(f.value).second(h.value));break;case"minutes":t.emit("change",e.spinnerDate.hour(d.value).minute(ae).second(h.value));break;case"seconds":t.emit("change",e.spinnerDate.hour(d.value).minute(f.value).second(ae));break}},B=(Q,{value:ae,disabled:pe})=>{pe||(M(Q,ae),S(Q),L(Q,ae))},Y=Q=>{s=!0,o(Q);const ae=Math.min(Math.round((R(u[Q].$el).scrollTop-(J(Q)*.5-10)/P(Q)+3)/P(Q)),Q==="hours"?23:59);M(Q,ae)},J=Q=>u[Q].$el.offsetHeight,ee=()=>{const Q=ae=>{u[ae]&&u[ae].$el&&(R(u[ae].$el).onscroll=()=>{Y(ae)})};Q("hours"),Q("minutes"),Q("seconds")};Ft(()=>{vt(()=>{!e.arrowControl&&ee(),A(),e.role==="start"&&S("hours")})});const te=(Q,ae)=>{u[ae]=Q};t.emit("set-option",[`${e.role}_scrollDown`,F]),t.emit("set-option",[`${e.role}_emitSelectRange`,S]);const{getHoursList:re,getMinutesList:$e,getSecondsList:se}=cL(e.disabledHours,e.disabledMinutes,e.disabledSeconds);return We(()=>e.spinnerDate,()=>{s||A()}),{ns:n,setRef:te,spinnerItems:c,currentScrollbar:r,hours:d,minutes:f,seconds:h,hoursList:m,minutesList:g,arrowHourList:w,arrowMinuteList:y,arrowSecondList:k,getAmPmFlag:C,emitSelectRange:S,adjustCurrentSpinner:T,typeItemHeight:P,listHoursRef:i,listMinutesRef:a,listSecondsRef:l,onIncreaseClick:V,onDecreaseClick:H,handleClick:B,secondsList:v,timePartsMap:p,arrowListMap:x,listMap:b}}}),pde=["onClick"],mde=["onMouseenter"];function gde(e,t,n,s,o,r){const i=Ne("el-scrollbar"),a=Ne("arrow-up"),l=Ne("el-icon"),u=Ne("arrow-down"),c=Or("repeat-click");return _(),U("div",{class:W([e.ns.b("spinner"),{"has-seconds":e.showSeconds}])},[e.arrowControl?me("v-if",!0):(_(!0),U(lt,{key:0},Zt(e.spinnerItems,d=>(_(),ye(i,{key:d,ref_for:!0,ref:f=>e.setRef(f,d),class:W(e.ns.be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":e.ns.be("spinner","list"),noresize:"",tag:"ul",onMouseenter:f=>e.emitSelectRange(d),onMousemove:f=>e.adjustCurrentSpinner(d)},{default:de(()=>[(_(!0),U(lt,null,Zt(e.listMap[d].value,(f,h)=>(_(),U("li",{key:h,class:W([e.ns.be("spinner","item"),e.ns.is("active",h===e.timePartsMap[d].value),e.ns.is("disabled",f)]),onClick:p=>e.handleClick(d,{value:h,disabled:f})},[d==="hours"?(_(),U(lt,{key:0},[Yt(He(("0"+(e.amPmMode?h%12||12:h)).slice(-2))+He(e.getAmPmFlag(h)),1)],2112)):(_(),U(lt,{key:1},[Yt(He(("0"+h).slice(-2)),1)],2112))],10,pde))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),e.arrowControl?(_(!0),U(lt,{key:1},Zt(e.spinnerItems,d=>(_(),U("div",{key:d,class:W([e.ns.be("spinner","wrapper"),e.ns.is("arrow")]),onMouseenter:f=>e.emitSelectRange(d)},[It((_(),ye(l,{class:W(["arrow-up",e.ns.be("spinner","arrow")])},{default:de(()=>[fe(a)]),_:1},8,["class"])),[[c,e.onDecreaseClick]]),It((_(),ye(l,{class:W(["arrow-down",e.ns.be("spinner","arrow")])},{default:de(()=>[fe(u)]),_:1},8,["class"])),[[c,e.onIncreaseClick]]),q("ul",{class:W(e.ns.be("spinner","list"))},[(_(!0),U(lt,null,Zt(e.arrowListMap[d].value,(f,h)=>(_(),U("li",{key:h,class:W([e.ns.be("spinner","item"),e.ns.is("active",f===e.timePartsMap[d].value),e.ns.is("disabled",e.listMap[d].value[f])])},[typeof f=="number"?(_(),U(lt,{key:0},[d==="hours"?(_(),U(lt,{key:0},[Yt(He(("0"+(e.amPmMode?f%12||12:f)).slice(-2))+He(e.getAmPmFlag(f)),1)],2112)):(_(),U(lt,{key:1},[Yt(He(("0"+f).slice(-2)),1)],2112))],2112)):me("v-if",!0)],2))),128))],2)],42,mde))),128)):me("v-if",!0)],2)}var hL=Ye(hde,[["render",gde],["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const vde=xe({components:{TimeSpinner:hL},props:{visible:Boolean,actualVisible:{type:Boolean,default:void 0},datetimeRole:{type:String},parsedValue:{type:[Object,String]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,t){const n=Xe("time"),{t:s,lang:o}=Dn(),r=j([0,2]),i=fL(e),a=O(()=>Ir(e.actualVisible)?`${n.namespace.value}-zoom-in-top`:""),l=O(()=>e.format.includes("ss")),u=O(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),c=F=>{const M=Tt(F).locale(o.value),B=v(M);return M.isSame(B)},d=()=>{t.emit("pick",i.value,!1)},f=(F=!1,M=!1)=>{M||t.emit("pick",e.parsedValue,F)},h=F=>{if(!e.visible)return;const M=v(F).millisecond(0);t.emit("pick",M,!0)},p=(F,M)=>{t.emit("select-range",F,M),r.value=[F,M]},m=F=>{const M=[0,3].concat(l.value?[6]:[]),B=["hours","minutes"].concat(l.value?["seconds"]:[]),J=(M.indexOf(r.value[0])+F+M.length)%M.length;k.start_emitSelectRange(B[J])},g=F=>{const M=F.code;if(M===ct.left||M===ct.right){const B=M===ct.left?-1:1;m(B),F.preventDefault();return}if(M===ct.up||M===ct.down){const B=M===ct.up?-1:1;k.start_scrollDown(B),F.preventDefault();return}},v=F=>{const M={hour:P,minute:V,second:H};let B=F;return["hour","minute","second"].forEach(Y=>{if(M[Y]){let J;const ee=M[Y];Y==="minute"?J=ee(B.hour(),e.datetimeRole):Y==="second"?J=ee(B.hour(),B.minute(),e.datetimeRole):J=ee(e.datetimeRole),J&&J.length&&!J.includes(B[Y]())&&(B=B[Y](J[0]))}}),B},b=F=>F?Tt(F,e.format).locale(o.value):null,w=F=>F?F.format(e.format):null,y=()=>Tt(L).locale(o.value);t.emit("set-picker-option",["isValidValue",c]),t.emit("set-picker-option",["formatToString",w]),t.emit("set-picker-option",["parseUserInput",b]),t.emit("set-picker-option",["handleKeydown",g]),t.emit("set-picker-option",["getRangeAvailableTime",v]),t.emit("set-picker-option",["getDefaultValue",y]);const k={},x=F=>{k[F[0]]=F[1]},C=rt("EP_PICKER_BASE"),{arrowControl:S,disabledHours:T,disabledMinutes:A,disabledSeconds:R,defaultValue:L}=C.props,{getAvailableHours:P,getAvailableMinutes:V,getAvailableSeconds:H}=dL(T,A,R);return{ns:n,transitionName:a,arrowControl:S,onSetOption:x,t:s,handleConfirm:f,handleChange:h,setSelectionRange:p,amPmMode:u,showSeconds:l,handleCancel:d,disabledHours:T,disabledMinutes:A,disabledSeconds:R}}});function bde(e,t,n,s,o,r){const i=Ne("time-spinner");return _(),ye(Rs,{name:e.transitionName},{default:de(()=>[e.actualVisible||e.visible?(_(),U("div",{key:0,class:W(e.ns.b("panel"))},[q("div",{class:W([e.ns.be("panel","content"),{"has-seconds":e.showSeconds}])},[fe(i,{ref:"spinner",role:e.datetimeRole||"start","arrow-control":e.arrowControl,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"spinner-date":e.parsedValue,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,onChange:e.handleChange,onSetOption:e.onSetOption,onSelectRange:e.setSelectionRange},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2),q("div",{class:W(e.ns.be("panel","footer"))},[q("button",{type:"button",class:W([e.ns.be("panel","btn"),"cancel"]),onClick:t[0]||(t[0]=(...a)=>e.handleCancel&&e.handleCancel(...a))},He(e.t("el.datepicker.cancel")),3),q("button",{type:"button",class:W([e.ns.be("panel","btn"),"confirm"]),onClick:t[1]||(t[1]=a=>e.handleConfirm())},He(e.t("el.datepicker.confirm")),3)],2)],2)):me("v-if",!0)]),_:1},8,["name"])}var X$=Ye(vde,[["render",bde],["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);const vd=(e,t)=>{const n=[];for(let s=e;s<=t;s++)n.push(s);return n},yde=xe({components:{TimeSpinner:hL},props:{visible:Boolean,actualVisible:Boolean,parsedValue:{type:[Array]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,t){const{t:n,lang:s}=Dn(),o=Xe("time"),r=Xe("picker"),i=O(()=>e.parsedValue[0]),a=O(()=>e.parsedValue[1]),l=fL(e),u=()=>{t.emit("pick",l.value,!1)},c=O(()=>e.format.includes("ss")),d=O(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),f=j([]),h=j([]),p=(ke=!1)=>{t.emit("pick",[i.value,a.value],ke)},m=ke=>{b(ke.millisecond(0),a.value)},g=ke=>{b(i.value,ke.millisecond(0))},v=ke=>{const Be=ke.map(qe=>Tt(qe).locale(s.value)),je=P(Be);return Be[0].isSame(je[0])&&Be[1].isSame(je[1])},b=(ke,Be)=>{t.emit("pick",[ke,Be],!0)},w=O(()=>i.value>a.value),y=j([0,2]),k=(ke,Be)=>{t.emit("select-range",ke,Be,"min"),y.value=[ke,Be]},x=O(()=>c.value?11:8),C=(ke,Be)=>{t.emit("select-range",ke,Be,"max"),y.value=[ke+x.value,Be+x.value]},S=ke=>{const Be=c.value?[0,3,6,11,14,17]:[0,3,8,11],je=["hours","minutes"].concat(c.value?["seconds"]:[]),ne=(Be.indexOf(y.value[0])+ke+Be.length)%Be.length,ue=Be.length/2;ne<ue?ee.start_emitSelectRange(je[ne]):ee.end_emitSelectRange(je[ne-ue])},T=ke=>{const Be=ke.code;if(Be===ct.left||Be===ct.right){const je=Be===ct.left?-1:1;S(je),ke.preventDefault();return}if(Be===ct.up||Be===ct.down){const je=Be===ct.up?-1:1,qe=y.value[0]<x.value?"start":"end";ee[`${qe}_scrollDown`](je),ke.preventDefault();return}},A=(ke,Be)=>{const je=se?se(ke):[],qe=ke==="start",ue=(Be||(qe?a.value:i.value)).hour(),Se=qe?vd(ue+1,23):vd(0,ue-1);return m2(je,Se)},R=(ke,Be,je)=>{const qe=Q?Q(ke,Be):[],ne=Be==="start",ue=je||(ne?a.value:i.value),Se=ue.hour();if(ke!==Se)return qe;const Fe=ue.minute(),Le=ne?vd(Fe+1,59):vd(0,Fe-1);return m2(qe,Le)},L=(ke,Be,je,qe)=>{const ne=ae?ae(ke,Be,je):[],ue=je==="start",Se=qe||(ue?a.value:i.value),Fe=Se.hour(),Le=Se.minute();if(ke!==Fe||Be!==Le)return ne;const Ke=Se.second(),ie=ue?vd(Ke+1,59):vd(0,Ke-1);return m2(ne,ie)},P=ke=>ke.map((Be,je)=>M(ke[0],ke[1],je===0?"start":"end")),{getAvailableHours:V,getAvailableMinutes:H,getAvailableSeconds:F}=dL(A,R,L),M=(ke,Be,je)=>{const qe={hour:V,minute:H,second:F},ne=je==="start";let ue=ne?ke:Be;const Se=ne?Be:ke;return["hour","minute","second"].forEach(Fe=>{if(qe[Fe]){let Le;const Ke=qe[Fe];if(Fe==="minute"?Le=Ke(ue.hour(),je,Se):Fe==="second"?Le=Ke(ue.hour(),ue.minute(),je,Se):Le=Ke(je,Se),Le&&Le.length&&!Le.includes(ue[Fe]())){const ie=ne?0:Le.length-1;ue=ue[Fe](Le[ie])}}}),ue},B=ke=>ke?Array.isArray(ke)?ke.map(Be=>Tt(Be,e.format).locale(s.value)):Tt(ke,e.format).locale(s.value):null,Y=ke=>ke?Array.isArray(ke)?ke.map(Be=>Be.format(e.format)):ke.format(e.format):null,J=()=>{if(Array.isArray(pe))return pe.map(Be=>Tt(Be).locale(s.value));const ke=Tt(pe).locale(s.value);return[ke,ke.add(60,"m")]};t.emit("set-picker-option",["formatToString",Y]),t.emit("set-picker-option",["parseUserInput",B]),t.emit("set-picker-option",["isValidValue",v]),t.emit("set-picker-option",["handleKeydown",T]),t.emit("set-picker-option",["getDefaultValue",J]),t.emit("set-picker-option",["getRangeAvailableTime",P]);const ee={},te=ke=>{ee[ke[0]]=ke[1]},re=rt("EP_PICKER_BASE"),{arrowControl:$e,disabledHours:se,disabledMinutes:Q,disabledSeconds:ae,defaultValue:pe}=re.props;return{nsTime:o,nsPicker:r,arrowControl:$e,onSetOption:te,setMaxSelectionRange:C,setMinSelectionRange:k,btnConfirmDisabled:w,handleCancel:u,handleConfirm:p,t:n,showSeconds:c,minDate:i,maxDate:a,amPmMode:d,handleMinChange:m,handleMaxChange:g,minSelectableRange:f,maxSelectableRange:h,disabledHours_:A,disabledMinutes_:R,disabledSeconds_:L}}}),wde=["disabled"];function kde(e,t,n,s,o,r){const i=Ne("time-spinner");return e.actualVisible?(_(),U("div",{key:0,class:W([e.nsTime.b("range-picker"),e.nsPicker.b("panel")])},[q("div",{class:W(e.nsTime.be("range-picker","content"))},[q("div",{class:W(e.nsTime.be("range-picker","cell"))},[q("div",{class:W(e.nsTime.be("range-picker","header"))},He(e.t("el.datepicker.startTime")),3),q("div",{class:W([e.nsTime.be("range-picker","body"),e.nsTime.be("panel","content"),e.nsTime.is("arrow",e.arrowControl),{"has-seconds":e.showSeconds}])},[fe(i,{ref:"minSpinner",role:"start","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.minDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMinChange,onSetOption:e.onSetOption,onSelectRange:e.setMinSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)],2),q("div",{class:W(e.nsTime.be("range-picker","cell"))},[q("div",{class:W(e.nsTime.be("range-picker","header"))},He(e.t("el.datepicker.endTime")),3),q("div",{class:W([e.nsTime.be("range-picker","body"),e.nsTime.be("panel","content"),e.nsTime.is("arrow",e.arrowControl),{"has-seconds":e.showSeconds}])},[fe(i,{ref:"maxSpinner",role:"end","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.maxDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMaxChange,onSetOption:e.onSetOption,onSelectRange:e.setMaxSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)],2)],2),q("div",{class:W(e.nsTime.be("panel","footer"))},[q("button",{type:"button",class:W([e.nsTime.be("panel","btn"),"cancel"]),onClick:t[0]||(t[0]=a=>e.handleCancel())},He(e.t("el.datepicker.cancel")),3),q("button",{type:"button",class:W([e.nsTime.be("panel","btn"),"confirm"]),disabled:e.btnConfirmDisabled,onClick:t[1]||(t[1]=a=>e.handleConfirm())},He(e.t("el.datepicker.confirm")),11,wde)],2)],2)):me("v-if",!0)}var xde=Ye(yde,[["render",kde],["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);Tt.extend(q$);var Cde=xe({name:"ElTimePicker",install:null,props:nt(Me({},Y$),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(e,t){const n=j(null),s=e.isRange?"timerange":"time",o=e.isRange?xde:X$,r=nt(Me({},e),{focus:()=>{var i;(i=n.value)==null||i.handleFocus()},blur:()=>{var i;(i=n.value)==null||i.handleBlur()}});return Gt("ElPopperOptions",e.popperOptions),t.expose(r),()=>{var i;const a=(i=e.format)!=null?i:Jk;return at(eL,nt(Me({},e),{format:a,type:s,ref:n,"onUpdate:modelValue":l=>t.emit("update:modelValue",l)}),{default:l=>at(o,l)})}}});const Vl=e=>Array.from(Array.from({length:e}).keys()),pL=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),mL=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),yv=Cde;yv.install=e=>{e.component(yv.name,yv)};const $de=yv,Sde=(e,t)=>{const n=e.subtract(1,"month").endOf("month").date();return Vl(t).map((s,o)=>n-(t-o-1))},Ide=e=>{const t=e.daysInMonth();return Vl(t).map((n,s)=>s+1)},Ede=e=>Vl(e.length/7).map(t=>{const n=t*7;return e.slice(n,n+7)}),Tde=pt({selectedDay:{type:Qe(Object)},range:{type:Qe(Array)},date:{type:Qe(Object),required:!0},hideHeader:{type:Boolean}}),_de={pick:e=>rn(e)},Nde={key:0},Ade=["onClick"],Dde={name:"DateTable"},Rde=xe(nt(Me({},Dde),{props:Tde,emits:_de,setup(e,{expose:t,emit:n}){const s=e;Tt.extend(J4);const{t:o,lang:r}=Dn(),i=Xe("calendar-table"),a=Xe("calendar-day"),l=Tt().locale(r.value),u=l.$locale().weekStart||0,c=O(()=>!!s.range&&!!s.range.length),d=O(()=>{let v=[];if(c.value){const[b,w]=s.range,y=Vl(w.date()-b.date()+1).map(C=>({text:b.date()+C,type:"current"}));let k=y.length%7;k=k===0?0:7-k;const x=Vl(k).map((C,S)=>({text:S+1,type:"next"}));v=y.concat(x)}else{const b=s.date.startOf("month").day()||7,w=Sde(s.date,b-u).map(x=>({text:x,type:"prev"})),y=Ide(s.date).map(x=>({text:x,type:"current"}));v=[...w,...y];const k=Vl(42-v.length).map((x,C)=>({text:C+1,type:"next"}));v=v.concat(k)}return Ede(v)}),f=O(()=>{const v=u;return v===0?v2.map(b=>o(`el.datepicker.weeks.${b}`)):v2.slice(v).concat(v2.slice(0,v)).map(b=>o(`el.datepicker.weeks.${b}`))}),h=(v,b)=>{switch(b){case"prev":return s.date.startOf("month").subtract(1,"month").date(v);case"next":return s.date.startOf("month").add(1,"month").date(v);case"current":return s.date.date(v)}},p=({text:v,type:b})=>{const w=[b];if(b==="current"){const y=h(v,b);y.isSame(s.selectedDay,"day")&&w.push(a.is("selected")),y.isSame(l,"day")&&w.push(a.is("today"))}return w},m=({text:v,type:b})=>{const w=h(v,b);n("pick",w)},g=({text:v,type:b})=>{const w=h(v,b);return{isSelected:w.isSame(s.selectedDay),type:`${b}-month`,day:w.format("YYYY-MM-DD"),date:w.toDate()}};return t({getFormattedDate:h}),(v,b)=>(_(),U("table",{class:W([N(i).b(),N(i).is("range",N(c))]),cellspacing:"0",cellpadding:"0"},[v.hideHeader?me("v-if",!0):(_(),U("thead",Nde,[(_(!0),U(lt,null,Zt(N(f),w=>(_(),U("th",{key:w},He(w),1))),128))])),q("tbody",null,[(_(!0),U(lt,null,Zt(N(d),(w,y)=>(_(),U("tr",{key:y,class:W({[N(i).e("row")]:!0,[N(i).em("row","hide-border")]:y===0&&v.hideHeader})},[(_(!0),U(lt,null,Zt(w,(k,x)=>(_(),U("td",{key:x,class:W(p(k)),onClick:C=>m(k)},[q("div",{class:W(N(a).b())},[Pe(v.$slots,"dateCell",{data:g(k)},()=>[q("span",null,He(k.text),1)])],2)],10,Ade))),128))],2))),128))])],2))}}));var bD=Ye(Rde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const Mde=pt({modelValue:{type:Date},range:{type:Qe(Array),validator:e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date)}}),Ode={[Ht]:e=>e instanceof Date,input:e=>e instanceof Date},Pde={name:"ElCalendar"},Fde=xe(nt(Me({},Pde),{props:Mde,emits:Ode,setup(e,{expose:t,emit:n}){const s=e,o=Xe("calendar"),{t:r,lang:i}=Dn(),a=j(),l=Tt().locale(i.value),u=O(()=>m.value.subtract(1,"month").date(1)),c=O(()=>m.value.add(1,"month").date(1)),d=O(()=>m.value.subtract(1,"year").date(1)),f=O(()=>m.value.add(1,"year").date(1)),h=O(()=>{const y=`el.datepicker.month${m.value.format("M")}`;return`${m.value.year()} ${r("el.datepicker.year")} ${r(y)}`}),p=O({get(){return s.modelValue?m.value:a.value},set(y){if(!y)return;a.value=y;const k=y.toDate();n("input",k),n("update:modelValue",k)}}),m=O(()=>s.modelValue?Tt(s.modelValue).locale(i.value):p.value?p.value:v.value.length?v.value[0][0]:l),g=(y,k)=>{const x=y.startOf("week"),C=k.endOf("week"),S=x.get("month"),T=C.get("month");if(S===T)return[[x,C]];if(S+1===T){const A=x.endOf("month"),R=C.startOf("month"),P=A.isSame(R,"week")?R.add(1,"week"):R;return[[x,A],[P.startOf("week"),C]]}else if(S+2===T){const A=x.endOf("month"),R=x.add(1,"month").startOf("month"),L=A.isSame(R,"week")?R.add(1,"week"):R,P=L.endOf("month"),V=C.startOf("month"),H=P.isSame(V,"week")?V.add(1,"week"):V;return[[x,A],[L.startOf("week"),P],[H.startOf("week"),C]]}else return[]},v=O(()=>{if(!s.range)return[];const y=s.range.map(C=>Tt(C).locale(i.value)),[k,x]=y;return k.isAfter(x)?[]:k.isSame(x,"month")?g(k,x):k.add(1,"month").month()!==x.month()?[]:g(k,x)}),b=y=>{p.value=y},w=y=>{let k;y==="prev-month"?k=u.value:y==="next-month"?k=c.value:y==="prev-year"?k=d.value:y==="next-year"?k=f.value:k=l,!k.isSame(m.value,"day")&&b(k)};return t({selectedDay:p,pickDay:b,selectDate:w,calculateValidatedDateRange:g}),(y,k)=>(_(),U("div",{class:W(N(o).b())},[q("div",{class:W(N(o).e("header"))},[Pe(y.$slots,"header",{date:N(h)},()=>[q("div",{class:W(N(o).e("title"))},He(N(h)),3),N(v).length===0?(_(),U("div",{key:0,class:W(N(o).e("button-group"))},[fe(N(Y4),null,{default:de(()=>[fe(N(ii),{size:"small",onClick:k[0]||(k[0]=x=>w("prev-month"))},{default:de(()=>[Yt(He(N(r)("el.datepicker.prevMonth")),1)]),_:1}),fe(N(ii),{size:"small",onClick:k[1]||(k[1]=x=>w("today"))},{default:de(()=>[Yt(He(N(r)("el.datepicker.today")),1)]),_:1}),fe(N(ii),{size:"small",onClick:k[2]||(k[2]=x=>w("next-month"))},{default:de(()=>[Yt(He(N(r)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):me("v-if",!0)])],2),N(v).length===0?(_(),U("div",{key:0,class:W(N(o).e("body"))},[fe(bD,{date:N(m),"selected-day":N(p),onPick:b},Yl({_:2},[y.$slots.dateCell?{name:"dateCell",fn:de(x=>[Pe(y.$slots,"dateCell",Oi(ql(x)))])}:void 0]),1032,["date","selected-day"])],2)):(_(),U("div",{key:1,class:W(N(o).e("body"))},[(_(!0),U(lt,null,Zt(N(v),(x,C)=>(_(),ye(bD,{key:C,date:x[0],"selected-day":N(p),range:x,"hide-header":C!==0,onPick:b},Yl({_:2},[y.$slots.dateCell?{name:"dateCell",fn:de(S=>[Pe(y.$slots,"dateCell",Oi(ql(S)))])}:void 0]),1032,["date","selected-day","range","hide-header"]))),128))],2))],2))}}));var Lde=Ye(Fde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const Bde=Kt(Lde),zde=pt({header:{type:String,default:""},bodyStyle:{type:Qe([String,Object,Array]),default:""},shadow:{type:String,default:"always"}}),Vde={name:"ElCard"},Wde=xe(nt(Me({},Vde),{props:zde,setup(e){const t=Xe("card");return(n,s)=>(_(),U("div",{class:W([N(t).b(),N(t).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?(_(),U("div",{key:0,class:W(N(t).e("header"))},[Pe(n.$slots,"header",{},()=>[Yt(He(n.header),1)])],2)):me("v-if",!0),q("div",{class:W(N(t).e("body")),style:it(n.bodyStyle)},[Pe(n.$slots,"default")],6)],2))}}));var Hde=Ye(Wde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const Ude=Kt(Hde),jde=pt({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:{type:String,default:""},loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator(e){return["horizontal","vertical"].includes(e)}},pauseOnHover:{type:Boolean,default:!0}}),Gde={change:(e,t)=>[e,t].every(mn)},Kde=["onMouseenter","onMouseleave"],qde=["onMouseenter","onClick"],Yde={key:0},Xde={name:"ElCarousel"},Zde=xe(nt(Me({},Xde),{props:jde,emits:Gde,setup(e,{expose:t,emit:n}){const s=e,o=Xe("carousel"),r=300,i=j(-1),a=j(null),l=j(!1),u=j(),c=j([]),d=O(()=>s.arrow!=="never"&&!N(g)),f=O(()=>c.value.some(J=>J.props.label.toString().length>0)),h=O(()=>{const J=[o.b(),o.m(s.direction)];return N(m)&&J.push(o.m("card")),J}),p=O(()=>{const J=[o.e("indicators"),o.em("indicators",s.direction)];return f.value&&J.push(o.em("indicators","labels")),(s.indicatorPosition==="outside"||N(m))&&J.push(o.em("indicators","outside")),J}),m=O(()=>s.type==="card"),g=O(()=>s.direction==="vertical"),v=rc(J=>{x(J)},r,{trailing:!0}),b=rc(J=>{F(J)},r);function w(){a.value&&(clearInterval(a.value),a.value=null)}function y(){s.interval<=0||!s.autoplay||a.value||(a.value=setInterval(()=>k(),s.interval))}const k=()=>{i.value<c.value.length-1?i.value=i.value+1:s.loop&&(i.value=0)};function x(J){if(Bt(J)){const re=c.value.filter($e=>$e.props.name===J);re.length>0&&(J=c.value.indexOf(re[0]))}if(J=Number(J),Number.isNaN(J)||J!==Math.floor(J))return;const ee=c.value.length,te=i.value;J<0?i.value=s.loop?ee-1:0:J>=ee?i.value=s.loop?0:ee-1:i.value=J,te===i.value&&C(te)}function C(J){c.value.forEach((ee,te)=>{ee.translateItem(te,i.value,J)})}function S(J){c.value.push(J)}function T(J){const ee=c.value.findIndex(te=>te.uid===J);ee!==-1&&(c.value.splice(ee,1),i.value===ee&&B())}function A(J,ee){var te,re,$e,se;const Q=N(c),ae=Q.length;if(ae===0||!J.states.inStage)return!1;const pe=ee+1,ke=ee-1,Be=ae-1,je=Q[Be].states.active,qe=Q[0].states.active,ne=(re=(te=Q[pe])==null?void 0:te.states)==null?void 0:re.active,ue=(se=($e=Q[ke])==null?void 0:$e.states)==null?void 0:se.active;return ee===Be&&qe||ne?"left":ee===0&&je||ue?"right":!1}function R(){l.value=!0,s.pauseOnHover&&w()}function L(){l.value=!1,y()}function P(J){N(g)||c.value.forEach((ee,te)=>{J===A(ee,te)&&(ee.states.hover=!0)})}function V(){N(g)||c.value.forEach(J=>{J.states.hover=!1})}function H(J){i.value=J}function F(J){s.trigger==="hover"&&J!==i.value&&(i.value=J)}function M(){x(i.value-1)}function B(){x(i.value+1)}We(()=>i.value,(J,ee)=>{C(ee),ee>-1&&n("change",J,ee)}),We(()=>s.autoplay,J=>{J?y():w()}),We(()=>s.loop,()=>{x(i.value)});const Y=Ns();return Ft(async()=>{await vt(),Y.value=Lf(u.value,()=>{C()}),s.initialIndex<c.value.length&&s.initialIndex>=0&&(i.value=s.initialIndex),y()}),qn(()=>{w(),u.value&&Y.value&&Y.value.stop()}),Gt(n4,{root:u,isCardType:m,isVertical:g,items:c,loop:s.loop,addItem:S,removeItem:T,setActiveItem:x}),t({setActiveItem:x,prev:M,next:B}),(J,ee)=>(_(),U("div",{ref_key:"root",ref:u,class:W(N(h)),onMouseenter:wt(R,["stop"]),onMouseleave:wt(L,["stop"])},[q("div",{class:W(N(o).e("container")),style:it({height:J.height})},[N(d)?(_(),ye(Rs,{key:0,name:"carousel-arrow-left"},{default:de(()=>[It(q("button",{type:"button",class:W([N(o).e("arrow"),N(o).em("arrow","left")]),onMouseenter:ee[0]||(ee[0]=te=>P("left")),onMouseleave:V,onClick:ee[1]||(ee[1]=wt(te=>N(v)(i.value-1),["stop"]))},[fe(N(xt),null,{default:de(()=>[fe(N(jc))]),_:1})],34),[[cn,(J.arrow==="always"||l.value)&&(s.loop||i.value>0)]])]),_:1})):me("v-if",!0),N(d)?(_(),ye(Rs,{key:1,name:"carousel-arrow-right"},{default:de(()=>[It(q("button",{type:"button",class:W([N(o).e("arrow"),N(o).em("arrow","right")]),onMouseenter:ee[2]||(ee[2]=te=>P("right")),onMouseleave:V,onClick:ee[3]||(ee[3]=wt(te=>N(v)(i.value+1),["stop"]))},[fe(N(xt),null,{default:de(()=>[fe(N(bi))]),_:1})],34),[[cn,(J.arrow==="always"||l.value)&&(s.loop||i.value<c.value.length-1)]])]),_:1})):me("v-if",!0),Pe(J.$slots,"default")],6),J.indicatorPosition!=="none"?(_(),U("ul",{key:0,class:W(N(p))},[(_(!0),U(lt,null,Zt(c.value,(te,re)=>(_(),U("li",{key:re,class:W([N(o).e("indicator"),N(o).em("indicator",J.direction),N(o).is("active",re===i.value)]),onMouseenter:$e=>N(b)(re),onClick:wt($e=>H(re),["stop"])},[q("button",{class:W(N(o).e("button"))},[N(f)?(_(),U("span",Yde,He(te.props.label),1)):me("v-if",!0)],2)],42,qde))),128))],2)):me("v-if",!0)],42,Kde))}}));var Jde=Ye(Zde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const Qde=pt({name:{type:String,default:""},label:{type:[String,Number],default:""}}),efe={name:"ElCarouselItem"},tfe=xe(nt(Me({},efe),{props:Qde,setup(e){const t=e,n=Xe("carousel"),s=rt(n4),o=jt(),r=.83,i=j(!1),a=j(0),l=j(1),u=j(!1),c=j(!1),d=j(!1),f=j(!1),{isCardType:h,isVertical:p}=s,m=O(()=>{const x=`${`translate${N(p)?"Y":"X"}`}(${N(a)}px)`,C=`scale(${N(l)})`;return{transform:[x,C].join(" ")}});function g(k,x,C){const S=C-1,T=x-1,A=x+1,R=C/2;return x===0&&k===S?-1:x===S&&k===0?C:k<T&&x-k>=R?C+1:k>A&&k-x>=R?-2:k}function v(k,x){var C;const S=((C=s.root.value)==null?void 0:C.offsetWidth)||0;return d.value?S*((2-r)*(k-x)+1)/4:k<x?-(1+r)*S/4:(3+r)*S/4}function b(k,x,C){const S=s.root.value;return S?((C?S.offsetHeight:S.offsetWidth)||0)*(k-x):0}const w=(k,x,C)=>{var S;const T=N(h),A=(S=s.items.value.length)!=null?S:Number.NaN,R=k===x;!T&&!Ir(C)&&(f.value=R||k===C),!R&&A>2&&s.loop&&(k=g(k,x,A));const L=N(p);u.value=R,T?(d.value=Math.round(Math.abs(k-x))<=1,a.value=v(k,x),l.value=N(u)?1:r):a.value=b(k,x,L),c.value=!0};function y(){if(s&&N(h)){const k=s.items.value.findIndex(({uid:x})=>x===o.uid);s.setActiveItem(k)}}return Ft(()=>{s.addItem({props:t,states:vn({hover:i,translate:a,scale:l,active:u,ready:c,inStage:d,animating:f}),uid:o.uid,translateItem:w})}),hm(()=>{s.removeItem(o.uid)}),(k,x)=>It((_(),U("div",{class:W([N(n).e("item"),N(n).is("active",u.value),N(n).is("in-stage",d.value),N(n).is("hover",i.value),N(n).is("animating",f.value),{[N(n).em("item","card")]:N(h)}]),style:it(N(m)),onClick:y},[N(h)?It((_(),U("div",{key:0,class:W(N(n).e("mask"))},null,2)),[[cn,!u.value]]):me("v-if",!0),Pe(k.$slots,"default")],6)),[[cn,c.value]])}}));var gL=Ye(tfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const nfe=Kt(Jde,{CarouselItem:gL}),sfe=ws(gL),ofe={modelValue:{type:[Boolean,Number,String],default:()=>{}},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},tabindex:[String,Number],size:String},jf=()=>{const e=rt(Lr,{}),t=rt(di,{}),n=rt("CheckboxGroup",{}),s=O(()=>n&&(n==null?void 0:n.name)==="ElCheckboxGroup"),o=O(()=>t.size);return{isGroup:s,checkboxGroup:n,elForm:e,elFormItemSize:o,elFormItem:t}},rfe=e=>{const t=j(!1),{emit:n}=jt(),{isGroup:s,checkboxGroup:o}=jf(),r=j(!1);return{model:O({get(){var a,l;return s.value?(a=o.modelValue)==null?void 0:a.value:(l=e.modelValue)!=null?l:t.value},set(a){var l;s.value&&Array.isArray(a)?(r.value=o.max!==void 0&&a.length>o.max.value,r.value===!1&&((l=o==null?void 0:o.changeEvent)==null||l.call(o,a))):(n(Ht,a),t.value=a)}}),isLimitExceeded:r}},ife=(e,{model:t})=>{const{isGroup:n,checkboxGroup:s}=jf(),o=j(!1),r=Ls(s==null?void 0:s.checkboxGroupSize,{prop:!0}),i=O(()=>{const l=t.value;return lm(l)==="[object Boolean]"?l:Array.isArray(l)?l.includes(e.label):l!=null?l===e.trueLabel:!!l}),a=Ls(O(()=>{var l;return n.value?(l=s==null?void 0:s.checkboxGroupSize)==null?void 0:l.value:void 0}));return{isChecked:i,focus:o,size:r,checkboxSize:a}},afe=(e,{model:t,isChecked:n})=>{const{elForm:s,isGroup:o,checkboxGroup:r}=jf(),i=O(()=>{var l,u;const c=(l=r.max)==null?void 0:l.value,d=(u=r.min)==null?void 0:u.value;return!!(c||d)&&t.value.length>=c&&!n.value||t.value.length<=d&&n.value});return{isDisabled:O(()=>{var l,u;const c=e.disabled||s.disabled;return(u=o.value?((l=r.disabled)==null?void 0:l.value)||c||i.value:e.disabled||s.disabled)!=null?u:!1}),isLimitDisabled:i}},lfe=(e,{model:t})=>{function n(){Array.isArray(t.value)&&!t.value.includes(e.label)?t.value.push(e.label):t.value=e.trueLabel||!0}e.checked&&n()},ufe=(e,{isLimitExceeded:t})=>{const{elFormItem:n}=jf(),{emit:s}=jt();function o(r){var i,a;if(t.value)return;const u=r.target.checked?(i=e.trueLabel)!=null?i:!0:(a=e.falseLabel)!=null?a:!1;s("change",u,r)}return We(()=>e.modelValue,()=>{var r;(r=n.validate)==null||r.call(n,"change").catch(i=>void 0)}),{handleChange:o}},vL=e=>{const{model:t,isLimitExceeded:n}=rfe(e),{focus:s,size:o,isChecked:r,checkboxSize:i}=ife(e,{model:t}),{isDisabled:a}=afe(e,{model:t,isChecked:r}),{handleChange:l}=ufe(e,{isLimitExceeded:n});return lfe(e,{model:t}),{isChecked:r,isDisabled:a,checkboxSize:i,model:t,handleChange:l,focus:s,size:o}},cfe=xe({name:"ElCheckbox",props:{modelValue:{type:[Number,String,Boolean],default:()=>{}},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:{type:String,validator:Pr},tabindex:[String,Number]},emits:[Ht,"change"],setup(e){const t=Xe("checkbox");return Me({ns:t},vL(e))}}),dfe=["id","aria-controls"],ffe=["tabindex","role","aria-checked"],hfe=["aria-hidden","name","tabindex","disabled","true-value","false-value"],pfe=["aria-hidden","disabled","value","name","tabindex"];function mfe(e,t,n,s,o,r){return _(),U("label",{id:e.id,class:W([e.ns.b(),e.ns.m(e.checkboxSize),e.ns.is("disabled",e.isDisabled),e.ns.is("bordered",e.border),e.ns.is("checked",e.isChecked)]),"aria-controls":e.indeterminate?e.controls:null},[q("span",{class:W([e.ns.e("input"),e.ns.is("disabled",e.isDisabled),e.ns.is("checked",e.isChecked),e.ns.is("indeterminate",e.indeterminate),e.ns.is("focus",e.focus)]),tabindex:e.indeterminate?0:void 0,role:e.indeterminate?"checkbox":void 0,"aria-checked":e.indeterminate?"mixed":!1},[q("span",{class:W(e.ns.e("inner"))},null,2),e.trueLabel||e.falseLabel?It((_(),U("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=i=>e.model=i),class:W(e.ns.e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[2]||(t[2]=i=>e.focus=!0),onBlur:t[3]||(t[3]=i=>e.focus=!1)},null,42,hfe)),[[Jv,e.model]]):It((_(),U("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=i=>e.model=i),class:W(e.ns.e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,value:e.label,name:e.name,tabindex:e.tabindex,onChange:t[5]||(t[5]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[6]||(t[6]=i=>e.focus=!0),onBlur:t[7]||(t[7]=i=>e.focus=!1)},null,42,pfe)),[[Jv,e.model]])],10,ffe),e.$slots.default||e.label?(_(),U("span",{key:0,class:W(e.ns.e("label"))},[Pe(e.$slots,"default"),e.$slots.default?me("v-if",!0):(_(),U(lt,{key:0},[Yt(He(e.label),1)],2112))],2)):me("v-if",!0)],10,dfe)}var gfe=Ye(cfe,[["render",mfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const vfe=xe({name:"ElCheckboxButton",props:ofe,emits:[Ht,"change"],setup(e){const{focus:t,isChecked:n,isDisabled:s,size:o,model:r,handleChange:i}=vL(e),{checkboxGroup:a}=jf(),l=Xe("checkbox"),u=O(()=>{var c,d,f,h;const p=(d=(c=a==null?void 0:a.fill)==null?void 0:c.value)!=null?d:"";return{backgroundColor:p,borderColor:p,color:(h=(f=a==null?void 0:a.textColor)==null?void 0:f.value)!=null?h:"",boxShadow:p?`-1px 0 0 0 ${p}`:null}});return{focus:t,isChecked:n,isDisabled:s,model:r,handleChange:i,activeStyle:u,size:o,ns:l}}}),bfe=["aria-checked","aria-disabled"],yfe=["name","tabindex","disabled","true-value","false-value"],wfe=["name","tabindex","disabled","value"];function kfe(e,t,n,s,o,r){return _(),U("label",{class:W([e.ns.b("button"),e.ns.bm("button",e.size),e.ns.is("disabled",e.isDisabled),e.ns.is("checked",e.isChecked),e.ns.is("focus",e.focus)]),role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled},[e.trueLabel||e.falseLabel?It((_(),U("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=i=>e.model=i),class:W(e.ns.be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[2]||(t[2]=i=>e.focus=!0),onBlur:t[3]||(t[3]=i=>e.focus=!1)},null,42,yfe)),[[Jv,e.model]]):It((_(),U("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=i=>e.model=i),class:W(e.ns.be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,value:e.label,onChange:t[5]||(t[5]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[6]||(t[6]=i=>e.focus=!0),onBlur:t[7]||(t[7]=i=>e.focus=!1)},null,42,wfe)),[[Jv,e.model]]),e.$slots.default||e.label?(_(),U("span",{key:2,class:W(e.ns.be("button","inner")),style:it(e.isChecked?e.activeStyle:null)},[Pe(e.$slots,"default",{},()=>[Yt(He(e.label),1)])],6)):me("v-if",!0)],10,bfe)}var bL=Ye(vfe,[["render",kfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const xfe=xe({name:"ElCheckboxGroup",props:{modelValue:{type:Array,default:()=>[]},disabled:Boolean,min:{type:Number,default:void 0},max:{type:Number,default:void 0},size:{type:String,validator:Pr},fill:{type:String,default:void 0},textColor:{type:String,default:void 0},tag:{type:String,default:"div"}},emits:[Ht,"change"],setup(e,{emit:t,slots:n}){const{elFormItem:s}=jf(),o=Ls(),r=Xe("checkbox"),i=l=>{t(Ht,l),vt(()=>{t("change",l)})},a=O({get(){return e.modelValue},set(l){i(l)}});return Gt("CheckboxGroup",nt(Me({name:"ElCheckboxGroup",modelValue:a},oo(e)),{checkboxGroupSize:o,changeEvent:i})),We(()=>e.modelValue,()=>{var l;(l=s.validate)==null||l.call(s,"change").catch(u=>void 0)}),()=>at(e.tag,{class:r.b("group"),role:"group","aria-label":"checkbox-group"},[Pe(n,"default")])}});var yL=Ye(xfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const Hi=Kt(gfe,{CheckboxButton:bL,CheckboxGroup:yL}),Cfe=ws(bL),wL=ws(yL),kL=pt({size:Cy,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),$fe=pt(nt(Me({},kL),{modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean})),xL={[Ht]:e=>Bt(e)||mn(e)||No(e),change:e=>Bt(e)||mn(e)||No(e)},CL=(e,t)=>{const n=j(),s=rt(a4,void 0),o=O(()=>!!s),r=O({get(){return o.value?s.modelValue:e.modelValue},set(c){o.value?s.changeEvent(c):t(Ht,c),n.value.checked=e.modelValue===e.label}}),i=Ls(O(()=>s==null?void 0:s.size)),a=Wf(O(()=>s==null?void 0:s.disabled)),l=j(!1),u=O(()=>a.value||o.value&&r.value!==e.label?-1:0);return{radioRef:n,isGroup:o,radioGroup:s,focus:l,size:i,disabled:a,tabIndex:u,modelValue:r}},Sfe=xe({name:"ElRadio",props:$fe,emits:xL,setup(e,{emit:t}){const n=Xe("radio"),{radioRef:s,isGroup:o,focus:r,size:i,disabled:a,tabIndex:l,modelValue:u}=CL(e,t);function c(){vt(()=>t("change",u.value))}return{ns:n,focus:r,isGroup:o,modelValue:u,tabIndex:l,size:i,disabled:a,radioRef:s,handleChange:c}}}),Ife=["aria-checked","aria-disabled","tabindex"],Efe=["value","name","disabled"];function Tfe(e,t,n,s,o,r){return _(),U("label",{class:W([e.ns.b(),e.ns.is("disabled",e.disabled),e.ns.is("focus",e.focus),e.ns.is("bordered",e.border),e.ns.is("checked",e.modelValue===e.label),e.ns.m(e.size)]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[5]||(t[5]=Qt(wt(i=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[q("span",{class:W([e.ns.e("input"),e.ns.is("disabled",e.disabled),e.ns.is("checked",e.modelValue===e.label)])},[q("span",{class:W(e.ns.e("inner"))},null,2),It(q("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=i=>e.modelValue=i),class:W(e.ns.e("original")),value:e.label,type:"radio","aria-hidden":"true",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=i=>e.focus=!0),onBlur:t[2]||(t[2]=i=>e.focus=!1),onChange:t[3]||(t[3]=(...i)=>e.handleChange&&e.handleChange(...i))},null,42,Efe),[[oF,e.modelValue]])],2),q("span",{class:W(e.ns.e("label")),onKeydown:t[4]||(t[4]=wt(()=>{},["stop"]))},[Pe(e.$slots,"default",{},()=>[Yt(He(e.label),1)])],34)],42,Ife)}var _fe=Ye(Sfe,[["render",Tfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const Nfe=pt(nt(Me({},kL),{name:{type:String,default:""}})),Afe=xe({name:"ElRadioButton",props:Nfe,setup(e,{emit:t}){const n=Xe("radio"),{radioRef:s,isGroup:o,focus:r,size:i,disabled:a,tabIndex:l,modelValue:u,radioGroup:c}=CL(e,t),d=O(()=>({backgroundColor:(c==null?void 0:c.fill)||"",borderColor:(c==null?void 0:c.fill)||"",boxShadow:c!=null&&c.fill?`-1px 0 0 0 ${c.fill}`:"",color:(c==null?void 0:c.textColor)||""}));return{ns:n,isGroup:o,size:i,disabled:a,tabIndex:l,modelValue:u,focus:r,activeStyle:d,radioRef:s}}}),Dfe=["aria-checked","aria-disabled","tabindex"],Rfe=["value","name","disabled"];function Mfe(e,t,n,s,o,r){return _(),U("label",{class:W([e.ns.b("button"),e.ns.is("active",e.modelValue===e.label),e.ns.is("disabled",e.disabled),e.ns.is("focus",e.focus),e.ns.bm("button",e.size)]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[4]||(t[4]=Qt(wt(i=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[It(q("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=i=>e.modelValue=i),class:W(e.ns.be("button","original-radio")),value:e.label,type:"radio",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=i=>e.focus=!0),onBlur:t[2]||(t[2]=i=>e.focus=!1)},null,42,Rfe),[[oF,e.modelValue]]),q("span",{class:W(e.ns.be("button","inner")),style:it(e.modelValue===e.label?e.activeStyle:{}),onKeydown:t[3]||(t[3]=wt(()=>{},["stop"]))},[Pe(e.$slots,"default",{},()=>[Yt(He(e.label),1)])],38)],42,Dfe)}var $L=Ye(Afe,[["render",Mfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const Ofe=pt({size:Cy,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},textColor:{type:String,default:""}}),Pfe=xL,Ffe=xe({name:"ElRadioGroup",props:Ofe,emits:Pfe,setup(e,t){const n=Xe("radio"),s=j(),{formItem:o}=Hf(),r=a=>{t.emit(Ht,a),vt(()=>t.emit("change",a))},i=a=>{if(!s.value)return;const l=a.target,u=l.nodeName==="INPUT"?"[type=radio]":"[role=radio]",c=s.value.querySelectorAll(u),d=c.length,f=Array.from(c).indexOf(l),h=s.value.querySelectorAll("[role=radio]");let p=null;switch(a.code){case ct.left:case ct.up:a.stopPropagation(),a.preventDefault(),p=f===0?d-1:f-1;break;case ct.right:case ct.down:a.stopPropagation(),a.preventDefault(),p=f===d-1?0:f+1;break}p!==null&&(h[p].click(),h[p].focus())};return Ft(()=>{const a=s.value.querySelectorAll("[type=radio]"),l=a[0];!Array.from(a).some(u=>u.checked)&&l&&(l.tabIndex=0)}),Gt(a4,vn(nt(Me({},oo(e)),{changeEvent:r}))),We(()=>e.modelValue,()=>o==null?void 0:o.validate("change").catch(a=>void 0)),{ns:n,radioGroupRef:s,handleKeydown:i}}});function Lfe(e,t,n,s,o,r){return _(),U("div",{ref:"radioGroupRef",class:W(e.ns.b("group")),role:"radiogroup",onKeydown:t[0]||(t[0]=(...i)=>e.handleKeydown&&e.handleKeydown(...i))},[Pe(e.$slots,"default")],34)}var SL=Ye(Ffe,[["render",Lfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const IL=Kt(_fe,{RadioButton:$L,RadioGroup:SL}),Bfe=ws(SL),zfe=ws($L);var Vfe=xe({name:"NodeContent",setup(){return{ns:Xe("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:n}=this.$parent,{data:s,label:o}=t,{renderLabelFn:r}=n;return at("span",{class:e.e("label")},r?r({node:t,data:s}):o)}});const Z$=Symbol(),Wfe=xe({name:"ElCascaderNode",components:{ElCheckbox:Hi,ElRadio:IL,NodeContent:Vfe,ElIcon:xt,Check:of,Loading:ou,ArrowRight:bi},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=rt(Z$),s=Xe("cascader-node"),o=O(()=>n.isHoverMenu),r=O(()=>n.config.multiple),i=O(()=>n.config.checkStrictly),a=O(()=>{var x;return(x=n.checkedNodes[0])==null?void 0:x.uid}),l=O(()=>e.node.isDisabled),u=O(()=>e.node.isLeaf),c=O(()=>i.value&&!u.value||!l.value),d=O(()=>h(n.expandingNode)),f=O(()=>i.value&&n.checkedNodes.some(h)),h=x=>{var C;const{level:S,uid:T}=e.node;return((C=x==null?void 0:x.pathNodes[S-1])==null?void 0:C.uid)===T},p=()=>{d.value||n.expandNode(e.node)},m=x=>{const{node:C}=e;x!==C.checked&&n.handleCheckChange(C,x)},g=()=>{n.lazyLoad(e.node,()=>{u.value||p()})},v=x=>{!o.value||(b(),!u.value&&t("expand",x))},b=()=>{const{node:x}=e;!c.value||x.loading||(x.loaded?p():g())},w=()=>{o.value&&!u.value||(u.value&&!l.value&&!i.value&&!r.value?k(!0):b())},y=x=>{i.value?(m(x),e.node.loaded&&p()):k(x)},k=x=>{e.node.loaded?(m(x),!i.value&&p()):g()};return{panel:n,isHoverMenu:o,multiple:r,checkStrictly:i,checkedNodeId:a,isDisabled:l,isLeaf:u,expandable:c,inExpandingPath:d,inCheckedPath:f,ns:s,handleHoverExpand:v,handleExpand:b,handleClick:w,handleCheck:k,handleSelectCheck:y}}}),Hfe=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Ufe=q("span",null,null,-1);function jfe(e,t,n,s,o,r){const i=Ne("el-checkbox"),a=Ne("el-radio"),l=Ne("check"),u=Ne("el-icon"),c=Ne("node-content"),d=Ne("loading"),f=Ne("arrow-right");return _(),U("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:W([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...h)=>e.handleHoverExpand&&e.handleHoverExpand(...h)),onFocus:t[3]||(t[3]=(...h)=>e.handleHoverExpand&&e.handleHoverExpand(...h)),onClick:t[4]||(t[4]=(...h)=>e.handleClick&&e.handleClick(...h))},[me(" prefix "),e.multiple?(_(),ye(i,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=wt(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(_(),ye(a,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=wt(()=>{},["stop"]))},{default:de(()=>[me(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Ufe]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(_(),ye(u,{key:2,class:W(e.ns.e("prefix"))},{default:de(()=>[fe(l)]),_:1},8,["class"])):me("v-if",!0),me(" content "),fe(c),me(" postfix "),e.isLeaf?me("v-if",!0):(_(),U(lt,{key:3},[e.node.loading?(_(),ye(u,{key:0,class:W([e.ns.is("loading"),e.ns.e("postfix")])},{default:de(()=>[fe(d)]),_:1},8,["class"])):(_(),ye(u,{key:1,class:W(["arrow-right",e.ns.e("postfix")])},{default:de(()=>[fe(f)]),_:1},8,["class"]))],2112))],42,Hfe)}var Gfe=Ye(Wfe,[["render",jfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const Kfe=xe({name:"ElCascaderMenu",components:{Loading:ou,ElIcon:xt,ElScrollbar:ul,ElCascaderNode:Gfe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=jt(),n=Xe("cascader-menu"),{t:s}=Dn(),o=ym();let r=null,i=null;const a=rt(Z$),l=j(null),u=O(()=>!e.nodes.length),c=O(()=>!a.initialLoaded),d=O(()=>`cascader-menu-${o}-${e.index}`),f=g=>{r=g.target},h=g=>{if(!(!a.isHoverMenu||!r||!l.value))if(r.contains(g.target)){p();const v=t.vnode.el,{left:b}=v.getBoundingClientRect(),{offsetWidth:w,offsetHeight:y}=v,k=g.clientX-b,x=r.offsetTop,C=x+r.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${k} ${x} L${w} 0 V${x} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${k} ${C} L${w} ${y} V${C} Z" />
        `}else i||(i=window.setTimeout(m,a.config.hoverThreshold))},p=()=>{!i||(clearTimeout(i),i=null)},m=()=>{!l.value||(l.value.innerHTML="",p())};return{ns:n,panel:a,hoverZone:l,isEmpty:u,isLoading:c,menuId:d,t:s,handleExpand:f,handleMouseMove:h,clearHoverZone:m}}});function qfe(e,t,n,s,o,r){const i=Ne("el-cascader-node"),a=Ne("loading"),l=Ne("el-icon"),u=Ne("el-scrollbar");return _(),ye(u,{key:e.menuId,tag:"ul",role:"menu",class:W(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:de(()=>{var c;return[(_(!0),U(lt,null,Zt(e.nodes,d=>(_(),ye(i,{key:d.uid,node:d,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(_(),U("div",{key:0,class:W(e.ns.e("empty-text"))},[fe(l,{size:"14",class:W(e.ns.is("loading"))},{default:de(()=>[fe(a)]),_:1},8,["class"]),Yt(" "+He(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(_(),U("div",{key:1,class:W(e.ns.e("empty-text"))},He(e.t("el.cascader.noData")),3)):(c=e.panel)!=null&&c.isHoverMenu?(_(),U("svg",{key:2,ref:"hoverZone",class:W(e.ns.e("hover-zone"))},null,2)):me("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Yfe=Ye(Kfe,[["render",qfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]),J$=(e=>(e.CLICK="click",e.HOVER="hover",e))(J$||{});let Xfe=0;const Zfe=e=>{const t=[e];let{parent:n}=e;for(;n;)t.unshift(n),n=n.parent;return t};class ff{constructor(t,n,s,o=!1){this.data=t,this.config=n,this.parent=s,this.root=o,this.uid=Xfe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:r,label:i,children:a}=n,l=t[a],u=Zfe(this);this.level=o?0:s?s.level+1:1,this.value=t[r],this.label=t[i],this.pathNodes=u,this.pathValues=u.map(c=>c.value),this.pathLabels=u.map(c=>c.label),this.childrenData=l,this.children=(l||[]).map(c=>new ff(c,n,this)),this.loaded=!n.lazy||this.isLeaf||!Rp(l)}get isDisabled(){const{data:t,parent:n,config:s}=this,{disabled:o,checkStrictly:r}=s;return(zt(o)?o(t,this):!!t[o])||!r&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:t,config:n,childrenData:s,loaded:o}=this,{lazy:r,leaf:i}=n,a=zt(i)?i(t,this):t[i];return Ir(a)?r&&!o?!1:!(Array.isArray(s)&&s.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:n,children:s}=this,o=new ff(t,this.config,this);return Array.isArray(n)?n.push(t):this.childrenData=[t],s.push(o),o}calcText(t,n){const s=t?this.pathLabels.join(n):this.label;return this.text=s,s}broadcast(t,...n){const s=`onParent${$r(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...n),o[s]&&o[s](...n))})}emit(t,...n){const{parent:s}=this,o=`onChild${$r(t)}`;s&&(s[o]&&s[o](...n),s.emit(t,...n))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,n=t.filter(o=>!o.isDisabled),s=n.length?n.every(o=>o.checked):!1;this.setCheckState(s)}setCheckState(t){const n=this.children.length,s=this.children.reduce((o,r)=>{const i=r.checked?1:r.indeterminate?.5:0;return o+i},0);this.checked=this.loaded&&this.children.every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&s!==n&&s>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:n,multiple:s}=this.config;n||!s?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const lx=(e,t)=>e.reduce((n,s)=>(s.isLeaf?n.push(s):(!t&&n.push(s),n=n.concat(lx(s.children,t))),n),[]);class yD{constructor(t,n){this.config=n;const s=(t||[]).map(o=>new ff(o,this.config));this.nodes=s,this.allNodes=lx(s,!1),this.leafNodes=lx(s,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,n){const s=n?n.appendChild(t):new ff(t,this.config);n||this.nodes.push(s),this.allNodes.push(s),s.isLeaf&&this.leafNodes.push(s)}appendNodes(t,n){t.forEach(s=>this.appendNode(s,n))}getNodeByValue(t,n=!1){return!t&&t!==0?null:this.getFlattedNodes(n).find(o=>Zo(o.value,t)||Zo(o.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:s,level:o})=>Zo(t.value,s)&&t.level===o)||null}}const EL={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},Jfe={expandTrigger:J$.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:In,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Qfe=e=>O(()=>Me(Me({},Jfe),e.props)),wD=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},ehe=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():FF(e)&&e.click()},the=(e,t)=>{const n=t.slice(0),s=n.map(r=>r.uid),o=e.reduce((r,i)=>{const a=s.indexOf(i.uid);return a>-1&&(r.push(i),n.splice(a,1),s.splice(a,1)),r},[]);return o.push(...n),o},nhe=xe({name:"ElCascaderPanel",components:{ElCascaderMenu:Yfe},props:nt(Me({},EL),{border:{type:Boolean,default:!0},renderLabel:Function}),emits:[Ht,ro,"close","expand-change"],setup(e,{emit:t,slots:n}){let s=!1;const o=Xe("cascader"),r=Qfe(e);let i=null;const a=j(!0),l=j([]),u=j(null),c=j([]),d=j(null),f=j([]),h=O(()=>r.value.expandTrigger===J$.HOVER),p=O(()=>e.renderLabel||n.default),m=()=>{const{options:L}=e,P=r.value;s=!1,i=new yD(L,P),c.value=[i.getNodes()],P.lazy&&Rp(e.options)?(a.value=!1,g(void 0,V=>{V&&(i=new yD(V,P),c.value=[i.getNodes()]),a.value=!0,S(!1,!0)})):S(!1,!0)},g=(L,P)=>{const V=r.value;L=L||new ff({},V,void 0,!0),L.loading=!0;const H=F=>{const M=L,B=M.root?null:M;F&&(i==null||i.appendNodes(F,B)),M.loading=!1,M.loaded=!0,M.childrenData=M.childrenData||[],P&&P(F)};V.lazyLoad(L,H)},v=(L,P)=>{var V;const{level:H}=L,F=c.value.slice(0,H);let M;L.isLeaf?M=L.pathNodes[H-2]:(M=L,F.push(L.children)),((V=d.value)==null?void 0:V.uid)!==(M==null?void 0:M.uid)&&(d.value=L,c.value=F,!P&&t("expand-change",(L==null?void 0:L.pathValues)||[]))},b=(L,P,V=!0)=>{const{checkStrictly:H,multiple:F}=r.value,M=f.value[0];s=!0,!F&&(M==null||M.doCheck(!1)),L.doCheck(P),C(),V&&!F&&!H&&t("close"),!V&&!F&&!H&&w(L)},w=L=>{!L||(L=L.parent,w(L),L&&v(L))},y=L=>i==null?void 0:i.getFlattedNodes(L),k=L=>{var P;return(P=y(L))==null?void 0:P.filter(V=>V.checked!==!1)},x=()=>{f.value.forEach(L=>L.doCheck(!1)),C()},C=()=>{var L;const{checkStrictly:P,multiple:V}=r.value,H=f.value,F=k(!P),M=the(H,F),B=M.map(Y=>Y.valueByOption);f.value=M,u.value=V?B:(L=B[0])!=null?L:null},S=(L=!1,P=!1)=>{const{modelValue:V}=e,{lazy:H,multiple:F,checkStrictly:M}=r.value,B=!M;if(!(!a.value||s||!P&&Zo(V,u.value)))if(H&&!L){const J=MA(gte(ic(V))).map(ee=>i==null?void 0:i.getNodeByValue(ee)).filter(ee=>!!ee&&!ee.loaded&&!ee.loading);J.length?J.forEach(ee=>{g(ee,()=>S(!1,P))}):S(!0,P)}else{const Y=F?ic(V):[V],J=MA(Y.map(ee=>i==null?void 0:i.getNodeByValue(ee,B)));T(J,!1),u.value=V}},T=(L,P=!0)=>{const{checkStrictly:V}=r.value,H=f.value,F=L.filter(Y=>!!Y&&(V||Y.isLeaf)),M=i==null?void 0:i.getSameNode(d.value),B=P&&M||F[0];B?B.pathNodes.forEach(Y=>v(Y,!0)):d.value=null,H.forEach(Y=>Y.doCheck(!1)),F.forEach(Y=>Y.doCheck(!0)),f.value=F,vt(A)},A=()=>{!sn||l.value.forEach(L=>{const P=L==null?void 0:L.$el;if(P){const V=P.querySelector(`.${o.namespace.value}-scrollbar__wrap`),H=P.querySelector(`.${o.b("node")}.${o.is("active")}`)||P.querySelector(`.${o.b("node")}.in-active-path`);WF(V,H)}})},R=L=>{const P=L.target,{code:V}=L;switch(V){case ct.up:case ct.down:{L.preventDefault();const H=V===ct.up?-1:1;hv(LF(P,H,`.${o.b("node")}[tabindex="-1"]`));break}case ct.left:{L.preventDefault();const H=l.value[wD(P)-1],F=H==null?void 0:H.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);hv(F);break}case ct.right:{L.preventDefault();const H=l.value[wD(P)+1],F=H==null?void 0:H.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);hv(F);break}case ct.enter:ehe(P);break;case ct.esc:case ct.tab:t("close");break}};return Gt(Z$,vn({config:r,expandingNode:d,checkedNodes:f,isHoverMenu:h,initialLoaded:a,renderLabelFn:p,lazyLoad:g,expandNode:v,handleCheckChange:b})),We([r,()=>e.options],m,{deep:!0,immediate:!0}),We(()=>e.modelValue,()=>{s=!1,S()}),We(u,L=>{Zo(L,e.modelValue)||(t(Ht,L),t(ro,L))}),AP(()=>l.value=[]),Ft(()=>!Rp(e.modelValue)&&S()),{ns:o,menuList:l,menus:c,checkedNodes:f,handleKeyDown:R,handleCheckChange:b,getFlattedNodes:y,getCheckedNodes:k,clearCheckedNodes:x,calculateCheckedValue:C,scrollToExpandingNode:A}}});function she(e,t,n,s,o,r){const i=Ne("el-cascader-menu");return _(),U("div",{class:W([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...a)=>e.handleKeyDown&&e.handleKeyDown(...a))},[(_(!0),U(lt,null,Zt(e.menus,(a,l)=>(_(),ye(i,{key:l,ref_for:!0,ref:u=>e.menuList[l]=u,index:l,nodes:[...a]},null,8,["index","nodes"]))),128))],34)}var wv=Ye(nhe,[["render",she],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);wv.install=e=>{e.component(wv.name,wv)};const TL=wv,ohe=TL,Q$=pt({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:$a,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),rhe={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},ihe={name:"ElTag"},ahe=xe(nt(Me({},ihe),{props:Q$,emits:rhe,setup(e,{emit:t}){const n=e,s=Ls(),o=Xe("tag"),r=O(()=>{const{type:l,hit:u,effect:c,closable:d,round:f}=n;return[o.b(),o.is("closable",d),o.m(l),o.m(s.value),o.m(c),o.is("hit",u),o.is("round",f)]}),i=l=>{l.stopPropagation(),t("close",l)},a=l=>{t("click",l)};return(l,u)=>l.disableTransitions?(_(),ye(Rs,{key:1,name:`${N(o).namespace.value}-zoom-in-center`},{default:de(()=>[q("span",{class:W(N(r)),style:it({backgroundColor:l.color}),onClick:a},[q("span",{class:W(N(o).e("content"))},[Pe(l.$slots,"default")],2),l.closable?(_(),ye(N(xt),{key:0,class:W(N(o).e("close")),onClick:i},{default:de(()=>[fe(N(ci))]),_:1},8,["class"])):me("v-if",!0)],6)]),_:3},8,["name"])):(_(),U("span",{key:0,class:W(N(r)),style:it({backgroundColor:l.color}),onClick:a},[q("span",{class:W(N(o).e("content"))},[Pe(l.$slots,"default")],2),l.closable?(_(),ye(N(xt),{key:0,class:W(N(o).e("close")),onClick:i},{default:de(()=>[fe(N(ci))]),_:1},8,["class"])):me("v-if",!0)],6))}}));var lhe=Ye(ahe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const Ty=Kt(lhe),uhe=40,che={large:36,default:32,small:28},dhe={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:t,placement:n}=e;["right","left","bottom","top"].includes(n)||(t.arrow.x=35)},requires:["arrow"]}]},kD="ElCascader",fhe=xe({name:kD,components:{ElCascaderPanel:TL,ElInput:yi,ElTooltip:vr,ElScrollbar:ul,ElTag:Ty,ElIcon:xt,CircleClose:Za,Check:of,ArrowDown:Uc},directives:{Clickoutside:Gc},props:nt(Me({},EL),{size:{type:String,validator:Pr},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},popperAppendToBody:{type:Boolean,default:void 0},teleported:Eo.teleported,tagType:nt(Me({},Q$.type),{default:"info"})}),emits:[Ht,ro,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:t}){let n=0,s=0;const{compatTeleported:o}=Uf(kD,"popperAppendToBody"),r=Xe("cascader"),i=Xe("input"),{t:a}=Dn(),l=rt(Lr,{}),u=rt(di,{}),c=j(null),d=j(null),f=j(null),h=j(null),p=j(null),m=j(!1),g=j(!1),v=j(!1),b=j(""),w=j(""),y=j([]),k=j([]),x=j([]),C=j(!1),S=O(()=>e.disabled||l.disabled),T=O(()=>e.placeholder||a("el.cascader.placeholder")),A=Ls(),R=O(()=>["small"].includes(A.value)?"small":"default"),L=O(()=>!!e.props.multiple),P=O(()=>!e.filterable||L.value),V=O(()=>L.value?w.value:b.value),H=O(()=>{var ie;return((ie=h.value)==null?void 0:ie.checkedNodes)||[]}),F=O(()=>!e.clearable||S.value||v.value||!g.value?!1:!!H.value.length),M=O(()=>{const{showAllLevels:ie,separator:ge}=e,be=H.value;return be.length?L.value?" ":be[0].calcText(ie,ge):""}),B=O({get(){return e.modelValue},set(ie){var ge;t(Ht,ie),t(ro,ie),(ge=u.validate)==null||ge.call(u,"change").catch(be=>void 0)}}),Y=O(()=>{var ie,ge;return(ge=(ie=c.value)==null?void 0:ie.popperRef)==null?void 0:ge.contentRef}),J=ie=>{var ge,be,Ie;if(!S.value&&(ie=ie!=null?ie:!m.value,ie!==m.value)){if(m.value=ie,(be=(ge=d.value)==null?void 0:ge.input)==null||be.setAttribute("aria-expanded",`${ie}`),ie)ee(),vt((Ie=h.value)==null?void 0:Ie.scrollToExpandingNode);else if(e.filterable){const{value:ot}=M;b.value=ot,w.value=ot}t("visible-change",ie)}},ee=()=>{vt(()=>{var ie;(ie=c.value)==null||ie.updatePopper()})},te=()=>{v.value=!1},re=ie=>{const{showAllLevels:ge,separator:be}=e;return{node:ie,key:ie.uid,text:ie.calcText(ge,be),hitState:!1,closable:!S.value&&!ie.isDisabled,isCollapseTag:!1}},$e=ie=>{var ge;const be=ie.node;be.doCheck(!1),(ge=h.value)==null||ge.calculateCheckedValue(),t("remove-tag",be.valueByOption)},se=()=>{if(!L.value)return;const ie=H.value,ge=[],be=[];if(ie.forEach(Ie=>be.push(re(Ie))),k.value=be,ie.length){const[Ie,...ot]=ie,ve=ot.length;ge.push(re(Ie)),ve&&(e.collapseTags?ge.push({key:-1,text:`+ ${ve}`,closable:!1,isCollapseTag:!0}):ot.forEach(Ve=>ge.push(re(Ve))))}y.value=ge},Q=()=>{var ie,ge;const{filterMethod:be,showAllLevels:Ie,separator:ot}=e,ve=(ge=(ie=h.value)==null?void 0:ie.getFlattedNodes(!e.props.checkStrictly))==null?void 0:ge.filter(Ve=>Ve.isDisabled?!1:(Ve.calcText(Ie,ot),be(Ve,V.value)));L.value&&(y.value.forEach(Ve=>{Ve.hitState=!1}),k.value.forEach(Ve=>{Ve.hitState=!1})),v.value=!0,x.value=ve,ee()},ae=()=>{var ie;let ge;v.value&&p.value?ge=p.value.$el.querySelector(`.${r.e("suggestion-item")}`):ge=(ie=h.value)==null?void 0:ie.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`),ge&&(ge.focus(),!v.value&&ge.click())},pe=()=>{var ie,ge;const be=(ie=d.value)==null?void 0:ie.input,Ie=f.value,ot=(ge=p.value)==null?void 0:ge.$el;if(!(!sn||!be)){if(ot){const ve=ot.querySelector(`.${r.e("suggestion-list")}`);ve.style.minWidth=`${be.offsetWidth}px`}if(Ie){const{offsetHeight:ve}=Ie,Ve=y.value.length>0?`${Math.max(ve+6,n)}px`:`${n}px`;be.style.height=Ve,ee()}}},ke=ie=>{var ge;return(ge=h.value)==null?void 0:ge.getCheckedNodes(ie)},Be=ie=>{ee(),t("expand-change",ie)},je=ie=>{var ge;const be=(ge=ie.target)==null?void 0:ge.value;if(ie.type==="compositionend")C.value=!1,vt(()=>Ke(be));else{const Ie=be[be.length-1]||"";C.value=!wy(Ie)}},qe=ie=>{if(!C.value)switch(ie.code){case ct.enter:J();break;case ct.down:J(!0),vt(ae),ie.preventDefault();break;case ct.esc:case ct.tab:J(!1);break}},ne=()=>{var ie;(ie=h.value)==null||ie.clearCheckedNodes(),J(!1)},ue=ie=>{var ge,be;const{checked:Ie}=ie;L.value?(ge=h.value)==null||ge.handleCheckChange(ie,!Ie,!1):(!Ie&&((be=h.value)==null||be.handleCheckChange(ie,!0,!1)),J(!1))},Se=ie=>{const ge=ie.target,{code:be}=ie;switch(be){case ct.up:case ct.down:{const Ie=be===ct.up?-1:1;hv(LF(ge,Ie,`.${r.e("suggestion-item")}[tabindex="-1"]`));break}case ct.enter:ge.click();break;case ct.esc:case ct.tab:J(!1);break}},Fe=()=>{const ie=y.value,ge=ie[ie.length-1];s=w.value?0:s+1,!(!ge||!s)&&(ge.hitState?$e(ge):ge.hitState=!0)},Le=hr(()=>{const{value:ie}=V;if(!ie)return;const ge=e.beforeFilter(ie);gc(ge)?ge.then(Q).catch(()=>{}):ge!==!1?Q():te()},e.debounce),Ke=(ie,ge)=>{!m.value&&J(!0),!(ge!=null&&ge.isComposing)&&(ie?Le():te())};return We(v,ee),We([H,S],se),We(y,()=>{vt(()=>pe())}),We(M,ie=>b.value=ie,{immediate:!0}),Ft(()=>{var ie;const ge=(ie=d.value)==null?void 0:ie.$el;n=(ge==null?void 0:ge.offsetHeight)||che[A.value]||uhe,Bf(ge,pe)}),qn(()=>{var ie;zf((ie=d.value)==null?void 0:ie.$el,pe)}),{popperOptions:dhe,tooltipRef:c,popperPaneRef:Y,input:d,tagWrapper:f,panel:h,suggestionPanel:p,popperVisible:m,inputHover:g,inputPlaceholder:T,filtering:v,presentText:M,checkedValue:B,inputValue:b,searchInputValue:w,presentTags:y,allPresentTags:k,suggestions:x,isDisabled:S,isOnComposition:C,realSize:A,tagSize:R,multiple:L,readonly:P,clearBtnVisible:F,compatTeleported:o,nsCascader:r,nsInput:i,t:a,togglePopperVisible:J,hideSuggestionPanel:te,deleteTag:$e,focusFirstNode:ae,getCheckedNodes:ke,handleExpandChange:Be,handleKeyDown:qe,handleComposition:je,handleClear:ne,handleSuggestionClick:ue,handleSuggestionKeyDown:Se,handleDelete:Fe,handleInput:Ke}}}),hhe={key:0},phe={class:"el-cascader__collapse-tags"},mhe=["placeholder"],ghe=["onClick"];function vhe(e,t,n,s,o,r){const i=Ne("circle-close"),a=Ne("el-icon"),l=Ne("arrow-down"),u=Ne("el-input"),c=Ne("el-tag"),d=Ne("el-tooltip"),f=Ne("el-cascader-panel"),h=Ne("check"),p=Ne("el-scrollbar"),m=Or("clickoutside");return _(),ye(d,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":t[17]||(t[17]=g=>e.popperVisible=g),teleported:e.compatTeleported,"popper-class":[e.nsCascader.e("dropdown"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${e.nsCascader.namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:de(()=>[It((_(),U("div",{class:W([e.nsCascader.b(),e.nsCascader.m(e.realSize),e.nsCascader.is("disabled",e.isDisabled),e.$attrs.class]),style:it(e.$attrs.style),onClick:t[11]||(t[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:t[12]||(t[12]=(...g)=>e.handleKeyDown&&e.handleKeyDown(...g)),onMouseenter:t[13]||(t[13]=g=>e.inputHover=!0),onMouseleave:t[14]||(t[14]=g=>e.inputHover=!1)},[fe(u,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":t[1]||(t[1]=g=>e.inputValue=g),placeholder:e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:W(e.nsCascader.is("focus",e.popperVisible)),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:t[2]||(t[2]=g=>e.$emit("focus",g)),onBlur:t[3]||(t[3]=g=>e.$emit("blur",g)),onInput:e.handleInput},{suffix:de(()=>[e.clearBtnVisible?(_(),ye(a,{key:"clear",class:W([e.nsInput.e("icon"),"icon-circle-close"]),onClick:wt(e.handleClear,["stop"])},{default:de(()=>[fe(i)]),_:1},8,["class","onClick"])):(_(),ye(a,{key:"arrow-down",class:W([e.nsInput.e("icon"),"icon-arrow-down",e.nsCascader.is("reverse",e.popperVisible)]),onClick:t[0]||(t[0]=wt(g=>e.togglePopperVisible(),["stop"]))},{default:de(()=>[fe(l)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(_(),U("div",{key:0,ref:"tagWrapper",class:W(e.nsCascader.e("tags"))},[(_(!0),U(lt,null,Zt(e.presentTags,g=>(_(),ye(c,{key:g.key,type:e.tagType,size:e.tagSize,hit:g.hitState,closable:g.closable,"disable-transitions":"",onClose:v=>e.deleteTag(g)},{default:de(()=>[g.isCollapseTag===!1?(_(),U("span",hhe,He(g.text),1)):(_(),ye(d,{key:1,teleported:!1,disabled:e.popperVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:de(()=>[q("span",null,He(g.text),1)]),content:de(()=>[q("div",phe,[(_(!0),U(lt,null,Zt(e.allPresentTags,(v,b)=>(_(),U("div",{key:b,class:"el-cascader__collapse-tag"},[(_(),ye(c,{key:v.key,class:"in-tooltip",type:e.tagType,size:e.tagSize,hit:v.hitState,closable:v.closable,"disable-transitions":"",onClose:w=>e.deleteTag(v)},{default:de(()=>[q("span",null,He(v.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))]))),128))])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?It((_(),U("input",{key:0,"onUpdate:modelValue":t[4]||(t[4]=g=>e.searchInputValue=g),type:"text",class:W(e.nsCascader.e("search-input")),placeholder:e.presentText?"":e.inputPlaceholder,onInput:t[5]||(t[5]=g=>e.handleInput(e.searchInputValue,g)),onClick:t[6]||(t[6]=wt(g=>e.togglePopperVisible(!0),["stop"])),onKeydown:t[7]||(t[7]=Qt((...g)=>e.handleDelete&&e.handleDelete(...g),["delete"])),onCompositionstart:t[8]||(t[8]=(...g)=>e.handleComposition&&e.handleComposition(...g)),onCompositionupdate:t[9]||(t[9]=(...g)=>e.handleComposition&&e.handleComposition(...g)),onCompositionend:t[10]||(t[10]=(...g)=>e.handleComposition&&e.handleComposition(...g))},null,42,mhe)),[[f$,e.searchInputValue]]):me("v-if",!0)],2)):me("v-if",!0)],38)),[[m,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:de(()=>[It(fe(f,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":t[15]||(t[15]=g=>e.checkedValue=g),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:t[16]||(t[16]=g=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[cn,!e.filtering]]),e.filterable?It((_(),ye(p,{key:0,ref:"suggestionPanel",tag:"ul",class:W(e.nsCascader.e("suggestion-panel")),"view-class":e.nsCascader.e("suggestion-list"),onKeydown:e.handleSuggestionKeyDown},{default:de(()=>[e.suggestions.length?(_(!0),U(lt,{key:0},Zt(e.suggestions,g=>(_(),U("li",{key:g.uid,class:W([e.nsCascader.e("suggestion-item"),e.nsCascader.is("checked",g.checked)]),tabindex:-1,onClick:v=>e.handleSuggestionClick(g)},[q("span",null,He(g.text),1),g.checked?(_(),ye(a,{key:0},{default:de(()=>[fe(h)]),_:1})):me("v-if",!0)],10,ghe))),128)):Pe(e.$slots,"empty",{key:1},()=>[q("li",{class:W(e.nsCascader.e("empty-text"))},He(e.t("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class","onKeydown"])),[[cn,e.filtering]]):me("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-options","transition","onHide"])}var kv=Ye(fhe,[["render",vhe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/index.vue"]]);kv.install=e=>{e.component(kv.name,kv)};const bhe=kv,yhe=bhe,whe=pt({checked:{type:Boolean,default:!1}}),khe={"update:checked":e=>No(e),change:e=>No(e)},xhe={name:"ElCheckTag"},Che=xe(nt(Me({},xhe),{props:whe,emits:khe,setup(e,{emit:t}){const n=e,s=Xe("check-tag"),o=()=>{const r=!n.checked;t("change",r),t("update:checked",r)};return(r,i)=>(_(),U("span",{class:W([N(s).b(),N(s).is("checked",r.checked)]),onClick:o},[Pe(r.$slots,"default")],2))}}));var $he=Ye(Che,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const She=Kt($he),Ihe=pt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Qe([Number,Object]),default:()=>gs({})},sm:{type:Qe([Number,Object]),default:()=>gs({})},md:{type:Qe([Number,Object]),default:()=>gs({})},lg:{type:Qe([Number,Object]),default:()=>gs({})},xl:{type:Qe([Number,Object]),default:()=>gs({})}});var Ehe=xe({name:"ElCol",props:Ihe,setup(e,{slots:t}){const{gutter:n}=rt(l4,{gutter:O(()=>0)}),s=Xe("col"),o=O(()=>n.value?{paddingLeft:`${n.value/2}px`,paddingRight:`${n.value/2}px`}:{}),r=O(()=>{const i=[];return["span","offset","pull","push"].forEach(u=>{const c=e[u];typeof c=="number"&&(u==="span"?i.push(s.b(`${e[u]}`)):c>0&&i.push(s.b(`${u}-${e[u]}`)))}),["xs","sm","md","lg","xl"].forEach(u=>{if(typeof e[u]=="number")i.push(s.b(`${u}-${e[u]}`));else if(typeof e[u]=="object"){const c=e[u];Object.keys(c).forEach(d=>{i.push(d!=="span"?s.b(`${u}-${d}-${c[d]}`):s.b(`${u}-${c[d]}`))})}}),n.value&&i.push(s.is("guttered")),i});return()=>fe(e.tag,{class:[s.b(),r.value],style:o.value},t)}});const The=Kt(Ehe),xD=e=>typeof mn(e),_he=pt({accordion:Boolean,modelValue:{type:Qe([Array,String,Number]),default:()=>gs([])}}),Nhe={[Ht]:xD,[ro]:xD},Ahe={name:"ElCollapse"},Dhe=xe(nt(Me({},Ahe),{props:_he,emits:Nhe,setup(e,{expose:t,emit:n}){const s=e,o=Xe("collapse"),r=j(Ap(s.modelValue)),i=l=>{r.value=l;const u=s.accordion?r.value[0]:r.value;n(Ht,u),n(ro,u)},a=l=>{if(s.accordion)i([(r.value[0]||r.value[0]===0)&&r.value[0]===l?"":l]);else{const u=[...r.value],c=u.indexOf(l);c>-1?u.splice(c,1):u.push(l),i(u)}};return We(()=>s.modelValue,()=>r.value=Ap(s.modelValue),{deep:!0}),Gt(s4,{activeNames:r,handleItemClick:a}),t({activeNames:r,setActiveNames:i}),(l,u)=>(_(),U("div",{class:W(N(o).b()),role:"tablist","aria-multiselectable":"true"},[Pe(l.$slots,"default")],2))}}));var Rhe=Ye(Dhe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const Mhe=xe({name:"ElCollapseTransition",setup(){return{ns:Xe("collapse-transition"),on:{beforeEnter(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.maxHeight=0,t.style.paddingTop=0,t.style.paddingBottom=0},enter(t){t.dataset.oldOverflow=t.style.overflow,t.scrollHeight!==0?(t.style.maxHeight=`${t.scrollHeight}px`,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.maxHeight=0,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},afterEnter(t){t.style.maxHeight="",t.style.overflow=t.dataset.oldOverflow},beforeLeave(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.maxHeight=`${t.scrollHeight}px`,t.style.overflow="hidden"},leave(t){t.scrollHeight!==0&&(t.style.maxHeight=0,t.style.paddingTop=0,t.style.paddingBottom=0)},afterLeave(t){t.style.maxHeight="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom}}}}});function Ohe(e,t,n,s,o,r){return _(),ye(Rs,Wn({name:e.ns.b()},Xq(e.on)),{default:de(()=>[Pe(e.$slots,"default")]),_:3},16,["name"])}var xv=Ye(Mhe,[["render",Ohe],["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);xv.install=e=>{e.component(xv.name,xv)};const _y=xv,Phe=_y,Fhe=pt({title:{type:String,default:""},name:{type:Qe([String,Number]),default:()=>ym()},disabled:Boolean}),Lhe=["aria-expanded","aria-controls","aria-describedby"],Bhe=["id","tabindex","onKeypress"],zhe=["id","aria-hidden","aria-labelledby"],Vhe={name:"ElCollapseItem"},Whe=xe(nt(Me({},Vhe),{props:Fhe,setup(e,{expose:t}){const n=e,s=rt(s4),o=Xe("collapse"),r=j(!1),i=j(!1),a=j(ym()),l=O(()=>s==null?void 0:s.activeNames.value.includes(n.name)),u=()=>{setTimeout(()=>{i.value?i.value=!1:r.value=!0},50)},c=()=>{n.disabled||(s==null||s.handleItemClick(n.name),r.value=!1,i.value=!0)},d=()=>{s==null||s.handleItemClick(n.name)};return t({isActive:l}),(f,h)=>(_(),U("div",{class:W([N(o).b("item"),N(o).is("active",N(l)),N(o).is("disabled",f.disabled)])},[q("div",{role:"tab","aria-expanded":N(l),"aria-controls":N(o).b(`content-${a.value}`),"aria-describedby":N(o).b(`content-${a.value}`)},[q("div",{id:N(o).b(`head-${a.value}`),class:W([N(o).be("item","header"),N(o).is("active",N(l)),{focusing:r.value}]),role:"button",tabindex:f.disabled?-1:0,onClick:c,onKeypress:Qt(wt(d,["stop","prevent"]),["space","enter"]),onFocus:u,onBlur:h[0]||(h[0]=p=>r.value=!1)},[Pe(f.$slots,"title",{},()=>[Yt(He(f.title),1)]),fe(N(xt),{class:W([N(o).be("item","arrow"),N(o).is("active",N(l))])},{default:de(()=>[fe(N(bi))]),_:1},8,["class"])],42,Bhe)],8,Lhe),fe(N(_y),null,{default:de(()=>[It(q("div",{id:N(o).b(`content-${a.value}`),class:W(N(o).be("item","wrap")),role:"tabpanel","aria-hidden":!N(l),"aria-labelledby":N(o).b(`head-${a.value}`)},[q("div",{class:W(N(o).be("item","content"))},[Pe(f.$slots,"default")],2)],10,zhe),[[cn,N(l)]])]),_:3})],2))}}));var _L=Ye(Whe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const Hhe=Kt(Rhe,{CollapseItem:_L}),Uhe=ws(_L);let S2=!1;function Lp(e,t){if(!sn)return;const n=function(r){var i;(i=t.drag)==null||i.call(t,r)},s=function(r){var i;Ss(document,"mousemove",n),Ss(document,"mouseup",s),Ss(document,"touchmove",n),Ss(document,"touchend",s),document.onselectstart=null,document.ondragstart=null,S2=!1,(i=t.end)==null||i.call(t,r)},o=function(r){var i;S2||(r.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,ts(document,"mousemove",n),ts(document,"mouseup",s),ts(document,"touchmove",n),ts(document,"touchend",s),S2=!0,(i=t.start)==null||i.call(t,r))};ts(e,"mousedown",o),ts(e,"touchstart",o)}const jhe=xe({name:"ElColorAlphaSlider",props:{color:{type:Object,required:!0},vertical:{type:Boolean,default:!1}},setup(e){const t=jt(),n=Ns(null),s=Ns(null),o=j(0),r=j(0),i=j(null);We(()=>e.color.get("alpha"),()=>{f()}),We(()=>e.color.value,()=>{f()});function a(){if(e.vertical)return 0;const h=t.vnode.el,p=e.color.get("alpha");return h?Math.round(p*(h.offsetWidth-n.value.offsetWidth/2)/100):0}function l(){const h=t.vnode.el;if(!e.vertical)return 0;const p=e.color.get("alpha");return h?Math.round(p*(h.offsetHeight-n.value.offsetHeight/2)/100):0}function u(){if(e.color&&e.color.value){const{r:h,g:p,b:m}=e.color.toRgb();return`linear-gradient(to right, rgba(${h}, ${p}, ${m}, 0) 0%, rgba(${h}, ${p}, ${m}, 1) 100%)`}return null}function c(h){h.target!==n.value&&d(h)}function d(h){const m=t.vnode.el.getBoundingClientRect(),{clientX:g,clientY:v}=E$(h);if(e.vertical){let b=v-m.top;b=Math.max(n.value.offsetHeight/2,b),b=Math.min(b,m.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((b-n.value.offsetHeight/2)/(m.height-n.value.offsetHeight)*100))}else{let b=g-m.left;b=Math.max(n.value.offsetWidth/2,b),b=Math.min(b,m.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((b-n.value.offsetWidth/2)/(m.width-n.value.offsetWidth)*100))}}function f(){o.value=a(),r.value=l(),i.value=u()}return Ft(()=>{const h={drag:p=>{d(p)},end:p=>{d(p)}};Lp(s.value,h),Lp(n.value,h),f()}),{thumb:n,bar:s,thumbLeft:o,thumbTop:r,background:i,handleClick:c,update:f}}});function Ghe(e,t,n,s,o,r){return _(),U("div",{class:W(["el-color-alpha-slider",{"is-vertical":e.vertical}])},[q("div",{ref:"bar",class:"el-color-alpha-slider__bar",style:it({background:e.background}),onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},null,4),q("div",{ref:"thumb",class:"el-color-alpha-slider__thumb",style:it({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,4)],2)}var Khe=Ye(jhe,[["render",Ghe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const qhe=xe({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=jt(),n=j(null),s=j(null),o=j(0),r=j(0),i=O(()=>e.color.get("hue"));We(()=>i.value,()=>{d()});function a(f){f.target!==n.value&&l(f)}function l(f){const p=t.vnode.el.getBoundingClientRect(),{clientX:m,clientY:g}=E$(f);let v;if(e.vertical){let b=g-p.top;b=Math.min(b,p.height-n.value.offsetHeight/2),b=Math.max(n.value.offsetHeight/2,b),v=Math.round((b-n.value.offsetHeight/2)/(p.height-n.value.offsetHeight)*360)}else{let b=m-p.left;b=Math.min(b,p.width-n.value.offsetWidth/2),b=Math.max(n.value.offsetWidth/2,b),v=Math.round((b-n.value.offsetWidth/2)/(p.width-n.value.offsetWidth)*360)}e.color.set("hue",v)}function u(){const f=t.vnode.el;if(e.vertical)return 0;const h=e.color.get("hue");return f?Math.round(h*(f.offsetWidth-n.value.offsetWidth/2)/360):0}function c(){const f=t.vnode.el;if(!e.vertical)return 0;const h=e.color.get("hue");return f?Math.round(h*(f.offsetHeight-n.value.offsetHeight/2)/360):0}function d(){o.value=u(),r.value=c()}return Ft(()=>{const f={drag:h=>{l(h)},end:h=>{l(h)}};Lp(s.value,f),Lp(n.value,f),d()}),{bar:s,thumb:n,thumbLeft:o,thumbTop:r,hueValue:i,handleClick:a,update:d}}});function Yhe(e,t,n,s,o,r){return _(),U("div",{class:W(["el-color-hue-slider",{"is-vertical":e.vertical}])},[q("div",{ref:"bar",class:"el-color-hue-slider__bar",onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},null,512),q("div",{ref:"thumb",class:"el-color-hue-slider__thumb",style:it({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,4)],2)}var Xhe=Ye(qhe,[["render",Yhe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const NL=Symbol(),Zhe=()=>rt(NL),CD=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},Jhe=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},Qhe=function(e){return typeof e=="string"&&e.includes("%")},Ud=function(e,t){Jhe(e)&&(e="100%");const n=Qhe(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},$D={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Cv=function(e){e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${$D[t]||t}${$D[n]||n}`},SD=function({r:e,g:t,b:n}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+n)?"":`#${Cv(e)}${Cv(t)}${Cv(n)}`},I2={A:10,B:11,C:12,D:13,E:14,F:15},_u=function(e){return e.length===2?(I2[e[0].toUpperCase()]||+e[0])*16+(I2[e[1].toUpperCase()]||+e[1]):I2[e[1].toUpperCase()]||+e[1]},epe=function(e,t,n){t=t/100,n=n/100;let s=t;const o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,s*=o<=1?o:2-o;const r=(n+t)/2,i=n===0?2*s/(o+s):2*t/(n+t);return{h:e,s:i*100,v:r*100}},ID=function(e,t,n){e=Ud(e,255),t=Ud(t,255),n=Ud(n,255);const s=Math.max(e,t,n),o=Math.min(e,t,n);let r;const i=s,a=s-o,l=s===0?0:a/s;if(s===o)r=0;else{switch(s){case e:{r=(t-n)/a+(t<n?6:0);break}case t:{r=(n-e)/a+2;break}case n:{r=(e-t)/a+4;break}}r/=6}return{h:r*360,s:l*100,v:i*100}},xh=function(e,t,n){e=Ud(e,360)*6,t=Ud(t,100),n=Ud(n,100);const s=Math.floor(e),o=e-s,r=n*(1-t),i=n*(1-o*t),a=n*(1-(1-o)*t),l=s%6,u=[n,i,r,r,a,n][l],c=[a,n,n,i,r,r][l],d=[r,r,a,n,n,i][l];return{r:Math.round(u*255),g:Math.round(c*255),b:Math.round(d*255)}};class ap{constructor(t){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",t=t||{};for(const n in t)en(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const s in t)en(t,s)&&this.set(s,t[s]);return}this[`_${t}`]=n,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return xh(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(s,o,r)=>{this._hue=Math.max(0,Math.min(360,s)),this._saturation=Math.max(0,Math.min(100,o)),this._value=Math.max(0,Math.min(100,r)),this.doOnChange()};if(t.includes("hsl")){const s=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?Number.parseFloat(o):Number.parseInt(o,10));if(s.length===4?this._alpha=Number.parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:o,s:r,v:i}=epe(s[0],s[1],s[2]);n(o,r,i)}}else if(t.includes("hsv")){const s=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?Number.parseFloat(o):Number.parseInt(o,10));s.length===4?this._alpha=Number.parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3&&n(s[0],s[1],s[2])}else if(t.includes("rgb")){const s=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?Number.parseFloat(o):Number.parseInt(o,10));if(s.length===4?this._alpha=Number.parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:o,s:r,v:i}=ID(s[0],s[1],s[2]);n(o,r,i)}}else if(t.includes("#")){const s=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(s))return;let o,r,i;s.length===3?(o=_u(s[0]+s[0]),r=_u(s[1]+s[1]),i=_u(s[2]+s[2])):(s.length===6||s.length===8)&&(o=_u(s.slice(0,2)),r=_u(s.slice(2,4)),i=_u(s.slice(4,6))),s.length===8?this._alpha=_u(s.slice(6))/255*100:(s.length===3||s.length===6)&&(this._alpha=100);const{h:a,s:l,v:u}=ID(o,r,i);n(a,l,u)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:n,_value:s,_alpha:o,format:r}=this;if(this.enableAlpha)switch(r){case"hsl":{const i=CD(t,n/100,s/100);this.value=`hsla(${t}, ${Math.round(i[1]*100)}%, ${Math.round(i[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(n)}%, ${Math.round(s)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${SD(xh(t,n,s))}${Cv(o*255/100)}`;break}default:{const{r:i,g:a,b:l}=xh(t,n,s);this.value=`rgba(${i}, ${a}, ${l}, ${this.get("alpha")/100})`}}else switch(r){case"hsl":{const i=CD(t,n/100,s/100);this.value=`hsl(${t}, ${Math.round(i[1]*100)}%, ${Math.round(i[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(n)}%, ${Math.round(s)}%)`;break}case"rgb":{const{r:i,g:a,b:l}=xh(t,n,s);this.value=`rgb(${i}, ${a}, ${l})`;break}default:this.value=SD(xh(t,n,s))}}}const tpe=xe({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const{currentColor:t}=Zhe(),n=j(o(e.colors,e.color));We(()=>t.value,r=>{const i=new ap;i.fromString(r),n.value.forEach(a=>{a.selected=i.compare(a)})}),oi(()=>{n.value=o(e.colors,e.color)});function s(r){e.color.fromString(e.colors[r])}function o(r,i){return r.map(a=>{const l=new ap;return l.enableAlpha=!0,l.format="rgba",l.fromString(a),l.selected=l.value===i.value,l})}return{rgbaColors:n,handleSelect:s}}}),npe={class:"el-color-predefine"},spe={class:"el-color-predefine__colors"},ope=["onClick"];function rpe(e,t,n,s,o,r){return _(),U("div",npe,[q("div",spe,[(_(!0),U(lt,null,Zt(e.rgbaColors,(i,a)=>(_(),U("div",{key:e.colors[a],class:W(["el-color-predefine__color-selector",{selected:i.selected,"is-alpha":i._alpha<100}]),onClick:l=>e.handleSelect(a)},[q("div",{style:it({backgroundColor:i.value})},null,4)],10,ope))),128))])])}var ipe=Ye(tpe,[["render",rpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const ape=xe({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=jt(),n=j(0),s=j(0),o=j("hsl(0, 100%, 50%)"),r=O(()=>{const l=e.color.get("hue"),u=e.color.get("value");return{hue:l,value:u}});function i(){const l=e.color.get("saturation"),u=e.color.get("value"),c=t.vnode.el,{clientWidth:d,clientHeight:f}=c;s.value=l*d/100,n.value=(100-u)*f/100,o.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function a(l){const c=t.vnode.el.getBoundingClientRect(),{clientX:d,clientY:f}=E$(l);let h=d-c.left,p=f-c.top;h=Math.max(0,h),h=Math.min(h,c.width),p=Math.max(0,p),p=Math.min(p,c.height),s.value=h,n.value=p,e.color.set({saturation:h/c.width*100,value:100-p/c.height*100})}return We(()=>r.value,()=>{i()}),Ft(()=>{Lp(t.vnode.el,{drag:l=>{a(l)},end:l=>{a(l)}}),i()}),{cursorTop:n,cursorLeft:s,background:o,colorValue:r,handleDrag:a,update:i}}}),lpe=q("div",{class:"el-color-svpanel__white"},null,-1),upe=q("div",{class:"el-color-svpanel__black"},null,-1),cpe=q("div",null,null,-1),dpe=[cpe];function fpe(e,t,n,s,o,r){return _(),U("div",{class:"el-color-svpanel",style:it({backgroundColor:e.background})},[lpe,upe,q("div",{class:"el-color-svpanel__cursor",style:it({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},dpe,4)],4)}var hpe=Ye(ape,[["render",fpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const ppe=xe({name:"ElColorPicker",components:{ElButton:ii,ElTooltip:vr,ElInput:yi,ElIcon:xt,Close:ci,ArrowDown:Uc,SvPanel:hpe,HueSlider:Xhe,AlphaSlider:Khe,Predefine:ipe},directives:{ClickOutside:Gc},props:{modelValue:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:{type:String,validator:Pr},popperClass:String,predefine:Array},emits:["change","active-change",Ht],setup(e,{emit:t}){const{t:n}=Dn(),s=Xe("color"),o=rt(Lr,{}),r=rt(di,{}),i=j(null),a=j(null),l=j(null),u=j(null),c=vn(new ap({enableAlpha:e.showAlpha,format:e.colorFormat,value:e.modelValue})),d=j(!1),f=j(!1),h=j(""),p=O(()=>!e.modelValue&&!f.value?"transparent":b(c,e.showAlpha)),m=Ls(),g=O(()=>!!(e.disabled||o.disabled)),v=O(()=>!e.modelValue&&!f.value?"":c.value);We(()=>e.modelValue,R=>{R?R&&R!==c.value&&c.fromString(R):f.value=!1}),We(()=>v.value,R=>{h.value=R,t("active-change",R)}),We(()=>c.value,()=>{!e.modelValue&&!f.value&&(f.value=!0)});function b(R,L){if(!(R instanceof ap))throw new TypeError("color should be instance of _color Class");const{r:P,g:V,b:H}=R.toRgb();return L?`rgba(${P}, ${V}, ${H}, ${R.get("alpha")/100})`:`rgb(${P}, ${V}, ${H})`}function w(R){d.value=R}const y=hr(w,100);function k(){y(!1),x()}function x(){vt(()=>{e.modelValue?c.fromString(e.modelValue):f.value=!1})}function C(){g.value||y(!d.value)}function S(){c.fromString(h.value)}function T(){var R;const L=c.value;t(Ht,L),t("change",L),(R=r.validate)==null||R.call(r,"change").catch(P=>void 0),y(!1),vt(()=>{const P=new ap({enableAlpha:e.showAlpha,format:e.colorFormat,value:e.modelValue});c.compare(P)||x()})}function A(){var R;y(!1),t(Ht,null),t("change",null),e.modelValue!==null&&((R=r.validate)==null||R.call(r,"change").catch(L=>void 0)),x()}return Ft(()=>{e.modelValue&&(h.value=v.value)}),We(()=>d.value,()=>{vt(()=>{var R,L,P;(R=i.value)==null||R.update(),(L=a.value)==null||L.update(),(P=l.value)==null||P.update()})}),Gt(NL,{currentColor:v}),{color:c,colorDisabled:g,colorSize:m,displayedColor:p,showPanelColor:f,showPicker:d,customInput:h,handleConfirm:S,hide:k,handleTrigger:C,clear:A,confirmValue:T,t:n,ns:s,hue:i,svPanel:a,alpha:l,popper:u}}});function mpe(e,t,n,s,o,r){const i=Ne("hue-slider"),a=Ne("sv-panel"),l=Ne("alpha-slider"),u=Ne("predefine"),c=Ne("el-input"),d=Ne("el-button"),f=Ne("arrow-down"),h=Ne("el-icon"),p=Ne("close"),m=Ne("el-tooltip"),g=Or("click-outside");return _(),ye(m,{ref:"popper",visible:e.showPicker,"onUpdate:visible":t[2]||(t[2]=v=>e.showPicker=v),"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[e.ns.be("picker","panel"),e.ns.b("dropdown"),e.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:"el-zoom-in-top",persistent:""},{content:de(()=>[It((_(),U("div",null,[q("div",{class:W(e.ns.be("dropdown","main-wrapper"))},[fe(i,{ref:"hue",class:"hue-slider",color:e.color,vertical:""},null,8,["color"]),fe(a,{ref:"svPanel",color:e.color},null,8,["color"])],2),e.showAlpha?(_(),ye(l,{key:0,ref:"alpha",color:e.color},null,8,["color"])):me("v-if",!0),e.predefine?(_(),ye(u,{key:1,ref:"predefine",color:e.color,colors:e.predefine},null,8,["color","colors"])):me("v-if",!0),q("div",{class:W(e.ns.be("dropdown","btns"))},[q("span",{class:W(e.ns.be("dropdown","value"))},[fe(c,{modelValue:e.customInput,"onUpdate:modelValue":t[0]||(t[0]=v=>e.customInput=v),"validate-event":!1,size:"small",onKeyup:Qt(e.handleConfirm,["enter"]),onBlur:e.handleConfirm},null,8,["modelValue","onKeyup","onBlur"])],2),fe(d,{size:"small",type:"text",class:W(e.ns.be("dropdown","link-btn")),onClick:e.clear},{default:de(()=>[Yt(He(e.t("el.colorpicker.clear")),1)]),_:1},8,["class","onClick"]),fe(d,{plain:"",size:"small",class:W(e.ns.be("dropdown","btn")),onClick:e.confirmValue},{default:de(()=>[Yt(He(e.t("el.colorpicker.confirm")),1)]),_:1},8,["class","onClick"])],2)])),[[g,e.hide]])]),default:de(()=>[q("div",{class:W([e.ns.b("picker"),e.ns.is("disabled",e.colorDisabled),e.ns.bm("picker",e.colorSize)])},[e.colorDisabled?(_(),U("div",{key:0,class:W(e.ns.be("picker","mask"))},null,2)):me("v-if",!0),q("div",{class:W(e.ns.be("picker","trigger")),onClick:t[1]||(t[1]=(...v)=>e.handleTrigger&&e.handleTrigger(...v))},[q("span",{class:W([e.ns.be("picker","color"),e.ns.is("alpha",e.showAlpha)])},[q("span",{class:W(e.ns.be("picker","color-inner")),style:it({backgroundColor:e.displayedColor})},[It(fe(h,{class:W([e.ns.be("picker","icon"),e.ns.is("icon-arrow-down")])},{default:de(()=>[fe(f)]),_:1},8,["class"]),[[cn,e.modelValue||e.showPanelColor]]),!e.modelValue&&!e.showPanelColor?(_(),ye(h,{key:0,class:W([e.ns.be("picker","empty"),e.ns.is("icon-close")])},{default:de(()=>[fe(p)]),_:1},8,["class"])):me("v-if",!0)],6)],2)],2)],2)]),_:1},8,["visible","popper-class"])}var $v=Ye(ppe,[["render",mpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/index.vue"]]);$v.install=e=>{e.component($v.name,$v)};const gpe=$v,vpe=gpe,ux={},bpe=pt({a11y:{type:Boolean,default:!0},locale:{type:Qe(Object)},size:{type:String,values:$a,default:""},button:{type:Qe(Object)},experimentalFeatures:{type:Qe(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Qe(Object)},zIndex:{type:Number},namespace:{type:String,default:"el"}});var ype=xe({name:"ElConfigProvider",props:bpe,setup(e,{slots:t}){We(()=>e.message,s=>{Object.assign(ux,s!=null?s:{})},{immediate:!0,deep:!0});const n=p4(e);return()=>Pe(t,"default",{config:n==null?void 0:n.value})}});const wpe=Kt(ype),kpe=xe({name:"ElContainer",props:{direction:{type:String,default:""}},setup(e,{slots:t}){const n=Xe("container");return{isVertical:O(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(r=>{const i=r.type.name;return i==="ElHeader"||i==="ElFooter"}):!1),ns:n}}});function xpe(e,t,n,s,o,r){return _(),U("section",{class:W([e.ns.b(),e.ns.is("vertical",e.isVertical)])},[Pe(e.$slots,"default")],2)}var Cpe=Ye(kpe,[["render",xpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const $pe=xe({name:"ElAside",props:{width:{type:String,default:null}},setup(e){const t=Xe("aside");return{style:O(()=>e.width?{"--el-aside-width":e.width}:{}),ns:t}}});function Spe(e,t,n,s,o,r){return _(),U("aside",{class:W(e.ns.b()),style:it(e.style)},[Pe(e.$slots,"default")],6)}var AL=Ye($pe,[["render",Spe],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const Ipe=xe({name:"ElFooter",props:{height:{type:String,default:null}},setup(e){const t=Xe("footer");return{style:O(()=>e.height?{"--el-footer-height":e.height}:{}),ns:t}}});function Epe(e,t,n,s,o,r){return _(),U("footer",{class:W(e.ns.b()),style:it(e.style)},[Pe(e.$slots,"default")],6)}var DL=Ye(Ipe,[["render",Epe],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const Tpe=xe({name:"ElHeader",props:{height:{type:String,default:null}},setup(e){const t=Xe("header");return{style:O(()=>e.height?{"--el-header-height":e.height}:{}),ns:t}}});function _pe(e,t,n,s,o,r){return _(),U("header",{class:W(e.ns.b()),style:it(e.style)},[Pe(e.$slots,"default")],6)}var RL=Ye(Tpe,[["render",_pe],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const Npe=xe({name:"ElMain",setup(){return{ns:Xe("main")}}});function Ape(e,t,n,s,o,r){return _(),U("main",{class:W(e.ns.b())},[Pe(e.$slots,"default")],2)}var ML=Ye(Npe,[["render",Ape],["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const Dpe=Kt(Cpe,{Aside:AL,Footer:DL,Header:RL,Main:ML}),Rpe=ws(AL),Mpe=ws(DL),Ope=ws(RL),Ppe=ws(ML);var OL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){return function(n,s,o){var r=s.prototype,i=r.format;o.en.ordinal=function(a){var l=["th","st","nd","rd"],u=a%100;return"["+a+(l[(u-20)%10]||l[u]||l[0])+"]"},r.format=function(a){var l=this,u=this.$locale();if(!this.isValid())return i.bind(this)(a);var c=this.$utils(),d=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((l.$M+1)/3);case"Do":return u.ordinal(l.$D);case"gggg":return l.weekYear();case"GGGG":return l.isoWeekYear();case"wo":return u.ordinal(l.week(),"W");case"w":case"ww":return c.s(l.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(l.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(l.$H===0?24:l.$H),f==="k"?1:2,"0");case"X":return Math.floor(l.$d.getTime()/1e3);case"x":return l.$d.getTime();case"z":return"["+l.offsetName()+"]";case"zzz":return"["+l.offsetName("long")+"]";default:return f}});return i.bind(this)(d)}}})})(OL);var Fpe=OL.exports,PL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){var n="week",s="year";return function(o,r,i){var a=r.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=i(this).startOf(s).add(1,s).date(u),d=i(this).endOf(n);if(c.isBefore(d))return 1}var f=i(this).startOf(s).date(u).startOf(n).subtract(1,"millisecond"),h=this.diff(f,n,!0);return h<0?i(this).startOf("week").week():Math.ceil(h)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(PL);var Lpe=PL.exports,FL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){return function(n,s){s.prototype.weekYear=function(){var o=this.month(),r=this.week(),i=this.year();return r===1&&o===11?i+1:o===0&&r>=52?i-1:i}}})})(FL);var Bpe=FL.exports,LL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){return function(n,s,o){s.prototype.dayOfYear=function(r){var i=Math.round((o(this).startOf("day")-o(this).startOf("year"))/864e5)+1;return r==null?i:this.add(r-i,"day")}}})})(LL);var zpe=LL.exports,BL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){return function(n,s){s.prototype.isSameOrAfter=function(o,r){return this.isSame(o,r)||this.isAfter(o,r)}}})})(BL);var Vpe=BL.exports,zL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(ss,function(){return function(n,s){s.prototype.isSameOrBefore=function(o,r){return this.isSame(o,r)||this.isBefore(o,r)}}})})(zL);var Wpe=zL.exports;const VL=Symbol();var Hpe=xe({name:"ElDatePickerCell",props:pt({cell:{type:Qe(Object)}}),setup(e){const t=rt(VL);return()=>{const n=e.cell;if(t!=null&&t.ctx.slots.default){const s=t.ctx.slots.default(n).filter(o=>o.patchFlag!==-2&&o.type.toString()!=="Symbol(Comment)");if(s.length)return s}return at("div",{class:"el-date-table-cell"},[at("span",{class:"el-date-table-cell__text"},[n==null?void 0:n.text])])}}});const Upe=xe({components:{ElDatePickerCell:Hpe},props:{date:{type:Object},minDate:{type:Object},maxDate:{type:Object},parsedValue:{type:[Object,Array]},selectionMode:{type:String,default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{type:Function},cellClassName:{type:Function},rangeState:{type:Object,default:()=>({endDate:null,selecting:!1})}},emits:["changerange","pick","select"],setup(e,t){const{t:n,lang:s}=Dn(),o=j(null),r=j(null),i=j([[],[],[],[],[],[]]),a=e.date.$locale().weekStart||7,l=e.date.locale("en").localeData().weekdaysShort().map(y=>y.toLowerCase()),u=O(()=>a>3?7-a:-a),c=O(()=>{const y=e.date.startOf("month");return y.subtract(y.day()||7,"day")}),d=O(()=>l.concat(l).slice(a,a+7)),f=O(()=>{var y;const k=e.date.startOf("month"),x=k.day()||7,C=k.daysInMonth(),S=k.subtract(1,"month").daysInMonth(),T=u.value,A=i.value;let R=1;const L=e.selectionMode==="dates"?ic(e.parsedValue):[],P=Tt().locale(s.value).startOf("day");for(let V=0;V<6;V++){const H=A[V];e.showWeekNumber&&(H[0]||(H[0]={type:"week",text:c.value.add(V*7+1,"day").week()}));for(let F=0;F<7;F++){let M=H[e.showWeekNumber?F+1:F];M||(M={row:V,column:F,type:"normal",inRange:!1,start:!1,end:!1});const B=V*7+F,Y=c.value.add(B-T,"day");M.dayjs=Y,M.date=Y.toDate(),M.timestamp=Y.valueOf(),M.type="normal";const J=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate;if(M.inRange=e.minDate&&Y.isSameOrAfter(e.minDate,"day")&&J&&Y.isSameOrBefore(J,"day")||e.minDate&&Y.isSameOrBefore(e.minDate,"day")&&J&&Y.isSameOrAfter(J,"day"),(y=e.minDate)!=null&&y.isSameOrAfter(J)?(M.start=J&&Y.isSame(J,"day"),M.end=e.minDate&&Y.isSame(e.minDate,"day")):(M.start=e.minDate&&Y.isSame(e.minDate,"day"),M.end=J&&Y.isSame(J,"day")),Y.isSame(P,"day")&&(M.type="today"),V>=0&&V<=1){const re=x+T<0?7+x+T:x+T;F+V*7>=re?M.text=R++:(M.text=S-(re-F%7)+1+V*7,M.type="prev-month")}else R<=C?M.text=R++:(M.text=R++-C,M.type="next-month");const te=Y.toDate();M.selected=L.find(re=>re.valueOf()===Y.valueOf()),M.isSelected=!!M.selected,M.isCurrent=h(M),M.disabled=e.disabledDate&&e.disabledDate(te),M.customClass=e.cellClassName&&e.cellClassName(te),H[e.showWeekNumber?F+1:F]=M}if(e.selectionMode==="week"){const F=e.showWeekNumber?1:0,M=e.showWeekNumber?7:6,B=w(H[F+1]);H[F].inRange=B,H[F].start=B,H[M].inRange=B,H[M].end=B}}return A}),h=y=>e.selectionMode==="day"&&(y.type==="normal"||y.type==="today")&&p(y,e.parsedValue),p=(y,k)=>k?Tt(k).locale(s.value).isSame(e.date.date(Number(y.text)),"day"):!1,m=y=>{const k=[];return(y.type==="normal"||y.type==="today")&&!y.disabled?(k.push("available"),y.type==="today"&&k.push("today")):k.push(y.type),h(y)&&k.push("current"),y.inRange&&(y.type==="normal"||y.type==="today"||e.selectionMode==="week")&&(k.push("in-range"),y.start&&k.push("start-date"),y.end&&k.push("end-date")),y.disabled&&k.push("disabled"),y.selected&&k.push("selected"),y.customClass&&k.push(y.customClass),k.join(" ")},g=(y,k)=>{const x=y*7+(k-(e.showWeekNumber?1:0))-u.value;return c.value.add(x,"day")},v=y=>{if(!e.rangeState.selecting)return;let k=y.target;if(k.tagName==="SPAN"&&(k=k.parentNode.parentNode),k.tagName==="DIV"&&(k=k.parentNode),k.tagName!=="TD")return;const x=k.parentNode.rowIndex-1,C=k.cellIndex;f.value[x][C].disabled||(x!==o.value||C!==r.value)&&(o.value=x,r.value=C,t.emit("changerange",{selecting:!0,endDate:g(x,C)}))},b=y=>{let k=y.target;for(;k&&k.tagName!=="TD";)k=k.parentNode;if(!k||k.tagName!=="TD")return;const x=k.parentNode.rowIndex-1,C=k.cellIndex,S=f.value[x][C];if(S.disabled||S.type==="week")return;const T=g(x,C);if(e.selectionMode==="range")e.rangeState.selecting?(T>=e.minDate?t.emit("pick",{minDate:e.minDate,maxDate:T}):t.emit("pick",{minDate:T,maxDate:e.minDate}),t.emit("select",!1)):(t.emit("pick",{minDate:T,maxDate:null}),t.emit("select",!0));else if(e.selectionMode==="day")t.emit("pick",T);else if(e.selectionMode==="week"){const A=T.week(),R=`${T.year()}w${A}`;t.emit("pick",{year:T.year(),week:A,value:R,date:T.startOf("week")})}else if(e.selectionMode==="dates"){const A=S.selected?ic(e.parsedValue).filter(R=>R.valueOf()!==T.valueOf()):ic(e.parsedValue).concat([T]);t.emit("pick",A)}},w=y=>{if(e.selectionMode!=="week")return!1;let k=e.date.startOf("day");if(y.type==="prev-month"&&(k=k.subtract(1,"month")),y.type==="next-month"&&(k=k.add(1,"month")),k=k.date(Number.parseInt(y.text,10)),e.parsedValue&&!Array.isArray(e.parsedValue)){const x=(e.parsedValue.day()-a+7)%7-1;return e.parsedValue.subtract(x,"day").isSame(k,"day")}return!1};return{handleMouseMove:v,t:n,rows:f,isWeekActive:w,getCellClasses:m,WEEKS:d,handleClick:b}}}),jpe={key:0};function Gpe(e,t,n,s,o,r){const i=Ne("el-date-picker-cell");return _(),U("table",{cellspacing:"0",cellpadding:"0",class:W(["el-date-table",{"is-week-mode":e.selectionMode==="week"}]),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a)),onMousemove:t[1]||(t[1]=(...a)=>e.handleMouseMove&&e.handleMouseMove(...a))},[q("tbody",null,[q("tr",null,[e.showWeekNumber?(_(),U("th",jpe,He(e.t("el.datepicker.week")),1)):me("v-if",!0),(_(!0),U(lt,null,Zt(e.WEEKS,(a,l)=>(_(),U("th",{key:l},He(e.t("el.datepicker.weeks."+a)),1))),128))]),(_(!0),U(lt,null,Zt(e.rows,(a,l)=>(_(),U("tr",{key:l,class:W(["el-date-table__row",{current:e.isWeekActive(a[1])}])},[(_(!0),U(lt,null,Zt(a,(u,c)=>(_(),U("td",{key:c,class:W(e.getCellClasses(u))},[fe(i,{cell:u},null,8,["cell"])],2))),128))],2))),128))])],34)}var WL=Ye(Upe,[["render",Gpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const Kpe=(e,t,n)=>{const s=Tt().locale(n).startOf("month").month(t).year(e),o=s.daysInMonth();return Vl(o).map(r=>s.add(r,"day").toDate())},qpe=xe({props:{disabledDate:{type:Function},selectionMode:{type:String,default:"month"},minDate:{type:Object},maxDate:{type:Object},date:{type:Object},parsedValue:{type:Object},rangeState:{type:Object,default:()=>({endDate:null,selecting:!1})}},emits:["changerange","pick","select"],setup(e,t){const{t:n,lang:s}=Dn(),o=j(e.date.locale("en").localeData().monthsShort().map(f=>f.toLowerCase())),r=j([[],[],[]]),i=j(null),a=j(null),l=O(()=>{var f;const h=r.value,p=Tt().locale(s.value).startOf("month");for(let m=0;m<3;m++){const g=h[m];for(let v=0;v<4;v++){let b=g[v];b||(b={row:m,column:v,type:"normal",inRange:!1,start:!1,end:!1}),b.type="normal";const w=m*4+v,y=e.date.startOf("year").month(w),k=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate;b.inRange=e.minDate&&y.isSameOrAfter(e.minDate,"month")&&k&&y.isSameOrBefore(k,"month")||e.minDate&&y.isSameOrBefore(e.minDate,"month")&&k&&y.isSameOrAfter(k,"month"),(f=e.minDate)!=null&&f.isSameOrAfter(k)?(b.start=k&&y.isSame(k,"month"),b.end=e.minDate&&y.isSame(e.minDate,"month")):(b.start=e.minDate&&y.isSame(e.minDate,"month"),b.end=k&&y.isSame(k,"month")),p.isSame(y)&&(b.type="today"),b.text=w;const C=y.toDate();b.disabled=e.disabledDate&&e.disabledDate(C),g[v]=b}}return h});return{handleMouseMove:f=>{if(!e.rangeState.selecting)return;let h=f.target;if(h.tagName==="A"&&(h=h.parentNode.parentNode),h.tagName==="DIV"&&(h=h.parentNode),h.tagName!=="TD")return;const p=h.parentNode.rowIndex,m=h.cellIndex;l.value[p][m].disabled||(p!==i.value||m!==a.value)&&(i.value=p,a.value=m,t.emit("changerange",{selecting:!0,endDate:e.date.startOf("year").month(p*4+m)}))},handleMonthTableClick:f=>{let h=f.target;if(h.tagName==="A"&&(h=h.parentNode.parentNode),h.tagName==="DIV"&&(h=h.parentNode),h.tagName!=="TD"||Li(h,"disabled"))return;const p=h.cellIndex,g=h.parentNode.rowIndex*4+p,v=e.date.startOf("year").month(g);e.selectionMode==="range"?e.rangeState.selecting?(v>=e.minDate?t.emit("pick",{minDate:e.minDate,maxDate:v}):t.emit("pick",{minDate:v,maxDate:e.minDate}),t.emit("select",!1)):(t.emit("pick",{minDate:v,maxDate:null}),t.emit("select",!0)):t.emit("pick",g)},rows:l,getCellStyle:f=>{const h={},p=e.date.year(),m=new Date,g=f.text;return h.disabled=e.disabledDate?Kpe(p,g,s.value).every(e.disabledDate):!1,h.current=ic(e.parsedValue).findIndex(v=>v.year()===p&&v.month()===g)>=0,h.today=m.getFullYear()===p&&m.getMonth()===g,f.inRange&&(h["in-range"]=!0,f.start&&(h["start-date"]=!0),f.end&&(h["end-date"]=!0)),h},t:n,months:o}}}),Ype={class:"cell"};function Xpe(e,t,n,s,o,r){return _(),U("table",{class:"el-month-table",onClick:t[0]||(t[0]=(...i)=>e.handleMonthTableClick&&e.handleMonthTableClick(...i)),onMousemove:t[1]||(t[1]=(...i)=>e.handleMouseMove&&e.handleMouseMove(...i))},[q("tbody",null,[(_(!0),U(lt,null,Zt(e.rows,(i,a)=>(_(),U("tr",{key:a},[(_(!0),U(lt,null,Zt(i,(l,u)=>(_(),U("td",{key:u,class:W(e.getCellStyle(l))},[q("div",null,[q("a",Ype,He(e.t("el.datepicker.months."+e.months[l.text])),1)])],2))),128))]))),128))])],32)}var HL=Ye(qpe,[["render",Xpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const Zpe=(e,t)=>{const n=Tt(String(e)).locale(t).startOf("year"),o=n.endOf("year").dayOfYear();return Vl(o).map(r=>n.add(r,"day").toDate())},Jpe=xe({props:{disabledDate:{type:Function},parsedValue:{type:Object},date:{type:Object}},emits:["pick"],setup(e,t){const{lang:n}=Dn();return{startYear:O(()=>Math.floor(e.date.year()/10)*10),getCellStyle:i=>{const a={},l=Tt().locale(n.value);return a.disabled=e.disabledDate?Zpe(i,n.value).every(e.disabledDate):!1,a.current=ic(e.parsedValue).findIndex(u=>u.year()===i)>=0,a.today=l.year()===i,a},handleYearTableClick:i=>{const a=i.target;if(a.tagName==="A"){if(Li(a.parentNode,"disabled"))return;const l=a.textContent||a.innerText;t.emit("pick",Number(l))}}}}}),Qpe={class:"cell"},eme={class:"cell"},tme={class:"cell"},nme={class:"cell"},sme={class:"cell"},ome={class:"cell"},rme={class:"cell"},ime={class:"cell"},ame={class:"cell"},lme={class:"cell"},ume=q("td",null,null,-1),cme=q("td",null,null,-1);function dme(e,t,n,s,o,r){return _(),U("table",{class:"el-year-table",onClick:t[0]||(t[0]=(...i)=>e.handleYearTableClick&&e.handleYearTableClick(...i))},[q("tbody",null,[q("tr",null,[q("td",{class:W(["available",e.getCellStyle(e.startYear+0)])},[q("a",Qpe,He(e.startYear),1)],2),q("td",{class:W(["available",e.getCellStyle(e.startYear+1)])},[q("a",eme,He(e.startYear+1),1)],2),q("td",{class:W(["available",e.getCellStyle(e.startYear+2)])},[q("a",tme,He(e.startYear+2),1)],2),q("td",{class:W(["available",e.getCellStyle(e.startYear+3)])},[q("a",nme,He(e.startYear+3),1)],2)]),q("tr",null,[q("td",{class:W(["available",e.getCellStyle(e.startYear+4)])},[q("a",sme,He(e.startYear+4),1)],2),q("td",{class:W(["available",e.getCellStyle(e.startYear+5)])},[q("a",ome,He(e.startYear+5),1)],2),q("td",{class:W(["available",e.getCellStyle(e.startYear+6)])},[q("a",rme,He(e.startYear+6),1)],2),q("td",{class:W(["available",e.getCellStyle(e.startYear+7)])},[q("a",ime,He(e.startYear+7),1)],2)]),q("tr",null,[q("td",{class:W(["available",e.getCellStyle(e.startYear+8)])},[q("a",ame,He(e.startYear+8),1)],2),q("td",{class:W(["available",e.getCellStyle(e.startYear+9)])},[q("a",lme,He(e.startYear+9),1)],2),ume,cme])])])}var fme=Ye(Jpe,[["render",dme],["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const hme=(e,t,n)=>!0,pme=xe({components:{DateTable:WL,ElInput:yi,ElButton:ii,ElIcon:xt,TimePickPanel:X$,MonthTable:HL,YearTable:fme,DArrowLeft:vy,ArrowLeft:jc,DArrowRight:by,ArrowRight:bi},directives:{clickoutside:Gc},props:{visible:{type:Boolean,default:!1},parsedValue:{type:[Object,Array]},format:{type:String,default:""},type:{type:String,required:!0,validator:XF}},emits:["pick","set-picker-option","panel-change"],setup(e,t){const{t:n,lang:s}=Dn(),o=rt("EP_PICKER_BASE"),r=rt(Ey),{shortcuts:i,disabledDate:a,cellClassName:l,defaultTime:u,arrowControl:c}=o.props,d=qs(o.props,"defaultValue"),f=j(Tt().locale(s.value)),h=O(()=>Tt(u).locale(s.value)),p=O(()=>f.value.month()),m=O(()=>f.value.year()),g=j([]),v=j(null),b=j(null),w=be=>g.value.length>0?hme(be,g.value,e.format||"HH:mm:ss"):!0,y=be=>u&&!Q.value?h.value.year(be.year()).month(be.month()).date(be.date()):J.value?be.millisecond(0):be.startOf("day"),k=(be,...Ie)=>{if(!be)t.emit("pick",be,...Ie);else if(Array.isArray(be)){const ot=be.map(y);t.emit("pick",ot,...Ie)}else t.emit("pick",y(be),...Ie);v.value=null,b.value=null},x=be=>{if(V.value==="day"){let Ie=e.parsedValue?e.parsedValue.year(be.year()).month(be.month()).date(be.date()):be;w(Ie)||(Ie=g.value[0][0].year(be.year()).month(be.month()).date(be.date())),f.value=Ie,k(Ie,J.value)}else V.value==="week"?k(be.date):V.value==="dates"&&k(be,!0)},C=()=>{f.value=f.value.subtract(1,"month"),ge("month")},S=()=>{f.value=f.value.add(1,"month"),ge("month")},T=()=>{R.value==="year"?f.value=f.value.subtract(10,"year"):f.value=f.value.subtract(1,"year"),ge("year")},A=()=>{R.value==="year"?f.value=f.value.add(10,"year"):f.value=f.value.add(1,"year"),ge("year")},R=j("date"),L=O(()=>{const be=n("el.datepicker.year");if(R.value==="year"){const Ie=Math.floor(m.value/10)*10;return be?`${Ie} ${be} - ${Ie+9} ${be}`:`${Ie} - ${Ie+9}`}return`${m.value} ${be}`}),P=be=>{const Ie=typeof be.value=="function"?be.value():be.value;if(Ie){k(Tt(Ie).locale(s.value));return}be.onClick&&be.onClick(t)},V=O(()=>["week","month","year","dates"].includes(e.type)?e.type:"day");We(()=>V.value,be=>{if(["month","year"].includes(be)){R.value=be;return}R.value="date"},{immediate:!0}),We(()=>R.value,()=>{r==null||r.updatePopper()});const H=O(()=>!!i.length),F=be=>{f.value=f.value.startOf("month").month(be),V.value==="month"?k(f.value):R.value="date",ge("month")},M=be=>{V.value==="year"?(f.value=f.value.startOf("year").year(be),k(f.value)):(f.value=f.value.year(be),R.value="month"),ge("year")},B=()=>{R.value="month"},Y=()=>{R.value="year"},J=O(()=>e.type==="datetime"||e.type==="datetimerange"),ee=O(()=>J.value||V.value==="dates"),te=()=>{if(V.value==="dates")k(e.parsedValue);else{let be=e.parsedValue;if(!be){const Ie=Tt(u).locale(s.value),ot=Le();be=Ie.year(ot.year()).month(ot.month()).date(ot.date())}f.value=be,k(be)}},re=()=>{const Ie=Tt().locale(s.value).toDate();(!a||!a(Ie))&&w(Ie)&&(f.value=Tt().locale(s.value),k(f.value))},$e=O(()=>mL(e.format)),se=O(()=>pL(e.format)),Q=O(()=>{if(b.value)return b.value;if(!(!e.parsedValue&&!d.value))return(e.parsedValue||f.value).format($e.value)}),ae=O(()=>{if(v.value)return v.value;if(!(!e.parsedValue&&!d.value))return(e.parsedValue||f.value).format(se.value)}),pe=j(!1),ke=()=>{pe.value=!0},Be=()=>{pe.value=!1},je=(be,Ie,ot)=>{const ve=e.parsedValue?e.parsedValue.hour(be.hour()).minute(be.minute()).second(be.second()):be;f.value=ve,k(f.value,!0),ot||(pe.value=Ie)},qe=be=>{const Ie=Tt(be,$e.value).locale(s.value);Ie.isValid()&&w(Ie)&&(f.value=Ie.year(f.value.year()).month(f.value.month()).date(f.value.date()),b.value=null,pe.value=!1,k(f.value,!0))},ne=be=>{const Ie=Tt(be,se.value).locale(s.value);if(Ie.isValid()){if(a&&a(Ie.toDate()))return;f.value=Ie.hour(f.value.hour()).minute(f.value.minute()).second(f.value.second()),v.value=null,k(f.value,!0)}},ue=be=>Tt.isDayjs(be)&&be.isValid()&&(a?!a(be.toDate()):!0),Se=be=>V.value==="dates"?be.map(Ie=>Ie.format(e.format)):be.format(e.format),Fe=be=>Tt(be,e.format).locale(s.value),Le=()=>{const be=Tt(d.value).locale(s.value);if(!d.value){const Ie=h.value;return Tt().hour(Ie.hour()).minute(Ie.minute()).second(Ie.second()).locale(s.value)}return be},Ke=be=>{const{code:Ie,keyCode:ot}=be,ve=[ct.up,ct.down,ct.left,ct.right];e.visible&&!pe.value&&(ve.includes(Ie)&&(ie(ot),be.stopPropagation(),be.preventDefault()),Ie===ct.enter&&v.value===null&&b.value===null&&k(f,!1))},ie=be=>{const Ie={year:{38:-4,40:4,37:-1,39:1,offset:(ve,Ve)=>ve.setFullYear(ve.getFullYear()+Ve)},month:{38:-4,40:4,37:-1,39:1,offset:(ve,Ve)=>ve.setMonth(ve.getMonth()+Ve)},week:{38:-1,40:1,37:-1,39:1,offset:(ve,Ve)=>ve.setDate(ve.getDate()+Ve*7)},day:{38:-7,40:7,37:-1,39:1,offset:(ve,Ve)=>ve.setDate(ve.getDate()+Ve)}},ot=f.value.toDate();for(;Math.abs(f.value.diff(ot,"year",!0))<1;){const ve=Ie[V.value];if(ve.offset(ot,ve[be]),a&&a(ot))continue;const Ve=Tt(ot).locale(s.value);f.value=Ve,t.emit("pick",Ve,!0);break}},ge=be=>{t.emit("panel-change",f.value.toDate(),be,R.value)};return t.emit("set-picker-option",["isValidValue",ue]),t.emit("set-picker-option",["formatToString",Se]),t.emit("set-picker-option",["parseUserInput",Fe]),t.emit("set-picker-option",["handleKeydown",Ke]),We(()=>d.value,be=>{be&&(f.value=Le())},{immediate:!0}),We(()=>e.parsedValue,be=>{if(be){if(V.value==="dates"||Array.isArray(be))return;f.value=be}else f.value=Le()},{immediate:!0}),{handleTimePick:je,handleTimePickClose:Be,onTimePickerInputFocus:ke,timePickerVisible:pe,visibleTime:Q,visibleDate:ae,showTime:J,changeToNow:re,onConfirm:te,footerVisible:ee,handleYearPick:M,showMonthPicker:B,showYearPicker:Y,handleMonthPick:F,hasShortcuts:H,shortcuts:i,arrowControl:c,disabledDate:a,cellClassName:l,selectionMode:V,handleShortcutClick:P,prevYear_:T,nextYear_:A,prevMonth_:C,nextMonth_:S,innerDate:f,t:n,yearLabel:L,currentView:R,month:p,handleDatePick:x,handleVisibleTimeChange:qe,handleVisibleDateChange:ne,timeFormat:$e,userInputTime:b,userInputDate:v}}}),mme={class:"el-picker-panel__body-wrapper"},gme={key:0,class:"el-picker-panel__sidebar"},vme=["onClick"],bme={class:"el-picker-panel__body"},yme={key:0,class:"el-date-picker__time-header"},wme={class:"el-date-picker__editor-wrap"},kme={class:"el-date-picker__editor-wrap"},xme=["aria-label"],Cme=["aria-label"],$me=["aria-label"],Sme=["aria-label"],Ime={class:"el-picker-panel__content"},Eme={class:"el-picker-panel__footer"};function Tme(e,t,n,s,o,r){const i=Ne("el-input"),a=Ne("time-pick-panel"),l=Ne("d-arrow-left"),u=Ne("el-icon"),c=Ne("arrow-left"),d=Ne("d-arrow-right"),f=Ne("arrow-right"),h=Ne("date-table"),p=Ne("year-table"),m=Ne("month-table"),g=Ne("el-button"),v=Or("clickoutside");return _(),U("div",{class:W(["el-picker-panel el-date-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts,"has-time":e.showTime}]])},[q("div",mme,[Pe(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(_(),U("div",gme,[(_(!0),U(lt,null,Zt(e.shortcuts,(b,w)=>(_(),U("button",{key:w,type:"button",class:"el-picker-panel__shortcut",onClick:y=>e.handleShortcutClick(b)},He(b.text),9,vme))),128))])):me("v-if",!0),q("div",bme,[e.showTime?(_(),U("div",yme,[q("span",wme,[fe(i,{placeholder:e.t("el.datepicker.selectDate"),"model-value":e.visibleDate,size:"small",onInput:t[0]||(t[0]=b=>e.userInputDate=b),onChange:e.handleVisibleDateChange},null,8,["placeholder","model-value","onChange"])]),It((_(),U("span",kme,[fe(i,{placeholder:e.t("el.datepicker.selectTime"),"model-value":e.visibleTime,size:"small",onFocus:e.onTimePickerInputFocus,onInput:t[1]||(t[1]=b=>e.userInputTime=b),onChange:e.handleVisibleTimeChange},null,8,["placeholder","model-value","onFocus","onChange"]),fe(a,{visible:e.timePickerVisible,format:e.timeFormat,"time-arrow-control":e.arrowControl,"parsed-value":e.innerDate,onPick:e.handleTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[v,e.handleTimePickClose]])])):me("v-if",!0),It(q("div",{class:W(["el-date-picker__header",{"el-date-picker__header--bordered":e.currentView==="year"||e.currentView==="month"}])},[q("button",{type:"button","aria-label":e.t("el.datepicker.prevYear"),class:"el-picker-panel__icon-btn el-date-picker__prev-btn d-arrow-left",onClick:t[2]||(t[2]=(...b)=>e.prevYear_&&e.prevYear_(...b))},[fe(u,null,{default:de(()=>[fe(l)]),_:1})],8,xme),It(q("button",{type:"button","aria-label":e.t("el.datepicker.prevMonth"),class:"el-picker-panel__icon-btn el-date-picker__prev-btn arrow-left",onClick:t[3]||(t[3]=(...b)=>e.prevMonth_&&e.prevMonth_(...b))},[fe(u,null,{default:de(()=>[fe(c)]),_:1})],8,Cme),[[cn,e.currentView==="date"]]),q("span",{role:"button",class:"el-date-picker__header-label",onClick:t[4]||(t[4]=(...b)=>e.showYearPicker&&e.showYearPicker(...b))},He(e.yearLabel),1),It(q("span",{role:"button",class:W(["el-date-picker__header-label",{active:e.currentView==="month"}]),onClick:t[5]||(t[5]=(...b)=>e.showMonthPicker&&e.showMonthPicker(...b))},He(e.t(`el.datepicker.month${e.month+1}`)),3),[[cn,e.currentView==="date"]]),q("button",{type:"button","aria-label":e.t("el.datepicker.nextYear"),class:"el-picker-panel__icon-btn el-date-picker__next-btn d-arrow-right",onClick:t[6]||(t[6]=(...b)=>e.nextYear_&&e.nextYear_(...b))},[fe(u,null,{default:de(()=>[fe(d)]),_:1})],8,$me),It(q("button",{type:"button","aria-label":e.t("el.datepicker.nextMonth"),class:"el-picker-panel__icon-btn el-date-picker__next-btn arrow-right",onClick:t[7]||(t[7]=(...b)=>e.nextMonth_&&e.nextMonth_(...b))},[fe(u,null,{default:de(()=>[fe(f)]),_:1})],8,Sme),[[cn,e.currentView==="date"]])],2),[[cn,e.currentView!=="time"]]),q("div",Ime,[e.currentView==="date"?(_(),ye(h,{key:0,"selection-mode":e.selectionMode,date:e.innerDate,"parsed-value":e.parsedValue,"disabled-date":e.disabledDate,onPick:e.handleDatePick},null,8,["selection-mode","date","parsed-value","disabled-date","onPick"])):me("v-if",!0),e.currentView==="year"?(_(),ye(p,{key:1,date:e.innerDate,"disabled-date":e.disabledDate,"parsed-value":e.parsedValue,onPick:e.handleYearPick},null,8,["date","disabled-date","parsed-value","onPick"])):me("v-if",!0),e.currentView==="month"?(_(),ye(m,{key:2,date:e.innerDate,"parsed-value":e.parsedValue,"disabled-date":e.disabledDate,onPick:e.handleMonthPick},null,8,["date","parsed-value","disabled-date","onPick"])):me("v-if",!0)])])]),It(q("div",Eme,[It(fe(g,{size:"small",type:"text",class:"el-picker-panel__link-btn",onClick:e.changeToNow},{default:de(()=>[Yt(He(e.t("el.datepicker.now")),1)]),_:1},8,["onClick"]),[[cn,e.selectionMode!=="dates"]]),fe(g,{plain:"",size:"small",class:"el-picker-panel__link-btn",onClick:e.onConfirm},{default:de(()=>[Yt(He(e.t("el.datepicker.confirm")),1)]),_:1},8,["onClick"])],512),[[cn,e.footerVisible&&e.currentView==="date"]])],2)}var _me=Ye(pme,[["render",Tme],["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const Nme=xe({directives:{clickoutside:Gc},components:{TimePickPanel:X$,DateTable:WL,ElInput:yi,ElButton:ii,ElIcon:xt,DArrowLeft:vy,ArrowLeft:jc,DArrowRight:by,ArrowRight:bi},props:{unlinkPanels:Boolean,parsedValue:{type:Array},type:{type:String,required:!0,validator:XF}},emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,t){const{t:n,lang:s}=Dn(),o=j(Tt().locale(s.value)),r=j(Tt().locale(s.value).add(1,"month")),i=j(null),a=j(null),l=j({min:null,max:null}),u=j({min:null,max:null}),c=O(()=>`${o.value.year()} ${n("el.datepicker.year")} ${n(`el.datepicker.month${o.value.month()+1}`)}`),d=O(()=>`${r.value.year()} ${n("el.datepicker.year")} ${n(`el.datepicker.month${r.value.month()+1}`)}`),f=O(()=>o.value.year()),h=O(()=>o.value.month()),p=O(()=>r.value.year()),m=O(()=>r.value.month()),g=O(()=>!!ot.length),v=O(()=>l.value.min!==null?l.value.min:i.value?i.value.format(x.value):""),b=O(()=>l.value.max!==null?l.value.max:a.value||i.value?(a.value||i.value).format(x.value):""),w=O(()=>u.value.min!==null?u.value.min:i.value?i.value.format(k.value):""),y=O(()=>u.value.max!==null?u.value.max:a.value||i.value?(a.value||i.value).format(k.value):""),k=O(()=>mL(ft)),x=O(()=>pL(ft)),C=()=>{o.value=o.value.subtract(1,"year"),e.unlinkPanels||(r.value=o.value.add(1,"month")),H("year")},S=()=>{o.value=o.value.subtract(1,"month"),e.unlinkPanels||(r.value=o.value.add(1,"month")),H("month")},T=()=>{e.unlinkPanels?r.value=r.value.add(1,"year"):(o.value=o.value.add(1,"year"),r.value=o.value.add(1,"month")),H("year")},A=()=>{e.unlinkPanels?r.value=r.value.add(1,"month"):(o.value=o.value.add(1,"month"),r.value=o.value.add(1,"month")),H("month")},R=()=>{o.value=o.value.add(1,"year"),H("year")},L=()=>{o.value=o.value.add(1,"month"),H("month")},P=()=>{r.value=r.value.subtract(1,"year"),H("year")},V=()=>{r.value=r.value.subtract(1,"month"),H("month")},H=Z=>{t.emit("panel-change",[o.value.toDate(),r.value.toDate()],Z)},F=O(()=>{const Z=(h.value+1)%12,he=h.value+1>=12?1:0;return e.unlinkPanels&&new Date(f.value+he,Z)<new Date(p.value,m.value)}),M=O(()=>e.unlinkPanels&&p.value*12+m.value-(f.value*12+h.value+1)>=12),B=Z=>Array.isArray(Z)&&Z[0]&&Z[1]&&Z[0].valueOf()<=Z[1].valueOf(),Y=j({endDate:null,selecting:!1}),J=O(()=>!(i.value&&a.value&&!Y.value.selecting&&B([i.value,a.value]))),ee=Z=>{Y.value=Z},te=Z=>{Y.value.selecting=Z,Z||(Y.value.endDate=null)},re=O(()=>e.type==="datetime"||e.type==="datetimerange"),$e=(Z=!1)=>{B([i.value,a.value])&&t.emit("pick",[i.value,a.value],Z)},se=(Z,he)=>{if(!!Z)return K?Tt(K[he]||K).locale(s.value).year(Z.year()).month(Z.month()).date(Z.date()):Z},Q=(Z,he=!0)=>{const Te=Z.minDate,bt=Z.maxDate,Lt=se(Te,0),Dt=se(bt,1);a.value===Dt&&i.value===Lt||(t.emit("calendar-change",[Te.toDate(),bt&&bt.toDate()]),a.value=Dt,i.value=Lt,!(!he||re.value)&&$e())},ae=Z=>{const he=typeof Z.value=="function"?Z.value():Z.value;if(he){t.emit("pick",[Tt(he[0]).locale(s.value),Tt(he[1]).locale(s.value)]);return}Z.onClick&&Z.onClick(t)},pe=j(!1),ke=j(!1),Be=()=>{pe.value=!1},je=()=>{ke.value=!1},qe=(Z,he)=>{l.value[he]=Z;const Te=Tt(Z,x.value).locale(s.value);if(Te.isValid()){if(ve&&ve(Te.toDate()))return;he==="min"?(o.value=Te,i.value=(i.value||o.value).year(Te.year()).month(Te.month()).date(Te.date()),e.unlinkPanels||(r.value=Te.add(1,"month"),a.value=i.value.add(1,"month"))):(r.value=Te,a.value=(a.value||r.value).year(Te.year()).month(Te.month()).date(Te.date()),e.unlinkPanels||(o.value=Te.subtract(1,"month"),i.value=a.value.subtract(1,"month")))}},ne=(Z,he)=>{l.value[he]=null},ue=(Z,he)=>{u.value[he]=Z;const Te=Tt(Z,k.value).locale(s.value);Te.isValid()&&(he==="min"?(pe.value=!0,i.value=(i.value||o.value).hour(Te.hour()).minute(Te.minute()).second(Te.second()),(!a.value||a.value.isBefore(i.value))&&(a.value=i.value)):(ke.value=!0,a.value=(a.value||r.value).hour(Te.hour()).minute(Te.minute()).second(Te.second()),r.value=a.value,a.value&&a.value.isBefore(i.value)&&(i.value=a.value)))},Se=(Z,he)=>{u.value[he]=null,he==="min"?(o.value=i.value,pe.value=!1):(r.value=a.value,ke.value=!1)},Fe=(Z,he,Te)=>{u.value.min||(Z&&(o.value=Z,i.value=(i.value||o.value).hour(Z.hour()).minute(Z.minute()).second(Z.second())),Te||(pe.value=he),(!a.value||a.value.isBefore(i.value))&&(a.value=i.value,r.value=Z))},Le=(Z,he,Te)=>{u.value.max||(Z&&(r.value=Z,a.value=(a.value||r.value).hour(Z.hour()).minute(Z.minute()).second(Z.second())),Te||(ke.value=he),a.value&&a.value.isBefore(i.value)&&(i.value=a.value))},Ke=()=>{o.value=be()[0],r.value=o.value.add(1,"month"),t.emit("pick",null)},ie=Z=>Array.isArray(Z)?Z.map(he=>he.format(ft)):Z.format(ft),ge=Z=>Array.isArray(Z)?Z.map(he=>Tt(he,ft).locale(s.value)):Tt(Z,ft).locale(s.value),be=()=>{let Z;if(Array.isArray(G.value)){const he=Tt(G.value[0]);let Te=Tt(G.value[1]);return e.unlinkPanels||(Te=he.add(1,"month")),[he,Te]}else G.value?Z=Tt(G.value):Z=Tt();return Z=Z.locale(s.value),[Z,Z.add(1,"month")]};t.emit("set-picker-option",["isValidValue",B]),t.emit("set-picker-option",["parseUserInput",ge]),t.emit("set-picker-option",["formatToString",ie]),t.emit("set-picker-option",["handleClear",Ke]);const Ie=rt("EP_PICKER_BASE"),{shortcuts:ot,disabledDate:ve,cellClassName:Ve,format:ft,defaultTime:K,arrowControl:E,clearable:I}=Ie.props,G=qs(Ie.props,"defaultValue");return We(()=>G.value,Z=>{if(Z){const he=be();i.value=null,a.value=null,o.value=he[0],r.value=he[1]}},{immediate:!0}),We(()=>e.parsedValue,Z=>{if(Z&&Z.length===2)if(i.value=Z[0],a.value=Z[1],o.value=i.value,e.unlinkPanels&&a.value){const he=i.value.year(),Te=i.value.month(),bt=a.value.year(),Lt=a.value.month();r.value=he===bt&&Te===Lt?a.value.add(1,"month"):a.value}else r.value=o.value.add(1,"month"),a.value&&(r.value=r.value.hour(a.value.hour()).minute(a.value.minute()).second(a.value.second()));else{const he=be();i.value=null,a.value=null,o.value=he[0],r.value=he[1]}},{immediate:!0}),{shortcuts:ot,disabledDate:ve,cellClassName:Ve,minTimePickerVisible:pe,maxTimePickerVisible:ke,handleMinTimeClose:Be,handleMaxTimeClose:je,handleShortcutClick:ae,rangeState:Y,minDate:i,maxDate:a,handleRangePick:Q,onSelect:te,handleChangeRange:ee,btnDisabled:J,enableYearArrow:M,enableMonthArrow:F,rightPrevMonth:V,rightPrevYear:P,rightNextMonth:A,rightNextYear:T,leftPrevMonth:S,leftPrevYear:C,leftNextMonth:L,leftNextYear:R,hasShortcuts:g,leftLabel:c,rightLabel:d,leftDate:o,rightDate:r,showTime:re,t:n,minVisibleDate:v,maxVisibleDate:b,minVisibleTime:w,maxVisibleTime:y,arrowControl:E,handleDateInput:qe,handleDateChange:ne,handleTimeInput:ue,handleTimeChange:Se,handleMinTimePick:Fe,handleMaxTimePick:Le,handleClear:Ke,handleConfirm:$e,timeFormat:k,clearable:I}}}),Ame={class:"el-picker-panel__body-wrapper"},Dme={key:0,class:"el-picker-panel__sidebar"},Rme=["onClick"],Mme={class:"el-picker-panel__body"},Ome={key:0,class:"el-date-range-picker__time-header"},Pme={class:"el-date-range-picker__editors-wrap"},Fme={class:"el-date-range-picker__time-picker-wrap"},Lme={class:"el-date-range-picker__time-picker-wrap"},Bme={class:"el-date-range-picker__editors-wrap is-right"},zme={class:"el-date-range-picker__time-picker-wrap"},Vme={class:"el-date-range-picker__time-picker-wrap"},Wme={class:"el-picker-panel__content el-date-range-picker__content is-left"},Hme={class:"el-date-range-picker__header"},Ume=["disabled"],jme=["disabled"],Gme={class:"el-picker-panel__content el-date-range-picker__content is-right"},Kme={class:"el-date-range-picker__header"},qme=["disabled"],Yme=["disabled"],Xme={key:0,class:"el-picker-panel__footer"};function Zme(e,t,n,s,o,r){const i=Ne("el-input"),a=Ne("time-pick-panel"),l=Ne("arrow-right"),u=Ne("el-icon"),c=Ne("d-arrow-left"),d=Ne("arrow-left"),f=Ne("d-arrow-right"),h=Ne("date-table"),p=Ne("el-button"),m=Or("clickoutside");return _(),U("div",{class:W(["el-picker-panel el-date-range-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts,"has-time":e.showTime}]])},[q("div",Ame,[Pe(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(_(),U("div",Dme,[(_(!0),U(lt,null,Zt(e.shortcuts,(g,v)=>(_(),U("button",{key:v,type:"button",class:"el-picker-panel__shortcut",onClick:b=>e.handleShortcutClick(g)},He(g.text),9,Rme))),128))])):me("v-if",!0),q("div",Mme,[e.showTime?(_(),U("div",Ome,[q("span",Pme,[q("span",Fme,[fe(i,{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),class:"el-date-range-picker__editor","model-value":e.minVisibleDate,onInput:t[0]||(t[0]=g=>e.handleDateInput(g,"min")),onChange:t[1]||(t[1]=g=>e.handleDateChange(g,"min"))},null,8,["disabled","placeholder","model-value"])]),It((_(),U("span",Lme,[fe(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),"model-value":e.minVisibleTime,onFocus:t[2]||(t[2]=g=>e.minTimePickerVisible=!0),onInput:t[3]||(t[3]=g=>e.handleTimeInput(g,"min")),onChange:t[4]||(t[4]=g=>e.handleTimeChange(g,"min"))},null,8,["disabled","placeholder","model-value"]),fe(a,{visible:e.minTimePickerVisible,format:e.timeFormat,"datetime-role":"start","time-arrow-control":e.arrowControl,"parsed-value":e.leftDate,onPick:e.handleMinTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[m,e.handleMinTimeClose]])]),q("span",null,[fe(u,null,{default:de(()=>[fe(l)]),_:1})]),q("span",Bme,[q("span",zme,[fe(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),"model-value":e.maxVisibleDate,readonly:!e.minDate,onInput:t[5]||(t[5]=g=>e.handleDateInput(g,"max")),onChange:t[6]||(t[6]=g=>e.handleDateChange(g,"max"))},null,8,["disabled","placeholder","model-value","readonly"])]),It((_(),U("span",Vme,[fe(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),"model-value":e.maxVisibleTime,readonly:!e.minDate,onFocus:t[7]||(t[7]=g=>e.minDate&&(e.maxTimePickerVisible=!0)),onInput:t[8]||(t[8]=g=>e.handleTimeInput(g,"max")),onChange:t[9]||(t[9]=g=>e.handleTimeChange(g,"max"))},null,8,["disabled","placeholder","model-value","readonly"]),fe(a,{"datetime-role":"end",visible:e.maxTimePickerVisible,format:e.timeFormat,"time-arrow-control":e.arrowControl,"parsed-value":e.rightDate,onPick:e.handleMaxTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[m,e.handleMaxTimeClose]])])])):me("v-if",!0),q("div",Wme,[q("div",Hme,[q("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-left",onClick:t[10]||(t[10]=(...g)=>e.leftPrevYear&&e.leftPrevYear(...g))},[fe(u,null,{default:de(()=>[fe(c)]),_:1})]),q("button",{type:"button",class:"el-picker-panel__icon-btn arrow-left",onClick:t[11]||(t[11]=(...g)=>e.leftPrevMonth&&e.leftPrevMonth(...g))},[fe(u,null,{default:de(()=>[fe(d)]),_:1})]),e.unlinkPanels?(_(),U("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:W([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-right"]),onClick:t[12]||(t[12]=(...g)=>e.leftNextYear&&e.leftNextYear(...g))},[fe(u,null,{default:de(()=>[fe(f)]),_:1})],10,Ume)):me("v-if",!0),e.unlinkPanels?(_(),U("button",{key:1,type:"button",disabled:!e.enableMonthArrow,class:W([{"is-disabled":!e.enableMonthArrow},"el-picker-panel__icon-btn arrow-right"]),onClick:t[13]||(t[13]=(...g)=>e.leftNextMonth&&e.leftNextMonth(...g))},[fe(u,null,{default:de(()=>[fe(l)]),_:1})],10,jme)):me("v-if",!0),q("div",null,He(e.leftLabel),1)]),fe(h,{"selection-mode":"range",date:e.leftDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onPick","onSelect"])]),q("div",Gme,[q("div",Kme,[e.unlinkPanels?(_(),U("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:W([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-left"]),onClick:t[14]||(t[14]=(...g)=>e.rightPrevYear&&e.rightPrevYear(...g))},[fe(u,null,{default:de(()=>[fe(c)]),_:1})],10,qme)):me("v-if",!0),e.unlinkPanels?(_(),U("button",{key:1,type:"button",disabled:!e.enableMonthArrow,class:W([{"is-disabled":!e.enableMonthArrow},"el-picker-panel__icon-btn arrow-left"]),onClick:t[15]||(t[15]=(...g)=>e.rightPrevMonth&&e.rightPrevMonth(...g))},[fe(u,null,{default:de(()=>[fe(d)]),_:1})],10,Yme)):me("v-if",!0),q("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-right",onClick:t[16]||(t[16]=(...g)=>e.rightNextYear&&e.rightNextYear(...g))},[fe(u,null,{default:de(()=>[fe(f)]),_:1})]),q("button",{type:"button",class:"el-picker-panel__icon-btn arrow-right",onClick:t[17]||(t[17]=(...g)=>e.rightNextMonth&&e.rightNextMonth(...g))},[fe(u,null,{default:de(()=>[fe(l)]),_:1})]),q("div",null,He(e.rightLabel),1)]),fe(h,{"selection-mode":"range",date:e.rightDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onPick","onSelect"])])])]),e.showTime?(_(),U("div",Xme,[e.clearable?(_(),ye(p,{key:0,size:"small",type:"text",class:"el-picker-panel__link-btn",onClick:e.handleClear},{default:de(()=>[Yt(He(e.t("el.datepicker.clear")),1)]),_:1},8,["onClick"])):me("v-if",!0),fe(p,{plain:"",size:"small",class:"el-picker-panel__link-btn",disabled:e.btnDisabled,onClick:t[18]||(t[18]=g=>e.handleConfirm(!1))},{default:de(()=>[Yt(He(e.t("el.datepicker.confirm")),1)]),_:1},8,["disabled"])])):me("v-if",!0)],2)}var Jme=Ye(Nme,[["render",Zme],["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const Qme=xe({components:{MonthTable:HL,ElIcon:xt,DArrowLeft:vy,DArrowRight:by},props:{unlinkPanels:Boolean,parsedValue:{type:Array}},emits:["pick","set-picker-option"],setup(e,t){const{t:n,lang:s}=Dn(),o=j(Tt().locale(s.value)),r=j(Tt().locale(s.value).add(1,"year")),i=O(()=>!!L.length),a=F=>{const M=typeof F.value=="function"?F.value():F.value;if(M){t.emit("pick",[Tt(M[0]).locale(s.value),Tt(M[1]).locale(s.value)]);return}F.onClick&&F.onClick(t)},l=()=>{o.value=o.value.subtract(1,"year"),e.unlinkPanels||(r.value=r.value.subtract(1,"year"))},u=()=>{e.unlinkPanels||(o.value=o.value.add(1,"year")),r.value=r.value.add(1,"year")},c=()=>{o.value=o.value.add(1,"year")},d=()=>{r.value=r.value.subtract(1,"year")},f=O(()=>`${o.value.year()} ${n("el.datepicker.year")}`),h=O(()=>`${r.value.year()} ${n("el.datepicker.year")}`),p=O(()=>o.value.year()),m=O(()=>r.value.year()===o.value.year()?o.value.year()+1:r.value.year()),g=O(()=>e.unlinkPanels&&m.value>p.value+1),v=j(null),b=j(null),w=j({endDate:null,selecting:!1}),y=F=>{w.value=F},k=(F,M=!0)=>{const B=F.minDate,Y=F.maxDate;b.value===Y&&v.value===B||(b.value=Y,v.value=B,M&&C())},x=F=>Array.isArray(F)&&F&&F[0]&&F[1]&&F[0].valueOf()<=F[1].valueOf(),C=(F=!1)=>{x([v.value,b.value])&&t.emit("pick",[v.value,b.value],F)},S=F=>{w.value.selecting=F,F||(w.value.endDate=null)},T=F=>F.map(M=>M.format(V)),A=()=>{let F;if(Array.isArray(H.value)){const M=Tt(H.value[0]);let B=Tt(H.value[1]);return e.unlinkPanels||(B=M.add(1,"year")),[M,B]}else H.value?F=Tt(H.value):F=Tt();return F=F.locale(s.value),[F,F.add(1,"year")]};t.emit("set-picker-option",["formatToString",T]);const R=rt("EP_PICKER_BASE"),{shortcuts:L,disabledDate:P,format:V}=R.props,H=qs(R.props,"defaultValue");return We(()=>H.value,F=>{if(F){const M=A();o.value=M[0],r.value=M[1]}},{immediate:!0}),We(()=>e.parsedValue,F=>{if(F&&F.length===2)if(v.value=F[0],b.value=F[1],o.value=v.value,e.unlinkPanels&&b.value){const M=v.value.year(),B=b.value.year();r.value=M===B?b.value.add(1,"year"):b.value}else r.value=o.value.add(1,"year");else{const M=A();v.value=null,b.value=null,o.value=M[0],r.value=M[1]}},{immediate:!0}),{shortcuts:L,disabledDate:P,onSelect:S,handleRangePick:k,rangeState:w,handleChangeRange:y,minDate:v,maxDate:b,enableYearArrow:g,leftLabel:f,rightLabel:h,leftNextYear:c,leftPrevYear:l,rightNextYear:u,rightPrevYear:d,t:n,leftDate:o,rightDate:r,hasShortcuts:i,handleShortcutClick:a}}}),ege={class:"el-picker-panel__body-wrapper"},tge={key:0,class:"el-picker-panel__sidebar"},nge=["onClick"],sge={class:"el-picker-panel__body"},oge={class:"el-picker-panel__content el-date-range-picker__content is-left"},rge={class:"el-date-range-picker__header"},ige=["disabled"],age={class:"el-picker-panel__content el-date-range-picker__content is-right"},lge={class:"el-date-range-picker__header"},uge=["disabled"];function cge(e,t,n,s,o,r){const i=Ne("d-arrow-left"),a=Ne("el-icon"),l=Ne("d-arrow-right"),u=Ne("month-table");return _(),U("div",{class:W(["el-picker-panel el-date-range-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts}]])},[q("div",ege,[Pe(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(_(),U("div",tge,[(_(!0),U(lt,null,Zt(e.shortcuts,(c,d)=>(_(),U("button",{key:d,type:"button",class:"el-picker-panel__shortcut",onClick:f=>e.handleShortcutClick(c)},He(c.text),9,nge))),128))])):me("v-if",!0),q("div",sge,[q("div",oge,[q("div",rge,[q("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-left",onClick:t[0]||(t[0]=(...c)=>e.leftPrevYear&&e.leftPrevYear(...c))},[fe(a,null,{default:de(()=>[fe(i)]),_:1})]),e.unlinkPanels?(_(),U("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:W([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-right"]),onClick:t[1]||(t[1]=(...c)=>e.leftNextYear&&e.leftNextYear(...c))},[fe(a,null,{default:de(()=>[fe(l)]),_:1})],10,ige)):me("v-if",!0),q("div",null,He(e.leftLabel),1)]),fe(u,{"selection-mode":"range",date:e.leftDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onPick","onSelect"])]),q("div",age,[q("div",lge,[e.unlinkPanels?(_(),U("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:W([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-left"]),onClick:t[2]||(t[2]=(...c)=>e.rightPrevYear&&e.rightPrevYear(...c))},[fe(a,null,{default:de(()=>[fe(i)]),_:1})],10,uge)):me("v-if",!0),q("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-right",onClick:t[3]||(t[3]=(...c)=>e.rightNextYear&&e.rightNextYear(...c))},[fe(a,null,{default:de(()=>[fe(l)]),_:1})]),q("div",null,He(e.rightLabel),1)]),fe(u,{"selection-mode":"range",date:e.rightDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onPick","onSelect"])])])])],2)}var dge=Ye(Qme,[["render",cge],["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);Tt.extend(J4);Tt.extend(Fpe);Tt.extend(q$);Tt.extend(Lpe);Tt.extend(Bpe);Tt.extend(zpe);Tt.extend(Vpe);Tt.extend(Wpe);const fge=function(e){return e==="daterange"||e==="datetimerange"?Jme:e==="monthrange"?dge:_me};var hge=xe({name:"ElDatePicker",install:null,props:nt(Me({},Y$),{type:{type:String,default:"date"}}),emits:["update:modelValue"],setup(e,t){Gt("ElPopperOptions",e.popperOptions),Gt(VL,{ctx:t});const n=j(null),s=nt(Me({},e),{focus:(o=!0)=>{var r;(r=n.value)==null||r.focus(o)}});return t.expose(s),()=>{var o;const r=(o=e.format)!=null?o:ede[e.type]||Lh;return at(eL,nt(Me({},e),{format:r,type:e.type,ref:n,"onUpdate:modelValue":i=>t.emit("update:modelValue",i)}),{default:i=>at(fge(e.type),i),"range-separator":()=>Pe(t.slots,"range-separator")})}}});const Sv=hge;Sv.install=e=>{e.component(Sv.name,Sv)};const pge=Sv,eS="elDescriptions";var ED=xe({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:rt(eS,{})}},render(){var e,t,n,s,o,r;const i=Iie(this.cell),{border:a,direction:l}=this.descriptions,u=l==="vertical",c=((n=(t=(e=this.cell)==null?void 0:e.children)==null?void 0:t.label)==null?void 0:n.call(t))||i.label,d=(r=(o=(s=this.cell)==null?void 0:s.children)==null?void 0:o.default)==null?void 0:r.call(o),f=i.span,h=i.align?`is-${i.align}`:"",p=i.labelAlign?`is-${i.labelAlign}`:h,m=i.className,g=i.labelClassName,v={width:Wi(i.width),minWidth:Wi(i.minWidth)},b=Xe("descriptions");switch(this.type){case"label":return at(this.tag,{style:v,class:[b.e("cell"),b.e("label"),b.is("bordered-label",a),b.is("vertical-label",u),p,g],colSpan:u?f:1},c);case"content":return at(this.tag,{style:v,class:[b.e("cell"),b.e("content"),b.is("bordered-content",a),b.is("vertical-content",u),h,m],colSpan:u?f:f*2-1},d);default:return at("td",{style:v,class:[b.e("cell"),h],colSpan:f},[at("span",{class:[b.e("label"),g]},c),at("span",{class:[b.e("content"),m]},d)])}}});const mge=xe({name:"ElDescriptionsRow",components:{[ED.name]:ED},props:{row:{type:Array}},setup(){return{descriptions:rt(eS,{})}}}),gge={key:1};function vge(e,t,n,s,o,r){const i=Ne("el-descriptions-cell");return e.descriptions.direction==="vertical"?(_(),U(lt,{key:0},[q("tr",null,[(_(!0),U(lt,null,Zt(e.row,(a,l)=>(_(),ye(i,{key:`tr1-${l}`,cell:a,tag:"th",type:"label"},null,8,["cell"]))),128))]),q("tr",null,[(_(!0),U(lt,null,Zt(e.row,(a,l)=>(_(),ye(i,{key:`tr2-${l}`,cell:a,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(_(),U("tr",gge,[(_(!0),U(lt,null,Zt(e.row,(a,l)=>(_(),U(lt,{key:`tr3-${l}`},[e.descriptions.border?(_(),U(lt,{key:0},[fe(i,{cell:a,tag:"td",type:"label"},null,8,["cell"]),fe(i,{cell:a,tag:"td",type:"content"},null,8,["cell"])],64)):(_(),ye(i,{key:1,cell:a,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}var TD=Ye(mge,[["render",vge],["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const bge=xe({name:"ElDescriptions",components:{[TD.name]:TD},props:{border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,default:"horizontal"},size:{type:String,validator:Pr},title:{type:String,default:""},extra:{type:String,default:""}},setup(e,{slots:t}){Gt(eS,e);const n=Ls(),s=Xe("descriptions"),o=O(()=>[s.b(),s.is(s.m(n.value),!!n.value)]),r=l=>{const u=Array.isArray(l)?l:[l],c=[];return u.forEach(d=>{Array.isArray(d.children)?c.push(...r(d.children)):c.push(d)}),c},i=(l,u,c,d=!1)=>(l.props||(l.props={}),u>c&&(l.props.span=c),d&&(l.props.span=u),l);return{descriptionKls:o,getRows:()=>{var l;const u=r((l=t.default)==null?void 0:l.call(t)).filter(p=>{var m;return((m=p==null?void 0:p.type)==null?void 0:m.name)==="ElDescriptionsItem"}),c=[];let d=[],f=e.column,h=0;return u.forEach((p,m)=>{var g;const v=((g=p.props)==null?void 0:g.span)||1;if(m<u.length-1&&(h+=v>f?f:v),m===u.length-1){const b=e.column-h%e.column;d.push(i(p,b,f,!0)),c.push(d);return}v<f?(f-=v,d.push(p)):(d.push(i(p,v,f)),c.push(d),f=e.column,d=[])}),c},ns:s}}});function yge(e,t,n,s,o,r){const i=Ne("el-descriptions-row");return _(),U("div",{class:W(e.descriptionKls)},[e.title||e.extra||e.$slots.title||e.$slots.extra?(_(),U("div",{key:0,class:W(e.ns.e("header"))},[q("div",{class:W(e.ns.e("title"))},[Pe(e.$slots,"title",{},()=>[Yt(He(e.title),1)])],2),q("div",{class:W(e.ns.e("extra"))},[Pe(e.$slots,"extra",{},()=>[Yt(He(e.extra),1)])],2)],2)):me("v-if",!0),q("div",{class:W(e.ns.e("body"))},[q("table",{class:W([e.ns.e("table"),e.ns.is("bordered",e.border)])},[q("tbody",null,[(_(!0),U(lt,null,Zt(e.getRows(),(a,l)=>(_(),ye(i,{key:l,row:a},null,8,["row"]))),128))])],2)],2)],2)}var wge=Ye(bge,[["render",yge],["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/index.vue"]]),UL=xe({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const kge=Kt(wge,{DescriptionsItem:UL}),xge=ws(UL),Cge=pt({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Qe([String,Array,Object])},zIndex:{type:Qe([String,Number])}}),$ge={click:e=>e instanceof MouseEvent};var Sge=xe({name:"ElOverlay",props:Cge,emits:$ge,setup(e,{slots:t,emit:n}){const s=Xe("overlay"),o=l=>{n("click",l)},{onClick:r,onMousedown:i,onMouseup:a}=O$(e.customMaskEvent?void 0:o);return()=>e.mask?fe("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:i,onMouseup:a},[Pe(t,"default")],qr.STYLE|qr.CLASS|qr.PROPS,["onClick","onMouseup","onMousedown"]):at("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Pe(t,"default")])}});const tS=Sge,jL=pt({center:{type:Boolean,default:!1},closeIcon:{type:Mo,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ige={close:()=>!0},Ege=["aria-label"],Tge={name:"ElDialogContent"},_ge=xe(nt(Me({},Tge),{props:jL,emits:Ige,setup(e){const{Close:t}=kie,{dialogRef:n,headerRef:s,ns:o,style:r}=rt(r4);return(i,a)=>(_(),U("div",{ref_key:"dialogRef",ref:n,class:W([N(o).b(),N(o).is("fullscreen",i.fullscreen),N(o).is("draggable",i.draggable),{[N(o).m("center")]:i.center},i.customClass]),"aria-modal":"true",role:"dialog","aria-label":i.title||"dialog",style:it(N(r)),onClick:a[1]||(a[1]=wt(()=>{},["stop"]))},[q("div",{ref_key:"headerRef",ref:s,class:W(N(o).e("header"))},[Pe(i.$slots,"title",{},()=>[q("span",{class:W(N(o).e("title"))},He(i.title),3)])],2),q("div",{class:W(N(o).e("body"))},[Pe(i.$slots,"default")],2),i.$slots.footer?(_(),U("div",{key:0,class:W(N(o).e("footer"))},[Pe(i.$slots,"footer")],2)):me("v-if",!0),i.showClose?(_(),U("button",{key:1,"aria-label":"close",class:W(N(o).e("headerbtn")),type:"button",onClick:a[0]||(a[0]=l=>i.$emit("close"))},[fe(N(xt),{class:W(N(o).e("close"))},{default:de(()=>[(_(),ye(an(i.closeIcon||N(t))))]),_:1},8,["class"])],2)):me("v-if",!0)],14,Ege))}}));var Nge=Ye(_ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const GL=pt(nt(Me({},jL),{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Qe(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}})),KL={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ht]:e=>No(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},qL=(e,t)=>{const s=jt().emit,{nextZIndex:o}=al();let r="";const i=j(!1),a=j(!1),l=j(!1),u=j(e.zIndex||o());let c,d;const f=O(()=>mn(e.width)?`${e.width}px`:e.width),h=O(()=>{const C={},S="--el-dialog";return e.fullscreen||(e.top&&(C[`${S}-margin-top`]=e.top),e.width&&(C[`${S}-width`]=f.value)),C});function p(){s("opened")}function m(){s("closed"),s(Ht,!1),e.destroyOnClose&&(l.value=!1)}function g(){s("close")}function v(){d==null||d(),c==null||c(),e.openDelay&&e.openDelay>0?{stop:c}=yc(()=>k(),e.openDelay):k()}function b(){c==null||c(),d==null||d(),e.closeDelay&&e.closeDelay>0?{stop:d}=yc(()=>x(),e.closeDelay):x()}function w(){function C(S){S||(a.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(C):b()}function y(){e.closeOnClickModal&&w()}function k(){!sn||(i.value=!0)}function x(){i.value=!1}return e.lockScroll&&g4(i),e.closeOnPressEscape&&v4({handleClose:w},i),b4(i),We(()=>e.modelValue,C=>{C?(a.value=!1,v(),l.value=!0,s("open"),u.value=e.zIndex?u.value++:o(),vt(()=>{t.value&&(t.value.scrollTop=0)})):i.value&&b()}),We(()=>e.fullscreen,C=>{!t.value||(C?(r=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=r)}),Ft(()=>{e.modelValue&&(i.value=!0,l.value=!0,v())}),{afterEnter:p,afterLeave:m,beforeLeave:g,handleClose:w,onModalClick:y,close:b,doClose:x,closed:a,style:h,rendered:l,visible:i,zIndex:u}},Age={name:"ElDialog"},Dge=xe(nt(Me({},Age),{props:GL,emits:KL,setup(e,{expose:t}){const n=e,s=Xe("dialog"),o=j(),r=j(),{visible:i,style:a,rendered:l,zIndex:u,afterEnter:c,afterLeave:d,beforeLeave:f,handleClose:h,onModalClick:p}=qL(n,o);Gt(r4,{dialogRef:o,headerRef:r,ns:s,rendered:l,style:a});const m=O$(p),g=O(()=>n.draggable&&!n.fullscreen);return m4(o,r,g),t({visible:i}),(v,b)=>(_(),ye(pm,{to:"body",disabled:!v.appendToBody},[fe(Rs,{name:"dialog-fade",onAfterEnter:N(c),onAfterLeave:N(d),onBeforeLeave:N(f)},{default:de(()=>[It(fe(N(tS),{"custom-mask-event":"",mask:v.modal,"overlay-class":v.modalClass,"z-index":N(u)},{default:de(()=>[q("div",{class:W(`${N(s).namespace.value}-overlay-dialog`),onClick:b[0]||(b[0]=(...w)=>N(m).onClick&&N(m).onClick(...w)),onMousedown:b[1]||(b[1]=(...w)=>N(m).onMousedown&&N(m).onMousedown(...w)),onMouseup:b[2]||(b[2]=(...w)=>N(m).onMouseup&&N(m).onMouseup(...w))},[N(l)?(_(),ye(Nge,{key:0,"custom-class":v.customClass,center:v.center,"close-icon":v.closeIcon,draggable:N(g),fullscreen:v.fullscreen,"show-close":v.showClose,style:it(N(a)),title:v.title,onClose:N(h)},Yl({title:de(()=>[Pe(v.$slots,"title")]),default:de(()=>[Pe(v.$slots,"default")]),_:2},[v.$slots.footer?{name:"footer",fn:de(()=>[Pe(v.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","style","title","onClose"])):me("v-if",!0)],34)]),_:3},8,["mask","overlay-class","z-index"]),[[cn,N(i)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}}));var Rge=Ye(Dge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Mge=Kt(Rge),Oge=pt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Qe(String),default:"solid"}}),Pge={name:"ElDivider"},Fge=xe(nt(Me({},Pge),{props:Oge,setup(e){const t=e,n=Xe("divider"),s=O(()=>({"--el-border-style":t.borderStyle}));return(o,r)=>(_(),U("div",{class:W([N(n).b(),N(n).m(o.direction)]),style:it(N(s))},[o.$slots.default&&o.direction!=="vertical"?(_(),U("div",{key:0,class:W([N(n).e("text"),N(n).is(o.contentPosition)])},[Pe(o.$slots,"default")],2)):me("v-if",!0)],6))}}));var Lge=Ye(Fge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const Bge=Kt(Lge),zge=pt(nt(Me({},GL),{direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}})),Vge=KL,Wge=xe({name:"ElDrawer",components:{ElOverlay:tS,ElIcon:xt,Close:ci},directives:{TrapFocus:nL},props:zge,emits:Vge,setup(e,t){const n=j(),s=Xe("drawer"),o=O(()=>e.direction==="rtl"||e.direction==="ltr"),r=O(()=>typeof e.size=="number"?`${e.size}px`:e.size);return nt(Me({},qL(e,t,n)),{drawerRef:n,isHorizontal:o,drawerSize:r,ns:s})}}),Hge=["aria-labelledby","aria-label"],Uge=["id"],jge=["title"],Gge=["aria-label"];function Kge(e,t,n,s,o,r){const i=Ne("close"),a=Ne("el-icon"),l=Ne("el-overlay"),u=Or("trap-focus");return _(),ye(pm,{to:"body",disabled:!e.appendToBody},[fe(Rs,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave},{default:de(()=>[It(fe(l,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:de(()=>[It((_(),U("div",{ref:"drawerRef","aria-modal":"true","aria-labelledby":e.ns.e("title"),"aria-label":e.title,class:W([e.ns.b(),e.direction,e.visible&&"open",e.customClass]),style:it(e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize),role:"dialog",onClick:t[1]||(t[1]=wt(()=>{},["stop"]))},[e.withHeader?(_(),U("header",{key:0,id:e.ns.e("title"),class:W(e.ns.e("header"))},[Pe(e.$slots,"title",{},()=>[q("span",{role:"heading",title:e.title},He(e.title),9,jge)]),e.showClose?(_(),U("button",{key:0,"aria-label":"close "+(e.title||"drawer"),class:W(e.ns.e("close-btn")),type:"button",onClick:t[0]||(t[0]=(...c)=>e.handleClose&&e.handleClose(...c))},[fe(a,{class:W(e.ns.e("close"))},{default:de(()=>[fe(i)]),_:1},8,["class"])],10,Gge)):me("v-if",!0)],10,Uge)):me("v-if",!0),e.rendered?(_(),U("section",{key:1,class:W(e.ns.e("body"))},[Pe(e.$slots,"default")],2)):me("v-if",!0),e.$slots.footer?(_(),U("div",{key:2,class:W(e.ns.e("footer"))},[Pe(e.$slots,"footer")],2)):me("v-if",!0)],14,Hge)),[[u]])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[cn,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var qge=Ye(Wge,[["render",Kge],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Yge=Kt(qge),YL=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},_D=(e,t)=>{for(const n of e)if(!Xge(n,t))return n},Xge=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},Zge=e=>{const t=YL(e),n=_D(t,e),s=_D(t.reverse(),e);return[n,s]},Jge=e=>e instanceof HTMLInputElement&&"select"in e,Bu=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Jge(e)&&t&&e.select()}};function ND(e,t){const n=[...e],s=e.indexOf(t);return s!==-1&&n.splice(s,1),n}const Qge=()=>{let e=[];return{push:s=>{const o=e[0];o&&s!==o&&o.pause(),e=ND(e,s),e.unshift(s)},remove:s=>{var o,r;e=ND(e,s),(r=(o=e[0])==null?void 0:o.resume)==null||r.call(o)}}},e0e=(e,t=!1)=>{const n=document.activeElement;for(const s of e)if(Bu(s,t),document.activeElement!==n)return},AD=Qge(),E2="focus-trap.focus-on-mount",T2="focus-trap.focus-on-unmount",DD={cancelable:!0,bubbles:!1},RD="mountOnFocus",MD="unmountOnFocus",XL=Symbol("elFocusTrap"),t0e=xe({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean},emits:[RD,MD],setup(e,{emit:t}){const n=j(),s=j(null);let o,r;const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=h=>{if(!e.loop&&!e.trapped||i.paused)return;const{key:p,altKey:m,ctrlKey:g,metaKey:v,currentTarget:b,shiftKey:w}=h,{loop:y}=e,k=p===ct.tab&&!m&&!g&&!v,x=document.activeElement;if(k&&x){const C=b,[S,T]=Zge(C);S&&T?!w&&x===T?(h.preventDefault(),y&&Bu(S,!0)):w&&x===S&&(h.preventDefault(),y&&Bu(T,!0)):x===C&&h.preventDefault()}};Gt(XL,{focusTrapRef:s,onKeydown:a});const l=h=>{t(RD,h)},u=h=>t(MD,h),c=h=>{const p=N(s);if(i.paused||!p)return;const m=h.target;m&&p.contains(m)?r=m:Bu(r,!0)},d=h=>{const p=N(s);i.paused||!p||p.contains(h.relatedTarget)||Bu(r,!0)},f=()=>{document.removeEventListener("focusin",c),document.removeEventListener("focusout",d)};return Ft(()=>{const h=N(s);if(h){AD.push(i);const p=document.activeElement;if(o=p,!h.contains(p)){const g=new Event(E2,DD);h.addEventListener(E2,l),h.dispatchEvent(g),g.defaultPrevented||vt(()=>{e0e(YL(h),!0),document.activeElement===p&&Bu(h)})}}We(()=>e.trapped,p=>{p?(document.addEventListener("focusin",c),document.addEventListener("focusout",d)):f()},{immediate:!0})}),qn(()=>{f();const h=N(s);if(h){h.removeEventListener(E2,l);const p=new Event(T2,DD);h.addEventListener(T2,u),h.dispatchEvent(p),p.defaultPrevented||Bu(o!=null?o:document.body,!0),h.removeEventListener(T2,l),AD.remove(i)}}),{focusTrapRef:n,forwardRef:s,onKeydown:a}}});function n0e(e,t,n,s,o,r){return Pe(e.$slots,"default")}var s0e=Ye(t0e,[["render",n0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const o0e=xe({inheritAttrs:!1});function r0e(e,t,n,s,o,r){return Pe(e.$slots,"default")}var i0e=Ye(o0e,[["render",r0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const a0e=xe({name:"ElCollectionItem",inheritAttrs:!1});function l0e(e,t,n,s,o,r){return Pe(e.$slots,"default")}var u0e=Ye(a0e,[["render",l0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const ZL="data-el-collection-item",JL=e=>{const t=`El${e}Collection`,n=`${t}Item`,s=Symbol(t),o=Symbol(n),r=nt(Me({},i0e),{name:t,setup(){const a=j(null),l=new Map;Gt(s,{itemMap:l,getItems:()=>{const c=N(a);if(!c)return[];const d=Array.from(c.querySelectorAll(`[${ZL}]`));return[...l.values()].sort((p,m)=>d.indexOf(p.ref)-d.indexOf(m.ref))},collectionRef:a})}}),i=nt(Me({},u0e),{name:n,setup(a,{attrs:l}){const u=j(null),c=rt(s,void 0);Gt(o,{collectionItemRef:u}),Ft(()=>{const d=N(u);d&&c.itemMap.set(d,Me({ref:d},l))}),qn(()=>{const d=N(u);c.itemMap.delete(d)})}});return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:r,ElCollectionItem:i}},c0e=pt({style:{type:Qe([String,Array,Object])},currentTabId:{type:Qe(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Qe(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:d0e,ElCollectionItem:f0e,COLLECTION_INJECTION_KEY:nS,COLLECTION_ITEM_INJECTION_KEY:h0e}=JL("RovingFocusGroup"),sS=Symbol("elRovingFocusGroup"),QL=Symbol("elRovingFocusGroupItem"),p0e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},m0e=(e,t)=>{if(t!=="rtl")return e;switch(e){case ct.right:return ct.left;case ct.left:return ct.right;default:return e}},g0e=(e,t,n)=>{const s=m0e(e.key,n);if(!(t==="vertical"&&[ct.left,ct.right].includes(s))&&!(t==="horizontal"&&[ct.up,ct.down].includes(s)))return p0e[s]},v0e=(e,t)=>e.map((n,s)=>e[(s+t)%e.length]),oS=e=>{const{activeElement:t}=document;for(const n of e)if(n===t||(n.focus(),t!==document.activeElement))return},OD="currentTabIdChange",_2="rovingFocusGroup.entryFocus",b0e={bubbles:!1,cancelable:!0},y0e=xe({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:c0e,emits:[OD,"entryFocus"],setup(e,{emit:t}){var n;const s=j((n=e.currentTabId||e.defaultCurrentTabId)!=null?n:null),o=j(!1),r=j(!1),i=j(null),{getItems:a}=rt(nS,void 0),l=O(()=>[{outline:"none"},e.style]),u=m=>{t(OD,m)},c=()=>{o.value=!0},d=ms(m=>{var g;(g=e.onMousedown)==null||g.call(e,m)},()=>{r.value=!0}),f=ms(m=>{var g;(g=e.onFocus)==null||g.call(e,m)},m=>{const g=!N(r),{target:v,currentTarget:b}=m;if(v===b&&g&&!N(o)){const w=new Event(_2,b0e);if(b==null||b.dispatchEvent(w),!w.defaultPrevented){const y=a().filter(T=>T.focusable),k=y.find(T=>T.active),x=y.find(T=>T.id===N(s)),S=[k,x,...y].filter(Boolean).map(T=>T.ref);oS(S)}}r.value=!1}),h=ms(m=>{var g;(g=e.onBlur)==null||g.call(e,m)},()=>{o.value=!1}),p=(...m)=>{t("entryFocus",...m)};Gt(sS,{currentTabbedId:um(s),loop:qs(e,"loop"),tabIndex:O(()=>N(o)?-1:0),rovingFocusGroupRef:i,rovingFocusGroupRootStyle:l,orientation:qs(e,"orientation"),dir:qs(e,"dir"),onItemFocus:u,onItemShiftTab:c,onBlur:h,onFocus:f,onMousedown:d}),We(()=>e.currentTabId,m=>{s.value=m!=null?m:null}),Ft(()=>{const m=N(i);ts(m,_2,p)}),qn(()=>{const m=N(i);Ss(m,_2,p)})}});function w0e(e,t,n,s,o,r){return Pe(e.$slots,"default")}var k0e=Ye(y0e,[["render",w0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const x0e=xe({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:d0e,ElRovingFocusGroupImpl:k0e}});function C0e(e,t,n,s,o,r){const i=Ne("el-roving-focus-group-impl"),a=Ne("el-focus-group-collection");return _(),ye(a,null,{default:de(()=>[fe(i,Oi(ql(e.$attrs)),{default:de(()=>[Pe(e.$slots,"default")]),_:3},16)]),_:3})}var $0e=Ye(x0e,[["render",C0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const S0e=xe({components:{ElRovingFocusCollectionItem:f0e},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:t}){const{currentTabbedId:n,loop:s,onItemFocus:o,onItemShiftTab:r}=rt(sS,void 0),{getItems:i}=rt(nS,void 0),a=P$(),l=j(null),u=ms(h=>{t("mousedown",h)},h=>{e.focusable?o(N(a)):h.preventDefault()}),c=ms(h=>{t("focus",h)},()=>{o(N(a))}),d=ms(h=>{t("keydown",h)},h=>{const{key:p,shiftKey:m,target:g,currentTarget:v}=h;if(p===ct.tab&&m){r();return}if(g!==v)return;const b=g0e(h);if(b){h.preventDefault();let y=i().filter(k=>k.focusable).map(k=>k.ref);switch(b){case"last":{y.reverse();break}case"prev":case"next":{b==="prev"&&y.reverse();const k=y.indexOf(v);y=s.value?v0e(y,k+1):y.slice(k+1);break}}vt(()=>{oS(y)})}}),f=O(()=>n.value===N(a));return Gt(QL,{rovingFocusGroupItemRef:l,tabIndex:O(()=>N(f)?0:-1),handleMousedown:u,handleFocus:c,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:c,handleMousedown:u}}});function I0e(e,t,n,s,o,r){const i=Ne("el-roving-focus-collection-item");return _(),ye(i,{id:e.id,focusable:e.focusable,active:e.active},{default:de(()=>[Pe(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var E0e=Ye(S0e,[["render",I0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const Iv=pt({trigger:Fp.trigger,effect:nt(Me({},Eo.effect),{default:"light"}),type:{type:Qe(String)},placement:{type:Qe(String),default:"bottom"},popperOptions:{type:Qe(Object),default:()=>({})},size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Qe([Number,String]),default:0},maxHeight:{type:Qe([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},buttonProps:{type:Qe(Object)}}),eB=pt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Mo}}),T0e=pt({onKeydown:{type:Qe(Function)}}),_0e=[ct.down,ct.pageDown,ct.home],tB=[ct.up,ct.pageUp,ct.end],N0e=[..._0e,...tB],{ElCollection:A0e,ElCollectionItem:D0e,COLLECTION_INJECTION_KEY:R0e,COLLECTION_ITEM_INJECTION_KEY:M0e}=JL("Dropdown"),rS=Symbol("elDropdown"),{ButtonGroup:O0e}=ii,P0e=xe({name:"ElDropdown",components:{ElButton:ii,ElFocusTrap:s0e,ElButtonGroup:O0e,ElScrollbar:ul,ElDropdownCollection:A0e,ElTooltip:vr,ElRovingFocusGroup:$0e,ElIcon:xt,ArrowDown:Uc},props:Iv,emits:["visible-change","click","command"],setup(e,{emit:t}){const n=jt(),s=Xe("dropdown"),o=j(),r=j(),i=j(null),a=j(null),l=j(null),u=j(null),c=j(!1),d=O(()=>({maxHeight:Wi(e.maxHeight)})),f=O(()=>[s.m(g.value)]);function h(){p()}function p(){var S;(S=i.value)==null||S.onClose()}function m(){var S;(S=i.value)==null||S.onOpen()}const g=Ls();function v(...S){t("command",...S)}function b(){}function w(){const S=N(a);S==null||S.focus(),u.value=null}function y(S){u.value=S}function k(S){c.value||(S.preventDefault(),S.stopImmediatePropagation())}return Gt(rS,{contentRef:a,isUsingKeyboard:c,onItemEnter:b,onItemLeave:w}),Gt("elDropdown",{instance:n,dropdownSize:g,handleClick:h,commandHandler:v,trigger:qs(e,"trigger"),hideOnClick:qs(e,"hideOnClick")}),{ns:s,scrollbar:l,wrapStyle:d,dropdownTriggerKls:f,dropdownSize:g,currentTabId:u,handleCurrentTabIdChange:y,handlerMainButtonClick:S=>{t("click",S)},handleEntryFocus:k,handleClose:p,handleOpen:m,onMountOnFocus:S=>{var T,A;S.preventDefault(),(A=(T=a.value)==null?void 0:T.focus)==null||A.call(T,{preventScroll:!0})},popperRef:i,triggeringElementRef:o,referenceElementRef:r}}});function F0e(e,t,n,s,o,r){var i;const a=Ne("el-dropdown-collection"),l=Ne("el-roving-focus-group"),u=Ne("el-focus-trap"),c=Ne("el-scrollbar"),d=Ne("el-tooltip"),f=Ne("el-button"),h=Ne("arrow-down"),p=Ne("el-icon"),m=Ne("el-button-group");return _(),U("div",{class:W([e.ns.b(),e.ns.is("disabled",e.disabled)])},[fe(d,{ref:"popperRef",effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(i=e.referenceElementRef)==null?void 0:i.$el,trigger:e.trigger,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,"append-to-body":"",pure:"",transition:`${e.ns.namespace.value}-zoom-in-top`,persistent:"",onShow:t[0]||(t[0]=g=>e.$emit("visible-change",!0)),onHide:t[1]||(t[1]=g=>e.$emit("visible-change",!1))},Yl({content:de(()=>[fe(c,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:de(()=>[fe(u,{trapped:"",onMountOnFocus:e.onMountOnFocus},{default:de(()=>[fe(l,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:de(()=>[fe(a,null,{default:de(()=>[Pe(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["onMountOnFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:de(()=>[q("div",{class:W(e.dropdownTriggerKls)},[Pe(e.$slots,"default")],2)])}]),1032,["effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","show-after","virtual-ref","virtual-triggering","disabled","transition"]),e.splitButton?(_(),ye(m,{key:0},{default:de(()=>[fe(f,Wn({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,onClick:e.handlerMainButtonClick}),{default:de(()=>[Pe(e.$slots,"default")]),_:3},16,["size","type","disabled","onClick"]),fe(f,Wn({ref:"triggeringElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled}),{default:de(()=>[fe(p,{class:W(e.ns.e("icon"))},{default:de(()=>[fe(h)]),_:1},8,["class"])]),_:1},16,["size","type","class","disabled"])]),_:3})):me("v-if",!0)],2)}var L0e=Ye(P0e,[["render",F0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const B0e=xe({name:"DropdownItemImpl",components:{ElIcon:xt},props:eB,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:t}){const n=Xe("dropdown"),{collectionItemRef:s}=rt(M0e,void 0),{collectionItemRef:o}=rt(h0e,void 0),{rovingFocusGroupItemRef:r,tabIndex:i,handleFocus:a,handleKeydown:l,handleMousedown:u}=rt(QL,void 0),c=A$(s,o,r),d=ms(f=>{const{code:h}=f;if(h===ct.enter||h===ct.space)return f.preventDefault(),f.stopImmediatePropagation(),t("clickimpl",f),!0},l);return{ns:n,itemRef:c,dataset:{[ZL]:""},tabIndex:i,handleFocus:a,handleKeydown:d,handleMousedown:u}}}),z0e=["aria-disabled","tabindex"];function V0e(e,t,n,s,o,r){const i=Ne("el-icon");return _(),U(lt,null,[e.divided?(_(),U("li",Wn({key:0,class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):me("v-if",!0),q("li",Wn({ref:e.itemRef},Me(Me({},e.dataset),e.$attrs),{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:"menuitem",onClick:t[0]||(t[0]=a=>e.$emit("clickimpl",a)),onFocus:t[1]||(t[1]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onKeydown:t[2]||(t[2]=(...a)=>e.handleKeydown&&e.handleKeydown(...a)),onMousedown:t[3]||(t[3]=(...a)=>e.handleMousedown&&e.handleMousedown(...a)),onPointermove:t[4]||(t[4]=a=>e.$emit("pointermove",a)),onPointerleave:t[5]||(t[5]=a=>e.$emit("pointerleave",a))}),[e.icon?(_(),ye(i,{key:0},{default:de(()=>[(_(),ye(an(e.icon)))]),_:1})):me("v-if",!0),Pe(e.$slots,"default")],16,z0e)],64)}var W0e=Ye(B0e,[["render",V0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const nB=()=>{const e=rt("elDropdown",{}),t=O(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:t}},H0e=xe({name:"ElDropdownItem",components:{ElDropdownCollectionItem:D0e,ElRovingFocusItem:E0e,ElDropdownItemImpl:W0e},inheritAttrs:!1,props:eB,emits:["pointermove","pointerleave","click"],setup(e,{emit:t,attrs:n}){const{elDropdown:s}=nB(),o=jt(),r=j(null),i=O(()=>{var h,p;return(p=(h=N(r))==null?void 0:h.textContent)!=null?p:""}),{onItemEnter:a,onItemLeave:l}=rt(rS,void 0),u=ms(h=>(t("pointermove",h),h.defaultPrevented),CA(h=>{var p;e.disabled?l(h):(a(h),h.defaultPrevented||(p=h.currentTarget)==null||p.focus())})),c=ms(h=>(t("pointerleave",h),h.defaultPrevented),CA(h=>{l(h)})),d=ms(h=>(t("click",h),h.defaultPrevented),h=>{var p,m,g;if(e.disabled){h.stopImmediatePropagation();return}(p=s==null?void 0:s.hideOnClick)!=null&&p.value&&((m=s.handleClick)==null||m.call(s)),(g=s.commandHandler)==null||g.call(s,e.command,o,h)}),f=O(()=>Me(Me({},e),n));return{handleClick:d,handlePointerMove:u,handlePointerLeave:c,textContent:i,propsAndAttrs:f}}});function U0e(e,t,n,s,o,r){var i;const a=Ne("el-dropdown-item-impl"),l=Ne("el-roving-focus-item"),u=Ne("el-dropdown-collection-item");return _(),ye(u,{disabled:e.disabled,"text-value":(i=e.textValue)!=null?i:e.textContent},{default:de(()=>[fe(l,{focusable:!e.disabled},{default:de(()=>[fe(a,Wn(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:de(()=>[Pe(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var sB=Ye(H0e,[["render",U0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const j0e=xe({name:"ElDropdownMenu",props:T0e,setup(e){const t=Xe("dropdown"),{_elDropdownSize:n}=nB(),s=n.value,{focusTrapRef:o,onKeydown:r}=rt(XL,void 0),{contentRef:i}=rt(rS,void 0),{collectionRef:a,getItems:l}=rt(R0e,void 0),{rovingFocusGroupRef:u,rovingFocusGroupRootStyle:c,tabIndex:d,onBlur:f,onFocus:h,onMousedown:p}=rt(sS,void 0),{collectionRef:m}=rt(nS,void 0),g=O(()=>[t.b("menu"),t.bm("menu",s==null?void 0:s.value)]),v=A$(i,a,o,u,m),b=ms(y=>{var k;(k=e.onKeydown)==null||k.call(e,y)},y=>{const{currentTarget:k,code:x,target:C}=y;if(k.contains(C),ct.tab===x&&y.stopImmediatePropagation(),y.preventDefault(),C!==N(i)||!N0e.includes(x))return;const T=l().filter(A=>!A.disabled).map(A=>A.ref);tB.includes(x)&&T.reverse(),oS(T)});return{size:s,rovingFocusGroupRootStyle:c,tabIndex:d,dropdownKls:g,dropdownListWrapperRef:v,handleKeydown:y=>{b(y),r(y)},onBlur:f,onFocus:h,onMousedown:p}}});function G0e(e,t,n,s,o,r){return _(),U("ul",{ref:e.dropdownListWrapperRef,class:W(e.dropdownKls),style:it(e.rovingFocusGroupRootStyle),tabindex:-1,role:"menu",onBlur:t[0]||(t[0]=(...i)=>e.onBlur&&e.onBlur(...i)),onFocus:t[1]||(t[1]=(...i)=>e.onFocus&&e.onFocus(...i)),onKeydown:t[2]||(t[2]=(...i)=>e.handleKeydown&&e.handleKeydown(...i)),onMousedown:t[3]||(t[3]=(...i)=>e.onMousedown&&e.onMousedown(...i))},[Pe(e.$slots,"default")],38)}var oB=Ye(j0e,[["render",G0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const K0e=Kt(L0e,{DropdownItem:sB,DropdownMenu:oB}),q0e=ws(sB),Y0e=ws(oB);let X0e=0;const Z0e=xe({name:"ImgEmpty",setup(){return{id:++X0e}}}),J0e={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Q0e=["id"],eve=q("stop",{"stop-color":"var(--el-empty-fill-color-1)",offset:"0%"},null,-1),tve=q("stop",{"stop-color":"var(--el-empty-fill-color-4)",offset:"100%"},null,-1),nve=[eve,tve],sve=["id"],ove=q("stop",{"stop-color":"var(--el-empty-fill-color-1)",offset:"0%"},null,-1),rve=q("stop",{"stop-color":"var(--el-empty-fill-color-6)",offset:"100%"},null,-1),ive=[ove,rve],ave=["id"],lve={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},uve={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},cve={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},dve=q("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:"var(--el-empty-fill-color-3)"},null,-1),fve=q("polygon",{id:"Rectangle-Copy-14",fill:"var(--el-empty-fill-color-7)",transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,-1),hve={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},pve=q("polygon",{id:"Rectangle-Copy-10",fill:"var(--el-empty-fill-color-7)",transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,-1),mve=q("polygon",{id:"Rectangle-Copy-11",fill:"var(--el-empty-fill-color-5)",points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,-1),gve=["fill"],vve=q("polygon",{id:"Rectangle-Copy-13",fill:"var(--el-empty-fill-color-2)",transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,-1),bve=["fill"],yve={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},wve=["id"],kve=["xlink:href"],xve=["xlink:href"],Cve=["mask"],$ve=q("polygon",{id:"Rectangle-Copy-18",fill:"var(--el-empty-fill-color-2)",transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,-1);function Sve(e,t,n,s,o,r){return _(),U("svg",J0e,[q("defs",null,[q("linearGradient",{id:`linearGradient-1-${e.id}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},nve,8,Q0e),q("linearGradient",{id:`linearGradient-2-${e.id}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},ive,8,sve),q("rect",{id:`path-3-${e.id}`,x:"0",y:"0",width:"17",height:"36"},null,8,ave)]),q("g",lve,[q("g",uve,[q("g",cve,[dve,fve,q("g",hve,[pve,mve,q("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${e.id})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,gve),vve]),q("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${e.id})`,x:"13",y:"45",width:"40",height:"36"},null,8,bve),q("g",yve,[q("mask",{id:`mask-4-${e.id}`,fill:"var(--el-empty-fill-color-0)"},[q("use",{"xlink:href":`#path-3-${e.id}`},null,8,kve)],8,wve),q("use",{id:"Mask",fill:"var(--el-empty-fill-color-8)",transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${e.id}`},null,8,xve),q("polygon",{id:"Rectangle-Copy",fill:"var(--el-empty-fill-color-9)",mask:`url(#mask-4-${e.id})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 -1.70530257e-13 16"},null,8,Cve)]),$ve])])])])}var Ive=Ye(Z0e,[["render",Sve],["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const Eve={image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},Tve=["src"],_ve={key:1},Nve={name:"ElEmpty"},Ave=xe(nt(Me({},Nve),{props:Eve,setup(e){const t=e,{t:n}=Dn(),s=Xe("empty"),o=O(()=>t.description||n("el.table.emptyText")),r=O(()=>({width:t.imageSize?`${t.imageSize}px`:""}));return(i,a)=>(_(),U("div",{class:W(N(s).b())},[q("div",{class:W(N(s).e("image")),style:it(N(r))},[i.image?(_(),U("img",{key:0,src:i.image,ondragstart:"return false"},null,8,Tve)):Pe(i.$slots,"image",{key:1},()=>[fe(Ive)])],6),q("div",{class:W(N(s).e("description"))},[i.$slots.description?Pe(i.$slots,"description",{key:0}):(_(),U("p",_ve,He(N(o)),1))],2),i.$slots.default?(_(),U("div",{key:0,class:W(N(s).e("bottom"))},[Pe(i.$slots,"default")],2)):me("v-if",!0)],2))}}));var Dve=Ye(Ave,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const Rve=Kt(Dve),Mve=pt({model:Object,rules:{type:Qe(Object)},labelPosition:String,labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:{type:String,values:$a},disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean}),Ove={validate:(e,t,n)=>(Et(e)||Bt(e))&&No(t)&&Bt(n)};function Pve(){const e=j([]),t=O(()=>{if(!e.value.length)return"0";const r=Math.max(...e.value);return r?`${r}px`:""});function n(r){return e.value.indexOf(r)}function s(r,i){if(r&&i){const a=n(i);e.value.splice(a,1,r)}else r&&e.value.push(r)}function o(r){const i=n(r);i>-1&&e.value.splice(i,1)}return{autoLabelWidth:t,registerLabelWidth:s,deregisterLabelWidth:o}}const T0=(e,t)=>{const n=Ap(t);return n.length>0?e.filter(s=>s.prop&&n.includes(s.prop)):e},Fve={name:"ElForm"},Lve=xe(nt(Me({},Fve),{props:Mve,emits:Ove,setup(e,{expose:t,emit:n}){const s=e,o=[],r=Ls(),i=Xe("form"),a=O(()=>{const{labelPosition:b,inline:w}=s;return[i.b(),i.m(r.value||"default"),{[i.m(`label-${b}`)]:b,[i.m("inline")]:w}]}),l=b=>{o.push(b)},u=b=>{b.prop&&o.splice(o.indexOf(b),1)},c=(b=[])=>{!s.model||T0(o,b).forEach(w=>w.resetField())},d=(b=[])=>{T0(o,b).forEach(w=>w.clearValidate())},f=O(()=>!!s.model),h=b=>{if(o.length===0)return[];const w=T0(o,b);return w.length?w:[]},p=async b=>g(void 0,b),m=async(b=[])=>{if(!f.value)return!1;const w=h(b);if(w.length===0)return!0;let y={};for(const k of w)try{await k.validate("")}catch(x){y=Me(Me({},y),x)}return Object.keys(y).length===0?!0:Promise.reject(y)},g=async(b=[],w)=>{const y=!zt(w);try{const k=await m(b);return k===!0&&(w==null||w(k)),k}catch(k){const x=k;return s.scrollToError&&v(Object.keys(x)[0]),w==null||w(!1,x),y&&Promise.reject(x)}},v=b=>{var w;const y=T0(o,b)[0];y&&((w=y.$el)==null||w.scrollIntoView())};return We(()=>s.rules,()=>{s.validateOnRuleChange&&p()},{deep:!0}),Gt(Lr,vn(Me(nt(Me({},oo(s)),{emit:n,resetFields:c,clearValidate:d,validateField:g,addField:l,removeField:u}),Pve()))),t({validate:p,validateField:g,resetFields:c,clearValidate:d,scrollToField:v}),(b,w)=>(_(),U("form",{class:W(N(a))},[Pe(b.$slots,"default")],2))}}));var Bve=Ye(Lve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function Zu(){return Zu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zu.apply(this,arguments)}function zve(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Bp(e,t)}function cx(e){return cx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},cx(e)}function Bp(e,t){return Bp=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},Bp(e,t)}function Vve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ev(e,t,n){return Vve()?Ev=Reflect.construct:Ev=function(o,r,i){var a=[null];a.push.apply(a,r);var l=Function.bind.apply(o,a),u=new l;return i&&Bp(u,i.prototype),u},Ev.apply(null,arguments)}function Wve(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function dx(e){var t=typeof Map=="function"?new Map:void 0;return dx=function(s){if(s===null||!Wve(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(s))return t.get(s);t.set(s,o)}function o(){return Ev(s,arguments,cx(this).constructor)}return o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Bp(o,s)},dx(e)}var Hve=/%[sdj%]/g,Uve=function(){};typeof process!="undefined"&&process.env;function fx(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var s=n.field;t[s]=t[s]||[],t[s].push(n)}),t}function _r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var o=0,r=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var i=e.replace(Hve,function(a){if(a==="%%")return"%";if(o>=r)return a;switch(a){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch{return"[Circular]"}break;default:return a}});return i}return e}function jve(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function io(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||jve(t)&&typeof e=="string"&&!e)}function Gve(e,t,n){var s=[],o=0,r=e.length;function i(a){s.push.apply(s,a||[]),o++,o===r&&n(s)}e.forEach(function(a){t(a,i)})}function PD(e,t,n){var s=0,o=e.length;function r(i){if(i&&i.length){n(i);return}var a=s;s=s+1,a<o?t(e[a],r):n([])}r([])}function Kve(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n]||[])}),t}var FD=function(e){zve(t,e);function t(n,s){var o;return o=e.call(this,"Async Validation Error")||this,o.errors=n,o.fields=s,o}return t}(dx(Error));function qve(e,t,n,s,o){if(t.first){var r=new Promise(function(f,h){var p=function(v){return s(v),v.length?h(new FD(v,fx(v))):f(o)},m=Kve(e);PD(m,n,p)});return r.catch(function(f){return f}),r}var i=t.firstFields===!0?Object.keys(e):t.firstFields||[],a=Object.keys(e),l=a.length,u=0,c=[],d=new Promise(function(f,h){var p=function(g){if(c.push.apply(c,g),u++,u===l)return s(c),c.length?h(new FD(c,fx(c))):f(o)};a.length||(s(c),f(o)),a.forEach(function(m){var g=e[m];i.indexOf(m)!==-1?PD(g,n,p):Gve(g,n,p)})});return d.catch(function(f){return f}),d}function Yve(e){return!!(e&&e.message!==void 0)}function Xve(e,t){for(var n=e,s=0;s<t.length;s++){if(n==null)return n;n=n[t[s]]}return n}function LD(e,t){return function(n){var s;return e.fullFields?s=Xve(t,e.fullFields):s=t[n.field||e.fullField],Yve(n)?(n.field=n.field||e.fullField,n.fieldValue=s,n):{message:typeof n=="function"?n():n,fieldValue:s,field:n.field||e.fullField}}}function BD(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];typeof s=="object"&&typeof e[n]=="object"?e[n]=Zu({},e[n],s):e[n]=s}}return e}var rB=function(t,n,s,o,r,i){t.required&&(!s.hasOwnProperty(t.field)||io(n,i||t.type))&&o.push(_r(r.messages.required,t.fullField))},Zve=function(t,n,s,o,r){(/^\s+$/.test(n)||n==="")&&o.push(_r(r.messages.whitespace,t.fullField))},N2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Bh={integer:function(t){return Bh.number(t)&&parseInt(t,10)===t},float:function(t){return Bh.number(t)&&!Bh.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!Bh.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(N2.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(N2.url)},hex:function(t){return typeof t=="string"&&!!t.match(N2.hex)}},Jve=function(t,n,s,o,r){if(t.required&&n===void 0){rB(t,n,s,o,r);return}var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=t.type;i.indexOf(a)>-1?Bh[a](n)||o.push(_r(r.messages.types[a],t.fullField,t.type)):a&&typeof n!==t.type&&o.push(_r(r.messages.types[a],t.fullField,t.type))},Qve=function(t,n,s,o,r){var i=typeof t.len=="number",a=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,d=null,f=typeof n=="number",h=typeof n=="string",p=Array.isArray(n);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(c=n.length),h&&(c=n.replace(u,"_").length),i?c!==t.len&&o.push(_r(r.messages[d].len,t.fullField,t.len)):a&&!l&&c<t.min?o.push(_r(r.messages[d].min,t.fullField,t.min)):l&&!a&&c>t.max?o.push(_r(r.messages[d].max,t.fullField,t.max)):a&&l&&(c<t.min||c>t.max)&&o.push(_r(r.messages[d].range,t.fullField,t.min,t.max))},bd="enum",ebe=function(t,n,s,o,r){t[bd]=Array.isArray(t[bd])?t[bd]:[],t[bd].indexOf(n)===-1&&o.push(_r(r.messages[bd],t.fullField,t[bd].join(", ")))},tbe=function(t,n,s,o,r){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||o.push(_r(r.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var i=new RegExp(t.pattern);i.test(n)||o.push(_r(r.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},En={required:rB,whitespace:Zve,type:Jve,range:Qve,enum:ebe,pattern:tbe},nbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n,"string")&&!t.required)return s();En.required(t,n,o,i,r,"string"),io(n,"string")||(En.type(t,n,o,i,r),En.range(t,n,o,i,r),En.pattern(t,n,o,i,r),t.whitespace===!0&&En.whitespace(t,n,o,i,r))}s(i)},sbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n)&&!t.required)return s();En.required(t,n,o,i,r),n!==void 0&&En.type(t,n,o,i,r)}s(i)},obe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(n===""&&(n=void 0),io(n)&&!t.required)return s();En.required(t,n,o,i,r),n!==void 0&&(En.type(t,n,o,i,r),En.range(t,n,o,i,r))}s(i)},rbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n)&&!t.required)return s();En.required(t,n,o,i,r),n!==void 0&&En.type(t,n,o,i,r)}s(i)},ibe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n)&&!t.required)return s();En.required(t,n,o,i,r),io(n)||En.type(t,n,o,i,r)}s(i)},abe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n)&&!t.required)return s();En.required(t,n,o,i,r),n!==void 0&&(En.type(t,n,o,i,r),En.range(t,n,o,i,r))}s(i)},lbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n)&&!t.required)return s();En.required(t,n,o,i,r),n!==void 0&&(En.type(t,n,o,i,r),En.range(t,n,o,i,r))}s(i)},ube=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(n==null&&!t.required)return s();En.required(t,n,o,i,r,"array"),n!=null&&(En.type(t,n,o,i,r),En.range(t,n,o,i,r))}s(i)},cbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n)&&!t.required)return s();En.required(t,n,o,i,r),n!==void 0&&En.type(t,n,o,i,r)}s(i)},dbe="enum",fbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n)&&!t.required)return s();En.required(t,n,o,i,r),n!==void 0&&En[dbe](t,n,o,i,r)}s(i)},hbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n,"string")&&!t.required)return s();En.required(t,n,o,i,r),io(n,"string")||En.pattern(t,n,o,i,r)}s(i)},pbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n,"date")&&!t.required)return s();if(En.required(t,n,o,i,r),!io(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),En.type(t,l,o,i,r),l&&En.range(t,l.getTime(),o,i,r)}}s(i)},mbe=function(t,n,s,o,r){var i=[],a=Array.isArray(n)?"array":typeof n;En.required(t,n,o,i,r,a),s(i)},A2=function(t,n,s,o,r){var i=t.type,a=[],l=t.required||!t.required&&o.hasOwnProperty(t.field);if(l){if(io(n,i)&&!t.required)return s();En.required(t,n,o,a,r,i),io(n,i)||En.type(t,n,o,a,r)}s(a)},gbe=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(io(n)&&!t.required)return s();En.required(t,n,o,i,r)}s(i)},lp={string:nbe,method:sbe,number:obe,boolean:rbe,regexp:ibe,integer:abe,float:lbe,array:ube,object:cbe,enum:fbe,pattern:hbe,date:pbe,url:A2,hex:A2,email:A2,required:mbe,any:gbe};function hx(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var px=hx(),$m=function(){function e(n){this.rules=null,this._messages=px,this.define(n)}var t=e.prototype;return t.define=function(s){var o=this;if(!s)throw new Error("Cannot configure a schema with no rules");if(typeof s!="object"||Array.isArray(s))throw new Error("Rules must be an object");this.rules={},Object.keys(s).forEach(function(r){var i=s[r];o.rules[r]=Array.isArray(i)?i:[i]})},t.messages=function(s){return s&&(this._messages=BD(hx(),s)),this._messages},t.validate=function(s,o,r){var i=this;o===void 0&&(o={}),r===void 0&&(r=function(){});var a=s,l=o,u=r;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,a),Promise.resolve(a);function c(m){var g=[],v={};function b(y){if(Array.isArray(y)){var k;g=(k=g).concat.apply(k,y)}else g.push(y)}for(var w=0;w<m.length;w++)b(m[w]);g.length?(v=fx(g),u(g,v)):u(null,a)}if(l.messages){var d=this.messages();d===px&&(d=hx()),BD(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(m){var g=i.rules[m],v=a[m];g.forEach(function(b){var w=b;typeof w.transform=="function"&&(a===s&&(a=Zu({},a)),v=a[m]=w.transform(v)),typeof w=="function"?w={validator:w}:w=Zu({},w),w.validator=i.getValidationMethod(w),w.validator&&(w.field=m,w.fullField=w.fullField||m,w.type=i.getType(w),f[m]=f[m]||[],f[m].push({rule:w,value:v,source:a,field:m}))})});var p={};return qve(f,l,function(m,g){var v=m.rule,b=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");b=b&&(v.required||!v.required&&m.value),v.field=m.field;function w(x,C){return Zu({},C,{fullField:v.fullField+"."+x,fullFields:v.fullFields?[].concat(v.fullFields,[x]):[x]})}function y(x){x===void 0&&(x=[]);var C=Array.isArray(x)?x:[x];!l.suppressWarning&&C.length&&e.warning("async-validator:",C),C.length&&v.message!==void 0&&(C=[].concat(v.message));var S=C.map(LD(v,a));if(l.first&&S.length)return p[v.field]=1,g(S);if(!b)g(S);else{if(v.required&&!m.value)return v.message!==void 0?S=[].concat(v.message).map(LD(v,a)):l.error&&(S=[l.error(v,_r(l.messages.required,v.field))]),g(S);var T={};v.defaultField&&Object.keys(m.value).map(function(L){T[L]=v.defaultField}),T=Zu({},T,m.rule.fields);var A={};Object.keys(T).forEach(function(L){var P=T[L],V=Array.isArray(P)?P:[P];A[L]=V.map(w.bind(null,L))});var R=new e(A);R.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),R.validate(m.value,m.rule.options||l,function(L){var P=[];S&&S.length&&P.push.apply(P,S),L&&L.length&&P.push.apply(P,L),g(P.length?P:null)})}}var k;v.asyncValidator?k=v.asyncValidator(v,m.value,y,m.source,l):v.validator&&(k=v.validator(v,m.value,y,m.source,l),k===!0?y():k===!1?y(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):k instanceof Array?y(k):k instanceof Error&&y(k.message)),k&&k.then&&k.then(function(){return y()},function(x){return y(x)})},function(m){c(m)},a)},t.getType=function(s){if(s.type===void 0&&s.pattern instanceof RegExp&&(s.type="pattern"),typeof s.validator!="function"&&s.type&&!lp.hasOwnProperty(s.type))throw new Error(_r("Unknown rule type %s",s.type));return s.type||"string"},t.getValidationMethod=function(s){if(typeof s.validator=="function")return s.validator;var o=Object.keys(s),r=o.indexOf("message");return r!==-1&&o.splice(r,1),o.length===1&&o[0]==="required"?lp.required:lp[this.getType(s)]||void 0},e}();$m.register=function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");lp[t]=n};$m.warning=Uve;$m.messages=px;$m.validators=lp;const vbe=["","error","validating","success"],bbe=pt({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Qe([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Qe([Object,Array])},error:String,validateStatus:{type:String,values:vbe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:$a}}),zD="ElLabelWrap";var ybe=xe({name:zD,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:t}){const n=rt(Lr),s=rt(di);(!n||!s)&&Fs(zD,"usage: <el-form><el-form-item><label-wrap /></el-form-item></el-form>");const o=Xe("form"),r=j(),i=j(0),a=()=>{var c;if((c=r.value)!=null&&c.firstElementChild){const d=window.getComputedStyle(r.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(c="update")=>{vt(()=>{t.default&&e.isAutoWidth&&(c==="update"?i.value=a():c==="remove"&&n.deregisterLabelWidth(i.value))})},u=()=>l("update");return Ft(()=>{u()}),qn(()=>{l("remove")}),Ki(()=>u()),We(i,(c,d)=>{e.updateAll&&n.registerLabelWidth(c,d)}),Lf(O(()=>{var c,d;return(d=(c=r.value)==null?void 0:c.firstElementChild)!=null?d:null}),u),()=>{var c,d;if(!t)return null;const{isAutoWidth:f}=e;if(f){const h=n.autoLabelWidth,p={};if(h&&h!=="auto"){const m=Math.max(0,Number.parseInt(h,10)-i.value),g=n.labelPosition==="left"?"marginRight":"marginLeft";m&&(p[g]=`${m}px`)}return fe("div",{ref:r,class:[o.be("item","label-wrap")],style:p},[(c=t.default)==null?void 0:c.call(t)])}else return fe(lt,{ref:r},[(d=t.default)==null?void 0:d.call(t)])}}});const wbe=["for"],kbe={name:"ElFormItem"},xbe=xe(nt(Me({},kbe),{props:bbe,setup(e,{expose:t}){const n=e,s="ElFormItem",o=gm(),r=rt(Lr);r||Fs(s,"usage: <el-form><el-form-item /></el-form>");const i=rt(di,void 0),a=Ls(void 0,{formItem:!1}),l=Xe("form-item"),u=j(""),c=qte(u,100),d=j(""),f=j();let h,p=!1;const m=O(()=>{if(r.labelPosition==="top")return{};const te=Wi(n.labelWidth||r.labelWidth||"");return te?{width:te}:{}}),g=O(()=>{if(r.labelPosition==="top"||r.inline)return{};if(!n.label&&!n.labelWidth&&x)return{};const te=Wi(n.labelWidth||r.labelWidth||"");return!n.label&&!o.label?{marginLeft:te}:{}}),v=O(()=>[l.b(),l.m(a.value),l.is("error",u.value==="error"),l.is("validating",u.value==="validating"),l.is("success",u.value==="success"),l.is("required",R.value||n.required),l.is("no-asterisk",r.hideRequiredAsterisk),{[l.m("feedback")]:r.statusIcon}]),b=O(()=>No(n.inlineMessage)?n.inlineMessage:r.inlineMessage||!1),w=O(()=>[l.e("error"),{[l.em("error","inline")]:b.value}]),y=O(()=>n.prop?Bt(n.prop)?n.prop:n.prop.join("."):""),k=O(()=>n.for||y.value),x=!!i,C=O(()=>{const te=r.model;if(!(!te||!n.prop))return pv(te,n.prop).value}),S=O(()=>{const te=n.rules?Ap(n.rules):[],re=r.rules;if(re&&n.prop){const $e=pv(re,n.prop).value;$e&&te.push(...Ap($e))}return n.required!==void 0&&te.push({required:!!n.required}),te}),T=O(()=>S.value.length>0),A=te=>S.value.filter($e=>!$e.trigger||!te?!0:Array.isArray($e.trigger)?$e.trigger.includes(te):$e.trigger===te).map(Q=>{var ae=Q,{trigger:$e}=ae,se=uN(ae,["trigger"]);return se}),R=O(()=>S.value.some(te=>te.required===!0)),L=O(()=>c.value==="error"&&n.showMessage&&r.showMessage),P=O(()=>`${n.label||""}${r.labelSuffix||""}`),V=te=>{u.value=te},H=te=>{var re,$e;const{errors:se,fields:Q}=te;(!se||!Q)&&console.error(te),V("error"),d.value=se?($e=(re=se==null?void 0:se[0])==null?void 0:re.message)!=null?$e:`${n.prop} is required`:"",r.emit("validate",n.prop,!1,d.value)},F=()=>{V("success"),r.emit("validate",n.prop,!0,"")},M=async te=>{const re=y.value;return new $m({[re]:te}).validate({[re]:C.value},{firstFields:!0}).then(()=>(F(),!0)).catch(se=>(H(se),Promise.reject(se)))},B=async(te,re)=>{if(p)return p=!1,!1;const $e=zt(re);if(!T.value)return re==null||re(!1),!1;const se=A(te);return se.length===0?(re==null||re(!0),!0):(V("validating"),M(se).then(()=>(re==null||re(!0),!0)).catch(Q=>{const{fields:ae}=Q;return re==null||re(!1,ae),$e?!1:Promise.reject(ae)}))},Y=()=>{V(""),d.value=""},J=async()=>{const te=r.model;if(!te||!n.prop)return;const re=pv(te,n.prop);Zo(re.value,h)||(p=!0),re.value=h,await vt(),Y()};We(()=>n.error,te=>{d.value=te||"",V(te?"error":"")},{immediate:!0}),We(()=>n.validateStatus,te=>V(te||""));const ee=vn(nt(Me({},oo(n)),{$el:f,size:a,validateState:u,resetField:J,clearValidate:Y,validate:B}));return Gt(di,ee),Ft(()=>{n.prop&&(r.addField(ee),h=_ee(C.value))}),qn(()=>{r.removeField(ee)}),t({size:a,validateMessage:d,validateState:u,validate:B,clearValidate:Y,resetField:J}),(te,re)=>(_(),U("div",{ref_key:"formItemRef",ref:f,class:W(N(v))},[fe(N(ybe),{"is-auto-width":N(m).width==="auto","update-all":N(r).labelWidth==="auto"},{default:de(()=>[te.label||te.$slots.label?(_(),U("label",{key:0,for:N(k),class:W(N(l).e("label")),style:it(N(m))},[Pe(te.$slots,"label",{label:N(P)},()=>[Yt(He(N(P)),1)])],14,wbe)):me("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),q("div",{class:W(N(l).e("content")),style:it(N(g))},[Pe(te.$slots,"default"),fe(Rs,{name:`${N(l).namespace.value}-zoom-in-top`},{default:de(()=>[N(L)?Pe(te.$slots,"error",{key:0,error:d.value},()=>[q("div",{class:W(N(w))},He(d.value),3)]):me("v-if",!0)]),_:3},8,["name"])],6)],2))}}));var iB=Ye(xbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const Cbe=Kt(Bve,{FormItem:iB}),$be=ws(iB),Sbe=pt({urlList:{type:Qe(Array),default:()=>gs([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1}}),Ibe={close:()=>!0,switch:e=>typeof e=="number"},Ebe=["src"],Tbe={name:"ElImageViewer"},_be=xe(nt(Me({},Tbe),{props:Sbe,emits:Ibe,setup(e,{emit:t}){const n=e,s={CONTAIN:{name:"contain",icon:xp(poe)},ORIGINAL:{name:"original",icon:xp(Nre)}},o=D$()?"DOMMouseScroll":"mousewheel",{t:r}=Dn(),i=Xe("image-viewer"),{nextZIndex:a}=al(),l=j(),u=j([]),c=CK(),d=j(!0),f=j(n.initialIndex),h=j(s.CONTAIN),p=j({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),m=O(()=>{const{urlList:F}=n;return F.length<=1}),g=O(()=>f.value===0),v=O(()=>f.value===n.urlList.length-1),b=O(()=>n.urlList[f.value]),w=O(()=>{const{scale:F,deg:M,offsetX:B,offsetY:Y,enableTransition:J}=p.value;let ee=B/F,te=Y/F;switch(M%360){case 90:case-270:[ee,te]=[te,-ee];break;case 180:case-180:[ee,te]=[-ee,-te];break;case 270:case-90:[ee,te]=[-te,ee];break}const re={transform:`scale(${F}) rotate(${M}deg) translate(${ee}px, ${te}px)`,transition:J?"transform .3s":""};return h.value.name===s.CONTAIN.name&&(re.maxWidth=re.maxHeight="100%"),re}),y=O(()=>mn(n.zIndex)?n.zIndex:a());function k(){C(),t("close")}function x(){const F=rc(B=>{switch(B.code){case ct.esc:k();break;case ct.space:L();break;case ct.left:P();break;case ct.up:H("zoomIn");break;case ct.right:V();break;case ct.down:H("zoomOut");break}}),M=rc(B=>{(B.wheelDelta?B.wheelDelta:-B.detail)>0?H("zoomIn",{zoomRate:1.2,enableTransition:!1}):H("zoomOut",{zoomRate:1.2,enableTransition:!1})});c.run(()=>{_s(document,"keydown",F),_s(document,o,M)})}function C(){c.stop()}function S(){d.value=!1}function T(F){d.value=!1,F.target.alt=r("el.image.error")}function A(F){if(d.value||F.button!==0||!l.value)return;p.value.enableTransition=!1;const{offsetX:M,offsetY:B}=p.value,Y=F.pageX,J=F.pageY,ee=rc(re=>{p.value=nt(Me({},p.value),{offsetX:M+re.pageX-Y,offsetY:B+re.pageY-J})}),te=_s(document,"mousemove",ee);_s(document,"mouseup",()=>{te()}),F.preventDefault()}function R(){p.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function L(){if(d.value)return;const F=Object.keys(s),M=Object.values(s),B=h.value.name,J=(M.findIndex(ee=>ee.name===B)+1)%F.length;h.value=s[F[J]],R()}function P(){if(g.value&&!n.infinite)return;const F=n.urlList.length;f.value=(f.value-1+F)%F}function V(){if(v.value&&!n.infinite)return;const F=n.urlList.length;f.value=(f.value+1)%F}function H(F,M={}){if(d.value)return;const{zoomRate:B,rotateDeg:Y,enableTransition:J}=Me({zoomRate:1.4,rotateDeg:90,enableTransition:!0},M);switch(F){case"zoomOut":p.value.scale>.2&&(p.value.scale=Number.parseFloat((p.value.scale/B).toFixed(3)));break;case"zoomIn":p.value.scale<7&&(p.value.scale=Number.parseFloat((p.value.scale*B).toFixed(3)));break;case"clockwise":p.value.deg+=Y;break;case"anticlockwise":p.value.deg-=Y;break}p.value.enableTransition=J}return We(b,()=>{vt(()=>{const F=u.value[0];F!=null&&F.complete||(d.value=!0)})}),We(f,F=>{R(),t("switch",F)}),Ft(()=>{var F,M;x(),(M=(F=l.value)==null?void 0:F.focus)==null||M.call(F)}),(F,M)=>(_(),ye(pm,{to:"body",disabled:!F.teleported},[fe(Rs,{name:"viewer-fade",appear:""},{default:de(()=>[q("div",{ref_key:"wrapper",ref:l,tabindex:-1,class:W(N(i).e("wrapper")),style:it({zIndex:N(y)})},[q("div",{class:W(N(i).e("mask")),onClick:M[0]||(M[0]=wt(B=>F.hideOnClickModal&&k(),["self"]))},null,2),me(" CLOSE "),q("span",{class:W([N(i).e("btn"),N(i).e("close")]),onClick:k},[fe(N(xt),null,{default:de(()=>[fe(N(ci))]),_:1})],2),me(" ARROW "),N(m)?me("v-if",!0):(_(),U(lt,{key:0},[q("span",{class:W([N(i).e("btn"),N(i).e("prev"),N(i).is("disabled",!F.infinite&&N(g))]),onClick:P},[fe(N(xt),null,{default:de(()=>[fe(N(jc))]),_:1})],2),q("span",{class:W([N(i).e("btn"),N(i).e("next"),N(i).is("disabled",!F.infinite&&N(v))]),onClick:V},[fe(N(xt),null,{default:de(()=>[fe(N(bi))]),_:1})],2)],64)),me(" ACTIONS "),q("div",{class:W([N(i).e("btn"),N(i).e("actions")])},[q("div",{class:W(N(i).e("actions__inner"))},[fe(N(xt),{onClick:M[1]||(M[1]=B=>H("zoomOut"))},{default:de(()=>[fe(N(wie))]),_:1}),fe(N(xt),{onClick:M[2]||(M[2]=B=>H("zoomIn"))},{default:de(()=>[fe(N(KF))]),_:1}),q("i",{class:W(N(i).e("actions__divider"))},null,2),fe(N(xt),{onClick:L},{default:de(()=>[(_(),ye(an(h.value.icon)))]),_:1}),q("i",{class:W(N(i).e("actions__divider"))},null,2),fe(N(xt),{onClick:M[3]||(M[3]=B=>H("anticlockwise"))},{default:de(()=>[fe(N(bre))]),_:1}),fe(N(xt),{onClick:M[4]||(M[4]=B=>H("clockwise"))},{default:de(()=>[fe(N($re))]),_:1})],2)],2),me(" CANVAS "),q("div",{class:W(N(i).e("canvas"))},[(_(!0),U(lt,null,Zt(F.urlList,(B,Y)=>It((_(),U("img",{ref_for:!0,ref:J=>u.value[Y]=J,key:B,src:B,style:it(N(w)),class:W(N(i).e("img")),onLoad:S,onError:T,onMousedown:A},null,46,Ebe)),[[cn,Y===f.value]])),128))],2),Pe(F.$slots,"default")],6)]),_:3})],8,["disabled"]))}}));var Nbe=Ye(_be,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const aB=Kt(Nbe),Abe=pt({appendToBody:{type:Boolean,default:void 0},hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:Qe([String,Object])},previewSrcList:{type:Qe(Array),default:()=>gs([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0}}),Dbe={error:e=>e instanceof Event,switch:e=>mn(e),close:()=>!0},Rbe=["src"],Mbe={key:0},Obe={name:"ElImage"},Pbe=xe(nt(Me({},Obe),{props:Abe,emits:Dbe,setup(e,{emit:t}){const n=e;let s="";wm({scope:"el-image",from:"append-to-body",replacement:"preview-teleported",version:"2.2.0",ref:"https://element-plus.org/en-US/component/image.html#image-attributess"},O(()=>No(n.appendToBody)));const{t:o}=Dn(),r=Xe("image"),i=R$(),a=j(!1),l=j(!0),u=j(0),c=j(0),d=j(!1),f=j(),h=j();let p,m;const g=O(()=>i.value.style),v=O(()=>{const{fit:F}=n;return sn&&F?{objectFit:F}:{}}),b=O(()=>{const{previewSrcList:F}=n;return Array.isArray(F)&&F.length>0}),w=O(()=>n.appendToBody||n.previewTeleported),y=O(()=>{const{previewSrcList:F,initialIndex:M}=n;let B=M;return M>F.length-1&&(B=0),B}),k=()=>{if(!sn)return;l.value=!0,a.value=!1;const F=new Image,M=n.src;F.addEventListener("load",B=>{M===n.src&&x(B,F)}),F.addEventListener("error",B=>{M===n.src&&C(B)}),Object.entries(i.value).forEach(([B,Y])=>{B.toLowerCase()!=="onload"&&F.setAttribute(B,Y)}),F.src=M};function x(F,M){u.value=M.width,c.value=M.height,l.value=!1,a.value=!1}function C(F){l.value=!1,a.value=!0,t("error",F)}function S(){sne(f.value,h.value)&&(k(),R())}const T=zF(S,200);async function A(){var F;if(!sn)return;await vt();const{scrollContainer:M}=n;wc(M)?h.value=M:Bt(M)&&M!==""?h.value=(F=document.querySelector(M))!=null?F:void 0:f.value&&(h.value=T$(f.value)),h.value&&(p=_s(h,"scroll",T),setTimeout(()=>S(),100))}function R(){!sn||!h.value||!T||(p(),h.value=void 0)}function L(F){if(!!F.ctrlKey){if(F.deltaY<0)return F.preventDefault(),!1;if(F.deltaY>0)return F.preventDefault(),!1}}function P(){!b.value||(m=_s("wheel",L,{passive:!1}),s=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0)}function V(){m==null||m(),document.body.style.overflow=s,d.value=!1,t("close")}function H(F){t("switch",F)}return We(()=>n.src,()=>{n.lazy?(l.value=!0,a.value=!1,R(),A()):k()}),Ft(()=>{n.lazy?A():k()}),(F,M)=>(_(),U("div",{ref_key:"container",ref:f,class:W([N(r).b(),F.$attrs.class]),style:it(N(g))},[l.value?Pe(F.$slots,"placeholder",{key:0},()=>[q("div",{class:W(N(r).e("placeholder"))},null,2)]):a.value?Pe(F.$slots,"error",{key:1},()=>[q("div",{class:W(N(r).e("error"))},He(N(o)("el.image.error")),3)]):(_(),U("img",Wn({key:2},N(i),{src:F.src,style:N(v),class:[N(r).e("inner"),N(b)?N(r).e("preview"):""],onClick:P}),null,16,Rbe)),N(b)?(_(),U(lt,{key:3},[d.value?(_(),ye(N(aB),{key:0,"z-index":F.zIndex,"initial-index":N(y),"url-list":F.previewSrcList,"hide-on-click-modal":F.hideOnClickModal,teleported:N(w),onClose:V,onSwitch:H},{default:de(()=>[F.$slots.viewer?(_(),U("div",Mbe,[Pe(F.$slots,"viewer")])):me("v-if",!0)]),_:3},8,["z-index","initial-index","url-list","hide-on-click-modal","teleported"])):me("v-if",!0)],2112)):me("v-if",!0)],6))}}));var Fbe=Ye(Pbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const Lbe=Kt(Fbe),Bbe=pt({step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:$a},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),zbe={change:(e,t)=>e!==t,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>mn(e),"update:modelValue":e=>mn(e)||e===void 0},Vbe=xe({name:"ElInputNumber",components:{ElInput:yi,ElIcon:xt,ArrowUp:bm,ArrowDown:Uc,Plus:jF,Minus:Foe},directives:{RepeatClick:tL},props:Bbe,emits:zbe,setup(e,{emit:t}){const n=j(),s=vn({currentValue:e.modelValue,userInput:null}),{formItem:o}=Hf(),r=Xe("input-number"),i=O(()=>m(e.modelValue,-1)<e.min),a=O(()=>m(e.modelValue)>e.max),l=O(()=>{const A=p(e.step);return Ir(e.precision)?Math.max(p(e.modelValue),A):(A>e.precision,e.precision)}),u=O(()=>e.controls&&e.controlsPosition==="right"),c=Ls(),d=Wf(),f=O(()=>{if(s.userInput!==null)return s.userInput;let A=s.currentValue;if(mn(A)){if(Number.isNaN(A))return"";Ir(e.precision)||(A=A.toFixed(e.precision))}return A}),h=(A,R)=>(Ir(R)&&(R=l.value),Number.parseFloat(`${Math.round(A*10**R)/10**R}`)),p=A=>{if(Ir(A))return 0;const R=A.toString(),L=R.indexOf(".");let P=0;return L!==-1&&(P=R.length-L-1),P},m=(A,R=1)=>mn(A)?(A=mn(A)?A:Number.NaN,h(A+e.step*R)):s.currentValue,g=()=>{if(d.value||a.value)return;const A=e.modelValue||0,R=m(A);w(R)},v=()=>{if(d.value||i.value)return;const A=e.modelValue||0,R=m(A,-1);w(R)},b=(A,R)=>{const{max:L,min:P,step:V,precision:H,stepStrictly:F}=e;let M=Number(A);return A===null&&(M=Number.NaN),Number.isNaN(M)||(F&&(M=Math.round(M/V)*V),Ir(H)||(M=h(M,H)),(M>L||M<P)&&(M=M>L?L:P,R&&t("update:modelValue",M))),M},w=A=>{var R;const L=s.currentValue;let P=b(A);L!==P&&(Number.isNaN(P)&&(P=void 0),s.userInput=null,t("update:modelValue",P),t("input",P),t("change",P,L),(R=o==null?void 0:o.validate)==null||R.call(o,"change").catch(V=>void 0),s.currentValue=P)},y=A=>s.userInput=A,k=A=>{const R=A!==""?Number(A):"";(mn(R)&&!Number.isNaN(R)||A==="")&&w(R),s.userInput=null},x=()=>{var A,R;(R=(A=n.value)==null?void 0:A.focus)==null||R.call(A)},C=()=>{var A,R;(R=(A=n.value)==null?void 0:A.blur)==null||R.call(A)},S=A=>{t("focus",A)},T=A=>{var R;t("blur",A),(R=o==null?void 0:o.validate)==null||R.call(o,"blur").catch(L=>void 0)};return We(()=>e.modelValue,A=>{const R=b(A,!0);s.currentValue=R,s.userInput=null},{immediate:!0}),Ft(()=>{var A;const R=(A=n.value)==null?void 0:A.input;if(R.setAttribute("role","spinbutton"),R.setAttribute("aria-valuemax",String(e.max)),R.setAttribute("aria-valuemin",String(e.min)),R.setAttribute("aria-valuenow",String(s.currentValue)),R.setAttribute("aria-disabled",String(d.value)),!mn(e.modelValue)){let L=Number(e.modelValue);Number.isNaN(L)&&(L=void 0),t("update:modelValue",L)}}),Ki(()=>{var A;const R=(A=n.value)==null?void 0:A.input;R==null||R.setAttribute("aria-valuenow",s.currentValue)}),{input:n,displayValue:f,handleInput:y,handleInputChange:k,controlsAtRight:u,decrease:v,increase:g,inputNumberSize:c,inputNumberDisabled:d,maxDisabled:a,minDisabled:i,focus:x,blur:C,handleFocus:S,handleBlur:T,ns:r}}});function Wbe(e,t,n,s,o,r){const i=Ne("arrow-down"),a=Ne("minus"),l=Ne("el-icon"),u=Ne("arrow-up"),c=Ne("plus"),d=Ne("el-input"),f=Or("repeat-click");return _(),U("div",{class:W([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:t[2]||(t[2]=wt(()=>{},["prevent"]))},[e.controls?It((_(),U("span",{key:0,role:"button",class:W([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:t[0]||(t[0]=Qt((...h)=>e.decrease&&e.decrease(...h),["enter"]))},[fe(l,null,{default:de(()=>[e.controlsAtRight?(_(),ye(i,{key:0})):(_(),ye(a,{key:1}))]),_:1})],34)),[[f,e.decrease]]):me("v-if",!0),e.controls?It((_(),U("span",{key:1,role:"button",class:W([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:t[1]||(t[1]=Qt((...h)=>e.increase&&e.increase(...h),["enter"]))},[fe(l,null,{default:de(()=>[e.controlsAtRight?(_(),ye(u,{key:0})):(_(),ye(c,{key:1}))]),_:1})],34)),[[f,e.increase]]):me("v-if",!0),fe(d,{ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[Qt(wt(e.increase,["prevent"]),["up"]),Qt(wt(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}var Hbe=Ye(Vbe,[["render",Wbe],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const lB=Kt(Hbe),Ube=pt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Mo,default:""}}),jbe={click:e=>e instanceof MouseEvent},Gbe=["href"],Kbe={name:"ElLink"},qbe=xe(nt(Me({},Kbe),{props:Ube,emits:jbe,setup(e,{emit:t}){const n=e,s=Xe("link");function o(r){n.disabled||t("click",r)}return(r,i)=>(_(),U("a",{class:W([N(s).b(),N(s).m(r.type),N(s).is("disabled",r.disabled),N(s).is("underline",r.underline&&!r.disabled)]),href:r.disabled||!r.href?void 0:r.href,onClick:o},[r.icon?(_(),ye(N(xt),{key:0},{default:de(()=>[(_(),ye(an(r.icon)))]),_:1})):me("v-if",!0),r.$slots.default?(_(),U("span",{key:1,class:W(N(s).e("inner"))},[Pe(r.$slots,"default")],2)):me("v-if",!0),r.$slots.icon?Pe(r.$slots,"icon",{key:2}):me("v-if",!0)],10,Gbe))}}));var Ybe=Ye(qbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const Xbe=Kt(Ybe);class Zbe{constructor(t,n){this.parent=t,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",s=>{let o=!1;switch(s.code){case ct.down:{this.gotoSubIndex(this.subIndex+1),o=!0;break}case ct.up:{this.gotoSubIndex(this.subIndex-1),o=!0;break}case ct.tab:{fv(t,"mouseleave");break}case ct.enter:case ct.space:{o=!0,s.currentTarget.click();break}}return o&&(s.preventDefault(),s.stopPropagation()),!1})})}}class Jbe{constructor(t){this.domNode=t,this.submenu=null,this.submenu=null,this.init()}init(){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(".el-menu");t&&(this.submenu=new Zbe(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let n=!1;switch(t.code){case ct.down:{fv(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case ct.up:{fv(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case ct.tab:{fv(t.currentTarget,"mouseleave");break}case ct.enter:case ct.space:{n=!0,t.currentTarget.click();break}}n&&t.preventDefault()})}}class Qbe{constructor(t){this.domNode=t,this.init()}init(){const t=this.domNode.childNodes;Array.from(t).forEach(n=>{n.nodeType===1&&new Jbe(n)})}}const eye=xe({name:"ElMenuCollapseTransition",setup(){return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,n){ca(t,"el-opacity-transition"),t.style.opacity="1",n()},onAfterEnter(t){ur(t,"el-opacity-transition"),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),Li(t,"el-menu--collapse")?(ur(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),ca(t,"el-menu--collapse")):(ca(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),ur(t,"el-menu--collapse")),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){ca(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function tye(e,t,n,s,o,r){return _(),ye(Rs,Wn({mode:"out-in"},e.listeners),{default:de(()=>[Pe(e.$slots,"default")]),_:3},16)}var nye=Ye(eye,[["render",tye],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function uB(e,t){const n=rt("rootMenu");n||Fs("useMenu","can not inject root menu");const s=O(()=>{let i=e.parent;const a=[t.value];for(;i.type.name!=="ElMenu";)i.props.index&&a.unshift(i.props.index),i=i.parent;return a}),o=O(()=>{let i=e.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),r=O(()=>{let i=e.parent;if(n.props.mode!=="vertical")return{};let a=20;if(n.props.collapse)a=20;else for(;i&&i.type.name!=="ElMenu";)i.type.name==="ElSubMenu"&&(a+=20),i=i.parent;return{paddingLeft:`${a}px`}});return{parentMenu:o,paddingStyle:r,indexPath:s}}function sye(e){return O(()=>{const n=e.backgroundColor;return n?new K4(n).shade(20).toString():""})}const cB=e=>O(()=>({"--el-menu-text-color":e.textColor||"","--el-menu-hover-text-color":e.textColor||"","--el-menu-bg-color":e.backgroundColor||"","--el-menu-hover-bg-color":sye(e).value||"","--el-menu-active-color":e.activeTextColor||""})),oye=pt({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6}}),D2="ElSubMenu";var iS=xe({name:D2,props:oye,setup(e,{slots:t,expose:n}){const s=jt(),{paddingStyle:o,indexPath:r,parentMenu:i}=uB(s,O(()=>e.index)),a=rt("rootMenu");a||Fs(D2,"can not inject root menu");const l=rt(`subMenu:${i.value.uid}`);l||Fs(D2,"can not inject sub menu");const u=j({}),c=j({});let d;const f=j(!1),h=j(),p=j(null),m=O(()=>A.value==="horizontal"&&v.value?"bottom-start":"right-start"),g=O(()=>A.value==="horizontal"&&v.value||A.value==="vertical"&&!a.props.collapse?Uc:bi),v=O(()=>{let B=!0,Y=s.parent;for(;Y&&Y.type.name!=="ElMenu";)if(["ElSubMenu","ElMenuItemGroup"].includes(Y.type.name)){B=!1;break}else Y=Y.parent;return B}),b=O(()=>e.popperAppendToBody===void 0?v.value:Boolean(e.popperAppendToBody)),w=O(()=>a.props.collapse?"el-zoom-in-left":"el-zoom-in-top"),y=O(()=>A.value==="horizontal"&&v.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),k=O(()=>a.openedMenus.includes(e.index)),x=O(()=>{let B=!1;return Object.values(u.value).forEach(Y=>{Y.active&&(B=!0)}),Object.values(c.value).forEach(Y=>{Y.active&&(B=!0)}),B}),C=O(()=>a.props.backgroundColor||""),S=O(()=>a.props.activeTextColor||""),T=O(()=>a.props.textColor||""),A=O(()=>a.props.mode),R=vn({index:e.index,indexPath:r,active:x}),L=O(()=>A.value!=="horizontal"?{color:T.value}:{borderBottomColor:x.value?a.props.activeTextColor?S.value:"":"transparent",color:x.value?S.value:T.value}),P=()=>{var B,Y,J;return(J=(Y=(B=p.value)==null?void 0:B.popperRef)==null?void 0:Y.popperInstanceRef)==null?void 0:J.destroy()},V=B=>{B||P()},H=()=>{a.props.menuTrigger==="hover"&&a.props.mode==="horizontal"||a.props.collapse&&a.props.mode==="vertical"||e.disabled||a.handleSubMenuClick({index:e.index,indexPath:r.value,active:x.value})},F=(B,Y=e.showTimeout)=>{var J;B.type==="focus"&&!B.relatedTarget||a.props.menuTrigger==="click"&&a.props.mode==="horizontal"||!a.props.collapse&&a.props.mode==="vertical"||e.disabled||(l.mouseInChild.value=!0,d==null||d(),{stop:d}=yc(()=>{a.openMenu(e.index,r.value)},Y),b.value&&((J=i.value.vnode.el)==null||J.dispatchEvent(new MouseEvent("mouseenter"))))},M=(B=!1)=>{var Y,J;a.props.menuTrigger==="click"&&a.props.mode==="horizontal"||!a.props.collapse&&a.props.mode==="vertical"||(d==null||d(),l.mouseInChild.value=!1,{stop:d}=yc(()=>!f.value&&a.closeMenu(e.index,r.value),e.hideTimeout),b.value&&B&&((Y=s.parent)==null?void 0:Y.type.name)==="ElSubMenu"&&((J=l.handleMouseleave)==null||J.call(l,!0)))};We(()=>a.props.collapse,B=>V(Boolean(B)));{const B=J=>{c.value[J.index]=J},Y=J=>{delete c.value[J.index]};Gt(`subMenu:${s.uid}`,{addSubMenu:B,removeSubMenu:Y,handleMouseleave:M,mouseInChild:f})}return n({opened:k}),Ft(()=>{a.addSubMenu(R),l.addSubMenu(R)}),qn(()=>{l.removeSubMenu(R),a.removeSubMenu(R)}),()=>{var B;const Y=[(B=t.title)==null?void 0:B.call(t),at(xt,{class:["el-sub-menu__icon-arrow"]},{default:()=>at(g.value)})],J=cB(a.props),ee=a.isMenuPopup?at(vr,{ref:p,visible:k.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:m.value,teleported:b.value,fallbackPlacements:y.value,transition:w.value,gpuAcceleration:!1},{content:()=>{var te;return at("div",{class:[`el-menu--${A.value}`,e.popperClass],onMouseenter:re=>F(re,100),onMouseleave:()=>M(!0),onFocus:re=>F(re,100)},[at("ul",{class:["el-menu el-menu--popup",`el-menu--popup-${m.value}`],style:J.value},[(te=t.default)==null?void 0:te.call(t)])])},default:()=>at("div",{class:"el-sub-menu__title",style:[o.value,L.value,{backgroundColor:C.value}],onClick:H},Y)}):at(lt,{},[at("div",{class:"el-sub-menu__title",style:[o.value,L.value,{backgroundColor:C.value}],ref:h,onClick:H},Y),at(_y,{},{default:()=>{var te;return It(at("ul",{role:"menu",class:"el-menu el-menu--inline",style:J.value},[(te=t.default)==null?void 0:te.call(t)]),[[cn,k.value]])}})]);return at("li",{class:["el-sub-menu",{"is-active":x.value,"is-opened":k.value,"is-disabled":e.disabled}],role:"menuitem",ariaHaspopup:!0,ariaExpanded:k.value,onMouseenter:F,onMouseleave:()=>M(!0),onFocus:F},[ee])}}});const rye=pt({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Qe(Array),default:()=>gs([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0}}),R2=e=>Array.isArray(e)&&e.every(t=>Bt(t)),iye={close:(e,t)=>Bt(e)&&R2(t),open:(e,t)=>Bt(e)&&R2(t),select:(e,t,n,s)=>Bt(e)&&R2(t)&&rn(n)&&(s===void 0||s instanceof Promise)};var aye=xe({name:"ElMenu",props:rye,emits:iye,setup(e,{emit:t,slots:n,expose:s}){const o=jt(),r=o.appContext.config.globalProperties.$router,i=j(),a=j(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),l=j(e.defaultActive),u=j({}),c=j({}),d=O(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),f=()=>{const k=l.value&&u.value[l.value];if(!k||e.mode==="horizontal"||e.collapse)return;k.indexPath.forEach(C=>{const S=c.value[C];S&&h(C,S.indexPath)})},h=(k,x)=>{a.value.includes(k)||(e.uniqueOpened&&(a.value=a.value.filter(C=>x.includes(C))),a.value.push(k),t("open",k,x))},p=(k,x)=>{const C=a.value.indexOf(k);C!==-1&&a.value.splice(C,1),t("close",k,x)},m=({index:k,indexPath:x})=>{a.value.includes(k)?p(k,x):h(k,x)},g=k=>{(e.mode==="horizontal"||e.collapse)&&(a.value=[]);const{index:x,indexPath:C}=k;if(!(x===void 0||C===void 0))if(e.router&&r){const S=k.route||x,T=r.push(S).then(A=>(A||(l.value=x),A));t("select",x,C,{index:x,indexPath:C,route:S},T)}else l.value=x,t("select",x,C,{index:x,indexPath:C})},v=k=>{const x=u.value,C=x[k]||l.value&&x[l.value]||x[e.defaultActive];C?(l.value=C.index,f()):l.value=k},b=()=>{vt(()=>o.proxy.$forceUpdate())};We(()=>e.defaultActive,k=>{u.value[k]||(l.value=""),v(k)}),We(u.value,()=>f()),We(()=>e.collapse,k=>{k&&(a.value=[])});{const k=T=>{c.value[T.index]=T},x=T=>{delete c.value[T.index]};Gt("rootMenu",vn({props:e,openedMenus:a,items:u,subMenus:c,activeIndex:l,isMenuPopup:d,addMenuItem:T=>{u.value[T.index]=T},removeMenuItem:T=>{delete u.value[T.index]},addSubMenu:k,removeSubMenu:x,openMenu:h,closeMenu:p,handleMenuItemClick:g,handleSubMenuClick:m})),Gt(`subMenu:${o.uid}`,{addSubMenu:k,removeSubMenu:x,mouseInChild:j(!1)})}Ft(()=>{f(),e.mode==="horizontal"&&new Qbe(o.vnode.el)}),s({open:x=>{const{indexPath:C}=c.value[x];C.forEach(S=>h(S,C))},close:p,handleResize:b});const w=k=>{const x=Array.isArray(k)?k:[k],C=[];return x.forEach(S=>{Array.isArray(S.children)?C.push(...w(S.children)):C.push(S)}),C},y=k=>e.mode==="horizontal"?It(k,[[fde,b]]):k;return()=>{var k,x,C,S;let T=(x=(k=n.default)==null?void 0:k.call(n))!=null?x:[];const A=[];if(e.mode==="horizontal"&&i.value){const V=Array.from((S=(C=i.value)==null?void 0:C.childNodes)!=null?S:[]).filter($e=>$e.nodeName!=="#text"||$e.nodeValue),H=w(T),F=64,M=Number.parseInt(getComputedStyle(i.value).paddingLeft,10),B=Number.parseInt(getComputedStyle(i.value).paddingRight,10),Y=i.value.clientWidth-M-B;let J=0,ee=0;V.forEach(($e,se)=>{J+=$e.offsetWidth||0,J<=Y-F&&(ee=se+1)});const te=H.slice(0,ee),re=H.slice(ee);(re==null?void 0:re.length)&&e.ellipsis&&(T=te,A.push(at(iS,{index:"sub-menu-more",class:"el-sub-menu__hide-arrow"},{title:()=>at(xt,{class:["el-sub-menu__icon-more"]},{default:()=>at(Yoe)}),default:()=>re})))}const R=cB(e),P=(V=>e.ellipsis?y(V):V)(at("ul",{key:String(e.collapse),role:"menubar",ref:i,style:R.value,class:{"el-menu":!0,"el-menu--horizontal":e.mode==="horizontal","el-menu--collapse":e.collapse}},[...T,...A]));return e.collapseTransition&&e.mode==="vertical"?at(nye,()=>P):P}}});const lye=pt({index:{type:Qe([String,null]),default:null},route:{type:Qe([String,Object])},disabled:Boolean}),uye={click:e=>Bt(e.index)&&Array.isArray(e.indexPath)},M2="ElMenuItem",cye=xe({name:M2,components:{ElTooltip:vr},props:lye,emits:uye,setup(e,{emit:t}){const n=jt(),s=rt("rootMenu");s||Fs(M2,"can not inject root menu");const{parentMenu:o,paddingStyle:r,indexPath:i}=uB(n,qs(e,"index")),a=rt(`subMenu:${o.value.uid}`);a||Fs(M2,"can not inject sub menu");const l=O(()=>e.index===s.activeIndex),u=vn({index:e.index,indexPath:i,active:l}),c=()=>{e.disabled||(s.handleMenuItemClick({index:e.index,indexPath:i.value,route:e.route}),t("click",u))};return Ft(()=>{a.addSubMenu(u),s.addMenuItem(u)}),qn(()=>{a.removeSubMenu(u),s.removeMenuItem(u)}),{Effect:Aue,parentMenu:o,rootMenu:s,paddingStyle:r,active:l,handleClick:c}}}),dye={class:"el-menu-tooltip__trigger"};function fye(e,t,n,s,o,r){const i=Ne("el-tooltip");return _(),U("li",{class:W(["el-menu-item",{"is-active":e.active,"is-disabled":e.disabled}]),role:"menuitem",tabindex:"-1",style:it(e.paddingStyle),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(_(),ye(i,{key:0,effect:e.Effect.DARK,placement:"right","fallback-placements":["left"],persistent:""},{content:de(()=>[Pe(e.$slots,"title")]),default:de(()=>[q("div",dye,[Pe(e.$slots,"default")])]),_:3},8,["effect"])):(_(),U(lt,{key:1},[Pe(e.$slots,"default"),Pe(e.$slots,"title")],64))],6)}var dB=Ye(cye,[["render",fye],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const hye={title:String},VD="ElMenuItemGroup",pye=xe({name:VD,props:hye,setup(){const e=jt(),t=rt("rootMenu");return t||Fs(VD,"can not inject root menu"),{levelPadding:O(()=>{if(t.props.collapse)return 20;let s=20,o=e.parent;for(;o&&o.type.name!=="ElMenu";)o.type.name==="ElSubMenu"&&(s+=20),o=o.parent;return s})}}}),mye={class:"el-menu-item-group"};function gye(e,t,n,s,o,r){return _(),U("li",mye,[q("div",{class:"el-menu-item-group__title",style:it({paddingLeft:`${e.levelPadding}px`})},[e.$slots.title?Pe(e.$slots,"title",{key:1}):(_(),U(lt,{key:0},[Yt(He(e.title),1)],2112))],4),q("ul",null,[Pe(e.$slots,"default")])])}var fB=Ye(pye,[["render",gye],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const vye=Kt(aye,{MenuItem:dB,MenuItemGroup:fB,SubMenu:iS}),bye=ws(dB),yye=ws(fB);ws(iS);const wye=pt({icon:{type:Mo,default:()=>Fne},title:String,content:{type:String,default:""}}),kye={back:()=>!0},xye={name:"ElPageHeader"},Cye=xe(nt(Me({},xye),{props:wye,emits:kye,setup(e,{emit:t}){const{t:n}=Dn(),s=Xe("page-header");function o(){t("back")}return(r,i)=>(_(),U("div",{class:W(N(s).b())},[q("div",{class:W(N(s).e("left")),onClick:o},[r.icon||r.$slots.icon?(_(),U("div",{key:0,class:W(N(s).e("icon"))},[Pe(r.$slots,"icon",{},()=>[r.icon?(_(),ye(N(xt),{key:0},{default:de(()=>[(_(),ye(an(r.icon)))]),_:1})):me("v-if",!0)])],2)):me("v-if",!0),q("div",{class:W(N(s).e("title"))},[Pe(r.$slots,"title",{},()=>[Yt(He(r.title||N(n)("el.pageHeader.title")),1)])],2)],2),q("div",{class:W(N(s).e("content"))},[Pe(r.$slots,"content",{},()=>[Yt(He(r.content),1)])],2)],2))}}));var $ye=Ye(Cye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const Sye=Kt($ye),Iye={disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String,default:""}},Eye=xe({name:"ElPaginationPrev",components:{ElIcon:xt,ArrowLeft:jc},props:Iye,emits:["click"],setup(e){return{internalDisabled:O(()=>e.disabled||e.currentPage<=1)}}}),Tye=["disabled","aria-disabled"],_ye={key:0};function Nye(e,t,n,s,o,r){const i=Ne("arrow-left"),a=Ne("el-icon");return _(),U("button",{type:"button",class:"btn-prev",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:t[0]||(t[0]=l=>e.$emit("click",l))},[e.prevText?(_(),U("span",_ye,He(e.prevText),1)):(_(),ye(a,{key:1},{default:de(()=>[fe(i)]),_:1}))],8,Tye)}var Aye=Ye(Eye,[["render",Nye],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const Dye={disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String,default:""}},Rye=xe({name:"ElPaginationNext",components:{ElIcon:xt,ArrowRight:bi},props:Dye,emits:["click"],setup(e){return{internalDisabled:O(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0)}}}),Mye=["disabled","aria-disabled"],Oye={key:0};function Pye(e,t,n,s,o,r){const i=Ne("arrow-right"),a=Ne("el-icon");return _(),U("button",{type:"button",class:"btn-next",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:t[0]||(t[0]=l=>e.$emit("click",l))},[e.nextText?(_(),U("span",Oye,He(e.nextText),1)):(_(),ye(a,{key:1},{default:de(()=>[fe(i)]),_:1}))],8,Mye)}var Fye=Ye(Rye,[["render",Pye],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const hB="ElSelectGroup",Ny="ElSelect";function Lye(e,t){const n=rt(Ny),s=rt(hB,{disabled:!1}),o=O(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),r=O(()=>n.props.multiple?d(n.props.modelValue,e.value):f(e.value,n.props.modelValue)),i=O(()=>{if(n.props.multiple){const m=n.props.modelValue||[];return!r.value&&m.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),a=O(()=>e.label||(o.value?"":e.value)),l=O(()=>e.value||e.label||""),u=O(()=>e.disabled||t.groupDisabled||i.value),c=jt(),d=(m=[],g)=>{if(o.value){const v=n.props.valueKey;return m&&m.some(b=>ps(b,v)===ps(g,v))}else return m&&m.includes(g)},f=(m,g)=>{if(o.value){const{valueKey:v}=n.props;return ps(m,v)===ps(g,v)}else return m===g},h=()=>{!e.disabled&&!s.disabled&&(n.hoverIndex=n.optionsArray.indexOf(c.proxy))};We(()=>a.value,()=>{!e.created&&!n.props.remote&&n.setSelected()}),We(()=>e.value,(m,g)=>{const{remote:v,valueKey:b}=n.props;if(!e.created&&!v){if(b&&typeof m=="object"&&typeof g=="object"&&m[b]===g[b])return;n.setSelected()}}),We(()=>s.disabled,()=>{t.groupDisabled=s.disabled},{immediate:!0});const{queryChange:p}=_n(n);return We(p,m=>{const{query:g}=N(m),v=new RegExp(ane(g),"i");t.visible=v.test(a.value)||e.created,t.visible||n.filteredOptionsCount--}),{select:n,currentLabel:a,currentValue:l,itemSelected:r,isDisabled:u,hoverItem:h}}const Bye=xe({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(e){const t=Xe("select"),n=vn({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:s,itemSelected:o,isDisabled:r,select:i,hoverItem:a}=Lye(e,n),{visible:l,hover:u}=oo(n),c=jt().proxy,d=c.value;i.onOptionCreate(c),qn(()=>{const{selected:h}=i,m=(i.props.multiple?h:[h]).some(g=>g.value===c.value);i.cachedOptions.get(d)===c&&!m&&vt(()=>{i.cachedOptions.delete(d)}),i.onOptionDestroy(d,c)});function f(){e.disabled!==!0&&n.groupDisabled!==!0&&i.handleOptionSelect(c,!0)}return{ns:t,currentLabel:s,itemSelected:o,isDisabled:r,select:i,hoverItem:a,visible:l,hover:u,selectOptionClick:f,states:n}}});function zye(e,t,n,s,o,r){return It((_(),U("li",{class:W([e.ns.be("dropdown","item"),e.ns.is("disabled",e.isDisabled),{selected:e.itemSelected,hover:e.hover}]),onMouseenter:t[0]||(t[0]=(...i)=>e.hoverItem&&e.hoverItem(...i)),onClick:t[1]||(t[1]=wt((...i)=>e.selectOptionClick&&e.selectOptionClick(...i),["stop"]))},[Pe(e.$slots,"default",{},()=>[q("span",null,He(e.currentLabel),1)])],34)),[[cn,e.visible]])}var aS=Ye(Bye,[["render",zye],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const Vye=xe({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=rt(Ny),t=Xe("select"),n=O(()=>e.props.popperClass),s=O(()=>e.props.multiple),o=O(()=>e.props.fitInputWidth),r=j("");function i(){var a;r.value=`${(a=e.selectWrapper)==null?void 0:a.getBoundingClientRect().width}px`}return Ft(()=>{i(),Bf(e.selectWrapper,i)}),qn(()=>{zf(e.selectWrapper,i)}),{ns:t,minWidth:r,popperClass:n,isMultiple:s,isFitInputWidth:o}}});function Wye(e,t,n,s,o,r){return _(),U("div",{class:W([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:it({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[Pe(e.$slots,"default")],6)}var Hye=Ye(Vye,[["render",Wye],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function Uye(e){const{t}=Dn();return vn({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:t("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:11,tagInMultiLine:!1})}const jye=(e,t,n)=>{const{t:s}=Dn(),o=Xe("select"),r=j(null),i=j(null),a=j(null),l=j(null),u=j(null),c=j(null),d=j(-1),f=Ns({query:""}),h=Ns(""),p=rt(Lr,{}),m=rt(di,{}),g=O(()=>!e.filterable||e.multiple||!t.visible),v=O(()=>e.disabled||p.disabled),b=O(()=>{const I=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!v.value&&t.inputHovering&&I}),w=O(()=>e.remote&&e.filterable?"":e.suffixIcon),y=O(()=>o.is("reverse",w.value&&t.visible)),k=O(()=>e.remote?300:0),x=O(()=>e.loading?e.loadingText||s("el.select.loading"):e.remote&&t.query===""&&t.options.size===0?!1:e.filterable&&t.query&&t.options.size>0&&t.filteredOptionsCount===0?e.noMatchText||s("el.select.noMatch"):t.options.size===0?e.noDataText||s("el.select.noData"):null),C=O(()=>Array.from(t.options.values())),S=O(()=>Array.from(t.cachedOptions.values())),T=O(()=>{const I=C.value.filter(G=>!G.created).some(G=>G.currentLabel===t.query);return e.filterable&&e.allowCreate&&t.query!==""&&!I}),A=Ls(),R=O(()=>["small"].includes(A.value)?"small":"default"),L=O({get(){return t.visible&&x.value!==!1},set(I){t.visible=I}});We(()=>v.value,()=>{vt(()=>{P()})}),We(()=>e.placeholder,I=>{t.cachedPlaceHolder=t.currentPlaceholder=I}),We(()=>e.modelValue,(I,G)=>{var Z;e.multiple&&(P(),I&&I.length>0||i.value&&t.query!==""?t.currentPlaceholder="":t.currentPlaceholder=t.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(t.query="",V(t.query))),M(),e.filterable&&!e.multiple&&(t.inputLength=20),Zo(I,G)||(Z=m.validate)==null||Z.call(m,"change").catch(he=>void 0)},{flush:"post",deep:!0}),We(()=>t.visible,I=>{var G,Z,he;I?((Z=(G=a.value)==null?void 0:G.updatePopper)==null||Z.call(G),e.filterable&&(t.filteredOptionsCount=t.optionsCount,t.query=e.remote?"":t.selectedLabel,e.multiple?(he=i.value)==null||he.focus():t.selectedLabel&&(t.currentPlaceholder=`${t.selectedLabel}`,t.selectedLabel=""),V(t.query),!e.multiple&&!e.remote&&(f.value.query="",gh(f),gh(h)))):(i.value&&i.value.blur(),t.query="",t.previousQuery=null,t.selectedLabel="",t.inputLength=20,t.menuVisibleOnFocus=!1,Y(),vt(()=>{i.value&&i.value.value===""&&t.selected.length===0&&(t.currentPlaceholder=t.cachedPlaceHolder)}),e.multiple||(t.selected&&(e.filterable&&e.allowCreate&&t.createdSelected&&t.createdLabel?t.selectedLabel=t.createdLabel:t.selectedLabel=t.selected.currentLabel,e.filterable&&(t.query=t.selectedLabel)),e.filterable&&(t.currentPlaceholder=t.cachedPlaceHolder))),n.emit("visible-change",I)}),We(()=>t.options.entries(),()=>{var I,G,Z;if(!sn)return;(G=(I=a.value)==null?void 0:I.updatePopper)==null||G.call(I),e.multiple&&P();const he=((Z=u.value)==null?void 0:Z.querySelectorAll("input"))||[];Array.from(he).includes(document.activeElement)||M(),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&F()},{flush:"post"}),We(()=>t.hoverIndex,I=>{typeof I=="number"&&I>-1&&(d.value=C.value[I]||{}),C.value.forEach(G=>{G.hover=d.value===G})});const P=()=>{e.collapseTags&&!e.filterable||vt(()=>{var I,G;if(!r.value)return;const Z=r.value.$el.childNodes,he=Array.from(Z).find(Lt=>Lt.tagName==="INPUT"),Te=l.value,bt=t.initialInputHeight||40;he.style.height=t.selected.length===0?`${bt}px`:`${Math.max(Te?Te.clientHeight+(Te.clientHeight>bt?6:0):0,bt)}px`,t.tagInMultiLine=Number.parseFloat(he.style.height)>=bt,t.visible&&x.value!==!1&&((G=(I=a.value)==null?void 0:I.updatePopper)==null||G.call(I))})},V=I=>{if(!(t.previousQuery===I||t.isOnComposition)){if(t.previousQuery===null&&(typeof e.filterMethod=="function"||typeof e.remoteMethod=="function")){t.previousQuery=I;return}t.previousQuery=I,vt(()=>{var G,Z;t.visible&&((Z=(G=a.value)==null?void 0:G.updatePopper)==null||Z.call(G))}),t.hoverIndex=-1,e.multiple&&e.filterable&&vt(()=>{const G=i.value.value.length*15+20;t.inputLength=e.collapseTags?Math.min(50,G):G,H(),P()}),e.remote&&typeof e.remoteMethod=="function"?(t.hoverIndex=-1,e.remoteMethod(I)):typeof e.filterMethod=="function"?(e.filterMethod(I),gh(h)):(t.filteredOptionsCount=t.optionsCount,f.value.query=I,gh(f),gh(h)),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&F()}},H=()=>{t.currentPlaceholder!==""&&(t.currentPlaceholder=i.value.value?"":t.cachedPlaceHolder)},F=()=>{const I=C.value.filter(he=>he.visible&&!he.disabled&&!he.states.groupDisabled),G=I.find(he=>he.created),Z=I[0];t.hoverIndex=Be(C.value,G||Z)},M=()=>{var I;if(e.multiple)t.selectedLabel="";else{const Z=B(e.modelValue);(I=Z.props)!=null&&I.created?(t.createdLabel=Z.props.value,t.createdSelected=!0):t.createdSelected=!1,t.selectedLabel=Z.currentLabel,t.selected=Z,e.filterable&&(t.query=t.selectedLabel);return}const G=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(Z=>{G.push(B(Z))}),t.selected=G,vt(()=>{P()})},B=I=>{let G;const Z=av(I).toLowerCase()==="object",he=av(I).toLowerCase()==="null",Te=av(I).toLowerCase()==="undefined";for(let Dt=t.cachedOptions.size-1;Dt>=0;Dt--){const qt=S.value[Dt];if(Z?ps(qt,e.valueKey)===ps(I,e.valueKey):qt.value===I){G={value:I,currentLabel:qt.currentLabel,isDisabled:qt.isDisabled};break}}if(G)return G;const bt=Z?I.label:!he&&!Te?I:"",Lt={value:I,currentLabel:bt};return e.multiple&&(Lt.hitState=!1),Lt},Y=()=>{setTimeout(()=>{const I=e.valueKey;e.multiple?t.selected.length>0?t.hoverIndex=Math.min.apply(null,t.selected.map(G=>C.value.findIndex(Z=>ps(Z,I)===ps(G,I)))):t.hoverIndex=-1:t.hoverIndex=C.value.findIndex(G=>ft(G)===ft(t.selected))},300)},J=()=>{var I,G;ee(),(G=(I=a.value)==null?void 0:I.updatePopper)==null||G.call(I),e.multiple&&!e.filterable&&P()},ee=()=>{var I;t.inputWidth=(I=r.value)==null?void 0:I.$el.getBoundingClientRect().width},te=()=>{e.filterable&&t.query!==t.selectedLabel&&(t.query=t.selectedLabel,V(t.query))},re=hr(()=>{te()},k.value),$e=hr(I=>{V(I.target.value)},k.value),se=I=>{Zo(e.modelValue,I)||n.emit(ro,I)},Q=I=>{if(I.target.value.length<=0&&!Fe()){const G=e.modelValue.slice();G.pop(),n.emit(Ht,G),se(G)}I.target.value.length===1&&e.modelValue.length===0&&(t.currentPlaceholder=t.cachedPlaceHolder)},ae=(I,G)=>{const Z=t.selected.indexOf(G);if(Z>-1&&!v.value){const he=e.modelValue.slice();he.splice(Z,1),n.emit(Ht,he),se(he),n.emit("remove-tag",G.value)}I.stopPropagation()},pe=I=>{I.stopPropagation();const G=e.multiple?[]:"";if(typeof G!="string")for(const Z of t.selected)Z.isDisabled&&G.push(Z.value);n.emit(Ht,G),se(G),t.visible=!1,n.emit("clear")},ke=(I,G)=>{var Z;if(e.multiple){const he=(e.modelValue||[]).slice(),Te=Be(he,I.value);Te>-1?he.splice(Te,1):(e.multipleLimit<=0||he.length<e.multipleLimit)&&he.push(I.value),n.emit(Ht,he),se(he),I.created&&(t.query="",V(""),t.inputLength=20),e.filterable&&((Z=i.value)==null||Z.focus())}else n.emit(Ht,I.value),se(I.value),t.visible=!1;t.isSilentBlur=G,je(),!t.visible&&vt(()=>{qe(I)})},Be=(I=[],G)=>{if(!rn(G))return I.indexOf(G);const Z=e.valueKey;let he=-1;return I.some((Te,bt)=>ps(Te,Z)===ps(G,Z)?(he=bt,!0):!1),he},je=()=>{t.softFocus=!0;const I=i.value||r.value;I&&(I==null||I.focus())},qe=I=>{var G,Z,he,Te,bt;const Lt=Array.isArray(I)?I[0]:I;let Dt=null;if(Lt!=null&&Lt.value){const qt=C.value.filter(un=>un.value===Lt.value);qt.length>0&&(Dt=qt[0].$el)}if(a.value&&Dt){const qt=(Te=(he=(Z=(G=a.value)==null?void 0:G.popperRef)==null?void 0:Z.contentRef)==null?void 0:he.querySelector)==null?void 0:Te.call(he,`.${o.be("dropdown","wrap")}`);qt&&WF(qt,Dt)}(bt=c.value)==null||bt.handleScroll()},ne=I=>{t.optionsCount++,t.filteredOptionsCount++,t.options.set(I.value,I),t.cachedOptions.set(I.value,I)},ue=(I,G)=>{t.options.get(I)===G&&(t.optionsCount--,t.filteredOptionsCount--,t.options.delete(I))},Se=I=>{I.code!==ct.backspace&&Fe(!1),t.inputLength=i.value.value.length*15+20,P()},Fe=I=>{if(!Array.isArray(t.selected))return;const G=t.selected[t.selected.length-1];if(!!G)return I===!0||I===!1?(G.hitState=I,I):(G.hitState=!G.hitState,G.hitState)},Le=I=>{const G=I.target.value;if(I.type==="compositionend")t.isOnComposition=!1,vt(()=>V(G));else{const Z=G[G.length-1]||"";t.isOnComposition=!wy(Z)}},Ke=()=>{vt(()=>qe(t.selected))},ie=I=>{t.softFocus?t.softFocus=!1:((e.automaticDropdown||e.filterable)&&(e.filterable&&!t.visible&&(t.menuVisibleOnFocus=!0),t.visible=!0),n.emit("focus",I))},ge=()=>{var I;t.visible=!1,(I=r.value)==null||I.blur()},be=I=>{vt(()=>{t.isSilentBlur?t.isSilentBlur=!1:n.emit("blur",I)}),t.softFocus=!1},Ie=I=>{pe(I)},ot=()=>{t.visible=!1},ve=()=>{var I;e.automaticDropdown||v.value||(t.menuVisibleOnFocus?t.menuVisibleOnFocus=!1:t.visible=!t.visible,t.visible&&((I=i.value||r.value)==null||I.focus()))},Ve=()=>{t.visible?C.value[t.hoverIndex]&&ke(C.value[t.hoverIndex],void 0):ve()},ft=I=>rn(I.value)?ps(I.value,e.valueKey):I.value,K=O(()=>C.value.filter(I=>I.visible).every(I=>I.disabled)),E=I=>{if(!t.visible){t.visible=!0;return}if(!(t.options.size===0||t.filteredOptionsCount===0)&&!t.isOnComposition&&!K.value){I==="next"?(t.hoverIndex++,t.hoverIndex===t.options.size&&(t.hoverIndex=0)):I==="prev"&&(t.hoverIndex--,t.hoverIndex<0&&(t.hoverIndex=t.options.size-1));const G=C.value[t.hoverIndex];(G.disabled===!0||G.states.groupDisabled===!0||!G.visible)&&E(I),vt(()=>qe(d.value))}};return{optionsArray:C,selectSize:A,handleResize:J,debouncedOnInputChange:re,debouncedQueryChange:$e,deletePrevTag:Q,deleteTag:ae,deleteSelected:pe,handleOptionSelect:ke,scrollToOption:qe,readonly:g,resetInputHeight:P,showClose:b,iconComponent:w,iconReverse:y,showNewOption:T,collapseTagSize:R,setSelected:M,managePlaceholder:H,selectDisabled:v,emptyText:x,toggleLastOptionHitState:Fe,resetInputState:Se,handleComposition:Le,onOptionCreate:ne,onOptionDestroy:ue,handleMenuEnter:Ke,handleFocus:ie,blur:ge,handleBlur:be,handleClearClick:Ie,handleClose:ot,toggleMenu:ve,selectOption:Ve,getValueKey:ft,navigateOptions:E,dropMenuVisible:L,queryChange:f,groupQueryChange:h,reference:r,input:i,tooltipRef:a,tags:l,selectWrapper:u,scrollbar:c}},O2="ElSelect",Gye=xe({name:O2,componentName:O2,components:{ElInput:yi,ElSelectMenu:Hye,ElOption:aS,ElTag:Ty,ElScrollbar:ul,ElTooltip:vr,ElIcon:xt},directives:{ClickOutside:Gc},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:Pr},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:void 0},teleported:Eo.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Za},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:[String,Object],default:bm},tagType:nt(Me({},Q$.type),{default:"info"})},emits:[Ht,ro,"remove-tag","clear","visible-change","focus","blur"],setup(e,t){const n=Xe("select"),s=Xe("input"),{t:o}=Dn(),r=Uye(e),{optionsArray:i,selectSize:a,readonly:l,handleResize:u,collapseTagSize:c,debouncedOnInputChange:d,debouncedQueryChange:f,deletePrevTag:h,deleteTag:p,deleteSelected:m,handleOptionSelect:g,scrollToOption:v,setSelected:b,resetInputHeight:w,managePlaceholder:y,showClose:k,selectDisabled:x,iconComponent:C,iconReverse:S,showNewOption:T,emptyText:A,toggleLastOptionHitState:R,resetInputState:L,handleComposition:P,onOptionCreate:V,onOptionDestroy:H,handleMenuEnter:F,handleFocus:M,blur:B,handleBlur:Y,handleClearClick:J,handleClose:ee,toggleMenu:te,selectOption:re,getValueKey:$e,navigateOptions:se,dropMenuVisible:Q,reference:ae,input:pe,tooltipRef:ke,tags:Be,selectWrapper:je,scrollbar:qe,queryChange:ne,groupQueryChange:ue}=jye(e,r,t),{focus:Se}=Die(ae),{inputWidth:Fe,selected:Le,inputLength:Ke,filteredOptionsCount:ie,visible:ge,softFocus:be,selectedLabel:Ie,hoverIndex:ot,query:ve,inputHovering:Ve,currentPlaceholder:ft,menuVisibleOnFocus:K,isOnComposition:E,isSilentBlur:I,options:G,cachedOptions:Z,optionsCount:he,prefixWidth:Te,tagInMultiLine:bt}=oo(r),Lt=O(()=>{const Lo=[n.b()],$o=N(a);return $o&&Lo.push(n.m($o)),e.disabled&&Lo.push(n.m("disabled")),Lo}),Dt=O(()=>({maxWidth:`${N(Fe)-32}px`,width:"100%"}));Gt(Ny,vn({props:e,options:G,optionsArray:i,cachedOptions:Z,optionsCount:he,filteredOptionsCount:ie,hoverIndex:ot,handleOptionSelect:g,onOptionCreate:V,onOptionDestroy:H,selectWrapper:je,selected:Le,setSelected:b,queryChange:ne,groupQueryChange:ue})),Ft(()=>{if(r.cachedPlaceHolder=ft.value=e.placeholder||o("el.select.placeholder"),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(ft.value=""),Bf(je.value,u),ae.value&&ae.value.$el){const Lo={large:36,default:32,small:28},$o=ae.value.input;r.initialInputHeight=$o.getBoundingClientRect().height||Lo[a.value]}e.remote&&e.multiple&&w(),vt(()=>{if(!!ae.value&&(ae.value.$el&&(Fe.value=ae.value.$el.getBoundingClientRect().width),t.slots.prefix)){const Lo=ae.value.$el.childNodes,$o=Array.from(Lo).find(ku=>ku.tagName==="INPUT"),Ea=ae.value.$el.querySelector(`.${s.e("prefix")}`);Te.value=Math.max(Ea.getBoundingClientRect().width+5,30),r.prefixWidth&&($o.style.paddingLeft=`${Math.max(r.prefixWidth,30)}px`)}}),b()}),qn(()=>{zf(je.value,u)}),e.multiple&&!Array.isArray(e.modelValue)&&t.emit(Ht,[]),!e.multiple&&Array.isArray(e.modelValue)&&t.emit(Ht,"");const qt=O(()=>{var Lo,$o;return($o=(Lo=ke.value)==null?void 0:Lo.popperRef)==null?void 0:$o.contentRef}),{compatTeleported:un}=Uf(O2,"popperAppendToBody");return{tagInMultiLine:bt,prefixWidth:Te,selectSize:a,readonly:l,handleResize:u,collapseTagSize:c,debouncedOnInputChange:d,debouncedQueryChange:f,deletePrevTag:h,deleteTag:p,deleteSelected:m,handleOptionSelect:g,scrollToOption:v,inputWidth:Fe,selected:Le,inputLength:Ke,filteredOptionsCount:ie,visible:ge,softFocus:be,selectedLabel:Ie,hoverIndex:ot,query:ve,inputHovering:Ve,currentPlaceholder:ft,menuVisibleOnFocus:K,isOnComposition:E,isSilentBlur:I,options:G,resetInputHeight:w,managePlaceholder:y,showClose:k,selectDisabled:x,iconComponent:C,iconReverse:S,showNewOption:T,emptyText:A,toggleLastOptionHitState:R,resetInputState:L,handleComposition:P,handleMenuEnter:F,handleFocus:M,blur:B,handleBlur:Y,handleClearClick:J,handleClose:ee,toggleMenu:te,selectOption:re,getValueKey:$e,navigateOptions:se,dropMenuVisible:Q,focus:Se,reference:ae,input:pe,tooltipRef:ke,popperPaneRef:qt,tags:Be,selectWrapper:je,scrollbar:qe,wrapperKls:Lt,selectTagsStyle:Dt,compatTeleported:un,nsSelect:n}}}),Kye={class:"select-trigger"},qye=["disabled","autocomplete"],Yye={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function Xye(e,t,n,s,o,r){const i=Ne("el-tag"),a=Ne("el-tooltip"),l=Ne("el-icon"),u=Ne("el-input"),c=Ne("el-option"),d=Ne("el-scrollbar"),f=Ne("el-select-menu"),h=Or("click-outside");return It((_(),U("div",{ref:"selectWrapper",class:W(e.wrapperKls),onClick:t[24]||(t[24]=wt((...p)=>e.toggleMenu&&e.toggleMenu(...p),["stop"]))},[fe(a,{ref:"tooltipRef",visible:e.dropMenuVisible,"onUpdate:visible":t[23]||(t[23]=p=>e.dropMenuVisible=p),placement:"bottom-start",teleported:e.compatTeleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onShow:e.handleMenuEnter},{default:de(()=>[q("div",Kye,[e.multiple?(_(),U("div",{key:0,ref:"tags",class:W(e.nsSelect.e("tags")),style:it(e.selectTagsStyle)},[e.collapseTags&&e.selected.length?(_(),U("span",{key:0,class:W([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[fe(i,{closable:!e.selectDisabled&&!e.selected[0].isDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:e.tagType,"disable-transitions":"",onClose:t[0]||(t[0]=p=>e.deleteTag(p,e.selected[0]))},{default:de(()=>[q("span",{class:W(e.nsSelect.e("tags-text")),style:it({maxWidth:e.inputWidth-123+"px"})},He(e.selected[0].currentLabel),7)]),_:1},8,["closable","size","hit","type"]),e.selected.length>1?(_(),ye(i,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:de(()=>[e.collapseTagsTooltip?(_(),ye(a,{key:0,disabled:e.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:!1},{default:de(()=>[q("span",{class:W(e.nsSelect.e("tags-text"))},"+ "+He(e.selected.length-1),3)]),content:de(()=>[q("div",{class:W(e.nsSelect.e("collapse-tags"))},[(_(!0),U(lt,null,Zt(e.selected,(p,m)=>(_(),U("div",{key:m,class:W(e.nsSelect.e("collapse-tag"))},[(_(),ye(i,{key:e.getValueKey(p),class:"in-tooltip",closable:!e.selectDisabled&&!p.isDisabled,size:e.collapseTagSize,hit:p.hitState,type:e.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:g=>e.deleteTag(g,p)},{default:de(()=>[q("span",{class:W(e.nsSelect.e("tags-text")),style:it({maxWidth:e.inputWidth-75+"px"})},He(p.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect"])):(_(),U("span",{key:1,class:W(e.nsSelect.e("tags-text"))},"+ "+He(e.selected.length-1),3))]),_:1},8,["size","type"])):me("v-if",!0)],2)):me("v-if",!0),me(" <div> "),e.collapseTags?me("v-if",!0):(_(),ye(Rs,{key:1,onAfterLeave:e.resetInputHeight},{default:de(()=>[q("span",{class:W([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[(_(!0),U(lt,null,Zt(e.selected,p=>(_(),ye(i,{key:e.getValueKey(p),closable:!e.selectDisabled&&!p.isDisabled,size:e.collapseTagSize,hit:p.hitState,type:e.tagType,"disable-transitions":"",onClose:m=>e.deleteTag(m,p)},{default:de(()=>[q("span",{class:W(e.nsSelect.e("tags-text")),style:it({maxWidth:e.inputWidth-75+"px"})},He(p.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],2)]),_:1},8,["onAfterLeave"])),me(" </div> "),e.filterable?It((_(),U("input",{key:2,ref:"input","onUpdate:modelValue":t[1]||(t[1]=p=>e.query=p),type:"text",class:W([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:it({marginLeft:e.prefixWidth&&!e.selected.length||e.tagInMultiLine?`${e.prefixWidth}px`:"",flexGrow:1,width:`${e.inputLength/(e.inputWidth-32)}%`,maxWidth:`${e.inputWidth-42}px`}),onFocus:t[2]||(t[2]=(...p)=>e.handleFocus&&e.handleFocus(...p)),onBlur:t[3]||(t[3]=(...p)=>e.handleBlur&&e.handleBlur(...p)),onKeyup:t[4]||(t[4]=(...p)=>e.managePlaceholder&&e.managePlaceholder(...p)),onKeydown:[t[5]||(t[5]=(...p)=>e.resetInputState&&e.resetInputState(...p)),t[6]||(t[6]=Qt(wt(p=>e.navigateOptions("next"),["prevent"]),["down"])),t[7]||(t[7]=Qt(wt(p=>e.navigateOptions("prev"),["prevent"]),["up"])),t[8]||(t[8]=Qt(wt(p=>e.visible=!1,["stop","prevent"]),["esc"])),t[9]||(t[9]=Qt(wt((...p)=>e.selectOption&&e.selectOption(...p),["stop","prevent"]),["enter"])),t[10]||(t[10]=Qt((...p)=>e.deletePrevTag&&e.deletePrevTag(...p),["delete"])),t[11]||(t[11]=Qt(p=>e.visible=!1,["tab"]))],onCompositionstart:t[12]||(t[12]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onCompositionupdate:t[13]||(t[13]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onCompositionend:t[14]||(t[14]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onInput:t[15]||(t[15]=(...p)=>e.debouncedQueryChange&&e.debouncedQueryChange(...p))},null,46,qye)),[[f$,e.query]]):me("v-if",!0)],6)):me("v-if",!0),fe(u,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":t[16]||(t[16]=p=>e.selectedLabel=p),type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:W([e.nsSelect.is("focus",e.visible)]),tabindex:e.multiple&&e.filterable?-1:void 0,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[t[17]||(t[17]=Qt(wt(p=>e.navigateOptions("next"),["stop","prevent"]),["down"])),t[18]||(t[18]=Qt(wt(p=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),Qt(wt(e.selectOption,["stop","prevent"]),["enter"]),t[19]||(t[19]=Qt(wt(p=>e.visible=!1,["stop","prevent"]),["esc"])),t[20]||(t[20]=Qt(p=>e.visible=!1,["tab"]))],onMouseenter:t[21]||(t[21]=p=>e.inputHovering=!0),onMouseleave:t[22]||(t[22]=p=>e.inputHovering=!1)},Yl({suffix:de(()=>[e.iconComponent?It((_(),ye(l,{key:0,class:W([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:de(()=>[(_(),ye(an(e.iconComponent)))]),_:1},8,["class"])),[[cn,!e.showClose]]):me("v-if",!0),e.showClose&&e.clearIcon?(_(),ye(l,{key:1,class:W([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:de(()=>[(_(),ye(an(e.clearIcon)))]),_:1},8,["class","onClick"])):me("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:de(()=>[q("div",Yye,[Pe(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])])]),content:de(()=>[fe(f,null,{default:de(()=>[It(fe(d,{ref:"scrollbar",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:W([e.nsSelect.is("empty",!e.allowCreate&&Boolean(e.query)&&e.filteredOptionsCount===0)])},{default:de(()=>[e.showNewOption?(_(),ye(c,{key:0,value:e.query,created:!0},null,8,["value"])):me("v-if",!0),Pe(e.$slots,"default")]),_:3},8,["wrap-class","view-class","class"]),[[cn,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(_(),U(lt,{key:0},[e.$slots.empty?Pe(e.$slots,"empty",{key:0}):(_(),U("p",{key:1,class:W(e.nsSelect.be("dropdown","empty"))},He(e.emptyText),3))],2112)):me("v-if",!0)]),_:3})]),_:3},8,["visible","teleported","popper-class","effect","transition","persistent","onShow"])],2)),[[h,e.handleClose,e.popperPaneRef]])}var Zye=Ye(Gye,[["render",Xye],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const Jye=xe({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(e){const t=Xe("select"),n=j(!0),s=jt(),o=j([]);Gt(hB,vn(Me({},oo(e))));const r=rt(Ny);Ft(()=>{o.value=i(s.subTree)});const i=l=>{const u=[];return Array.isArray(l.children)&&l.children.forEach(c=>{var d;c.type&&c.type.name==="ElOption"&&c.component&&c.component.proxy?u.push(c.component.proxy):(d=c.children)!=null&&d.length&&u.push(...i(c))}),u},{groupQueryChange:a}=_n(r);return We(a,()=>{n.value=o.value.some(l=>l.visible===!0)}),{visible:n,ns:t}}});function Qye(e,t,n,s,o,r){return It((_(),U("ul",{class:W(e.ns.be("group","wrap"))},[q("li",{class:W(e.ns.be("group","title"))},He(e.label),3),q("li",null,[q("ul",{class:W(e.ns.b("group"))},[Pe(e.$slots,"default")],2)])],2)),[[cn,e.visible]])}var pB=Ye(Jye,[["render",Qye],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const kc=Kt(Zye,{Option:aS,OptionGroup:pB}),ib=ws(aS),e1e=ws(pB),lS=()=>rt(i4,{}),t1e=pt({pageSize:{type:Number,required:!0},pageSizes:{type:Qe(Array),default:()=>gs([10,20,30,40,50,100])},popperClass:{type:String,default:""},disabled:Boolean,size:{type:String,default:"default"}}),n1e=xe({name:"ElPaginationSizes",components:{ElSelect:kc,ElOption:ib},props:t1e,emits:["page-size-change"],setup(e,{emit:t}){const{t:n}=Dn(),s=Xe("pagination"),o=lS(),r=j(e.pageSize);We(()=>e.pageSizes,(l,u)=>{if(!Zo(l,u)&&Array.isArray(l)){const c=l.includes(e.pageSize)?e.pageSize:e.pageSizes[0];t("page-size-change",c)}}),We(()=>e.pageSize,l=>{r.value=l});const i=O(()=>e.pageSizes);function a(l){var u;l!==r.value&&(r.value=l,(u=o.handleSizeChange)==null||u.call(o,Number(l)))}return{ns:s,innerPagesizes:i,innerPageSize:r,t:n,handleChange:a}}});function s1e(e,t,n,s,o,r){const i=Ne("el-option"),a=Ne("el-select");return _(),U("span",{class:W(e.ns.e("sizes"))},[fe(a,{"model-value":e.innerPageSize,disabled:e.disabled,"popper-class":e.popperClass,size:e.size,onChange:e.handleChange},{default:de(()=>[(_(!0),U(lt,null,Zt(e.innerPagesizes,l=>(_(),ye(i,{key:l,value:l,label:l+e.t("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","onChange"])],2)}var o1e=Ye(n1e,[["render",s1e],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const r1e=xe({name:"ElPaginationJumper",components:{ElInput:yi},setup(){const{t:e}=Dn(),t=Xe("pagination"),{pageCount:n,disabled:s,currentPage:o,changeEvent:r}=lS(),i=j(),a=O(()=>{var c;return(c=i.value)!=null?c:o==null?void 0:o.value});function l(c){i.value=+c}function u(c){c=Math.trunc(+c),r==null||r(+c),i.value=void 0}return{ns:t,pageCount:n,disabled:s,innerValue:a,t:e,handleInput:l,handleChange:u}}}),i1e=["disabled"];function a1e(e,t,n,s,o,r){const i=Ne("el-input");return _(),U("span",{class:W(e.ns.e("jump")),disabled:e.disabled},[Yt(He(e.t("el.pagination.goto"))+" ",1),fe(i,{size:"small",class:W([e.ns.e("editor"),e.ns.is("in-pagination")]),min:1,max:e.pageCount,disabled:e.disabled,"model-value":e.innerValue,type:"number","onUpdate:modelValue":e.handleInput,onChange:e.handleChange},null,8,["class","max","disabled","model-value","onUpdate:modelValue","onChange"]),Yt(" "+He(e.t("el.pagination.pageClassifier")),1)],10,i1e)}var l1e=Ye(r1e,[["render",a1e],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const u1e={total:{type:Number,default:1e3}},c1e=xe({name:"ElPaginationTotal",props:u1e,setup(){const{t:e}=Dn(),t=Xe("pagination"),{disabled:n}=lS();return{t:e,ns:t,disabled:n}}}),d1e=["disabled"];function f1e(e,t,n,s,o,r){return _(),U("span",{class:W(e.ns.e("total")),disabled:e.disabled},He(e.t("el.pagination.total",{total:e.total})),11,d1e)}var h1e=Ye(c1e,[["render",f1e],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const p1e={currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean},m1e=xe({name:"ElPaginationPager",components:{DArrowLeft:vy,DArrowRight:by,MoreFilled:Hoe},props:p1e,emits:["change"],setup(e,{emit:t}){const n=Xe("pager"),s=Xe("icon"),o=j(!1),r=j(!1),i=j(!1),a=j(!1),l=O(()=>{const f=e.pagerCount,h=(f-1)/2,p=Number(e.currentPage),m=Number(e.pageCount);let g=!1,v=!1;m>f&&(p>f-h&&(g=!0),p<m-h&&(v=!0));const b=[];if(g&&!v){const w=m-(f-2);for(let y=w;y<m;y++)b.push(y)}else if(!g&&v)for(let w=2;w<f;w++)b.push(w);else if(g&&v){const w=Math.floor(f/2)-1;for(let y=p-w;y<=p+w;y++)b.push(y)}else for(let w=2;w<m;w++)b.push(w);return b});oi(()=>{const f=(e.pagerCount-1)/2;o.value=!1,r.value=!1,e.pageCount>e.pagerCount&&(e.currentPage>e.pagerCount-f&&(o.value=!0),e.currentPage<e.pageCount-f&&(r.value=!0))});function u(f){e.disabled||(f==="left"?i.value=!0:a.value=!0)}function c(f){const h=f.target;if(h.tagName.toLowerCase()==="li"&&Array.from(h.classList).includes("number")){const p=Number(h.textContent);p!==e.currentPage&&t("change",p)}}function d(f){const h=f.target;if(h.tagName.toLowerCase()==="ul"||e.disabled)return;let p=Number(h.textContent);const m=e.pageCount,g=e.currentPage,v=e.pagerCount-2;h.className.includes("more")&&(h.className.includes("quickprev")?p=g-v:h.className.includes("quicknext")&&(p=g+v)),Number.isNaN(+p)||(p<1&&(p=1),p>m&&(p=m)),p!==g&&t("change",p)}return{showPrevMore:o,showNextMore:r,quickPrevHover:i,quickNextHover:a,pagers:l,nsPager:n,nsIcon:s,onMouseenter:u,onPagerClick:d,onEnter:c}}}),g1e=["aria-current"],v1e=["aria-current"],b1e=["aria-current"];function y1e(e,t,n,s,o,r){const i=Ne("d-arrow-left"),a=Ne("more-filled"),l=Ne("d-arrow-right");return _(),U("ul",{class:W(e.nsPager.b()),onClick:t[4]||(t[4]=(...u)=>e.onPagerClick&&e.onPagerClick(...u)),onKeyup:t[5]||(t[5]=Qt((...u)=>e.onEnter&&e.onEnter(...u),["enter"]))},[e.pageCount>0?(_(),U("li",{key:0,class:W([[e.nsPager.is("active",e.currentPage===1),e.nsPager.is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===1,tabindex:"0"}," 1 ",10,g1e)):me("v-if",!0),e.showPrevMore?(_(),U("li",{key:1,class:W(["more","btn-quickprev",e.nsIcon.b(),e.nsPager.is("disabled",e.disabled)]),onMouseenter:t[0]||(t[0]=u=>e.onMouseenter("left")),onMouseleave:t[1]||(t[1]=u=>e.quickPrevHover=!1)},[e.quickPrevHover?(_(),ye(i,{key:0})):(_(),ye(a,{key:1}))],34)):me("v-if",!0),(_(!0),U(lt,null,Zt(e.pagers,u=>(_(),U("li",{key:u,class:W([[e.nsPager.is("active",e.currentPage===u),e.nsPager.is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===u,tabindex:"0"},He(u),11,v1e))),128)),e.showNextMore?(_(),U("li",{key:2,class:W(["more","btn-quicknext",e.nsIcon.b(),e.nsPager.is("disabled",e.disabled)]),onMouseenter:t[2]||(t[2]=u=>e.onMouseenter("right")),onMouseleave:t[3]||(t[3]=u=>e.quickNextHover=!1)},[e.quickNextHover?(_(),ye(l,{key:0})):(_(),ye(a,{key:1}))],34)):me("v-if",!0),e.pageCount>1?(_(),U("li",{key:3,class:W([[e.nsPager.is("active",e.currentPage===e.pageCount),e.nsPager.is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===e.pageCount,tabindex:"0"},He(e.pageCount),11,b1e)):me("v-if",!0)],34)}var w1e=Ye(m1e,[["render",y1e],["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const jo=e=>typeof e!="number",k1e=pt({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>typeof e=="number"&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Qe(Array),default:()=>gs([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},nextText:{type:String,default:""},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),x1e={"update:current-page":e=>typeof e=="number","update:page-size":e=>typeof e=="number","size-change":e=>typeof e=="number","current-change":e=>typeof e=="number","prev-click":e=>typeof e=="number","next-click":e=>typeof e=="number"},WD="ElPagination";var C1e=xe({name:WD,props:k1e,emits:x1e,setup(e,{emit:t,slots:n}){const{t:s}=Dn(),o=Xe("pagination"),r=jt().vnode.props||{},i="onUpdate:currentPage"in r||"onUpdate:current-page"in r||"onCurrentChange"in r,a="onUpdate:pageSize"in r||"onUpdate:page-size"in r||"onSizeChange"in r,l=O(()=>{if(jo(e.total)&&jo(e.pageCount)||!jo(e.currentPage)&&!i)return!1;if(e.layout.includes("sizes")){if(jo(e.pageCount)){if(!jo(e.total)&&!jo(e.pageSize)&&!a)return!1}else if(!a)return!1}return!0}),u=j(jo(e.defaultPageSize)?10:e.defaultPageSize),c=j(jo(e.defaultCurrentPage)?1:e.defaultCurrentPage),d=O({get(){return jo(e.pageSize)?u.value:e.pageSize},set(w){jo(e.pageSize)&&(u.value=w),a&&(t("update:page-size",w),t("size-change",w))}}),f=O(()=>{let w=0;return jo(e.pageCount)?jo(e.total)||(w=Math.max(1,Math.ceil(e.total/d.value))):w=e.pageCount,w}),h=O({get(){return jo(e.currentPage)?c.value:e.currentPage},set(w){let y=w;w<1?y=1:w>f.value&&(y=f.value),jo(e.currentPage)&&(c.value=y),i&&(t("update:current-page",y),t("current-change",y))}});We(f,w=>{h.value>w&&(h.value=w)});function p(w){h.value=w}function m(w){d.value=w;const y=f.value;h.value>y&&(h.value=y)}function g(){e.disabled||(h.value-=1,t("prev-click",h.value))}function v(){e.disabled||(h.value+=1,t("next-click",h.value))}function b(w,y){w&&(w.props||(w.props={}),w.props.class=[w.props.class,y].join(" "))}return Gt(i4,{pageCount:f,disabled:O(()=>e.disabled),currentPage:h,changeEvent:p,handleSizeChange:m}),()=>{var w,y;if(!l.value)return s("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&f.value<=1)return null;const k=[],x=[],C=at("div",{class:o.e("rightwrapper")},x),S={prev:at(Aye,{disabled:e.disabled,currentPage:h.value,prevText:e.prevText,onClick:g}),jumper:at(l1e),pager:at(w1e,{currentPage:h.value,pageCount:f.value,pagerCount:e.pagerCount,onChange:p,disabled:e.disabled}),next:at(Fye,{disabled:e.disabled,currentPage:h.value,pageCount:f.value,nextText:e.nextText,onClick:v}),sizes:at(o1e,{pageSize:d.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:(y=(w=n==null?void 0:n.default)==null?void 0:w.call(n))!=null?y:null,total:at(h1e,{total:jo(e.total)?0:e.total})},T=e.layout.split(",").map(R=>R.trim());let A=!1;return T.forEach(R=>{if(R==="->"){A=!0;return}A?x.push(S[R]):k.push(S[R])}),b(k[0],o.is("first")),b(k[k.length-1],o.is("last")),A&&x.length>0&&(b(x[0],o.is("first")),b(x[x.length-1],o.is("last")),k.push(C)),at("div",{role:"pagination","aria-label":"pagination",class:[o.b(),o.is("background",e.background),{[o.m("small")]:e.small}]},k)}}});const $1e=Kt(C1e),S1e=pt({title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,values:Xk,default:"primary"},cancelButtonType:{type:String,values:Xk,default:"text"},icon:{type:Mo,default:fre},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},onConfirm:{type:Qe(Function)},onCancel:{type:Qe(Function)},teleported:Eo.teleported,persistent:Eo.persistent}),HD="ElPopconfirm",I1e=xe({name:HD,components:{ElButton:ii,ElTooltip:vr,ElIcon:xt},props:S1e,setup(e){const{compatTeleported:t}=Uf(HD,"appendToBody"),{t:n}=Dn(),s=Xe("popconfirm"),o=j(),r=()=>{var d,f;(f=(d=N(o))==null?void 0:d.onClose)==null||f.call(d)},i=()=>{r()},a=d=>{var f;(f=e.onConfirm)==null||f.call(e,d),i()},l=d=>{var f;(f=e.onCancel)==null||f.call(e,d),i()},u=O(()=>e.confirmButtonText||n("el.popconfirm.confirmButtonText")),c=O(()=>e.cancelButtonText||n("el.popconfirm.cancelButtonText"));return{finalConfirmButtonText:u,finalCancelButtonText:c,tooltipRef:o,ns:s,compatTeleported:t,confirm:a,cancel:l}}});function E1e(e,t,n,s,o,r){const i=Ne("el-icon"),a=Ne("el-button"),l=Ne("el-tooltip");return _(),ye(l,Wn({ref:"tooltipRef"},e.$attrs,{trigger:"click",effect:"light","popper-class":`${e.ns.namespace.value}-popover`,teleported:e.compatTeleported,"fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:e.persistent}),{content:de(()=>[q("div",{class:W(e.ns.b())},[q("div",{class:W(e.ns.e("main"))},[!e.hideIcon&&e.icon?(_(),ye(i,{key:0,class:W(e.ns.e("icon")),style:it({color:e.iconColor})},{default:de(()=>[(_(),ye(an(e.icon)))]),_:1},8,["class","style"])):me("v-if",!0),Yt(" "+He(e.title),1)],2),q("div",{class:W(e.ns.e("action"))},[fe(a,{size:"small",type:e.cancelButtonType,onClick:e.cancel},{default:de(()=>[Yt(He(e.finalCancelButtonText),1)]),_:1},8,["type","onClick"]),fe(a,{size:"small",type:e.confirmButtonType,onClick:e.confirm},{default:de(()=>[Yt(He(e.finalConfirmButtonText),1)]),_:1},8,["type","onClick"])],2)],2)]),default:de(()=>[e.$slots.reference?Pe(e.$slots,"reference",{key:0}):me("v-if",!0)]),_:3},16,["popper-class","teleported","hide-after","persistent"])}var T1e=Ye(I1e,[["render",E1e],["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const _1e=Kt(T1e),N1e=pt({trigger:Fp.trigger,placement:Iv.placement,disabled:Fp.disabled,visible:Eo.visible,transition:Eo.transition,popperOptions:Iv.popperOptions,tabindex:Iv.tabindex,appendToBody:{type:Boolean,default:void 0},content:Eo.content,popperStyle:Eo.popperStyle,popperClass:Eo.popperClass,enterable:nt(Me({},Eo.enterable),{default:!0}),effect:nt(Me({},Eo.effect),{default:"light"}),teleported:Eo.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0}}),A1e=["update:visible","before-enter","before-leave","after-enter","after-leave"],UD="ElPopover",D1e=xe({name:UD,components:{ElTooltip:vr},props:N1e,emits:A1e,setup(e,{emit:t}){const n=Xe("popover"),s=j(null),o=O(()=>{var m;return(m=N(s))==null?void 0:m.popperRef}),r=O(()=>Bt(e.width)?e.width:`${e.width}px`),i=O(()=>[{width:r.value},e.popperStyle]),a=O(()=>[n.b(),e.popperClass,{[n.m("plain")]:!!e.content}]),l=O(()=>e.transition==="el-fade-in-linear"),{compatTeleported:u}=Uf(UD,"appendToBody");return{compatTeleported:u,ns:n,kls:a,gpuAcceleration:l,style:i,tooltipRef:s,popperRef:o,hide:()=>{var m;(m=s.value)==null||m.hide()},beforeEnter:()=>{t("before-enter")},beforeLeave:()=>{t("before-leave")},afterEnter:()=>{t("after-enter")},afterLeave:()=>{t("after-leave")}}}});function R1e(e,t,n,s,o,r){const i=Ne("el-tooltip");return _(),ye(i,Wn({ref:"tooltipRef"},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,"append-to-body":e.appendToBody,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":e.kls,"popper-style":e.style,teleported:e.compatTeleported,persistent:e.persistent,"gpu-acceleration":e.gpuAcceleration,onBeforeShow:e.beforeEnter,onBeforeHide:e.beforeLeave,onShow:e.afterEnter,onHide:e.afterLeave}),{content:de(()=>[e.title?(_(),U("div",{key:0,class:W(e.ns.e("title")),role:"title"},He(e.title),3)):me("v-if",!0),Pe(e.$slots,"default",{},()=>[Yt(He(e.content),1)])]),default:de(()=>[e.$slots.reference?Pe(e.$slots,"reference",{key:0}):me("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","append-to-body","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onBeforeShow","onBeforeHide","onShow","onHide"])}var up=Ye(D1e,[["render",R1e],["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/index.vue"]]);const jD=(e,t)=>{const n=t.arg||t.value,s=n==null?void 0:n.popperRef;s&&(s.triggerRef=e)};var mx={mounted(e,t){jD(e,t)},updated(e,t){jD(e,t)}};const M1e="popover";up.install=e=>{e.component(up.name,up)};mx.install=e=>{e.directive(M1e,mx)};const mB=mx;up.directive=mB;const O1e=up,P1e=O1e,F1e=mB,L1e=pt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Qe(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Qe([String,Array,Function]),default:""},format:{type:Qe(Function),default:e=>`${e}%`}}),B1e=xe({name:"ElProgress",components:{ElIcon:xt,CircleCheck:nb,CircleClose:Za,Check:of,Close:ci,WarningFilled:Mp},props:L1e,setup(e){const t=Xe("progress"),n=O(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:m(e.percentage)})),s=O(()=>(e.strokeWidth/e.width*100).toFixed(1)),o=O(()=>e.type==="circle"||e.type==="dashboard"?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),r=O(()=>{const v=o.value,b=e.type==="dashboard";return`
          M 50 50
          m 0 ${b?"":"-"}${v}
          a ${v} ${v} 0 1 1 0 ${b?"-":""}${v*2}
          a ${v} ${v} 0 1 1 0 ${b?"":"-"}${v*2}
          `}),i=O(()=>2*Math.PI*o.value),a=O(()=>e.type==="dashboard"?.75:1),l=O(()=>`${-1*i.value*(1-a.value)/2}px`),u=O(()=>({strokeDasharray:`${i.value*a.value}px, ${i.value}px`,strokeDashoffset:l.value})),c=O(()=>({strokeDasharray:`${i.value*a.value*(e.percentage/100)}px, ${i.value}px`,strokeDashoffset:l.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"})),d=O(()=>{let v;if(e.color)v=m(e.percentage);else switch(e.status){case"success":v="#13ce66";break;case"exception":v="#ff4949";break;case"warning":v="#e6a23c";break;default:v="#20a0ff"}return v}),f=O(()=>e.status==="warning"?Mp:e.type==="line"?e.status==="success"?nb:Za:e.status==="success"?of:ci),h=O(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),p=O(()=>e.format(e.percentage)),m=v=>{var b;const{color:w}=e;if(typeof w=="function")return w(v);if(typeof w=="string")return w;{const y=100/w.length,x=w.map((C,S)=>typeof C=="string"?{color:C,percentage:(S+1)*y}:C).sort((C,S)=>C.percentage-S.percentage);for(const C of x)if(C.percentage>v)return C.color;return(b=x[x.length-1])==null?void 0:b.color}},g=O(()=>({percentage:e.percentage}));return{ns:t,barStyle:n,relativeStrokeWidth:s,radius:o,trackPath:r,perimeter:i,rate:a,strokeDashoffset:l,trailPathStyle:u,circlePathStyle:c,stroke:d,statusIcon:f,progressTextSize:h,content:p,slotData:g}}}),z1e=["aria-valuenow"],V1e={viewBox:"0 0 100 100"},W1e=["d","stroke-width"],H1e=["d","stroke","stroke-linecap","stroke-width"],U1e={key:0};function j1e(e,t,n,s,o,r){const i=Ne("el-icon");return _(),U("div",{class:W([e.ns.b(),e.ns.m(e.type),e.ns.is(e.status),{[e.ns.m("without-text")]:!e.showText,[e.ns.m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[e.type==="line"?(_(),U("div",{key:0,class:W(e.ns.b("bar"))},[q("div",{class:W(e.ns.be("bar","outer")),style:it({height:`${e.strokeWidth}px`})},[q("div",{class:W([e.ns.be("bar","inner"),{[e.ns.bem("bar","inner","indeterminate")]:e.indeterminate}]),style:it(e.barStyle)},[(e.showText||e.$slots.default)&&e.textInside?(_(),U("div",{key:0,class:W(e.ns.be("bar","innerText"))},[Pe(e.$slots,"default",Oi(ql(e.slotData)),()=>[q("span",null,He(e.content),1)])],2)):me("v-if",!0)],6)],6)],2)):(_(),U("div",{key:1,class:W(e.ns.b("circle")),style:it({height:`${e.width}px`,width:`${e.width}px`})},[(_(),U("svg",V1e,[q("path",{class:W(e.ns.be("circle","track")),d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none",style:it(e.trailPathStyle)},null,14,W1e),q("path",{class:W(e.ns.be("circle","path")),d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0,style:it(e.circlePathStyle)},null,14,H1e)]))],6)),(e.showText||e.$slots.default)&&!e.textInside?(_(),U("div",{key:2,class:W(e.ns.e("text")),style:it({fontSize:`${e.progressTextSize}px`})},[Pe(e.$slots,"default",Oi(ql(e.slotData)),()=>[e.status?(_(),ye(i,{key:1},{default:de(()=>[(_(),ye(an(e.statusIcon)))]),_:1})):(_(),U("span",U1e,He(e.content),1))])],6)):me("v-if",!0)],10,z1e)}var G1e=Ye(B1e,[["render",j1e],["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const gB=Kt(G1e),K1e=pt({modelValue:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Qe([Array,Object]),default:()=>gs(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Qe([Array,Object]),default:()=>[C0,C0,C0]},voidIcon:{type:Mo,default:()=>Kre},disabledVoidIcon:{type:Mo,default:()=>C0},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:""},texts:{type:Qe(Array),default:()=>gs(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:Pr}}),q1e={change:e=>typeof e=="number",[Ht]:e=>typeof e=="number"},Y1e=["aria-valuenow","aria-valuetext","aria-valuemax"],X1e=["onMousemove","onClick"],Z1e={name:"ElRate"},J1e=xe(nt(Me({},Z1e),{props:K1e,emits:q1e,setup(e,{expose:t,emit:n}){const s=e;function o(P,V){const H=B=>rn(B),F=Object.keys(V).map(B=>+B).filter(B=>{const Y=V[B];return(H(Y)?Y.excluded:!1)?P<B:P<=B}).sort((B,Y)=>B-Y),M=V[F[0]];return H(M)&&M.value||M}const r=rt(Lr,void 0),i=Ls(),a=Xe("rate"),l=j(s.modelValue),u=j(-1),c=j(!0),d=O(()=>[a.b(),a.m(i.value)]),f=O(()=>s.disabled||(r==null?void 0:r.disabled)),h=O(()=>({"--el-rate-void-color":s.voidColor,"--el-rate-disabled-void-color":s.disabledVoidColor,"--el-rate-fill-color":v.value})),p=O(()=>{let P="";return s.showScore?P=s.scoreTemplate.replace(/\{\s*value\s*\}/,f.value?`${s.modelValue}`:`${l.value}`):s.showText&&(P=s.texts[Math.ceil(l.value)-1]),P}),m=O(()=>s.modelValue*100-Math.floor(s.modelValue)*100),g=O(()=>Et(s.colors)?{[s.lowThreshold]:s.colors[0],[s.highThreshold]:{value:s.colors[1],excluded:!0},[s.max]:s.colors[2]}:s.colors),v=O(()=>{const P=o(l.value,g.value);return rn(P)?"":P}),b=O(()=>{let P="";return f.value?P=`${m.value}%`:s.allowHalf&&(P="50%"),{color:v.value,width:P}}),w=O(()=>Et(s.icons)?{[s.lowThreshold]:s.icons[0],[s.highThreshold]:{value:s.icons[1],excluded:!0},[s.max]:s.icons[2]}:s.icons),y=O(()=>o(s.modelValue,w.value)),k=O(()=>f.value?s.disabledVoidIcon:s.voidIcon),x=O(()=>o(l.value,w.value)),C=O(()=>{const P=Array.from({length:s.max}),V=l.value;return P.fill(x.value,0,V),P.fill(k.value,V,s.max),P});function S(P){const V=f.value&&m.value>0&&P-1<s.modelValue&&P>s.modelValue,H=s.allowHalf&&c.value&&P-.5<=l.value&&P>l.value;return V||H}function T(P){f.value||(s.allowHalf&&c.value?(n(Ht,l.value),s.modelValue!==l.value&&n("change",l.value)):(n(Ht,P),s.modelValue!==P&&n("change",P)))}function A(P){if(f.value)return;let V=l.value;const H=P.code;return H===ct.up||H===ct.right?(s.allowHalf?V+=.5:V+=1,P.stopPropagation(),P.preventDefault()):(H===ct.left||H===ct.down)&&(s.allowHalf?V-=.5:V-=1,P.stopPropagation(),P.preventDefault()),V=V<0?0:V,V=V>s.max?s.max:V,n(Ht,V),n("change",V),V}function R(P,V){if(!f.value){if(s.allowHalf){let H=V.target;Li(H,a.e("item"))&&(H=H.querySelector(`.${a.e("icon")}`)),(H.clientWidth===0||Li(H,a.e("decimal")))&&(H=H.parentNode),c.value=V.offsetX*2<=H.clientWidth,l.value=c.value?P-.5:P}else l.value=P;u.value=P}}function L(){f.value||(s.allowHalf&&(c.value=s.modelValue!==Math.floor(s.modelValue)),l.value=s.modelValue,u.value=-1)}return We(()=>s.modelValue,P=>{l.value=P,c.value=s.modelValue!==Math.floor(s.modelValue)}),s.modelValue||n(Ht,0),t({setCurrentValue:R,resetCurrentValue:L}),(P,V)=>(_(),U("div",{class:W([N(d),N(a).is("disabled",N(f))]),role:"slider","aria-valuenow":l.value,"aria-valuetext":N(p),"aria-valuemin":"0","aria-valuemax":P.max,tabindex:"0",style:it(N(h)),onKeydown:A},[(_(!0),U(lt,null,Zt(P.max,(H,F)=>(_(),U("span",{key:F,class:W(N(a).e("item")),onMousemove:M=>R(H,M),onMouseleave:L,onClick:M=>T(H)},[fe(N(xt),{class:W([N(a).e("icon"),{hover:u.value===H},N(a).is("active",H<=l.value)])},{default:de(()=>[S(H)?me("v-if",!0):(_(),ye(an(N(C)[H-1]),{key:0})),S(H)?(_(),ye(N(xt),{key:1,style:it(N(b)),class:W([N(a).e("icon"),N(a).e("decimal")])},{default:de(()=>[(_(),ye(an(N(y))))]),_:1},8,["style","class"])):me("v-if",!0)]),_:2},1032,["class"])],42,X1e))),128)),P.showText||P.showScore?(_(),U("span",{key:0,class:W(N(a).e("text"))},He(N(p)),3)):me("v-if",!0)],46,Y1e))}}));var Q1e=Ye(J1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const ewe=Kt(Q1e),Pd={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},GD={[Pd.success]:dse,[Pd.warning]:Mp,[Pd.error]:_$,[Pd.info]:N$},twe=pt({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{values:["success","warning","info","error"],default:"info"}}),KD="ElResult",nwe=xe({name:KD,props:twe,setup(e,{slots:t}){const n=Xe("result");wm({scope:KD,type:"Slot",from:"subTitle",replacement:"sub-title",version:"2.1.3",ref:"https://github.com/element-plus/element-plus/pull/6636/"},O(()=>!!t.subTitle));const s=O(()=>{const o=e.icon,r=o&&Pd[o]?Pd[o]:"icon-info",i=GD[r]||GD["icon-info"];return{class:r,component:i}});return{ns:n,resultIcon:s}}});function swe(e,t,n,s,o,r){return _(),U("div",{class:W(e.ns.b())},[q("div",{class:W(e.ns.e("icon"))},[Pe(e.$slots,"icon",{},()=>[e.resultIcon.component?(_(),ye(an(e.resultIcon.component),{key:0,class:W(e.resultIcon.class)},null,8,["class"])):me("v-if",!0)])],2),e.title||e.$slots.title?(_(),U("div",{key:0,class:W(e.ns.e("title"))},[Pe(e.$slots,"title",{},()=>[q("p",null,He(e.title),1)])],2)):me("v-if",!0),e.subTitle||e.$slots["sub-title"]?(_(),U("div",{key:1,class:W(e.ns.e("subtitle"))},[Pe(e.$slots,"sub-title",{},()=>[q("p",null,He(e.subTitle),1)])],2)):me("v-if",!0),e.$slots.extra?(_(),U("div",{key:2,class:W(e.ns.e("extra"))},[Pe(e.$slots,"extra")],2)):me("v-if",!0)],2)}var owe=Ye(nwe,[["render",swe],["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const rwe=Kt(owe),iwe=pt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between","space-evenly"],default:"start"},align:{type:String,values:["top","middle","bottom"],default:"top"}}),awe=xe({name:"ElRow",props:iwe,setup(e,{slots:t}){const n=Xe("row"),s=O(()=>e.gutter);Gt(l4,{gutter:s});const o=O(()=>{const r={marginLeft:"",marginRight:""};return e.gutter&&(r.marginLeft=`-${e.gutter/2}px`,r.marginRight=r.marginLeft),r});return()=>fe(e.tag,{class:[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,e.align!=="top")],style:o.value},{default:()=>{var r;return[(r=t.default)==null?void 0:r.call(t)]}})}}),lwe=Kt(awe);var qD=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function uwe(e,t){return!!(e===t||qD(e)&&qD(t))}function cwe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!uwe(e[n],t[n]))return!1;return!0}function dwe(e,t){t===void 0&&(t=cwe);var n=null;function s(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;var i=e.apply(this,o);return n={lastResult:i,lastArgs:o,lastThis:this},i}return s.clear=function(){n=null},s}const fwe=()=>{const t=jt().proxy.$props;return O(()=>{const n=(s,o,r)=>({});return t.perfMode?hy(n):dwe(n)})},hwe=50,YD="item-rendered",XD="scroll",vB="forward",bB="backward",zp="auto",yB="smart",wB="start",ab="center",kB="end",hf="horizontal",uS="vertical",pwe="ltr",Tv="rtl",xB="negative",mwe="positive-ascending",CB="positive-descending",gwe={[hf]:"left",[uS]:"top"},vwe=20,bwe={[hf]:"deltaX",[uS]:"deltaY"},ywe=({atEndEdge:e,atStartEdge:t,layout:n},s)=>{let o,r=0;const i=l=>l<0&&t.value||l>0&&e.value;return{hasReachedEdge:i,onWheel:l=>{QF(o);const u=l[bwe[n.value]];i(r)&&i(r+u)||(r+=u,D$()||l.preventDefault(),o=JF(()=>{s(r),r=0}))}}},gx=Yi({type:Qe([Number,Function]),required:!0}),vx=Yi({type:Number}),bx=Yi({type:Number,default:2}),wwe=Yi({type:String,values:["ltr","rtl"],default:"ltr"}),yx=Yi({type:Number,default:0}),lb=Yi({type:Number,required:!0}),$B=Yi({type:String,values:["horizontal","vertical"],default:uS}),SB=pt({className:{type:String,default:""},containerElement:{type:Qe([String,Object]),default:"div"},data:{type:Qe(Array),default:()=>gs([])},direction:wwe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Qe([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),kwe=pt(Me({cache:bx,estimatedItemSize:vx,layout:$B,initScrollOffset:yx,total:lb,itemSize:gx},SB));pt(Me({columnCache:bx,columnWidth:gx,estimatedColumnWidth:vx,estimatedRowHeight:vx,initScrollLeft:yx,initScrollTop:yx,rowCache:bx,rowHeight:gx,totalColumn:lb,totalRow:lb},SB));const xwe=pt({layout:$B,total:lb,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},visible:Boolean}),P2=(e,t)=>e<t?vB:bB,Vp=e=>e===pwe||e===Tv||e===hf;let yd=null;function ZD(e=!1){if(yd===null||e){const t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const s=document.createElement("div"),o=s.style;return o.width="100px",o.height="100px",t.appendChild(s),document.body.appendChild(t),t.scrollLeft>0?yd=CB:(t.scrollLeft=1,t.scrollLeft===0?yd=xB:yd=mwe),document.body.removeChild(t),yd}return yd}function Cwe({move:e,size:t,bar:n},s){const o={},r=`translate${n.axis}(${e}px)`;return o[n.size]=t,o.transform=r,o.msTransform=r,o.webkitTransform=r,s==="horizontal"?o.height="100%":o.width="100%",o}const $we=xe({name:"ElVirtualScrollBar",props:xwe,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const s=j(),o=j();let r=null,i=null;const a=vn({isDragging:!1,traveled:0}),l=O(()=>_4[e.layout]),u=O(()=>e.clientSize-4),c=O(()=>({position:"absolute",width:hf===e.layout?`${u.value}px`:"6px",height:hf===e.layout?"6px":`${u.value}px`,[gwe[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),d=O(()=>{const k=e.ratio,x=e.clientSize;if(k>=100)return Number.POSITIVE_INFINITY;if(k>=50)return k*x/100;const C=x/3;return Math.floor(Math.min(Math.max(k*x,vwe),C))}),f=O(()=>{if(!Number.isFinite(d.value))return{display:"none"};const k=`${d.value}px`;return Cwe({bar:l.value,size:k,move:a.traveled},e.layout)}),h=O(()=>Math.floor(e.clientSize-d.value-4)),p=()=>{ts(window,"mousemove",b),ts(window,"mouseup",v);const k=N(o);!k||(i=document.onselectstart,document.onselectstart=()=>!1,ts(k,"touchmove",b),ts(k,"touchend",v))},m=()=>{Ss(window,"mousemove",b),Ss(window,"mouseup",v),document.onselectstart=i,i=null;const k=N(o);!k||(Ss(k,"touchmove",b),Ss(k,"touchend",v))},g=k=>{k.stopImmediatePropagation(),!(k.ctrlKey||[1,2].includes(k.button))&&(a.isDragging=!0,a[l.value.axis]=k.currentTarget[l.value.offset]-(k[l.value.client]-k.currentTarget.getBoundingClientRect()[l.value.direction]),t("start-move"),p())},v=()=>{a.isDragging=!1,a[l.value.axis]=0,t("stop-move"),m()},b=k=>{const{isDragging:x}=a;if(!x||!o.value||!s.value)return;const C=a[l.value.axis];if(!C)return;QF(r);const S=(s.value.getBoundingClientRect()[l.value.direction]-k[l.value.client])*-1,T=o.value[l.value.offset]-C,A=S-T;r=JF(()=>{a.traveled=Math.max(0,Math.min(A,h.value)),t("scroll",A,h.value)})},w=k=>{const x=Math.abs(k.target.getBoundingClientRect()[l.value.direction]-k[l.value.client]),C=o.value[l.value.offset]/2,S=x-C;a.traveled=Math.max(0,Math.min(S,h.value)),t("scroll",S,h.value)},y=k=>k.preventDefault();return We(()=>e.scrollFrom,k=>{a.isDragging||(a.traveled=Math.ceil(k*h.value))}),Ft(()=>{!sn||(ts(s.value,"touchstart",y),ts(o.value,"touchstart",g))}),qn(()=>{Ss(s.value,"touchstart",y),m()}),()=>at("div",{role:"presentation",ref:s,class:"el-virtual-scrollbar",style:c.value,onMousedown:wt(w,["stop","prevent"])},at("div",{ref:o,class:"el-scrollbar__thumb",style:f.value,onMousedown:g},[]))}}),IB=({name:e,getOffset:t,getItemSize:n,getItemOffset:s,getEstimatedTotalSize:o,getStartIndexForOffset:r,getStopIndexForStartIndex:i,initCache:a,clearCache:l,validateProps:u})=>xe({name:e!=null?e:"ElVirtualList",props:kwe,emits:[YD,XD],setup(c,{emit:d,expose:f}){u(c);const h=jt(),p=j(a(c,h)),m=fwe(),g=j(),v=j(),b=j(),w=j({isScrolling:!1,scrollDir:"forward",scrollOffset:mn(c.initScrollOffset)?c.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:c.scrollbarAlwaysOn}),y=O(()=>{const{total:te,cache:re}=c,{isScrolling:$e,scrollDir:se,scrollOffset:Q}=N(w);if(te===0)return[0,0,0,0];const ae=r(c,Q,N(p)),pe=i(c,ae,Q,N(p)),ke=!$e||se===bB?Math.max(1,re):1,Be=!$e||se===vB?Math.max(1,re):1;return[Math.max(0,ae-ke),Math.max(0,Math.min(te-1,pe+Be)),ae,pe]}),k=O(()=>o(c,N(p))),x=O(()=>Vp(c.layout)),C=O(()=>[{position:"relative",[`overflow-${x.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:c.direction,height:mn(c.height)?`${c.height}px`:c.height,width:mn(c.width)?`${c.width}px`:c.width},c.style]),S=O(()=>{const te=N(k),re=N(x);return{height:re?"100%":`${te}px`,pointerEvents:N(w).isScrolling?"none":void 0,width:re?`${te}px`:"100%"}}),T=O(()=>x.value?c.width:c.height),{onWheel:A}=ywe({atStartEdge:O(()=>w.value.scrollOffset<=0),atEndEdge:O(()=>w.value.scrollOffset>=k.value),layout:O(()=>c.layout)},te=>{var re,$e;($e=(re=b.value).onMouseUp)==null||$e.call(re),F(Math.min(w.value.scrollOffset+te,k.value-T.value))}),R=()=>{const{total:te}=c;if(te>0){const[Q,ae,pe,ke]=N(y);d(YD,Q,ae,pe,ke)}const{scrollDir:re,scrollOffset:$e,updateRequested:se}=N(w);d(XD,re,$e,se)},L=te=>{const{clientHeight:re,scrollHeight:$e,scrollTop:se}=te.currentTarget,Q=N(w);if(Q.scrollOffset===se)return;const ae=Math.max(0,Math.min(se,$e-re));w.value=nt(Me({},Q),{isScrolling:!0,scrollDir:P2(Q.scrollOffset,ae),scrollOffset:ae,updateRequested:!1}),vt(Y)},P=te=>{const{clientWidth:re,scrollLeft:$e,scrollWidth:se}=te.currentTarget,Q=N(w);if(Q.scrollOffset===$e)return;const{direction:ae}=c;let pe=$e;if(ae===Tv)switch(ZD()){case xB:{pe=-$e;break}case CB:{pe=se-re-$e;break}}pe=Math.max(0,Math.min(pe,se-re)),w.value=nt(Me({},Q),{isScrolling:!0,scrollDir:P2(Q.scrollOffset,pe),scrollOffset:pe,updateRequested:!1}),vt(Y)},V=te=>{N(x)?P(te):L(te),R()},H=(te,re)=>{const $e=(k.value-T.value)/re*te;F(Math.min(k.value-T.value,$e))},F=te=>{te=Math.max(te,0),te!==N(w).scrollOffset&&(w.value=nt(Me({},N(w)),{scrollOffset:te,scrollDir:P2(N(w).scrollOffset,te),updateRequested:!0}),vt(Y))},M=(te,re=zp)=>{const{scrollOffset:$e}=N(w);te=Math.max(0,Math.min(te,c.total-1)),F(t(c,te,re,$e,N(p)))},B=te=>{const{direction:re,itemSize:$e,layout:se}=c,Q=m.value(l&&$e,l&&se,l&&re);let ae;if(en(Q,String(te)))ae=Q[te];else{const pe=s(c,te,N(p)),ke=n(c,te,N(p)),Be=N(x),je=re===Tv,qe=Be?pe:0;Q[te]=ae={position:"absolute",left:je?void 0:`${qe}px`,right:je?`${qe}px`:void 0,top:Be?0:`${pe}px`,height:Be?"100%":`${ke}px`,width:Be?`${ke}px`:"100%"}}return ae},Y=()=>{w.value.isScrolling=!1,vt(()=>{m.value(-1,null,null)})},J=()=>{const te=g.value;te&&(te.scrollTop=0)};Ft(()=>{if(!sn)return;const{initScrollOffset:te}=c,re=N(g);mn(te)&&re&&(N(x)?re.scrollLeft=te:re.scrollTop=te),R()}),Ki(()=>{const{direction:te,layout:re}=c,{scrollOffset:$e,updateRequested:se}=N(w),Q=N(g);if(se&&Q)if(re===hf)if(te===Tv)switch(ZD()){case"negative":{Q.scrollLeft=-$e;break}case"positive-ascending":{Q.scrollLeft=$e;break}default:{const{clientWidth:ae,scrollWidth:pe}=Q;Q.scrollLeft=pe-ae-$e;break}}else Q.scrollLeft=$e;else Q.scrollTop=$e});const ee={clientSize:T,estimatedTotalSize:k,windowStyle:C,windowRef:g,innerRef:v,innerStyle:S,itemsToRender:y,scrollbarRef:b,states:w,getItemStyle:B,onScroll:V,onScrollbarScroll:H,onWheel:A,scrollTo:F,scrollToItem:M,resetScrollTop:J};return f({windowRef:g,innerRef:v,getItemStyleCache:m,scrollTo:F,scrollToItem:M,resetScrollTop:J,states:w}),ee},render(c){var d;const{$slots:f,className:h,clientSize:p,containerElement:m,data:g,getItemStyle:v,innerElement:b,itemsToRender:w,innerStyle:y,layout:k,total:x,onScroll:C,onScrollbarScroll:S,onWheel:T,states:A,useIsScrolling:R,windowStyle:L}=c,[P,V]=w,H=an(m),F=an(b),M=[];if(x>0)for(let ee=P;ee<=V;ee++)M.push((d=f.default)==null?void 0:d.call(f,{data:g,key:ee,index:ee,isScrolling:R?A.isScrolling:void 0,style:v(ee)}));const B=[at(F,{style:y,ref:"innerRef"},Bt(F)?M:{default:()=>M})],Y=at($we,{ref:"scrollbarRef",clientSize:p,layout:k,onScroll:S,ratio:p*100/this.estimatedTotalSize,scrollFrom:A.scrollOffset/(this.estimatedTotalSize-p),total:x}),J=at(H,{class:["el-vl__window",h],style:L,onScroll:C,onWheel:T,ref:"windowRef",key:0},Bt(H)?[B]:{default:()=>[B]});return at("div",{key:0,class:["el-vl__wrapper",A.scrollbarAlwaysOn?"always-on":""]},[J,Y])}}),EB=IB({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:n,layout:s,width:o},r,i,a)=>{const l=Vp(s)?o:e,u=Math.max(0,t*n-l),c=Math.min(u,r*n),d=Math.max(0,(r+1)*n-l);switch(i===yB&&(a>=d-l&&a<=c+l?i=zp:i=ab),i){case wB:return c;case kB:return d;case ab:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(l/2)?0:f>u+Math.floor(l/2)?u:f}case zp:default:return a>=d&&a<=c?a:a<d?d:c}},getStartIndexForOffset:({total:e,itemSize:t},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:n,layout:s,width:o},r,i)=>{const a=r*n,l=Vp(s)?o:e,u=Math.ceil((l+i-a)/n);return Math.max(0,Math.min(t-1,r+u-1))},initCache(){},clearCache:!0,validateProps(){}}),Fd=(e,t,n)=>{const{itemSize:s}=e,{items:o,lastVisitedIndex:r}=n;if(t>r){let i=0;if(r>=0){const a=o[r];i=a.offset+a.size}for(let a=r+1;a<=t;a++){const l=s(a);o[a]={offset:i,size:l},i+=l}n.lastVisitedIndex=t}return o[t]},Swe=(e,t,n)=>{const{items:s,lastVisitedIndex:o}=t;return(o>0?s[o].offset:0)>=n?TB(e,t,0,o,n):Iwe(e,t,Math.max(0,o),n)},TB=(e,t,n,s,o)=>{for(;n<=s;){const r=n+Math.floor((s-n)/2),i=Fd(e,r,t).offset;if(i===o)return r;i<o?n=r+1:i>o&&(s=r-1)}return Math.max(0,n-1)},Iwe=(e,t,n,s)=>{const{total:o}=e;let r=1;for(;n<o&&Fd(e,n,t).offset<s;)n+=r,r*=2;return TB(e,t,Math.floor(n/2),Math.min(n,o-1),s)},JD=({total:e},{items:t,estimatedItemSize:n,lastVisitedIndex:s})=>{let o=0;if(s>=e&&(s=e-1),s>=0){const a=t[s];o=a.offset+a.size}const i=(e-s-1)*n;return o+i},Ewe=IB({name:"ElDynamicSizeList",getItemOffset:(e,t,n)=>Fd(e,t,n).offset,getItemSize:(e,t,{items:n})=>n[t].size,getEstimatedTotalSize:JD,getOffset:(e,t,n,s,o)=>{const{height:r,layout:i,width:a}=e,l=Vp(i)?a:r,u=Fd(e,t,o),c=JD(e,o),d=Math.max(0,Math.min(c-l,u.offset)),f=Math.max(0,u.offset-l+u.size);switch(n===yB&&(s>=f-l&&s<=d+l?n=zp:n=ab),n){case wB:return d;case kB:return f;case ab:return Math.round(f+(d-f)/2);case zp:default:return s>=f&&s<=d?s:s<f?f:d}},getStartIndexForOffset:(e,t,n)=>Swe(e,n,t),getStopIndexForStartIndex:(e,t,n,s)=>{const{height:o,total:r,layout:i,width:a}=e,l=Vp(i)?a:o,u=Fd(e,t,s),c=n+l;let d=u.offset+u.size,f=t;for(;f<r-1&&d<c;)f++,d+=Fd(e,f,s).size;return f},initCache({estimatedItemSize:e=hwe},t){const n={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(s,o=!0)=>{var r,i;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,s-1),(r=t.exposed)==null||r.getItemStyleCache(-1),o&&((i=t.proxy)==null||i.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:e})=>{}}),Twe=xe({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:Xe("select")}}});function _we(e,t,n,s,o,r){return e.item.isTitle?(_(),U("div",{key:0,class:W(e.ns.be("group","title")),style:it([e.style,{lineHeight:`${e.height}px`}])},He(e.item.label),7)):(_(),U("div",{key:1,class:W(e.ns.be("group","split")),style:it(e.style)},[q("span",{class:W(e.ns.be("group","split-dash")),style:it({top:`${e.height/2}px`})},null,6)],6))}var Nwe=Ye(Twe,[["render",_we],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);function Awe(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}const Dwe={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:Za},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},popperAppendToBody:{type:Boolean,default:void 0},teleported:Eo.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:Pr},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1}},Rwe={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},Mwe=xe({props:Rwe,emits:["select","hover"],setup(e,{emit:t}){const n=Xe("select"),{hoverItem:s,selectOptionClick:o}=Awe(e,{emit:t});return{ns:n,hoverItem:s,selectOptionClick:o}}}),Owe=["aria-selected"];function Pwe(e,t,n,s,o,r){return _(),U("li",{"aria-selected":e.selected,style:it(e.style),class:W([e.ns.be("dropdown","option-item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),{hover:e.hovering}]),onMouseenter:t[0]||(t[0]=(...i)=>e.hoverItem&&e.hoverItem(...i)),onClick:t[1]||(t[1]=wt((...i)=>e.selectOptionClick&&e.selectOptionClick(...i),["stop"]))},[Pe(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[q("span",null,He(e.item.label),1)])],46,Owe)}var Fwe=Ye(Mwe,[["render",Pwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const _B="ElSelectV2Injection",Lwe=xe({name:"ElSelectDropdown",props:{data:Array,hoveringIndex:Number,width:Number},setup(e){const t=rt(_B),n=Xe("select"),s=j([]),o=j(null),r=O(()=>Ir(t.props.estimatedOptionHeight)),i=O(()=>r.value?{itemSize:t.props.itemHeight}:{estimatedSize:t.props.estimatedOptionHeight,itemSize:p=>s.value[p]}),a=(p=[],m)=>{const{props:{valueKey:g}}=t;return rn(m)?p&&p.some(v=>ps(v,g)===ps(m,g)):p.includes(m)},l=(p,m)=>{if(rn(m)){const{valueKey:g}=t.props;return ps(p,g)===ps(m,g)}else return p===m};return{ns:n,select:t,listProps:i,listRef:o,isSized:r,isItemDisabled:(p,m)=>{const{disabled:g,multiple:v,multipleLimit:b}=t.props;return g||!m&&(v?b>0&&p.length>=b:!1)},isItemHovering:p=>e.hoveringIndex===p,isItemSelected:(p,m)=>{const{valueKey:g}=t.props;return t.props.multiple?a(p,ps(m,g)):l(p,ps(m,g))},scrollToItem:p=>{const m=o.value;m&&m.scrollToItem(p)},resetScrollTop:()=>{const p=o.value;p&&p.resetScrollTop()}}},render(e,t){var n;const{$slots:s,data:o,listProps:r,select:i,isSized:a,width:l,ns:u,isItemDisabled:c,isItemHovering:d,isItemSelected:f}=e,h=a?EB:Ewe,{props:p,onSelect:m,onHover:g,onKeyboardNavigate:v,onKeyboardSelect:b}=i,{height:w,modelValue:y,multiple:k}=p;if(o.length===0)return at("div",{class:u.b("dropdown"),style:{width:`${l}px`}},(n=s.empty)==null?void 0:n.call(s));const x=de(S=>{const{index:T,data:A}=S,R=A[T];if(A[T].type==="Group")return at(Nwe,{item:R,style:S.style,height:a?r.itemSize:r.estimatedSize});const L=f(y,R),P=c(y,L);return at(Fwe,nt(Me({},S),{selected:L,disabled:R.disabled||P,created:!!R.created,hovering:d(T),item:R,onSelect:m,onHover:g}),{default:de(V=>Pe(s,"default",V,()=>[at("span",R.label)]))})}),C=at(h,Me({ref:"listRef",className:u.be("dropdown","list"),data:o,height:w,width:l,total:o.length,scrollbarAlwaysOn:p.scrollbarAlwaysOn,onKeydown:[t[1]||(t[1]=Qt(wt(()=>v("forward"),["stop","prevent"]),["down"])),t[2]||(t[2]=Qt(wt(()=>v("backward"),["stop","prevent"]),["up"])),t[3]||(t[3]=Qt(wt(b,["stop","prevent"]),["enter"])),t[4]||(t[4]=Qt(wt(()=>i.expanded=!1,["stop","prevent"]),["esc"])),t[5]||(t[5]=Qt(()=>i.expanded=!1,["tab"]))]},r),{default:x});return at("div",{class:[u.b("dropdown"),u.is("multiple",k)]},[C])}});var Bwe=Ye(Lwe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select-dropdown.vue"]]);function zwe(e,t){const n=j(0),s=j(null),o=O(()=>e.allowCreate&&e.filterable);function r(c){const d=f=>f.value===c;return e.options&&e.options.some(d)||t.createdOptions.some(d)}function i(c){!o.value||(e.multiple&&c.created?n.value++:s.value=c)}function a(c){if(o.value)if(c&&c.length>0&&!r(c)){const d={value:c,label:c,created:!0,disabled:!1};t.createdOptions.length>=n.value?t.createdOptions[n.value]=d:t.createdOptions.push(d)}else if(e.multiple)t.createdOptions.length=n.value;else{const d=s.value;t.createdOptions.length=0,d&&d.created&&t.createdOptions.push(d)}}function l(c){if(!o.value||!c||!c.created||c.created&&e.reserveKeyword&&t.inputValue===c.label)return;const d=t.createdOptions.findIndex(f=>f.value===c.value);~d&&(t.createdOptions.splice(d,1),n.value--)}function u(){o.value&&(t.createdOptions.length=0,n.value=0)}return{createNewOption:a,removeNewOption:l,selectNewOption:i,clearAllNewOption:u}}const Vwe=e=>{const t=[];return e.forEach(n=>{Et(n.options)?(t.push({label:n.label,isTitle:!0,type:"Group"}),n.options.forEach(s=>{t.push(s)}),t.push({type:"Group"})):t.push(n)}),t};function Wwe(e){const t=j(!1);return{handleCompositionStart:()=>{t.value=!0},handleCompositionUpdate:r=>{const i=r.target.value,a=i[i.length-1]||"";t.value=!wy(a)},handleCompositionEnd:r=>{t.value&&(t.value=!1,zt(e)&&e(r))}}}const QD="",eR=11,Hwe={larget:51,default:42,small:33},Uwe="ElSelectV2",jwe=(e,t)=>{const{t:n}=Dn(),s=Xe("select-v2"),o=Xe("input"),{form:r,formItem:i}=Hf(),{compatTeleported:a}=Uf(Uwe,"popperAppendToBody"),l=vn({inputValue:QD,displayInputValue:QD,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:"",query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),u=j(-1),c=j(-1),d=j(null),f=j(null),h=j(null),p=j(null),m=j(null),g=j(null),v=j(null),b=j(!1),w=O(()=>e.disabled||(r==null?void 0:r.disabled)),y=O(()=>{const Je=P.value.length*34;return Je>e.height?e.height:Je}),k=O(()=>e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!==""),x=O(()=>{const Je=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:k.value;return e.clearable&&!w.value&&l.comboBoxHovering&&Je}),C=O(()=>e.remote&&e.filterable?"":bm),S=O(()=>C.value&&s.is("reverse",b.value)),T=O(()=>(i==null?void 0:i.validateState)||""),A=O(()=>qF[T.value]),R=O(()=>e.remote?300:0),L=O(()=>{const Je=P.value;return e.loading?e.loadingText||n("el.select.loading"):e.remote&&l.inputValue===""&&Je.length===0?!1:e.filterable&&l.inputValue&&Je.length>0?e.noMatchText||n("el.select.noMatch"):Je.length===0?e.noDataText||n("el.select.noData"):null}),P=O(()=>{const Je=kt=>{const hn=l.inputValue;return hn?kt.label.includes(hn):!0};return e.loading?[]:Vwe(e.options.concat(l.createdOptions).map(kt=>{if(Et(kt.options)){const hn=kt.options.filter(Je);if(hn.length>0)return nt(Me({},kt),{options:hn})}else if(e.remote||Je(kt))return kt;return null}).filter(kt=>kt!==null))}),V=O(()=>P.value.every(Je=>Je.disabled)),H=Ls(),F=O(()=>H.value==="small"?"small":"default"),M=O(()=>{const Je=g.value,kt=F.value||"default",hn=Je?Number.parseInt(getComputedStyle(Je).paddingLeft):0,Xn=Je?Number.parseInt(getComputedStyle(Je).paddingRight):0;return l.selectWidth-Xn-hn-Hwe[kt]}),B=()=>{var Je,kt,hn;c.value=((hn=(kt=(Je=m.value)==null?void 0:Je.getBoundingClientRect)==null?void 0:kt.call(Je))==null?void 0:hn.width)||200},Y=O(()=>({width:`${l.calculatedWidth===0?eR:Math.ceil(l.calculatedWidth)+eR}px`})),J=O(()=>Et(e.modelValue)?e.modelValue.length===0&&!l.displayInputValue:e.filterable?l.displayInputValue.length===0:!0),ee=O(()=>{const Je=e.placeholder||n("el.select.placeholder");return e.multiple?Je:l.selectedLabel||Je}),te=O(()=>{var Je,kt;return(kt=(Je=p.value)==null?void 0:Je.popperRef)==null?void 0:kt.contentRef}),re=O(()=>{if(e.multiple){const Je=e.modelValue.length;if(e.modelValue.length>0)return P.value.findIndex(kt=>kt.value===e.modelValue[Je-1])}else if(e.modelValue)return P.value.findIndex(Je=>Je.value===e.modelValue);return-1}),$e=O(()=>b.value&&L.value!==!1),{createNewOption:se,removeNewOption:Q,selectNewOption:ae,clearAllNewOption:pe}=zwe(e,l),{handleCompositionStart:ke,handleCompositionUpdate:Be,handleCompositionEnd:je}=Wwe(Je=>un(Je)),qe=()=>{var Je,kt,hn;(kt=(Je=f.value).focus)==null||kt.call(Je),(hn=p.value)==null||hn.updatePopper()},ne=()=>{if(!e.automaticDropdown&&!w.value)return l.isComposing&&(l.softFocus=!0),vt(()=>{var Je,kt;b.value=!b.value,(kt=(Je=f.value)==null?void 0:Je.focus)==null||kt.call(Je)})},ue=()=>(e.filterable&&l.inputValue!==l.selectedLabel&&(l.query=l.selectedLabel),Fe(l.inputValue),vt(()=>{se(l.inputValue)})),Se=hr(ue,R.value),Fe=Je=>{l.previousQuery!==Je&&(l.previousQuery=Je,e.filterable&&zt(e.filterMethod)?e.filterMethod(Je):e.filterable&&e.remote&&zt(e.remoteMethod)&&e.remoteMethod(Je))},Le=Je=>{Zo(e.modelValue,Je)||t(ro,Je)},Ke=Je=>{t(Ht,Je),Le(Je),l.previousValue=Je.toString()},ie=(Je=[],kt)=>{if(!rn(kt))return Je.indexOf(kt);const hn=e.valueKey;let Xn=-1;return Je.some((Si,zr)=>ps(Si,hn)===ps(kt,hn)?(Xn=zr,!0):!1),Xn},ge=Je=>rn(Je)?ps(Je,e.valueKey):Je,be=Je=>rn(Je)?Je.label:Je,Ie=()=>{if(!(e.collapseTags&&!e.filterable))return vt(()=>{var Je,kt;if(!f.value)return;const hn=g.value;m.value.height=hn.offsetHeight,b.value&&L.value!==!1&&((kt=(Je=p.value)==null?void 0:Je.updatePopper)==null||kt.call(Je))})},ot=()=>{var Je,kt;if(ve(),B(),(kt=(Je=p.value)==null?void 0:Je.updatePopper)==null||kt.call(Je),e.multiple)return Ie()},ve=()=>{const Je=g.value;Je&&(l.selectWidth=Je.getBoundingClientRect().width)},Ve=(Je,kt,hn=!0)=>{var Xn,Si;if(e.multiple){let zr=e.modelValue.slice();const rd=ie(zr,ge(Je));rd>-1?(zr=[...zr.slice(0,rd),...zr.slice(rd+1)],l.cachedOptions.splice(rd,1),Q(Je)):(e.multipleLimit<=0||zr.length<e.multipleLimit)&&(zr=[...zr,ge(Je)],l.cachedOptions.push(Je),ae(Je),Lt(kt)),Ke(zr),Je.created&&(l.query="",Fe(""),l.inputLength=20),e.filterable&&!e.reserveKeyword&&((Si=(Xn=f.value).focus)==null||Si.call(Xn),he("")),e.filterable&&(l.calculatedWidth=v.value.getBoundingClientRect().width),Ie(),qt()}else u.value=kt,l.selectedLabel=Je.label,Ke(ge(Je)),b.value=!1,l.isComposing=!1,l.isSilentBlur=hn,ae(Je),Je.created||pe(),Lt(kt)},ft=(Je,kt)=>{const{valueKey:hn}=e,Xn=e.modelValue.indexOf(ps(kt,hn));if(Xn>-1&&!w.value){const Si=[...e.modelValue.slice(0,Xn),...e.modelValue.slice(Xn+1)];return l.cachedOptions.splice(Xn,1),Ke(Si),t("remove-tag",ps(kt,hn)),l.softFocus=!0,Q(kt),vt(qe)}Je.stopPropagation()},K=Je=>{const kt=l.isComposing;l.isComposing=!0,l.softFocus?l.softFocus=!1:kt||t("focus",Je)},E=()=>(l.softFocus=!1,vt(()=>{var Je,kt;(kt=(Je=f.value)==null?void 0:Je.blur)==null||kt.call(Je),v.value&&(l.calculatedWidth=v.value.getBoundingClientRect().width),l.isSilentBlur?l.isSilentBlur=!1:l.isComposing&&t("blur"),l.isComposing=!1})),I=()=>{l.displayInputValue.length>0?he(""):b.value=!1},G=Je=>{if(l.displayInputValue.length===0){Je.preventDefault();const kt=e.modelValue.slice();kt.pop(),Q(l.cachedOptions.pop()),Ke(kt)}},Z=()=>{let Je;return Et(e.modelValue)?Je=[]:Je="",l.softFocus=!0,e.multiple?l.cachedOptions=[]:l.selectedLabel="",b.value=!1,Ke(Je),t("clear"),pe(),vt(qe)},he=Je=>{l.displayInputValue=Je,l.inputValue=Je},Te=(Je,kt=void 0)=>{const hn=P.value;if(!["forward","backward"].includes(Je)||w.value||hn.length<=0||V.value)return;if(!b.value)return ne();kt===void 0&&(kt=l.hoveringIndex);let Xn=-1;Je==="forward"?(Xn=kt+1,Xn>=hn.length&&(Xn=0)):Je==="backward"&&(Xn=kt-1,Xn<0&&(Xn=hn.length-1));const Si=hn[Xn];if(Si.disabled||Si.type==="Group")return Te(Je,Xn);Lt(Xn),Ea(Xn)},bt=()=>{if(b.value)~l.hoveringIndex&&P.value[l.hoveringIndex]&&Ve(P.value[l.hoveringIndex],l.hoveringIndex,!1);else return ne()},Lt=Je=>{l.hoveringIndex=Je},Dt=()=>{l.hoveringIndex=-1},qt=()=>{var Je;const kt=f.value;kt&&((Je=kt.focus)==null||Je.call(kt))},un=Je=>{const kt=Je.target.value;if(he(kt),l.displayInputValue.length>0&&!b.value&&(b.value=!0),l.calculatedWidth=v.value.getBoundingClientRect().width,e.multiple&&Ie(),e.remote)Se();else return ue()},Lo=()=>(b.value=!1,E()),$o=()=>(l.inputValue=l.displayInputValue,vt(()=>{~re.value&&(Lt(re.value),Ea(l.hoveringIndex))})),Ea=Je=>{h.value.scrollToItem(Je)},ku=()=>{if(Dt(),e.multiple)if(e.modelValue.length>0){let Je=!1;l.cachedOptions.length=0,l.previousValue=e.modelValue.toString(),e.modelValue.forEach(kt=>{const hn=P.value.findIndex(Xn=>ge(Xn)===kt);~hn&&(l.cachedOptions.push(P.value[hn]),Je||Lt(hn),Je=!0)})}else l.cachedOptions=[],l.previousValue="";else if(k.value){l.previousValue=e.modelValue;const Je=P.value,kt=Je.findIndex(hn=>ge(hn)===ge(e.modelValue));~kt?(l.selectedLabel=Je[kt].label,Lt(kt)):l.selectedLabel=`${e.modelValue}`}else l.selectedLabel="",l.previousValue="";B()};return We(b,Je=>{var kt,hn;t("visible-change",Je),Je?(hn=(kt=p.value).update)==null||hn.call(kt):(l.displayInputValue="",se(""))}),We(()=>e.modelValue,(Je,kt)=>{var hn;(!Je||Je.toString()!==l.previousValue)&&ku(),Zo(Je,kt)||(hn=i==null?void 0:i.validate)==null||hn.call(i,"change").catch(Xn=>void 0)},{deep:!0}),We(()=>e.options,()=>{const Je=f.value;(!Je||Je&&document.activeElement!==Je)&&ku()},{deep:!0}),We(P,()=>vt(h.value.resetScrollTop)),Ft(()=>{ku(),Bf(m.value,ot)}),fm(()=>{zf(m.value,ot)}),{collapseTagSize:F,currentPlaceholder:ee,expanded:b,emptyText:L,popupHeight:y,debounce:R,filteredOptions:P,iconComponent:C,iconReverse:S,inputWrapperStyle:Y,popperSize:c,dropdownMenuVisible:$e,hasModelValue:k,shouldShowPlaceholder:J,selectDisabled:w,selectSize:H,showClearBtn:x,states:l,tagMaxWidth:M,nsSelectV2:s,nsInput:o,calculatorRef:v,controlRef:d,inputRef:f,menuRef:h,popper:p,selectRef:m,selectionRef:g,popperRef:te,validateState:T,validateIcon:A,compatTeleported:a,debouncedOnInputChange:Se,deleteTag:ft,getLabel:be,getValueKey:ge,handleBlur:E,handleClear:Z,handleClickOutside:Lo,handleDel:G,handleEsc:I,handleFocus:K,handleMenuEnter:$o,handleResize:ot,toggleMenu:ne,scrollTo:Ea,onInput:un,onKeyboardNavigate:Te,onKeyboardSelect:bt,onSelect:Ve,onHover:Lt,onUpdateInputValue:he,handleCompositionStart:ke,handleCompositionEnd:je,handleCompositionUpdate:Be}},Gwe=xe({name:"ElSelectV2",components:{ElSelectMenu:Bwe,ElTag:Ty,ElTooltip:vr,ElIcon:xt},directives:{ClickOutside:Gc,ModelText:f$},props:Dwe,emits:[Ht,ro,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const n=jwe(e,t);return Gt(_B,{props:vn(nt(Me({},oo(e)),{height:n.popupHeight})),onSelect:n.onSelect,onHover:n.onHover,onKeyboardNavigate:n.onKeyboardNavigate,onKeyboardSelect:n.onKeyboardSelect}),n}}),Kwe={key:0},qwe=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],Ywe=["textContent"],Xwe=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],Zwe=["textContent"];function Jwe(e,t,n,s,o,r){const i=Ne("el-tag"),a=Ne("el-tooltip"),l=Ne("el-icon"),u=Ne("el-select-menu"),c=Or("model-text"),d=Or("click-outside");return It((_(),U("div",{ref:"selectRef",class:W([e.nsSelectV2.b(),e.nsSelectV2.m(e.selectSize)]),onClick:t[24]||(t[24]=wt((...f)=>e.toggleMenu&&e.toggleMenu(...f),["stop"])),onMouseenter:t[25]||(t[25]=f=>e.states.comboBoxHovering=!0),onMouseleave:t[26]||(t[26]=f=>e.states.comboBoxHovering=!1)},[fe(a,{ref:"popper",visible:e.dropdownMenuVisible,"onUpdate:visible":t[22]||(t[22]=f=>e.dropdownMenuVisible=f),teleported:e.compatTeleported,"popper-class":[e.nsSelectV2.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,placement:"bottom-start",pure:"",transition:`${e.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:t[23]||(t[23]=f=>e.states.inputValue=e.states.displayInputValue)},{default:de(()=>{var f;return[q("div",{ref:"selectionRef",class:W([e.nsSelectV2.e("wrapper"),e.nsSelectV2.is("focused",e.states.isComposing),e.nsSelectV2.is("hovering",e.states.comboBoxHovering),e.nsSelectV2.is("filterable",e.filterable),e.nsSelectV2.is("disabled",e.selectDisabled)])},[e.$slots.prefix?(_(),U("div",Kwe,[Pe(e.$slots,"prefix")])):me("v-if",!0),e.multiple?(_(),U("div",{key:1,class:W(e.nsSelectV2.e("selection"))},[e.collapseTags&&e.modelValue.length>0?(_(),U("div",{key:0,class:W(e.nsSelectV2.e("selected-item"))},[fe(i,{closable:!e.selectDisabled&&!((f=e.states.cachedOptions[0])!=null&&f.disable),size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:t[0]||(t[0]=h=>e.deleteTag(h,e.states.cachedOptions[0]))},{default:de(()=>{var h;return[q("span",{class:W(e.nsSelectV2.e("tags-text")),style:it({maxWidth:`${e.tagMaxWidth}px`})},He((h=e.states.cachedOptions[0])==null?void 0:h.label),7)]}),_:1},8,["closable","size"]),e.modelValue.length>1?(_(),ye(i,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:de(()=>[e.collapseTagsTooltip?(_(),ye(a,{key:0,disabled:e.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:!1},{default:de(()=>[q("span",{class:W(e.nsSelectV2.e("tags-text")),style:it({maxWidth:`${e.tagMaxWidth}px`})},"+ "+He(e.modelValue.length-1),7)]),content:de(()=>[q("div",{class:W(e.nsSelectV2.e("selection"))},[(_(!0),U(lt,null,Zt(e.states.cachedOptions,(h,p)=>(_(),U("div",{key:p,class:W(e.nsSelectV2.e("selected-item"))},[(_(),ye(i,{key:e.getValueKey(h),closable:!e.selectDisabled&&!h.disabled,size:e.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:m=>e.deleteTag(m,h)},{default:de(()=>[q("span",{class:W(e.nsSelectV2.e("tags-text")),style:it({maxWidth:`${e.tagMaxWidth}px`})},He(e.getLabel(h)),7)]),_:2},1032,["closable","size","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect"])):(_(),U("span",{key:1,class:W(e.nsSelectV2.e("tags-text")),style:it({maxWidth:`${e.tagMaxWidth}px`})},"+ "+He(e.modelValue.length-1),7))]),_:1},8,["size"])):me("v-if",!0)],2)):(_(!0),U(lt,{key:1},Zt(e.states.cachedOptions,(h,p)=>(_(),U("div",{key:p,class:W(e.nsSelectV2.e("selected-item"))},[(_(),ye(i,{key:e.getValueKey(h),closable:!e.selectDisabled&&!h.disabled,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:m=>e.deleteTag(m,h)},{default:de(()=>[q("span",{class:W(e.nsSelectV2.e("tags-text")),style:it({maxWidth:`${e.tagMaxWidth}px`})},He(e.getLabel(h)),7)]),_:2},1032,["closable","size","onClose"]))],2))),128)),q("div",{class:W([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")]),style:it(e.inputWrapperStyle)},[It(q("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:W([e.nsSelectV2.is(e.selectSize),e.nsSelectV2.e("combobox-input")]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":t[1]||(t[1]=(...h)=>e.onUpdateInputValue&&e.onUpdateInputValue(...h)),onFocus:t[2]||(t[2]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onInput:t[3]||(t[3]=(...h)=>e.onInput&&e.onInput(...h)),onCompositionstart:t[4]||(t[4]=(...h)=>e.handleCompositionStart&&e.handleCompositionStart(...h)),onCompositionupdate:t[5]||(t[5]=(...h)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...h)),onCompositionend:t[6]||(t[6]=(...h)=>e.handleCompositionEnd&&e.handleCompositionEnd(...h)),onKeydown:[t[7]||(t[7]=Qt(wt(h=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[8]||(t[8]=Qt(wt(h=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[9]||(t[9]=Qt(wt((...h)=>e.onKeyboardSelect&&e.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),t[10]||(t[10]=Qt(wt((...h)=>e.handleEsc&&e.handleEsc(...h),["stop","prevent"]),["esc"])),t[11]||(t[11]=Qt(wt((...h)=>e.handleDel&&e.handleDel(...h),["stop"]),["delete"]))]},null,42,qwe),[[c,e.states.displayInputValue]]),e.filterable?(_(),U("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:W(e.nsSelectV2.e("input-calculator")),textContent:He(e.states.displayInputValue)},null,10,Ywe)):me("v-if",!0)],6)],2)):(_(),U(lt,{key:2},[q("div",{class:W([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")])},[It(q("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:W(e.nsSelectV2.e("combobox-input")),disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",unselectable:e.expanded?"on":void 0,onCompositionstart:t[12]||(t[12]=(...h)=>e.handleCompositionStart&&e.handleCompositionStart(...h)),onCompositionupdate:t[13]||(t[13]=(...h)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...h)),onCompositionend:t[14]||(t[14]=(...h)=>e.handleCompositionEnd&&e.handleCompositionEnd(...h)),onFocus:t[15]||(t[15]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onInput:t[16]||(t[16]=(...h)=>e.onInput&&e.onInput(...h)),onKeydown:[t[17]||(t[17]=Qt(wt(h=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[18]||(t[18]=Qt(wt(h=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[19]||(t[19]=Qt(wt((...h)=>e.onKeyboardSelect&&e.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),t[20]||(t[20]=Qt(wt((...h)=>e.handleEsc&&e.handleEsc(...h),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":t[21]||(t[21]=(...h)=>e.onUpdateInputValue&&e.onUpdateInputValue(...h))},null,42,Xwe),[[c,e.states.displayInputValue]])],2),e.filterable?(_(),U("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:W([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-calculator")]),textContent:He(e.states.displayInputValue)},null,10,Zwe)):me("v-if",!0)],64)),e.shouldShowPlaceholder?(_(),U("span",{key:3,class:W([e.nsSelectV2.e("placeholder"),e.nsSelectV2.is("transparent",e.states.isComposing||(e.placeholder&&e.multiple?e.modelValue.length===0:!e.hasModelValue))])},He(e.currentPlaceholder),3)):me("v-if",!0),q("span",{class:W(e.nsSelectV2.e("suffix"))},[e.iconComponent?It((_(),ye(l,{key:0,class:W([e.nsSelectV2.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:de(()=>[(_(),ye(an(e.iconComponent)))]),_:1},8,["class"])),[[cn,!e.showClearBtn]]):me("v-if",!0),e.showClearBtn&&e.clearIcon?(_(),ye(l,{key:1,class:W([e.nsSelectV2.e("caret"),e.nsInput.e("icon")]),onClick:wt(e.handleClear,["prevent","stop"])},{default:de(()=>[(_(),ye(an(e.clearIcon)))]),_:1},8,["class","onClick"])):me("v-if",!0),e.validateState&&e.validateIcon?(_(),ye(l,{key:2,class:W([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:de(()=>[(_(),ye(an(e.validateIcon)))]),_:1},8,["class"])):me("v-if",!0)],2)],2)]}),content:de(()=>[fe(u,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:de(f=>[Pe(e.$slots,"default",Oi(ql(f)))]),empty:de(()=>[Pe(e.$slots,"empty",{},()=>[q("p",{class:W(e.nsSelectV2.e("empty"))},He(e.emptyText?e.emptyText:""),3)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","effect","transition","persistent","onBeforeShow"])],34)),[[d,e.handleClickOutside,e.popperRef]])}var _v=Ye(Gwe,[["render",Jwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);_v.install=e=>{e.component(_v.name,_v)};const Qwe=_v,e2e=Qwe,t2e=pt({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),n2e=pt({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),s2e={name:"ElSkeletonItem"},o2e=xe(nt(Me({},s2e),{props:n2e,setup(e){const t=Xe("skeleton");return(n,s)=>(_(),U("div",{class:W([N(t).e("item"),N(t).e(n.variant)])},[n.variant==="image"?(_(),ye(N(tre),{key:0})):me("v-if",!0)],2))}}));var ub=Ye(o2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const r2e={name:"ElSkeleton"},i2e=xe(nt(Me({},r2e),{props:t2e,setup(e,{expose:t}){const n=e,s=Xe("skeleton"),o=Wie(qs(n,"loading"),n.throttle);return t({uiLoading:o}),(r,i)=>N(o)?(_(),U("div",Wn({key:0,class:[N(s).b(),N(s).is("animated",r.animated)]},r.$attrs),[(_(!0),U(lt,null,Zt(r.count,a=>(_(),U(lt,{key:a},[r.loading?Pe(r.$slots,"template",{key:a},()=>[fe(ub,{class:W(N(s).is("first")),variant:"p"},null,8,["class"]),(_(!0),U(lt,null,Zt(r.rows,l=>(_(),ye(ub,{key:l,class:W([N(s).e("paragraph"),N(s).is("last",l===r.rows&&r.rows>1)]),variant:"p"},null,8,["class"]))),128))]):me("v-if",!0)],64))),128))],16)):Pe(r.$slots,"default",Oi(Wn({key:1},r.$attrs)))}}));var a2e=Ye(i2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const l2e=Kt(a2e,{SkeletonItem:ub}),u2e=ws(ub),c2e=(e,t,n)=>{const s=j(null),o=j(!1),r=O(()=>t.value instanceof Function),i=O(()=>r.value&&t.value(e.modelValue)||e.modelValue),a=hr(()=>{n.value&&(o.value=!0)},50),l=hr(()=>{n.value&&(o.value=!1)},50);return{tooltip:s,tooltipVisible:o,formatValue:i,displayTooltip:a,hideTooltip:l}},d2e=(e,t,n)=>{const{disabled:s,min:o,max:r,step:i,showTooltip:a,precision:l,sliderSize:u,formatTooltip:c,emitChange:d,resetSize:f,updateDragging:h}=rt("SliderProvider"),{tooltip:p,tooltipVisible:m,formatValue:g,displayTooltip:v,hideTooltip:b}=c2e(e,c,a),w=O(()=>`${(e.modelValue-o.value)/(r.value-o.value)*100}%`),y=O(()=>e.vertical?{bottom:w.value}:{left:w.value}),k=()=>{t.hovering=!0,v()},x=()=>{t.hovering=!1,t.dragging||b()},C=H=>{s.value||(H.preventDefault(),R(H),ts(window,"mousemove",L),ts(window,"touchmove",L),ts(window,"mouseup",P),ts(window,"touchend",P),ts(window,"contextmenu",P))},S=()=>{s.value||(t.newPosition=Number.parseFloat(w.value)-i.value/(r.value-o.value)*100,V(t.newPosition),d())},T=()=>{s.value||(t.newPosition=Number.parseFloat(w.value)+i.value/(r.value-o.value)*100,V(t.newPosition),d())},A=H=>{let F,M;return H.type.startsWith("touch")?(M=H.touches[0].clientY,F=H.touches[0].clientX):(M=H.clientY,F=H.clientX),{clientX:F,clientY:M}},R=H=>{t.dragging=!0,t.isClick=!0;const{clientX:F,clientY:M}=A(H);e.vertical?t.startY=M:t.startX=F,t.startPosition=Number.parseFloat(w.value),t.newPosition=t.startPosition},L=H=>{if(t.dragging){t.isClick=!1,v(),f();let F;const{clientX:M,clientY:B}=A(H);e.vertical?(t.currentY=B,F=(t.startY-t.currentY)/u.value*100):(t.currentX=M,F=(t.currentX-t.startX)/u.value*100),t.newPosition=t.startPosition+F,V(t.newPosition)}},P=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||b(),t.isClick||(V(t.newPosition),d())},0),Ss(window,"mousemove",L),Ss(window,"touchmove",L),Ss(window,"mouseup",P),Ss(window,"touchend",P),Ss(window,"contextmenu",P))},V=async H=>{if(H===null||Number.isNaN(+H))return;H<0?H=0:H>100&&(H=100);const F=100/((r.value-o.value)/i.value);let B=Math.round(H/F)*F*(r.value-o.value)*.01+o.value;B=Number.parseFloat(B.toFixed(l.value)),n(Ht,B),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await vt(),t.dragging&&v(),p.value.updatePopper()};return We(()=>t.dragging,H=>{h(H)}),{tooltip:p,tooltipVisible:m,showTooltip:a,wrapperStyle:y,formatValue:g,handleMouseEnter:k,handleMouseLeave:x,onButtonDown:C,onLeftKeyDown:S,onRightKeyDown:T,setPosition:V}},f2e=xe({name:"ElSliderButton",components:{ElTooltip:vr},props:{modelValue:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:{type:String,default:""}},emits:[Ht],setup(e,{emit:t}){const n=Xe("slider"),s=vn({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:e.modelValue}),{tooltip:o,showTooltip:r,tooltipVisible:i,wrapperStyle:a,formatValue:l,handleMouseEnter:u,handleMouseLeave:c,onButtonDown:d,onLeftKeyDown:f,onRightKeyDown:h,setPosition:p}=d2e(e,s,t),{hovering:m,dragging:g}=oo(s);return{ns:n,tooltip:o,tooltipVisible:i,showTooltip:r,wrapperStyle:a,formatValue:l,handleMouseEnter:u,handleMouseLeave:c,onButtonDown:d,onLeftKeyDown:f,onRightKeyDown:h,setPosition:p,hovering:m,dragging:g}}});function h2e(e,t,n,s,o,r){const i=Ne("el-tooltip");return _(),U("div",{ref:"button",class:W([e.ns.e("button-wrapper"),{hover:e.hovering,dragging:e.dragging}]),style:it(e.wrapperStyle),tabindex:"0",onMouseenter:t[1]||(t[1]=(...a)=>e.handleMouseEnter&&e.handleMouseEnter(...a)),onMouseleave:t[2]||(t[2]=(...a)=>e.handleMouseLeave&&e.handleMouseLeave(...a)),onMousedown:t[3]||(t[3]=(...a)=>e.onButtonDown&&e.onButtonDown(...a)),onTouchstart:t[4]||(t[4]=(...a)=>e.onButtonDown&&e.onButtonDown(...a)),onFocus:t[5]||(t[5]=(...a)=>e.handleMouseEnter&&e.handleMouseEnter(...a)),onBlur:t[6]||(t[6]=(...a)=>e.handleMouseLeave&&e.handleMouseLeave(...a)),onKeydown:[t[7]||(t[7]=Qt((...a)=>e.onLeftKeyDown&&e.onLeftKeyDown(...a),["left"])),t[8]||(t[8]=Qt((...a)=>e.onRightKeyDown&&e.onRightKeyDown(...a),["right"])),t[9]||(t[9]=Qt(wt((...a)=>e.onLeftKeyDown&&e.onLeftKeyDown(...a),["prevent"]),["down"])),t[10]||(t[10]=Qt(wt((...a)=>e.onRightKeyDown&&e.onRightKeyDown(...a),["prevent"]),["up"]))]},[fe(i,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[0]||(t[0]=a=>e.tooltipVisible=a),placement:"top","stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!e.showTooltip,persistent:""},{content:de(()=>[q("span",null,He(e.formatValue),1)]),default:de(()=>[q("div",{class:W([e.ns.e("button"),{hover:e.hovering,dragging:e.dragging}])},null,2)]),_:1},8,["visible","popper-class","disabled"])],38)}var p2e=Ye(f2e,[["render",h2e],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const m2e=xe({name:"ElMarker",props:{mark:{type:[String,Object],default:()=>{}}},setup(e){const t=Xe("slider"),n=O(()=>typeof e.mark=="string"?e.mark:e.mark.label);return{ns:t,label:n}},render(){var e;return at("div",{class:this.ns.e("marks-text"),style:(e=this.mark)==null?void 0:e.style},this.label)}});var g2e=Ye(m2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/marker.vue"]]);const v2e=e=>O(()=>e.marks?Object.keys(e.marks).map(parseFloat).sort((n,s)=>n-s).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),b2e=(e,t,n)=>{const s=rt(Lr,{}),o=rt(di,{}),r=Ns(null),i=j(null),a=j(null),l={firstButton:i,secondButton:a},u=O(()=>e.disabled||s.disabled||!1),c=O(()=>Math.min(t.firstValue,t.secondValue)),d=O(()=>Math.max(t.firstValue,t.secondValue)),f=O(()=>e.range?`${100*(d.value-c.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),h=O(()=>e.range?`${100*(c.value-e.min)/(e.max-e.min)}%`:"0%"),p=O(()=>e.vertical?{height:e.height}:{}),m=O(()=>e.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),g=()=>{r.value&&(t.sliderSize=r.value[`client${e.vertical?"Height":"Width"}`])},v=C=>{const S=e.min+C*(e.max-e.min)/100;if(!e.range){i.value.setPosition(C);return}let T;Math.abs(c.value-S)<Math.abs(d.value-S)?T=t.firstValue<t.secondValue?"firstButton":"secondButton":T=t.firstValue>t.secondValue?"firstButton":"secondButton",l[T].value.setPosition(C)},b=C=>{t.firstValue=C,y(e.range?[c.value,d.value]:C)},w=C=>{t.secondValue=C,e.range&&y([c.value,d.value])},y=C=>{n(Ht,C),n(Xl,C)},k=async()=>{await vt(),n(ro,e.range?[c.value,d.value]:e.modelValue)};return{elFormItem:o,slider:r,firstButton:i,secondButton:a,sliderDisabled:u,minValue:c,maxValue:d,runwayStyle:p,barStyle:m,resetSize:g,setPosition:v,emitChange:k,onSliderClick:C=>{if(!(u.value||t.dragging)){if(g(),e.vertical){const S=r.value.getBoundingClientRect().bottom;v((S-C.clientY)/t.sliderSize*100)}else{const S=r.value.getBoundingClientRect().left;v((C.clientX-S)/t.sliderSize*100)}k()}},setFirstValue:b,setSecondValue:w}},y2e=(e,t,n,s)=>({stops:O(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,a=100*e.step/(e.max-e.min),l=Array.from({length:i-1}).map((u,c)=>(c+1)*a);return e.range?l.filter(u=>u<100*(n.value-e.min)/(e.max-e.min)||u>100*(s.value-e.min)/(e.max-e.min)):l.filter(u=>u>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),w2e=xe({name:"ElSlider",components:{ElInputNumber:lB,SliderButton:p2e,SliderMarker:g2e},props:{modelValue:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},size:{type:String,validator:Pr},inputSize:{type:String,validator:Pr},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Function,default:void 0},disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String,default:""},debounce:{type:Number,default:300},label:{type:String,default:void 0},tooltipClass:{type:String,default:void 0},marks:Object},emits:[Ht,ro,Xl],setup(e,{emit:t}){const n=Xe("slider"),s=vn({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:o,slider:r,firstButton:i,secondButton:a,sliderDisabled:l,minValue:u,maxValue:c,runwayStyle:d,barStyle:f,resetSize:h,emitChange:p,onSliderClick:m,setFirstValue:g,setSecondValue:v}=b2e(e,s,t),{stops:b,getStopStyle:w}=y2e(e,s,u,c),y=Ls(),k=O(()=>e.inputSize||y.value),x=O(()=>[n.b(),n.m(y.value),n.is("vertical",e.vertical),{[n.m("with-input")]:e.showInput}]),C=v2e(e);k2e(e,s,u,c,t,o);const S=O(()=>{const F=[e.min,e.max,e.step].map(M=>{const B=`${M}`.split(".")[1];return B?B.length:0});return Math.max.apply(null,F)}),{sliderWrapper:T}=x2e(e,s,h),{firstValue:A,secondValue:R,oldValue:L,dragging:P,sliderSize:V}=oo(s),H=F=>{s.dragging=F};return Gt("SliderProvider",nt(Me({},oo(e)),{sliderSize:V,disabled:l,precision:S,emitChange:p,resetSize:h,updateDragging:H})),{ns:n,firstValue:A,secondValue:R,oldValue:L,dragging:P,sliderSize:V,slider:r,firstButton:i,secondButton:a,sliderDisabled:l,runwayStyle:d,barStyle:f,emitChange:p,onSliderClick:m,getStopStyle:w,setFirstValue:g,setSecondValue:v,stops:b,markList:C,sliderWrapper:T,sliderWrapperSize:y,sliderInputSize:k,sliderKls:x}}}),k2e=(e,t,n,s,o,r)=>{const i=u=>{o(Ht,u),o(Xl,u)},a=()=>e.range?![n.value,s.value].every((u,c)=>u===t.oldValue[c]):e.modelValue!==t.oldValue,l=()=>{var u,c;if(e.min>e.max){Fs("Slider","min should not be greater than max.");return}const d=e.modelValue;e.range&&Array.isArray(d)?d[1]<e.min?i([e.min,e.min]):d[0]>e.max?i([e.max,e.max]):d[0]<e.min?i([e.min,d[1]]):d[1]>e.max?i([d[0],e.max]):(t.firstValue=d[0],t.secondValue=d[1],a()&&((u=r.validate)==null||u.call(r,"change").catch(f=>void 0),t.oldValue=d.slice())):!e.range&&typeof d=="number"&&!Number.isNaN(d)&&(d<e.min?i(e.min):d>e.max?i(e.max):(t.firstValue=d,a()&&((c=r.validate)==null||c.call(r,"change").catch(f=>void 0),t.oldValue=d)))};l(),We(()=>t.dragging,u=>{u||l()}),We(()=>e.modelValue,(u,c)=>{t.dragging||Array.isArray(u)&&Array.isArray(c)&&u.every((d,f)=>d===c[f])&&t.firstValue===u[0]&&t.secondValue===u[1]||l()},{deep:!0}),We(()=>[e.min,e.max],()=>{l()})},x2e=(e,t,n)=>{const s=j(null);return Ft(async()=>{let o;e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue],o=`${t.firstValue}-${t.secondValue}`):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue,o=t.firstValue),s.value.setAttribute("aria-valuetext",o),s.value.setAttribute("aria-label",e.label?e.label:`slider between ${e.min} and ${e.max}`),ts(window,"resize",n),await vt(),n()}),qn(()=>{Ss(window,"resize",n)}),{sliderWrapper:s}},C2e=["aria-valuemin","aria-valuemax","aria-orientation","aria-disabled"],$2e={key:1};function S2e(e,t,n,s,o,r){const i=Ne("slider-button"),a=Ne("slider-marker"),l=Ne("el-input-number");return _(),U("div",{ref:"sliderWrapper",class:W(e.sliderKls),role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled},[q("div",{ref:"slider",class:W([e.ns.e("runway"),{"show-input":e.showInput&&!e.range},e.ns.is("disabled",e.sliderDisabled)]),style:it(e.runwayStyle),onClick:t[0]||(t[0]=(...u)=>e.onSliderClick&&e.onSliderClick(...u))},[q("div",{class:W(e.ns.e("bar")),style:it(e.barStyle)},null,6),fe(i,{ref:"firstButton","model-value":e.firstValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setFirstValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"]),e.range?(_(),ye(i,{key:0,ref:"secondButton","model-value":e.secondValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setSecondValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"])):me("v-if",!0),e.showStops?(_(),U("div",$2e,[(_(!0),U(lt,null,Zt(e.stops,(u,c)=>(_(),U("div",{key:c,class:W(e.ns.e("stop")),style:it(e.getStopStyle(u))},null,6))),128))])):me("v-if",!0),e.markList.length>0?(_(),U(lt,{key:2},[q("div",null,[(_(!0),U(lt,null,Zt(e.markList,(u,c)=>(_(),U("div",{key:c,style:it(e.getStopStyle(u.position)),class:W([e.ns.e("stop"),e.ns.e("marks-stop")])},null,6))),128))]),q("div",{class:W(e.ns.e("marks"))},[(_(!0),U(lt,null,Zt(e.markList,(u,c)=>(_(),ye(a,{key:c,mark:u.mark,style:it(e.getStopStyle(u.position))},null,8,["mark","style"]))),128))],2)],64)):me("v-if",!0)],6),e.showInput&&!e.range?(_(),ye(l,{key:0,ref:"input","model-value":e.firstValue,class:W(e.ns.e("input")),step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.sliderInputSize,"onUpdate:modelValue":e.setFirstValue,onChange:e.emitChange},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):me("v-if",!0)],10,C2e)}var Nv=Ye(w2e,[["render",S2e],["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/index.vue"]]);Nv.install=e=>{e.component(Nv.name,Nv)};const I2e=Nv,E2e=I2e,T2e=pt({prefixCls:{type:String,default:""}}),_2e=xe({props:T2e,setup(e){const t=Xe("space");return{classes:O(()=>`${e.prefixCls||t.b()}__item`)}}});function N2e(e,t,n,s,o,r){return _(),U("div",{class:W(e.classes)},[Pe(e.$slots,"default")],2)}var tR=Ye(_2e,[["render",N2e],["__file","/home/runner/work/element-plus/element-plus/packages/components/space/src/item.vue"]]);const nR={small:8,default:12,large:16};function A2e(e){const t=Xe("space"),n=O(()=>[t.b(),t.m(e.direction),e.class]),s=j(0),o=j(0),r=O(()=>{const a=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${o.value}px`}:{},l={alignItems:e.alignment};return[a,l,e.style]}),i=O(()=>{const a={paddingBottom:`${o.value}px`,marginRight:`${s.value}px`},l=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[a,l]});return oi(()=>{const{size:a="small",wrap:l,direction:u,fill:c}=e;if(Array.isArray(a)){const[d=0,f=0]=a;s.value=d,o.value=f}else{let d;mn(a)?d=a:d=nR[a]||nR.small,(l||c)&&u==="horizontal"?s.value=o.value=d:u==="horizontal"?(s.value=d,o.value=0):(o.value=d,s.value=0)}}),{classes:n,containerStyle:r,itemStyle:i}}const D2e=pt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Qe([String,Object,Array]),default:""},style:{type:Qe([String,Array,Object]),default:""},alignment:{type:Qe(String),default:"center"},prefixCls:{type:String},spacer:{type:Qe([Object,String,Number,Array]),default:null,validator:e=>Ts(e)||mn(e)||Bt(e)},wrap:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:$a,validator:e=>mn(e)||Et(e)&&e.length===2&&e.every(t=>mn(t))}});var R2e=xe({name:"ElSpace",props:D2e,setup(e,{slots:t}){const{classes:n,containerStyle:s,itemStyle:o}=A2e(e);return()=>{var r;const{spacer:i,prefixCls:a,direction:l}=e,u=Pe(t,"default",{key:0},()=>[]);if(((r=u.children)!=null?r:[]).length===0)return null;if(Et(u.children)){let c=[];if(u.children.forEach((d,f)=>{ZF(d)?Et(d.children)&&d.children.forEach((h,p)=>{c.push(fe(tR,{style:o.value,prefixCls:a,key:`nested-${p}`},{default:()=>[h]},qr.PROPS|qr.STYLE,["style","prefixCls"]))}):Sie(d)&&c.push(fe(tR,{style:o.value,prefixCls:a,key:`LoopKey${f}`},{default:()=>[d]},qr.PROPS|qr.STYLE,["style","prefixCls"]))}),i){const d=c.length-1;c=c.reduce((f,h,p)=>{const m=[...f,h];return p!==d&&m.push(fe("span",{style:[o.value,l==="vertical"?"width: 100%":null],key:p},[Ts(i)?i:Yt(i,qr.TEXT)],qr.STYLE)),m},[])}return fe("div",{class:n.value,style:s.value},c,qr.STYLE|qr.CLASS)}return u.children}}});const M2e=Kt(R2e),O2e=xe({name:"ElSteps",props:{space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},alignCenter:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},finishStatus:{type:String,default:"finish",validator:e=>["wait","process","finish","error","success"].includes(e)},processStatus:{type:String,default:"process",validator:e=>["wait","process","finish","error","success"].includes(e)}},emits:[ro],setup(e,{emit:t}){const n=Xe("steps"),s=j([]);return We(s,()=>{s.value.forEach((o,r)=>{o.setIndex(r)})}),Gt("ElSteps",{props:e,steps:s}),We(()=>e.active,(o,r)=>{t(ro,o,r)}),{steps:s,ns:n}}});function P2e(e,t,n,s,o,r){return _(),U("div",{class:W([e.ns.b(),e.ns.m(e.simple?"simple":e.direction)])},[Pe(e.$slots,"default")],2)}var F2e=Ye(O2e,[["render",P2e],["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/index.vue"]]);const L2e=xe({name:"ElStep",components:{ElIcon:xt,Close:ci,Check:of},props:{title:{type:String,default:""},icon:{type:[String,Object],default:""},description:{type:String,default:""},status:{type:String,default:"",validator:e=>["","wait","process","finish","error","success"].includes(e)}},setup(e){const t=Xe("step"),n=j(-1),s=j({}),o=j(""),r=rt("ElSteps"),i=jt();Ft(()=>{We([()=>r.props.active,()=>r.props.processStatus,()=>r.props.finishStatus],([y])=>{b(y)},{immediate:!0})}),qn(()=>{r.steps.value=r.steps.value.filter(y=>y.uid!==i.uid)});const a=O(()=>e.status||o.value),l=O(()=>{const y=r.steps.value[n.value-1];return y?y.currentStatus:"wait"}),u=O(()=>r.props.alignCenter),c=O(()=>r.props.direction==="vertical"),d=O(()=>r.props.simple),f=O(()=>r.steps.value.length),h=O(()=>{var y;return((y=r.steps.value[f.value-1])==null?void 0:y.uid)===i.uid}),p=O(()=>d.value?"":r.props.space),m=O(()=>{const y={flexBasis:typeof p.value=="number"?`${p.value}px`:p.value?p.value:`${100/(f.value-(u.value?0:1))}%`};return c.value||h.value&&(y.maxWidth=`${100/f.value}%`),y}),g=y=>{n.value=y},v=y=>{let k=100;const x={};x.transitionDelay=`${150*n.value}ms`,y===r.props.processStatus?k=0:y==="wait"&&(k=0,x.transitionDelay=`${-150*n.value}ms`),x.borderWidth=k&&!d.value?"1px":0,x[r.props.direction==="vertical"?"height":"width"]=`${k}%`,s.value=x},b=y=>{y>n.value?o.value=r.props.finishStatus:y===n.value&&l.value!=="error"?o.value=r.props.processStatus:o.value="wait";const k=r.steps.value[f.value-1];k&&k.calcProgress(o.value)},w=vn({uid:O(()=>i.uid),currentStatus:a,setIndex:g,calcProgress:v});return r.steps.value=[...r.steps.value,w],{ns:t,index:n,lineStyle:s,currentStatus:a,isCenter:u,isVertical:c,isSimple:d,isLast:h,space:p,style:m,parent:r,setIndex:g,calcProgress:v,updateStatus:b}}});function B2e(e,t,n,s,o,r){const i=Ne("el-icon"),a=Ne("check"),l=Ne("close");return _(),U("div",{style:it(e.style),class:W([e.ns.b(),e.ns.is(e.isSimple?"simple":e.parent.props.direction),e.ns.is("flex",e.isLast&&!e.space&&!e.isCenter),e.ns.is("center",e.isCenter&&!e.isVertical&&!e.isSimple)])},[me(" icon & line "),q("div",{class:W([e.ns.e("head"),e.ns.is(e.currentStatus)])},[e.isSimple?me("v-if",!0):(_(),U("div",{key:0,class:W(e.ns.e("line"))},[q("i",{class:W(e.ns.e("line-inner")),style:it(e.lineStyle)},null,6)],2)),q("div",{class:W([e.ns.e("icon"),e.ns.is(e.icon?"icon":"text")])},[e.currentStatus!=="success"&&e.currentStatus!=="error"?Pe(e.$slots,"icon",{key:0},()=>[e.icon?(_(),ye(i,{key:0,class:W(e.ns.e("icon-inner"))},{default:de(()=>[(_(),ye(an(e.icon)))]),_:1},8,["class"])):me("v-if",!0),!e.icon&&!e.isSimple?(_(),U("div",{key:1,class:W(e.ns.e("icon-inner"))},He(e.index+1),3)):me("v-if",!0)]):(_(),ye(i,{key:1,class:W([e.ns.e("icon-inner"),e.ns.is("status")])},{default:de(()=>[e.currentStatus==="success"?(_(),ye(a,{key:0})):(_(),ye(l,{key:1}))]),_:1},8,["class"]))],2)],2),me(" title & description "),q("div",{class:W(e.ns.e("main"))},[q("div",{class:W([e.ns.e("title"),e.ns.is(e.currentStatus)])},[Pe(e.$slots,"title",{},()=>[Yt(He(e.title),1)])],2),e.isSimple?(_(),U("div",{key:0,class:W(e.ns.e("arrow"))},null,2)):(_(),U("div",{key:1,class:W([e.ns.e("description"),e.ns.is(e.currentStatus)])},[Pe(e.$slots,"description",{},()=>[Yt(He(e.description),1)])],2))],2)],6)}var NB=Ye(L2e,[["render",B2e],["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const z2e=Kt(F2e,{Step:NB}),V2e=ws(NB),W2e=pt({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:Mo,default:""},inactiveIcon:{type:Mo,default:""},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:Qe(Function)},size:{type:String,validator:Pr}}),H2e={[Ht]:e=>No(e)||Bt(e)||mn(e),[ro]:e=>No(e)||Bt(e)||mn(e),[Xl]:e=>No(e)||Bt(e)||mn(e)},sR="ElSwitch",U2e=xe({name:sR,components:{ElIcon:xt,Loading:ou},props:W2e,emits:H2e,setup(e,{emit:t}){const{formItem:n}=Hf(),s=Wf(O(()=>e.loading)),o=Xe("switch"),r=Ls(),i=j(e.modelValue!==!1),a=j(),l=j(),u=O(()=>[o.b(),o.m(r.value),o.is("disabled",s.value),o.is("checked",d.value)]);We(()=>e.modelValue,()=>{i.value=!0}),We(()=>e.value,()=>{i.value=!1});const c=O(()=>i.value?e.modelValue:e.value),d=O(()=>c.value===e.activeValue);[e.activeValue,e.inactiveValue].includes(c.value)||(t(Ht,e.inactiveValue),t(ro,e.inactiveValue),t(Xl,e.inactiveValue)),We(d,()=>{var g;a.value.checked=d.value,(e.activeColor||e.inactiveColor)&&p(),e.validateEvent&&((g=n==null?void 0:n.validate)==null||g.call(n,"change").catch(v=>void 0))});const f=()=>{const g=d.value?e.inactiveValue:e.activeValue;t(Ht,g),t(ro,g),t(Xl,g),vt(()=>{a.value.checked=d.value})},h=()=>{if(s.value)return;const{beforeChange:g}=e;if(!g){f();return}const v=g();[gc(v),No(v)].some(w=>w)||Fs(sR,"beforeChange must return type `Promise<boolean>` or `boolean`"),gc(v)?v.then(w=>{w&&f()}).catch(w=>{}):v&&f()},p=()=>{const g=d.value?e.activeColor:e.inactiveColor,v=l.value;e.borderColor?v.style.borderColor=e.borderColor:e.borderColor||(v.style.borderColor=g),v.style.backgroundColor=g,v.children[0].style.color=g},m=()=>{var g,v;(v=(g=a.value)==null?void 0:g.focus)==null||v.call(g)};return Ft(()=>{(e.activeColor||e.inactiveColor||e.borderColor)&&p(),a.value.checked=d.value}),{ns:o,input:a,core:l,switchDisabled:s,checked:d,switchKls:u,handleChange:f,switchValue:h,focus:m}}}),j2e=["aria-checked","aria-disabled"],G2e=["id","name","true-value","false-value","disabled"],K2e=["aria-hidden"],q2e=["aria-hidden"],Y2e=["aria-hidden"],X2e=["aria-hidden"];function Z2e(e,t,n,s,o,r){const i=Ne("el-icon"),a=Ne("loading");return _(),U("div",{class:W(e.switchKls),role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled,onClick:t[2]||(t[2]=wt((...l)=>e.switchValue&&e.switchValue(...l),["prevent"]))},[q("input",{id:e.id,ref:"input",class:W(e.ns.e("input")),type:"checkbox",name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled,onChange:t[0]||(t[0]=(...l)=>e.handleChange&&e.handleChange(...l)),onKeydown:t[1]||(t[1]=Qt((...l)=>e.switchValue&&e.switchValue(...l),["enter"]))},null,42,G2e),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(_(),U("span",{key:0,class:W([e.ns.e("label"),e.ns.em("label","left"),e.ns.is("active",!e.checked)])},[e.inactiveIcon?(_(),ye(i,{key:0},{default:de(()=>[(_(),ye(an(e.inactiveIcon)))]),_:1})):me("v-if",!0),!e.inactiveIcon&&e.inactiveText?(_(),U("span",{key:1,"aria-hidden":e.checked},He(e.inactiveText),9,K2e)):me("v-if",!0)],2)):me("v-if",!0),q("span",{ref:"core",class:W(e.ns.e("core")),style:it({width:(e.width||40)+"px"})},[e.inlinePrompt?(_(),U("div",{key:0,class:W(e.ns.e("inner"))},[e.activeIcon||e.inactiveIcon?(_(),U(lt,{key:0},[e.activeIcon?(_(),ye(i,{key:0,class:W([e.ns.is("icon"),e.checked?e.ns.is("show"):e.ns.is("hide")])},{default:de(()=>[(_(),ye(an(e.activeIcon)))]),_:1},8,["class"])):me("v-if",!0),e.inactiveIcon?(_(),ye(i,{key:1,class:W([e.ns.is("icon"),e.checked?e.ns.is("hide"):e.ns.is("show")])},{default:de(()=>[(_(),ye(an(e.inactiveIcon)))]),_:1},8,["class"])):me("v-if",!0)],64)):e.activeText||e.inactiveIcon?(_(),U(lt,{key:1},[e.activeText?(_(),U("span",{key:0,class:W([e.ns.is("text"),e.checked?e.ns.is("show"):e.ns.is("hide")]),"aria-hidden":!e.checked},He(e.activeText.substring(0,3)),11,q2e)):me("v-if",!0),e.inactiveText?(_(),U("span",{key:1,class:W([e.ns.is("text"),e.checked?e.ns.is("hide"):e.ns.is("show")]),"aria-hidden":e.checked},He(e.inactiveText.substring(0,3)),11,Y2e)):me("v-if",!0)],64)):me("v-if",!0)],2)):me("v-if",!0),q("div",{class:W(e.ns.e("action"))},[e.loading?(_(),ye(i,{key:0,class:W(e.ns.is("loading"))},{default:de(()=>[fe(a)]),_:1},8,["class"])):me("v-if",!0)],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(_(),U("span",{key:1,class:W([e.ns.e("label"),e.ns.em("label","right"),e.ns.is("active",e.checked)])},[e.activeIcon?(_(),ye(i,{key:0},{default:de(()=>[(_(),ye(an(e.activeIcon)))]),_:1})):me("v-if",!0),!e.activeIcon&&e.activeText?(_(),U("span",{key:1,"aria-hidden":!e.checked},He(e.activeText),9,X2e)):me("v-if",!0)],2)):me("v-if",!0)],10,j2e)}var J2e=Ye(U2e,[["render",Z2e],["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const Q2e=Kt(J2e);/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var eke=/["'&<>]/,tke=nke;function nke(e){var t=""+e,n=eke.exec(t);if(!n)return t;var s,o="",r=0,i=0;for(r=n.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}i!==r&&(o+=t.substring(i,r)),i=r+1,o+=s}return i!==r?o+t.substring(i,r):o}const F2=function(e){let t=e.target;for(;t&&t.tagName.toUpperCase()!=="HTML";){if(t.tagName.toUpperCase()==="TD")return t;t=t.parentNode}return null},oR=function(e){return e!==null&&typeof e=="object"},ske=function(e,t,n,s,o){if(!t&&!s&&(!o||Array.isArray(o)&&!o.length))return e;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const r=s?null:function(a,l){return o?(Array.isArray(o)||(o=[o]),o.map(u=>typeof u=="string"?ps(a,u):u(a,l,e))):(t!=="$key"&&oR(a)&&"$value"in a&&(a=a.$value),[oR(a)?ps(a,t):a])},i=function(a,l){if(s)return s(a.value,l.value);for(let u=0,c=a.key.length;u<c;u++){if(a.key[u]<l.key[u])return-1;if(a.key[u]>l.key[u])return 1}return 0};return e.map((a,l)=>({value:a,index:l,key:r?r(a,l):null})).sort((a,l)=>{let u=i(a,l);return u||(u=a.index-l.index),u*+n}).map(a=>a.value)},AB=function(e,t){let n=null;return e.columns.forEach(s=>{s.id===t&&(n=s)}),n},oke=function(e,t){let n=null;for(let s=0;s<e.columns.length;s++){const o=e.columns[s];if(o.columnKey===t){n=o;break}}return n},rR=function(e,t,n){const s=(t.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return s?AB(e,s[0]):null},To=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof t=="string"){if(!t.includes("."))return`${e[t]}`;const n=t.split(".");let s=e;for(const o of n)s=s[o];return`${s}`}else if(typeof t=="function")return t.call(null,e)},Ju=function(e,t){const n={};return(e||[]).forEach((s,o)=>{n[To(s,t)]={row:s,index:o}}),n};function rke(e,t){const n={};let s;for(s in e)n[s]=e[s];for(s in t)if(en(t,s)){const o=t[s];typeof o!="undefined"&&(n[s]=o)}return n}function cS(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function DB(e){return e===""||e!==void 0&&(e=cS(e),Number.isNaN(e)&&(e=80)),e}function wx(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function ike(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function Av(e,t,n){let s=!1;const o=e.indexOf(t),r=o!==-1,i=()=>{e.push(t),s=!0},a=()=>{e.splice(o,1),s=!0};return typeof n=="boolean"?n&&!r?i():!n&&r&&a():r?a():i(),s}function ake(e,t,n="children",s="hasChildren"){const o=i=>!(Array.isArray(i)&&i.length);function r(i,a,l){t(i,a,l),a.forEach(u=>{if(u[s]){t(u,null,l+1);return}const c=u[n];o(c)||r(u,c,l+1)})}e.forEach(i=>{if(i[s]){t(i,null,0);return}const a=i[n];o(a)||r(i,a,0)})}let cb;function lke(e,t,n,s){const{nextZIndex:o}=al();function r(){const d=s==="light",f=document.createElement("div");return f.className=`el-popper ${d?"is-light":"is-dark"}`,t=tke(t),f.innerHTML=t,f.style.zIndex=String(o()),document.body.appendChild(f),f}function i(){const d=document.createElement("div");return d.className="el-popper__arrow",d}function a(){l&&l.update()}cb=function d(){try{l&&l.destroy(),u&&document.body.removeChild(u),Ss(e,"mouseenter",a),Ss(e,"mouseleave",d)}catch{}};let l=null;const u=r(),c=i();return u.appendChild(c),l=z4(e,u,Me({modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"arrow",options:{element:c,padding:10}}]},n)),ts(e,"mouseenter",a),ts(e,"mouseleave",cb),l}const RB=(e,t,n,s)=>{let o=0,r=e;if(s){if(s[e].colSpan>1)return{};for(let l=0;l<e;l++)o+=s[l].colSpan;r=o+s[e].colSpan-1}else o=e;let i;const a=n.states.columns;switch(t){case"left":r<n.states.fixedLeafColumnsLength.value&&(i="left");break;case"right":o>=a.value.length-n.states.rightFixedLeafColumnsLength.value&&(i="right");break;default:r<n.states.fixedLeafColumnsLength.value?i="left":o>=a.value.length-n.states.rightFixedLeafColumnsLength.value&&(i="right")}return i?{direction:i,start:o,after:r}:{}},dS=(e,t,n,s,o)=>{const r=[],{direction:i,start:a}=RB(t,n,s,o);if(i){const l=i==="left";r.push(`${e}-fixed-column--${i}`),l&&a===s.states.fixedLeafColumnsLength.value-1?r.push("is-last-column"):!l&&a===s.states.columns.value.length-s.states.rightFixedLeafColumnsLength.value&&r.push("is-first-column")}return r};function iR(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const fS=(e,t,n,s)=>{const{direction:o,start:r=0}=RB(e,t,n,s);if(!o)return;const i={},a=o==="left",l=n.states.columns.value;return a?i.left=l.slice(0,e).reduce(iR,0):i.right=l.slice(r+1).reverse().reduce(iR,0),i},pf=(e,t)=>{!e||Number.isNaN(e[t])||(e[t]=`${e[t]}px`)};function uke(e){const t=jt(),n=j(!1),s=j([]);return{updateExpandRows:()=>{const l=e.data.value||[],u=e.rowKey.value;if(n.value)s.value=l.slice();else if(u){const c=Ju(s.value,u);s.value=l.reduce((d,f)=>{const h=To(f,u);return c[h]&&d.push(f),d},[])}else s.value=[]},toggleRowExpansion:(l,u)=>{Av(s.value,l,u)&&t.emit("expand-change",l,s.value.slice())},setExpandRowKeys:l=>{t.store.assertRowKey();const u=e.data.value||[],c=e.rowKey.value,d=Ju(u,c);s.value=l.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:l=>{const u=e.rowKey.value;return u?!!Ju(s.value,u)[To(l,u)]:s.value.includes(l)},states:{expandRows:s,defaultExpandAll:n}}}function cke(e){const t=jt(),n=j(null),s=j(null),o=u=>{t.store.assertRowKey(),n.value=u,i(u)},r=()=>{n.value=null},i=u=>{const{data:c,rowKey:d}=e;let f=null;d.value&&(f=(N(c)||[]).find(h=>To(h,d.value)===u)),s.value=f};return{setCurrentRowKey:o,restoreCurrentRowKey:r,setCurrentRowByKey:i,updateCurrentRow:u=>{const c=s.value;if(u&&u!==c){s.value=u,t.emit("current-change",s.value,c);return}!u&&c&&(s.value=null,t.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=e.rowKey.value,c=e.data.value||[],d=s.value;if(!c.includes(d)&&d){if(u){const f=To(d,u);i(f)}else s.value=null;s.value===null&&t.emit("current-change",null,d)}else n.value&&(i(n.value),r())},states:{_currentRowKey:n,currentRow:s}}}function dke(e){const t=j([]),n=j({}),s=j(16),o=j(!1),r=j({}),i=j("hasChildren"),a=j("children"),l=jt(),u=O(()=>{if(!e.rowKey.value)return{};const v=e.data.value||[];return d(v)}),c=O(()=>{const v=e.rowKey.value,b=Object.keys(r.value),w={};return b.length&&b.forEach(y=>{if(r.value[y].length){const k={children:[]};r.value[y].forEach(x=>{const C=To(x,v);k.children.push(C),x[i.value]&&!w[C]&&(w[C]={children:[]})}),w[y]=k}}),w}),d=v=>{const b=e.rowKey.value,w={};return ake(v,(y,k,x)=>{const C=To(y,b);Array.isArray(k)?w[C]={children:k.map(S=>To(S,b)),level:x}:o.value&&(w[C]={children:[],lazy:!0,level:x})},a.value,i.value),w},f=(v=!1,b=(w=>(w=l.store)==null?void 0:w.states.defaultExpandAll.value)())=>{var w;const y=u.value,k=c.value,x=Object.keys(y),C={};if(x.length){const S=N(n),T=[],A=(L,P)=>{if(v)return t.value?b||t.value.includes(P):!!(b||(L==null?void 0:L.expanded));{const V=b||t.value&&t.value.includes(P);return!!((L==null?void 0:L.expanded)||V)}};x.forEach(L=>{const P=S[L],V=Me({},y[L]);if(V.expanded=A(P,L),V.lazy){const{loaded:H=!1,loading:F=!1}=P||{};V.loaded=!!H,V.loading=!!F,T.push(L)}C[L]=V});const R=Object.keys(k);o.value&&R.length&&T.length&&R.forEach(L=>{const P=S[L],V=k[L].children;if(T.includes(L)){if(C[L].children.length!==0)throw new Error("[ElTable]children must be an empty array.");C[L].children=V}else{const{loaded:H=!1,loading:F=!1}=P||{};C[L]={lazy:!0,loaded:!!H,loading:!!F,expanded:A(P,L),children:V,level:""}}})}n.value=C,(w=l.store)==null||w.updateTableScrollY()};We(()=>t.value,()=>{f(!0)}),We(()=>u.value,()=>{f()}),We(()=>c.value,()=>{f()});const h=v=>{t.value=v,f()},p=(v,b)=>{l.store.assertRowKey();const w=e.rowKey.value,y=To(v,w),k=y&&n.value[y];if(y&&k&&"expanded"in k){const x=k.expanded;b=typeof b=="undefined"?!k.expanded:b,n.value[y].expanded=b,x!==b&&l.emit("expand-change",v,b),l.store.updateTableScrollY()}},m=v=>{l.store.assertRowKey();const b=e.rowKey.value,w=To(v,b),y=n.value[w];o.value&&y&&"loaded"in y&&!y.loaded?g(v,w,y):p(v,void 0)},g=(v,b,w)=>{const{load:y}=l.props;y&&!n.value[b].loaded&&(n.value[b].loading=!0,y(v,w,k=>{if(!Array.isArray(k))throw new TypeError("[ElTable] data must be an array");n.value[b].loading=!1,n.value[b].loaded=!0,n.value[b].expanded=!0,k.length&&(r.value[b]=k),l.emit("expand-change",v,!0)}))};return{loadData:g,loadOrToggle:m,toggleTreeExpansion:p,updateTreeExpandKeys:h,updateTreeData:f,normalize:d,states:{expandRowKeys:t,treeData:n,indent:s,lazy:o,lazyTreeNodeMap:r,lazyColumnIdentifier:i,childrenColumnName:a}}}const fke=(e,t)=>{const n=t.sortingColumn;return!n||typeof n.sortable=="string"?e:ske(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy)},Dv=e=>{const t=[];return e.forEach(n=>{n.children?t.push.apply(t,Dv(n.children)):t.push(n)}),t};function hke(){var e;const t=jt(),{size:n}=oo((e=t.proxy)==null?void 0:e.$props),s=j(null),o=j([]),r=j([]),i=j(!1),a=j([]),l=j([]),u=j([]),c=j([]),d=j([]),f=j([]),h=j([]),p=j([]),m=j(0),g=j(0),v=j(0),b=j(!1),w=j([]),y=j(!1),k=j(!1),x=j(null),C=j({}),S=j(null),T=j(null),A=j(null),R=j(null),L=j(null);We(o,()=>t.state&&H(!1),{deep:!0});const P=()=>{if(!s.value)throw new Error("[ElTable] prop row-key is required")},V=()=>{c.value=a.value.filter(he=>he.fixed===!0||he.fixed==="left"),d.value=a.value.filter(he=>he.fixed==="right"),c.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,c.value.unshift(a.value[0]));const E=a.value.filter(he=>!he.fixed);l.value=[].concat(c.value).concat(E).concat(d.value);const I=Dv(E),G=Dv(c.value),Z=Dv(d.value);m.value=I.length,g.value=G.length,v.value=Z.length,u.value=[].concat(G).concat(I).concat(Z),i.value=c.value.length>0||d.value.length>0},H=(E,I=!1)=>{E&&V(),I?t.state.doLayout():t.state.debouncedUpdateLayout()},F=E=>w.value.includes(E),M=()=>{b.value=!1,w.value.length&&(w.value=[],t.emit("selection-change",[]))},B=()=>{let E;if(s.value){E=[];const I=Ju(w.value,s.value),G=Ju(o.value,s.value);for(const Z in I)en(I,Z)&&!G[Z]&&E.push(I[Z].row)}else E=w.value.filter(I=>!o.value.includes(I));if(E.length){const I=w.value.filter(G=>!E.includes(G));w.value=I,t.emit("selection-change",I.slice())}},Y=()=>(w.value||[]).slice(),J=(E,I=void 0,G=!0)=>{if(Av(w.value,E,I)){const he=(w.value||[]).slice();G&&t.emit("select",he,E),t.emit("selection-change",he)}},ee=()=>{var E,I;const G=k.value?!b.value:!(b.value||w.value.length);b.value=G;let Z=!1,he=0;const Te=(I=(E=t==null?void 0:t.store)==null?void 0:E.states)==null?void 0:I.rowKey.value;o.value.forEach((bt,Lt)=>{const Dt=Lt+he;x.value?x.value.call(null,bt,Dt)&&Av(w.value,bt,G)&&(Z=!0):Av(w.value,bt,G)&&(Z=!0),he+=$e(To(bt,Te))}),Z&&t.emit("selection-change",w.value?w.value.slice():[]),t.emit("select-all",w.value)},te=()=>{const E=Ju(w.value,s.value);o.value.forEach(I=>{const G=To(I,s.value),Z=E[G];Z&&(w.value[Z.index]=I)})},re=()=>{var E,I,G;if(((E=o.value)==null?void 0:E.length)===0){b.value=!1;return}let Z;s.value&&(Z=Ju(w.value,s.value));const he=function(Dt){return Z?!!Z[To(Dt,s.value)]:w.value.includes(Dt)};let Te=!0,bt=0,Lt=0;for(let Dt=0,qt=(o.value||[]).length;Dt<qt;Dt++){const un=(G=(I=t==null?void 0:t.store)==null?void 0:I.states)==null?void 0:G.rowKey.value,Lo=Dt+Lt,$o=o.value[Dt],Ea=x.value&&x.value.call(null,$o,Lo);if(he($o))bt++;else if(!x.value||Ea){Te=!1;break}Lt+=$e(To($o,un))}bt===0&&(Te=!1),b.value=Te},$e=E=>{var I;if(!t||!t.store)return 0;const{treeData:G}=t.store.states;let Z=0;const he=(I=G.value[E])==null?void 0:I.children;return he&&(Z+=he.length,he.forEach(Te=>{Z+=$e(Te)})),Z},se=(E,I)=>{Array.isArray(E)||(E=[E]);const G={};return E.forEach(Z=>{C.value[Z.id]=I,G[Z.columnKey||Z.id]=I}),G},Q=(E,I,G)=>{T.value&&T.value!==E&&(T.value.order=null),T.value=E,A.value=I,R.value=G},ae=()=>{let E=N(r);Object.keys(C.value).forEach(I=>{const G=C.value[I];if(!G||G.length===0)return;const Z=AB({columns:u.value},I);Z&&Z.filterMethod&&(E=E.filter(he=>G.some(Te=>Z.filterMethod.call(null,Te,he,Z))))}),S.value=E},pe=()=>{o.value=fke(S.value,{sortingColumn:T.value,sortProp:A.value,sortOrder:R.value})},ke=(E=void 0)=>{E&&E.filter||ae(),pe()},Be=E=>{const{tableHeaderRef:I}=t.refs;if(!I)return;const G=Object.assign({},I.filterPanels),Z=Object.keys(G);if(!!Z.length)if(typeof E=="string"&&(E=[E]),Array.isArray(E)){const he=E.map(Te=>oke({columns:u.value},Te));Z.forEach(Te=>{const bt=he.find(Lt=>Lt.id===Te);bt&&(bt.filteredValue=[])}),t.store.commit("filterChange",{column:he,values:[],silent:!0,multi:!0})}else Z.forEach(he=>{const Te=u.value.find(bt=>bt.id===he);Te&&(Te.filteredValue=[])}),C.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},je=()=>{!T.value||(Q(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:qe,toggleRowExpansion:ne,updateExpandRows:ue,states:Se,isRowExpanded:Fe}=uke({data:o,rowKey:s}),{updateTreeExpandKeys:Le,toggleTreeExpansion:Ke,updateTreeData:ie,loadOrToggle:ge,states:be}=dke({data:o,rowKey:s}),{updateCurrentRowData:Ie,updateCurrentRow:ot,setCurrentRowKey:ve,states:Ve}=cke({data:o,rowKey:s});return{assertRowKey:P,updateColumns:V,scheduleLayout:H,isSelected:F,clearSelection:M,cleanSelection:B,getSelectionRows:Y,toggleRowSelection:J,_toggleAllSelection:ee,toggleAllSelection:null,updateSelectionByRowKey:te,updateAllSelected:re,updateFilters:se,updateCurrentRow:ot,updateSort:Q,execFilter:ae,execSort:pe,execQuery:ke,clearFilter:Be,clearSort:je,toggleRowExpansion:ne,setExpandRowKeysAdapter:E=>{qe(E),Le(E)},setCurrentRowKey:ve,toggleRowExpansionAdapter:(E,I)=>{u.value.some(({type:Z})=>Z==="expand")?ne(E,I):Ke(E,I)},isRowExpanded:Fe,updateExpandRows:ue,updateCurrentRowData:Ie,loadOrToggle:ge,updateTreeData:ie,states:Me(Me(Me({tableSize:n,rowKey:s,data:o,_data:r,isComplex:i,_columns:a,originColumns:l,columns:u,fixedColumns:c,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,leafColumnsLength:m,fixedLeafColumnsLength:g,rightFixedLeafColumnsLength:v,isAllSelected:b,selection:w,reserveSelection:y,selectOnIndeterminate:k,selectable:x,filters:C,filteredData:S,sortingColumn:T,sortProp:A,sortOrder:R,hoverRow:L},Se),be),Ve)}}function kx(e,t){return e.map(n=>{var s;return n.id===t.id?t:((s=n.children)!=null&&s.length&&(n.children=kx(n.children,t)),n)})}function MB(e){e.forEach(t=>{var n,s;t.no=(n=t.getColumnIndex)==null?void 0:n.call(t),(s=t.children)!=null&&s.length&&MB(t.children)}),e.sort((t,n)=>t.no-n.no)}function pke(){const e=jt(),t=hke(),n=Xe("table"),s={setData(i,a){const l=N(i._data)!==a;i.data.value=a,i._data.value=a,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),N(i.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):l?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(i,a,l){const u=N(i._columns);let c=[];l?(l&&!l.children&&(l.children=[]),l.children.push(a),c=kx(u,l)):(u.push(a),c=u),MB(c),i._columns.value=c,a.type==="selection"&&(i.selectable.value=a.selectable,i.reserveSelection.value=a.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},removeColumn(i,a,l){const u=N(i._columns)||[];if(l)l.children.splice(l.children.findIndex(c=>c.id===a.id),1),l.children.length===0&&delete l.children,i._columns.value=kx(u,l);else{const c=u.indexOf(a);c>-1&&(u.splice(c,1),i._columns.value=u)}e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(i,a){const{prop:l,order:u,init:c}=a;if(l){const d=N(i.columns).find(f=>f.property===l);d&&(d.order=u,e.store.updateSort(d,l,u),e.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(i,a){const{sortingColumn:l,sortProp:u,sortOrder:c}=i;N(c)===null&&(i.sortingColumn.value=null,i.sortProp.value=null);const d={filter:!0};e.store.execQuery(d),(!a||!(a.silent||a.init))&&e.emit("sort-change",{column:N(l),prop:N(u),order:N(c)}),e.store.updateTableScrollY()},filterChange(i,a){const{column:l,values:u,silent:c}=a,d=e.store.updateFilters(l,u);e.store.execQuery(),c||e.emit("filter-change",d),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(i,a){e.store.toggleRowSelection(a),e.store.updateAllSelected()},setHoverRow(i,a){i.hoverRow.value=a},setCurrentRow(i,a){e.store.updateCurrentRow(a)}},o=function(i,...a){const l=e.store.mutations;if(l[i])l[i].apply(e,[e.store.states].concat(a));else throw new Error(`Action not found: ${i}`)},r=function(){vt(()=>e.layout.updateScrollY.apply(e.layout))};return nt(Me({ns:n},t),{mutations:s,commit:o,updateTableScrollY:r})}const cp={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data",["treeProps.hasChildren"]:{key:"lazyColumnIdentifier",default:"hasChildren"},["treeProps.children"]:{key:"childrenColumnName",default:"children"}};function mke(e,t){if(!e)throw new Error("Table is required.");const n=pke();return n.toggleAllSelection=hr(n._toggleAllSelection,10),Object.keys(cp).forEach(s=>{OB(PB(t,s),s,n)}),gke(n,t),n}function gke(e,t){Object.keys(cp).forEach(n=>{We(()=>PB(t,n),s=>{OB(s,n,e)})})}function OB(e,t,n){let s=e,o=cp[t];typeof cp[t]=="object"&&(o=o.key,s=s||cp[t].default),n.states[o].value=s}function PB(e,t){if(t.includes(".")){const n=t.split(".");let s=e;return n.forEach(o=>{s=s[o]}),s}else return e[t]}class vke{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=j(null),this.scrollX=j(!1),this.scrollY=j(!1),this.bodyWidth=j(null),this.fixedWidth=j(null),this.rightFixedWidth=j(null),this.tableHeight=j(null),this.headerHeight=j(44),this.appendHeight=j(0),this.footerHeight=j(44),this.viewportHeight=j(null),this.bodyHeight=j(null),this.bodyScrollHeight=j(0),this.fixedBodyHeight=j(null),this.gutterWidth=0;for(const n in t)en(t,n)&&(vs(this[n])?this[n].value=t[n]:this[n]=t[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.bodyWrapper;if(this.table.vnode.el&&n){let s=!0;const o=this.scrollY.value;return this.bodyHeight.value===null?s=!1:s=n.scrollHeight>this.bodyHeight.value,this.scrollY.value=s,o!==s}return!1}setHeight(t,n="height"){if(!sn)return;const s=this.table.vnode.el;if(t=wx(t),this.height.value=Number(t),!s&&(t||t===0))return vt(()=>this.setHeight(t,n));typeof t=="number"?(s.style[n]=`${t}px`,this.updateElsHeight()):typeof t=="string"&&(s.style[n]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(s=>{s.isColumnGroup?t.push.apply(t,s.columns):t.push(s)}),t}updateElsHeight(){var t,n;if(!this.table.$ready)return vt(()=>this.updateElsHeight());const{tableWrapper:s,headerWrapper:o,appendWrapper:r,footerWrapper:i,tableHeader:a,tableBody:l}=this.table.refs;if(s&&s.style.display==="none")return;const{tableLayout:u}=this.table.props;if(this.appendHeight.value=r?r.offsetHeight:0,this.showHeader&&!o&&u==="fixed")return;const c=a||null,d=this.headerDisplayNone(c),f=(o==null?void 0:o.offsetHeight)||0,h=this.headerHeight.value=this.showHeader?f:0;if(this.showHeader&&!d&&f>0&&(this.table.store.states.columns.value||[]).length>0&&h<2)return vt(()=>this.updateElsHeight());const p=this.tableHeight.value=(n=(t=this.table)==null?void 0:t.vnode.el)==null?void 0:n.clientHeight,m=this.footerHeight.value=i?i.offsetHeight:0;this.height.value!==null&&(this.bodyHeight.value===null&&requestAnimationFrame(()=>this.updateElsHeight()),this.bodyHeight.value=p-h-m+(i?1:0),this.bodyScrollHeight.value=l==null?void 0:l.scrollHeight),this.fixedBodyHeight.value=this.scrollX.value?this.bodyHeight.value-this.gutterWidth:this.bodyHeight.value,this.viewportHeight.value=this.scrollX.value?p-this.gutterWidth:p,this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let n=t;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!sn)return;const t=this.fit,n=this.table.vnode.el.clientWidth;let s=0;const o=this.getFlattenColumns(),r=o.filter(l=>typeof l.width!="number");if(o.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),r.length>0&&t){if(o.forEach(l=>{s+=Number(l.width||l.minWidth||80)}),s<=n){this.scrollX.value=!1;const l=n-s;if(r.length===1)r[0].realWidth=Number(r[0].minWidth||80)+l;else{const u=r.reduce((f,h)=>f+Number(h.minWidth||80),0),c=l/u;let d=0;r.forEach((f,h)=>{if(h===0)return;const p=Math.floor(Number(f.minWidth||80)*c);d+=p,f.realWidth=Number(f.minWidth||80)+p}),r[0].realWidth=Number(r[0].minWidth||80)+l-d}}else this.scrollX.value=!0,r.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(s,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else o.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),s+=l.realWidth}),this.scrollX.value=s>n,this.bodyWidth.value=s;const i=this.store.states.fixedColumns.value;if(i.length>0){let l=0;i.forEach(u=>{l+=Number(u.realWidth||u.width)}),this.fixedWidth.value=l}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let l=0;a.forEach(u=>{l+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const n=this.observers.indexOf(t);n!==-1&&this.observers.splice(n,1)}notifyObservers(t){this.observers.forEach(s=>{var o,r;switch(t){case"columns":(o=s.state)==null||o.onColumnsChange(this);break;case"scrollable":(r=s.state)==null||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:bke}=Hi,yke=xe({name:"ElTableFilterPanel",components:{ElCheckbox:Hi,ElCheckboxGroup:bke,ElScrollbar:ul,ElTooltip:vr,ElIcon:xt,ArrowDown:Uc,ArrowUp:bm},directives:{ClickOutside:Gc},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const t=jt(),{t:n}=Dn(),s=Xe("table-filter"),o=t==null?void 0:t.parent;o.filterPanels.value[e.column.id]||(o.filterPanels.value[e.column.id]=t);const r=j(!1),i=j(null),a=O(()=>e.column&&e.column.filters),l=O({get:()=>{var y;return(((y=e.column)==null?void 0:y.filteredValue)||[])[0]},set:y=>{u.value&&(typeof y!="undefined"&&y!==null?u.value.splice(0,1,y):u.value.splice(0,1))}}),u=O({get(){return e.column?e.column.filteredValue||[]:[]},set(y){e.column&&e.upDataColumn("filteredValue",y)}}),c=O(()=>e.column?e.column.filterMultiple:!0),d=y=>y.value===l.value,f=()=>{r.value=!1},h=y=>{y.stopPropagation(),r.value=!r.value},p=()=>{r.value=!1},m=()=>{b(u.value),f()},g=()=>{u.value=[],b(u.value),f()},v=y=>{l.value=y,b(typeof y!="undefined"&&y!==null?u.value:[]),f()},b=y=>{e.store.commit("filterChange",{column:e.column,values:y}),e.store.updateAllSelected()};We(r,y=>{e.column&&e.upDataColumn("filterOpened",y)},{immediate:!0});const w=O(()=>{var y,k;return(k=(y=i.value)==null?void 0:y.popperRef)==null?void 0:k.contentRef});return{tooltipVisible:r,multiple:c,filteredValue:u,filterValue:l,filters:a,handleConfirm:m,handleReset:g,handleSelect:v,isActive:d,t:n,ns:s,showFilterPanel:h,hideFilterPanel:p,popperPaneRef:w,tooltip:i}}}),wke={key:0},kke=["disabled"],xke=["label","onClick"];function Cke(e,t,n,s,o,r){const i=Ne("el-checkbox"),a=Ne("el-checkbox-group"),l=Ne("el-scrollbar"),u=Ne("arrow-up"),c=Ne("arrow-down"),d=Ne("el-icon"),f=Ne("el-tooltip"),h=Or("click-outside");return _(),ye(f,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[5]||(t[5]=p=>e.tooltipVisible=p),offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,"append-to-body":"",effect:"light",pure:"","popper-class":e.ns.b(),persistent:""},{content:de(()=>[e.multiple?(_(),U("div",wke,[q("div",{class:W(e.ns.e("content"))},[fe(l,{"wrap-class":e.ns.e("wrap")},{default:de(()=>[fe(a,{modelValue:e.filteredValue,"onUpdate:modelValue":t[0]||(t[0]=p=>e.filteredValue=p),class:W(e.ns.e("checkbox-group"))},{default:de(()=>[(_(!0),U(lt,null,Zt(e.filters,p=>(_(),ye(i,{key:p.value,label:p.value},{default:de(()=>[Yt(He(p.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),q("div",{class:W(e.ns.e("bottom"))},[q("button",{class:W({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:t[1]||(t[1]=(...p)=>e.handleConfirm&&e.handleConfirm(...p))},He(e.t("el.table.confirmFilter")),11,kke),q("button",{type:"button",onClick:t[2]||(t[2]=(...p)=>e.handleReset&&e.handleReset(...p))},He(e.t("el.table.resetFilter")),1)],2)])):(_(),U("ul",{key:1,class:W(e.ns.e("list"))},[q("li",{class:W([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:t[3]||(t[3]=p=>e.handleSelect(null))},He(e.t("el.table.clearFilter")),3),(_(!0),U(lt,null,Zt(e.filters,p=>(_(),U("li",{key:p.value,class:W([e.ns.e("list-item"),e.ns.is("active",e.isActive(p))]),label:p.value,onClick:m=>e.handleSelect(p.value)},He(p.text),11,xke))),128))],2))]),default:de(()=>[It((_(),U("span",{class:W([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:t[4]||(t[4]=(...p)=>e.showFilterPanel&&e.showFilterPanel(...p))},[fe(d,null,{default:de(()=>[e.column.filterOpened?(_(),ye(u,{key:0})):(_(),ye(c,{key:1}))]),_:1})],2)),[[h,e.hideFilterPanel,e.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var $ke=Ye(yke,[["render",Cke],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function FB(e){const t=jt();fm(()=>{n.value.addObserver(t)}),Ft(()=>{s(n.value),o(n.value)}),Ki(()=>{s(n.value),o(n.value)}),hm(()=>{n.value.removeObserver(t)});const n=O(()=>{const r=e.layout;if(!r)throw new Error("Can not find table layout.");return r}),s=r=>{var i;const a=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=r.getFlattenColumns(),u={};l.forEach(c=>{u[c.id]=c});for(let c=0,d=a.length;c<d;c++){const f=a[c],h=f.getAttribute("name"),p=u[h];p&&f.setAttribute("width",p.realWidth||p.width)}},o=r=>{var i,a;const l=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,d=l.length;c<d;c++)l[c].setAttribute("width",r.scrollY.value?r.gutterWidth:"0");const u=((a=e.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let c=0,d=u.length;c<d;c++){const f=u[c];f.style.width=r.scrollY.value?`${r.gutterWidth}px`:"0",f.style.display=r.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:s,onScrollableChange:o}}const Sa=Symbol("ElTable");function Ske(e,t){const n=jt(),s=rt(Sa),o=m=>{m.stopPropagation()},r=(m,g)=>{!g.filters&&g.sortable?p(m,g,!1):g.filterable&&!g.sortable&&o(m),s==null||s.emit("header-click",g,m)},i=(m,g)=>{s==null||s.emit("header-contextmenu",g,m)},a=j(null),l=j(!1),u=j({}),c=(m,g)=>{if(!!sn&&!(g.children&&g.children.length>0)&&a.value&&e.border){l.value=!0;const v=s;t("set-drag-visible",!0);const w=(v==null?void 0:v.vnode.el).getBoundingClientRect().left,y=n.vnode.el.querySelector(`th.${g.id}`),k=y.getBoundingClientRect(),x=k.left-w+30;ca(y,"noclick"),u.value={startMouseLeft:m.clientX,startLeft:k.right-w,startColumnLeft:k.left-w,tableLeft:w};const C=v==null?void 0:v.refs.resizeProxy;C.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const S=A=>{const R=A.clientX-u.value.startMouseLeft,L=u.value.startLeft+R;C.style.left=`${Math.max(x,L)}px`},T=()=>{if(l.value){const{startColumnLeft:A,startLeft:R}=u.value,P=Number.parseInt(C.style.left,10)-A;g.width=g.realWidth=P,v==null||v.emit("header-dragend",g.width,R-A,g,m),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,u.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",T),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{ur(y,"noclick")},0)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",T)}},d=(m,g)=>{if(g.children&&g.children.length>0)return;let v=m.target;for(;v&&v.tagName!=="TH";)v=v.parentNode;if(!(!g||!g.resizable)&&!l.value&&e.border){const b=v.getBoundingClientRect(),w=document.body.style;b.width>12&&b.right-m.pageX<8?(w.cursor="col-resize",Li(v,"is-sortable")&&(v.style.cursor="col-resize"),a.value=g):l.value||(w.cursor="",Li(v,"is-sortable")&&(v.style.cursor="pointer"),a.value=null)}},f=()=>{!sn||(document.body.style.cursor="")},h=({order:m,sortOrders:g})=>{if(m==="")return g[0];const v=g.indexOf(m||null);return g[v>g.length-2?0:v+1]},p=(m,g,v)=>{m.stopPropagation();const b=g.order===v?null:v||h(g);let w=m.target;for(;w&&w.tagName!=="TH";)w=w.parentNode;if(w&&w.tagName==="TH"&&Li(w,"noclick")){ur(w,"noclick");return}if(!g.sortable)return;const y=e.store.states;let k=y.sortProp.value,x;const C=y.sortingColumn.value;(C!==g||C===g&&C.order===null)&&(C&&(C.order=null),y.sortingColumn.value=g,k=g.property),b?x=g.order=b:x=g.order=null,y.sortProp.value=k,y.sortOrder.value=x,s==null||s.store.commit("changeSortCondition")};return{handleHeaderClick:r,handleHeaderContextMenu:i,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:o}}function Ike(e){const t=rt(Sa),n=Xe("table");return{getHeaderRowStyle:a=>{const l=t==null?void 0:t.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:a}):l},getHeaderRowClass:a=>{const l=[],u=t==null?void 0:t.props.headerRowClassName;return typeof u=="string"?l.push(u):typeof u=="function"&&l.push(u.call(null,{rowIndex:a})),l.join(" ")},getHeaderCellStyle:(a,l,u,c)=>{var d;let f=(d=t==null?void 0:t.props.headerCellStyle)!=null?d:{};typeof f=="function"&&(f=f.call(null,{rowIndex:a,columnIndex:l,row:u,column:c}));const h=c.isSubColumn?null:fS(l,c.fixed,e.store,u);return pf(h,"left"),pf(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(a,l,u,c)=>{const d=c.isSubColumn?[]:dS(n.b(),l,c.fixed,e.store,u),f=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...d];c.children||f.push("is-leaf"),c.sortable&&f.push("is-sortable");const h=t==null?void 0:t.props.headerCellClassName;return typeof h=="string"?f.push(h):typeof h=="function"&&f.push(h.call(null,{rowIndex:a,columnIndex:l,row:u,column:c})),f.push(n.e("cell")),f.filter(p=>Boolean(p)).join(" ")}}}const LB=e=>{const t=[];return e.forEach(n=>{n.children?(t.push(n),t.push.apply(t,LB(n.children))):t.push(n)}),t},Eke=e=>{let t=1;const n=(r,i)=>{if(i&&(r.level=i.level+1,t<r.level&&(t=r.level)),r.children){let a=0;r.children.forEach(l=>{n(l,r),a+=l.colSpan}),r.colSpan=a}else r.colSpan=1};e.forEach(r=>{r.level=1,n(r,void 0)});const s=[];for(let r=0;r<t;r++)s.push([]);return LB(e).forEach(r=>{r.children?(r.rowSpan=1,r.children.forEach(i=>i.isSubColumn=!0)):r.rowSpan=t-r.level+1,s[r.level-1].push(r)}),s};function Tke(e){const t=rt(Sa),n=O(()=>Eke(e.store.states.originColumns.value));return{isGroup:O(()=>{const r=n.value.length>1;return r&&t&&(t.state.isGroup.value=!0),r}),toggleAllSelection:r=>{r.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:n}}var _ke=xe({name:"ElTableHeader",components:{ElCheckbox:Hi},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:t}){const n=jt(),s=rt(Sa),o=Xe("table"),r=j({}),{onColumnsChange:i,onScrollableChange:a}=FB(s);Ft(async()=>{await vt(),await vt();const{prop:x,order:C}=e.defaultSort;s==null||s.store.commit("sort",{prop:x,order:C,init:!0})});const{handleHeaderClick:l,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:h,handleFilterClick:p}=Ske(e,t),{getHeaderRowStyle:m,getHeaderRowClass:g,getHeaderCellStyle:v,getHeaderCellClass:b}=Ike(e),{isGroup:w,toggleAllSelection:y,columnRows:k}=Tke(e);return n.state={onColumnsChange:i,onScrollableChange:a},n.filterPanels=r,{ns:o,filterPanels:r,onColumnsChange:i,onScrollableChange:a,columnRows:k,getHeaderRowClass:g,getHeaderRowStyle:m,getHeaderCellClass:b,getHeaderCellStyle:v,handleHeaderClick:l,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:h,handleFilterClick:p,isGroup:w,toggleAllSelection:y}},render(){const{ns:e,isGroup:t,columnRows:n,getHeaderCellStyle:s,getHeaderCellClass:o,getHeaderRowClass:r,getHeaderRowStyle:i,handleHeaderClick:a,handleHeaderContextMenu:l,handleMouseDown:u,handleMouseMove:c,handleSortClick:d,handleMouseOut:f,store:h,$parent:p}=this;let m=1;return at("thead",{class:{[e.is("group")]:t}},n.map((g,v)=>at("tr",{class:r(v),key:v,style:i(v)},g.map((b,w)=>(b.rowSpan>m&&(m=b.rowSpan),at("th",{class:o(v,w,g,b),colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:s(v,w,g,b),onClick:y=>a(y,b),onContextmenu:y=>l(y,b),onMousedown:y=>u(y,b),onMousemove:y=>c(y,b),onMouseout:f},[at("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":"",b.labelClassName]},[b.renderHeader?b.renderHeader({column:b,$index:w,store:h,_self:p}):b.label,b.sortable&&at("span",{onClick:y=>d(y,b),class:"caret-wrapper"},[at("i",{onClick:y=>d(y,b,"ascending"),class:"sort-caret ascending"}),at("i",{onClick:y=>d(y,b,"descending"),class:"sort-caret descending"})]),b.filterable&&at($ke,{store:h,placement:b.filterPlacement||"bottom-start",column:b,upDataColumn:(y,k)=>{b[y]=k}})])]))))))}});function Nke(e){const t=rt(Sa),n=j(""),s=j(at("div")),o=(f,h,p)=>{var m;const g=t,v=F2(f);let b;const w=(m=g==null?void 0:g.vnode.el)==null?void 0:m.dataset.prefix;v&&(b=rR({columns:e.store.states.columns.value},v,w),b&&(g==null||g.emit(`cell-${p}`,h,b,v,f))),g==null||g.emit(`row-${p}`,h,b,f)},r=(f,h)=>{o(f,h,"dblclick")},i=(f,h)=>{e.store.commit("setCurrentRow",h),o(f,h,"click")},a=(f,h)=>{o(f,h,"contextmenu")},l=hr(f=>{e.store.commit("setHoverRow",f)},30),u=hr(()=>{e.store.commit("setHoverRow",null)},30);return{handleDoubleClick:r,handleClick:i,handleContextMenu:a,handleMouseEnter:l,handleMouseLeave:u,handleCellMouseEnter:(f,h)=>{var p;const m=t,g=F2(f),v=(p=m==null?void 0:m.vnode.el)==null?void 0:p.dataset.prefix;if(g){const x=rR({columns:e.store.states.columns.value},g,v),C=m.hoverState={cell:g,column:x,row:h};m==null||m.emit("cell-mouse-enter",C.row,C.column,C.cell,f)}const b=f.target.querySelector(".cell");if(!(Li(b,`${v}-tooltip`)&&b.childNodes.length))return;const w=document.createRange();w.setStart(b,0),w.setEnd(b,b.childNodes.length);const y=w.getBoundingClientRect().width,k=(Number.parseInt(aa(b,"paddingLeft"),10)||0)+(Number.parseInt(aa(b,"paddingRight"),10)||0);(y+k>b.offsetWidth||b.scrollWidth>b.offsetWidth)&&lke(g,g.innerText||g.textContent,{placement:"top",strategy:"fixed"},h.tooltipEffect)},handleCellMouseLeave:f=>{if(!F2(f))return;const p=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",p==null?void 0:p.row,p==null?void 0:p.column,p==null?void 0:p.cell,f)},tooltipContent:n,tooltipTrigger:s}}function Ake(e){const t=rt(Sa),n=Xe("table");return{getRowStyle:(u,c)=>{const d=t==null?void 0:t.props.rowStyle;return typeof d=="function"?d.call(null,{row:u,rowIndex:c}):d||null},getRowClass:(u,c)=>{const d=[n.e("row")];(t==null?void 0:t.props.highlightCurrentRow)&&u===e.store.states.currentRow.value&&d.push("current-row"),e.stripe&&c%2===1&&d.push(n.em("row","striped"));const f=t==null?void 0:t.props.rowClassName;return typeof f=="string"?d.push(f):typeof f=="function"&&d.push(f.call(null,{row:u,rowIndex:c})),d},getCellStyle:(u,c,d,f)=>{const h=t==null?void 0:t.props.cellStyle;let p=h!=null?h:{};typeof h=="function"&&(p=h.call(null,{rowIndex:u,columnIndex:c,row:d,column:f}));const m=f.isSubColumn?null:fS(c,e==null?void 0:e.fixed,e.store);return pf(m,"left"),pf(m,"right"),Object.assign({},p,m)},getCellClass:(u,c,d,f)=>{const h=f.isSubColumn?[]:dS(n.b(),c,e==null?void 0:e.fixed,e.store),p=[f.id,f.align,f.className,...h],m=t==null?void 0:t.props.cellClassName;return typeof m=="string"?p.push(m):typeof m=="function"&&p.push(m.call(null,{rowIndex:u,columnIndex:c,row:d,column:f})),p.push(n.e("cell")),p.filter(g=>Boolean(g)).join(" ")},getSpan:(u,c,d,f)=>{let h=1,p=1;const m=t==null?void 0:t.props.spanMethod;if(typeof m=="function"){const g=m({row:u,column:c,rowIndex:d,columnIndex:f});Array.isArray(g)?(h=g[0],p=g[1]):typeof g=="object"&&(h=g.rowspan,p=g.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(u,c,d)=>{if(c<1)return u[d].realWidth;const f=u.map(({realWidth:h,width:p})=>h||p).slice(d,d+c);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}function Dke(e){const t=rt(Sa),{handleDoubleClick:n,handleClick:s,handleContextMenu:o,handleMouseEnter:r,handleMouseLeave:i,handleCellMouseEnter:a,handleCellMouseLeave:l,tooltipContent:u,tooltipTrigger:c}=Nke(e),{getRowStyle:d,getRowClass:f,getCellStyle:h,getCellClass:p,getSpan:m,getColspanRealWidth:g}=Ake(e),v=O(()=>e.store.states.columns.value.findIndex(({type:x})=>x==="default")),b=(x,C)=>{const S=t.props.rowKey;return S?To(x,S):C},w=(x,C,S,T=!1)=>{const{tooltipEffect:A,store:R}=e,{indent:L,columns:P}=R.states,V=f(x,C);let H=!0;return S&&(V.push(`el-table__row--level-${S.level}`),H=S.display),at("tr",{style:[H?null:{display:"none"},d(x,C)],class:V,key:b(x,C),onDblclick:M=>n(M,x),onClick:M=>s(M,x),onContextmenu:M=>o(M,x),onMouseenter:()=>r(C),onMouseleave:i},P.value.map((M,B)=>{const{rowspan:Y,colspan:J}=m(x,M,C,B);if(!Y||!J)return null;const ee=Me({},M);ee.realWidth=g(P.value,J,B);const te={store:e.store,_self:e.context||t,column:ee,row:x,$index:C,cellIndex:B,expanded:T};B===v.value&&S&&(te.treeNode={indent:S.level*L.value,level:S.level},typeof S.expanded=="boolean"&&(te.treeNode.expanded=S.expanded,"loading"in S&&(te.treeNode.loading=S.loading),"noLazyChildren"in S&&(te.treeNode.noLazyChildren=S.noLazyChildren)));const re=`${C},${B}`,$e=ee.columnKey||ee.rawColumnKey||"",se=y(B,M,te);return at("td",{style:h(C,B,x,M),class:p(C,B,x,M),key:`${$e}${re}`,rowspan:Y,colspan:J,onMouseenter:Q=>a(Q,nt(Me({},x),{tooltipEffect:A})),onMouseleave:l},[se])}))},y=(x,C,S)=>C.renderCell(S);return{wrappedRowRender:(x,C)=>{const S=e.store,{isRowExpanded:T,assertRowKey:A}=S,{treeData:R,lazyTreeNodeMap:L,childrenColumnName:P,rowKey:V}=S.states,H=S.states.columns.value;if(H.some(({type:M})=>M==="expand")){const M=T(x),B=w(x,C,void 0,M),Y=t.renderExpanded;return M?Y?[[B,at("tr",{key:`expanded-row__${B.key}`},[at("td",{colspan:H.length,class:"el-table__cell el-table__expanded-cell"},[Y({row:x,$index:C,store:S,expanded:M})])])]]:(console.error("[Element Error]renderExpanded is required."),B):[[B]]}else if(Object.keys(R.value).length){A();const M=To(x,V.value);let B=R.value[M],Y=null;B&&(Y={expanded:B.expanded,level:B.level,display:!0},typeof B.lazy=="boolean"&&(typeof B.loaded=="boolean"&&B.loaded&&(Y.noLazyChildren=!(B.children&&B.children.length)),Y.loading=B.loading));const J=[w(x,C,Y)];if(B){let ee=0;const te=($e,se)=>{!($e&&$e.length&&se)||$e.forEach(Q=>{const ae={display:se.display&&se.expanded,level:se.level+1,expanded:!1,noLazyChildren:!1,loading:!1},pe=To(Q,V.value);if(pe==null)throw new Error("For nested data item, row-key is required.");if(B=Me({},R.value[pe]),B&&(ae.expanded=B.expanded,B.level=B.level||ae.level,B.display=!!(B.expanded&&ae.display),typeof B.lazy=="boolean"&&(typeof B.loaded=="boolean"&&B.loaded&&(ae.noLazyChildren=!(B.children&&B.children.length)),ae.loading=B.loading)),ee++,J.push(w(Q,C+ee,ae)),B){const ke=L.value[pe]||Q[P.value];te(ke,B)}})};B.display=!0;const re=L.value[M]||x[P.value];te(re,B)}return J}else return w(x,C,void 0)},tooltipContent:u,tooltipTrigger:c}}const Rke={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var Mke=xe({name:"ElTableBody",props:Rke,setup(e){const t=jt(),n=rt(Sa),s=Xe("table"),{wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}=Dke(e),{onColumnsChange:a,onScrollableChange:l}=FB(n);return We(e.store.states.hoverRow,(u,c)=>{if(!e.store.states.isComplex.value||!sn)return;let d=window.requestAnimationFrame;d||(d=f=>window.setTimeout(f,16)),d(()=>{var f;const h=(f=t==null?void 0:t.vnode.el)==null?void 0:f.querySelectorAll(`.${s.e("row")}`),p=h[c],m=h[u];p&&ur(p,"hover-row"),m&&ca(m,"hover-row")})}),hm(()=>{var u;(u=cb)==null||u()}),Ki(()=>{var u;(u=cb)==null||u()}),{ns:s,onColumnsChange:a,onScrollableChange:l,wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}},render(){const{wrappedRowRender:e,store:t}=this,n=t.states.data.value||[];return at("tbody",{},[n.reduce((s,o)=>s.concat(e(o,s.length)),[])])}});function hS(e){const t=e.tableLayout==="auto";let n=e.columns||[];t&&n.every(o=>o.width===void 0)&&(n=[]);const s=o=>{const r={key:`${e.tableLayout}_${o.id}`,style:{},name:void 0};return t?r.style={width:`${o.width}px`}:r.name=o.id,r};return at("colgroup",{},n.map(o=>at("col",s(o))))}hS.props=["columns","tableLayout"];function Oke(){const e=rt(Sa),t=e==null?void 0:e.store,n=O(()=>t.states.fixedLeafColumnsLength.value),s=O(()=>t.states.rightFixedColumns.value.length),o=O(()=>t.states.columns.value.length),r=O(()=>t.states.fixedColumns.value.length),i=O(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:s,columnsCount:o,leftFixedCount:r,rightFixedCount:i,columns:t.states.columns}}function Pke(e){const{columns:t}=Oke(),n=Xe("table");return{getCellClasses:(r,i)=>{const a=r[i],l=[n.e("cell"),a.id,a.align,a.labelClassName,...dS(n.b(),i,a.fixed,e.store)];return a.className&&l.push(a.className),a.children||l.push(n.is("leaf")),l},getCellStyles:(r,i)=>{const a=fS(i,r.fixed,e.store);return pf(a,"left"),pf(a,"right"),a},columns:t}}var Fke=xe({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:n,columns:s}=Pke(e);return{ns:Xe("table"),getCellClasses:t,getCellStyles:n,columns:s}},render(){const{columns:e,getCellStyles:t,getCellClasses:n,summaryMethod:s,sumText:o,ns:r}=this,i=this.store.states.data.value;let a=[];return s?a=s({columns:e,data:i}):e.forEach((l,u)=>{if(u===0){a[u]=o;return}const c=i.map(p=>Number(p[l.property])),d=[];let f=!0;c.forEach(p=>{if(!Number.isNaN(+p)){f=!1;const m=`${p}`.split(".")[1];d.push(m?m.length:0)}});const h=Math.max.apply(null,d);f?a[u]="":a[u]=c.reduce((p,m)=>{const g=Number(m);return Number.isNaN(+g)?p:Number.parseFloat((p+m).toFixed(Math.min(h,20)))},0)}),at("table",{class:r.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[hS({columns:e}),at("tbody",[at("tr",{},[...e.map((l,u)=>at("td",{key:u,colspan:l.colSpan,rowspan:l.rowSpan,class:n(e,u),style:t(l,u)},[at("div",{class:["cell",l.labelClassName]},[a[u]])]))])])])}});function Lke(e){return{setCurrentRow:c=>{e.commit("setCurrentRow",c)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(c,d)=>{e.toggleRowSelection(c,d,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:c=>{e.clearFilter(c)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(c,d)=>{e.toggleRowExpansionAdapter(c,d)},clearSort:()=>{e.clearSort()},sort:(c,d)=>{e.commit("sort",{prop:c,order:d})}}}function Bke(e,t,n,s){const o=j(!1),r=j(null),i=j(!1),a=B=>{i.value=B},l=j({width:null,height:null}),u=j(!1),c={display:"inline-block",verticalAlign:"middle"},d=j();oi(()=>{t.setHeight(e.height)}),oi(()=>{t.setMaxHeight(e.maxHeight)}),We(()=>[e.currentRowKey,n.states.rowKey],([B,Y])=>{!N(Y)||n.setCurrentRowKey(`${B}`)},{immediate:!0}),We(()=>e.data,B=>{s.store.commit("setData",B)},{immediate:!0,deep:!0}),oi(()=>{e.expandRowKeys&&n.setExpandRowKeysAdapter(e.expandRowKeys)});const f=()=>{s.store.commit("setHoverRow",null),s.hoverState&&(s.hoverState=null)},h=(B,Y)=>{const{pixelX:J,pixelY:ee}=Y;Math.abs(J)>=Math.abs(ee)&&(s.refs.bodyWrapper.scrollLeft+=Y.pixelX/5)},p=O(()=>e.height||e.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),m=O(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),g=()=>{p.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(y)};Ft(async()=>{await vt(),n.updateColumns(),k(),requestAnimationFrame(g),l.value={width:d.value=s.vnode.el.offsetWidth,height:s.vnode.el.offsetHeight},n.states.columns.value.forEach(B=>{B.filteredValue&&B.filteredValue.length&&s.store.commit("filterChange",{column:B,values:B.filteredValue,silent:!0})}),s.$ready=!0});const v=(B,Y)=>{if(!B)return;const J=Array.from(B.classList).filter(ee=>!ee.startsWith("is-scrolling-"));J.push(t.scrollX.value?Y:"is-scrolling-none"),B.className=J.join(" ")},b=B=>{const{tableWrapper:Y}=s.refs;v(Y,B)},w=B=>{const{tableWrapper:Y}=s.refs;return!!(Y&&Y.classList.contains(B))},y=function(){if(!s.refs.scrollBarRef)return;if(!t.scrollX.value){const se="is-scrolling-none";w(se)||b(se);return}const B=s.refs.scrollBarRef.wrap$;if(!B)return;const{scrollLeft:Y,offsetWidth:J,scrollWidth:ee}=B,{headerWrapper:te,footerWrapper:re}=s.refs;te&&(te.scrollLeft=Y),re&&(re.scrollLeft=Y);const $e=ee-J-1;Y>=$e?b("is-scrolling-right"):b(Y===0?"is-scrolling-left":"is-scrolling-middle")},k=()=>{var B;!s.refs.scrollBarRef||((B=s.refs.scrollBarRef.wrap$)==null||B.addEventListener("scroll",y,{passive:!0}),e.fit?Bf(s.vnode.el,C):ts(window,"resize",g))};qn(()=>{x()});const x=()=>{var B;(B=s.refs.scrollBarRef.wrap$)==null||B.removeEventListener("scroll",y,!0),e.fit?zf(s.vnode.el,C):Ss(window,"resize",g)},C=()=>{if(!s.$ready)return;let B=!1;const Y=s.vnode.el,{width:J,height:ee}=l.value,te=d.value=Y.offsetWidth;J!==te&&(B=!0);const re=Y.offsetHeight;(e.height||p.value)&&ee!==re&&(B=!0),B&&(l.value={width:te,height:re},g())},S=Ls(),T=O(()=>{const{bodyWidth:B,scrollY:Y,gutterWidth:J}=t;return B.value?`${B.value-(Y.value?J:0)}px`:""}),A=O(()=>e.maxHeight?"fixed":e.tableLayout);function R(B,Y,J){const ee=wx(B),te=e.showHeader?J:0;if(ee!==null)return Bt(ee)?`calc(${ee} - ${Y}px - ${te}px)`:ee-Y-te}const L=O(()=>{const B=t.headerHeight.value||0,Y=t.bodyHeight.value,J=t.footerHeight.value||0;if(e.height)return Y||void 0;if(e.maxHeight)return R(e.maxHeight,J,B)}),P=O(()=>{const B=t.headerHeight.value||0,Y=t.bodyHeight.value,J=t.footerHeight.value||0;if(e.height)return{height:Y?`${Y}px`:""};if(e.maxHeight){const ee=R(e.maxHeight,J,B);if(ee!==null)return{"max-height":`${ee}${mn(ee)?"px":""}`}}return{}}),V=O(()=>{if(e.data&&e.data.length)return null;let B="100%";return t.appendHeight.value&&(B=`calc(100% - ${t.appendHeight.value}px)`),{width:d.value?`${d.value}px`:"",height:B}}),H=(B,Y)=>{const J=s.refs.bodyWrapper;if(Math.abs(Y.spinY)>0){const ee=J.scrollTop;Y.pixelY<0&&ee!==0&&B.preventDefault(),Y.pixelY>0&&J.scrollHeight-J.clientHeight>ee&&B.preventDefault(),J.scrollTop+=Math.ceil(Y.pixelY/5)}else J.scrollLeft+=Math.ceil(Y.pixelX/5)},F=O(()=>e.maxHeight?e.showSummary?{bottom:0}:{bottom:t.scrollX.value&&e.data.length?`${t.gutterWidth}px`:""}:e.showSummary?{height:t.tableHeight.value?`${t.tableHeight.value}px`:""}:{height:t.viewportHeight.value?`${t.viewportHeight.value}px`:""}),M=O(()=>{if(e.height)return{height:t.fixedBodyHeight.value?`${t.fixedBodyHeight.value}px`:""};if(e.maxHeight){let B=wx(e.maxHeight);if(typeof B=="number")return B=t.scrollX.value?B-t.gutterWidth:B,e.showHeader&&(B-=t.headerHeight.value),B-=t.footerHeight.value,{"max-height":`${B}px`}}return{}});return{isHidden:o,renderExpanded:r,setDragVisible:a,isGroup:u,handleMouseLeave:f,handleHeaderFooterMousewheel:h,tableSize:S,bodyHeight:P,height:L,emptyBlockStyle:V,handleFixedMousewheel:H,fixedHeight:F,fixedBodyHeight:M,resizeProxyVisible:i,bodyWidth:T,resizeState:l,doLayout:g,tableBodyStyles:m,tableLayout:A,scrollbarViewStyle:c}}var zke={data:{type:Array,default:()=>[]},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1}};const Vke=()=>{const e=j(),t=(r,i)=>{const a=e.value;a&&a.scrollTo(r,i)},n=(r,i)=>{const a=e.value;a&&mn(i)&&["Top","Left"].includes(r)&&a[`setScroll${r}`](i)};return{scrollBarRef:e,scrollTo:t,setScrollTop:r=>n("Top",r),setScrollLeft:r=>n("Left",r)}};let Wke=1;const Hke=xe({name:"ElTable",directives:{Mousewheel:dde},components:{TableHeader:_ke,TableBody:Mke,TableFooter:Fke,ElScrollbar:ul,hColgroup:hS},props:zke,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=Dn(),n=Xe("table"),s=jt();Gt(Sa,s);const o=mke(s,e);s.store=o;const r=new vke({store:s.store,table:s,fit:e.fit,showHeader:e.showHeader});s.layout=r;const i=O(()=>(o.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:l,toggleRowSelection:u,clearSelection:c,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,sort:m}=Lke(o),{isHidden:g,renderExpanded:v,setDragVisible:b,isGroup:w,handleMouseLeave:y,handleHeaderFooterMousewheel:k,tableSize:x,bodyHeight:C,height:S,emptyBlockStyle:T,handleFixedMousewheel:A,fixedHeight:R,fixedBodyHeight:L,resizeProxyVisible:P,bodyWidth:V,resizeState:H,doLayout:F,tableBodyStyles:M,tableLayout:B,scrollbarViewStyle:Y}=Bke(e,r,o,s),{scrollBarRef:J,scrollTo:ee,setScrollLeft:te,setScrollTop:re}=Vke(),$e=hr(F,50),se=`el-table_${Wke++}`;s.tableId=se,s.state={isGroup:w,resizeState:H,doLayout:F,debouncedUpdateLayout:$e};const Q=O(()=>e.sumText||t("el.table.sumText")),ae=O(()=>e.emptyText||t("el.table.emptyText"));return{ns:n,layout:r,store:o,handleHeaderFooterMousewheel:k,handleMouseLeave:y,tableId:se,tableSize:x,isHidden:g,isEmpty:i,renderExpanded:v,resizeProxyVisible:P,resizeState:H,isGroup:w,bodyWidth:V,bodyHeight:C,height:S,tableBodyStyles:M,emptyBlockStyle:T,debouncedUpdateLayout:$e,handleFixedMousewheel:A,fixedHeight:R,fixedBodyHeight:L,setCurrentRow:a,getSelectionRows:l,toggleRowSelection:u,clearSelection:c,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,doLayout:F,sort:m,t,setDragVisible:b,context:s,computedSumText:Q,computedEmptyText:ae,tableLayout:B,scrollbarViewStyle:Y,scrollBarRef:J,scrollTo:ee,setScrollLeft:te,setScrollTop:re}}}),Uke=["data-prefix"],jke={ref:"hiddenColumns",class:"hidden-columns"};function Gke(e,t,n,s,o,r){const i=Ne("hColgroup"),a=Ne("table-header"),l=Ne("table-body"),u=Ne("el-scrollbar"),c=Ne("table-footer"),d=Or("mousewheel");return _(),U("div",{ref:"tableWrapper",class:W([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:it(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:t[0]||(t[0]=f=>e.handleMouseLeave())},[q("div",{class:W(e.ns.e("inner-wrapper"))},[q("div",jke,[Pe(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?It((_(),U("div",{key:0,ref:"headerWrapper",class:W(e.ns.e("header-wrapper"))},[q("table",{ref:"tableHeader",class:W(e.ns.e("header")),style:it(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[fe(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),fe(a,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[d,e.handleHeaderFooterMousewheel]]):me("v-if",!0),q("div",{ref:"bodyWrapper",style:it(e.bodyHeight),class:W(e.ns.e("body-wrapper"))},[fe(u,{ref:"scrollBarRef",height:e.maxHeight?void 0:e.height,"max-height":e.maxHeight?e.height:void 0,"view-style":e.scrollbarViewStyle,always:e.scrollbarAlwaysOn},{default:de(()=>[q("table",{ref:"tableBody",class:W(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:it({width:e.bodyWidth,tableLayout:e.tableLayout})},[fe(i,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(_(),ye(a,{key:0,border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):me("v-if",!0),fe(l,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","row-style","store","stripe"])],6),e.isEmpty?(_(),U("div",{key:0,ref:"emptyBlock",style:it(e.emptyBlockStyle),class:W(e.ns.e("empty-block"))},[q("span",{class:W(e.ns.e("empty-text"))},[Pe(e.$slots,"empty",{},()=>[Yt(He(e.computedEmptyText),1)])],2)],6)):me("v-if",!0),e.$slots.append?(_(),U("div",{key:1,ref:"appendWrapper",class:W(e.ns.e("append-wrapper"))},[Pe(e.$slots,"append")],2)):me("v-if",!0)]),_:3},8,["height","max-height","view-style","always"])],6),e.border||e.isGroup?(_(),U("div",{key:1,class:W(e.ns.e("border-left-patch"))},null,2)):me("v-if",!0)],2),e.showSummary?It((_(),U("div",{key:0,ref:"footerWrapper",class:W(e.ns.e("footer-wrapper"))},[fe(c,{border:e.border,"default-sort":e.defaultSort,store:e.store,style:it(e.tableBodyStyles),"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[cn,!e.isEmpty],[d,e.handleHeaderFooterMousewheel]]):me("v-if",!0),It(q("div",{ref:"resizeProxy",class:W(e.ns.e("column-resize-proxy"))},null,2),[[cn,e.resizeProxyVisible]])],46,Uke)}var Kke=Ye(Hke,[["render",Gke],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const qke={selection:"table-column--selection",expand:"table__expand-column"},Yke={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Xke=e=>qke[e]||"",Zke={selection:{renderHeader({store:e}){function t(){return e.states.data.value&&e.states.data.value.length===0}return at(Hi,{disabled:t(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value})},renderCell({row:e,column:t,store:n,$index:s}){return at(Hi,{disabled:t.selectable?!t.selectable.call(null,e,s):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",e)},onClick:o=>o.stopPropagation(),modelValue:n.isSelected(e)})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let n=t+1;const s=e.index;return typeof s=="number"?n=t+s:typeof s=="function"&&(n=s(t)),at("div",{},[n])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t,expanded:n}){const{ns:s}=t,o=[s.e("expand-icon")];return n&&o.push(s.em("expand-icon","expanded")),at("div",{class:o,onClick:function(i){i.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[at(xt,null,{default:()=>[at(bi)]})]})},sortable:!1,resizable:!1}};function Jke({row:e,column:t,$index:n}){var s;const o=t.property,r=o&&pv(e,o).value;return t&&t.formatter?t.formatter(e,t,r,n):((s=r==null?void 0:r.toString)==null?void 0:s.call(r))||""}function Qke({row:e,treeNode:t,store:n},s=!1){const{ns:o}=n;if(!t)return s?[at("span",{class:o.e("placeholder")})]:null;const r=[],i=function(a){a.stopPropagation(),n.loadOrToggle(e)};if(t.indent&&r.push(at("span",{class:o.e("indent"),style:{"padding-left":`${t.indent}px`}})),typeof t.expanded=="boolean"&&!t.noLazyChildren){const a=[o.e("expand-icon"),t.expanded?o.em("expand-icon","expanded"):""];let l=bi;t.loading&&(l=ou),r.push(at("div",{class:a,onClick:i},{default:()=>[at(xt,{class:{[o.is("loading")]:t.loading}},{default:()=>[at(l)]})]}))}else r.push(at("span",{class:o.e("placeholder")}));return r}function exe(e,t){const n=jt();return{registerComplexWatchers:()=>{const r=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},a=r.reduce((l,u)=>(l[u]=u,l),i);Object.keys(a).forEach(l=>{const u=i[l];en(t,u)&&We(()=>t[u],c=>{let d=c;u==="width"&&l==="realWidth"&&(d=cS(c)),u==="minWidth"&&l==="realMinWidth"&&(d=DB(c)),n.columnConfig.value[u]=d,n.columnConfig.value[l]=d;const f=u==="fixed";e.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const r=["label","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=r.reduce((l,u)=>(l[u]=u,l),i);Object.keys(a).forEach(l=>{const u=i[l];en(t,u)&&We(()=>t[u],c=>{n.columnConfig.value[l]=c})})}}}function txe(e,t,n){const s=jt(),o=j(""),r=j(!1),i=j(),a=j(),l=Xe("table");oi(()=>{i.value=e.align?`is-${e.align}`:null,i.value}),oi(()=>{a.value=e.headerAlign?`is-${e.headerAlign}`:i.value,a.value});const u=O(()=>{let w=s.vnode.vParent||s.parent;for(;w&&!w.tableId&&!w.columnId;)w=w.vnode.vParent||w.parent;return w}),c=O(()=>{const{store:w}=s.parent;if(!w)return!1;const{treeData:y}=w.states,k=y.value;return k&&Object.keys(k).length>0}),d=j(cS(e.width)),f=j(DB(e.minWidth)),h=w=>(d.value&&(w.width=d.value),f.value&&(w.minWidth=f.value),w.minWidth||(w.minWidth=80),w.realWidth=Number(w.width===void 0?w.minWidth:w.width),w),p=w=>{const y=w.type,k=Zke[y]||{};Object.keys(k).forEach(C=>{const S=k[C];C!=="className"&&S!==void 0&&(w[C]=S)});const x=Xke(y);if(x){const C=`${N(l.namespace)}-${x}`;w.className=w.className?`${w.className} ${C}`:C}return w},m=w=>{Array.isArray(w)?w.forEach(k=>y(k)):y(w);function y(k){var x;((x=k==null?void 0:k.type)==null?void 0:x.name)==="ElTableColumn"&&(k.vParent=s)}};return{columnId:o,realAlign:i,isSubColumn:r,realHeaderAlign:a,columnOrTableParent:u,setColumnWidth:h,setColumnForcedProps:p,setColumnRenders:w=>{e.renderHeader||w.type!=="selection"&&(w.renderHeader=x=>{s.columnConfig.value.label;const C=t.header;return C?C(x):w.label});let y=w.renderCell;const k=c.value;return w.type==="expand"?(w.renderCell=x=>at("div",{class:"cell"},[y(x)]),n.value.renderExpanded=x=>t.default?t.default(x):t.default):(y=y||Jke,w.renderCell=x=>{let C=null;if(t.default){const R=t.default(x);C=R.some(L=>L.type!==fr)?R:y(x)}else C=y(x);const S=k&&x.cellIndex===0,T=Qke(x,S),A={class:"cell",style:{}};return w.showOverflowTooltip&&(A.class=`${A.class} ${N(l.namespace)}-tooltip`,A.style={width:`${(x.column.realWidth||Number(x.column.width))-1}px`}),m(C),at("div",A,[T,C])}),w},getPropsData:(...w)=>w.reduce((y,k)=>(Array.isArray(k)&&k.forEach(x=>{y[x]=e[x]}),y),{}),getColumnElIndex:(w,y)=>Array.prototype.indexOf.call(w,y)}}var nxe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].includes(t))}};let sxe=1;var BB=xe({name:"ElTableColumn",components:{ElCheckbox:Hi},props:nxe,setup(e,{slots:t}){const n=jt(),s=j({}),o=O(()=>{let b=n.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:r,registerComplexWatchers:i}=exe(o,e),{columnId:a,isSubColumn:l,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:m,realAlign:g}=txe(e,t,o),v=c.value;a.value=`${v.tableId||v.columnId}_column_${sxe++}`,fm(()=>{l.value=o.value!==v;const b=e.type||"default",w=e.sortable===""?!0:e.sortable,y=nt(Me({},Yke[b]),{id:a.value,type:b,property:e.prop||e.property,align:g,headerAlign:u,showOverflowTooltip:e.showOverflowTooltip||e.showTooltipWhenOverflow,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:w,index:e.index,rawColumnKey:n.vnode.key});let T=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);T=rke(y,T),T=ike(h,d,f)(T),s.value=T,r(),i()}),Ft(()=>{var b;const w=c.value,y=l.value?w.vnode.el.children:(b=w.refs.hiddenColumns)==null?void 0:b.children,k=()=>m(y||[],n.vnode.el);s.value.getColumnIndex=k,k()>-1&&o.value.store.commit("insertColumn",s.value,l.value?w.columnConfig.value:null)}),qn(()=>{o.value.store.commit("removeColumn",s.value,l.value?v.columnConfig.value:null)}),n.columnId=a.value,n.columnConfig=s},render(){var e,t,n;try{const s=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1}),o=[];if(Array.isArray(s))for(const i of s)((n=i.type)==null?void 0:n.name)==="ElTableColumn"||i.shapeFlag&2?o.push(i):i.type===lt&&Array.isArray(i.children)&&i.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!Bt(a==null?void 0:a.children)&&o.push(a)});return at("div",o)}catch{return at("div",[])}}});const oxe=Kt(Kke,{TableColumn:BB}),rxe=ws(BB),ixe=pt({tabs:{type:Qe(Array),default:()=>gs([])}}),axe={name:"ElTabBar"},lxe=xe(nt(Me({},axe),{props:ixe,setup(e,{expose:t}){const n=e,s="ElTabBar",o=jt(),r=rt(ky);r||Fs(s,"<el-tabs><el-tab-bar /></el-tabs>");const i=Xe("tabs"),a=j(),l=j(),u=()=>{let d=0,f=0;const h=["top","bottom"].includes(r.props.tabPosition)?"width":"height",p=h==="width"?"x":"y";return n.tabs.every(m=>{var g,v,b,w;const y=(v=(g=o.parent)==null?void 0:g.refs)==null?void 0:v[`tab-${m.paneName}`];if(!y)return!1;if(!m.active)return!0;f=y[`client${$r(h)}`];const k=p==="x"?"left":"top";d=y.getBoundingClientRect()[k]-((w=(b=y.parentElement)==null?void 0:b.getBoundingClientRect()[k])!=null?w:0);const x=window.getComputedStyle(y);return h==="width"&&(n.tabs.length>1&&(f-=Number.parseFloat(x.paddingLeft)+Number.parseFloat(x.paddingRight)),d+=Number.parseFloat(x.paddingLeft)),!1}),{[h]:`${f}px`,transform:`translate${$r(p)}(${d}px)`}},c=()=>l.value=u();return We(()=>n.tabs,async()=>{await vt(),c()},{immediate:!0}),Lf(a,()=>c()),t({ref:a,update:c}),(d,f)=>(_(),U("div",{ref_key:"barRef",ref:a,class:W([N(i).e("active-bar"),N(i).is(N(r).props.tabPosition)]),style:it(l.value)},null,6))}}));var uxe=Ye(lxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const cxe=pt({panes:{type:Qe(Array),default:()=>gs([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:Qe(Function),default:In},onTabRemove:{type:Qe(Function),default:In},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),aR="ElTabNav",dxe=xe({name:aR,props:cxe,setup(e,{expose:t}){const n=rt(ky);n||Fs(aR,"<el-tabs><tab-nav /></el-tabs>");const s=Xe("tabs"),o=Zte(),r=tne(),i=j(),a=j(),l=j(),u=j(!1),c=j(0),d=j(!1),f=j(!0),h=O(()=>["top","bottom"].includes(n.props.tabPosition)?"width":"height"),p=O(()=>({transform:`translate${h.value==="width"?"X":"Y"}(-${c.value}px)`})),m=()=>{if(!i.value)return;const x=i.value[`offset${$r(h.value)}`],C=c.value;if(!C)return;const S=C>x?C-x:0;c.value=S},g=()=>{if(!i.value||!a.value)return;const x=a.value[`offset${$r(h.value)}`],C=i.value[`offset${$r(h.value)}`],S=c.value;if(x-S<=C)return;const T=x-S>C*2?S+C:x-C;c.value=T},v=()=>{const x=a.value;if(!u.value||!l.value||!i.value||!x)return;const C=l.value.querySelector(".is-active");if(!C)return;const S=i.value,T=["top","bottom"].includes(n.props.tabPosition),A=C.getBoundingClientRect(),R=S.getBoundingClientRect(),L=T?x.offsetWidth-R.width:x.offsetHeight-R.height,P=c.value;let V=P;T?(A.left<R.left&&(V=P-(R.left-A.left)),A.right>R.right&&(V=P+A.right-R.right)):(A.top<R.top&&(V=P-(R.top-A.top)),A.bottom>R.bottom&&(V=P+(A.bottom-R.bottom))),V=Math.max(V,0),c.value=Math.min(V,L)},b=()=>{if(!a.value||!i.value)return;const x=a.value[`offset${$r(h.value)}`],C=i.value[`offset${$r(h.value)}`],S=c.value;if(C<x){const T=c.value;u.value=u.value||{},u.value.prev=T,u.value.next=T+C<x,x-T<C&&(c.value=x-C)}else u.value=!1,S>0&&(c.value=0)},w=x=>{const C=x.code,{up:S,down:T,left:A,right:R}=ct;if(![S,T,A,R].includes(C))return;const L=Array.from(x.currentTarget.querySelectorAll("[role=tab]")),P=L.indexOf(x.target);let V;C===A||C===S?P===0?V=L.length-1:V=P-1:P<L.length-1?V=P+1:V=0,L[V].focus(),L[V].click(),y()},y=()=>{f.value&&(d.value=!0)},k=()=>d.value=!1;return We(o,x=>{x==="hidden"?f.value=!1:x==="visible"&&setTimeout(()=>f.value=!0,50)}),We(r,x=>{x?setTimeout(()=>f.value=!0,50):f.value=!1}),Lf(l,b),Ft(()=>setTimeout(()=>v(),0)),Ki(()=>b()),t({scrollToActiveTab:v,removeFocus:k}),()=>{const x=u.value?[fe("span",{class:[s.e("nav-prev"),s.is("disabled",!u.value.prev)],onClick:m},[fe(xt,null,{default:()=>[fe(jc,null,null)]})]),fe("span",{class:[s.e("nav-next"),s.is("disabled",!u.value.next)],onClick:g},[fe(xt,null,{default:()=>[fe(bi,null,null)]})])]:null,C=e.panes.map((S,T)=>{var A,R;const L=S.props.name||S.index||`${T}`,P=S.isClosable||e.editable;S.index=`${T}`;const V=P?fe(xt,{class:"is-icon-close",onClick:M=>e.onTabRemove(S,M)},{default:()=>[fe(ci,null,null)]}):null,H=((R=(A=S.instance.slots).label)==null?void 0:R.call(A))||S.props.label,F=S.active?0:-1;return fe("div",{ref:`tab-${L}`,class:[s.e("item"),s.is(n.props.tabPosition),s.is("active",S.active),s.is("disabled",S.props.disabled),s.is("closable",P),s.is("focus",d.value)],id:`tab-${L}`,key:`tab-${L}`,"aria-controls":`pane-${L}`,role:"tab","aria-selected":S.active,tabindex:F,onFocus:()=>y(),onBlur:()=>k(),onClick:M=>{k(),e.onTabClick(S,L,M)},onKeydown:M=>{P&&(M.code===ct.delete||M.code===ct.backspace)&&e.onTabRemove(S,M)}},[H,V])});return fe("div",{ref:l,class:[s.e("nav-wrap"),s.is("scrollable",!!u.value),s.is(n.props.tabPosition)]},[x,fe("div",{class:s.e("nav-scroll"),ref:i},[fe("div",{class:[s.e("nav"),s.is(n.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(n.props.tabPosition))],ref:a,style:p.value,role:"tablist",onKeydown:w},[e.type?null:fe(uxe,{tabs:[...e.panes]},null),C])])])}}}),fxe=pt({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number],default:""},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Qe(Function),default:()=>!0},stretch:Boolean}),_0=e=>Bt(e)||mn(e),hxe={[Ht]:e=>_0(e),[Xl]:e=>_0(e),"tab-click":(e,t)=>t instanceof Event,"tab-change":e=>_0(e),edit:(e,t)=>["remove","add"].includes(t),"tab-remove":e=>_0(e),"tab-add":()=>!0},zB=(e,t=[])=>{const n=e.children||[];return Array.from(n).forEach(s=>{let o=s.type;o=o.name||o,o==="ElTabPane"&&s.component?t.push(s.component):(o===lt||o==="template")&&zB(s,t)}),t};var pxe=xe({name:"ElTabs",props:fxe,emits:hxe,setup(e,{emit:t,slots:n,expose:s}){const o=jt();wm({scope:"el-tabs",type:"Event",from:"input",replacement:"tab-change",version:"2.5.0",ref:"https://element-plus.org/en-US/component/tabs.html#tabs-events"},O(()=>{var g;return zt((g=o.vnode.props)==null?void 0:g.onInput)}));const r=Xe("tabs"),i=j(),a=j([]),l=j(e.modelValue||e.activeName||"0"),u={},c=(g=!1)=>{if(n.default){const v=o.subTree.children,b=Array.from(v).find(({props:k})=>(k==null?void 0:k.class)===r.e("content"));if(!b)return;const w=zB(b).map(k=>u[k.uid]),y=!(w.length===a.value.length&&w.every((k,x)=>k.uid===a.value[x].uid));(g||y)&&(a.value=w)}else a.value.length!==0&&(a.value=[])},d=g=>{l.value=g,t(Xl,g),t(Ht,g),t("tab-change",g)},f=g=>{var v;if(l.value===g)return;const b=(v=e.beforeLeave)==null?void 0:v.call(e,g,l.value);gc(b)?b.then(()=>{var w,y;d(g),(y=(w=i.value)==null?void 0:w.removeFocus)==null||y.call(w)},In):b!==!1&&d(g)},h=(g,v,b)=>{g.props.disabled||(f(v),t("tab-click",g,b))},p=(g,v)=>{g.props.disabled||(v.stopPropagation(),t("edit",g.props.name,"remove"),t("tab-remove",g.props.name))},m=()=>{t("edit",void 0,"add"),t("tab-add")};return Ki(()=>c()),Ft(()=>c()),We(()=>e.activeName,g=>f(g)),We(()=>e.modelValue,g=>f(g)),We(l,async()=>{var g,v;c(!0),await vt(),await((g=i.value)==null?void 0:g.$nextTick()),(v=i.value)==null||v.scrollToActiveTab()}),Gt(ky,{props:e,currentName:l,updatePaneState:g=>u[g.uid]=g}),s({currentName:l}),()=>{const g=e.editable||e.addable?fe("span",{class:r.e("new-tab"),tabindex:"0",onClick:m,onKeydown:w=>{w.code===ct.enter&&m()}},[fe(xt,{class:r.is("icon-plus")},{default:()=>[fe(jF,null,null)]})]):null,v=fe("div",{class:[r.e("header"),r.is(e.tabPosition)]},[g,fe(dxe,{ref:i,currentName:l.value,editable:e.editable,type:e.type,panes:a.value,stretch:e.stretch,onTabClick:h,onTabRemove:p},null)]),b=fe("div",{class:r.e("content")},[Pe(n,"default")]);return fe("div",{class:[r.b(),r.m(e.tabPosition),{[r.m("card")]:e.type==="card",[r.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[v,b]:[b,v]])}}});const mxe=pt({label:{type:String,default:""},name:{type:[String,Number],default:""},closable:Boolean,disabled:Boolean,lazy:Boolean}),gxe=["id","aria-hidden","aria-labelledby"],vxe={name:"ElTabPane"},bxe=xe(nt(Me({},vxe),{props:mxe,setup(e){const t=e,n="ElTabPane",s=jt(),o=rt(ky);o||Fs(n,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const r=Xe("tab-pane"),i=j(),a=O(()=>t.closable||o.props.closable),l=IA(()=>o.currentName.value===(t.name||i.value)),u=j(l.value),c=O(()=>t.name||i.value),d=IA(()=>!t.lazy||u.value||l.value);return We(l,f=>{f&&(u.value=!0)}),o.updatePaneState(vn({uid:s.uid,instance:xp(s),props:t,paneName:c,active:l,index:i,isClosable:a})),(f,h)=>N(d)?It((_(),U("div",{key:0,id:`pane-${N(c)}`,class:W(N(r).b()),role:"tabpanel","aria-hidden":!N(l),"aria-labelledby":`tab-${N(c)}`},[Pe(f.$slots,"default")],10,gxe)),[[cn,N(l)]]):me("v-if",!0)}}));var VB=Ye(bxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const yxe=Kt(pxe,{TabPane:VB}),wxe=ws(VB);Tt.extend(q$);const{Option:kxe}=kc,Fa=e=>{const t=(e||"").split(":");if(t.length>=2){let n=Number.parseInt(t[0],10);const s=Number.parseInt(t[1],10),o=e.toUpperCase();return o.includes("AM")&&n===12?n=0:o.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:s}}return null},L2=(e,t)=>{const n=Fa(e),s=Fa(t),o=n.minutes+n.hours*60,r=s.minutes+s.hours*60;return o===r?0:o>r?1:-1},lR=e=>`${e}`.padStart(2,"0"),Nd=e=>`${lR(e.hours)}:${lR(e.minutes)}`,xxe=(e,t)=>{const n=Fa(e),s=Fa(t),o={hours:n.hours,minutes:n.minutes};return o.minutes+=s.minutes,o.hours+=s.hours,o.hours+=Math.floor(o.minutes/60),o.minutes=o.minutes%60,Nd(o)},Cxe=xe({name:"ElTimeSelect",components:{ElSelect:kc,ElOption:kxe,ElIcon:xt},model:{prop:"value",event:"change"},props:{format:{type:String,default:"HH:mm"},modelValue:String,disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:{type:String,values:$a,default:""},placeholder:{type:String,default:""},start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:{type:String,default:""},maxTime:{type:String,default:""},name:{type:String,default:""},prefixIcon:{type:[String,Object],default:UF},clearIcon:{type:[String,Object],default:Za}},emits:["change","blur","focus","update:modelValue"],setup(e){const t=j(null),n=O(()=>e.modelValue),s=O(()=>{const d=Fa(e.start);return Nd(d)}),o=O(()=>{const d=Fa(e.end);return Nd(d)}),r=O(()=>{const d=Fa(e.step);return Nd(d)}),i=O(()=>{const d=Fa(e.minTime);return d?Nd(d):null}),a=O(()=>{const d=Fa(e.maxTime);return d?Nd(d):null}),l=O(()=>{const d=[];if(e.start&&e.end&&e.step){let f=s.value,h;for(;L2(f,o.value)<=0;)h=Tt(f,"HH:mm").format(e.format),d.push({value:h,disabled:L2(f,i.value||"-1:-1")<=0||L2(f,a.value||"100:100")>=0}),f=xxe(f,r.value)}return d});return{select:t,value:n,items:l,blur:()=>{var d,f;(f=(d=t.value)==null?void 0:d.blur)==null||f.call(d)},focus:()=>{var d,f;(f=(d=t.value)==null?void 0:d.focus)==null||f.call(d)}}}});function $xe(e,t,n,s,o,r){const i=Ne("el-option"),a=Ne("el-icon"),l=Ne("el-select");return _(),ye(l,{ref:"select","model-value":e.value,disabled:e.disabled,clearable:e.clearable,"clear-icon":e.clearIcon,size:e.size,effect:e.effect,placeholder:e.placeholder,"default-first-option":"",filterable:e.editable,"onUpdate:modelValue":t[0]||(t[0]=u=>e.$emit("update:modelValue",u)),onChange:t[1]||(t[1]=u=>e.$emit("change",u)),onBlur:t[2]||(t[2]=u=>e.$emit("blur",u)),onFocus:t[3]||(t[3]=u=>e.$emit("focus",u))},{prefix:de(()=>[e.prefixIcon?(_(),ye(a,{key:0,class:"el-input__prefix-icon"},{default:de(()=>[(_(),ye(an(e.prefixIcon)))]),_:1})):me("v-if",!0)]),default:de(()=>[(_(!0),U(lt,null,Zt(e.items,u=>(_(),ye(i,{key:u.value,label:u.value,value:u.value,disabled:u.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"])}var Rv=Ye(Cxe,[["render",$xe],["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);Rv.install=e=>{e.component(Rv.name,Rv)};const Sxe=Rv,Ixe=Sxe,Exe=xe({name:"ElTimeline",setup(e,{slots:t}){const n=Xe("timeline");return Gt("timeline",t),()=>at("ul",{class:[n.b()]},[Pe(t,"default")])}}),Txe=pt({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:{type:String,default:""},color:{type:String,default:""},size:{type:String,default:"normal"},icon:{type:Mo,default:""},hollow:{type:Boolean,default:!1}}),_xe=xe({name:"ElTimelineItem",components:{ElIcon:xt},props:Txe,setup(){return{ns:Xe("timeline-item")}}});function Nxe(e,t,n,s,o,r){const i=Ne("el-icon");return _(),U("li",{class:W([e.ns.b(),{[e.ns.e("center")]:e.center}])},[q("div",{class:W(e.ns.e("tail"))},null,2),e.$slots.dot?me("v-if",!0):(_(),U("div",{key:0,class:W([e.ns.e("node"),e.ns.em("node",e.size||""),e.ns.em("node",e.type||""),e.ns.is("hollow",e.hollow)]),style:it({backgroundColor:e.color})},[e.icon?(_(),ye(i,{key:0,class:W(e.ns.e("icon"))},{default:de(()=>[(_(),ye(an(e.icon)))]),_:1},8,["class"])):me("v-if",!0)],6)),e.$slots.dot?(_(),U("div",{key:1,class:W(e.ns.e("dot"))},[Pe(e.$slots,"dot")],2)):me("v-if",!0),q("div",{class:W(e.ns.e("wrapper"))},[!e.hideTimestamp&&e.placement==="top"?(_(),U("div",{key:0,class:W([e.ns.e("timestamp"),e.ns.is("top")])},He(e.timestamp),3)):me("v-if",!0),q("div",{class:W(e.ns.e("content"))},[Pe(e.$slots,"default")],2),!e.hideTimestamp&&e.placement==="bottom"?(_(),U("div",{key:1,class:W([e.ns.e("timestamp"),e.ns.is("bottom")])},He(e.timestamp),3)):me("v-if",!0)],2)],2)}var WB=Ye(_xe,[["render",Nxe],["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const Axe=Kt(Exe,{TimelineItem:WB}),Dxe=ws(WB),HB=pt({nowrap:Boolean});var UB=(e=>(e.top="top",e.bottom="bottom",e.left="left",e.right="right",e))(UB||{});const Rxe=Object.values(UB),pS=pt({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Qe(Object),default:null}}),Mxe=pt({side:{type:Qe(String),values:Rxe,required:!0}}),Oxe=["absolute","fixed"],Pxe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],mS=pt({ariaLabel:String,arrowPadding:{type:Qe(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:Qe(String),values:Pxe,default:"bottom"},reference:{type:Qe(Object),default:null},offset:{type:Number,default:8},strategy:{type:Qe(String),values:Oxe,default:"absolute"},showArrow:{type:Boolean,default:!1}}),gS=pt({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Qe(Function)},"onUpdate:open":{type:Qe(Function)}}),wd={type:Qe(Function)},vS=pt({onBlur:wd,onClick:wd,onFocus:wd,onMouseDown:wd,onMouseEnter:wd,onMouseLeave:wd}),Fxe=pt(nt(Me(Me(Me(Me({},gS),pS),vS),mS),{alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Qe(Object),default:null},teleported:Boolean,to:{type:Qe(String),default:"body"}})),Lxe={name:"ElTooltipV2Root"},Bxe=xe(nt(Me({},Lxe),{props:gS,setup(e,{expose:t}){const n=e,s=j(n.defaultOpen),o=j(null),r=O({get:()=>ine(n.open)?s.value:n.open,set:g=>{var v;s.value=g,(v=n["onUpdate:open"])==null||v.call(n,g)}}),i=O(()=>mn(n.delayDuration)&&n.delayDuration>0),{start:a,stop:l}=yc(()=>{r.value=!0},O(()=>n.delayDuration),{immediate:!1}),u=Xe("tooltip-v2"),c=P$(),d=()=>{l(),r.value=!0},f=()=>{N(i)?a():d()},h=d,p=()=>{l(),r.value=!1};return We(r,g=>{var v;g&&(document.dispatchEvent(new CustomEvent(b2)),h()),(v=n.onOpenChange)==null||v.call(n,g)}),Ft(()=>{document.addEventListener(b2,p)}),qn(()=>{l(),document.removeEventListener(b2,p)}),Gt(xy,{contentId:c,triggerRef:o,ns:u,onClose:p,onDelayOpen:f,onOpen:h}),t({onOpen:h,onClose:p}),(g,v)=>Pe(g.$slots,"default",{open:N(r)})}}));var zxe=Ye(Bxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/root.vue"]]);const Vxe={name:"ElTooltipV2Arrow"},Wxe=xe(nt(Me({},Vxe),{props:Me(Me({},pS),Mxe),setup(e){const t=e,{ns:n}=rt(xy),{arrowRef:s}=rt(f4),o=O(()=>{const{style:r,width:i,height:a}=t,l=n.namespace.value;return Me({[`--${l}-tooltip-v2-arrow-width`]:`${i}px`,[`--${l}-tooltip-v2-arrow-height`]:`${a}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${i/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:i/2-1},r||{})});return(r,i)=>(_(),U("span",{ref_key:"arrowRef",ref:s,style:it(N(o)),class:W(N(n).e("arrow"))},null,6))}}));var uR=Ye(Wxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/arrow.vue"]]);const Hxe=["data-side"],Uxe={name:"ElTooltipV2Content"},jxe=xe(nt(Me({},Uxe),{props:Me(Me({},mS),HB),setup(e){const t=e,{triggerRef:n,contentId:s}=rt(xy),o=j(t.placement),r=j(t.strategy),i=j(null),{referenceRef:a,contentRef:l,middlewareData:u,x:c,y:d,update:f}=mae({placement:o,strategy:r,middleware:O(()=>{const w=[lae(t.offset)];return t.showArrow&&w.push(gae({arrowRef:i})),w})}),h=al().nextZIndex(),p=Xe("tooltip-v2"),m=O(()=>o.value.split("-")[0]),g=O(()=>({position:N(r),top:`${N(d)||0}px`,left:`${N(c)||0}px`,zIndex:h})),v=O(()=>{if(!t.showArrow)return{};const{arrow:w}=N(u);return{[`--${p.namespace.value}-tooltip-v2-arrow-x`]:`${w==null?void 0:w.x}px`||"",[`--${p.namespace.value}-tooltip-v2-arrow-y`]:`${w==null?void 0:w.y}px`||""}}),b=O(()=>[p.e("content"),p.is("dark",t.effect==="dark"),p.is(N(r)),t.contentClass]);return We(i,()=>f()),We(()=>t.placement,w=>o.value=w),Ft(()=>{We(()=>t.reference||n.value,w=>{a.value=w||void 0},{immediate:!0})}),Gt(f4,{arrowRef:i}),(w,y)=>(_(),U("div",{ref_key:"contentRef",ref:l,style:it(N(g)),"data-tooltip-v2-root":""},[w.nowrap?me("v-if",!0):(_(),U("div",{key:0,"data-side":N(m),class:W(N(b))},[Pe(w.$slots,"default",{contentStyle:N(g),contentClass:N(b)}),fe(N(H4),{id:N(s),role:"tooltip"},{default:de(()=>[w.ariaLabel?(_(),U(lt,{key:0},[Yt(He(w.ariaLabel),1)],2112)):Pe(w.$slots,"default",{key:1})]),_:3},8,["id"]),Pe(w.$slots,"arrow",{style:it(N(v)),side:N(m)})],10,Hxe))],4))}}));var cR=Ye(jxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/content.vue"]]);const Gxe=pt({setRef:{type:Qe(Function),required:!0},onlyChild:Boolean});var Kxe=xe({props:Gxe,setup(e,{slots:t}){const n=j(),s=A$(n,o=>{o?e.setRef(o.nextElementSibling):e.setRef(null)});return()=>{var o;const[r]=((o=t.default)==null?void 0:o.call(t))||[],i=e.onlyChild?Eie(r.children):r.children;return fe(lt,{ref:s},[i])}}});const qxe={name:"ElTooltipV2Trigger"},Yxe=xe(nt(Me({},qxe),{props:Me(Me({},HB),vS),setup(e){const t=e,{onClose:n,onOpen:s,onDelayOpen:o,triggerRef:r,contentId:i}=rt(xy);let a=!1;const l=b=>{r.value=b},u=()=>{a=!1},c=ms(t.onMouseEnter,o),d=ms(t.onMouseLeave,n),f=ms(t.onMouseDown,()=>{n(),a=!0,document.addEventListener("mouseup",u,{once:!0})}),h=ms(t.onFocus,()=>{a||s()}),p=ms(t.onBlur,n),m=ms(t.onClick,b=>{b.detail===0&&n()}),g={blur:p,click:m,focus:h,mousedown:f,mouseenter:c,mouseleave:d},v=(b,w,y)=>{b&&Object.entries(w).forEach(([k,x])=>{b[y](k,x)})};return We(r,(b,w)=>{v(b,g,"addEventListener"),v(w,g,"removeEventListener"),b&&b.setAttribute("aria-describedby",i.value)}),qn(()=>{v(r.value,g,"removeEventListener"),document.removeEventListener("mouseup",u)}),(b,w)=>b.nowrap?(_(),ye(N(Kxe),{key:0,"set-ref":l,"only-child":""},{default:de(()=>[Pe(b.$slots,"default")]),_:3})):(_(),U("button",Wn({key:1,ref_key:"triggerRef",ref:r},b.$attrs),[Pe(b.$slots,"default")],16))}}));var Xxe=Ye(Yxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/trigger.vue"]]);const Zxe={name:"ElTooltipV2"},Jxe=xe(nt(Me({},Zxe),{props:Fxe,setup(e){const n=oo(e),s=vn(Ml(n,Object.keys(pS))),o=vn(Ml(n,Object.keys(mS))),r=vn(Ml(n,Object.keys(gS))),i=vn(Ml(n,Object.keys(vS)));return(a,l)=>(_(),ye(zxe,Oi(ql(N(r))),{default:de(({open:u})=>[fe(Xxe,Wn(N(i),{nowrap:""}),{default:de(()=>[Pe(a.$slots,"trigger")]),_:3},16),(_(),ye(pm,{to:a.to,disabled:!a.teleported},[a.fullTransition?(_(),ye(Rs,Oi(Wn({key:0},a.transitionProps)),{default:de(()=>[a.alwaysOn||u?(_(),ye(cR,Oi(Wn({key:0},N(o))),{arrow:de(({style:c,side:d})=>[a.showArrow?(_(),ye(uR,Wn({key:0},N(s),{style:c,side:d}),null,16,["style","side"])):me("v-if",!0)]),default:de(()=>[Pe(a.$slots,"default")]),_:3},16)):me("v-if",!0)]),_:2},1040)):(_(),U(lt,{key:1},[a.alwaysOn||u?(_(),ye(cR,Oi(Wn({key:0},N(o))),{arrow:de(({style:c,side:d})=>[a.showArrow?(_(),ye(uR,Wn({key:0},N(s),{style:c,side:d}),null,16,["style","side"])):me("v-if",!0)]),default:de(()=>[Pe(a.$slots,"default")]),_:3},16)):me("v-if",!0)],2112))],8,["to","disabled"]))]),_:3},16))}}));var Qxe=Ye(Jxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/tooltip.vue"]]);const eCe=Kt(Qxe),xx="checked-change",tCe={data:{type:Array,default(){return[]}},optionRender:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},nCe=(e,t)=>{const{emit:n}=jt(),s=O(()=>e.props.label||"label"),o=O(()=>e.props.key||"key"),r=O(()=>e.props.disabled||"disabled"),i=O(()=>e.data.filter(f=>typeof e.filterMethod=="function"?e.filterMethod(t.query,f):(f[s.value]||f[o.value].toString()).toLowerCase().includes(t.query.toLowerCase()))),a=O(()=>i.value.filter(f=>!f[r.value])),l=O(()=>{const f=t.checked.length,h=e.data.length,{noChecked:p,hasChecked:m}=e.format;return p&&m?f>0?m.replace(/\${checked}/g,f.toString()).replace(/\${total}/g,h.toString()):p.replace(/\${total}/g,h.toString()):`${f}/${h}`}),u=O(()=>{const f=t.checked.length;return f>0&&f<a.value.length}),c=()=>{const f=a.value.map(h=>h[o.value]);t.allChecked=f.length>0&&f.every(h=>t.checked.includes(h))},d=f=>{t.checked=f?a.value.map(h=>h[o.value]):[]};return We(()=>t.checked,(f,h)=>{if(c(),t.checkChangeByUser){const p=f.concat(h).filter(m=>!f.includes(m)||!h.includes(m));n(xx,f,p)}else n(xx,f),t.checkChangeByUser=!0}),We(a,()=>{c()}),We(()=>e.data,()=>{const f=[],h=i.value.map(p=>p[o.value]);t.checked.forEach(p=>{h.includes(p)&&f.push(p)}),t.checkChangeByUser=!1,t.checked=f}),We(()=>e.defaultChecked,(f,h)=>{if(h&&f.length===h.length&&f.every(g=>h.includes(g)))return;const p=[],m=a.value.map(g=>g[o.value]);f.forEach(g=>{m.includes(g)&&p.push(g)}),t.checkChangeByUser=!1,t.checked=p},{immediate:!0}),{labelProp:s,keyProp:o,disabledProp:r,filteredData:i,checkableData:a,checkedSummary:l,isIndeterminate:u,updateAllChecked:c,handleAllCheckedChange:d}},sCe=xe({name:"ElTransferPanel",components:{ElCheckboxGroup:wL,ElCheckbox:Hi,ElInput:yi,OptionContent:({option:e})=>e},props:tCe,emits:[xx],setup(e,{slots:t}){const{t:n}=Dn(),s=Xe("transfer"),o=vn({checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}),{labelProp:r,keyProp:i,disabledProp:a,filteredData:l,checkedSummary:u,isIndeterminate:c,handleAllCheckedChange:d}=nCe(e,o),f=O(()=>o.query.length>0&&l.value.length===0),h=O(()=>!!t.default()[0].children.length),{checked:p,allChecked:m,query:g,inputHover:v,checkChangeByUser:b}=oo(o);return{ns:s,labelProp:r,keyProp:i,disabledProp:a,filteredData:l,checkedSummary:u,isIndeterminate:c,handleAllCheckedChange:d,checked:p,allChecked:m,query:g,inputHover:v,checkChangeByUser:b,hasNoMatch:f,SearchIcon:Pre,hasFooter:h,t:n}}});function oCe(e,t,n,s,o,r){const i=Ne("el-checkbox"),a=Ne("el-input"),l=Ne("option-content"),u=Ne("el-checkbox-group");return _(),U("div",{class:W(e.ns.b("panel"))},[q("p",{class:W(e.ns.be("panel","header"))},[fe(i,{modelValue:e.allChecked,"onUpdate:modelValue":t[0]||(t[0]=c=>e.allChecked=c),indeterminate:e.isIndeterminate,onChange:e.handleAllCheckedChange},{default:de(()=>[Yt(He(e.title)+" ",1),q("span",null,He(e.checkedSummary),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),q("div",{class:W([e.ns.be("panel","body"),e.ns.is("with-footer",e.hasFooter)])},[e.filterable?(_(),ye(a,{key:0,modelValue:e.query,"onUpdate:modelValue":t[1]||(t[1]=c=>e.query=c),class:W(e.ns.be("panel","filter")),size:"default",placeholder:e.placeholder,"prefix-icon":e.SearchIcon,clearable:"",onMouseenter:t[2]||(t[2]=c=>e.inputHover=!0),onMouseleave:t[3]||(t[3]=c=>e.inputHover=!1)},null,8,["modelValue","class","placeholder","prefix-icon"])):me("v-if",!0),It(fe(u,{modelValue:e.checked,"onUpdate:modelValue":t[4]||(t[4]=c=>e.checked=c),class:W([e.ns.is("filterable",e.filterable),e.ns.be("panel","list")])},{default:de(()=>[(_(!0),U(lt,null,Zt(e.filteredData,c=>(_(),ye(i,{key:c[e.keyProp],class:W(e.ns.be("panel","item")),label:c[e.keyProp],disabled:c[e.disabledProp]},{default:de(()=>[fe(l,{option:e.optionRender(c)},null,8,["option"])]),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[cn,!e.hasNoMatch&&e.data.length>0]]),It(q("p",{class:W(e.ns.be("panel","empty"))},He(e.hasNoMatch?e.t("el.transfer.noMatch"):e.t("el.transfer.noData")),3),[[cn,e.hasNoMatch||e.data.length===0]])],2),e.hasFooter?(_(),U("p",{key:0,class:W(e.ns.be("panel","footer"))},[Pe(e.$slots,"default")],2)):me("v-if",!0)],2)}var rCe=Ye(sCe,[["render",oCe],["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const iCe=e=>{const t=O(()=>e.props.key),n=O(()=>e.data.reduce((r,i)=>(r[i[t.value]]=i)&&r,{})),s=O(()=>e.data.filter(r=>!e.modelValue.includes(r[t.value]))),o=O(()=>e.targetOrder==="original"?e.data.filter(r=>e.modelValue.includes(r[t.value])):e.modelValue.reduce((r,i)=>{const a=n.value[i];return a&&r.push(a),r},[]));return{propsKey:t,sourceData:s,targetData:o}},jB="left-check-change",GB="right-check-change",aCe=(e,t)=>({onSourceCheckedChange:(o,r)=>{e.leftChecked=o,r!==void 0&&t(jB,o,r)},onTargetCheckedChange:(o,r)=>{e.rightChecked=o,r!==void 0&&t(GB,o,r)}}),lCe=(e,t,n,s)=>{const o=(a,l,u)=>{s(Ht,a),s(ro,a,l,u)};return{addToLeft:()=>{const a=e.modelValue.slice();t.rightChecked.forEach(l=>{const u=a.indexOf(l);u>-1&&a.splice(u,1)}),o(a,"left",t.rightChecked)},addToRight:()=>{let a=e.modelValue.slice();const l=e.data.filter(u=>{const c=u[n.value];return t.leftChecked.includes(c)&&!e.modelValue.includes(c)}).map(u=>u[n.value]);a=e.targetOrder==="unshift"?l.concat(a):a.concat(l),e.targetOrder==="original"&&(a=e.data.filter(u=>a.includes(u[n.value])).map(u=>u[n.value])),o(a,"right",t.leftChecked)}}},uCe=xe({name:"ElTransfer",components:{TransferPanel:rCe,ElButton:ii,ElIcon:xt,ArrowLeft:jc,ArrowRight:bi},props:{data:{type:Array,default:()=>[]},titles:{type:Array,default:()=>[]},buttonTexts:{type:Array,default:()=>[]},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:()=>[]},rightDefaultChecked:{type:Array,default:()=>[]},renderContent:Function,modelValue:{type:Array,default:()=>[]},format:{type:Object,default:()=>({})},filterable:{type:Boolean,default:!1},props:{type:Object,default:()=>({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,default:"original",validator:e=>["original","push","unshift"].includes(e)}},emits:[Ht,ro,jB,GB],setup(e,{emit:t,slots:n}){const{t:s}=Dn(),o=Xe("transfer"),r=rt(di,{}),i=vn({leftChecked:[],rightChecked:[]}),{propsKey:a,sourceData:l,targetData:u}=iCe(e),{onSourceCheckedChange:c,onTargetCheckedChange:d}=aCe(i,t),{addToLeft:f,addToRight:h}=lCe(e,i,a,t),p=j(),m=j(),g=x=>{switch(x){case"left":p.value.query="";break;case"right":m.value.query="";break}},v=O(()=>e.buttonTexts.length===2),b=O(()=>e.titles[0]||s("el.transfer.titles.0")),w=O(()=>e.titles[1]||s("el.transfer.titles.1")),y=O(()=>e.filterPlaceholder||s("el.transfer.filterPlaceholder"));We(()=>e.modelValue,()=>{var x;(x=r.validate)==null||x.call(r,"change").catch(C=>void 0)});const k=O(()=>x=>e.renderContent?e.renderContent(at,x):n.default?n.default({option:x}):at("span",x[e.props.label]||x[e.props.key]));return nt(Me({ns:o,sourceData:l,targetData:u,onSourceCheckedChange:c,onTargetCheckedChange:d,addToLeft:f,addToRight:h},oo(i)),{hasButtonTexts:v,leftPanelTitle:b,rightPanelTitle:w,panelFilterPlaceholder:y,clearQuery:g,leftPanel:p,rightPanel:m,optionRender:k})}}),cCe={key:0},dCe={key:0};function fCe(e,t,n,s,o,r){const i=Ne("transfer-panel"),a=Ne("arrow-left"),l=Ne("el-icon"),u=Ne("el-button"),c=Ne("arrow-right");return _(),U("div",{class:W(e.ns.b())},[fe(i,{ref:"leftPanel",data:e.sourceData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,title:e.leftPanelTitle,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,"default-checked":e.leftDefaultChecked,props:e.props,onCheckedChange:e.onSourceCheckedChange},{default:de(()=>[Pe(e.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),q("div",{class:W(e.ns.e("buttons"))},[fe(u,{type:"primary",class:W([e.ns.e("button"),e.ns.is("with-texts",e.hasButtonTexts)]),disabled:e.rightChecked.length===0,onClick:e.addToLeft},{default:de(()=>[fe(l,null,{default:de(()=>[fe(a)]),_:1}),e.buttonTexts[0]!==void 0?(_(),U("span",cCe,He(e.buttonTexts[0]),1)):me("v-if",!0)]),_:1},8,["class","disabled","onClick"]),fe(u,{type:"primary",class:W([e.ns.e("button"),e.ns.is("with-texts",e.hasButtonTexts)]),disabled:e.leftChecked.length===0,onClick:e.addToRight},{default:de(()=>[e.buttonTexts[1]!==void 0?(_(),U("span",dCe,He(e.buttonTexts[1]),1)):me("v-if",!0),fe(l,null,{default:de(()=>[fe(c)]),_:1})]),_:1},8,["class","disabled","onClick"])],2),fe(i,{ref:"rightPanel",data:e.targetData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,title:e.rightPanelTitle,"default-checked":e.rightDefaultChecked,props:e.props,onCheckedChange:e.onTargetCheckedChange},{default:de(()=>[Pe(e.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2)}var Mv=Ye(uCe,[["render",fCe],["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/index.vue"]]);Mv.install=e=>{e.component(Mv.name,Mv)};const hCe=Mv,pCe=hCe,jd="$treeNodeId",dR=function(e,t){!t||t[jd]||Object.defineProperty(t,jd,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},bS=function(e,t){return e?t[e]:t[jd]},Cx=e=>{let t=!0,n=!0,s=!0;for(let o=0,r=e.length;o<r;o++){const i=e[o];(i.checked!==!0||i.indeterminate)&&(t=!1,i.disabled||(s=!1)),(i.checked!==!1||i.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:s,half:!t&&!n}},Ov=function(e){if(e.childNodes.length===0)return;const{all:t,none:n,half:s}=Cx(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):s?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const o=e.parent;!o||o.level===0||e.store.checkStrictly||Ov(o)},N0=function(e,t){const n=e.store.props,s=e.data||{},o=n[t];if(typeof o=="function")return o(s,e);if(typeof o=="string")return s[o];if(typeof o=="undefined"){const r=s[t];return r===void 0?"":r}};let mCe=0;class uc{constructor(t){this.id=mCe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)en(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const n=t.props;if(n&&typeof n.isLeaf!="undefined"){const r=N0(this,"isLeaf");typeof r=="boolean"&&(this.isLeafByUser=r)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&this.expand(),Array.isArray(this.data)||dR(this,this.data),!this.data)return;const s=t.defaultExpandedKeys,o=t.key;o&&s&&s.includes(this.key)&&this.expand(null,t.autoExpandParent),o&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Array.isArray(t)||dR(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=N0(this,"children")||[];for(let s=0,o=n.length;s<o;s++)this.insertChild({data:n[s]})}get label(){return N0(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return N0(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(s=>s===t||n&&s.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,s){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof uc)){if(!s){const o=this.getChildren(!0);o.includes(t.data)||(typeof n=="undefined"||n<0?o.push(t.data):o.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=vn(new uc(t)),t instanceof uc&&t.initialize()}t.level=this.level+1,typeof n=="undefined"||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let s;n&&(s=this.childNodes.indexOf(n)),this.insertChild(t,s)}insertAfter(t,n){let s;n&&(s=this.childNodes.indexOf(n),s!==-1&&(s+=1)),this.insertChild(t,s)}removeChild(t){const n=this.getChildren()||[],s=n.indexOf(t.data);s>-1&&n.splice(s,1);const o=this.childNodes.indexOf(t);o>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let s=0;s<this.childNodes.length;s++)if(this.childNodes[s].data===t){n=this.childNodes[s];break}n&&this.removeChild(n)}expand(t,n){const s=()=>{if(n){let o=this.parent;for(;o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(o=>{o.canFocus=!0})};this.shouldLoadData()?this.loadData(o=>{Array.isArray(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Ov(this),s())}):s()}doCreateChildren(t,n={}){t.forEach(s=>{this.insertChild(Object.assign({data:s},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser!="undefined"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,s,o){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:i,allWithoutDisable:a}=Cx(this.childNodes);!this.isLeaf&&!i&&a&&(this.checked=!1,t=!1);const l=()=>{if(n){const u=this.childNodes;for(let f=0,h=u.length;f<h;f++){const p=u[f];o=o||t!==!1;const m=p.disabled?p.checked:o;p.setChecked(m,n,!0,o)}const{half:c,all:d}=Cx(u);d||(this.checked=d,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Ov(this)},{checked:t!==!1});return}else l()}const r=this.parent;!r||r.level===0||s||Ov(r)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const s=this.store.props;let o="children";return s&&(o=s.children||"children"),n[o]===void 0&&(n[o]=null),t&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(r=>r.data),s={},o=[];t.forEach((r,i)=>{const a=r[jd];!!a&&n.findIndex(u=>u[jd]===a)>=0?s[a]={index:i,data:r}:o.push({index:i,data:r})}),this.store.lazy||n.forEach(r=>{s[r[jd]]||this.removeChildByData(r)}),o.forEach(({index:r,data:i})=>{this.insertChild({data:i},r)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const s=o=>{this.loaded=!0,this.loading=!1,this.childNodes=[],this.doCreateChildren(o,n),this.updateLeafState(),t&&t.call(this,o)};this.store.load(this,s)}else t&&t.call(this)}}class gCe{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const n in t)en(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){this.root=new uc({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load?this.load(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()}):this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,s=this.lazy,o=function(r){const i=r.root?r.root.childNodes:r.childNodes;if(i.forEach(a=>{a.visible=n.call(a,t,a.data,a),o(a)}),!r.visible&&i.length){let a=!0;a=!i.some(l=>l.visible),r.root?r.root.visible=a===!1:r.visible=a===!1}!t||r.visible&&!r.isLeaf&&!s&&r.expand()};o(this)}setData(t){t!==this.root.data?(this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(t){if(t instanceof uc)return t;const n=typeof t!="object"?t:bS(this.key,t);return this.nodesMap[n]||null}insertBefore(t,n){const s=this.getNode(n);s.parent.insertBefore({data:t},s)}insertAfter(t,n){const s=this.getNode(n);s.parent.insertAfter({data:t},s)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const s=n?this.getNode(n):this.root;s&&s.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(s=>{const o=n[s];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;!t||!t.data||(n?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(s=>{this.deregisterNode(s)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const s=[],o=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(a=>{(a.checked||n&&a.indeterminate)&&(!t||t&&a.isLeaf)&&s.push(a.data),o(a)})};return o(this),s}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(r=>{r.indeterminate&&t.push(r.data),n(r)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const s in n)en(n,s)&&t.push(n[s]);return t}updateChildren(t,n){const s=this.nodesMap[t];if(!s)return;const o=s.childNodes;for(let r=o.length-1;r>=0;r--){const i=o[r];this.remove(i.data)}for(let r=0,i=n.length;r<i;r++){const a=n[r];this.append(a,s.data)}}_setCheckedKeys(t,n=!1,s){const o=this._getAllNodes().sort((a,l)=>l.level-a.level),r=Object.create(null),i=Object.keys(s);o.forEach(a=>a.setChecked(!1,!1));for(let a=0,l=o.length;a<l;a++){const u=o[a],c=u.data[t].toString();if(!i.includes(c)){u.checked&&!r[c]&&u.setChecked(!1,!1);continue}let f=u.parent;for(;f&&f.level>0;)r[f.data[t]]=!0,f=f.parent;if(u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),n){u.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(g=>{g.isLeaf||g.setChecked(!1,!1),h(g)})};h(u)}}}setCheckedNodes(t,n=!1){const s=this.key,o={};t.forEach(r=>{o[(r||{})[s]]=!0}),this._setCheckedKeys(s,n,o)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const s=this.key,o={};t.forEach(r=>{o[r]=!0}),this._setCheckedKeys(s,n,o)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const s=this.getNode(n);s&&s.expand(null,this.autoExpandParent)})}setChecked(t,n,s){const o=this.getNode(t);o&&o.setChecked(!!n,s)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){const s=t[this.key],o=this.nodesMap[s];this.setCurrentNode(o),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,n=!0){if(t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const s=this.getNode(t);s&&(this.setCurrentNode(s),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const vCe=xe({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=Xe("tree"),n=rt("NodeInstance"),s=rt("RootTree");return()=>{const o=e.node,{data:r,store:i}=o;return e.renderContent?e.renderContent(at,{_self:n,node:o,data:r,store:i}):s.ctx.slots.default?s.ctx.slots.default({node:o,data:r}):at("span",{class:t.be("node","label")},[o.label])}}});var bCe=Ye(vCe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function KB(e){const t=rt("TreeNodeMap",null),n={treeNodeExpand:s=>{e.node!==s&&e.node.collapse()},children:[]};return t&&t.children.push(n),Gt("TreeNodeMap",n),{broadcastExpanded:s=>{if(!!e.accordion)for(const o of n.children)o.treeNodeExpand(s)}}}const qB=Symbol("dragEvents");function yCe({props:e,ctx:t,el$:n,dropIndicator$:s,store:o}){const r=Xe("tree"),i=j({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Gt(qB,{treeNodeDragStart:({event:c,treeNode:d})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(d.node))return c.preventDefault(),!1;c.dataTransfer.effectAllowed="move";try{c.dataTransfer.setData("text/plain","")}catch{}i.value.draggingNode=d,t.emit("node-drag-start",d.node,c)},treeNodeDragOver:({event:c,treeNode:d})=>{const f=d,h=i.value.dropNode;h&&h!==f&&ur(h.$el,r.is("drop-inner"));const p=i.value.draggingNode;if(!p||!f)return;let m=!0,g=!0,v=!0,b=!0;typeof e.allowDrop=="function"&&(m=e.allowDrop(p.node,f.node,"prev"),b=g=e.allowDrop(p.node,f.node,"inner"),v=e.allowDrop(p.node,f.node,"next")),c.dataTransfer.dropEffect=g||m||v?"move":"none",(m||g||v)&&h!==f&&(h&&t.emit("node-drag-leave",p.node,h.node,c),t.emit("node-drag-enter",p.node,f.node,c)),(m||g||v)&&(i.value.dropNode=f),f.node.nextSibling===p.node&&(v=!1),f.node.previousSibling===p.node&&(m=!1),f.node.contains(p.node,!1)&&(g=!1),(p.node===f.node||p.node.contains(f.node))&&(m=!1,g=!1,v=!1);const w=f.$el.getBoundingClientRect(),y=n.value.getBoundingClientRect();let k;const x=m?g?.25:v?.45:1:-1,C=v?g?.75:m?.55:0:1;let S=-9999;const T=c.clientY-w.top;T<w.height*x?k="before":T>w.height*C?k="after":g?k="inner":k="none";const A=f.$el.querySelector(`.${r.be("node","expand-icon")}`).getBoundingClientRect(),R=s.value;k==="before"?S=A.top-y.top:k==="after"&&(S=A.bottom-y.top),R.style.top=`${S}px`,R.style.left=`${A.right-y.left}px`,k==="inner"?ca(f.$el,r.is("drop-inner")):ur(f.$el,r.is("drop-inner")),i.value.showDropIndicator=k==="before"||k==="after",i.value.allowDrop=i.value.showDropIndicator||b,i.value.dropType=k,t.emit("node-drag-over",p.node,f.node,c)},treeNodeDragEnd:c=>{const{draggingNode:d,dropType:f,dropNode:h}=i.value;if(c.preventDefault(),c.dataTransfer.dropEffect="move",d&&h){const p={data:d.node.data};f!=="none"&&d.node.remove(),f==="before"?h.node.parent.insertBefore(p,h.node):f==="after"?h.node.parent.insertAfter(p,h.node):f==="inner"&&h.node.insertChild(p),f!=="none"&&o.value.registerNode(p),ur(h.$el,r.is("drop-inner")),t.emit("node-drag-end",d.node,h.node,f,c),f!=="none"&&t.emit("node-drop",d.node,h.node,f,c)}d&&!h&&t.emit("node-drag-end",d.node,null,f,c),i.value.showDropIndicator=!1,i.value.draggingNode=null,i.value.dropNode=null,i.value.allowDrop=!0}}),{dragState:i}}const wCe=xe({name:"ElTreeNode",components:{ElCollapseTransition:_y,ElCheckbox:Hi,NodeContent:bCe,ElIcon:xt,Loading:ou},props:{node:{type:uc,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const n=Xe("tree"),{broadcastExpanded:s}=KB(e),o=rt("RootTree"),r=j(!1),i=j(!1),a=j(null),l=j(null),u=j(null),c=rt(qB),d=jt();Gt("NodeInstance",d),e.node.expanded&&(r.value=!0,i.value=!0);const f=o.props.children||"children";We(()=>{const T=e.node.data[f];return T&&[...T]},()=>{e.node.updateChildren()}),We(()=>e.node.indeterminate,T=>{m(e.node.checked,T)}),We(()=>e.node.checked,T=>{m(T,e.node.indeterminate)}),We(()=>e.node.expanded,T=>{vt(()=>r.value=T),T&&(i.value=!0)});const h=T=>bS(o.props.nodeKey,T.data),p=T=>{const A=e.props.class;if(!A)return{};let R;if(zt(A)){const{data:L}=T;R=A(L,T)}else R=A;return Bt(R)?{[R]:!0}:R},m=(T,A)=>{(a.value!==T||l.value!==A)&&o.ctx.emit("check-change",e.node.data,T,A),a.value=T,l.value=A},g=T=>{const A=o.store.value;A.setCurrentNode(e.node),o.ctx.emit("current-change",A.currentNode?A.currentNode.data:null,A.currentNode),o.currentNode.value=e.node,o.props.expandOnClickNode&&b(),o.props.checkOnClickNode&&!e.node.disabled&&w(null,{target:{checked:!e.node.checked}}),o.ctx.emit("node-click",e.node.data,e.node,d,T)},v=T=>{o.instance.vnode.props.onNodeContextmenu&&(T.stopPropagation(),T.preventDefault()),o.ctx.emit("node-contextmenu",T,e.node.data,e.node,d)},b=()=>{e.node.isLeaf||(r.value?(o.ctx.emit("node-collapse",e.node.data,e.node,d),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,d)))},w=(T,A)=>{e.node.setChecked(A.target.checked,!o.props.checkStrictly),vt(()=>{const R=o.store.value;o.ctx.emit("check",e.node.data,{checkedNodes:R.getCheckedNodes(),checkedKeys:R.getCheckedKeys(),halfCheckedNodes:R.getHalfCheckedNodes(),halfCheckedKeys:R.getHalfCheckedKeys()})})};return{ns:n,node$:u,tree:o,expanded:r,childNodeRendered:i,oldChecked:a,oldIndeterminate:l,getNodeKey:h,getNodeClass:p,handleSelectChange:m,handleClick:g,handleContextMenu:v,handleExpandIconClick:b,handleCheckChange:w,handleChildNodeExpand:(T,A,R)=>{s(A),o.ctx.emit("node-expand",T,A,R)},handleDragStart:T=>{!o.props.draggable||c.treeNodeDragStart({event:T,treeNode:e})},handleDragOver:T=>{T.preventDefault(),o.props.draggable&&c.treeNodeDragOver({event:T,treeNode:{$el:u.value,node:e.node}})},handleDrop:T=>{T.preventDefault()},handleDragEnd:T=>{!o.props.draggable||c.treeNodeDragEnd(T)},CaretRight:HF}}}),kCe=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],xCe=["aria-expanded"];function CCe(e,t,n,s,o,r){const i=Ne("el-icon"),a=Ne("el-checkbox"),l=Ne("loading"),u=Ne("node-content"),c=Ne("el-tree-node"),d=Ne("el-collapse-transition");return It((_(),U("div",{ref:"node$",class:W([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=wt((...f)=>e.handleClick&&e.handleClick(...f),["stop"])),onContextmenu:t[2]||(t[2]=(...f)=>e.handleContextMenu&&e.handleContextMenu(...f)),onDragstart:t[3]||(t[3]=wt((...f)=>e.handleDragStart&&e.handleDragStart(...f),["stop"])),onDragover:t[4]||(t[4]=wt((...f)=>e.handleDragOver&&e.handleDragOver(...f),["stop"])),onDragend:t[5]||(t[5]=wt((...f)=>e.handleDragEnd&&e.handleDragEnd(...f),["stop"])),onDrop:t[6]||(t[6]=wt((...f)=>e.handleDrop&&e.handleDrop(...f),["stop"]))},[q("div",{class:W(e.ns.be("node","content")),style:it({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(_(),ye(i,{key:0,class:W([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:wt(e.handleExpandIconClick,["stop"])},{default:de(()=>[(_(),ye(an(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):me("v-if",!0),e.showCheckbox?(_(),ye(a,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=wt(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):me("v-if",!0),e.node.loading?(_(),ye(i,{key:2,class:W([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:de(()=>[fe(l)]),_:1},8,["class"])):me("v-if",!0),fe(u,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),fe(d,null,{default:de(()=>[!e.renderAfterExpand||e.childNodeRendered?It((_(),U("div",{key:0,class:W(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(_(!0),U(lt,null,Zt(e.node.childNodes,f=>(_(),ye(c,{key:e.getNodeKey(f),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:f,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,xCe)),[[cn,e.expanded]]):me("v-if",!0)]),_:1})],42,kCe)),[[cn,e.node.visible]])}var $Ce=Ye(wCe,[["render",CCe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function SCe({el$:e},t){const n=Xe("tree"),s=Ns([]),o=Ns([]);Ft(()=>{i(),ts(e.value,"keydown",r)}),qn(()=>{Ss(e.value,"keydown",r)}),Ki(()=>{s.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),o.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),We(o,a=>{a.forEach(l=>{l.setAttribute("tabindex","-1")})});const r=a=>{const l=a.target;if(!l.className.includes(n.b("node")))return;const u=a.code;s.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const c=s.value.indexOf(l);let d;if([ct.up,ct.down].includes(u)){if(a.preventDefault(),u===ct.up){d=c===-1?0:c!==0?c-1:s.value.length-1;const h=d;for(;!t.value.getNode(s.value[d].dataset.key).canFocus;){if(d--,d===h){d=-1;break}d<0&&(d=s.value.length-1)}}else{d=c===-1?0:c<s.value.length-1?c+1:0;const h=d;for(;!t.value.getNode(s.value[d].dataset.key).canFocus;){if(d++,d===h){d=-1;break}d>=s.value.length&&(d=0)}}d!==-1&&s.value[d].focus()}[ct.left,ct.right].includes(u)&&(a.preventDefault(),l.click());const f=l.querySelector('[type="checkbox"]');[ct.enter,ct.space].includes(u)&&f&&(a.preventDefault(),f.click())},i=()=>{var a;s.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),o.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const l=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(a=s.value[0])==null||a.setAttribute("tabindex","0")}}const ICe=xe({name:"ElTree",components:{ElTreeNode:$Ce},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:[String,Object]},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=Dn(),s=Xe("tree"),o=j(new gCe({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));o.value.initialize();const r=j(o.value.root),i=j(null),a=j(null),l=j(null),{broadcastExpanded:u}=KB(e),{dragState:c}=yCe({props:e,ctx:t,el$:a,dropIndicator$:l,store:o});SCe({el$:a},o);const d=O(()=>{const{childNodes:M}=r.value;return!M||M.length===0||M.every(({visible:B})=>!B)});We(()=>e.defaultCheckedKeys,M=>{o.value.setDefaultCheckedKey(M)}),We(()=>e.defaultExpandedKeys,M=>{o.value.setDefaultExpandedKeys(M)}),We(()=>e.data,M=>{o.value.setData(M)},{deep:!0}),We(()=>e.checkStrictly,M=>{o.value.checkStrictly=M});const f=M=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");o.value.filter(M)},h=M=>bS(e.nodeKey,M.data),p=M=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const B=o.value.getNode(M);if(!B)return[];const Y=[B.data];let J=B.parent;for(;J&&J!==r.value;)Y.push(J.data),J=J.parent;return Y.reverse()},m=(M,B)=>o.value.getCheckedNodes(M,B),g=M=>o.value.getCheckedKeys(M),v=()=>{const M=o.value.getCurrentNode();return M?M.data:null},b=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const M=v();return M?M[e.nodeKey]:null},w=(M,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");o.value.setCheckedNodes(M,B)},y=(M,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");o.value.setCheckedKeys(M,B)},k=(M,B,Y)=>{o.value.setChecked(M,B,Y)},x=()=>o.value.getHalfCheckedNodes(),C=()=>o.value.getHalfCheckedKeys(),S=(M,B=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");o.value.setUserCurrentNode(M,B)},T=(M,B=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");o.value.setCurrentNodeKey(M,B)},A=M=>o.value.getNode(M),R=M=>{o.value.remove(M)},L=(M,B)=>{o.value.append(M,B)},P=(M,B)=>{o.value.insertBefore(M,B)},V=(M,B)=>{o.value.insertAfter(M,B)},H=(M,B,Y)=>{u(B),t.emit("node-expand",M,B,Y)},F=(M,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");o.value.updateChildren(M,B)};return Gt("RootTree",{ctx:t,props:e,store:o,root:r,currentNode:i,instance:jt()}),{ns:s,store:o,root:r,currentNode:i,dragState:c,el$:a,dropIndicator$:l,isEmpty:d,filter:f,getNodeKey:h,getNodePath:p,getCheckedNodes:m,getCheckedKeys:g,getCurrentNode:v,getCurrentKey:b,setCheckedNodes:w,setCheckedKeys:y,setChecked:k,getHalfCheckedNodes:x,getHalfCheckedKeys:C,setCurrentNode:S,setCurrentKey:T,t:n,getNode:A,remove:R,append:L,insertBefore:P,insertAfter:V,handleNodeExpand:H,updateKeyChildren:F}}});function ECe(e,t,n,s,o,r){var i;const a=Ne("el-tree-node");return _(),U("div",{ref:"el$",class:W([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(_(!0),U(lt,null,Zt(e.root.childNodes,l=>(_(),ye(a,{key:e.getNodeKey(l),node:l,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(_(),U("div",{key:0,class:W(e.ns.e("empty-block"))},[q("span",{class:W(e.ns.e("empty-text"))},He((i=e.emptyText)!=null?i:e.t("el.tree.emptyText")),3)],2)):me("v-if",!0),It(q("div",{ref:"dropIndicator$",class:W(e.ns.e("drop-indicator"))},null,2),[[cn,e.dragState.showDropIndicator]])],2)}var Pv=Ye(ICe,[["render",ECe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);Pv.install=e=>{e.component(Pv.name,Pv)};const db=Pv,TCe=db,_Ce=(e,{attrs:t},{tree:n,key:s})=>{const o=Xe("tree-select"),r=nt(Me(Me({},Ml(oo(e),Object.keys(kc.props))),t),{valueKey:s,popperClass:O(()=>{const i=[o.e("popper")];return e.popperClass&&i.push(e.popperClass),i.join(" ")}),filterMethod:(i="")=>{e.filterMethod&&e.filterMethod(i),vt(()=>{var a;(a=n.value)==null||a.filter(i)})},onVisibleChange:i=>{var a;(a=t.onVisibleChange)==null||a.call(t,i),e.filterable&&i&&r.filterMethod()}});return r},NCe=xe({extends:ib,setup(e,t){const n=ib.setup(e,t);return delete n.selectOptionClick,n},methods:{selectOptionClick(){this.$el.parentElement.click()}}}),ACe=(e,{attrs:t,slots:n,emit:s},{select:o,tree:r,key:i})=>{We(()=>e.modelValue,()=>{e.showCheckbox&&vt(()=>{const u=r.value;u&&!Zo(u.getCheckedKeys(),B2(e.modelValue))&&u.setCheckedKeys(B2(e.modelValue))})},{immediate:!0,deep:!0});const a=O(()=>Me({value:i.value},e.props)),l=(u,c)=>{var d;const f=a.value[u];return zt(f)?f(c,(d=r.value)==null?void 0:d.getNode(l("value",c))):c[f]};return nt(Me(Me({},Ml(oo(e),Object.keys(db.props))),t),{nodeKey:i,defaultExpandedKeys:O(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(e.modelValue):B2(e.modelValue)),renderContent:(u,{node:c,data:d,store:f})=>u(NCe,{value:l("value",d),label:l("label",d),disabled:l("disabled",d)},e.renderContent?()=>e.renderContent(u,{node:c,data:d,store:f}):n.default?()=>n.default({node:c,data:d,store:f}):void 0),filterNodeMethod:(u,c,d)=>{var f;return e.filterNodeMethod?e.filterNodeMethod(u,c,d):u?(f=l("label",c))==null?void 0:f.includes(u):!0},onNodeClick:(u,c,d)=>{var f,h,p;if((f=t.onNodeClick)==null||f.call(t,u,c,d),e.checkStrictly||c.isLeaf){if(!l("disabled",u)){const m=(h=o.value)==null?void 0:h.options.get(l("value",u));(p=o.value)==null||p.handleOptionSelect(m,!0)}}else d.ctx.handleExpandIconClick()},onCheck:(u,c)=>{var d,f;(d=t.onCheck)==null||d.call(t,u,c);const h=e.checkStrictly?c.checkedKeys:(f=r.value)==null?void 0:f.getCheckedKeys(!0),p=l("value",u);s(Ht,e.multiple?h:h.includes(p)?p:void 0)}})};function B2(e){return Array.isArray(e)?e:e||e===0?[e]:[]}const DCe=xe({name:"ElTreeSelect",props:Me(Me({},kc.props),db.props),setup(e,t){const{slots:n,expose:s}=t,o=j(),r=j(),i=O(()=>e.valueKey||e.nodeKey||"value"),a=_Ce(e,t,{select:o,tree:r,key:i}),l=ACe(e,t,{select:o,tree:r,key:i}),u=vn({});return s(u),Ft(()=>{Object.assign(u,Me(Me({},Ml(r.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),Ml(o.value,["focus","blur"])))}),()=>at(kc,vn(nt(Me({},a),{ref:c=>o.value=c})),nt(Me({},n),{default:()=>at(db,vn(nt(Me({},l),{ref:c=>r.value=c})))}))}});var Fv=Ye(DCe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);Fv.install=e=>{e.component(Fv.name,Fv)};const RCe=Fv,MCe=RCe,yS=Symbol(),OCe={key:-1,level:-1,data:{}};var zh=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(zh||{}),$x=(e=>(e.ADD="add",e.DELETE="delete",e))($x||{});const PCe=pt({data:{type:Qe(Array),default:()=>gs([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Qe(Object),default:()=>gs({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Qe(Array),default:()=>gs([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Qe(Array),default:()=>gs([])},indent:{type:Number,default:16},icon:{type:String},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Qe([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Qe(Function)},perfMode:{type:Boolean,default:!0}}),FCe=pt({node:{type:Qe(Object),default:()=>gs(OCe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1}}),LCe=pt({node:{type:Qe(Object),required:!0}}),YB="node-click",XB="node-expand",ZB="node-collapse",JB="current-change",QB="check",ez="check-change",tz="node-contextmenu",BCe={[YB]:(e,t,n)=>e&&t&&n,[XB]:(e,t)=>e&&t,[ZB]:(e,t)=>e&&t,[JB]:(e,t)=>e&&t,[QB]:(e,t)=>e&&t,[ez]:(e,t)=>e&&typeof t=="boolean",[tz]:(e,t,n)=>e&&t&&n},zCe={click:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&typeof t=="boolean"};function VCe(e,t){const n=j(new Set),s=j(new Set),{emit:o}=jt();We(()=>t.value,()=>vt(()=>{b(e.defaultCheckedKeys)}),{immediate:!0});const r=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:w,maxLevel:y}=t.value,k=n.value,x=new Set;for(let C=y-1;C>=1;--C){const S=w.get(C);!S||S.forEach(T=>{const A=T.children;if(A){let R=!0,L=!1;for(const P of A){const V=P.key;if(k.has(V))L=!0;else if(x.has(V)){R=!1,L=!0;break}else R=!1}R?k.add(T.key):L?(x.add(T.key),k.delete(T.key)):(k.delete(T.key),x.delete(T.key))}})}s.value=x},i=w=>n.value.has(w.key),a=w=>s.value.has(w.key),l=(w,y,k=!0)=>{const x=n.value,C=(S,T)=>{x[T?$x.ADD:$x.DELETE](S.key);const A=S.children;!e.checkStrictly&&A&&A.forEach(R=>{R.disabled||C(R,T)})};C(w,y),r(),k&&u(w,y)},u=(w,y)=>{const{checkedNodes:k,checkedKeys:x}=p(),{halfCheckedNodes:C,halfCheckedKeys:S}=m();o(QB,w.data,{checkedKeys:x,checkedNodes:k,halfCheckedKeys:S,halfCheckedNodes:C}),o(ez,w.data,y)};function c(w=!1){return p(w).checkedKeys}function d(w=!1){return p(w).checkedNodes}function f(){return m().halfCheckedKeys}function h(){return m().halfCheckedNodes}function p(w=!1){const y=[],k=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:x}=t.value;n.value.forEach(C=>{const S=x.get(C);S&&(!w||w&&S.isLeaf)&&(k.push(C),y.push(S.data))})}return{checkedKeys:k,checkedNodes:y}}function m(){const w=[],y=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:k}=t.value;s.value.forEach(x=>{const C=k.get(x);C&&(y.push(x),w.push(C.data))})}return{halfCheckedNodes:w,halfCheckedKeys:y}}function g(w){n.value.clear(),s.value.clear(),b(w)}function v(w,y){if((t==null?void 0:t.value)&&e.showCheckbox){const k=t.value.treeNodeMap.get(w);k&&l(k,y,!1)}}function b(w){if(t!=null&&t.value){const{treeNodeMap:y}=t.value;if(e.showCheckbox&&y&&w)for(const k of w){const x=y.get(k);x&&!i(x)&&l(x,!0,!1)}}}return{updateCheckedKeys:r,toggleCheckbox:l,isChecked:i,isIndeterminate:a,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:v,setCheckedKeys:g}}function WCe(e,t){const n=j(new Set([])),s=j(new Set([])),o=O(()=>zt(e.filterMethod));function r(a){var l;if(!o.value)return;const u=new Set,c=s.value,d=n.value,f=[],h=((l=t.value)==null?void 0:l.treeNodes)||[],p=e.filterMethod;d.clear();function m(g){g.forEach(v=>{f.push(v),p!=null&&p(a,v.data)?f.forEach(w=>{u.add(w.key)}):v.isLeaf&&d.add(v.key);const b=v.children;if(b&&m(b),!v.isLeaf){if(!u.has(v.key))d.add(v.key);else if(b){let w=!0;for(const y of b)if(!d.has(y.key)){w=!1;break}w?c.add(v.key):c.delete(v.key)}}f.pop()})}return m(h),u}function i(a){return s.value.has(a.key)}return{hiddenExpandIconKeySet:s,hiddenNodeKeySet:n,doFilter:r,isForceHiddenExpandIcon:i}}function HCe(e,t){const n=j(new Set(e.defaultExpandedKeys)),s=j(),o=Ns();We(()=>e.currentNodeKey,Q=>{s.value=Q},{immediate:!0}),We(()=>e.data,Q=>{se(Q)},{immediate:!0});const{isIndeterminate:r,isChecked:i,toggleCheckbox:a,getCheckedKeys:l,getCheckedNodes:u,getHalfCheckedKeys:c,getHalfCheckedNodes:d,setChecked:f,setCheckedKeys:h}=VCe(e,o),{doFilter:p,hiddenNodeKeySet:m,isForceHiddenExpandIcon:g}=WCe(e,o),v=O(()=>{var Q;return((Q=e.props)==null?void 0:Q.value)||zh.KEY}),b=O(()=>{var Q;return((Q=e.props)==null?void 0:Q.children)||zh.CHILDREN}),w=O(()=>{var Q;return((Q=e.props)==null?void 0:Q.disabled)||zh.DISABLED}),y=O(()=>{var Q;return((Q=e.props)==null?void 0:Q.label)||zh.LABEL}),k=O(()=>{const Q=n.value,ae=m.value,pe=[],ke=o.value&&o.value.treeNodes||[];function Be(){const je=[];for(let qe=ke.length-1;qe>=0;--qe)je.push(ke[qe]);for(;je.length;){const qe=je.pop();if(!!qe&&(ae.has(qe.key)||pe.push(qe),Q.has(qe.key))){const ne=qe.children;if(ne){const ue=ne.length;for(let Se=ue-1;Se>=0;--Se)je.push(ne[Se])}}}}return Be(),pe}),x=O(()=>k.value.length>0);function C(Q){const ae=new Map,pe=new Map;let ke=1;function Be(qe,ne=1,ue=void 0){var Se;const Fe=[];for(const Le of qe){const Ke=A(Le),ie={level:ne,key:Ke,data:Le};ie.label=L(Le),ie.parent=ue;const ge=T(Le);ie.disabled=R(Le),ie.isLeaf=!ge||ge.length===0,ge&&ge.length&&(ie.children=Be(ge,ne+1,ie)),Fe.push(ie),ae.set(Ke,ie),pe.has(ne)||pe.set(ne,[]),(Se=pe.get(ne))==null||Se.push(ie)}return ne>ke&&(ke=ne),Fe}const je=Be(Q);return{treeNodeMap:ae,levelTreeNodeMap:pe,maxLevel:ke,treeNodes:je}}function S(Q){const ae=p(Q);ae&&(n.value=ae)}function T(Q){return Q[b.value]}function A(Q){return Q?Q[v.value]:""}function R(Q){return Q[w.value]}function L(Q){return Q[y.value]}function P(Q){n.value.has(Q.key)?B(Q):M(Q)}function V(Q,ae){t(YB,Q.data,Q,ae),H(Q),e.expandOnClickNode&&P(Q),e.showCheckbox&&e.checkOnClickNode&&!Q.disabled&&a(Q,!i(Q),!0)}function H(Q){ee(Q)||(s.value=Q.key,t(JB,Q.data,Q))}function F(Q,ae){a(Q,ae)}function M(Q){const ae=n.value;if((o==null?void 0:o.value)&&e.accordion){const{treeNodeMap:pe}=o.value;ae.forEach(ke=>{const Be=pe.get(ke);Be&&Be.level===Be.level&&ae.delete(ke)})}ae.add(Q.key),t(XB,Q.data,Q)}function B(Q){n.value.delete(Q.key),t(ZB,Q.data,Q)}function Y(Q){return n.value.has(Q.key)}function J(Q){return!!Q.disabled}function ee(Q){const ae=s.value;return!!ae&&ae===Q.key}function te(){var Q,ae;if(!!s.value)return(ae=(Q=o==null?void 0:o.value)==null?void 0:Q.treeNodeMap.get(s.value))==null?void 0:ae.data}function re(){return s.value}function $e(Q){s.value=Q}function se(Q){vt(()=>o.value=C(Q))}return{tree:o,flattenTree:k,isNotEmpty:x,getKey:A,getChildren:T,toggleExpand:P,toggleCheckbox:a,isExpanded:Y,isChecked:i,isIndeterminate:r,isDisabled:J,isCurrent:ee,isForceHiddenExpandIcon:g,handleNodeClick:V,handleNodeCheck:F,getCurrentNode:te,getCurrentKey:re,setCurrentKey:$e,getCheckedKeys:l,getCheckedNodes:u,getHalfCheckedKeys:c,getHalfCheckedNodes:d,setChecked:f,setCheckedKeys:h,filter:S,setData:se}}var UCe=xe({name:"ElTreeNodeContent",props:LCe,setup(e){const t=rt(yS),n=Xe("tree");return()=>{const s=e.node,{data:o}=s;return t!=null&&t.ctx.slots.default?t.ctx.slots.default({node:s,data:o}):at("span",{class:n.be("node","label")},[s==null?void 0:s.label])}}});const jCe="caret-right",GCe=xe({name:"ElTreeNode",components:{ElIcon:xt,CaretRight:HF,ElCheckbox:Hi,ElNodeContent:UCe},props:FCe,emits:zCe,setup(e,{emit:t}){const n=rt(yS),s=Xe("tree"),o=O(()=>{var c;return(c=n==null?void 0:n.props.indent)!=null?c:16}),r=O(()=>{var c;return(c=n==null?void 0:n.props.icon)!=null?c:jCe});return{ns:s,indent:o,icon:r,handleClick:c=>{t("click",e.node,c)},handleExpandIconClick:()=>{t("toggle",e.node)},handleCheckChange:c=>{t("check",e.node,c)},handleContextMenu:c=>{var d,f,h,p;(h=(f=(d=n==null?void 0:n.instance)==null?void 0:d.vnode)==null?void 0:f.props)!=null&&h.onNodeContextmenu&&(c.stopPropagation(),c.preventDefault()),n==null||n.ctx.emit(tz,c,(p=e.node)==null?void 0:p.data,e.node)}}}}),KCe=["aria-expanded","aria-disabled","aria-checked","data-key"];function qCe(e,t,n,s,o,r){var i,a,l;const u=Ne("el-icon"),c=Ne("el-checkbox"),d=Ne("el-node-content");return _(),U("div",{ref:"node$",class:W([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.current),e.ns.is("focusable",!e.disabled),e.ns.is("checked",!e.disabled&&e.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.disabled,"aria-checked":e.checked,"data-key":(i=e.node)==null?void 0:i.key,onClick:t[1]||(t[1]=wt((...f)=>e.handleClick&&e.handleClick(...f),["stop"])),onContextmenu:t[2]||(t[2]=(...f)=>e.handleContextMenu&&e.handleContextMenu(...f))},[q("div",{class:W(e.ns.be("node","content")),style:it({paddingLeft:`${(e.node.level-1)*e.indent}px`})},[e.icon?(_(),ye(u,{key:0,class:W([e.ns.is("leaf",!!((a=e.node)!=null&&a.isLeaf)),e.ns.is("hidden",e.hiddenExpandIcon),{expanded:!((l=e.node)!=null&&l.isLeaf)&&e.expanded},e.ns.be("node","expand-icon")]),onClick:wt(e.handleExpandIconClick,["stop"])},{default:de(()=>[(_(),ye(an(e.icon)))]),_:1},8,["class","onClick"])):me("v-if",!0),e.showCheckbox?(_(),ye(c,{key:1,"model-value":e.checked,indeterminate:e.indeterminate,disabled:e.disabled,onChange:e.handleCheckChange,onClick:t[0]||(t[0]=wt(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled","onChange"])):me("v-if",!0),fe(d,{node:e.node},null,8,["node"])],6)],42,KCe)}var YCe=Ye(GCe,[["render",qCe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const XCe=xe({name:"ElTreeV2",components:{ElTreeNode:YCe,FixedSizeList:EB},props:PCe,emits:BCe,setup(e,t){Gt(yS,{ctx:t,props:e,instance:jt()});const{t:n}=Dn(),s=Xe("tree"),{flattenTree:o,isNotEmpty:r,toggleExpand:i,isExpanded:a,isIndeterminate:l,isChecked:u,isDisabled:c,isCurrent:d,isForceHiddenExpandIcon:f,toggleCheckbox:h,handleNodeClick:p,handleNodeCheck:m,getCurrentNode:g,getCurrentKey:v,setCurrentKey:b,getCheckedKeys:w,getCheckedNodes:y,getHalfCheckedKeys:k,getHalfCheckedNodes:x,setChecked:C,setCheckedKeys:S,filter:T,setData:A}=HCe(e,t.emit);return t.expose({getCurrentNode:g,getCurrentKey:v,setCurrentKey:b,getCheckedKeys:w,getCheckedNodes:y,getHalfCheckedKeys:k,getHalfCheckedNodes:x,setChecked:C,setCheckedKeys:S,filter:T,setData:A}),{t:n,ns:s,flattenTree:o,itemSize:26,isNotEmpty:r,toggleExpand:i,toggleCheckbox:h,isExpanded:a,isIndeterminate:l,isChecked:u,isDisabled:c,isCurrent:d,isForceHiddenExpandIcon:f,handleNodeClick:p,handleNodeCheck:m}}});function ZCe(e,t,n,s,o,r){var i;const a=Ne("el-tree-node"),l=Ne("fixed-size-list");return _(),U("div",{class:W([e.ns.b(),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[e.isNotEmpty?(_(),ye(l,{key:0,"class-name":e.ns.b("virtual-list"),data:e.flattenTree,total:e.flattenTree.length,height:e.height,"item-size":e.itemSize,"perf-mode":e.perfMode},{default:de(({data:u,index:c,style:d})=>[(_(),ye(a,{key:u[c].key,style:it(d),node:u[c],expanded:e.isExpanded(u[c]),"show-checkbox":e.showCheckbox,checked:e.isChecked(u[c]),indeterminate:e.isIndeterminate(u[c]),disabled:e.isDisabled(u[c]),current:e.isCurrent(u[c]),"hidden-expand-icon":e.isForceHiddenExpandIcon(u[c]),onClick:e.handleNodeClick,onToggle:e.toggleExpand,onCheck:e.handleNodeCheck},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(_(),U("div",{key:1,class:W(e.ns.e("empty-block"))},[q("span",{class:W(e.ns.e("empty-text"))},He((i=e.emptyText)!=null?i:e.t("el.tree.emptyText")),3)],2))],2)}var JCe=Ye(XCe,[["render",ZCe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const QCe=Kt(JCe),e$e="ElUpload";class t$e extends Error{constructor(t,n,s,o){super(t),this.name="UploadAjaxError",this.status=n,this.method=s,this.url=o}}function fR(e,t,n){let s;return n.response?s=`${n.response.error||n.response}`:n.responseText?s=`${n.responseText}`:s=`fail to ${t.method} ${e} ${n.status}`,new t$e(s,n.status,t.method,e)}function n$e(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const s$e=e=>{typeof XMLHttpRequest=="undefined"&&Fs(e$e,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,n=e.action;t.upload&&t.upload.addEventListener("progress",r=>{const i=r;i.percent=r.total>0?r.loaded/r.total*100:0,e.onProgress(i)});const s=new FormData;if(e.data)for(const[r,i]of Object.entries(e.data))Array.isArray(i)?s.append(r,...i):s.append(r,i);s.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(fR(n,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(fR(n,e,t));e.onSuccess(n$e(t))}),t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const o=e.headers||{};if(o instanceof Headers)o.forEach((r,i)=>t.setRequestHeader(i,r));else for(const[r,i]of Object.entries(o))I$(i)||t.setRequestHeader(r,String(i));return t.send(s),t},nz=["text","picture","picture-card"];let o$e=1;const sz=()=>Date.now()+o$e++,oz=pt({action:{type:String,required:!0},headers:{type:Qe(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>gs({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:Qe(Array),default:()=>gs([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:nz,default:"text"},httpRequest:{type:Qe(Function),default:s$e},disabled:Boolean,limit:Number}),r$e=pt(nt(Me({},oz),{beforeUpload:{type:Qe(Function),default:In},beforeRemove:{type:Qe(Function)},onRemove:{type:Qe(Function),default:In},onChange:{type:Qe(Function),default:In},onPreview:{type:Qe(Function),default:In},onSuccess:{type:Qe(Function),default:In},onProgress:{type:Qe(Function),default:In},onError:{type:Qe(Function),default:In},onExceed:{type:Qe(Function),default:In}})),i$e=pt({files:{type:Qe(Array),default:()=>gs([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Qe(Function),default:In},listType:{type:String,values:nz,default:"text"}}),a$e={remove:e=>!!e},l$e=["onKeydown"],u$e=["src"],c$e=["onClick"],d$e=["onClick"],f$e=["onClick"],h$e={name:"ElUploadList"},p$e=xe(nt(Me({},h$e),{props:i$e,emits:a$e,setup(e,{emit:t}){const n=e,{t:s}=Dn(),o=Xe("upload"),r=Xe("icon"),i=Xe("list"),a=j(!1),l=d=>{n.handlePreview(d)},u=d=>{d.target.focus()},c=d=>{t("remove",d)};return(d,f)=>(_(),ye(_Y,{tag:"ul",class:W([N(o).b("list"),N(o).bm("list",d.listType),N(o).is("disabled",d.disabled)]),name:N(i).b()},{default:de(()=>[(_(!0),U(lt,null,Zt(d.files,h=>(_(),U("li",{key:h.uid||h.name,class:W([N(o).be("list","item"),N(o).is(h.status),{focusing:a.value}]),tabindex:"0",onKeydown:Qt(p=>!d.disabled&&c(h),["delete"]),onFocus:f[0]||(f[0]=p=>a.value=!0),onBlur:f[1]||(f[1]=p=>a.value=!1),onClick:u},[Pe(d.$slots,"default",{file:h},()=>[d.listType==="picture"||h.status!=="uploading"&&d.listType==="picture-card"?(_(),U("img",{key:0,class:W(N(o).be("list","item-thumbnail")),src:h.url,alt:""},null,10,u$e)):me("v-if",!0),d.listType!=="picture"&&(h.status==="uploading"||d.listType!=="picture-card")?(_(),U("div",{key:1,class:W(N(o).be("list","item-info"))},[q("a",{class:W(N(o).be("list","item-name")),onClick:p=>l(h)},[fe(N(xt),{class:W(N(r).m("document"))},{default:de(()=>[fe(N(loe))]),_:1},8,["class"]),Yt(" "+He(h.name),1)],10,c$e),h.status==="uploading"?(_(),ye(N(gB),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:it(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):me("v-if",!0)],2)):me("v-if",!0),q("label",{class:W(N(o).be("list","item-status-label"))},[d.listType==="text"?(_(),ye(N(xt),{key:0,class:W([N(r).m("upload-success"),N(r).m("circle-check")])},{default:de(()=>[fe(N(nb))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(_(),ye(N(xt),{key:1,class:W([N(r).m("upload-success"),N(r).m("check")])},{default:de(()=>[fe(N(of))]),_:1},8,["class"])):me("v-if",!0)],2),d.disabled?me("v-if",!0):(_(),ye(N(xt),{key:2,class:W(N(r).m("close")),onClick:p=>c(h)},{default:de(()=>[fe(N(ci))]),_:2},1032,["class","onClick"])),me(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),me(" This is a bug which needs to be fixed "),me(" TODO: Fix the incorrect navigation interaction "),d.disabled?me("v-if",!0):(_(),U("i",{key:3,class:W(N(r).m("close-tip"))},He(N(s)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(_(),U("span",{key:4,class:W(N(o).be("list","item-actions"))},[q("span",{class:W(N(o).be("list","item-preview")),onClick:p=>d.handlePreview(h)},[fe(N(xt),{class:W(N(r).m("zoom-in"))},{default:de(()=>[fe(N(KF))]),_:1},8,["class"])],10,d$e),d.disabled?me("v-if",!0):(_(),U("span",{key:0,class:W(N(o).be("list","item-delete")),onClick:p=>c(h)},[fe(N(xt),{class:W(N(r).m("delete"))},{default:de(()=>[fe(N(noe))]),_:1},8,["class"])],10,f$e))],2)):me("v-if",!0)])],42,l$e))),128)),Pe(d.$slots,"append")]),_:3},8,["class","name"]))}}));var hR=Ye(p$e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const m$e=pt({disabled:{type:Boolean,default:!1}}),g$e={file:e=>Et(e)},v$e=["onDrop","onDragover"],b$e={name:"ElUploadDrag"},y$e=xe(nt(Me({},b$e),{props:m$e,emits:g$e,setup(e,{emit:t}){const n=e,s="ElUploadDrag",o=rt(c4);o||Fs(s,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=Xe("upload"),i=j(!1),a=u=>{if(n.disabled)return;i.value=!1;const c=Array.from(u.dataTransfer.files),d=o.accept.value;if(!d){t("file",c);return}const f=c.filter(h=>{const{type:p,name:m}=h,g=m.includes(".")?`.${m.split(".").pop()}`:"",v=p.replace(/\/.*$/,"");return d.split(",").map(b=>b.trim()).filter(b=>b).some(b=>b.startsWith(".")?g===b:/\/\*$/.test(b)?v===b.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(b)?p===b:!1)});t("file",f)},l=()=>{n.disabled||(i.value=!0)};return(u,c)=>(_(),U("div",{class:W([N(r).b("dragger"),N(r).is("dragover",i.value)]),onDrop:wt(a,["prevent"]),onDragover:wt(l,["prevent"]),onDragleave:c[0]||(c[0]=wt(d=>i.value=!1,["prevent"]))},[Pe(u.$slots,"default")],42,v$e))}}));var w$e=Ye(y$e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const k$e=pt(nt(Me({},oz),{fileList:{type:Qe(Array),default:()=>gs([])},beforeUpload:{type:Qe(Function),default:In},onRemove:{type:Qe(Function),default:In},onStart:{type:Qe(Function),default:In},onSuccess:{type:Qe(Function),default:In},onProgress:{type:Qe(Function),default:In},onError:{type:Qe(Function),default:In},onExceed:{type:Qe(Function),default:In}})),x$e=["onKeydown"],C$e=["name","multiple","accept"],$$e={name:"ElUploadContent",inheritAttrs:!1},S$e=xe(nt(Me({},$$e),{props:k$e,setup(e,{expose:t}){const n=e,s=Xe("upload"),o=Ns({}),r=Ns(),i=h=>{if(h.length===0)return;const{autoUpload:p,limit:m,fileList:g,multiple:v,onStart:b,onExceed:w}=n;if(m&&g.length+h.length>m){w(h,g);return}v||(h=h.slice(0,1));for(const y of h){const k=y;k.uid=sz(),b(k),p&&a(k)}},a=async h=>{if(r.value.value="",!n.beforeUpload)return l(h);let p;try{p=await n.beforeUpload(h)}catch{p=!1}if(p===!1){n.onRemove(h);return}let m=h;if(p instanceof Blob){p instanceof File?m=p:m=new File([p],h.name,{type:h.type});for(const g of Object.keys(h))m[g]=h[g]}l(h)},l=h=>{const{headers:p,data:m,method:g,withCredentials:v,name:b,action:w,onProgress:y,onSuccess:k,onError:x,httpRequest:C}=n,{uid:S}=h,T={headers:p||{},withCredentials:v,file:h,data:m,method:g,filename:b,action:w,onProgress:R=>{y(R,h)},onSuccess:R=>{k(R,h),delete o.value[S]},onError:R=>{x(R,h),delete o.value[S]}},A=C(T);o.value[S]=A,A instanceof Promise&&A.then(T.onSuccess,T.onError)},u=h=>{const p=h.target.files;!p||i(Array.from(p))},c=()=>{n.disabled||(r.value.value="",r.value.click())},d=()=>{c()};return t({abort:h=>{lne(o.value).filter(h?([m])=>String(h.uid)===m:()=>!0).forEach(([m,g])=>{g instanceof XMLHttpRequest&&g.abort(),delete o.value[m]})},upload:a}),(h,p)=>(_(),U("div",{class:W([N(s).b(),N(s).m(h.listType)]),tabindex:"0",onClick:c,onKeydown:Qt(wt(d,["self"]),["enter","space"])},[h.drag?(_(),ye(w$e,{key:0,disabled:h.disabled,onFile:i},{default:de(()=>[Pe(h.$slots,"default")]),_:3},8,["disabled"])):Pe(h.$slots,"default",{key:1}),q("input",{ref_key:"inputRef",ref:r,class:W(N(s).e("input")),name:h.name,multiple:h.multiple,accept:h.accept,type:"file",onChange:u},null,42,C$e)],42,x$e))}}));var pR=Ye(S$e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const z2="ElUpload",I$e=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},E$e=(e,t)=>{const n=j([]),s=f=>n.value.find(h=>h.uid===f.uid);function o(f){var h;(h=t.value)==null||h.abort(f)}function r(f=["ready","uploading","success","fail"]){n.value=n.value.filter(h=>!f.includes(h.status))}const i=(f,h)=>{const p=s(h);!p||(p.status="fail",n.value.splice(n.value.indexOf(p),1),e.onError(f,p,n.value),e.onChange(p,n.value))},a=(f,h)=>{const p=s(h);!p||(e.onProgress(f,p,n.value),p.status="uploading",p.percentage=Math.round(f.percent))},l=(f,h)=>{const p=s(h);!p||(p.status="success",p.response=f,e.onSuccess(f,p,n.value),e.onChange(p,n.value))},u=f=>{const h={name:f.name,percentage:0,status:"ready",size:f.size,raw:f,uid:f.uid};if(e.listType==="picture-card"||e.listType==="picture")try{h.url=URL.createObjectURL(f)}catch(p){p.message,e.onError(p,h,n.value)}n.value.push(h),e.onChange(h,n.value)},c=async(f,h)=>{h&&wm({scope:z2,from:"handleRemove second argument",version:"2.2",replacement:"first argument `file`",ref:"https://element-plus.org/en-US/component/upload.html#methods"},!0);const p=h||f,m=p instanceof File?s(p):p;m||Fs(z2,"file to be removed not found");const g=v=>{o(v);const b=n.value;b.splice(b.indexOf(v),1),e.onRemove(v,b),I$e(v)};e.beforeRemove?await e.beforeRemove(m,n.value)!==!1&&g(m):g(m)};function d(){n.value.filter(({status:f})=>f==="ready").forEach(({raw:f})=>{var h;return f&&((h=t.value)==null?void 0:h.upload(f))})}return We(()=>e.listType,f=>{f!=="picture-card"&&f!=="picture"||(n.value=n.value.map(h=>{const{raw:p,url:m}=h;if(!m&&p)try{h.url=URL.createObjectURL(p)}catch(g){e.onError(g,h,n.value)}return h}))}),We(()=>e.fileList,f=>{for(const h of f)h.uid||(h.uid=sz()),h.status||(h.status="success");n.value=f},{immediate:!0,deep:!0}),{abort:o,clearFiles:r,handleError:i,handleProgress:a,handleStart:u,handleSuccess:l,handleRemove:c,submit:d,uploadFiles:n}},T$e={name:"ElUpload"},_$e=xe(nt(Me({},T$e),{props:r$e,setup(e,{expose:t}){const n=e,s=gm(),o=Wf(),r=Ns(),{abort:i,submit:a,clearFiles:l,uploadFiles:u,handleStart:c,handleError:d,handleRemove:f,handleSuccess:h,handleProgress:p}=E$e(n,r),m=O(()=>n.listType==="picture-card"),g=O(()=>nt(Me({},n),{onStart:c,onProgress:p,onSuccess:h,onError:d,onRemove:f}));return qn(()=>{u.value.forEach(({url:v})=>{v!=null&&v.startsWith("blob:")&&URL.revokeObjectURL(v)})}),Gt(c4,{accept:qs(n,"accept")}),t({abort:i,submit:a,clearFiles:l,handleStart:c,handleRemove:f}),(v,b)=>(_(),U("div",null,[N(m)&&v.showFileList?(_(),ye(hR,{key:0,disabled:N(o),"list-type":v.listType,files:N(u),"handle-preview":v.onPreview,onRemove:N(f)},Yl({append:de(()=>[v.listType==="picture-card"?(_(),ye(pR,Wn({key:0,ref_key:"uploadRef",ref:r},N(g)),{default:de(()=>[N(s).trigger?Pe(v.$slots,"trigger",{key:0}):me("v-if",!0),!N(s).trigger&&N(s).default?Pe(v.$slots,"default",{key:1}):me("v-if",!0)]),_:3},16)):me("v-if",!0)]),_:2},[v.$slots.file?{name:"default",fn:de(({file:w})=>[Pe(v.$slots,"file",{file:w})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):me("v-if",!0),v.listType!=="picture-card"?(_(),ye(pR,Wn({key:1,ref_key:"uploadRef",ref:r},N(g)),{default:de(()=>[N(s).trigger?Pe(v.$slots,"trigger",{key:0}):me("v-if",!0),!N(s).trigger&&N(s).default?Pe(v.$slots,"default",{key:1}):me("v-if",!0)]),_:3},16)):me("v-if",!0),v.$slots.trigger?Pe(v.$slots,"default",{key:2}):me("v-if",!0),Pe(v.$slots,"tip"),!N(m)&&v.showFileList?(_(),ye(hR,{key:3,disabled:N(o),"list-type":v.listType,files:N(u),"handle-preview":v.onPreview,onRemove:N(f)},Yl({_:2},[v.$slots.file?{name:"default",fn:de(({file:w})=>[Pe(v.$slots,"file",{file:w})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):me("v-if",!0)]))}}));var N$e=Ye(_$e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const A$e=Kt(N$e);var D$e=[$ae,Oae,oce,dce,bce,U4,Ace,Dce,ii,Y4,Bde,Ude,nfe,sfe,yhe,ohe,She,Hi,Cfe,wL,The,Hhe,Uhe,Phe,vpe,wpe,Dpe,Rpe,Mpe,Ope,Ppe,pge,kge,xge,Mge,Bge,Yge,K0e,q0e,Y0e,Rve,Cbe,$be,xt,Lbe,aB,yi,lB,Xbe,vye,bye,yye,Sye,$1e,_1e,P1e,W4,gB,IL,zfe,Bfe,ewe,rwe,lwe,ul,kc,ib,e1e,e2e,l2e,u2e,E2e,M2e,z2e,V2e,Q2e,oxe,rxe,yxe,wxe,Ty,$de,Ixe,Axe,Dxe,vr,eCe,pCe,TCe,MCe,QCe,A$e];const Di="ElInfiniteScroll",R$e=50,M$e=200,O$e=0,P$e={delay:{type:Number,default:M$e},distance:{type:Number,default:O$e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},wS=(e,t)=>Object.entries(P$e).reduce((n,[s,o])=>{var r,i;const{type:a,default:l}=o,u=e.getAttribute(`infinite-scroll-${s}`);let c=(i=(r=t[u])!=null?r:u)!=null?i:l;return c=c==="false"?!1:c,c=a(c),n[s]=Number.isNaN(c)?l:c,n},{}),rz=e=>{const{observer:t}=e[Di];t&&(t.disconnect(),delete e[Di].observer)},F$e=(e,t)=>{const{container:n,containerEl:s,instance:o,observer:r,lastScrollTop:i}=e[Di],{disabled:a,distance:l}=wS(e,o),{clientHeight:u,scrollHeight:c,scrollTop:d}=s,f=d-i;if(e[Di].lastScrollTop=d,r||a||f<0)return;let h=!1;if(n===e)h=c-(u+d)<=l;else{const{clientTop:p,scrollHeight:m}=e,g=one(e,s);h=d+u>=g+p+m-l}h&&t.call(o)};function V2(e,t){const{containerEl:n,instance:s}=e[Di],{disabled:o}=wS(e,s);o||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?t.call(s):rz(e))}const L$e={async mounted(e,t){const{instance:n,value:s}=t;zt(s)||Fs(Di,"'v-infinite-scroll' binding value must be a function"),await vt();const{delay:o,immediate:r}=wS(e,n),i=T$(e,!0),a=i===window?document.documentElement:i,l=rc(F$e.bind(null,e,s),o);if(!!i){if(e[Di]={instance:n,container:i,containerEl:a,delay:o,cb:s,onScroll:l,lastScrollTop:a.scrollTop},r){const u=new MutationObserver(rc(V2.bind(null,e,s),R$e));e[Di].observer=u,u.observe(e,{childList:!0,subtree:!0}),V2(e,s)}i.addEventListener("scroll",l)}},unmounted(e){const{container:t,onScroll:n}=e[Di];t==null||t.removeEventListener("scroll",n),rz(e)},async updated(e){e[Di]||await vt();const{containerEl:t,cb:n,observer:s}=e[Di];t.clientHeight&&s&&V2(e,n)}},Sx=L$e;Sx.install=e=>{e.directive("InfiniteScroll",Sx)};const B$e=Sx;function z$e(e){let t;const n=j(!1),s=vn(nt(Me({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function o(d){s.text=d}function r(){const d=s.parent;if(!d.vLoadingAddClassList){let f=d.getAttribute("loading-number");f=Number.parseInt(f)-1,f?d.setAttribute("loading-number",f.toString()):(ur(d,"el-loading-parent--relative"),d.removeAttribute("loading-number")),ur(d,"el-loading-parent--hidden")}i()}function i(){var d,f;(f=(d=c.$el)==null?void 0:d.parentNode)==null||f.removeChild(c.$el)}function a(){var d;if(e.beforeClose&&!e.beforeClose())return;const f=s.parent;f.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(t),t=window.setTimeout(()=>{n.value&&(n.value=!1,r())},400),s.visible=!1,(d=e.closed)==null||d.call(e)}function l(){!n.value||(n.value=!1,r())}const c=lF({name:"ElLoading",setup(){return()=>{const d=s.spinner||s.svg,f=at("svg",Me({class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"25 25 50 50"},d?{innerHTML:d}:{}),[at("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),h=s.text?at("p",{class:"el-loading-text"},[s.text]):void 0;return at(Rs,{name:"el-loading-fade",onAfterLeave:l},{default:de(()=>[It(fe("div",{style:{backgroundColor:s.background||""},class:["el-loading-mask",s.customClass,s.fullscreen?"is-fullscreen":""]},[at("div",{class:"el-loading-spinner"},[f,h])]),[[cn,s.visible]])])})}}}).mount(document.createElement("div"));return nt(Me({},oo(s)),{setText:o,remvoeElLoadingChild:i,close:a,handleAfterLeave:l,vm:c,get $el(){return c.$el}})}let Ch;const Ix=function(e={}){if(!sn)return;const t=V$e(e);t.fullscreen&&Ch&&(Ch.remvoeElLoadingChild(),Ch.close());const n=z$e(nt(Me({},t),{closed:()=>{var o;(o=t.closed)==null||o.call(t),t.fullscreen&&(Ch=void 0)}}));W$e(t,t.parent,n),mR(t,t.parent,n),t.parent.vLoadingAddClassList=()=>mR(t,t.parent,n);let s=t.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",t.parent.setAttribute("loading-number",s),t.parent.appendChild(n.$el),vt(()=>n.visible.value=t.visible),t.fullscreen&&(Ch=n),n},V$e=e=>{var t,n,s,o;let r;return Bt(e.target)?r=(t=document.querySelector(e.target))!=null?t:document.body:r=e.target||document.body,{parent:r===document.body||e.body?document.body:r,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:r===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(s=e.lock)!=null?s:!1,customClass:e.customClass||"",visible:(o=e.visible)!=null?o:!0,target:r}},W$e=async(e,t,n)=>{const{nextZIndex:s}=al(),o={};if(e.fullscreen)n.originalPosition.value=aa(document.body,"position"),n.originalOverflow.value=aa(document.body,"overflow"),o.zIndex=s();else if(e.parent===document.body){n.originalPosition.value=aa(document.body,"position"),await vt();for(const r of["top","left"]){const i=r==="top"?"scrollTop":"scrollLeft";o[r]=`${e.target.getBoundingClientRect()[r]+document.body[i]+document.documentElement[i]-Number.parseInt(aa(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])o[r]=`${e.target.getBoundingClientRect()[r]}px`}else n.originalPosition.value=aa(t,"position");for(const[r,i]of Object.entries(o))n.$el.style[r]=i},mR=(e,t,n)=>{n.originalPosition.value!=="absolute"&&n.originalPosition.value!=="fixed"?ca(t,"el-loading-parent--relative"):ur(t,"el-loading-parent--relative"),e.fullscreen&&e.lock?ca(t,"el-loading-parent--hidden"):ur(t,"el-loading-parent--hidden")},Ex=Symbol("ElLoading"),gR=(e,t)=>{var n,s,o,r;const i=t.instance,a=f=>rn(t.value)?t.value[f]:void 0,l=f=>{const h=Bt(f)&&(i==null?void 0:i[f])||f;return h&&j(h)},u=f=>l(a(f)||e.getAttribute(`element-loading-${su(f)}`)),c=(n=a("fullscreen"))!=null?n:t.modifiers.fullscreen,d={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:c,target:(s=a("target"))!=null?s:c?void 0:e,body:(o=a("body"))!=null?o:t.modifiers.body,lock:(r=a("lock"))!=null?r:t.modifiers.lock};e[Ex]={options:d,instance:Ix(d)}},H$e=(e,t)=>{for(const n of Object.keys(t))vs(t[n])&&(t[n].value=e[n])},vR={mounted(e,t){t.value&&gR(e,t)},updated(e,t){const n=e[Ex];t.oldValue!==t.value&&(t.value&&!t.oldValue?gR(e,t):t.value&&t.oldValue?rn(t.value)&&H$e(t.value,n.options):n==null||n.instance.close())},unmounted(e){var t;(t=e[Ex])==null||t.instance.close()}},U$e={install(e){e.directive("loading",vR),e.config.globalProperties.$loading=Ix},directive:vR,service:Ix},iz=["success","info","warning","error"],j$e=pt({customClass:{type:String,default:""},center:{type:Boolean,default:!1},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:3e3},icon:{type:Mo,default:""},id:{type:String,default:""},message:{type:Qe([String,Object,Function]),default:""},onClose:{type:Qe(Function),required:!1},showClose:{type:Boolean,default:!1},type:{type:String,values:iz,default:"info"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1}}),G$e={destroy:()=>!0},K$e=xe({name:"ElMessage",components:Me({ElBadge:U4,ElIcon:xt},yy),props:j$e,emits:G$e,setup(e){const t=Xe("message"),n=j(!1),s=j(e.type?e.type==="error"?"danger":e.type:"info");let o;const r=O(()=>{const f=e.type;return{[t.bm("icon",f)]:f&&Ja[f]}}),i=O(()=>e.icon||Ja[e.type]||""),a=O(()=>({top:`${e.offset}px`,zIndex:e.zIndex}));function l(){e.duration>0&&({stop:o}=yc(()=>{n.value&&c()},e.duration))}function u(){o==null||o()}function c(){n.value=!1}function d({code:f}){f===ct.esc?n.value&&c():l()}return Ft(()=>{l(),n.value=!0}),We(()=>e.repeatNum,()=>{u(),l()}),_s(document,"keydown",d),{ns:t,typeClass:r,iconComponent:i,customStyle:a,visible:n,badgeType:s,close:c,clearTimer:u,startTimer:l}}}),q$e=["id"],Y$e=["innerHTML"];function X$e(e,t,n,s,o,r){const i=Ne("el-badge"),a=Ne("el-icon"),l=Ne("close");return _(),ye(Rs,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[2]||(t[2]=u=>e.$emit("destroy"))},{default:de(()=>[It(q("div",{id:e.id,class:W([e.ns.b(),{[e.ns.m(e.type)]:e.type&&!e.icon},e.ns.is("center",e.center),e.ns.is("closable",e.showClose),e.customClass]),style:it(e.customStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...u)=>e.clearTimer&&e.clearTimer(...u)),onMouseleave:t[1]||(t[1]=(...u)=>e.startTimer&&e.startTimer(...u))},[e.repeatNum>1?(_(),ye(i,{key:0,value:e.repeatNum,type:e.badgeType,class:W(e.ns.e("badge"))},null,8,["value","type","class"])):me("v-if",!0),e.iconComponent?(_(),ye(a,{key:1,class:W([e.ns.e("icon"),e.typeClass])},{default:de(()=>[(_(),ye(an(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),Pe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(_(),U(lt,{key:1},[me(" Caution here, message could've been compromised, never use user's input as message "),q("p",{class:W(e.ns.e("content")),innerHTML:e.message},null,10,Y$e)],2112)):(_(),U("p",{key:0,class:W(e.ns.e("content"))},He(e.message),3))]),e.showClose?(_(),ye(a,{key:2,class:W(e.ns.e("closeBtn")),onClick:wt(e.close,["stop"])},{default:de(()=>[fe(l)]),_:1},8,["class","onClick"])):me("v-if",!0)],46,q$e),[[cn,e.visible]])]),_:3},8,["name","onBeforeLeave"])}var Z$e=Ye(K$e,[["render",X$e],["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);const Cr=[];let J$e=1;const mf=function(e={},t){if(!sn)return{close:()=>{}};if(mn(ux.max)&&Cr.length>=ux.max)return{close:()=>{}};if(!Ts(e)&&rn(e)&&e.grouping&&!Ts(e.message)&&Cr.length){const d=Cr.find(f=>{var h,p,m;return`${(p=(h=f.vm.props)==null?void 0:h.message)!=null?p:""}`==`${(m=e.message)!=null?m:""}`});if(d)return d.vm.component.props.repeatNum+=1,d.vm.component.props.type=(e==null?void 0:e.type)||"info",{close:()=>c.component.proxy.visible=!1}}(Bt(e)||Ts(e))&&(e={message:e});let n=e.offset||20;Cr.forEach(({vm:d})=>{var f;n+=(((f=d.el)==null?void 0:f.offsetHeight)||0)+16}),n+=16;const{nextZIndex:s}=al(),o=`message_${J$e++}`,r=e.onClose,i=nt(Me({zIndex:s()},e),{offset:n,id:o,onClose:()=>{Q$e(o,r)}});let a=document.body;wc(e.appendTo)?a=e.appendTo:Bt(e.appendTo)&&(a=document.querySelector(e.appendTo)),wc(a)||(a=document.body);const l=document.createElement("div");l.className=`container_${o}`;const u=i.message,c=fe(Z$e,i,zt(u)?{default:u}:Ts(u)?{default:()=>u}:null);return c.appContext=t||mf._context,c.props.onDestroy=()=>{tf(null,l)},tf(c,l),Cr.push({vm:c}),a.appendChild(l.firstElementChild),{close:()=>c.component.proxy.visible=!1}};iz.forEach(e=>{mf[e]=(t={},n)=>((Bt(t)||Ts(t))&&(t={message:t}),mf(nt(Me({},t),{type:e}),n))});function Q$e(e,t){const n=Cr.findIndex(({vm:i})=>e===i.component.props.id);if(n===-1)return;const{vm:s}=Cr[n];if(!s)return;t==null||t(s);const o=s.el.offsetHeight;Cr.splice(n,1);const r=Cr.length;if(!(r<1))for(let i=n;i<r;i++){const a=Number.parseInt(Cr[i].vm.el.style.top,10)-o-16;Cr[i].vm.component.props.offset=a}}function eSe(){var e;for(let t=Cr.length-1;t>=0;t--){const n=Cr[t].vm.component;(e=n==null?void 0:n.proxy)==null||e.close()}}mf.closeAll=eSe;mf._context=null;const Tx=YF(mf,"$message"),tSe=xe({name:"ElMessageBox",directives:{TrapFocus:nL},components:Me({ElButton:ii,ElInput:yi,ElOverlay:tS,ElIcon:xt},yy),inheritAttrs:!1,props:{buttonSize:{type:String,validator:Pr},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{t:n}=Dn(),s=j(!1),{nextZIndex:o}=al(),r=vn({beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),i=O(()=>{const S=r.type;return S&&Ja[S]?`el-message-box-icon--${S}`:""}),a=Ls(O(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),l=O(()=>r.icon||Ja[r.type]||""),u=O(()=>!!r.message),c=j(),d=j(),f=j(),h=j(),p=O(()=>r.confirmButtonClass);We(()=>r.inputValue,async S=>{await vt(),e.boxType==="prompt"&&S!==null&&k()},{immediate:!0}),We(()=>s.value,S=>{S&&((e.boxType==="alert"||e.boxType==="confirm")&&vt().then(()=>{var T,A,R;(R=(A=(T=h.value)==null?void 0:T.$el)==null?void 0:A.focus)==null||R.call(A)}),r.zIndex=o()),e.boxType==="prompt"&&(S?vt().then(()=>{f.value&&f.value.$el&&x().focus()}):(r.editorErrorMessage="",r.validateError=!1))});const m=O(()=>e.draggable);m4(c,d,m),Ft(async()=>{await vt(),e.closeOnHashChange&&ts(window,"hashchange",g)}),qn(()=>{e.closeOnHashChange&&Ss(window,"hashchange",g)});function g(){!s.value||(s.value=!1,vt(()=>{r.action&&t("action",r.action)}))}const v=()=>{e.closeOnClickModal&&y(r.distinguishCancelAndClose?"close":"cancel")},b=O$(v),w=S=>{if(r.inputType!=="textarea")return S.preventDefault(),y("confirm")},y=S=>{var T;e.boxType==="prompt"&&S==="confirm"&&!k()||(r.action=S,r.beforeClose?(T=r.beforeClose)==null||T.call(r,S,r,g):g())},k=()=>{if(e.boxType==="prompt"){const S=r.inputPattern;if(S&&!S.test(r.inputValue||""))return r.editorErrorMessage=r.inputErrorMessage||n("el.messagebox.error"),r.validateError=!0,!1;const T=r.inputValidator;if(typeof T=="function"){const A=T(r.inputValue);if(A===!1)return r.editorErrorMessage=r.inputErrorMessage||n("el.messagebox.error"),r.validateError=!0,!1;if(typeof A=="string")return r.editorErrorMessage=A,r.validateError=!0,!1}}return r.editorErrorMessage="",r.validateError=!1,!0},x=()=>{const S=f.value.$refs;return S.input||S.textarea},C=()=>{y("close")};return e.closeOnPressEscape?v4({handleClose:C},s):Vie(s,"keydown",S=>S.code===ct.esc),e.lockScroll&&g4(s),b4(s),nt(Me({},oo(r)),{overlayEvent:b,visible:s,hasMessage:u,typeClass:i,btnSize:a,iconComponent:l,confirmButtonClasses:p,rootRef:c,headerRef:d,inputRef:f,confirmRef:h,doClose:g,handleClose:C,handleWrapperClick:v,handleInputEnter:w,handleAction:y,t:n})}}),nSe=["aria-label"],sSe={key:0,ref:"headerRef",class:"el-message-box__header"},oSe={class:"el-message-box__title"},rSe={class:"el-message-box__content"},iSe={class:"el-message-box__container"},aSe={key:1,class:"el-message-box__message"},lSe={key:0},uSe=["innerHTML"],cSe={class:"el-message-box__input"},dSe={class:"el-message-box__btns"};function fSe(e,t,n,s,o,r){const i=Ne("el-icon"),a=Ne("close"),l=Ne("el-input"),u=Ne("el-button"),c=Ne("el-overlay"),d=Or("trap-focus");return _(),ye(Rs,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=f=>e.$emit("vanish"))},{default:de(()=>[It(fe(c,{"z-index":e.zIndex,"overlay-class":["is-message-box",e.modalClass],mask:e.modal},{default:de(()=>[q("div",{class:"el-overlay-message-box",onClick:t[8]||(t[8]=(...f)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...f)),onMousedown:t[9]||(t[9]=(...f)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...f)),onMouseup:t[10]||(t[10]=(...f)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...f))},[It((_(),U("div",{ref:"rootRef",role:"dialog","aria-label":e.title||"dialog","aria-modal":"true",class:W(["el-message-box",e.customClass,{"el-message-box--center":e.center,"is-draggable":e.draggable}]),style:it(e.customStyle),onClick:t[7]||(t[7]=wt(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(_(),U("div",sSe,[q("div",oSe,[e.iconComponent&&e.center?(_(),ye(i,{key:0,class:W(["el-message-box__status",e.typeClass])},{default:de(()=>[(_(),ye(an(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),q("span",null,He(e.title),1)]),e.showClose?(_(),U("button",{key:0,type:"button",class:"el-message-box__headerbtn","aria-label":"Close",onClick:t[0]||(t[0]=f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=Qt(wt(f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[fe(i,{class:"el-message-box__close"},{default:de(()=>[fe(a)]),_:1})],32)):me("v-if",!0)],512)):me("v-if",!0),q("div",rSe,[q("div",iSe,[e.iconComponent&&!e.center&&e.hasMessage?(_(),ye(i,{key:0,class:W(["el-message-box__status",e.typeClass])},{default:de(()=>[(_(),ye(an(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),e.hasMessage?(_(),U("div",aSe,[Pe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(_(),U("p",{key:1,innerHTML:e.message},null,8,uSe)):(_(),U("p",lSe,He(e.message),1))])])):me("v-if",!0)]),It(q("div",cSe,[fe(l,{ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=f=>e.inputValue=f),type:e.inputType,placeholder:e.inputPlaceholder,class:W({invalid:e.validateError}),onKeydown:Qt(e.handleInputEnter,["enter"])},null,8,["modelValue","type","placeholder","class","onKeydown"]),q("div",{class:"el-message-box__errormsg",style:it({visibility:e.editorErrorMessage?"visible":"hidden"})},He(e.editorErrorMessage),5)],512),[[cn,e.showInput]])]),q("div",dSe,[e.showCancelButton?(_(),ye(u,{key:0,loading:e.cancelButtonLoading,class:W([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=f=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=Qt(wt(f=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:de(()=>[Yt(He(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):me("v-if",!0),It(fe(u,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:W([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=f=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=Qt(wt(f=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:de(()=>[Yt(He(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[cn,e.showConfirmButton]])])],14,nSe)),[[d]])],32)]),_:3},8,["z-index","overlay-class","mask"]),[[cn,e.visible]])]),_:3})}var hSe=Ye(tSe,[["render",fSe],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Wp=new Map,pSe=(e,t,n=null)=>{const s=at(hSe,e);return s.appContext=n,tf(s,t),document.body.appendChild(t.firstElementChild),s.component},mSe=()=>document.createElement("div"),gSe=(e,t)=>{const n=mSe();e.onVanish=()=>{tf(null,n),Wp.delete(o)},e.onAction=r=>{const i=Wp.get(o);let a;e.showInput?a={value:o.inputValue,action:r}:a=r,e.callback?e.callback(a,s.proxy):r==="cancel"||r==="close"?e.distinguishCancelAndClose&&r!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(a)};const s=pSe(e,n,t),o=s.proxy;for(const r in e)en(e,r)&&!en(o.$props,r)&&(o[r]=e[r]);return We(()=>o.message,(r,i)=>{Ts(r)?s.slots.default=()=>[r]:Ts(i)&&!Ts(r)&&delete s.slots.default},{immediate:!0}),o.visible=!0,o};function Gf(e,t=null){if(!sn)return Promise.reject();let n;return Bt(e)||Ts(e)?e={message:e}:n=e.callback,new Promise((s,o)=>{const r=gSe(e,t!=null?t:Gf._context);Wp.set(r,{options:e,callback:n,resolve:s,reject:o})})}const vSe=["alert","confirm","prompt"],bSe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};vSe.forEach(e=>{Gf[e]=ySe(e)});function ySe(e){return(t,n,s,o)=>{let r;return rn(n)?(s=n,r=""):Ir(n)?r="":r=n,Gf(Object.assign(Me({title:r,message:t,type:""},bSe[e]),s,{boxType:e}),o)}}Gf.close=()=>{Wp.forEach((e,t)=>{t.doClose()}),Wp.clear()};Gf._context=null;const El=Gf;El.install=e=>{El._context=e._context,e.config.globalProperties.$msgbox=El,e.config.globalProperties.$messageBox=El,e.config.globalProperties.$alert=El.alert,e.config.globalProperties.$confirm=El.confirm,e.config.globalProperties.$prompt=El.prompt};const az=El,lz=["success","info","warning","error"],wSe=pt({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Qe([String,Object]),default:""},id:{type:String,default:""},message:{type:Qe([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Qe(Function),default:()=>{}},onClose:{type:Qe(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...lz,""],default:""},zIndex:{type:Number,default:0}}),kSe={destroy:()=>!0},xSe=xe({name:"ElNotification",components:Me({ElIcon:xt},yy),props:wSe,emits:kSe,setup(e){const t=Xe("notification"),n=j(!1);let s;const o=O(()=>{const h=e.type;return h&&Ja[e.type]?t.m(h):""}),r=O(()=>Ja[e.type]||e.icon||""),i=O(()=>e.position.endsWith("right")?"right":"left"),a=O(()=>e.position.startsWith("top")?"top":"bottom"),l=O(()=>({[a.value]:`${e.offset}px`,zIndex:e.zIndex}));function u(){e.duration>0&&({stop:s}=yc(()=>{n.value&&d()},e.duration))}function c(){s==null||s()}function d(){n.value=!1}function f({code:h}){h===ct.delete||h===ct.backspace?c():h===ct.esc?n.value&&d():u()}return Ft(()=>{u(),n.value=!0}),_s(document,"keydown",f),{ns:t,horizontalClass:i,typeClass:o,iconComponent:r,positionStyle:l,visible:n,close:d,clearTimer:c,startTimer:u}}}),CSe=["id"],$Se=["textContent"],SSe={key:0},ISe=["innerHTML"];function ESe(e,t,n,s,o,r){const i=Ne("el-icon"),a=Ne("close");return _(),ye(Rs,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=l=>e.$emit("destroy"))},{default:de(()=>[It(q("div",{id:e.id,class:W([e.ns.b(),e.customClass,e.horizontalClass]),style:it(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...l)=>e.clearTimer&&e.clearTimer(...l)),onMouseleave:t[1]||(t[1]=(...l)=>e.startTimer&&e.startTimer(...l)),onClick:t[2]||(t[2]=(...l)=>e.onClick&&e.onClick(...l))},[e.iconComponent?(_(),ye(i,{key:0,class:W([e.ns.e("icon"),e.typeClass])},{default:de(()=>[(_(),ye(an(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),q("div",{class:W(e.ns.e("group"))},[q("h2",{class:W(e.ns.e("title")),textContent:He(e.title)},null,10,$Se),It(q("div",{class:W(e.ns.e("content")),style:it(e.title?void 0:{margin:0})},[Pe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(_(),U(lt,{key:1},[me(" Caution here, message could've been compromized, nerver use user's input as message "),me(" eslint-disable-next-line "),q("p",{innerHTML:e.message},null,8,ISe)],2112)):(_(),U("p",SSe,He(e.message),1))])],6),[[cn,e.message]]),e.showClose?(_(),ye(i,{key:0,class:W(e.ns.e("closeBtn")),onClick:wt(e.close,["stop"])},{default:de(()=>[fe(a)]),_:1},8,["class","onClick"])):me("v-if",!0)],2)],46,CSe),[[cn,e.visible]])]),_:3},8,["name","onBeforeLeave"])}var TSe=Ye(xSe,[["render",ESe],["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const fb={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},_x=16;let _Se=1;const gf=function(e={},t=null){if(!sn)return{close:()=>{}};(typeof e=="string"||Ts(e))&&(e={message:e});const n=e.position||"top-right";let s=e.offset||0;fb[n].forEach(({vm:d})=>{var f;s+=(((f=d.el)==null?void 0:f.offsetHeight)||0)+_x}),s+=_x;const{nextZIndex:o}=al(),r=`notification_${_Se++}`,i=e.onClose,a=nt(Me({zIndex:o(),offset:s},e),{id:r,onClose:()=>{NSe(r,n,i)}});let l=document.body;wc(e.appendTo)?l=e.appendTo:Bt(e.appendTo)&&(l=document.querySelector(e.appendTo)),wc(l)||(l=document.body);const u=document.createElement("div"),c=fe(TSe,a,Ts(a.message)?{default:()=>a.message}:null);return c.appContext=t!=null?t:gf._context,c.props.onDestroy=()=>{tf(null,u)},tf(c,u),fb[n].push({vm:c}),l.appendChild(u.firstElementChild),{close:()=>{c.component.proxy.visible=!1}}};lz.forEach(e=>{gf[e]=(t={})=>((typeof t=="string"||Ts(t))&&(t={message:t}),gf(nt(Me({},t),{type:e})))});function NSe(e,t,n){const s=fb[t],o=s.findIndex(({vm:u})=>{var c;return((c=u.component)==null?void 0:c.props.id)===e});if(o===-1)return;const{vm:r}=s[o];if(!r)return;n==null||n(r);const i=r.el.offsetHeight,a=t.split("-")[0];s.splice(o,1);const l=s.length;if(!(l<1))for(let u=o;u<l;u++){const{el:c,component:d}=s[u].vm,f=Number.parseInt(c.style[a],10)-i-_x;d.props.offset=f}}function ASe(){for(const e of Object.values(fb))e.forEach(({vm:t})=>{t.component.proxy.visible=!1})}gf.closeAll=ASe;gf._context=null;const DSe=YF(gf,"$notify");var RSe=[B$e,U$e,Tx,az,DSe,F1e],MSe=bae([...D$e,...RSe]);/**
  * vue-class-component v8.0.0-rc.1
  * (c) 2015-present Evan You
  * @license MIT
  */function bR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yR(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function OSe(e,t,n){return t&&yR(e.prototype,t),n&&yR(e,n),e}function PSe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function W2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wR(Object(n),!0).forEach(function(s){PSe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function FSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nx(e,t)}function hb(e){return hb=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},hb(e)}function Nx(e,t){return Nx=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},Nx(e,t)}function LSe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function BSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zSe(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:BSe(e)}function VSe(e){var t=LSe();return function(){var s=hb(e),o;if(t){var r=hb(this).constructor;o=Reflect.construct(s,arguments,r)}else o=s.apply(this,arguments);return zSe(this,o)}}function WSe(e){return HSe(e)||USe(e)||jSe(e)||GSe()}function HSe(e){if(Array.isArray(e))return Ax(e)}function USe(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function jSe(e,t){if(!!e){if(typeof e=="string")return Ax(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ax(e,t)}}function Ax(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function GSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A0(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!1,configurable:!0})}function KSe(e,t,n){Object.defineProperty(e,t,{get:function(){return n[t].value},set:function(o){n[t].value=o},enumerable:!0,configurable:!0})}function qSe(e){var t=Object.getPrototypeOf(e.prototype);if(!!t)return t.constructor}function D0(e,t){return e.hasOwnProperty(t)?e[t]:void 0}var uz=function(){function e(t,n){var s=this;bR(this,e),A0(this,"$props",function(){return t}),A0(this,"$attrs",function(){return n.attrs}),A0(this,"$slots",function(){return n.slots}),A0(this,"$emit",function(){return n.emit}),Object.keys(t).forEach(function(o){Object.defineProperty(s,o,{enumerable:!1,configurable:!0,writable:!0,value:t[o]})})}return OSe(e,null,[{key:"registerHooks",value:function(n){var s;(s=this.__h).push.apply(s,WSe(n))}},{key:"with",value:function(n){var s=new n,o={};Object.keys(s).forEach(function(i){var a=s[i];o[i]=a!=null?a:null});var r=function(i){FSe(l,i);var a=VSe(l);function l(){return bR(this,l),a.apply(this,arguments)}return l}(this);return r.__b={props:o},r}},{key:"__vccOpts",get:function(){if(this===iu)return{};var n=this,s=D0(n,"__c");if(s)return s;var o=W2({},D0(n,"__o"));n.__c=o;var r=qSe(n);r&&(o.extends=r.__vccOpts);var i=D0(n,"__b");i&&(o.mixins=o.mixins||[],o.mixins.unshift(i)),o.methods=W2({},o.methods),o.computed=W2({},o.computed);var a=n.prototype;Object.getOwnPropertyNames(a).forEach(function(c){if(c!=="constructor"){if(n.__h.indexOf(c)>-1){o[c]=a[c];return}var d=Object.getOwnPropertyDescriptor(a,c);if(typeof d.value=="function"){o.methods[c]=d.value;return}if(d.get||d.set){o.computed[c]={get:d.get,set:d.set};return}}}),o.setup=function(c,d){var f,h=new n(c,d),p=Object.keys(h),m={},g=null;return p.forEach(function(v){h[v]===void 0||h[v]&&h[v].__s||(m[v]=j(h[v]),KSe(h,v,m))}),p.forEach(function(v){if(h[v]&&h[v].__s){var b=h[v].__s();b instanceof Promise?(g||(g=Promise.resolve(m)),g=g.then(function(){return b.then(function(w){return m[v]=jv(w),m})})):m[v]=jv(b)}}),(f=g)!==null&&f!==void 0?f:m};var l=D0(n,"__d");l&&l.forEach(function(c){return c(o)});var u=["render","ssrRender","__file","__cssModules","__scopeId","__hmrId"];return u.forEach(function(c){n[c]&&(o[c]=n[c])}),o}}]),e}();uz.__h=["data","beforeCreate","created","beforeMount","mounted","beforeUnmount","unmounted","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];var iu=uz;function Kc(e){return function(t){return t.__o=e,t}}function YSe(e){return function(t,n,s){var o=typeof t=="function"?t:t.constructor;o.__d||(o.__d=[]),typeof s!="number"&&(s=void 0),o.__d.push(function(r){return e(r,n,s)})}}class cz{constructor(t){on(this,"el");on(this,"ctx");on(this,"w");on(this,"h");this.el=t,this.ctx=t.getContext("2d");const n=window.getComputedStyle(t);this.w=t.width=parseInt(n.width.replace("px","")),this.h=t.height=parseInt(n.height.replace("px",""))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XSe=1e-7,ZSe=1e-4;class dz{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class kS{refCount(t){return wr("refCount")}incRef(t){return wr("incRef")}timerAvailable(){return!0}time(t){return wr("time")}read(t){return wr("read")}readSync(t){return wr("readSync")}readToGPU(t,n){return wr("readToGPU")}numDataIds(){return wr("numDataIds")}disposeData(t,n){return wr("disposeData")}write(t,n,s){return wr("write")}move(t,n,s,o,r){return wr("move")}memory(){return wr("memory")}floatPrecision(){return wr("floatPrecision")}epsilon(){return this.floatPrecision()===32?XSe:ZSe}dispose(){return wr("dispose")}}function wr(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Ad(e,t,n)}function xc(e,t,n){return Math.max(e,Math.min(t,n))}function fz(e){return e%2===0?e:e+1}function Ad(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function QSe(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function oe(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function wi(e,t,n=""){oe(zn(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function hz(e){oe(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function vf(e,t=[],n=!1){if(t==null&&(t=[]),Array.isArray(e)||wa(e)&&!n)for(let s=0;s<e.length;++s)vf(e[s],t,n);else t.push(e);return t}function tt(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function zn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function bf(e){return e%1===0}function Dx(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Gd(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function kR(e,t=s=>0,n){return new Promise((s,o)=>{let r=0;const i=()=>{if(e()){s();return}r++;const a=t(r);if(n!=null&&r>=n){o();return}setTimeout(i,a)};i()})}function pz(e,t){let n=1,s=-1;for(let r=0;r<e.length;++r)if(e[r]>=0)n*=e[r];else if(e[r]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${r}`);s=r}else if(e[r]<0)throw Error(`Shapes can not be < 0. Found ${e[r]} at dim ${r}`);if(s===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const o=e.slice();return o[s]=t/n,o}function yn(e,t){const n=t.length;return e=e==null?t.map((s,o)=>o):[].concat(e),oe(e.every(s=>s>=-n&&s<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),oe(e.every(s=>bf(s)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(s=>s<0?n+s:s)}function au(e,t){const n=[],s=[],o=t!=null&&Array.isArray(t)&&t.length===0,r=t==null||o?null:yn(t,e).sort();let i=0;for(let a=0;a<e.length;++a){if(r!=null){if(r[i]===a&&e[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${e[a]}' is not 1`);(r[i]==null||r[i]>a)&&e[a]===1&&(n.push(e[a]),s.push(a)),r[i]<=a&&i++}e[a]!==1&&(n.push(e[a]),s.push(a))}return{newShape:n,keptDims:s}}function yo(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else throw new Error(`Unknown data type ${e}`);return n}function Xo(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function eIe(e,t){for(let n=0;n<e.length;n++){const s=e[n];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${t} being uploaded contains ${s}.`)}}function tIe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function mz(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function wa(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Rx(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function nIe(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function Sm(e){return typeof e=="string"||e instanceof String}function sIe(e){return typeof e=="boolean"}function Mx(e){return typeof e=="number"}function Im(e){return Array.isArray(e)?Im(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Mx(e)?"float32":Sm(e)?"string":sIe(e)?"bool":"float32"}function Ox(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Px(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Wt(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let s=t-3;s>=0;--s)n[s]=n[s+1]*e[s+1];return n}function gz(e,t,n,s=!1){const o=new Array;if(t.length===1){const r=t[0]*(s?2:1);for(let i=0;i<r;i++)o[i]=n[e+i]}else{const r=t[0],i=t.slice(1),a=i.reduce((l,u)=>l*u)*(s?2:1);for(let l=0;l<r;l++)o[l]=gz(e+l*a,i,n,s)}return o}function Bi(e,t,n=!1){if(e.length===0)return t[0];const s=e.reduce((o,r)=>o*r)*(n?2:1);if(s===0)return[];if(s!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return gz(0,e,t,n)}function xS(e,t){const n=Oo(e,t);for(let s=0;s<n.length;s++)n[s]=1;return n}function Oo(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function vz(e,t){const n=e.reduce((s,o)=>s*o,1);if(t==null||t==="float32")return Bi(e,new Float32Array(n));if(t==="int32")return Bi(e,new Int32Array(n));if(t==="bool")return Bi(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function bz(e){e.forEach(t=>{oe(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function ha(e,t,n){if(t===0)return 0;if(t===1)return e[0];let s=e[e.length-1];for(let o=0;o<e.length-1;++o)s+=n[o]*e[o];return s}function Em(e,t,n){if(t===0)return[];if(t===1)return[e];const s=new Array(t);for(let o=0;o<s.length-1;++o)s[o]=Math.floor(e/n[o]),e-=s[o]*n[o];return s[s.length-1]=e,s}function yz(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xR="tfjsflags";class oIe{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=rIe,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(et().getBool("IS_TEST")||et().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,s){if(this.flagRegistry[t]={evaluationFn:n,setHook:s},this.urlFlags[t]!=null){const o=this.urlFlags[t];et().getBool("IS_TEST")||et().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(yz(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global=="undefined"||typeof this.global.location=="undefined"||typeof this.global.location.search=="undefined")return;const t=this.getQueryParams(this.global.location.search);xR in t&&t[xR].split(",").forEach(s=>{const[o,r]=s.split(":");this.urlFlags[o]=aIe(o,r)})}}function rIe(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...s)=>(iIe(t,s[0],s[1]),s.join("="))),t}function iIe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function aIe(e,t){if(t=t.toLowerCase(),t==="true"||t==="false")return t==="true";if(`${+t}`===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}function et(){return wz}let wz=null;function lIe(e){wz=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let H2;function kz(){if(H2==null){let e;if(typeof window!="undefined")e=window;else if(typeof global!="undefined")e=global;else if(typeof process!="undefined")e=process;else if(typeof self!="undefined")e=self;else throw new Error("Could not find a global object");H2=e}return H2}function uIe(){const e=kz();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function CS(e,t){const n=uIe();if(n.has(e))return n.get(e);{const s=t();return n.set(e,s),n.get(e)}}const Ay="Abs",Tm="Acos",_m="Acosh",Kf="Add",$S="AddN",SS="All",IS="Any",Dy="ArgMax",Ry="ArgMin",Nm="Asin",Am="Asinh",Dm="Atan",Rm="Atanh",Mm="Atan2",My="AvgPool",ES="AvgPoolGrad",Oy="AvgPool3D",TS="AvgPool3DGrad",Py="BatchMatMul",Fy="BatchToSpaceND",_S="Bincount",cIe="BroadcastTo",xz="BroadcastArgs",Om="Cast",Pm="Ceil",Fm="ClipByValue",NS="Complex",Ly="ComplexAbs",By="Concat",zy="Conv2D",AS="Conv2DBackpropFilter",Vy="Conv2DBackpropInput",Wy="Conv3D",DS="Conv3DBackpropFilterV2",RS="Conv3DBackpropInputV2",Lm="Cos",Bm="Cosh",MS="Cumprod",Hy="Cumsum",OS="CropAndResize",Cz="DenseBincount",PS="DepthToSpace",Uy="DepthwiseConv2dNative",FS="DepthwiseConv2dNativeBackpropFilter",LS="DepthwiseConv2dNativeBackpropInput",$z="Diag",jy="Dilation2D",Fx="Dilation2DBackpropInput",Lx="Dilation2DBackpropFilter",zm="RealDiv",Sz="Einsum",Vm="Elu",BS="EluGrad",Wm="Erf",Gy="Equal",Hm="Exp",Ky="ExpandDims",Um="Expm1",zS="FFT",VS="Fill",WS="FlipLeftRight",jm="Floor",Gm="FloorDiv",qy="FusedBatchNorm",Yy="GatherV2",Iz="GatherNd",Xy="Greater",Km="GreaterEqual",qm="Identity",HS="IFFT",US="Imag",Ym="IsFinite",Xm="IsInf",Zm="IsNan",Zy="LeakyRelu",Jy="Less",Qy="LessEqual",jS="LinSpace",Jm="Log",Qm="Log1p",e1="LogicalAnd",t1="LogicalNot",n1="LogicalOr",dIe="LogSoftmax",s1="LRN",GS="LRNGrad",o1="Max",eg="Maximum",r1="MaxPool",KS="MaxPoolGrad",i1="MaxPool3D",qS="MaxPool3DGrad",Ez="MaxPoolWithArgmax",a1="Mean",l1="Min",tg="Minimum",u1="MirrorPad",ng="Mod",Tz="Multinomial",sg="Multiply",c1="Neg",d1="NotEqual",YS="NonMaxSuppressionV3",XS="NonMaxSuppressionV4",ZS="NonMaxSuppressionV5",f1="OnesLike",h1="OneHot",p1="Pack",m1="PadV2",og="Pow",g1="Prelu",JS="Prod",QS="Range",eI="Real",rg="Reciprocal",ig="Relu",v1="Reshape",b1="ResizeNearestNeighbor",tI="ResizeNearestNeighborGrad",y1="ResizeBilinear",nI="ResizeBilinearGrad",ag="Relu6",w1="Reverse",lg="Round",ug="Rsqrt",_z="ScatterNd",k1="Select",cg="Selu",x1="Slice",dg="Sin",fg="Sinh",hg="Sign",pg="Sigmoid",mg="Softplus",gg="Sqrt",C1="Sum",$1="SpaceToBatchND",S1="SplitV",I1="Softmax",sI="SparseFillEmptyRows",oI="SparseReshape",rI="SparseSegmentMean",iI="SparseSegmentSum",Nz="SparseToDense",vg="SquaredDifference",aI="Square",lI="StridedSlice",uI="StringNGrams",cI="StringSplit",dI="StringToHashBucketFast",bg="Sub",yg="Tan",wg="Tanh",kg="Tile",fI="TopK",hI="Transform",E1="Transpose",pI="Unique",T1="Unpack",_1="UnsortedSegmentSum",N1="ZerosLike",xg="Step",fIe="FromPixels",mI="RotateWithOffset",pb="_FusedMatMul",mb="FusedConv2D",Az="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Er(...e){et().getBool("IS_TEST")||et().getBool("PROD")||console.warn(...e)}function hIe(...e){et().getBool("IS_TEST")||et().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gb=CS("kernelRegistry",()=>new Map),Bx=CS("gradRegistry",()=>new Map);function CR(e,t){const n=Rz(e,t);return gb.get(n)}function $R(e){return Bx.get(e)}function SR(e){const t=gb.entries(),n=[];for(;;){const{done:s,value:o}=t.next();if(s)break;const[r,i]=o,[a]=r.split("_");a===e&&n.push(i)}return n}function Dz(e){const{kernelName:t,backendName:n}=e,s=Rz(t,n);gb.has(s)&&Er(`The kernel '${t}' for backend '${n}' is already registered`),gb.set(s,e)}function pIe(e){const{kernelName:t}=e;Bx.has(t)&&et().getBool("DEBUG")&&Er(`Overriding the gradient for '${t}'`),Bx.set(t,e)}function Rz(e,t){return`${t}_${e}`}var zx=bs,Jr=null;try{Jr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function bs(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}bs.prototype.__isLong__;Object.defineProperty(bs.prototype,"__isLong__",{value:!0});function br(e){return(e&&e.__isLong__)===!0}bs.isLong=br;var IR={},ER={};function qc(e,t){var n,s,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(s=ER[e],s)?s:(n=ys(e,(e|0)<0?-1:0,!0),o&&(ER[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(s=IR[e],s)?s:(n=ys(e,e<0?-1:0,!1),o&&(IR[e]=n),n))}bs.fromInt=qc;function Qr(e,t){if(isNaN(e))return t?Qu:ei;if(t){if(e<0)return Qu;if(e>=Mz)return Fz}else{if(e<=-_R)return lr;if(e+1>=_R)return Pz}return e<0?Qr(-e,t).neg():ys(e%yf|0,e/yf|0,t)}bs.fromNumber=Qr;function ys(e,t,n){return new bs(e,t,n)}bs.fromBits=ys;var vb=Math.pow;function gI(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return ei;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var s;if((s=e.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return gI(e.substring(1),t,n).neg();for(var o=Qr(vb(n,8)),r=ei,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),l=parseInt(e.substring(i,i+a),n);if(a<8){var u=Qr(vb(n,a));r=r.mul(u).add(Qr(l))}else r=r.mul(o),r=r.add(Qr(l))}return r.unsigned=t,r}bs.fromString=gI;function Zi(e,t){return typeof e=="number"?Qr(e,t):typeof e=="string"?gI(e,t):ys(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}bs.fromValue=Zi;var TR=1<<16,mIe=1<<24,yf=TR*TR,Mz=yf*yf,_R=Mz/2,NR=qc(mIe),ei=qc(0);bs.ZERO=ei;var Qu=qc(0,!0);bs.UZERO=Qu;var Ld=qc(1);bs.ONE=Ld;var Oz=qc(1,!0);bs.UONE=Oz;var Vx=qc(-1);bs.NEG_ONE=Vx;var Pz=ys(-1,2147483647,!1);bs.MAX_VALUE=Pz;var Fz=ys(-1,-1,!0);bs.MAX_UNSIGNED_VALUE=Fz;var lr=ys(0,-2147483648,!1);bs.MIN_VALUE=lr;var yt=bs.prototype;yt.toInt=function(){return this.unsigned?this.low>>>0:this.low};yt.toNumber=function(){return this.unsigned?(this.high>>>0)*yf+(this.low>>>0):this.high*yf+(this.low>>>0)};yt.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(lr)){var n=Qr(t),s=this.div(n),o=s.mul(n).sub(this);return s.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var r=Qr(vb(t,6),this.unsigned),i=this,a="";;){var l=i.div(r),u=i.sub(l.mul(r)).toInt()>>>0,c=u.toString(t);if(i=l,i.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};yt.getHighBits=function(){return this.high};yt.getHighBitsUnsigned=function(){return this.high>>>0};yt.getLowBits=function(){return this.low};yt.getLowBitsUnsigned=function(){return this.low>>>0};yt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(lr)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&(t&1<<n)==0;n--);return this.high!=0?n+33:n+1};yt.isZero=function(){return this.high===0&&this.low===0};yt.eqz=yt.isZero;yt.isNegative=function(){return!this.unsigned&&this.high<0};yt.isPositive=function(){return this.unsigned||this.high>=0};yt.isOdd=function(){return(this.low&1)===1};yt.isEven=function(){return(this.low&1)===0};yt.equals=function(t){return br(t)||(t=Zi(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};yt.eq=yt.equals;yt.notEquals=function(t){return!this.eq(t)};yt.neq=yt.notEquals;yt.ne=yt.notEquals;yt.lessThan=function(t){return this.comp(t)<0};yt.lt=yt.lessThan;yt.lessThanOrEqual=function(t){return this.comp(t)<=0};yt.lte=yt.lessThanOrEqual;yt.le=yt.lessThanOrEqual;yt.greaterThan=function(t){return this.comp(t)>0};yt.gt=yt.greaterThan;yt.greaterThanOrEqual=function(t){return this.comp(t)>=0};yt.gte=yt.greaterThanOrEqual;yt.ge=yt.greaterThanOrEqual;yt.compare=function(t){if(br(t)||(t=Zi(t)),this.eq(t))return 0;var n=this.isNegative(),s=t.isNegative();return n&&!s?-1:!n&&s?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};yt.comp=yt.compare;yt.negate=function(){return!this.unsigned&&this.eq(lr)?lr:this.not().add(Ld)};yt.neg=yt.negate;yt.add=function(t){br(t)||(t=Zi(t));var n=this.high>>>16,s=this.high&65535,o=this.low>>>16,r=this.low&65535,i=t.high>>>16,a=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,f=0,h=0;return h+=r+u,f+=h>>>16,h&=65535,f+=o+l,d+=f>>>16,f&=65535,d+=s+a,c+=d>>>16,d&=65535,c+=n+i,c&=65535,ys(f<<16|h,c<<16|d,this.unsigned)};yt.subtract=function(t){return br(t)||(t=Zi(t)),this.add(t.neg())};yt.sub=yt.subtract;yt.multiply=function(t){if(this.isZero())return ei;if(br(t)||(t=Zi(t)),Jr){var n=Jr.mul(this.low,this.high,t.low,t.high);return ys(n,Jr.get_high(),this.unsigned)}if(t.isZero())return ei;if(this.eq(lr))return t.isOdd()?lr:ei;if(t.eq(lr))return this.isOdd()?lr:ei;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(NR)&&t.lt(NR))return Qr(this.toNumber()*t.toNumber(),this.unsigned);var s=this.high>>>16,o=this.high&65535,r=this.low>>>16,i=this.low&65535,a=t.high>>>16,l=t.high&65535,u=t.low>>>16,c=t.low&65535,d=0,f=0,h=0,p=0;return p+=i*c,h+=p>>>16,p&=65535,h+=r*c,f+=h>>>16,h&=65535,h+=i*u,f+=h>>>16,h&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=r*u,d+=f>>>16,f&=65535,f+=i*l,d+=f>>>16,f&=65535,d+=s*c+o*u+r*l+i*a,d&=65535,ys(h<<16|p,d<<16|f,this.unsigned)};yt.mul=yt.multiply;yt.divide=function(t){if(br(t)||(t=Zi(t)),t.isZero())throw Error("division by zero");if(Jr){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?Jr.div_u:Jr.div_s)(this.low,this.high,t.low,t.high);return ys(n,Jr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Qu:ei;var s,o,r;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Qu;if(t.gt(this.shru(1)))return Oz;r=Qu}else{if(this.eq(lr)){if(t.eq(Ld)||t.eq(Vx))return lr;if(t.eq(lr))return Ld;var i=this.shr(1);return s=i.div(t).shl(1),s.eq(ei)?t.isNegative()?Ld:Vx:(o=this.sub(t.mul(s)),r=s.add(o.div(t)),r)}else if(t.eq(lr))return this.unsigned?Qu:ei;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=ei}for(o=this;o.gte(t);){s=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(s)/Math.LN2),l=a<=48?1:vb(2,a-48),u=Qr(s),c=u.mul(t);c.isNegative()||c.gt(o);)s-=l,u=Qr(s,this.unsigned),c=u.mul(t);u.isZero()&&(u=Ld),r=r.add(u),o=o.sub(c)}return r};yt.div=yt.divide;yt.modulo=function(t){if(br(t)||(t=Zi(t)),Jr){var n=(this.unsigned?Jr.rem_u:Jr.rem_s)(this.low,this.high,t.low,t.high);return ys(n,Jr.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};yt.mod=yt.modulo;yt.rem=yt.modulo;yt.not=function(){return ys(~this.low,~this.high,this.unsigned)};yt.and=function(t){return br(t)||(t=Zi(t)),ys(this.low&t.low,this.high&t.high,this.unsigned)};yt.or=function(t){return br(t)||(t=Zi(t)),ys(this.low|t.low,this.high|t.high,this.unsigned)};yt.xor=function(t){return br(t)||(t=Zi(t)),ys(this.low^t.low,this.high^t.high,this.unsigned)};yt.shiftLeft=function(t){return br(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ys(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ys(0,this.low<<t-32,this.unsigned)};yt.shl=yt.shiftLeft;yt.shiftRight=function(t){return br(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ys(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ys(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};yt.shr=yt.shiftRight;yt.shiftRightUnsigned=function(t){if(br(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var s=this.low;return ys(s>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?ys(n,0,this.unsigned):ys(n>>>t-32,0,this.unsigned)};yt.shru=yt.shiftRightUnsigned;yt.shr_u=yt.shiftRightUnsigned;yt.toSigned=function(){return this.unsigned?ys(this.low,this.high,!1):this};yt.toUnsigned=function(){return this.unsigned?this:ys(this.low,this.high,!0)};yt.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};yt.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};yt.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};bs.fromBytes=function(t,n,s){return s?bs.fromBytesLE(t,n):bs.fromBytesBE(t,n)};bs.fromBytesLE=function(t,n){return new bs(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};bs.fromBytesBE=function(t,n){return new bs(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var gIe=uK({__proto__:null,default:zx},[zx]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ju=zx||gIe;function A1(e){return ju.fromString(e,!0,16)}const Lz=A1("c3a5c85c97cb3127"),zu=A1("b492b66fbe98f273"),zo=A1("9ae16a3b2f90404f");function Wx(e){return e.xor(e.shru(47))}function Bz(e,t,n){const s=e.slice(t,t+n);return ju.fromBytes(Array.from(s),!0,!0)}function is(e,t){return Bz(e,t,8)}function AR(e,t){return Bz(e,t,4)}function to(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function Wl(e,t,n=A1("9ddfea08eb382d69")){let s=e.xor(t).mul(n);s=s.xor(s.shru(47));let o=t.xor(s).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function vIe(e,t,n,s,o,r){o=o.add(e),r=to(r.add(o).add(s),21);const i=o;return o=o.add(t),o=o.add(n),r=r.add(to(o,44)),[o.add(s),r.add(i)]}function R0(e,t,n,s){return vIe(is(e,t),is(e,t+8),is(e,t+16),is(e,t+24),n,s)}function bIe(e,t=e.length){if(t>=8){const n=zo.add(t*2),s=is(e,0).add(zo),o=is(e,t-8),r=to(o,37).mul(n).add(s),i=to(s,25).add(o).mul(n);return Wl(r,i,n)}if(t>=4){const n=zo.add(t*2),s=AR(e,0);return Wl(s.shl(3).add(t),AR(e,t-4),n)}if(t>0){const n=e[0],s=e[t>>1],o=e[t-1],r=n+(s<<8),i=t+(o<<2);return Wx(zo.mul(r).xor(Lz.mul(i))).mul(zo)}return zo}function yIe(e,t=e.length){const n=zo.add(t*2),s=is(e,0).mul(zu),o=is(e,8),r=is(e,t-8).mul(n),i=is(e,t-16).mul(zo);return Wl(to(s.add(o),43).add(to(r,30)).add(i),s.add(to(o.add(zo),18)).add(r),n)}function wIe(e,t=e.length){const n=zo.add(t*2),s=is(e,0).mul(zo),o=is(e,8),r=is(e,t-8).mul(n),i=is(e,t-16).mul(zo),a=to(s.add(o),43).add(to(r,30)).add(i),l=Wl(a,s.add(to(o.add(zo),18)).add(r),n),u=is(e,16).mul(n),c=is(e,24),d=a.add(is(e,t-32)).mul(n),f=l.add(is(e,t-24)).mul(n);return Wl(to(u.add(c),43).add(to(d,30)).add(f),u.add(to(c.add(s),18)).add(d),n)}function kIe(e,t=e.length){const n=ju.fromNumber(81,!0);if(t<=32)return t<=16?bIe(e,t):yIe(e,t);if(t<=64)return wIe(e,t);let s=n,o=n.mul(zu).add(113),r=Wx(o.mul(zo).add(113)).mul(zo),i=[ju.UZERO,ju.UZERO],a=[ju.UZERO,ju.UZERO];s=s.mul(zo).add(is(e,0));let l=0;const u=(t-1>>6)*64,c=u+(t-1&63)-63;do s=to(s.add(o).add(i[0]).add(is(e,l+8)),37).mul(zu),o=to(o.add(i[1]).add(is(e,l+48)),42).mul(zu),s=s.xor(a[1]),o=o.add(i[0]).add(is(e,l+40)),r=to(r.add(a[0]),33).mul(zu),i=R0(e,l,i[1].mul(zu),s.add(a[0])),a=R0(e,l+32,r.add(a[1]),o.add(is(e,l+16))),[r,s]=[s,r],l+=64;while(l!==u);const d=zu.add(r.and(255).shl(1));return l=c,a[0]=a[0].add(t-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),s=to(s.add(o).add(i[0]).add(is(e,l+8)),37).mul(d),o=to(o.add(i[1]).add(is(e,l+48)),42).mul(d),s=s.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(is(e,l+40))),r=to(r.add(a[0]),33).mul(d),i=R0(e,l,i[1].mul(d),s.add(a[0])),a=R0(e,l+32,r.add(a[1]),o.add(is(e,l+16))),[r,s]=[s,r],Wl(Wl(i[0],a[0],d).add(Wx(o).mul(Lz)).add(r),Wl(i[1],a[1],d).add(s),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lu(e,t){return t==="string"?Hl(e):Yc([e],t)}function xIe(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function Yc(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=vf(e)),et().getBool("DEBUG")&&eIe(e,t),xIe(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let s=0;s<n.length;++s)Math.round(e[s])!==0&&(n[s]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Ko(){return et().platform.now()}function Hl(e,t="utf-8"){return t=t||"utf-8",et().platform.encode(e,t)}function wf(e,t="utf-8"){return t=t||"utf-8",et().platform.decode(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CIe{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new SIe)}profileKernel(t,n,s){let o;const r=()=>{o=s()};let i;const a=Ko();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(r);else{r();for(const u of o)u.dataSync();i=Promise.resolve({kernelMs:Ko()-a})}if(et().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<o.length;u++){const c=o[u];c.data().then(d=>{$Ie(d,c.dtype,t)})}return{kernelName:t,outputs:o,inputs:n,timeMs:i.then(u=>u.kernelMs),extraInfo:i.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:s,timeMs:o,inputs:r,extraInfo:i}=t;s.forEach(a=>{Promise.all([a.data(),o,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],r,l[2])})})}}function $Ie(e,t,n){if(t!=="float32")return!1;for(let s=0;s<e.length;s++){const o=e[s];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class SIe{logKernelProfile(t,n,s,o,r,i){const a=typeof o=="number"?Gd(`${o}ms`,9):o.error,l=Gd(t,25),u=n.rank,c=n.size,d=Gd(n.shape.toString(),14);let f="";for(const h in r){const p=r[h];if(p!=null){const m=p.shape||n.shape,g=m.length;f+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${c}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(e,t,n){const s={},o={};for(let l=0;l<t.length;l++)s[t[l].id]=!0;for(let l=0;l<e.length;l++){const u=e[l],c=u.inputs;for(const d in c){const f=c[d];let h=!1;for(let p=0;p<t.length;p++)if(s[f.id]){u.outputs.forEach(m=>s[m.id]=!0),h=!0,o[u.id]=!0;break}if(h)break}}const r={};r[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const u=e[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(r[u.outputs[d].id]){for(const f in c)r[c[f].id]=!0,i[u.id]=!0;break}}const a=[];for(let l=0;l<e.length;l++){const u=e[l];if(o[u.id]&&i[u.id]){const c={};for(const f in u.inputs){const h=u.inputs[f];s[h.id]&&(c[f]=h)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,a.push(d)}}return a}function EIe(e,t,n,s){for(let o=t.length-1;o>=0;o--){const r=t[o],i=[];if(r.outputs.forEach(l=>{const u=e[l.id];u!=null?i.push(u):i.push(null)}),r.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(i);for(const l in r.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=r.inputs[l];if(!zn(u.shape,c.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=u;else{const d=e[c.id];e[c.id]=s(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DR=20,$h=3,U2=7;function TIe(e,t,n,s){const o=Wt(t),r=_Ie(e,t,n,o),i=t.length,a=Lv(e,t,n,o,r),l=["Tensor"];return s&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function _Ie(e,t,n,s){const o=tt(t),r=s[s.length-1],i=new Array(r).fill(0),a=t.length,l=n==="complex64"?Wh(e):e;if(a>1)for(let u=0;u<o/r;u++){const c=u*r;for(let d=0;d<r;d++)i[d]=Math.max(i[d],Vh(l[c+d],0,n).length)}return i}function Vh(e,t,n){let s;return Array.isArray(e)?s=`${parseFloat(e[0].toFixed(U2))} + ${parseFloat(e[1].toFixed(U2))}j`:Sm(e)?s=`'${e}'`:n==="bool"?s=zz(e):s=parseFloat(e.toFixed(U2)).toString(),Gd(s,t)}function zz(e){return e===0?"false":"true"}function Lv(e,t,n,s,o,r=!0){const i=n==="complex64"?2:1,a=t[0],l=t.length;if(l===0){if(n==="complex64"){const m=Wh(e);return[Vh(m[0],0,n)]}return n==="bool"?[zz(e[0])]:[e[0].toString()]}if(l===1){if(a>DR){const g=$h*i;let v=Array.from(e.slice(0,g)),b=Array.from(e.slice((a-$h)*i,a*i));return n==="complex64"&&(v=Wh(v),b=Wh(b)),["["+v.map((w,y)=>Vh(w,o[y],n)).join(", ")+", ..., "+b.map((w,y)=>Vh(w,o[a-$h+y],n)).join(", ")+"]"]}const m=n==="complex64"?Wh(e):Array.from(e);return["["+m.map((g,v)=>Vh(g,o[v],n)).join(", ")+"]"]}const u=t.slice(1),c=s.slice(1),d=s[0]*i,f=[];if(a>DR){for(let m=0;m<$h;m++){const g=m*d,v=g+d;f.push(...Lv(e.slice(g,v),u,n,c,o,!1))}f.push("...");for(let m=a-$h;m<a;m++){const g=m*d,v=g+d;f.push(...Lv(e.slice(g,v),u,n,c,o,m===a-1))}}else for(let m=0;m<a;m++){const g=m*d,v=g+d;f.push(...Lv(e.slice(g,v),u,n,c,o,m===a-1))}const h=l===2?",":"";f[0]="["+f[0]+h;for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(r?"":p),f}function Wh(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Do{constructor(t,n,s){if(this.dtype=n,this.shape=t.slice(),this.size=tt(t),s!=null){const o=s.length;oe(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||Xo(n,this.size),this.strides=Wt(t)}set(t,...n){n.length===0&&(n=[0]),oe(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const s=this.locToIndex(n);this.values[s]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const o of t){if(o<0||o>=this.shape[n]){const r=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(r)}n++}let s=t[t.length-1];for(let o=0;o<t.length-1;++o)s+=this.strides[o]*t[o];return this.values[s]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let s=0;s<t.length-1;++s)n+=this.strides[s]*t[s];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let s=0;s<n.length-1;++s)n[s]=Math.floor(t/this.strides[s]),t-=n[s]*this.strides[s];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return Ri().makeTensor(this.values,this.shape,this.dtype)}}let Ri=null,Dd=null;function NIe(e){Ri=e}function AIe(e){Dd=e}class Ws{constructor(t,n,s,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=tt(t),this.strides=Wt(t),this.dataId=s,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return Dd.buffer(this.shape,this.dtype,t)}bufferSync(){return Dd.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Bi(this.shape,t,this.dtype==="complex64")}arraySync(){return Bi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=Ri().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(s=>wf(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),Ri().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=Ri().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>wf(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Ri().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(Ri().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Dd.print(this,t)}clone(){return this.throwIfDisposed(),Dd.clone(this)}toString(t=!1){const n=this.dataSync();return TIe(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Dd.cast(this,t)}variable(t=!0,n,s){return this.throwIfDisposed(),Ri().makeVariable(this,t,n,s)}}Object.defineProperty(Ws,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function Ze(){return CS("Tensor",()=>Ws)}Ze();class bb extends Ws{constructor(t,n,s,o){super(t.shape,t.dtype,t.dataId,o),this.trainable=n,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!zn(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Ri().disposeTensor(this),this.dataId=t.dataId,Ri().incRef(this,null)}dispose(){Ri().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(bb,Symbol.hasInstance,{value:e=>e instanceof Ws&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var RR;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(RR||(RR={}));var Hx;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Hx||(Hx={}));var Ux;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Ux||(Ux={}));var jx;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(jx||(jx={}));var Gx;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(Gx||(Gx={}));const DIe={float32:jx,int32:Hx,bool:Ux,complex64:Gx};function pr(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return DIe[e][t]}function vI(e){return pr(e,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bs(e,t){if(e.dtype===t.dtype)return[e,t];const n=pr(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Vz(e){const t=[];return Wz(e,t,new Set),t}function Wz(e,t,n){if(e==null)return;if(e instanceof Ws){t.push(e);return}if(!RIe(e))return;const s=e;for(const o in s){const r=s[o];n.has(r)||(n.add(r),Wz(r,t,n))}}function RIe(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2(e){return e.kernelName!=null}class MR{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class kf{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new MR}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const s=t[n];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,s=1){return t in this.registryFactory?(Er(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:s},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:s}=this.initializeBackend(t);if(!(s?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new CIe(this.backendInstance),!0}setupRegisteredKernels(){SR(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){SR(t).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const s=n.factory();if(s&&!(s instanceof kS)&&typeof s.then=="function"){const o=++this.pendingBackendInitId,r=s.then(i=>o<this.pendingBackendInitId?!1:(this.registry[t]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,Er(`Initialization of backend ${t} failed`),Er(i.stack||i.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(s){return Er(`Initialization of backend ${t} failed`),Er(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const s=t[n],{success:o,asyncInit:r}=this.initializeBackend(s);if(r||o)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const s=this.state.tensorInfo.get(n),o=s.backend,r=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),s.backend=t,t.move(n,r,s.shape,s.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let s=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=t}let o;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(t,n,s){t();try{const o=s();return n(),o}catch(o){throw n(),o}}nextTensorId(){return kf.nextTensorId++}nextVariableId(){return kf.nextVariableId++}clone(t){const n=De.runKernel(qm,{x:t}),s={x:t},o=i=>({x:()=>{const a="float32",l={x:i},u={dtype:a};return De.runKernel(Om,l,u)}}),r=[];return this.addTapeNode(this.state.activeScope.name,s,[n],o,r,{}),n}runKernel(t,n,s){if(this.backendName==null&&this.backend,!(CR(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,s){const o=this.backend.numDataIds();let r=0;s.forEach(l=>{r+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-r-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${t}'`)}runKernelFunc(t){let n,s=[];const o=this.isTapeOn(),r=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=j2(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(j2(t)){const{kernelName:p,inputs:m,attrs:g}=t;this.backendName==null&&this.backend;const v=CR(p,this.backendName);oe(v!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();l=v.kernelFunc({inputs:m,attrs:g,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,w);const y=w.map(k=>{if(k.rank!=null)return k;const{dataId:x,shape:C,dtype:S}=k;return this.makeTensorFromDataId(x,C,S)});if(o){const k=this.getTensorsForGradient(p,m,y);s=this.saveTensorsForBackwardMode(k)}return y}}else{const{forwardFunc:p}=t,m=g=>{!o||(s=g.map(v=>this.keep(this.clone(v))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,v),v}}const{inputs:c,attrs:d}=t,f=j2(t)?null:t.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),o&&this.addTapeNode(u,c,n,f,s,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(t,n,s){const o=$R(t);if(o!=null){const r=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?(oe(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=r.map(u=>n[u]);const l=s.filter((u,c)=>i[c]);return a.concat(l)}return[]}makeTensor(t,n,s,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",o=o||this.backend;let r=t;s==="string"&&Sm(t[0])&&(r=t.map(l=>Hl(l)));const i=o.write(r,n,s),a=new Ws(n,s,i,this.nextTensorId());if(this.trackTensor(a,o),s==="string"){const l=this.state.tensorInfo.get(i),u=nIe(r);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(t,n,s,o){s=s||"float32";const r=new Ws(n,s,t,this.nextTensorId());return this.trackTensor(r,o),r}makeVariable(t,n=!0,s,o){s=s||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.cast(o));const r=new bb(t,n,s,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*Rx(t.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:s})),t instanceof bb||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const s=t.size*Rx(t.dtype);this.state.numBytes-=s}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,s,o,r,i){const a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:s,saved:r},l=$R(t);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=u=>(u=u.map((c,d)=>{if(c==null){const f=s[d],h=Oo(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],r,i))),this.state.activeTape.push(a)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=Vz(t),s=new Set(n.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const i=this.state.activeScope.track[r];!i.kept&&!s.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(r=>{!r.kept&&r.scopeId===o.id&&this.track(r)})}gradients(t,n,s,o=!1){if(oe(n.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));oe(r instanceof Ws,()=>"The result y returned by f() must be a tensor.");const i=IIe(this.state.activeTape,n,r);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[r.id]=s==null?MIe(r.shape):s,EIe(a,i,u=>this.tidy(u),OIe);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:r,grads:l}})}customGrad(t){return oe(Ox(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{oe(n.every(a=>a instanceof Ws),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const o={};n.forEach((a,l)=>{o[l]=a});const r=(a,l)=>(s=t(...n,l),oe(s.value instanceof Ws,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),oe(Ox(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),i=(a,l)=>{const u=s.gradFunc(a,l),c=Array.isArray(u)?u:[u];oe(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),oe(c.every(f=>f instanceof Ws),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:r,backwardsFunc:i,inputs:o})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=Ko(),s=await this.backend.time(t);return s.wallMs=Ko()-n,s}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new MR;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}kf.nextTensorId=0;kf.nextVariableId=0;function MIe(e){const t=xS(tt(e),"float32");return De.makeTensor(t,e,"float32")}function Hz(){const e=kz();if(e._tfengine==null){const t=new oIe(e);e._tfengine=new kf(t)}return lIe(e._tfengine.ENV),NIe(()=>e._tfengine),e._tfengine}const De=Hz();function OIe(e,t){const n={a:e,b:t};return De.runKernel(Kf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(){return typeof navigator!="undefined"&&navigator!=null}function Uz(e){if(e||PIe()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window!="undefined"?window.opera:"");if(!t){const n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function jz(){return typeof window!="undefined"&&window.document!=null||typeof WorkerGlobalScope!="undefined"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pi=et();pi.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});pi.registerFlag("IS_BROWSER",()=>jz());pi.registerFlag("IS_NODE",()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined");pi.registerFlag("IS_CHROME",()=>typeof navigator!="undefined"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));pi.registerFlag("PROD",()=>!1);pi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>pi.getBool("DEBUG"));pi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);pi.registerFlag("IS_TEST",()=>!1);pi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);pi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);pi.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1(e,t){let n=e;if(wa(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];const s=[];for(;Array.isArray(n)||wa(n)&&t!=="string";)s.push(n.length),n=n[0];return Array.isArray(e)&&et().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Gz(e,s,[]),s}function Gz(e,t,n){if(n=n||[],!Array.isArray(e)&&!wa(e)){oe(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}oe(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),oe(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const s=t.slice(1);for(let o=0;o<e.length;++o)Gz(e[o],s,n.concat(o))}function OR(e,t,n,s){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${s}' must be ${e} tensor, but got ${t} tensor`)}}function le(e,t,n,s="numeric"){if(e instanceof Ws)return OR(s,e.dtype,t,n),e;let o=Im(e);if(o!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(o=s),OR(s,o,t,n),e==null||!wa(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const r=D1(e,o);!wa(e)&&!Array.isArray(e)&&(e=[e]);const a=o!=="string"?Yc(e,o):vf(e,[],!0);return De.makeTensor(a,r,o)}function Kz(e,t,n,s="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((r,i)=>le(r,`${t}[${i}]`,n,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIe="__op";function Re(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const s=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+FIe;const o=(...r)=>{De.startScope(n);try{const i=s(...r);return yz(i)&&console.error("Cannot return a Promise inside of tidy."),De.endScope(i),i}catch(i){throw De.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(e,t){const n=le(e,"real","complex"),s=le(t,"imag","complex");wi(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const o={real:n,imag:s};return De.runKernel(NS,o)}const Hp=Re({complex_:LIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1(e,t,n,s){if(s==null&&(s=Im(e)),s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!wa(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){bz(t);const o=tt(t),r=tt(n);oe(o===r,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${r}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==tt(t.slice(i)):!0;oe(n[i]===t[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!wa(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=s!=="string"?Yc(e,s):vf(e,[],!0),De.makeTensor(e,t,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qz(e,t,n){const s=D1(e,n);return R1(e,t,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PR=4;async function FR(e,t){const n=[],s=[],o=Array.isArray(e)?e.map(i=>i.name):Object.keys(e);for(let i=0;i<o.length;++i){const a=o[i],l=Array.isArray(e)?e[i].tensor:e[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((g,v)=>g+v.length,0)+PR*f.length,p=new Uint8Array(h);let m=0;for(let g=0;g<f.length;g++){const v=f[g],b=new Uint8Array(new Uint32Array([v.length]).buffer);p.set(b,m),m+=PR,p.set(v,m),m+=v.length}d(p)});s.push(c)}else s.push(l.data());t!=null&&(u.group=t),n.push(u)}const r=await Promise.all(s);return{data:BIe(r),specs:n}}function BIe(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(r=>{if(t+=r.byteLength,n.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const s=new Uint8Array(t);let o=0;return n.forEach(r=>{s.set(new Uint8Array(r.buffer),o),o+=r.byteLength}),s.buffer}const bI=typeof Buffer!="undefined"&&(typeof Blob=="undefined"||typeof atob=="undefined"||typeof btoa=="undefined");function LR(e){return bI?Buffer.byteLength(e):new Blob([e]).size}function zIe(e){if(bI)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let s=0,o=t.length;s<o;s++)n+=String.fromCharCode(t[s]);return btoa(n)}function VIe(e){if(bI){const s=Buffer.from(e,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;++s)n.set([t.charCodeAt(s)],s);return n.buffer}function Yz(e){if(e.length===1)return e[0];let t=0;e.forEach(o=>{t+=o.byteLength});const n=new Uint8Array(t);let s=0;return e.forEach(o=>{n.set(new Uint8Array(o),s),s+=o.byteLength}),n.buffer}function Xz(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}async function WIe(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),e.weightsManifest!=null){const[s,o]=await t(e.weightsManifest);n.weightSpecs=s,n.weightData=o}return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),n}function M1(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:LR(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:LR(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qs{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Qs.instance==null&&(Qs.instance=new Qs),Qs.instance}static registerSaveRouter(t){Qs.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Qs.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Qs.getHandlers(t,"save")}static getLoadHandlers(t,n){return Qs.getHandlers(t,"load",n)}static getHandlers(t,n,s){const o=[];return(n==="load"?Qs.getInstance().loadRouters:Qs.getInstance().saveRouters).forEach(i=>{const a=i(t,s);a!==null&&o.push(a)}),o}}const HIe=e=>Qs.getSaveHandlers(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kx="tensorflowjs",qx=1,ec="models_store",Pl="model_info_store";function Zz(){if(!et().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window=="undefined"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Yx(e){const t=e.result;t.createObjectStore(ec,{keyPath:"modelPath"}),t.createObjectStore(Pl,{keyPath:"modelPath"})}class Cc{constructor(t){if(this.indexedDB=Zz(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((s,o)=>{const r=this.indexedDB.open(Kx,qx);r.onupgradeneeded=()=>Yx(r),r.onsuccess=()=>{const i=r.result;if(n==null){const a=i.transaction(ec,"readonly"),u=a.objectStore(ec).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=c=>(i.close(),o(u.error)),a.oncomplete=()=>i.close()}else{const a=M1(n),l=i.transaction(Pl,"readwrite");let u=l.objectStore(Pl);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a});let d;c.onsuccess=()=>{d=i.transaction(ec,"readwrite");const h=d.objectStore(ec).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a});h.onsuccess=()=>s({modelArtifactsInfo:a}),h.onerror=p=>{u=l.objectStore(Pl);const m=u.delete(this.modelPath);m.onsuccess=()=>(i.close(),o(h.error)),m.onerror=g=>(i.close(),o(h.error))}},c.onerror=f=>(i.close(),o(c.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},r.onerror=i=>o(r.error)})}}Cc.URL_SCHEME="indexeddb://";const Jz=e=>et().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Cc.URL_SCHEME)?UIe(e.slice(Cc.URL_SCHEME.length)):null;Qs.registerSaveRouter(Jz);Qs.registerLoadRouter(Jz);function UIe(e){return new Cc(e)}function jIe(e){return e.startsWith(Cc.URL_SCHEME)?e.slice(Cc.URL_SCHEME.length):e}class GIe{constructor(){this.indexedDB=Zz()}async listModels(){return new Promise((t,n)=>{const s=this.indexedDB.open(Kx,qx);s.onupgradeneeded=()=>Yx(s),s.onsuccess=()=>{const o=s.result,r=o.transaction(Pl,"readonly"),a=r.objectStore(Pl).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;t(l)},a.onerror=l=>(o.close(),n(a.error)),r.oncomplete=()=>o.close()},s.onerror=o=>n(s.error)})}async removeModel(t){return t=jIe(t),new Promise((n,s)=>{const o=this.indexedDB.open(Kx,qx);o.onupgradeneeded=()=>Yx(o),o.onsuccess=()=>{const r=o.result,i=r.transaction(Pl,"readwrite"),a=i.objectStore(Pl),l=a.get(t);let u;l.onsuccess=()=>{if(l.result==null)return r.close(),s(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const c=a.delete(t),d=()=>{u=r.transaction(ec,"readwrite");const h=u.objectStore(ec).delete(t);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>s(l.error)};c.onsuccess=d,c.onerror=f=>(d(),r.close(),s(l.error))}},l.onerror=c=>(r.close(),s(l.error)),i.oncomplete=()=>{u==null?r.close():u.oncomplete=()=>r.close()}},o.onerror=r=>s(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const La="/",Rd="tensorflowjs_models",Qz="info",KIe="model_topology",qIe="weight_specs",YIe="weight_data",XIe="model_metadata";function e6(e){return{info:[Rd,e,Qz].join(La),topology:[Rd,e,KIe].join(La),weightSpecs:[Rd,e,qIe].join(La),weightData:[Rd,e,YIe].join(La),modelMetadata:[Rd,e,XIe].join(La)}}function t6(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function ZIe(e){const t=e.split(La);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(La)}function JIe(e){return e.startsWith($c.URL_SCHEME)?e.slice($c.URL_SCHEME.length):e}class $c{constructor(t){if(!et().getBool("IS_BROWSER")||typeof window=="undefined"||typeof window.localStorage=="undefined")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=e6(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),s=JSON.stringify(t.weightSpecs),o=M1(t);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,zIe(t.weightData));const r={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(r)),{modelArtifactsInfo:o}}catch{throw t6(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=s;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const a=JSON.parse(r);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=VIe(i),n}}$c.URL_SCHEME="localstorage://";const n6=e=>et().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith($c.URL_SCHEME)?QIe(e.slice($c.URL_SCHEME.length)):null;Qs.registerSaveRouter(n6);Qs.registerLoadRouter(n6);function QIe(e){return new $c(e)}class eEe{constructor(){oe(et().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),oe(typeof window=="undefined"||typeof window.localStorage!="undefined",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=Rd+La,s=La+Qz;for(let o=0;o<this.LS.length;++o){const r=this.LS.key(o);if(r.startsWith(n)&&r.endsWith(s)){const i=ZIe(r);t[i]=JSON.parse(this.LS.getItem(r))}}return t}async removeModel(t){t=JIe(t);const n=e6(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const s=JSON.parse(this.LS.getItem(n.info));return t6(n),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BR="://";class Rl{constructor(){this.managers={}}static getInstance(){return Rl.instance==null&&(Rl.instance=new Rl),Rl.instance}static registerManager(t,n){oe(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(BR)&&(t=t.slice(0,t.indexOf(BR))),oe(t.length>0,()=>"scheme must not be an empty string.");const s=Rl.getInstance();oe(s.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),s.managers[t]=n}static getManager(t){const n=this.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tEe{fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}}if(et().get("IS_BROWSER")){et().setPlatform("browser",new tEe);try{Rl.registerManager($c.URL_SCHEME,new eEe)}catch{}try{Rl.registerManager(Cc.URL_SCHEME,new GIe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nEe={importFetch:()=>require("node-fetch")};let G2;class sEe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return et().global.fetch!=null?et().global.fetch(t,n):(G2==null&&(G2=nEe.importFetch()),G2(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}}et().get("IS_NODE")&&!et().get("IS_BROWSER")&&et().setPlatform("node",new sEe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $n(e,t="float32",n){return t=t||"float32",bz(e),new Do(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(e,t){const n=le(e,"x","cast");if(!tIe(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:n},o={dtype:t};return De.runKernel(Om,s,o)}const Ct=Re({cast_:oEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEe(e){const n={x:le(e,"x","clone","string_or_numeric")};return De.runKernel(qm,n)}const cc=Re({clone_:rEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iEe(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Hz();const aEe={buffer:$n,cast:Ct,clone:cc,print:iEe};AIe(aEe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lEe="model",uEe=".json",cEe=".weights.bin";function zR(e){return new Promise(t=>setTimeout(t)).then(e)}class Sc{constructor(t){if(!et().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(Sc.URL_SCHEME)&&(t=t.slice(Sc.URL_SCHEME.length)),(t==null||t.length===0)&&(t=lEe),this.modelJsonFileName=t+uEe,this.weightDataFileName=t+cEe}async save(t){if(typeof document=="undefined")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o=Xz(t,s),r=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),i=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await zR(()=>i.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;a.download=this.weightDataFileName,a.href=n,await zR(()=>a.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:M1(t)}}}}Sc.URL_SCHEME="downloads://";const dEe=e=>et().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Sc.URL_SCHEME)?fEe(e.slice(Sc.URL_SCHEME.length)):null;Qs.registerSaveRouter(dEe);function fEe(e="model"){return new Sc(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VR(e,t,n,s){i(e),n=n==null?0:n,s=s==null?1:s,a(n,s);let o=0;const r=l=>(l.then(u=>{const c=n+ ++o/e.length*(s-n);return t(c),u}),l);function i(l){oe(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){oe(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),oe(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),oe(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(e.map(r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function hEe(e,t){t==null&&(t={});const n=t.fetchFunc==null?et().platform.fetch:t.fetchFunc,s=e.map(d=>n(d,t.requestInit,{isBinary:!0})),o=0,r=.5,a=(t.onProgress==null?await Promise.all(s):await VR(s,t.onProgress,o,r)).map(d=>d.arrayBuffer()),l=.5,u=1;return t.onProgress==null?await Promise.all(a):await VR(a,t.onProgress,l,u)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pEe="application/octet-stream",mEe="application/json";class yI{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(oe(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=et().platform.fetch,oe(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&oe(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o=Xz(t,s);n.body.append("model.json",new Blob([JSON.stringify(o)],{type:mEe}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:pEe}),"model.weights.bin");const r=await this.fetch(this.path,n);if(r.ok)return{modelArtifactsInfo:M1(t),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const s=n.modelTopology,o=n.weightsManifest;if(s==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return WIe(n,r=>this.loadWeights(r))}async loadWeights(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[s,o]=gEe(n),r=this.weightPathPrefix||s,i=[];for(const c of t)i.push(...c.weights);const a=[],l=[];for(const c of t)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):a.push(r+d+o);this.weightUrlConverter&&a.push(...await Promise.all(l));const u=await hEe(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,Yz(u)]}}yI.URL_SCHEME_REGEX=/^https?:\/\//;function gEe(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),s=e.substring(0,t),o=n>t?e.substring(n):"";return[s+"/",o]}function WR(e){return e.match(yI.URL_SCHEME_REGEX)!=null}const s6=(e,t)=>{if(typeof fetch=="undefined"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(s=>WR(s)):n=WR(e),n)return vEe(e,t)}return null};Qs.registerSaveRouter(s6);Qs.registerLoadRouter(s6);function vEe(e,t){return new yI(e,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(e,t,n=!1,s=!1){let o=le(e,"a","matMul"),r=le(t,"b","matMul");[o,r]=Bs(o,r);const i={a:o,b:r},a={transposeA:n,transposeB:s};return De.runKernel(Py,i,a)}const Ln=Re({matMul_:bEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(e,t,n=1,s=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const r={indices:le(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:s};return De.runKernel(h1,r,i)}const o6=Re({oneHot_:yEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(e,t){const n=le(e,"x","transpose");if(t==null&&(t=n.shape.map((r,i)=>i).reverse()),oe(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(r=>{oe(r>=0&&r<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1)return n.clone();const s={x:n},o={perm:t};return De.runKernel(E1,s,o)}const Fn=Re({transpose_:wEe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xf(e,t){const n=e.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,i=e[r]||1;(t[t.length-1-o]||1)>1&&i===1&&s.unshift(r)}return s}function Zs(e,t){const n=[];for(let s=0;s<t.length;s++){const o=e[e.length-s-1],r=t.length-s-1,i=t[r];(o==null||o===1&&i>1)&&n.unshift(r)}return n}function dn(e,t){const n=[],s=Math.max(e.length,t.length);for(let o=0;o<s;o++){let r=e[e.length-o-1];r==null&&(r=1);let i=t[t.length-o-1];if(i==null&&(i=1),r===1)n.unshift(i);else if(i===1)n.unshift(r);else if(r!==i){const a=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(a)}else n.unshift(r)}return n}function wI(e,t){const n=e.shape.length,s=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[s-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[s-1]} vs. ${n}`);if(tt(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,r=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=e.shape,l=o.slice();l.pop();let u=1;for(let d=r;d<n;++d)u*=a[d],l.push(a[d]);const c=[...Wt(e.shape).map(d=>d/u),1].slice(0,r);return[l,i,u,c]}function r6(e,t,n){const s=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${s}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(r+` update.rank < ${o}. `);if(e.length<s+(n.rank-o))throw new Error(r+` Output shape length < ${s+(n.rank-o)}`);if(n.rank!==o+e.length-s)throw new Error(r+` update.rank != ${o+e.length-s}`);for(let i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(r+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+s])throw new Error(r+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${e[i+o]})`)}function kEe(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}r6(n,t,e)}function Cg(e,t,n){const s=t.shape.length,o=s>1?t.shape[s-1]:1,r=n.length;let i=1;for(let d=o;d<r;++d)i*=n[d];const a=o<1?1:o,l=tt(t.shape)/a,u=[...Wt(n.slice(0,o)),1],c=tt(n);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xx=-2,xEe=-1;function kI(e,t,n){const s=e.shape.length;oe(s===t.length,()=>`Error in slice${s}D: Length of begin ${t} must match the rank of the array (${s}).`),oe(s===n.length,()=>`Error in slice${s}D: Length of size ${n} must match the rank of the array (${s}).`);for(let o=0;o<s;++o)oe(t[o]+n[o]<=e.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function CEe(e){const t=[];let n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function xI(e,t,n){const s=[];for(let o=0;o<e.length;o++)s[o]=Math.ceil((t[o]-e[o])/n[o]);return s}function i6(e,t,n,s){const o=[...e];for(let r=o.length;r<s.length;r++)o.push(1);for(let r=0;r<n;r++)r===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function a6(e,t,n){return n<=e?n:n-(t-1)}function l6(e,t){const n=[];for(let s=0;s<e;s++)n.push(t+s);return n}function $Ee(e,t,n,s,o,r,i,a,l){const u=e.length;let c=new Array(u),d=new Array(u),f=new Array(u);if(t.length&&n>0){const h=t[0],p=n+1;c=u6(i,h,p,s,e),d=c6(a,h,p,o,e),f=i6(r,h,p,e)}else for(let h=0;h<u;h++)c[h]=f6(i,s,r,e,h,l),d[h]=h6(a,o,r,e,h,l),f[h]=d6(r,h,l);return{begin:c,end:d,strides:f}}function u6(e,t,n,s,o){const r=[...o],i=l6(n,t);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=0;else{const l=a6(t,n,a);let u=s[l];e&1<<l&&(u=0),r[a]=u}return r}function c6(e,t,n,s,o){const r=[...o],i=l6(n,t);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const l=a6(t,n,a);let u=s[l];e&1<<l&&(u=Number.MAX_SAFE_INTEGER),r[a]=u}for(let a=0;a<r.length;a++){const l=o[a];r[a]<0&&(r[a]+=l),r[a]=xc(0,r[a],o[a])}return r}function d6(e,t,n){let s=e[t];return(n&1<<t||s==null)&&(s=1),s}function f6(e,t,n,s,o,r){let i=t[o];const a=n[o]||1;(e&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),i=xc(0,i,l-1),i}function h6(e,t,n,s,o,r){let i=t[o];const a=n[o]||1;(e&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),a>0?i=xc(0,i,l):i=xc(-1,i,l-1),i}function CI(e,t,n){let s=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){s=o;break}for(let o=s+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function $I(e,t){let n=e.length>0?e[e.length-1]:1;for(let s=0;s<e.length-1;s++)n+=e[s]*t[s];return n}function O1(e,t,n){let s;const o=e.shape.length;typeof t=="number"?s=[t,...new Array(o-1).fill(0)]:t.length<o?s=t.concat(new Array(o-t.length).fill(0)):s=t.slice(),s.forEach(i=>{oe(i!==-1,()=>"slice() does not support negative begin indexing.")});let r;return n==null?r=new Array(o).fill(-1):typeof n=="number"?r=[n,...new Array(o-1).fill(-1)]:n.length<o?r=n.concat(new Array(o-n.length).fill(-1)):r=n,r=r.map((i,a)=>i>=0?i:(oe(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),e.shape[a]-s[a])),[s,r]}function SI(e,t,n,s,o,r,i,a,l){let u;if(s==null?(u=new Array(t.length),u.fill(1)):u=s,i!=null&&(i&i-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let w=0;w<d.dims;w++)c&&(1<<w&a)!==0&&d.numAddAxisAfterEllipsis++,1<<w&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};SEe(d,f);let h=!0,p=!0,m=!0;const g=[],v=[];for(let w=0;w<e.length;++w){if(f.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const y=!!(f.shrinkAxisMask&1<<w),k=e[w];if(k===-1){g.push(y?1:-1);continue}const x=[f.beginMask&1<<w,f.endMask&1<<w],C=[f.strides[w]>0?0:-1,f.strides[w]>0?k:k-1];if(y&&f.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[w]===1;const S=!!(f.beginMask&1<<w&&f.endMask&1<<w);if(f.beginValid&&f.endValid){if(y){const L=f.begin[w]<0?k+f.begin[w]:f.begin[w];if(f.begin[w]=L,f.end[w]=f.begin[w]+1,L<0||L>=k)throw Error(`slice index ${f.begin[w]} of dimension ${w} out of bounds.`)}else f.begin[w]=HR(f.begin[w],0,f.strides[w],k,x,C),f.end[w]=HR(f.end[w],1,f.strides[w],k,x,C);const R=f.strides[w]===1&&f.begin[w]===0&&f.end[w]===k;h=h&&R,p=p&&(w===0&&f.strides[w]===1||R)}else h=h&&f.strides[w]===1&&S,p=p&&(w===0&&f.strides[w]===1||S);let T,A=!1;if(f.beginValid&&f.endValid?(T=f.end[w]-f.begin[w],A=!0):y?(T=1,A=!0):S&&k>=0&&(f.strides[w]<0?T=-k:T=k,A=!0),A){let R;T===0||T<0!=f.strides[w]<0?R=0:R=Math.trunc(T/f.strides[w])+(T%f.strides[w]!==0?1:0),g.push(R)}else g.push(-1)}for(let w=0;w<f.finalShapeGatherIndices.length;++w){const y=f.finalShapeGatherIndices[w];y>=0?v.push(g[y]):y===Xx&&v.push(1)}return{finalShapeSparse:v.filter((w,y)=>f.finalShapeGatherIndices[y]!==Xx),finalShape:v,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function SEe(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let s=0;s<e.dims;s++)if(1<<s&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-s)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=s}else if(1<<s&e.newAxisMask)t.finalShapeGatherIndices.push(Xx),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[s]),e.end!=null&&(t.end[n]=e.end[s]),t.strides[n]=e.strides[s],e.beginMask&1<<s&&(t.beginMask|=1<<n),e.endMask&1<<s&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<s?(t.finalShapeGatherIndices.push(xEe),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(s)),t.inputShapeGatherIndicesSparse[n]=s,n++}}function HR(e,t,n,s,o,r){if(o[t])return n>0?r[t]:r[t+1&1];{const i=e<0?s+e:e;return i<r[0]?r[0]:i>r[1]?r[1]:i}}var IEe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:kI,maskToAxes:CEe,computeOutShape:xI,stridesWithElidedDims:i6,getNormalizedAxes:$Ee,startIndicesWithElidedDims:u6,stopIndicesWithElidedDims:c6,stridesForAxis:d6,startForAxis:f6,stopForAxis:h6,isSliceContinous:CI,computeFlatOffset:$I,parseSliceParams:O1,sliceInfo:SI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qf{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class Xr{constructor(){this.classNameMap={}}static getMap(){return Xr.instance==null&&(Xr.instance=new Xr),Xr.instance}static register(t){Xr.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function ut(e){oe(e.className!=null,()=>"Class being registered does not have the static className property defined."),oe(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),oe(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Xr.register(e)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nl(){return De}function Zx(){return De.memory()}function Ge(e,t){return De.tidy(e,t)}function xn(e){Vz(e).forEach(n=>n.dispose())}function ka(e){return De.keep(e)}function p6(e,t,n=1){return De.registerBackend(e,t,n)}function EEe(){return De.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TEe(e,t){let n=le(e,"a","add"),s=le(t,"b","add");[n,s]=Bs(n,s);const o={a:n,b:s};return De.runKernel(Kf,o)}const ht=Re({add_:TEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(e,t){let n=le(e,"a","floorDiv"),s=le(t,"b","floorDiv");[n,s]=Bs(n,s);const o={a:n,b:s};return De.runKernel(Gm,o)}const m6=Re({floorDiv_:_Ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEe(e,t){let n=le(e,"a","div"),s=le(t,"b","div");if([n,s]=Bs(n,s),n.dtype==="int32"&&s.dtype==="int32")return m6(n,s);const o={a:n,b:s},r={};return De.runKernel(zm,o,r)}const Vt=Re({div_:NEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(e,t){let n=le(e,"a","mul"),s=le(t,"b","mul");[n,s]=Bs(n,s);const o={a:n,b:s};return De.runKernel(sg,o)}const Ee=Re({mul_:AEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEe(e){const t=le(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return De.runKernel(Ly,n)}else{const n={x:t};return De.runKernel(Ay,n)}}const eo=Re({abs_:DEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REe(e){const n={x:le(e,"x","acos")};return De.runKernel(Tm,n)}const MEe=Re({acos_:REe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEe(e){const n={x:le(e,"x","acosh")};return De.runKernel(_m,n)}const PEe=Re({acosh_:OEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEe(e,t=null,n=!1){const o={x:le(e,"x","all","bool")},r={axis:t,keepDims:n};return De.runKernel(SS,o,r)}const g6=Re({all_:FEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(e,t=null,n=!1){const o={x:le(e,"x","any","bool")},r={axis:t,keepDims:n};return De.runKernel(IS,o,r)}const Jx=Re({any_:LEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BEe(e,t=0){const s={x:le(e,"x","argMax")},o={axis:t};return De.runKernel(Dy,s,o)}const Up=Re({argMax_:BEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(e,t=0){const s={x:le(e,"x","argMin")},o={axis:t};return De.runKernel(Ry,s,o)}const VEe=Re({argMin_:zEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(e){const n={x:le(e,"x","asin")};return De.runKernel(Nm,n)}const HEe=Re({asin_:WEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(e){const n={x:le(e,"x","asinh")};return De.runKernel(Am,n)}const jEe=Re({asinh_:UEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(e){const n={x:le(e,"x","atan")};return De.runKernel(Dm,n)}const KEe=Re({atan_:GEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEe(e,t){let n=le(e,"a","atan2"),s=le(t,"b","atan2");[n,s]=Bs(n,s);const o={a:n,b:s};return De.runKernel(Mm,o)}const YEe=Re({atan2_:qEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEe(e){const n={x:le(e,"x","atanh")};return De.runKernel(Rm,n)}const ZEe=Re({atanh_:XEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $g(e,t,n,s,o="NHWC",r){const i=e[3],a=[...t,i],l=dl(o);return ko(e,a,n,r,s,null,null,l)}function ki(e,t,n,s,o,r,i="channelsLast"){const[a,l]=yb(t);let u;if(i==="channelsLast")u=[a,l,e[3],e[3]];else if(i==="channelsFirst")u=[a,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${i}`);return ko(e,u,n,s,o,r,!1,i)}function cl(e,t,n,s,o,r,i="NDHWC"){const[a,l,u]=Qx(t);let c,d;if(i==="NDHWC")d="channelsLast",c=[a,l,u,e[4],e[4]];else if(i==="NCDHW")d="channelsFirst",c=[a,l,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${i}`);return uu(e,c,n,s,o,!1,d,r)}function ko(e,t,n,s,o,r,i=!1,a="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d]=e;else if(a==="channelsFirst")[l,d,u,c]=e;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=t,[m,g]=yb(n),[v,b]=yb(s),w=Kd(f,v),y=Kd(h,b),{padInfo:k,outHeight:x,outWidth:C}=eTe(o,u,c,m,g,w,y,r,a),S=i?p*d:p;let T;return a==="channelsFirst"?T=[l,S,x,C]:a==="channelsLast"&&(T=[l,x,C,S]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:d,outHeight:x,outWidth:C,outChannels:S,padInfo:k,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:h,effectiveFilterHeight:w,effectiveFilterWidth:y,dilationHeight:v,dilationWidth:b,inShape:e,outShape:T,filterShape:t}}function uu(e,t,n,s,o,r=!1,i="channelsLast",a){let[l,u,c,d,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,u,c,d,f]=e;else if(i==="channelsFirst")[l,f,u,c,d]=e;else throw new Error(`Unknown dataFormat ${i}`);const[h,p,m,,g]=t,[v,b,w]=Qx(n),[y,k,x]=Qx(s),C=Kd(h,y),S=Kd(p,k),T=Kd(m,x),{padInfo:A,outDepth:R,outHeight:L,outWidth:P}=tTe(o,u,c,d,v,b,w,C,S,T,a),V=r?g*f:g;let H;return i==="channelsFirst"?H=[l,V,R,L,P]:i==="channelsLast"&&(H=[l,R,L,P,V]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:c,inWidth:d,inChannels:f,outDepth:R,outHeight:L,outWidth:P,outChannels:V,padInfo:A,strideDepth:v,strideHeight:b,strideWidth:w,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:S,effectiveFilterWidth:T,dilationDepth:y,dilationHeight:k,dilationWidth:x,inShape:e,outShape:H,filterShape:t}}function JEe(e,t,n,s,o){s==null&&(s=II(e,t,n));const r=e[0],i=e[1],a=dc((r-t+2*s)/n+1,o),l=dc((i-t+2*s)/n+1,o);return[a,l]}function QEe(e,t,n,s,o,r){o==null&&(o=II(e,t,s));const i=e[0],a=e[1],l=e[2],u=dc((i-t+2*o)/s+1,r),c=dc((a-t+2*o)/s+1,r),d=dc((l-t+2*o)/s+1,r);return[u,c,d,n]}function II(e,t,n,s=1){const o=Kd(t,s);return Math.floor((e[0]*(n-1)-n+o)/2)}function yb(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Qx(e){return typeof e=="number"?[e,e,e]:e}function Kd(e,t){return t<=1?e:e+(e-1)*(t-1)}function eTe(e,t,n,s,o,r,i,a,l){let u,c,d;if(typeof e=="number"){u={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const h=JEe([t,n],r,s,e,a);c=h[0],d=h[1]}else if(e==="same"){c=Math.ceil(t/s),d=Math.ceil(n/o);const f=Math.max(0,(c-1)*s+r-t),h=Math.max(0,(d-1)*o+i-n),p=Math.floor(f/2),m=f-p,g=Math.floor(h/2),v=h-g;u={top:p,bottom:m,left:g,right:v,type:"SAME"}}else if(e==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-r+1)/s),d=Math.ceil((n-i+1)/o);else if(typeof e=="object"){const f=l==="channelsLast"?e[1][0]:e[2][0],h=l==="channelsLast"?e[1][1]:e[2][1],p=l==="channelsLast"?e[2][0]:e[3][0],m=l==="channelsLast"?e[2][1]:e[3][1];u={top:f,bottom:h,left:p,right:m,type:f===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=dc((t-r+f+h)/s+1,a),d=dc((n-i+p+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outHeight:c,outWidth:d}}function tTe(e,t,n,s,o,r,i,a,l,u,c){let d,f,h,p;if(typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const g=QEe([t,n,s,1],a,1,o,e,c);f=g[0],h=g[1],p=g[2]}else if(e==="same"){f=Math.ceil(t/o),h=Math.ceil(n/r),p=Math.ceil(s/i);const m=(f-1)*o+a-t,g=(h-1)*r+l-n,v=(p-1)*i+u-s,b=Math.floor(m/2),w=m-b,y=Math.floor(g/2),k=g-y,x=Math.floor(v/2),C=v-x;d={top:y,bottom:k,left:x,right:C,front:b,back:w,type:"SAME"}}else if(e==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-a+1)/o),h=Math.ceil((n-l+1)/r),p=Math.ceil((s-u+1)/i);else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function dc(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Ic(e){const[t,n,s]=yb(e);return t===1&&n===1&&s===1}function Po(e,t){return Ic(e)||Ic(t)}function dl(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function er(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")oe(bf(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(s=>{s.forEach(o=>{oe(bf(o),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTe(e,t){const s={x:le(e,"x","reshape","string_or_numeric")},o={shape:t};return De.runKernel(v1,s,o)}const Oe=Re({reshape_:nTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(e,t,n,s,o){const r=le(e,"x","avgPool","float32"),i=1;oe(Po(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=r,l=!1;r.rank===3&&(l=!0,a=Oe(r,[1,r.shape[0],r.shape[1],r.shape[2]])),oe(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),er("avgPool",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o};let d=De.runKernel(My,u,c);return d=Ct(d,r.dtype),l?Oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const EI=Re({avgPool_:sTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTe(e,t,n,s,o,r="NDHWC"){const i=le(e,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=Oe(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),oe(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),oe(r==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),er("avgPool3d",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o,dataFormat:r};let d=De.runKernel(Oy,u,c);return d=Ct(d,a.dtype),l?Oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const rTe=Re({avgPool3d_:oTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(e,t=0){oe(e.length>=1,()=>"Pass at least one tensor to concat");const n=Kz(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(r=>{if(r.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${r.dtype}. `)}),n.length===1)return cc(n[0]);const s=n,o={axis:t};return De.runKernel(By,s,o)}const Ro=Re({concat_:iTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(e){const n={x:le(e,"x","sigmoid","float32")};return De.runKernel(pg,n)}const Yf=Re({sigmoid_:aTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(e,t,n){const s=le(e,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const o={x:s},r={begin:t,size:n};return De.runKernel(x1,o,r)}const Qn=Re({slice_:lTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(e){const n={x:le(e,"x","tanh","float32")};return De.runKernel(wg,n)}const TI=Re({tanh_:uTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTe(e,t,n){const s=le(e,"x","batchToSpaceND"),o=t.reduce((a,l)=>a*l);oe(s.rank>=1+t.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`),oe(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),oe(s.shape[0]%o===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);const r={x:s},i={blockShape:t,crops:n};return De.runKernel(Fy,r,i)}const _I=Re({batchToSpaceND_:cTe});function dTe(e){let t;return e.rank===0||e.rank===1?t=Oe(e,[1,1,1,e.size]):e.rank===2?t=Oe(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=Oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTe(e,t,n,s,o,r){r==null&&(r=.001);const i=le(e,"x","batchNorm"),a=le(t,"mean","batchNorm"),l=le(n,"variance","batchNorm");let u;o!=null&&(u=le(o,"scale","batchNorm"));let c;s!=null&&(c=le(s,"offset","batchNorm")),oe(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),oe(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),oe(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:dTe(i),scale:u,offset:c,mean:a,variance:l},h={varianceEpsilon:r},p=De.runKernel(qy,f,h);return Oe(p,i.shape)}const P1=Re({batchNorm_:fTe});function hTe(e,t,n,s,o,r){const i=le(e,"x","batchNorm"),a=le(t,"mean","batchNorm"),l=le(n,"variance","batchNorm");let u;o!=null&&(u=le(o,"scale","batchNorm"));let c;return s!=null&&(c=le(s,"offset","batchNorm")),oe(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),oe(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),oe(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&oe(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&oe(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),P1(i,a,l,c,u,r)}const pTe=Re({batchNorm2d_:hTe});function mTe(e,t,n,s,o,r){const i=le(e,"x","batchNorm"),a=le(t,"mean","batchNorm"),l=le(n,"variance","batchNorm");let u;o!=null&&(u=le(o,"scale","batchNorm"));let c;return s!=null&&(c=le(s,"offset","batchNorm")),oe(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),oe(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),oe(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&oe(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&oe(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),P1(i,a,l,c,u,r)}const gTe=Re({batchNorm3d_:mTe});function vTe(e,t,n,s,o,r){const i=le(e,"x","batchNorm"),a=le(t,"mean","batchNorm"),l=le(n,"variance","batchNorm");let u;o!=null&&(u=le(o,"scale","batchNorm"));let c;return s!=null&&(c=le(s,"offset","batchNorm")),oe(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),oe(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),oe(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&oe(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&oe(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),P1(i,a,l,c,u,r)}const bTe=Re({batchNorm4d_:vTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTe(e,t,n){const s=le(e,"x","bincount"),o=le(t,"weights","bincount");oe(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),oe(n>=0,()=>`size must be non-negative, but got ${n}.`),oe(o.size===s.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${o.shape}.`);const r={x:s,weights:o},i={size:n};return De.runKernel(_S,r,i)}const wTe=Re({bincount_:yTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(e,t){let n=le(e,"broadcastTo","x");const s=n.shape;if(t.some(u=>!(u>0)||u%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const u=n.shape.slice();for(;u.length<t.length;)u.unshift(1);n=Oe(n,u)}const o=n.shape,r=Array.from(t);for(let u=t.length-1;u>=0;u--)if(o[u]===t[u])r[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${t}].`);if(r.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return cc(n);const a={x:n},l={reps:r};return De.runKernel(kg,a,l)}const Bv=Re({broadcastTo_:kTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(e){const n={x:le(e,"x","ceil","float32")};return De.runKernel(Pm,n)}const CTe=Re({ceil_:xTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Te(e,t,n){const s=le(e,"x","clipByValue");oe(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`);const o={x:s},r={clipValueMin:t,clipValueMax:n};return De.runKernel(Fm,o,r)}const Fr=Re({clipByValue_:$Te});function STe(e){return Ro(e,0)}const ITe=Re({concat1d_:STe});function ETe(e,t){return Ro(e,t)}const TTe=Re({concat2d_:ETe});function _Te(e,t){return Ro(e,t)}const NTe=Re({concat3d_:_Te});function ATe(e,t){return Ro(e,t)}const DTe=Re({concat4d_:ATe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RTe(e,t,n,s,o="NHWC",r=[1,1],i){const a=le(e,"x","conv2d","float32"),l=le(t,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=Oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),oe(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),oe(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),er("conv2d",s,i);const d=o==="NHWC"?u.shape[3]:u.shape[1];oe(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),oe(Po(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`);const f={x:u,filter:l},h={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},p=De.runKernel(zy,f,h);return c?Oe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ec=Re({conv2d_:RTe});function MTe(e,t,n,s,o="NWC",r=1,i){const a=le(e,"x","conv1d"),l=le(t,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=Oe(a,[1,a.shape[0],a.shape[1]])),oe(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),oe(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),er("conv1d",s,i),oe(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),oe(Po(n,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${r}'`),oe(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=Oe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=Oe(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=Ec(f,d,[1,n],s,"NHWC",[1,r],i);return c?Oe(g,[g.shape[2],g.shape[3]]):Oe(g,[g.shape[0],g.shape[2],g.shape[3]])}const v6=Re({conv1d_:MTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(e,t,n,s,o,r="NHWC",i){oe(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,l=t,u=!1;t.rank===3&&(u=!0,l=Oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),oe(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),oe(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),oe(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=r==="NHWC"?a[3]:a[1],d=r==="NHWC"?l.shape[3]:l.shape[1];oe(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),oe(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),er("conv2dDerInput",o,i);const f={dy:l,filter:n},h={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,inputShape:a},p=De.runKernel(Vy,f,h);return u?Oe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const NI=Re({conv2DBackpropInput_:OTe});function PTe(e,t,n,s,o,r){const i=le(e,"x","conv2dTranspose"),a=le(t,"filter","conv2dTranspose");return NI(n,i,a,s,o,"NHWC",r)}const b6=Re({conv2dTranspose_:PTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(e,t,n,s,o="NDHWC",r=[1,1,1]){const i=le(e,"x","conv3d"),a=le(t,"filter","conv3d");let l=i,u=!1;i.rank===4&&(u=!0,l=Oe(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),oe(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),oe(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),oe(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),oe(Po(n,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),oe(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`);const c={x:l,filter:a},d={strides:n,pad:s,dataFormat:o,dilations:r},f=De.runKernel(Wy,c,d);return u?Oe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const LTe=Re({conv3d_:FTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTe(e,t,n,s,o){oe(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let r=e,i=t,a=!1;t.rank===4&&(a=!0,i=Oe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),r=[1,e[0],e[1],e[2],e[3]]);const l=r[4],u=i.shape[4];oe(r.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),oe(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),oe(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),oe(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),oe(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:o,strides:s,inputShape:r},f=De.runKernel(RS,c,d);return a?Oe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const y6=Re({conv3DBackpropInput_:BTe});function zTe(e,t,n,s,o){const r=le(e,"x","conv3dTranspose"),i=le(t,"filter","conv3dTranspose");return y6(n,r,i,s,o)}const VTe=Re({conv3dTranspose_:zTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WTe(e){const n={x:le(e,"x","cos","float32")};return De.runKernel(Lm,n)}const AI=Re({cos_:WTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTe(e){const n={x:le(e,"x","cosh","float32")};return De.runKernel(Bm,n)}const w6=Re({cosh_:HTe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTe(e,t=0,n=!1,s=!1){const r={x:le(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:s};return De.runKernel(MS,r,i)}const jTe=Re({cumprod_:UTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(e,t=0,n=!1,s=!1){const r={x:le(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:s};return De.runKernel(Hy,r,i)}const k6=Re({cumsum_:GTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(e,t,n="NHWC"){const s=le(e,"x","depthToSpace","float32"),o=n==="NHWC"?s.shape[1]:s.shape[2],r=n==="NHWC"?s.shape[2]:s.shape[3],i=n==="NHWC"?s.shape[3]:s.shape[1];oe(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),oe(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${s.shape}`),oe(r*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${t} for depthToSpace with input shape
        ${s.shape}`),oe(i%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${s.shape}`);const a={x:s},l={blockSize:t,dataFormat:n};return De.runKernel(PS,a,l)}const qTe=Re({depthToSpace_:KTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(e,t,n,s,o="NHWC",r=[1,1],i){const a=le(e,"x","depthwiseConv2d","float32"),l=le(t,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=Oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),oe(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),oe(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),oe(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),er("depthwiseConv2d",s,i);const d={x:u,filter:l},f={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},h=De.runKernel(Uy,d,f);return c?Oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const DI=Re({depthwiseConv2d_:YTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(e,t,n,s,o=[1,1],r="NHWC"){const i=le(e,"x","dilation2d"),a=le(t,"filter","dilation2d");oe(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),oe(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),oe(r==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=i,u=!1;i.rank===3&&(l=Oe(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0);const c={x:l,filter:a},d={strides:n,pad:s,dilations:o},f=De.runKernel(jy,c,d);return u?Oe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const ZTe=Re({dilation2d_:XTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(e,t){let n=le(e,"a","equal","string_or_numeric"),s=le(t,"b","equal","string_or_numeric");[n,s]=Bs(n,s),dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(Gy,o)}const xa=Re({equal_:JTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(e,t,n){const s=le(t,"a","where"),o=le(n,"b","where"),r=le(e,"condition","where","bool"),i=dn(dn(r.shape,s.shape),o.shape),a=Bv(r,i),l=Bv(s,i),u=Bv(o,i),c={condition:a,t:l,e:u};return De.runKernel(k1,c)}const mr=Re({where_:QTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_e(e){const n={x:le(e,"x","zerosLike")};return De.runKernel(N1,n)}const An=Re({zerosLike_:e_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t_e(e,t){let n=le(e,"a","div"),s=le(t,"b","div");[n,s]=Bs(n,s);const o=Vt(n,s),r=An(o),i=xa(s,r);return mr(i,r,o)}const n_e=Re({divNoNan_:t_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_e(e,t){const n=le(e,"t1","dot"),s=le(t,"t2","dot");oe((n.rank===1||n.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const o=n.rank===1?n.size:n.shape[1],r=s.rank===1?s.size:s.shape[0];if(oe(o===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${r}.`),n.rank===1&&s.rank===1){const i=Oe(n,[1,-1]),a=Oe(s,[-1,1]),l=Ln(i,a);return Oe(l,[])}else if(n.rank===1&&s.rank===2){const i=Oe(n,[1,-1]),a=Oe(s,[s.shape[0],s.shape[1]]),l=Ln(i,a);return Oe(l,[l.size])}else if(n.rank===2&&s.rank===1){const i=Oe(s,[-1,1]),a=Ln(n,i);return Oe(a,[a.size])}else{const i=Oe(s,[s.shape[0],s.shape[1]]);return Ln(n,i)}}const o_e=Re({dot_:s_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_e(e){const n={x:le(e,"x","elu","float32")};return De.runKernel(Vm,n)}const F1=Re({elu_:r_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i_e(e){let t=le(e,"x","erf");oe(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=Ct(t,"float32"));const n={x:t};return De.runKernel(Wm,n)}const a_e=Re({erf_:i_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l_e(e){const n={x:le(e,"x","exp")};return De.runKernel(Hm,n)}const mi=Re({exp_:l_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u_e(e,t=0){const n=le(e,"x","expandDims","string_or_numeric");oe(t<=n.rank,()=>"Axis must be <= rank of the tensor");const s={input:n},o={dim:t};return De.runKernel(Ky,s,o)}const Yr=Re({expandDims_:u_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_e(e){const n={x:le(e,"x","expm1")};return De.runKernel(Um,n)}const d_e=Re({expm1_:c_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f_e(e,t){const n=le(e,"x","tile","string_or_numeric");oe(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const s={x:n},o={reps:t};return De.runKernel(kg,s,o)}const Pi=Re({tile_:f_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_e(e,t,n,s="float32"){t==null&&(t=e);const o=$n([e,t],s),r=e<=t?e:t;for(let a=0;a<r;++a)o.set(1,a,a);const i=Oe(o.toTensor(),[e,t]);if(n==null)return i;if(n.length===1)return Pi(Yr(i,0),[n[0],1,1]);if(n.length===2)return Pi(Yr(Yr(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Pi(Yr(Yr(Yr(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const x6=Re({eye_:h_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1(e,t,n){const s={shape:e,value:t,dtype:n};return De.runKernel(VS,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p_e(e){const n={x:le(e,"x","floor","float32")};return De.runKernel(jm,n)}const B1=Re({floor_:p_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m_e(e,t,n=0,s=0){const o=le(e,"x","gather"),r=le(t,"indices","gather","int32"),i={x:o,indices:r},a={axis:n,batchDims:s};return De.runKernel(Yy,i,a)}const RI=Re({gather_:m_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g_e(e,t){let n=le(e,"a","greater","string_or_numeric"),s=le(t,"b","greater","string_or_numeric");[n,s]=Bs(n,s),dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(Xy,o)}const xi=Re({greater_:g_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v_e(e,t){let n=le(e,"a","greaterEqual","string_or_numeric"),s=le(t,"b","greaterEqual","string_or_numeric");[n,s]=Bs(n,s),dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(Km,o)}const Xf=Re({greaterEqual_:v_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_e(e){const n={input:le(e,"input","imag")};return De.runKernel(US,n)}const C6=Re({imag_:b_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_e(e){const n={x:le(e,"x","isFinite")};return De.runKernel(Ym,n)}const w_e=Re({isFinite_:y_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k_e(e){const n={x:le(e,"x","isInf")};return De.runKernel(Xm,n)}const x_e=Re({isInf_:k_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_e(e){const n={x:le(e,"x","isNaN")};return De.runKernel(Zm,n)}const $_e=Re({isNaN_:C_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_e(e,t=.2){const s={x:le(e,"x","leakyRelu")},o={alpha:t};return De.runKernel(Zy,s,o)}const MI=Re({leakyRelu_:S_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_e(e,t){let n=le(e,"a","less","string_or_numeric"),s=le(t,"b","less","string_or_numeric");[n,s]=Bs(n,s),dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(Jy,o)}const $6=Re({less_:I_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_e(e,t){let n=le(e,"a","lessEqual","string_or_numeric"),s=le(t,"b","lessEqual","string_or_numeric");[n,s]=Bs(n,s),dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(Qy,o)}const Zf=Re({lessEqual_:E_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_e(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const s={start:e,stop:t,num:n};return De.runKernel(jS,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function __e(e,t=5,n=1,s=1,o=.5){const r=le(e,"x","localResponseNormalization");oe(r.rank===4||r.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${r.rank}.`),oe(bf(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=r,a=!1;r.rank===3&&(a=!0,i=Oe(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={x:i},u={depthRadius:t,bias:n,alpha:s,beta:o},c=De.runKernel(s1,l,u);return a?Oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const N_e=Re({localResponseNormalization_:__e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_e(e){const n={x:le(e,"x","log","float32")};return De.runKernel(Jm,n)}const gi=Re({log_:A_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_e(e){const n={x:le(e,"x","log1p")};return De.runKernel(Qm,n)}const OI=Re({log1p_:D_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R_e(e,t){oe(Ox(e),()=>"The f passed in variableGrads(f) must be a function"),oe(t==null||Array.isArray(t)&&t.every(u=>u instanceof bb),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const u in De.registeredVariables)t.push(De.registeredVariables[u])}const s=n?t.filter(u=>!u.trainable):null,o=t.length;t=t.filter(u=>u.trainable),oe(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const r=!0,{value:i,grads:a}=De.gradients(e,t,null,r);oe(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),oe(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return t.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),s!=null&&s.forEach(u=>l[u.name]=null),{value:i,grads:l}}function Tc(e){return De.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M_e(e){const n={x:le(e,"x","neg")};return De.runKernel(c1,n)}const As=Re({neg_:M_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O_e(e){const n={x:le(e,"x","softplus")};return De.runKernel(mg,n)}const Sg=Re({softplus_:O_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_e(e){const t=le(e,"x","logSigmoid");return Tc(s=>({value:As(Sg(As(s))),gradFunc:i=>Ee(i,Yf(As(s)))}))(t)}const F_e=Re({logSigmoid_:P_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L_e(e,t=null,n=!1){const o={x:le(e,"x","max")},r={reductionIndices:t,keepDims:n};return De.runKernel(o1,o,r)}const pa=Re({max_:L_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B_e(e,t){let n=le(e,"a","sub"),s=le(t,"b","sub");[n,s]=Bs(n,s);const o={a:n,b:s};return De.runKernel(bg,o)}const Pt=Re({sub_:B_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z_e(e,t=null,n=!1){let s=le(e,"x","sum");s.dtype==="bool"&&(s=Ct(s,"int32"));const o={x:s},r={axis:t,keepDims:n};return De.runKernel(C1,o,r)}const Ot=Re({sum_:z_e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_e(e,t=-1){const n=le(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Tc((o,r)=>{const a=pa(o,t,!0),l=Pt(o,a),u=Pt(Ct(l,"float32"),gi(Ot(mi(l),t,!0)));return r([u]),{value:u,gradFunc:(d,f)=>{const[h]=f,p=!0,m=mi(h);return Pt(d,Ee(Ot(d,t,p),m))}}})(n)}const S6=Re({logSoftmax_:V_e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PI(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function I6(e,t,n){const s=e.length+t.length,o=[];let r=0,i=0;for(let a=0;a<s;a++)n.indexOf(a)===-1?o.push(e[r++]):o.push(t[i++]);return o}function lo(e,t){const n=[],s=e.length;for(let r=0;r<s;r++)t.indexOf(r)===-1&&n.push(e[r]);const o=t.map(r=>e[r]);return[n,o]}function zs(e,t){const n=t.map(s=>1);return I6(e,n,t)}function xo(e,t,n){oe(PI(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function Es(e,t){if(PI(e,t))return null;const n=[];for(let s=0;s<t;++s)e.indexOf(s)===-1&&n.push(s);return e.forEach(s=>n.push(s)),n}function cu(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function Ms(e,t){const n=[];for(let s=t-e;s<t;++s)n.push(s);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W_e(e,t=null,n=!1){const s=le(e,"x","logSumExp"),o=yn(t,s.shape),r=pa(s,o,!0),i=Pt(s,r),a=mi(i),l=Ot(a,o),u=gi(l),c=ht(Oe(r,u.shape),u);if(n){const d=zs(c.shape,o);return Oe(c,d)}return c}const E6=Re({logSumExp_:W_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(e,t){const n=le(e,"a","logicalAnd","bool"),s=le(t,"b","logicalAnd","bool");dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(e1,o)}const el=Re({logicalAnd_:H_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U_e(e){const n={x:le(e,"x","logicalNot","bool")};return De.runKernel(t1,n)}const FI=Re({logicalNot_:U_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j_e(e,t){const n=le(e,"a","logicalOr","bool"),s=le(t,"b","logicalOr","bool");dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(n1,o)}const T6=Re({logicalOr_:j_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G_e(e,t){const n=le(e,"a","logicalXor","bool"),s=le(t,"b","logicalXor","bool");return dn(n.shape,s.shape),el(T6(e,t),FI(el(e,t)))}const K_e=Re({logicalXor_:G_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q_e(e,t,n,s,o){const r=le(e,"x","maxPool"),i=1;let a=r,l=!1;r.rank===3&&(l=!0,a=Oe(r,[1,r.shape[0],r.shape[1],r.shape[2]])),oe(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),oe(Po(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),er("maxPool",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o},d=De.runKernel(r1,u,c);return l?Oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const LI=Re({maxPool_:q_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(e,t=[1,1,1],n,s,o,r="NDHWC"){const i=le(e,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=Oe(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),oe(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),oe(r==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),er("maxPool3d",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o,dataFormat:r},d=De.runKernel(i1,u,c);return l?Oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const X_e=Re({maxPool3d_:Y_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_e(e,t){let n=le(e,"a","maximum"),s=le(t,"b","maximum");[n,s]=Bs(n,s),n.dtype==="bool"&&(n=Ct(n,"int32"),s=Ct(s,"int32")),dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(eg,o)}const fl=Re({maximum_:Z_e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J_e(e,t=null,n=!1){const o={x:le(e,"x","mean")},r={axis:t,keepDims:n};return De.runKernel(a1,o,r)}const Os=Re({mean_:J_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function no(e,t="float32"){if(t==="complex64"){const s=no(e,"float32"),o=no(e,"float32");return Hp(s,o)}const n=Oo(tt(e),t);return De.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function du(e,t="float32"){if(t==="complex64"){const s=du(e,"float32"),o=no(e,"float32");return Hp(s,o)}const n=xS(tt(e),t);return De.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q_e(e,t=null,n=!1){const o={x:le(e,"x","min")},r={axis:t,keepDims:n};return De.runKernel(l1,o,r)}const eC=Re({min_:Q_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNe(e,t){let n=le(e,"a","minimum"),s=le(t,"b","minimum");[n,s]=Bs(n,s),n.dtype==="bool"&&(n=Ct(n,"int32"),s=Ct(s,"int32")),dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(tg,o)}const Ig=Re({minimum_:eNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(e,t,n){oe(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const s=le(e,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");oe(t.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<s.rank;a++)oe(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),oe(t[a][0]>=0&&t[a][0]<=s.shape[a]-o&&t[a][1]>=0&&t[a][1]<=s.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${s.shape[a]-o} or less than 0 for input of shape ${s.shape}`);const r={paddings:t,mode:n},i={x:s};return De.runKernel(u1,i,r)}const nNe=Re({mirrorPad_:tNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(e,t){let n=le(e,"a","mod"),s=le(t,"b","mod");[n,s]=Bs(n,s);const o={a:n,b:s};return De.runKernel(ng,o)}const oNe=Re({mod_:sNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(e){const t=le(e,"x","square"),n={};return De.runKernel("Square",{x:t},n)}const ls=Re({square_:rNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(e,t=null,n=!1){e=le(e,"x","moments");const s=yn(t,e.shape),o=Os(e,s,n);let r=o.shape;n||(r=zs(o.shape,s));const i=ls(Pt(Ct(e,"float32"),Oe(o,r))),a=Os(i,s,n);return{mean:o,variance:a}}const BI=Re({moments_:iNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(e,t){let n=le(e,"a","notEqual","string_or_numeric"),s=le(t,"b","notEqual","string_or_numeric");[n,s]=Bs(n,s),dn(n.shape,s.shape);const o={a:n,b:s};return De.runKernel(d1,o)}const jp=Re({notEqual_:aNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(e){const n={x:le(e,"x","onesLike")};return De.runKernel(f1,n)}const vi=Re({onesLike_:lNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(e,t,n=0){const s=le(e,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},r={x:s};return De.runKernel(m1,r,o)}const zI=Re({pad_:uNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(e,t,n){const s=le(e,"x","spaceToBatchND");oe(s.rank>=1+t.length,()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`),oe(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),oe(s.shape.reduce((i,a,l)=>l>0&&l<=t.length?i&&(a+n[l-1][0]+n[l-1][1])%t[l-1]===0:i,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const o={x:s},r={blockShape:t,paddings:n};return De.runKernel($1,o,r)}const VI=Re({spaceToBatchND_:cNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dNe(e,t,n,s,o,r,i){o==null&&(o=[1,1]),r==null&&(r=1),s===0&&(s="valid");const a=le(e,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=Oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),oe(Po(r,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`);const c=ki(l.shape,t,r,o,s),d=[c.dilationHeight,c.dilationWidth];let f;s==="same"?f=hNe([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,m]=fNe([c.inHeight,c.inWidth],d,f),g=h?s:"valid",v=h?l:VI(l,d,p),w=(n==="avg"?()=>EI(v,t,r,g,i):()=>LI(v,t,r,g,i))(),y=h?w:_I(w,d,m);return u?Oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function fNe(e,t,n){const s=n.map(c=>c[0]),o=n.map(c=>c[1]),r=e.concat(s,o),i=t.map((c,d)=>(c-r[d]%c)%c),a=o.map((c,d)=>c+i[d]),l=t.map((c,d)=>[s[d],a[d]]),u=t.map((c,d)=>[0,i[d]]);return[l,u]}function hNe(e,t){const s=e.map((i,a)=>i+(i-1)*(t[a]-1)).map(i=>i-1),o=s.map(i=>Math.floor(i/2)),r=s.map((i,a)=>i-o[a]);return s.map((i,a)=>[o[a],r[a]])}const pNe=Re({pool_:dNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNe(e,t){let n=le(e,"base","pow"),s=le(t,"exp","pow");[n,s]=Bs(n,s);const o={a:n,b:s};return De.runKernel(og,o)}const _c=Re({pow_:mNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(e,t){const n=le(e,"x","prelu"),s=le(t,"alpha","prelu"),o={x:n,alpha:s};return De.runKernel(g1,o)}const WI=Re({prelu_:gNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(e,t=null,n=!1){let s=le(e,"x","prod");s.dtype==="bool"&&(s=Ct(s,"int32"));const o={x:s},r={axis:t,keepDims:n};return De.runKernel(JS,o,r)}const bNe=Re({prod_:vNe});var _6={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(ss,e,!1)})(_6);var N6={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(ss,e,!1)})(N6);var A6={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(ss,e,!1)})(A6);var D6={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(ss,e,!1)})(D6);var R6={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,m,g,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=v[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=g,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(ss,e,!1)})(R6);var M6={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(ss,e,!1)})(M6);var O6={exports:{}};(function(e){(function(t,n){var s=this,o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,k,x){var C=[];k=k==!0?{entropy:!0}:k||{};var S=v(g(k.entropy?[y,w(t)]:y==null?b():y,3),C),T=new p(C),A=function(){for(var R=T.g(r),L=l,P=0;R<u;)R=(R+P)*o,L*=o,P=T.g(1);for(;R>=c;)R/=2,L/=2,P>>>=1;return(R+P)/L};return A.int32=function(){return T.g(4)|0},A.quick=function(){return T.g(4)/4294967296},A.double=A,v(w(T.S),t),(k.pass||x||function(R,L,P,V){return V&&(V.S&&m(V,T),R.state=function(){return m(T,{})}),P?(n[a]=R,L):R})(A,S,"global"in k?k.global:this==n,k.state)}n["seed"+a]=h;function p(y){var k,x=y.length,C=this,S=0,T=C.i=C.j=0,A=C.S=[];for(x||(y=[x++]);S<o;)A[S]=S++;for(S=0;S<o;S++)A[S]=A[T=d&T+y[S%x]+(k=A[S])],A[T]=k;(C.g=function(R){for(var L,P=0,V=C.i,H=C.j,F=C.S;R--;)L=F[V=d&V+1],P=P*o+F[d&(F[V]=F[H=d&H+L])+(F[H]=L)];return C.i=V,C.j=H,P})(o)}function m(y,k){return k.i=y.i,k.j=y.j,k.S=y.S.slice(),k}function g(y,k){var x=[],C=typeof y,S;if(k&&C=="object")for(S in y)try{x.push(g(y[S],k-1))}catch{}return x.length?x:C=="string"?y:y+"\0"}function v(y,k){for(var x=y+"",C,S=0;S<x.length;)k[d&S]=d&(C^=k[d&S]*19)+x.charCodeAt(S++);return w(k)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),w(y)}catch{var k=s.navigator,x=k&&k.plugins;return[+new Date,s,x,s.screen,w(t)]}}function w(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(O6);var yNe=_6.exports,wNe=N6.exports,kNe=A6.exports,xNe=D6.exports,CNe=R6.exports,$Ne=M6.exports,Xc=O6.exports;Xc.alea=yNe;Xc.xor128=wNe;Xc.xorwow=kNe;Xc.xorshift7=xNe;Xc.xor4096=CNe;Xc.tychei=$Ne;var P6=Xc;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F6{constructor(t,n,s,o,r){this.mean=t,this.stdDev=n,this.dtype=s,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=r||Math.random();this.random=P6.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let t,n,s=!1;for(;!s;){let o,r,i;do o=2*this.random()-1,r=2*this.random()-1,i=o*o+r*r;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(t))&&(s=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class SNe{constructor(t=0,n=1,s,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=s,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=P6.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function INe(e,t=0,n=1,s,o){if(s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const r=new F6(t,n,s,!1,o),i=$n(e,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const ENe=Re({randomNormal_:INe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(e,t=0,n=1,s="float32",o){const r=$n(e,s),i=new SNe(t,n,null,o);for(let a=0;a<r.values.length;a++)r.values[a]=i.nextValue();return r.toTensor()}const z1=Re({randomUniform_:TNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wb(e,t,n=1,s="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:s};return De.runKernel(QS,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne(e){const n={input:le(e,"input","real")};return De.runKernel(eI,n)}const tC=Re({real_:_Ne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(e){const n={x:le(e,"x","reciprocal")};return De.runKernel(rg,n)}const ANe=Re({reciprocal_:NNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNe(e){const n={x:le(e,"x","relu")};return De.runKernel(ig,n)}const hl=Re({relu_:DNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(e){const n={x:le(e,"x","relu6")};return De.runKernel(ag,n)}const L6=Re({relu6_:RNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNe(e,t){const s={x:le(e,"x","reverse")},o={dims:t};return De.runKernel(w1,s,o)}const Nc=Re({reverse_:MNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ONe(e){const n={x:le(e,"x","round")};return De.runKernel(lg,n)}const B6=Re({round_:ONe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNe(e){const n={x:le(e,"x","rsqrt","float32")};return De.runKernel(ug,n)}const z6=Re({rsqrt_:PNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tn(e,t){if((wa(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&wa(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return R1(e,[],[],t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(e){const n={x:le(e,"x","selu")};return De.runKernel(cg,n)}const V6=Re({selu_:FNe});function LNe(e,t,n,s,o,r=[1,1],i="NHWC"){const a=le(e,"x","separableConv2d"),l=le(t,"depthwiseFilter","separableConv2d"),u=le(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=Oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");oe(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),oe(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),oe(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),oe(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),oe(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],h=l.shape[3];oe(u.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${u.shape[2]}.`);const p=DI(c,l,s,o,i,r),g=Ec(p,u,1,"valid",i);return d?Oe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const W6=Re({separableConv2d_:LNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(e){const n={x:le(e,"x","sign")};return De.runKernel(hg,n)}const zNe=Re({sign_:BNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(e){const n={x:le(e,"x","sin","float32")};return De.runKernel(dg,n)}const H6=Re({sin_:VNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WNe(e){const n={x:le(e,"x","sinh")};return De.runKernel(fg,n)}const U6=Re({sinh_:WNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNe(e,t,n){const s=le(e,"x","slice1d");return oe(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),Qn(s,[t],[n])}const HI=Re({slice1d_:HNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UNe(e,t,n){const s=le(e,"x","slice2d");return oe(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),Qn(s,t,n)}const j6=Re({slice2d_:UNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNe(e,t,n){const s=le(e,"x","slice3d");return oe(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),Qn(s,t,n)}const UI=Re({slice3d_:jNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNe(e,t,n){const s=le(e,"x","slice4d");return oe(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),Qn(s,t,n)}const kb=Re({slice4d_:GNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(e,t=-1){const n=le(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const s={logits:n},o={dim:t};return De.runKernel(I1,s,o)}const jI=Re({softmax_:KNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(e){oe(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return De.runKernel(zS,t)}const G6=Re({fft_:qNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(e){oe(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return De.runKernel(HS,t)}const nC=Re({ifft_:YNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XNe(e){const t=e.shape[e.shape.length-1],n=e.size/t;let s;if(t<=2){const o=Oe(e,[n,t]);s=nC(o)}else{const o=[n,2*(t-1)],r=Oe(tC(e),[n,t]),i=Oe(C6(e),[n,t]),a=Nc(Qn(r,[0,1],[n,t-2]),1),l=Ee(Nc(Qn(i,[0,1],[n,t-2]),1),tn(-1)),u=Ro([r,a],1),c=Ro([i,l],1),d=Oe(Hp(u,c),[o[0],o[1]]);s=nC(d)}if(s=tC(s),e.rank===3&&e.shape[0]!==0){const o=s,r=e.shape[0];s=Oe(s,[r,s.shape[0]/r,s.shape[1]]),o.dispose()}return s}const ZNe=Re({irfft_:XNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JNe(e,t,n=0){const o={x:le(e,"x","split")},r={numOrSizeSplits:t,axis:n};return De.runKernel(S1,o,r)}const Rr=Re({split_:JNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(e,t){oe(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const s=e.size/n;let o;if(t!=null&&t<n){const p=e.shape.map(g=>0),m=e.shape.map(g=>g);m[e.shape.length-1]=t,o=Qn(e,p,m),n=t}else if(t!=null&&t>n){const p=e.shape.map(m=>m);p[e.shape.length-1]=t-n,o=Ro([e,no(p)],e.shape.length-1),n=t}else o=e;const r=An(o),i=Oe(Hp(o,r),[s,n]),a=G6(i),l=Math.floor(n/2)+1,u=tC(a),c=C6(a),d=Rr(u,[l,n-l],u.shape.length-1),f=Rr(c,[l,n-l],c.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,Oe(Hp(d[0],f[0]),h)}const K6=Re({rfft_:QNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAe(e){const n={x:le(e,"x","sqrt","float32")};return De.runKernel(gg,n)}const Ho=Re({sqrt_:eAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tAe(e,t){let n=le(e,"a","squaredDifference"),s=le(t,"b","squaredDifference");[n,s]=Bs(n,s),dn(n.shape,s.shape);const o={a:n,b:s},r={};return De.runKernel(vg,o,r)}const q6=Re({squaredDifference_:tAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nAe(e,t){const n=le(e,"x","squeeze");return Oe(n,au(n.shape,t).newShape)}const Eg=Re({squeeze_:nAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(e,t=0){const n=Kz(e,"tensors","stack","string_or_numeric");oe(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&oe(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const s=n,o={axis:t};return De.runKernel(p1,s,o)}const Ac=Re({stack_:sAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(e,t=0){const s={x:le(e,"x","step")},o={alpha:t};return De.runKernel(xg,s,o)}const Tg=Re({step_:oAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rAe(e,t,n,s,o=0,r=0,i=0,a=0,l=0){const c={x:le(e,"x","stridedSlice","string_or_numeric")},d={begin:t,end:n,strides:s,beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return De.runKernel(lI,c,d)}const iAe=Re({stridedSlice_:rAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aAe(e){const n={x:le(e,"x","tan","float32")};return De.runKernel(yg,n)}const lAe=Re({tan_:aAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _o(e,t){hz(e);const n=D1(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return R1(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qd(e,t,n){if(hz(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=D1(e,n);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return R1(e,t,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uAe(e,t=1,n=!0){const s=le(e,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=s.shape[s.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const r={x:s},i={k:t,sorted:n},[a,l]=De.runKernel(fI,r,i);return{values:a,indices:l}}const cAe=Re({topk_:uAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dAe(e,t=0,n=1,s,o){if(s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new F6(t,n,s,!0,o),i=$n(e,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const Y6=Re({truncatedNormal_:dAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fAe(e,t=0){const n=le(e,"x","unique","string_or_numeric");oe(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},o={axis:t},[r,i]=De.runKernel(pI,s,o);return{values:r,indices:i}}const hAe=Re({unique_:fAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pAe(e,t,n){const s=le(e,"x","unsortedSegmentSum"),o=le(t,"segmentIds","unsortedSegmentSum","int32");oe(bf(n),()=>"numSegments must be of dtype int");const r={x:s,segmentIds:o},i={numSegments:n};return De.runKernel(_1,r,i)}const X6=Re({unsortedSegmentSum_:pAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mAe(e,t=0){const n=le(e,"x","unstack","string_or_numeric");oe(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const s={value:n},o={axis:t};return De.runKernel(T1,s,o)}const Cf=Re({unstack_:mAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gAe(e,t=!0,n,s){return De.makeVariable(e,t,n,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6(e,t){const n=[];for(let r=0;r<t.length;r++)t[r]&&n.push(r);const s=$n(e,"int32"),o=$n([n.length,e.length],"int32");for(let r=0;r<n.length;r++){const i=s.indexToLoc(n[r]),a=r*e.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vAe(e,t="euclidean",n=null,s=!1){e=le(e,"x","norm");const o=J6(e,t,n);let r=o.shape;if(s){const i=yn(n,e.shape);r=zs(o.shape,i)}return Oe(o,r)}function J6(e,t,n=null){if(e.rank===0)return eo(e);if(e.rank!==1&&n===null)return J6(Oe(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Ot(eo(e),n);if(t===1/0)return pa(eo(e),n);if(t===-1/0)return eC(eo(e),n);if(t==="euclidean"||t===2)return Ho(Ot(_c(eo(e),tn(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return pa(Ot(eo(e),n[0]),n[1]-1);if(t===1/0)return pa(Ot(eo(e),n[1]),n[0]);if(t===-1/0)return eC(Ot(eo(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Ho(Ot(ls(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const GI=Re({norm_:vAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bAe(e,t){if(t==null)return e.shape.slice();if(zn(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let s=0;s<e.shape.length;s++)t[s]==null&&e.shape[s]!=null?n.push(e.shape[s]):n.push(t[s]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yAe(e,t,n,s){const o=le(e,"x","dropout");if(oe(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),oe(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof Ws?o.clone():o;const r=bAe(o,n),i=1-t,a=Vt(B1(ht(z1(r,0,1,"float32",s),i)),i);return Ee(o,a)}const wAe=Re({dropout_:yAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kAe(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Q6(e,t,n){const s=1-e%2,o=new Float32Array(e);for(let r=0;r<e;++r){const i=2*Math.PI*r/(e+s-1);o[r]=t-n*Math.cos(i)}return _o(o,"float32")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xAe(e,t,n,s,o,r="NHWC",i){let a=e;e.rank===3&&(a=Oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=Oe(t,[1,t.shape[0],t.shape[1],t.shape[2]])),oe(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),oe(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),oe(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=r==="NHWC"?a.shape[3]:a.shape[1],c=r==="NHWC"?l.shape[3]:l.shape[1];oe(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),oe(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),er("conv2dDerFilter",o,i);const d={x:a,dy:l},f={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,filterShape:n};return De.runKernel(AS,d,f)}const KI=Re({conv2DBackpropFilter_:xAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qI(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return Ee(e,Tg(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function YI(e,t){let n=t;const s=Zs(e.shape,t.shape);return s.length>0&&(n=Ot(n,s)),Oe(n,e.shape)}function XI(e,t,n,s){if(t==="linear")return e;if(t==="relu")return hl(e);if(t==="elu")return F1(e);if(t==="relu6")return L6(e);if(t==="prelu")return WI(e,n);if(t==="leakyrelu")return MI(e,s);if(t==="sigmoid")return Yf(e);throw new Error(`Unknown fused activation ${t}.`)}const ZI=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe({x:e,filter:t,strides:n,pad:s,dataFormat:o="NHWC",dilations:r=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",ZI(De.state.gradientDepth,l)===!1){let k=Ec(e,t,n,s,o,r,i);return a!=null&&(k=ht(k,a)),XI(k,l,u,c)}const d=le(e,"x","conv2d","float32"),f=le(t,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=Oe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),oe(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),oe(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),er("fused conv2d",s,i),oe(h.shape[3]===f.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${f.shape[2]}.`),oe(Po(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),oe(o==="NHWC",()=>`Error in conv2d: got dataFormat of ${o} but only NHWC is currently supported.`);const m=ko(h.shape,f.shape,n,r,s,i);let g;a!=null&&(g=le(a,"bias","fused conv2d"),[g]=Bs(g,d),dn(m.outShape,g.shape));let v;u!=null&&(v=le(u,"prelu weights","fused conv2d"));const b=(k,x)=>{const[C,S,T,A]=x,R=qI(k,T,l);oe(Ic(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const L=NI(S.shape,R,C,n,s),P=KI(S,R,C.shape,n,s),V=[L,P];if(A!=null){const H=YI(A,R);V.push(H)}return V},w={x:h,filter:f,bias:g,preluActivationWeights:v},y={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return a==null?Tc((x,C,S)=>{let T=De.runKernel(mb,w,y);return S([C,x,T]),p&&(T=Oe(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:b}})(h,f):Tc((x,C,S,T)=>{let A=De.runKernel(mb,w,y);return T([C,x,A,S]),p&&(A=Oe(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:b}})(h,f,g)}const $Ae=Re({fusedConv2d_:CAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SAe(e,t,n,s,o,r=[1,1],i){let a=e;e.rank===3&&(a=Oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=Oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:a,dy:l},c={strides:s,pad:o,dimRoundingMode:i,dilations:r,filterShape:n};return De.runKernel(FS,u,c)}const IAe=Re({depthwiseConv2dNativeBackpropFilter_:SAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EAe(e,t,n,s,o,r=[1,1],i){let a=t,l=!1;t.rank===3&&(l=!0,a=Oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:a,filter:n},c={strides:s,pad:o,dimRoundingMode:i,dilations:r,inputShape:e},d=De.runKernel(LS,u,c);return l?Oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const TAe=Re({depthwiseConv2dNativeBackpropInput_:EAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae({a:e,b:t,transposeA:n=!1,transposeB:s=!1,bias:o,activation:r="linear",preluActivationWeights:i,leakyreluAlpha:a}){if(ZI(De.state.gradientDepth,r)===!1){let R=Ln(e,t,n,s);return o!=null&&(R=ht(R,o)),XI(R,r,i,a)}let l=le(e,"a","fused matMul"),u=le(t,"b","fused matMul");[l,u]=Bs(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=s?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=s?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=tt(p),v=tt(m);oe(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${s} must match.`);const w=dn(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,h]),y=n?Oe(l,[g,c,f]):Oe(l,[g,f,c]),k=s?Oe(u,[v,h,d]):Oe(u,[v,d,h]);let x;o!=null&&(x=le(o,"bias","fused matMul"),[x]=Bs(x,l),dn(w,x.shape));let C;i!=null&&(C=le(i,"prelu weights","fused matMul"));const S=(R,L)=>{const[P,V,H,F]=L,M=qI(Oe(R,H.shape),H,r);let B,Y;if(!n&&!s?(B=Ln(M,V,!1,!0),Y=Ln(P,M,!0,!1)):!n&&s?(B=Ln(M,V,!1,!1),Y=Ln(M,P,!0,!1)):n&&!s?(B=Ln(V,M,!1,!0),Y=Ln(P,M,!1,!1)):(B=Ln(V,M,!0,!0),Y=Ln(M,P,!0,!0)),o!=null){const J=YI(F,M);return[B,Y,J]}else return[B,Y]},T={a:y,b:k,bias:x,preluActivationWeights:C},A={transposeA:n,transposeB:s,activation:r,leakyreluAlpha:a};return o==null?Tc((L,P,V)=>{const H=De.runKernel(pb,T,A);return V([L,P,H]),{value:Oe(H,w),gradFunc:S}})(y,k):Tc((L,P,V,H)=>{const F=De.runKernel(pb,T,A);return H([L,P,F,V]),{value:Oe(F,w),gradFunc:S}})(y,k,x)}const UR=Re({fusedMatMul_:_Ae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NAe(e){return Q6(e,.54,.46)}const AAe=Re({hammingWindow_:NAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(e){return Q6(e,.5,.5)}const e8=Re({hannWindow_:DAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RAe(e,t,n,s=!1,o=0){let r=0;const i=[];for(;r+t<=e.size;)i.push(Qn(e,r,t)),r+=n;if(s)for(;r<e.size;){const a=r+t-e.size,l=Ro([Qn(e,r,t-a),L1([a],o)]);i.push(l),r+=n}return i.length===0?qd([],[0,t]):Oe(Ro(i),[i.length,t])}const t8=Re({frame_:RAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(e,t,n,s,o=e8){s==null&&(s=kAe(t));const r=t8(e,t,n),i=Ee(r,o(t));return K6(i,s)}const OAe=Re({stft_:MAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PAe(e,t,n,s,o="bilinear",r=0){const i=le(e,"image","cropAndResize"),a=le(t,"boxes","cropAndResize","float32"),l=le(n,"boxInd","cropAndResize","int32"),u=a.shape[0];oe(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),oe(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),oe(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),oe(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),oe(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),oe(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const c={image:i,boxes:a,boxInd:l},d={method:o,extrapolationValue:r,cropSize:s};return De.runKernel(OS,c,d)}const FAe=Re({cropAndResize_:PAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LAe(e){const t=le(e,"image","flipLeftRight","float32");oe(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return De.runKernel(WS,n,{})}const BAe=Re({flipLeftRight_:LAe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(e){const t=le(e,"image","grayscaleToRGB"),n=t.rank-1,s=t.shape[n];oe(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),oe(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,Pi(t,o)}const VAe=Re({grayscaleToRGB_:zAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WAe(e,t,n=0,s=.5){const o=le(e,"image","rotateWithOffset","float32");oe(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const r={image:o},i={radians:t,fillValue:n,center:s};return De.runKernel(mI,r,i)}const HAe=Re({rotateWithOffset_:WAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jf(e,t,n,s,o,r){s==null&&(s=.5),o==null&&(o=Number.NEGATIVE_INFINITY),r==null&&(r=0);const i=e.shape[0];return n=Math.min(n,i),oe(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),oe(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),oe(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),oe(t.rank===1,()=>"scores must be a 1D tensor"),oe(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),oe(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UAe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=le(e,"boxes","nonMaxSuppression","float32"),i=le(t,"scores","nonMaxSuppression","float32"),a=Jf(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:s,scoreThreshold:o};return De.runKernel(YS,{boxes:r,scores:i},l)}const jAe=Re({nonMaxSuppression_:UAe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GAe(e,t,n){const s=KAe(e,t,n),o=s<0?-(s+1):s;e.splice(o,0,t)}function KAe(e,t,n){return YAe(e,t,n||qAe)}function qAe(e,t){return e>t?1:e<t?-1:0}function YAe(e,t,n){let s=0,o=e.length,r=0,i=!1;for(;s<o;){r=s+(o-s>>>1);const a=n(t,e[r]);a>0?s=r+1:(o=r,i=!a)}return i?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JI(e,t,n,s,o){return tE(e,t,n,s,o,0)}function QI(e,t,n,s,o,r){return tE(e,t,n,s,o,0,!1,r,!0)}function eE(e,t,n,s,o,r){return tE(e,t,n,s,o,r,!0)}function tE(e,t,n,s,o,r,i=!1,a=!1,l=!1){const u=[];for(let g=0;g<t.length;g++)t[g]>o&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(jR);const c=r>0?-.5/r:0,d=[],f=[];for(;d.length<n&&u.length>0;){const g=u.pop(),{score:v,boxIndex:b,suppressBeginIndex:w}=g;if(v<o)break;let y=!1;for(let k=d.length-1;k>=w;--k){const x=XAe(e,b,d[k]);if(x>=s){y=!0;break}if(g.score=g.score*ZAe(s,c,x),g.score<=o)break}g.suppressBeginIndex=d.length,y||(g.score===v?(d.push(b),f.push(g.score)):g.score>o&&GAe(u,g,jR))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=f),l&&(m.validOutputs=h),m}function XAe(e,t,n){const s=e.subarray(t*4,t*4+4),o=e.subarray(n*4,n*4+4),r=Math.min(s[0],s[2]),i=Math.min(s[1],s[3]),a=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-r)*(l-i),p=(d-u)*(f-c);if(h<=0||p<=0)return 0;const m=Math.max(r,u),g=Math.max(i,c),v=Math.min(a,d),b=Math.min(l,f),w=Math.max(v-m,0)*Math.max(b-g,0);return w/(h+p-w)}function ZAe(e,t,n){const s=Math.exp(t*n*n);return n<=e?s:0}function jR(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function JAe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=le(e,"boxes","nonMaxSuppressionAsync"),i=le(t,"scores","nonMaxSuppressionAsync"),a=Jf(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const l=await Promise.all([r.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=JI(u,c,n,s,o);return r!==e&&r.dispose(),i!==t&&i.dispose(),_o(d,"int32")}const QAe=JAe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=le(e,"boxes","nonMaxSuppression"),a=le(t,"scores","nonMaxSuppression"),l=Jf(i,a,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const u={boxes:i,scores:a},c={maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r},d=De.runKernel(ZS,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const tDe=Re({nonMaxSuppressionWithScore_:eDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nDe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=le(e,"boxes","nonMaxSuppressionAsync"),a=le(t,"scores","nonMaxSuppressionAsync"),l=Jf(i,a,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const u=await Promise.all([i.data(),a.data()]),c=u[0],d=u[1],{selectedIndices:f,selectedScores:h}=eE(c,d,n,s,o,r);return i!==e&&i.dispose(),a!==t&&a.dispose(),{selectedIndices:_o(f,"int32"),selectedScores:_o(h)}}const sDe=nDe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=le(e,"boxes","nonMaxSuppression"),a=le(t,"scores","nonMaxSuppression"),l=Jf(i,a,n,s,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,f={boxes:i,scores:a},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:r},p=De.runKernel(XS,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const rDe=Re({nonMaxSuppressionPadded_:oDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function iDe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=le(e,"boxes","nonMaxSuppressionAsync"),a=le(t,"scores","nonMaxSuppressionAsync"),l=Jf(i,a,n,s,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=QI(f,h,u,c,d,r);return i!==e&&i.dispose(),a!==t&&a.dispose(),{selectedIndices:_o(p,"int32"),validOutputs:tn(m,"int32")}}const aDe=iDe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(e,t,n=!1,s=!1){const o=le(e,"images","resizeBilinear");oe(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),oe(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),oe(s===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=Oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:s,size:t},u=De.runKernel(y1,a,l);return i?Oe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const n8=Re({resizeBilinear_:lDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(e,t,n=!1,s=!1){const o=le(e,"images","resizeNearestNeighbor");oe(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),oe(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),oe(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),oe(s===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=Oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:s,size:t},u=De.runKernel(b1,a,l);return i?Oe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const s8=Re({resizeNearestNeighbor_:uDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(e,t="binary",n=!1,s=.5){const o=le(e,"image","threshold"),r=.2989,i=.587,a=.114,l=o.shape[0]*o.shape[1];let u=Ee(_o([s]),255),c,d,f,h;if(oe(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),oe(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),oe(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),oe(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[c,d,f]=Rr(o,[1,1,1],-1);const g=Ee(c,r),v=Ee(d,i),b=Ee(f,a);h=ht(ht(g,v),b)}else h=e;if(t==="otsu"){const g=wTe(Ct(B6(h),"int32"),qz([]),256);u=dDe(g,l)}const p=n?Zf(h,u):xi(h,u);return Ct(Ee(p,255),"int32")}function dDe(e,t){let n=_o([-1]),s=_o([0]),o=_o([0]),r,i,a,l,u,c;for(let d=0;d<e.size-1;d++){r=Qn(e,0,d+1),i=Qn(e,d+1),u=Vt(Ot(r),t),c=Vt(Ot(i),t);const f=Ot(Ee(r,wb(0,r.size)));a=Vt(f,Ot(r));const h=L1(i.shape,r.size),p=ht(wb(0,i.size),h),m=Ee(i,p);l=Vt(Ot(m),Ot(i));const g=Pt(a,l),v=Pt(a,l),b=Ee(u,c);o=Ee(Ee(b,g),v);const w=xi(o,s);s=mr(w,o,s),n=mr(w,_o([d]),n)}return n}const fDe=Re({threshold_:cDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(e,t,n="nearest",s="constant",o=0,r){const i=le(e,"image","transform","float32"),a=le(t,"transforms","transform","float32");oe(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),oe(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),oe(r==null||r.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`);const l={image:i,transforms:a},u={interpolation:n,fillMode:s,fillValue:o,outputShape:r};return De.runKernel(hI,l,u)}const pDe=Re({transform_:hDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mDe(e,t,n){oe(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),oe(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const s=le(e,"a","bandPart");oe(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const o=s.shape,[r,i]=s.shape.slice(-2);if(!(t<=r))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${r}).`);if(!(n<=i))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`);t<0&&(t=r),n<0&&(n=i);const a=Oe(wb(0,r,1,"int32"),[-1,1]),l=wb(0,i,1,"int32"),u=Pt(a,l),c=el(Zf(u,tn(+t,"int32")),Xf(u,tn(-n,"int32"))),d=no([r,i],s.dtype);return Oe(Ac(Cf(Oe(s,[-1,r,i])).map(f=>mr(c,f,d))),o)}const gDe=Re({bandPart_:mDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(e){let t;if(Array.isArray(e)){t=!1,oe(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=e[0].shape[0];for(let r=1;r<e.length;++r)oe(e[r].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[r].shape[0]} vs. ${o})`)}else t=!0,e=Rr(e,e.shape[0],0).map(o=>Eg(o,[0]));oe(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],s=e;for(let o=0;o<e.length;++o)n.push(De.tidy(()=>{let r=s[o];if(o>0)for(let i=0;i<o;++i){const a=Ee(Ot(Ee(n[i],r)),n[i]);r=Pt(r,a)}return Vt(r,GI(r,"euclidean"))}));return t?Ac(n,0):n}const bDe=Re({gramSchmidt_:vDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(e,t=!1){if(oe(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return GR(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((l,u)=>l*u),s=Cf(Oe(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],r=[];s.forEach(l=>{const[u,c]=GR(l,t);o.push(u),r.push(c)});const i=Oe(Ac(o,0),e.shape),a=Oe(Ac(r,0),e.shape);return[i,a]}}function GR(e,t=!1){return De.tidy(()=>{oe(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],s=e.shape[1];let o=x6(n),r=cc(e);const i=qd([[1]],[1,1]);let a=cc(i);const l=n>=s?s:n;for(let u=0;u<l;++u){const c=r,d=a,f=o;[a,r,o]=De.tidy(()=>{const h=Qn(r,[u,u],[n-u,1]),p=GI(h),m=Qn(r,[u,u],[1,1]),g=mr(xi(m,0),qd([[-1]]),qd([[1]])),v=Pt(m,Ee(g,p)),b=Vt(h,v);b.shape[0]===1?a=cc(i):a=Ro([i,Qn(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const w=As(Vt(Ln(g,v),p)),y=Qn(r,[u,0],[n-u,s]),k=Ee(w,a),x=Fn(a);if(u===0)r=Pt(y,Ln(k,Ln(x,y)));else{const T=Pt(y,Ln(k,Ln(x,y)));r=Ro([Qn(r,[0,0],[u,s]),T],0)}const C=Fn(k),S=Qn(o,[0,u],[n,o.shape[1]-u]);if(u===0)o=Pt(S,Ln(Ln(S,a),C));else{const T=Pt(S,Ln(Ln(S,a),C));o=Ro([Qn(o,[0,0],[n,u]),T],1)}return[a,r,o]}),xn([c,d,f])}return!t&&n>s&&(o=Qn(o,[0,0],[n,s]),r=Qn(r,[0,0],[s,s])),[o,r]})}const wDe=Re({qr_:yDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Yo;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Yo||(Yo={}));function kDe(e,t,n=Yo.SUM_BY_NONZERO_WEIGHTS){const s=le(e,"losses","computeWeightedLoss");let o=null;t!=null&&(o=le(t,"weights","computeWeightedLoss"));const r=o==null?s:Ee(s,o);if(n===Yo.NONE)return r;if(n===Yo.SUM)return Ot(r);if(n===Yo.MEAN){if(o==null)return Os(r);{const i=s.size/o.size,a=Vt(Ot(r),Ot(o));return i>1?Vt(a,tn(i)):a}}if(n===Yo.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Vt(Ot(r),tn(s.size));{const i=Ee(o,du(s.shape)),a=Ct(Ot(jp(i,tn(0))),"float32");return Vt(Ot(r),a)}}throw Error(`Unknown reduction: ${n}`)}const fu=Re({computeWeightedLoss_:kDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xDe(e,t,n,s=Yo.SUM_BY_NONZERO_WEIGHTS){const o=le(e,"labels","absoluteDifference"),r=le(t,"predictions","absoluteDifference");let i=null;n!=null&&(i=le(n,"weights","absoluteDifference")),wi(o.shape,r.shape,"Error in absoluteDifference: ");const a=eo(Pt(o,r));return fu(a,i,s)}const ast=Re({absoluteDifference_:xDe});function CDe(e,t,n,s,o=Yo.SUM_BY_NONZERO_WEIGHTS){const r=le(e,"labels","cosineDistance"),i=le(t,"predictions","cosineDistance");let a=null;s!=null&&(a=le(s,"weights","cosineDistance")),wi(r.shape,i.shape,"Error in cosineDistance: ");const l=tn(1),u=Pt(l,Ot(Ee(r,i),n,!0));return fu(u,a,o)}const lst=Re({cosineDistance_:CDe});function $De(e,t,n,s=Yo.SUM_BY_NONZERO_WEIGHTS){let o=le(e,"labels","hingeLoss");const r=le(t,"predictions","hingeLoss");let i=null;n!=null&&(i=le(n,"weights","hingeLoss")),wi(o.shape,r.shape,"Error in hingeLoss: ");const a=tn(1);o=Pt(Ee(tn(2),o),a);const l=hl(Pt(a,Ee(o,r)));return fu(l,i,s)}const ust=Re({hingeLoss_:$De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(e,t,n,s=1,o=Yo.SUM_BY_NONZERO_WEIGHTS){const r=le(e,"labels","huberLoss"),i=le(t,"predictions","huberLoss");let a=null;n!=null&&(a=le(n,"weights","huberLoss")),wi(r.shape,i.shape,"Error in huberLoss: ");const l=tn(s),u=eo(Pt(i,r)),c=Ig(u,l),d=Pt(u,c),f=ht(Ee(tn(.5),ls(c)),Ee(l,d));return fu(f,a,o)}const cst=Re({huberLoss_:SDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(e,t,n,s=1e-7,o=Yo.SUM_BY_NONZERO_WEIGHTS){const r=le(e,"labels","logLoss"),i=le(t,"predictions","logLoss");let a=null;n!=null&&(a=le(n,"weights","logLoss")),wi(r.shape,i.shape,"Error in logLoss: ");const l=tn(1),u=tn(s),c=As(Ee(r,gi(ht(i,u)))),d=Ee(Pt(l,r),gi(ht(Pt(l,i),u))),f=Pt(c,d);return fu(f,a,o)}const dst=Re({logLoss_:IDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(e,t,n,s=Yo.SUM_BY_NONZERO_WEIGHTS){const o=le(e,"labels","meanSquaredError"),r=le(t,"predictions","meanSquaredError");let i=null;n!=null&&(i=le(n,"weights","meanSquaredError")),wi(o.shape,r.shape,"Error in meanSquaredError: ");const a=q6(o,r);return fu(a,i,s)}const fst=Re({meanSquaredError_:EDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(e,t){const n=le(e,"labels","sigmoidCrossEntropyWithLogits"),s=le(t,"logits","sigmoidCrossEntropyWithLogits");wi(n.shape,s.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=hl(s),r=Ee(s,n),i=OI(mi(As(eo(s))));return ht(Pt(o,r),i)}function _De(e,t,n,s=0,o=Yo.SUM_BY_NONZERO_WEIGHTS){let r=le(e,"multiClassLabels","sigmoidCrossEntropy");const i=le(t,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=le(n,"weights","sigmoidCrossEntropy")),wi(r.shape,i.shape,"Error in sigmoidCrossEntropy: "),s>0){const u=tn(s),c=tn(1),d=tn(.5);r=ht(Ee(r,Pt(c,u)),Ee(d,u))}const l=TDe(r,i);return fu(l,a,o)}const hst=Re({sigmoidCrossEntropy_:_De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Tc((o,r,i)=>{const l=E6(r,[n],!0),u=Pt(Ct(r,"float32"),l);i([o,u]);const c=As(Ee(u,o));return{value:Ot(c,[n]),gradFunc:(h,p)=>{const[m,g]=p,v=zs(h.shape,[n]);return[Ee(Oe(h,v),Pt(Ct(m,"float32"),mi(g))),Ee(Oe(h,v),Pt(mi(g),Ct(m,"float32")))]}}})(e,t)}function ADe(e,t,n,s=0,o=Yo.SUM_BY_NONZERO_WEIGHTS){let r=le(e,"onehotLabels","softmaxCrossEntropy");const i=le(t,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=le(n,"weights","softmaxCrossEntropy")),wi(r.shape,i.shape,"Error in softmaxCrossEntropy: "),s>0){const u=tn(s),c=tn(1),d=tn(r.shape[1]);r=ht(Ee(r,Pt(c,u)),Vt(u,d))}const l=NDe(r,i);return fu(l,a,o)}const pst=Re({softmaxCrossEntropy_:ADe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(e,t,n,s){const o=le(e,"indices","sparseFillEmptyRows","int32"),r=le(t,"values","sparseFillEmptyRows"),i=le(n,"denseShape","sparseFillEmptyRows","int32"),a=le(s,"defaultValue","sparseFillEmptyRows",r.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(r.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${r.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:o,values:r,denseShape:i,defaultValue:a},u=De.runKernel(sI,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const mst=Re({sparseFillEmptyRows_:DDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(e,t,n){const s=le(e,"inputIndices","sparseReshape","int32"),o=le(t,"inputShape","sparseReshape","int32"),r=le(n,"newShape","sparseReshape","int32");if(s.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${s.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(r.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${r.shape}`);const i={inputIndices:s,inputShape:o,newShape:r},a=De.runKernel(oI,i);return{outputIndices:a[0],outputShape:a[1]}}const gst=Re({sparseReshape_:RDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(e,t,n){const s=le(e,"data","sparseSegmentMean"),o=le(t,"indices","sparseSegmentMean","int32"),r=le(n,"segmentIds","sparseSegmentMean","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(r.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${r.shape}`);const i={data:s,indices:o,segmentIds:r};return De.runKernel(rI,i)}const vst=Re({sparseSegmentMean_:MDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(e,t,n){const s=le(e,"data","sparseSegmentSum"),o=le(t,"indices","sparseSegmentSum","int32"),r=le(n,"segmentIds","sparseSegmentSum","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(r.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${r.shape}`);const i={data:s,indices:o,segmentIds:r};return De.runKernel(iI,i)}const bst=Re({sparseSegmentSum_:ODe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(e,t,n,s,o,r,i,a){const l=le(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=le(t,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:s,leftPad:o,rightPad:r,padWidth:i,preserveShortSequences:a},d={data:l,dataSplits:u},f=De.runKernel(uI,d,c);return{nGrams:f[0],nGramsSplits:f[1]}}const yst=Re({stringNGrams_:PDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(e,t,n=!0){const s=le(e,"input","stringSplit","string"),o=le(t,"delimiter","stringSplit","string");if(s.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${s.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const r={skipEmpty:n},i={input:s,delimiter:o},a=De.runKernel(cI,i,r);return{indices:a[0],values:a[1],shape:a[2]}}const wst=Re({stringSplit_:FDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(e,t){const n=le(e,"input","stringToHashBucketFast","string"),s={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return De.runKernel(dI,o,s)}const kst=Re({stringToHashBucketFast_:LDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BDe={hammingWindow:AAe,hannWindow:e8,frame:t8,stft:OAe},M0={flipLeftRight:BAe,grayscaleToRGB:VAe,resizeNearestNeighbor:s8,resizeBilinear:n8,rotateWithOffset:HAe,cropAndResize:FAe,nonMaxSuppression:jAe,nonMaxSuppressionAsync:QAe,nonMaxSuppressionWithScore:tDe,nonMaxSuppressionWithScoreAsync:sDe,nonMaxSuppressionPadded:rDe,nonMaxSuppressionPaddedAsync:aDe,threshold:fDe,transform:pDe},zDe={bandPart:gDe,gramSchmidt:bDe,qr:wDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hu extends qf{minimize(t,n=!1,s){const{value:o,grads:r}=this.computeGradients(t,s);if(s!=null){const i=s.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(i)}else this.applyGradients(r);return xn(r),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return R_e(t,n)}dispose(){this.iterations_!=null&&xn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:tn(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(hu,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nE extends hu{constructor(t,n,s=null){super(),this.learningRate=t,this.rho=n,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=De.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=De.registeredVariables[s],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accum_grad`,variable:Ge(()=>An(r).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${s}/accum_var`,variable:Ge(()=>An(r).variable(i))});const a=Array.isArray(t)?t[o].tensor:t[s];if(a==null)return;const l=this.accumulatedGrads[o].variable,u=this.accumulatedUpdates[o].variable;Ge(()=>{const c=ht(Ee(l,this.rho),Ee(ls(a),1-this.rho)),d=Ee(Vt(Ho(ht(u,this.epsilon)),Ho(ht(l,this.epsilon))),a),f=ht(Ee(u,this.rho),Ee(ls(d),1-this.rho));l.assign(c),u.assign(f);const h=ht(Ee(d,-this.learningRate),r);r.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(xn(this.accumulatedGrads.map(t=>t.variable)),xn(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,s=!1;this.accumulatedGrads=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedUpdates=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}nE.className="Adadelta";ut(nE);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sE extends hu{constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=De.registeredVariables[s];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accumulator`,variable:Ge(()=>L1(r.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(t)?t[o].tensor:t[s];if(i==null)return;const a=this.accumulatedGrads[o].variable;Ge(()=>{const l=ht(a,ls(i));a.assign(l);const u=ht(Ee(Vt(i,Ho(ht(l,De.backend.epsilon()))),-this.learningRate),r);r.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&xn(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}sE.className="Adagrad";ut(sE);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oE extends hu{constructor(t,n,s,o=null){super(),this.learningRate=t,this.beta1=n,this.beta2=s,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ge(()=>{this.accBeta1=tn(n).variable(),this.accBeta2=tn(s).variable()}),o==null&&(this.epsilon=De.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);Ge(()=>{const s=Pt(1,this.accBeta1),o=Pt(1,this.accBeta2);n.forEach((r,i)=>{const a=De.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:Ge(()=>An(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${r}/v`,variable:Ge(()=>An(a).variable(l))});const u=Array.isArray(t)?t[i].tensor:t[r];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,f=ht(Ee(c,this.beta1),Ee(u,1-this.beta1)),h=ht(Ee(d,this.beta2),Ee(ls(u),1-this.beta2)),p=Vt(f,s),m=Vt(h,o);c.assign(f),d.assign(h);const g=ht(Ee(Vt(p,ht(Ho(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(Ee(this.accBeta1,this.beta1)),this.accBeta2.assign(Ee(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&xn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&xn(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),Ge(()=>{this.accBeta1.assign(_c(this.beta1,this.iterations_+1)),this.accBeta2.assign(_c(this.beta2,this.iterations_+1))});const n=t.length/2,s=!1;this.accumulatedFirstMoment=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}oE.className="Adam";ut(oE);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rE extends hu{constructor(t,n,s,o=null,r=0){super(),this.learningRate=t,this.beta1=n,this.beta2=s,this.epsilon=o,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ge(()=>{this.iteration=tn(0).variable(),this.accBeta1=tn(n).variable()}),o==null&&(this.epsilon=De.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);Ge(()=>{const s=Pt(1,this.accBeta1),o=Vt(-this.learningRate,ht(Ee(this.iteration,this.decay),1));n.forEach((r,i)=>{const a=De.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:An(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${r}/v`,variable:An(a).variable(l)});const u=Array.isArray(t)?t[i].tensor:t[r];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,f=ht(Ee(c,this.beta1),Ee(u,1-this.beta1)),h=Ee(d,this.beta2),p=eo(u),m=fl(h,p);c.assign(f),d.assign(m);const g=ht(Ee(Vt(o,s),Vt(f,ht(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(ht(this.iteration,1)),this.accBeta1.assign(Ee(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&xn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&xn(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}rE.className="Adamax";ut(rE);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V1 extends hu{constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Array.isArray(t)?t[o].tensor:t[s];if(r==null)return;const i=De.registeredVariables[s];Ge(()=>{const a=ht(Ee(this.c,r),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=ka(tn(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}V1.className="SGD";ut(V1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iE extends V1{constructor(t,n,s=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=s,this.accumulations=[],this.m=tn(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=De.registeredVariables[s];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${s}/momentum`,variable:Ge(()=>An(r).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(t)?t[o].tensor:t[s];a!=null&&Ge(()=>{let l;const u=ht(Ee(this.m,i),a);this.useNesterov?l=ht(Ee(this.c,ht(a,Ee(u,this.m))),r):l=ht(Ee(this.c,u),r),i.assign(u),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&xn(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}iE.className="Momentum";ut(iE);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aE extends hu{constructor(t,n=.9,s=0,o=null,r=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=s,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,o==null&&(this.epsilon=De.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=De.registeredVariables[s],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${s}/rms`,variable:Ge(()=>An(r).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${s}/momentum`,variable:Ge(()=>An(r).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${s}/mg`,variable:Ge(()=>An(r).variable(i))});const a=Array.isArray(t)?t[o].tensor:t[s];if(a==null)return;const l=this.accumulatedMeanSquares[o].variable,u=this.accumulatedMoments[o].variable;Ge(()=>{const c=ht(Ee(l,this.decay),Ee(ls(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=ht(Ee(d,this.decay),Ee(a,1-this.decay)),h=Vt(Ee(a,this.learningRate),Ho(Pt(c,ht(ls(f),this.epsilon)))),p=ht(Ee(u,this.momentum),h);l.assign(c),d.assign(f),u.assign(p);const m=Pt(r,p);r.assign(m)}else{const d=ht(Ee(l,this.decay),Ee(ls(a),1-this.decay)),f=ht(Ee(u,this.momentum),Vt(Ee(a,this.learningRate),Ho(ht(d,this.epsilon))));l.assign(d),u.assign(f);const h=Pt(r,f);r.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&xn(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&xn(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&xn(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,s=!1;this.accumulatedMeanSquares=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedMoments=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}aE.className="RMSProp";ut(aE);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nu{static sgd(t){return new V1(t)}static momentum(t,n,s=!1){return new iE(t,n,s)}static rmsprop(t,n=.9,s=0,o=null,r=!1){return new aE(t,n,s,o,r)}static adam(t=.001,n=.9,s=.999,o=null){return new oE(t,n,s,o)}static adadelta(t=.001,n=.95,s=null){return new nE(t,n,s)}static adamax(t=.002,n=.9,s=.999,o=null,r=0){return new rE(t,n,s,o,r)}static adagrad(t,n=.1){return new sE(t,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kd={sgd:Nu.sgd,momentum:Nu.momentum,adadelta:Nu.adadelta,adagrad:Nu.adagrad,rmsprop:Nu.rmsprop,adamax:Nu.adamax,adam:Nu.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VDe=(()=>typeof requestAnimationFrame!="undefined"?requestAnimationFrame:typeof setImmediate!="undefined"?setImmediate:e=>e())();function o8(){return new Promise(e=>VDe(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lE(e,t){const n=e[0].length;e.forEach((o,r)=>{oe(o.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same as the rank of the rest (${n})`)}),oe(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const s=e[0];e.forEach((o,r)=>{for(let i=0;i<n;i++)oe(i===t||o[i]===s[i],()=>`Error in concat${n}D: Shape of tensors[${r}] (${o}) does not match the shape of the rest (${s}) along the non-concatenated axis ${r}.`)})}function ma(e,t){const n=e[0].slice();for(let s=1;s<e.length;s++)n[t]+=e[s][t];return n}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uE=30;function W1(e){return e<=uE?e:Px(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cE(e,t,n){const s=n*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[s,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _g(e,t,n,s=!0){let o=[];if(s)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const r=t.length;for(let i=0;i<r;++i)o=o.concat([e[i+1]/t[i],t[i]]);o=o.concat(e.slice(r+1))}return o}function Ng(e,t,n=!0){const s=[];if(n){s.push(t);for(let o=t+1;o<e;++o)o<=2*t?(s.push(o),s.push(o-(t+1))):s.push(o)}else{const o=[],r=[];for(let i=1;i<e;++i)i>=t*2+1||i%2===1?r.push(i):o.push(i);s.push(...o),s.push(0),s.push(...r)}return s}function Ag(e,t,n,s=!0){const o=[];s?o.push(e[0]/n):o.push(e[0]*n);for(let r=1;r<e.length;++r)r<=t.length?s?o.push(t[r-1]*e[r]):o.push(e[r]/t[r-1]):o.push(e[r]);return o}function dE(e,t){const n=[0];for(let s=0;s<t;++s)n.push(e[s][0]);return n}function fE(e,t,n){const s=e.slice(0,1);for(let o=0;o<n;++o)s.push(e[o+1]-t[o][0]-t[o][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H1=1.7580993408473768,U1=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hE=.3275911,pE=.254829592,mE=-.284496736,gE=1.421413741,vE=-1.453152027,bE=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tl(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let s=0;s<n.length;s+=2)n[s]=e[s/2],n[s+1]=t[s/2];return n}function r8(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let s=0;s<e.length;s+=2)t[s/2]=e[s],n[s/2]=e[s+1];return{real:t,imag:n}}function i8(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),s=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:n,imag:s}}function a8(e){const t=Math.floor(e.length/4),n=new Float32Array(t),s=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:n,imag:s}}function yE(e,t){const n=e[t*2],s=e[t*2+1];return{real:n,imag:s}}function l8(e,t,n,s){e[s*2]=t,e[s*2+1]=n}function u8(e,t){const n=new Float32Array(e/2),s=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const r=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(r),s[o]=Math.sin(r)}return{real:n,imag:s}}function c8(e,t,n){const s=(n?2:-2)*Math.PI*(e/t),o=Math.cos(s),r=Math.sin(s);return{real:o,imag:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K2="->",WDe=/->/g,KR=",",qR="...";function wE(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(WDe,"").length)/K2.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${K2}").`);const[s,o]=e.split(K2);oe(s.indexOf(qR)===-1,()=>`The ellipsis notation ("${qR}") is not supported yet.`);const r=s.split(KR),i=r.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<o.length;++f){const h=o[f];if(!r.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<s.length;++f){const h=s[f];a.indexOf(h)===-1&&h!==KR&&a.push(h)}const l=new Array(r.length);for(let f=0;f<i;++f){if(new Set(r[f].split("")).size!==r[f].length)throw new Error(`Found duplicate axes in input component ${r[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<r[f].length;++h)l[f].push(a.indexOf(r[f][h]))}const u=a.length,c=o.length,d=[];for(let f=c;f<u;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function kE(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;const s=[];for(let o=0;o<e;++o)n[o]===-1&&s.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:s}}function xE(e,t,n){const s=new Array(e);for(let o=0;o<n.length;++o){const r=n[o].shape;for(let i=0;i<t[o].length;++i)s[t[o][i]]===void 0?s[t[o][i]]=r[i]:oe(s[t[o][i]]===r[i],()=>`Expected dimension ${s[t[o][i]]} at axis ${i} of input shaped ${JSON.stringify(r)}, but got dimension ${r[i]}`)}}function CE(e,t){const n=e,s=[];let o=0;e.length===0&&n.push(-1),o=e.length+1;for(let i=0;i<o;++i)s.push([]);const r=[];for(let i=0;i<n.length;++i){const a=n[i],l=HDe(t,a);for(const u of l)r.indexOf(u)===-1&&(s[i].push(u),r.push(u))}return{path:n,steps:s}}function $E(e){return e.every((t,n)=>t===n)}function HDe(e,t){const n=[];for(let s=0;s<e.length;++s)(e[s].length===0||e[s].indexOf(t)!==-1||t===-1)&&n.push(s);return n}function SE(e,t,n=0){let s=[];if(typeof t=="number")oe(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),s=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce((i,a)=>(a===-1&&(i+=1),i),0);oe(o<=1,()=>"There should be only one negative value in split array.");const r=t.indexOf(-1);if(r!==-1){const i=t.reduce((a,l)=>l>0?a+l:a);t[r]=e.shape[n]-i}oe(e.shape[n]===t.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),s=t}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d8(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function f8(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function h8(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function m8(e,t){return`size ${e} must be non-negative, not ${t}`}function g8(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function v8(e,t){const n=tt(e),s=tt(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${e} outputShape= ${t}`}function b8(e,t){const n=tt(e),s=tt(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${s}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sC(){return"segment ids must be >= 0"}function y8(){return"segment ids are not increasing"}function w8(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function k8(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8(e,t){let n=!1,s;for(e<=uE?(s=e,n=!0):s=Px(e,Math.floor(Math.sqrt(e)));!n;)s>t||s===e?n=!0:s=Px(e,s+1);return s}function C8(e,t,n){const s=[],o=e.length;for(let r=0;r<o;r++)r!==t?s.push(e[r]):s.push(n);return s}function IE(e,t,n,s){const o=t.shape.length,r=e.shape.length;if(s!==0&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>r)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${r}).`);if(n<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${n}).`);for(let d=0;d<s;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const i=e.shape[n],a=[];let l=1,u=1,c=1;for(let d=0;d<s;++d)a.push(e.shape[d]),l*=e.shape[d];for(let d=s;d<n;d++)a.push(e.shape[d]),u*=e.shape[d];for(let d=s;d<o;d++)a.push(t.shape[d]);for(let d=n+1;d<r;d++)a.push(e.shape[d]),c*=e.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:a}}var UDe=Object.freeze(Object.defineProperty({__proto__:null,segOpComputeOptimalWindowSize:x8,computeOutShape:C8,collectGatherOpShapeInfo:IE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dc(e){try{return e.map(t=>wf(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function $8(e){return e.map(t=>Hl(t))}var jDe=Object.freeze(Object.defineProperty({__proto__:null,slice_util:IEe,segment_util:UDe,fromUint8ToStringArray:Dc,fromStringArrayToUint8:$8,upcastType:pr,axesAreInnerMostDims:PI,combineLocations:I6,computeOutAndReduceShapes:lo,expandShapeToKeepDim:zs,assertAxesAreInnerMostDims:xo,getAxesPermutation:Es,getUndoAxesPermutation:cu,getInnerMostAxes:Ms,getBroadcastDims:xf,getReductionAxes:Zs,assertAndGetBroadcastShape:dn,assertParamsConsistent:lE,computeOutShape:ma,computeDilation2DInfo:$g,computePool2DInfo:ki,computePool3DInfo:cl,computeConv2DInfo:ko,computeConv3DInfo:uu,computeDefaultPad:II,tupleValuesAreOne:Ic,eitherStridesOrDilationsAreOne:Po,convertConv2DDataFormat:dl,checkPadOnDimRoundingMode:er,getFusedDyActivation:qI,getFusedBiasGradient:YI,applyActivation:XI,shouldFuse:ZI,PARALLELIZE_THRESHOLD:uE,computeOptimalWindowSize:W1,getImageCenter:cE,getReshaped:_g,getPermuted:Ng,getReshapedPermuted:Ag,getSliceBeginCoords:dE,getSliceSize:fE,prepareAndValidate:wI,validateUpdateShape:r6,validateInput:kEe,calculateShapes:Cg,SELU_SCALEALPHA:H1,SELU_SCALE:U1,ERF_P:hE,ERF_A1:pE,ERF_A2:mE,ERF_A3:gE,ERF_A4:vE,ERF_A5:bE,warn:Er,log:hIe,mergeRealAndImagArrays:tl,splitRealAndImagArrays:r8,complexWithEvenIndex:i8,complexWithOddIndex:a8,getComplexWithIndex:yE,assignToTypedArray:l8,exponents:u8,exponent:c8,decodeEinsumEquation:wE,getEinsumPermutation:kE,checkEinsumDimSizes:xE,getEinsumComputePath:CE,isIdentityPermutation:$E,prepareSplitSize:SE,getSparseFillEmptyRowsIndicesDenseShapeMismatch:d8,getSparseFillEmptyRowsNegativeIndexErrorMessage:f8,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:h8,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:p8,getSparseReshapeNegativeOutputDimErrorMessage:m8,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:g8,getSparseReshapeInputOutputMultipleErrorMessage:v8,getSparseReshapeInputOutputMismatchErrorMessage:b8,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:sC,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:y8,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:w8,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:k8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S8={kernelName:Ay,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(e,Tg(Ct(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe={kernelName:Tm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=ls(Ct(n,"float32")),o=Ho(Pt(tn(1),s));return As(Vt(e,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KDe={kernelName:_m,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=Ho(Pt(ls(Ct(n,"float32")),1));return Vt(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qDe={kernelName:Kf,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=dn(n.shape,s.shape);return{a:()=>{let a=e;const l=Zs(n.shape,o);return l.length>0&&(a=Ot(a,l)),Oe(a,n.shape)},b:()=>{let a=e;const l=Zs(s.shape,o);return l.length>0&&(a=Ot(a,l)),Oe(a,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YDe={kernelName:$S,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((s,o)=>{n[o]=()=>e.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDe={kernelName:Dy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>An(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZDe={kernelName:Ry,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>An(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JDe={kernelName:Nm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vt(e,Ho(Pt(tn(1),ls(Ct(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QDe={kernelName:Am,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=Ho(ht(tn(1),ls(Ct(n,"float32"))));return Vt(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe={kernelName:Mm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=dn(n.shape,s.shape);return{a:()=>{const a=ht(ls(n),ls(s));let l=Ee(e,Vt(s,a));const u=Zs(n.shape,o);return u.length>0&&(l=Ot(l,u)),Oe(l,n.shape)},b:()=>{const a=ht(ls(n),ls(s));let l=As(Ee(e,Vt(n,a)));const u=Zs(s.shape,o);return u.length>0&&(l=Ot(l,u)),Oe(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRe={kernelName:Dm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vt(e,ht(ls(Ct(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nRe={kernelName:Rm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vt(e,Pt(tn(1),ls(Ct(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sRe(e,t,n,s,o,r){const i=le(e,"dy","avgPool3dGrad"),a=le(t,"input","avgPool3dGrad");let l=i,u=a,c=!1;a.rank===4&&(c=!0,l=Oe(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=Oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),oe(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),oe(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),er("avgPool3dGrad",o,r);const d={dy:l,input:u},f={filterSize:n,strides:s,pad:o,dimRoundingMode:r},h=De.runKernel(TS,d,f);return c?Oe(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const oRe=Re({avgPool3dGrad_:sRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rRe={kernelName:Oy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{filterSize:o,strides:r,pad:i,dimRoundingMode:a}=n;return{x:()=>oRe(e,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(e,t,n,s,o){const r=le(e,"dy","avgPoolGrad"),i=le(t,"input","avgPoolGrad");oe(i.rank===r.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${r.rank})`);let a=i,l=r,u=!1;i.rank===3&&(u=!0,a=Oe(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=Oe(r,[1,r.shape[0],r.shape[1],r.shape[2]])),oe(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),oe(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},d={filterSize:n,strides:s,pad:o},f=De.runKernel(ES,c,d);return u?Oe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const aRe=Re({avgPoolGrad_:iRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lRe={kernelName:My,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{filterSize:o,strides:r,pad:i}=n;return{x:()=>aRe(e,s,o,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRe={kernelName:Py,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[s,o]=t,{transposeA:r,transposeB:i}=n;return!r&&!i?{a:()=>Ln(e,o,!1,!0),b:()=>Ln(s,e,!0,!1)}:!r&&i?{a:()=>Ln(e,o,!1,!1),b:()=>Ln(e,s,!0,!1)}:r&&!i?{a:()=>Ln(o,e,!1,!0),b:()=>Ln(s,e,!1,!1)}:{a:()=>Ln(o,e,!0,!0),b:()=>Ln(e,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cRe={kernelName:Fy,gradFunc:(e,t,n)=>{const{blockShape:s,crops:o}=n;return{x:()=>VI(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dRe={kernelName:cIe,gradFunc:(e,t,n)=>{const s=n,o=s.inputShape,r=s.shape,i=Array.from(r);for(let l=o.length-1;l>=0;l--)if(o[l]===r[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>Ot(e,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fRe={kernelName:Om,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hRe={kernelName:Pm,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pRe={kernelName:Fm,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{clipValueMin:o,clipValueMax:r}=n;return{x:()=>mr(el(Xf(s,o),Zf(s,r)),e,An(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mRe={kernelName:Ly,inputsToSave:["x"],gradFunc:S8.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gRe={kernelName:By,saveAllInputs:!0,gradFunc:(e,t,n)=>{const s=t.map(l=>l.shape),{axis:o}=n,r=yn(o,t[0].shape)[0],i=s.map(l=>l[r]);return Rr(e,i,r).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vRe={kernelName:zy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,{dilations:r,strides:i,pad:a,dataFormat:l}=n;return oe(Ic(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>NI(s.shape,e,o,i,a,l),filter:()=>KI(s,e,o.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bRe={kernelName:Vy,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,{strides:r,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Ec(e,o,r,i,a,1,l),filter:()=>KI(e,s,o.shape,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(e,t,n,s,o){let r=e;e.rank===4&&(r=Oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;i.rank===4&&(i=Oe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),oe(r.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),oe(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),oe(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),oe(r.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${n[3]}.`),oe(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:r,dy:i},l={strides:s,pad:o,filterShape:n};return De.runKernel(DS,a,l)}const wRe=Re({conv3DBackpropFilter_:yRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kRe={kernelName:Wy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:s,strides:o,pad:r}=n;oe(Ic(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[i,a]=t;return{x:()=>y6(i.shape,e,a,o,r),filter:()=>wRe(i,e,a.shape,o,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xRe={kernelName:Lm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(As(H6(Ct(n,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CRe={kernelName:Bm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(U6(Ct(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Re={kernelName:Hy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{axis:o,exclusive:r,reverse:i}=n;return{x:()=>{const a=Es([o],s.rank);let l=k6(e,o,r,!i);return a!=null&&(l=Fn(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SRe={kernelName:Uy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:s,strides:o,pad:r,dimRoundingMode:i}=n,a=s==null?[1,1]:s;oe(Ic(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=t;return oe(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),oe(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),oe(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),oe(Po(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),er("depthwiseConv2d",r,i),{x:()=>TAe(l.shape,e,u,o,r,a,i),filter:()=>IAe(l,e,u.shape,o,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IRe={kernelName:jy,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,r={x:s,filter:o,dy:e},i={x:s,filter:o,dy:e};return{x:()=>De.runKernel(Fx,r,n),filter:()=>De.runKernel(Lx,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERe={kernelName:Vm,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,s={dy:e,y:n};return{x:()=>De.runKernel(BS,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TRe={kernelName:Wm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,s=Ee(mi(As(ls(n))),2/Math.sqrt(Math.PI));return{x:()=>Ee(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Re={kernelName:Hm,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(e,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NRe={kernelName:Ky,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>Oe(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ARe={kernelName:Um,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(e,mi(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DRe={kernelName:jm,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RRe={kernelName:Gm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=dn(n.shape,s.shape);return{a:()=>{const a=Vt(e,Ct(s,"float32")),l=Zs(n.shape,o);return l.length>0?Oe(Ot(a,l),n.shape):a},b:()=>{let a=Ee(e,Ct(n,"float32"));const l=Zs(s.shape,o);l.length>0&&(a=Oe(Ot(a,l),s.shape));const u=ls(s);return As(Vt(a,Ct(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MRe={kernelName:qy,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:s}=n,[o,r,i,a]=t,l=a==null?tn(1):a,u=Zs(r.shape,o.shape),c=[];if(r.rank===1){for(let y=0;y<o.shape.length-1;++y)c.push(o.shape[y]);c.push(1)}const d=Pt(o,r),f=Ee(e,l),h=z6(ht(i,tn(s))),p=Ee(Ee(Ee(h,h),h),tn(-.5));return{x:()=>r.rank===1?Oe(Ee(Ee(e,Pi(Oe(h,[1,1,1,r.shape[0]]),c)),l),o.shape):Oe(Ee(Ee(e,h),l),o.shape),mean:()=>{let y=Ee(Ee(h,tn(-1)),f);return r.rank===1&&(y=Ot(y,u)),Oe(y,r.shape)},variance:()=>{let y=Ee(Ee(p,d),f);return r.rank===1&&(y=Ot(y,u)),Oe(y,r.shape)},scale:()=>{const y=Ee(d,h);let k=Ee(e,y);return r.rank===1&&(k=Ot(k,u)),Oe(k,r.shape)},offset:()=>{let y=e;return r.rank===1&&(y=Ot(y,u)),Oe(y,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ORe={kernelName:Yy,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[s,o]=t,{axis:r}=n,i=yn(r,s.shape)[0];return{x:()=>{const l=s.shape,u=o.size,c=l.slice(0,i),d=c.length,f=l.slice(r,l.length).slice(1),h=f.length,p=YR(0,d),m=YR(d+1,d+1+h),g=XR([c,[u],f]),v=Oe(e,g),b=Oe(o,[u]),w=XR([[d],p,m]),y=Fn(v,w);let k=X6(y,b,s.shape[i]);const x=cu(w);return k=Fn(k,x),k},indices:()=>o}}};function YR(e,t){const n=[];for(let s=e;s<t;++s)n.push(s);return n}function XR(e){const t=[];for(let n=0;n<e.length;++n)for(let s=0;s<e[n].length;++s)t.push(e[n][s]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRe={kernelName:Km,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>An(n),b:()=>An(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FRe={kernelName:qm,gradFunc:e=>({x:()=>Ct(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LRe={kernelName:Ym,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BRe={kernelName:Xm,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zRe={kernelName:Zm,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VRe={kernelName:Zy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{alpha:o}=n,r=xi(s,0);return{x:()=>mr(r,e,Ee(e,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WRe={kernelName:Qm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vt(e,ht(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HRe={kernelName:Jm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vt(e,Ct(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const URe={kernelName:dIe,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s]=t,{axis:o}=n;return{logits:()=>{const i=mi(s);return Pt(e,Ee(Ot(e,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jRe(e,t,n,s=5,o=1,r=1,i=.5){const a={x:e,y:t,dy:n},l={depthRadius:s,bias:o,alpha:r,beta:i};return De.runKernel(GS,a,l)}const GRe=Re({localResponseNormalizationBackprop_:jRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KRe={kernelName:s1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{depthRadius:r,bias:i,alpha:a,beta:l}=n;return{x:()=>GRe(s,o,e,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8(e,t,n,s){return t.rank<n.rank&&(t=Oe(t,zs(t.shape,s))),e.rank<n.rank&&(e=Oe(e,zs(e.shape,s))),{x:()=>Ee(e,Ct(xa(n,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZR={kernelName:o1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const s=n,{reductionIndices:o}=s,r=t[0],i=t[1],a=yn(o,r.shape),l=I8(e,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qRe={kernelName:eg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>Ee(e,Ct(Xf(n,s),"float32")),b:()=>Ee(e,Ct($6(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YRe(e,t,n,s,o,r,i){const a=le(e,"dy","maxPool3dGrad"),l=le(t,"input","maxPool3dGrad"),u=le(n,"output","maxPool3dGrad");let c=a,d=l,f=u,h=!1;l.rank===4&&(h=!0,c=Oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=Oe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=Oe(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),oe(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),oe(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),oe(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),er("maxPool3dGrad",r,i);const p={dy:c,input:d,output:f},m={filterSize:s,strides:o,pad:r,dimRoundingMode:i},g=De.runKernel(qS,p,m);return h?Oe(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const XRe=Re({maxPool3dGrad_:YRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZRe={kernelName:i1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>XRe(e,s,o,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JRe(e,t,n,s,o,r,i){const a=le(e,"dy","maxPoolGrad"),l=le(t,"input","maxPoolGrad"),u=le(n,"output","maxPoolGrad");oe(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),oe(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),oe(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),er("maxPoolGrad",r,i);const c={dy:a,input:l,output:u},d={filterSize:s,strides:o,pad:r,dimRoundingMode:i};return De.runKernel(KS,c,d)}const QRe=Re({maxPoolGrad_:JRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3e={kernelName:r1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{filterSize:r,strides:i,pad:a}=n;return{x:()=>QRe(e,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3e={kernelName:a1,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{axis:o}=n,r=yn(o,s.shape),a=lo(s.shape,r)[1],l=tt(a);return{x:()=>{const c=s.shape.slice();r.forEach(h=>{c[h]=1});const d=Oe(e,c);return Vt(Ee(d,du(s.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n3e={kernelName:l1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const s=n,{axis:o}=s,[r,i]=t,a=yn(o,r.shape),l=I8(e,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3e={kernelName:tg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>Ee(e,Ct(Zf(n,s),"float32")),b:()=>Ee(e,Ct(xi(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o3e={kernelName:u1,inputsToSave:["x"],gradFunc:(e,t,n)=>{const s=t[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>Qn(e,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3e={kernelName:ng,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=dn(n.shape,s.shape);return{a:()=>{const a=Zs(n.shape,o);return a.length>0?Oe(Ot(e,a),n.shape):e},b:()=>{const a=Ee(e,As(B1(Vt(n,s)))),l=Zs(s.shape,o);return l.length>0?Oe(Ot(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3e={kernelName:sg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=dn(n.shape,s.shape);return{a:()=>{const a=Ee(e,Ct(s,"float32")),l=Zs(n.shape,o);return l.length>0?Oe(Ot(a,l),n.shape):a},b:()=>{const a=Ee(e,Ct(n,"float32")),l=Zs(s.shape,o);return l.length>0?Oe(Ot(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3e={kernelName:c1,gradFunc:e=>({x:()=>As(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l3e={kernelName:h1,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>no(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u3e={kernelName:f1,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c3e={kernelName:p1,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:s}=n;return Cf(e,s).map(r=>()=>r)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JR={kernelName:m1,inputsToSave:["x"],gradFunc:(e,t,n)=>{const s=t[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>Qn(e,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d3e={kernelName:og,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,s,o]=t,r=n,i=s,a=dn(r.shape,i.shape);return{a:()=>{const c=Ct(i,"float32");let d=Ee(e,Ee(c,_c(r,Pt(c,tn(1)))));const f=Zs(r.shape,a);return f.length>0&&(d=Ot(d,f)),Oe(d,r.shape)},b:()=>{const c=xi(r,0),d=mr(c,gi(r),An(r));let f=Ee(e,Ee(o,d));const h=Zs(i.shape,a);return h.length>0&&(f=Ot(f,h)),Oe(f,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e={kernelName:g1,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,s]=t,o=xi(n,0);return{x:()=>mr(o,e,Ee(e,s)),alpha:()=>{let r=mr(o,An(e),Ee(e,n));const i=Zs(s.shape,e.shape);return i.length>0&&(r=Ot(r,i)),Oe(r,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3e={kernelName:zm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=dn(n.shape,s.shape);return{a:()=>{const a=Vt(e,Ct(s,"float32")),l=Zs(n.shape,o);return l.length>0?Oe(Ot(a,l),n.shape):a},b:()=>{let a=Ee(e,Ct(n,"float32"));const l=Zs(s.shape,o);l.length>0&&(a=Oe(Ot(a,l),s.shape));const u=ls(s);return As(Vt(a,Ct(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3e={kernelName:rg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vt(e,As(ls(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3e={kernelName:ag,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,s=Ee(Zf(n,6),Tg(n));return{x:()=>Ee(e,Ct(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3e={kernelName:ig,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(e,Ct(Tg(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v3e={kernelName:v1,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Oe(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b3e={kernelName:y1,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[s]=t,o={dy:e,images:s};return{images:()=>De.runKernel(nI,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y3e={kernelName:b1,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[s]=t,o={dy:e,images:s};return{images:()=>De.runKernel(tI,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w3e={kernelName:w1,gradFunc:(e,t,n)=>{const{dims:s}=n,o=yn(s,e.shape);return{x:()=>Nc(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k3e={kernelName:lg,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x3e={kernelName:ug,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>As(Vt(e,Ee(_c(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3e={kernelName:k1,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>Ct(An(n),"float32"),t:()=>Ee(e,Ct(n,e.dtype)),e:()=>Ee(e,Ct(FI(n),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $3e={kernelName:cg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=xi(n,tn(0)),o=tn(H1),r=tn(U1),i=Ee(e,r),a=Ee(Ee(e,o),mi(Ct(n,"float32")));return mr(s,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3e={kernelName:pg,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(e,Ee(n,Pt(tn(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3e={kernelName:hg,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E3e={kernelName:dg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(AI(Ct(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T3e={kernelName:fg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(w6(Ct(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _3e={kernelName:x1,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{begin:o,size:r}=n,i=s.shape,[a,l]=O1(s,o,r),u=[];for(let c=0;c<e.rank;c++)u.push([a[c],i[c]-a[c]-l[c]]);return{x:()=>zI(e,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N3e={kernelName:I1,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s]=t,{dim:o}=n,r=!0,i=Ee(e,s);return{logits:()=>Pt(i,Ee(Ot(i,[o],r),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A3e={kernelName:mg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(e,Yf(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QR={kernelName:$1,gradFunc:(e,t,n)=>{const{blockShape:s,paddings:o}=n;return{x:()=>_I(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3={kernelName:S1,gradFunc:(e,t,n)=>{const{axis:s}=n;return{x:()=>Ro(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3e={kernelName:gg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vt(e,Ee(Ho(Ct(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R3e={kernelName:aI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(e,Ee(Ct(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M3e={kernelName:vg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=tn(2);return{a:()=>Ee(e,Ee(o,Pt(n,s))),b:()=>Ee(e,Ee(o,Pt(s,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3e={kernelName:xg,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P3e={kernelName:bg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=dn(n.shape,s.shape);return{a:()=>{let a=e;const l=Zs(n.shape,o);return l.length>0&&(a=Ot(a,l)),Oe(a,n.shape)},b:()=>{let a=e;const l=Zs(s.shape,o);return l.length>0&&(a=Ot(a,l)),Oe(As(a),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3e={kernelName:C1,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,o=s.shape.slice(),{axis:r}=n;yn(r,s.shape).forEach(u=>{o[u]=1});const a=Oe(e,o),l=Ee(a,du(s.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L3e={kernelName:yg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Vt(e,ls(AI(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3e={kernelName:wg,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ee(Pt(tn(1),ls(n)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z3e={kernelName:kg,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{reps:o}=n;return{x:()=>{let i=An(s);if(s.rank===1)for(let a=0;a<o[0];++a)i=ht(i,Qn(e,[a*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)i=ht(i,Qn(e,[a*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)i=ht(i,Qn(e,[a*s.shape[0],l*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)for(let c=0;c<o[3];++c)i=ht(i,Qn(e,[a*s.shape[0],l*s.shape[1],u*s.shape[2],c*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V3e={kernelName:E1,gradFunc:(e,t,n)=>{const s=n,{perm:o}=s,r=cu(o);return{x:()=>Fn(e,r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3e={kernelName:T1,gradFunc:(e,t,n)=>{const s=n,{axis:o}=s;return{value:()=>Ac(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3e={kernelName:_1,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U3e(e,n)}}};function U3e(e,t){const n=fl(t,An(t)),s=RI(e,n);let o=Xf(t,tn(0,"int32"));const r=s.rank-o.rank;for(let a=0;a<r;++a)o=Yr(o,a+1);o=el(o,du(s.shape,"bool"));const i=An(s);return mr(o,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3e={kernelName:N1,gradFunc:e=>({x:()=>An(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3e=[S8,GDe,KDe,qDe,YDe,XDe,ZDe,JDe,QDe,eRe,tRe,nRe,rRe,lRe,uRe,cRe,dRe,fRe,hRe,pRe,mRe,gRe,bRe,vRe,kRe,xRe,CRe,$Re,SRe,IRe,h3e,ERe,TRe,_Re,NRe,ARe,RRe,DRe,MRe,ORe,PRe,FRe,LRe,BRe,zRe,VRe,WRe,HRe,URe,KRe,ZR,ZR,qRe,ZRe,e3e,t3e,n3e,s3e,o3e,r3e,i3e,a3e,l3e,u3e,c3e,JR,JR,d3e,f3e,p3e,m3e,g3e,v3e,b3e,y3e,w3e,k3e,x3e,C3e,$3e,S3e,I3e,E3e,T3e,_3e,N3e,A3e,QR,QR,e3,e3,D3e,M3e,R3e,O3e,P3e,F3e,L3e,B3e,z3e,V3e,W3e,H3e,j3e];for(const e of G3e)pIe(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.abs=function(){return this.throwIfDisposed(),eo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.acos=function(){return this.throwIfDisposed(),MEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.acosh=function(){return this.throwIfDisposed(),PEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.add=function(e){return this.throwIfDisposed(),ht(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.all=function(e,t){return this.throwIfDisposed(),g6(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.any=function(e,t){return this.throwIfDisposed(),Jx(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.argMax=function(e){return this.throwIfDisposed(),Up(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.argMin=function(e){return this.throwIfDisposed(),VEe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.asScalar=function(){return this.throwIfDisposed(),oe(this.size===1,()=>"The array must have only 1 element."),Oe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.asType=function(e){return this.throwIfDisposed(),Ct(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as1D=function(){return this.throwIfDisposed(),Oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as2D=function(e,t){return this.throwIfDisposed(),Oe(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Oe(this,[e,t,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as4D=function(e,t,n,s){return this.throwIfDisposed(),Oe(this,[e,t,n,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as5D=function(e,t,n,s,o){return this.throwIfDisposed(),Oe(this,[e,t,n,s,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.asin=function(){return this.throwIfDisposed(),HEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.asinh=function(){return this.throwIfDisposed(),jEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.atan=function(){return this.throwIfDisposed(),KEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.atan2=function(e){return this.throwIfDisposed(),YEe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.atanh=function(){return this.throwIfDisposed(),ZEe(this)};Ze().prototype.avgPool=function(e,t,n,s){return this.throwIfDisposed(),EI(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),_I(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.batchNorm=function(e,t,n,s,o){return this.throwIfDisposed(),P1(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Bv(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cast=function(e){return this.throwIfDisposed(),Ct(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.ceil=function(){return this.throwIfDisposed(),CTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Fr(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Ws&&(e=[e]),Ro([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.conv1d=function(e,t,n,s,o,r){return this.throwIfDisposed(),v6(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.conv2dTranspose=function(e,t,n,s,o){return this.throwIfDisposed(),b6(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.conv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),Ec(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cos=function(){return this.throwIfDisposed(),AI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cosh=function(){return this.throwIfDisposed(),w6(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),jTe(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),k6(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),qTe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.depthwiseConv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),DI(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.dilation2d=function(e,t,n,s,o){return this.throwIfDisposed(),ZTe(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.divNoNan=function(e){return this.throwIfDisposed(),n_e(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.div=function(e){return this.throwIfDisposed(),Vt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.dot=function(e){return this.throwIfDisposed(),o_e(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.elu=function(){return this.throwIfDisposed(),F1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.equal=function(e){return this.throwIfDisposed(),xa(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.erf=function(){return this.throwIfDisposed(),a_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.exp=function(){return this.throwIfDisposed(),mi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.expandDims=function(e){return this.throwIfDisposed(),Yr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.expm1=function(){return this.throwIfDisposed(),d_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.fft=function(){return this.throwIfDisposed(),G6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.flatten=function(){return this.throwIfDisposed(),Oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.floor=function(){return this.throwIfDisposed(),B1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.floorDiv=function(e){return this.throwIfDisposed(),m6(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.gather=function(e,t){return this.throwIfDisposed(),RI(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Xf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.greater=function(e){return this.throwIfDisposed(),xi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.ifft=function(){return this.throwIfDisposed(),nC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.irfft=function(){return this.throwIfDisposed(),ZNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.isFinite=function(){return this.throwIfDisposed(),w_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.isInf=function(){return this.throwIfDisposed(),x_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.isNaN=function(){return this.throwIfDisposed(),$_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.leakyRelu=function(e){return this.throwIfDisposed(),MI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.lessEqual=function(e){return this.throwIfDisposed(),Zf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.less=function(e){return this.throwIfDisposed(),$6(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.localResponseNormalization=function(e,t,n,s){return this.throwIfDisposed(),N_e(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logSigmoid=function(){return this.throwIfDisposed(),F_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logSoftmax=function(e){return this.throwIfDisposed(),S6(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),E6(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.log=function(){return this.throwIfDisposed(),gi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.log1p=function(){return this.throwIfDisposed(),OI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logicalAnd=function(e){return this.throwIfDisposed(),el(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logicalNot=function(){return this.throwIfDisposed(),FI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logicalOr=function(e){return this.throwIfDisposed(),T6(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logicalXor=function(e){return this.throwIfDisposed(),K_e(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Ln(this,e,t,n)};Ze().prototype.maxPool=function(e,t,n,s){return this.throwIfDisposed(),LI(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.max=function(e,t){return this.throwIfDisposed(),pa(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.maximum=function(e){return this.throwIfDisposed(),fl(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.mean=function(e,t){return this.throwIfDisposed(),Os(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.min=function(e,t){return this.throwIfDisposed(),eC(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.minimum=function(e){return this.throwIfDisposed(),Ig(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),nNe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.mod=function(e){return this.throwIfDisposed(),oNe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.mul=function(e){return this.throwIfDisposed(),Ee(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.neg=function(){return this.throwIfDisposed(),As(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.norm=function(e,t,n){return this.throwIfDisposed(),GI(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.notEqual=function(e){return this.throwIfDisposed(),jp(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),o6(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.onesLike=function(){return this.throwIfDisposed(),vi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.pad=function(e,t){return this.throwIfDisposed(),zI(this,e,t)};Ze().prototype.pool=function(e,t,n,s,o,r){return this.throwIfDisposed(),pNe(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.pow=function(e){return this.throwIfDisposed(),_c(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.prelu=function(e){return this.throwIfDisposed(),WI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.prod=function(e,t){return this.throwIfDisposed(),bNe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.reciprocal=function(){return this.throwIfDisposed(),ANe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.relu=function(){return this.throwIfDisposed(),hl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.relu6=function(){return this.throwIfDisposed(),L6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Oe(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.reshape=function(e){return this.throwIfDisposed(),Oe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),n8(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),s8(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.reverse=function(e){return this.throwIfDisposed(),Nc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.rfft=function(){return this.throwIfDisposed(),K6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.round=function(){return this.throwIfDisposed(),B6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.rsqrt=function(){return this.throwIfDisposed(),z6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.selu=function(){return this.throwIfDisposed(),V6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.separableConv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),W6(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sigmoid=function(){return this.throwIfDisposed(),Yf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sign=function(){return this.throwIfDisposed(),zNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sin=function(){return this.throwIfDisposed(),H6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sinh=function(){return this.throwIfDisposed(),U6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.slice=function(e,t){return this.throwIfDisposed(),Qn(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.softmax=function(e){return this.throwIfDisposed(),jI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.softplus=function(){return this.throwIfDisposed(),Sg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),VI(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.split=function(e,t){return this.throwIfDisposed(),Rr(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sqrt=function(){return this.throwIfDisposed(),Ho(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.square=function(){return this.throwIfDisposed(),ls(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.squaredDifference=function(e){return this.throwIfDisposed(),q6(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.squeeze=function(e){return this.throwIfDisposed(),Eg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Ws?[this,e]:[this,...e];return Ac(n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.step=function(e){return this.throwIfDisposed(),Tg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.stridedSlice=function(e,t,n,s,o,r,i,a){return this.throwIfDisposed(),iAe(this,e,t,n,s,o,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sub=function(e){return this.throwIfDisposed(),Pt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sum=function(e,t){return this.throwIfDisposed(),Ot(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.tan=function(){return this.throwIfDisposed(),lAe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.tanh=function(){return this.throwIfDisposed(),TI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.tile=function(e){return this.throwIfDisposed(),Pi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.toBool=function(){return this.throwIfDisposed(),Ct(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.toFloat=function(){return this.throwIfDisposed(),Ct(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.toInt=function(){return this.throwIfDisposed(),Ct(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.topk=function(e,t){return this.throwIfDisposed(),cAe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.transpose=function(e){return this.throwIfDisposed(),Fn(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.unique=function(e){return this.throwIfDisposed(),hAe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),X6(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.unstack=function(e){return this.throwIfDisposed(),Cf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.where=function(e,t){return this.throwIfDisposed(),mr(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.zerosLike=function(){return this.throwIfDisposed(),An(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let q2;function Gs(){return q2==null&&(q2=EEe().epsilon()),q2}function Ui(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class sa extends Error{constructor(t){super(t),Object.setPrototypeOf(this,sa.prototype)}}class ti extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ti.prototype)}}class _e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,_e.prototype)}}class ln extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ln.prototype)}}class EE extends Error{constructor(t){super(t),Object.setPrototypeOf(this,EE.prototype)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rc(e,t){if(Array.isArray(e)){let n=[];for(let s=0;s<t;s++)n=n.concat(e);return n}else{const n=new Array(t);return n.fill(e),n}}function oa(e,t){if(!e)throw new EE(t)}function t3(e,t){let n=0;for(const s of e)s===t&&n++;return n}function qo(e){return e.length===1?e[0]:e}function hs(e){return Array.isArray(e)?e:[e]}function Oa(e){const n=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Gu(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}let Wr={};function TE(e){if(e==null)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function oC(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>oC(t));else{const t=Object.keys(e);for(const n of t){const s=e[n];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?e[n]=s.value:oC(s))}}}function Dg(e,t={},n={},s="object",o=!1){if(typeof e=="string"){const r=e;let i;if(r in n)i=n[r];else if(r in Wr)i=Wr[r];else if(i=t[r],i==null)throw new _e(`Unknown ${s}: ${e}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const r=e;if(r.className==null||r.config==null)throw new _e(`${s}: Improper config format: ${JSON.stringify(r)}.
'className' and 'config' must set.`);const i=r.className;let a,l;if(i in n?[a,l]=n[i]:i in Wr?[a,l]=Wr.className:i in t&&([a,l]=t[i]),a==null)throw new _e(`Unknown ${s}: ${i}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(Wr))u[h]=Wr[h];for(const h of Object.keys(n))u[h]=n[h];const c=r.config;c.customObjects=u;const d=Object.assign({},Wr);for(const h of Object.keys(n))Wr[h]=n[h];oC(r.config);const f=l(a,r.config,n,o);return Wr=Object.assign({},d),f}else{const u=Object.assign({},Wr);for(const d of Object.keys(n))Wr[d]=n[d];const c=new a(r.config);return Wr=Object.assign({},u),c}}}function K3e(e,t){return e<t?-1:e>t?1:0}function O0(e,t){return-1*K3e(e,t)}function Ul(e){if(e==null)return e;const t=[];for(const n of e)t.indexOf(n)===-1&&t.push(n);return t}function q3e(e){if(e==null)throw new _e(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function Zc(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new _e(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function _E(e,t,n=0,s=1/0){return oa(n>=0),oa(s>=n),Array.isArray(e)&&e.length>=n&&e.length<=s&&e.every(o=>typeof o===t)}function so(e,t){Array.isArray(e)?(oe(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((n,s)=>so(n,`element ${s+1} of ${t}`))):oe(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${E8(e)}.`)}function E8(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>E8(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function Y3e(e,t,n){let s=n!=null?n():Ko(),o;return(...i)=>{const a=n!=null?n():Ko();return a-s<t||(s=a,o=e(...i)),o}}function T8(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NE(e,t){return Ge(()=>Ho(Ot(Ee(e,e),t,!0)))}class Rg extends qf{getConfig(){return{}}}class _8 extends Rg{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Ge(()=>{const n=NE(t,this.axis),s=Fr(n,0,this.maxValue);return Ee(t,Vt(s,ht(Gs(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}_8.className="MaxNorm";ut(_8);class N8 extends Rg{constructor(t){super(),this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Ge(()=>Vt(t,ht(Gs(),NE(t,this.axis))))}getConfig(){return{axis:this.axis}}}N8.className="UnitNorm";ut(N8);class A8 extends Rg{apply(t){return hl(t)}}A8.className="NonNeg";ut(A8);class D8 extends Rg{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Ge(()=>{const n=NE(t,this.axis),s=ht(Ee(this.rate,Fr(n,this.minValue,this.maxValue)),Ee(1-this.rate,n));return Ee(t,Vt(s,ht(Gs(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}D8.className="MinMaxNorm";ut(D8);const n3={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ys(e){return TE(e)}function s3(e,t={}){return Dg(e,Xr.getMap().classNameMap,t,"constraint")}function Xs(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in n3?n3[e]:e,config:{}};return s3(n)}else return e instanceof Rg?e:s3(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const X3e=["channelsFirst","channelsLast"],Z3e=["nearest","bilinear"],J3e=["valid","same","causal"],Q3e=["max","avg"],eMe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const xd=new Map;function Vs(e){Zc(X3e,"DataFormat",e)}function tMe(e){Zc(Z3e,"InterpolationFormat",e)}function Br(e){Zc(J3e,"PaddingMode",e)}function R8(e){Zc(Q3e,"PoolMode",e)}const dp=[],o3="/";function fc(e,t){dp.push(e);try{const n=t();return dp.pop(),n}catch(n){throw dp.pop(),n}}function nMe(){return dp.length===0?"":dp.join(o3)+o3}function M8(e){if(!P8(e))throw new Error("Not a valid tensor name: '"+e+"'");return nMe()+e}function O8(e){if(!P8(e))throw new Error("Not a valid tensor name: '"+e+"'");xd.has(e)||xd.set(e,0);const t=xd.get(e);if(xd.set(e,xd.get(e)+1),t>0){const n=`${e}_${t}`;return xd.set(n,1),n}else return e}const sMe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function P8(e){return!!e.match(sMe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oMe(e){return e===parseInt(e.toString(),10)}function jl(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let s=1;for(let o=t;o<n;++o)s*=e[o];return s}function $f(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const s=e[n];s<t&&(t=s)}return t}function Zl(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const s=e[n];s>t&&(t=s)}return t}function ji(e,t){if(t<e)throw new _e(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let s=e;s<t;++s)n.push(s);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j1(e,t){return Ct(e,t)}function Mg(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Oe(e,n)}function rMe(e,t){return Ge(()=>{if(e.shape.length!==2)throw new _e(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const n=Mg(e,1);return rC(n,[1,t,1])})}function iMe(e){const t=[jl(e.shape)];return Oe(e,t)}function aMe(e){if(e.rank<=1)throw new _e(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],jl(e.shape,1)];return Oe(e,t)}function hc(e,t,n){return Ge(()=>{switch(e.rank){case 1:return HI(e,t,n);case 2:return j6(e,[t,0],[n,e.shape[1]]);case 3:return UI(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return kb(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Qn(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Qn(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new _e(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function Y2(e,t,n){return Ge(()=>{switch(e.rank){case 1:return HI(e,t,n);case 2:return j6(e,[0,t],[e.shape[0],n]);case 3:return UI(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return kb(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new _e(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function P0(e,t,n,s){return Ge(()=>{switch(e.rank){case 1:return HI(e,t,n);case 2:switch(s){case 1:return hc(e,t,n);case 2:return Y2(e,t,n);default:throw new _e(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return hc(e,t,n);case 2:return UI(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Y2(e,t,n);default:throw new _e(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return hc(e,t,n);case 2:return kb(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return kb(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Y2(e,t,n);default:throw new _e(`The axis is not within the rank of the tensor ${s}`)}default:throw new _e(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function AE(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),Ro(e,t)}function r3(e,t){switch(e.rank){case 1:return ITe([e,t]);case 2:return TTe([e,t],0);case 3:return NTe([e,t],0);case 4:return DTe([e,t],0);default:throw new _e(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function rC(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new _e(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Pi(e,t)}function G1(e,t=0,n=1,s,o){return ENe(e,t,n,s,o)}function ga(e,t,n,s){if(e.rank<2||t.rank<2)throw new ln(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const o=e.shape.slice(-1)[0],r=t.shape.slice(-2)[0];if(o!==r)throw new ln(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return UR({a:e,b:t,transposeA:!1,transposeB:!1,bias:s?iC(e.rank,s,Ui()):null,activation:n});{const o=e.shape.slice(),r=o.pop();e=Oe(e,[-1,r]);const i=t.shape.slice(),a=i.pop(),l=i.pop(),u=[...i,a],c=Array.from({length:t.rank},(p,m)=>m===0?t.rank-2:m<=t.rank-2?m-1:m);t=Oe(Fn(t,c),[l,-1]);const d=[...o,...u];return Oe(UR({a:e,b:t,transposeA:!1,transposeB:!1,bias:s?iC(e.rank,s,Ui()):null,activation:n}),d)}}function F8(e,t,n){return Ge(()=>(Array.isArray(t)?t=_o(t,"int32"):t=Ct(t,"int32"),RI(e,t,n)))}function Og(e){return Ee(e,e)}function iC(e,t,n){const s=t.shape;if(t.rank!==1&&t.rank!==e)throw new _e(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(n==="channelsFirst")return s.length===1?Oe(t,[1,s[0],1,1,1]):Oe(t,[1,s[3],s[0],s[1],s[2]]);if(n==="channelsLast")return s.length===1?Oe(t,[1,1,1,1,s[0]]):Oe(t,[1].concat(s))}else if(e===4){if(n==="channelsFirst")return s.length===1?Oe(t,[1,s[0],1,1]):Oe(t,[1,s[2],s[0],s[1]]);if(n==="channelsLast")return s.length===1?Oe(t,[1,1,1,s[0]]):Oe(t,[1].concat(s))}else if(e===3){if(n==="channelsFirst")return s.length===1?Oe(t,[1,s[0],1]):Oe(t,[1,s[1],s[0]]);if(n==="channelsLast")return s.length===1?Oe(t,[1,1,s[0]]):Oe(t,[1].concat(s))}else if(e<3)return t;throw new _e(`Unsupported input rank by biasAdd: ${t.rank}`)}function Ji(e,t,n){return Ge(()=>(n==null&&(n=Ui()),Vs(n),ht(e,iC(e.rank,t,n))))}function lMe(e,t=1){if(t!==1)throw new ln(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return F1(e)}function uMe(e){return Ge(()=>Vt(e,ht(eo(e),1)))}function L8(e,t,n,s){return Ge(()=>wAe(e,t,n,s))}function cMe(e){return Ge(()=>{const t=ht(.5,Ee(.2,e));return Fr(t,0,1)})}function Pg(e,t,n=!1){return n?e():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const dMe=["fanIn","fanOut","fanAvg"],fMe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hMe(e){Zc(dMe,"FanMode",e)}function pMe(e){Zc(fMe,"Distribution",e)}class Ci extends qf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class B8 extends Ci{apply(t,n){return no(t,n)}}B8.className="Zeros";ut(B8);class DE extends Ci{apply(t,n){return du(t,n)}}DE.className="Ones";ut(DE);class z8 extends Ci{constructor(t){if(super(),typeof t!="object")throw new _e(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new _e(`config must have value set but got ${t}`);this.value=t.value}apply(t,n){return Ge(()=>Ee(tn(this.value),du(t,n)))}getConfig(){return{value:this.value}}}z8.className="Constant";ut(z8);class V8 extends Ci{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,n){return z1(t,this.minval,this.maxval,n)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}V8.className="RandomUniform";ut(V8);class W8 extends Ci{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ln(`randomNormal does not support dType ${n}.`);return G1(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}W8.className="RandomNormal";ut(W8);class H8 extends Ci{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ln(`truncatedNormal does not support dType ${n}.`);return Y6(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}H8.className="TruncatedNormal";ut(H8);class U8 extends Ci{constructor(t){super(),this.gain=t.gain!=null?t.gain:1}apply(t,n){return Ge(()=>{if(t.length!==2||t[0]!==t[1])throw new _e("Identity matrix initializer can only be used for 2D square matrices.");return Ee(this.gain,x6(t[0]))})}getConfig(){return{gain:this.gain}}}U8.className="Identity";ut(U8);function mMe(e,t="channelsLast"){let n,s;if(Vs(t),e.length===2)n=e[0],s=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){const o=jl(e,2);n=e[1]*o,s=e[0]*o}else if(t==="channelsLast"){const o=jl(e,0,e.length-2);n=e[e.length-2]*o,s=e[e.length-1]*o}}else{const o=jl(e);n=Math.sqrt(o),s=Math.sqrt(o)}return[n,s]}class gr extends Ci{constructor(t){if(super(),t.scale<0)throw new _e(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,hMe(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,pMe(this.distribution),this.seed=t.seed}apply(t,n){const s=mMe(t),o=s[0],r=s[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,r):i/=Math.max(1,(o+r)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ln(`${this.getClassName()} does not support dType ${n}.`);return Y6(t,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return z1(t,-a,a,n)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}gr.className="VarianceScaling";ut(gr);class RE extends gr{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return gr.className}}RE.className="GlorotUniform";ut(RE);class ME extends gr{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return gr.className}}ME.className="GlorotNormal";ut(ME);class OE extends gr{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return gr.className}}OE.className="HeNormal";ut(OE);class PE extends gr{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return gr.className}}PE.className="HeUniform";ut(PE);class FE extends gr{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return gr.className}}FE.className="LeCunNormal";ut(FE);class LE extends gr{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return gr.className}}LE.className="LeCunNormal";ut(LE);class j8 extends Ci{constructor(t){if(super(),this.DEFAULT_GAIN=1,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,this.seed!=null)throw new ln("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,n){return Ge(()=>{if(t.length<2)throw new ln("Shape must be at least 2D.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const s=t[0]>t[1]?[t[1],t[0]]:t,o=G1(s,0,1,"float32");let r=zDe.gramSchmidt(o);return t[0]>t[1]&&(r=Fn(r)),Ee(this.gain,r)})}getConfig(){return{gain:this.gain,seed:this.seed}}}j8.className="Orthogonal";ut(j8);const i3={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function a3(e,t={}){return Dg(e,Xr.getMap().classNameMap,t,"initializer")}function Is(e){return TE(e)}function xs(e){if(typeof e=="string"){const t=e in i3?i3[e]:e;if(t==="GlorotNormal")return new ME;if(t==="GlorotUniform")return new RE;if(t==="HeNormal")return new OE;if(t==="HeUniform")return new PE;if(t==="LeCunNormal")return new FE;if(t==="LeCunUniform")return new LE;{const n={};return n.className=t,n.config={},a3(n)}}else return e instanceof Ci?e:a3(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let gMe=0;function G8(){return gMe++}const F0={};function K1(e=""){return e in F0||(F0[e]=0),F0[e]+=1,e+F0[e].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aC(e){return Array.isArray(e)&&Array.isArray(e[0])}function xb(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function fn(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new _e(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function Kn(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new _e(`Expected exactly 1 Shape; got ${e.length}`)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cb(e){let t=0;for(const n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((s,o)=>s*o);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const l3="Variable";class vMe{constructor(t,n="float32",s=l3,o=!0,r=null){this.dtype=n==null?"float32":n,this.shape=t.shape,this.id=G8(),s=s==null?l3:s,this.originalName=M8(s),this.name=O8(this.originalName),this.trainable_=o,this.constraint=r,this.val=gAe(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),bMe(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function bMe(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function lC(e){return e.map(t=>t.read())}function BE(e){e.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ks{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class da{constructor(t,n,s,o,r,i,a){this.dtype=t,this.shape=n,this.sourceLayer=s,this.inputs=o,this.callArgs=r,this.outputTensorIndex=a,this.id=G8(),i!=null&&(this.originalName=M8(i),this.name=O8(this.originalName)),this.rank=n.length}}let yMe=0;class q1{constructor(t,n){this.callArgs=n,this.id=yMe++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const s of t.inboundLayers)s!=null&&s.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const n of this.inboundLayers)n!=null?t.push(n.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let wMe=0;class Rn extends qf{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=wMe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const s=this.getClassName();n=Oa(s)+"_"+K1(s)}if(this.name=n,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let s;if(t.batchInputShape!=null)s=t.batchInputShape;else if(t.inputShape!=null){let r=null;t.batchSize!=null&&(r=t.batchSize),s=[r].concat(t.inputShape)}this.batchInputShape=s;let o=t.dtype;o==null&&(o=t.inputDType),o==null&&(o="float32"),this.dtype=o}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,n){return t.name+"_ib-"+n.toString()}getNodeAtIndex(t,n){if(this.inboundNodes.length===0)throw new ti(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=t)throw new _e(`Asked to get ${n} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return qo(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return qo(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new sa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new sa(`Layer ${this.name} is not connected, no input to return.`);return qo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new sa(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new sa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return qo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(n=>n.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=hs(t),this.inputSpec==null||this.inputSpec.length===0)return;const n=hs(this.inputSpec);if(t.length!==n.length)throw new _e(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${t}`);for(let s=0;s<t.length;s++){const o=t[s],r=n[s];if(r==null)continue;const i=o.rank;if(r.ndim!=null&&i!==r.ndim)throw new _e(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${r.ndim}, found ndim=${i}`);if(r.maxNDim!=null&&i>r.maxNDim)throw new _e(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${r.maxNDim}, found ndim=${i}`);if(r.minNDim!=null&&i<r.minNDim)throw new _e(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${r.minNDim}, found ndim=${i}.`);if(r.dtype!=null&&o.dtype!==r.dtype)throw new _e(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${r.dtype}, found dtype=${o.dtype}.`);if(r.axes){const a=o.shape;for(const l in r.axes){const u=Number(l),c=r.axes[l],d=u>=0?a[u]:a[a.length+u];if(c!=null&&[c,null].indexOf(d)===-1)throw new _e(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${a}.`)}}if(r.shape!=null)for(let a=0;a<r.shape.length;++a){const l=r.shape[a],u=o.shape[a];if(l!=null&&u!=null&&l!==u)throw new _e(`Input ${s} is incompatible with layer ${this.name}: expected shape=${r.shape}, found shape=${o.shape}.`)}}}call(t,n){return t}invokeCallHook(t,n){this._callHook!=null&&this._callHook(t,n)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,n){n=n||{},this.assertNotDisposed();const s=hs(t);let o=!0;for(const i of s)if(!(i instanceof da)){o=!1;break}let r=!0;for(const i of s)if(i instanceof da){r=!1;break}if(o===r)throw new _e("Arguments to apply() must be all SymbolicTensors or all Tensors");return fc(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const i=[];for(const a of hs(t))i.push(a.shape);this.build(qo(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(t),r){let i=this.call(t,n);const a=hs(i),l=[];for(let u of a)s.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(i=qo(l),this.activityRegularizer!=null)throw new ln("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=kMe(t),a=this.computeOutputShape(i);let l;const u=xMe(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,d)=>new da(u,c,this,hs(t),n,this.name,d)):l=new da(u,a,this,hs(t),n,this.name),this.addInboundNode(t,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new ln("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((s,o)=>{s!=null&&t[o]!=null&&t[o]!==s&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new sa(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const n of this.inboundNodes){const s=JSON.stringify(n.outputShapes);t.indexOf(s)===-1&&t.push(s)}if(t.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new sa(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new ti(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Cb(this.weights)}build(t){this.built=!0}getWeights(t=!1){return lC(t?this.trainableWeights:this.weights)}setWeights(t){Ge(()=>{const n=this.weights;if(n.length!==t.length)throw new _e(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${n.length} weights. Provided weights: ${t}...`);if(n.length===0)return;const s=[],o=lC(n);for(let r=0;r<o.length;++r){const i=o[r],a=n[r],l=t[r];if(!zn(i.shape,l.shape))throw new _e(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);s.push([a,l])}BE(s)})}addWeight(t,n,s,o,r,i,a,l){if(this._addedWeightNames.indexOf(t)!==-1)throw new _e(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():xs("zeros"));const u=o.apply(n,s),c=new vMe(u,s,t,i,a);return u.dispose(),r!=null&&this.addLoss(()=>r.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=hs(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}addInboundNode(t,n,s,o,r,i,a=null){const l=hs(t);n=hs(n),s=hs(s),o=hs(o),r=xb(r),i=xb(i);const u=[],c=[],d=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex);new q1({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:s,outputMasks:o,inputShapes:r,outputShapes:i},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function kMe(e){e=hs(e);const t=[];for(const n of e)t.push(n.shape);return qo(t)}function xMe(e){return"float32"}function K8(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{const s=t.inboundNodes[n];if(s.inboundLayers.length===0)return s.inputTensors;{const o=[];for(let r=0;r<s.inboundLayers.length;r++){const i=s.inputTensors[r],a=s.inboundLayers[r],l=s.nodeIndices[r],u=K8(i,a,l);for(const c of u)o.indexOf(c)===-1&&o.push(c)}return o}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fg extends Rn{constructor(t){if(super({dtype:t.dtype,name:t.name!=null?t.name:K1("input").toString()}),t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new _e("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=t.batchInputShape;if(n==null){if(t.inputShape==null)throw new _e("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new _e("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=t.dtype||"float32";this.batchInputShape=n,this.dtype=s,this.inputSpec=[{shape:n}];const o=new da(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new q1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(t,n){throw new _e(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Fg.className="InputLayer";ut(Fg);function CMe(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new _e("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new Fg({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Au(e){if(e==null)return;const t=[],n=[],s=[];for(const o in e){const r=e[o];if(typeof r!="number"){const i=r;t.push(i.data()),n.push(o),s.push(i)}}if(t.length>0){const o=await Promise.all(t);for(let r=0;r<o.length;++r)e[n[r]]=o[r][0];xn(s)}}function q8(e){if(e!=null)for(const t in e){const n=e[t];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var u3;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(u3||(u3={}));const $Me=125;class Gp{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class SMe{constructor(t,n=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochBegin(t,n)}async onEpochEnd(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochEnd(t,n)}async onBatchBegin(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchBegin(t,n)}async onBatchEnd(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchEnd(t,n)}async onTrainBegin(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class IMe extends Gp{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){n==null&&(n={});const s=n.size==null?0:n.size;this.seen+=s;for(const o in n){const r=n[o];if(typeof r=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+r*s;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=Ge(()=>ht(this.totals[o],Ee(r,s)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(t,n){if(n!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?n[s]=this.totals[s]/this.seen:Ge(()=>{const o=Ee(Vt(1,this.seen),this.totals[s]);n[s]=o,this.totals[s].dispose(),ka(n[s])}))}}class EMe extends Gp{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){n==null&&(n={}),this.epoch.push(t);for(const s in n)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(n[s])}async syncData(){const t=[],n=[],s=[];for(const r in this.history){const i=this.history[r];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];t.push(l.data()),n.push(r),s.push(a)}}const o=await Promise.all(t);for(let r=0;r<o.length;++r)this.history[n[r]][s[r]].dispose(),this.history[n[r]][s[r]]=o[r][0]}}class TMe extends Gp{constructor(t,n){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||o8,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=$Me),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Mx(this.yieldEvery)&&(this.maybeWait=Y3e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,s){const o=[];this.yield!=null&&(await Au(s),o.push(this.yield(t,n,s))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(t,n){this.currentEpoch=t,this.epochBegin!=null&&(await Au(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const s=[];this.epochEnd!=null&&(await Au(n),s.push(this.epochEnd(t,n))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(t,n){this.batchBegin!=null&&(await Au(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const s=[];this.batchEnd!=null&&(await Au(n),s.push(this.batchEnd(t,n))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):Mx(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(s)}async onTrainBegin(t){this.trainBegin!=null&&(await Au(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await Au(t),await this.trainEnd(t))}}function Y8(e,t){return e==null&&(e={}),e instanceof Gp?[e]:Array.isArray(e)&&e[0]instanceof Gp?e:hs(e).map(s=>new TMe(s,t))}class jr{constructor(){}static registerCallbackConstructor(t,n){oe(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),jr.checkForDuplicate(n),jr.constructors[t]==null&&(jr.constructors[t]=[]),jr.constructors[t].push(n)}static checkForDuplicate(t){for(const n in jr.constructors)jr.constructors[+n].forEach(o=>{if(o===t)throw new _e("Duplicate callback constructor.")})}static clear(){jr.constructors={}}static createCallbacks(t){const n=[];for(const s in jr.constructors){const o=+s;t>=o&&n.push(...jr.constructors[o])}return n.map(s=>new s)}}jr.constructors={};function X8(e,t,n,s,o,r,i,a,l){const u=new EMe,c=[new IMe,...jr.createCallbacks(t)];e!=null&&c.push(...e),c.push(u);const d=new SMe(c);return d.setParams({epochs:n,initialEpoch:s,samples:o,steps:r,batchSize:i,verbose:t,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qa(e,t={},n=!1){return Dg(e,Xr.getMap().classNameMap,t,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $b(e,t){return Ge(()=>{e.dtype!=="float32"&&(e=Ct(e,"float32"));const n=Ot(Og(e),t,!0),s=L1(n.shape,Gs()),o=Ho(fl(n,s));return Vt(e,o)})}function Y1(e,t){return Ge(()=>Os(Og(Pt(t,e)),-1))}function zE(e,t){return Ge(()=>Os(eo(Pt(t,e)),-1))}function VE(e,t){return Ge(()=>{const n=Pt(e,t),s=Fr(eo(e),Gs(),Number.MAX_VALUE),o=eo(Vt(n,s));return Ee(100,Os(o,-1))})}function _Me(e,t){return Ge(()=>{const n=Fr(t,Gs(),Number.MAX_VALUE),s=gi(ht(1,n)),o=Fr(e,Gs(),Number.MAX_VALUE),r=gi(ht(1,o));return Os(Og(Pt(s,r)),-1)})}function NMe(e,t){return Ge(()=>{const n=fl(0,Pt(1,Ee(e,t)));return Os(Og(n),-1)})}function AMe(e,t){return Ge(()=>{const n=fl(0,Pt(1,Ee(e,t)));return Os(n,-1)})}function DMe(e,t){return Ge(()=>{const n=Ot(Ee(e,t),-1),s=pa(Ee(Pt(1,e),t),-1);return fl(0,ht(1,Pt(s,n)))})}function RMe(e,t){return Ge(()=>{const n=Math.log(2),s=Pt(t,e),o=Pt(ht(s,Sg(Ee(-2,s))),n);return Os(o,-1)})}function Kp(e,t,n=!1){return Ge(()=>{if(n)t=jI(t);else{const s=Ot(t,t.shape.length-1,!0);t=Vt(t,s)}return t=Fr(t,Gs(),1-Gs()),As(Ot(Ee(Ct(e,"float32"),gi(t)),t.shape.length-1))})}function Sb(e,t,n=!1){return Ge(()=>{const s=Ct(B1(iMe(e)),"int32");t=Fr(t,Gs(),1-Gs());const o=t.shape,r=Oe(o6(s,o[o.length-1]),o);return Kp(r,t,n)})}function MMe(e,t){if(!zn(e.shape,t.shape))throw new _e(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return Ge(()=>{const n=hl(t),s=As(eo(t));return ht(Pt(n,Ee(t,e)),OI(mi(s)))})}function X1(e,t){return Ge(()=>{let n;return n=Fr(t,Gs(),1-Gs()),n=gi(Vt(n,Pt(1,n))),Os(MMe(e,n),-1)})}function OMe(e,t){return Ge(()=>{const n=Fr(e,Gs(),1),s=Fr(t,Gs(),1);return Ot(Ee(e,gi(Vt(n,s))),-1)})}function PMe(e,t){return Ge(()=>{const n=gi(ht(Gs(),t));return Os(Pt(t,Ee(e,n)),-1)})}function Z8(e,t){return Ge(()=>{const n=$b(e,-1),s=$b(t,-1),o=Ee(n,s);return As(Ot(o,-1))})}const Ib={meanSquaredError:Y1,meanAbsoluteError:zE,meanAbsolutePercentageError:VE,meanSquaredLogarithmicError:_Me,squaredHinge:NMe,hinge:AMe,categoricalHinge:DMe,logcosh:RMe,categoricalCrossentropy:Kp,sparseCategoricalCrossentropy:Sb,binaryCrossentropy:X1,kullbackLeiblerDivergence:OMe,poisson:PMe,cosineProximity:Z8};function X2(e){if(typeof e=="string"){if(e in Ib)return Ib[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new _e(t)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function J8(e,t){return Ge(()=>{const n=Ee(.5,vi(t)),s=j1(xi(t,n),e.dtype);return Os(xa(e,s),-1)})}function Q8(e,t){return Ge(()=>j1(xa(Up(e,-1),Up(t,-1)),"float32"))}function FMe(e,t){return Ge(()=>Ct(Ot(el(xa(e,1),xa(t,1))),"float32"))}function LMe(e,t){return Ge(()=>Ct(Ot(el(xa(e,0),xa(t,1))),"float32"))}function BMe(e,t){return Ge(()=>{const n=FMe(e,t),s=LMe(e,t),o=ht(n,s);return Ct(mr(xi(o,0),Vt(n,o),0),"float32")})}function zMe(e,t){return X1(e,t)}function VMe(e,t){return e.rank===t.rank&&(e=Eg(e,[e.rank-1])),t=Up(t,-1),t.dtype!==e.dtype&&(t=Ct(t,e.dtype)),Ct(xa(e,t),"float32")}const WMe=Y1,HMe=Y1,UMe=zE,jMe=zE,GMe=VE,KMe=VE,e5=Kp,qMe=Z8,t5=Sb,Eb={binaryAccuracy:J8,categoricalAccuracy:Q8,precision:BMe,categoricalCrossentropy:e5,sparseCategoricalCrossentropy:t5,mse:WMe,MSE:HMe,mae:UMe,MAE:jMe,mape:GMe,MAPE:KMe,cosine:qMe};function YMe(e){if(typeof e=="string"&&e in Eb)return Eb[e];if(typeof e!="string"&&e!=null)return e;throw new _e(`Unknown metric ${e}`)}function L0(e){if(oa(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(const n of Object.keys(Ib))if(Ib[n]===e){t=n;break}if(t!==void 0)return t;for(const n of Object.keys(Eb))if(Eb[n]===e){t=n;break}return t!==void 0?t:e.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XMe(e){const t={Adagrad:()=>kd.adagrad(.01),Adadelta:()=>kd.adadelta(1,.95,Gs()),Adam:()=>kd.adam(.001,.9,.999,Gs()),Adamax:()=>kd.adamax(.002,.9,.999,Gs(),0),RMSProp:()=>kd.rmsprop(.001,.9,0,Gs()),SGD:()=>kd.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new _e(`Unknown Optimizer ${e}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const c3=1*1024*1024;function d3(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!uC(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const s=JSON.stringify(e);s.length>c3&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${c3}.`)}}function uC(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t)if(typeof n!="string"||!uC(e[n]))return!1;return!0}else if(Array.isArray(e)){for(const t of e)if(!uC(t))return!1;return!0}else return!1;else{const t=typeof e;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZMe(e,t,n,s=console.log){const o=QMe(e),r=["Layer (type)","Input Shape","Output shape","Param #"];o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(t*c)));let i;if(!o){r.push("Receives inputs"),i=[];for(const c in e.nodesByDepth)i.push(...e.nodesByDepth[c])}s("_".repeat(t)),Tb(r,n,s),s("=".repeat(t));const a=e.layers;for(let c=0;c<a.length;++c)o?eOe(a[c],n,s):tOe(a[c],n,i,s),s((c===a.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=JMe(e),u=Cb(e.nonTrainableWeights);s(`Total params: ${l+u}`),s(`Trainable params: ${l}`),s(`Non-trainable params: ${u}`),s("_".repeat(t))}function JMe(e){let t;return e.collectedTrainableWeights!=null?t=Cb(e.collectedTrainableWeights):t=Cb(e.trainableWeights),t}function QMe(e){let t=!0;const n=[],s=[];for(const o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){t=!1;break}s.push(...o)}if(t)for(const o of e.layers){let r=!1;for(const i of o.inboundNodes)if(s.indexOf(i)!==-1)if(r){t=!1;break}else r=!0;if(!t)break}return t}function Tb(e,t,n=console.log){let s="";for(let o=0;o<e.length;++o)o>0&&(s=s.slice(0,s.length-1)+" "),s+=e[o],s=s.slice(0,t[o]),s+=" ".repeat(t[o]-s.length);n(s)}function eOe(e,t,n){let s,o;try{o=e.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{s=JSON.stringify(e.outputShape)}catch{s="multiple"}const r=e.name,i=e.getClassName(),a=[`${r} (${i})`,o,s,e.countParams().toString()];Tb(a,t,n)}function tOe(e,t,n,s){let o,r;try{r=e.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{r="multiple"}try{o=JSON.stringify(e.outputShape)}catch{o="multiple"}const i=[];for(const d of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,p=d.nodeIndices[f],m=d.tensorIndices[f];i.push(`${h}[${p}][${m}]`)}const a=e.name,l=e.getClassName(),u=i.length===0?"":i[0],c=[`${a} (${l})`,r,o,e.countParams().toString(),u];Tb(c,t,s);for(let d=1;d<i.length;++d)Tb(["","","","",i[d]],t,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function n5(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function cC(e,t){if(e===null)return null;if(typeof e=="string")return Gu(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],s=e.length;for(let o=0;o<s;++o){const r=e[o];n5(t,o,r)?n.push(r):n.push(cC(r,t))}return n}else{const n={};for(const s of Object.keys(e)){const o=e[s];if(s==="name"&&typeof o=="string")n[s]=o;else{const r=Gu(s);n[r]=cC(o,r)}}return n}}function dC(e,t){if(e==null)return null;if(typeof e=="string")return Oa(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],s=e.length;for(let o=0;o<s;++o){const r=e[o];n5(t,o,r)?n.push(r):n.push(dC(r,t))}return n}else{const n={};for(const s of Object.keys(e)){const o=e[s],r=Oa(s);(s==="name"||s==="className")&&typeof o=="string"?n[r]=o:n[r]=dC(o,s)}return n}}/** @license See the LICENSE file. */const s5="3.15.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nOe(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return Ct(t,e.dtype)}catch{throw new _e(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}class Fl{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof Fl)for(const n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(const n of t)this.add(n.key,n.value)}}add(t,n,s){if(this.id2Value[t.id]==null)this.id2Value[t.id]=nOe(t,n),this.name2Id[t.name]=t.id,s!=null&&(this.id2Mask[t.id]=s);else throw new _e(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof da){if(this.id2Value[t.id]==null)throw new _e(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const n=this.name2Id[t];if(n==null)throw new _e(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof da){if(this.id2Value[t.id]==null)throw new _e(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const n=this.name2Id[t];if(n==null)throw new _e(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&xn(this.id2Mask)}}const Z2={},f3={};function Hh(e,t,n,s){const o=n==null?!1:n.training,r=Array.isArray(e),i=r?e:[e],a=i.map(p=>p.name),l=[],u=t.names();for(const p of a)u.indexOf(p)!==-1?l.push(t.getValue(p)):l.push(null);s!=null&&(s.maxNumTensors=-1/0,s.minNumTensors=1/0);const c=a.join(",")+"|"+t.names().join(",");let d,f;if(Z2[c]==null){const p=sOe(i,t);d=p.sorted,f=p.recipientCounts,Z2[c]=d,f3[c]=f}d=Z2[c],f={},o||Object.assign(f,f3[c]);const h=new Fl(t);for(let p=0;p<d.length;++p){if(s!=null){const T=Zx().numTensors;T>s.maxNumTensors&&(s.maxNumTensors=T),T<s.minNumTensors&&(s.minNumTensors=T)}const m=d[p],g=m.sourceLayer;if(g instanceof Fg)continue;const v=[],b=[],w=[];let y=!1;for(const T of m.inputs){const A=h.getValue(T),R=h.getMask(T);v.push(A),b.push(R),R!=null&&(y=!0),o||(f[T.name]--,f[T.name]===0&&!t.hasKey(T)&&a.indexOf(T.name)===-1&&!A.isDisposed&&T.sourceLayer.stateful!==!0&&w.push(A))}y&&(n=n||{},n.mask=b[0]);const k=hs(g.apply(v,n));let x=null;g.supportsMasking&&(x=g.computeMask(v,b));const C=rOe(m),S=Array.isArray(C)?C:[C];for(let T=0;T<S.length;++T){h.hasKey(S[T])||h.add(S[T],k[T],Array.isArray(x)?x[0]:x);const A=a.indexOf(S[T].name);A!==-1&&(l[A]=k[T])}o||xn(w)}return h.disposeMasks(),r?l:l[0]}function sOe(e,t){oe(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(e.length===1){const o=h3(e[0],t);n=o.sorted,s=o.recipientMap}else{const o=new Set;for(const r of e){const{sorted:i,recipientMap:a}=h3(r,t);for(const l of i)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in a)s[l]==null&&(s[l]=new Set),a[l].forEach(u=>s[l].add(u))}}return{sorted:n,recipientCounts:oOe(s)}}function oOe(e){const t={};for(const n in e)t[n]=e[n].size;return t}function h3(e,t){const n=new Set,s=[],o={};for(const a of t.names())n.add(a);const r=[],i=[];for(r.push(e);r.length>0;){const a=r[r.length-1];if(n.has(a.name)){r.pop();continue}const l=i[i.length-1]===r.length-1;if(a.inputs.length===0||l)r.pop(),s.push(a),n.add(a.name),l&&i.pop();else{i.push(r.length-1);for(const u of a.inputs)o[u.name]==null&&(o[u.name]=new Set),o[u.name].add(a.name),!n.has(u.name)&&r.push(u)}}return{sorted:s,recipientMap:o}}function rOe(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let s=0;s<e.sourceLayer.inboundNodes.length;++s)for(const o of e.sourceLayer.inboundNodes[s].outputTensors)if(o.id===e.id){n=s;break}t=e.sourceLayer.getOutputAt(n)}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ai extends Rn{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=K1(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],Ul(this.inputs).length!==this.inputs.length)throw new _e(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);Ul(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const w=b.sourceLayer,y=b.nodeIndex,k=b.tensorIndex;this.outputLayers.push(w),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(k)}for(const b of this.inputs){const w=b.sourceLayer,y=b.nodeIndex,k=b.tensorIndex;oa(y===0,"input layer has >1 nodes"),oa(k===0,"input layer has >1 tensors"),this.inputLayers.push(w),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(k)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const w=this.inputLayers[b];if(!(w instanceof Fg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${w.getClassName()}.`);this.inputNames.push(w.name),this.feedInputShapes.push(w.batchInputShape),this.feedInputNames.push(w.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},s={},o={},r={},i={},a=[],l=(b,w,y,k,x,C)=>{(k==null||x==null||C==null)&&(k=b.sourceLayer,x=b.nodeIndex,C=b.tensorIndex);const S=k.inboundNodes[x];if(y.indexOf(S)!==-1)throw new ti(`The tensor ${b.name} at layer "${k.name}" is part of a cycle.`);if(w.indexOf(S)!==-1)return;this.containerNodes.add(Ai.nodeKey(k,x)),k.id in i||(i[k.id]=Object.keys(i).length),y.indexOf(S)===-1&&y.push(S);const T=S.inboundLayers.length;for(let A=0;A<T;A++){const R=S.inputTensors[A],L=S.inboundLayers[A],P=S.nodeIndices[A],V=S.tensorIndices[A];l(R,w,y,L,P,V)}for(w.push(S);y.indexOf(S)>=0;)y.splice(y.indexOf(S),1);a.push(S)},u=[],c=[];for(const b of this.outputs)l(b,u,c);const d=a.slice().reverse();for(const b of d){s[b.id]=b,b.id in n||(n[b.id]=0);let w=n[b.id];const y=o[b.outboundLayer.id]==null?0:o[b.outboundLayer.id];w=Math.max(w,y),o[b.outboundLayer.id]=w,r[b.outboundLayer.id]=b.outboundLayer,n[b.id]=w;for(let k=0;k<b.inboundLayers.length;k++){const x=b.inboundLayers[k],C=b.nodeIndices[k],S=x.inboundNodes[C],T=n[S.id]==null?0:n[S.id];n[S.id]=Math.max(w+1,T),s[S.id]=S}}const f={};for(const b in n){const w=n[b];w in f||(f[w]=[]),f[w].push(s[b])}const h={};for(const b in o){const w=o[b];w in h||(h[w]=[]),h[w].push(r[b])}let p=Object.keys(h).map(b=>parseInt(b,10)).sort(O0);this.layers=[];for(const b of p){const w=h[b];w.sort((y,k)=>{const x=i[y.id],C=i[k.id];return x<C?-1:x>C?1:0});for(const y of w)y instanceof Ai&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=h,p=Object.keys(f).map(b=>parseInt(b,10)).sort(O0);const m=this.inputs.slice(),g=[];for(const b of p)for(const w of f[b]){const y=w.outboundLayer;if(y!=null){for(const k of w.inputTensors)if(m.indexOf(k)===-1)throw new ti(`Graph disconnected: cannot obtain value for tensor ${k} at layer "${y.name}". The following previous layers were accessed without issue: ${g}`);for(const k of w.outputTensors)m.push(k);g.push(y.name)}}this.nodesByDepth=f;const v=this.layers.map(b=>b.name);for(const b of v){const w=v.filter(y=>y===b).length;if(w!==1)throw new ti(`The name "${b}" is used ${w} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new q1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(s=>s.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new _e("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.layers)n.push(...s.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){const s={};let o=0;for(const i of this.layers)for(const a of i.weights){if(s[a.originalName]!=null)throw new _e(`Duplicate weight name: ${a.originalName}`);s[a.originalName]=a,o++}const r=[];for(const i in t){let a=i;if(s[i]==null){const l=i.split("/");a=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(s[a]!=null)r.push([s[a],t[i]]);else if(n)throw new _e(`Provided weight data has no target variable: ${i}`);delete s[a]}if(n){const i=[];for(const a in s)i.push(a);if(i.length>0)throw new _e(`${i.length} of ${o} weights are not set: ${i}`)}BE(r)}updatedConfig(){const t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${s5}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){const s=dC(this.updatedConfig());return n?JSON.stringify(s):s}call(t,n){return Ge(()=>{t=hs(t);const s=new Fl;for(let o=0;o<this.inputs.length;++o)s.add(this.inputs[o],t[o]);return Hh(this.outputs,s,n)})}computeMask(t,n){return Ge(()=>{t=hs(t);let s;return n==null?s=Rc(null,t.length):s=hs(n),this.runInternalGraph(t,s)[1]})}computeOutputShape(t){const n=xb(t);if(n.length!==this.inputLayers.length)throw new _e(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";s[c]=u}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(O0);if(o.length>1)for(const a of o){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],v=u.nodeIndices[m],b=u.tensorIndices[m],w=`${g.name}_${v}_${b}`,y=s[w];d.push(y)}const f=c.computeOutputShape(qo(d)),h=xb(f),p=c.inboundNodes.indexOf(u);for(let m=0;m<h.length;m++){const g=`${c.name}_${p}_${m}`;s[g]=h[m]}}}const r=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${c}`;i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];oa(l in s),r.push(s[l])}return qo(r)}runInternalGraph(t,n){n==null&&(n=Rc(null,t.length));const s={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=t[l],d=n[l];s[u.id]=[c,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(O0);for(const l of o){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,f=c.inputTensors,h=c.outputTensors,p=new Array;for(const m of f)m.id in s&&p.push(s[m.id]);if(p.length===f.length){let m={},g,v,b,w;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[y,k]=p[0];m.mask==null&&(m.mask=k),b=hs(d.call(y,m)),w=hs(d.computeMask(y,k)),g=[y],v=[k]}else g=p.map(y=>y[0]),v=p.map(y=>y[1]),m.mask==null&&(m.mask=v),b=hs(d.call(g,m)),w=hs(d.computeMask(g,v));if(d.activityRegularizer)throw new ln("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<h.length;++y){const k=h[y],x=b[y],C=w[y];s[k.id]=[x,C]}}}}const r=[],i=[],a=[];for(const l of this.outputs){oa(l.id in s,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=s[l.id];a.push(u.shape),r.push(u),i.push(c)}return[r,i,a]}buildNodeConversionMap(t){const n={};let s;for(const o of this.layers){s=o instanceof Ai?1:0;for(let r=0;r<o.inboundNodes.length;r++){const i=Ai.nodeKey(o,r);this.containerNodes.has(i)&&(n[i]=s,s+=1)}}return n}getLayer(t,n){if(n!=null){if(this.layers.length<=n)throw new _e(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}else if(t==null)throw new _e("Provide either a layer name or layer index");for(const s of this.layers)if(s.name===t)return s;throw new _e(`No such layer: ${t}`)}calculateLosses(){return Ge(()=>{const t=[];for(const n of this.layers)for(let s=0;s<n.inboundNodes.length;++s){const o=Ai.nodeKey(n,s);this.containerNodes.has(o)&&t.push(...n.calculateLosses())}return t})}getConfig(){const t={name:this.name},n=this.buildNodeConversionMap(this.layers),s=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),u=[];for(let d=0;d<i.inboundNodes.length;d++){const f=i.inboundNodes[d],h=Ai.nodeKey(i,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const m=[];for(let g=0;g<f.inboundLayers.length;g++){const v=f.inboundLayers[g],b=f.nodeIndices[g],w=f.tensorIndices[g],y=Ai.nodeKey(v,b);let k=n[y];k==null&&(k=0),m.push([v.name,k,w,p])}u.push(m)}}}const c={};c.name=i.name,c.className=a,c.config=l,c.inboundNodes=u,s.push(c)}t.layers=s;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],u=Ai.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,c,d])}t.inputLayers=o;const r=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],u=Ai.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];r.push([a.name,c,d])}return t.outputLayers=r,t}static fromConfig(t,n,s={},o=!1){const r={},i={};function a(g,v){g.name in i?i[g.name].push(v):i[g.name]=[v]}function l(g,v){const b=[];let w;for(const y of v){const k=y[0],x=y[1],C=y[2];if(w=y[3]==null?{}:y[3],!(k in r)){a(g,v);return}const S=r[k];if(S.inboundNodes.length<=x){a(g,v);return}const T=S.inboundNodes[x];b.push(T.outputTensors[C])}b.length>0&&g.apply(qo(b),w)}function u(g){const v=g.name,b=qa(g,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(o),r[v]=b,g.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new _e(`Corrupted configuration, expected array for nodeData: ${y}`);a(b,y)})}const c=n.name,d=n.layers;for(const g of d)u(g);for(;!q3e(i);)for(const g of d){const v=r[g.name];if(v.name in i){const b=i[v.name];delete i[v.name];for(const w of b)l(v,w)}}const f=[],h=[],p=n.inputLayers;for(const g of p){const v=g[0],b=g[1],w=g[2];oa(v in r);const k=r[v].inboundNodes[b].outputTensors;f.push(k[w])}const m=n.outputLayers;for(const g of m){const v=g[0],b=g[1],w=g[2];oa(v in r);const k=r[v].inboundNodes[b].outputTensors;h.push(k[w])}return new t({inputs:f,outputs:h,name:c})}get stateful(){if(this._stateful)throw new _e("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Ge(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iOe(e,t,n){const s=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(o=>null);if(s===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==s)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){const o=[];return t.forEach(r=>{r in e?o.push(e[r]):o.push(null)}),o}else throw new Error(`The model has multiple (${s}) outputs, so ${n} must be either an array with ${s} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function o5(e,t){return iOe(e,t,"classWeight")}async function r5(e,t,n,s){if(t!=null||s!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const o=Ge(()=>{if(e.shape.length===1)return cc(e);if(e.shape.length===2){if(e.shape[1]>1)return Up(e,1);if(e.shape[1]===1)return Oe(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await o.data());xn(o);const i=[];return r.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),_o(i,"float32")}else return null}function aOe(e,t){return Ee(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lOe=32;function i5(e,t){let n,s;const o=t;n=o.xs,s=o.ys,oe(n!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const r=p3("input",e.inputNames,n),i=p3("output",e.outputNames,s),a=r[0].shape[0];oe(r.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),oe(i.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<r.length;l++)oe(r[l].shape[0]===a,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${r[l].shape[0]}; expected  ${a} based on input ${e.inputNames[0]}.`);for(let l=0;l<i.length;l++)oe(i[l].shape[0]===a,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${e.inputNames[0]}.`);return{xs:r,ys:i}}function p3(e,t,n){if(n instanceof Ws)return[n];if(Array.isArray(n))return oe(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const s=[];for(const o of t){if(n[o]==null)throw new _e(`The feature data generated by the dataset lacks the required ${e} key '${o}'.`);s.push(n[o])}return s}}function uOe(e){if(e.length===3)throw new ln("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function cOe(e,t,n){const s=n.batchesPerEpoch!=null;if(oe(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),oe(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),oe(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),oe(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),oe(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=n.validationData!=null;let r,i;if(o)if(m3(n.validationData))oe(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=uOe(n.validationData);r=g.xs,i=g.ys}const a=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;o?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=Y8(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=X8(c,d,n.epochs,null,null,dOe(t,n),null,o,u);f.setModel(e),e.history=h,await f.onTrainBegin(),e.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await t.iterator();for(;p<n.epochs;){const g={};await f.onEpochBegin(p);let v=0,b=0;for(s||(m=await t.iterator());!s||v<n.batchesPerEpoch;){const w=await m.next();if(s&&w.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(w.value!=null){const{xs:y,ys:k}=i5(e,w.value),x={};x.batch=b,x.size=y[0].shape[0],await f.onBatchBegin(b,x);const C=[];if(n.classWeight!=null){const A=o5(n.classWeight,e.outputNames);for(let R=0;R<A.length;++R)C.push(await r5(k[R],null,A[R]))}const S=y.concat(k).concat(C),T=a(S);xn(S);for(let A=0;A<l.length;++A){const R=l[A],L=T[A];x[R]=L,ka(L)}await f.onBatchEnd(b,x),q8(x),b++,v++}if(s?v>=n.batchesPerEpoch:w.done){if(o){let y;m3(n.validationData)?y=hs(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):y=hs(e.evaluate(r,i,{batchSize:n.validationBatchSize==null?lOe:n.validationBatchSize,verbose:0}));for(let k=0;k<e.metricsNames.length;++k)g[`val_${e.metricsNames[k]}`]=y[k]}break}if(e.stopTraining_)break}if(await f.onEpochEnd(p,g),p++,e.stopTraining_)break}return await f.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function dOe(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function m3(e){return typeof e.iterator=="function"}function fOe(e){return typeof e.next=="function"}async function hOe(e,t,n){n=n||{};const s=n.batches!=null,o=e.testFunction;let r=[];if(n.verbose>0)throw new ln("Verbose mode is not implemented yet.");oe(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=fOe(t)?t:await t.iterator();let a=0,l=0;for(;!s||l<n.batches;){const u=await i.next();if(r=Ge(()=>{if(u.value){const{xs:c,ys:d}=i5(e,u.value),f=c.concat(d),h=Ge(()=>o(f));if(xn(f),l===0)for(let m=0;m<h.length;++m)r.push(tn(0));const p=f[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],v=r[m];r[m]=Ge(()=>ht(r[m],Ee(p,g))),l>0&&xn(v)}xn(h),a+=p,++l}return r}),u.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<r.length;++u){const c=r[u];r[u]=Vt(r[u],a),xn(c)}return qo(r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fC(e){oe(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function Uh(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(s=>hc(s,t,n-t)):hc(e,t,n-t)}function WE(e,t){return Ge(()=>e==null?null:Array.isArray(e)?e.map(n=>WE(n,t)):F8(e,t.dtype==="int32"?t:Ct(t,"int32")))}function hC(e,t){const n=[];let s=0,o=null;for(;s<e;)o=s+t,o>=e&&(o=e),n.push([s,o]),s=o;return n}async function pOe(e,t,n,s,o,r,i,a,l,u,c,d,f,h,p){o==null&&(o=32),r==null&&(r=1),c==null&&(c=!0),f==null&&(f=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new _e("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=e.checkNumSamples(n,o,h,"steps_per_epoch");let v;g!=null&&(v=ji(0,g)),i==null&&(i=1);const{callbackList:b,history:w}=X8(a,i,r,f,g,h,o,m,d);b.setModel(e),e.history=w,await b.onTrainBegin(),e.stopTraining_=!1;for(let y=f;y<r;++y){await b.onEpochBegin(y);const k={};if(h!=null)throw new ln("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new ln("batch shuffling is not implemneted yet");c&&JSe(v);const x=_o(v),C=hC(g,o);for(let S=0;S<C.length;++S){const T={};if(await b.onBatchBegin(S,T),Ge(()=>{const A=C[S][0],R=C[S][1],L=hc(x,A,R-A);T.batch=S,T.size=R-A;const P=WE(n,L),V=t(P);for(let H=0;H<s.length;++H){const F=s[H],M=V[H];T[F]=M,ka(M)}if(S===C.length-1&&m){const H=e.testLoop(l,u,o);for(let F=0;F<s.length;++F){const M=s[F],B=H[F];ka(B),k["val_"+M]=B}}}),await b.onBatchEnd(S,T),q8(T),e.stopTraining_)break}x.dispose()}if(await b.onEpochEnd(y,k),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}async function mOe(e,t,n,s={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;let o,r,i,a,l,u,c,d,f;try{const h=s.batchSize==null?32:s.batchSize;fC(h);const p=!1,m=await e.standardizeUserData(t,n,s.sampleWeight,s.classWeight,p,h);o=m[0],r=m[1],f=m[2];let g=!1,v;if(s.validationData!=null&&s.validationData.length>0){if(g=!0,s.validationData.length===2)l=s.validationData[0],u=s.validationData[1];else throw s.validationData.length===3?new ln("validationData including sample weights is not supported yet."):new _e(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const T=!0,A=await e.standardizeUserData(l,u,null,null,T,h);c=A[0],d=A[1],v=c.concat(d)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){g=!0;const T=Math.floor(o[0].shape[0]*(1-s.validationSplit)),A=o[0].shape[0];c=Uh(o,T,A),i=o,o=Uh(o,0,T),d=Uh(r,T,A),a=r,r=Uh(r,0,T),v=c.concat(d)}else s.validationSteps!=null&&(g=!0);const b=o.concat(r).concat(f);e.checkTrainableWeightsConsistency();const w=e.makeTrainFunction(),y=e.getDedupedMetricsNames();let k,x;g?(e.makeTestFunction(),k=e.testFunction,x=y.slice().concat(y.map(T=>"val_"+T))):(k=null,v=[],x=y.slice());const C=Y8(s.callbacks,s.yieldEvery);return await pOe(e,w,b,y,h,s.epochs,s.verbose,C,k,v,s.shuffle,x,s.initialEpoch,null,null)}finally{e.isTraining=!1,Mi(o,t),Mi(r,n),Mi(i,t),Mi(a,n),Mi(c,l),Mi(d,u),f!=null&&xn(f)}}function a5(e){const t=[];e instanceof Ws&&(e=[e]);for(let n=0;n<e.length;++n){const s=e[n];if(s.rank===1)t.push(Mg(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(s)}}return t}function Mi(e,t){if(e==null)return;const n=[];if(t instanceof Ws)n.push(t.id);else if(Array.isArray(t))t.forEach(o=>n.push(o.id));else if(t!=null)for(const o in t){const r=t[o];n.push(r.id)}const s=[];if(e instanceof Ws)n.indexOf(e.id)===-1&&s.push(e);else if(Array.isArray(e))e.forEach(o=>{n.indexOf(o.id)===-1&&s.push(o)});else if(e!=null)for(const o in e){const r=e[o];n.indexOf(r.id)===-1&&s.push(r)}s.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gOe(e){return e instanceof Ws}function pC(e){return Array.isArray(e)}function g3(e){return!gOe(e)&&!pC(e)}function v3(e,t,n,s=!0,o=""){if(t==null||t.length===0){if(e!=null){let i=!1;if(pC(e)&&e.length>0)i=!0;else if(g3(e)){for(const a in e)if(e.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new _e(`Error when checking model ${o} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(i=>null);let r;if(g3(e)){e=e,r=[];for(const i of t){if(e[i]==null)throw new _e(`No data provided for "${i}". Need data for each key in: ${t}`);r.push(e[i])}}else if(pC(e)){if(e=e,e.length!==t.length)throw new _e(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);r=e}else{if(e=e,t.length>1)throw new _e(`The model ${o} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);r=[e]}if(r=a5(r),n!=null)for(let i=0;i<t.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new _e(`Error when checking ${o}: expected ${t[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c>=0&&u!==c)throw new _e(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function vOe(e,t,n){const s=Ul(e.map(r=>r.shape[0]));s.sort();const o=Ul(t.map(r=>r.shape[0]));if(o.sort(),s.length>1)throw new _e(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(r=>r.shape))}`);if(o.length>1)throw new _e(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(s.length>0&&o.length>0&&!zn(s,o))throw new _e(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${o[0]} target sample(s).`)}function bOe(e,t,n){const s=[Y1,X1,Kp];for(let o=0;o<e.length;++o){const r=e[o],i=t[o],a=n[o];if(i!=null){if(i===Kp&&r.shape[r.shape.length-1]===1)throw new _e(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(i)!==-1){const l=r.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const d=l[c],f=u[c];if(f!=null&&d!==f)throw new _e(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function b3(e,t,n,s=!0,o=""){let r;if(Array.isArray(e)){if(e.length!==t.length)throw new _e(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);r=e}else{if(t.length>1)throw new _e(`The model expects ${t.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);r=[e]}if(n!=null)for(let i=0;i<t.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new _e(`Error when checking ${o}: expected ${t[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c!==u)throw new _e(`Error when checking ${o}: expected ${t[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function yOe(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(s=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(n))return t.map(s=>n);{const s=[];for(const o of t){let r=n.hasOwnProperty(o)?n[o]:[];Array.isArray(r)||(r=[r]),s.push(r)}return s}}const wOe="layers-model";class Yd extends Ai{constructor(t){super(t),this.isTraining=!1}summary(t,n,s=console.log){if(!this.built)throw new _e("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");ZMe(this,t,n,s)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=XMe(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof hu))throw new _e("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const i in t.loss)if(this.outputNames.indexOf(i)===-1)throw new _e(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)t.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(X2(t.loss[i]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new _e(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);n=t.loss.map(a=>X2(a))}else{const i=X2(t.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const s=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],fc("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=yOe(t.metrics,this.outputNames),r=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};fc("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=o[i];(u=>{const c="";let d,f,h;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[i];g[g.length-1]===1||this.lossFunctions[i]===X1?["accuracy","acc"].indexOf(p)!==-1?f=J8:["crossentropy","ce"].indexOf(p)!==-1&&(f=zMe):this.lossFunctions[i]===Sb?["accuracy","acc"].indexOf(p)!==-1?f=VMe:["crossentropy","ce"].indexOf(p)!==-1&&(f=t5):["accuracy","acc"].indexOf(p)!==-1?f=Q8:["crossentropy","ce"].indexOf(p)!==-1&&(f=e5);let v;["accuracy","acc"].indexOf(p)!==-1?v="acc":["crossentropy","ce"].indexOf(p)!==-1&&(v="ce"),h=f,d=c+v}else h=YMe(p),d=c+L0(p);let m;fc(d,()=>{m=h}),r(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,n,s={}){const o=s.batchSize==null?32:s.batchSize;fC(o);const r=!0,i=this.standardizeUserDataXY(t,n,r,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,o,s.verbose,s.steps);return qo(u)}finally{Mi(i[0],t),Mi(i[1],n)}}async evaluateDataset(t,n){return this.makeTestFunction(),hOe(this,t,n)}checkNumSamples(t,n,s,o="steps"){let r;if(s!=null){if(r=null,n!=null)throw new _e(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(t!=null)Array.isArray(t)?r=t[0].shape[0]:r=t.shape[0];else throw new _e(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return r}execute(t,n){if(Array.isArray(n)&&n.length===0)throw new _e("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(n),o=s?n:[n],r=this.retrieveSymbolicTensors(o),i=new Fl;if(t instanceof Ws&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new _e(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],t[l])}else for(const l of this.inputs){const u=t[l.name];if(u==null)throw new _e(`No value is provided for the model's input ${l.name}`);i.add(l,u)}const a=Hh(r,i);return s?a:a[0]}retrieveSymbolicTensors(t){const n=Rc(null,t.length);let s=t.length;for(const o of this.layers){const r=Array.isArray(o.output)?o.output:[o.output],i=r.map(a=>a.name);for(let a=0;a<t.length;++a){const l=i.indexOf(t[a]);if(l!==-1&&(n[a]=r[l],s--),s===0)break}if(s===0)break}if(s>0){const o=[];throw n.forEach((r,i)=>{r==null&&o.push(t[i])}),new _e(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(t,n=32,s=!1){return Ge(()=>{const o=this.checkNumSamples(t);if(s)throw new ln("Verbose predictLoop() is not implemented yet.");const r=hC(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<r.length;++a)Ge(()=>{const u=r[a][0],c=r[a][1],d=Uh(t,u,c),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new Fl(f);return Hh(this.outputs,h)}).forEach((u,c)=>i[c].push(u));return qo(i.map(a=>Ro(a,0)))})}predict(t,n={}){const s=a5(t);b3(s,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return fC(o),this.predictLoop(s,o)}finally{Mi(s,t)}}predictOnBatch(t){b3(t,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,n)}standardizeUserDataXY(t,n,s=!0,o){if(this.optimizer_==null)throw new ti("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===Sb?r.push(a.slice(0,a.length-1).concat([1])):r.push(a)}if(t=v3(t,this.feedInputNames,this.feedInputShapes,!1,"input"),n=v3(n,this.feedOutputNames,r,!1,"target"),vOe(t,n),bOe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&t[0].shape[0]%o!==0)throw new _e(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${t[0].shape[0]} sample(s).`);return[t,n]}async standardizeUserData(t,n,s,o,r=!0,i){const[a,l]=this.standardizeUserDataXY(t,n,r,i);if(s!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){const c=o5(o,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await r5(l[d],null,c[d]))}return[a,l,u]}testLoop(t,n,s,o=0,r){return Ge(()=>{const i=this.checkNumSamples(n,s,r,"steps"),a=[];if(o>0)throw new ln("Verbose mode is not implemented yet.");if(r!=null)throw new ln("steps mode in testLoop() is not implemented yet");{const l=hC(i,s),u=_o(ji(0,i));for(let c=0;c<l.length;++c){const d=l[c][0],f=l[c][1],h=hc(u,d,f-d),p=WE(n,h),m=t(p);if(c===0)for(let g=0;g<m.length;++g)a.push(tn(0));for(let g=0;g<m.length;++g){const v=m[g];a[g]=ht(a[g],Ee(f-d,v))}}for(let c=0;c<a.length;++c)a[c]=Vt(a[c],i)}return a})}getDedupedMetricsNames(){const t=this.metricsNames,n=[];for(let s=0;s<t.length;++s){const o=t[s];let r=o;t3(t,o)>1&&(r+=`_${t3(t.slice(0,s),o)}`),n.push(r)}return n}makeTrainFunction(){return t=>{const n=[],s=t.slice(0,this.inputs.length),o=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:s[m]});const f=new Fl(d),h=Hh(this.outputs,f,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){let v=this.lossFunctions[m](o[m],h[m]);r[m]!=null&&(v=aOe(v,r[m]));const b=Os(v);n.push(b),m===0?p=v:p=ht(p,v)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const v=this.metricsTensors[m][0],b=this.metricsTensors[m][1];g=Os(v(o[b],h[b]))}ka(g),i.push(g)}return p=Os(p),this.calculateLosses().forEach(m=>{p=ht(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),u=!0;return[this.optimizer_.minimize(a,u,l)].concat(i)}}makeTestFunction(){this.testFunction=t=>Ge(()=>{const n=[];let s;const o=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let u=0;u<this.inputs.length;++u)i.push({key:this.inputs[u],value:o[u]});const a=new Fl(i),l=Hh(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=Os(c(r[u],l[u]));u===0?s=d:s=ht(s,d),n.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],f=Os(c(r[d],l[d]));n.push(f)}return n})}async fit(t,n,s={}){return mOe(this,t,n,s)}async fitDataset(t,n){return cOe(this,t,n)}async trainOnBatch(t,n){const s=await this.standardizeUserData(t,n),o=s[0],r=s[1],a=this.makeTrainFunction()(o.concat(r)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return xn(a),Mi(s[0],t),Mi(s[1],n),qo(l)}getNamedWeights(t){const n=[],s=t!=null&&t.trainableOnly,o=s?this.trainableWeights:this.weights,r=this.getWeights(s);for(let i=0;i<o.length;++i)s&&!o[i].trainable||n.push({name:o[i].originalName,tensor:r[i]});return n}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=Zx().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-Zx().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=Oa(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(n=>Oa(n))}else{const n=Object.keys(this.loss);t={};const s=this.loss;for(const o of n)if(typeof s[o]=="string")t[o]=Oa(s[o]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Oa(L0(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>Oa(L0(t)));{const t={};for(const n in this.metrics)t[n]=Oa(L0(this.metrics[n]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=cC(t.optimizer_config),s=qa(n);let o;if(typeof t.loss=="string")o=Gu(t.loss);else if(Array.isArray(t.loss))o=t.loss.map(i=>Gu(i));else if(t.loss!=null){o={};for(const i in t.loss)o[i]=Gu(t.loss[i])}let r;if(Array.isArray(t.metrics))r=t.metrics.map(i=>Gu(i));else if(t.metrics!=null){r={};for(const i in t.metrics)r[i]=Gu(t.metrics[i])}this.compile({loss:o,metrics:r,optimizer:s})}async save(t,n){if(typeof t=="string"){const u=HIe(t);if(u.length===0)throw new _e(`Cannot find any save handlers for URL '${t}'`);if(u.length>1)throw new _e(`Found more than one (${u.length}) save handlers for URL '${t}'`);t=u[0]}if(t.save==null)throw new _e("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await FR(this.getNamedWeights(n)),o=!1,r=null,a={modelTopology:this.toJSON(r,o),format:wOe,generatedBy:`TensorFlow.js tfjs-layers v${s5}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await FR(await this.optimizer.getWeights(),u);s.specs.push(...d),s.data=Yz([s.data,c])}return this.userDefinedMetadata!=null&&(d3(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=s.data,a.weightSpecs=s.specs,t.save(a)}setUserDefinedMetadata(t){d3(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}Yd.className="Model";ut(Yd);class l5 extends Yd{}l5.className="Functional";ut(l5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qp extends Yd{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:K1("sequential_"),t.layers!=null)for(const n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new _e(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const n=t instanceof qp||t instanceof Yd;let s;if(n){if(s=t,s.outputs.length!==1)throw new _e("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new _e("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new _e("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=CMe({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(o)}if(n)this.outputs=s.outputs,this.inputs=s.inputs;else{if(t.inboundNodes.length!==1)throw new _e(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new _e("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=K8(this.outputs[0])}this.inboundNodes=[],new q1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Rc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=t.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(Kn(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Yd({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,s=console.log){this.built||this.build(),super.summary(t,n,s)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,s={}){if(!this.built)throw new ti("The model needs to be compiled before being used.");return this.model.evaluate(t,n,s)}async evaluateDataset(t,n){if(!this.built)throw new ti("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,s={}){if(!this.built)throw new ti("The model needs to be compiled before being used.");return this.model.fit(t,n,s)}async fitDataset(t,n){if(!this.built)throw new ti("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,s={},o=!1){let r,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new _e("Legacy serialization format not supported yet.");r=n}else oe(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,i=n;const a=new t(i);if(!(a instanceof qp))throw new ln(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of r){const c=qa(l,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(t){if(this.model==null)throw new _e("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new _e("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const n of this.layers){const s={};s.className=n.getClassName(),s.config=n.getConfig(),t.push(s)}return{name:this.name,layers:t}}}qp.className="Sequential";ut(qp);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tr extends qf{getConfig(){return{}}}class u5 extends tr{apply(t,n=1){return lMe(t,n)}}u5.className="elu";ut(u5);class c5 extends tr{apply(t){return V6(t)}}c5.className="selu";ut(c5);class d5 extends tr{apply(t){return hl(t)}}d5.className="relu";ut(d5);class f5 extends tr{apply(t){return Ge(()=>Ig(6,hl(t)))}}f5.className="relu6";ut(f5);class h5 extends tr{apply(t){return t}}h5.className="linear";ut(h5);class p5 extends tr{apply(t){return Yf(t)}}p5.className="sigmoid";ut(p5);class m5 extends tr{apply(t){return cMe(t)}}m5.className="hardSigmoid";ut(m5);class g5 extends tr{apply(t){return Sg(t)}}g5.className="softplus";ut(g5);class v5 extends tr{apply(t){return uMe(t)}}v5.className="softsign";ut(v5);class b5 extends tr{apply(t){return TI(t)}}b5.className="tanh";ut(b5);class HE extends tr{apply(t,n=-1){return jI(t,n)}}HE.className="softmax";ut(HE);class y5 extends tr{apply(t,n=-1){return S6(t,n)}}y5.className="logSoftmax";ut(y5);class w5 extends tr{apply(t,n=1){return Ge(()=>Ee(Yf(Ee(t,n)),t))}}w5.className="swish";ut(w5);class k5 extends tr{apply(t){return Ge(()=>Ee(t,TI(Sg(t))))}}k5.className="mish";ut(k5);function Jl(e){return e.getClassName()}function J2(e,t={}){return Dg(e,Xr.getMap().classNameMap,t,"activation")}function Ql(e){if(e==null){const t={};return t.className="linear",t.config={},J2(t)}if(typeof e=="string"){const t={};return t.className=e,t.config={},J2(t)}else return e instanceof tr?e:J2(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kOe(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class x5 extends qf{}class C5 extends x5{constructor(t){super(),kOe(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return Ge(()=>{let n=no([1]);return this.hasL1&&(n=ht(n,Ot(Ee(this.l1,eo(t))))),this.hasL2&&(n=ht(n,Ot(Ee(this.l2,Og(t))))),Oe(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,n){return new t({l1:n.l1,l2:n.l2})}}C5.className="L1L2";ut(C5);const y3={l1l2:"L1L2"};function ns(e){return TE(e)}function w3(e,t={}){return Dg(e,Xr.getMap().classNameMap,t,"regularizer")}function Cs(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in y3?y3[e]:e,config:{}};return w3(n)}else return e instanceof x5?e:w3(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $5 extends Rn{constructor(t){super(t==null?{}:t),this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,n){t=fn(t);let s=hl(t);return this.maxValue!=null&&(s=Fr(s,0,this.maxValue)),s}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},n=super.getConfig();return Object.assign(t,n),t}}$5.className="ReLU";ut($5);class S5 extends Rn{constructor(t){super(t==null?{}:t),this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const s=fn(t);return MI(s,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}S5.className="LeakyReLU";ut(S5);class I5 extends Rn{constructor(t){if(super(t==null?{}:t),this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=xs(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Cs(t.alphaRegularizer),this.alphaConstraint=Xs(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new _e(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=Kn(t);const n=t.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let o=1;o<t.length;++o)s[o]=t[o];this.inputSpec=[new Ks({ndim:t.length,axes:s})],this.built=!0}call(t,n){return t=fn(t),WI(t,this.alpha.read())}getConfig(){const t={alphaInitializer:Is(this.alphaInitializer),alphaRegularizer:ns(this.alphaRegularizer),alphaConstraint:Ys(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(t,n),t}}I5.className="PReLU";ut(I5);class E5 extends Rn{constructor(t){if(super(t==null?{}:t),this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new ln(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const s=fn(t);return F1(s)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}E5.className="ELU";ut(E5);class T5 extends Rn{constructor(t){super(t==null?{}:t),this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,n){const s=fn(t);return Ee(s,Ct(xi(s,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},n=super.getConfig();return Object.assign(t,n),t}}T5.className="ThresholdedReLU";ut(T5);class _5 extends Rn{constructor(t){super(t==null?{}:t),this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new HE().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,n){const s=fn(t);return this.softmax(s,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}_5.className="Softmax";ut(_5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xd(e,t,n){if(typeof e=="number")return Rc(e,t);if(e.length!==t)throw new _e(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let s=0;s<t;++s){const o=e[s];if(!oMe(o))throw new _e(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${o}`)}return e}function zi(e,t,n,s,o=1){if(e==null)return e;const r=t+(t-1)*(o-1);let i;return n==="same"?i=e:i=e-r+1,Math.floor((i+s-1)/s)}function ra(e,t,n,s){if(e==null)return null;if(s==="valid")e=e*t+Zl([n-t,0]);else if(s==="same")e=e*t;else throw new _e(`Unsupport padding mode: ${s}.`);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UE(e,t){return Ge(()=>(Vs(t),t==="channelsFirst"?Fn(e,[0,2,3,1]):e))}function N5(e,t){return Ge(()=>(Vs(t),t==="channelsFirst"?Fn(e,[0,2,3,4,1]):e))}function xOe(e,t,n,s=1,o="valid",r,i=1){return Ge(()=>{if(r==null&&(r=Ui()),Vs(r),e.shape.length!==3)throw new _e(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new _e(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new _e(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(r==="channelsFirst"&&(e=Fn(e,[0,2,1])),o==="causal")throw new ln("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=v6(e,t,s,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=Ji(a,n)),a})}function k3(e,t,n,s=[1,1],o="valid",r,i,a=null){return Ge(()=>{if(r==null&&(r=Ui()),Vs(r),e.rank!==3&&e.rank!==4)throw new _e(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new _e(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=UE(e,r);if(o==="causal")throw new ln("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=$Ae({x:l,filter:t,strides:s,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),r==="channelsFirst"&&(l=Fn(l,[0,3,1,2])),l})}function COe(e,t,n,s=[1,1,1],o="valid",r,i){return Ge(()=>{if(r==null&&(r=Ui()),Vs(r),e.rank!==4&&e.rank!==5)throw new _e(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new _e(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let a=N5(e,r);if(o==="causal")throw new ln("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=LTe(a,t,s,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Ji(a,n)),r==="channelsFirst"&&(a=Fn(a,[0,4,1,2,3])),a})}class Z1 extends Rn{constructor(t,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Z1.verifyArgs(n),this.rank=t,so(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new ln(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Xd(n.kernelSize,t,"kernelSize"),this.strides=Xd(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,Br(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Vs(this.dataFormat),this.activation=Ql(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=xs(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Xs(n.biasConstraint),this.biasRegularizer=Cs(n.biasRegularizer),this.activityRegularizer=Cs(n.activityRegularizer),this.dilationRate=Xd(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new _e(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new _e(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new _e(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(oa("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!_E(t.kernelSize,"number",1,3))throw new _e(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Jl(this.activation),useBias:this.useBias,biasInitializer:Is(this.biasInitializer),biasRegularizer:ns(this.biasRegularizer),activityRegularizer:ns(this.activityRegularizer),biasConstraint:Ys(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}class Qf extends Z1{constructor(t,n){super(t,n),this.kernel=null,Qf.verifyArgs(n),this.filters=n.filters,so(this.filters,"filters"),this.kernelInitializer=xs(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Xs(n.kernelConstraint),this.kernelRegularizer=Cs(n.kernelRegularizer)}build(t){t=Kn(t);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new _e(`The channel dimension of the input should be defined. Found ${t[n]}`);const s=t[n],o=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:s}}],this.built=!0}call(t,n){return Ge(()=>{t=fn(t);let s;const o=this.bias==null?null:this.bias.read(),r=T8(this.activation.getClassName());if(r!=null&&this.rank===2)s=k3(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)s=xOe(t,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=k3(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=COe(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new ln("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(t){t=Kn(t);const n=[],s=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let r=0;r<s.length;++r){const i=zi(s[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);n.push(i)}let o=[t[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const t={filters:this.filters,kernelInitializer:Is(this.kernelInitializer),kernelRegularizer:ns(this.kernelRegularizer),kernelConstraint:Ys(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new _e(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class Lg extends Qf{constructor(t){super(2,t),Lg.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!_E(t.kernelSize,"number",1,2))throw new _e(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}Lg.className="Conv2D";ut(Lg);class Bg extends Qf{constructor(t){super(3,t),Bg.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new _e(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}Bg.className="Conv3D";ut(Bg);class A5 extends Lg{constructor(t){if(super(t),this.inputSpec=[new Ks({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new _e(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Kn(t),t.length!==4)throw new _e("Input should have rank 4; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new _e("The channel dimension of the inputs should be defined. Found `None`.");const s=t[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ks({ndim:4,axes:{[n]:s}})],this.built=!0}call(t,n){return Ge(()=>{let s=fn(t);if(s.shape.length!==4)throw new _e(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=o[i],u=o[a],c=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=ra(l,f,c,this.padding),m=ra(u,h,d,this.padding),g=[r,p,m,this.filters];this.dataFormat!=="channelsLast"&&(s=Fn(s,[0,2,3,1]));let v=b6(s,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=Fn(v,[0,3,1,2])),this.bias!=null&&(v=Ji(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(t){t=Kn(t);const n=t.slice();let s,o,r;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3):(s=3,o=1,r=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[s]=this.filters,n[o]=ra(n[o],l,i,this.padding),n[r]=ra(n[r],u,a,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}A5.className="Conv2DTranspose";ut(A5);class D5 extends Bg{constructor(t){if(super(t),this.inputSpec=[new Ks({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new _e(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Kn(t),t.length!==5)throw new _e("Input should have rank 5; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new _e("The channel dimension of the inputs should be defined. Found `None`.");const s=t[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ks({ndim:5,axes:{[n]:s}})],this.built=!0}call(t,n){return Ge(()=>{let s=fn(t);if(s.shape.length!==5)throw new _e(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const u=o[l],c=o[i],d=o[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],v=this.strides[2],b=ra(u,m,f,this.padding),w=ra(c,g,h,this.padding),y=ra(d,v,p,this.padding),k=[r,b,w,y,this.filters];this.dataFormat!=="channelsLast"&&(s=Fn(s,[0,2,3,4,1]));let x=VTe(s,this.kernel.read(),k,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=Fn(x,[0,4,1,2,3])),this.bias!==null&&(x=Ji(x,this.bias.read(),this.dataFormat)),this.activation!==null&&(x=this.activation.apply(x)),x})}computeOutputShape(t){t=Kn(t);const n=t.slice();let s,o,r,i;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3,i=4):(s=4,o=1,r=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],f=this.strides[2];return n[s]=this.filters,n[o]=ra(n[o],c,a,this.padding),n[r]=ra(n[r],d,l,this.padding),n[i]=ra(n[i],f,u,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}D5.className="Conv3DTranspose";ut(D5);class R5 extends Qf{constructor(t,n){if(super(t,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new _e("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new _e("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new _e(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=xs(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Cs(n.depthwiseRegularizer),this.depthwiseConstraint=Xs(n.depthwiseConstraint),this.pointwiseInitializer=xs(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Cs(n.pointwiseRegularizer),this.pointwiseConstraint=Xs(n.pointwiseConstraint)}build(t){if(t=Kn(t),t.length<this.rank+2)throw new _e(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null||t[n]<0)throw new _e(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[n])}`);const s=t[n],o=this.kernelSize.concat([s,this.depthMultiplier]),r=[];for(let a=0;a<this.rank;++a)r.push(1);r.push(s*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Ks({ndim:this.rank+2,axes:{[n]:s}})],this.built=!0}call(t,n){return Ge(()=>{t=fn(t);let s;if(this.rank===1)throw new ln("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=Fn(t,[0,2,3,1])),s=W6(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=Ji(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=Fn(s,[0,3,1,2])),s})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=Is(this.depthwiseInitializer),t.pointwiseInitializer=Is(this.pointwiseInitializer),t.depthwiseRegularizer=ns(this.depthwiseRegularizer),t.pointwiseRegularizer=ns(this.pointwiseRegularizer),t.depthwiseConstraint=Ys(this.depthwiseConstraint),t.pointwiseConstraint=Ys(this.pointwiseConstraint),t}}R5.className="SeparableConv";class M5 extends R5{constructor(t){super(2,t)}}M5.className="SeparableConv2D";ut(M5);class J1 extends Qf{constructor(t){super(1,t),J1.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!_E(t.kernelSize,"number",1,1))throw new _e(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}J1.className="Conv1D";ut(J1);class O5 extends Rn{constructor(t){super(t),typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,n){return Ge(()=>{if(t=fn(t),this.dataFormat==="channelsLast"){const s=P0(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return P0(s,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=P0(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return P0(s,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}O5.className="Cropping2D";ut(O5);class P5 extends Rn{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Vs(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,tMe(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const n=t[2]==null?null:this.size[0]*t[2],s=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],n,s]}else{const n=t[1]==null?null:this.size[0]*t[1],s=t[2]==null?null:this.size[1]*t[2];return[t[0],n,s,t[3]]}}call(t,n){return Ge(()=>{let s=fn(t);const o=s.shape;if(this.dataFormat==="channelsFirst"){s=Fn(s,[0,2,3,1]);const r=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?M0.resizeNearestNeighbor(s,[r,i]):M0.resizeBilinear(s,[r,i]);return Fn(a,[0,3,1,2])}else{const r=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?M0.resizeNearestNeighbor(s,[r,i]):M0.resizeBilinear(s,[r,i])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}P5.className="UpSampling2D";ut(P5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $Oe(e,t,n=[1,1],s="valid",o,r){return Ge(()=>{o==null&&(o=Ui()),Vs(o);let i=UE(e,o);if(e.rank!==4)throw new _e(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new _e(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=DI(i,t,n,s==="same"?"same":"valid","NHWC",r),o==="channelsFirst"&&(i=Fn(i,[0,3,1,2])),i})}class F5 extends Z1{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=xs(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Xs(t.depthwiseConstraint),this.depthwiseRegularizer=Cs(t.depthwiseRegularizer)}build(t){if(t=Kn(t),t.length<4)throw new _e(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(t[n]==null||t[n]<0)throw new _e(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[n]}).`);const s=t[n],o=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Ge(()=>{t=fn(t);let s=$Oe(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=Ji(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(t){t=Kn(t);const n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=zi(n,this.kernelSize[0],this.padding,this.strides[0]),i=zi(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],o,r,i]:[t[0],r,i,o]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=Is(this.depthwiseInitializer),t.depthwiseRegularizer=ns(this.depthwiseRegularizer),t.depthwiseConstraint=Ys(this.depthwiseRegularizer),t}}F5.className="DepthwiseConv2D";ut(F5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function L5(e,t,n,s){if(Array.isArray(e)){if(t!=null||n!=null)throw new _e("When inputs is an array, neither initialState or constants should be provided");s!=null&&(n=e.slice(e.length-s,e.length),e=e.slice(0,e.length-s)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(r){return r==null||Array.isArray(r)?r:[r]}return t=o(t),n=o(n),{inputs:e,initialState:t,constants:n}}function B5(e,t,n,s=!1,o,r,i=!1,a=!1){return Ge(()=>{const l=t.shape.length;if(l<3)throw new _e(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(ji(2,l));if(t=Fn(t,u),r!=null)throw new ln("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=Ct(Ct(o,"bool"),"float32"),o.rank===l-1&&(o=Yr(o,-1)),o=Fn(o,u)),s&&(t=Nc(t,0),o!=null&&(o=Nc(o,0)));const c=[];let d,f=n;const h=t.shape[0],p=Cf(t);let m;o!=null&&(m=Cf(o));for(let v=0;v<h;++v){const b=p[v],w=Ge(()=>e(b,f));if(o==null)d=w[0],f=w[1];else{const y=Ge(()=>{const k=m[v],x=Pt(vi(k),k),C=ht(Ee(w[0],k),Ee(f[0],x)),S=f.map((T,A)=>ht(Ee(w[1][A],k),Ee(T,x)));return{output:C,newStates:S}});d=y.output,f=y.newStates}a&&c.push(d)}let g;return a&&(g=Ac(c,1)),[d,g,f]})}class pu extends Rn{constructor(t){super(t);let n;if(t.cell==null)throw new _e("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new KE({cells:t.cell}):n=t.cell,n.stateSize==null)throw new _e("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new Ks({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ji(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){aC(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const s=n[0];let o;if(this.returnSequences?o=[t[0],t[1],s]:o=[t[0],s],this.returnState){const r=[];for(const i of n)r.push([t[0],i]);return[o].concat(r)}else return o}computeMask(t,n){return Ge(()=>{Array.isArray(n)&&(n=n[0]);const s=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(r=>null);return[s].concat(o)}else return s})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let s=0;s<t;++s)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new ln("Constants support is not implemented in RNN yet.");aC(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,s=t.slice(2);this.inputSpec[0]=new Ks({shape:[n,null,...s]});const o=[t[0]].concat(t.slice(2));this.cell.build(o);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!zn(this.stateSpec.map(i=>i.shape[i.shape.length-1]),r))throw new _e(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(i=>new Ks({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){Ge(()=>{if(!this.stateful)throw new sa("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new _e("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>no([s,o])):this.states_=[no([s,this.cell.stateSize])];else if(t==null)xn(this.states_),this.keptStates!=null&&(xn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>no([s,o])):this.states_[0]=no([s,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new _e(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):xn(this.states_);for(let o=0;o<this.states_.length;++o){const r=t[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[s,i];if(!zn(r.shape,a))throw new _e(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[o]=r}}this.states_=this.states_.map(o=>ka(o.clone()))})}apply(t,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=L5(t,s,o,this.numConstants);t=r.inputs,s=r.initialState,o=r.constants;let i=[],a=[];if(s!=null){n.initialState=s,i=i.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new Ks({shape:u.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof da){const u=[t].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(t,n)}call(t,n){return Ge(()=>{const s=n==null?null:n.mask,o=n==null?null:n.training;let r=n==null?null:n.initialState;t=fn(t),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(t));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==i)throw new _e(`RNN Layer has ${i} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},u=B5((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},t,r,this.goBackwards,s,null,this.unroll,this.returnSequences),c=u[0],d=u[1],f=u[2];this.stateful&&this.resetStates(f,o);const h=this.returnSequences?d:c;return this.returnState?[h].concat(f):h})}getInitialState(t){return Ge(()=>{let n=no(t.shape);return n=Ot(n,[1,2]),n=Mg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?rC(n,[1,s]):n):this.cell.stateSize>1?[rC(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===pu.className&&(n.cell={className:this.cell.getClassName(),config:s}),Object.assign({},s,t,n)}static fromConfig(t,n,s={}){const o=n.cell,r=qa(o,s);return new t(Object.assign(n,{cell:r}))}}pu.className="RNN";ut(pu);class Q1 extends Rn{}class jE extends Q1{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,so(this.units,"units"),this.activation=Ql(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=xs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xs(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Cs(t.kernelRegularizer),this.recurrentRegularizer=Cs(t.recurrentRegularizer),this.biasRegularizer=Cs(t.biasRegularizer),this.kernelConstraint=Xs(t.kernelConstraint),this.recurrentConstraint=Xs(t.recurrentConstraint),this.biasConstraint=Xs(t.biasConstraint),this.dropout=$f([1,Zl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=$f([1,Zl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Kn(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Ge(()=>{if(t=t,t.length!==2)throw new _e(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let s=t[1];t=t[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=eu({ones:()=>vi(t),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=eu({ones:()=>vi(s),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let r;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?r=ga(Ee(t,i),this.kernel.read()):r=ga(t,this.kernel.read()),this.bias!=null&&(r=Ji(r,this.bias.read())),a!=null&&(s=Ee(s,a));let l=ht(r,ga(s,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Jl(this.activation),useBias:this.useBias,kernelInitializer:Is(this.kernelInitializer),recurrentInitializer:Is(this.recurrentInitializer),biasInitializer:Is(this.biasInitializer),kernelRegularizer:ns(this.kernelRegularizer),recurrentRegularizer:ns(this.recurrentRegularizer),biasRegularizer:ns(this.biasRegularizer),activityRegularizer:ns(this.activityRegularizer),kernelConstraint:Ys(this.kernelConstraint),recurrentConstraint:Ys(this.recurrentConstraint),biasConstraint:Ys(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,n)}}jE.className="SimpleRNNCell";ut(jE);class z5 extends pu{constructor(t){t.cell=new jE(t),super(t)}call(t,n){return Ge(()=>{this.cell.dropoutMask!=null&&(xn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return new t(n)}}z5.className="SimpleRNN";ut(z5);class GE extends Q1{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new _e("GRUCell does not support reset_after parameter set to true.");this.units=t.units,so(this.units,"units"),this.activation=Ql(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ql(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=xs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xs(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Cs(t.kernelRegularizer),this.recurrentRegularizer=Cs(t.recurrentRegularizer),this.biasRegularizer=Cs(t.biasRegularizer),this.kernelConstraint=Xs(t.kernelConstraint),this.recurrentConstraint=Xs(t.recurrentConstraint),this.biasConstraint=Xs(t.biasConstraint),this.dropout=$f([1,Zl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=$f([1,Zl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Kn(t);const n=t[t.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Ge(()=>{if(t=t,t.length!==2)throw new _e(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const s=n.training==null?!1:n.training;let o=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=eu({ones:()=>vi(t),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=eu({ones:()=>vi(o),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(t=Ee(t,r[0]));let c=ga(t,this.kernel.read());this.useBias&&(c=Ji(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=Ee(o,i[0]));const d=this.recurrentKernel.read(),[f,h]=Rr(d,[2*this.units,this.units],d.rank-1),p=ga(o,f),[m,g,v]=Rr(c,3,c.rank-1),[b,w]=Rr(p,2,p.rank-1);a=this.recurrentActivation.apply(ht(m,b)),l=this.recurrentActivation.apply(ht(g,w));const y=ga(Ee(l,o),h);u=this.activation.apply(ht(v,y));const k=ht(Ee(a,o),Ee(ht(1,As(a)),u));return[k,k]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Jl(this.activation),recurrentActivation:Jl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Is(this.kernelInitializer),recurrentInitializer:Is(this.recurrentInitializer),biasInitializer:Is(this.biasInitializer),kernelRegularizer:ns(this.kernelRegularizer),recurrentRegularizer:ns(this.recurrentRegularizer),biasRegularizer:ns(this.biasRegularizer),activityRegularizer:ns(this.activityRegularizer),kernelConstraint:Ys(this.kernelConstraint),recurrentConstraint:Ys(this.recurrentConstraint),biasConstraint:Ys(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,n)}}GE.className="GRUCell";ut(GE);class V5 extends pu{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new GE(t),super(t)}call(t,n){return Ge(()=>{this.cell.dropoutMask!=null&&(xn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}V5.className="GRU";ut(V5);class ew extends Q1{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,so(this.units,"units"),this.activation=Ql(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ql(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=xs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xs(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Cs(t.kernelRegularizer),this.recurrentRegularizer=Cs(t.recurrentRegularizer),this.biasRegularizer=Cs(t.biasRegularizer),this.kernelConstraint=Xs(t.kernelConstraint),this.recurrentConstraint=Xs(t.recurrentConstraint),this.biasConstraint=Xs(t.biasConstraint),this.dropout=$f([1,Zl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=$f([1,Zl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var n;t=Kn(t);const s=t[t.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,i=this.units;o=new(n=class extends Ci{apply(l,u){const c=r.apply([i]),d=new DE().apply([i]),f=r.apply([i*2]);return r3(r3(c,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,n){return Ge(()=>{const s=n.training==null?!1:n.training;if(t=t,t.length!==3)throw new _e(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let o=t[1];const r=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=eu({ones:()=>vi(t),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=eu({ones:()=>vi(o),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(t=Ee(t,i[0]));let f=ga(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=Ee(o,a[0])),f=ht(f,ga(o,this.recurrentKernel.read())),this.useBias&&(f=Ji(f,this.bias.read()));const[h,p,m,g]=Rr(f,4,f.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=ht(Ee(u,r),Ee(l,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const v=Ee(d,this.activation.apply(c));return[v,v,c]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Jl(this.activation),recurrentActivation:Jl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Is(this.kernelInitializer),recurrentInitializer:Is(this.recurrentInitializer),biasInitializer:Is(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:ns(this.kernelRegularizer),recurrentRegularizer:ns(this.recurrentRegularizer),biasRegularizer:ns(this.biasRegularizer),activityRegularizer:ns(this.activityRegularizer),kernelConstraint:Ys(this.kernelConstraint),recurrentConstraint:Ys(this.recurrentConstraint),biasConstraint:Ys(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,n)}}ew.className="LSTMCell";ut(ew);class W5 extends pu{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new ew(t),super(t)}call(t,n){return Ge(()=>{this.cell.dropoutMask!=null&&(xn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}W5.className="LSTM";ut(W5);class KE extends Q1{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?t.push(...n.stateSize):t.push(n.stateSize);return t}call(t,n){return Ge(()=>{t=t;let s=t.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(s.splice(0,a.stateSize.length)):o.push(s.splice(0,1));o.reverse();const r=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];s=o[a],a===0?i=[t[0]].concat(s):i=[i[0]].concat(s),i=l.call(i,n),r.push(i.slice(1))}s=[];for(const a of r.slice().reverse())s.push(...a);return[i[0]].concat(s)})}build(t){aC(t)&&(t=t[0]),t=t;let n;this.cells.forEach((s,o)=>{fc(`RNNCell_${o}`,()=>{s.build(t),Array.isArray(s.stateSize)?n=s.stateSize[0]:n=s.stateSize,t=[t[0],n]})}),this.built=!0}getConfig(){const t=super.getConfig(),n=r=>({className:r.getClassName(),config:r.getConfig()}),o={cells:this.cells.map(n)};return Object.assign({},t,o)}static fromConfig(t,n,s={}){const o=[];for(const r of n.cells)o.push(qa(r,s));return new t({cells:o})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const n of this.cells)t.push(...n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.cells)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.cells)n.push(...s.trainableWeights);return n.concat(t)}return t}getWeights(){const t=[];for(const n of this.cells)t.push(...n.weights);return lC(t)}setWeights(t){const n=[];for(const s of this.cells){const o=s.weights.length,r=t.splice(o);for(let i=0;i<s.weights.length;++i)n.push([s.weights[i],r[i]])}BE(n)}}KE.className="StackedRNNCells";ut(KE);function eu(e){const{ones:t,rate:n,training:s=!1,count:o=1,dropoutFunc:r}=e,i=()=>r!=null?r(t(),n):L8(t(),n),a=()=>Pg(i,t,s);return!o||o<=1?ka(a().clone()):Array(o).fill(void 0).map(a).map(u=>ka(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var SOe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n};class H5 extends pu{constructor(t){if(t.unroll)throw new ln("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new ln("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new Ks({ndim:5})]}call(t,n){return Ge(()=>{if(this.cell.dropoutMask!=null&&(xn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new _e("ConvRNN2D cell does not support constants");const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}computeOutputShape(t){let n=this.computeSingleOutputShape(t);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([t[0],...n.slice(-3)])]),n}getInitialState(t){return Ge(()=>{const{stateSize:n}=this.cell,s=t.shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)],i=no(r);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(t,n=!1){Ge(()=>{if(!this.stateful)throw new sa("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)];if(s[0]==null)throw new _e("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>no(r)):this.states_=[no(r)];else if(t==null)xn(this.states_),this.keptStates!=null&&(xn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>no(r)):this.states_[0]=no(r);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new _e(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n?this.keptStates.push(this.states_.slice()):xn(this.states_);for(let a=0;a<this.states_.length;++a){const l=t[a],u=r;if(!zn(l.shape,u))throw new _e(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>ka(a.clone()))})}computeSingleOutputShape(t){const{dataFormat:n,filters:s,kernelSize:o,padding:r,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",u=t[l?3:2],c=t[l?4:3],d=zi(u,o[0],r,i[0],a[0]),f=zi(c,o[1],r,i[1],a[1]);return[...t.slice(0,2),...l?[s,d,f]:[d,f,s]]}}H5.className="ConvRNN2D";class qE extends ew{constructor(t){const{filters:n,kernelSize:s,strides:o,padding:r,dataFormat:i,dilationRate:a}=t;super(Object.assign({},t,{units:n})),this.filters=n,so(this.filters,"filters"),this.kernelSize=Xd(s,2,"kernelSize"),this.kernelSize.forEach(l=>so(l,"kernelSize")),this.strides=Xd(o||1,2,"strides"),this.strides.forEach(l=>so(l,"strides")),this.padding=r||"valid",Br(this.padding),this.dataFormat=i||"channelsLast",Vs(this.dataFormat),this.dilationRate=Xd(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>so(l,"dilationRate"))}build(t){var n;t=Kn(t);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new _e(`The channel dimension of the input should be defined. Found ${t[s]}`);const o=t[s],r=4,i=this.kernelSize.concat([o,this.filters*r]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Ci{apply(f,h){const p=u.apply([c]),m=du([c]),g=u.apply([c*2]);return AE([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,n){return Ge(()=>{if(t.length!==3)throw new _e(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const s=n.training||!1,o=t[0],r=t[1],i=t[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=eu({ones:()=>vi(o),rate:this.dropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(J,ee,te)=>!ee||!ee[te]?J:Ee(ee[te],J);let c=u(o,l,0),d=u(o,l,1),f=u(o,l,2),h=u(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=eu({ones:()=>vi(r),rate:this.recurrentDropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(r,p,0),g=u(r,p,1),v=u(r,p,2),b=u(r,p,3);const w=3,[y,k,x,C]=Rr(this.kernel.read(),a,w),[S,T,A,R]=this.useBias?Rr(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,y,S,this.padding),d=this.inputConv(d,k,T,this.padding),f=this.inputConv(f,x,A,this.padding),h=this.inputConv(h,C,R,this.padding);const[L,P,V,H]=Rr(this.recurrentKernel.read(),a,w);m=this.recurrentConv(m,L),g=this.recurrentConv(g,P),v=this.recurrentConv(v,V),b=this.recurrentConv(b,H);const F=this.recurrentActivation.apply(ht(c,m)),M=this.recurrentActivation.apply(ht(d,g)),B=ht(Ee(M,i),Ee(F,this.activation.apply(ht(f,v)))),Y=Ee(this.recurrentActivation.apply(ht(h,b)),this.activation.apply(B));return[Y,Y,B]})}getConfig(){const t=super.getConfig(),n=SOe(t,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,s)}inputConv(t,n,s,o){const r=Ec(t,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?Ji(r,s,this.dataFormat):r}recurrentConv(t,n){return Ec(t,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}qE.className="ConvLSTM2DCell";ut(qE);class U5 extends H5{constructor(t){const n=new qE(t);super(Object.assign({},t,{cell:n}))}static fromConfig(t,n){return new t(n)}}U5.className="ConvLSTM2D";ut(U5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class YE extends Rn{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const n=t.shape,s=[];for(let o=0;o<this.noiseShape.length;++o)s.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return s}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);const s=fn(t);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,r=this.getNoiseShape(s);return Pg(()=>L8(s,this.rate,r,this.seed),()=>s,o)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(t,n),t}dispose(){return super.dispose()}}YE.className="Dropout";ut(YE);class j5 extends YE{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const n=t.shape;return[n[0],1,n[2]]}}j5.className="SpatialDropout1D";ut(j5);class G5 extends Rn{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let n=null;t.batchSize!=null&&(n=t.batchSize),this.batchInputShape=[n,t.inputDim]}this.units=t.units,so(this.units,"units"),this.activation=Ql(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=xs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=xs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Xs(t.kernelConstraint),this.biasConstraint=Xs(t.biasConstraint),this.kernelRegularizer=Cs(t.kernelRegularizer),this.biasRegularizer=Cs(t.biasRegularizer),this.activityRegularizer=Cs(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=Kn(t);const n=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(t){t=Kn(t);const n=t.slice();return n[n.length-1]=this.units,n}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);const s=fn(t),o=T8(this.activation.getClassName());let r;return o!=null?r=ga(s,this.kernel.read(),o,this.bias?this.bias.read():null):(r=ga(s,this.kernel.read()),this.bias!=null&&(r=Ji(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const t={units:this.units,activation:Jl(this.activation),useBias:this.useBias,kernelInitializer:Is(this.kernelInitializer),biasInitializer:Is(this.biasInitializer),kernelRegularizer:ns(this.kernelRegularizer),biasRegularizer:ns(this.biasRegularizer),activityRegularizer:ns(this.activityRegularizer),kernelConstraint:Ys(this.kernelConstraint),biasConstraint:Ys(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}G5.className="Dense";ut(G5);class K5 extends Rn{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Kn(t);for(const n of t.slice(1))if(n==null)throw new _e(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],jl(t,1)]}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);let s=fn(t);if(this.dataFormat==="channelsFirst"&&s.rank>1){const o=[0];for(let r=2;r<s.rank;++r)o.push(r);o.push(1),s=Fn(s,o)}return aMe(s)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(t,n),t}}K5.className="Flatten";ut(K5);class q5 extends Rn{constructor(t){super(t),this.supportsMasking=!0,this.activation=Ql(t.activation)}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);const s=fn(t);return this.activation.apply(s)})}getConfig(){const t={activation:Jl(this.activation)},n=super.getConfig();return Object.assign(t,n),t}}q5.className="Activation";ut(q5);class Y5 extends Rn{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,n){return Ge(()=>(t=fn(t),rMe(t,this.n)))}getConfig(){const t={n:this.n},n=super.getConfig();return Object.assign(t,n),t}}Y5.className="RepeatVector";ut(Y5);class X5 extends Rn{constructor(t){super(t),this.targetShape=t.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,n){const s="Total size of new array must be unchanged.",o=n.slice();let r=1,i=null;for(let l=0;l<o.length;++l){const u=o[l];if(this.isUnknown(u))if(i===null)i=l;else throw new _e("Can only specifiy one unknown dimension.");else r*=u}const a=jl(t);if(i!==null){if(r===0||a%r!==0)throw new _e(s);o[i]=a/r}else if(a!==r)throw new _e(s);return o}computeOutputShape(t){let n=!1;for(let s=0;s<t.length;++s)if(this.isUnknown(t[s])){n=!0;break}return n?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);const s=fn(t),o=s.shape,r=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return Oe(s,r)})}getConfig(){const t={targetShape:this.targetShape},n=super.getConfig();return Object.assign(t,n),t}}X5.className="Reshape";ut(X5);class Z5 extends Rn{constructor(t){if(super(t),t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const n=ji(1,t.dims.length+1);if(!zn(t.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ks({ndim:this.dims.length+1})]}computeOutputShape(t){t=Kn(t);const n=t.slice();return this.dims.forEach((s,o)=>{n[o+1]=t[s]}),n}call(t,n){return Fn(fn(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},n=super.getConfig();return Object.assign(t,n),t}}Z5.className="Permute";ut(Z5);class J5 extends Rn{constructor(t){super(t==null?{}:t),this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,t),n}computeMask(t,n){const s=fn(t),o=-1;return Jx(jp(s,this.maskValue),o)}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);const s=fn(t),o=-1,r=!0,i=Jx(jp(s,this.maskValue),o,r);return Ee(s,Ct(i,s.dtype))})}}J5.className="Masking";ut(J5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Q5 extends Rn{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let n=null;t.batchSize!=null&&(n=t.batchSize),t.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(hs(t.inputLength))}this.inputDim=t.inputDim,so(this.inputDim,"inputDim"),this.outputDim=t.outputDim,so(this.outputDim,"outputDim"),this.embeddingsInitializer=xs(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Cs(t.embeddingsRegularizer),this.activityRegularizer=Cs(t.activityRegularizer),this.embeddingsConstraint=Xs(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,n){return Ge(()=>this.maskZero?(t=fn(t),jp(t,An(t))):null)}computeOutputShape(t){if(t=Kn(t),this.inputLength==null)return[...t,this.outputDim];const n=hs(this.inputLength);if(n.length!==t.length-1)throw new _e(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let s=0;for(let o=0;o<n.length;++o){const r=n[o],i=t[o+1];if(r!=null&&i!=null&&r!==i)throw new _e(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);r==null&&(n[s]=i),s++}}return[t[0],...n,this.outputDim]}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);let s=fn(t);s.dtype!=="int32"&&(s=j1(s,"int32"));const o=F8(this.embeddings.read(),Oe(s,[s.size]));return Oe(o,Kn(this.computeOutputShape(s.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Is(this.embeddingsInitializer),embeddingsRegularizer:ns(this.embeddingsRegularizer),activityRegularizer:ns(this.activityRegularizer),embeddingsConstraint:Ys(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(t,n),t}}Q5.className="Embedding";ut(Q5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Jc extends Rn{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new ln}computeElementwiseOpOutputShape(t,n){if(t==null||n==null)return null;if(t.length<n.length)return this.computeElementwiseOpOutputShape(n,t);if(n.length===0)return t;const s=t.slice(0,t.length-n.length);for(let o=0;o<n.length;++o){const r=t[t.length-n.length+o],i=n[o];if(r==null||i==null||r<0||i<0)s.push(null);else if(r===1)s.push(i);else if(i===1)s.push(r);else{if(r!==i)throw new _e("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(n));s.push(r)}}return s}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Kn(t)]),t=t,t.length<2)throw new _e(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let n=[];for(const r of t)r!=null&&r[0]!==null&&n.push(r[0]);if(n=Ul(n),n.length>1)throw new _e(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let s=t[0]==null?null:t[0].slice(1);for(let r=1;r<t.length;++r){const i=t[r]==null?null:t[r].slice(1);s=this.computeElementwiseOpOutputShape(s,i)}const o=t.map(r=>r.length);t.indexOf(null)===-1&&Ul(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,n){return Ge(()=>{if(t=t,this.reshapeRequired){const s=[],o=t.map(r=>r.rank);if(o.indexOf(null)===-1){const r=Zl(o);for(let i of t){const a=i.rank;for(let l=0;l<r-a;++l)i=Mg(i,1);s.push(i)}return this.mergeFunction(s)}else{let r=!1;for(const l of t){const u=l.rank;if(u==null){const c=l.shape,d=c[0],f=c.slice(1).concat([d]);let h=Oe(l,[d].concat(jl(c.slice(1))));h=Fn(h,[1,0]),h=Oe(h,f),s.push(h),r=!0}else if(u>1){const c=ji(1,u).concat([0]);s.push(Fn(l,c)),r=!0}else s.push(l)}let i=this.mergeFunction(s);const a=i.rank;if(r){if(a==null){const l=i.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));i=Oe(Fn(Oe(i,[-1,c]),[1,0]),d)}else if(a>1){const l=[a-1].concat(ji(0,a-1));i=Fn(i,l)}}return i}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let n;t[0]==null?n=null:n=t[0].slice(1);for(let o=1;o<t.length;++o){const r=t[o]==null?null:t[o].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let s=[];for(const o of t)o!=null&&o[0]!==null&&s.push(o[0]);return s=Ul(s),s.length===1?n=s.concat(n):n=[null].concat(n),n}computeMask(t,n){return Ge(()=>{if(n==null)return null;if(!Array.isArray(n))throw new _e("`mask` should be an Array");if(!Array.isArray(t))throw new _e("`inputs` should be an Array");if(n.length!==t.length)throw new _e(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:Yr(o,0));let s=n[0];for(let o=1;o<n.length-1;++o)s=el(s,n[o]);return s})}}class eV extends Jc{constructor(t){super(t)}mergeFunction(t){return Ge(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=ht(n,t[s]);return n})}}eV.className="Add";ut(eV);class tV extends Jc{constructor(t){super(t)}mergeFunction(t){return Ge(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=Ee(n,t[s]);return n})}}tV.className="Multiply";ut(tV);class nV extends Jc{constructor(t){super(t)}mergeFunction(t){return Ge(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=ht(n,t[s]);return Ee(1/t.length,n)})}}nV.className="Average";ut(nV);class sV extends Jc{constructor(t){super(t)}mergeFunction(t){return Ge(()=>{let n=t[0];for(let s=1;s<t.length;++s)n=fl(n,t[s]);return n})}}sV.className="Maximum";ut(sV);class oV extends Jc{constructor(t){super(t)}mergeFunction(t){return Ge(()=>{let n=t[0];for(let s=1;s<t.length;++s)n=Ig(n,t[s]);return n})}}oV.className="Minimum";ut(oV);class rV extends Jc{constructor(t){super(t),this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new _e("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let n=!0;for(const o of t)if(o!=null){n=!1;break}if(n)return;const s=[];for(let o=0;o<t.length;++o){const r=t[o].slice();r.splice(this.axis,1);let i=!1;for(const a of s)if(zn(a,r)){i=!0;break}i||s.push(r)}if(s.length>1)throw new _e("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Ge(()=>AE(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new _e("A `Concatenate` layer should be called on a list of inputs.");const n=t,s=n[0].slice(),o=this.axis<0?s.length+this.axis:this.axis;for(const r of n.slice(1)){if(s[o]==null||r[o]==null){s[o]=null;break}s[o]+=r[o]}return s}computeMask(t,n){if(n==null)return null;if(!Array.isArray(n))throw new _e("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new _e("`inputs` should be an array for Concatenate");if(n.length!==t.length)throw new _e(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${t.length})`);return Ge(()=>{let s=!0;if(n.forEach(i=>{if(i!=null){s=!1;return}}),s)return null;const o=[];for(let i=0;i<t.length;++i)n[i]==null?o.push(Ct(vi(t[i]),"bool")):n[i].rank<t[i].rank?o.push(Yr(n[i],-1)):o.push(n[i]);const r=Ro(o,this.axis);return g6(r,-1,!1)})}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}rV.className="Concatenate";ut(rV);function Sh(e,t){for(;e<0;)e+=t;return e}function IOe(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new ln("batchDot is not implemented for tensors of 4D or higher rank yet");if(oe(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),oe(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new ln("batchDot is not implemented for complex64-type Tensors yet.");const s=e.shape.length,o=t.shape.length;n==null&&(n=[s-1,o-2]);const r=n;return Ge(()=>{let i;if(s>o){i=s-o;const l=[];for(let u=0;u<i;++u)l.push(1);t=Oe(t,t.shape.concat(l))}else if(o>s){i=o-s;const l=[];for(let u=0;u<i;++u)l.push(1);e=Oe(e,e.shape.concat(l))}else i=0;let a;if(e.shape.length===2&&t.shape.length===2)r[0]===r[1]?a=Ot(Ee(e,t),r[0]):a=Ot(Ee(Fn(e,[1,0]),t),r[1]);else{const l=r[0]!==e.shape.length-1,u=r[1]===t.shape.length-1;a=Ln(e,t,l,u)}if(i>0){let l;s>o?l=s+o-3:l=s-1;const u=[];for(let c=l;c<l+i;++c)u.push(c);a=Eg(a,u)}return a.shape.length===1&&(a=Yr(a,1)),a})}class iV extends Jc{constructor(t){super(t),this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){oe(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0],s=t[1];if(n.length>3||s.length>3)throw new ln("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);if(n[o[0]]!==s[o[1]])throw new _e(`Dimension incompatibility: ${n[o[0]]} !== ${s[o[1]]}`)}mergeFunction(t){if(t.length!==2)throw new _e(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let n=t[0],s=t[1],o;return Array.isArray(this.axes)?o=this.axes.map((r,i)=>Sh(r,t[i].shape.length)):o=[Sh(this.axes,n.shape.length),Sh(this.axes,s.shape.length)],this.normalize&&(n=$b(n,o[0]),s=$b(s,o[1])),IOe(n,s,o)}interpretAxes(t,n){let s;return Array.isArray(this.axes)?s=this.axes:s=[Sh(this.axes,t.length),Sh(this.axes,n.length)],s}computeOutputShape(t){oe(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0].slice(),s=t[1].slice();if(n.length>3||s.length>3)throw new ln("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);n.splice(o[0],1),s.splice(o[1],1),s.splice(0,1);const r=n.concat(s);return r.length===1&&r.push(1),r}computeMask(t,n){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(t,n),t}}iV.className="Dot";ut(iV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aV extends Rn{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,t),n}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);const s=fn(t);return Pg(()=>ht(G1(s.shape,0,this.stddev),s),()=>s,n.training||!1)})}}aV.className="GaussianNoise";ut(aV);class lV extends Rn{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Ge(()=>{this.invokeCallHook(t,n);const s=fn(t);return this.rate>0&&this.rate<1?Pg(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return Ee(s,G1(s.shape,1,r))},()=>s,n.training||!1):s})}}lV.className="GaussianDropout";ut(lV);class uV extends Rn{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||fn(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Ge(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(t);return Pg(()=>{const r=fn(t),i=1.6732632423543772,a=1.0507009873554805,l=-i*a;let u=Xf(z1(s),this.rate);u=j1(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,f=ht(Ee(r,u),Ee(ht(u,-1),l));return ht(Ee(f,c),d)},()=>fn(t),n.training||!1)}return t})}}uV.className="AlphaDropout";ut(uV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yp(e,t,n,s,o,r=.001){let i;if(e.rank===2)i=pTe(e,t,n,s,o,r);else if(e.rank===3)i=gTe(e,t,n,s,o,r);else if(e.rank===4)i=bTe(e,t,n,s,o,r);else throw new ln(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return i}function EOe(e,t,n,s,o=.001){return Ge(()=>{const r=BI(e,s),i=r.mean,a=r.variance;return[Yp(e,i,a,n,t,o),i,a]})}function TOe(e,t,n,s,o=.001){return Ge(()=>{const r=BI(e,s),i=r.mean,a=r.variance,l=[];for(const p of ji(0,e.rank))s.indexOf(p)!==-1?l.push(1):l.push(e.shape[p]);const u=Oe(i,l),c=Oe(a,l),d=t==null?null:Oe(t,l),f=n==null?null:Oe(n,l);return[Yp(e,u,c,f,d,o),i,a]})}function _Oe(e,t,n,s,o=.001){return zn(s.slice().sort(),ji(0,e.rank-1))?EOe(e,t,n,s,o):TOe(e,t,n,s,o)}class cV extends Rn{constructor(t){t==null&&(t={}),super(t),this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=xs(t.betaInitializer||"zeros"),this.gammaInitializer=xs(t.gammaInitializer||"ones"),this.movingMeanInitializer=xs(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=xs(t.movingVarianceInitializer||"ones"),this.betaConstraint=Xs(t.betaConstraint),this.gammaConstraint=Xs(t.gammaConstraint),this.betaRegularizer=Cs(t.betaRegularizer),this.gammaRegularizer=Cs(t.gammaRegularizer)}build(t){t=Kn(t);const n=this.axis>=0?this.axis:this.axis+t.length,s=t[n];if(s==null)throw new _e(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new Ks({ndim:t.length,axes:{[n]:s}})];const o=[s];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,n){return Ge(()=>{const s=n.training==null?!1:n.training,o=fn(t),r=o.shape,i=r.length,a=ji(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const u=Rc(1,i);u[l]=r[l];const c=a.slice();c.sort();const d=!zn(c,ji(0,i).slice(0,i-1)),f=()=>{if(d){const b=Oe(this.movingMean.read(),u),w=Oe(this.movingVariance.read(),u),y=this.center?Oe(this.beta.read(),u):null,k=this.scale?Oe(this.gamma.read(),u):null;return Yp(o,b,w,y,k,this.epsilon)}else return Yp(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return f();const[h,p,m]=_Oe(o,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(b,w,y)=>{Ge(()=>{const k=1-y,x=b.read(),C=Ee(Pt(x,w),k);b.write(Pt(x,C))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Is(this.betaInitializer),gammaInitializer:Is(this.gammaInitializer),movingMeanInitializer:Is(this.movingMeanInitializer),movingVarianceInitializer:Is(this.movingVarianceInitializer),betaRegularizer:ns(this.betaRegularizer),gammaRegularizer:ns(this.gammaRegularizer),betaConstraint:Ys(this.betaConstraint),gammaConstraint:Ys(this.gammaConstraint)},n=super.getConfig();return Object.assign(t,n),t}}cV.className="BatchNormalization";ut(cV);class dV extends Rn{constructor(t){if(t==null&&(t={}),super(t),this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=xs(t.betaInitializer||"zeros"),this.gammaInitializer=xs(t.gammaInitializer||"ones"),this.betaRegularizer=Cs(t.betaRegularizer),this.gammaRegularizer=Cs(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=Kn(t);const n=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=n);for(const r of this.axis)if(r<0||r>=n)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==Ul(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(r=>t[r]),o=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(t,n){const s=fn(t),o=s.shape,r=o.length;return Ge(()=>{let{mean:a,variance:l}=BI(s,this.axis,!0);const u=Rc(1,r);for(const m of this.axis)u[m]=o[m];const c=m=>m!=null&&m.shape.length!==r?Oe(m,u):m;let d=c(this.gamma.read()),f=c(this.beta.read());const h=[],p=[];for(let m=0;m<r;++m)this.axis.indexOf(m)!==-1?(h.push(o[m]),p.push(1)):(h.push(1),p.push(o[m]));return a=Pi(a,h),l=Pi(l,h),d=Pi(d,p),f=Pi(f,p),Yp(s,a,l,f,d,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Is(this.betaInitializer),gammaInitializer:Is(this.gammaInitializer),betaRegularizer:ns(this.betaRegularizer),gammaRegularizer:ns(this.gammaRegularizer)},n=super.getConfig();return Object.assign(t,n),t}}dV.className="LayerNormalization";ut(dV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NOe(e,t,n){return Ge(()=>{if(e.rank!==4)throw new _e(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new _e("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ui()),n!=="channelsLast"&&n!=="channelsFirst")throw new _e(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return n==="channelsFirst"?s=[[0,0],[0,0],t[0],t[1]]:s=[[0,0],t[0],t[1],[0,0]],zI(e,s)})}class fV extends Rn{constructor(t){if(t==null&&(t={}),super(t),this.dataFormat=t.dataFormat==null?Ui():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new _e(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let n,s;if(typeof t.padding[0]=="number")n=[t.padding[0],t.padding[0]],s=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new _e(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(n=t.padding[0],t.padding[1].length!==2)throw new _e(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);s=t.padding[1]}this.padding=[n,s]}this.inputSpec=[new Ks({ndim:4})]}computeOutputShape(t){t=Kn(t);let n,s;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?n=t[2]+this.padding[0][0]+this.padding[0][1]:n=null,t[3]!=null&&t[3]>=0?s=t[3]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],t[1],n,s]):(t[1]!=null&&t[1]>=0?n=t[1]+this.padding[0][0]+this.padding[0][1]:n=null,t[2]!=null&&t[2]>=0?s=t[2]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],n,s,t[3]])}call(t,n){return Ge(()=>NOe(fn(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}fV.className="ZeroPadding2D";ut(fV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tw(e,t,n,s,o,r){return Ge(()=>{Vs(o),R8(r),Br(s),n==null&&(n=[1,1]),s==null&&(s="valid"),o==null&&(o=Ui()),r==null&&(r="max"),e=UE(e,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=LI(e,t,n,a):i=EI(e,t,n,a),o==="channelsFirst"&&(i=Fn(i,[0,3,1,2])),i})}function hV(e,t,n,s,o,r){return Ge(()=>{Vs(o),R8(r),Br(s),n==null&&(n=[1,1,1]),s==null&&(s="valid"),o==null&&(o=Ui()),r==null&&(r="max"),e=N5(e,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=X_e(e,t,n,a):i=rTe(e,t,n,a),o==="channelsFirst"&&(i=Fn(i,[0,4,1,2,3])),i})}class pV extends Rn{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new _e(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(so(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new _e(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);so(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,Br(this.padding),this.inputSpec=[new Ks({ndim:3})]}computeOutputShape(t){t=Kn(t);const n=zi(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],n,t[2]]}call(t,n){return Ge(()=>{this.invokeCallHook(t,n),t=Mg(fn(t),2);const s=this.poolingFunction(fn(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Eg(s,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(t,n),t}}class mV extends pV{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Vs(r),Br(o),tw(t,n,s,o,r,"max")}}mV.className="MaxPooling1D";ut(mV);class gV extends pV{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Vs(r),Br(o),tw(t,n,s,o,r,"avg")}}gV.className="AveragePooling1D";ut(gV);class vV extends Rn{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new _e(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];so(this.poolSize,"poolSize"),so(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Vs(this.dataFormat),Br(this.padding),this.inputSpec=[new Ks({ndim:4})]}computeOutputShape(t){t=Kn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2];return n=zi(n,this.poolSize[0],this.padding,this.strides[0]),s=zi(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,s]:[t[0],n,s,t[3]]}call(t,n){return Ge(()=>(this.invokeCallHook(t,n),this.poolingFunction(fn(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class bV extends vV{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Vs(r),Br(o),tw(t,n,s,o,r,"max")}}bV.className="MaxPooling2D";ut(bV);class yV extends vV{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Vs(r),Br(o),tw(t,n,s,o,r,"avg")}}yV.className="AveragePooling2D";ut(yV);class wV extends Rn{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new _e(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];so(this.poolSize,"poolSize"),so(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Vs(this.dataFormat),Br(this.padding),this.inputSpec=[new Ks({ndim:5})]}computeOutputShape(t){t=Kn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[4]:t[3];return n=zi(n,this.poolSize[0],this.padding,this.strides[0]),s=zi(s,this.poolSize[1],this.padding,this.strides[1]),o=zi(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,s,o]:[t[0],n,s,o,t[4]]}call(t,n){return Ge(()=>(this.invokeCallHook(t,n),this.poolingFunction(fn(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class kV extends wV{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Vs(r),Br(o),hV(t,n,s,o,r,"max")}}kV.className="MaxPooling3D";ut(kV);class xV extends wV{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Vs(r),Br(o),hV(t,n,s,o,r,"avg")}}xV.className="AveragePooling3D";ut(xV);class CV extends Rn{constructor(t){super(t),this.inputSpec=[new Ks({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,n){throw new ln}}class $V extends CV{constructor(t){super(t||{})}call(t,n){return Ge(()=>{const s=fn(t);return Os(s,1)})}}$V.className="GlobalAveragePooling1D";ut($V);class SV extends CV{constructor(t){super(t||{})}call(t,n){return Ge(()=>{const s=fn(t);return pa(s,1)})}}SV.className="GlobalMaxPooling1D";ut(SV);class IV extends Rn{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Vs(this.dataFormat),this.inputSpec=[new Ks({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,n){throw new ln}getConfig(){const t={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class EV extends IV{call(t,n){return Ge(()=>{const s=fn(t);return this.dataFormat==="channelsLast"?Os(s,[1,2]):Os(s,[2,3])})}}EV.className="GlobalAveragePooling2D";ut(EV);class TV extends IV{call(t,n){return Ge(()=>{const s=fn(t);return this.dataFormat==="channelsLast"?pa(s,[1,2]):pa(s,[2,3])})}}TV.className="GlobalMaxPooling2D";ut(TV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _V extends Rn{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(t,n),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,n,s={}){const o=n.layer,r=qa(o,s);delete n.layer;const i={layer:r};return Object.assign(i,n),new t(i)}}class NV extends _V{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=Kn(t),t.length<3)throw new _e(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=Kn(t);const n=[t[0]].concat(t.slice(2)),s=this.layer.computeOutputShape(n),o=t[1];return[s[0],o].concat(s.slice(1))}call(t,n){return Ge(()=>(t=fn(t),B5((i,a)=>[fn(this.layer.call(i,n)),[]],t,[],!1,null,null,!1,!0)[1]))}}NV.className="TimeDistributed";ut(NV);function AOe(e){Zc(eMe,"BidirectionalMergeMode",e)}const DOe="concat";class AV extends _V{constructor(t){super(t);const n=t.layer.getConfig(),s={};s.className=t.layer.getClassName(),s.config=n,this.forwardLayer=qa(s),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=t.layer.getClassName(),o.config=n,this.backwardLayer=qa(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?DOe:t.mergeMode,AOe(this.mergeMode),t.weights)throw new ln("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const n=t.length,s=Math.floor(n/2);this.forwardLayer.setWeights(t.slice(0,s)),this.backwardLayer.setWeights(t.slice(s))}computeOutputShape(t){let n=this.forwardLayer.computeOutputShape(t);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let s,o,r;return this.returnState&&(r=n.slice(1)),s=n[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,o=[s]):this.mergeMode==null?o=[s,s.slice()]:o=[s],this.returnState?this.mergeMode==null?o.concat(r).concat(r.slice()):[s].concat(r).concat(r.slice()):qo(o)}apply(t,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=L5(t,s,o,this.numConstants);if(t=r.inputs,s=r.initialState,o=r.constants,Array.isArray(t)&&(s=t.slice(1),t=t[0]),(s==null||s.length===0)&&o==null)return super.apply(t,n);const i=[],a=[];if(s!=null){const u=s.length;if(u%2>0)throw new _e("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=s,i.push(...s);const c=s.map(d=>new Ks({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(o!=null)throw new ln("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof da;for(const u of i)if(u instanceof da!==l)throw new _e("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[t].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(t,n)}call(t,n){return Ge(()=>{const s=n.initialState;let o,r;if(s==null)o=this.forwardLayer.call(t,n),r=this.backwardLayer.call(t,n);else{const l=s.slice(0,s.length/2),u=s.slice(s.length/2);o=this.forwardLayer.call(t,Object.assign(n,{initialState:l})),r=this.backwardLayer.call(t,Object.assign(n,{initialState:u}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(r.slice(1))),o=o[0],r=r[0]),this.returnSequences&&(r=Nc(r,1));let a;return this.mergeMode==="concat"?a=AE([o,r]):this.mergeMode==="sum"?a=ht(o,r):this.mergeMode==="ave"?a=Ee(.5,ht(o,r)):this.mergeMode==="mul"?a=Ee(o,r):this.mergeMode==null&&(a=[o,r]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){fc(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),fc(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,n){Array.isArray(n)&&(n=n[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[n,n]:s=n:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const r=this.forwardLayer.states.map(i=>null);return Array.isArray(s)?s.concat(r).concat(r):[s].concat(r).concat(r)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,n){const s=qa(n.layer);if(delete n.layer,n.numConstants!=null)throw new ln("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=s,new t(o)}}AV.className="Bidirectional";ut(AV);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROe=et();ROe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var x3;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(x3||(x3={}));var C3;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(C3||(C3={}));/** @license See the LICENSE file. */var DV={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(ss,e,!1)})(DV);var RV={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(ss,e,!1)})(RV);var MV={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(ss,e,!1)})(MV);var OV={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(ss,e,!1)})(OV);var PV={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,m,g,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=v[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=g,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(ss,e,!1)})(PV);var FV={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(ss,e,!1)})(FV);var LV={exports:{}};(function(e){(function(t,n){var s=(0,eval)("this"),o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,k,x){var C=[];k=k==!0?{entropy:!0}:k||{};var S=v(g(k.entropy?[y,w(t)]:y==null?b():y,3),C),T=new p(C),A=function(){for(var R=T.g(r),L=l,P=0;R<u;)R=(R+P)*o,L*=o,P=T.g(1);for(;R>=c;)R/=2,L/=2,P>>>=1;return(R+P)/L};return A.int32=function(){return T.g(4)|0},A.quick=function(){return T.g(4)/4294967296},A.double=A,v(w(T.S),t),(k.pass||x||function(R,L,P,V){return V&&(V.S&&m(V,T),R.state=function(){return m(T,{})}),P?(n[a]=R,L):R})(A,S,"global"in k?k.global:this==n,k.state)}n["seed"+a]=h;function p(y){var k,x=y.length,C=this,S=0,T=C.i=C.j=0,A=C.S=[];for(x||(y=[x++]);S<o;)A[S]=S++;for(S=0;S<o;S++)A[S]=A[T=d&T+y[S%x]+(k=A[S])],A[T]=k;(C.g=function(R){for(var L,P=0,V=C.i,H=C.j,F=C.S;R--;)L=F[V=d&V+1],P=P*o+F[d&(F[V]=F[H=d&H+L])+(F[H]=L)];return C.i=V,C.j=H,P})(o)}function m(y,k){return k.i=y.i,k.j=y.j,k.S=y.S.slice(),k}function g(y,k){var x=[],C=typeof y,S;if(k&&C=="object")for(S in y)try{x.push(g(y[S],k-1))}catch{}return x.length?x:C=="string"?y:y+"\0"}function v(y,k){for(var x=y+"",C,S=0;S<x.length;)k[d&S]=d&(C^=k[d&S]*19)+x.charCodeAt(S++);return w(k)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),w(y)}catch{var k=s.navigator,x=k&&k.plugins;return[+new Date,s,x,s.screen,w(t)]}}function w(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(LV);var MOe=DV.exports,OOe=RV.exports,POe=MV.exports,FOe=OV.exports,LOe=PV.exports,BOe=FV.exports,eh=LV.exports;eh.alea=MOe;eh.xor128=OOe;eh.xorwow=POe;eh.xorshift7=FOe;eh.xor4096=LOe;eh.tychei=BOe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var $3;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})($3||($3={}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function At(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&oe(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zOe=Z6;class nw extends kS{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new dz(this,Nl())}nextDataId(){return nw.nextDataId++}write(t,n,s){this.firstUse&&(this.firstUse=!1,et().get("IS_NODE")&&Er(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:t,dtype:s,refCount:1}),o}makeTensorInfo(t,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&Sm(s[0])){const r=s.map(i=>Hl(i));o=this.write(r,t,n)}else o=this.write(s,t,n);return{dataId:o,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,s,o,r){this.data.set(t,{values:n,dtype:o,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:s}=this.data.get(t);if(n==="complex64"){const o=this.readSync(s.real.dataId),r=this.readSync(s.imag.dataId);return tl(o,r)}return this.data.get(t).values}bufferSync(t){const n=this.readSync(t.dataId);let s=n;if(t.dtype==="string")try{s=n.map(o=>wf(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return $n(t.shape,t.dtype,s)}makeOutput(t,n,s){const o=this.write(t,n,s);return Nl().makeTensorFromDataId(o,n,s,this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(t);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=Ko();return t(),{kernelMs:Ko()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){At([t],"where");const n=this.readSync(t.dataId);return zOe(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}nw.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BV(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const VOe=e=>{const{x:t}=e.inputs,n=e.backend;At(t,"abs");let s=new Float32Array(tt(t.shape));const o=n.data.get(t.dataId).values;return s=BV(o),n.makeOutput(s,t.shape,t.dtype)},WOe={kernelName:Ay,backendName:"cpu",kernelFunc:VOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Us(e){return(t,n,s,o,r)=>{const i=dn(t,n),a=i.length,l=Wt(i),u=tt(i),c=yo(r,u),d=t.length,f=n.length,h=Wt(t),p=Wt(n),m=xf(t,i),g=xf(n,i);if(m.length+g.length===0)for(let v=0;v<c.length;++v)c[v]=e(s[v%s.length],o[v%o.length]);else for(let v=0;v<c.length;++v){const b=Em(v,a,l),w=b.slice(-d);m.forEach(C=>w[C]=0);const y=ha(w,d,h),k=b.slice(-f);g.forEach(C=>k[C]=0);const x=ha(k,f,p);c[v]=e(s[y],o[x])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ir(e){const{inputs:t,backend:n}=e,{real:s,imag:o}=t,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(s.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(s.shape,"float32",r),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const HOe={kernelName:NS,backendName:"cpu",kernelFunc:ir};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _b(e,t,n="float32"){if(n==="complex64"){const o=_b(e,t,"float32"),r=_b(e,t,"float32");return ir({inputs:{real:o,imag:r},backend:e})}const s=Oo(tt(t),n);return e.makeTensorInfo(t,n,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ca(e){const{inputs:t,backend:n}=e,{x:s}=t;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const UOe={kernelName:qm,backendName:"cpu",kernelFunc:Ca};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mc(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.data.get(s.dataId).complexTensorInfos.real,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const jOe={kernelName:eI,backendName:"cpu",kernelFunc:Mc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tu(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return Ca({inputs:{x:o},backend:n});const i=_b(n,o.shape,o.dtype),a=tu({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=ir({inputs:{real:a,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=Mc({inputs:{input:o},backend:n}),a=tu({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!mz(o.dtype,r)){const i=Ca({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(r==="int32"){const i=n.data.get(o.dataId).values,a=Int32Array.from(i);return n.makeTensorInfo(o.shape,"int32",a)}if(r==="bool"){const i=n.data.get(o.dataId).values,a=Yc([0],o.dtype),[l,u]=Us((c,d)=>c!==d?1:0)(o.shape,[],i,a,"bool");return n.makeTensorInfo(u,"bool",l)}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const GOe={kernelName:Om,backendName:"cpu",kernelFunc:tu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(e,t,n,s){return n==null?({inputs:o,backend:r})=>{const{a:i,b:a}=o,l=r;At([i,a],e);const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=i.dtype==="string"?Dc(u):u,f=i.dtype==="string"?Dc(c):c,h=s||i.dtype,[p,m]=t(i.shape,a.shape,d,f,h);return l.makeTensorInfo(m,h,p)}:({inputs:o,backend:r})=>{const{a:i,b:a}=o,l=r;if(i.dtype==="complex64"||a.dtype==="complex64"){const u=tu({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,m=tu({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),v=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,w=l.data.get(v.dataId).values,y=l.data.get(b.dataId).values,[k,x,C]=n(i.shape,a.shape,h,p,w,y),S=l.makeTensorInfo(C,"float32",k),T=l.makeTensorInfo(C,"float32",x),A=ir({inputs:{real:S,imag:T},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(S),l.disposeIntermediateTensorInfo(T),A}else{const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=s||i.dtype,[f,h]=t(i.shape,a.shape,u,c,d);return l.makeTensorInfo(h,d,f)}}}function XE(e){return(t,n,s,o,r,i)=>{const a=dn(t,n),l=tt(a),u=a.length,c=Wt(a),d=yo("float32",l),f=yo("float32",l),h=xf(t,a),p=xf(n,a),m=tl(s,o),g=tl(r,i),v=t.length,b=Wt(t),w=n.length,y=Wt(n);if(h.length+p.length===0)for(let k=0;k<d.length;k++){const x=k%m.length,C=k%g.length,S=e(m[x*2],m[x*2+1],g[C*2],g[C*2+1]);d[k]=S.real,f[k]=S.imag}else for(let k=0;k<d.length;k++){const x=Em(k,u,c),C=x.slice(-v);h.forEach(L=>C[L]=0);const S=ha(C,v,b),T=x.slice(-w);p.forEach(L=>T[L]=0);const A=ha(T,w,y),R=e(m[S*2],m[S*2+1],g[A*2],g[A*2+1]);d[k]=R.real,f[k]=R.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zV=Us((e,t)=>e+t),KOe=XE((e,t,n,s)=>({real:e+n,imag:t+s})),zg=uo(Kf,zV,KOe),qOe={kernelName:Kf,backendName:"cpu",kernelFunc:zg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZE(e,t,n,s,o){const r=tt(s),i=Oo(o,n);for(let a=0;a<e.length;a++){const l=e[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(r>0?i[l]+=t[a]:i[l]+=1)}return i}function VV(e,t,n,s=!1){const o=e.shape[0],r=e.shape[1],i=$n([o,n],t.dtype);for(let a=0;a<o;a++)for(let l=0;l<r;l++){const u=e.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(s?i.set(1,a,u):t.size>0?i.set(i.get(a,u)+t.get(a,l),a,u):i.set(i.get(a,u)+1,a,u))}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mu(e){return(t,n,s)=>{const o=yo(n,t.length);for(let r=0;r<t.length;++r)o[r]=e(t[r],s);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yn(e,t,n){return({inputs:s,attrs:o,backend:r})=>{const{x:i}=s;if(At(i,e),i.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const a=r,l=a.data.get(i.dataId).values,u=tt(i.shape),c=n||i.dtype,d=Xo(c,u);for(let f=0;f<u;++f)d[f]=t(l[f],o);return a.makeTensorInfo(i.shape,c,d)}}function th(e,t,n){return({inputs:s,attrs:o,backend:r})=>{const{x:i}=s;if(At(i,e),i.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const a=r,l=a.data.get(i.dataId).values,u=n||i.dtype,c=t(l,u,o);return a.makeTensorInfo(i.shape,u,c)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WV=mu(e=>Math.ceil(e)),YOe=th(Pm,WV),XOe={kernelName:Pm,backendName:"cpu",kernelFunc:YOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HV(e,t,n,s){const o=Xo(n,tt(t));if(s&&n!=="string"){let r=0;e.forEach(i=>{const a=tt(i.shape);o.set(i.vals,r),r+=a})}else{let r=0;e.forEach(i=>{const a=n==="string"?Dc(i.vals):i.vals;let l=0;for(let u=0;u<i.shape[0];++u){const c=u*t[1]+r;for(let d=0;d<i.shape[1];++d)o[c+d]=a[l++]}r+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UV=Us((e,t)=>e===t?1:0),jV=uo(Gy,UV,null,"bool"),ZOe={kernelName:Gy,backendName:"cpu",kernelFunc:jV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GV=mu(e=>Math.exp(e)),KV=th(Hm,GV,"float32"),JOe={kernelName:Hm,backendName:"cpu",kernelFunc:KV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qV=mu(e=>Math.expm1(e)),QOe=th(Um,qV),ePe={kernelName:Um,backendName:"cpu",kernelFunc:QOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YV=mu(e=>Math.floor(e)),tPe=th(jm,YV),nPe={kernelName:jm,backendName:"cpu",kernelFunc:tPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XV(e,t,n,s,o,r,i,a,l){const u=$n([s,r],n);for(let c=0;c<s;c++){const d=[];let f=0;for(let h=0;h<o;h++){const p=e[c*o+h];f+=p*i[h],d.push(p)}if(f<0||f>=l/r)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<r;h++)u.values[c*r+h]=t.get(...t.indexToLoc(f*r+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZV(e,t,n){const s=$n(n,e.dtype);for(let o=0;o<s.size;++o){const i=s.indexToLoc(o).slice(),a=i[0],l=i[2],u=t.locToIndex([a,l]);i[2]=t.values[u];const c=e.locToIndex(i);0<=c&&c<e.values.length&&(s.values[o]=e.values[c])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV=Us((e,t)=>e>t?1:0),sPe=uo(Xy,JV,null,"bool"),oPe={kernelName:Xy,backendName:"cpu",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QV=Us((e,t)=>e>=t?1:0),rPe=uo(Km,QV,null,"bool"),iPe={kernelName:Km,backendName:"cpu",kernelFunc:rPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eW=Us((e,t)=>e<t?1:0),aPe=uo(Jy,eW,null,"bool"),lPe={kernelName:Jy,backendName:"cpu",kernelFunc:aPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tW=Us((e,t)=>e<=t?1:0),uPe=uo(Qy,tW,null,"bool"),cPe={kernelName:Qy,backendName:"cpu",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nW(e,t,n){const s=(t-e)/(n-1),o=Oo(n,"float32");o[0]=e;for(let r=1;r<o.length;r++)o[r]=o[r-1]+s;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sW=mu(e=>Math.log(e)),dPe=th(Jm,sW),fPe={kernelName:Jm,backendName:"cpu",kernelFunc:dPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oW(e,t,n,s){const o=yo(s,tt(n));for(let r=0;r<o.length;++r){const i=r*t;let a=e[i];for(let l=0;l<t;++l){const u=e[i+l];(Number.isNaN(u)||u>a)&&(a=u)}o[r]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rW=Us((e,t)=>Math.max(e,t)),hPe=uo(eg,rW),pPe={kernelName:eg,backendName:"cpu",kernelFunc:hPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iW=Us((e,t)=>Math.min(e,t)),mPe=uo(tg,iW),gPe={kernelName:tg,backendName:"cpu",kernelFunc:mPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JE=Us((e,t)=>e*t),vPe=XE((e,t,n,s)=>({real:e*n-t*s,imag:e*s+t*n})),sw=uo(sg,JE,vPe),bPe={kernelName:sg,backendName:"cpu",kernelFunc:sw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aW(e,t,n){const s=lu(-1,n);return JE([],t,s,e,n)}function yPe(e){const{inputs:t,backend:n}=e,{x:s}=t;At(s,"neg");const o=n.data.get(s.dataId).values,[r,i]=aW(o,s.shape,s.dtype);return n.makeTensorInfo(i,s.dtype,r)}const wPe={kernelName:c1,backendName:"cpu",kernelFunc:yPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lW=Us((e,t)=>e!==t?1:0),kPe=uo(d1,lW,null,"bool"),xPe={kernelName:d1,backendName:"cpu",kernelFunc:kPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QE(e,t,n,s,o){const r=t.length,i=tt(t),a=Wt(t),l=Wt(o),u=yo(n,tt(o));for(let c=0;c<i;++c){const d=Em(c,r,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[s[p]];const h=ha(f,r,l);u[h]=e[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jo(e){const{inputs:t,attrs:n,backend:s}=e,{x:o}=t,{perm:r}=n;At(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[r[d]];const l=s.data.get(o.dataId).values,u=QE(l,o.shape,o.dtype,r,a);return{dataId:s.write(u,a,o.dtype),shape:a,dtype:o.dtype}}const CPe={kernelName:E1,backendName:"cpu",kernelFunc:Jo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uW(e,t,n,s){const[o,r]=lo(e,s),i=pr(t,"int32"),a=Oo(tt(o),i),l=tt(r);for(let u=0;u<a.length;++u){const c=u*l;let d=1;for(let f=0;f<l;++f)d*=n[c+f];a[u]=d}return{outVals:a,outShape:o,outDtype:i}}function $Pe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;At(o,"prod");const a=o.shape.length,l=yn(r,o.shape),u=Es(l,a);let c=l,d=o;const f=[];u!=null&&(d=Jo({inputs:{x:o},backend:n,attrs:{perm:u}}),f.push(d),c=Ms(c.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:g}=uW(d.shape,d.dtype,h,c);let v=m;return i&&(v=zs(m,l)),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(v,g,p)}const SPe={kernelName:JS,backendName:"cpu",kernelFunc:$Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cW(e,t,n,s){const o=e===t,r=e<t&&n<0,i=t<e&&n>1;if(o||r||i)return Oo(0,s);const a=Math.abs(Math.ceil((t-e)/n)),l=Oo(a,s);t<e&&n===1&&(n=-1),l[0]=e;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dW=mu(e=>1/Math.sqrt(e)),IPe=th(ug,dW),EPe={kernelName:ug,backendName:"cpu",kernelFunc:IPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TPe=mu(e=>1/(1+Math.exp(-e))),fW=Yn(pg,e=>1/(1+Math.exp(-e))),_Pe={kernelName:pg,backendName:"cpu",kernelFunc:fW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hW(e,t,n,s,o){const r=CI(s,t,n),i=tt(n),a=Wt(s);if(r){const d=$I(t,a);return o==="string"?e.slice(d,d+i):e.subarray(d,d+i)}const l=o==="string"?Dc(e):e,u=$n(s,o,l),c=$n(n,o);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),h=f.map((p,m)=>p+t[m]);c.set(u.get(...h),...f)}return o==="string"?$8(c.values):c.values}function Oc(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,size:i}=s;At(o,"slice");const[a,l]=O1(o,r,i);kI(o,a,l);const u=n.data.get(o.dataId).values,c=hW(u,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const NPe={kernelName:x1,backendName:"cpu",kernelFunc:Oc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(e,t,n,s,o,r,i){const a=t[0],l=r[0],u=new Array(l),c=new Array(a),d=t[1];if(l===0){if(a!==0)throw new Error(d8(a));const g=Xo(n,0),v=Xo(o,0);return[g,[0,d],v,u,c]}let f=!0,h=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const v=e[g*d];if(v<0)throw new Error(f8(g,v));if(v>=l)throw new Error(h8(g,v,l));++p[v],f=f&&v>=h,h=v}let m=!0;for(let g=0;g<l;++g){const v=p[g]===0;u[g]=v,m=m&&!v,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&f){const g=e,v=s;for(let b=0;b<a;++b)c[b]=b;return[g,[a,d],v,u,c]}else{const g=p[l-1],v=Xo(n,g*d),b=Xo(o,g),w=new Array(l).fill(0);for(let y=0;y<a;++y){const k=e[y*d],x=w[k],C=(k===0?0:p[k-1])+x;w[k]++;for(let S=0;S<d;++S)v[C*d+S]=e[y*d+S];b[C]=s[y],c[y]=C}for(let y=0;y<l;++y)if(w[y]===0){const x=y===0?0:p[y-1];v[x*d+0]=y;for(let C=1;C<d;++C)v[x*d+C]=0;b[x]=i}return[v,[g,d],b,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mW(e,t,n,s,o){const r=tt(s),i=t[0],a=o.length,l=[];let u=1,c=-1;for(let g=0;g<a;++g){const v=o[g];if(v===-1){if(c!==-1)throw new Error(p8(c,g));c=g,l.push(1)}else{if(v<0)throw new Error(m8(g,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(g8());const g=Math.trunc(r/u);if(u*g!==r)throw new Error(v8(s,l));l[c]=g}if(tt(l)!==r)throw new Error(b8(s,l));const f=s.length,h=[];if(f>0){h[f-1]=1;for(let g=f-2;g>=0;--g)h[g]=h[g+1]*s[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=Xo(n,i*a);for(let g=0;g<i;++g){let v=0;for(let b=0;b<f;++b)v+=e[g*f+b]*h[b];for(let b=0;b<a;++b)m[g*a+b]=Math.trunc(v/p[b]),v%=p[b]}return[m,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(e,t,n,s,o,r=!1,i=0){const a=s.length,l=[t[0],e.length/t[0]],u=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(sC());const f=t.slice();f[0]=d;const h=f.reduce((w,y)=>w*y,1),p=Xo(n,h);if(a===0)return d>0&&p.fill(i),[p,f];if(d<=0)throw new Error(sC());let m=0,g=1,v=0,b=o[m];for(;;){let w=0;if(g<a){if(w=o[g],b===w){++g;continue}if(b>=w)throw new Error(y8())}if(b<0||b>=d)throw new Error(w8(b,d));b>v&&p.fill(i,v*u,b*u);for(let y=m;y<g;++y){const k=s[y];if(k<0||k>=l[0])throw new Error(k8(y,s[y],l[0]));for(let x=0;x<u;x++)p[b*u+x]+=e[k*u+x]}if(r)for(let y=0;y<u;y++)p[b*u+y]/=g-m;if(m=g,++g,v=b+1,b=w,g>a)break}return v<d&&p.fill(i,v*u,d*u),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APe=mu(e=>Math.sqrt(e)),DPe=Yn(gg,e=>Math.sqrt(e)),RPe={kernelName:gg,backendName:"cpu",kernelFunc:DPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gW=Us((e,t)=>{const n=e-t;return n*n}),MPe=uo(vg,gW),OPe={kernelName:vg,backendName:"cpu",kernelFunc:MPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vW(e,t,n,s){const o=$n(e,t.dtype);for(let r=0;r<o.size;r++){const i=o.indexToLoc(r),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+s[l];o.set(t.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PPe{constructor(t,n,s,o,r,i){this.separator=Hl(t),this.nGramWidths=n,this.leftPad=Hl(s),this.rightPad=Hl(o),this.padWidth=r,this.preserveShort=i}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const s=this.getPadWidth(n);return Math.max(0,t+2*s-n+1)}createNGrams(t,n,s,o,r,i){for(let a=0;a<r;++a){const l=this.getPadWidth(i),u=Math.max(0,l-a),c=Math.max(0,l-(r-(a+1))),d=i-(u+c),f=n+(u>0?0:a-l);let h=0;h+=u*this.leftPad.length;for(let b=0;b<d;++b)h+=t[f+b].length;h+=c*this.rightPad.length,h+=(u+c+d-1)*this.separator.length,s[o+a]=new Uint8Array(h);const m=s[o+a];let g=0;const v=b=>b.forEach(w=>m[g++]=w);for(let b=0;b<u;++b)v(this.leftPad),v(this.separator);for(let b=0;b<d-1;++b)v(t[f+b]),v(this.separator);if(d>0){v(t[f+d-1]);for(let b=0;b<c;++b)v(this.separator),v(this.rightPad)}else{for(let b=0;b<c-1;++b)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(t,n){const s=t.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<o;++u){let c=n[u]>=l;if(c=c&&n[u]<=s,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${s}]`);l=n[u]}if(l!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${l}`)}const r=o-1,i=Xo("int32",o);if(s===0||o===0){const l=new Array(s);for(let u=0;u<=r;++u)i[u]=0;return[l,i]}i[0]=0;for(let l=1;l<=r;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),i[l]=i[l-1]+c}const a=new Array(i[r]);for(let l=0;l<r;++l){const u=n[l];let c=i[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(t,u,a,c,h,d),c+=h}),this.preserveShort&&c===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth,h=1;this.createNGrams(t,u,a,c,h,f)}}return[a,i]}}function bW(e,t,n,s,o,r,i,a){return new PPe(n,s,o,r,i,a).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(e,t,n,s){if(!e.length)return;if(t.length===0){for(let r=0;r<e.length;++r)s.push(e.subarray(r,r+1));return}if(t.length===1){const r=t[0];let i=e.indexOf(r);for(;i!==-1;){const a=e.subarray(0,i);(!n||a.length!==0)&&s.push(a),e=e.subarray(i+1),i=e.indexOf(r)}(!n||e.length!==0)&&s.push(e);return}let o=0;for(let r=0;r<e.length+1;r++)if(r===e.length||t.indexOf(e[r])!==-1){const i=e.subarray(o,r);(!n||i.length!==0)&&s.push(i),o=r+1}}function yW(e,t,n){const s=e.length,o=[];let r=0,i=0;const a=new Array(s);for(let f=0;f<s;++f){const h=o.length;FPe(e[f],t,n,o);const p=o.length-h;a[f]=p,r+=p,i=Math.max(i,p)}const l=Xo("int32",r*2),u=new Array(r),c=[s,i];let d=0;for(let f=0;f<s;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,u[d]=o[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wW(e,t){const n=Xo("int32",e.length);for(let s=0;s<e.length;++s)n[s]=kIe(e[s]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kW=Us((e,t)=>e-t),LPe=XE((e,t,n,s)=>({real:e-n,imag:t-s})),tT=uo(bg,kW,LPe),BPe={kernelName:bg,backendName:"cpu",kernelFunc:tT};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xW(e,t){const n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];const s=$n(n,e.dtype);for(let o=0;o<s.values.length;++o){const r=s.indexToLoc(o),i=new Array(e.rank);for(let l=0;l<i.length;l++)i[l]=r[l]%e.shape[l];const a=e.locToIndex(i);s.values[o]=e.values[a]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jh=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function CW(e,t,n=0,s=e.length-1){for(;s>n;){if(s-n>600){const a=s-n+1,l=t-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(t-l*c/a+d)),h=Math.min(s,Math.floor(t+(a-l)*c/a+d));CW(e,t,f,h)}const o=e[t];let r=n,i=s;for(Ad(e,n,t),jh(e[s],o)>0&&Ad(e,n,s);r<i;){for(Ad(e,r,i),r++,i--;jh(e[r],o)<0;)r=r+1;for(;jh(e[i],o)>0;)i=i-1}jh(e[n],o)===0?Ad(e,n,i):(i=i+1,Ad(e,i,s)),i<=t&&(n=i+1),t<=i&&(s=i-1)}}function $W(e,t,n,s,o){const r=t[t.length-1],[i,a]=[e.length/r,r],l=yo(n,i*s),u=yo("int32",i*s);for(let d=0;d<i;d++){const f=d*a,h=e.subarray(f,f+a);let p=new Array(h.length);h.forEach((b,w)=>p[w]={value:b,index:w}),s<p.length&&(CW(p,s),p=p.slice(0,s)),o&&p.sort(jh);const m=d*s,g=l.subarray(m,m+s),v=u.subarray(m,m+s);for(let b=0;b<s;b++)g[b]=p[b].value,v[b]=p[b].index}const c=t.slice();return c[c.length-1]=s,[$n(c,n,l),$n(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SW(e,t,n,s){const o=yn(t,n)[0],r=[1,n[0],1];for(let p=0;p<o;p++)r[0]*=n[p];r[1]=n[o];for(let p=o+1;p<n.length;p++)r[2]*=n[p];const i={},a=new Int32Array(n[o]),l=new Do(r,s,e),u=[],c=r[0]===1&&r[2]===1;for(let p=0;p<n[o];p++){let m;if(c)m=e[p].toString();else{const g=[];for(let v=0;v<r[0];v++)for(let b=0;b<r[2];b++)g.push(l.get(v,p,b));m=g.join(",")}if(i[m]!==void 0)a[p]=i[m];else{const g=Object.keys(i).length;i[m]=g,a[p]=g,u.push(p)}}const d=r.slice();d[1]=Object.keys(i).length;const f=new Do(d,s);u.forEach((p,m)=>{for(let g=0;g<r[0];g++)for(let v=0;v<r[2];v++)f.set(l.get(g,p,v),g,m,v)});const h=n.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zPe=Object.freeze(Object.defineProperty({__proto__:null,simpleAbsImpl:BV,addImpl:zV,bincountImpl:ZE,bincountReduceImpl:VV,ceilImpl:WV,concatImpl:HV,equalImpl:UV,expImpl:GV,expm1Impl:qV,floorImpl:YV,gatherNdImpl:XV,gatherV2Impl:ZV,greaterImpl:JV,greaterEqualImpl:QV,lessImpl:eW,lessEqualImpl:tW,linSpaceImpl:nW,logImpl:sW,maxImpl:oW,maximumImpl:rW,minimumImpl:iW,multiplyImpl:JE,negImpl:aW,notEqualImpl:lW,prodImpl:uW,rangeImpl:cW,rsqrtImpl:dW,sigmoidImpl:TPe,sliceImpl:hW,sparseFillEmptyRowsImpl:pW,sparseReshapeImpl:mW,sparseSegmentReductionImpl:eT,sqrtImpl:APe,squaredDifferenceImpl:gW,stridedSliceImpl:vW,stringNGramsImpl:bW,stringSplitImpl:yW,stringToHashBucketFastImpl:wW,subImpl:kW,tileImpl:xW,topKImpl:$W,transposeImpl:QE,uniqueImpl:SW},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */p6("cpu",()=>new nw,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IW=Yn(Vm,e=>e>=0?e:Math.exp(e)-1),VPe={kernelName:Vm,backendName:"cpu",kernelFunc:IW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{alpha:r}=s;At([o],"leakyRelu");const i=tt(o.shape),a=n.data.get(o.dataId).values,l=yo("float32",i);for(let u=0;u<a.length;u++)l[u]=a[u]<0?r*a[u]:a[u];return n.makeTensorInfo(o.shape,"float32",l)}const WPe={kernelName:Zy,backendName:"cpu",kernelFunc:EW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPe=Us((e,t)=>e<0?t*e:e);function TW(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t;At([s,o],"prelu");const r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,[a,l]=HPe(s.shape,o.shape,r,i,"float32");return n.makeTensorInfo(l,"float32",a)}const UPe={kernelName:g1,backendName:"cpu",kernelFunc:TW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _W=Yn(ig,e=>Math.max(0,e)),jPe={kernelName:ig,backendName:"cpu",kernelFunc:_W};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NW=Yn(ag,e=>Math.min(Math.max(0,e),6)),GPe={kernelName:ag,backendName:"cpu",kernelFunc:NW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nT(e,t,n,s,o){if(n==="linear")return Ca({inputs:{x:t},backend:e});if(n==="relu")return _W({inputs:{x:t},backend:e});if(n==="elu")return IW({inputs:{x:t},backend:e});if(n==="relu6")return NW({inputs:{x:t},backend:e});if(n==="prelu")return TW({inputs:{x:t,alpha:s},backend:e});if(n==="leakyrelu")return EW({inputs:{x:t},backend:e,attrs:{alpha:o}});if(n==="sigmoid")return fW({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $s(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{shape:r}=s,i=tt(o.shape),a=pz(r,i),l=tt(a);oe(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const KPe={kernelName:v1,backendName:"cpu",kernelFunc:$s};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AW(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r}=t,{transposeA:i,transposeB:a}=s;At([o,r],"matMul");const l=o.shape.length,u=r.shape.length,c=i?o.shape[l-2]:o.shape[l-1],d=a?r.shape[u-1]:r.shape[u-2],f=i?o.shape[l-1]:o.shape[l-2],h=a?r.shape[u-2]:r.shape[u-1],p=o.shape.slice(0,-2),m=r.shape.slice(0,-2),g=tt(p),v=tt(m),w=dn(o.shape.slice(0,-2),r.shape.slice(0,-2)).concat([f,h]);oe(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${r.shape} and transposeA=${i} and transposeB=${a} must match.`);const y=i?[g,c,f]:[g,f,c],k=a?[v,h,d]:[v,d,h],x=$s({inputs:{x:o},backend:n,attrs:{shape:y}}),C=$s({inputs:{x:r},backend:n,attrs:{shape:k}}),S=i?x.shape[1]:x.shape[2],T=i?x.shape[2]:x.shape[1],A=a?C.shape[1]:C.shape[2],R=Math.max(g,v),L=n.data.get(x.dataId).values,P=n.data.get(C.dataId).values,V=Wt(x.shape),H=Wt(C.shape),[F,M,B]=i?[V[0],1,V[1]]:[V[0],V[1],1],[Y,J,ee]=a?[1,H[1],H[0]]:[H[1],1,H[0]],te=T*A,re=$n([R,T,A],x.dtype),$e=re.values,se=n.blockSize;for(let Q=0;Q<R;Q++)for(let ae=0;ae<T;ae+=se)for(let pe=0;pe<A;pe+=se)for(let ke=0;ke<S;ke+=se){const Be=Math.min(ae+se,T),je=Math.min(pe+se,A),qe=Math.min(ke+se,S);for(let ne=ae;ne<Be;ne++)for(let ue=pe;ue<je;ue++){let Se=0;for(let Fe=ke;Fe<qe;Fe++){const Le=Math.min(Q,g-1)*F,Ke=Math.min(Q,v-1)*ee,ie=L[Le+ne*M+Fe*B],ge=P[Fe*Y+ue*J+Ke];Se+=ie*ge}$e[Q*te+(ne*A+ue)]+=Se}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(w,re.dtype,re.values)}const qPe={kernelName:Py,backendName:"cpu",kernelFunc:AW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r,bias:i,preluActivationWeights:a}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;let f,h,p;const m=[];f=AW({inputs:{a:o,b:r},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(h=zg({inputs:{a:f,b:i},backend:n}),m.push(f),f=h),c&&(p=nT(n,f,c,a,d),m.push(f),f=p);for(const v of m)n.disposeIntermediateTensorInfo(v);return f}const XPe={kernelName:pb,backendName:"cpu",kernelFunc:YPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPe=Yn(Tm,e=>Math.acos(e)),JPe={kernelName:Tm,backendName:"cpu",kernelFunc:ZPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QPe=Yn(_m,e=>Math.acosh(e)),eFe={kernelName:_m,backendName:"cpu",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(e){const{inputs:t,backend:n}=e,s=t;At(t,"addN");const o=s.map(a=>n.data.get(a.dataId).values),r=$n(s[0].shape,s[0].dtype),i=r.values;for(let a=0;a<s.length;a++){const l=o[a];for(let u=0;u<i.length;u++)i[u]+=l[u]}return n.makeTensorInfo(r.shape,r.dtype,r.values)}const nFe={kernelName:$S,backendName:"cpu",kernelFunc:tFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;At(o,"all");const a=yn(r,o.shape);let l=a;const u=Es(l,o.shape.length);let c=o;u!=null&&(c=Jo({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Ms(l.length,o.shape.length)),xo("all",l,c.shape.length);const[d,f]=lo(c.shape,l),h=tt(f),p=Oo(tt(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let w=m[b];for(let y=0;y<h;++y){const k=m[b+y];w=w&&k}p[v]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const v=zs(d,a),b=$s({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const oFe={kernelName:SS,backendName:"cpu",kernelFunc:sFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;At(o,"any");const a=yn(r,o.shape);let l=a;const u=Es(l,o.shape.length);let c=o;u!=null&&(c=Jo({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Ms(l.length,o.shape.length)),xo("any",l,c.shape.length);const[d,f]=lo(c.shape,l),h=tt(f),p=Oo(tt(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let w=m[b];for(let y=0;y<h;++y){const k=m[b+y];w=w||k}p[v]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const v=zs(d,a),b=$s({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const iFe={kernelName:IS,backendName:"cpu",kernelFunc:rFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;At(o,"argMax");let i=yn(r,o.shape);const a=Es(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Jo({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Ms(i.length,l.shape.length)),i=[i[0]],xo("argMax",i,l.shape.length);const[c,d]=lo(l.shape,i),f=tt(c),h=Oo(f,"int32"),p=tt(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const v=g*p;let b=m[v],w=0;for(let y=0;y<p;++y){const k=m[v+y];k>b&&(b=k,w=y)}h[g]=w}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const lFe={kernelName:Dy,backendName:"cpu",kernelFunc:aFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;At(o,"argMin");let i=yn(r,o.shape);const a=Es(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Jo({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Ms(i.length,l.shape.length)),i=[i[0]],xo("argMin",i,l.shape.length);const[c,d]=lo(l.shape,i),f=tt(c),h=Oo(f,"int32"),p=tt(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const v=g*p;let b=m[v],w=0;for(let y=0;y<p;++y){const k=m[v+y];k<b&&(b=k,w=y)}h[g]=w}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const cFe={kernelName:Ry,backendName:"cpu",kernelFunc:uFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dFe=Yn(Nm,e=>Math.asin(e)),fFe={kernelName:Nm,backendName:"cpu",kernelFunc:dFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFe=Yn(Am,e=>Math.asinh(e)),pFe={kernelName:Am,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mFe=Yn(Dm,e=>Math.atan(e)),gFe={kernelName:Dm,backendName:"cpu",kernelFunc:mFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vFe=Us((e,t)=>Math.atan2(e,t)),bFe=uo(Mm,vFe),yFe={kernelName:Mm,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wFe=Yn(Rm,e=>Math.atanh(e)),kFe={kernelName:Rm,backendName:"cpu",kernelFunc:wFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sT(e,t,n,s,o,r){const i=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=$n(o.outShape,n),g=m.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],w=o.outShape[3];for(let y=0;y<o.batchSize;++y){const k=y*v,x=y*s[0];for(let C=0;C<o.inChannels;++C)for(let S=0;S<o.outHeight;++S){const T=S*i-f,A=Math.max(0,T),R=Math.min(o.inHeight,c+T),L=k+S*b;for(let P=0;P<o.outWidth;++P){const V=P*a-h,H=Math.max(0,V),F=Math.min(o.inWidth,d+V);let M=p,B=0,Y=0;for(let ee=A;ee<R;ee+=l){const te=x+ee*s[1];for(let re=H;re<F;re+=u){const $e=te+re*s[2],se=e[$e+C];r==="max"&&se>M?M=se:r==="avg"&&(B+=se,Y++)}if(isNaN(M))break}const J=L+P*w+C;g[J]=r==="avg"?B/Y:M}}}return m}function DW(e,t,n,s,o=!1,r=!1){const i=$n(s.outShape,"int32"),a=s.strideHeight,l=s.strideWidth,u=s.dilationHeight,c=s.dilationWidth,d=s.effectiveFilterHeight,f=s.effectiveFilterWidth,h=s.padInfo.top,p=s.padInfo.left,m=$n(t,n,e);for(let g=0;g<s.batchSize;++g)for(let v=0;v<s.inChannels;++v)for(let b=0;b<s.outHeight;++b){const w=b*a-h;let y=w;for(;y<0;)y+=u;const k=Math.min(s.inHeight,d+w);for(let x=0;x<s.outWidth;++x){const C=x*l-p;let S=C;for(;S<0;)S+=c;const T=Math.min(s.inWidth,f+C);let A=Number.NEGATIVE_INFINITY,R=-1;for(let L=y;L<k;L+=u){const P=L-w;for(let V=S;V<T;V+=c){const H=V-C,F=m.get(g,L,V,v);F>A&&(A=F,o?R=r?((g*s.inHeight+L)*s.inWidth+V)*s.inChannels+v:(L*s.inWidth+V)*s.inChannels+v:R=P*f+H)}}i.set(R,g,b,x,v)}}return i}function RW(e,t,n,s,o,r){const i=o.strideDepth,a=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,v=o.padInfo.left,b=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=$n(o.outShape,n),y=w.values,k=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],x=o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[3]*o.outShape[4],S=o.outShape[4];for(let T=0;T<o.batchSize;++T){const A=T*k,R=T*s[0];for(let L=0;L<o.inChannels;++L)for(let P=0;P<o.outDepth;++P){const V=P*i-m;let H=V;for(;H<0;)H+=u;const F=Math.min(o.inDepth,f+V),M=A+P*x;for(let B=0;B<o.outHeight;++B){const Y=B*a-g;let J=Y;for(;J<0;)J+=c;const ee=Math.min(o.inHeight,h+Y),te=M+B*C;for(let re=0;re<o.outWidth;++re){const $e=re*l-v;let se=$e;for(;se<0;)se+=d;const Q=Math.min(o.inWidth,p+$e),ae=te+re*S;let pe=b,ke=0,Be=0;for(let qe=H;qe<F;qe+=u){const ne=R+qe*s[1];for(let ue=J;ue<ee;ue+=c){const Se=ne+ue*s[2];for(let Fe=se;Fe<Q;Fe+=d){const Le=Se+Fe*s[3],Ke=e[Le+L];if(r==="max"&&Ke>pe?pe=Ke:r==="avg"&&(ke+=Ke,Be++),isNaN(pe))break}if(isNaN(pe))break}if(isNaN(pe))break}const je=ae+L;y[je]=r==="avg"?ke/Be:pe}}}}return w}function xFe(e,t){const n=$n(t.outShape,"int32"),s=t.strideDepth,o=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let v=0;v<t.outDepth;++v){const b=v*s-f;let w=b;for(;w<0;)w+=i;const y=Math.min(t.inDepth,u+b);for(let k=0;k<t.outHeight;++k){const x=k*o-h;let C=x;for(;C<0;)C+=a;const S=Math.min(t.inHeight,c+x);for(let T=0;T<t.outWidth;++T){const A=T*r-p;let R=A;for(;R<0;)R+=l;const L=Math.min(t.inWidth,d+A);let P=Number.NEGATIVE_INFINITY,V=-1;for(let H=w;H<y;H+=i){const F=H-b;for(let M=C;M<S;M+=a){const B=M-x;for(let Y=R;Y<L;Y+=l){const J=Y-A,ee=e.get(m,H,M,Y,g);ee>=P&&(P=ee,V=F*c*d+B*c+J)}}}n.set(V,m,v,k,T,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;At(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;oe(Po(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ki(o.shape,r,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&zn(c.inShape,c.outShape))d=Ca({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Wt(o.shape),p=sT(f,o.shape,o.dtype,h,c,"avg");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const $Fe={kernelName:My,backendName:"cpu",kernelFunc:CFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s;At(o,"avgPool3d");const c=cl(o.shape,r,i,1,a,l,u),d=n.data.get(o.dataId).values,f=RW(d,o.shape,o.dtype,Wt(o.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const IFe={kernelName:Oy,backendName:"cpu",kernelFunc:SFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EFe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=s;At([o,r],"avgPool3DGrad");const c=cl(r.shape,i,a,1,l,u),d=c.strideDepth,f=c.strideHeight,h=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,w=c.dilationWidth,y=c.effectiveFilterDepth,k=c.effectiveFilterHeight,x=c.effectiveFilterWidth,C=y-1-c.padInfo.front,S=x-1-c.padInfo.left,T=k-1-c.padInfo.top,A=$n(r.shape,"float32"),R=1/(p*m*g),L=n.bufferSync(o);for(let P=0;P<c.batchSize;++P)for(let V=0;V<c.inChannels;++V)for(let H=0;H<c.inDepth;++H)for(let F=0;F<c.inHeight;++F)for(let M=0;M<c.inWidth;++M){const B=H-C,Y=F-T,J=M-S;let ee=0;for(let te=0;te<y;te+=v){const re=(B+te)/d;if(!(re<0||re>=c.outDepth||Math.floor(re)!==re))for(let $e=0;$e<k;$e+=b){const se=(Y+$e)/f;if(!(se<0||se>=c.outHeight||Math.floor(se)!==se))for(let Q=0;Q<x;Q+=w){const ae=(J+Q)/h;if(ae<0||ae>=c.outWidth||Math.floor(ae)!==ae)continue;ee+=L.get(P,re,se,ae,V)}}}A.set(ee*R,P,H,F,M,V)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const TFe={kernelName:TS,backendName:"cpu",kernelFunc:EFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Fe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r;At([o,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,c=ki(i.shape,a,l,1,u),d=c.strideHeight,f=c.strideWidth,h=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,w=b-1-c.padInfo.left,y=v-1-c.padInfo.top,k=$n(i.shape,"float32"),x=1/(h*p),C=n.data.get(o.dataId).values,S=$n(o.shape,"float32",C);for(let T=0;T<c.batchSize;++T)for(let A=0;A<c.inChannels;++A)for(let R=0;R<c.inHeight;++R)for(let L=0;L<c.inWidth;++L){const P=R-y,V=L-w;let H=0;for(let F=0;F<v;F+=m){const M=(P+F)/d;if(!(M<0||M>=c.outHeight||Math.floor(M)!==M))for(let B=0;B<b;B+=g){const Y=(V+B)/f;if(Y<0||Y>=c.outWidth||Math.floor(Y)!==Y)continue;H+=S.get(T,M,Y,A)}}k.set(H*x,T,R,L,A)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const NFe={kernelName:ES,backendName:"cpu",kernelFunc:_Fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,scale:r,offset:i,mean:a,variance:l}=t;oe(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),oe(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),oe(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),At([o,a,l,r,i],"batchNorm");let{varianceEpsilon:u}=s;u==null&&(u=.001);const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=r?n.data.get(r.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,v=h.length,b=f.length,w=d.length;let y=0,k=0,x=0,C=0;for(let S=0;S<c.length;++S)m[S]=p[y++]+(c[S]-d[k++])*h[x++]/Math.sqrt(f[C++]+u),y>=g&&(y=0),k>=w&&(k=0),x>=v&&(x=0),C>=b&&(C=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const DFe={kernelName:qy,backendName:"cpu",kernelFunc:AFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,crops:i}=s;At([o],"batchToSpaceND");const a=r.reduce((v,b)=>v*b),l=_g(o.shape,r,a),u=Ng(l.length,r.length),c=Ag(o.shape,r,a),d=dE(i,r.length),f=fE(c,i,r.length),h=$s({inputs:{x:o},backend:n,attrs:{shape:l}}),p=Jo({inputs:{x:h},backend:n,attrs:{perm:u}}),m=$s({inputs:{x:p},backend:n,attrs:{shape:c}}),g=Oc({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const MFe={kernelName:Fy,backendName:"cpu",kernelFunc:RFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i}=s,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,u=ZE(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}const PFe={kernelName:_S,backendName:"cpu",kernelFunc:OFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFe(e){const{inputs:t,backend:n}=e,{s0:s,s1:o}=t,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=dn(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const LFe={kernelName:xz,backendName:"cpu",kernelFunc:FFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BFe=Yn(Fm,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),zFe={kernelName:Fm,backendName:"cpu",kernelFunc:BFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VFe=e=>{const{x:t}=e.inputs,n=e.backend,s=new Float32Array(tt(t.shape)),o=n.data.get(t.dataId),r=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],d=l[u];s[u]=Math.hypot(c,d)}return n.makeOutput(s,t.shape,"float32")},WFe={kernelName:Ly,backendName:"cpu",kernelFunc:VFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sf(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.data.get(s.dataId).complexTensorInfos.imag,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const HFe={kernelName:US,backendName:"cpu",kernelFunc:Sf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function If(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s,r=yn(o,t[0].shape)[0];let i=ma(t.map(m=>m.shape),r);if(tt(i)===0)return n.makeTensorInfo(i,t[0].dtype,[]);const a=t.filter(m=>tt(m.shape)>0);if(a.length===1)return Ca({inputs:{x:a[0]},backend:n});const l=a.map(m=>m.shape);if(lE(l,r),a[0].dtype==="complex64"){const m=a.map(y=>Mc({inputs:{input:y},backend:n})),g=a.map(y=>Sf({inputs:{input:y},backend:n})),v=If({inputs:m,backend:n,attrs:{axis:r}}),b=If({inputs:g,backend:n,attrs:{axis:r}}),w=ir({inputs:{real:v,imag:b},backend:n});return m.forEach(y=>n.disposeIntermediateTensorInfo(y)),g.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),w}const u=a.map(m=>{const g=tt(m.shape.slice(r));return $s({inputs:{x:m},backend:n,attrs:{shape:[-1,g]}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));i=ma(u.map(m=>m.shape),1);const d=u[0].shape[0]===1,f=HV(c,i,t[0].dtype,d),h=ma(a.map(m=>m.shape),r),p=n.makeTensorInfo(h,t[0].dtype,f);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const UFe={kernelName:By,backendName:"cpu",kernelFunc:If};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=s;At([o,r],"conv2d");const d=dl(l),f=ko(o.shape,r.shape,i,u,a,c,!1,d),h=f.filterHeight,p=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,v=f.padInfo.left,b=f.padInfo.top,w=f.dataFormat==="channelsLast",y=new Do(f.outShape,o.dtype),k=Wt(o.shape),x=Wt(r.shape),C=k[0],S=w?k[1]:k[2],T=w?k[2]:1,A=w?1:k[1],R=y.strides[0],L=w?y.strides[1]:y.strides[2],P=w?y.strides[2]:1,V=w?1:y.strides[1],H=n.data.get(o.dataId).values,F=n.data.get(r.dataId).values,M=y.values;for(let B=0;B<f.batchSize;++B){const Y=B*C,J=B*R;for(let ee=0;ee<f.outHeight;++ee){const te=J+ee*L,re=ee*f.strideHeight-b;for(let $e=0;$e<h;++$e){const se=re+$e*m;if(se<0||se>=f.inHeight)continue;const Q=$e*x[0],ae=Y+se*S;for(let pe=0;pe<f.outWidth;++pe){const ke=te+pe*P,Be=pe*f.strideWidth-v;for(let je=0;je<p;++je){const qe=Be+je*g;if(qe<0||qe>=f.inWidth)continue;const ne=Q+je*x[1],ue=ae+qe*T;let Se=ne;for(let Fe=0;Fe<f.inChannels;++Fe){const Le=H[ue+Fe*A];for(let Ke=0;Ke<f.outChannels;++Ke)M[ke+Ke*V]+=Le*F[Se+Ke];Se+=f.outChannels}}}}}}return n.makeTensorInfo(y.shape,y.dtype,M)}const jFe={kernelName:zy,backendName:"cpu",kernelFunc:MW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=s;At([o,r],"conv2dBackpropFilter");const d=dl(l),f=ko(o.shape,c,i,1,a,u,!1,d),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=f,v=f.dataFormat==="channelsLast",b=new Do(f.filterShape,"float32"),w=f.padInfo.left,y=f.padInfo.top,k=n.data.get(o.dataId).values,x=n.data.get(r.dataId).values,C=new Do(o.shape,o.dtype,k),S=new Do(r.shape,r.dtype,x);for(let T=0;T<m;++T){const A=Math.max(0,Math.ceil((y-T)/h)),R=Math.min(f.outHeight,(f.inHeight+y-T)/h);for(let L=0;L<g;++L){const P=Math.max(0,Math.ceil((w-L)/p)),V=Math.min(f.outWidth,(f.inWidth+w-L)/p);for(let H=0;H<f.inChannels;++H)for(let F=0;F<f.outChannels;++F){let M=0;for(let B=0;B<f.batchSize;++B)for(let Y=A;Y<R;++Y){const J=T+Y*h-y;for(let ee=P;ee<V;++ee){const te=L+ee*p-w;v?M+=C.get(B,J,te,H)*S.get(B,Y,ee,F):M+=C.get(B,H,J,te)*S.get(B,F,Y,ee)}}b.set(M,T,L,H,F)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const KFe={kernelName:AS,backendName:"cpu",kernelFunc:GFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=s;At([o,r],"conv2dBackpropInput");const d=Wt(r.shape),f=Wt(o.shape);let h=dl(u);const p=ko(i,r.shape,a,1,l,c,!1,h),m=new Do(p.inShape,"float32"),g=m.values,v=n.data.get(o.dataId).values,b=n.data.get(r.dataId).values,[w,y,k]=d,{batchSize:x,filterHeight:C,filterWidth:S,inChannels:T,inHeight:A,inWidth:R,outChannels:L,outHeight:P,outWidth:V,strideHeight:H,strideWidth:F}=p;h=p.dataFormat;const M=C-1-p.padInfo.top,B=S-1-p.padInfo.left,Y=h==="channelsLast",J=m.strides[0],ee=Y?m.strides[1]:m.strides[2],te=Y?m.strides[2]:1,re=Y?1:m.strides[1],$e=f[0],se=Y?f[1]:f[2],Q=Y?f[2]:1,ae=Y?1:f[1];for(let pe=0;pe<x;++pe)for(let ke=0;ke<T;++ke)for(let Be=0;Be<A;++Be){const je=Be-M,qe=Math.max(0,Math.ceil(je/H)),ne=Math.min(P,(C+je)/H);for(let ue=0;ue<R;++ue){const Se=ue-B,Fe=Math.max(0,Math.ceil(Se/F)),Le=Math.min(V,(S+Se)/F);let Ke=0;for(let ge=qe;ge<ne;++ge){const be=ge*H-je;for(let Ie=Fe;Ie<Le;++Ie){const ot=Ie*F-Se,ve=$e*pe+se*ge+Q*Ie,Ve=w*(C-1-be)+y*(S-1-ot)+k*ke;for(let ft=0;ft<L;++ft){const K=v[ve+ae*ft],E=b[Ve+ft];Ke+=K*E}}}const ie=J*pe+ee*Be+te*ue+re*ke;g[ie]=Ke}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const YFe={kernelName:Vy,backendName:"cpu",kernelFunc:qFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s;At([o,r],"conv3d");const u=uu(o.shape,r.shape,i,l,a),{filterDepth:c,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=u,v=g.front,b=g.left,w=g.top,y=new Do(u.outShape,o.dtype),k=n.data.get(o.dataId).values,x=n.data.get(r.dataId).values,C=y.values,S=Wt(o.shape),T=Wt(r.shape);for(let A=0;A<u.batchSize;++A){const R=A*S[0],L=A*y.strides[0];for(let P=0;P<u.outDepth;++P){const V=L+P*y.strides[1],H=P*u.strideDepth-v;for(let F=0;F<c;++F){const M=H+F*h;if(M<0||M>=u.inDepth)continue;const B=F*T[0],Y=R+M*S[1];for(let J=0;J<u.outHeight;++J){const ee=V+J*y.strides[2],te=J*u.strideHeight-w;for(let re=0;re<d;++re){const $e=te+re*p;if($e<0||$e>=u.inHeight)continue;const se=B+re*T[1],Q=Y+$e*S[2];for(let ae=0;ae<u.outWidth;++ae){const pe=ee+ae*u.outChannels,ke=ae*u.strideWidth-b;for(let Be=0;Be<f;++Be){const je=ke+Be*m;if(je<0||je>=u.inWidth)continue;const qe=se+Be*T[2],ne=Q+je*u.inChannels;let ue=qe;for(let Se=0;Se<u.inChannels;++Se){const Fe=k[ne+Se];for(let Le=0;Le<u.outChannels;++Le)C[pe+Le]+=Fe*x[ue+Le];ue+=u.outChannels}}}}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const ZFe={kernelName:Wy,backendName:"cpu",kernelFunc:XFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,filterShape:l}=s;At([o,r],"conv3dBackpropFilterV2");const u=Wt(o.shape),c=Wt(r.shape),d=uu(o.shape,l,i,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,b=new Do(d.filterShape,"float32"),w=b.values,[y,k,x,C]=b.strides,S=n.data.get(r.dataId).values,[T,A,R,L]=c,P=n.data.get(o.dataId).values,[V,H,F,M]=u,B=d.padInfo.front,Y=d.padInfo.left,J=d.padInfo.top;for(let ee=0;ee<m;++ee){const te=Math.max(0,Math.ceil((B-ee)/f)),re=Math.min(d.outDepth,(d.inDepth+B-ee)/f),$e=ee*y;for(let se=0;se<g;++se){const Q=Math.max(0,Math.ceil((J-se)/h)),ae=Math.min(d.outHeight,(d.inHeight+J-se)/h),pe=se*k+$e;for(let ke=0;ke<v;++ke){const Be=Math.max(0,Math.ceil((Y-ke)/p)),je=Math.min(d.outWidth,(d.inWidth+Y-ke)/p),qe=ke*x+pe;for(let ne=0;ne<d.inChannels;++ne){const ue=ne*C+qe;for(let Se=0;Se<d.outChannels;++Se){let Fe=0;for(let Le=0;Le<d.batchSize;++Le){const Ke=Le*V,ie=Le*T;for(let ge=te;ge<re;++ge){const Ie=(ee+ge*f-B)*H+Ke,ot=ge*A+ie;for(let ve=Q;ve<ae;++ve){const ft=(se+ve*h-J)*F+Ie,K=ve*R+ot;for(let E=Be;E<je;++E){const G=(ke+E*p-Y)*M+ft,Z=E*L+K;Fe+=P[G+ne]*S[Z+Se]}}}}w[ue+Se]=Fe}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const QFe={kernelName:DS,backendName:"cpu",kernelFunc:JFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e4e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{pad:i,strides:a,inputShape:l}=s;At([o],"conv3dBackpropInputV2");const u=Wt(o.shape),c=Wt(r.shape),d=uu(l,r.shape,a,1,i),f=new Do(d.inShape,"float32"),h=f.values,[p,m,g,v]=f.strides,b=n.data.get(o.dataId).values,[w,y,k,x]=u,C=n.data.get(r.dataId).values,[S,T,A,R]=c,{batchSize:L,filterDepth:P,filterHeight:V,filterWidth:H,inChannels:F,inDepth:M,inHeight:B,inWidth:Y,outChannels:J,outDepth:ee,outHeight:te,outWidth:re,strideDepth:$e,strideHeight:se,strideWidth:Q}=d,ae=P-1-d.padInfo.front,pe=V-1-d.padInfo.top,ke=H-1-d.padInfo.left;for(let Be=0;Be<L;++Be)for(let je=0;je<F;++je)for(let qe=0;qe<M;++qe){const ne=qe-ae,ue=Math.max(0,Math.ceil(ne/$e)),Se=Math.min(ee,(P+ne)/$e);for(let Fe=0;Fe<B;++Fe){const Le=Fe-pe,Ke=Math.max(0,Math.ceil(Le/se)),ie=Math.min(te,(V+Le)/se);for(let ge=0;ge<Y;++ge){const be=ge-ke,Ie=Math.max(0,Math.ceil(be/Q)),ot=Math.min(re,(H+be)/Q);let ve=0;for(let Ve=ue;Ve<Se;++Ve){const ft=Ve*$e-ne;for(let K=Ke;K<ie;++K){const E=K*se-Le;for(let I=Ie;I<ot;++I){const G=I*Q-be,Z=w*Be+y*Ve+k*K+x*I,he=S*(P-1-ft)+T*(V-1-E)+A*(H-1-G)+R*je;for(let Te=0;Te<J;++Te){const bt=b[Z+Te],Lt=C[he+Te];ve+=bt*Lt}}}}h[p*Be+m*qe+g*Fe+v*ge+je]=ve}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const t4e={kernelName:RS,backendName:"cpu",kernelFunc:e4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e=Yn(Lm,e=>Math.cos(e)),s4e={kernelName:Lm,backendName:"cpu",kernelFunc:n4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e=Yn(Bm,e=>Math.cosh(e)),r4e={kernelName:Bm,backendName:"cpu",kernelFunc:o4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4e(e){const{inputs:t,backend:n,attrs:s}=e,{image:o,boxes:r,boxInd:i}=t,{cropSize:a,method:l,extrapolationValue:u}=s,[c,d,f,h]=o.shape,p=r.shape[0],[m,g]=a,v=$n([p,m,g,h],"float32"),b=n.data.get(r.dataId).values,w=n.data.get(i.dataId).values,y=n.data.get(o.dataId).values,k=Wt(o.shape),x=Wt(v.shape);for(let C=0;C<p;C++){const S=C*4,T=b[S],A=b[S+1],R=b[S+2],L=b[S+3],P=w[C];if(P>=c)continue;const V=m>1?(R-T)*(d-1)/(m-1):0,H=g>1?(L-A)*(f-1)/(g-1):0;for(let F=0;F<m;F++){const M=m>1?T*(d-1)+F*V:.5*(T+R)*(d-1);if(M<0||M>d-1){for(let B=0;B<g;B++)for(let Y=0;Y<h;Y++){const J=Y+B*x[2]+F*x[1]+C*x[0];v.values[J]=u}continue}if(l==="bilinear"){const B=Math.floor(M),Y=Math.ceil(M),J=M-B;for(let ee=0;ee<g;ee++){const te=g>1?A*(f-1)+ee*H:.5*(A+L)*(f-1);if(te<0||te>f-1){for(let Q=0;Q<h;Q++){const ae=Q+ee*x[2]+F*x[1]+C*x[0];v.values[ae]=u}continue}const re=Math.floor(te),$e=Math.ceil(te),se=te-re;for(let Q=0;Q<h;Q++){let ae=Q+re*k[2]+B*k[1]+P*k[0];const pe=y[ae];ae=Q+$e*k[2]+B*k[1]+P*k[0];const ke=y[ae];ae=Q+re*k[2]+Y*k[1]+P*k[0];const Be=y[ae];ae=Q+$e*k[2]+Y*k[1]+P*k[0];const je=y[ae],qe=pe+(ke-pe)*se,ne=Be+(je-Be)*se;ae=Q+ee*x[2]+F*x[1]+C*x[0],v.values[ae]=qe+(ne-qe)*J}}}else for(let B=0;B<g;++B){const Y=g>1?A*(f-1)+B*H:.5*(A+L)*(f-1);if(Y<0||Y>f-1){for(let te=0;te<h;te++){const re=te+B*x[2]+F*x[1]+C*x[0];v.values[re]=u}continue}const J=Math.round(Y),ee=Math.round(M);for(let te=0;te<h;te++){const re=te+J*k[2]+ee*k[1]+P*k[0],$e=te+B*x[2]+F*x[1]+C*x[0];v.values[$e]=y[re]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const a4e={kernelName:OS,backendName:"cpu",kernelFunc:i4e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:i,reverse:a}=s;At(o,"cumprod");const l=Es([r],o.shape.length);let u=o;l!=null&&(u=Jo({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=Ms(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=pr(u.dtype,"int32"),f=xS(tt(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(v,b)=>v+p-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=p)for(let b=0;b<p;b++){const w=m(v,b);if(b===0)f[w]=i?1:h[w];else{const y=m(v,b-1);f[w]=i?h[y]*f[y]:h[w]*f[y]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const v=cu(l),b=Jo({inputs:{x:g},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),b}return g}const u4e={kernelName:MS,backendName:"cpu",kernelFunc:l4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:i,reverse:a}=s;At(o,"cumsum");const l=Es([r],o.shape.length);let u=o;l!=null&&(u=Jo({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=Ms(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=pr(u.dtype,"int32"),f=Oo(tt(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(v,b)=>v+p-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=p)for(let b=0;b<p;b++){const w=m(v,b);if(b===0)f[w]=i?0:h[w];else{const y=m(v,b-1);f[w]=i?h[y]+f[y]:h[w]+f[y]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const v=cu(l),b=Jo({inputs:{x:g},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),b}return g}const d4e={kernelName:Hy,backendName:"cpu",kernelFunc:c4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=ZE(l,u,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(r),c=VV(l,u,i,a);return n.makeTensorInfo(c.shape,r.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const h4e={kernelName:Cz,backendName:"cpu",kernelFunc:f4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockSize:r,dataFormat:i}=s;oe(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],d=l*r,f=u*r,h=c/(r*r),p=n.data.get(o.dataId).values,m=new Float32Array(a*d*f*h);let g=0;for(let v=0;v<a;++v)for(let b=0;b<d;++b){const w=Math.floor(b/r),y=b%r;for(let k=0;k<f;++k){const x=Math.floor(k/r),C=k%r,S=(y*r+C)*h;for(let T=0;T<h;++T){const R=T+S+c*(x+u*(w+l*v));m[g++]=p[R]}}}return n.makeTensorInfo([a,d,f,h],o.dtype,m)}const m4e={kernelName:PS,backendName:"cpu",kernelFunc:p4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=s;At([o,r],"depthwiseConv2DNative");const c=Wt(o.shape),d=Wt(r.shape);let f=l;f==null&&(f=[1,1]),oe(Po(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const h=ko(o.shape,r.shape,i,f,a,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:b}=h,w=b.left,y=b.top,k=h.outChannels/h.inChannels,x=new Do(h.outShape,o.dtype),C=n.data.get(o.dataId).values,S=n.data.get(r.dataId).values,T=x.values;for(let A=0;A<h.batchSize;++A){const R=A*c[0],L=A*x.strides[0];for(let P=0;P<h.outHeight;++P){const V=L+P*x.strides[1],H=P*h.strideHeight-y;for(let F=0;F<p;++F){const M=H+F*g;if(M<0||M>=h.inHeight)continue;const B=F*d[0],Y=R+M*c[1];for(let J=0;J<h.outWidth;++J){const ee=V+J*x.strides[2],te=J*h.strideWidth-w;for(let re=0;re<m;++re){const $e=te+re*v;if($e<0||$e>=h.inWidth)continue;const se=B+re*d[1],Q=Y+$e*h.inChannels;let ae=ee,pe=se;for(let ke=0;ke<h.inChannels;++ke){const Be=C[Q+ke];for(let je=0;je<k;++je)T[ae+je]+=Be*S[pe+je];ae+=k,pe+=k}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const g4e={kernelName:Uy,backendName:"cpu",kernelFunc:OW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=s;At([o,r],"depthwiseConv2dNativeBackpropFilter");const d=ko(o.shape,c,i,a,l,u,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:m}=d,g=new Do(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,w=d.outChannels/d.inChannels,y=n.data.get(o.dataId).values,k=new Do(o.shape,o.dtype,y),x=n.data.get(r.dataId).values,C=new Do(r.shape,r.dtype,x);for(let S=0;S<p;++S){const T=Math.max(0,Math.ceil((b-S)/f)),A=Math.min(d.outHeight,(d.inHeight+b-S)/f);for(let R=0;R<m;++R){const L=Math.max(0,Math.ceil((v-R)/h)),P=Math.min(d.outWidth,(d.inWidth+v-R)/h);for(let V=0;V<d.outChannels;++V){const H=Math.trunc(V/w),F=V%w;let M=0;for(let B=0;B<d.batchSize;++B)for(let Y=T;Y<A;++Y){const J=S+Y*f-b;for(let ee=L;ee<P;++ee){const te=R+ee*h-v;M+=k.get(B,J,te,H)*C.get(B,Y,ee,V)}}g.set(M,S,R,H,F)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const b4e={kernelName:FS,backendName:"cpu",kernelFunc:v4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y4e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=s;At([o,r],"depthwiseConv2DNativeBackpropInput");const d=Wt(o.shape),f=Wt(r.shape),h=ko(c,r.shape,i,a,l,u,!0),p=new Do(h.inShape,"float32"),m=p.values,[g,v,b]=p.strides,w=n.data.get(o.dataId).values,[y,k,x]=d,C=n.data.get(r.dataId).values,[S,T,A]=f,{batchSize:R,filterHeight:L,filterWidth:P,inChannels:V,inHeight:H,inWidth:F,outChannels:M,outHeight:B,outWidth:Y,strideHeight:J,strideWidth:ee}=h,te=L-1-h.padInfo.top,re=P-1-h.padInfo.left,$e=M/V;for(let se=0;se<R;++se)for(let Q=0;Q<V;++Q)for(let ae=0;ae<H;++ae){const pe=ae-te,ke=Math.max(0,Math.ceil(pe/J)),Be=Math.min(B,(L+pe)/J);for(let je=0;je<F;++je){const qe=je-re,ne=Math.max(0,Math.ceil(qe/ee)),ue=Math.min(Y,(P+qe)/ee);let Se=0;for(let Fe=ke;Fe<Be;++Fe){const Le=Fe*J-pe;for(let Ke=ne;Ke<ue;++Ke){const ie=Ke*ee-qe,ge=y*se+k*Fe+x*Ke,be=S*(L-1-Le)+T*(P-1-ie)+A*Q;for(let Ie=0;Ie<$e;++Ie){const ot=Q*$e+Ie,ve=w[ge+ot],Ve=C[be+Ie];Se+=ve*Ve}}}m[g*se+v*ae+b*je+Q]=Se}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const w4e={kernelName:LS,backendName:"cpu",kernelFunc:y4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=tt(s.shape),r=n.data.get(s.dataId).values,i=$n([o,o],s.dtype),a=i.values;for(let u=0;u<r.length;u++)a[u*o+u]=r[u];const l=[...s.shape,...s.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const x4e={kernelName:$z,backendName:"cpu",kernelFunc:k4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e={kernelName:jy,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o}=e,{strides:r,pad:i,dilations:a}=n,l=t,u=l.data.get(s.dataId).values,c=s.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:v,outWidth:b,padInfo:w,strideHeight:y,strideWidth:k,filterHeight:x,filterWidth:C,dilationHeight:S,dilationWidth:T,outShape:A}=$g(s.shape,o.shape,r,i,"NHWC",a),R=tt(A),L=A.length,P=Xo(s.dtype,R);for(let H=0;H<h;++H)for(let F=0;F<v;++F){const M=F*y-w.top;for(let B=0;B<b;++B){const Y=B*k-w.left;for(let J=0;J<g;++J){let ee=Number.MIN_SAFE_INTEGER;for(let re=0;re<x;++re){const $e=M+re*S;if($e>=0&&$e<p)for(let se=0;se<C;++se){const Q=Y+se*T;if(Q>=0&&Q<m){const ae=ha([H,$e,Q,J],c,Wt(s.shape)),pe=ha([re,se,J],f,Wt(o.shape)),ke=u[ae]+d[pe];ke>ee&&(ee=ke)}}}const te=ha([H,F,B,J],L,Wt(A));P[te]=ee}}}return{dataId:l.write(Yc(P,s.dtype),A,s.dtype),shape:A,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e={kernelName:Lx,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o,dy:r}=e,{strides:i,pad:a,dilations:l}=n,u=t,c=Bi(s.shape,u.data.get(s.dataId).values),d=Bi(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:w,strideWidth:y,filterHeight:k,filterWidth:x,dilationHeight:C,dilationWidth:S,outShape:T}=$g(s.shape,o.shape,i,a,"NHWC",l);oe(r.rank===T.length,()=>`Error in ${Lx}, dy must have the same rank as output ${T.length}, but got ${r.rank}`);const A=Bi(T,u.data.get(r.dataId).values),R=vz(o.shape,o.dtype);for(let P=0;P<f;++P)for(let V=0;V<g;++V){const H=V*w-b.top;for(let F=0;F<v;++F){const M=F*y-b.left;for(let B=0;B<m;++B){let Y=Number.MIN_SAFE_INTEGER,J=0,ee=0;for(let te=0;te<k;++te){const re=H+te*C;if(re>=0&&re<h)for(let $e=0;$e<x;++$e){const se=M+$e*S;if(se>=0&&se<p){const Q=c[P][re][se][B]+d[te][$e][B];Q>Y&&(Y=Q,J=te,ee=$e)}}}R[J][ee][B]+=A[P][V][F][B]}}}return{dataId:u.write(Yc(R,s.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e={kernelName:Fx,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o,dy:r}=e,{strides:i,pad:a,dilations:l}=n,u=t,c=Bi(s.shape,u.data.get(s.dataId).values),d=Bi(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:w,strideWidth:y,filterHeight:k,filterWidth:x,dilationHeight:C,dilationWidth:S,outShape:T}=$g(s.shape,o.shape,i,a,"NHWC",l);oe(r.rank===T.length,()=>`Error in ${Fx}, dy must have the same rank as output ${T.length}, but got ${r.rank}`);const A=Bi(T,u.data.get(r.dataId).values),R=vz(s.shape,s.dtype);for(let P=0;P<f;++P)for(let V=0;V<g;++V){const H=V*w-b.top;for(let F=0;F<v;++F){const M=F*y-b.left;for(let B=0;B<m;++B){let Y=Number.MIN_SAFE_INTEGER,J=H<0?0:H,ee=M<0?0:M;for(let te=0;te<k;++te){const re=H+te*C;if(re>=0&&re<h)for(let $e=0;$e<x;++$e){const se=M+$e*S;if(se>=0&&se<p){const Q=c[P][re][se][B]+d[te][$e][B];Q>Y&&(Y=Q,J=re,ee=se)}}}R[P][J][ee][B]+=A[P][V][F][B]}}}return{dataId:u.write(Yc(R,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vg(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;At(o,"sum");let a;o.dtype==="bool"?a=tu({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=Ca({inputs:{x:o},backend:n});const l=a.shape.length,u=yn(r,a.shape),c=Es(u,l);let d=u,f=a;c!=null&&(f=Jo({inputs:{x:a},backend:n,attrs:{perm:c}}),d=Ms(d.length,l)),xo("sum",d,f.shape.length);const[h,p]=lo(f.shape,d),m=pr(f.dtype,"int32");let g=_b(n,h,m);const v=tt(p),b=n.data.get(g.dataId).values,w=n.data.get(f.dataId).values;for(let y=0;y<b.length;++y){const k=y*v;let x=0;for(let C=0;C<v;++C)x+=w[k+C];b[y]=x}if(i){const y=zs(g.shape,u),k=g;g=$s({inputs:{x:g},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(k)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),g}const I4e={kernelName:C1,backendName:"cpu",kernelFunc:Vg};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E4e(e){const{inputs:t,backend:n,attrs:s}=e,{equation:o}=s,r=t,{allDims:i,summedDims:a,idDims:l}=wE(o,r.length);xE(i.length,l,r);const{path:u,steps:c}=CE(a,l),d=c.length;let f=null,h=i.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:v,expandDims:b}=kE(h,l[g]);let w;$E(v)?w=r[g]:(w=Jo({inputs:{x:r[g]},backend:n,attrs:{perm:v}}),p.push(w));const y=w.shape.slice();for(let k=0;k<b.length;++k)y.splice(b[k],0,1);zn(w.shape,y)||(w=$s({inputs:{x:w},backend:n,attrs:{shape:y}}),p.push(w)),f===null?f=w:(f=sw({inputs:{a:w,b:f},backend:n}),p.push(f))}m<d-1&&(u[m]>=0&&(f=Vg({inputs:{x:f},backend:n,attrs:{axis:u[m]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const T4e={kernelName:Sz,backendName:"cpu",kernelFunc:E4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _4e(e){const{inputs:t,backend:n}=e,{dy:s,y:o}=t;At([s,o],"eluGrad");const r=new Float32Array(tt(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(s.dataId).values;for(let l=0;l<i.length;++l){const u=i[l];u>=1?r[l]=a[l]:r[l]=a[l]*(u+1)}return n.makeTensorInfo(o.shape,"float32",r)}const N4e={kernelName:BS,backendName:"cpu",kernelFunc:_4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e=hE,D4e=pE,R4e=mE,M4e=gE,O4e=vE,P4e=bE,F4e=Yn(Wm,e=>{const t=Math.sign(e),n=Math.abs(e),s=1/(1+A4e*n);return t*(1-((((P4e*s+O4e)*s+M4e)*s+R4e)*s+D4e)*s*Math.exp(-n*n))}),L4e={kernelName:Wm,backendName:"cpu",kernelFunc:F4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nb(e){const{inputs:t,backend:n,attrs:s}=e,{input:o}=t,{dim:r}=s,i=o.shape.length,a=o.shape.slice();let l=r;return r<0&&(oe(-(i+1)<=r,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+r+1),a.splice(l,0,1),$s({inputs:{x:o},backend:n,attrs:{shape:a}})}const B4e={kernelName:Ky,backendName:"cpu",kernelFunc:Nb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e=Us((e,t)=>e/t),oT=uo(zm,z4e),mC={kernelName:zm,backendName:"cpu",kernelFunc:oT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PW(e,t,n){const s=e.shape,o=s[0],r=s[1],i=n.data.get(e.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[o,r],c=tt(u),d=yo("float32",c),f=yo("float32",c);for(let g=0;g<o;g++){const v=Oc({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,r]}}),b=Oc({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,r]}}),w=ir({inputs:{real:v,imag:b},backend:n}),{real:y,imag:k}=V4e(w,t,n),x=tl(y,k);for(let C=0;C<r;C++){const S=yE(x,C);d[g*r+C]=S.real,f[g*r+C]=S.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w)}const h=n.makeTensorInfo(u,"float32",d),p=n.makeTensorInfo(u,"float32",f),m=ir({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function V4e(e,t,n){const s=tt(e.shape),o=n.data.get(e.dataId),r=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(W4e(s)){const a=gC(r,i,s,t,n),l=[e.shape[0],e.shape[1]];if(t){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",lu(s,"float32")),f=Ca({inputs:{x:d},backend:n}),h=mC.kernelFunc({inputs:{a:u,b:d},backend:n}),p=mC.kernelFunc({inputs:{a:c,b:f},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=tl(r,i),l=H4e(a,s,t);return r8(l)}}function W4e(e){return(e&e-1)===0}function gC(e,t,n,s,o){if(n===1)return{real:e,imag:t};const r=tl(e,t),i=n/2,a=i8(r),l=a.real,u=a.imag,c=[l.length],d=o.makeTensorInfo(c,"float32",l),f=o.makeTensorInfo(c,"float32",u),h=ir({inputs:{real:d,imag:f},backend:o}),p=a8(r),m=p.real,g=p.imag,v=[m.length],b=o.makeTensorInfo(v,"float32",m),w=o.makeTensorInfo(v,"float32",g),y=ir({inputs:{real:b,imag:w},backend:o}),k=gC(l,u,i,s,o),x=k.real,C=k.imag,S=[x.length],T=o.makeTensorInfo(S,"float32",x),A=o.makeTensorInfo(S,"float32",C),R=ir({inputs:{real:T,imag:A},backend:o}),L=gC(m,g,i,s,o),P=L.real,V=L.imag,H=[P.length],F=o.makeTensorInfo(H,"float32",P),M=o.makeTensorInfo(H,"float32",V),B=ir({inputs:{real:F,imag:M},backend:o}),Y=u8(n,s),J=[Y.real.length],ee=o.makeTensorInfo(J,"float32",Y.real),te=o.makeTensorInfo(J,"float32",Y.imag),re=ir({inputs:{real:ee,imag:te},backend:o}),$e=sw({inputs:{a:re,b:B},backend:o}),se=zg({inputs:{a:R,b:$e},backend:o}),Q=tT({inputs:{a:R,b:$e},backend:o}),ae=Mc({inputs:{input:se},backend:o}),pe=Mc({inputs:{input:Q},backend:o}),ke=Sf({inputs:{input:se},backend:o}),Be=Sf({inputs:{input:Q},backend:o}),je=If({inputs:[ae,pe],backend:o,attrs:{axis:0}}),qe=If({inputs:[ke,Be],backend:o,attrs:{axis:0}}),ne=o.data.get(je.dataId).values,ue=o.data.get(qe.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(A),o.disposeIntermediateTensorInfo(R),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(M),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(ee),o.disposeIntermediateTensorInfo(te),o.disposeIntermediateTensorInfo(re),o.disposeIntermediateTensorInfo($e),o.disposeIntermediateTensorInfo(se),o.disposeIntermediateTensorInfo(Q),o.disposeIntermediateTensorInfo(ae),o.disposeIntermediateTensorInfo(ke),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(Be),o.disposeIntermediateTensorInfo(je),o.disposeIntermediateTensorInfo(qe),{real:ne,imag:ue}}function H4e(e,t,n){const s=new Float32Array(t*2);for(let o=0;o<t;o++){let r=0,i=0;for(let a=0;a<t;a++){const l=c8(o*a,t,n),u=yE(e,a);r+=u.real*l.real-u.imag*l.imag,i+=u.real*l.imag+u.imag*l.real}n&&(r/=t,i/=t),l8(s,r,i,o)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U4e(e){const{inputs:t,backend:n}=e,{input:s}=t,o=tt(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=$s({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),l=PW(a,!1,n),u=$s({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const j4e={kernelName:zS,backendName:"cpu",kernelFunc:U4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rT(e){const{backend:t,attrs:n}=e,{shape:s,value:o,dtype:r}=n,i=r||Im(o),a=Xo(i,tt(s));return K4e(a,o,i),t.makeTensorInfo(s,i,a)}const G4e={kernelName:VS,backendName:"cpu",kernelFunc:rT};function K4e(e,t,n){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e={kernelName:WS,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,o=n,r=yo(s.dtype,tt(s.shape)),[i,a,l,u]=s.shape,c=o.data.get(s.dataId).values;for(let f=0;f<i;f++){const h=f*l*a*u;for(let p=0;p<a;p++){const m=p*(l*u);for(let g=0;g<l;g++){const v=g*u;for(let b=0;b<u;b++){const w=Math.round(l-g-1),y=h+m+v+b;let k=c[y];if(w>=0&&w<l){const x=w*u,C=h+m+x+b;k=c[C]}r[y]=k}}}}return{dataId:o.write(r,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e=Us((e,t)=>Math.floor(e/t)),X4e=uo(Gm,Y4e,null,"int32"),Z4e={kernelName:Gm,backendName:"cpu",kernelFunc:X4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s;let m=MW({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const g=m;m=zg({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=nT(n,m,h,a,p),n.disposeIntermediateTensorInfo(g)}return m}const Q4e={kernelName:mb,backendName:"cpu",kernelFunc:J4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eLe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s;let m=OW({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const g=m;m=zg({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=nT(n,m,h,a,p),n.disposeIntermediateTensorInfo(g)}return m}const tLe={kernelName:Az,backendName:"cpu",kernelFunc:eLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nLe(e){const{inputs:t,backend:n}=e,{params:s,indices:o}=t,r=tt(s.shape),i=o.shape,a=i[i.length-1],[l,u,c,d]=wI(s,o);if(u===0)return n.makeTensorInfo(l,s.dtype,[]);const f=n.data.get(o.dataId).values,h=n.bufferSync(s),p=XV(f,h,s.dtype,u,a,c,d,s.shape,r);return n.makeTensorInfo(l,s.dtype,p.values)}const sLe={kernelName:Iz,backendName:"cpu",kernelFunc:nLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,indices:r}=t,{axis:i,batchDims:a}=s;At([o,r],"gatherV2");const l=yn(i,o.shape)[0],u=n.data.get(r.dataId).values,c=o.shape[l];for(let y=0;y<u.length;++y){const k=u[y];oe(k<=c-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const f=tt(r.shape),h=IE(o,r,l,d),p=$s({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=$s({inputs:{x:r},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),g=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],v=n.bufferSync(m),b=n.bufferSync(p),w=ZV(b,v,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,w.dtype,w.values)}const rLe={kernelName:Yy,backendName:"cpu",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(e){const{inputs:t,backend:n}=e,{input:s}=t,o=tt(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=$s({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),l=PW(a,!0,n),u=$s({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const aLe={kernelName:HS,backendName:"cpu",kernelFunc:iLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lLe=Yn(Ym,e=>Number.isFinite(e)?1:0,"bool"),uLe={kernelName:Ym,backendName:"cpu",kernelFunc:lLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cLe=Yn(Xm,e=>Math.abs(e)===1/0?1:0,"bool"),dLe={kernelName:Xm,backendName:"cpu",kernelFunc:cLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fLe=Yn(Zm,e=>Number.isNaN(e)?1:0,"bool"),hLe={kernelName:Zm,backendName:"cpu",kernelFunc:fLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(e){const{backend:t,attrs:n}=e,{start:s,stop:o,num:r}=n,i=nW(s,o,r);return t.makeTensorInfo([i.length],"float32",i)}const mLe={kernelName:jS,backendName:"cpu",kernelFunc:pLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLe=Yn(Qm,e=>Math.log1p(e)),vLe={kernelName:Qm,backendName:"cpu",kernelFunc:gLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bLe=Us((e,t)=>e&&t),yLe=uo(e1,bLe,null,"bool"),wLe={kernelName:e1,backendName:"cpu",kernelFunc:yLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kLe=Yn(t1,e=>e?0:1,"bool"),xLe={kernelName:t1,backendName:"cpu",kernelFunc:kLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CLe=Us((e,t)=>e||t),$Le=uo(n1,CLe,null,"bool"),SLe={kernelName:n1,backendName:"cpu",kernelFunc:$Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{depthRadius:r,bias:i,alpha:a,beta:l}=s;At(o,"LRN");const u=o.shape[3],c=u-1,d=n.data.get(o.dataId).values,f=tt(o.shape),h=new Float32Array(f);function p(m){const g=m%u;let v=m-g+Math.max(0,g-r);const b=m-g+Math.min(g+r,c);let w=0;for(;v<=b;v++){const y=d[v];w+=y*y}return w}for(let m=0;m<f;m++){const g=p(m),v=d[m]*Math.pow(i+a*g,-l);h[m]=v}return n.makeTensorInfo(o.shape,o.dtype,h)}const ELe={kernelName:s1,backendName:"cpu",kernelFunc:ILe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,y:r,dy:i}=t,{depthRadius:a,bias:l,alpha:u,beta:c}=s;At(i,"LRNGrad");const d=tt(i.shape),f=i.shape[3],h=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(r.dataId).values,g=new Float32Array(d),v=d;for(let b=0;b<v;b++){const w=b%f,y=b-w+Math.max(0,w-a),k=b-w+Math.min(f,w+a+1);let x=0;for(let C=y;C<k;C++)x+=Math.pow(p[C],2);x=u*x+l;for(let C=y;C<k;C++){let S=-2*u*c*p[C]*m[b]/x;b===C&&(S+=Math.pow(x,-c)),S*=h[b],g[C]+=S}}return n.makeTensorInfo(i.shape,o.dtype,g)}const _Le={kernelName:GS,backendName:"cpu",kernelFunc:TLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reductionIndices:r,keepDims:i}=s,a=n;let l=o.shape;const u=l.length,c=yn(r,l);let d=c;const f=Es(d,u);let h=a.data.get(o.dataId).values;if(f!=null){const y=new Array(u);for(let k=0;k<y.length;k++)y[k]=l[f[k]];h=QE(h,l,o.dtype,f,y),d=Ms(d.length,u),l=y}At(o,"max"),xo("max",d,u);const[p,m]=lo(l,d),g=tt(m),v=oW(h,g,p,o.dtype),b=a.write(v,p,o.dtype);let w=p;return i&&(w=zs(p,c)),{dataId:b,shape:w,dtype:o.dtype}}const NLe={kernelName:o1,backendName:"cpu",kernelFunc:FW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;At(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;oe(Po(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ki(o.shape,r,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&zn(c.inShape,c.outShape))d=Ca({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Wt(o.shape),p=sT(f,o.shape,o.dtype,h,c,"max");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const DLe={kernelName:r1,backendName:"cpu",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RLe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s;At(o,"maxPool3d");const c=cl(o.shape,r,i,1,a,l,u),d=n.data.get(o.dataId).values,f=RW(d,o.shape,o.dtype,Wt(o.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const MLe={kernelName:i1,backendName:"cpu",kernelFunc:RLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OLe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=s;At([o,r],"maxPool3DGrad");const c=cl(r.shape,i,a,1,l,u),d=n.bufferSync(r),f=xFe(d,c),h=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,w=c.effectiveFilterDepth,y=c.effectiveFilterHeight,k=c.effectiveFilterWidth,x=w-1-c.padInfo.front,C=k-1-c.padInfo.left,S=y-1-c.padInfo.top,T=$n(r.shape,"float32"),A=n.bufferSync(o);for(let R=0;R<c.batchSize;++R)for(let L=0;L<c.inChannels;++L)for(let P=0;P<c.inDepth;++P)for(let V=0;V<c.inHeight;++V)for(let H=0;H<c.inWidth;++H){const F=P-x,M=V-S,B=H-C;let Y=0;for(let J=0;J<w;J+=g){const ee=(F+J)/h;if(!(ee<0||ee>=c.outDepth||Math.floor(ee)!==ee))for(let te=0;te<y;te+=v){const re=(M+te)/p;if(!(re<0||re>=c.outHeight||Math.floor(re)!==re))for(let $e=0;$e<k;$e+=b){const se=(B+$e)/m;if(se<0||se>=c.outWidth||Math.floor(se)!==se)continue;const Q=w*y*k-1-f.get(R,ee,re,se,L),ae=J*y*k+te*k+$e,pe=Q===ae?1:0;if(pe===0)continue;Y+=A.get(R,ee,re,se,L)*pe}}}T.set(Y,R,P,V,H,L)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const PLe={kernelName:qS,backendName:"cpu",kernelFunc:OLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FLe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r,output:i}=t,a=r;At([r,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,f=ki(a.shape,l,u,1,c,d),h=n.data.get(a.dataId).values,p=$n(f.outShape,a.dtype,DW(h,a.shape,a.dtype,f).values),m=f.strideHeight,g=f.strideWidth,v=f.dilationHeight,b=f.dilationWidth,w=f.effectiveFilterHeight,y=f.effectiveFilterWidth,k=y-1-f.padInfo.left,x=w-1-f.padInfo.top,C=$n(a.shape,"float32"),S=n.data.get(o.dataId).values,T=$n(o.shape,"float32",S);for(let A=0;A<f.batchSize;++A)for(let R=0;R<f.inChannels;++R)for(let L=0;L<f.inHeight;++L)for(let P=0;P<f.inWidth;++P){const V=L-x,H=P-k;let F=0;for(let M=0;M<w;M+=v){const B=(V+M)/m;if(!(B<0||B>=f.outHeight||Math.floor(B)!==B))for(let Y=0;Y<y;Y+=b){const J=(H+Y)/g;if(J<0||J>=f.outWidth||Math.floor(J)!==J)continue;const ee=w*y-1-p.get(A,B,J,R),te=M*y+Y,re=ee===te?1:0;if(re===0)continue;F+=T.get(A,B,J,R)*re}}C.set(F,A,L,P,R)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const LLe={kernelName:KS,backendName:"cpu",kernelFunc:FLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(e,t,n,s,o){const r=Wt(t),i=sT(e,t,n,r,o,"max"),a=DW(e,t,n,o,!0,s);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zLe={kernelName:Ez,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=t,l=n;At(s,"MaxPoolWithArgmax");const u=l.data.get(s.dataId).values,c=ki(s.shape,o,r,[1,1],i),[d,f]=BLe(u,s.shape,s.dtype,a,c),h=l.write(d,c.outShape,s.dtype),p=l.write(f,c.outShape,s.dtype);return[{dataId:h,shape:c.outShape,dtype:s.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=yn(r,o.shape),u=lo(o.shape,a)[1],c=tt(u),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(f);const h=tu({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=oT({inputs:{a:h,b:f},backend:n});d.push(p);const m=Vg({inputs:{x:p},backend:n,attrs:{axis:r,keepDims:i}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const WLe={kernelName:a1,backendName:"cpu",kernelFunc:VLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;At(o,"min");const a=yn(r,o.shape);let l=a;const u=Es(l,o.shape.length);let c=o;u!=null&&(c=Jo({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Ms(l.length,o.shape.length)),xo("min",l,c.shape.length);const[d,f]=lo(c.shape,l),h=tt(f),p=Oo(tt(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let w=m[b];for(let y=0;y<h;++y){const k=m[b+y];(Number.isNaN(k)||k<w)&&(w=k)}p[v]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const v=zs(d,a),b=$s({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const ULe={kernelName:l1,backendName:"cpu",kernelFunc:HLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jLe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,mode:i}=s;At(o,"mirrorPad");const a=r.map((w,y)=>w[0]+o.shape[y]+w[1]),l=r.map(w=>w[0]),u=r.map((w,y)=>w[0]+o.shape[y]),c=i==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,h=Wt(o.shape),p=tt(a),m=a.length,g=Wt(a),v=yo(o.dtype,p);for(let w=0;w<p;w++){let y=Em(w,m,g);for(let x=0;x<m;x++)y[x]<l[x]?y[x]=l[x]*2-y[x]-c:y[x]>=u[x]&&(y[x]=(u[x]-1)*2-y[x]+c);y=y.map((x,C)=>x-l[C]);const k=ha(y,f,h);v[w]=d[k]}return{dataId:n.write(v,a,o.dtype),shape:a,dtype:o.dtype}}const GLe={kernelName:u1,backendName:"cpu",kernelFunc:jLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KLe=Us((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),qLe=uo(ng,KLe),YLe={kernelName:ng,backendName:"cpu",kernelFunc:qLe};var LW={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(ss,e,!1)})(LW);var BW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(ss,e,!1)})(BW);var zW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(ss,e,!1)})(zW);var VW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(ss,e,!1)})(VW);var WW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,m,g,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=v[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=g,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(ss,e,!1)})(WW);var HW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(ss,e,!1)})(HW);var UW={exports:{}};(function(e){(function(t,n){var s=this,o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,k,x){var C=[];k=k==!0?{entropy:!0}:k||{};var S=v(g(k.entropy?[y,w(t)]:y==null?b():y,3),C),T=new p(C),A=function(){for(var R=T.g(r),L=l,P=0;R<u;)R=(R+P)*o,L*=o,P=T.g(1);for(;R>=c;)R/=2,L/=2,P>>>=1;return(R+P)/L};return A.int32=function(){return T.g(4)|0},A.quick=function(){return T.g(4)/4294967296},A.double=A,v(w(T.S),t),(k.pass||x||function(R,L,P,V){return V&&(V.S&&m(V,T),R.state=function(){return m(T,{})}),P?(n[a]=R,L):R})(A,S,"global"in k?k.global:this==n,k.state)}n["seed"+a]=h;function p(y){var k,x=y.length,C=this,S=0,T=C.i=C.j=0,A=C.S=[];for(x||(y=[x++]);S<o;)A[S]=S++;for(S=0;S<o;S++)A[S]=A[T=d&T+y[S%x]+(k=A[S])],A[T]=k;(C.g=function(R){for(var L,P=0,V=C.i,H=C.j,F=C.S;R--;)L=F[V=d&V+1],P=P*o+F[d&(F[V]=F[H=d&H+L])+(F[H]=L)];return C.i=V,C.j=H,P})(o)}function m(y,k){return k.i=y.i,k.j=y.j,k.S=y.S.slice(),k}function g(y,k){var x=[],C=typeof y,S;if(k&&C=="object")for(S in y)try{x.push(g(y[S],k-1))}catch{}return x.length?x:C=="string"?y:y+"\0"}function v(y,k){for(var x=y+"",C,S=0;S<x.length;)k[d&S]=d&(C^=k[d&S]*19)+x.charCodeAt(S++);return w(k)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),w(y)}catch{var k=s.navigator,x=k&&k.plugins;return[+new Date,s,x,s.screen,w(t)]}}function w(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(UW);var XLe=LW.exports,ZLe=BW.exports,JLe=zW.exports,QLe=VW.exports,eBe=WW.exports,tBe=HW.exports,Qc=UW.exports;Qc.alea=XLe;Qc.xor128=ZLe;Qc.xorwow=JLe;Qc.xorshift7=QLe;Qc.xor4096=eBe;Qc.tychei=tBe;var nBe=Qc;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jW(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{dim:r}=s,i=o.shape.length;let a=r;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=yn([a],o.shape),u=FW({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=zs(u.shape,l),d=$s({inputs:{x:u},backend:n,attrs:{shape:c}}),f=tT({inputs:{a:o,b:d},backend:n}),h=KV({inputs:{x:f},backend:n}),p=Vg({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=$s({inputs:{x:p},backend:n,attrs:{shape:c}}),g=oT({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const sBe={kernelName:I1,backendName:"cpu",kernelFunc:jW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oBe(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{numSamples:r,seed:i,normalized:a}=s;At(o,"multinomial");const l=a?o:jW({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,f=[u,r],h=Oo(tt(f),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=d[m];for(let w=1;w<g.length;++w)g[w]=g[w-1]+d[m+w];const v=nBe.alea(i.toString()),b=p*r;for(let w=0;w<r;++w){const y=v();h[b+w]=g.length;for(let k=0;k<g.length;k++)if(y<g[k]){h[b+w]=k;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const rBe={kernelName:Tz,backendName:"cpu",kernelFunc:oBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iBe=JI;function aBe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s;At(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,{selectedIndices:d}=iBe(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const lBe={kernelName:YS,backendName:"cpu",kernelFunc:aBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uBe=QI;function cBe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s;At(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,{selectedIndices:f,validOutputs:h}=uBe(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const dBe={kernelName:XS,backendName:"cpu",kernelFunc:cBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fBe=eE;function hBe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s;At(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,f=i,h=a,p=l,m=u,{selectedIndices:g,selectedScores:v}=fBe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const pBe={kernelName:ZS,backendName:"cpu",kernelFunc:hBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mBe(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o}=t,{depth:r,onValue:i,offValue:a}=s;At(o,"oneHot");const l=tt(o.shape),u=new Float32Array(l*r);u.fill(a);const c=n.data.get(o.dataId).values;for(let d=0;d<l;++d)c[d]>=0&&c[d]<r&&(u[d*r+c[d]]=i);return n.makeTensorInfo([...o.shape,r],"int32",u)}const gBe={kernelName:h1,backendName:"cpu",kernelFunc:mBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ab(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const o=Mc({inputs:{input:s},backend:n}),r=Ab({inputs:{x:o},backend:n}),i=Sf({inputs:{input:s},backend:n}),a=Ab({inputs:{x:i},backend:n}),l=ir({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return rT({backend:n,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const vBe={kernelName:N1,backendName:"cpu",kernelFunc:Ab};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GW(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const o=Mc({inputs:{input:s},backend:n}),r=GW({inputs:{x:o},backend:n}),i=Sf({inputs:{input:s},backend:n}),a=Ab({inputs:{x:i},backend:n}),l=ir({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return rT({backend:n,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const bBe={kernelName:f1,backendName:"cpu",kernelFunc:GW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KW(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s;if(t.length===1)return Nb({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const r=t[0].shape,i=t[0].dtype;t.forEach(c=>{wi(r,c.shape,"All tensors passed to stack must have matching shapes"),oe(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(c=>{const d=Nb({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=If({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const yBe={kernelName:p1,backendName:"cpu",kernelFunc:KW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wBe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,constantValue:i}=s;At(o,"pad");const a=r.map((b,w)=>b[0]+o.shape[w]+b[1]),l=r.map(b=>b[0]),u=n.data.get(o.dataId).values,c=tt(o.shape),d=o.shape.length,f=Wt(o.shape),h=tt(a),p=a.length,m=Wt(a),g=yo(o.dtype,h);i!==0&&g.fill(i);for(let b=0;b<c;b++){const y=Em(b,d,f).map((x,C)=>x+l[C]),k=ha(y,p,m);g[k]=u[b]}return{dataId:n.write(g,a,o.dtype),shape:a,dtype:o.dtype}}const qW={kernelName:m1,backendName:"cpu",kernelFunc:wBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kBe=Us((e,t)=>Math.pow(e,t)),xBe=uo(og,kBe),CBe={kernelName:og,backendName:"cpu",kernelFunc:xBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Be(e){const{backend:t,attrs:n}=e,{start:s,stop:o,dtype:r,step:i}=n,a=cW(s,o,i,r);return t.makeTensorInfo([a.length],r,a)}const SBe={kernelName:QS,backendName:"cpu",kernelFunc:$Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IBe=Yn(rg,e=>1/e),EBe={kernelName:rg,backendName:"cpu",kernelFunc:IBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s;At(o,"resizeBilinear");const l=Wt(o.shape),[u,c]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(tt([d,u,c,p])),v=[r&&u>1?f-1:f,r&&c>1?h-1:h],b=[r&&u>1?u-1:u,r&&c>1?c-1:c];let w=0;const y=v[0]/b[0],k=v[1]/b[1];for(let x=0;x<d;x++)for(let C=0;C<u;C++){let S;i?S=y*(C+.5)-.5:S=y*C;const T=Math.max(0,Math.floor(S)),A=S-T,R=Math.min(f-1,Math.ceil(S)),L=x*l[0]+T*l[1],P=x*l[0]+R*l[1];for(let V=0;V<c;V++){let H;i?H=k*(V+.5)-.5:H=k*V;const F=Math.max(0,Math.floor(H)),M=H-F,B=Math.min(h-1,Math.ceil(H)),Y=L+F*l[2],J=P+F*l[2],ee=L+B*l[2],te=P+B*l[2];for(let re=0;re<p;re++){const $e=m[Y+re],se=m[J+re],Q=m[ee+re],ae=m[te+re],pe=$e+(Q-$e)*M,ke=se+(ae-se)*M,Be=pe+(ke-pe)*A;g[w++]=Be}}}return n.makeTensorInfo([d,u,c,p],"float32",g)}const _Be={kernelName:y1,backendName:"cpu",kernelFunc:TBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NBe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s;At([r,o],"resizeBilinearGrad");const a=Wt(o.shape),[l,u,c,d]=o.shape,[,f,h]=r.shape,p=new Float32Array(l*u*c*d),m=[i&&f>1?u-1:u,i&&h>1?c-1:c],g=[i&&f>1?f-1:f,i&&h>1?h-1:h],v=m[0]/g[0],b=m[1]/g[1],w=n.data.get(r.dataId).values;let y=0;for(let k=0;k<l;k++){const x=k*a[0];for(let C=0;C<f;C++){const S=C*v,T=Math.floor(S),A=Math.min(Math.ceil(S),u-1),R=x+T*a[1],L=x+A*a[1],P=S-T,V=1-P;for(let H=0;H<h;H++){const F=H*b,M=Math.floor(F),B=Math.min(Math.ceil(F),c-1),Y=F-M,J=1-Y,ee=R+M*a[2],te=R+B*a[2],re=L+M*a[2],$e=L+B*a[2],se=V*J,Q=V*Y,ae=P*J,pe=P*Y;for(let ke=0;ke<d;ke++){const Be=w[y++];p[ee+ke]+=Be*se,p[te+ke]+=Be*Q,p[re+ke]+=Be*ae,p[$e+ke]+=Be*pe}}}}return n.makeTensorInfo([l,c,u,d],"float32",p)}const ABe={kernelName:nI,backendName:"cpu",kernelFunc:NBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s;At(o,"resizeNearestNeighbor");const l=Wt(o.shape),[u,c]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*u*c*p),v=[r&&u>1?f-1:f,r&&c>1?h-1:h],b=[r&&u>1?u-1:u,r&&c>1?c-1:c],w=v[0]/b[0],y=v[1]/b[1];let k=0;for(let x=0;x<d;x++){const C=x*l[0];for(let S=0;S<u;S++){const T=i?w*(S+.5):w*S;let A=Math.min(f-1,r?Math.round(T):Math.floor(T));i&&(A=Math.max(0,A));const R=C+A*l[1];for(let L=0;L<c;L++){const P=i?y*(L+.5):y*L;let V=Math.min(h-1,r?Math.round(P):Math.floor(P));i&&(V=Math.max(0,V));const H=R+V*l[2];for(let F=0;F<p;F++){const M=m[H+F];g[k++]=M}}}}return n.makeTensorInfo([d,u,c,p],o.dtype,g)}const RBe={kernelName:b1,backendName:"cpu",kernelFunc:DBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s;At([r,o],"resizeNearestNeighborGrad");const a=Wt(o.shape),l=Wt(r.shape),[u,c,d,f]=o.shape,[,h,p]=r.shape,m=new Float32Array(u*c*d*f),g=n.data.get(r.dataId).values,v=[i&&h>1?c-1:c,i&&p>1?d-1:d],b=[i&&h>1?h-1:h,i&&p>1?p-1:p],w=v[0]/b[0],y=v[1]/b[1],k=1/w,x=1/y,C=Math.ceil(k)*2+2,S=Math.ceil(x)*2+2;for(let T=0;T<u;T++){const A=T*a[0];for(let R=0;R<c;R++){const L=A+R*a[1],P=Math.floor(R*k),V=Math.floor(P-C/2);for(let H=0;H<d;H++){const F=L+H*a[2],M=Math.floor(H*x),B=Math.floor(M-S/2);for(let Y=0;Y<f;Y++){let J=0;for(let ee=0;ee<C;ee++){const te=ee+V;if(te<0||te>=h)continue;const re=A+te*l[1],$e=te*w,se=Math.min(c-1,i?Math.round($e):Math.floor($e));if(R===se)for(let Q=0;Q<S;Q++){const ae=Q+B;if(ae<0||ae>=p)continue;const pe=re+ae*l[2],ke=ae*y,Be=Math.min(d-1,i?Math.round(ke):Math.floor(ke));H===Be&&(J+=g[pe+Y])}}m[F+Y]=J}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const OBe={kernelName:tI,backendName:"cpu",kernelFunc:MBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PBe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dims:r}=s;At(o,"reverse");const i=o.shape.length,a=yn(r,o.shape);if(i===0)return Ca({inputs:{x:o},backend:n});const l=new Do(o.shape,o.dtype),u=n.bufferSync(o);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),f=d.slice();a.forEach(h=>f[h]=o.shape[h]-1-f[h]),l.set(u.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const FBe={kernelName:w1,backendName:"cpu",kernelFunc:PBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LBe={kernelName:mI,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,{radians:o,fillValue:r,center:i}=t,a=n,l=yo(s.dtype,tt(s.shape)),[u,c,d,f]=s.shape,[h,p]=cE(i,c,d),m=255,g=Math.sin(o),v=Math.cos(o),b=a.data.get(s.dataId).values;for(let y=0;y<u;y++){const k=y*d*c*f;for(let x=0;x<c;x++){const C=x*(d*f);for(let S=0;S<d;S++){const T=S*f;for(let A=0;A<f;A++){const R=[u,x,S,A],L=R[2],P=R[1];let V=(L-h)*v-(P-p)*g,H=(L-h)*g+(P-p)*v;V=Math.round(V+h),H=Math.round(H+p);let F=r;if(typeof r!="number"&&(A===3?F=m:F=r[A]),V>=0&&V<d&&H>=0&&H<c){const B=H*(d*f),Y=V*f,J=k+B+Y+A;F=b[J]}const M=k+C+T+A;l[M]=F}}}}return{dataId:a.write(l,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BBe=Yn(lg,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),zBe={kernelName:lg,backendName:"cpu",kernelFunc:BBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YW(e,t,n,s,o,r,i,a,l,u){const c=[s/o,o],d=e.values,f=t.values;if(s===0)return $n(n,t.dtype);const h=$n(c,t.dtype);h.values.fill(l);for(let p=0;p<r;p++){const m=[];let g=0;for(let v=0;v<i;v++){const b=d[p*i+v];m.push(b),g+=b*a[v]}if(g<0||g>=s/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let v=0;v<o;v++)u?h.values[g*o+v]+=f[p*o+v]:h.values[g*o+v]=t.rank===0?f[0]:f[p*o+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VBe(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o,updates:r}=t,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Cg(r,o,i),f=!0,h=n.bufferSync(o),p=n.bufferSync(r),m=YW(h,p,i,d,u,l,a,c,0,f);return n.makeTensorInfo(i,m.dtype,m.values)}const WBe={kernelName:_z,backendName:"cpu",kernelFunc:VBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HBe(e){const{inputs:t,backend:n}=e,{condition:s,t:o,e:r}=t;At([s,o,r],"select");const i=s.shape.length,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=pr(o.dtype,r.dtype),d=Oo(tt(o.shape),c);let f=0;const h=i===0||i>1||o.shape.length===1?1:tt(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<h;m++)a[p]===1?d[f++]=l[p]:d[f++]=u[p];return n.makeTensorInfo(o.shape,c,d)}const UBe={kernelName:k1,backendName:"cpu",kernelFunc:HBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jBe=H1,GBe=U1,KBe=Yn(cg,e=>e>=0?GBe*e:jBe*(Math.exp(e)-1)),qBe={kernelName:cg,backendName:"cpu",kernelFunc:KBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YBe=Yn(hg,e=>e<0?-1:e>0?1:0),XBe={kernelName:hg,backendName:"cpu",kernelFunc:YBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZBe=Yn(dg,e=>Math.sin(e)),JBe={kernelName:dg,backendName:"cpu",kernelFunc:ZBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QBe=Yn(fg,e=>Math.sinh(e)),eze={kernelName:fg,backendName:"cpu",kernelFunc:QBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tze=11920928955078125e-23,S3=Math.log(tze)+2,nze=Yn(mg,e=>{const t=e>-S3,n=e<S3,s=Math.exp(e);let o;return n?o=s:t?o=e:o=Math.log(1+s),o}),sze={kernelName:mg,backendName:"cpu",kernelFunc:nze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oze(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,paddings:i}=s;At([o],"spaceToBatchND");const a=tt(r),l=[[0,0]];l.push(...i);for(let x=1+r.length;x<o.shape.length;++x)l.push([0,0]);const u=qW.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),c=_g(u.shape,r,a,!1),d=Ng(c.length,r.length,!1),f=Ag(u.shape,r,a,!1),m=$s({inputs:{x:u},backend:n,attrs:{shape:c}}),b=Jo({inputs:{x:m},backend:n,attrs:{perm:d}}),k=$s({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),k}const rze={kernelName:$1,backendName:"cpu",kernelFunc:oze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ize(e){const{inputs:t,backend:n}=e,{indices:s,values:o,denseShape:r,defaultValue:i}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values[0],[d,f,h,p,m]=pW(a,s.shape,s.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,s.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const aze={kernelName:sI,backendName:"cpu",kernelFunc:ize};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lze(e){const{inputs:t,backend:n}=e,{inputIndices:s,inputShape:o,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(s.dataId).values,l=Array.from(n.data.get(r.dataId).values),[u,c,d]=mW(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const uze={kernelName:oI,backendName:"cpu",kernelFunc:lze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cze(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[u,c]=eT(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const dze={kernelName:rI,backendName:"cpu",kernelFunc:cze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fze(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[u,c]=eT(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(c,s.dtype,u)}const hze={kernelName:iI,backendName:"cpu",kernelFunc:fze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pze(e){const{inputs:t,backend:n,attrs:s}=e,{sparseIndices:o,sparseValues:r,defaultValue:i}=t,{outputShape:a}=s,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=Cg(r,o,a),h=!1,p=n.bufferSync(o),m=n.bufferSync(r),g=n.data.get(i.dataId).values[0],v=YW(p,m,a,f,c,u,l,d,g,h);return n.makeTensorInfo(a,v.dtype,v.values)}const mze={kernelName:Nz,backendName:"cpu",kernelFunc:pze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gze(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{numOrSizeSplits:r,axis:i}=s,a=yn(i,o.shape)[0],l=SE(o,r,a),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map(d=>{const f=[...c];f[a]=d;const h=Oc({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[a]+=d,h})}const vze={kernelName:S1,backendName:"cpu",kernelFunc:gze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bze={kernelName:aI,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,s=t;At(n,"square");const o=s.data.get(n.dataId).values,r=new Float32Array(o.length);for(let a=0;a<o.length;++a){const l=o[a];r[a]=l*l}return{dataId:s.write(r,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yze=Yn(xg,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),wze={kernelName:xg,backendName:"cpu",kernelFunc:yze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kze(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=s;At(o,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:w,strides:y}=SI(o.shape,r,i,a,l,u,c,d,f);let k;if(m)k=$s({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||v){oe(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const x=xI(b,w,y),C=Oc({inputs:{x:o},backend:n,attrs:{begin:b,size:x}});k=$s({inputs:{x:C},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(C)}else{const x=n.bufferSync(o),C=vW(h,x,y,b);k=n.makeTensorInfo(p,C.dtype,C.values)}return k}const xze={kernelName:lI,backendName:"cpu",kernelFunc:kze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cze(e){const{inputs:t,backend:n,attrs:s}=e,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=t,f=n.data.get(c.dataId).values,h=n.data.get(d.dataId).values,[p,m]=bW(f,h,o,r,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const $ze={kernelName:uI,backendName:"cpu",kernelFunc:Cze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sze(e){const{inputs:t,backend:n,attrs:s}=e,{skipEmpty:o}=s,{input:r,delimiter:i}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values[0],[u,c,d]=yW(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Ize={kernelName:cI,backendName:"cpu",kernelFunc:Sze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eze(e){const{inputs:t,backend:n,attrs:s}=e,{numBuckets:o}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(r.dataId).values,a=wW(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const Tze={kernelName:dI,backendName:"cpu",kernelFunc:Eze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ze=Yn(yg,e=>Math.tan(e)),Nze={kernelName:yg,backendName:"cpu",kernelFunc:_ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aze=Yn(wg,e=>Math.tanh(e)),Dze={kernelName:wg,backendName:"cpu",kernelFunc:Aze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rze(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reps:r}=s;At(o,"tile");const i=xW(n.bufferSync(o),r);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const Mze={kernelName:kg,backendName:"cpu",kernelFunc:Rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{k:r,sorted:i}=s;At(o,"topk");const a=n.data.get(o.dataId).values,[l,u]=$W(a,o.shape,o.dtype,r,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Pze={kernelName:fI,backendName:"cpu",kernelFunc:Oze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fze(e){const{inputs:t,attrs:n,backend:s}=e,{image:o,transforms:r}=t,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=n,[c,d,f,h]=o.shape,[p,m]=u!=null?u:[d,f],g=[c,p,m,h],v=Wt(o.shape),b=v[0],w=v[1],y=v[2],k=yo(o.dtype,tt(g));k.fill(l);const x=s.data.get(o.dataId).values,C=s.data.get(r.dataId).values;for(let T=0;T<c;++T){const A=r.shape[0]===1?C:C.subarray(T*8,T*8+8);for(let R=0;R<p;++R)for(let L=0;L<m;++L)for(let P=0;P<h;++P){let V;const H=A[6]*L+A[7]*R+1;if(H===0)continue;const F=(A[0]*L+A[1]*R+A[2])/H,M=(A[3]*L+A[4]*R+A[5])/H,B=I3(F,f,a),Y=I3(M,d,a);switch(i){case"nearest":V=Hze(x,d,f,b,w,y,T,Y,B,P,l);break;case"bilinear":V=Uze(x,d,f,b,w,y,T,Y,B,P,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const J=T*b+R*w+L*y+P;k[J]=V}return s.makeTensorInfo(g,o.dtype,k)}return{dataId:s.write(k,g,o.dtype),shape:o.shape,dtype:o.dtype}}const Lze={kernelName:hI,backendName:"cpu",kernelFunc:Fze};function I3(e,t,n){switch(n){case"reflect":return Bze(e,t);case"wrap":return zze(e,t);case"nearest":return Wze(e,t);case"constant":default:return Vze(e)}}function Bze(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const s=2*t;n<s&&(n=s*Math.trunc(-n/s)+n),n=n<-t?n+s:-n-1}else if(n>t-1)if(t<=1)n=0;else{const s=2*t;n-=s*Math.trunc(n/s),n>=t&&(n=s-n-1)}return xc(0,n,t-1)}function zze(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const s=t-1;n+=t*(Math.trunc(-n/s)+1)}else if(n>t-1)if(t<=1)n=0;else{const s=t-1;n-=t*Math.trunc(n/s)}return xc(0,n,t-1)}function Vze(e,t){return e}function Wze(e,t){return xc(0,e,t-1)}function Gh(e,t,n,s,o,r,i,a,l,u,c){const d=i*s+a*o+l*r+u;return 0<=a&&a<t&&0<=l&&l<n?e[d]:c}function Hze(e,t,n,s,o,r,i,a,l,u,c){const d=Math.round(a),f=Math.round(l);return Gh(e,t,n,s,o,r,i,d,f,u,c)}function Uze(e,t,n,s,o,r,i,a,l,u,c){const d=Math.floor(a),f=Math.floor(l),h=d+1,p=f+1,m=(p-l)*Gh(e,t,n,s,o,r,i,d,f,u,c)+(l-f)*Gh(e,t,n,s,o,r,i,d,p,u,c),g=(p-l)*Gh(e,t,n,s,o,r,i,h,f,u,c)+(l-f)*Gh(e,t,n,s,o,r,i,h,p,u,c);return(h-a)*m+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jze(e){const{inputs:t,attrs:n,backend:s}=e,{axis:o}=n,{x:r}=t;At(r,"unique");const i=s.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:u}=SW(i,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const Gze={kernelName:pI,backendName:"cpu",kernelFunc:jze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kze(e){const{inputs:t,backend:n,attrs:s}=e,{value:o}=t;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o.shape.length,a=o.shape[r],l=new Array(i-1);let u=0;for(let h=0;h<i;h++)h!==r&&(l[u++]=o.shape[h]);const c=new Array(i).fill(0),d=o.shape.slice();d[r]=1;const f=new Array(a);for(let h=0;h<f.length;h++){c[r]=h;const p=Oc({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});f[h]=$s({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const qze={kernelName:T1,backendName:"cpu",kernelFunc:Kze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yze(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,segmentIds:r}=t,{numSegments:i}=s;At(o,"unsortedSegmentSum");const a=o.shape.length,l=r.shape.length,u=[],c=[],d=a-l;let f=r;for(let p=0;p<d;++p){const m=Nb({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=m,c.push(m)}for(let p=0;p<i;++p){const m=lu(p,"int32"),g=n.makeTensorInfo([],"int32",m),v=jV({inputs:{a:g,b:f},backend:n}),b=tu({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),w=sw({inputs:{a:b,b:o},backend:n}),y=Vg({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});u.push(y),c.push(g),c.push(v),c.push(b),c.push(w),c.push(y)}const h=KW({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const Xze={kernelName:_1,backendName:"cpu",kernelFunc:Yze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zze=[XPe,WOe,JPe,eFe,qOe,nFe,oFe,iFe,lFe,cFe,fFe,pFe,gFe,yFe,kFe,$Fe,IFe,TFe,NFe,qPe,DFe,MFe,PFe,LFe,GOe,XOe,zFe,HOe,WFe,UFe,jFe,KFe,YFe,ZFe,QFe,t4e,s4e,r4e,a4e,u4e,d4e,h4e,m4e,g4e,b4e,w4e,x4e,C4e,$4e,S4e,T4e,VPe,N4e,ZOe,L4e,JOe,B4e,ePe,j4e,G4e,q4e,nPe,Z4e,Q4e,tLe,sLe,rLe,oPe,iPe,UOe,aLe,HFe,uLe,dLe,hLe,WPe,lPe,cPe,mLe,fPe,vLe,wLe,xLe,SLe,ELe,_Le,NLe,pPe,DLe,MLe,PLe,LLe,zLe,WLe,ULe,gPe,GLe,YLe,rBe,bPe,wPe,lBe,dBe,pBe,xPe,gBe,bBe,yBe,qW,CBe,UPe,SPe,SBe,jOe,mC,EBe,jPe,GPe,KPe,_Be,ABe,RBe,OBe,FBe,LBe,zBe,EPe,WBe,UBe,qBe,_Pe,XBe,JBe,eze,NPe,sBe,sze,rze,aze,uze,dze,hze,mze,vze,RPe,bze,OPe,wze,xze,$ze,Ize,Tze,BPe,I4e,Nze,Dze,Mze,Pze,Lze,CPe,Gze,qze,Xze,vBe];for(const e of Zze)Dz(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ku={},Q2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Jze(e,t){Ku[e]=t}function Gi(e,t){if(!(e in Ku)||t!=null){const s=e6e(e,t);if(s!==null)Ku[e]=s;else return console.log("Could not get context for WebGL version",e),null}const n=Ku[e];return n==null||n.isContextLost()?(delete Ku[e],Gi(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ku[e])}function Qze(e){if(typeof OffscreenCanvas!="undefined"&&e===2)return new OffscreenCanvas(300,150);if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function e6e(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t==null?Qze(e):t;return n.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete Ku[e]},!1),e===1?n.getContext("webgl",Q2)||n.getContext("experimental-webgl",Q2):n.getContext("webgl2",Q2)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Xp;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Xp||(Xp={}));var Nr;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Nr||(Nr={}));var mo;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(mo||(mo={}));function Wg(e,t){return[t,e]}function t6e(e,t){return e*t}function B0(e){const t=tt(e),n=Math.ceil(t/4);return Dx(n)}function nh(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function n6e(e,t){const[n,s]=nh(e,t);return n*s*4}function iT(e,t){const n=e;let s,o,r,i,a,l,u,c,d,f;return et().getNumber("WEBGL_VERSION")===2?(s=n.R32F,o=n.R16F,r=n.RGBA16F,i=n.RGBA32F,a=n.RED,u=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(s=e.RGBA,o=e.RGBA,r=e.RGBA,i=n.RGBA,a=e.RGBA,u=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,f=e.FLOAT,l=e.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mt(e,t){const n=t();return et().getBool("DEBUG")&&s6e(e),n}function s6e(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+a6e(e,t))}const o6e=596e-10,r6e=65504;function i6e(e){return!!(et().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||o6e<Math.abs(e)&&Math.abs(e)<r6e)}function a6e(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function z0(e,t){return pl(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function l6e(e,t){const n=pl(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Mt(e,()=>e.shaderSource(n,t)),Mt(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function u6e(e,t){const n=pl(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Mt(e,()=>e.shaderSource(n,t)),Mt(e,()=>e.compileShader(n)),et().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw XW(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const c6e=/ERROR: [0-9]+:([0-9]+):/g;function XW(e,t){const n=c6e.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const s=+n[1],o=e.split(`
`),r=o.length.toString().length+2,i=o.map((d,f)=>Gd((f+1).toString(),r)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,s-1),u=i.slice(s-1,s),c=i.slice(s);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${Gd(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function d6e(e){return pl(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function f6e(e,t){if(Mt(e,()=>e.linkProgram(t)),!et().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function ek(e,t){if(Mt(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function h6e(e,t){const n=pl(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Mt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),Mt(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function p6e(e,t){const n=pl(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Mt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),Mt(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function m6e(e){return pl(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function g6e(e,t){const n=et().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const s=`[${e}x${t}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(e>n||t>n){const s=`[${e}x${t}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+o+".")}}function v6e(e){return pl(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function E3(e,t,n,s,o,r,i){const a=e.getAttribLocation(t,n);return a===-1?!1:(Mt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,s)),Mt(e,()=>e.vertexAttribPointer(a,o,e.FLOAT,!1,r,i)),Mt(e,()=>e.enableVertexAttribArray(a)),!0)}function b6e(e,t,n){C6e(e,n),Mt(e,()=>e.activeTexture(e.TEXTURE0+n)),Mt(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function y6e(e,t,n){return pl(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function w6e(e,t,n){return e.getUniformLocation(t,n)}function k6e(e,t,n,s){Mt(e,()=>b6e(e,t,s)),Mt(e,()=>e.uniform1i(n,s))}function tk(e,t,n){Mt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),Mt(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function T3(e,t){Mt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Mt(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function V0(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+x6e(e,t))}function x6e(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function pl(e,t,n){const s=Mt(e,()=>t());if(s==null)throw new Error(n);return s}function C6e(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=t+e.TEXTURE0;if(s<e.TEXTURE0||s>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Ef(e,t=2){return tt(e.slice(0,e.length-t))}function Tf(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function nk(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Ef(e),...Tf(e)]),t}function $6e(e,t=!1){let n=et().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(n=n*2,e=e.map((o,r)=>r>=e.length-2?fz(e[r]):e[r]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=au(e).newShape);let s=tt(e);if(e.length<=1&&s<=n)return[1,s];if(e.length===2&&e[0]<=n&&e[1]<=n)return e;if(e.length===3&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const o=Ef(e);let r=2,i=2;return e.length&&([r,i]=Tf(e)),s=o*(r/2)*(i/2),Dx(s).map(a=>a*2)}return Dx(s)}function W0(e){return e%2===0}function Db(e,t){if(e=e.slice(-2),t=t.slice(-2),zn(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const n=e.slice(-1)[0],s=t.slice(-1)[0];if(n===s||W0(n)&&W0(s)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&W0(e[0])&&W0(t[0])}let sk,ok;function S6e(e){if(sk==null){const t=Gi(e);sk=t.getParameter(t.MAX_TEXTURE_SIZE)}return sk}function I6e(e){if(ok==null){const t=Gi(e);ok=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ok)}function E6e(e){if(e===0)return 0;let t;const n=Gi(e);return ni(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:ni(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function ni(e,t){return e.getExtension(t)!=null}function _3(e){try{if(Gi(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function T6e(e){if(e===0)return!1;const t=Gi(e);if(e===1){if(!ni(t,"OES_texture_float"))return!1}else if(!ni(t,"EXT_color_buffer_float"))return!1;return vC(t)}function _6e(e){if(e===0)return!1;const t=Gi(e);if(e===1){if(!ni(t,"OES_texture_float")||!ni(t,"WEBGL_color_buffer_float"))return!1}else{if(ni(t,"EXT_color_buffer_float"))return vC(t);const s="EXT_color_buffer_half_float";if(ni(t,s)){const o=t.getExtension(s);return N6e(t,o)}return!1}return vC(t)}function vC(e){const t=iT(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const s=1,o=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,s,o,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function N6e(e,t){const n=iT(e,t),s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=1,r=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,r,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(s),e.deleteFramebuffer(i),a}function A6e(e){return e!==2?!1:Gi(e).fenceSync!=null}function Hg(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&oe(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ut=et();Ut.registerFlag("HAS_WEBGL",()=>Ut.getNumber("WEBGL_VERSION")>0);Ut.registerFlag("WEBGL_VERSION",()=>_3(2)?2:_3(1)?1:0);Ut.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ut.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ut.get("WEBGL_VERSION")===2);Ut.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ut.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ut.registerFlag("WEBGL_PACK",()=>Ut.getBool("HAS_WEBGL"));Ut.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_PACK_CLIP",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_PACK_REDUCE",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_CONV_IM2COL",()=>Ut.getBool("WEBGL_PACK"));Ut.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>S6e(Ut.getNumber("WEBGL_VERSION")));Ut.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>I6e(Ut.getNumber("WEBGL_VERSION")));Ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=Ut.getNumber("WEBGL_VERSION");return e===0?0:E6e(e)});Ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ut.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Uz());Ut.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>T6e(Ut.getNumber("WEBGL_VERSION")));Ut.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ut.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ut.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ut.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>_6e(Ut.getNumber("WEBGL_VERSION")));Ut.registerFlag("WEBGL_FENCE_API_ENABLED",()=>A6e(Ut.getNumber("WEBGL_VERSION")));Ut.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ut.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ut.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});Ut.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Uz()?1:-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});Ut.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ut.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ut.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ut.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uo(){let e,t,n,s,o,r,i,a,l,u;return et().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",s="in",o="texture",r="outputColor",i="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",s="varying",o="texture2D",r="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:s,texture2D:o,output:r,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ed(e,t,n="index"){const s=Wt(t);return s.map((o,r)=>{const i=`int ${e[r]} = ${n} / ${o}`,a=r===s.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${o}`:`index -= ${e[r]} * ${o}`;return`${i}; ${a};`}).join("")}function ow(e,t,n="index"){const s=Wt(t);return s.map((o,r)=>{const i=`int ${e[r]} = ${n} / outShapeStrides[${r}]`,a=r===s.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * outShapeStrides[${r}]`:`index -= ${e[r]} * outShapeStrides[${r}]`;return`${i}; ${a};`}).join("")}function D6e(e,t){const n=e.length,s=e.map(r=>`${t}[${r}]`),o=new Array(n-1);o[n-2]=s[n-1];for(let r=n-3;r>=0;--r)o[r]=`(${o[r+1]} * ${s[r+1]})`;return o}function R6e(e,t,n="index"){const s=e.map((r,i)=>i),o=D6e(s,t);return o.map((r,i)=>{const a=`int ${e[i]} = ${n} / ${o[i]}`,l=i===o.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${o[i]}`:`index -= ${e[i]} * ${o[i]}`;return`${a}; ${l};`}).join("")}function aT(e){const t=Wt(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function lT(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const ZW=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:JW}=jDe;function M6e(e,t,n){const s=[];if(e.forEach(h=>{const p=tt(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?s.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(s.push(`uniform sampler2D ${h.name};`),s.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=uT(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:s.push(`uniform int ${h.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${h.name}Shape;`);break}s.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{s.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const o=s.join(`
`),r=e.map(h=>O6e(h,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=t.texShape,a=Uo(),l=L6e(a);let u,c,d=V6e(a);return t.isPacked?(u=P6e(t.logicalShape,i,n.enableShapeUniforms),c=z6e(a)):(u=F6e(t.logicalShape,i,n.enableShapeUniforms),c=B6e(a)),n.packedInputs&&(d+=j6e),[d,l,c,o,u,r,n.userCode].join(`
`)}function sh(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return s8e(e,t);case 1:return r8e(e,t);case 2:return a8e(e,t);case 3:return u8e(e,t);case 4:return d8e(e,t);case 5:return f8e(e);case 6:return h8e(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function QW(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return n8e(e);case 1:return o8e(e,t);case 2:return i8e(e,t);case 3:return l8e(e,t);default:return c8e(e,t)}}function O6e(e,t,n=!1,s){let o="";n?o+=QW(e,s):o+=sh(e,s);const r=e.shapeInfo.logicalShape,i=t.logicalShape;return r.length<=i.length&&(n?o+=p8e(e,t):o+=m8e(e,t)),o}function P6e(e,t,n){switch(e.length){case 0:return eH();case 1:return G6e(e,t,n);case 2:return e8e(e,t,n);case 3:return q6e(e,t,n);default:return X6e(e,t,n)}}function F6e(e,t,n){switch(e.length){case 0:return eH();case 1:return K6e(e,t,n);case 2:return t8e(e,t,n);case 3:return Y6e(e,t,n);case 4:return Z6e(e,t,n);case 5:return J6e(e,t);case 6:return Q6e(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function L6e(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function B6e(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function z6e(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function V6e(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${W6e}
    ${H6e}
    ${U6e}
  `}const W6e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,H6e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,U6e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,j6e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function eH(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function G6e(e,t,n){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return s[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function K6e(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function q6e(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),r=o*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function Y6e(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${ow(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const s=ed(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function X6e(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),r=o*Math.ceil(e[e.length-2]/2);let i=r,a="",l="b, r, c";for(let u=2;u<e.length-1;u++)i*=e[e.length-u-1],a=`
      int b${u} = index / ${i};
      index -= b${u} * ${i};
    `+a,l=`b${u}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${a}

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${e.length}(${l});
    }
  `}function Z6e(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${ow(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const s=ed(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function J6e(e,t){const n=ed(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Q6e(e,t){const n=ed(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function e8e(e,t,n){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(zn(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const o=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function t8e(e,t,n){return zn(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function td(e){return`offset${e}`}function n8e(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),s=Uo();return`
    vec4 ${n}() {
      return ${s.texture2D}(${t}, halfCR);
    }
  `}function s8e(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${s}() {return ${n};}`;const[o,r]=e.shapeInfo.texShape;if(o===1&&r===1)return`
      float ${s}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=td(n);if(t)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=e.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function o8e(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,r=Uo();if(t)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${r.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${r.texture2D}(${n}, uv);
    }
  `}function r8e(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${oh(e)}
      }
    `;const o=e.shapeInfo.texShape,r=o[0],i=o[1];if(i===1&&r===1)return`
      float ${s}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=td(n);return i===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);
        return sampleTexture(${n}, uv);
      }
    `:r===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${r}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function i8e(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape,i=r[0],a=r[1],l=Uo();if(r!=null&&zn(n,r))return t?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${l.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${s}, uv);
      }
    `;if(t)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const u=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function a8e(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape;if(r!=null&&zn(n,r)){if(t)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const f=r[0],h=r[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:i,keptDims:a}=au(n),l=i;if(l.length<n.length){const f=rh(e,l),h=["row","col"];return`
      ${sh(f,t)}
      float ${o}(int row, int col) {
        return ${o}(${ih(h,a)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${oh(e)}
      }
    `;const u=r[0],c=r[1],d=td(s);return c===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${s}, uv);
    }
  `:u===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:t?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${s}, uv);
  }
`}function l8e(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=rh(e,f),m=["b","row","col"];return`
        ${QW(p,t)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${ih(m,h)});
        }
      `}const a=Uo();if(t)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `;const l=i[0],u=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `}function u8e(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=au(n),u=a;if(u.length<n.length){const m=rh(e,u),g=["row","col","depth"];return`
        ${sh(m,t)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${ih(g,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${r}, ${i}, 1)));
        ${oh(e)}
      }
    `;const c=e.shapeInfo.texShape,d=c[0],f=c[1],h=e.shapeInfo.flatOffset;if(f===r&&h==null)return t?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(f===i&&h==null)return t?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${s}, uv);
    }
  `;const p=td(s);return t?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * ${r} + col * ${i} + depth + ${p};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${s}, uv);
      }
  `}function c8e(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Uo();if(t)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const r=e.shapeInfo.logicalShape,i=r.length,a=e.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],d=Math.ceil(r[i-1]/2);let f=d*Math.ceil(r[i-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)h=`int b${m}, `+h,f*=r[i-m-1],p=`b${m} * ${f} + `+p;return`
    vec4 ${s}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${o.texture2D}(${n}, uv);
    }
  `}function d8e(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[3],i=n[2]*r,a=n[1]*i,{newShape:l,keptDims:u}=au(n);if(l.length<n.length){const b=rh(e,l),w=["row","col","depth","depth2"];return`
      ${sh(b,t)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${ih(w,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${r}, 1)));
        ${oh(e)}
      }
    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${s}Shape[3];`,m=`int stride1 = ${s}Shape[2] * stride2;`,g=`int stride0 = ${s}Shape[1] * stride1;`;if(h===a&&c==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(h===r&&c==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${s}, uv);
      }
    `;const v=td(s);return t?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${v});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${r} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${v});
      return sampleTexture(${s}, uv);
    }
  `}function f8e(e){const t=e.shapeInfo.logicalShape,n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],r=t[3]*o,i=t[2]*r,a=t[1]*i,{newShape:l,keptDims:u}=au(t);if(l.length<t.length){const m=rh(e,l),g=["row","col","depth","depth2","depth3"];return`
      ${sh(m)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${ih(g,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${r}, ${o})) +
          depth3;
        ${oh(e)}
      }
    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${r}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=td(n);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${r} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function h8e(e){const t=e.shapeInfo.logicalShape,n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:r}=au(t);if(o.length<t.length){const g=rh(e,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${sh(g)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${ih(v,r)});
      }
    `}const i=t[5],a=t[4]*i,l=t[3]*a,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${oh(e)}
      }
    `;const d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],p=f[1];if(p===c&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=td(n);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function oh(e){const t=e.name,n=tt(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function p8e(e,t){const n=e.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,a=JW(e.shapeInfo.logicalShape,t.logicalShape),l=es(i),u=i-r;let c;const d=["x","y","z","w","u","v"];r===0?c="":i<2&&a.length>=1?c="coords = 0;":c=a.map(b=>`coords.${d[b+u]} = 0;`).join(`
`);let f="";i<2&&r>0?f="coords":f=e.shapeInfo.logicalShape.map((b,w)=>`coords.${d[w+u]}`).join(", ");let h="return outputValue;";const m=tt(e.shapeInfo.logicalShape)===1,v=tt(t.logicalShape)===1;if(r===1&&!m&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!v)i===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=r-2,w=r-1;a.indexOf(b)>-1&&a.indexOf(w)>-1?h="return vec4(outputValue.x);":a.indexOf(b)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(w)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${s}(${f});
      ${h}
    }
  `}function m8e(e,t){const n=e.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=t.texShape,i=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===l&&e.shapeInfo.flatOffset==null&&zn(i,r))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=es(l),c=JW(e.shapeInfo.logicalShape,t.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=e.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${s}(${p});
    }
  `}function es(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function uT(e,t,n){const{newShape:s,keptDims:o}=au(t),r=t.length,i=e&&r===3&&t[0]===1,a=i?t.slice(1):s,l=!e&&r>1&&!zn(t,n)&&s.length<r||i;return{useSqueezeShape:l,uniformShape:l?a:t,keptDims:o}}function rh(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function ih(e,t){return t.map(n=>e[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8e(e,t,n,s){const o=n.map((c,d)=>{const f={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(f.flatOffset=c.texData.slice.flatOffset),{name:t.variableNames[d],shapeInfo:f}}),r=o.map(c=>c.shapeInfo),i={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},a=M6e(o,i,t),l=u6e(e.gl,a),u=e.createProgram(l);return et().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:r,outShapeInfo:i,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:r,outShapeInfo:i},tH(e,t,u))}function tH(e,t,n){const s={},o={},r={},i=[];let a,l,u,c=null,d=null;d=e.getUniformLocation(n,"NAN",!1),et().getNumber("WEBGL_VERSION")===1&&(c=e.getUniformLocation(n,"INFINITY",!1));const f=!1;for(let h=0;h<t.variableNames.length;h++){const p=t.variableNames[h];s[p]=e.getUniformLocation(n,p,f),s[`offset${p}`]=e.getUniformLocation(n,`offset${p}`,f),t.enableShapeUniforms&&(o[`${p}Shape`]=e.getUniformLocation(n,`${p}Shape`,f),r[`${p}TexShape`]=e.getUniformLocation(n,`${p}TexShape`,f))}return t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",f),u=e.getUniformLocation(n,"outShapeStrides",f),l=e.getUniformLocation(n,"outTexShape",f)),t.customUniforms&&t.customUniforms.forEach((h,p)=>{i[p]=e.getUniformLocation(n,h.name,f)}),{uniformLocations:s,customUniformLocations:i,infLoc:c,nanLoc:d,inShapesLocations:o,inTexShapesLocations:r,outShapeLocation:a,outShapeStridesLocation:u,outTexShapeLocation:l}}function N3(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,s)=>{const o=n.logicalShape,r=t[s],i=r.shape;if(!zn(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&r.isUniform)return;const a=n.texShape,l=r.isUniform?null:r.texData.texShape;if(!zn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function v8e(e,t,n,s,o){t.program.enableShapeUniforms||(N3(t.inShapeInfos,n),N3([t.outShapeInfo],[s]));const r=s.texData.texture,i=s.texData.texShape;s.texData.isPacked?e.setOutputPackedMatrixTexture(r.texture,i[0],i[1]):e.setOutputMatrixTexture(r.texture,i[0],i[1]),e.setProgram(t.webGLProgram),et().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((l,u)=>{const c=t.program.variableNames[u],d=t.uniformLocations[c],f=t.uniformLocations[`offset${c}`],h=t.inShapesLocations[`${c}Shape`],p=t.inTexShapesLocations[`${c}TexShape`];if(h){const{uniformShape:m}=uT(t.program.packedInputs,l.shape,l.texData.texShape);switch(m.length){case 1:e.gl.uniform1iv(h,new Int32Array(m));break;case 2:e.gl.uniform2iv(h,new Int32Array(m));break;case 3:e.gl.uniform3iv(h,new Int32Array(m));break;case 4:e.gl.uniform4iv(h,new Int32Array(m));break}}if(p&&e.gl.uniform2i(p,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(tt(l.shape)<2)e.gl.uniform1f(d,l.uniformValues[0]);else{let m=l.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),e.gl.uniform1fv(d,m)}return}l.texData.slice!=null&&f!=null&&e.gl.uniform1i(f,l.texData.slice.flatOffset),e.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const a=t.outShapeLocation;if(a)switch(s.shape.length){case 1:e.gl.uniform1iv(a,new Int32Array(s.shape));break;case 2:e.gl.uniform2iv(a,new Int32Array(s.shape));break;case 3:e.gl.uniform3iv(a,new Int32Array(s.shape));break;case 4:e.gl.uniform4iv(a,new Int32Array(s.shape));break}if(t.outShapeStridesLocation){const l=Wt(s.shape);switch(s.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),t.program.customUniforms&&o&&t.program.customUniforms.forEach((l,u)=>{const c=t.customUniformLocations[u],d=o[u];if(l.type==="float")e.gl.uniform1fv(c,d);else if(l.type==="vec2")e.gl.uniform2fv(c,d);else if(l.type==="vec3")e.gl.uniform3fv(c,d);else if(l.type==="vec4")e.gl.uniform4fv(c,d);else if(l.type==="int")e.gl.uniform1iv(c,d);else if(l.type==="ivec2")e.gl.uniform2iv(c,d);else if(l.type==="ivec3")e.gl.uniform3iv(c,d);else if(l.type==="ivec4")e.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),e.executeProgram()}function b8e(e,t,n){let s="";t.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=uT(e.packedInputs,i.shape,l);let f="",h="",p="";if(c.length===1&&e.packedInputs){const k=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${k[0]>1}_${k[1]>1}`}else if(c.length===2&&!e.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!e.packedInputs){const k=Wt(c);p=`${k[0]===l[1]}_${k[k.length-1]===l[1]}`}const m=i.shape.length,g=c.length===2&&zn(i.shape,l),v=tt(i.shape)===1,b=xf(i.shape,n.shape),w=!e.packedInputs&&m===n.shape.length&&zn(l,n.texData.texShape),y=e.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;s+=`${m}_${w}_${u?d:""}_${c.length}_${v}_${b}_${g}_${f}_${h}_${p}_${y}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;s+=`${i.shape}_${l}_${a}`}});const o=e.userCode;let r=e.constructor.name;return r+="_"+s+"_"+o+`${et().getNumber("WEBGL_VERSION")}`,r}function nr(e){return et().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8e{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Xp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Uo();this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?ow(["r","c","d"],t):ed(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w8e{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Xp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Uo();this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?ow(["r","c","d"],t):ed(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k8e{constructor(t){this.variableNames=["A"],this.outTexUsage=Nr.DOWNLOAD;const n=Uo();this.outputShape=t,this.userCode=`
      ${ZW}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x8e{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Nr.DOWNLOAD;const n=Uo();this.outputShape=t,this.userCode=`
      ${ZW}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C8e{constructor(t,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Uo();this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?lT():aT(t)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${s.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${s.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $8e{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Uo();this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length);let o="",r="result";n&&(r="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?lT():aT(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${s.output} = ${r};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(e){const t=Uo(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return l6e(e,n)}function I8e(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return h6e(e,t)}function E8e(e){const t=new Uint16Array([0,1,2,2,1,3]);return p6e(e,t)}function Ug(e,t,n,s,o,r){g6e(t,n);const i=m6e(e),a=e.TEXTURE_2D;return Mt(e,()=>e.bindTexture(a,i)),Mt(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Mt(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Mt(e,()=>e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.NEAREST)),Mt(e,()=>e.texParameteri(a,e.TEXTURE_MAG_FILTER,e.NEAREST)),et().getNumber("WEBGL_VERSION")===1?Mt(e,()=>e.texImage2D(a,0,s,t,n,0,o,r,null)):Mt(e,()=>e.texStorage2D(a,1,s,t,n)),Mt(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:i,texShape:[n,t]}}function nH(e){return e.internalFormatFloat}function T8e(e,t,n,s){const[o,r]=Wg(t,n);return Ug(e,o,r,nH(s),s.textureFormatFloat,e.FLOAT)}function sH(e){return e.internalFormatHalfFloat}function _8e(e,t,n,s){const[o,r]=Wg(t,n);return Ug(e,o,r,sH(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function oH(e){return e.downloadTextureFormat}function N8e(e,t,n,s){const[o,r]=Wg(t,n);return Ug(e,o,r,oH(s),e.RGBA,e.UNSIGNED_BYTE)}function rH(e){return e.internalFormatPackedFloat}function A8e(e,t,n,s){const[o,r]=nh(t,n);return Ug(e,o,r,rH(s),e.RGBA,e.FLOAT)}function iH(e){return e.internalFormatPackedHalfFloat}function D8e(e,t,n,s){const[o,r]=nh(t,n);return Ug(e,o,r,iH(s),e.RGBA,s.textureTypeHalfFloat)}function R8e(e,t,n){return Mt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),E3(e,t,"clipSpacePos",n,3,20,0)&&E3(e,t,"uv",n,2,20,12)}function M8e(e,t,n,s,o,r){Mt(e,()=>e.bindTexture(e.TEXTURE_2D,t));let i,a,l;o instanceof Uint8Array?(i=new Uint8Array(n*s*4),a=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*s*4),a=e.FLOAT,l=r.internalFormatPackedFloat),i.set(o),et().getNumber("WEBGL_VERSION")===2?Mt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,s,e.RGBA,a,i)):Mt(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,s,0,e.RGBA,a,i)),Mt(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function O8e(e,t,n){Mt(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?et().getNumber("WEBGL_VERSION")===2?Mt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):Mt(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):et().getNumber("WEBGL_VERSION")===2?Mt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):Mt(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),Mt(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function P8e(e,t,n,s){const o=e.createBuffer();Mt(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const a=4*4*t*n;return Mt(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),Mt(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),Mt(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function F8e(e,t,n){const s=e,o=new Float32Array(n);return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,o),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),o}function L8e(e,t,n,s){const[o,r]=Wg(t,n),i=4,a=new Uint8Array(t6e(t*n,i));return Mt(e,()=>e.readPixels(0,0,o,r,s.downloadTextureFormat,e.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function B8e(e,t,n,s,o,r,i,a){const l=e,u=new Float32Array(n6e(r,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function z8e(e,t,n){const s=new Float32Array(t*n*4);return Mt(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rk{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=et().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,Jze(n,t)):this.gl=Gi(n);let s="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),et().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=z0(this.gl,r),ni(this.gl,i))this.textureHalfFloatExtension=z0(this.gl,i);else if(et().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),ni(this.gl,o))this.colorBufferHalfFloatExtension=z0(this.gl,o);else if(et().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",ni(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(ni(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=I8e(this.gl),this.indexBuffer=E8e(this.gl),this.framebuffer=v6e(this.gl),this.textureConfig=iT(this.gl,this.textureHalfFloatExtension)}get debug(){return et().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Mt(t,()=>t.finish()),Mt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Mt(t,()=>t.deleteFramebuffer(this.framebuffer)),Mt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Mt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Mt(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),T8e(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),_8e(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),N8e(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),O8e(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,s,o){this.throwIfDisposed(),M8e(this.gl,t,n,s,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),D8e(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),A8e(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(T3(this.gl,this.framebuffer),this.outputTexture=null),Mt(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,s){return this.downloadMatrixDriver(t,()=>L8e(this.gl,n,s,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,s,o,r,i){return B8e(this.gl,t,n,s,o,r,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return F8e(this.gl,t,n)}createBufferFromTexture(t,n,s){this.bindTextureToFrameBuffer(t);const o=P8e(this.gl,n,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,s;if(et().getBool("WEBGL_FENCE_API_ENABLED")){const o=t,r=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),s=()=>{const i=o.clientWaitSync(r,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=r}else et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(n,et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:n,isFencePassed:s}}downloadMatrixFromPackedTexture(t,n,s){return this.downloadMatrixDriver(t,()=>z8e(this.gl,n,s))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=S8e(n));const s=d6e(n);return Mt(n,()=>n.attachShader(s,this.vertexShader)),Mt(n,()=>n.attachShader(s,t)),f6e(n,s),this.debug&&ek(n,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=R8e(n,this.program,this.vertexBuffer)),s}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Mt(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&ek(this.gl,this.program),Mt(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,s=!0){return this.throwIfDisposed(),s?y6e(this.gl,t,n):w6e(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),Mt(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,s){this.throwIfDisposed(),this.throwIfNoProgram(),k6e(this.gl,t,n,s)}setOutputMatrixTexture(t,n,s){this.setOutputMatrixTextureDriver(t,s,n)}setOutputPackedMatrixTexture(t,n,s){this.throwIfDisposed();const[o,r]=nh(n,s);this.setOutputMatrixTextureDriver(t,o,r)}setOutputMatrixWriteRegion(t,n,s,o){this.setOutputMatrixWriteRegionDriver(s,t,o,n)}setOutputPackedMatrixWriteRegion(t,n,s,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&ek(this.gl,this.program),V0(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),Mt(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Mt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=z0(this.gl,et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.createQuery();return s.beginQuery(o.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,s=this.getQueryTimerExtensionWebGL2();n.endQuery(s.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await kR(()=>this.disposed||this.isQueryAvailable(t,et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const s=this.gl;return s.getQueryParameter(t,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.getQueryParameter(t,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),o=s.getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=V8e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:s}=this.itemsToPoll[n];s()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),!(this.itemsToPoll.length>1)&&kR(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),tk(this.gl,t,this.framebuffer),this.debug&&V0(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(tk(this.gl,this.outputTexture,this.framebuffer),this.debug&&V0(this.gl)):T3(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const s=n();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(t,n,s){this.throwIfDisposed();const o=this.gl;tk(o,t,this.framebuffer),this.debug&&V0(o),this.outputTexture=t,Mt(o,()=>o.viewport(0,0,n,s)),Mt(o,()=>o.scissor(0,0,n,s))}setOutputMatrixWriteRegionDriver(t,n,s,o){this.throwIfDisposed(),Mt(this.gl,()=>this.gl.scissor(t,n,s,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function V8e(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:W8e,bincountImpl:aH,bincountReduceImpl:H8e,ceilImpl:U8e,concatImpl:j8e,equalImpl:G8e,expImpl:K8e,expm1Impl:q8e,floorImpl:Y8e,gatherNdImpl:X8e,gatherV2Impl:Z8e,greaterImpl:J8e,greaterEqualImpl:Q8e,lessImpl:e5e,lessEqualImpl:t5e,linSpaceImpl:n5e,logImpl:s5e,maxImpl:o5e,maximumImpl:r5e,minimumImpl:i5e,multiplyImpl:a5e,negImpl:l5e,notEqualImpl:u5e,prodImpl:c5e,rangeImpl:d5e,rsqrtImpl:f5e,sigmoidImpl:h5e,simpleAbsImpl:lH,sliceImpl:p5e,sparseFillEmptyRowsImpl:m5e,sparseReshapeImpl:g5e,sparseSegmentReductionImpl:uH,sqrtImpl:v5e,stridedSliceImpl:b5e,stringNGramsImpl:y5e,stringSplitImpl:w5e,stringToHashBucketFastImpl:k5e,subImpl:x5e,tileImpl:C5e,topKImpl:$5e,transposeImpl:cT,uniqueImpl:S5e}=zPe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cH(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function Vo(e,t){return t===1?[e]:cH(e,t)}function I5e(e,t){if(e===1)return"rc";let n="";for(let s=0;s<e;s++)n+=t[s],s<e-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E5e{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=nr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Vo("rc",this.rank),s=es(this.rank),o=this.getOutOfBoundsCondition(n),r=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){let r=`${s===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)r=`${t[t.length-1-i]},`+r;n.push(r)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let s=this.rank-2;s<this.rank;s++)n+=`${t[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${o};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dH{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length);let s="";for(let o=0;o<4;o++){let r="thisRC = rc;";o%2===1&&(r+="thisRC.z += 1;"),o>1&&(r+="thisRC.y += 1;"),s+=`
        ${r}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${T5e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?lT():aT(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${s}

        setOutput(result);
      }
    `}}function T5e(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?R6e(["r","c","d"],"inputShape"):ed(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _5e{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,n,s){const o=D3(n,s),r=R3(t,o,s);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const i=A3(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[r].shift();return this.usedTextures[r].push(l),l}let a;return o===mo.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===mo.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===mo.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===mo.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===mo.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(t,n,s,o){if(this.freeTextures==null)return;const r=D3(s,o),i=R3(n,r,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=A3(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=et().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[i],c=u.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function N5e(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function A3(e,t,n,s,o){const r=A5e(t,s);let i;if(o){const[l,u]=nh(e[0],e[1]);i=l*u}else{const[l,u]=Wg(e[0],e[1]);i=l*u}const a=N5e(n,r);return i*a}function A5e(e,t){switch(e){case mo.PACKED_2X2_FLOAT32:return rH(t);case mo.PACKED_2X2_FLOAT16:return iH(t);case mo.UNPACKED_FLOAT32:return nH(t);case mo.UNPACKED_FLOAT16:return sH(t);case mo.PACKED_4X1_UNSIGNED_BYTE:return oH(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function D5e(e){return et().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?mo.PACKED_2X2_FLOAT32:mo.UNPACKED_FLOAT32:e?mo.PACKED_2X2_FLOAT16:mo.UNPACKED_FLOAT16}function D3(e,t){if(e===Nr.UPLOAD)return mo.PACKED_2X2_FLOAT32;if(e===Nr.RENDER||e==null)return D5e(t);if(e===Nr.DOWNLOAD||e===Nr.PIXELS)return mo.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function R3(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class za{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const $i="if (isnan(x)) return x;",R5e="return x;",M3="return abs(x);",M5e="return (x >= 0.0) ? x : (exp(x) - 1.0);",O5e=$i+`
  return (x < 0.0) ? 0.0 : x;
`,P5e=$i+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Cd="return x;",F5e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5e="return x;",B5e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,z5e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,V5e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,W5e="return 1.0 / (1.0 + exp(-1.0 * x));";class tc{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H5e{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length);const n=t.length,s=Vo("rc",n),o=es(n),r=I5e(n,s),i=s.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${r});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5e=Z6,j5e=1e-7,G5e=1e-4,H0={};function K5e(e){return e in H0||(H0[e]={}),H0[e]}const q5e=et().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Y5e=600;function X5e(){return et().global.screen==null?1024:et().global.screen.height*et().global.screen.width*window.devicePixelRatio*Y5e/1024/1024}class rw extends kS{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!et().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof rk)n=t;else{const s=Gi(et().getNumber("WEBGL_VERSION"),t);n=new rk(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=Gi(et().getNumber("WEBGL_VERSION"));n=new rk(s),this.binaryCache=K5e(et().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new _5e(this.gpgpu),this.numMBBeforeWarning=X5e(),this.texData=new dz(this,Nl())}nextDataId(){return rw.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(t,n,s){if((et().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||et().getBool("DEBUG"))&&this.checkNumericalProblems(t),s==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:s,values:t,usage:Nr.UPLOAD,refCount:1}),o}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,s,o,r){if(et().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:s,dtype:o,values:n,usage:Nr.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:s,dtype:o,complexTensorInfos:r,slice:i,shape:a,isPacked:l}=n;if(i!=null){let f;l?f=new tc(a,Cd):f=new za(a,Cd);const h=this.runWebGLProgram(f,[{dataId:t,shape:a,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(s!=null)return this.convertAndCacheOnCPU(t);if(o==="string")return s;const u=this.activeTimers!=null;let c;u&&(c=Ko());let d;if(o==="complex64"){const f=this.readSync(r.real.dataId),h=this.readSync(r.imag.dataId);d=tl(f,h)}else d=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=Ko()-c),this.convertAndCacheOnCPU(t,d)}async read(t){if(this.pendingRead.has(t)){const p=this.pendingRead.get(t);return new Promise(m=>p.push(m))}const n=this.texData.get(t),{values:s,shape:o,slice:r,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(r!=null){let p;l?p=new tc(o,Cd):p=new za(o,Cd);const m=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:i}],i),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(s!=null)return this.convertAndCacheOnCPU(t);if(et().getBool("DEBUG")&&!et().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&et().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(i!=="complex64"&&et().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(t);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...B0(o))}this.pendingRead.set(t,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];d=tl(m,g)}else if(u==null)d=this.getValuesFromTexture(t);else{const p=tt(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;Mt(p,()=>p.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(t,d),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(p=>p(f)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Nl().removeDataId(t,this),this.pendingDeletes--),f}readToGPU(t,n={}){const s=this.texData.get(t),{values:o,shape:r,slice:i,dtype:a,isPacked:l,texture:u}=s;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;l?h=new tc(r,Cd):h=new za(r,Cd);const p=this.runWebGLProgram(h,[{dataId:t,shape:r,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(t,n.customTexShape),d=Nl().makeTensorFromDataId(c.dataId,c.shape,c.dtype),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(t){const n=this.readSync(t.dataId);let s=n;if(t.dtype==="string")try{s=n.map(o=>wf(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return $n(t.shape,t.dtype,s)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const s=t[n];if(!i6e(s))throw et().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:s,isPacked:o}=this.texData.get(t),r=tt(n);if(et().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(t),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...B0(n)).subarray(0,r);return this.disposeIntermediateTensorInfo(f),p}const i=et().getBool("WEBGL_PACK")&&o===!0,a=i?nk(n):n,l=i?new x8e(a):new k8e(a),u=this.runWebGLProgram(l,[{shape:a,dtype:s,dataId:t}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,s=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=s,o=!0):this.activeTimers.push(s),this.activeTimers=s,t();const r=vf(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=vf(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(r);a.kernelMs=QSe(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:i[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ko(),endMs:null}}endTimer(t){return et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Ko(),t)}async getQueryTime(t){if(et().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:s}=this.texData.get(t);return s!=null&&(this.disposeData(s.real.dataId,n),this.disposeData(s.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:s,texShape:o,usage:r,isPacked:i,slice:a}=this.texData.get(t),l=a&&a.origDataId||t,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,s),this.textureManager.releaseTexture(n,o,r,i)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=q5e){return et().getBool("WEBGL_CPU_FORWARD")&&t.every(s=>this.texData.get(s.dataId).texture==null&&tt(s.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){Er("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return U5e(t.shape,n)}packedUnaryOp(t,n,s){const o=new tc(t.shape,n),r=this.compileAndRun(o,[t],s);return Nl().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const o=lH(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,o)}if(et().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,M3,t.dtype);const n=new za(t.shape,M3),s=this.compileAndRun(n,[t]);return Nl().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}makeTensorInfo(t,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&Sm(s[0])){const r=s.map(i=>Hl(i));o=this.write(r,t,n)}else o=this.write(s,t,n);return this.texData.get(o).usage=null,{dataId:o,shape:t,dtype:n}}makeOutput(t,n,s){const{dataId:o}=this.makeTensorInfo(t,n,s);return Nl().makeTensorFromDataId(o,t,n,this)}unpackTensor(t){const n=new H5e(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new E5e(t.shape),s=!0;return this.runWebGLProgram(n,[t],t.dtype,null,s)}packedReshape(t,n){const s=[Ef(t.shape),...Tf(t.shape)],o={dtype:t.dtype,shape:s,dataId:t.dataId},r=[Ef(n),...Tf(n)],i=new dH(r,s),a=!0,l=[s],u=this.runWebGLProgram(i,[o],t.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(t,n){const s=this.texData.get(t),{isPacked:o,shape:r,dtype:i}=s;if(n!=null){const f=tt(r),h=n[0]*n[1]*4;oe(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=nk(r);let l;o?l=new w8e(a):l=new y8e(a);const u=!0,c=[n!=null?n:B0(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:t}],i,c,u,n);return{dtype:i,shape:r,dataId:d.dataId}}runWebGLProgram(t,n,s,o,r=!1,i){const a=this.makeTensorInfo(t.outputShape,s),l=this.texData.get(a.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===Xp.DENSE){const v=i!=null?i:B0(t.outputShape);l.texShape=v.map(b=>b*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),tt(a.shape)===0)return l.values=yo(a.dtype,0),a;const u=[],c=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(v.dataId);if(b.texture==null){if(!t.packedInputs&&tt(v.shape)<=et().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:b.values};t.packedInputs&&(b.isPacked=!0,b.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!b.isPacked!=!!t.packedInputs)v=b.isPacked?this.unpackTensor(v):this.packTensor(v),u.push(v),b=this.texData.get(v.dataId);else if(b.isPacked&&!Db(b.shape,v.shape)){const w=v,y=v.shape;v.shape=b.shape,v=this.packedReshape(v,y),u.push(v),b=this.texData.get(v.dataId),w.shape=y}return{shape:v.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=b8e(t,c,d),h=this.getAndSaveBinary(f,()=>g8e(this.gpgpu,t,c,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),et().get("ENGINE_COMPILE_ONLY")||v8e(this.gpgpu,h,c,d,o),u.forEach(v=>this.disposeIntermediateTensorInfo(v)),p&&(m=this.endTimer(m),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(m)}));const g=et().get("WEBGL_FLUSH_THRESHOLD");if(g>0){const v=Ko();v-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!et().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&r===!1){const v=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),v}return a}compileAndRun(t,n,s,o,r=!1){return s=s||n[0].dtype,this.runWebGLProgram(t,n,s,o,r)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(et().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement!="undefined"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ge(()=>{if(!et().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=et().getBool("DEBUG");et().set("DEBUG",!1);const n=this.abs(tn(1e-8)).dataSync()[0];if(et().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?j5e:G5e}uploadToGPU(t){const n=this.texData.get(t),{shape:s,dtype:o,values:r,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Ko());let d=n.texShape;if(d==null&&(d=$6e(s,l),n.texShape=d),r!=null){const f=nk(s);let h,p=d[1],m=d[0];const g=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(l||!g)&&([p,m]=nh(d[0],d[1])),l?h=new $8e(f,g):h=new C8e(f,g);const v=g?[m,p]:d,b=this.makeTensorInfo(v,o),w=this.texData.get(b.dataId);g?w.usage=Nr.PIXELS:w.usage=Nr.UPLOAD,w.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,m,r);const y=[[m,p]],k=!0,x=this.runWebGLProgram(h,[b],o,y,k),C=this.texData.get(x.dataId);n.texShape=C.texShape,n.isPacked=C.isPacked,n.usage=C.usage,et().get("ENGINE_COMPILE_ONLY")?this.disposeData(x.dataId):(n.texture=C.texture,n.values=null,this.texData.delete(x.dataId)),this.disposeIntermediateTensorInfo(b),u&&(this.uploadWaitMs+=Ko()-c)}else{const f=this.acquireTexture(d,a,o,l);n.texture=f}}convertAndCacheOnCPU(t,n){const s=this.texData.get(t),{dtype:o}=s;return this.releaseGPUData(t),n!=null&&(s.values=Z5e(n,o)),s.values}acquireTexture(t,n,s,o){if(this.numBytesInGPU+=this.computeBytes(t,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${r} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,o)}computeBytes(t,n){return t[0]*t[1]*Rx(n)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(n));return Promise.all(t)}else{for(const[,n]of Object.entries(this.binaryCache)){const s=new Promise(o=>{try{this.checkCompletion_(n),o(!0)}catch(r){throw r}});t.push(s)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await o8(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(XW(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,t]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:s,infLoc:o,nanLoc:r,inShapesLocations:i,inTexShapesLocations:a,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=tH(this.gpgpu,t.program,t.webGLProgram);t.uniformLocations=n,t.customUniformLocations=s,t.infLoc=o,t.nanLoc=r,t.inShapesLocations=i,t.inTexShapesLocations=a,t.outShapeLocation=l,t.outShapeStridesLocation=u,t.outTexShapeLocation=c}}}rw.nextDataId=0;function Z5e(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let s=0;s<n.length;++s)n[s]=Math.round(e[s]);return n}else throw new Error(`Unknown dtype ${t}`)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */jz()&&p6("webgl",()=>new rw,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fH=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class _f{constructor(t,n,s){this.variableNames=["A","B"],this.outputShape=dn(n,s),this.enableShapeUniforms=nr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iw=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class jg{constructor(t,n,s,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=dn(n,s);const r=this.outputShape.length;this.enableShapeUniforms=nr(r);let i="";if(o)if(r===0||tt(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${es(r)} coords = getOutputCoords();
        `,r===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Vo("coords",r);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= outShape[${r} - 2];
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= outShape[${r} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qo(e){const{inputs:t,backend:n}=e,{x:s}=t;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const J5e={kernelName:qm,backendName:"webgl",kernelFunc:Qo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gu(e){const{inputs:t,backend:n}=e,{real:s,imag:o}=t,r=n.makeTensorInfo(s.shape,"complex64"),i=n.texData.get(r.dataId),a=Qo({inputs:{x:s},backend:n}),l=Qo({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:l},r}const Q5e={kernelName:NS,backendName:"webgl",kernelFunc:gu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hH="return (a < 0.) ? b * a : a;",pH=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function eVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{alpha:r}=s,i=n.makeTensorInfo([],"float32",lu(r,"float32")),a=et().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jg(pH,o.shape,i.shape):new _f(hH,o.shape,i.shape),l=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const tVe={kernelName:Zy,backendName:"webgl",kernelFunc:eVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mH="return (a < 0.) ? b * a : a;",gH=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function nVe(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t,r=et().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jg(gH,s.shape,o.shape):new _f(mH,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],"float32")}const sVe={kernelName:g1,backendName:"webgl",kernelFunc:nVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ah="if (isnan(x)) return x;",oVe=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,rVe=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function Mn({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:s}){return({inputs:o,backend:r})=>{const{x:i}=o,a=r,l=s||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),f=n(d.values,l);return a.makeTensorInfo(i.shape,l,f)}const u=et().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let c;return u?c=new tc(i.shape,t):c=new za(i.shape,e),a.runWebGLProgram(c,[i],l)}}function Co({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:s=!1,cpuKernelImpl:o,dtype:r}){return({inputs:i,backend:a})=>{const{a:l,b:u}=i,c=a;if(s&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,v]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(w=>{const[y,k]=w,x={dataId:y.dataId,dtype:y.dtype,shape:l.shape},C={dataId:k.dataId,dtype:k.dtype,shape:u.shape},S=new _f(e,l.shape,u.shape);return c.runWebGLProgram(S,[x,C],pr(y.dtype,k.dtype))}),b=gu({inputs:{real:g,imag:v},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(v),b}const d=r||pr(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&o!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?Dc(p):p,v=l.dtype==="string"?Dc(m):m,[b,w]=o(l.shape,u.shape,g,v,d),y=c.makeTensorInfo(w,d),k=c.texData.get(y.dataId);return k.values=b,y}const f=et().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let h;return f?h=new jg(t,l.shape,u.shape,n):h=new _f(e,l.shape,u.shape),c.runWebGLProgram(h,[l,u],d)}}function aw(e,t=!1){if(e==="linear")return t?L5e:R5e;if(e==="relu")return t?z5e:O5e;if(e==="elu")return t?B5e:M5e;if(e==="relu6")return t?V5e:P5e;if(e==="prelu")return t?gH:mH;if(e==="leakyrelu")return t?pH:hH;if(e==="sigmoid")return t?W5e:F5e;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vH{constructor(t,n,s,o=!1,r=!1,i=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=nr(this.outputShape.length);const c=o?t[1]:t[2],d=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",v="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");const b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let w="rc.x",y="rc.x";t[0]<n[0]?w=`int(min(float(rc.x), ${t[0]-1}.))`:n[0]<t[0]&&(y=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${w};
          int batchB = ${y};
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class P3{constructor(t,n,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=dn(n,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3="return a * b;";function dT(e){const{inputs:t,backend:n}=e,{a:s,b:o}=t,r=pr(s.dtype,o.dtype);if(s.dtype==="complex64"){const a=n.texData.get(s.dataId),l=n.texData.get(o.dataId),u=new P3(O3.REAL,s.shape,o.shape),c=new P3(O3.IMAG,s.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=gu({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([s,o])){const a=n.texData.get(s.dataId),l=n.texData.get(o.dataId),[u,c]=a5e(s.shape,o.shape,a.values,l.values,r),d=n.makeTensorInfo(c,r),f=n.texData.get(d.dataId);return f.values=u,d}let i;return et().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new jg(F3,s.shape,o.shape):i=new _f(F3,s.shape,o.shape),n.runWebGLProgram(i,[s,o],r)}const iVe={kernelName:sg,backendName:"webgl",kernelFunc:dT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aVe(e,t,n){const s=[Ef(e.shape),...Tf(e.shape)],o={dtype:e.dtype,shape:s,dataId:e.dataId},r=[Ef(t),...Tf(t)],i=new dH(r,s),a=!0,l=[s],u=n.runWebGLProgram(i,[o],e.dtype,l,a);return{dataId:u.dataId,shape:t,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{shape:r}=s,i=n,a=tt(o.shape),l=pz(r,a),u=tt(l);oe(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(o.dataId);return c.isPacked&&!Db(o.shape,l)&&!(c.texture!==null&&Db(c.shape,l))?aVe(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const lVe={kernelName:v1,backendName:"webgl",kernelFunc:St};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L3{constructor(t,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=t;this.outputShape=[o,i];const a=Math.floor(s/4)*4,l=s%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${bf(d)?d.toPrecision(2):d}, ones);`}let c="";r%s>0&&(c=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uVe{constructor(t,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=t;this.outputShape=[o,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(s/4)*4,d=s%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cVe(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:e[1],s=W1(n);t.push({inSize:n,windowSize:s,outSize:Math.ceil(n/s)})}return t}function nd(e,t,n,s){const o=cVe(e.shape);let r=e;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:l,outSize:u}=o[i];let c,d;n==="mean"?c=i===0?new L3({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u},a):new L3({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u}):c=new uVe({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u},n),d=r,r=s.runWebGLProgram(c,[r],t),d.dataId!==e.dataId&&s.disposeIntermediateTensorInfo(d)}return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dVe{constructor(t,n){this.variableNames=["A"];const s=new Array(t.length);for(let i=0;i<s.length;i++)s[i]=t[n[i]];this.outputShape=s,this.rank=s.length;const o=es(this.rank),r=fVe(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${r}));
    }
    `}}function fVe(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(t);for(let o=0;o<e.length;o++)s[e[o]]=n[o];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hVe{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(t.length);for(let c=0;c<s.length;c++)s[c]=t[n[c]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=es(this.rank),r=cH("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=r[c];const a=`vec2(${i.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${s[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${r[this.rank-1]};
      if(++${r[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lw(e,t,n){const s=et().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hVe(e.shape,t):new dVe(e.shape,t);return n.runWebGLProgram(s,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pVe(e,t,n,s){const o=t,r=e.shape.length,i=yn(o,e.shape);let a=i;const l=Es(a,r),u=l!=null;let c=e;u&&(c=lw(e,l,s),a=Ms(a.length,r)),xo("sum",a,r);const[d,f]=lo(c.shape,a);let h=d;n&&(h=zs(d,i));const p=tt(f),g=tt(e.shape)/p,v=St({inputs:{x:c},attrs:{shape:[g,p]},backend:s}),b=vI(e.dtype),w=nd(v,b,"sum",s),y=St({inputs:{x:w},attrs:{shape:h},backend:s});return s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(w),u&&s.disposeIntermediateTensorInfo(c),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uw(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;return pVe(o,r,i,n)}const mVe={kernelName:C1,backendName:"webgl",kernelFunc:uw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wo(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{perm:r}=s,i=n,a=o.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=o.shape[r[c]];let u;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,f=cT(d,o.shape,o.dtype,r,l);u=i.makeTensorInfo(l,o.dtype);const h=i.texData.get(u.dataId);h.values=f}else u=lw(o,r,i);return u}const gVe={kernelName:E1,backendName:"webgl",kernelFunc:wo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bH=1e3;function Rb({a:e,b:t,transposeA:n,transposeB:s,backend:o,bias:r=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const u=e.shape.length,c=t.shape.length,d=n?e.shape[u-2]:e.shape[u-1],f=s?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],p=s?t.shape[c-2]:t.shape[c-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),v=tt(m),b=tt(g),y=dn(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,p]);oe(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${s} must match.`);const k=n?[v,d,h]:[v,h,d],x=s?[b,p,f]:[b,f,p],C=St({inputs:{x:e},backend:o,attrs:{shape:k}}),S=St({inputs:{x:t},backend:o,attrs:{shape:x}}),T=[C,S],A=Math.max(v,b),R=n?C.shape[1]:C.shape[2],L=r!=null,P=i!=null,V=l==="leakyrelu",H=l!=null?aw(l,!0):null,F=L||P||V||H!=null;let M;if((h===1||p===1)&&R>bH&&F===!1){let Y=C,J=S;n&&(Y=wo({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),T.push(Y)),s&&(J=wo({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),T.push(J));const ee=p!==1,te=p===1;let re=Y;ee&&(re=St({inputs:{x:Y},backend:o,attrs:{shape:[A,R,1]}}),T.push(re));const $e=p===1?2:1;let se=J;te&&(se=St({inputs:{x:J},backend:o,attrs:{shape:[A,1,R]}}),T.push(se));const Q=dT({inputs:{a:re,b:se},backend:o});M=uw({inputs:{x:Q},backend:o,attrs:{axis:$e,keepDims:!0}}),T.push(Q)}else{const Y=pr(e.dtype,t.dtype),J=new vH(k,x,[A,h,p],n,s,L,H,P,V),ee=[C,S];if(r!=null&&ee.push(r),P&&ee.push(i),V){const te=o.makeTensorInfo([],"float32",lu(a,"float32"));ee.push(te),T.push(te)}M=o.runWebGLProgram(J,ee,Y)}const B=St({inputs:{x:M},backend:o,attrs:{shape:y}});T.push(M);for(const Y of T)o.disposeIntermediateTensorInfo(Y);return B}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r,bias:i,preluActivationWeights:a}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;return Rb({a:o,b:r,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const bVe={kernelName:pb,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3="return abs(x);";function yVe(e){const{inputs:t,backend:n}=e,{x:s}=t;if(n.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const r=n.texData.get(s.dataId),i=lH(r.values);return n.makeTensorInfo(s.shape,s.dtype,i)}let o;return et().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new tc(s.shape,B3):o=new za(s.shape,B3),n.runWebGLProgram(o,[s],s.dtype)}const wVe={kernelName:Ay,backendName:"webgl",kernelFunc:yVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kVe=$i+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,xVe=Mn({opSnippet:kVe}),CVe={kernelName:Tm,backendName:"webgl",kernelFunc:xVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ve=$i+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,SVe=Mn({opSnippet:$Ve}),IVe={kernelName:_m,backendName:"webgl",kernelFunc:SVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z3="return a + b;",EVe=Co({opSnippet:z3,packedOpSnippet:z3,supportsComplex:!0,cpuKernelImpl:W8e}),TVe={kernelName:Kf,backendName:"webgl",kernelFunc:EVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ve{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`float v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NVe{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`vec4 v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zv(e){const{inputs:t,backend:n}=e,s=t;if(s.length===1)return Qo({inputs:{x:s[0]},backend:n});if(s.length>et().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),u=zv({inputs:s.slice(0,l),backend:n}),c=zv({inputs:s.slice(l),backend:n});return zv({inputs:[u,c],backend:n})}const o=s.map(l=>l.dtype).reduce((l,u)=>pr(l,u)),r=s.map(l=>l.shape),a=et().getBool("WEBGL_PACK")?new NVe(s[0].shape,r):new _Ve(s[0].shape,r);return n.runWebGLProgram(a,s,o)}const AVe={kernelName:$S,backendName:"webgl",kernelFunc:zv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=yn(r,o.shape);let u=l;const c=Es(u,a);let d=o;c!=null&&(d=wo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Ms(u.length,a)),xo("all",u,a);const[f,h]=lo(d.shape,u),p=tt(h),m=St({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=nd(m,m.dtype,"all",n);let v;if(i){const b=zs(f,l);v=St({inputs:{x:g},backend:n,attrs:{shape:b}})}else v=St({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const RVe={kernelName:SS,backendName:"webgl",kernelFunc:DVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=yn(r,o.shape);let u=l;const c=Es(u,a);let d=o;c!=null&&(d=wo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Ms(u.length,a)),xo("any",u,a);const[f,h]=lo(d.shape,u),p=tt(h),m=St({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=nd(m,m.dtype,"any",n);let v;if(i){const b=zs(f,l);v=St({inputs:{x:g},backend:n,attrs:{shape:b}})}else v=St({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const OVe={kernelName:IS,backendName:"webgl",kernelFunc:MVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PVe{constructor(t,n,s){this.variableNames=["A"];const{windowSize:o,batchSize:r,outSize:i}=t;s||this.variableNames.push("bestIndicesA"),this.outputShape=[r,i];const a=n==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FVe{constructor(t,n,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,oe(t.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const r=t[t.length-1],i=Math.ceil(r/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=es(l),c=Vo("coords",l);let d,f;if(i===1){f=l+1;const S=es(f);d=`
        ${S} sourceLocR = ${S}(${c.join()}, 0);
        ++${c[l-1]};
        ${S} sourceLocG = ${S}(${c.join()}, 0);
        ++${c[l-2]};
        ${S} sourceLocA = ${S}(${c.join()}, 0);
        --${c[l-1]};
        ${S} sourceLocB = ${S}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],m=h.map(S=>"int "+S),g=Vo("sourceLocR",f-1).concat("inIdx.r"),v=Vo("sourceLocG",f-1).concat("inIdx.g"),b=Vo("sourceLocB",f-1).concat("inIdx.b"),w=Vo("sourceLocA",f-1).concat("inIdx.a"),y=s==="max"?"greaterThan":"lessThan",k=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()})));`,x=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,C=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${C}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${x};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${k}
          vec4 candidate = ${x};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yH(e,t,n,s=null){let o=t.shape[0],r=t.shape[1];s!=null&&(o=s.shape[0],r=s.shape[1]);const i=W1(r),a={windowSize:i,inSize:r,batchSize:o,outSize:Math.ceil(r/i)},l=new PVe(a,n,s==null),u=[t];s!=null&&u.push(s);const c=e.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=yH(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function wH(e,t,n,s=null){const o=s!=null?s.shape:t.shape,r=o[o.length-1],i=W1(r),a=new FVe(o,i,n,s==null),l=s==null?[t]:[t,s],u=e.runWebGLProgram(a,l,"int32");if(u.shape.length===t.shape.length){const c=wH(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function kH(e,t,n,s){const o=[n];if(xo("arg"+s.charAt(0).toUpperCase()+s.slice(1),o,t.shape.length),!et().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const r=[],i=e.texData.get(t.dataId),a=i!==null&&i.isPacked;let l=t;a&&(l=e.unpackTensor(t),r.push(l));const[u,c]=lo(l.shape,o),d=tt(c),f=St({inputs:{x:l},backend:e,attrs:{shape:[-1,d]}});r.push(f);const h=yH(e,f,s);r.push(h);const p=St({inputs:{x:h},backend:e,attrs:{shape:u}});return r.forEach(m=>e.disposeIntermediateTensorInfo(m)),p}return wH(e,t,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;let i=yn(r,o.shape);const a=Es(i,o.shape.length);let l=o;const u=[];a!=null&&(l=wo({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Ms(i.length,l.shape.length)),xo("argMax",[i[0]],l.shape.length);const c=kH(n,l,i[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const BVe={kernelName:Dy,backendName:"webgl",kernelFunc:LVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;let i=yn(r,o.shape);const a=Es(i,o.shape.length);let l=o;const u=[];a!=null&&(l=wo({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Ms(i.length,l.shape.length)),xo("argMin",[i[0]],l.shape.length);const c=kH(n,l,i[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const VVe={kernelName:Ry,backendName:"webgl",kernelFunc:zVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WVe=$i+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,HVe=Mn({opSnippet:WVe}),UVe={kernelName:Nm,backendName:"webgl",kernelFunc:HVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jVe=$i+"return log(x + sqrt(x * x + 1.0));",GVe=Mn({opSnippet:jVe}),KVe={kernelName:Am,backendName:"webgl",kernelFunc:GVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qVe=$i+`
  return atan(x);
`,YVe=Mn({opSnippet:qVe}),XVe={kernelName:Dm,backendName:"webgl",kernelFunc:YVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZVe=oVe+`
  return atan(a, b);
`,JVe=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+rVe+`
  return result;
`,QVe=Co({opSnippet:ZVe,packedOpSnippet:JVe}),eWe={kernelName:Mm,backendName:"webgl",kernelFunc:QVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tWe=$i+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,nWe=Mn({opSnippet:tWe}),sWe={kernelName:Rm,backendName:"webgl",kernelFunc:nWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zp{constructor(t,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,a=t.strideHeight,l=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const m=n==="avg",g=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,v=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let b="0.0";if(m||(b="-1.0 / 1e-20"),s){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?r?g:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let y=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(y="avgValue / count");const k=Math.floor(i/4)*4,x=i%4,C=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${k}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${C}
          }

          int xC = xCCorner + ${k};
          if (${x===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${x===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${x===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${C}
          }
        }
        setOutput(${y});
      }
    `}}class fT{constructor(t,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,a=t.strideDepth,l=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,v=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const w=n==="avg";let y="0.0";if(w||(y="-1.0 / 1e-20"),s){const A=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${v}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${A} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?r?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / count");const C=Math.floor(i/4)*4,S=i%4,T=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${v}, ${b});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${C}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${C};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${T}
            }
          }
          setOutput(${x});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;Hg(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;oe(Po(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ki(o.shape,r,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&zn(c.inShape,c.outShape))return Qo({inputs:{x:o},backend:n});const d=new Zp(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const rWe={kernelName:My,backendName:"webgl",kernelFunc:oWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s,c=[1,1,1],d=cl(o.shape,r,i,c,a,l,u),f=new fT(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const aWe={kernelName:Oy,backendName:"webgl",kernelFunc:iWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lWe{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=l-1-t.padInfo.top,d=u-1-t.padInfo.left,f=1/(n*s);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class uWe{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,s=t.filterHeight,o=t.filterWidth,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=d-1-t.padInfo.front,m=f-1-t.padInfo.top,g=h-1-t.padInfo.left,v=1/(n*s*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cWe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],f=cl(i.shape,a,l,d,u,c),h=new uWe(f);return n.runWebGLProgram(h,[o],i.dtype)}const dWe={kernelName:TS,backendName:"webgl",kernelFunc:cWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fWe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r;Hg([o,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,c=ki(i.shape,a,l,1,u),d=new lWe(c);return n.runWebGLProgram(d,[o],i.dtype)}const hWe={kernelName:ES,backendName:"webgl",kernelFunc:fWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pWe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r}=t,{transposeA:i,transposeB:a}=s;return Rb({a:o,b:r,transposeA:i,transposeB:a,backend:n})}const mWe={kernelName:Py,backendName:"webgl",kernelFunc:pWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gWe{constructor(t,n,s,o,r,i){this.outputShape=[],this.variableNames=["x","mean","variance"],dn(t,n),dn(t,s);let a="0.0";o!=null&&(dn(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";r!=null&&(dn(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vWe{constructor(t,n,s,o,r,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],dn(t,n),dn(t,s);let a="vec4(0.0)";o!=null&&(dn(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";r!=null&&(dn(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bWe=({inputs:e,backend:t,attrs:n})=>{const{x:s,mean:o,variance:r,offset:i,scale:a}=e;oe(o.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),oe(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),oe(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[s,o,r];let c=null;i!=null&&(c=i.shape,u.push(i));let d=null;a!=null&&(d=a.shape,u.push(a));const f=et().getBool("WEBGL_PACK_NORMALIZATION")?new vWe(s.shape,o.shape,r.shape,c,d,l):new gWe(s.shape,o.shape,r.shape,c,d,l);return t.runWebGLProgram(f,u,u[0].dtype)},yWe={kernelName:qy,backendName:"webgl",kernelFunc:bWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wWe{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=es(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=kWe(this.rank);let o;const r=t.map((i,a)=>`sourceLoc.${bC[a]} = start[${a}] + coords.${bC[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${r.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${s}));
      }
    `}}const bC=["x","y","z","w","u","v"];function kWe(e){if(e===1)return"sourceLoc";if(e<=6)return bC.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xWe{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=es(this.rank),s=Vo("coords",this.rank),o=Vo("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${r})`,a=`
      result.x = ${i};
      if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((c,d)=>`start[${d}]`).join()});`:t.map((c,d)=>`${o[d]} = ${s[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CWe(e,t,n,s){const o=s.texData.get(e.dataId),r=s.makeTensorInfo(n,e.dtype),i=s.texData.get(r.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let a=$I(t,Wt(e.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=s.dataRefCount.get(i.slice.origDataId)||1;return s.dataRefCount.set(i.slice.origDataId,l+1),r}function lh(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,size:i}=s,[a,l]=O1(o,r,i);if(kI(o,a,l),tt(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=p5e(d.values,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,f)}const{isPacked:u}=n.texData.get(o.dataId),c=CI(o.shape,a,l);if(u||!c){const d=et().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xWe(l):new wWe(l),f=[a];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),CWe(o,a,l,n)}const $We={kernelName:x1,backendName:"webgl",kernelFunc:lh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SWe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,crops:i}=s;oe(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((b,w)=>b*w),l=_g(o.shape,r,a),u=Ng(l.length,r.length),c=Ag(o.shape,r,a),d=dE(i,r.length),f=fE(c,i,r.length),h=[],p=St({inputs:{x:o},backend:n,attrs:{shape:l}}),m=wo({inputs:{x:p},backend:n,attrs:{perm:u}}),g=St({inputs:{x:m},backend:n,attrs:{shape:c}}),v=lh({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(m),h.push(g),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},IWe={kernelName:Fy,backendName:"webgl",kernelFunc:SWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i}=s,a=n.readSync(o.dataId),l=n.readSync(r.dataId),u=aH(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}const TWe={kernelName:_S,backendName:"webgl",kernelFunc:EWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _We(e){const{inputs:t,backend:n}=e,{s0:s,s1:o}=t,r=n.readSync(s.dataId),i=n.readSync(o.dataId),a=dn(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const NWe={kernelName:xz,backendName:"webgl",kernelFunc:_We};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AWe="return float(a != b);",xH=Co({opSnippet:AWe,cpuKernelImpl:u5e,dtype:"bool"}),DWe={kernelName:d1,backendName:"webgl",kernelFunc:xH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gg(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.texData.get(s.dataId);return Qo({inputs:{x:o.complexTensorInfos.real},backend:n})}const RWe={kernelName:eI,backendName:"webgl",kernelFunc:Gg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MWe="return float(int(x));";function OWe(e,t){const n=new za(e.shape,MWe),s=t.runWebGLProgram(n,[e],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yC(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return Qo({inputs:{x:o},backend:n});const i=no(o.shape),a=yC({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=gu({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=Gg({inputs:{input:o},backend:n}),a=yC({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!mz(o.dtype,r)){const i=Qo({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(r==="int32")return OWe(o,n);if(r==="bool"){const i=n.makeTensorInfo([],"bool",yo("bool",1)),l=xH({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const PWe={kernelName:Om,backendName:"webgl",kernelFunc:yC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V3="return ceil(x);",FWe=Mn({opSnippet:V3,packedOpSnippet:V3,cpuKernelImpl:U8e}),LWe={kernelName:Pm,backendName:"webgl",kernelFunc:FWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BWe{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zWe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{clipValueMin:r,clipValueMax:i}=s;let a;et().getBool("WEBGL_PACK_CLIP")?a=new zWe(o.shape):a=new BWe(o.shape);const l=[[r],[i]];return n.runWebGLProgram(a,[o],o.dtype,l)}const WWe={kernelName:Fm,backendName:"webgl",kernelFunc:VWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HWe{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W3(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function UWe(e){const{inputs:t,backend:n}=e,{x:s}=t,o=n.texData.get(s.dataId),r=new HWe(s.shape),i=[W3(s,o.complexTensorInfos.real),W3(s,o.complexTensorInfos.imag)];return n.runWebGLProgram(r,i,i[0].dtype)}const jWe={kernelName:Ly,backendName:"webgl",kernelFunc:UWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GWe{constructor(t){this.outputShape=[],this.outputShape=ma(t,1),this.variableNames=t.map((i,a)=>`T${a}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+t[i][1];const s=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];s.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,r=n[n.length-1];s.push(`else setOutput(getT${o}(yR, yC-${r}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KWe{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ma(t,n);const s=this.outputShape,o=s.length,r=es(o),i=Vo("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((m,g)=>`T${g}`);const l=new Array(t.length-1);l[0]=t[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+t[m][n];const u=a[n],c=a.slice(-2),d=a.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];f+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${U0(a,u,g)}),
            vec2(${U0(c,u,g)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${U0(a,u,p)}),
          vec2(${U0(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${r} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${s[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${s[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${s[o-2]} &&
            ${i[o-1]} < ${s[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function U0(e,t,n){const s=e.indexOf(t);return e.map((r,i)=>i===s?`${r} - ${n}`:r).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cw(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.texData.get(s.dataId);return Qo({inputs:{x:o.complexTensorInfos.imag},backend:n})}const qWe={kernelName:US,backendName:"webgl",kernelFunc:cw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Md(e,t,n){const s=e[0].dtype;if(s==="complex64"){const c=e.map(m=>Gg({inputs:{input:m},backend:n})),d=e.map(m=>cw({inputs:{input:m},backend:n})),f=Md(c,t,n),h=Md(d,t,n),p=gu({inputs:{real:f,imag:h},backend:n});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),d.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}let o=n.shouldExecuteOnCPU(e);if(s==="string"&&(o=!0),o){const c=e.map(v=>{const b=tt(v.shape.slice(t));return St({inputs:{x:v},backend:n,attrs:{shape:[-1,b]}})}),d=c.map(v=>({vals:n.readSync(v.dataId),shape:v.shape})),f=ma(c.map(v=>v.shape),1),h=c[0].shape[0]===1,p=j8e(d,f,s,h),m=ma(e.map(v=>v.shape),t),g=n.makeTensorInfo(m,s,p);return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}if(e.length>et().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(e.length/2),d=Md(e.slice(0,c),t,n),f=Md(e.slice(c),t,n),h=Md([d,f],t,n);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}if(et().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const c=new KWe(e.map(d=>d.shape),t);return n.runWebGLProgram(c,e,s)}const{tensors2D:r,outShape:i}=YWe(e,t,n),a=new GWe(r.map(c=>c.shape)),l=n.runWebGLProgram(a,r,s);r.forEach(c=>n.disposeIntermediateTensorInfo(c));const u=St({inputs:{x:l},attrs:{shape:i},backend:n});return n.disposeIntermediateTensorInfo(l),u}function YWe(e,t,n){const s=ma(e.map(r=>r.shape),t);return{tensors2D:e.map(r=>St({inputs:{x:r},attrs:{shape:[-1,tt(r.shape.slice(t))]},backend:n})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CH(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s,r=yn(o,t[0].shape)[0],i=ma(t.map(u=>u.shape),r);if(tt(i)===0)return n.makeTensorInfo(i,t[0].dtype,[]);const a=t.filter(u=>tt(u.shape)>0);if(a.length===1)return Qo({inputs:{x:a[0]},backend:n});const l=a.map(u=>u.shape);return lE(l,r),Md(a,r,n)}const XWe={kernelName:By,backendName:"webgl",kernelFunc:CH};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $H{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,a=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,m=t.inChannels%4,g=t.dataFormat==="channelsLast",v=g?1:2,b=g?2:3,w=g?3:1;let y="",k="";s&&(o?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:y=`
          float activation(float x) {
            ${s}
          }
        `,k="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${x}
        ${k}
        setOutput(result);
      }
    `}}class ZWe{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,s=t.padInfo.top,o=t.padInfo.left,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,m=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${r}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${s}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JWe{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=nr(this.outputShape.length);const{dataFormat:s}=n,o=Uo(),r=s==="channelsLast",i=r?0:1,a=r?1:2,l=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${t[1]} && pos < ${t[0]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.y + ${d};
          pos = rc.x + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${r}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SH({x:e,filter:t,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const l=e.shape,u=s.texData.get(e.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const v=[];if(!((d===1||f===1)&&c>bH)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&zn(u.shape.slice(-3),l.slice(-3))){const y=l[0]*l[1]*(l[2]+1),k={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},x=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,oe(Db(u.shape,k.shape),()=>`packed reshape ${u.shape} to ${k.shape} isn't free`);const C=St({inputs:{x:t},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(C);const S=Rb({a:k,b:C,backend:s,transposeA:p,transposeB:m,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i}),T=s.texData.get(S.dataId);oe(T.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=x,T.shape=n.outShape,g=Qo({inputs:{x:S},backend:s}),g.shape=n.outShape,v.push(S)}else{const y=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],k=St({inputs:{x:e},backend:s,attrs:{shape:[1,y,n.inChannels]}}),x=St({inputs:{x:t},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=Rb({a:k,b:x,transposeA:p,transposeB:m,backend:s,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i});g=St({inputs:{x:C},backend:s,attrs:{shape:n.outShape}}),v.push(k),v.push(x),v.push(C)}for(const y of v)s.disposeIntermediateTensorInfo(y);return g}function IH({x:e,filter:t,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",m=l*u*c,g=f*d,v=[m,g],b=!0,w=!1,y=[],k=St({inputs:{x:e},backend:s,attrs:{shape:e.shape.slice(1)}}),x=St({inputs:{x:t},backend:s,attrs:{shape:[1,m,tt(t.shape)/m]}});y.push(k),y.push(x);const C=new JWe(v,n),S=[k.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=s.runWebGLProgram(C,[k],"float32",S),A=St({inputs:{x:T},backend:s,attrs:{shape:[1,v[0],v[1]]}});y.push(T),y.push(A);const R=o!=null,L=r!=null,P=a==="leakyrelu",V=a?aw(a,!0):null,H=new vH(A.shape,x.shape,[1,g,n.outChannels],b,w,R,V,L,P),F=[A,x];if(o&&F.push(o),L&&F.push(r),P){const J=s.makeTensorInfo([],"float32",lu(i,"float32"));F.push(J),y.push(J)}const M=s.runWebGLProgram(H,F,"float32"),B=p?[1,f,d,n.outChannels]:[1,n.outChannels,f,d],Y=St({inputs:{x:M},backend:s,attrs:{shape:B}});y.push(M);for(const J of y)s.disposeIntermediateTensorInfo(J);return Y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=s,d=dl(l),f=ko(o.shape,r.shape,i,u,a,c,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=SH({x:o,filter:r,convInfo:f,backend:n});else if(et().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)h=IH({x:o,filter:r,convInfo:f,backend:n});else{const m=new $H(f);h=n.runWebGLProgram(m,[o,r],"float32")}const p=St({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const eHe={kernelName:zy,backendName:"webgl",kernelFunc:QWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tHe{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,r=t.padInfo.left,i=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              if (${i}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class nHe{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,l=s-1-t.padInfo.left,u=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class sHe{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,s=t.strideHeight,o=t.strideWidth,r=t.padInfo.front,i=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${r};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${i};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class oHe{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,s=t.filterHeight,o=t.filterWidth,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=n-1-t.padInfo.front,u=s-1-t.padInfo.top,c=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${r}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=s,d=dl(l),f=ko(o.shape,c,i,1,a,u,!1,d),h=new tHe(f);return n.runWebGLProgram(h,[o,r],"float32")}const iHe={kernelName:AS,backendName:"webgl",kernelFunc:rHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aHe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=s,d=dl(u),f=ko(i,r.shape,a,1,l,c,!1,d),h=new nHe(f);return n.runWebGLProgram(h,[o,r],"float32")}const lHe={kernelName:Vy,backendName:"webgl",kernelFunc:aHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s,u=uu(o.shape,r.shape,i,l,a),c=new ZWe(u);return n.runWebGLProgram(c,[o,r],"float32")}const cHe={kernelName:Wy,backendName:"webgl",kernelFunc:uHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,filterShape:l}=s,u=uu(o.shape,l,i,1,a),c=new sHe(u);return n.runWebGLProgram(c,[o,r],"float32")}const fHe={kernelName:DS,backendName:"webgl",kernelFunc:dHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hHe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{pad:i,strides:a,inputShape:l}=s,u=uu(l,r.shape,a,1,i),c=new oHe(u);return n.runWebGLProgram(c,[o,r],"float32")}const pHe={kernelName:RS,backendName:"webgl",kernelFunc:hHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mHe=ah+`
  return cos(x);
`,gHe=Mn({opSnippet:mHe}),vHe={kernelName:Lm,backendName:"webgl",kernelFunc:gHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bHe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,yHe=Mn({opSnippet:bHe}),wHe={kernelName:Bm,backendName:"webgl",kernelFunc:yHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kHe{constructor(t,n,s,o,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,u]=t,[c]=n,[d,f]=s;this.outputShape=[c,d,f,u];const h=o==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,v,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[w,y,k]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${y};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${r}));
          return;
        }
        float in_x = ${k};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${r}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xHe=e=>{const{inputs:t,backend:n,attrs:s}=e,{image:o,boxes:r,boxInd:i}=t,{cropSize:a,method:l,extrapolationValue:u}=s,c=new kHe(o.shape,r.shape,a,l,u);return n.runWebGLProgram(c,[o,r,i],"float32")},CHe={kernelName:OS,backendName:"webgl",kernelFunc:xHe};class H3{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;const o=t.length,r=n?"1.0":`getX(${U3(o,"coords")})`,i=t[t.length-1];let a="",l="";n?(a=s?`end != ${i-1}`:"end != 0",l=s?"end + 1":"end - 1"):(a=s?`end + pow2 < ${i}`:"end >= pow2",l=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${es(o)} coords = getOutputCoords();
        int end = ${j3(o,"coords")};
        float val = ${r};
        int pow2 = int(pow(2.0, index));
        if (${a}) {
          int idx = ${l};
          ${j3(o,"coords")} = idx;
          val *= getX(${U3(o,"coords")});
        }
        setOutput(val);
      }
    `}}function U3(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative product for rank ${e} is not yet supported`)}function j3(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw Error(`Cumulative product for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $He(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:i,reverse:a}=s,l=o.shape.length,u=Es([r],l);let c=o;u!=null&&(c=wo({inputs:{x:o},backend:n,attrs:{perm:u}}));const d=Ms(1,l)[0];if(d!==l-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${o.shape.length-1} but got axis=${r}`);const f=c.shape[d];let h=Qo({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const m=new H3(c.shape,!1,a),g=[[p]],v=h;h=n.runWebGLProgram(m,[h],h.dtype,g),n.disposeIntermediateTensorInfo(v)}if(i){const p=new H3(c.shape,i,a),m=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(m)}if(u!=null){const p=cu(u),m=wo({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),m}return h}const SHe={kernelName:MS,backendName:"webgl",kernelFunc:$He};class G3{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;const o=t.length,r=n?"0.0":`getX(${K3(o,"coords")})`,i=t[t.length-1];let a="",l="";n?(a=s?`end != ${i-1}`:"end != 0",l=s?"end + 1":"end - 1"):(a=s?`end + pow2 < ${i}`:"end >= pow2",l=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${es(o)} coords = getOutputCoords();
        int end = ${q3(o,"coords")};
        float val = ${r};
        int pow2 = int(pow(2.0, index));
        if (${a}) {
          int idx = ${l};
          ${q3(o,"coords")} = idx;
          val += getX(${K3(o,"coords")});
        }
        setOutput(val);
      }
    `}}function K3(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function q3(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:i,reverse:a}=s,l=o.shape.length,u=Es([r],l);let c=o;u!=null&&(c=wo({inputs:{x:o},backend:n,attrs:{perm:u}}));const d=Ms(1,l)[0];if(d!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${o.shape.length-1} but got axis=${r}`);const f=c.shape[d];let h=Qo({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const m=new G3(c.shape,!1,a),g=[[p]],v=h;h=n.runWebGLProgram(m,[h],h.dtype,g),n.disposeIntermediateTensorInfo(v)}if(i){const p=new G3(c.shape,i,a),m=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(m)}if(u!=null){const p=cu(u),m=wo({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),m}return h}const EHe={kernelName:Hy,backendName:"webgl",kernelFunc:IHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function THe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const l=n.readSync(o.dataId),u=n.readSync(r.dataId),c=aH(l,u,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(r),c=H8e(l,u,i,a);return n.makeTensorInfo(c.shape,r.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const _He={kernelName:Cz,backendName:"webgl",kernelFunc:THe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NHe{constructor(t,n,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockSize:r,dataFormat:i}=s,a=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],u=i==="NHWC"?o.shape[2]:o.shape[3],c=i==="NHWC"?o.shape[3]:o.shape[1],d=l*r,f=u*r,h=c/(r*r),p=i==="NHWC"?[a,d,f,h]:[a,h,d,f],m=new NHe(p,r,i);return n.runWebGLProgram(m,[o],o.dtype)}const DHe={kernelName:PS,backendName:"webgl",kernelFunc:AHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EH{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=nr(this.outputShape.length);const i=t.filterHeight,a=t.filterWidth,l=t.outChannels/t.inChannels;let u="",c="";s&&(o?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:u=`
          float activation(float x) {
            ${s}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TH{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=nr(this.outputShape.length);const i=t.outChannels/t.inChannels,a=t.padInfo.left,l=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const b=v*2;if(h+=`
          xC = xCCorner + ${b*u};
          `,l===1){if(b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,u===1&&b>0?h+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const w=a%2===0?fz(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,u>1&&(h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                      xTexelC${b} = getX(batch, xR, xCOffset, d1);
                      xTexelC${b}Ready = 1;
                    }
                    `),h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                  `):w===1?h+=`
                    xC${b+1} = xTexelC${b};
                    `:h+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(h+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(h+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";s&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:p=`vec4 activation(vec4 x) {
          ${s}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=s;let c=l;c==null&&(c=[1,1]),oe(Po(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=ko(o.shape,r.shape,i,c,a,u,!0);let f;et().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new TH(d):f=new EH(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,r],"float32",h)}const MHe={kernelName:Uy,backendName:"webgl",kernelFunc:RHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OHe{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,r=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class PHe{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=n-1-t.padInfo.top,a=s-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=s,d=ko(o.shape,c,i,a,l,u,!0),f=new OHe(d);return n.runWebGLProgram(f,[o,r],"float32")}const LHe={kernelName:FS,backendName:"webgl",kernelFunc:FHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BHe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=s,d=ko(c,r.shape,i,a,l,u,!0),f=new PHe(d);return n.runWebGLProgram(f,[o,r],"float32")}const zHe={kernelName:LS,backendName:"webgl",kernelFunc:BHe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VHe{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WHe(e){const{inputs:t,backend:n}=e,{x:s}=t,o=[...s.shape,...s.shape],r=tt(s.shape),i=St({inputs:{x:s},backend:n,attrs:{shape:[r]}}),a=new VHe(r),l=n.runWebGLProgram(a,[i],i.dtype),u=St({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const HHe={kernelName:$z,backendName:"webgl",kernelFunc:WHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UHe{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:s,padInfo:o,strideHeight:r,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=t,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${i});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s,u=$g(o.shape,r.shape,i,a,"NHWC",l);let c;const d=new UHe(u);c=n.runWebGLProgram(d,[o,r],"float32");const f=St({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const GHe={kernelName:jy,backendName:"webgl",kernelFunc:jHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(e){const{inputs:t,backend:n,attrs:s}=e,{equation:o}=s,r=t,{allDims:i,summedDims:a,idDims:l}=wE(o,r.length);xE(i.length,l,r);const{path:u,steps:c}=CE(a,l),d=c.length;let f=null,h=i.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:v,expandDims:b}=kE(h,l[g]);let w;$E(v)?w=r[g]:(w=wo({inputs:{x:r[g]},backend:n,attrs:{perm:v}}),p.push(w));const y=w.shape.slice();for(let k=0;k<b.length;++k)y.splice(b[k],0,1);zn(w.shape,y)||(w=St({inputs:{x:w},backend:n,attrs:{shape:y}}),p.push(w)),f===null?f=w:(f=dT({inputs:{a:w,b:f},backend:n}),p.push(f))}m<d-1&&(u[m]>=0&&(f=uw({inputs:{x:f},backend:n,attrs:{axis:u[m]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const qHe={kernelName:Sz,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YHe="return (x >= 0.0) ? x : (exp(x) - 1.0);",XHe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,ZHe=Mn({opSnippet:YHe,packedOpSnippet:XHe}),JHe={kernelName:Vm,backendName:"webgl",kernelFunc:ZHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QHe="return (b >= 1.0) ? a : a * (b + 1.0);",eUe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,tUe=e=>{const{inputs:t,backend:n}=e,{dy:s,y:o}=t,r=et().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jg(eUe,s.shape,o.shape):new _f(QHe,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],s.dtype)},nUe={kernelName:BS,backendName:"webgl",kernelFunc:tUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sUe=`
  return vec4(equal(a, b));
`,oUe="return float(a == b);",rUe=Co({opSnippet:oUe,packedOpSnippet:sUe,dtype:"bool",cpuKernelImpl:G8e}),iUe={kernelName:Gy,backendName:"webgl",kernelFunc:rUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aUe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${hE};
  float a1 = ${pE};
  float a2 = ${mE};
  float a3 = ${gE};
  float a4 = ${vE};
  float a5 = ${bE};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,lUe=Mn({opSnippet:aUe}),uUe={kernelName:Wm,backendName:"webgl",kernelFunc:lUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cUe=ah+`
  return exp(x);
`,dUe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_H=Mn({opSnippet:cUe,packedOpSnippet:dUe,cpuKernelImpl:K8e,dtype:"float32"}),fUe={kernelName:Hm,backendName:"webgl",kernelFunc:_H};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wC(e){const{inputs:t,attrs:n,backend:s}=e,{dim:o}=n,{input:r}=t,i=r.shape.length,a=r.shape.slice();let l=o;return o<0&&(oe(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),St({inputs:{x:r},backend:s,attrs:{shape:a}})}const hUe={kernelName:Ky,backendName:"webgl",kernelFunc:wC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y3="return exp(x) - 1.0;",pUe=Mn({opSnippet:Y3,packedOpSnippet:Y3,cpuKernelImpl:q8e}),mUe={kernelName:Um,backendName:"webgl",kernelFunc:pUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X3{constructor(t,n,s){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const r=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=s?`${o}.0`:"1.0";let a;if(t==="real")a="return real * expR - imag * expI;";else if(t==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${r};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NH(e,t,n){const s=n.texData.get(e.dataId),o=tt(e.shape),r=e.shape[e.shape.length-1],i=o/r,a=St({inputs:{x:e},backend:n,attrs:{shape:[i,r]}}),l=a.shape,u=new X3("real",l,t),c=new X3("imag",l,t),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=gu({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const m=St({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gUe(e){const{inputs:t,backend:n}=e,{input:s}=t;return NH(s,!1,n)}const vUe={kernelName:zS,backendName:"webgl",kernelFunc:gUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bUe{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kg(e){const{backend:t,attrs:n}=e,{shape:s,value:o}=n;let{dtype:r}=n;if(r=r||Im(o),r==="string"){const i=Xo(r,tt(s));return i.fill(o),t.makeTensorInfo(s,r,i)}else{const i=new bUe(s,o),a=[[o]];return t.runWebGLProgram(i,[],r,a)}}const yUe={kernelName:VS,backendName:"webgl",kernelFunc:Kg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wUe{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kUe={kernelName:WS,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,s=t,o=new wUe(n.shape);return s.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z3="return floor(x);",xUe=Mn({opSnippet:Z3,packedOpSnippet:Z3,cpuKernelImpl:Y8e}),CUe={kernelName:jm,backendName:"webgl",kernelFunc:xUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ue=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,SUe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,IUe=Co({opSnippet:$Ue,packedOpSnippet:SUe,dtype:"int32"}),EUe={kernelName:Gm,backendName:"webgl",kernelFunc:IUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TUe{constructor(t){this.variableNames=["A"];const n=Uo(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${s}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ue{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Uo(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${s}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NUe={kernelName:fIe,backendName:"webgl",kernelFunc:AUe};let $d;function AUe(e){const{inputs:t,backend:n,attrs:s}=e;let{pixels:o}=t;const{numChannels:r}=s,i=typeof HTMLVideoElement!="undefined"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement!="undefined"&&o instanceof HTMLImageElement,[l,u]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[u,l],d=[u,l,r];(a||i)&&($d==null&&($d=document.createElement("canvas").getContext("2d")),$d.canvas.width=l,$d.canvas.height=u,$d.drawImage(o,0,0,l,u),o=$d.canvas);const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=Nr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const h=et().getBool("WEBGL_PACK")?new _Ue(d):new TUe(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DUe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s,m=dl(c),g=ko(o.shape,r.shape,l,d,u,f,!1,m);let v;const b=[];if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))v=SH({x:o,filter:r,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(et().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)v=IH({x:o,filter:r,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const y=i!=null,k=a!=null,x=h==="leakyrelu",C=h?aw(h,!1):null,S=new $H(g,y,C,k,x),T=[o,r];if(i&&T.push(i),a&&T.push(a),x){const A=n.makeTensorInfo([],"float32",lu(p,"float32"));T.push(A),b.push(A)}v=n.runWebGLProgram(S,T,"float32")}const w=St({inputs:{x:v},backend:n,attrs:{shape:g.outShape}});return b.push(v),b.forEach(y=>n.disposeIntermediateTensorInfo(y)),w}const RUe={kernelName:mb,backendName:"webgl",kernelFunc:DUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MUe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=s,p=[];let m=c;m==null&&(m=[1,1]),oe(Po(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=ko(o.shape,r.shape,l,m,u,d,!0),v=et().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=f?aw(f,v):null,w=[o,r],y=i!=null,k=a!=null,x=f==="leakyrelu";if(y&&w.push(i),k&&w.push(a),x){const A=n.makeTensorInfo([],"float32",lu(h,"float32"));w.push(A),p.push(A)}let C;v?C=new TH(g,y,b,k,x):C=new EH(g,y,b,k,x);const S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=n.runWebGLProgram(C,w,"float32",S);return p.forEach(A=>n.disposeIntermediateTensorInfo(A)),T}const OUe={kernelName:Az,backendName:"webgl",kernelFunc:MUe};class PUe{constructor(t,n,s){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=s;const o=es(n.length),r=es(s.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${o} strides = ${o}(${this.strides});
         void main() {
          ${r} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${i};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FUe(e){const{inputs:t,backend:n}=e,{params:s,indices:o}=t,r=o.shape,i=r[r.length-1],a=tt(s.shape),[l,u,c,d]=wI(s,o),f=St({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),h=St({inputs:{x:s},backend:n,attrs:{shape:[tt(s.shape)/c,c]}});if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const v=n.readSync(o.dataId),b=n.bufferSync(s),w=X8e(v,b,s.dtype,u,i,c,d,s.shape,a);return n.makeTensorInfo(l,s.dtype,w.values)}const p=new PUe(i,d,[u,c]),m=n.runWebGLProgram(p,[h,f],h.dtype),g=St({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const LUe={kernelName:Iz,backendName:"webgl",kernelFunc:FUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BUe{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const s=es(this.rank),o=zUe(t);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function zUe(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<e.length;o++)o===2?s.push("index"):s.push(`${n[o]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AH(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,indices:r}=t,{axis:i,batchDims:a}=s,l=yn(i,o.shape)[0];if(et().get("DEBUG")){const b=n.readSync(r.dataId),w=o.shape[l];for(let y=0;y<b.length;++y){const k=b[y];oe(k<=w-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${w-1}]`)}}const u=IE(o,r,l,a),c=tt(r.shape),d=[],f=St({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=St({inputs:{x:r},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(f),d.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,r])||o.dtype==="string"){const b=n.bufferSync(h),w=n.bufferSync(f),y=Z8e(w,b,p);return d.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.makeTensorInfo(u.outputShape,y.dtype,y.values)}const m=new BUe(f.shape,p),g=n.runWebGLProgram(m,[f,h],f.dtype);d.push(g);const v=St({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const VUe={kernelName:Yy,backendName:"webgl",kernelFunc:AH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WUe="return float(a > b);",HUe=`
  return vec4(greaterThan(a, b));
`,UUe=Co({opSnippet:WUe,packedOpSnippet:HUe,cpuKernelImpl:J8e,dtype:"bool"}),jUe={kernelName:Xy,backendName:"webgl",kernelFunc:UUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GUe="return float(a >= b);",KUe=`
  return vec4(greaterThanEqual(a, b));
`,qUe=Co({opSnippet:GUe,packedOpSnippet:KUe,dtype:"bool",cpuKernelImpl:Q8e}),YUe={kernelName:Km,backendName:"webgl",kernelFunc:qUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XUe(e){const{inputs:t,backend:n}=e,{input:s}=t;return NH(s,!0,n)}const ZUe={kernelName:HS,backendName:"webgl",kernelFunc:XUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JUe="return float(!isnan(x) && !isinf(x));",QUe=Mn({opSnippet:JUe,dtype:"bool"}),e9e={kernelName:Ym,backendName:"webgl",kernelFunc:QUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9e="return float(isinf(x));",n9e=Mn({opSnippet:t9e,dtype:"bool"}),s9e={kernelName:Xm,backendName:"webgl",kernelFunc:n9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o9e="return float(isnan(x));",r9e=Mn({opSnippet:o9e,dtype:"bool"}),i9e={kernelName:Zm,backendName:"webgl",kernelFunc:r9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a9e="return float(a < b);",l9e=`
  return vec4(lessThan(a, b));
`,u9e=Co({opSnippet:a9e,packedOpSnippet:l9e,cpuKernelImpl:e5e,dtype:"bool"}),c9e={kernelName:Jy,backendName:"webgl",kernelFunc:u9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9e="return float(a <= b);",f9e=`
  return vec4(lessThanEqual(a, b));
`,h9e=Co({opSnippet:d9e,packedOpSnippet:f9e,cpuKernelImpl:t5e,dtype:"bool"}),p9e={kernelName:Qy,backendName:"webgl",kernelFunc:h9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9e(e){const{backend:t,attrs:n}=e,{start:s,stop:o,num:r}=n,i=n5e(s,o,r);return t.makeTensorInfo([i.length],"float32",i)}const g9e={kernelName:jS,backendName:"webgl",kernelFunc:m9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v9e=ah+`
  return x < 0.0 ? 0./0. : log(x);
`,b9e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,y9e=Mn({opSnippet:v9e,packedOpSnippet:b9e,cpuKernelImpl:s5e}),w9e={kernelName:Jm,backendName:"webgl",kernelFunc:y9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k9e=ah+`
  return log(1.0 + x);
`,x9e=Mn({opSnippet:k9e}),C9e={kernelName:Qm,backendName:"webgl",kernelFunc:x9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $9e="return float(a >= 1.0 && b >= 1.0);",S9e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,I9e=Co({opSnippet:$9e,packedOpSnippet:S9e,dtype:"bool"}),E9e={kernelName:e1,backendName:"webgl",kernelFunc:I9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T9e="return float(!(x >= 1.0));",_9e=Mn({opSnippet:T9e}),N9e={kernelName:t1,backendName:"webgl",kernelFunc:_9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A9e="return float(a >= 1.0 || b >= 1.0);",D9e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,R9e=Co({opSnippet:A9e,packedOpSnippet:D9e,dtype:"bool"}),M9e={kernelName:n1,backendName:"webgl",kernelFunc:R9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O9e{constructor(t,n,s,o,r){this.variableNames=["x"],this.outputShape=[];const i=n,a=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P9e{constructor(t,n,s,o,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F9e=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{depthRadius:r,bias:i,alpha:a,beta:l}=s,u=et().getBool("WEBGL_PACK_NORMALIZATION")?new P9e(o.shape,r,i,a,l):new O9e(o.shape,r,i,a,l);return n.runWebGLProgram(u,[o],o.dtype)},L9e={kernelName:s1,backendName:"webgl",kernelFunc:F9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B9e{constructor(t,n,s,o,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=s,this.alpha=o,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${r})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${r});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z9e=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o,y:r,dy:i}=t,{depthRadius:a,bias:l,alpha:u,beta:c}=s,d=new B9e(o.shape,a,l,u,c);return n.runWebGLProgram(d,[o,r,i],o.dtype)},V9e={kernelName:GS,backendName:"webgl",kernelFunc:z9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W9e(e,t,n,s){const o=tt(t),i=tt(e.shape)/o,a=St({inputs:{x:e},attrs:{shape:[i,o]},backend:s}),l=nd(a,e.dtype,"max",s),u=St({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DH(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reductionIndices:r,keepDims:i}=s,a=o.shape.length,l=yn(r,o.shape);let u=l;const c=Es(u,a),d=c!=null,f=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const w=n.texData.get(h.dataId).values,y=new Array(a);for(let C=0;C<y.length;C++)y[C]=o.shape[c[C]];const k=cT(w,o.shape,o.dtype,c,y);h=n.makeTensorInfo(y,o.dtype);const x=n.texData.get(h.dataId);x.values=k}else h=lw(o,c,n);u=Ms(u.length,a)}xo("max",u,a);const[p,m]=lo(h.shape,u);let g=p;i&&(g=zs(p,l));let v;if(f){const w=n.texData.get(h.dataId).values,y=o5e(w,tt(m),g,o.dtype);v=n.makeTensorInfo(g,o.dtype);const k=n.texData.get(v.dataId);k.values=y}else v=W9e(h,m,g,n);return d&&n.disposeIntermediateTensorInfo(h),v}const H9e={kernelName:o1,backendName:"webgl",kernelFunc:DH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U9e=fH+`
  return max(a, b);
`,j9e=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+iw+`
  return result;
`,G9e=Co({opSnippet:U9e,packedOpSnippet:j9e,cpuKernelImpl:r5e}),K9e={kernelName:eg,backendName:"webgl",kernelFunc:G9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;Hg(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;oe(Po(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ki(o.shape,r,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&zn(c.inShape,c.outShape))return Qo({inputs:{x:o},backend:n});const d=new Zp(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const Y9e={kernelName:r1,backendName:"webgl",kernelFunc:q9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dataFormat:l,dimRoundingMode:u}=s,c=[1,1,1],d=cl(o.shape,r,i,c,a,u,l),f=new fT(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const Z9e={kernelName:i1,backendName:"webgl",kernelFunc:X9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J9e{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,s=t.strideWidth,o=t.dilationHeight,r=t.effectiveFilterHeight,i=t.effectiveFilterWidth,a=r-1-t.padInfo.top,l=i-1-t.padInfo.left,u=r*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Q9e{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,s=t.strideHeight,o=t.strideWidth,r=t.dilationDepth,i=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=l-1-t.padInfo.front,f=u-1-t.padInfo.top,h=c-1-t.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${r}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],f=cl(i.shape,a,l,d,u,c),h=new fT(f,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),m=new Q9e(f),g=n.runWebGLProgram(m,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),g}const t7e={kernelName:qS,backendName:"webgl",kernelFunc:e7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r,output:i}=t,a=r;Hg([r,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,f=ki(a.shape,l,u,1,c,d),h=!0,p=new Zp(f,"max",h),m=n.runWebGLProgram(p,[a],a.dtype),g=new J9e(f),v=n.runWebGLProgram(g,[o,m],a.dtype);return n.disposeIntermediateTensorInfo(m),v}const s7e={kernelName:KS,backendName:"webgl",kernelFunc:n7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7e(e,t,n,s){let o=new Zp(n,"max",!1);const r=s.runWebGLProgram(o,[e],"float32");o=new Zp(n,"max",!0,!0,t);const i=s.runWebGLProgram(o,[e],"float32");return[r,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7e={kernelName:Ez,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=t,l=n;oe(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const u=[1,1];oe(Po(r,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${u}'`);const c=ki(s.shape,o,r,u,i),[d,f]=o7e(s,a,c,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i7e(e,t,n,s){const o=tt(t),i=tt(e.shape)/o,a=St({inputs:{x:e},attrs:{shape:[i,o]},backend:s}),l=nd(a,"float32","mean",s),u=St({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7e={kernelName:a1,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{keepDims:o,axis:r}=t,i=n,a=s.shape.length,l=yn(r,s.shape);let u=l;const c=Es(u,a),d=c!=null,f=i.shouldExecuteOnCPU([s]),h=[];let p=s;if(d){if(f){const y=i.texData.get(p.dataId).values,k=new Array(a);for(let S=0;S<k.length;S++)k[S]=s.shape[c[S]];const x=cT(y,s.shape,s.dtype,c,k);p=i.makeTensorInfo(k,s.dtype);const C=i.texData.get(p.dataId);C.values=x}else p=lw(s,c,i);h.push(p),u=Ms(u.length,a)}xo("sum",u,a);const[m,g]=lo(p.shape,u);let v=m;o&&(v=zs(m,l));const b=i7e(p,g,v,i);for(const w of h)i.disposeIntermediateTensorInfo(w);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=yn(r,o.shape);let u=l;const c=Es(u,a);let d=o;c!=null&&(d=wo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Ms(u.length,o.shape.length)),xo("min",u,a);const[f,h]=lo(d.shape,u),p=tt(h),m=St({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=nd(m,m.dtype,"min",n);let v;if(i){const b=zs(f,l);v=St({inputs:{x:g},backend:n,attrs:{shape:b}})}else v=St({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const u7e={kernelName:l1,backendName:"webgl",kernelFunc:l7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7e=fH+`
  return min(a, b);
`,d7e=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+iw+`
  return result;
`,f7e=Co({opSnippet:c7e,packedOpSnippet:d7e,cpuKernelImpl:i5e}),h7e={kernelName:tg,backendName:"webgl",kernelFunc:f7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p7e{constructor(t,n,s){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+t[d]+c[1]);const o=t.length,r=es(o),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+t[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),u=s==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${r} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m7e{constructor(t,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+t[m]+p[1]);const o=t.length,r=es(o),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+t[m]).join(","),l=Vo("rc",o),u=Vo("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=s==="reflect"?0:1;let h="";if(o===1){const p=`
        ${r} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const p=`
        ${r} source = rc;
        ${r} lt = ${r}(lessThan(source, start));
        ${r} gte = ${r}(greaterThanEqual(source, end));
        ${r} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[o-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g7e=({inputs:e,backend:t,attrs:n})=>{const{x:s}=e,{paddings:o,mode:r}=n,i=et().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new m7e(s.shape,o,r):new p7e(s.shape,o,r);return t.runWebGLProgram(i,[s],s.dtype)},v7e={kernelName:u1,backendName:"webgl",kernelFunc:g7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b7e=`if (b == 0.0) return NAN;
  return mod(a, b);`,y7e=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+iw+`
  return result;
`,w7e=Co({opSnippet:b7e,packedOpSnippet:y7e}),k7e={kernelName:ng,backendName:"webgl",kernelFunc:w7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x7e{constructor(t,n,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C7e=`
if (a == b) {
  return 1.0;
};
return a / b;`,$7e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,RH=Co({opSnippet:C7e,packedOpSnippet:$7e,checkOutOfBounds:!0}),S7e={kernelName:zm,backendName:"webgl",kernelFunc:RH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J3="return a - b;",MH=Co({opSnippet:J3,packedOpSnippet:J3,supportsComplex:!0,cpuKernelImpl:x5e}),I7e={kernelName:bg,backendName:"webgl",kernelFunc:MH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OH(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{dim:r}=s,i=yn([r],o.shape),a=DH({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=zs(a.shape,i),u=St({inputs:{x:a},backend:n,attrs:{shape:l}}),c=MH({inputs:{a:o,b:u},backend:n}),d=_H({inputs:{x:c},backend:n}),f=uw({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=St({inputs:{x:f},backend:n,attrs:{shape:l}}),p=RH({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const E7e={kernelName:I1,backendName:"webgl",kernelFunc:OH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T7e(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{numSamples:r,seed:i,normalized:a}=s,l=a?o:OH({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new x7e(u,c,r),f=[[i]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const _7e={kernelName:Tz,backendName:"webgl",kernelFunc:T7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7e=$i+`
  return -x;
`,A7e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function D7e(e){const{inputs:t,backend:n}=e,{x:s}=t;if(n.shouldExecuteOnCPU([s])){const r=n.texData.get(s.dataId),[i,a]=l5e(r.values,s.shape,s.dtype);return n.makeTensorInfo(a,s.dtype,i)}let o;return et().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new tc(s.shape,A7e):o=new za(s.shape,N7e),n.runWebGLProgram(o,[s],s.dtype)}const R7e={kernelName:c1,backendName:"webgl",kernelFunc:D7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M7e=JI;function O7e(e){Er("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s,u=n.readSync(o.dataId),c=n.readSync(r.dataId),{selectedIndices:d}=M7e(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const P7e={kernelName:YS,backendName:"webgl",kernelFunc:O7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F7e=QI;function L7e(e){Er("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s,c=n.readSync(o.dataId),d=n.readSync(r.dataId),{selectedIndices:f,validOutputs:h}=F7e(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const B7e={kernelName:XS,backendName:"webgl",kernelFunc:L7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z7e=eE;function V7e(e){Er("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s,c=n.readSync(o.dataId),d=n.readSync(r.dataId),f=i,h=a,p=l,m=u,{selectedIndices:g,selectedScores:v}=z7e(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const W7e={kernelName:ZS,backendName:"webgl",kernelFunc:V7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H7e{constructor(t,n,s,o){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U7e=e=>{const{inputs:t,backend:n,attrs:s}=e,{indices:o}=t,{depth:r,onValue:i,offValue:a}=s,l=tt(o.shape),u=new H7e(l,r,i,a),c=St({inputs:{x:o},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(u,[c],o.dtype);n.disposeIntermediateTensorInfo(c);const f=[...o.shape,r],h=St({inputs:{x:d},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(d),h},j7e={kernelName:h1,backendName:"webgl",kernelFunc:U7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mb(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="complex64"){const o=Gg({inputs:{input:s},backend:n}),r=Mb({inputs:{x:o},backend:n}),i=cw({inputs:{input:s},backend:n}),a=Mb({inputs:{x:i},backend:n}),l=gu({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return Kg({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:n})}const G7e={kernelName:N1,backendName:"webgl",kernelFunc:Mb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PH(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const o=Gg({inputs:{input:s},backend:n}),r=PH({inputs:{x:o},backend:n}),i=cw({inputs:{input:s},backend:n}),a=Mb({inputs:{x:i},backend:n}),l=gu({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return Kg({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:n})}const K7e={kernelName:f1,backendName:"webgl",kernelFunc:PH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q7e(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s;if(t.length===1)return wC({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const r=t[0].shape,i=t[0].dtype;t.forEach(c=>{wi(r,c.shape,"All tensors passed to stack must have matching shapes"),oe(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(c=>{const d=wC({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=CH({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const Y7e={kernelName:p1,backendName:"webgl",kernelFunc:q7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X7e{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+t[c]+u[1]);const o=t.length,r=es(o),i=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+t[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${r} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z7e{constructor(t,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+t[g]+m[1]);const o=t.length,r=es(o),i=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+t[g]).join(","),l=Vo("rc",o),u=Vo("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${r} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${c}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=o===1?2:4;m<g;m++)p+=`
        ${f[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${r} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FH=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,constantValue:i}=s;if(tt(o.shape)===0){const u=r.map((c,d)=>c[0]+o.shape[d]+c[1]);return Kg({backend:n,attrs:{shape:u,value:i,dtype:o.dtype}})}const a=et().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Z7e(o.shape,r,i):new X7e(o.shape,r,i),l=[[i]];return n.runWebGLProgram(a,[o],o.dtype,l)},J7e={kernelName:m1,backendName:"webgl",kernelFunc:FH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q7e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,eje=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+iw+`
  return result;
`,tje=Co({opSnippet:Q7e,packedOpSnippet:eje}),nje={kernelName:og,backendName:"webgl",kernelFunc:tje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sje(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=[],u=yn(r,o.shape);let c=u;const d=Es(c,a);let f=o;d!=null&&(f=wo({inputs:{x:o},backend:n,attrs:{perm:d}}),c=Ms(c.length,a),l.push(f)),xo("prod",c,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:v}=c5e(f.shape,f.dtype,p,c);h=n.makeTensorInfo(g,v,m)}else{const[p,m]=lo(f.shape,c),g=tt(m),v=St({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),b=vI(o.dtype),w=nd(v,b,"prod",n);h=St({inputs:{x:w},backend:n,attrs:{shape:p}}),l.push(v),l.push(w)}if(i){l.push(h);const p=zs(h.shape,u);h=St({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const oje={kernelName:JS,backendName:"webgl",kernelFunc:sje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LH=e=>{const{backend:t,attrs:n}=e,{start:s,stop:o,step:r,dtype:i}=n,a=d5e(s,o,r,i);return t.makeTensorInfo([a.length],i,a)},rje={kernelName:QS,backendName:"webgl",kernelFunc:LH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ije="return 1.0 / x;",aje=Mn({opSnippet:ije}),lje={kernelName:rg,backendName:"webgl",kernelFunc:aje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uje=$i+`
  return (x < 0.0) ? 0.0 : x;
`,cje=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,dje=Mn({opSnippet:uje,packedOpSnippet:cje}),fje={kernelName:ig,backendName:"webgl",kernelFunc:dje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hje=$i+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,pje=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mje=Mn({opSnippet:hje,packedOpSnippet:pje}),gje={kernelName:ag,backendName:"webgl",kernelFunc:mje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vje{constructor(t,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let f;r?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bje{constructor(t,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let f;r?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yje(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s,[l,u]=a,c=et().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bje(o.shape,l,u,r,i):new vje(o.shape,l,u,r,i);return n.runWebGLProgram(c,[o],"float32")}const wje={kernelName:y1,backendName:"webgl",kernelFunc:yje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kje{constructor(t,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=t,l=[s&&i>1?o-1:o,s&&a>1?r-1:r],u=[s&&i>1?i-1:i,s&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xje(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s,a=new kje(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Cje={kernelName:nI,backendName:"webgl",kernelFunc:xje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $je{constructor(t,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;r?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sje{constructor(t,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;r?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ije(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s,[l,u]=a,c=et().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Sje(o.shape,l,u,r,i):new $je(o.shape,l,u,r,i);return n.runWebGLProgram(c,[o],o.dtype)}const Eje={kernelName:b1,backendName:"webgl",kernelFunc:Ije};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tje{constructor(t,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=t,l=[s&&i>1?o-1:o,s&&a>1?r-1:r],u=[s&&i>1?i-1:i,s&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _je(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s,a=new Tje(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Nje={kernelName:tI,backendName:"webgl",kernelFunc:_je};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aje{constructor(t,n){this.variableNames=["x"];const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=t,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&t[a]!==1?`${t[a]} - coords[${a}] - 1`:`coords[${a}]`,r=t.map((a,l)=>o(l)).join(","),i=es(s);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dje{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=t;const o=Vo("rc",s),r=`${o[s-1]} + 1 < ${this.outputShape[s-1]}`,i=`${o[s-2]} + 1 < ${this.outputShape[s-2]}`,a=es(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${r}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${r}){
            result.g = ${u(o.slice())};
          }
          if(${i}) {
            result.b = ${c(o.slice())};
            if(${r}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function u(p){return p[s-1]="("+p[s-1]+" + 1)",f(p)}function c(p){return p[s-2]="("+p[s-2]+" + 1)",f(p)}function d(p){return p[s-1]="("+p[s-1]+" + 1)",p[s-2]="("+p[s-2]+" + 1)",f(p)}function f(p){const m=t.map((b,w)=>h(w,p)),g=m.join(","),v=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${v}))`}function h(p,m){return n.indexOf(p)!==-1&&t[p]!==1?`${t[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rje(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dims:r}=s,i=o.shape.length,a=yn(r,o.shape);if(i===0)return Qo({inputs:{x:o},backend:n});const l=et().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Dje(o.shape,a):new Aje(o.shape,a);return n.runWebGLProgram(l,[o],o.dtype)}const Mje={kernelName:w1,backendName:"webgl",kernelFunc:Rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oje{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=t[1],o=t[2];this.outputShape=t;let r="";typeof n=="number"?r=`float outputValue = ${n.toFixed(2)};`:r=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${r}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pje={kernelName:mI,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,{radians:o,fillValue:r,center:i}=t,a=n,l=new Oje(s.shape,r),[u,c]=cE(i,s.shape[1],s.shape[2]),d=[[u,c,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[s],s.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fje=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Lje=Mn({opSnippet:Fje}),Bje={kernelName:lg,backendName:"webgl",kernelFunc:Lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zje="return inversesqrt(x);",Vje=Mn({opSnippet:zje,cpuKernelImpl:f5e}),Wje={kernelName:ug,backendName:"webgl",kernelFunc:Vje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BH{constructor(t,n,s,o,r,i,a=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const l=es(r.length),u=es(i.length);let c="";s===1?c="i":s===2&&(c="i, j");const d=`getIndices(${c})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const h=`getUpdates(${f})`,p=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${p};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hje(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o,updates:r}=t,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Cg(r,o,i),f=[d/u,u];if(d===0)return n.makeTensorInfo(i,o.dtype);const h=St({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),p=St({inputs:{x:r},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new BH(l,a,h.shape.length,p.shape.length,c,f),v=n.runWebGLProgram(g,[p,h,m],p.dtype),b=St({inputs:{x:v},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),b}const Uje={kernelName:_z,backendName:"webgl",kernelFunc:Hje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jje{constructor(t,n,s){this.variableNames=["c","a","b"],this.outputShape=n;let o,r;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)r="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<t&&l.push(`${a[c]}`);o=l.join(),r=u.join()}const i=es(s);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${r}));
        } else {
          setOutput(getB(${r}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gje(e){const{inputs:t,backend:n}=e,{condition:s,t:o,e:r}=t,i=new jje(s.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[s,o,r],pr(o.dtype,r.dtype))}const Kje={kernelName:k1,backendName:"webgl",kernelFunc:Gje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qje=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${H1};
  float scale = ${U1};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Yje=Mn({opSnippet:qje}),Xje={kernelName:cg,backendName:"webgl",kernelFunc:Yje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zje=ah+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,Jje=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Qje=Mn({opSnippet:Zje,packedOpSnippet:Jje,cpuKernelImpl:h5e}),eGe={kernelName:pg,backendName:"webgl",kernelFunc:Qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tGe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,nGe=Mn({opSnippet:tGe}),sGe={kernelName:hg,backendName:"webgl",kernelFunc:nGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oGe=ah+`
  return sin(x);
`,rGe=Mn({opSnippet:oGe}),iGe={kernelName:dg,backendName:"webgl",kernelFunc:rGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aGe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,lGe=Mn({opSnippet:aGe}),uGe={kernelName:fg,backendName:"webgl",kernelFunc:lGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cGe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,dGe=Mn({opSnippet:cGe}),fGe={kernelName:mg,backendName:"webgl",kernelFunc:dGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hGe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,paddings:i}=s;oe(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((v,b)=>v*b),l=[[0,0]];l.push(...i);for(let v=1+r.length;v<o.shape.length;++v)l.push([0,0]);const u=[],c=FH({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=_g(c.shape,r,a,!1),f=Ng(d.length,r.length,!1),h=Ag(c.shape,r,a,!1),p=St({inputs:{x:c},backend:n,attrs:{shape:d}}),m=wo({inputs:{x:p},backend:n,attrs:{perm:f}}),g=St({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(m),u.forEach(v=>n.disposeIntermediateTensorInfo(v)),g},pGe={kernelName:$1,backendName:"webgl",kernelFunc:hGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mGe(e){const{inputs:t,backend:n}=e,{indices:s,values:o,denseShape:r,defaultValue:i}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId),u=n.readSync(r.dataId),c=n.readSync(i.dataId)[0],[d,f,h,p,m]=m5e(a,s.shape,s.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,s.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const gGe={kernelName:sI,backendName:"webgl",kernelFunc:mGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vGe(e){const{inputs:t,backend:n}=e,{inputIndices:s,inputShape:o,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(s.dataId),l=Array.from(n.readSync(r.dataId)),[u,c,d]=g5e(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const bGe={kernelName:oI,backendName:"webgl",kernelFunc:vGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yGe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[u,c]=uH(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const wGe={kernelName:rI,backendName:"webgl",kernelFunc:yGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kGe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[u,c]=uH(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(c,s.dtype,u)}const xGe={kernelName:iI,backendName:"webgl",kernelFunc:kGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CGe(e){const{inputs:t,backend:n,attrs:s}=e,{sparseIndices:o,sparseValues:r,defaultValue:i}=t,{outputShape:a}=s,{sliceRank:l,numUpdates:u,strides:c,outputSize:d}=Cg(r,o,a),f=!1,h=new BH(u,l,o.shape.length,r.shape.length,c,[d,1],f),p=n.runWebGLProgram(h,[r,o,i],r.dtype),m=St({inputs:{x:p},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),m}const $Ge={kernelName:Nz,backendName:"webgl",kernelFunc:CGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SGe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{numOrSizeSplits:r,axis:i}=s,a=yn(i,o.shape)[0],l=SE(o,r,a),u=o.shape.length,c=new Array(u).fill(0),d=o.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const p=lh({inputs:{x:o},backend:n,attrs:{begin:c,size:h}});return c[a]+=f,p})}const IGe={kernelName:S1,backendName:"webgl",kernelFunc:SGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3="return sqrt(x);",EGe=Mn({opSnippet:Q3,packedOpSnippet:Q3,cpuKernelImpl:v5e}),TGe={kernelName:gg,backendName:"webgl",kernelFunc:EGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ge="return x * x;",NGe=Mn({opSnippet:_Ge}),AGe={kernelName:aI,backendName:"webgl",kernelFunc:NGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eM="return (a - b) * (a - b);",DGe=Co({opSnippet:eM,packedOpSnippet:eM}),RGe={kernelName:vg,backendName:"webgl",kernelFunc:DGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MGe({inputs:e,attrs:t,backend:n}){const{x:s}=e,o=$i+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,r=new za(s.shape,o);return n.runWebGLProgram(r,[s],s.dtype)}const OGe={kernelName:xg,backendName:"webgl",kernelFunc:MGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PGe{constructor(t,n,s){this.variableNames=["x"],this.outputShape=s;const o=s.length,r=es(s.length),i=es(s.length);let a="";if(o===1)a="coords * strides + begin";else{let l=0;a=s.map((u,c)=>(l++,s.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${r} begin = ${r}(${t});
      ${r} strides = ${r}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FGe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=s,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:w,strides:y}=SI(o.shape,r,i,a,l,u,c,d,f);let k;if(m)k=St({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||v){oe(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const C=xI(b,w,y),S=lh({inputs:{x:o},backend:n,attrs:{begin:b,size:C}});k=St({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([o])){const S=n.readSync(o.dataId),T=$n(o.shape,o.dtype,S),A=b5e(h,T,y,b);k=n.makeTensorInfo(p,o.dtype,A.values)}else{const S=new PGe(b,y,h);k=n.runWebGLProgram(S,[o],o.dtype)}const x=St({inputs:{x:k},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(k),x}const LGe={kernelName:lI,backendName:"webgl",kernelFunc:FGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BGe(e){const{inputs:t,backend:n,attrs:s}=e,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=t,f=n.readSync(c.dataId),h=n.readSync(d.dataId),[p,m]=y5e(f,h,o,r,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const zGe={kernelName:uI,backendName:"webgl",kernelFunc:BGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VGe(e){const{inputs:t,backend:n,attrs:s}=e,{skipEmpty:o}=s,{input:r,delimiter:i}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId)[0],[u,c,d]=w5e(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const WGe={kernelName:cI,backendName:"webgl",kernelFunc:VGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HGe(e){const{inputs:t,backend:n,attrs:s}=e,{numBuckets:o}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(r.dataId),a=k5e(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const UGe={kernelName:dI,backendName:"webgl",kernelFunc:HGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jGe="return tan(x);",GGe=Mn({opSnippet:jGe}),KGe={kernelName:yg,backendName:"webgl",kernelFunc:GGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qGe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,YGe=Mn({opSnippet:qGe}),XGe={kernelName:wg,backendName:"webgl",kernelFunc:YGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZGe{constructor(t,n){this.variableNames=["A"];const s=new Array(t.length);for(let i=0;i<s.length;i++)s[i]=t[i]*n[i];this.outputShape=s,this.rank=s.length;const o=es(this.rank),r=JGe(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${r}));
      }
    `}}function JGe(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${n[o]}, ${e[o]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zH(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reps:r}=s;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),u=o.dtype==="string"?l.map(f=>wf(f)):l,c=$n(o.shape,o.dtype,u),d=C5e(c,r);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new ZGe(o.shape,r);return n.runWebGLProgram(i,[o],o.dtype)}const QGe={kernelName:kg,backendName:"webgl",kernelFunc:zH};class eKe{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class tKe{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Du(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function tM(e){let t=1;for(;t<e;)t*=2;return t}function nKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{k:r,sorted:i}=s,a=et().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=et().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([o])||c<a||r>l){const A=n.readSync(o.dataId),[R,L]=$5e(A,u,o.dtype,r,i);return[n.makeTensorInfo(R.shape,R.dtype,R.values),n.makeTensorInfo(L.shape,L.dtype,L.values)]}if(r===0)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[o,Kg({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(o):o,m=tt(u)/c,g=St({inputs:{x:h},attrs:{shape:[m,c]},backend:n});f&&Du(n,h);const v=tM(r),b=tM(c);let w=null;const y=()=>w===null?[g,g]:[g,w],k=(A,R,L)=>{const P=y(),V=new eKe(L),F=[[c],[w===null?1:0],[Number.NEGATIVE_INFINITY],[A],[R]],M=w;w=n.runWebGLProgram(V,P,"int32",F),Du(n,M)};for(let A=1;A<v;A*=2){const R=A*2;for(let L=A;L>=1;L/=2)k(R,L,[m,b])}for(let A=b;A>v;A/=2){const R=y(),L=new tKe([m,A/2]),V=[[c],[w===null?1:0],[v]],H=w;w=n.runWebGLProgram(L,R,"int32",V),Du(n,H);const F=v/2,M=F*2;for(let B=F;B>=1;B/=2)k(M,B,w.shape)}let x=w;w=lh({inputs:{x:w},backend:n,attrs:{begin:0,size:[m,r]}}),Du(n,x);let C=AH({inputs:{x:g,indices:w},backend:n,attrs:{axis:1,batchDims:1}});Du(n,g);const S=u.slice(0,-1);S.push(r),x=w,w=St({inputs:{x:w},attrs:{shape:S},backend:n}),Du(n,x);const T=C;return C=St({inputs:{x:C},attrs:{shape:S},backend:n}),Du(n,T),[C,w]}const sKe={kernelName:fI,backendName:"webgl",kernelFunc:nKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oKe{constructor(t,n,s,o,r,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=s==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${r});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${r});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rKe(e){const{inputs:t,backend:n,attrs:s}=e,{image:o,transforms:r}=t,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=s,[c,d,f,h]=o.shape,[p,m]=u!=null?u:[d,f],g=[c,p,m,h],v=new oKe(d,f,i,a,l,g);return n.runWebGLProgram(v,[o,r],"float32")}const iKe={kernelName:hI,backendName:"webgl",kernelFunc:rKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aKe(e){const{inputs:t,attrs:n,backend:s}=e,{axis:o}=n,{x:r}=t;Hg(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=s.readSync(r.dataId),{outputValues:a,outputShape:l,indices:u}=S5e(i,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const lKe={kernelName:pI,backendName:"webgl",kernelFunc:aKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uKe(e){const{inputs:t,backend:n,attrs:s}=e,{value:o}=t;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o,a=i.shape.length,l=o.shape[r],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==r&&(u[c++]=i.shape[m]);const d=[],f=new Array(a).fill(0),h=i.shape.slice();h[r]=1;const p=new Array(l);for(let m=0;m<p.length;m++){f[r]=m;const g=lh({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),v=St({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=v,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const cKe={kernelName:T1,backendName:"webgl",kernelFunc:uKe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dKe{constructor(t,n){this.variableNames=["x","segmentIds"];const s=t.windowSize,o=t.batchSize,r=t.inSize,i=t.numSegments,a=i*Math.ceil(r/s);this.outputShape=[o,a];const l="0.0",u="sumValue",c=Math.floor(s/4)*4,d=s%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";r%s>0&&(h=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `);let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,segmentIds:r}=t,{numSegments:i}=s,a=o.shape.length,l=[];let u=0;const c=Es([u],a);let d=o;c!=null&&(d=wo({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(d),u=Ms(1,a)[0]);const f=C8(d.shape,u,i),h=tt([d.shape[u]]),p=St({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const m=vI(o.dtype),g=(y,k,x,C,S)=>{const T=y.shape[0],A=y.shape[1],R=x8(A,S),L={windowSize:R,inSize:A,batchSize:T,numSegments:S},P=new dKe(L,k),V=n.compileAndRun(P,[y,x],C);if(l.push(V),V.shape[1]===S)return V;const H=LH({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),F=zH({inputs:{x:H},backend:n,attrs:{reps:[A/R]}});return l.push(H),l.push(F),g(V,k,F,C,S)},v=g(p,"unsortedSegmentSum",r,m,i),b=St({inputs:{x:v},backend:n,attrs:{shape:f}});let w=b;if(c!=null){l.push(b);const y=cu(c);w=wo({inputs:{x:w},backend:n,attrs:{perm:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),w}const hKe={kernelName:_1,backendName:"webgl",kernelFunc:fKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pKe=[bVe,wVe,CVe,IVe,TVe,AVe,RVe,OVe,BVe,VVe,UVe,KVe,XVe,eWe,sWe,rWe,aWe,dWe,hWe,mWe,yWe,IWe,TWe,NWe,PWe,LWe,WWe,Q5e,jWe,XWe,eHe,iHe,lHe,cHe,fHe,pHe,vHe,wHe,CHe,SHe,EHe,_He,DHe,MHe,LHe,zHe,HHe,GHe,qHe,JHe,nUe,iUe,uUe,fUe,hUe,mUe,vUe,yUe,kUe,CUe,EUe,NUe,RUe,OUe,LUe,VUe,jUe,YUe,J5e,ZUe,qWe,e9e,s9e,i9e,tVe,c9e,p9e,g9e,w9e,C9e,E9e,N9e,M9e,L9e,V9e,H9e,K9e,Y9e,Z9e,t7e,s7e,r7e,a7e,u7e,h7e,v7e,k7e,_7e,iVe,R7e,P7e,B7e,W7e,DWe,j7e,K7e,Y7e,J7e,nje,sVe,oje,rje,RWe,S7e,lje,fje,gje,lVe,wje,Cje,Eje,Nje,Mje,Pje,Bje,Wje,Uje,Kje,Xje,eGe,sGe,iGe,uGe,$We,E7e,fGe,pGe,gGe,bGe,wGe,xGe,$Ge,IGe,TGe,AGe,RGe,OGe,LGe,zGe,WGe,UGe,I7e,mVe,KGe,XGe,QGe,sKe,iKe,gVe,lKe,cKe,hKe,G7e];for(const e of pKe)Dz(e);/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var VH={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,t){(function(n,s){e.exports=s()})(ss,function(){for(var n=function(D,z,X){return z===void 0&&(z=0),X===void 0&&(X=1),D<z?z:D>X?X:D},s=n,o=function(D){D._clipped=!1,D._unclipped=D.slice(0);for(var z=0;z<=3;z++)z<3?((D[z]<0||D[z]>255)&&(D._clipped=!0),D[z]=s(D[z],0,255)):z===3&&(D[z]=s(D[z],0,1));return D},r={},i=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<a.length;i+=1){var l=a[i];r["[object "+l+"]"]=l.toLowerCase()}var u=function(D){return r[Object.prototype.toString.call(D)]||"object"},c=u,d=function(D,z){return z===void 0&&(z=null),D.length>=3?Array.prototype.slice.call(D):c(D[0])=="object"&&z?z.split("").filter(function(X){return D[0][X]!==void 0}).map(function(X){return D[0][X]}):D[0]},f=u,h=function(D){if(D.length<2)return null;var z=D.length-1;return f(D[z])=="string"?D[z].toLowerCase():null},p=Math.PI,m={clip_rgb:o,limit:n,type:u,unpack:d,last:h,PI:p,TWOPI:p*2,PITHIRD:p/3,DEG2RAD:p/180,RAD2DEG:180/p},g={format:{},autodetect:[]},v=m.last,b=m.clip_rgb,w=m.type,y=g,k=function(){for(var z=[],X=arguments.length;X--;)z[X]=arguments[X];var ce=this;if(w(z[0])==="object"&&z[0].constructor&&z[0].constructor===this.constructor)return z[0];var Ce=v(z),Ae=!1;if(!Ce){Ae=!0,y.sorted||(y.autodetect=y.autodetect.sort(function(dt,$t){return $t.p-dt.p}),y.sorted=!0);for(var we=0,ze=y.autodetect;we<ze.length;we+=1){var Ue=ze[we];if(Ce=Ue.test.apply(Ue,z),Ce)break}}if(y.format[Ce]){var st=y.format[Ce].apply(null,Ae?z:z.slice(0,-1));ce._rgb=b(st)}else throw new Error("unknown format: "+z);ce._rgb.length===3&&ce._rgb.push(1)};k.prototype.toString=function(){return w(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var x=k,C=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(C.Color,[null].concat(D)))};C.Color=x,C.version="2.4.2";var S=C,T=m.unpack,A=Math.max,R=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=T(D,"rgb"),ce=X[0],Ce=X[1],Ae=X[2];ce=ce/255,Ce=Ce/255,Ae=Ae/255;var we=1-A(ce,A(Ce,Ae)),ze=we<1?1/(1-we):0,Ue=(1-ce-we)*ze,st=(1-Ce-we)*ze,dt=(1-Ae-we)*ze;return[Ue,st,dt,we]},L=R,P=m.unpack,V=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];D=P(D,"cmyk");var X=D[0],ce=D[1],Ce=D[2],Ae=D[3],we=D.length>4?D[4]:1;return Ae===1?[0,0,0,we]:[X>=1?0:255*(1-X)*(1-Ae),ce>=1?0:255*(1-ce)*(1-Ae),Ce>=1?0:255*(1-Ce)*(1-Ae),we]},H=V,F=S,M=x,B=g,Y=m.unpack,J=m.type,ee=L;M.prototype.cmyk=function(){return ee(this._rgb)},F.cmyk=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(M,[null].concat(D,["cmyk"])))},B.format.cmyk=H,B.autodetect.push({p:2,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=Y(D,"cmyk"),J(D)==="array"&&D.length===4)return"cmyk"}});var te=m.unpack,re=m.last,$e=function(D){return Math.round(D*100)/100},se=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=te(D,"hsla"),ce=re(D)||"lsa";return X[0]=$e(X[0]||0),X[1]=$e(X[1]*100)+"%",X[2]=$e(X[2]*100)+"%",ce==="hsla"||X.length>3&&X[3]<1?(X[3]=X.length>3?X[3]:1,ce="hsla"):X.length=3,ce+"("+X.join(",")+")"},Q=se,ae=m.unpack,pe=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];D=ae(D,"rgba");var X=D[0],ce=D[1],Ce=D[2];X/=255,ce/=255,Ce/=255;var Ae=Math.min(X,ce,Ce),we=Math.max(X,ce,Ce),ze=(we+Ae)/2,Ue,st;return we===Ae?(Ue=0,st=Number.NaN):Ue=ze<.5?(we-Ae)/(we+Ae):(we-Ae)/(2-we-Ae),X==we?st=(ce-Ce)/(we-Ae):ce==we?st=2+(Ce-X)/(we-Ae):Ce==we&&(st=4+(X-ce)/(we-Ae)),st*=60,st<0&&(st+=360),D.length>3&&D[3]!==void 0?[st,Ue,ze,D[3]]:[st,Ue,ze]},ke=pe,Be=m.unpack,je=m.last,qe=Q,ne=ke,ue=Math.round,Se=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=Be(D,"rgba"),ce=je(D)||"rgb";return ce.substr(0,3)=="hsl"?qe(ne(X),ce):(X[0]=ue(X[0]),X[1]=ue(X[1]),X[2]=ue(X[2]),(ce==="rgba"||X.length>3&&X[3]<1)&&(X[3]=X.length>3?X[3]:1,ce="rgba"),ce+"("+X.slice(0,ce==="rgb"?3:4).join(",")+")")},Fe=Se,Le=m.unpack,Ke=Math.round,ie=function(){for(var D,z=[],X=arguments.length;X--;)z[X]=arguments[X];z=Le(z,"hsl");var ce=z[0],Ce=z[1],Ae=z[2],we,ze,Ue;if(Ce===0)we=ze=Ue=Ae*255;else{var st=[0,0,0],dt=[0,0,0],$t=Ae<.5?Ae*(1+Ce):Ae+Ce-Ae*Ce,mt=2*Ae-$t,Rt=ce/360;st[0]=Rt+1/3,st[1]=Rt,st[2]=Rt-1/3;for(var _t=0;_t<3;_t++)st[_t]<0&&(st[_t]+=1),st[_t]>1&&(st[_t]-=1),6*st[_t]<1?dt[_t]=mt+($t-mt)*6*st[_t]:2*st[_t]<1?dt[_t]=$t:3*st[_t]<2?dt[_t]=mt+($t-mt)*(2/3-st[_t])*6:dt[_t]=mt;D=[Ke(dt[0]*255),Ke(dt[1]*255),Ke(dt[2]*255)],we=D[0],ze=D[1],Ue=D[2]}return z.length>3?[we,ze,Ue,z[3]]:[we,ze,Ue,1]},ge=ie,be=ge,Ie=g,ot=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ve=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Ve=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ft=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,K=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,E=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,I=Math.round,G=function(D){D=D.toLowerCase().trim();var z;if(Ie.format.named)try{return Ie.format.named(D)}catch{}if(z=D.match(ot)){for(var X=z.slice(1,4),ce=0;ce<3;ce++)X[ce]=+X[ce];return X[3]=1,X}if(z=D.match(ve)){for(var Ce=z.slice(1,5),Ae=0;Ae<4;Ae++)Ce[Ae]=+Ce[Ae];return Ce}if(z=D.match(Ve)){for(var we=z.slice(1,4),ze=0;ze<3;ze++)we[ze]=I(we[ze]*2.55);return we[3]=1,we}if(z=D.match(ft)){for(var Ue=z.slice(1,5),st=0;st<3;st++)Ue[st]=I(Ue[st]*2.55);return Ue[3]=+Ue[3],Ue}if(z=D.match(K)){var dt=z.slice(1,4);dt[1]*=.01,dt[2]*=.01;var $t=be(dt);return $t[3]=1,$t}if(z=D.match(E)){var mt=z.slice(1,4);mt[1]*=.01,mt[2]*=.01;var Rt=be(mt);return Rt[3]=+z[4],Rt}};G.test=function(D){return ot.test(D)||ve.test(D)||Ve.test(D)||ft.test(D)||K.test(D)||E.test(D)};var Z=G,he=S,Te=x,bt=g,Lt=m.type,Dt=Fe,qt=Z;Te.prototype.css=function(D){return Dt(this._rgb,D)},he.css=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(Te,[null].concat(D,["css"])))},bt.format.css=qt,bt.autodetect.push({p:5,test:function(D){for(var z=[],X=arguments.length-1;X-- >0;)z[X]=arguments[X+1];if(!z.length&&Lt(D)==="string"&&qt.test(D))return"css"}});var un=x,Lo=S,$o=g,Ea=m.unpack;$o.format.gl=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=Ea(D,"rgba");return X[0]*=255,X[1]*=255,X[2]*=255,X},Lo.gl=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(un,[null].concat(D,["gl"])))},un.prototype.gl=function(){var D=this._rgb;return[D[0]/255,D[1]/255,D[2]/255,D[3]]};var ku=m.unpack,Je=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=ku(D,"rgb"),ce=X[0],Ce=X[1],Ae=X[2],we=Math.min(ce,Ce,Ae),ze=Math.max(ce,Ce,Ae),Ue=ze-we,st=Ue*100/255,dt=we/(255-Ue)*100,$t;return Ue===0?$t=Number.NaN:(ce===ze&&($t=(Ce-Ae)/Ue),Ce===ze&&($t=2+(Ae-ce)/Ue),Ae===ze&&($t=4+(ce-Ce)/Ue),$t*=60,$t<0&&($t+=360)),[$t,st,dt]},kt=Je,hn=m.unpack,Xn=Math.floor,Si=function(){for(var D,z,X,ce,Ce,Ae,we=[],ze=arguments.length;ze--;)we[ze]=arguments[ze];we=hn(we,"hcg");var Ue=we[0],st=we[1],dt=we[2],$t,mt,Rt;dt=dt*255;var _t=st*255;if(st===0)$t=mt=Rt=dt;else{Ue===360&&(Ue=0),Ue>360&&(Ue-=360),Ue<0&&(Ue+=360),Ue/=60;var wn=Xn(Ue),Sn=Ue-wn,On=dt*(1-st),Vn=On+_t*(1-Sn),So=On+_t*Sn,fo=On+_t;switch(wn){case 0:D=[fo,So,On],$t=D[0],mt=D[1],Rt=D[2];break;case 1:z=[Vn,fo,On],$t=z[0],mt=z[1],Rt=z[2];break;case 2:X=[On,fo,So],$t=X[0],mt=X[1],Rt=X[2];break;case 3:ce=[On,Vn,fo],$t=ce[0],mt=ce[1],Rt=ce[2];break;case 4:Ce=[So,On,fo],$t=Ce[0],mt=Ce[1],Rt=Ce[2];break;case 5:Ae=[fo,On,Vn],$t=Ae[0],mt=Ae[1],Rt=Ae[2];break}}return[$t,mt,Rt,we.length>3?we[3]:1]},zr=Si,rd=m.unpack,w9=m.type,k9=S,YT=x,XT=g,x9=kt;YT.prototype.hcg=function(){return x9(this._rgb)},k9.hcg=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(YT,[null].concat(D,["hcg"])))},XT.format.hcg=zr,XT.autodetect.push({p:1,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=rd(D,"hcg"),w9(D)==="array"&&D.length===3)return"hcg"}});var C9=m.unpack,$9=m.last,r0=Math.round,S9=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=C9(D,"rgba"),ce=X[0],Ce=X[1],Ae=X[2],we=X[3],ze=$9(D)||"auto";we===void 0&&(we=1),ze==="auto"&&(ze=we<1?"rgba":"rgb"),ce=r0(ce),Ce=r0(Ce),Ae=r0(Ae);var Ue=ce<<16|Ce<<8|Ae,st="000000"+Ue.toString(16);st=st.substr(st.length-6);var dt="0"+r0(we*255).toString(16);switch(dt=dt.substr(dt.length-2),ze.toLowerCase()){case"rgba":return"#"+st+dt;case"argb":return"#"+dt+st;default:return"#"+st}},ZT=S9,I9=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,E9=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,T9=function(D){if(D.match(I9)){(D.length===4||D.length===7)&&(D=D.substr(1)),D.length===3&&(D=D.split(""),D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]);var z=parseInt(D,16),X=z>>16,ce=z>>8&255,Ce=z&255;return[X,ce,Ce,1]}if(D.match(E9)){(D.length===5||D.length===9)&&(D=D.substr(1)),D.length===4&&(D=D.split(""),D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]+D[3]+D[3]);var Ae=parseInt(D,16),we=Ae>>24&255,ze=Ae>>16&255,Ue=Ae>>8&255,st=Math.round((Ae&255)/255*100)/100;return[we,ze,Ue,st]}throw new Error("unknown hex color: "+D)},JT=T9,_9=S,QT=x,N9=m.type,e_=g,A9=ZT;QT.prototype.hex=function(D){return A9(this._rgb,D)},_9.hex=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(QT,[null].concat(D,["hex"])))},e_.format.hex=JT,e_.autodetect.push({p:4,test:function(D){for(var z=[],X=arguments.length-1;X-- >0;)z[X]=arguments[X+1];if(!z.length&&N9(D)==="string"&&[3,4,5,6,7,8,9].indexOf(D.length)>=0)return"hex"}});var D9=m.unpack,t_=m.TWOPI,R9=Math.min,M9=Math.sqrt,O9=Math.acos,P9=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=D9(D,"rgb"),ce=X[0],Ce=X[1],Ae=X[2];ce/=255,Ce/=255,Ae/=255;var we,ze=R9(ce,Ce,Ae),Ue=(ce+Ce+Ae)/3,st=Ue>0?1-ze/Ue:0;return st===0?we=NaN:(we=(ce-Ce+(ce-Ae))/2,we/=M9((ce-Ce)*(ce-Ce)+(ce-Ae)*(Ce-Ae)),we=O9(we),Ae>Ce&&(we=t_-we),we/=t_),[we*360,st,Ue]},F9=P9,L9=m.unpack,Dw=m.limit,id=m.TWOPI,Rw=m.PITHIRD,ad=Math.cos,B9=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];D=L9(D,"hsi");var X=D[0],ce=D[1],Ce=D[2],Ae,we,ze;return isNaN(X)&&(X=0),isNaN(ce)&&(ce=0),X>360&&(X-=360),X<0&&(X+=360),X/=360,X<1/3?(ze=(1-ce)/3,Ae=(1+ce*ad(id*X)/ad(Rw-id*X))/3,we=1-(ze+Ae)):X<2/3?(X-=1/3,Ae=(1-ce)/3,we=(1+ce*ad(id*X)/ad(Rw-id*X))/3,ze=1-(Ae+we)):(X-=2/3,we=(1-ce)/3,ze=(1+ce*ad(id*X)/ad(Rw-id*X))/3,Ae=1-(we+ze)),Ae=Dw(Ce*Ae*3),we=Dw(Ce*we*3),ze=Dw(Ce*ze*3),[Ae*255,we*255,ze*255,D.length>3?D[3]:1]},z9=B9,V9=m.unpack,W9=m.type,H9=S,n_=x,s_=g,U9=F9;n_.prototype.hsi=function(){return U9(this._rgb)},H9.hsi=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(n_,[null].concat(D,["hsi"])))},s_.format.hsi=z9,s_.autodetect.push({p:2,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=V9(D,"hsi"),W9(D)==="array"&&D.length===3)return"hsi"}});var j9=m.unpack,G9=m.type,K9=S,o_=x,r_=g,q9=ke;o_.prototype.hsl=function(){return q9(this._rgb)},K9.hsl=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(o_,[null].concat(D,["hsl"])))},r_.format.hsl=ge,r_.autodetect.push({p:2,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=j9(D,"hsl"),G9(D)==="array"&&D.length===3)return"hsl"}});var Y9=m.unpack,X9=Math.min,Z9=Math.max,J9=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];D=Y9(D,"rgb");var X=D[0],ce=D[1],Ce=D[2],Ae=X9(X,ce,Ce),we=Z9(X,ce,Ce),ze=we-Ae,Ue,st,dt;return dt=we/255,we===0?(Ue=Number.NaN,st=0):(st=ze/we,X===we&&(Ue=(ce-Ce)/ze),ce===we&&(Ue=2+(Ce-X)/ze),Ce===we&&(Ue=4+(X-ce)/ze),Ue*=60,Ue<0&&(Ue+=360)),[Ue,st,dt]},Q9=J9,e7=m.unpack,t7=Math.floor,n7=function(){for(var D,z,X,ce,Ce,Ae,we=[],ze=arguments.length;ze--;)we[ze]=arguments[ze];we=e7(we,"hsv");var Ue=we[0],st=we[1],dt=we[2],$t,mt,Rt;if(dt*=255,st===0)$t=mt=Rt=dt;else{Ue===360&&(Ue=0),Ue>360&&(Ue-=360),Ue<0&&(Ue+=360),Ue/=60;var _t=t7(Ue),wn=Ue-_t,Sn=dt*(1-st),On=dt*(1-st*wn),Vn=dt*(1-st*(1-wn));switch(_t){case 0:D=[dt,Vn,Sn],$t=D[0],mt=D[1],Rt=D[2];break;case 1:z=[On,dt,Sn],$t=z[0],mt=z[1],Rt=z[2];break;case 2:X=[Sn,dt,Vn],$t=X[0],mt=X[1],Rt=X[2];break;case 3:ce=[Sn,On,dt],$t=ce[0],mt=ce[1],Rt=ce[2];break;case 4:Ce=[Vn,Sn,dt],$t=Ce[0],mt=Ce[1],Rt=Ce[2];break;case 5:Ae=[dt,Sn,On],$t=Ae[0],mt=Ae[1],Rt=Ae[2];break}}return[$t,mt,Rt,we.length>3?we[3]:1]},s7=n7,o7=m.unpack,r7=m.type,i7=S,i_=x,a_=g,a7=Q9;i_.prototype.hsv=function(){return a7(this._rgb)},i7.hsv=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(i_,[null].concat(D,["hsv"])))},a_.format.hsv=s7,a_.autodetect.push({p:2,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=o7(D,"hsv"),r7(D)==="array"&&D.length===3)return"hsv"}});var i0={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ld=i0,l7=m.unpack,l_=Math.pow,u7=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=l7(D,"rgb"),ce=X[0],Ce=X[1],Ae=X[2],we=c7(ce,Ce,Ae),ze=we[0],Ue=we[1],st=we[2],dt=116*Ue-16;return[dt<0?0:dt,500*(ze-Ue),200*(Ue-st)]},Mw=function(D){return(D/=255)<=.04045?D/12.92:l_((D+.055)/1.055,2.4)},Ow=function(D){return D>ld.t3?l_(D,1/3):D/ld.t2+ld.t0},c7=function(D,z,X){D=Mw(D),z=Mw(z),X=Mw(X);var ce=Ow((.4124564*D+.3575761*z+.1804375*X)/ld.Xn),Ce=Ow((.2126729*D+.7151522*z+.072175*X)/ld.Yn),Ae=Ow((.0193339*D+.119192*z+.9503041*X)/ld.Zn);return[ce,Ce,Ae]},u_=u7,ud=i0,d7=m.unpack,f7=Math.pow,h7=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];D=d7(D,"lab");var X=D[0],ce=D[1],Ce=D[2],Ae,we,ze,Ue,st,dt;return we=(X+16)/116,Ae=isNaN(ce)?we:we+ce/500,ze=isNaN(Ce)?we:we-Ce/200,we=ud.Yn*Fw(we),Ae=ud.Xn*Fw(Ae),ze=ud.Zn*Fw(ze),Ue=Pw(3.2404542*Ae-1.5371385*we-.4985314*ze),st=Pw(-.969266*Ae+1.8760108*we+.041556*ze),dt=Pw(.0556434*Ae-.2040259*we+1.0572252*ze),[Ue,st,dt,D.length>3?D[3]:1]},Pw=function(D){return 255*(D<=.00304?12.92*D:1.055*f7(D,1/2.4)-.055)},Fw=function(D){return D>ud.t1?D*D*D:ud.t2*(D-ud.t0)},c_=h7,p7=m.unpack,m7=m.type,g7=S,d_=x,f_=g,v7=u_;d_.prototype.lab=function(){return v7(this._rgb)},g7.lab=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(d_,[null].concat(D,["lab"])))},f_.format.lab=c_,f_.autodetect.push({p:2,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=p7(D,"lab"),m7(D)==="array"&&D.length===3)return"lab"}});var b7=m.unpack,y7=m.RAD2DEG,w7=Math.sqrt,k7=Math.atan2,x7=Math.round,C7=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=b7(D,"lab"),ce=X[0],Ce=X[1],Ae=X[2],we=w7(Ce*Ce+Ae*Ae),ze=(k7(Ae,Ce)*y7+360)%360;return x7(we*1e4)===0&&(ze=Number.NaN),[ce,we,ze]},h_=C7,$7=m.unpack,S7=u_,I7=h_,E7=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=$7(D,"rgb"),ce=X[0],Ce=X[1],Ae=X[2],we=S7(ce,Ce,Ae),ze=we[0],Ue=we[1],st=we[2];return I7(ze,Ue,st)},T7=E7,_7=m.unpack,N7=m.DEG2RAD,A7=Math.sin,D7=Math.cos,R7=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=_7(D,"lch"),ce=X[0],Ce=X[1],Ae=X[2];return isNaN(Ae)&&(Ae=0),Ae=Ae*N7,[ce,D7(Ae)*Ce,A7(Ae)*Ce]},p_=R7,M7=m.unpack,O7=p_,P7=c_,F7=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];D=M7(D,"lch");var X=D[0],ce=D[1],Ce=D[2],Ae=O7(X,ce,Ce),we=Ae[0],ze=Ae[1],Ue=Ae[2],st=P7(we,ze,Ue),dt=st[0],$t=st[1],mt=st[2];return[dt,$t,mt,D.length>3?D[3]:1]},m_=F7,L7=m.unpack,B7=m_,z7=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=L7(D,"hcl").reverse();return B7.apply(void 0,X)},V7=z7,W7=m.unpack,H7=m.type,g_=S,a0=x,Lw=g,v_=T7;a0.prototype.lch=function(){return v_(this._rgb)},a0.prototype.hcl=function(){return v_(this._rgb).reverse()},g_.lch=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(a0,[null].concat(D,["lch"])))},g_.hcl=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(a0,[null].concat(D,["hcl"])))},Lw.format.lch=m_,Lw.format.hcl=V7,["lch","hcl"].forEach(function(D){return Lw.autodetect.push({p:2,test:function(){for(var z=[],X=arguments.length;X--;)z[X]=arguments[X];if(z=W7(z,D),H7(z)==="array"&&z.length===3)return D}})});var U7={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},b_=U7,j7=x,y_=g,G7=m.type,hh=b_,K7=JT,q7=ZT;j7.prototype.name=function(){for(var D=q7(this._rgb,"rgb"),z=0,X=Object.keys(hh);z<X.length;z+=1){var ce=X[z];if(hh[ce]===D)return ce.toLowerCase()}return D},y_.format.named=function(D){if(D=D.toLowerCase(),hh[D])return K7(hh[D]);throw new Error("unknown color name: "+D)},y_.autodetect.push({p:5,test:function(D){for(var z=[],X=arguments.length-1;X-- >0;)z[X]=arguments[X+1];if(!z.length&&G7(D)==="string"&&hh[D.toLowerCase()])return"named"}});var Y7=m.unpack,X7=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=Y7(D,"rgb"),ce=X[0],Ce=X[1],Ae=X[2];return(ce<<16)+(Ce<<8)+Ae},Z7=X7,J7=m.type,Q7=function(D){if(J7(D)=="number"&&D>=0&&D<=16777215){var z=D>>16,X=D>>8&255,ce=D&255;return[z,X,ce,1]}throw new Error("unknown num color: "+D)},ej=Q7,tj=S,w_=x,k_=g,nj=m.type,sj=Z7;w_.prototype.num=function(){return sj(this._rgb)},tj.num=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(w_,[null].concat(D,["num"])))},k_.format.num=ej,k_.autodetect.push({p:5,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D.length===1&&nj(D[0])==="number"&&D[0]>=0&&D[0]<=16777215)return"num"}});var oj=S,Bw=x,x_=g,C_=m.unpack,$_=m.type,S_=Math.round;Bw.prototype.rgb=function(D){return D===void 0&&(D=!0),D===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(S_)},Bw.prototype.rgba=function(D){return D===void 0&&(D=!0),this._rgb.slice(0,4).map(function(z,X){return X<3?D===!1?z:S_(z):z})},oj.rgb=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(Bw,[null].concat(D,["rgb"])))},x_.format.rgb=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=C_(D,"rgba");return X[3]===void 0&&(X[3]=1),X},x_.autodetect.push({p:3,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=C_(D,"rgba"),$_(D)==="array"&&(D.length===3||D.length===4&&$_(D[3])=="number"&&D[3]>=0&&D[3]<=1))return"rgb"}});var l0=Math.log,rj=function(D){var z=D/100,X,ce,Ce;return z<66?(X=255,ce=z<6?0:-155.25485562709179-.44596950469579133*(ce=z-2)+104.49216199393888*l0(ce),Ce=z<20?0:-254.76935184120902+.8274096064007395*(Ce=z-10)+115.67994401066147*l0(Ce)):(X=351.97690566805693+.114206453784165*(X=z-55)-40.25366309332127*l0(X),ce=325.4494125711974+.07943456536662342*(ce=z-50)-28.0852963507957*l0(ce),Ce=255),[X,ce,Ce,1]},I_=rj,ij=I_,aj=m.unpack,lj=Math.round,uj=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];for(var X=aj(D,"rgb"),ce=X[0],Ce=X[2],Ae=1e3,we=4e4,ze=.4,Ue;we-Ae>ze;){Ue=(we+Ae)*.5;var st=ij(Ue);st[2]/st[0]>=Ce/ce?we=Ue:Ae=Ue}return lj(Ue)},cj=uj,zw=S,u0=x,Vw=g,dj=cj;u0.prototype.temp=u0.prototype.kelvin=u0.prototype.temperature=function(){return dj(this._rgb)},zw.temp=zw.kelvin=zw.temperature=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(u0,[null].concat(D,["temp"])))},Vw.format.temp=Vw.format.kelvin=Vw.format.temperature=I_;var fj=m.unpack,Ww=Math.cbrt,hj=Math.pow,pj=Math.sign,mj=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=fj(D,"rgb"),ce=X[0],Ce=X[1],Ae=X[2],we=[Hw(ce/255),Hw(Ce/255),Hw(Ae/255)],ze=we[0],Ue=we[1],st=we[2],dt=Ww(.4122214708*ze+.5363325363*Ue+.0514459929*st),$t=Ww(.2119034982*ze+.6806995451*Ue+.1073969566*st),mt=Ww(.0883024619*ze+.2817188376*Ue+.6299787005*st);return[.2104542553*dt+.793617785*$t-.0040720468*mt,1.9779984951*dt-2.428592205*$t+.4505937099*mt,.0259040371*dt+.7827717662*$t-.808675766*mt]},E_=mj;function Hw(D){var z=Math.abs(D);return z<.04045?D/12.92:(pj(D)||1)*hj((z+.055)/1.055,2.4)}var gj=m.unpack,c0=Math.pow,vj=Math.sign,bj=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];D=gj(D,"lab");var X=D[0],ce=D[1],Ce=D[2],Ae=c0(X+.3963377774*ce+.2158037573*Ce,3),we=c0(X-.1055613458*ce-.0638541728*Ce,3),ze=c0(X-.0894841775*ce-1.291485548*Ce,3);return[255*Uw(4.0767416621*Ae-3.3077115913*we+.2309699292*ze),255*Uw(-1.2684380046*Ae+2.6097574011*we-.3413193965*ze),255*Uw(-.0041960863*Ae-.7034186147*we+1.707614701*ze),D.length>3?D[3]:1]},T_=bj;function Uw(D){var z=Math.abs(D);return z>.0031308?(vj(D)||1)*(1.055*c0(z,1/2.4)-.055):D*12.92}var yj=m.unpack,wj=m.type,kj=S,__=x,N_=g,xj=E_;__.prototype.oklab=function(){return xj(this._rgb)},kj.oklab=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(__,[null].concat(D,["oklab"])))},N_.format.oklab=T_,N_.autodetect.push({p:3,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=yj(D,"oklab"),wj(D)==="array"&&D.length===3)return"oklab"}});var Cj=m.unpack,$j=E_,Sj=h_,Ij=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];var X=Cj(D,"rgb"),ce=X[0],Ce=X[1],Ae=X[2],we=$j(ce,Ce,Ae),ze=we[0],Ue=we[1],st=we[2];return Sj(ze,Ue,st)},Ej=Ij,Tj=m.unpack,_j=p_,Nj=T_,Aj=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];D=Tj(D,"lch");var X=D[0],ce=D[1],Ce=D[2],Ae=_j(X,ce,Ce),we=Ae[0],ze=Ae[1],Ue=Ae[2],st=Nj(we,ze,Ue),dt=st[0],$t=st[1],mt=st[2];return[dt,$t,mt,D.length>3?D[3]:1]},Dj=Aj,Rj=m.unpack,Mj=m.type,Oj=S,A_=x,D_=g,Pj=Ej;A_.prototype.oklch=function(){return Pj(this._rgb)},Oj.oklch=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];return new(Function.prototype.bind.apply(A_,[null].concat(D,["oklch"])))},D_.format.oklch=Dj,D_.autodetect.push({p:3,test:function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];if(D=Rj(D,"oklch"),Mj(D)==="array"&&D.length===3)return"oklch"}});var R_=x,Fj=m.type;R_.prototype.alpha=function(D,z){return z===void 0&&(z=!1),D!==void 0&&Fj(D)==="number"?z?(this._rgb[3]=D,this):new R_([this._rgb[0],this._rgb[1],this._rgb[2],D],"rgb"):this._rgb[3]};var Lj=x;Lj.prototype.clipped=function(){return this._rgb._clipped||!1};var xu=x,Bj=i0;xu.prototype.darken=function(D){D===void 0&&(D=1);var z=this,X=z.lab();return X[0]-=Bj.Kn*D,new xu(X,"lab").alpha(z.alpha(),!0)},xu.prototype.brighten=function(D){return D===void 0&&(D=1),this.darken(-D)},xu.prototype.darker=xu.prototype.darken,xu.prototype.brighter=xu.prototype.brighten;var zj=x;zj.prototype.get=function(D){var z=D.split("."),X=z[0],ce=z[1],Ce=this[X]();if(ce){var Ae=X.indexOf(ce)-(X.substr(0,2)==="ok"?2:0);if(Ae>-1)return Ce[Ae];throw new Error("unknown channel "+ce+" in mode "+X)}else return Ce};var cd=x,Vj=m.type,Wj=Math.pow,Hj=1e-7,Uj=20;cd.prototype.luminance=function(D){if(D!==void 0&&Vj(D)==="number"){if(D===0)return new cd([0,0,0,this._rgb[3]],"rgb");if(D===1)return new cd([255,255,255,this._rgb[3]],"rgb");var z=this.luminance(),X="rgb",ce=Uj,Ce=function(we,ze){var Ue=we.interpolate(ze,.5,X),st=Ue.luminance();return Math.abs(D-st)<Hj||!ce--?Ue:st>D?Ce(we,Ue):Ce(Ue,ze)},Ae=(z>D?Ce(new cd([0,0,0]),this):Ce(this,new cd([255,255,255]))).rgb();return new cd(Ae.concat([this._rgb[3]]))}return jj.apply(void 0,this._rgb.slice(0,3))};var jj=function(D,z,X){return D=jw(D),z=jw(z),X=jw(X),.2126*D+.7152*z+.0722*X},jw=function(D){return D/=255,D<=.03928?D/12.92:Wj((D+.055)/1.055,2.4)},yr={},M_=x,O_=m.type,d0=yr,P_=function(D,z,X){X===void 0&&(X=.5);for(var ce=[],Ce=arguments.length-3;Ce-- >0;)ce[Ce]=arguments[Ce+3];var Ae=ce[0]||"lrgb";if(!d0[Ae]&&!ce.length&&(Ae=Object.keys(d0)[0]),!d0[Ae])throw new Error("interpolation mode "+Ae+" is not defined");return O_(D)!=="object"&&(D=new M_(D)),O_(z)!=="object"&&(z=new M_(z)),d0[Ae](D,z,X).alpha(D.alpha()+X*(z.alpha()-D.alpha()))},F_=x,Gj=P_;F_.prototype.mix=F_.prototype.interpolate=function(D,z){z===void 0&&(z=.5);for(var X=[],ce=arguments.length-2;ce-- >0;)X[ce]=arguments[ce+2];return Gj.apply(void 0,[this,D,z].concat(X))};var L_=x;L_.prototype.premultiply=function(D){D===void 0&&(D=!1);var z=this._rgb,X=z[3];return D?(this._rgb=[z[0]*X,z[1]*X,z[2]*X,X],this):new L_([z[0]*X,z[1]*X,z[2]*X,X],"rgb")};var Gw=x,Kj=i0;Gw.prototype.saturate=function(D){D===void 0&&(D=1);var z=this,X=z.lch();return X[1]+=Kj.Kn*D,X[1]<0&&(X[1]=0),new Gw(X,"lch").alpha(z.alpha(),!0)},Gw.prototype.desaturate=function(D){return D===void 0&&(D=1),this.saturate(-D)};var B_=x,z_=m.type;B_.prototype.set=function(D,z,X){X===void 0&&(X=!1);var ce=D.split("."),Ce=ce[0],Ae=ce[1],we=this[Ce]();if(Ae){var ze=Ce.indexOf(Ae)-(Ce.substr(0,2)==="ok"?2:0);if(ze>-1){if(z_(z)=="string")switch(z.charAt(0)){case"+":we[ze]+=+z;break;case"-":we[ze]+=+z;break;case"*":we[ze]*=+z.substr(1);break;case"/":we[ze]/=+z.substr(1);break;default:we[ze]=+z}else if(z_(z)==="number")we[ze]=z;else throw new Error("unsupported value for Color.set");var Ue=new B_(we,Ce);return X?(this._rgb=Ue._rgb,this):Ue}throw new Error("unknown channel "+Ae+" in mode "+Ce)}else return we};var qj=x,Yj=function(D,z,X){var ce=D._rgb,Ce=z._rgb;return new qj(ce[0]+X*(Ce[0]-ce[0]),ce[1]+X*(Ce[1]-ce[1]),ce[2]+X*(Ce[2]-ce[2]),"rgb")};yr.rgb=Yj;var Xj=x,Kw=Math.sqrt,dd=Math.pow,Zj=function(D,z,X){var ce=D._rgb,Ce=ce[0],Ae=ce[1],we=ce[2],ze=z._rgb,Ue=ze[0],st=ze[1],dt=ze[2];return new Xj(Kw(dd(Ce,2)*(1-X)+dd(Ue,2)*X),Kw(dd(Ae,2)*(1-X)+dd(st,2)*X),Kw(dd(we,2)*(1-X)+dd(dt,2)*X),"rgb")};yr.lrgb=Zj;var Jj=x,Qj=function(D,z,X){var ce=D.lab(),Ce=z.lab();return new Jj(ce[0]+X*(Ce[0]-ce[0]),ce[1]+X*(Ce[1]-ce[1]),ce[2]+X*(Ce[2]-ce[2]),"lab")};yr.lab=Qj;var V_=x,fd=function(D,z,X,ce){var Ce,Ae,we,ze;ce==="hsl"?(we=D.hsl(),ze=z.hsl()):ce==="hsv"?(we=D.hsv(),ze=z.hsv()):ce==="hcg"?(we=D.hcg(),ze=z.hcg()):ce==="hsi"?(we=D.hsi(),ze=z.hsi()):ce==="lch"||ce==="hcl"?(ce="hcl",we=D.hcl(),ze=z.hcl()):ce==="oklch"&&(we=D.oklch().reverse(),ze=z.oklch().reverse());var Ue,st,dt,$t,mt,Rt;(ce.substr(0,1)==="h"||ce==="oklch")&&(Ce=we,Ue=Ce[0],dt=Ce[1],mt=Ce[2],Ae=ze,st=Ae[0],$t=Ae[1],Rt=Ae[2]);var _t,wn,Sn,On;return!isNaN(Ue)&&!isNaN(st)?(st>Ue&&st-Ue>180?On=st-(Ue+360):st<Ue&&Ue-st>180?On=st+360-Ue:On=st-Ue,wn=Ue+X*On):isNaN(Ue)?isNaN(st)?wn=Number.NaN:(wn=st,(mt==1||mt==0)&&ce!="hsv"&&(_t=$t)):(wn=Ue,(Rt==1||Rt==0)&&ce!="hsv"&&(_t=dt)),_t===void 0&&(_t=dt+X*($t-dt)),Sn=mt+X*(Rt-mt),ce==="oklch"?new V_([Sn,_t,wn],ce):new V_([wn,_t,Sn],ce)},eG=fd,W_=function(D,z,X){return eG(D,z,X,"lch")};yr.lch=W_,yr.hcl=W_;var tG=x,nG=function(D,z,X){var ce=D.num(),Ce=z.num();return new tG(ce+X*(Ce-ce),"num")};yr.num=nG;var sG=fd,oG=function(D,z,X){return sG(D,z,X,"hcg")};yr.hcg=oG;var rG=fd,iG=function(D,z,X){return rG(D,z,X,"hsi")};yr.hsi=iG;var aG=fd,lG=function(D,z,X){return aG(D,z,X,"hsl")};yr.hsl=lG;var uG=fd,cG=function(D,z,X){return uG(D,z,X,"hsv")};yr.hsv=cG;var dG=x,fG=function(D,z,X){var ce=D.oklab(),Ce=z.oklab();return new dG(ce[0]+X*(Ce[0]-ce[0]),ce[1]+X*(Ce[1]-ce[1]),ce[2]+X*(Ce[2]-ce[2]),"oklab")};yr.oklab=fG;var hG=fd,pG=function(D,z,X){return hG(D,z,X,"oklch")};yr.oklch=pG;var qw=x,mG=m.clip_rgb,Yw=Math.pow,Xw=Math.sqrt,Zw=Math.PI,H_=Math.cos,U_=Math.sin,gG=Math.atan2,vG=function(D,z,X){z===void 0&&(z="lrgb"),X===void 0&&(X=null);var ce=D.length;X||(X=Array.from(new Array(ce)).map(function(){return 1}));var Ce=ce/X.reduce(function(wn,Sn){return wn+Sn});if(X.forEach(function(wn,Sn){X[Sn]*=Ce}),D=D.map(function(wn){return new qw(wn)}),z==="lrgb")return bG(D,X);for(var Ae=D.shift(),we=Ae.get(z),ze=[],Ue=0,st=0,dt=0;dt<we.length;dt++)if(we[dt]=(we[dt]||0)*X[0],ze.push(isNaN(we[dt])?0:X[0]),z.charAt(dt)==="h"&&!isNaN(we[dt])){var $t=we[dt]/180*Zw;Ue+=H_($t)*X[0],st+=U_($t)*X[0]}var mt=Ae.alpha()*X[0];D.forEach(function(wn,Sn){var On=wn.get(z);mt+=wn.alpha()*X[Sn+1];for(var Vn=0;Vn<we.length;Vn++)if(!isNaN(On[Vn]))if(ze[Vn]+=X[Sn+1],z.charAt(Vn)==="h"){var So=On[Vn]/180*Zw;Ue+=H_(So)*X[Sn+1],st+=U_(So)*X[Sn+1]}else we[Vn]+=On[Vn]*X[Sn+1]});for(var Rt=0;Rt<we.length;Rt++)if(z.charAt(Rt)==="h"){for(var _t=gG(st/ze[Rt],Ue/ze[Rt])/Zw*180;_t<0;)_t+=360;for(;_t>=360;)_t-=360;we[Rt]=_t}else we[Rt]=we[Rt]/ze[Rt];return mt/=ce,new qw(we,z).alpha(mt>.99999?1:mt,!0)},bG=function(D,z){for(var X=D.length,ce=[0,0,0,0],Ce=0;Ce<D.length;Ce++){var Ae=D[Ce],we=z[Ce]/X,ze=Ae._rgb;ce[0]+=Yw(ze[0],2)*we,ce[1]+=Yw(ze[1],2)*we,ce[2]+=Yw(ze[2],2)*we,ce[3]+=ze[3]*we}return ce[0]=Xw(ce[0]),ce[1]=Xw(ce[1]),ce[2]=Xw(ce[2]),ce[3]>.9999999&&(ce[3]=1),new qw(mG(ce))},Ii=S,hd=m.type,yG=Math.pow,Jw=function(D){var z="rgb",X=Ii("#ccc"),ce=0,Ce=[0,1],Ae=[],we=[0,0],ze=!1,Ue=[],st=!1,dt=0,$t=1,mt=!1,Rt={},_t=!0,wn=1,Sn=function(gt){if(gt=gt||["#fff","#000"],gt&&hd(gt)==="string"&&Ii.brewer&&Ii.brewer[gt.toLowerCase()]&&(gt=Ii.brewer[gt.toLowerCase()]),hd(gt)==="array"){gt.length===1&&(gt=[gt[0],gt[0]]),gt=gt.slice(0);for(var Jt=0;Jt<gt.length;Jt++)gt[Jt]=Ii(gt[Jt]);Ae.length=0;for(var Cn=0;Cn<gt.length;Cn++)Ae.push(Cn/(gt.length-1))}return sr(),Ue=gt},On=function(gt){if(ze!=null){for(var Jt=ze.length-1,Cn=0;Cn<Jt&&gt>=ze[Cn];)Cn++;return Cn-1}return 0},Vn=function(gt){return gt},So=function(gt){return gt},fo=function(gt,Jt){var Cn,kn;if(Jt==null&&(Jt=!1),isNaN(gt)||gt===null)return X;if(Jt)kn=gt;else if(ze&&ze.length>2){var Io=On(gt);kn=Io/(ze.length-2)}else $t!==dt?kn=(gt-dt)/($t-dt):kn=1;kn=So(kn),Jt||(kn=Vn(kn)),wn!==1&&(kn=yG(kn,wn)),kn=we[0]+kn*(1-we[0]-we[1]),kn=Math.min(1,Math.max(0,kn));var ds=Math.floor(kn*1e4);if(_t&&Rt[ds])Cn=Rt[ds];else{if(hd(Ue)==="array")for(var Pn=0;Pn<Ae.length;Pn++){var Un=Ae[Pn];if(kn<=Un){Cn=Ue[Pn];break}if(kn>=Un&&Pn===Ae.length-1){Cn=Ue[Pn];break}if(kn>Un&&kn<Ae[Pn+1]){kn=(kn-Un)/(Ae[Pn+1]-Un),Cn=Ii.interpolate(Ue[Pn],Ue[Pn+1],kn,z);break}}else hd(Ue)==="function"&&(Cn=Ue(kn));_t&&(Rt[ds]=Cn)}return Cn},sr=function(){return Rt={}};Sn(D);var Nn=function(gt){var Jt=Ii(fo(gt));return st&&Jt[st]?Jt[st]():Jt};return Nn.classes=function(gt){if(gt!=null){if(hd(gt)==="array")ze=gt,Ce=[gt[0],gt[gt.length-1]];else{var Jt=Ii.analyze(Ce);gt===0?ze=[Jt.min,Jt.max]:ze=Ii.limits(Jt,"e",gt)}return Nn}return ze},Nn.domain=function(gt){if(!arguments.length)return Ce;dt=gt[0],$t=gt[gt.length-1],Ae=[];var Jt=Ue.length;if(gt.length===Jt&&dt!==$t)for(var Cn=0,kn=Array.from(gt);Cn<kn.length;Cn+=1){var Io=kn[Cn];Ae.push((Io-dt)/($t-dt))}else{for(var ds=0;ds<Jt;ds++)Ae.push(ds/(Jt-1));if(gt.length>2){var Pn=gt.map(function(jn,Zn){return Zn/(gt.length-1)}),Un=gt.map(function(jn){return(jn-dt)/($t-dt)});Un.every(function(jn,Zn){return Pn[Zn]===jn})||(So=function(jn){if(jn<=0||jn>=1)return jn;for(var Zn=0;jn>=Un[Zn+1];)Zn++;var Ti=(jn-Un[Zn])/(Un[Zn+1]-Un[Zn]),bl=Pn[Zn]+Ti*(Pn[Zn+1]-Pn[Zn]);return bl})}}return Ce=[dt,$t],Nn},Nn.mode=function(gt){return arguments.length?(z=gt,sr(),Nn):z},Nn.range=function(gt,Jt){return Sn(gt),Nn},Nn.out=function(gt){return st=gt,Nn},Nn.spread=function(gt){return arguments.length?(ce=gt,Nn):ce},Nn.correctLightness=function(gt){return gt==null&&(gt=!0),mt=gt,sr(),mt?Vn=function(Jt){for(var Cn=fo(0,!0).lab()[0],kn=fo(1,!0).lab()[0],Io=Cn>kn,ds=fo(Jt,!0).lab()[0],Pn=Cn+(kn-Cn)*Jt,Un=ds-Pn,jn=0,Zn=1,Ti=20;Math.abs(Un)>.01&&Ti-- >0;)(function(){return Io&&(Un*=-1),Un<0?(jn=Jt,Jt+=(Zn-Jt)*.5):(Zn=Jt,Jt+=(jn-Jt)*.5),ds=fo(Jt,!0).lab()[0],Un=ds-Pn})();return Jt}:Vn=function(Jt){return Jt},Nn},Nn.padding=function(gt){return gt!=null?(hd(gt)==="number"&&(gt=[gt,gt]),we=gt,Nn):we},Nn.colors=function(gt,Jt){arguments.length<2&&(Jt="hex");var Cn=[];if(arguments.length===0)Cn=Ue.slice(0);else if(gt===1)Cn=[Nn(.5)];else if(gt>1){var kn=Ce[0],Io=Ce[1]-kn;Cn=wG(0,gt,!1).map(function(Zn){return Nn(kn+Zn/(gt-1)*Io)})}else{D=[];var ds=[];if(ze&&ze.length>2)for(var Pn=1,Un=ze.length,jn=1<=Un;jn?Pn<Un:Pn>Un;jn?Pn++:Pn--)ds.push((ze[Pn-1]+ze[Pn])*.5);else ds=Ce;Cn=ds.map(function(Zn){return Nn(Zn)})}return Ii[Jt]&&(Cn=Cn.map(function(Zn){return Zn[Jt]()})),Cn},Nn.cache=function(gt){return gt!=null?(_t=gt,Nn):_t},Nn.gamma=function(gt){return gt!=null?(wn=gt,Nn):wn},Nn.nodata=function(gt){return gt!=null?(X=Ii(gt),Nn):X},Nn};function wG(D,z,X){for(var ce=[],Ce=D<z,Ae=X?Ce?z+1:z-1:z,we=D;Ce?we<Ae:we>Ae;Ce?we++:we--)ce.push(we);return ce}var ph=x,kG=Jw,xG=function(D){for(var z=[1,1],X=1;X<D;X++){for(var ce=[1],Ce=1;Ce<=z.length;Ce++)ce[Ce]=(z[Ce]||0)+z[Ce-1];z=ce}return z},CG=function(D){var z,X,ce,Ce,Ae,we,ze;if(D=D.map(function(mt){return new ph(mt)}),D.length===2)z=D.map(function(mt){return mt.lab()}),Ae=z[0],we=z[1],Ce=function(mt){var Rt=[0,1,2].map(function(_t){return Ae[_t]+mt*(we[_t]-Ae[_t])});return new ph(Rt,"lab")};else if(D.length===3)X=D.map(function(mt){return mt.lab()}),Ae=X[0],we=X[1],ze=X[2],Ce=function(mt){var Rt=[0,1,2].map(function(_t){return(1-mt)*(1-mt)*Ae[_t]+2*(1-mt)*mt*we[_t]+mt*mt*ze[_t]});return new ph(Rt,"lab")};else if(D.length===4){var Ue;ce=D.map(function(mt){return mt.lab()}),Ae=ce[0],we=ce[1],ze=ce[2],Ue=ce[3],Ce=function(mt){var Rt=[0,1,2].map(function(_t){return(1-mt)*(1-mt)*(1-mt)*Ae[_t]+3*(1-mt)*(1-mt)*mt*we[_t]+3*(1-mt)*mt*mt*ze[_t]+mt*mt*mt*Ue[_t]});return new ph(Rt,"lab")}}else if(D.length>=5){var st,dt,$t;st=D.map(function(mt){return mt.lab()}),$t=D.length-1,dt=xG($t),Ce=function(mt){var Rt=1-mt,_t=[0,1,2].map(function(wn){return st.reduce(function(Sn,On,Vn){return Sn+dt[Vn]*Math.pow(Rt,$t-Vn)*Math.pow(mt,Vn)*On[wn]},0)});return new ph(_t,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return Ce},$G=function(D){var z=CG(D);return z.scale=function(){return kG(z)},z},Qw=S,Ei=function(D,z,X){if(!Ei[X])throw new Error("unknown blend mode "+X);return Ei[X](D,z)},gl=function(D){return function(z,X){var ce=Qw(X).rgb(),Ce=Qw(z).rgb();return Qw.rgb(D(ce,Ce))}},vl=function(D){return function(z,X){var ce=[];return ce[0]=D(z[0],X[0]),ce[1]=D(z[1],X[1]),ce[2]=D(z[2],X[2]),ce}},SG=function(D){return D},IG=function(D,z){return D*z/255},EG=function(D,z){return D>z?z:D},TG=function(D,z){return D>z?D:z},_G=function(D,z){return 255*(1-(1-D/255)*(1-z/255))},NG=function(D,z){return z<128?2*D*z/255:255*(1-2*(1-D/255)*(1-z/255))},AG=function(D,z){return 255*(1-(1-z/255)/(D/255))},DG=function(D,z){return D===255?255:(D=255*(z/255)/(1-D/255),D>255?255:D)};Ei.normal=gl(vl(SG)),Ei.multiply=gl(vl(IG)),Ei.screen=gl(vl(_G)),Ei.overlay=gl(vl(NG)),Ei.darken=gl(vl(EG)),Ei.lighten=gl(vl(TG)),Ei.dodge=gl(vl(DG)),Ei.burn=gl(vl(AG));for(var RG=Ei,e2=m.type,MG=m.clip_rgb,OG=m.TWOPI,PG=Math.pow,FG=Math.sin,LG=Math.cos,j_=S,BG=function(D,z,X,ce,Ce){D===void 0&&(D=300),z===void 0&&(z=-1.5),X===void 0&&(X=1),ce===void 0&&(ce=1),Ce===void 0&&(Ce=[0,1]);var Ae=0,we;e2(Ce)==="array"?we=Ce[1]-Ce[0]:(we=0,Ce=[Ce,Ce]);var ze=function(Ue){var st=OG*((D+120)/360+z*Ue),dt=PG(Ce[0]+we*Ue,ce),$t=Ae!==0?X[0]+Ue*Ae:X,mt=$t*dt*(1-dt)/2,Rt=LG(st),_t=FG(st),wn=dt+mt*(-.14861*Rt+1.78277*_t),Sn=dt+mt*(-.29227*Rt-.90649*_t),On=dt+mt*(1.97294*Rt);return j_(MG([wn*255,Sn*255,On*255,1]))};return ze.start=function(Ue){return Ue==null?D:(D=Ue,ze)},ze.rotations=function(Ue){return Ue==null?z:(z=Ue,ze)},ze.gamma=function(Ue){return Ue==null?ce:(ce=Ue,ze)},ze.hue=function(Ue){return Ue==null?X:(X=Ue,e2(X)==="array"?(Ae=X[1]-X[0],Ae===0&&(X=X[1])):Ae=0,ze)},ze.lightness=function(Ue){return Ue==null?Ce:(e2(Ue)==="array"?(Ce=Ue,we=Ue[1]-Ue[0]):(Ce=[Ue,Ue],we=0),ze)},ze.scale=function(){return j_.scale(ze)},ze.hue(X),ze},zG=x,VG="0123456789abcdef",WG=Math.floor,HG=Math.random,UG=function(){for(var D="#",z=0;z<6;z++)D+=VG.charAt(WG(HG()*16));return new zG(D,"hex")},t2=u,G_=Math.log,jG=Math.pow,GG=Math.floor,KG=Math.abs,K_=function(D,z){z===void 0&&(z=null);var X={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return t2(D)==="object"&&(D=Object.values(D)),D.forEach(function(ce){z&&t2(ce)==="object"&&(ce=ce[z]),ce!=null&&!isNaN(ce)&&(X.values.push(ce),X.sum+=ce,ce<X.min&&(X.min=ce),ce>X.max&&(X.max=ce),X.count+=1)}),X.domain=[X.min,X.max],X.limits=function(ce,Ce){return q_(X,ce,Ce)},X},q_=function(D,z,X){z===void 0&&(z="equal"),X===void 0&&(X=7),t2(D)=="array"&&(D=K_(D));var ce=D.min,Ce=D.max,Ae=D.values.sort(function(s2,o2){return s2-o2});if(X===1)return[ce,Ce];var we=[];if(z.substr(0,1)==="c"&&(we.push(ce),we.push(Ce)),z.substr(0,1)==="e"){we.push(ce);for(var ze=1;ze<X;ze++)we.push(ce+ze/X*(Ce-ce));we.push(Ce)}else if(z.substr(0,1)==="l"){if(ce<=0)throw new Error("Logarithmic scales are only possible for values > 0");var Ue=Math.LOG10E*G_(ce),st=Math.LOG10E*G_(Ce);we.push(ce);for(var dt=1;dt<X;dt++)we.push(jG(10,Ue+dt/X*(st-Ue)));we.push(Ce)}else if(z.substr(0,1)==="q"){we.push(ce);for(var $t=1;$t<X;$t++){var mt=(Ae.length-1)*$t/X,Rt=GG(mt);if(Rt===mt)we.push(Ae[Rt]);else{var _t=mt-Rt;we.push(Ae[Rt]*(1-_t)+Ae[Rt+1]*_t)}}we.push(Ce)}else if(z.substr(0,1)==="k"){var wn,Sn=Ae.length,On=new Array(Sn),Vn=new Array(X),So=!0,fo=0,sr=null;sr=[],sr.push(ce);for(var Nn=1;Nn<X;Nn++)sr.push(ce+Nn/X*(Ce-ce));for(sr.push(Ce);So;){for(var gt=0;gt<X;gt++)Vn[gt]=0;for(var Jt=0;Jt<Sn;Jt++)for(var Cn=Ae[Jt],kn=Number.MAX_VALUE,Io=void 0,ds=0;ds<X;ds++){var Pn=KG(sr[ds]-Cn);Pn<kn&&(kn=Pn,Io=ds),Vn[Io]++,On[Jt]=Io}for(var Un=new Array(X),jn=0;jn<X;jn++)Un[jn]=null;for(var Zn=0;Zn<Sn;Zn++)wn=On[Zn],Un[wn]===null?Un[wn]=Ae[Zn]:Un[wn]+=Ae[Zn];for(var Ti=0;Ti<X;Ti++)Un[Ti]*=1/Vn[Ti];So=!1;for(var bl=0;bl<X;bl++)if(Un[bl]!==sr[bl]){So=!0;break}sr=Un,fo++,fo>200&&(So=!1)}for(var yl={},pd=0;pd<X;pd++)yl[pd]=[];for(var md=0;md<Sn;md++)wn=On[md],yl[wn].push(Ae[md]);for(var _a=[],Cu=0;Cu<X;Cu++)_a.push(yl[Cu][0]),_a.push(yl[Cu][yl[Cu].length-1]);_a=_a.sort(function(s2,o2){return s2-o2}),we.push(_a[0]);for(var mh=1;mh<_a.length;mh+=2){var $u=_a[mh];!isNaN($u)&&we.indexOf($u)===-1&&we.push($u)}}return we},Y_={analyze:K_,limits:q_},X_=x,qG=function(D,z){D=new X_(D),z=new X_(z);var X=D.luminance(),ce=z.luminance();return X>ce?(X+.05)/(ce+.05):(ce+.05)/(X+.05)},Z_=x,Ta=Math.sqrt,js=Math.pow,YG=Math.min,XG=Math.max,J_=Math.atan2,Q_=Math.abs,f0=Math.cos,eN=Math.sin,ZG=Math.exp,tN=Math.PI,JG=function(D,z,X,ce,Ce){X===void 0&&(X=1),ce===void 0&&(ce=1),Ce===void 0&&(Ce=1);var Ae=function($u){return 360*$u/(2*tN)},we=function($u){return 2*tN*$u/360};D=new Z_(D),z=new Z_(z);var ze=Array.from(D.lab()),Ue=ze[0],st=ze[1],dt=ze[2],$t=Array.from(z.lab()),mt=$t[0],Rt=$t[1],_t=$t[2],wn=(Ue+mt)/2,Sn=Ta(js(st,2)+js(dt,2)),On=Ta(js(Rt,2)+js(_t,2)),Vn=(Sn+On)/2,So=.5*(1-Ta(js(Vn,7)/(js(Vn,7)+js(25,7)))),fo=st*(1+So),sr=Rt*(1+So),Nn=Ta(js(fo,2)+js(dt,2)),gt=Ta(js(sr,2)+js(_t,2)),Jt=(Nn+gt)/2,Cn=Ae(J_(dt,fo)),kn=Ae(J_(_t,sr)),Io=Cn>=0?Cn:Cn+360,ds=kn>=0?kn:kn+360,Pn=Q_(Io-ds)>180?(Io+ds+360)/2:(Io+ds)/2,Un=1-.17*f0(we(Pn-30))+.24*f0(we(2*Pn))+.32*f0(we(3*Pn+6))-.2*f0(we(4*Pn-63)),jn=ds-Io;jn=Q_(jn)<=180?jn:ds<=Io?jn+360:jn-360,jn=2*Ta(Nn*gt)*eN(we(jn)/2);var Zn=mt-Ue,Ti=gt-Nn,bl=1+.015*js(wn-50,2)/Ta(20+js(wn-50,2)),yl=1+.045*Jt,pd=1+.015*Jt*Un,md=30*ZG(-js((Pn-275)/25,2)),_a=2*Ta(js(Jt,7)/(js(Jt,7)+js(25,7))),Cu=-_a*eN(2*we(md)),mh=Ta(js(Zn/(X*bl),2)+js(Ti/(ce*yl),2)+js(jn/(Ce*pd),2)+Cu*(Ti/(ce*yl))*(jn/(Ce*pd)));return XG(0,YG(100,mh))},nN=x,QG=function(D,z,X){X===void 0&&(X="lab"),D=new nN(D),z=new nN(z);var ce=D.get(X),Ce=z.get(X),Ae=0;for(var we in ce){var ze=(ce[we]||0)-(Ce[we]||0);Ae+=ze*ze}return Math.sqrt(Ae)},eK=x,tK=function(){for(var D=[],z=arguments.length;z--;)D[z]=arguments[z];try{return new(Function.prototype.bind.apply(eK,[null].concat(D))),!0}catch{return!1}},sN=S,oN=Jw,nK={cool:function(){return oN([sN.hsl(180,1,.9),sN.hsl(250,.7,.4)])},hot:function(){return oN(["#000","#f00","#ff0","#fff"]).mode("rgb")}},h0={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},n2=0,rN=Object.keys(h0);n2<rN.length;n2+=1){var iN=rN[n2];h0[iN.toLowerCase()]=h0[iN]}var sK=h0,co=S;co.average=vG,co.bezier=$G,co.blend=RG,co.cubehelix=BG,co.mix=co.interpolate=P_,co.random=UG,co.scale=Jw,co.analyze=Y_.analyze,co.contrast=qG,co.deltaE=JG,co.distance=QG,co.limits=Y_.limits,co.valid=tK,co.scales=nK,co.colors=b_,co.brewer=sK;var oK=co;return oK})})(VH);var mKe=VH.exports,hT={},dw={};dw.byteLength=bKe;dw.toByteArray=wKe;dw.fromByteArray=CKe;var la=[],Gr=[],gKe=typeof Uint8Array!="undefined"?Uint8Array:Array,ik="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Sd=0,vKe=ik.length;Sd<vKe;++Sd)la[Sd]=ik[Sd],Gr[ik.charCodeAt(Sd)]=Sd;Gr["-".charCodeAt(0)]=62;Gr["_".charCodeAt(0)]=63;function WH(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var s=n===t?0:4-n%4;return[n,s]}function bKe(e){var t=WH(e),n=t[0],s=t[1];return(n+s)*3/4-s}function yKe(e,t,n){return(t+n)*3/4-n}function wKe(e){var t,n=WH(e),s=n[0],o=n[1],r=new gKe(yKe(e,s,o)),i=0,a=o>0?s-4:s,l;for(l=0;l<a;l+=4)t=Gr[e.charCodeAt(l)]<<18|Gr[e.charCodeAt(l+1)]<<12|Gr[e.charCodeAt(l+2)]<<6|Gr[e.charCodeAt(l+3)],r[i++]=t>>16&255,r[i++]=t>>8&255,r[i++]=t&255;return o===2&&(t=Gr[e.charCodeAt(l)]<<2|Gr[e.charCodeAt(l+1)]>>4,r[i++]=t&255),o===1&&(t=Gr[e.charCodeAt(l)]<<10|Gr[e.charCodeAt(l+1)]<<4|Gr[e.charCodeAt(l+2)]>>2,r[i++]=t>>8&255,r[i++]=t&255),r}function kKe(e){return la[e>>18&63]+la[e>>12&63]+la[e>>6&63]+la[e&63]}function xKe(e,t,n){for(var s,o=[],r=t;r<n;r+=3)s=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(e[r+2]&255),o.push(kKe(s));return o.join("")}function CKe(e){for(var t,n=e.length,s=n%3,o=[],r=16383,i=0,a=n-s;i<a;i+=r)o.push(xKe(e,i,i+r>a?a:i+r));return s===1?(t=e[n-1],o.push(la[t>>2]+la[t<<4&63]+"==")):s===2&&(t=(e[n-2]<<8)+e[n-1],o.push(la[t>>10]+la[t>>4&63]+la[t<<2&63]+"=")),o.join("")}var pT={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */pT.read=function(e,t,n,s,o){var r,i,a=o*8-s-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?o-1:0,f=n?-1:1,h=e[t+d];for(d+=f,r=h&(1<<-c)-1,h>>=-c,c+=a;c>0;r=r*256+e[t+d],d+=f,c-=8);for(i=r&(1<<-c)-1,r>>=-c,c+=s;c>0;i=i*256+e[t+d],d+=f,c-=8);if(r===0)r=1-u;else{if(r===l)return i?NaN:(h?-1:1)*(1/0);i=i+Math.pow(2,s),r=r-u}return(h?-1:1)*i*Math.pow(2,r-s)};pT.write=function(e,t,n,s,o,r){var i,a,l,u=r*8-o-1,c=(1<<u)-1,d=c>>1,f=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=s?0:r-1,p=s?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+d>=1?t+=f/l:t+=f*Math.pow(2,1-d),t*l>=2&&(i++,l/=2),i+d>=c?(a=0,i=c):i+d>=1?(a=(t*l-1)*Math.pow(2,o),i=i+d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[n+h]=a&255,h+=p,a/=256,o-=8);for(i=i<<o|a,u+=o;u>0;e[n+h]=i&255,h+=p,i/=256,u-=8);e[n+h-p]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=dw,n=pT,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=r(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{const K=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(K,E),K.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function i(K){if(K>o)throw new RangeError('The value "'+K+'" is invalid for option "size"');const E=new Uint8Array(K);return Object.setPrototypeOf(E,a.prototype),E}function a(K,E,I){if(typeof K=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(K)}return l(K,E,I)}a.poolSize=8192;function l(K,E,I){if(typeof K=="string")return f(K,E);if(ArrayBuffer.isView(K))return p(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(Ie(K,ArrayBuffer)||K&&Ie(K.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Ie(K,SharedArrayBuffer)||K&&Ie(K.buffer,SharedArrayBuffer)))return m(K,E,I);if(typeof K=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const G=K.valueOf&&K.valueOf();if(G!=null&&G!==K)return a.from(G,E,I);const Z=g(K);if(Z)return Z;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]=="function")return a.from(K[Symbol.toPrimitive]("string"),E,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}a.from=function(K,E,I){return l(K,E,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(K){if(typeof K!="number")throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function c(K,E,I){return u(K),K<=0?i(K):E!==void 0?typeof I=="string"?i(K).fill(E,I):i(K).fill(E):i(K)}a.alloc=function(K,E,I){return c(K,E,I)};function d(K){return u(K),i(K<0?0:v(K)|0)}a.allocUnsafe=function(K){return d(K)},a.allocUnsafeSlow=function(K){return d(K)};function f(K,E){if((typeof E!="string"||E==="")&&(E="utf8"),!a.isEncoding(E))throw new TypeError("Unknown encoding: "+E);const I=w(K,E)|0;let G=i(I);const Z=G.write(K,E);return Z!==I&&(G=G.slice(0,Z)),G}function h(K){const E=K.length<0?0:v(K.length)|0,I=i(E);for(let G=0;G<E;G+=1)I[G]=K[G]&255;return I}function p(K){if(Ie(K,Uint8Array)){const E=new Uint8Array(K);return m(E.buffer,E.byteOffset,E.byteLength)}return h(K)}function m(K,E,I){if(E<0||K.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<E+(I||0))throw new RangeError('"length" is outside of buffer bounds');let G;return E===void 0&&I===void 0?G=new Uint8Array(K):I===void 0?G=new Uint8Array(K,E):G=new Uint8Array(K,E,I),Object.setPrototypeOf(G,a.prototype),G}function g(K){if(a.isBuffer(K)){const E=v(K.length)|0,I=i(E);return I.length===0||K.copy(I,0,0,E),I}if(K.length!==void 0)return typeof K.length!="number"||ot(K.length)?i(0):h(K);if(K.type==="Buffer"&&Array.isArray(K.data))return h(K.data)}function v(K){if(K>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return K|0}function b(K){return+K!=K&&(K=0),a.alloc(+K)}a.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==a.prototype},a.compare=function(E,I){if(Ie(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),Ie(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(E)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===I)return 0;let G=E.length,Z=I.length;for(let he=0,Te=Math.min(G,Z);he<Te;++he)if(E[he]!==I[he]){G=E[he],Z=I[he];break}return G<Z?-1:Z<G?1:0},a.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(E,I){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return a.alloc(0);let G;if(I===void 0)for(I=0,G=0;G<E.length;++G)I+=E[G].length;const Z=a.allocUnsafe(I);let he=0;for(G=0;G<E.length;++G){let Te=E[G];if(Ie(Te,Uint8Array))he+Te.length>Z.length?(a.isBuffer(Te)||(Te=a.from(Te)),Te.copy(Z,he)):Uint8Array.prototype.set.call(Z,Te,he);else if(a.isBuffer(Te))Te.copy(Z,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=Te.length}return Z};function w(K,E){if(a.isBuffer(K))return K.length;if(ArrayBuffer.isView(K)||Ie(K,ArrayBuffer))return K.byteLength;if(typeof K!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);const I=K.length,G=arguments.length>2&&arguments[2]===!0;if(!G&&I===0)return 0;let Z=!1;for(;;)switch(E){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return Le(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return ge(K).length;default:if(Z)return G?-1:Le(K).length;E=(""+E).toLowerCase(),Z=!0}}a.byteLength=w;function y(K,E,I){let G=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,E>>>=0,I<=E))return"";for(K||(K="utf8");;)switch(K){case"hex":return Y(this,E,I);case"utf8":case"utf-8":return V(this,E,I);case"ascii":return M(this,E,I);case"latin1":case"binary":return B(this,E,I);case"base64":return P(this,E,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,E,I);default:if(G)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),G=!0}}a.prototype._isBuffer=!0;function k(K,E,I){const G=K[E];K[E]=K[I],K[I]=G}a.prototype.swap16=function(){const E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<E;I+=2)k(this,I,I+1);return this},a.prototype.swap32=function(){const E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<E;I+=4)k(this,I,I+3),k(this,I+1,I+2);return this},a.prototype.swap64=function(){const E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<E;I+=8)k(this,I,I+7),k(this,I+1,I+6),k(this,I+2,I+5),k(this,I+3,I+4);return this},a.prototype.toString=function(){const E=this.length;return E===0?"":arguments.length===0?V(this,0,E):y.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(E){if(!a.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:a.compare(this,E)===0},a.prototype.inspect=function(){let E="";const I=e.INSPECT_MAX_BYTES;return E=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(E+=" ... "),"<Buffer "+E+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(E,I,G,Z,he){if(Ie(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),!a.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(I===void 0&&(I=0),G===void 0&&(G=E?E.length:0),Z===void 0&&(Z=0),he===void 0&&(he=this.length),I<0||G>E.length||Z<0||he>this.length)throw new RangeError("out of range index");if(Z>=he&&I>=G)return 0;if(Z>=he)return-1;if(I>=G)return 1;if(I>>>=0,G>>>=0,Z>>>=0,he>>>=0,this===E)return 0;let Te=he-Z,bt=G-I;const Lt=Math.min(Te,bt),Dt=this.slice(Z,he),qt=E.slice(I,G);for(let un=0;un<Lt;++un)if(Dt[un]!==qt[un]){Te=Dt[un],bt=qt[un];break}return Te<bt?-1:bt<Te?1:0};function x(K,E,I,G,Z){if(K.length===0)return-1;if(typeof I=="string"?(G=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,ot(I)&&(I=Z?0:K.length-1),I<0&&(I=K.length+I),I>=K.length){if(Z)return-1;I=K.length-1}else if(I<0)if(Z)I=0;else return-1;if(typeof E=="string"&&(E=a.from(E,G)),a.isBuffer(E))return E.length===0?-1:C(K,E,I,G,Z);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(K,E,I):Uint8Array.prototype.lastIndexOf.call(K,E,I):C(K,[E],I,G,Z);throw new TypeError("val must be string, number or Buffer")}function C(K,E,I,G,Z){let he=1,Te=K.length,bt=E.length;if(G!==void 0&&(G=String(G).toLowerCase(),G==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(K.length<2||E.length<2)return-1;he=2,Te/=2,bt/=2,I/=2}function Lt(qt,un){return he===1?qt[un]:qt.readUInt16BE(un*he)}let Dt;if(Z){let qt=-1;for(Dt=I;Dt<Te;Dt++)if(Lt(K,Dt)===Lt(E,qt===-1?0:Dt-qt)){if(qt===-1&&(qt=Dt),Dt-qt+1===bt)return qt*he}else qt!==-1&&(Dt-=Dt-qt),qt=-1}else for(I+bt>Te&&(I=Te-bt),Dt=I;Dt>=0;Dt--){let qt=!0;for(let un=0;un<bt;un++)if(Lt(K,Dt+un)!==Lt(E,un)){qt=!1;break}if(qt)return Dt}return-1}a.prototype.includes=function(E,I,G){return this.indexOf(E,I,G)!==-1},a.prototype.indexOf=function(E,I,G){return x(this,E,I,G,!0)},a.prototype.lastIndexOf=function(E,I,G){return x(this,E,I,G,!1)};function S(K,E,I,G){I=Number(I)||0;const Z=K.length-I;G?(G=Number(G),G>Z&&(G=Z)):G=Z;const he=E.length;G>he/2&&(G=he/2);let Te;for(Te=0;Te<G;++Te){const bt=parseInt(E.substr(Te*2,2),16);if(ot(bt))return Te;K[I+Te]=bt}return Te}function T(K,E,I,G){return be(Le(E,K.length-I),K,I,G)}function A(K,E,I,G){return be(Ke(E),K,I,G)}function R(K,E,I,G){return be(ge(E),K,I,G)}function L(K,E,I,G){return be(ie(E,K.length-I),K,I,G)}a.prototype.write=function(E,I,G,Z){if(I===void 0)Z="utf8",G=this.length,I=0;else if(G===void 0&&typeof I=="string")Z=I,G=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(G)?(G=G>>>0,Z===void 0&&(Z="utf8")):(Z=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-I;if((G===void 0||G>he)&&(G=he),E.length>0&&(G<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");let Te=!1;for(;;)switch(Z){case"hex":return S(this,E,I,G);case"utf8":case"utf-8":return T(this,E,I,G);case"ascii":case"latin1":case"binary":return A(this,E,I,G);case"base64":return R(this,E,I,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,E,I,G);default:if(Te)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),Te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(K,E,I){return E===0&&I===K.length?t.fromByteArray(K):t.fromByteArray(K.slice(E,I))}function V(K,E,I){I=Math.min(K.length,I);const G=[];let Z=E;for(;Z<I;){const he=K[Z];let Te=null,bt=he>239?4:he>223?3:he>191?2:1;if(Z+bt<=I){let Lt,Dt,qt,un;switch(bt){case 1:he<128&&(Te=he);break;case 2:Lt=K[Z+1],(Lt&192)===128&&(un=(he&31)<<6|Lt&63,un>127&&(Te=un));break;case 3:Lt=K[Z+1],Dt=K[Z+2],(Lt&192)===128&&(Dt&192)===128&&(un=(he&15)<<12|(Lt&63)<<6|Dt&63,un>2047&&(un<55296||un>57343)&&(Te=un));break;case 4:Lt=K[Z+1],Dt=K[Z+2],qt=K[Z+3],(Lt&192)===128&&(Dt&192)===128&&(qt&192)===128&&(un=(he&15)<<18|(Lt&63)<<12|(Dt&63)<<6|qt&63,un>65535&&un<1114112&&(Te=un))}}Te===null?(Te=65533,bt=1):Te>65535&&(Te-=65536,G.push(Te>>>10&1023|55296),Te=56320|Te&1023),G.push(Te),Z+=bt}return F(G)}const H=4096;function F(K){const E=K.length;if(E<=H)return String.fromCharCode.apply(String,K);let I="",G=0;for(;G<E;)I+=String.fromCharCode.apply(String,K.slice(G,G+=H));return I}function M(K,E,I){let G="";I=Math.min(K.length,I);for(let Z=E;Z<I;++Z)G+=String.fromCharCode(K[Z]&127);return G}function B(K,E,I){let G="";I=Math.min(K.length,I);for(let Z=E;Z<I;++Z)G+=String.fromCharCode(K[Z]);return G}function Y(K,E,I){const G=K.length;(!E||E<0)&&(E=0),(!I||I<0||I>G)&&(I=G);let Z="";for(let he=E;he<I;++he)Z+=ve[K[he]];return Z}function J(K,E,I){const G=K.slice(E,I);let Z="";for(let he=0;he<G.length-1;he+=2)Z+=String.fromCharCode(G[he]+G[he+1]*256);return Z}a.prototype.slice=function(E,I){const G=this.length;E=~~E,I=I===void 0?G:~~I,E<0?(E+=G,E<0&&(E=0)):E>G&&(E=G),I<0?(I+=G,I<0&&(I=0)):I>G&&(I=G),I<E&&(I=E);const Z=this.subarray(E,I);return Object.setPrototypeOf(Z,a.prototype),Z};function ee(K,E,I){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+E>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(E,I,G){E=E>>>0,I=I>>>0,G||ee(E,I,this.length);let Z=this[E],he=1,Te=0;for(;++Te<I&&(he*=256);)Z+=this[E+Te]*he;return Z},a.prototype.readUintBE=a.prototype.readUIntBE=function(E,I,G){E=E>>>0,I=I>>>0,G||ee(E,I,this.length);let Z=this[E+--I],he=1;for(;I>0&&(he*=256);)Z+=this[E+--I]*he;return Z},a.prototype.readUint8=a.prototype.readUInt8=function(E,I){return E=E>>>0,I||ee(E,1,this.length),this[E]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(E,I){return E=E>>>0,I||ee(E,2,this.length),this[E]|this[E+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(E,I){return E=E>>>0,I||ee(E,2,this.length),this[E]<<8|this[E+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(E,I){return E=E>>>0,I||ee(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(E,I){return E=E>>>0,I||ee(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},a.prototype.readBigUInt64LE=Ve(function(E){E=E>>>0,ne(E,"offset");const I=this[E],G=this[E+7];(I===void 0||G===void 0)&&ue(E,this.length-8);const Z=I+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24,he=this[++E]+this[++E]*2**8+this[++E]*2**16+G*2**24;return BigInt(Z)+(BigInt(he)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ve(function(E){E=E>>>0,ne(E,"offset");const I=this[E],G=this[E+7];(I===void 0||G===void 0)&&ue(E,this.length-8);const Z=I*2**24+this[++E]*2**16+this[++E]*2**8+this[++E],he=this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+G;return(BigInt(Z)<<BigInt(32))+BigInt(he)}),a.prototype.readIntLE=function(E,I,G){E=E>>>0,I=I>>>0,G||ee(E,I,this.length);let Z=this[E],he=1,Te=0;for(;++Te<I&&(he*=256);)Z+=this[E+Te]*he;return he*=128,Z>=he&&(Z-=Math.pow(2,8*I)),Z},a.prototype.readIntBE=function(E,I,G){E=E>>>0,I=I>>>0,G||ee(E,I,this.length);let Z=I,he=1,Te=this[E+--Z];for(;Z>0&&(he*=256);)Te+=this[E+--Z]*he;return he*=128,Te>=he&&(Te-=Math.pow(2,8*I)),Te},a.prototype.readInt8=function(E,I){return E=E>>>0,I||ee(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},a.prototype.readInt16LE=function(E,I){E=E>>>0,I||ee(E,2,this.length);const G=this[E]|this[E+1]<<8;return G&32768?G|4294901760:G},a.prototype.readInt16BE=function(E,I){E=E>>>0,I||ee(E,2,this.length);const G=this[E+1]|this[E]<<8;return G&32768?G|4294901760:G},a.prototype.readInt32LE=function(E,I){return E=E>>>0,I||ee(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},a.prototype.readInt32BE=function(E,I){return E=E>>>0,I||ee(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},a.prototype.readBigInt64LE=Ve(function(E){E=E>>>0,ne(E,"offset");const I=this[E],G=this[E+7];(I===void 0||G===void 0)&&ue(E,this.length-8);const Z=this[E+4]+this[E+5]*2**8+this[E+6]*2**16+(G<<24);return(BigInt(Z)<<BigInt(32))+BigInt(I+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24)}),a.prototype.readBigInt64BE=Ve(function(E){E=E>>>0,ne(E,"offset");const I=this[E],G=this[E+7];(I===void 0||G===void 0)&&ue(E,this.length-8);const Z=(I<<24)+this[++E]*2**16+this[++E]*2**8+this[++E];return(BigInt(Z)<<BigInt(32))+BigInt(this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+G)}),a.prototype.readFloatLE=function(E,I){return E=E>>>0,I||ee(E,4,this.length),n.read(this,E,!0,23,4)},a.prototype.readFloatBE=function(E,I){return E=E>>>0,I||ee(E,4,this.length),n.read(this,E,!1,23,4)},a.prototype.readDoubleLE=function(E,I){return E=E>>>0,I||ee(E,8,this.length),n.read(this,E,!0,52,8)},a.prototype.readDoubleBE=function(E,I){return E=E>>>0,I||ee(E,8,this.length),n.read(this,E,!1,52,8)};function te(K,E,I,G,Z,he){if(!a.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>Z||E<he)throw new RangeError('"value" argument is out of bounds');if(I+G>K.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(E,I,G,Z){if(E=+E,I=I>>>0,G=G>>>0,!Z){const bt=Math.pow(2,8*G)-1;te(this,E,I,G,bt,0)}let he=1,Te=0;for(this[I]=E&255;++Te<G&&(he*=256);)this[I+Te]=E/he&255;return I+G},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(E,I,G,Z){if(E=+E,I=I>>>0,G=G>>>0,!Z){const bt=Math.pow(2,8*G)-1;te(this,E,I,G,bt,0)}let he=G-1,Te=1;for(this[I+he]=E&255;--he>=0&&(Te*=256);)this[I+he]=E/Te&255;return I+G},a.prototype.writeUint8=a.prototype.writeUInt8=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,1,255,0),this[I]=E&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,2,65535,0),this[I]=E&255,this[I+1]=E>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,2,65535,0),this[I]=E>>>8,this[I+1]=E&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,4,4294967295,0),this[I+3]=E>>>24,this[I+2]=E>>>16,this[I+1]=E>>>8,this[I]=E&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,4,4294967295,0),this[I]=E>>>24,this[I+1]=E>>>16,this[I+2]=E>>>8,this[I+3]=E&255,I+4};function re(K,E,I,G,Z){qe(E,G,Z,K,I,7);let he=Number(E&BigInt(4294967295));K[I++]=he,he=he>>8,K[I++]=he,he=he>>8,K[I++]=he,he=he>>8,K[I++]=he;let Te=Number(E>>BigInt(32)&BigInt(4294967295));return K[I++]=Te,Te=Te>>8,K[I++]=Te,Te=Te>>8,K[I++]=Te,Te=Te>>8,K[I++]=Te,I}function $e(K,E,I,G,Z){qe(E,G,Z,K,I,7);let he=Number(E&BigInt(4294967295));K[I+7]=he,he=he>>8,K[I+6]=he,he=he>>8,K[I+5]=he,he=he>>8,K[I+4]=he;let Te=Number(E>>BigInt(32)&BigInt(4294967295));return K[I+3]=Te,Te=Te>>8,K[I+2]=Te,Te=Te>>8,K[I+1]=Te,Te=Te>>8,K[I]=Te,I+8}a.prototype.writeBigUInt64LE=Ve(function(E,I=0){return re(this,E,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ve(function(E,I=0){return $e(this,E,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(E,I,G,Z){if(E=+E,I=I>>>0,!Z){const Lt=Math.pow(2,8*G-1);te(this,E,I,G,Lt-1,-Lt)}let he=0,Te=1,bt=0;for(this[I]=E&255;++he<G&&(Te*=256);)E<0&&bt===0&&this[I+he-1]!==0&&(bt=1),this[I+he]=(E/Te>>0)-bt&255;return I+G},a.prototype.writeIntBE=function(E,I,G,Z){if(E=+E,I=I>>>0,!Z){const Lt=Math.pow(2,8*G-1);te(this,E,I,G,Lt-1,-Lt)}let he=G-1,Te=1,bt=0;for(this[I+he]=E&255;--he>=0&&(Te*=256);)E<0&&bt===0&&this[I+he+1]!==0&&(bt=1),this[I+he]=(E/Te>>0)-bt&255;return I+G},a.prototype.writeInt8=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,1,127,-128),E<0&&(E=255+E+1),this[I]=E&255,I+1},a.prototype.writeInt16LE=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,2,32767,-32768),this[I]=E&255,this[I+1]=E>>>8,I+2},a.prototype.writeInt16BE=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,2,32767,-32768),this[I]=E>>>8,this[I+1]=E&255,I+2},a.prototype.writeInt32LE=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,4,2147483647,-2147483648),this[I]=E&255,this[I+1]=E>>>8,this[I+2]=E>>>16,this[I+3]=E>>>24,I+4},a.prototype.writeInt32BE=function(E,I,G){return E=+E,I=I>>>0,G||te(this,E,I,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[I]=E>>>24,this[I+1]=E>>>16,this[I+2]=E>>>8,this[I+3]=E&255,I+4},a.prototype.writeBigInt64LE=Ve(function(E,I=0){return re(this,E,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ve(function(E,I=0){return $e(this,E,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(K,E,I,G,Z,he){if(I+G>K.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Q(K,E,I,G,Z){return E=+E,I=I>>>0,Z||se(K,E,I,4),n.write(K,E,I,G,23,4),I+4}a.prototype.writeFloatLE=function(E,I,G){return Q(this,E,I,!0,G)},a.prototype.writeFloatBE=function(E,I,G){return Q(this,E,I,!1,G)};function ae(K,E,I,G,Z){return E=+E,I=I>>>0,Z||se(K,E,I,8),n.write(K,E,I,G,52,8),I+8}a.prototype.writeDoubleLE=function(E,I,G){return ae(this,E,I,!0,G)},a.prototype.writeDoubleBE=function(E,I,G){return ae(this,E,I,!1,G)},a.prototype.copy=function(E,I,G,Z){if(!a.isBuffer(E))throw new TypeError("argument should be a Buffer");if(G||(G=0),!Z&&Z!==0&&(Z=this.length),I>=E.length&&(I=E.length),I||(I=0),Z>0&&Z<G&&(Z=G),Z===G||E.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length),E.length-I<Z-G&&(Z=E.length-I+G);const he=Z-G;return this===E&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,G,Z):Uint8Array.prototype.set.call(E,this.subarray(G,Z),I),he},a.prototype.fill=function(E,I,G,Z){if(typeof E=="string"){if(typeof I=="string"?(Z=I,I=0,G=this.length):typeof G=="string"&&(Z=G,G=this.length),Z!==void 0&&typeof Z!="string")throw new TypeError("encoding must be a string");if(typeof Z=="string"&&!a.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(E.length===1){const Te=E.charCodeAt(0);(Z==="utf8"&&Te<128||Z==="latin1")&&(E=Te)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(I<0||this.length<I||this.length<G)throw new RangeError("Out of range index");if(G<=I)return this;I=I>>>0,G=G===void 0?this.length:G>>>0,E||(E=0);let he;if(typeof E=="number")for(he=I;he<G;++he)this[he]=E;else{const Te=a.isBuffer(E)?E:a.from(E,Z),bt=Te.length;if(bt===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(he=0;he<G-I;++he)this[he+I]=Te[he%bt]}return this};const pe={};function ke(K,E,I){pe[K]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:E.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${K}]`,this.stack,delete this.name}get code(){return K}set code(Z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Z,writable:!0})}toString(){return`${this.name} [${K}]: ${this.message}`}}}ke("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?`${K} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ke("ERR_INVALID_ARG_TYPE",function(K,E){return`The "${K}" argument must be of type number. Received type ${typeof E}`},TypeError),ke("ERR_OUT_OF_RANGE",function(K,E,I){let G=`The value of "${K}" is out of range.`,Z=I;return Number.isInteger(I)&&Math.abs(I)>2**32?Z=Be(String(I)):typeof I=="bigint"&&(Z=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(Z=Be(Z)),Z+="n"),G+=` It must be ${E}. Received ${Z}`,G},RangeError);function Be(K){let E="",I=K.length;const G=K[0]==="-"?1:0;for(;I>=G+4;I-=3)E=`_${K.slice(I-3,I)}${E}`;return`${K.slice(0,I)}${E}`}function je(K,E,I){ne(E,"offset"),(K[E]===void 0||K[E+I]===void 0)&&ue(E,K.length-(I+1))}function qe(K,E,I,G,Z,he){if(K>I||K<E){const Te=typeof E=="bigint"?"n":"";let bt;throw he>3?E===0||E===BigInt(0)?bt=`>= 0${Te} and < 2${Te} ** ${(he+1)*8}${Te}`:bt=`>= -(2${Te} ** ${(he+1)*8-1}${Te}) and < 2 ** ${(he+1)*8-1}${Te}`:bt=`>= ${E}${Te} and <= ${I}${Te}`,new pe.ERR_OUT_OF_RANGE("value",bt,K)}je(G,Z,he)}function ne(K,E){if(typeof K!="number")throw new pe.ERR_INVALID_ARG_TYPE(E,"number",K)}function ue(K,E,I){throw Math.floor(K)!==K?(ne(K,I),new pe.ERR_OUT_OF_RANGE(I||"offset","an integer",K)):E<0?new pe.ERR_BUFFER_OUT_OF_BOUNDS:new pe.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${E}`,K)}const Se=/[^+/0-9A-Za-z-_]/g;function Fe(K){if(K=K.split("=")[0],K=K.trim().replace(Se,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function Le(K,E){E=E||1/0;let I;const G=K.length;let Z=null;const he=[];for(let Te=0;Te<G;++Te){if(I=K.charCodeAt(Te),I>55295&&I<57344){if(!Z){if(I>56319){(E-=3)>-1&&he.push(239,191,189);continue}else if(Te+1===G){(E-=3)>-1&&he.push(239,191,189);continue}Z=I;continue}if(I<56320){(E-=3)>-1&&he.push(239,191,189),Z=I;continue}I=(Z-55296<<10|I-56320)+65536}else Z&&(E-=3)>-1&&he.push(239,191,189);if(Z=null,I<128){if((E-=1)<0)break;he.push(I)}else if(I<2048){if((E-=2)<0)break;he.push(I>>6|192,I&63|128)}else if(I<65536){if((E-=3)<0)break;he.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((E-=4)<0)break;he.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return he}function Ke(K){const E=[];for(let I=0;I<K.length;++I)E.push(K.charCodeAt(I)&255);return E}function ie(K,E){let I,G,Z;const he=[];for(let Te=0;Te<K.length&&!((E-=2)<0);++Te)I=K.charCodeAt(Te),G=I>>8,Z=I%256,he.push(Z),he.push(G);return he}function ge(K){return t.toByteArray(Fe(K))}function be(K,E,I,G){let Z;for(Z=0;Z<G&&!(Z+I>=E.length||Z>=K.length);++Z)E[Z+I]=K[Z];return Z}function Ie(K,E){return K instanceof E||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===E.name}function ot(K){return K!==K}const ve=function(){const K="0123456789abcdef",E=new Array(256);for(let I=0;I<16;++I){const G=I*16;for(let Z=0;Z<16;++Z)E[G+Z]=K[I]+K[Z]}return E}();function Ve(K){return typeof BigInt=="undefined"?ft:K}function ft(){throw new Error("BigInt not supported")}})(hT);class nM{constructor(t,n,s){on(this,"key");on(this,"desc");on(this,"def");on(this,"type");on(this,"cache");this.key=t,this.desc=n,this.def=s,this.type=typeof s,this.cache=this.val_uncached}get val_uncached(){const t=localStorage.getItem(this.key);return t===null?this.def:JSON.parse(t)}get val(){return this.cache?this.cache:this.cache=this.val_uncached}set val(t){localStorage.setItem(this.key,JSON.stringify(t)),this.cache=t}reset(){localStorage.removeItem(this.key),this.cache=this.def}get modified(){return this.val!=this.def}}const kC=[new nM("spec.local","**Compute spectrogram locally** - enable if you have *really* bad internet like <1 MB/s",!1),new nM("backend.url","**Backend host** - you can run your own backend to speed up things! [read more]()","http://localhost:8000")],$Ke=kC.reduce((e,t)=>(e[t.key]=t,e),{});function HH(e){return $Ke[e]}function SKe(e){let t=0,n=0;for(let s=0;s<e.length;s++)isNaN(e[s])||(t+=e[s],n++);return n==0?null:t/n}function xC(e){let t=e[0],n=e[0];for(let s=0;s<e.length;s++)e[s]<t&&(t=e[s]),e[s]>n&&(n=e[s]);return[t,n]}class IKe{constructor(t,n,s=!0){on(this,"res");on(this,"r");on(this,"g");on(this,"b");if(this.res=n,this.r=new Uint8Array(n+1),this.g=new Uint8Array(n+1),this.b=new Uint8Array(n+1),s){const o=Math.log2(n);for(let r=0;r<=n;r++)[this.r[r],this.g[r],this.b[r]]=t(Math.log2(r)/o).rgb()}else for(let o=0;o<=n;o++)[this.r[o],this.g[o],this.b[o]]=t(o/n).rgb()}get(t){const n=Math.round(t*this.res);return[this.r[n],this.g[n],this.b[n]]}}function EKe(e,t){const n=new Float32Array(hT.Buffer.from(e,"base64").buffer),s=t[0],o=n.length/s,r=["pitch","f1","f2","f3"],i={};for(let a=0;a<s;a++)i[r[a]]=n.slice(o*a,o*(a+1));return i}function TKe(e,t){const n=new Float32Array(hT.Buffer.from(e,"base64").buffer),s=t[0],o=n.length/s,r=[];for(let i=0;i<s;i++)r.push(n.slice(o*i,o*(i+1)));return r}class Ob{constructor(){on(this,"start");this.reset()}reset(){this.start=performance.now()}log(...t){console.log(`${(performance.now()-this.start).toFixed(0)} ms -`,...t),this.reset()}}async function _Ke(e,t={}){var o,r,i;const n=new URL(e.startsWith("http")?e:HH("backend.url").val+e);n.search=new URLSearchParams((o=t.params)!=null?o:{}).toString();const s=(r=t.args)!=null?r:{};return"method"in s||(s.method=(i=t.method)!=null?i:"GET"),t.file&&((!t.body||!(t.body instanceof FormData))&&(t.body=new FormData),t.body.append("file",t.file),s.method=="GET"&&(s.method="POST")),t.body&&(s.body=t.body),await fetch(n.toString(),s)}function Ba(e){return 2595*Math.log10(1+e/700)}function NKe(e){return _c(10,e.div(2595)).sub(1).mul(700)}function AKe(e,t){const n=t/e,s=e/2+1,o=new Float32Array(s);for(let r=0;r<s;r++)o[r]=r*n;return o}function DKe(e,t,n){const s=t<1?0:Ba(t),o=Ba(n),r=[];for(let i=100;i<=Math.min(n,1e3);i+=100)r.push([i,Ba(i)/(o-s)+s]);for(let i=1e3;i<=Math.min(n,4e3);i+=200)r.push([i,Ba(i)/(o-s)+s]);for(let i=4e3;i<=n;i+=500)r.push([i,Ba(i)/(o-s)+s]);return r}function RKe(e,t,n=128,s){typeof s=="undefined"&&(s=e/2);const o=Array(n),r=_o(AKe(t,e),"float32"),i=MKe(n+2,0,s),a=OKe(i.dataSync()),l=PKe(i.dataSync(),r.dataSync());for(let d=0;d<n;d++){const f=l.slice(d,1).mul(-1).div(a[d]),h=l.slice(d+2,1).div(a[d+1]);o[d]=fl(0,Ig(f,h)).dataSync()}const u=qz(2).div(i.slice(2,n).sub(i.slice(0,n)));return qd(o).transpose().mul(u).transpose()}function MKe(e=128,t=0,n=11025){return NKe(T_e(Ba(t),Ba(n),e))}function OKe(e){const t=new Float32Array(e.length-1);for(let n=0;n<e.length-1;n++)t[n]=e[n+1]-e[n];return t}function PKe(e,t){const n=[];for(let s=0;s<e.length;s++){n.push(new Float32Array(t.length));for(let o=0;o<t.length;o++)n[s][o]=e[s]-t[o]}return qd(n)}async function UH(e,t,n=512,s=2048){const o=BDe.stft(_o(e),s,n).abs(),i=RKe(t,s).dot(o.transpose()).transpose(),a=await i.data(),l=[],[u,c]=i.shape;for(let d=0;d<u;d++)l.push(a.subarray(d*c,(d+1)*c));return l}function sM(e,t,n,s,o,r,i,a,l=255){const u=(o-n-1)*s+t;e[u]=r,e[u+1]=i,e[u+2]=a,e[u+3]=l}class FKe extends cz{async drawAudio(t){const n=new Ob,s=await UH(t.getChannelData(0),16e3);return n.log("Spectrogram - Mel STFT calculation done"),console.log(s),await this.drawData(s,16e3)}async drawData(t,n){const s=new Ob;this.el.width=this.w=t.length*2;const[o,r]=xC(t.flatMap(d=>xC(d))),i=r-o,a=this.ctx.createImageData(this.w,this.h),l=a.data,u=this.w*4,c=new IKe(mKe.scale(["#232323","#4F1879","#B43A78","#F98766","#FCFAC0"]),1e3);for(let d=0;d<t.length;d++){const f=t[d],h=d*4;for(let p=0;p<this.h;p++){const m=f[Math.floor(p/this.h*f.length)],g=c.get((m-o)/i);sM(l,2*h,p,u,this.h,g[0],g[1],g[2]),sM(l,2*h+4,p,u,this.h,g[0],g[1],g[2])}}return this.ctx.putImageData(a,0,0),this.ctx.closePath(),s.log("Spectrogram - Drawing done."),DKe(this.h,0,8e3)}async drawLine(t,n,s,o=1){console.log("Drawing line..."),console.log(t.length);const r=t.length/this.w;console.log(r);let i=null;const a=Ba(8e3);t=t.map(l=>this.h-Ba(l)/a*this.h),this.ctx.beginPath();for(let l=0;l<this.w;l++){const u=SKe(t.subarray(r*l,Math.ceil(r*(l+1))));u!=null&&(i!=null?this.ctx.lineTo(l,u):this.ctx.moveTo(l,u)),i=u}this.ctx.lineWidth=o,this.ctx.strokeStyle=s,this.ctx.stroke(),this.ctx.closePath()}}function vu(e){return YSe((t,n)=>{t.props||(t.props=Object.create(null)),t.props[n]=e})}var ml=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},LKe=Object.defineProperty,BKe=Object.getOwnPropertyDescriptor,fw=(e,t,n,s)=>{for(var o=s>1?void 0:s?BKe(t,n):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(o=(s?i(t,n,o):i(o))||o);return s&&o&&LKe(t,n,o),o};let Nf=class extends iu{constructor(){super(...arguments);on(this,"spec");on(this,"sr");on(this,"freqArrays");on(this,"spectrogramCanvas");on(this,"numberFormat",Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1}));on(this,"ticks",null);on(this,"widthScale",1);on(this,"scrollLocation",0);on(this,"minWidthScale",1)}async mounted(){const t=new Ob;t.log(`Spectrogram mounting... ${this.spec.length} * ${this.spec[0].length}, sr=${this.sr}`),this.spectrogramCanvas=new FKe(this.$refs.spCanvas),await this.spectrogramCanvas.drawData(this.spec,this.sr).then(o=>this.ticks=o),t.log("Data draw complete"),this.freqArrays&&(console.log("Frequency overlays updating"),await this.spectrogramCanvas.drawLine(this.freqArrays.pitch,.032,"#64fbff",3),await this.spectrogramCanvas.drawLine(this.freqArrays.f1,.032,"#7bff4f",2),await this.spectrogramCanvas.drawLine(this.freqArrays.f2,.032,"#93ffb9",2),await this.spectrogramCanvas.drawLine(this.freqArrays.f3,.032,"#4ffff9",1),t.log("Lines drawn"));const n=this.$refs.spCanvas.getBoundingClientRect().width,s=this.$refs.spCanvas.parentElement.getBoundingClientRect().width;n*this.widthScale<s&&(this.widthScale=s/n,this.minWidthScale=this.widthScale),t.log("Spectrogram mounted!")}get width(){return this.$refs.spCanvas.width}wheel(t){const n=this.widthScale,s=t.target,o=s.getBoundingClientRect();let r=t.detail<0||t.deltaY>0?1:-1;if(t.shiftKey&&(r/=10),t.ctrlKey)this.widthScale-=r/2;else{const i=s.parentElement.getBoundingClientRect();let a=r*20;a<0?a=Math.max(a,o.left-i.left):a=Math.min(a,o.right-i.right),this.scrollLocation+=a}if(this.widthScale=Math.max(this.minWidthScale,this.widthScale),n!=this.widthScale){const i=t.clientX-(o.left+o.width/2),a=i/n*this.widthScale-i;this.scrollLocation+=a}}};fw([vu()],Nf.prototype,"spec",2);fw([vu()],Nf.prototype,"sr",2);fw([vu()],Nf.prototype,"freqArrays",2);Nf=fw([Kc({components:{}})],Nf);const zKe=Nf,VKe=e=>(cm("data-v-343d36d0"),e=e(),dm(),e),WKe={class:"spectrogram f-grow1 fbox-h"},HKe={class:"canvas-wrapper"},UKe={key:0,class:"y-ticks"},jKe=VKe(()=>q("div",{class:"tick-line"},null,-1));function GKe(e,t,n,s,o,r){return _(),U("div",WKe,[q("div",HKe,[q("canvas",{ref:"spCanvas",onWheel:t[0]||(t[0]=wt((...i)=>e.wheel&&e.wheel(...i),["prevent"])),style:it({transform:`translateX(${-e.scrollLocation}px) scaleX(${e.widthScale})`})},null,36)]),e.ticks?(_(),U("div",UKe,[(_(!0),U(lt,null,Zt(e.ticks,i=>(_(),U("div",{class:"tick unselectable fbox-h",style:it({top:`${(1-i[1])*100}%`})},[jKe,Yt(" "+He(e.numberFormat.format(i[0])),1)],4))),256))])):me("",!0)])}var KKe=ml(zKe,[["render",GKe],["__scopeId","data-v-343d36d0"]]),qKe="/assets/loading.21b6d724.svg",YKe=Object.defineProperty,XKe=Object.getOwnPropertyDescriptor,ZKe=(e,t,n,s)=>{for(var o=s>1?void 0:s?XKe(t,n):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(o=(s?i(t,n,o):i(o))||o);return s&&o&&YKe(t,n,o),o};let CC=class extends iu{};CC=ZKe([Kc({components:{}})],CC);const JKe=CC,jH=e=>(cm("data-v-02c9bba4"),e=e(),dm(),e),QKe={id:"Loading"},eqe=jH(()=>q("img",{src:qKe,alt:"loading"},null,-1)),tqe=jH(()=>q("div",{class:"text"},"Loading Meow~",-1)),nqe=[eqe,tqe];function sqe(e,t,n,s,o,r){return _(),U("div",QKe,nqe)}var oqe=ml(JKe,[["render",sqe],["__scopeId","data-v-02c9bba4"]]);const rqe="#fff4eb";class iqe extends cz{drawAudio(t){const n=t.getChannelData(0),s=t.length/this.w,o=this.h/2;for(let r=0;r<this.w;r++){const[i,a]=xC(n.subarray(r*s,(r+1)*s));this.ctx.strokeStyle=rqe,this.ctx.moveTo(r,o-a*o),this.ctx.lineTo(r,o-i*o),this.ctx.stroke()}}}var aqe=Object.defineProperty,lqe=Object.getOwnPropertyDescriptor,GH=(e,t,n,s)=>{for(var o=s>1?void 0:s?lqe(t,n):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(o=(s?i(t,n,o):i(o))||o);return s&&o&&aqe(t,n,o),o};let Pb=class extends iu{constructor(){super(...arguments);on(this,"audio");on(this,"waveformCanvas")}mounted(){this.waveformCanvas=new iqe(this.$refs.wfCanvas),this.waveformCanvas.drawAudio(this.audio)}};GH([vu()],Pb.prototype,"audio",2);Pb=GH([Kc({components:{}})],Pb);const uqe=Pb,cqe={class:"waveform"},dqe={ref:"wfCanvas"};function fqe(e,t,n,s,o,r){return _(),U("div",cqe,[q("canvas",dqe,null,512)])}var hqe=ml(uqe,[["render",fqe],["__scopeId","data-v-8a57a1d8"]]);const pqe={f:[[116.6,120.1,123.6,127.1,130.6,134.1,137.6,141.1,144.6,148.1,151.6,155.1,158.6,162.1,165.6,169,172.5,176,179.5,183,186.5,190,193.5,197,200.5,204,207.5,211,214.5,218,221.5,225,228.5,232,235.5,239,242.5,246,249.5,253,256.5,259.9,263.4,266.9,270.4,273.9,277.4,280.9,284.4,287.9],[2385e-7,2812e-7,3063e-7,327e-6,3396e-7,3417e-7,371e-6,5076e-7,8299e-7,.001372,.002127,.00308,.0042,.005453,.006871,.008576,.01063,.01284,.01485,.01638,.0173,.01756,.0171,.01605,.0148,.01377,.01306,.01248,.01178,.01087,.009828,.00873,.007576,.006316,.004969,.00368,.002619,.001861,.001352,9912e-7,7084e-7,4902e-7,3512e-7,2875e-7,2574e-7,2182e-7,1684e-7,1341e-7,1244e-7,1193e-7]],m:[[95.1,98.82,102.5,106.3,110,113.7,117.4,121.1,124.8,128.6,132.3,136,139.7,143.4,147.1,150.9,154.6,158.3,162,165.7,169.4,173.2,176.9,180.6,184.3,188,191.7,195.5,199.2,202.9,206.6,210.3,214,217.8,221.5,225.2,228.9,232.6,236.3,240.1,243.8,247.5,251.2,254.9,258.6,262.4,266.1,269.8,273.5,277.2],[9089e-7,.002198,.004632,.008472,.01326,.01794,.02162,.02392,.02482,.02428,.02234,.01978,.01723,.01449,.01142,.008576,.006679,.005712,.004895,.003772,.002607,.001833,.001476,.001282,.001106,9028e-7,6593e-7,4488e-7,3218e-7,246e-6,1913e-7,133e-6,6664e-8,2085e-8,385e-8,4121e-10,2542e-11,902e-12,184e-13,2158e-16,2324e-17,2414e-15,1537e-13,5625e-12,1183e-10,143e-8,9937e-9,3968e-8,9106e-8,1201e-7]]},mqe={f:[[507.9,512.5,517.1,521.7,526.3,530.8,535.4,540,544.6,549.2,553.8,558.4,563,567.5,572.1,576.7,581.3,585.9,590.5,595.1,599.7,604.2,608.8,613.4,618,622.6,627.2,631.8,636.4,640.9,645.5,650.1,654.7,659.3,663.9,668.5,673.1,677.6,682.2,686.8,691.4,696,700.6,705.2,709.7,714.3,718.9,723.5,728.1,732.7],[4256e-7,5718e-7,7402e-7,9474e-7,.001216,.001567,.002008,.002535,.003125,.003746,.004359,.004929,.00544,.005896,.006315,.006728,.00717,.007659,.008172,.008648,.009015,.009232,.009305,.009265,.009134,.008902,.008546,.008058,.007465,.006829,.006219,.005681,.005223,.004815,.004417,.003993,.003531,.003045,.002567,.00213,.001752,.001433,.001161,9206e-7,7048e-7,5189e-7,3724e-7,2681e-7,1979e-7,1481e-7]],m:[[444.8,453.5,462.2,470.9,479.7,488.4,497.1,505.8,514.5,523.2,531.9,540.6,549.4,558.1,566.8,575.5,584.2,592.9,601.6,610.4,619.1,627.8,636.5,645.2,653.9,662.6,671.3,680.1,688.8,697.5,706.2,714.9,723.6,732.3,741.1,749.8,758.5,767.2,775.9,784.6,793.3,802,810.8,819.5,828.2,836.9,845.6,854.3,863,871.7],[1434e-7,2958e-7,5961e-7,.001162,.002001,.00295,.003955,.005155,.006556,.007942,.009073,.009743,.009801,.009316,.008519,.007539,.006422,.005258,.00419,.003317,.002627,.002064,.00156,.001127,8295e-7,6194e-7,4331e-7,2928e-7,2192e-7,192e-6,1708e-7,1321e-7,8308e-8,4569e-8,3726e-8,4765e-8,4765e-8,2943e-8,1087e-8,2391e-9,313e-9,244e-10,1282e-12,44e-10,7575e-11,7819e-10,4804e-9,1757e-8,3826e-8,4959e-8]]},gqe={f:[[1557,1564,1571,1579,1586,1593,1600,1607,1615,1622,1629,1636,1643,1651,1658,1665,1672,1680,1687,1694,1701,1708,1716,1723,1730,1737,1744,1752,1759,1766,1773,1780,1788,1795,1802,1809,1816,1824,1831,1838,1845,1852,1860,1867,1874,1881,1888,1896,1903,1910],[112e-6,1628e-7,2248e-7,2953e-7,3726e-7,4588e-7,5596e-7,6797e-7,8193e-7,9787e-7,.001167,.001403,.001699,.002047,.002417,.002782,.003139,.003507,.003912,.004366,.004853,.005333,.005749,.006055,.006237,.006313,.006317,.006267,.006162,.005994,.005773,.005517,.005227,.004879,.004454,.003964,.003456,.002978,.002549,.002157,.001784,.001427,.001101,822e-6,5989e-7,4302e-7,3103e-7,2307e-7,1787e-7,14e-5]],m:[[1375,1385,1395,1406,1416,1426,1436,1447,1457,1467,1477,1488,1498,1508,1518,1528,1539,1549,1559,1569,1580,1590,1600,1610,1621,1631,1641,1651,1661,1672,1682,1692,1702,1713,1723,1733,1743,1754,1764,1774,1784,1794,1805,1815,1825,1835,1846,1856,1866,1876],[3594e-8,3701e-8,3639e-8,3709e-8,3548e-8,28e-6,1857e-8,1729e-8,3735e-8,9441e-8,2018e-7,3662e-7,5947e-7,9019e-7,.001293,.001741,.002186,.002597,.003007,.003467,.003989,.004543,.005089,.005565,.005906,.006082,.006112,.005998,.005706,.005239,.004674,.004098,.003536,.002955,.002346,.001782,.001363,.001114,9581e-7,8206e-7,6859e-7,5639e-7,453e-6,3502e-7,2598e-7,1871e-7,1376e-7,113e-6,103e-6,8977e-8]]},vqe={f:[[2553,2562,2572,2581,2591,2600,2609,2619,2628,2638,2647,2656,2666,2675,2685,2694,2703,2713,2722,2732,2741,2750,2760,2769,2779,2788,2797,2807,2816,2826,2835,2844,2854,2863,2873,2882,2891,2901,2910,2920,2929,2938,2948,2957,2967,2976,2985,2995,3004,3014],[1256e-7,1721e-7,2277e-7,2936e-7,3704e-7,463e-6,5834e-7,7469e-7,9616e-7,.001221,.001506,.001803,.002117,.002465,.002852,.003261,.003655,.004006,.004317,.004606,.004877,.005104,.005242,.005258,.005155,.004967,.004726,.004448,.004134,.003784,.003407,.003015,.002624,.002252,.00192,.001642,.001416,.001229,.001067,9185e-7,7744e-7,632e-6,4959e-7,3755e-7,2781e-7,2046e-7,1502e-7,11e-5,806e-7,5873e-8]],m:[[2392,2405,2417,2429,2442,2454,2467,2479,2492,2504,2517,2529,2542,2554,2566,2579,2591,2604,2616,2629,2641,2654,2666,2679,2691,2703,2716,2728,2741,2753,2766,2778,2791,2803,2815,2828,2840,2853,2865,2878,2890,2903,2915,2928,2940,2952,2965,2977,2990,3002],[2869e-8,2609e-8,2258e-8,2977e-8,579e-7,1154e-7,2067e-7,3241e-7,4535e-7,5956e-7,7721e-7,.001006,.001299,.001634,.00201,.002484,.003113,.003843,.004502,.00494,.005127,.005137,.005066,.004967,.004828,.004605,.004253,.00376,.003164,.002544,.001981,.001523,.001178,9281e-7,7529e-7,6376e-7,5623e-7,4934e-7,4005e-7,2829e-7,1717e-7,98e-6,6493e-8,5315e-8,4427e-8,3261e-8,2291e-8,2114e-8,2584e-8,2866e-8]]},bqe={f:[[-.4538,-.4471,-.4404,-.4337,-.427,-.4203,-.4136,-.4069,-.4002,-.3935,-.3868,-.3801,-.3734,-.3667,-.36,-.3533,-.3466,-.3399,-.3332,-.3265,-.3198,-.3131,-.3064,-.2997,-.293,-.2863,-.2796,-.2729,-.2662,-.2595,-.2528,-.2461,-.2394,-.2327,-.226,-.2193,-.2126,-.2059,-.1992,-.1924,-.1857,-.179,-.1723,-.1656,-.1589,-.1522,-.1455,-.1388,-.1321,-.1254],[.06016,.06715,.07362,.0867,.1163,.1755,.2775,.4279,.6216,.8508,1.119,1.447,1.869,2.404,3.043,3.747,4.465,5.159,5.823,6.475,7.109,7.66,8.011,8.063,7.811,7.351,6.828,6.35,5.946,5.594,5.256,4.901,4.5,4.036,3.519,2.986,2.486,2.057,1.716,1.465,1.285,1.153,1.039,.916,.7722,.6138,.4605,.3311,.2321,.1585]],m:[[-.4582,-.4515,-.4449,-.4382,-.4316,-.4249,-.4182,-.4116,-.4049,-.3982,-.3916,-.3849,-.3783,-.3716,-.3649,-.3583,-.3516,-.3449,-.3383,-.3316,-.325,-.3183,-.3116,-.305,-.2983,-.2916,-.285,-.2783,-.2717,-.265,-.2583,-.2517,-.245,-.2384,-.2317,-.225,-.2184,-.2117,-.205,-.1984,-.1917,-.1851,-.1784,-.1717,-.1651,-.1584,-.1517,-.1451,-.1384,-.1318],[.04963,.0431,.02954,.02191,.02998,.05459,.08537,.1068,.1152,.1302,.1858,.3126,.5226,.8009,1.124,1.497,1.952,2.498,3.121,3.843,4.704,5.656,6.549,7.259,7.793,8.212,8.527,8.751,8.916,8.955,8.69,8.024,7.053,5.98,5.01,4.285,3.799,3.404,2.943,2.376,1.782,1.267,.8801,.6163,.4482,.347,.2885,.257,.236,.2028]]};var yqe={pitch:pqe,f1:mqe,f2:gqe,f3:vqe,tilt:bqe};/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const KH=function(){return typeof window=="undefined"?function(e){return e()}:window.requestAnimationFrame}();function qH(e,t,n){const s=n||(i=>Array.prototype.slice.call(i));let o=!1,r=[];return function(...i){r=s(i),o||(o=!0,KH.call(window,()=>{o=!1,e.apply(t,r)}))}}function wqe(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const mT=e=>e==="start"?"left":e==="end"?"right":"center",Bo=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,kqe=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function Aa(){}const xqe=function(){let e=0;return function(){return e++}}();function Bn(e){return e===null||typeof e=="undefined"}function Gn(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.substr(0,7)==="[object"&&t.substr(-6)==="Array]"}function gn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const Ds=e=>(typeof e=="number"||e instanceof Number)&&isFinite(+e);function Ur(e,t){return Ds(e)?e:t}function nn(e,t){return typeof e=="undefined"?t:e}const Cqe=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:e/t,YH=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function rs(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Jn(e,t,n,s){let o,r,i;if(Gn(e))if(r=e.length,s)for(o=r-1;o>=0;o--)t.call(n,e[o],o);else for(o=0;o<r;o++)t.call(n,e[o],o);else if(gn(e))for(i=Object.keys(e),r=i.length,o=0;o<r;o++)t.call(n,e[i[o]],i[o])}function Fb(e,t){let n,s,o,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(o=e[n],r=t[n],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function Lb(e){if(Gn(e))return e.map(Lb);if(gn(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let o=0;for(;o<s;++o)t[n[o]]=Lb(e[n[o]]);return t}return e}function XH(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function $qe(e,t,n,s){if(!XH(e))return;const o=t[e],r=n[e];gn(o)&&gn(r)?Jp(o,r,s):t[e]=Lb(r)}function Jp(e,t,n){const s=Gn(t)?t:[t],o=s.length;if(!gn(e))return e;n=n||{};const r=n.merger||$qe;for(let i=0;i<o;++i){if(t=s[i],!gn(t))continue;const a=Object.keys(t);for(let l=0,u=a.length;l<u;++l)r(a[l],e,t,n)}return e}function fp(e,t){return Jp(e,t,{merger:Sqe})}function Sqe(e,t,n){if(!XH(e))return;const s=t[e],o=n[e];gn(s)&&gn(o)?fp(s,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Lb(o))}const Iqe="",Eqe=".";function oM(e,t){const n=e.indexOf(Eqe,t);return n===-1?e.length:n}function Pc(e,t){if(t===Iqe)return e;let n=0,s=oM(t,n);for(;e&&s>n;)e=e[t.substr(n,s-n)],n=s+1,s=oM(t,n);return e}function gT(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Js=e=>typeof e!="undefined",nu=e=>typeof e=="function",rM=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Tqe(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Hn=Math.PI,us=2*Hn,_qe=us+Hn,Bb=Number.POSITIVE_INFINITY,ZH=Hn/180,Ps=Hn/2,Ih=Hn/4,iM=Hn*2/3,Zr=Math.log10,va=Math.sign;function aM(e){const t=Math.round(e);e=hp(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Zr(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function Nqe(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((o,r)=>o-r).pop(),t}function Qp(e){return!isNaN(parseFloat(e))&&isFinite(e)}function hp(e,t,n){return Math.abs(e-t)<n}function Aqe(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function JH(e,t,n){let s,o,r;for(s=0,o=e.length;s<o;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function go(e){return e*(Hn/180)}function vT(e){return e*(180/Hn)}function lM(e){if(!Ds(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function QH(e,t){const n=t.x-e.x,s=t.y-e.y,o=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Hn&&(r+=us),{angle:r,distance:o}}function em(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Dqe(e,t){return(e-t+_qe)%us-Hn}function xr(e){return(e%us+us)%us}function tm(e,t,n,s){const o=xr(e),r=xr(t),i=xr(n),a=xr(r-o),l=xr(i-o),u=xr(o-r),c=xr(o-i);return o===r||o===i||s&&r===i||a>l&&u<c}function vo(e,t,n){return Math.max(t,Math.min(n,e))}function Rqe(e){return vo(e,-32768,32767)}function Va(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}const j0=e=>e===0||e===1,uM=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*us/n)),cM=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*us/n)+1,pp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Ps)+1,easeOutSine:e=>Math.sin(e*Ps),easeInOutSine:e=>-.5*(Math.cos(Hn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>j0(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>j0(e)?e:uM(e,.075,.3),easeOutElastic:e=>j0(e)?e:cM(e,.075,.3),easeInOutElastic(e){return j0(e)?e:e<.5?.5*uM(e*2,.1125,.45):.5+.5*cM(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-pp.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?pp.easeInBounce(e*2)*.5:pp.easeOutBounce(e*2-1)*.5+.5};/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const Hr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$C="0123456789ABCDEF",Mqe=e=>$C[e&15],Oqe=e=>$C[(e&240)>>4]+$C[e&15],G0=e=>(e&240)>>4===(e&15);function Pqe(e){return G0(e.r)&&G0(e.g)&&G0(e.b)&&G0(e.a)}function Fqe(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Hr[e[1]]*17,g:255&Hr[e[2]]*17,b:255&Hr[e[3]]*17,a:t===5?Hr[e[4]]*17:255}:(t===7||t===9)&&(n={r:Hr[e[1]]<<4|Hr[e[2]],g:Hr[e[3]]<<4|Hr[e[4]],b:Hr[e[5]]<<4|Hr[e[6]],a:t===9?Hr[e[7]]<<4|Hr[e[8]]:255})),n}function Lqe(e){var t=Pqe(e)?Mqe:Oqe;return e&&"#"+t(e.r)+t(e.g)+t(e.b)+(e.a<255?t(e.a):"")}function qg(e){return e+.5|0}const hw=(e,t,n)=>Math.max(Math.min(e,n),t);function Kh(e){return hw(qg(e*2.55),0,255)}function nm(e){return hw(qg(e*255),0,255)}function bT(e){return hw(qg(e/2.55)/100,0,1)}function dM(e){return hw(qg(e*100),0,100)}const Bqe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zqe(e){const t=Bqe.exec(e);let n=255,s,o,r;if(!!t){if(t[7]!==s){const i=+t[7];n=255&(t[8]?Kh(i):i*255)}return s=+t[1],o=+t[3],r=+t[5],s=255&(t[2]?Kh(s):s),o=255&(t[4]?Kh(o):o),r=255&(t[6]?Kh(r):r),{r:s,g:o,b:r,a:n}}}function Vqe(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${bT(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Wqe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function eU(e,t,n){const s=t*Math.min(n,1-n),o=(r,i=(r+e/30)%12)=>n-s*Math.max(Math.min(i-3,9-i,1),-1);return[o(0),o(8),o(4)]}function Hqe(e,t,n){const s=(o,r=(o+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function Uqe(e,t,n){const s=eU(e,1,.5);let o;for(t+n>1&&(o=1/(t+n),t*=o,n*=o),o=0;o<3;o++)s[o]*=1-t-n,s[o]+=t;return s}function yT(e){const n=e.r/255,s=e.g/255,o=e.b/255,r=Math.max(n,s,o),i=Math.min(n,s,o),a=(r+i)/2;let l,u,c;return r!==i&&(c=r-i,u=a>.5?c/(2-r-i):c/(r+i),l=r===n?(s-o)/c+(s<o?6:0):r===s?(o-n)/c+2:(n-s)/c+4,l=l*60+.5),[l|0,u||0,a]}function wT(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(nm)}function kT(e,t,n){return wT(eU,e,t,n)}function jqe(e,t,n){return wT(Uqe,e,t,n)}function Gqe(e,t,n){return wT(Hqe,e,t,n)}function tU(e){return(e%360+360)%360}function Kqe(e){const t=Wqe.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Kh(+t[5]):nm(+t[5]));const o=tU(+t[2]),r=+t[3]/100,i=+t[4]/100;return t[1]==="hwb"?s=jqe(o,r,i):t[1]==="hsv"?s=Gqe(o,r,i):s=kT(o,r,i),{r:s[0],g:s[1],b:s[2],a:n}}function qqe(e,t){var n=yT(e);n[0]=tU(n[0]+t),n=kT(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Yqe(e){if(!e)return;const t=yT(e),n=t[0],s=dM(t[1]),o=dM(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${o}%, ${bT(e.a)})`:`hsl(${n}, ${s}%, ${o}%)`}const fM={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},hM={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Xqe(){const e={},t=Object.keys(hM),n=Object.keys(fM);let s,o,r,i,a;for(s=0;s<t.length;s++){for(i=a=t[s],o=0;o<n.length;o++)r=n[o],a=a.replace(r,fM[r]);r=parseInt(hM[i],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let K0;function Zqe(e){K0||(K0=Xqe(),K0.transparent=[0,0,0,0]);const t=K0[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}function q0(e,t,n){if(e){let s=yT(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=kT(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function nU(e,t){return e&&Object.assign(t||{},e)}function pM(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=nm(e[3]))):(t=nU(e,{r:0,g:0,b:0,a:1}),t.a=nm(t.a)),t}function Jqe(e){return e.charAt(0)==="r"?zqe(e):Kqe(e)}class zb{constructor(t){if(t instanceof zb)return t;const n=typeof t;let s;n==="object"?s=pM(t):n==="string"&&(s=Fqe(t)||Zqe(t)||Jqe(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=nU(this._rgb);return t&&(t.a=bT(t.a)),t}set rgb(t){this._rgb=pM(t)}rgbString(){return this._valid?Vqe(this._rgb):this._rgb}hexString(){return this._valid?Lqe(this._rgb):this._rgb}hslString(){return this._valid?Yqe(this._rgb):this._rgb}mix(t,n){const s=this;if(t){const o=s.rgb,r=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,u=o.a-r.a,c=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;i=1-c,o.r=255&c*o.r+i*r.r+.5,o.g=255&c*o.g+i*r.g+.5,o.b=255&c*o.b+i*r.b+.5,o.a=a*o.a+(1-a)*r.a,s.rgb=o}return s}clone(){return new zb(this.rgb)}alpha(t){return this._rgb.a=nm(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=qg(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return q0(this._rgb,2,t),this}darken(t){return q0(this._rgb,2,-t),this}saturate(t){return q0(this._rgb,1,t),this}desaturate(t){return q0(this._rgb,1,-t),this}rotate(t){return qqe(this._rgb,t),this}}function sU(e){return new zb(e)}const oU=e=>e instanceof CanvasGradient||e instanceof CanvasPattern;function mM(e){return oU(e)?e:sU(e)}function ak(e){return oU(e)?e:sU(e).saturate(.5).darken(.1).hexString()}const Fc=Object.create(null),SC=Object.create(null);function mp(e,t){if(!t)return e;const n=t.split(".");for(let s=0,o=n.length;s<o;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function lk(e,t,n){return typeof t=="string"?Jp(mp(e,t),n):Jp(mp(e,""),t)}class Qqe{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>ak(s.backgroundColor),this.hoverBorderColor=(n,s)=>ak(s.borderColor),this.hoverColor=(n,s)=>ak(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,n){return lk(this,t,n)}get(t){return mp(this,t)}describe(t,n){return lk(SC,t,n)}override(t,n){return lk(Fc,t,n)}route(t,n,s,o){const r=mp(this,t),i=mp(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=i[o];return gn(l)?Object.assign({},u,l):nn(l,u)},set(l){this[a]=l}}})}}var Tn=new Qqe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function eYe(e){return!e||Bn(e.size)||Bn(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Vb(e,t,n,s,o){let r=t[o];return r||(r=t[o]=e.measureText(o).width,n.push(o)),r>s&&(s=r),s}function tYe(e,t,n,s){s=s||{};let o=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(o=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let i=0;const a=n.length;let l,u,c,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&Gn(d)!==!0)i=Vb(e,o,r,i,d);else if(Gn(d))for(u=0,c=d.length;u<c;u++)f=d[u],f!=null&&!Gn(f)&&(i=Vb(e,o,r,i,f));e.restore();const h=r.length/2;if(h>n.length){for(l=0;l<h;l++)delete o[r[l]];r.splice(0,h)}return i}function Ru(e,t,n){const s=e.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((t-o)*s)/s+o}function gM(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function sm(e,t,n,s){let o,r,i,a,l;const u=t.pointStyle,c=t.rotation,d=t.radius;let f=(c||0)*ZH;if(u&&typeof u=="object"&&(o=u.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(f),e.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),e.restore();return}if(!(isNaN(d)||d<=0)){switch(e.beginPath(),u){default:e.arc(n,s,d,0,us),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(f)*d,s-Math.cos(f)*d),f+=iM,e.lineTo(n+Math.sin(f)*d,s-Math.cos(f)*d),f+=iM,e.lineTo(n+Math.sin(f)*d,s-Math.cos(f)*d),e.closePath();break;case"rectRounded":l=d*.516,a=d-l,r=Math.cos(f+Ih)*a,i=Math.sin(f+Ih)*a,e.arc(n-r,s-i,l,f-Hn,f-Ps),e.arc(n+i,s-r,l,f-Ps,f),e.arc(n+r,s+i,l,f,f+Ps),e.arc(n-i,s+r,l,f+Ps,f+Hn),e.closePath();break;case"rect":if(!c){a=Math.SQRT1_2*d,e.rect(n-a,s-a,2*a,2*a);break}f+=Ih;case"rectRot":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+i,s-r),e.lineTo(n+r,s+i),e.lineTo(n-i,s+r),e.closePath();break;case"crossRot":f+=Ih;case"cross":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r);break;case"star":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r),f+=Ih,r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r);break;case"line":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(f)*d,s+Math.sin(f)*d);break}e.fill(),t.borderWidth>0&&e.stroke()}}function Lc(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Yg(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Xg(e){e.restore()}function nYe(e,t,n,s,o){if(!t)return e.lineTo(n.x,n.y);if(o==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else o==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function sYe(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Bc(e,t,n,s,o,r={}){const i=Gn(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,u;for(e.save(),e.font=o.string,oYe(e,r),l=0;l<i.length;++l)u=i[l],a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Bn(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(u,n,s,r.maxWidth)),e.fillText(u,n,s,r.maxWidth),rYe(e,n,s,u,r),s+=o.lineHeight;e.restore()}function oYe(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Bn(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function rYe(e,t,n,s,o){if(o.strikethrough||o.underline){const r=e.measureText(s),i=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,u=n+r.actualBoundingBoxDescent,c=o.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(i,c),e.lineTo(a,c),e.stroke()}}function om(e,t){const{x:n,y:s,w:o,h:r,radius:i}=t;e.arc(n+i.topLeft,s+i.topLeft,i.topLeft,-Ps,Hn,!0),e.lineTo(n,s+r-i.bottomLeft),e.arc(n+i.bottomLeft,s+r-i.bottomLeft,i.bottomLeft,Hn,Ps,!0),e.lineTo(n+o-i.bottomRight,s+r),e.arc(n+o-i.bottomRight,s+r-i.bottomRight,i.bottomRight,Ps,0,!0),e.lineTo(n+o,s+i.topRight),e.arc(n+o-i.topRight,s+i.topRight,i.topRight,0,-Ps,!0),e.lineTo(n+i.topLeft,s)}const iYe=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),aYe=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function lYe(e,t){const n=(""+e).match(iYe);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const uYe=e=>+e||0;function xT(e,t){const n={},s=gn(t),o=s?Object.keys(t):t,r=gn(e)?s?i=>nn(e[i],e[t[i]]):i=>e[i]:()=>e;for(const i of o)n[i]=uYe(r(i));return n}function rU(e){return xT(e,{top:"y",right:"x",bottom:"y",left:"x"})}function pc(e){return xT(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ao(e){const t=rU(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Hs(e,t){e=e||{},t=t||Tn.font;let n=nn(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=nn(e.style,t.style);s&&!(""+s).match(aYe)&&(console.warn('Invalid font style specified: "'+s+'"'),s="");const o={family:nn(e.family,t.family),lineHeight:lYe(nn(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:nn(e.weight,t.weight),string:""};return o.string=eYe(o),o}function qh(e,t,n,s){let o=!0,r,i,a;for(r=0,i=e.length;r<i;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),o=!1),n!==void 0&&Gn(a)&&(a=a[n%a.length],o=!1),a!==void 0))return s&&!o&&(s.cacheable=!1),a}function cYe(e,t,n){const{min:s,max:o}=e,r=YH(t,(o-s)/2),i=(a,l)=>n&&a===0?0:a+l;return{min:i(s,-Math.abs(r)),max:i(o,r)}}function bu(e,t){return Object.assign(Object.create(e),t)}function CT(e,t,n){n=n||(i=>e[i]<t);let s=e.length-1,o=0,r;for(;s-o>1;)r=o+s>>1,n(r)?o=r:s=r;return{lo:o,hi:s}}const Wa=(e,t,n)=>CT(e,n,s=>e[s][t]<n),dYe=(e,t,n)=>CT(e,n,s=>e[s][t]>=n);function fYe(e,t,n){let s=0,o=e.length;for(;s<o&&e[s]<t;)s++;for(;o>s&&e[o-1]>n;)o--;return s>0||o<e.length?e.slice(s,o):e}const iU=["push","pop","shift","splice","unshift"];function hYe(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),iU.forEach(n=>{const s="_onData"+gT(n),o=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const i=o.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),i}})})}function vM(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,o=s.indexOf(t);o!==-1&&s.splice(o,1),!(s.length>0)&&(iU.forEach(r=>{delete e[r]}),delete e._chartjs)}function aU(e){const t=new Set;let n,s;for(n=0,s=e.length;n<s;++n)t.add(e[n]);return t.size===s?e:Array.from(t)}function $T(e,t=[""],n=e,s,o=()=>e[0]){Js(s)||(s=dU("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:s,_getTarget:o,override:i=>$T([i,...e],t,n,s)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete i._keys,delete e[0][a],!0},get(i,a){return uU(i,a,()=>kYe(a,t,e,i))},getOwnPropertyDescriptor(i,a){return Reflect.getOwnPropertyDescriptor(i._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(i,a){return yM(i).includes(a)},ownKeys(i){return yM(i)},set(i,a,l){const u=i._storage||(i._storage=o());return i[a]=u[a]=l,delete i._keys,!0}})}function Af(e,t,n,s){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:lU(e,s),setContext:r=>Af(e,r,n,s),override:r=>Af(e.override(r),t,n,s)};return new Proxy(o,{deleteProperty(r,i){return delete r[i],delete e[i],!0},get(r,i,a){return uU(r,i,()=>mYe(r,i,a))},getOwnPropertyDescriptor(r,i){return r._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,i){return Reflect.has(e,i)},ownKeys(){return Reflect.ownKeys(e)},set(r,i,a){return e[i]=a,delete r[i],!0}})}function lU(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:n,indexable:s,isScriptable:nu(n)?n:()=>n,isIndexable:nu(s)?s:()=>s}}const pYe=(e,t)=>e?e+gT(t):t,ST=(e,t)=>gn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function uU(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const s=n();return e[t]=s,s}function mYe(e,t,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:i}=e;let a=s[t];return nu(a)&&i.isScriptable(t)&&(a=gYe(t,a,e,n)),Gn(a)&&a.length&&(a=vYe(t,a,e,i.isIndexable)),ST(t,a)&&(a=Af(a,o,r&&r[t],i)),a}function gYe(e,t,n,s){const{_proxy:o,_context:r,_subProxy:i,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(r,i||s),a.delete(e),ST(e,t)&&(t=IT(o._scopes,o,e,t)),t}function vYe(e,t,n,s){const{_proxy:o,_context:r,_subProxy:i,_descriptors:a}=n;if(Js(r.index)&&s(e))t=t[r.index%t.length];else if(gn(t[0])){const l=t,u=o._scopes.filter(c=>c!==l);t=[];for(const c of l){const d=IT(u,o,e,c);t.push(Af(d,r,i&&i[e],a))}}return t}function cU(e,t,n){return nu(e)?e(t,n):e}const bYe=(e,t)=>e===!0?t:typeof e=="string"?Pc(t,e):void 0;function yYe(e,t,n,s,o){for(const r of t){const i=bYe(n,r);if(i){e.add(i);const a=cU(i._fallback,n,o);if(Js(a)&&a!==n&&a!==s)return a}else if(i===!1&&Js(s)&&n!==s)return null}return!1}function IT(e,t,n,s){const o=t._rootScopes,r=cU(t._fallback,n,s),i=[...e,...o],a=new Set;a.add(s);let l=bM(a,i,n,r||n,s);return l===null||Js(r)&&r!==n&&(l=bM(a,i,r,l,s),l===null)?!1:$T(Array.from(a),[""],o,r,()=>wYe(t,n,s))}function bM(e,t,n,s,o){for(;n;)n=yYe(e,t,n,s,o);return n}function wYe(e,t,n){const s=e._getTarget();t in s||(s[t]={});const o=s[t];return Gn(o)&&gn(n)?n:o}function kYe(e,t,n,s){let o;for(const r of t)if(o=dU(pYe(r,e),n),Js(o))return ST(e,o)?IT(n,s,e,o):o}function dU(e,t){for(const n of t){if(!n)continue;const s=n[e];if(Js(s))return s}}function yM(e){let t=e._keys;return t||(t=e._keys=xYe(e._scopes)),t}function xYe(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(o=>!o.startsWith("_")))t.add(s);return Array.from(t)}const CYe=Number.EPSILON||1e-14,Df=(e,t)=>t<e.length&&!e[t].skip&&e[t],fU=e=>e==="x"?"y":"x";function $Ye(e,t,n,s){const o=e.skip?t:e,r=t,i=n.skip?t:n,a=em(r,o),l=em(i,r);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const d=s*u,f=s*c;return{previous:{x:r.x-d*(i.x-o.x),y:r.y-d*(i.y-o.y)},next:{x:r.x+f*(i.x-o.x),y:r.y+f*(i.y-o.y)}}}function SYe(e,t,n){const s=e.length;let o,r,i,a,l,u=Df(e,0);for(let c=0;c<s-1;++c)if(l=u,u=Df(e,c+1),!(!l||!u)){if(hp(t[c],0,CYe)){n[c]=n[c+1]=0;continue}o=n[c]/t[c],r=n[c+1]/t[c],a=Math.pow(o,2)+Math.pow(r,2),!(a<=9)&&(i=3/Math.sqrt(a),n[c]=o*i*t[c],n[c+1]=r*i*t[c])}}function IYe(e,t,n="x"){const s=fU(n),o=e.length;let r,i,a,l=Df(e,0);for(let u=0;u<o;++u){if(i=a,a=l,l=Df(e,u+1),!a)continue;const c=a[n],d=a[s];i&&(r=(c-i[n])/3,a[`cp1${n}`]=c-r,a[`cp1${s}`]=d-r*t[u]),l&&(r=(l[n]-c)/3,a[`cp2${n}`]=c+r,a[`cp2${s}`]=d+r*t[u])}}function EYe(e,t="x"){const n=fU(t),s=e.length,o=Array(s).fill(0),r=Array(s);let i,a,l,u=Df(e,0);for(i=0;i<s;++i)if(a=l,l=u,u=Df(e,i+1),!!l){if(u){const c=u[t]-l[t];o[i]=c!==0?(u[n]-l[n])/c:0}r[i]=a?u?va(o[i-1])!==va(o[i])?0:(o[i-1]+o[i])/2:o[i-1]:o[i]}SYe(e,o,r),IYe(e,r,t)}function Y0(e,t,n){return Math.max(Math.min(e,n),t)}function TYe(e,t){let n,s,o,r,i,a=Lc(e[0],t);for(n=0,s=e.length;n<s;++n)i=r,r=a,a=n<s-1&&Lc(e[n+1],t),r&&(o=e[n],i&&(o.cp1x=Y0(o.cp1x,t.left,t.right),o.cp1y=Y0(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=Y0(o.cp2x,t.left,t.right),o.cp2y=Y0(o.cp2y,t.top,t.bottom)))}function _Ye(e,t,n,s,o){let r,i,a,l;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")EYe(e,o);else{let u=s?e[e.length-1]:e[0];for(r=0,i=e.length;r<i;++r)a=e[r],l=$Ye(u,a,e[Math.min(r+1,i-(s?0:1))%i],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}t.capBezierPoints&&TYe(e,n)}function hU(){return typeof window!="undefined"&&typeof document!="undefined"}function ET(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Wb(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const pw=e=>window.getComputedStyle(e,null);function NYe(e,t){return pw(e).getPropertyValue(t)}const AYe=["top","right","bottom","left"];function mc(e,t,n){const s={};n=n?"-"+n:"";for(let o=0;o<4;o++){const r=AYe[o];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const DYe=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function RYe(e,t){const n=e.native||e,s=n.touches,o=s&&s.length?s[0]:n,{offsetX:r,offsetY:i}=o;let a=!1,l,u;if(DYe(r,i,n.target))l=r,u=i;else{const c=t.getBoundingClientRect();l=o.clientX-c.left,u=o.clientY-c.top,a=!0}return{x:l,y:u,box:a}}function pU(e,t){const{canvas:n,currentDevicePixelRatio:s}=t,o=pw(n),r=o.boxSizing==="border-box",i=mc(o,"padding"),a=mc(o,"border","width"),{x:l,y:u,box:c}=RYe(e,n),d=i.left+(c&&a.left),f=i.top+(c&&a.top);let{width:h,height:p}=t;return r&&(h-=i.width+a.width,p-=i.height+a.height),{x:Math.round((l-d)/h*n.width/s),y:Math.round((u-f)/p*n.height/s)}}function MYe(e,t,n){let s,o;if(t===void 0||n===void 0){const r=ET(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const i=r.getBoundingClientRect(),a=pw(r),l=mc(a,"border","width"),u=mc(a,"padding");t=i.width-u.width-l.width,n=i.height-u.height-l.height,s=Wb(a.maxWidth,r,"clientWidth"),o=Wb(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Bb,maxHeight:o||Bb}}const uk=e=>Math.round(e*10)/10;function OYe(e,t,n,s){const o=pw(e),r=mc(o,"margin"),i=Wb(o.maxWidth,e,"clientWidth")||Bb,a=Wb(o.maxHeight,e,"clientHeight")||Bb,l=MYe(e,t,n);let{width:u,height:c}=l;if(o.boxSizing==="content-box"){const d=mc(o,"border","width"),f=mc(o,"padding");u-=f.width+d.width,c-=f.height+d.height}return u=Math.max(0,u-r.width),c=Math.max(0,s?Math.floor(u/s):c-r.height),u=uk(Math.min(u,i,l.maxWidth)),c=uk(Math.min(c,a,l.maxHeight)),u&&!c&&(c=uk(u/2)),{width:u,height:c}}function wM(e,t,n){const s=t||1,o=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=o/s,e.width=r/s;const i=e.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height=`${e.height}px`,i.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||i.height!==o||i.width!==r?(e.currentDevicePixelRatio=s,i.height=o,i.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const PYe=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function kM(e,t){const n=NYe(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Vu(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function FYe(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function LYe(e,t,n,s){const o={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},i=Vu(e,o,n),a=Vu(o,r,n),l=Vu(r,t,n),u=Vu(i,a,n),c=Vu(a,l,n);return Vu(u,c,n)}const xM=new Map;function BYe(e,t){t=t||{};const n=e+JSON.stringify(t);let s=xM.get(n);return s||(s=new Intl.NumberFormat(e,t),xM.set(n,s)),s}function Zg(e,t,n){return BYe(t,n).format(e)}const zYe=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},VYe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Zd(e,t,n){return e?zYe(t,n):VYe()}function mU(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function gU(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function vU(e){return e==="angle"?{between:tm,compare:Dqe,normalize:xr}:{between:Va,compare:(t,n)=>t-n,normalize:t=>t}}function CM({start:e,end:t,count:n,loop:s,style:o}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:o}}function WYe(e,t,n){const{property:s,start:o,end:r}=n,{between:i,normalize:a}=vU(s),l=t.length;let{start:u,end:c,loop:d}=e,f,h;if(d){for(u+=l,c+=l,f=0,h=l;f<h&&i(a(t[u%l][s]),o,r);++f)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:d,style:e.style}}function bU(e,t,n){if(!n)return[e];const{property:s,start:o,end:r}=n,i=t.length,{compare:a,between:l,normalize:u}=vU(s),{start:c,end:d,loop:f,style:h}=WYe(e,t,n),p=[];let m=!1,g=null,v,b,w;const y=()=>l(o,w,v)&&a(o,w)!==0,k=()=>a(r,v)===0||l(r,w,v),x=()=>m||y(),C=()=>!m||k();for(let S=c,T=c;S<=d;++S)b=t[S%i],!b.skip&&(v=u(b[s]),v!==w&&(m=l(v,o,r),g===null&&x()&&(g=a(v,o)===0?S:T),g!==null&&C()&&(p.push(CM({start:g,end:S,loop:f,count:i,style:h})),g=null),T=S,w=v));return g!==null&&p.push(CM({start:g,end:d,loop:f,count:i,style:h})),p}function yU(e,t){const n=[],s=e.segments;for(let o=0;o<s.length;o++){const r=bU(s[o],e.points,t);r.length&&n.push(...r)}return n}function HYe(e,t,n,s){let o=0,r=t-1;if(n&&!s)for(;o<t&&!e[o].skip;)o++;for(;o<t&&e[o].skip;)o++;for(o%=t,n&&(r+=o);r>o&&e[r%t].skip;)r--;return r%=t,{start:o,end:r}}function UYe(e,t,n,s){const o=e.length,r=[];let i=t,a=e[t],l;for(l=t+1;l<=n;++l){const u=e[l%o];u.skip||u.stop?a.skip||(s=!1,r.push({start:t%o,end:(l-1)%o,loop:s}),t=i=u.stop?l:null):(i=l,a.skip&&(t=l)),a=u}return i!==null&&r.push({start:t%o,end:i%o,loop:s}),r}function jYe(e,t){const n=e.points,s=e.options.spanGaps,o=n.length;if(!o)return[];const r=!!e._loop,{start:i,end:a}=HYe(n,o,r,s);if(s===!0)return $M(e,[{start:i,end:a,loop:r}],n,t);const l=a<i?a+o:a,u=!!e._fullLoop&&i===0&&a===o-1;return $M(e,UYe(n,i,l,u),n,t)}function $M(e,t,n,s){return!s||!s.setContext||!n?t:GYe(e,t,n,s)}function GYe(e,t,n,s){const o=e._chart.getContext(),r=SM(e.options),{_datasetIndex:i,options:{spanGaps:a}}=e,l=n.length,u=[];let c=r,d=t[0].start,f=d;function h(p,m,g,v){const b=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=b;for(;n[m%l].skip;)m+=b;p%l!==m%l&&(u.push({start:p%l,end:m%l,loop:g,style:v}),c=v,d=m%l)}}for(const p of t){d=a?d:p.start;let m=n[d%l],g;for(f=d+1;f<=p.end;f++){const v=n[f%l];g=SM(s.setContext(bu(o,{type:"segment",p0:m,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:i}))),KYe(g,c)&&h(d,f-1,p.loop,c),m=v,c=g}d<f-1&&h(d,f-1,p.loop,c)}return u}function SM(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function KYe(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class qYe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,o){const r=n.listeners[o],i=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:i,currentStep:Math.min(s-n.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=KH.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,o)=>{if(!s.running||!s.items.length)return;const r=s.items;let i=r.length-1,a=!1,l;for(;i>=0;--i)l=r[i],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[i]=r[r.length-1],r.pop());a&&(o.draw(),this._notify(o,s,t,"progress")),r.length||(s.running=!1,this._notify(o,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,o)=>Math.max(s,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let o=s.length-1;for(;o>=0;--o)s[o].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ra=new qYe;const IM="transparent",YYe={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=mM(e||IM),o=s.valid&&mM(t||IM);return o&&o.valid?o.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class XYe{constructor(t,n,s,o){const r=n[s];o=qh([t.to,o,r,t.from]);const i=qh([t.from,r,o]);this._active=!0,this._fn=t.fn||YYe[t.type||typeof i],this._easing=pp[t.easing]||pp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=i,this._to=o,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const o=this._target[this._prop],r=s-this._start,i=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(i,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=qh([t.to,n,o,t.from]),this._from=qh([t.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,o=this._prop,r=this._from,i=this._loop,a=this._to;let l;if(this._active=r!==a&&(i||n<s),!this._active){this._target[o]=a,this._notify(!0);return}if(n<0){this._target[o]=r;return}l=n/s%2,l=i&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[o]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let o=0;o<s.length;o++)s[o][n]()}}const ZYe=["x","y","borderWidth","radius","tension"],JYe=["color","borderColor","backgroundColor"];Tn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const QYe=Object.keys(Tn.animation);Tn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"});Tn.set("animations",{colors:{type:"color",properties:JYe},numbers:{type:"number",properties:ZYe}});Tn.describe("animations",{_fallback:"animation"});Tn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}});class TT{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!gn(t))return;const n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!gn(o))return;const r={};for(const i of QYe)r[i]=o[i];(Gn(o.properties)&&o.properties||[s]).forEach(i=>{(i===s||!n.has(i))&&n.set(i,r)})})}_animateOptions(t,n){const s=n.options,o=tXe(t,s);if(!o)return[];const r=this._createAnimations(o,s);return s.$shared&&eXe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,o=[],r=t.$animations||(t.$animations={}),i=Object.keys(n),a=Date.now();let l;for(l=i.length-1;l>=0;--l){const u=i[l];if(u.charAt(0)==="$")continue;if(u==="options"){o.push(...this._animateOptions(t,n));continue}const c=n[u];let d=r[u];const f=s.get(u);if(d)if(f&&d.active()){d.update(f,c,a);continue}else d.cancel();if(!f||!f.duration){t[u]=c;continue}r[u]=d=new XYe(f,t,u,c),o.push(d)}return o}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Ra.add(this._chart,s),!0}}function eXe(e,t){const n=[],s=Object.keys(t);for(let o=0;o<s.length;o++){const r=e[s[o]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function tXe(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function EM(e,t){const n=e&&e.options||{},s=n.reverse,o=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:o,end:s?o:r}}function nXe(e,t,n){if(n===!1)return!1;const s=EM(e,n),o=EM(t,n);return{top:o.end,right:s.end,bottom:o.start,left:s.start}}function sXe(e){let t,n,s,o;return gn(e)?(t=e.top,n=e.right,s=e.bottom,o=e.left):t=n=s=o=e,{top:t,right:n,bottom:s,left:o,disabled:e===!1}}function wU(e,t){const n=[],s=e._getSortedDatasetMetas(t);let o,r;for(o=0,r=s.length;o<r;++o)n.push(s[o].index);return n}function TM(e,t,n,s={}){const o=e.keys,r=s.mode==="single";let i,a,l,u;if(t!==null){for(i=0,a=o.length;i<a;++i){if(l=+o[i],l===n){if(s.all)continue;break}u=e.values[l],Ds(u)&&(r||t===0||va(t)===va(u))&&(t+=u)}return t}}function oXe(e){const t=Object.keys(e),n=new Array(t.length);let s,o,r;for(s=0,o=t.length;s<o;++s)r=t[s],n[s]={x:r,y:e[r]};return n}function _M(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function rXe(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function iXe(e){const{min:t,max:n,minDefined:s,maxDefined:o}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function aXe(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function NM(e,t,n,s){for(const o of t.getMatchingVisibleMetas(s).reverse()){const r=e[o.index];if(n&&r>0||!n&&r<0)return o.index}return null}function AM(e,t){const{chart:n,_cachedMeta:s}=e,o=n._stacks||(n._stacks={}),{iScale:r,vScale:i,index:a}=s,l=r.axis,u=i.axis,c=rXe(r,i,s),d=t.length;let f;for(let h=0;h<d;++h){const p=t[h],{[l]:m,[u]:g}=p,v=p._stacks||(p._stacks={});f=v[u]=aXe(o,c,m),f[a]=g,f._top=NM(f,i,!0,s.type),f._bottom=NM(f,i,!1,s.type)}}function ck(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function lXe(e,t){return bu(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function uXe(e,t,n){return bu(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Eh(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(!!s){t=t||e._parsed;for(const o of t){const r=o._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n]}}}const dk=e=>e==="reset"||e==="none",DM=(e,t)=>t?e:Object.assign({},e),cXe=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:wU(n,!0),values:null};class Ia{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=_M(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Eh(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),o=(d,f,h,p)=>d==="x"?f:d==="r"?p:h,r=n.xAxisID=nn(s.xAxisID,ck(t,"x")),i=n.yAxisID=nn(s.yAxisID,ck(t,"y")),a=n.rAxisID=nn(s.rAxisID,ck(t,"r")),l=n.indexAxis,u=n.iAxisID=o(l,r,i,a),c=n.vAxisID=o(l,i,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(i),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&vM(this._data,this),t._stacked&&Eh(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(gn(n))this._data=oXe(n);else if(s!==n){if(s){vM(s,this);const o=this._cachedMeta;Eh(o),o._parsed=[]}n&&Object.isExtensible(n)&&hYe(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let o=!1;this._dataCheck();const r=n._stacked;n._stacked=_M(n.vScale,n),n.stack!==s.stack&&(o=!0,Eh(n),n.stack=s.stack),this._resyncElements(t),(o||r!==n._stacked)&&AM(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:o}=this,{iScale:r,_stacked:i}=s,a=r.axis;let l=t===0&&n===o.length?!0:s._sorted,u=t>0&&s._parsed[t-1],c,d,f;if(this._parsing===!1)s._parsed=o,s._sorted=!0,f=o;else{Gn(o[t])?f=this.parseArrayData(s,o,t,n):gn(o[t])?f=this.parseObjectData(s,o,t,n):f=this.parsePrimitiveData(s,o,t,n);const h=()=>d[a]===null||u&&d[a]<u[a];for(c=0;c<n;++c)s._parsed[c+t]=d=f[c],l&&(h()&&(l=!1),u=d);s._sorted=l}i&&AM(this,f)}parsePrimitiveData(t,n,s,o){const{iScale:r,vScale:i}=t,a=r.axis,l=i.axis,u=r.getLabels(),c=r===i,d=new Array(o);let f,h,p;for(f=0,h=o;f<h;++f)p=f+s,d[f]={[a]:c||r.parse(u[p],p),[l]:i.parse(n[p],p)};return d}parseArrayData(t,n,s,o){const{xScale:r,yScale:i}=t,a=new Array(o);let l,u,c,d;for(l=0,u=o;l<u;++l)c=l+s,d=n[c],a[l]={x:r.parse(d[0],c),y:i.parse(d[1],c)};return a}parseObjectData(t,n,s,o){const{xScale:r,yScale:i}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(o);let c,d,f,h;for(c=0,d=o;c<d;++c)f=c+s,h=n[f],u[c]={x:r.parse(Pc(h,a),f),y:i.parse(Pc(h,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const o=this.chart,r=this._cachedMeta,i=n[t.axis],a={keys:wU(o,!0),values:n._stacks[t.axis]};return TM(a,i,r.index,{mode:s})}updateRangeFromParsed(t,n,s,o){const r=s[n.axis];let i=r===null?NaN:r;const a=o&&s._stacks[n.axis];o&&a&&(o.values=a,i=TM(o,r,this._cachedMeta.index)),t.min=Math.min(t.min,i),t.max=Math.max(t.max,i)}getMinMax(t,n){const s=this._cachedMeta,o=s._parsed,r=s._sorted&&t===s.iScale,i=o.length,a=this._getOtherScale(t),l=cXe(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=iXe(a);let f,h;function p(){h=o[f];const m=h[a.axis];return!Ds(h[t.axis])||c>m||d<m}for(f=0;f<i&&!(!p()&&(this.updateRangeFromParsed(u,t,h,l),r));++f);if(r){for(f=i-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,h,l);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let o,r,i;for(o=0,r=n.length;o<r;++o)i=n[o][t.axis],Ds(i)&&s.push(i);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,o=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:o?""+o.getLabelForValue(r[o.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=sXe(nn(this.options.clip,nXe(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,o=s.data||[],r=n.chartArea,i=[],a=this._drawStart||0,l=this._drawCount||o.length-a,u=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(t,r,a,l),c=a;c<a+l;++c){const d=o[c];d.hidden||(d.active&&u?i.push(d):d.draw(t,r))}for(c=0;c<i.length;++c)i[c].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const o=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const i=this._cachedMeta.data[t];r=i.$context||(i.$context=uXe(this.getContext(),t,i)),r.parsed=this.getParsed(t),r.raw=o.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=lXe(this.chart.getContext(),this.index)),r.dataset=o,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const o=n==="active",r=this._cachedDataOpts,i=t+"-"+n,a=r[i],l=this.enableOptionSharing&&Js(s);if(a)return DM(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,t),d=o?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),c),h=Object.keys(Tn.elements[t]),p=()=>this.getContext(s,o),m=u.resolveNamedOptions(f,h,p,d);return m.$shared&&(m.$shared=l,r[i]=Object.freeze(DM(m,l))),m}_resolveAnimations(t,n,s){const o=this.chart,r=this._cachedDataOpts,i=`animation-${n}`,a=r[i];if(a)return a;let l;if(o.options.animation!==!1){const c=this.chart.config,d=c.datasetAnimationScopeKeys(this._type,n),f=c.getOptionScopes(this.getDataset(),d);l=c.createResolver(f,this.getContext(t,s,n))}const u=new TT(o,l&&l.animations);return l&&l._cacheable&&(r[i]=Object.freeze(u)),u}getSharedOptions(t){if(!!t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||dk(t)||this.chart._animationsDisabled}updateElement(t,n,s,o){dk(o)?Object.assign(t,s):this._resolveAnimations(n,o).update(t,s)}updateSharedOptions(t,n,s){t&&!dk(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,o){t.active=o;const r=this.getStyle(n,o);this._resolveAnimations(n,s,o).update(t,{options:!o&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const o=s.length,r=n.length,i=Math.min(r,o);i&&this.parse(0,i),r>o?this._insertElements(o,r-o,t):r<o&&this._removeElements(r,o-r)}_insertElements(t,n,s=!0){const o=this._cachedMeta,r=o.data,i=t+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=i;a--)u[a]=u[a-n]};for(l(r),a=t;a<i;++a)r[a]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,o){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const o=s._parsed.splice(t,n);s._stacked&&Eh(s,o)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,o]=t;this[n](s,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ia.defaults={};Ia.prototype.datasetElementType=null;Ia.prototype.dataElementType=null;function dXe(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let o=0,r=n.length;o<r;o++)s=s.concat(n[o].controller.getAllParsedValues(e));e._cache.$bar=aU(s.sort((o,r)=>o-r))}return e._cache.$bar}function fXe(e){const t=e.iScale,n=dXe(t,e.type);let s=t._length,o,r,i,a;const l=()=>{i===32767||i===-32768||(Js(a)&&(s=Math.min(s,Math.abs(i-a)||s)),a=i)};for(o=0,r=n.length;o<r;++o)i=t.getPixelForValue(n[o]),l();for(a=void 0,o=0,r=t.ticks.length;o<r;++o)i=t.getPixelForTick(o),l();return s}function hXe(e,t,n,s){const o=n.barThickness;let r,i;return Bn(o)?(r=t.min*n.categoryPercentage,i=n.barPercentage):(r=o*s,i=1),{chunk:r/s,ratio:i,start:t.pixels[e]-r/2}}function pXe(e,t,n,s){const o=t.pixels,r=o[e];let i=e>0?o[e-1]:null,a=e<o.length-1?o[e+1]:null;const l=n.categoryPercentage;i===null&&(i=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-i);const u=r-(r-Math.min(i,a))/2*l;return{chunk:Math.abs(a-i)/2*l/s,ratio:n.barPercentage,start:u}}function mXe(e,t,n,s){const o=n.parse(e[0],s),r=n.parse(e[1],s),i=Math.min(o,r),a=Math.max(o,r);let l=i,u=a;Math.abs(i)>Math.abs(a)&&(l=a,u=i),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:o,end:r,min:i,max:a}}function kU(e,t,n,s){return Gn(e)?mXe(e,t,n,s):t[n.axis]=n.parse(e,s),t}function RM(e,t,n,s){const o=e.iScale,r=e.vScale,i=o.getLabels(),a=o===r,l=[];let u,c,d,f;for(u=n,c=n+s;u<c;++u)f=t[u],d={},d[o.axis]=a||o.parse(i[u],u),l.push(kU(f,d,r,u));return l}function fk(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function gXe(e,t,n){return e!==0?va(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function vXe(e){let t,n,s,o,r;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(o="end",r="start"):(o="start",r="end"),{start:n,end:s,reverse:t,top:o,bottom:r}}function bXe(e,t,n,s){let o=t.borderSkipped;const r={};if(!o){e.borderSkipped=r;return}const{start:i,end:a,reverse:l,top:u,bottom:c}=vXe(e);o==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?o=u:(n._bottom||0)===s?o=c:(r[MM(c,i,a,l)]=!0,o=u)),r[MM(o,i,a,l)]=!0,e.borderSkipped=r}function MM(e,t,n,s){return s?(e=yXe(e,t,n),e=OM(e,n,t)):e=OM(e,t,n),e}function yXe(e,t,n){return e===t?n:e===n?t:e}function OM(e,t,n){return e==="start"?t:e==="end"?n:e}function wXe(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class mw extends Ia{parsePrimitiveData(t,n,s,o){return RM(t,n,s,o)}parseArrayData(t,n,s,o){return RM(t,n,s,o)}parseObjectData(t,n,s,o){const{iScale:r,vScale:i}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=r.axis==="x"?a:l,c=i.axis==="x"?a:l,d=[];let f,h,p,m;for(f=s,h=s+o;f<h;++f)m=n[f],p={},p[r.axis]=r.parse(Pc(m,u),f),d.push(kU(Pc(m,c),p,i,f));return d}updateRangeFromParsed(t,n,s,o){super.updateRangeFromParsed(t,n,s,o);const r=s._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:o}=n,r=this.getParsed(t),i=r._custom,a=fk(i)?"["+i.start+", "+i.end+"]":""+o.getLabelForValue(r[o.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,o){const r=o==="reset",{index:i,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),c=this._getRuler(),d=this.resolveDataElementOptions(n,o),f=this.getSharedOptions(d),h=this.includeOptions(o,f);this.updateSharedOptions(f,o,d);for(let p=n;p<n+s;p++){const m=this.getParsed(p),g=r||Bn(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,c),b=(m._stacks||{})[a.axis],w={horizontal:u,base:g.base,enableBorderRadius:!b||fk(m._custom)||i===b._top||i===b._bottom,x:u?g.head:v.center,y:u?v.center:g.head,height:u?v.size:Math.abs(g.size),width:u?Math.abs(g.size):v.size};h&&(w.options=f||this.resolveDataElementOptions(p,t[p].active?"active":o));const y=w.options||t[p].options;bXe(w,y,b,i),wXe(w,y,c.ratio),this.updateElement(t[p],p,w,o)}}_getStacks(t,n){const o=this._cachedMeta.iScale,r=o.getMatchingVisibleMetas(this._type),i=o.options.stacked,a=r.length,l=[];let u,c;for(u=0;u<a;++u)if(c=r[u],!!c.controller.options.grouped){if(typeof n!="undefined"){const d=c.controller.getParsed(n)[c.controller._cachedMeta.vScale.axis];if(Bn(d)||isNaN(d))continue}if((i===!1||l.indexOf(c.stack)===-1||i===void 0&&c.stack===void 0)&&l.push(c.stack),c.index===t)break}return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,s){const o=this._getStacks(t,s),r=n!==void 0?o.indexOf(n):-1;return r===-1?o.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,o=[];let r,i;for(r=0,i=n.data.length;r<i;++r)o.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||fXe(n),pixels:o,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s},options:{base:o,minBarLength:r}}=this,i=o||0,a=this.getParsed(t),l=a._custom,u=fk(l);let c=a[n.axis],d=0,f=s?this.applyStack(n,a,s):c,h,p;f!==c&&(d=f-c,f=c),u&&(c=l.barStart,f=l.barEnd-l.barStart,c!==0&&va(c)!==va(l.barEnd)&&(d=0),d+=c);const m=!Bn(o)&&!u?o:d;let g=n.getPixelForValue(m);if(this.chart.getDataVisibility(t)?h=n.getPixelForValue(d+f):h=g,p=h-g,Math.abs(p)<r&&(p=gXe(p,n,i)*r,c===i&&(g-=p/2),h=g+p),g===n.getPixelForValue(i)){const v=va(p)*n.getLineWidthForValue(i)/2;g+=v,p-=v}return{size:p,base:g,head:h,center:h+p/2}}_calculateBarIndexPixels(t,n){const s=n.scale,o=this.options,r=o.skipNull,i=nn(o.maxBarThickness,1/0);let a,l;if(n.grouped){const u=r?this._getStackCount(t):n.stackCount,c=o.barThickness==="flex"?pXe(t,n,o,u):hXe(t,n,o,u),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=c.start+c.chunk*d+c.chunk/2,l=Math.min(i,c.chunk*c.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(i,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,o=s.length;let r=0;for(;r<o;++r)this.getParsed(r)[n.axis]!==null&&s[r].draw(this._ctx)}}mw.id="bar";mw.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};mw.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class gw extends Ia{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,s,o){const r=super.parsePrimitiveData(t,n,s,o);for(let i=0;i<r.length;i++)r[i]._custom=this.resolveDataElementOptions(i+s).radius;return r}parseArrayData(t,n,s,o){const r=super.parseArrayData(t,n,s,o);for(let i=0;i<r.length;i++){const a=n[s+i];r[i]._custom=nn(a[2],this.resolveDataElementOptions(i+s).radius)}return r}parseObjectData(t,n,s,o){const r=super.parseObjectData(t,n,s,o);for(let i=0;i<r.length;i++){const a=n[s+i];r[i]._custom=nn(a&&a.r&&+a.r,this.resolveDataElementOptions(i+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let s=t.length-1;s>=0;--s)n=Math.max(n,t[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,{xScale:s,yScale:o}=n,r=this.getParsed(t),i=s.getLabelForValue(r.x),a=o.getLabelForValue(r.y),l=r._custom;return{label:n.label,value:"("+i+", "+a+(l?", "+l:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,s,o){const r=o==="reset",{iScale:i,vScale:a}=this._cachedMeta,l=this.resolveDataElementOptions(n,o),u=this.getSharedOptions(l),c=this.includeOptions(o,u),d=i.axis,f=a.axis;for(let h=n;h<n+s;h++){const p=t[h],m=!r&&this.getParsed(h),g={},v=g[d]=r?i.getPixelForDecimal(.5):i.getPixelForValue(m[d]),b=g[f]=r?a.getBasePixel():a.getPixelForValue(m[f]);g.skip=isNaN(v)||isNaN(b),c&&(g.options=this.resolveDataElementOptions(h,p.active?"active":o),r&&(g.options.radius=0)),this.updateElement(p,h,g,o)}this.updateSharedOptions(u,o,l)}resolveDataElementOptions(t,n){const s=this.getParsed(t);let o=super.resolveDataElementOptions(t,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const r=o.radius;return n!=="active"&&(o.radius=0),o.radius+=nn(s&&s._custom,r),o}}gw.id="bubble";gw.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};gw.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function kXe(e,t,n){let s=1,o=1,r=0,i=0;if(t<us){const a=e,l=a+t,u=Math.cos(a),c=Math.sin(a),d=Math.cos(l),f=Math.sin(l),h=(w,y,k)=>tm(w,a,l,!0)?1:Math.max(y,y*n,k,k*n),p=(w,y,k)=>tm(w,a,l,!0)?-1:Math.min(y,y*n,k,k*n),m=h(0,u,d),g=h(Ps,c,f),v=p(Hn,u,d),b=p(Hn+Ps,c,f);s=(m-v)/2,o=(g-b)/2,r=-(m+v)/2,i=-(g+b)/2}return{ratioX:s,ratioY:o,offsetX:r,offsetY:i}}class uh extends Ia{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=s;else{let r=l=>+s[l];if(gn(s[t])){const{key:l="value"}=this._parsing;r=u=>+Pc(s[u],l)}let i,a;for(i=t,a=t+n;i<a;++i)o._parsed[i]=r(i)}}_getRotation(){return go(this.options.rotation-90)}_getCircumference(){return go(this.options.circumference)}_getRotationExtents(){let t=us,n=-us;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){const o=this.chart.getDatasetMeta(s).controller,r=o._getRotation(),i=o._getCircumference();t=Math.min(t,r),n=Math.max(n,r+i)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,o=this._cachedMeta,r=o.data,i=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-i)/2,0),l=Math.min(Cqe(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:p,offsetY:m}=kXe(d,c,l),g=(s.width-i)/f,v=(s.height-i)/h,b=Math.max(Math.min(g,v)/2,0),w=YH(this.options.radius,b),y=Math.max(w*l,0),k=(w-y)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=m*w,o.total=this.calculateTotal(),this.outerRadius=w-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,o=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*r/us)}updateElements(t,n,s,o){const r=o==="reset",i=this.chart,a=i.chartArea,u=i.options.animation,c=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&u.animateScale,h=f?0:this.innerRadius,p=f?0:this.outerRadius,m=this.resolveDataElementOptions(n,o),g=this.getSharedOptions(m),v=this.includeOptions(o,g);let b=this._getRotation(),w;for(w=0;w<n;++w)b+=this._circumference(w,r);for(w=n;w<n+s;++w){const y=this._circumference(w,r),k=t[w],x={x:c+this.offsetX,y:d+this.offsetY,startAngle:b,endAngle:b+y,circumference:y,outerRadius:p,innerRadius:h};v&&(x.options=g||this.resolveDataElementOptions(w,k.active?"active":o)),b+=y,this.updateElement(k,w,x,o)}this.updateSharedOptions(g,o,m)}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,o;for(o=0;o<n.length;o++){const r=t._parsed[o];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?us*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=Zg(n._parsed[t],s.options.locale);return{label:o[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let o,r,i,a,l;if(!t){for(o=0,r=s.data.datasets.length;o<r;++o)if(s.isDatasetVisible(o)){i=s.getDatasetMeta(o),t=i.data,a=i.controller;break}}if(!t)return 0;for(o=0,r=t.length;o<r;++o)l=a.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,o=t.length;s<o;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(nn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}uh.id="doughnut";uh.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};uh.descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"};uh.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((s,o)=>{const i=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){let t=e.label;const n=": "+e.formattedValue;return Gn(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class Jg extends Ia{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:o=[],_dataset:r}=n,i=this.chart._animationsDisabled;let{start:a,count:l}=xXe(n,o,i);this._drawStart=a,this._drawCount=l,CXe(n)&&(a=0,l=o.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=o;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!i,options:u},t),this.updateElements(o,a,l,t)}updateElements(t,n,s,o){const r=o==="reset",{iScale:i,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(n,o),d=this.getSharedOptions(c),f=this.includeOptions(o,d),h=i.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,v=Qp(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||o==="none";let w=n>0&&this.getParsed(n-1);for(let y=n;y<n+s;++y){const k=t[y],x=this.getParsed(y),C=b?k:{},S=Bn(x[p]),T=C[h]=i.getPixelForValue(x[h],y),A=C[p]=r||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[p],y);C.skip=isNaN(T)||isNaN(A)||S,C.stop=y>0&&x[h]-w[h]>v,g&&(C.parsed=x,C.raw=u.data[y]),f&&(C.options=d||this.resolveDataElementOptions(y,k.active?"active":o)),b||this.updateElement(k,y,C,o),w=x}this.updateSharedOptions(d,o,c)}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,o=t.data||[];if(!o.length)return s;const r=o[0].size(this.resolveDataElementOptions(0)),i=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(s,r,i)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Jg.id="line";Jg.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};Jg.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function xXe(e,t,n){const s=t.length;let o=0,r=s;if(e._sorted){const{iScale:i,_parsed:a}=e,l=i.axis,{min:u,max:c,minDefined:d,maxDefined:f}=i.getUserBounds();d&&(o=vo(Math.min(Wa(a,i.axis,u).lo,n?s:Wa(t,l,i.getPixelForValue(u)).lo),0,s-1)),f?r=vo(Math.max(Wa(a,i.axis,c).hi+1,n?0:Wa(t,l,i.getPixelForValue(c)).hi+1),o,s)-o:r=s-o}return{start:o,count:r}}function CXe(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,o={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=o,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,o),r}class vw extends Ia{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=Zg(n._parsed[t].r,s.options.locale);return{label:o[t]||"",value:r}}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}_updateRadius(){const t=this.chart,n=t.chartArea,s=t.options,o=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(o/2,0),i=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-i)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,s,o){const r=o==="reset",i=this.chart,a=this.getDataset(),u=i.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,f=c.yCenter,h=c.getIndexAngle(0)-.5*Hn;let p=h,m;const g=360/this.countVisibleElements();for(m=0;m<n;++m)p+=this._computeAngle(m,o,g);for(m=n;m<n+s;m++){const v=t[m];let b=p,w=p+this._computeAngle(m,o,g),y=i.getDataVisibility(m)?c.getDistanceFromCenterForValue(a.data[m]):0;p=w,r&&(u.animateScale&&(y=0),u.animateRotate&&(b=w=h));const k={x:d,y:f,innerRadius:0,outerRadius:y,startAngle:b,endAngle:w,options:this.resolveDataElementOptions(m,v.active?"active":o)};this.updateElement(v,m,k,o)}}countVisibleElements(){const t=this.getDataset(),n=this._cachedMeta;let s=0;return n.data.forEach((o,r)=>{!isNaN(t.data[r])&&this.chart.getDataVisibility(r)&&s++}),s}_computeAngle(t,n,s){return this.chart.getDataVisibility(t)?go(this.resolveDataElementOptions(t,n).angle||s):0}}vw.id="polarArea";vw.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};vw.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((s,o)=>{const i=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class _T extends uh{}_T.id="pie";_T.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class bw extends Ia{getLabelAndValue(t){const n=this._cachedMeta.vScale,s=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(s[n.axis])}}update(t){const n=this._cachedMeta,s=n.dataset,o=n.data||[],r=n.iScale.getLabels();if(s.points=o,t!=="resize"){const i=this.resolveDatasetElementOptions(t);this.options.showLine||(i.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===o.length,options:i};this.updateElement(s,void 0,a,t)}this.updateElements(o,0,o.length,t)}updateElements(t,n,s,o){const r=this.getDataset(),i=this._cachedMeta.rScale,a=o==="reset";for(let l=n;l<n+s;l++){const u=t[l],c=this.resolveDataElementOptions(l,u.active?"active":o),d=i.getPointPositionForValue(l,r.data[l]),f=a?i.xCenter:d.x,h=a?i.yCenter:d.y,p={x:f,y:h,angle:d.angle,skip:isNaN(f)||isNaN(h),options:c};this.updateElement(u,l,p,o)}}}bw.id="radar";bw.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};bw.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class yw extends Jg{}yw.id="scatter";yw.defaults={showLine:!1,fill:!1};yw.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var $Xe=Object.freeze({__proto__:null,BarController:mw,BubbleController:gw,DoughnutController:uh,LineController:Jg,PolarAreaController:vw,PieController:_T,RadarController:bw,ScatterController:yw});function Mu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class IC{constructor(t){this.options=t||{}}formats(){return Mu()}parse(t,n){return Mu()}format(t,n){return Mu()}add(t,n,s){return Mu()}diff(t,n,s){return Mu()}startOf(t,n,s){return Mu()}endOf(t,n){return Mu()}}IC.override=function(e){Object.assign(IC.prototype,e)};var SXe={_date:IC};function Yh(e,t){return"native"in e?{x:e.x,y:e.y}:pU(e,t)}function IXe(e,t){const n=e.getSortedVisibleDatasetMetas();let s,o,r;for(let i=0,a=n.length;i<a;++i){({index:s,data:o}=n[i]);for(let l=0,u=o.length;l<u;++l)r=o[l],r.skip||t(r,s,l)}}function EXe(e,t,n,s){const{controller:o,data:r,_sorted:i}=e,a=o._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&i&&r.length){const l=a._reversePixels?dYe:Wa;if(s){if(o._sharedOptions){const u=r[0],c=typeof u.getRange=="function"&&u.getRange(t);if(c){const d=l(r,t,n-c),f=l(r,t,n+c);return{lo:d.lo,hi:f.hi}}}}else return l(r,t,n)}return{lo:0,hi:r.length-1}}function NT(e,t,n,s,o){const r=e.getSortedVisibleDatasetMetas(),i=n[t];for(let a=0,l=r.length;a<l;++a){const{index:u,data:c}=r[a],{lo:d,hi:f}=EXe(r[a],t,i,o);for(let h=d;h<=f;++h){const p=c[h];p.skip||s(p,u,h)}}}function TXe(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,o){const r=t?Math.abs(s.x-o.x):0,i=n?Math.abs(s.y-o.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(i,2))}}function hk(e,t,n,s){const o=[];return Lc(t,e.chartArea,e._minPadding)&&NT(e,n,t,function(i,a,l){i.inRange(t.x,t.y,s)&&o.push({element:i,datasetIndex:a,index:l})},!0),o}function _Xe(e,t,n,s){let o=[];function r(i,a,l){const{startAngle:u,endAngle:c}=i.getProps(["startAngle","endAngle"],s),{angle:d}=QH(i,{x:t.x,y:t.y});tm(d,u,c)&&o.push({element:i,datasetIndex:a,index:l})}return NT(e,n,t,r),o}function NXe(e,t,n,s,o){let r=[];const i=TXe(n);let a=Number.POSITIVE_INFINITY;function l(u,c,d){const f=u.inRange(t.x,t.y,o);if(s&&!f)return;const h=u.getCenterPoint(o);if(!Lc(h,e.chartArea,e._minPadding)&&!f)return;const m=i(t,h);m<a?(r=[{element:u,datasetIndex:c,index:d}],a=m):m===a&&r.push({element:u,datasetIndex:c,index:d})}return NT(e,n,t,l),r}function pk(e,t,n,s,o){return Lc(t,e.chartArea,e._minPadding)?n==="r"&&!s?_Xe(e,t,n,o):NXe(e,t,n,s,o):[]}function PM(e,t,n,s){const o=Yh(t,e),r=[],i=n.axis,a=i==="x"?"inXRange":"inYRange";let l=!1;return IXe(e,(u,c,d)=>{u[a](o[i],s)&&r.push({element:u,datasetIndex:c,index:d}),u.inRange(o.x,o.y,s)&&(l=!0)}),n.intersect&&!l?[]:r}var AXe={modes:{index(e,t,n,s){const o=Yh(t,e),r=n.axis||"x",i=n.intersect?hk(e,o,r,s):pk(e,o,r,!1,s),a=[];return i.length?(e.getSortedVisibleDatasetMetas().forEach(l=>{const u=i[0].index,c=l.data[u];c&&!c.skip&&a.push({element:c,datasetIndex:l.index,index:u})}),a):[]},dataset(e,t,n,s){const o=Yh(t,e),r=n.axis||"xy";let i=n.intersect?hk(e,o,r,s):pk(e,o,r,!1,s);if(i.length>0){const a=i[0].datasetIndex,l=e.getDatasetMeta(a).data;i=[];for(let u=0;u<l.length;++u)i.push({element:l[u],datasetIndex:a,index:u})}return i},point(e,t,n,s){const o=Yh(t,e),r=n.axis||"xy";return hk(e,o,r,s)},nearest(e,t,n,s){const o=Yh(t,e),r=n.axis||"xy";return pk(e,o,r,n.intersect,s)},x(e,t,n,s){return PM(e,t,{axis:"x",intersect:n.intersect},s)},y(e,t,n,s){return PM(e,t,{axis:"y",intersect:n.intersect},s)}}};const xU=["left","top","right","bottom"];function Th(e,t){return e.filter(n=>n.pos===t)}function FM(e,t){return e.filter(n=>xU.indexOf(n.pos)===-1&&n.box.axis===t)}function _h(e,t){return e.sort((n,s)=>{const o=t?s:n,r=t?n:s;return o.weight===r.weight?o.index-r.index:o.weight-r.weight})}function DXe(e){const t=[];let n,s,o,r,i,a;for(n=0,s=(e||[]).length;n<s;++n)o=e[n],{position:r,options:{stack:i,stackWeight:a=1}}=o,t.push({index:n,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:i&&r+i,stackWeight:a});return t}function RXe(e){const t={};for(const n of e){const{stack:s,pos:o,stackWeight:r}=n;if(!s||!xU.includes(o))continue;const i=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=r}return t}function MXe(e,t){const n=RXe(e),{vBoxMaxWidth:s,hBoxMaxHeight:o}=t;let r,i,a;for(r=0,i=e.length;r<i;++r){a=e[r];const{fullSize:l}=a.box,u=n[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*s:l&&t.availableWidth,a.height=o):(a.width=s,a.height=c?c*o:l&&t.availableHeight)}return n}function OXe(e){const t=DXe(e),n=_h(t.filter(u=>u.box.fullSize),!0),s=_h(Th(t,"left"),!0),o=_h(Th(t,"right")),r=_h(Th(t,"top"),!0),i=_h(Th(t,"bottom")),a=FM(t,"x"),l=FM(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:o.concat(l).concat(i).concat(a),chartArea:Th(t,"chartArea"),vertical:s.concat(o).concat(l),horizontal:r.concat(i).concat(a)}}function LM(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function CU(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function PXe(e,t,n,s){const{pos:o,box:r}=n,i=e.maxPadding;if(!gn(o)){n.size&&(e[o]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[o]+=n.size}r.getPadding&&CU(i,r.getPadding());const a=Math.max(0,t.outerWidth-LM(i,e,"left","right")),l=Math.max(0,t.outerHeight-LM(i,e,"top","bottom")),u=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function FXe(e){const t=e.maxPadding;function n(s){const o=Math.max(t[s]-e[s],0);return e[s]+=o,o}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function LXe(e,t){const n=t.maxPadding;function s(o){const r={left:0,top:0,right:0,bottom:0};return o.forEach(i=>{r[i]=Math.max(t[i],n[i])}),r}return s(e?["left","right"]:["top","bottom"])}function Xh(e,t,n,s){const o=[];let r,i,a,l,u,c;for(r=0,i=e.length,u=0;r<i;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,LXe(a.horizontal,t));const{same:d,other:f}=PXe(t,n,a,s);u|=d&&o.length,c=c||f,l.fullSize||o.push(a)}return u&&Xh(o,t,n,s)||c}function X0(e,t,n,s,o){e.top=n,e.left=t,e.right=t+s,e.bottom=n+o,e.width=s,e.height=o}function BM(e,t,n,s){const o=n.padding;let{x:r,y:i}=t;for(const a of e){const l=a.box,u=s[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*c,f=u.size||l.height;Js(u.start)&&(i=u.start),l.fullSize?X0(l,o.left,i,n.outerWidth-o.right-o.left,f):X0(l,t.left+u.placed,i,d,f),u.start=i,u.placed+=d,i=l.bottom}else{const d=t.h*c,f=u.size||l.width;Js(u.start)&&(r=u.start),l.fullSize?X0(l,r,o.top,f,n.outerHeight-o.bottom-o.top):X0(l,r,t.top+u.placed,f,d),u.start=r,u.placed+=d,r=l.right}}t.x=r,t.y=i}Tn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Wo={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const o=ao(e.options.layout.padding),r=Math.max(t-o.width,0),i=Math.max(n-o.height,0),a=OXe(e.boxes),l=a.vertical,u=a.horizontal;Jn(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const c=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:o,availableWidth:r,availableHeight:i,vBoxMaxWidth:r/2/c,hBoxMaxHeight:i/2}),f=Object.assign({},o);CU(f,ao(s));const h=Object.assign({maxPadding:f,w:r,h:i,x:o.left,y:o.top},o),p=MXe(l.concat(u),d);Xh(a.fullSize,h,d,p),Xh(l,h,d,p),Xh(u,h,d,p)&&Xh(l,h,d,p),FXe(h),BM(a.leftAndTop,h,d,p),h.x+=h.w,h.y+=h.h,BM(a.rightAndBottom,h,d,p),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Jn(a.chartArea,m=>{const g=m.box;Object.assign(g,e.chartArea),g.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class $U{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,o){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,o?Math.floor(n/o):s)}}isAttached(t){return!0}updateConfig(t){}}class BXe extends $U{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Vv="$chartjs",zXe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zM=e=>e===null||e==="";function VXe(e,t){const n=e.style,s=e.getAttribute("height"),o=e.getAttribute("width");if(e[Vv]={initial:{height:s,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",zM(o)){const r=kM(e,"width");r!==void 0&&(e.width=r)}if(zM(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=kM(e,"height");r!==void 0&&(e.height=r)}return e}const SU=PYe?{passive:!0}:!1;function WXe(e,t,n){e.addEventListener(t,n,SU)}function HXe(e,t,n){e.canvas.removeEventListener(t,n,SU)}function UXe(e,t){const n=zXe[e.type]||e.type,{x:s,y:o}=pU(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:o!==void 0?o:null}}function Hb(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function jXe(e,t,n){const s=e.canvas,o=new MutationObserver(r=>{let i=!1;for(const a of r)i=i||Hb(a.addedNodes,s),i=i&&!Hb(a.removedNodes,s);i&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function GXe(e,t,n){const s=e.canvas,o=new MutationObserver(r=>{let i=!1;for(const a of r)i=i||Hb(a.removedNodes,s),i=i&&!Hb(a.addedNodes,s);i&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const rm=new Map;let VM=0;function IU(){const e=window.devicePixelRatio;e!==VM&&(VM=e,rm.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function KXe(e,t){rm.size||window.addEventListener("resize",IU),rm.set(e,t)}function qXe(e){rm.delete(e),rm.size||window.removeEventListener("resize",IU)}function YXe(e,t,n){const s=e.canvas,o=s&&ET(s);if(!o)return;const r=qH((a,l)=>{const u=o.clientWidth;n(a,l),u<o.clientWidth&&n()},window),i=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||r(u,c)});return i.observe(o),KXe(e,r),i}function mk(e,t,n){n&&n.disconnect(),t==="resize"&&qXe(e)}function XXe(e,t,n){const s=e.canvas,o=qH(r=>{e.ctx!==null&&n(UXe(r,e))},e,r=>{const i=r[0];return[i,i.offsetX,i.offsetY]});return WXe(s,t,o),o}class ZXe extends $U{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(VXe(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Vv])return!1;const s=n[Vv].initial;["height","width"].forEach(r=>{const i=s[r];Bn(i)?n.removeAttribute(r):n.setAttribute(r,i)});const o=s.style||{};return Object.keys(o).forEach(r=>{n.style[r]=o[r]}),n.width=n.width,delete n[Vv],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const o=t.$proxies||(t.$proxies={}),i={attach:jXe,detach:GXe,resize:YXe}[n]||XXe;o[n]=i(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),o=s[n];if(!o)return;({attach:mk,detach:mk,resize:mk}[n]||HXe)(t,n,o),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,o){return OYe(t,n,s,o)}isAttached(t){const n=ET(t);return!!(n&&n.isConnected)}}function JXe(e){return!hU()||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas?BXe:ZXe}class Fo{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Qp(this.x)&&Qp(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const o={};return t.forEach(r=>{o[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),o}}Fo.defaults={};Fo.defaultRoutes=void 0;const EU={values(e){return Gn(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let o,r=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(o="scientific"),r=QXe(e,n)}const i=Zr(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Zg(e,s,l)},logarithmic(e,t,n){if(e===0)return"0";const s=e/Math.pow(10,Math.floor(Zr(e)));return s===1||s===2||s===5?EU.numeric.call(this,e,t,n):""}};function QXe(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var ww={formatters:EU};Tn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ww.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});Tn.route("scale.ticks","color","","color");Tn.route("scale.grid","color","","borderColor");Tn.route("scale.grid","borderColor","","borderColor");Tn.route("scale.title","color","","color");Tn.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"});Tn.describe("scales",{_fallback:"scale"});Tn.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"});function eZe(e,t){const n=e.options.ticks,s=n.maxTicksLimit||tZe(e),o=n.major.enabled?sZe(t):[],r=o.length,i=o[0],a=o[r-1],l=[];if(r>s)return oZe(t,l,o,r/s),l;const u=nZe(o,t,s);if(r>0){let c,d;const f=r>1?Math.round((a-i)/(r-1)):null;for(Z0(t,l,u,Bn(f)?0:i-f,i),c=0,d=r-1;c<d;c++)Z0(t,l,u,o[c],o[c+1]);return Z0(t,l,u,a,Bn(f)?t.length:a+f),l}return Z0(t,l,u),l}function tZe(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),o=e._maxLength/n;return Math.floor(Math.min(s,o))}function nZe(e,t,n){const s=rZe(e),o=t.length/n;if(!s)return Math.max(o,1);const r=Nqe(s);for(let i=0,a=r.length-1;i<a;i++){const l=r[i];if(l>o)return l}return Math.max(o,1)}function sZe(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function oZe(e,t,n,s){let o=0,r=n[0],i;for(s=Math.ceil(s),i=0;i<e.length;i++)i===r&&(t.push(e[i]),o++,r=n[o*s])}function Z0(e,t,n,s,o){const r=nn(s,0),i=Math.min(nn(o,e.length),e.length);let a=0,l,u,c;for(n=Math.ceil(n),o&&(l=o-s,n=l/Math.floor(l/n)),c=r;c<0;)a++,c=Math.round(r+a*n);for(u=Math.max(r,0);u<i;u++)u===c&&(t.push(e[u]),a++,c=Math.round(r+a*n))}function rZe(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const iZe=e=>e==="left"?"right":e==="right"?"left":e,WM=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n;function HM(e,t){const n=[],s=e.length/t,o=e.length;let r=0;for(;r<o;r+=s)n.push(e[Math.floor(r)]);return n}function aZe(e,t,n){const s=e.ticks.length,o=Math.min(t,s-1),r=e._startPixel,i=e._endPixel,a=1e-6;let l=e.getPixelForTick(o),u;if(!(n&&(s===1?u=Math.max(l-r,i-l):t===0?u=(e.getPixelForTick(1)-l)/2:u=(l-e.getPixelForTick(o-1))/2,l+=o<t?u:-u,l<r-a||l>i+a)))return l}function lZe(e,t){Jn(e,n=>{const s=n.gc,o=s.length/2;let r;if(o>t){for(r=0;r<o;++r)delete n.data[s[r]];s.splice(0,o)}})}function Nh(e){return e.drawTicks?e.tickLength:0}function UM(e,t){if(!e.display)return 0;const n=Hs(e.font,t),s=ao(e.padding);return(Gn(e.text)?e.text.length:1)*n.lineHeight+s.height}function uZe(e,t){return bu(e,{scale:t,type:"scale"})}function cZe(e,t,n){return bu(e,{tick:n,index:t,type:"tick"})}function dZe(e,t,n){let s=mT(e);return(n&&t!=="right"||!n&&t==="right")&&(s=iZe(s)),s}function fZe(e,t,n,s){const{top:o,left:r,bottom:i,right:a,chart:l}=e,{chartArea:u,scales:c}=l;let d=0,f,h,p;const m=i-o,g=a-r;if(e.isHorizontal()){if(h=Bo(s,r,a),gn(n)){const v=Object.keys(n)[0],b=n[v];p=c[v].getPixelForValue(b)+m-t}else n==="center"?p=(u.bottom+u.top)/2+m-t:p=WM(e,n,t);f=a-r}else{if(gn(n)){const v=Object.keys(n)[0],b=n[v];h=c[v].getPixelForValue(b)-g+t}else n==="center"?h=(u.left+u.right)/2-g+t:h=WM(e,n,t);p=Bo(s,i,o),d=n==="left"?-Ps:Ps}return{titleX:h,titleY:p,maxWidth:f,rotation:d}}class sd extends Fo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:o}=this;return t=Ur(t,Number.POSITIVE_INFINITY),n=Ur(n,Number.NEGATIVE_INFINITY),s=Ur(s,Number.POSITIVE_INFINITY),o=Ur(o,Number.NEGATIVE_INFINITY),{min:Ur(t,s),max:Ur(n,o),minDefined:Ds(t),maxDefined:Ds(n)}}getMinMax(t){let{min:n,max:s,minDefined:o,maxDefined:r}=this.getUserBounds(),i;if(o&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)i=a[l].controller.getMinMax(this,t),o||(n=Math.min(n,i.min)),r||(s=Math.max(s,i.max));return n=r&&n>s?s:n,s=o&&n>s?n:s,{min:Ur(n,Ur(s,n)),max:Ur(s,Ur(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rs(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:o,grace:r,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=cYe(this,r,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?HM(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||i.source==="auto")&&(this.ticks=eZe(this,this.ticks),this._labelSizes=null),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rs(this.options.afterUpdate,[this])}beforeSetDimensions(){rs(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rs(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),rs(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rs(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,o,r;for(s=0,o=t.length;s<o;s++)r=t[s],r.label=rs(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){rs(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rs(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=this.ticks.length,o=n.minRotation||0,r=n.maxRotation;let i=o,a,l,u;if(!this._isVisible()||!n.display||o>=r||s<=1||!this.isHorizontal()){this.labelRotation=o;return}const c=this._getLabelSizes(),d=c.widest.width,f=c.highest.height,h=vo(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:h/(s-1),d+6>a&&(a=h/(s-(t.offset?.5:1)),l=this.maxHeight-Nh(t.grid)-n.padding-UM(t.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),i=vT(Math.min(Math.asin(vo((c.highest.height+6)/a,-1,1)),Math.asin(vo(l/u,-1,1))-Math.asin(vo(f/u,-1,1)))),i=Math.max(o,Math.min(r,i))),this.labelRotation=i}afterCalculateLabelRotation(){rs(this.options.afterCalculateLabelRotation,[this])}beforeFit(){rs(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:o,grid:r}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const l=UM(o,n.options.font);if(a?(t.width=this.maxWidth,t.height=Nh(r)+l):(t.height=this.maxHeight,t.width=Nh(r)+l),s.display&&this.ticks.length){const{first:u,last:c,widest:d,highest:f}=this._getLabelSizes(),h=s.padding*2,p=go(this.labelRotation),m=Math.cos(p),g=Math.sin(p);if(a){const v=s.mirror?0:g*d.width+m*f.height;t.height=Math.min(this.maxHeight,t.height+v+h)}else{const v=s.mirror?0:m*d.width+g*f.height;t.width=Math.min(this.maxWidth,t.width+v+h)}this._calculatePadding(u,c,g,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,o){const{ticks:{align:r,padding:i},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?u?(f=o*t.width,h=s*n.height):(f=s*t.height,h=o*n.width):r==="start"?h=n.width:r==="end"?f=t.width:(f=t.width/2,h=n.width/2),this.paddingLeft=Math.max((f-c+i)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-d+i)*this.width/(this.width-d),0)}else{let c=n.height/2,d=t.height/2;r==="start"?(c=0,d=t.height):r==="end"&&(c=n.height,d=0),this.paddingTop=c+i,this.paddingBottom=d+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rs(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)Bn(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=HM(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length)}return t}_computeLabelSizes(t,n){const{ctx:s,_longestTextCache:o}=this,r=[],i=[];let a=0,l=0,u,c,d,f,h,p,m,g,v,b,w;for(u=0;u<n;++u){if(f=t[u].label,h=this._resolveTickFontOptions(u),s.font=p=h.string,m=o[p]=o[p]||{data:{},gc:[]},g=h.lineHeight,v=b=0,!Bn(f)&&!Gn(f))v=Vb(s,m.data,m.gc,v,f),b=g;else if(Gn(f))for(c=0,d=f.length;c<d;++c)w=f[c],!Bn(w)&&!Gn(w)&&(v=Vb(s,m.data,m.gc,v,w),b+=g);r.push(v),i.push(b),a=Math.max(v,a),l=Math.max(b,l)}lZe(o,n);const y=r.indexOf(a),k=i.indexOf(l),x=C=>({width:r[C]||0,height:i[C]||0});return{first:x(0),last:x(n-1),widest:x(y),highest:x(k),widths:r,heights:i}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return Rqe(this._alignToPixels?Ru(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=cZe(this.getContext(),t,s))}return this.$context||(this.$context=uZe(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=go(this.labelRotation),s=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),r=this._getLabelSizes(),i=t.autoSkipPadding||0,a=r?r.widest.width+i:0,l=r?r.highest.height+i:0;return this.isHorizontal()?l*s>a*o?a/s:l/o:l*o<a*s?l/s:a/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,o=this.options,{grid:r,position:i}=o,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),d=Nh(r),f=[],h=r.setContext(this.getContext()),p=h.drawBorder?h.borderWidth:0,m=p/2,g=function(H){return Ru(s,H,p)};let v,b,w,y,k,x,C,S,T,A,R,L;if(i==="top")v=g(this.bottom),x=this.bottom-d,S=v-m,A=g(t.top)+m,L=t.bottom;else if(i==="bottom")v=g(this.top),A=t.top,L=g(t.bottom)-m,x=v+m,S=this.top+d;else if(i==="left")v=g(this.right),k=this.right-d,C=v-m,T=g(t.left)+m,R=t.right;else if(i==="right")v=g(this.left),T=t.left,R=g(t.right)-m,k=v+m,C=this.left+d;else if(n==="x"){if(i==="center")v=g((t.top+t.bottom)/2+.5);else if(gn(i)){const H=Object.keys(i)[0],F=i[H];v=g(this.chart.scales[H].getPixelForValue(F))}A=t.top,L=t.bottom,x=v+m,S=x+d}else if(n==="y"){if(i==="center")v=g((t.left+t.right)/2);else if(gn(i)){const H=Object.keys(i)[0],F=i[H];v=g(this.chart.scales[H].getPixelForValue(F))}k=v-m,C=k-d,T=t.left,R=t.right}const P=nn(o.ticks.maxTicksLimit,c),V=Math.max(1,Math.ceil(c/P));for(b=0;b<c;b+=V){const H=r.setContext(this.getContext(b)),F=H.lineWidth,M=H.color,B=r.borderDash||[],Y=H.borderDashOffset,J=H.tickWidth,ee=H.tickColor,te=H.tickBorderDash||[],re=H.tickBorderDashOffset;w=aZe(this,b,a),w!==void 0&&(y=Ru(s,w,F),l?k=C=T=R=y:x=S=A=L=y,f.push({tx1:k,ty1:x,tx2:C,ty2:S,x1:T,y1:A,x2:R,y2:L,width:F,color:M,borderDash:B,borderDashOffset:Y,tickWidth:J,tickColor:ee,tickBorderDash:te,tickBorderDashOffset:re}))}return this._ticksLength=c,this._borderValue=v,f}_computeLabelItems(t){const n=this.axis,s=this.options,{position:o,ticks:r}=s,i=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:d}=r,f=Nh(s.grid),h=f+c,p=d?-c:h,m=-go(this.labelRotation),g=[];let v,b,w,y,k,x,C,S,T,A,R,L,P="middle";if(o==="top")x=this.bottom-p,C=this._getXAxisLabelAlignment();else if(o==="bottom")x=this.top+p,C=this._getXAxisLabelAlignment();else if(o==="left"){const H=this._getYAxisLabelAlignment(f);C=H.textAlign,k=H.x}else if(o==="right"){const H=this._getYAxisLabelAlignment(f);C=H.textAlign,k=H.x}else if(n==="x"){if(o==="center")x=(t.top+t.bottom)/2+h;else if(gn(o)){const H=Object.keys(o)[0],F=o[H];x=this.chart.scales[H].getPixelForValue(F)+h}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")k=(t.left+t.right)/2-h;else if(gn(o)){const H=Object.keys(o)[0],F=o[H];k=this.chart.scales[H].getPixelForValue(F)}C=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const V=this._getLabelSizes();for(v=0,b=a.length;v<b;++v){w=a[v],y=w.label;const H=r.setContext(this.getContext(v));S=this.getPixelForTick(v)+r.labelOffset,T=this._resolveTickFontOptions(v),A=T.lineHeight,R=Gn(y)?y.length:1;const F=R/2,M=H.color,B=H.textStrokeColor,Y=H.textStrokeWidth;i?(k=S,o==="top"?u==="near"||m!==0?L=-R*A+A/2:u==="center"?L=-V.highest.height/2-F*A+A:L=-V.highest.height+A/2:u==="near"||m!==0?L=A/2:u==="center"?L=V.highest.height/2-F*A:L=V.highest.height-R*A,d&&(L*=-1)):(x=S,L=(1-R)*A/2);let J;if(H.showLabelBackdrop){const ee=ao(H.backdropPadding),te=V.heights[v],re=V.widths[v];let $e=x+L-ee.top,se=k-ee.left;switch(P){case"middle":$e-=te/2;break;case"bottom":$e-=te;break}switch(C){case"center":se-=re/2;break;case"right":se-=re;break}J={left:se,top:$e,width:re+ee.width,height:te+ee.height,color:H.backdropColor}}g.push({rotation:m,label:y,font:T,color:M,strokeColor:B,strokeWidth:Y,textOffset:L,textAlign:C,textBaseline:P,translation:[k,x],backdrop:J})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-go(this.labelRotation))return t==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"&&(o="right"),o}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:o,padding:r}}=this.options,i=this._getLabelSizes(),a=t+r,l=i.widest.width;let u,c;return n==="left"?o?(c=this.right+r,s==="near"?u="left":s==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,s==="near"?u="right":s==="center"?(u="center",c-=l/2):(u="left",c=this.left)):n==="right"?o?(c=this.left+r,s==="near"?u="right":s==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,s==="near"?u="left":s==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:o,width:r,height:i}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,o,r,i),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(r=>r.value===t);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,i;const a=(l,u,c)=>{!c.width||!c.color||(s.save(),s.lineWidth=c.width,s.strokeStyle=c.color,s.setLineDash(c.borderDash||[]),s.lineDashOffset=c.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(r=0,i=o.length;r<i;++r){const l=o[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{grid:s}}=this,o=s.setContext(this.getContext()),r=s.drawBorder?o.borderWidth:0;if(!r)return;const i=s.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,u,c,d;this.isHorizontal()?(l=Ru(t,this.left,r)-r/2,u=Ru(t,this.right,i)+i/2,c=d=a):(c=Ru(t,this.top,r)-r/2,d=Ru(t,this.bottom,i)+i/2,l=u=a),n.save(),n.lineWidth=o.borderWidth,n.strokeStyle=o.borderColor,n.beginPath(),n.moveTo(l,c),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,o=this._computeLabelArea();o&&Yg(s,o);const r=this._labelItems||(this._labelItems=this._computeLabelItems(t));let i,a;for(i=0,a=r.length;i<a;++i){const l=r[i],u=l.font,c=l.label;l.backdrop&&(s.fillStyle=l.backdrop.color,s.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let d=l.textOffset;Bc(s,c,0,d,u,l)}o&&Xg(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:o}}=this;if(!s.display)return;const r=Hs(s.font),i=ao(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||gn(n)?(l+=i.bottom,Gn(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=i.top;const{titleX:u,titleY:c,maxWidth:d,rotation:f}=fZe(this,l,n,a);Bc(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:dZe(a,n,o),textBaseline:"middle",translation:[u,c]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=nn(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==sd.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s+1,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",o=[];let r,i;for(r=0,i=n.length;r<i;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&o.push(a)}return o}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Hs(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class J0{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;mZe(n)&&(s=this.register(n));const o=this.items,r=t.id,i=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in o||(o[r]=t,hZe(t,i,s),this.override&&Tn.override(t.id,t.overrides)),i}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,o=this.scope;s in n&&delete n[s],o&&s in Tn[o]&&(delete Tn[o][s],this.override&&delete Fc[s])}}function hZe(e,t,n){const s=Jp(Object.create(null),[n?Tn.get(n):{},Tn.get(t),e.defaults]);Tn.set(t,s),e.defaultRoutes&&pZe(t,e.defaultRoutes),e.descriptors&&Tn.describe(t,e.descriptors)}function pZe(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),o=s.pop(),r=[e].concat(s).join("."),i=t[n].split("."),a=i.pop(),l=i.join(".");Tn.route(r,o,l,a)})}function mZe(e){return"id"in e&&"defaults"in e}class gZe{constructor(){this.controllers=new J0(Ia,"datasets",!0),this.elements=new J0(Fo,"elements"),this.plugins=new J0(Object,"plugins"),this.scales=new J0(sd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(o=>{const r=s||this._getRegistryForType(o);s||r.isForType(o)||r===this.plugins&&o.id?this._exec(t,r,o):Jn(o,i=>{const a=s||this._getRegistryForType(i);this._exec(t,a,i)})})}_exec(t,n,s){const o=gT(t);rs(s["before"+o],[],s),n[t](s),rs(s["after"+o],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const o=n.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return o}}var Ha=new gZe;class vZe{constructor(){this._init=[]}notify(t,n,s,o){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=o?this._descriptors(t).filter(o):this._descriptors(t),i=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),i}_notify(t,n,s,o){o=o||{};for(const r of t){const i=r.plugin,a=i[s],l=[n,o,r.options];if(rs(a,l,i)===!1&&o.cancelable)return!1}return!0}invalidate(){Bn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,o=nn(s.options&&s.options.plugins,{}),r=bZe(s);return o===!1&&!n?[]:wZe(t,r,o,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,o=(r,i)=>r.filter(a=>!i.some(l=>a.plugin.id===l.plugin.id));this._notify(o(n,s),t,"stop"),this._notify(o(s,n),t,"start")}}function bZe(e){const t=[],n=Object.keys(Ha.plugins.items);for(let o=0;o<n.length;o++)t.push(Ha.getPlugin(n[o]));const s=e.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];t.indexOf(r)===-1&&t.push(r)}return t}function yZe(e,t){return!t&&e===!1?null:e===!0?{}:e}function wZe(e,t,n,s){const o=[],r=e.getContext();for(let i=0;i<t.length;i++){const a=t[i],l=a.id,u=yZe(n[l],s);u!==null&&o.push({plugin:a,options:kZe(e.config,a,u,r)})}return o}function kZe(e,t,n,s){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function EC(e,t){const n=Tn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function xZe(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function CZe(e,t){return e===t?"_index_":"_value_"}function $Ze(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function TC(e,t){return e==="x"||e==="y"?e:t.axis||$Ze(t.position)||e.charAt(0).toLowerCase()}function SZe(e,t){const n=Fc[e.type]||{scales:{}},s=t.scales||{},o=EC(e.type,t),r=Object.create(null),i=Object.create(null);return Object.keys(s).forEach(a=>{const l=s[a];if(!gn(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=TC(a,l),c=CZe(u,o),d=n.scales||{};r[u]=r[u]||a,i[a]=fp(Object.create(null),[{axis:u},l,d[u],d[c]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,u=a.indexAxis||EC(l,t),d=(Fc[l]||{}).scales||{};Object.keys(d).forEach(f=>{const h=xZe(f,u),p=a[h+"AxisID"]||r[h]||h;i[p]=i[p]||Object.create(null),fp(i[p],[{axis:h},s[p],d[f]])})}),Object.keys(i).forEach(a=>{const l=i[a];fp(l,[Tn.scales[l.type],Tn.scale])}),i}function TU(e){const t=e.options||(e.options={});t.plugins=nn(t.plugins,{}),t.scales=SZe(e,t)}function _U(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function IZe(e){return e=e||{},e.data=_U(e.data),TU(e),e}const jM=new Map,NU=new Set;function Q0(e,t){let n=jM.get(e);return n||(n=t(),jM.set(e,n),NU.add(n)),n}const Ah=(e,t,n)=>{const s=Pc(t,n);s!==void 0&&e.add(s)};class EZe{constructor(t){this._config=IZe(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=_U(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),TU(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Q0(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Q0(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Q0(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Q0(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let o=s.get(t);return(!o||n)&&(o=new Map,s.set(t,o)),o}getOptionScopes(t,n,s){const{options:o,type:r}=this,i=this._cachedScopes(t,s),a=i.get(n);if(a)return a;const l=new Set;n.forEach(c=>{t&&(l.add(t),c.forEach(d=>Ah(l,t,d))),c.forEach(d=>Ah(l,o,d)),c.forEach(d=>Ah(l,Fc[r]||{},d)),c.forEach(d=>Ah(l,Tn,d)),c.forEach(d=>Ah(l,SC,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),NU.has(n)&&i.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Fc[n]||{},Tn.datasets[n]||{},{type:n},Tn,SC]}resolveNamedOptions(t,n,s,o=[""]){const r={$shared:!0},{resolver:i,subPrefixes:a}=GM(this._resolverCache,t,o);let l=i;if(_Ze(i,n)){r.$shared=!1,s=nu(s)?s():s;const u=this.createResolver(t,s,a);l=Af(i,s,u)}for(const u of n)r[u]=l[u];return r}createResolver(t,n,s=[""],o){const{resolver:r}=GM(this._resolverCache,t,s);return gn(n)?Af(r,n,void 0,o):r}}function GM(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const o=n.join();let r=s.get(o);return r||(r={resolver:$T(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(o,r)),r}const TZe=e=>gn(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||nu(e[n]),!1);function _Ze(e,t){const{isScriptable:n,isIndexable:s}=lU(e);for(const o of t){const r=n(o),i=s(o),a=(i||r)&&e[o];if(r&&(nu(a)||TZe(a))||i&&Gn(a))return!0}return!1}var NZe="3.7.1";const AZe=["top","bottom","left","right","chartArea"];function KM(e,t){return e==="top"||e==="bottom"||AZe.indexOf(e)===-1&&t==="x"}function qM(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function YM(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),rs(n&&n.onComplete,[e],t)}function DZe(e){const t=e.chart,n=t.options.animation;rs(n&&n.onProgress,[e],t)}function AU(e){return hU()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ub={},DU=e=>{const t=AU(e);return Object.values(Ub).filter(n=>n.canvas===t).pop()};function RZe(e,t,n){const s=Object.keys(e);for(const o of s){const r=+o;if(r>=t){const i=e[o];delete e[o],(n>0||r>t)&&(e[r+n]=i)}}}function MZe(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}class Ua{constructor(t,n){const s=this.config=new EZe(n),o=AU(t),r=DU(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const i=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||JXe(o)),this.platform.updateConfig(s);const a=this.platform.acquireContext(o,i.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=xqe(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vZe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wqe(d=>this.update(d),i.resizeDelay||0),this._dataChanges=[],Ub[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ra.listen(this,"complete",YM),Ra.listen(this,"progress",DZe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:o,_aspectRatio:r}=this;return Bn(t)?n&&r?r:o?s/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wM(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gM(this.canvas,this.ctx),this}stop(){return Ra.stop(this),this}resize(t,n){Ra.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,o=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(o,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,wM(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),rs(s.onResize,[this,i],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Jn(n,(s,o)=>{s.id=o})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,o=Object.keys(s).reduce((i,a)=>(i[a]=!1,i),{});let r=[];n&&(r=r.concat(Object.keys(n).map(i=>{const a=n[i],l=TC(i,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),Jn(r,i=>{const a=i.options,l=a.id,u=TC(l,a),c=nn(a.type,i.dtype);(a.position===void 0||KM(a.position,u)!==KM(i.dposition))&&(a.position=i.dposition),o[l]=!0;let d=null;if(l in s&&s[l].type===c)d=s[l];else{const f=Ha.getScale(c);d=new f({id:l,type:c,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),Jn(o,(i,a)=>{i||delete s[a]}),Jn(s,i=>{Wo.configure(this,i,i.options),Wo.addBox(this,i)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((o,r)=>o.index-r.index),s>n){for(let o=n;o<s;++o)this._destroyDatasetMeta(o);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(qM("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,o)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,o;for(this._removeUnreferencedMetasets(),s=0,o=n.length;s<o;s++){const r=n[s];let i=this.getDatasetMeta(s);const a=r.type||this.config.type;if(i.type&&i.type!==a&&(this._destroyDatasetMeta(s),i=this.getDatasetMeta(s)),i.type=a,i.indexAxis=r.indexAxis||EC(a,this.options),i.order=r.order||0,i.index=s,i.label=""+r.label,i.visible=this.isDatasetVisible(s),i.controller)i.controller.updateIndex(s),i.controller.linkScales();else{const l=Ha.getController(a),{datasetElementType:u,dataElementType:c}=Tn.datasets[a];Object.assign(l.prototype,{dataElementType:Ha.getElement(c),datasetElementType:u&&Ha.getElement(u)}),i.controller=new l(this,s),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){Jn(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:d}=this.getDatasetMeta(u),f=!o&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),i=Math.max(+d.getMaxOverflow(),i)}i=this._minPadding=s.layout.autoPadding?i:0,this._updateLayout(i),o||Jn(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(qM("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Jn(this.scales,t=>{Wo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!rM(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:o,count:r}of n){const i=s==="_removeElements"?-r:r;RZe(t,o,i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(i=>i[0]===r).map((i,a)=>a+","+i.splice(1).join(","))),o=s(0);for(let r=1;r<n;r++)if(!rM(o,s(r)))return;return Array.from(o).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Wo.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Jn(this.boxes,o=>{s&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,r)=>{o._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,nu(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),o={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(s.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ra.has(this)?this.attached&&!Ra.running(this)&&Ra.start(this):(this.draw(),YM({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:o}=this._resizeBeforeDraw;this._resize(s,o),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let o,r;for(o=0,r=n.length;o<r;++o){const i=n[o];(!t||i.visible)&&s.push(i)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s=t._clip,o=!s.disabled,r=this.chartArea,i={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&Yg(n,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),o&&Xg(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}getElementsAtEventForMode(t,n,s,o){const r=AXe.modes[n];return typeof r=="function"?r(this,t,s,o):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let o=s.filter(r=>r&&r._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(o)),o}getContext(){return this.$context||(this.$context=bu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const o=s?"show":"hide",r=this.getDatasetMeta(t),i=r.controller._resolveAnimations(void 0,o);Js(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),i.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?o:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Ra.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),gM(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Ub[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,i)=>{n.addEventListener(this,r,i),t[r]=i},o=(r,i,a)=>{r.offsetX=i,r.offsetY=a,this._eventHandler(r)};Jn(this.options.events,r=>s(r,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),t[l]=u},o=(l,u)=>{t[l]&&(n.removeEventListener(this,l,u),delete t[l])},r=(l,u)=>{this.canvas&&this.resize(l,u)};let i;const a=()=>{o("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",i)};i=()=>{this.attached=!1,o("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():i()}unbindEvents(){Jn(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Jn(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const o=s?"set":"remove";let r,i,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+o+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){i=t[a];const u=i&&this.getDatasetMeta(i.datasetIndex).controller;u&&u[o+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:i})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[i],index:i}});!Fb(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}_updateHoverStyles(t,n,s){const o=this.options.hover,r=(l,u)=>l.filter(c=>!u.some(d=>c.datasetIndex===d.datasetIndex&&c.index===d.index)),i=r(n,t),a=s?t:r(t,n);i.length&&this.updateHoverStyle(i,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:Lc(t,this.chartArea,this._minPadding)},o=i=>(i.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,o)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,o),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:o=[],options:r}=this,i=n,a=this._getActiveElements(t,o,s,i),l=Tqe(t),u=MZe(t,this._lastEvent,s,l);s&&(this._lastEvent=null,rs(r.onHover,[t,a,this],this),l&&rs(r.onClick,[t,a,this],this));const c=!Fb(a,o);return(c||n)&&(this._active=a,this._updateHoverStyles(a,o,n)),this._lastEvent=u,c}_getActiveElements(t,n,s,o){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,o)}}const XM=()=>Jn(Ua.instances,e=>e._plugins.invalidate()),xl=!0;Object.defineProperties(Ua,{defaults:{enumerable:xl,value:Tn},instances:{enumerable:xl,value:Ub},overrides:{enumerable:xl,value:Fc},registry:{enumerable:xl,value:Ha},version:{enumerable:xl,value:NZe},getChart:{enumerable:xl,value:DU},register:{enumerable:xl,value:(...e)=>{Ha.add(...e),XM()}},unregister:{enumerable:xl,value:(...e)=>{Ha.remove(...e),XM()}}});function RU(e,t,n){const{startAngle:s,pixelMargin:o,x:r,y:i,outerRadius:a,innerRadius:l}=t;let u=o/a;e.beginPath(),e.arc(r,i,a,s-u,n+u),l>o?(u=o/l,e.arc(r,i,l,n+u,s-u,!0)):e.arc(r,i,o,n+Ps,s-Ps),e.closePath(),e.clip()}function OZe(e){return xT(e,["outerStart","outerEnd","innerStart","innerEnd"])}function PZe(e,t,n,s){const o=OZe(e.options.borderRadius),r=(n-t)/2,i=Math.min(r,s*t/2),a=l=>{const u=(n-Math.min(r,l))*s/2;return vo(l,0,Math.min(r,u))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:vo(o.innerStart,0,i),innerEnd:vo(o.innerEnd,0,i)}}function Id(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function _C(e,t,n,s,o){const{x:r,y:i,startAngle:a,pixelMargin:l,innerRadius:u}=t,c=Math.max(t.outerRadius+s+n-l,0),d=u>0?u+s+n+l:0;let f=0;const h=o-a;if(s){const F=u>0?u-s:0,M=c>0?c-s:0,B=(F+M)/2,Y=B!==0?h*B/(B+s):h;f=(h-Y)/2}const p=Math.max(.001,h*c-n/Hn)/c,m=(h-p)/2,g=a+m+f,v=o-m-f,{outerStart:b,outerEnd:w,innerStart:y,innerEnd:k}=PZe(t,d,c,v-g),x=c-b,C=c-w,S=g+b/x,T=v-w/C,A=d+y,R=d+k,L=g+y/A,P=v-k/R;if(e.beginPath(),e.arc(r,i,c,S,T),w>0){const F=Id(C,T,r,i);e.arc(F.x,F.y,w,T,v+Ps)}const V=Id(R,v,r,i);if(e.lineTo(V.x,V.y),k>0){const F=Id(R,P,r,i);e.arc(F.x,F.y,k,v+Ps,P+Math.PI)}if(e.arc(r,i,d,v-k/d,g+y/d,!0),y>0){const F=Id(A,L,r,i);e.arc(F.x,F.y,y,L+Math.PI,g-Ps)}const H=Id(x,g,r,i);if(e.lineTo(H.x,H.y),b>0){const F=Id(x,S,r,i);e.arc(F.x,F.y,b,g-Ps,S)}e.closePath()}function FZe(e,t,n,s){const{fullCircles:o,startAngle:r,circumference:i}=t;let a=t.endAngle;if(o){_C(e,t,n,s,r+us);for(let l=0;l<o;++l)e.fill();isNaN(i)||(a=r+i%us,i%us===0&&(a+=us))}return _C(e,t,n,s,a),e.fill(),a}function LZe(e,t,n){const{x:s,y:o,startAngle:r,pixelMargin:i,fullCircles:a}=t,l=Math.max(t.outerRadius-i,0),u=t.innerRadius+i;let c;for(n&&RU(e,t,r+us),e.beginPath(),e.arc(s,o,u,r+us,r,!0),c=0;c<a;++c)e.stroke();for(e.beginPath(),e.arc(s,o,l,r,r+us),c=0;c<a;++c)e.stroke()}function BZe(e,t,n,s,o){const{options:r}=t,{borderWidth:i,borderJoinStyle:a}=r,l=r.borderAlign==="inner";!i||(l?(e.lineWidth=i*2,e.lineJoin=a||"round"):(e.lineWidth=i,e.lineJoin=a||"bevel"),t.fullCircles&&LZe(e,t,l),l&&RU(e,t,o),_C(e,t,n,s,o),e.stroke())}class kw extends Fo{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const o=this.getProps(["x","y"],s),{angle:r,distance:i}=QH(o,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=this.options.spacing/2,p=nn(d,l-a)>=us||tm(r,a,l),m=Va(i,u+f,c+f);return p&&m}getCenterPoint(t){const{x:n,y:s,startAngle:o,endAngle:r,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:l,spacing:u}=this.options,c=(o+r)/2,d=(i+a+u+l)/2;return{x:n+Math.cos(c)*d,y:s+Math.sin(c)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,o=(n.offset||0)/2,r=(n.spacing||0)/2;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>us?Math.floor(s/us):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let i=0;if(o){i=o/2;const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*i,Math.sin(l)*i),this.circumference>=Hn&&(i=o)}t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor;const a=FZe(t,this,i,r);BZe(t,this,i,r,a),t.restore()}}kw.id="arc";kw.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};kw.defaultRoutes={backgroundColor:"backgroundColor"};function MU(e,t,n=t){e.lineCap=nn(n.borderCapStyle,t.borderCapStyle),e.setLineDash(nn(n.borderDash,t.borderDash)),e.lineDashOffset=nn(n.borderDashOffset,t.borderDashOffset),e.lineJoin=nn(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=nn(n.borderWidth,t.borderWidth),e.strokeStyle=nn(n.borderColor,t.borderColor)}function zZe(e,t,n){e.lineTo(n.x,n.y)}function VZe(e){return e.stepped?nYe:e.tension||e.cubicInterpolationMode==="monotone"?sYe:zZe}function OU(e,t,n={}){const s=e.length,{start:o=0,end:r=s-1}=n,{start:i,end:a}=t,l=Math.max(o,i),u=Math.min(r,a),c=o<i&&r<i||o>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:u<l&&!c?s+u-l:u-l}}function WZe(e,t,n,s){const{points:o,options:r}=t,{count:i,start:a,loop:l,ilen:u}=OU(o,n,s),c=VZe(r);let{move:d=!0,reverse:f}=s||{},h,p,m;for(h=0;h<=u;++h)p=o[(a+(f?u-h:h))%i],!p.skip&&(d?(e.moveTo(p.x,p.y),d=!1):c(e,m,p,f,r.stepped),m=p);return l&&(p=o[(a+(f?u:0))%i],c(e,m,p,f,r.stepped)),!!l}function HZe(e,t,n,s){const o=t.points,{count:r,start:i,ilen:a}=OU(o,n,s),{move:l=!0,reverse:u}=s||{};let c=0,d=0,f,h,p,m,g,v;const b=y=>(i+(u?a-y:y))%r,w=()=>{m!==g&&(e.lineTo(c,g),e.lineTo(c,m),e.lineTo(c,v))};for(l&&(h=o[b(0)],e.moveTo(h.x,h.y)),f=0;f<=a;++f){if(h=o[b(f)],h.skip)continue;const y=h.x,k=h.y,x=y|0;x===p?(k<m?m=k:k>g&&(g=k),c=(d*c+y)/++d):(w(),e.lineTo(y,k),p=x,d=0,m=g=k),v=k}w()}function NC(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?HZe:WZe}function UZe(e){return e.stepped?FYe:e.tension||e.cubicInterpolationMode==="monotone"?LYe:Vu}function jZe(e,t,n,s){let o=t._path;o||(o=t._path=new Path2D,t.path(o,n,s)&&o.closePath()),MU(e,t.options),e.stroke(o)}function GZe(e,t,n,s){const{segments:o,options:r}=t,i=NC(t);for(const a of o)MU(e,r,a.style),e.beginPath(),i(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const KZe=typeof Path2D=="function";function qZe(e,t,n,s){KZe&&!t.options.segment?jZe(e,t,n,s):GZe(e,t,n,s)}class yu extends Fo{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const o=s.spanGaps?this._loop:this._fullLoop;_Ye(this._points,s,t,o,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=jYe(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,o=t[n],r=this.points,i=yU(this,{property:n,start:o,end:o});if(!i.length)return;const a=[],l=UZe(s);let u,c;for(u=0,c=i.length;u<c;++u){const{start:d,end:f}=i[u],h=r[d],p=r[f];if(h===p){a.push(h);continue}const m=Math.abs((o-h[n])/(p[n]-h[n])),g=l(h,p,m,s.stepped);g[n]=t[n],a.push(g)}return a.length===1?a[0]:a}pathSegment(t,n,s){return NC(this)(t,this,n,s)}path(t,n,s){const o=this.segments,r=NC(this);let i=this._loop;n=n||0,s=s||this.points.length-n;for(const a of o)i&=r(t,this,a,{start:n,end:n+s-1});return!!i}draw(t,n,s,o){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),qZe(t,this,s,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}yu.id="line";yu.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};yu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};yu.descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};function ZM(e,t,n,s){const o=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<o.radius+o.hitRadius}class xw extends Fo{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const o=this.options,{x:r,y:i}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(n-i,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,n){return ZM(this,t,"x",n)}inYRange(t,n){return ZM(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!Lc(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,sm(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}xw.id="point";xw.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};xw.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function PU(e,t){const{x:n,y:s,base:o,width:r,height:i}=e.getProps(["x","y","base","width","height"],t);let a,l,u,c,d;return e.horizontal?(d=i/2,a=Math.min(n,o),l=Math.max(n,o),u=s-d,c=s+d):(d=r/2,a=n-d,l=n+d,u=Math.min(s,o),c=Math.max(s,o)),{left:a,top:u,right:l,bottom:c}}function Ll(e,t,n,s){return e?0:vo(t,n,s)}function YZe(e,t,n){const s=e.options.borderWidth,o=e.borderSkipped,r=rU(s);return{t:Ll(o.top,r.top,0,n),r:Ll(o.right,r.right,0,t),b:Ll(o.bottom,r.bottom,0,n),l:Ll(o.left,r.left,0,t)}}function XZe(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,r=pc(o),i=Math.min(t,n),a=e.borderSkipped,l=s||gn(o);return{topLeft:Ll(!l||a.top||a.left,r.topLeft,0,i),topRight:Ll(!l||a.top||a.right,r.topRight,0,i),bottomLeft:Ll(!l||a.bottom||a.left,r.bottomLeft,0,i),bottomRight:Ll(!l||a.bottom||a.right,r.bottomRight,0,i)}}function ZZe(e){const t=PU(e),n=t.right-t.left,s=t.bottom-t.top,o=YZe(e,n/2,s/2),r=XZe(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:r},inner:{x:t.left+o.l,y:t.top+o.t,w:n-o.l-o.r,h:s-o.t-o.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,r.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(o.b,o.r))}}}}function gk(e,t,n,s){const o=t===null,r=n===null,a=e&&!(o&&r)&&PU(e,s);return a&&(o||Va(t,a.left,a.right))&&(r||Va(n,a.top,a.bottom))}function JZe(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function QZe(e,t){e.rect(t.x,t.y,t.w,t.h)}function vk(e,t,n={}){const s=e.x!==n.x?-t:0,o=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-s,i=(e.y+e.h!==n.y+n.h?t:0)-o;return{x:e.x+s,y:e.y+o,w:e.w+r,h:e.h+i,radius:e.radius}}class Cw extends Fo{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:o}}=this,{inner:r,outer:i}=ZZe(this),a=JZe(i.radius)?om:QZe;t.save(),(i.w!==r.w||i.h!==r.h)&&(t.beginPath(),a(t,vk(i,n,r)),t.clip(),a(t,vk(r,-n,i)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,vk(r,n)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,n,s){return gk(this,t,n,s)}inXRange(t,n){return gk(this,t,null,n)}inYRange(t,n){return gk(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:o,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+o)/2:n,y:r?s:(s+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Cw.id="bar";Cw.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Cw.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var eJe=Object.freeze({__proto__:null,ArcElement:kw,LineElement:yu,PointElement:xw,BarElement:Cw});function tJe(e,t,n,s,o){const r=o.samples||s;if(r>=n)return e.slice(t,t+n);const i=[],a=(n-2)/(r-2);let l=0;const u=t+n-1;let c=t,d,f,h,p,m;for(i[l++]=e[c],d=0;d<r-2;d++){let g=0,v=0,b;const w=Math.floor((d+1)*a)+1+t,y=Math.min(Math.floor((d+2)*a)+1,n)+t,k=y-w;for(b=w;b<y;b++)g+=e[b].x,v+=e[b].y;g/=k,v/=k;const x=Math.floor(d*a)+1+t,C=Math.min(Math.floor((d+1)*a)+1,n)+t,{x:S,y:T}=e[c];for(h=p=-1,b=x;b<C;b++)p=.5*Math.abs((S-g)*(e[b].y-T)-(S-e[b].x)*(v-T)),p>h&&(h=p,f=e[b],m=b);i[l++]=f,c=m}return i[l++]=e[u],i}function nJe(e,t,n,s){let o=0,r=0,i,a,l,u,c,d,f,h,p,m;const g=[],v=t+n-1,b=e[t].x,y=e[v].x-b;for(i=t;i<t+n;++i){a=e[i],l=(a.x-b)/y*s,u=a.y;const k=l|0;if(k===c)u<p?(p=u,d=i):u>m&&(m=u,f=i),o=(r*o+a.x)/++r;else{const x=i-1;if(!Bn(d)&&!Bn(f)){const C=Math.min(d,f),S=Math.max(d,f);C!==h&&C!==x&&g.push(nt(Me({},e[C]),{x:o})),S!==h&&S!==x&&g.push(nt(Me({},e[S]),{x:o}))}i>0&&x!==h&&g.push(e[x]),g.push(a),c=k,r=0,p=m=u,d=f=h=i}}return g}function FU(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function JM(e){e.data.datasets.forEach(t=>{FU(t)})}function sJe(e,t){const n=t.length;let s=0,o;const{iScale:r}=e,{min:i,max:a,minDefined:l,maxDefined:u}=r.getUserBounds();return l&&(s=vo(Wa(t,r.axis,i).lo,0,n-1)),u?o=vo(Wa(t,r.axis,a).hi+1,s,n)-s:o=n-s,{start:s,count:o}}var oJe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){JM(e);return}const s=e.width;e.data.datasets.forEach((o,r)=>{const{_data:i,indexAxis:a}=o,l=e.getDatasetMeta(r),u=i||o.data;if(qh([a,e.options.indexAxis])==="y"||l.type!=="line")return;const c=e.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||e.options.parsing)return;let{start:d,count:f}=sJe(l,u);const h=n.threshold||4*s;if(f<=h){FU(o);return}Bn(i)&&(o._data=u,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(n.algorithm){case"lttb":p=tJe(u,d,f,s,n);break;case"min-max":p=nJe(u,d,f,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}o._decimated=p})},destroy(e){JM(e)}};function rJe(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function iJe(e){const t=e.options,n=t.fill;let s=nn(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function aJe(e,t,n){const s=iJe(e);if(gn(s))return isNaN(s.value)?!1:s;let o=parseFloat(s);return Ds(o)&&Math.floor(o)===o?((s[0]==="-"||s[0]==="+")&&(o=t+o),o===t||o<0||o>=n?!1:o):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function lJe(e){const{scale:t={},fill:n}=e;let s=null,o;return n==="start"?s=t.bottom:n==="end"?s=t.top:gn(n)?s=t.getPixelForValue(n.value):t.getBasePixel&&(s=t.getBasePixel()),Ds(s)?(o=t.isHorizontal(),{x:o?s:null,y:o?null:s}):null}class LU{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:o,y:r,radius:i}=this;return n=n||{start:0,end:us},t.arc(o,r,i,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:o}=this,r=t.angle;return{x:n+Math.cos(r)*o,y:s+Math.sin(r)*o,angle:r}}}function uJe(e){const{scale:t,fill:n}=e,s=t.options,o=t.getLabels().length,r=[],i=s.reverse?t.max:t.min,a=s.reverse?t.min:t.max;let l,u,c;if(n==="start"?c=i:n==="end"?c=a:gn(n)?c=n.value:c=t.getBaseValue(),s.grid.circular)return u=t.getPointPositionForValue(0,i),new LU({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(c)});for(l=0;l<o;++l)r.push(t.getPointPositionForValue(l,c));return r}function cJe(e){return(e.scale||{}).getPointPositionForValue?uJe(e):lJe(e)}function AT(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function dJe(e,t){const{x:n=null,y:s=null}=e||{},o=t.points,r=[];return t.segments.forEach(({start:i,end:a})=>{a=AT(i,a,o);const l=o[i],u=o[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:u.x,y:s})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:u.y}))}),r}function fJe(e){const{scale:t,index:n,line:s}=e,o=[],r=s.segments,i=s.points,a=hJe(t,n);a.push(BU({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const u=r[l];for(let c=u.start;c<=u.end;c++)pJe(o,i[c],a)}return new yu({points:o,options:{}})}function hJe(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let o=0;o<s.length;o++){const r=s[o];if(r.index===t)break;r.hidden||n.unshift(r.dataset)}return n}function pJe(e,t,n){const s=[];for(let o=0;o<n.length;o++){const r=n[o],{first:i,last:a,point:l}=mJe(r,t,"x");if(!(!l||i&&a)){if(i)s.unshift(l);else if(e.push(l),!a)break}}e.push(...s)}function mJe(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const o=s[n],r=e.segments,i=e.points;let a=!1,l=!1;for(let u=0;u<r.length;u++){const c=r[u],d=i[c.start][n],f=i[c.end][n];if(Va(o,d,f)){a=o===d,l=o===f;break}}return{first:a,last:l,point:s}}function gJe(e){const{chart:t,fill:n,line:s}=e;if(Ds(n))return rJe(t,n);if(n==="stack")return fJe(e);if(n==="shape")return!0;const o=cJe(e);return o instanceof LU?o:BU(o,s)}function BU(e,t){let n=[],s=!1;return Gn(e)?(s=!0,n=e):n=dJe(e,t),n.length?new yu({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function vJe(e,t,n){let o=e[t].fill;const r=[t];let i;if(!n)return o;for(;o!==!1&&r.indexOf(o)===-1;){if(!Ds(o))return o;if(i=e[o],!i)return!1;if(i.visible)return o;r.push(o),o=i.fill}return!1}function QM(e,t,n){const{segments:s,points:o}=t;let r=!0,i=!1;e.beginPath();for(const a of s){const{start:l,end:u}=a,c=o[l],d=o[AT(l,u,o)];r?(e.moveTo(c.x,c.y),r=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,a,{move:i}),i?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function AC(e,t,n,s){if(s)return;let o=t[e],r=n[e];return e==="angle"&&(o=xr(o),r=xr(r)),{property:e,start:o,end:r}}function eO(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function bJe(e,t,n){const s=e.segments,o=e.points,r=t.points,i=[];for(const a of s){let{start:l,end:u}=a;u=AT(l,u,o);const c=AC(n,o[l],o[u],a.loop);if(!t.segments){i.push({source:a,target:c,start:o[l],end:o[u]});continue}const d=yU(t,c);for(const f of d){const h=AC(n,r[f.start],r[f.end],f.loop),p=bU(a,o,h);for(const m of p)i.push({source:m,target:f,start:{[n]:eO(c,h,"start",Math.max)},end:{[n]:eO(c,h,"end",Math.min)}})}}return i}function yJe(e,t,n){const{top:s,bottom:o}=t.chart.chartArea,{property:r,start:i,end:a}=n||{};r==="x"&&(e.beginPath(),e.rect(i,s,a-i,o-s),e.clip())}function tO(e,t,n,s){const o=t.interpolate(n,s);o&&e.lineTo(o.x,o.y)}function nO(e,t){const{line:n,target:s,property:o,color:r,scale:i}=t,a=bJe(n,s,o);for(const{source:l,target:u,start:c,end:d}of a){const{style:{backgroundColor:f=r}={}}=l,h=s!==!0;e.save(),e.fillStyle=f,yJe(e,i,h&&AC(o,c,d)),e.beginPath();const p=!!n.pathSegment(e,l);let m;if(h){p?e.closePath():tO(e,s,d,o);const g=!!s.pathSegment(e,u,{move:p,reverse:!0});m=p&&g,m||tO(e,s,c,o)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function wJe(e,t){const{line:n,target:s,above:o,below:r,area:i,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),l==="x"&&r!==o&&(QM(e,s,i.top),nO(e,{line:n,target:s,color:o,scale:a,property:l}),e.restore(),e.save(),QM(e,s,i.bottom)),nO(e,{line:n,target:s,color:r,scale:a,property:l}),e.restore()}function bk(e,t,n){const s=gJe(t),{line:o,scale:r,axis:i}=t,a=o.options,l=a.fill,u=a.backgroundColor,{above:c=u,below:d=u}=l||{};s&&o.points.length&&(Yg(e,n),wJe(e,{line:o,target:s,above:c,below:d,area:n,scale:r,axis:i}),Xg(e))}var kJe={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,o=[];let r,i,a,l;for(i=0;i<s;++i)r=e.getDatasetMeta(i),a=r.dataset,l=null,a&&a.options&&a instanceof yu&&(l={visible:e.isDatasetVisible(i),index:i,fill:aJe(a,i,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,o.push(l);for(i=0;i<s;++i)l=o[i],!(!l||l.fill===!1)&&(l.fill=vJe(o,i,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",o=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let i=o.length-1;i>=0;--i){const a=o[i].$filler;!a||(a.line.updateControlPoints(r,a.axis),s&&bk(e.ctx,a,r))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let o=s.length-1;o>=0;--o){const r=s[o].$filler;r&&bk(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!s||s.fill===!1||n.drawTime!=="beforeDatasetDraw"||bk(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const sO=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},xJe=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class oO extends Fo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=rs(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,o)=>t.sort(s,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,o=Hs(s.font),r=o.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=sO(s,r);let u,c;n.font=o.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(i,r,a,l)+10):(c=this.maxHeight,u=this._fitCols(i,r,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,o){const{ctx:r,maxWidth:i,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=o+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,h=-c;return this.legendItems.forEach((p,m)=>{const g=s+n/2+r.measureText(p.text).width;(m===0||u[u.length-1]+g+2*a>i)&&(d+=c,u[u.length-(m>0?0:1)]=0,h+=c,f++),l[m]={left:0,top:h,row:f,width:g,height:o},u[u.length-1]+=g+a}),d}_fitCols(t,n,s,o){const{ctx:r,maxHeight:i,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=i-t;let d=a,f=0,h=0,p=0,m=0;return this.legendItems.forEach((g,v)=>{const b=s+n/2+r.measureText(g.text).width;v>0&&h+o+2*a>c&&(d+=f+a,u.push({width:f,height:h}),p+=f+a,m++,f=h=0),l[v]={left:p,top:h,col:m,width:b,height:o},f=Math.max(f,b),h+=o+a}),d+=f,u.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:o},rtl:r}}=this,i=Zd(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Bo(s,this.left+o,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Bo(s,this.left+o,this.right-this.lineWidths[a])),u.top+=this.top+t+o,u.left=i.leftForLtr(i.x(l),u.width),l+=u.width+o}else{let a=0,l=Bo(s,this.top+t+o,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Bo(s,this.top+t+o,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+o,u.left=i.leftForLtr(i.x(u.left),u.width),l+=u.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Yg(t,this),this._draw(),Xg(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:o}=this,{align:r,labels:i}=t,a=Tn.color,l=Zd(t.rtl,this.left,this.width),u=Hs(i.font),{color:c,padding:d}=i,f=u.size,h=f/2;let p;this.drawTitle(),o.textAlign=l.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=u.string;const{boxWidth:m,boxHeight:g,itemHeight:v}=sO(i,f),b=function(C,S,T){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;o.save();const A=nn(T.lineWidth,1);if(o.fillStyle=nn(T.fillStyle,a),o.lineCap=nn(T.lineCap,"butt"),o.lineDashOffset=nn(T.lineDashOffset,0),o.lineJoin=nn(T.lineJoin,"miter"),o.lineWidth=A,o.strokeStyle=nn(T.strokeStyle,a),o.setLineDash(nn(T.lineDash,[])),i.usePointStyle){const R={radius:m*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:A},L=l.xPlus(C,m/2),P=S+h;sm(o,R,L,P)}else{const R=S+Math.max((f-g)/2,0),L=l.leftForLtr(C,m),P=pc(T.borderRadius);o.beginPath(),Object.values(P).some(V=>V!==0)?om(o,{x:L,y:R,w:m,h:g,radius:P}):o.rect(L,R,m,g),o.fill(),A!==0&&o.stroke()}o.restore()},w=function(C,S,T){Bc(o,T.text,C,S+v/2,u,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},y=this.isHorizontal(),k=this._computeTitleHeight();y?p={x:Bo(r,this.left+d,this.right-s[0]),y:this.top+d+k,line:0}:p={x:this.left+d,y:Bo(r,this.top+k+d,this.bottom-n[0].height),line:0},mU(this.ctx,t.textDirection);const x=v+d;this.legendItems.forEach((C,S)=>{o.strokeStyle=C.fontColor||c,o.fillStyle=C.fontColor||c;const T=o.measureText(C.text).width,A=l.textAlign(C.textAlign||(C.textAlign=i.textAlign)),R=m+h+T;let L=p.x,P=p.y;l.setWidth(this.width),y?S>0&&L+R+d>this.right&&(P=p.y+=x,p.line++,L=p.x=Bo(r,this.left+d,this.right-s[p.line])):S>0&&P+x>this.bottom&&(L=p.x=L+n[p.line].width+d,p.line++,P=p.y=Bo(r,this.top+k+d,this.bottom-n[p.line].height));const V=l.x(L);b(V,P,C),L=kqe(A,L+m+h,y?L+R:this.right,t.rtl),w(l.x(L),P,C),y?p.x+=R+d:p.y+=x}),gU(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Hs(n.font),o=ao(n.padding);if(!n.display)return;const r=Zd(t.rtl,this.left,this.width),i=this.ctx,a=n.position,l=s.size/2,u=o.top+l;let c,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+u,d=Bo(t.align,d,this.right-f);else{const p=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);c=u+Bo(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const h=Bo(a,d,d+f);i.textAlign=r.textAlign(mT(a)),i.textBaseline="middle",i.strokeStyle=n.color,i.fillStyle=n.color,i.font=s.string,Bc(i,n.text,h,c,s)}_computeTitleHeight(){const t=this.options.title,n=Hs(t.font),s=ao(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,o,r;if(Va(t,this.left,this.right)&&Va(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(o=r[s],Va(t,o.left,o.left+o.width)&&Va(n,o.top,o.top+o.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!CJe(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"){const o=this._hoveredItem,r=xJe(o,s);o&&!r&&rs(n.onLeave,[t,o,this],this),this._hoveredItem=s,s&&!r&&rs(n.onHover,[t,s,this],this)}else s&&rs(n.onClick,[t,s,this],this)}}function CJe(e,t){return!!(e==="mousemove"&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var $Je={id:"legend",_element:oO,start(e,t,n){const s=e.legend=new oO({ctx:e.ctx,options:n,chart:e});Wo.configure(e,s,n),Wo.addBox(e,s)},stop(e){Wo.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Wo.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,o=n.chart;o.isDatasetVisible(s)?(o.hide(s),t.hidden=!0):(o.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:o,color:r}}=e.legend.options;return e._getSortedDatasetMetas().map(i=>{const a=i.controller.getStyle(n?0:void 0),l=ao(a.borderWidth);return{text:t[i.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!i.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:s||a.pointStyle,rotation:a.rotation,textAlign:o||a.textAlign,borderRadius:0,datasetIndex:i.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class DT extends Fo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const o=Gn(s.text)?s.text.length:1;this._padding=ao(s.padding);const r=o*Hs(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:o,right:r,options:i}=this,a=i.align;let l=0,u,c,d;return this.isHorizontal()?(c=Bo(a,s,r),d=n+t,u=r-s):(i.position==="left"?(c=s+t,d=Bo(a,o,n),l=Hn*-.5):(c=r-t,d=Bo(a,n,o),l=Hn*.5),u=o-n),{titleX:c,titleY:d,maxWidth:u,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Hs(n.font),r=s.lineHeight/2+this._padding.top,{titleX:i,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(r);Bc(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:u,textAlign:mT(n.align),textBaseline:"middle",translation:[i,a]})}}function SJe(e,t){const n=new DT({ctx:e.ctx,options:t,chart:e});Wo.configure(e,n,t),Wo.addBox(e,n),e.titleBlock=n}var IJe={id:"title",_element:DT,start(e,t,n){SJe(e,n)},stop(e){const t=e.titleBlock;Wo.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Wo.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ev=new WeakMap;var EJe={id:"subtitle",start(e,t,n){const s=new DT({ctx:e.ctx,options:n,chart:e});Wo.configure(e,s,n),Wo.addBox(e,s),ev.set(e,s)},stop(e){Wo.removeBox(e,ev.get(e)),ev.delete(e)},beforeUpdate(e,t,n){const s=ev.get(e);Wo.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gp={average(e){if(!e.length)return!1;let t,n,s=0,o=0,r=0;for(t=0,n=e.length;t<n;++t){const i=e[t].element;if(i&&i.hasValue()){const a=i.tooltipPosition();s+=a.x,o+=a.y,++r}}return{x:s/r,y:o/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,o=Number.POSITIVE_INFINITY,r,i,a;for(r=0,i=e.length;r<i;++r){const l=e[r].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=em(t,u);c<o&&(o=c,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function ta(e,t){return t&&(Gn(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ma(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function TJe(e,t){const{element:n,datasetIndex:s,index:o}=t,r=e.getDatasetMeta(s).controller,{label:i,value:a}=r.getLabelAndValue(o);return{chart:e,label:i,parsed:r.getParsed(o),raw:e.data.datasets[s].data[o],formattedValue:a,dataset:r.getDataset(),dataIndex:o,datasetIndex:s,element:n}}function rO(e,t){const n=e.chart.ctx,{body:s,footer:o,title:r}=e,{boxWidth:i,boxHeight:a}=t,l=Hs(t.bodyFont),u=Hs(t.titleFont),c=Hs(t.footerFont),d=r.length,f=o.length,h=s.length,p=ao(t.padding);let m=p.height,g=0,v=s.reduce((y,k)=>y+k.before.length+k.lines.length+k.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){const y=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=h*y+(v-h)*l.lineHeight+(v-1)*t.bodySpacing}f&&(m+=t.footerMarginTop+f*c.lineHeight+(f-1)*t.footerSpacing);let b=0;const w=function(y){g=Math.max(g,n.measureText(y).width+b)};return n.save(),n.font=u.string,Jn(e.title,w),n.font=l.string,Jn(e.beforeBody.concat(e.afterBody),w),b=t.displayColors?i+2+t.boxPadding:0,Jn(s,y=>{Jn(y.before,w),Jn(y.lines,w),Jn(y.after,w)}),b=0,n.font=c.string,Jn(e.footer,w),n.restore(),g+=p.width,{width:g,height:m}}function _Je(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function NJe(e,t,n,s){const{x:o,width:r}=s,i=n.caretSize+n.caretPadding;if(e==="left"&&o+r+i>t.width||e==="right"&&o-r-i<0)return!0}function AJe(e,t,n,s){const{x:o,width:r}=n,{width:i,chartArea:{left:a,right:l}}=e;let u="center";return s==="center"?u=o<=(a+l)/2?"left":"right":o<=r/2?u="left":o>=i-r/2&&(u="right"),NJe(u,e,t,n)&&(u="center"),u}function iO(e,t,n){const s=n.yAlign||t.yAlign||_Je(e,n);return{xAlign:n.xAlign||t.xAlign||AJe(e,t,n,s),yAlign:s}}function DJe(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function RJe(e,t,n){let{y:s,height:o}=e;return t==="top"?s+=n:t==="bottom"?s-=o+n:s-=o/2,s}function aO(e,t,n,s){const{caretSize:o,caretPadding:r,cornerRadius:i}=e,{xAlign:a,yAlign:l}=n,u=o+r,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:h}=pc(i);let p=DJe(t,a);const m=RJe(t,l,u);return l==="center"?a==="left"?p+=u:a==="right"&&(p-=u):a==="left"?p-=Math.max(c,f)+o:a==="right"&&(p+=Math.max(d,h)+o),{x:vo(p,0,s.width-t.width),y:vo(m,0,s.height-t.height)}}function tv(e,t,n){const s=ao(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function lO(e){return ta([],Ma(e))}function MJe(e,t,n){return bu(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function uO(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class DC extends Fo{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&n.options.animation&&s.animations,r=new TT(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=MJe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,o=s.beforeTitle.apply(this,[t]),r=s.title.apply(this,[t]),i=s.afterTitle.apply(this,[t]);let a=[];return a=ta(a,Ma(o)),a=ta(a,Ma(r)),a=ta(a,Ma(i)),a}getBeforeBody(t,n){return lO(n.callbacks.beforeBody.apply(this,[t]))}getBody(t,n){const{callbacks:s}=n,o=[];return Jn(t,r=>{const i={before:[],lines:[],after:[]},a=uO(s,r);ta(i.before,Ma(a.beforeLabel.call(this,r))),ta(i.lines,a.label.call(this,r)),ta(i.after,Ma(a.afterLabel.call(this,r))),o.push(i)}),o}getAfterBody(t,n){return lO(n.callbacks.afterBody.apply(this,[t]))}getFooter(t,n){const{callbacks:s}=n,o=s.beforeFooter.apply(this,[t]),r=s.footer.apply(this,[t]),i=s.afterFooter.apply(this,[t]);let a=[];return a=ta(a,Ma(o)),a=ta(a,Ma(r)),a=ta(a,Ma(i)),a}_createItems(t){const n=this._active,s=this.chart.data,o=[],r=[],i=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(TJe(this.chart,n[l]));return t.filter&&(a=a.filter((c,d,f)=>t.filter(c,d,f,s))),t.itemSort&&(a=a.sort((c,d)=>t.itemSort(c,d,s))),Jn(a,c=>{const d=uO(t.callbacks,c);o.push(d.labelColor.call(this,c)),r.push(d.labelPointStyle.call(this,c)),i.push(d.labelTextColor.call(this,c))}),this.labelColors=o,this.labelPointStyles=r,this.labelTextColors=i,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),o=this._active;let r,i=[];if(!o.length)this.opacity!==0&&(r={opacity:0});else{const a=gp[s.position].call(this,o,this._eventPosition);i=this._createItems(s),this.title=this.getTitle(i,s),this.beforeBody=this.getBeforeBody(i,s),this.body=this.getBody(i,s),this.afterBody=this.getAfterBody(i,s),this.footer=this.getFooter(i,s);const l=this._size=rO(this,s),u=Object.assign({},a,l),c=iO(this.chart,s,u),d=aO(s,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=i,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,o){const r=this.getCaretPosition(t,s,o);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:o,yAlign:r}=this,{caretSize:i,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:d}=pc(a),{x:f,y:h}=t,{width:p,height:m}=n;let g,v,b,w,y,k;return r==="center"?(y=h+m/2,o==="left"?(g=f,v=g-i,w=y+i,k=y-i):(g=f+p,v=g+i,w=y-i,k=y+i),b=g):(o==="left"?v=f+Math.max(l,c)+i:o==="right"?v=f+p-Math.max(u,d)-i:v=this.caretX,r==="top"?(w=h,y=w-i,g=v-i,b=v+i):(w=h+m,y=w+i,g=v+i,b=v-i),k=w),{x1:g,x2:v,x3:b,y1:w,y2:y,y3:k}}drawTitle(t,n,s){const o=this.title,r=o.length;let i,a,l;if(r){const u=Zd(s.rtl,this.x,this.width);for(t.x=tv(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",i=Hs(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=i.string,l=0;l<r;++l)n.fillText(o[l],u.x(t.x),t.y+i.lineHeight/2),t.y+=i.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,o,r){const i=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u,boxPadding:c}=r,d=Hs(r.bodyFont),f=tv(this,"left",r),h=o.x(f),p=l<d.lineHeight?(d.lineHeight-l)/2:0,m=n.y+p;if(r.usePointStyle){const g={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=o.leftForLtr(h,u)+u/2,b=m+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,sm(t,g,v,b),t.strokeStyle=i.borderColor,t.fillStyle=i.backgroundColor,sm(t,g,v,b)}else{t.lineWidth=i.borderWidth||1,t.strokeStyle=i.borderColor,t.setLineDash(i.borderDash||[]),t.lineDashOffset=i.borderDashOffset||0;const g=o.leftForLtr(h,u-c),v=o.leftForLtr(o.xPlus(h,1),u-c-2),b=pc(i.borderRadius);Object.values(b).some(w=>w!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,om(t,{x:g,y:m,w:u,h:l,radius:b}),t.fill(),t.stroke(),t.fillStyle=i.backgroundColor,t.beginPath(),om(t,{x:v,y:m+1,w:u-2,h:l-2,radius:b}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(g,m,u,l),t.strokeRect(g,m,u,l),t.fillStyle=i.backgroundColor,t.fillRect(v,m+1,u-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:o}=this,{bodySpacing:r,bodyAlign:i,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=s,d=Hs(s.bodyFont);let f=d.lineHeight,h=0;const p=Zd(s.rtl,this.x,this.width),m=function(S){n.fillText(S,p.x(t.x+h),t.y+f/2),t.y+=f+r},g=p.textAlign(i);let v,b,w,y,k,x,C;for(n.textAlign=i,n.textBaseline="middle",n.font=d.string,t.x=tv(this,g,s),n.fillStyle=s.bodyColor,Jn(this.beforeBody,m),h=a&&g!=="right"?i==="center"?u/2+c:u+2+c:0,y=0,x=o.length;y<x;++y){for(v=o[y],b=this.labelTextColors[y],n.fillStyle=b,Jn(v.before,m),w=v.lines,a&&w.length&&(this._drawColorBox(n,t,y,p,s),f=Math.max(d.lineHeight,l)),k=0,C=w.length;k<C;++k)m(w[k]),f=d.lineHeight;Jn(v.after,m)}h=0,f=d.lineHeight,Jn(this.afterBody,m),t.y-=r}drawFooter(t,n,s){const o=this.footer,r=o.length;let i,a;if(r){const l=Zd(s.rtl,this.x,this.width);for(t.x=tv(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",i=Hs(s.footerFont),n.fillStyle=s.footerColor,n.font=i.string,a=0;a<r;++a)n.fillText(o[a],l.x(t.x),t.y+i.lineHeight/2),t.y+=i.lineHeight+s.footerSpacing}}drawBackground(t,n,s,o){const{xAlign:r,yAlign:i}=this,{x:a,y:l}=t,{width:u,height:c}=s,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=pc(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(a+d,l),i==="top"&&this.drawCaret(t,n,s,o),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),i==="center"&&r==="right"&&this.drawCaret(t,n,s,o),n.lineTo(a+u,l+c-p),n.quadraticCurveTo(a+u,l+c,a+u-p,l+c),i==="bottom"&&this.drawCaret(t,n,s,o),n.lineTo(a+h,l+c),n.quadraticCurveTo(a,l+c,a,l+c-h),i==="center"&&r==="left"&&this.drawCaret(t,n,s,o),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,o=s&&s.x,r=s&&s.y;if(o||r){const i=gp[t.position].call(this,this._active,this._eventPosition);if(!i)return;const a=this._size=rO(this,t),l=Object.assign({},i,this._size),u=iO(n,t,l),c=aO(t,l,u,n);(o._to!==c.x||r._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,c))}}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const i=ao(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,o,n),mU(t,n.textDirection),r.y+=i.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),gU(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,o=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),r=!Fb(s,o),i=this._positionChanged(o,n);(r||i)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,r=this._active||[],i=this._getActiveElements(t,r,n,s),a=this._positionChanged(i,t),l=n||!Fb(i,r)||a;return l&&(this._active=i,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,o){const r=this.options;if(t.type==="mouseout")return[];if(!o)return n;const i=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&i.reverse(),i}_positionChanged(t,n){const{caretX:s,caretY:o,options:r}=this,i=gp[r.position].call(this,t,n);return i!==!1&&(s!==i.x||o!==i.y)}}DC.positioners=gp;var OJe={id:"tooltip",_element:DC,positioners:gp,afterInit(e,t,n){n&&(e.tooltip=new DC({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip,n={tooltip:t};e.notifyPlugins("beforeTooltipDraw",n)!==!1&&(t&&t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n))},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Aa,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Aa,beforeBody:Aa,beforeLabel:Aa,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Bn(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Aa,afterBody:Aa,beforeFooter:Aa,footer:Aa,afterFooter:Aa}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},PJe=Object.freeze({__proto__:null,Decimation:oJe,Filler:kJe,Legend:$Je,SubTitle:EJe,Title:IJe,Tooltip:OJe});const FJe=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function LJe(e,t,n,s){const o=e.indexOf(t);if(o===-1)return FJe(e,t,n,s);const r=e.lastIndexOf(t);return o!==r?n:o}const BJe=(e,t)=>e===null?null:vo(Math.round(e),0,t);class jb extends sd{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:o,label:r}of n)s[o]===r&&s.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Bn(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:LJe(s,t,nn(n,t),this._addedLabels),BJe(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(o=this.getLabels().length-1)),this.min=s,this.max=o}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,o=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let i=t;i<=n;i++)o.push({value:i});return o}getLabelForValue(t){const n=this.getLabels();return t>=0&&t<n.length?n[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}jb.id="category";jb.defaults={ticks:{callback:jb.prototype.getLabelForValue}};function zJe(e,t){const n=[],{bounds:o,step:r,min:i,max:a,precision:l,count:u,maxTicks:c,maxDigits:d,includeBounds:f}=e,h=r||1,p=c-1,{min:m,max:g}=t,v=!Bn(i),b=!Bn(a),w=!Bn(u),y=(g-m)/(d+1);let k=aM((g-m)/p/h)*h,x,C,S,T;if(k<1e-14&&!v&&!b)return[{value:m},{value:g}];T=Math.ceil(g/k)-Math.floor(m/k),T>p&&(k=aM(T*k/p/h)*h),Bn(l)||(x=Math.pow(10,l),k=Math.ceil(k*x)/x),o==="ticks"?(C=Math.floor(m/k)*k,S=Math.ceil(g/k)*k):(C=m,S=g),v&&b&&r&&Aqe((a-i)/r,k/1e3)?(T=Math.round(Math.min((a-i)/k,c)),k=(a-i)/T,C=i,S=a):w?(C=v?i:C,S=b?a:S,T=u-1,k=(S-C)/T):(T=(S-C)/k,hp(T,Math.round(T),k/1e3)?T=Math.round(T):T=Math.ceil(T));const A=Math.max(lM(k),lM(C));x=Math.pow(10,Bn(l)?A:l),C=Math.round(C*x)/x,S=Math.round(S*x)/x;let R=0;for(v&&(f&&C!==i?(n.push({value:i}),C<i&&R++,hp(Math.round((C+R*k)*x)/x,i,cO(i,y,e))&&R++):C<i&&R++);R<T;++R)n.push({value:Math.round((C+R*k)*x)/x});return b&&f&&S!==a?n.length&&hp(n[n.length-1].value,a,cO(a,y,e))?n[n.length-1].value=a:n.push({value:a}):(!b||S===a)&&n.push({value:S}),n}function cO(e,t,{horizontal:n,minRotation:s}){const o=go(s),r=(n?Math.sin(o):Math.cos(o))||.001,i=.75*t*(""+e).length;return Math.min(t/r,i)}class Gb extends sd{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Bn(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:o,max:r}=this;const i=l=>o=n?o:l,a=l=>r=s?r:l;if(t){const l=va(o),u=va(r);l<0&&u<0?a(0):l>0&&u>0&&i(0)}if(o===r){let l=1;(r>=Number.MAX_SAFE_INTEGER||o<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(r*.05)),a(r+l),t||i(o-l)}this.min=o,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,o;return s?(o=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const o={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,i=zJe(o,r);return t.bounds==="ticks"&&JH(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const o=(s-n)/Math.max(t.length-1,1)/2;n-=o,s+=o}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return Zg(t,this.chart.options.locale,this.options.ticks.format)}}class RT extends Gb{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ds(t)?t:0,this.max=Ds(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=go(this.options.ticks.minRotation),o=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}RT.id="linear";RT.defaults={ticks:{callback:ww.formatters.numeric}};function dO(e){return e/Math.pow(10,Math.floor(Zr(e)))===1}function VJe(e,t){const n=Math.floor(Zr(t.max)),s=Math.ceil(t.max/Math.pow(10,n)),o=[];let r=Ur(e.min,Math.pow(10,Math.floor(Zr(t.min)))),i=Math.floor(Zr(r)),a=Math.floor(r/Math.pow(10,i)),l=i<0?Math.pow(10,Math.abs(i)):1;do o.push({value:r,major:dO(r)}),++a,a===10&&(a=1,++i,l=i>=0?1:l),r=Math.round(a*Math.pow(10,i)*l)/l;while(i<n||i===n&&a<s);const u=Ur(e.max,r);return o.push({value:u,major:dO(r)}),o}class MT extends sd{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=Gb.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return Ds(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ds(t)?Math.max(0,t):null,this.max=Ds(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,o=this.max;const r=l=>s=t?s:l,i=l=>o=n?o:l,a=(l,u)=>Math.pow(10,Math.floor(Zr(l))+u);s===o&&(s<=0?(r(1),i(10)):(r(a(s,-1)),i(a(o,1)))),s<=0&&r(a(o,-1)),o<=0&&i(a(s,1)),this._zero&&this.min!==this._suggestedMin&&s===a(this.min,0)&&r(a(s,-1)),this.min=s,this.max=o}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=VJe(n,this);return t.bounds==="ticks"&&JH(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Zg(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Zr(t),this._valueRange=Zr(this.max)-Zr(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Zr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}MT.id="logarithmic";MT.defaults={ticks:{callback:ww.formatters.logarithmic,major:{enabled:!0}}};function RC(e){const t=e.ticks;if(t.display&&e.display){const n=ao(t.backdropPadding);return nn(t.font&&t.font.size,Tn.font.size)+n.height}return 0}function WJe(e,t,n){return n=Gn(n)?n:[n],{w:tYe(e,t.string,n),h:n.length*t.lineHeight}}function fO(e,t,n,s,o){return e===s||e===o?{start:t-n/2,end:t+n/2}:e<s||e>o?{start:t-n,end:t}:{start:t,end:t+n}}function HJe(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],o=[],r=e._pointLabels.length,i=e.options.pointLabels,a=i.centerPointLabels?Hn/r:0;for(let l=0;l<r;l++){const u=i.setContext(e.getPointLabelContext(l));o[l]=u.padding;const c=e.getPointPosition(l,e.drawingArea+o[l],a),d=Hs(u.font),f=WJe(e.ctx,d,e._pointLabels[l]);s[l]=f;const h=xr(e.getIndexAngle(l)+a),p=Math.round(vT(h)),m=fO(p,c.x,f.w,0,180),g=fO(p,c.y,f.h,90,270);UJe(n,t,h,m,g)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=jJe(e,s,o)}function UJe(e,t,n,s,o){const r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),o.start<t.t?(l=(t.t-o.start)/i,e.t=Math.min(e.t,t.t-l)):o.end>t.b&&(l=(o.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function jJe(e,t,n){const s=[],o=e._pointLabels.length,r=e.options,i=RC(r)/2,a=e.drawingArea,l=r.pointLabels.centerPointLabels?Hn/o:0;for(let u=0;u<o;u++){const c=e.getPointPosition(u,a+i+n[u],l),d=Math.round(vT(xr(c.angle+Ps))),f=t[u],h=qJe(c.y,f.h,d),p=GJe(d),m=KJe(c.x,f.w,p);s.push({x:c.x,y:h,textAlign:p,left:m,top:h,right:m+f.w,bottom:h+f.h})}return s}function GJe(e){return e===0||e===180?"center":e<180?"left":"right"}function KJe(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function qJe(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function YJe(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let o=t-1;o>=0;o--){const r=s.setContext(e.getPointLabelContext(o)),i=Hs(r.font),{x:a,y:l,textAlign:u,left:c,top:d,right:f,bottom:h}=e._pointLabelItems[o],{backdropColor:p}=r;if(!Bn(p)){const m=ao(r.backdropPadding);n.fillStyle=p,n.fillRect(c-m.left,d-m.top,f-c+m.width,h-d+m.height)}Bc(n,e._pointLabels[o],a,l+i.lineHeight/2,i,{color:r.color,textAlign:u,textBaseline:"middle"})}}function zU(e,t,n,s){const{ctx:o}=e;if(n)o.arc(e.xCenter,e.yCenter,t,0,us);else{let r=e.getPointPosition(0,t);o.moveTo(r.x,r.y);for(let i=1;i<s;i++)r=e.getPointPosition(i,t),o.lineTo(r.x,r.y)}}function XJe(e,t,n,s){const o=e.ctx,r=t.circular,{color:i,lineWidth:a}=t;!r&&!s||!i||!a||n<0||(o.save(),o.strokeStyle=i,o.lineWidth=a,o.setLineDash(t.borderDash),o.lineDashOffset=t.borderDashOffset,o.beginPath(),zU(e,n,r,s),o.closePath(),o.stroke(),o.restore())}function ZJe(e,t,n){return bu(e,{label:n,index:t,type:"pointLabel"})}class Qg extends Gb{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ao(RC(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Ds(t)&&!isNaN(t)?t:0,this.max=Ds(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/RC(this.options))}generateTickLabels(t){Gb.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const o=rs(this.options.pointLabels.callback,[n,s],this);return o||o===0?o:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?HJe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,o){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,o))}getIndexAngle(t){const n=us/(this._pointLabels.length||1),s=this.options.startAngle||0;return xr(t*n+go(s))}getDistanceFromCenterForValue(t){if(Bn(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(Bn(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return ZJe(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const o=this.getIndexAngle(t)-Ps+s;return{x:Math.cos(o)*n+this.xCenter,y:Math.sin(o)*n+this.yCenter,angle:o}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:o,bottom:r}=this._pointLabelItems[t];return{left:n,top:s,right:o,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),zU(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:o}=n,r=this._pointLabels.length;let i,a,l;if(n.pointLabels.display&&YJe(this,r),o.display&&this.ticks.forEach((u,c)=>{if(c!==0){a=this.getDistanceFromCenterForValue(u.value);const d=o.setContext(this.getContext(c-1));XJe(this,d,a,r)}}),s.display){for(t.save(),i=r-1;i>=0;i--){const u=s.setContext(this.getPointLabelContext(i)),{color:c,lineWidth:d}=u;!d||!c||(t.lineWidth=d,t.strokeStyle=c,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,a=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(i,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const o=this.getIndexAngle(0);let r,i;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const u=s.setContext(this.getContext(l)),c=Hs(u.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){t.font=c.string,i=t.measureText(a.label).width,t.fillStyle=u.backdropColor;const d=ao(u.backdropPadding);t.fillRect(-i/2-d.left,-r-c.size/2-d.top,i+d.width,c.size+d.height)}Bc(t,a.label,0,-r,c,{color:u.color})}),t.restore()}drawTitle(){}}Qg.id="radialLinear";Qg.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ww.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};Qg.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};Qg.descriptors={angleLines:{_fallback:"grid"}};const $w={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ar=Object.keys($w);function JJe(e,t){return e-t}function hO(e,t){if(Bn(t))return null;const n=e._adapter,{parser:s,round:o,isoWeekday:r}=e._parseOpts;let i=t;return typeof s=="function"&&(i=s(i)),Ds(i)||(i=typeof s=="string"?n.parse(i,s):n.parse(i)),i===null?null:(o&&(i=o==="week"&&(Qp(r)||r===!0)?n.startOf(i,"isoWeek",r):n.startOf(i,o)),+i)}function pO(e,t,n,s){const o=ar.length;for(let r=ar.indexOf(e);r<o-1;++r){const i=$w[ar[r]],a=i.steps?i.steps:Number.MAX_SAFE_INTEGER;if(i.common&&Math.ceil((n-t)/(a*i.size))<=s)return ar[r]}return ar[o-1]}function QJe(e,t,n,s,o){for(let r=ar.length-1;r>=ar.indexOf(n);r--){const i=ar[r];if($w[i].common&&e._adapter.diff(o,s,i)>=t-1)return i}return ar[n?ar.indexOf(n):0]}function eQe(e){for(let t=ar.indexOf(e)+1,n=ar.length;t<n;++t)if($w[ar[t]].common)return ar[t]}function mO(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:o}=CT(n,t),r=n[s]>=t?n[s]:n[o];e[r]=!0}}function tQe(e,t,n,s){const o=e._adapter,r=+o.startOf(t[0].value,s),i=t[t.length-1].value;let a,l;for(a=r;a<=i;a=+o.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function gO(e,t,n){const s=[],o={},r=t.length;let i,a;for(i=0;i<r;++i)a=t[i],o[a]=i,s.push({value:a,major:!1});return r===0||!n?s:tQe(e,s,o,n)}class e0 extends sd{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n){const s=t.time||(t.time={}),o=this._adapter=new SXe._date(t.adapters.date);fp(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:hO(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:o,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();function l(u){!i&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!i||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=Ds(o)&&!isNaN(o)?o:+n.startOf(Date.now(),s),r=Ds(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(o,r-1),this.max=Math.max(o+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const r=this.min,i=this.max,a=fYe(o,r,i);return this._unit=n.unit||(s.autoSkip?pO(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):QJe(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:eQe(this._unit),this.initOffsets(o),t.reverse&&a.reverse(),gO(this,a,this._majorUnit)}initOffsets(t){let n=0,s=0,o,r;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?n=1-o:n=(this.getDecimalForValue(t[1])-o)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const i=t.length<3?.5:.25;n=vo(n,0,i),s=vo(s,0,i),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,o=this.options,r=o.time,i=r.unit||pO(r.minUnit,n,s,this._getLabelCapacity(n)),a=nn(r.stepSize,1),l=i==="week"?r.isoWeekday:!1,u=Qp(l)||l===!0,c={};let d=n,f,h;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":i),t.diff(s,n,i)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+i);const p=o.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<s;f=+t.add(f,a,i),h++)mO(c,f,p);return(f===s||o.bounds==="ticks"||h===1)&&mO(c,f,p),Object.keys(c).sort((m,g)=>m-g).map(m=>+m)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}_tickFormatFunction(t,n,s,o){const r=this.options,i=r.time.displayFormats,a=this._unit,l=this._majorUnit,u=a&&i[a],c=l&&i[l],d=s[n],f=l&&c&&d&&d.major,h=this._adapter.format(t,o||(f?c:u)),p=r.ticks.callback;return p?rs(p,[h,n,s],this):h}generateTickLabels(t){let n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n],o.label=this._tickFormatFunction(o.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,o=go(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(o),i=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*i,h:s*i+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,o=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,gO(this,[t],this._majorUnit),o),i=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,s=o.length;n<s;++n)t=t.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const o=this.getLabels();for(n=0,s=o.length;n<s;++n)t.push(hO(this,o[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return aU(t.sort(JJe))}}e0.id="time";e0.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function nv(e,t,n){let s=0,o=e.length-1,r,i,a,l;n?(t>=e[s].pos&&t<=e[o].pos&&({lo:s,hi:o}=Wa(e,"pos",t)),{pos:r,time:a}=e[s],{pos:i,time:l}=e[o]):(t>=e[s].time&&t<=e[o].time&&({lo:s,hi:o}=Wa(e,"time",t)),{time:r,pos:a}=e[s],{time:i,pos:l}=e[o]);const u=i-r;return u?a+(l-a)*(t-r)/u:a}class OT extends e0{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=nv(n,this.min),this._tableRange=nv(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,o=[],r=[];let i,a,l,u,c;for(i=0,a=t.length;i<a;++i)u=t[i],u>=n&&u<=s&&o.push(u);if(o.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(i=0,a=o.length;i<a;++i)c=o[i+1],l=o[i-1],u=o[i],Math.round((c+l)/2)!==u&&r.push({time:u,pos:i/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(nv(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return nv(this._table,s*this._tableRange+this._minPos,!0)}}OT.id="timeseries";OT.defaults=e0.defaults;var nQe=Object.freeze({__proto__:null,CategoryScale:jb,LinearScale:RT,LogarithmicScale:MT,RadialLinearScale:Qg,TimeScale:e0,TimeSeriesScale:OT});const sQe=[$Xe,eJe,PJe,nQe];var oQe=Object.defineProperty,rQe=Object.defineProperties,iQe=Object.getOwnPropertyDescriptors,vO=Object.getOwnPropertySymbols,aQe=Object.prototype.hasOwnProperty,lQe=Object.prototype.propertyIsEnumerable,bO=(e,t,n)=>t in e?oQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uQe=(e,t)=>{for(var n in t||(t={}))aQe.call(t,n)&&bO(e,n,t[n]);if(vO)for(var n of vO(t))lQe.call(t,n)&&bO(e,n,t[n]);return e},cQe=(e,t)=>rQe(e,iQe(t));function dQe(e){return(e.match(/[a-zA-Z0-9]+/g)||[]).map(t=>`${t.charAt(0).toUpperCase()}${t.slice(1)}`).join("")}var wu=(e,t)=>{const n={chartData:{type:Object,required:!0},options:{type:Object,required:!1},chartId:{default:e,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:()=>[]},onLabelsUpdate:{type:Function},onChartUpdate:{type:Function},onChartDestroy:{type:Function},onChartRender:{type:Function}},s=dQe(e);return xe({name:s,props:n,emits:{"labels:update":()=>!0,"chart:update":o=>!0,"chart:destroy":()=>!0,"chart:render":o=>!0},setup(o,{emit:r,expose:i}){const a=j(null),l=`${o.chartId}`;let u=Ns(null);We(()=>o.chartData,c,{deep:!0}),We(()=>o.options,g=>{u.value&&g&&(u.value.options=wh(g),p())},{deep:!0});function c(g){if(u.value){let v=u.value;Zo(g.labels,u.value.data.labels)||(v.data.labels=g.labels,f()),Zo(g.datasets,u.value.data.datasets)||g.datasets.forEach((b,w)=>{var y,k;if(kte(b))v.data.datasets=[];else{const x=wh(v.data),C=Object.keys((k=(y=x.datasets)==null?void 0:y[w])!=null?k:{}),S=Object.keys(b);C.filter(A=>A!=="_meta"&&S.indexOf(A)===-1).forEach(A=>{v.data.datasets[w]&&delete v.data.datasets[w][A]});for(const A in b){const R=wh(b[A]);v.data.datasets[w]||(v.data.datasets[w]={}),b.hasOwnProperty(A)&&R!=null&&v&&(v.data.datasets[w][A]=R)}}}),p()}else u.value&&m(),d()}function d(){a.value?(u.value=new Ua(a.value,{data:wh(o.chartData),type:t,options:wh(o.options),plugins:o.plugins}),h()):console.error(`Error on component ${s}, canvas cannot be rendered. Check if the render appends server-side`)}function f(){r("labels:update"),o.onLabelsUpdate&&o.onLabelsUpdate()}function h(){u.value&&(r("chart:render",u.value),o.onChartRender&&o.onChartRender(u.value))}function p(){u.value&&(u.value.update(),r("chart:update",u.value),o.onChartUpdate&&o.onChartUpdate(u.value))}function m(){u.value&&u.value.destroy(),r("chart:destroy"),o.onChartDestroy&&o.onChartDestroy()}return Ft(d),qn(()=>{u.value&&u.value.destroy()}),i({canvasRef:a,renderChart:d,chartInstance:u,canvasId:l,update:p}),()=>at("div",{style:cQe(uQe({maxWidth:"100%"},o.styles),{position:"relative"}),class:o.cssClasses},[at("canvas",{style:{maxWidth:"100%",maxHeight:"100%"},id:l,width:o.width,height:o.height,ref:a})])}})};wu("bar-chart","bar");var fQe=wu("doughnut-chart","doughnut");wu("line-chart","line");wu("pie-chart","pie");wu("polar-chart","polarArea");wu("radar-chart","radar");var hQe=wu("bubble-chart","bubble"),pQe=wu("scatter-chart","scatter"),mQe=Object.defineProperty,gQe=Object.getOwnPropertyDescriptor,Sw=(e,t,n,s)=>{for(var o=s>1?void 0:s?gQe(t,n):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(o=(s?i(t,n,o):i(o))||o);return s&&o&&mQe(t,n,o),o};const vQe={pitch:"Pitch / F0 - Whether the voice sounds high or low.",f1:"Formant F1 - Associated with the vocal area closer to the throat or spine.",f2:"Formant F2 - Controlled by the tongue.",f3:"Formant F3 - Unknown?",tilt:"Spectral Tilt - Whether the voice sounds breathy or creaky."};let Rf=class extends iu{constructor(){super(...arguments);on(this,"featureDescriptions",vQe);on(this,"stats");on(this,"ml");on(this,"audioDuration")}mounted(){$(".feature").accordion({collapsible:!0,header:".classification-bar",heightStyle:"content",active:!1,animate:{easing:"swing",duration:500}}),$(".feature.pitch").accordion({active:0})}get totalTime(){return this.ml[this.ml.length-1][2]}getColor(t){const n=t[3]?t[3]:0;switch(t[0]){case"female":return`rgba(255,190,200,${n})`;case"male":return`rgba(129,218,255,${n})`;default:return""}}updateAccordion(t){$(`.feature:not(.${t})`).accordion({active:!1})}getOptions(t){return{scales:{y:{ticks:{display:!1}}},plugins:{annotation:{drawTime:"afterDatasetsDraw",annotations:{you:{type:"line",xMin:this.stats.means[t],xMax:this.stats.means[t],borderColor:"rgba(106,100,100,0.47)",borderWidth:2,label:{enabled:!0,position:"start",content:"You're Here",color:"#ffe3be",backgroundColor:"rgba(106,100,100,0.8)"}}}}}}}getCurveData(t){const n=yqe[t];return{datasets:[{label:"Masculine Range",data:n.m[0].map((o,r)=>({x:o,y:n.m[1][r]})),borderColor:"#81daff",pointRadius:0,showLine:!0,fill:"origin",backgroundColor:"rgba(129,218,255,0.5)"},{label:"Feminine Range",data:n.f[0].map((o,r)=>({x:o,y:n.f[1][r]})),borderColor:"#ffbec8",pointRadius:0,showLine:!0,fill:"origin",backgroundColor:"rgba(255,190,200,0.5)"}]}}};Sw([vu()],Rf.prototype,"stats",2);Sw([vu()],Rf.prototype,"ml",2);Sw([vu()],Rf.prototype,"audioDuration",2);Rf=Sw([Kc({components:{ScatterChart:pQe,DoughnutChart:fQe}})],Rf);const bQe=Rf,t0=e=>(cm("data-v-2555b081"),e=e(),dm(),e),yQe={id:"ClassificationResults"},wQe={key:0,class:"audio-too-short-warning"},kQe=t0(()=>q("div",{class:"head"},[q("i",{class:"fas fa-exclamation-triangle"}),q("span",null,"Audio Too Short"),q("i",{class:"fas fa-exclamation-triangle"})],-1)),xQe=t0(()=>q("div",{class:"expl"},"Please record at least 10 seconds for more accuracy.",-1)),CQe={class:"expl"},$Qe=t0(()=>q("div",{class:"title"},"Full Audio Statistics",-1)),SQe={key:1,class:"features-bar"},IQe={class:"description"},EQe={class:"name"},TQe={class:"desc"},_Qe=["onClick"],NQe={class:"chart-wrapper"},AQe={key:2,class:"no-features"},DQe=t0(()=>q("div",{class:"title"},"Machine Learning Classification",-1)),RQe={key:3,class:"feature"},MQe=t0(()=>q("div",{class:"description"},[q("span",{class:"name"},"Machine Learning"),q("span",{class:"desc"},"How your voice might sound like to a robot.")],-1)),OQe={class:"classification-bar ml-bar"},PQe={key:4,class:"no-features"};function FQe(e,t,n,s,o,r){const i=Ne("ScatterChart");return _(),U("div",yQe,[e.audioDuration<10?(_(),U("div",wQe,[kQe,xQe,q("div",CQe,"(You're audio was "+He(e.audioDuration.toFixed(1))+" seconds long)",1)])):me("",!0),$Qe,e.stats.fem_prob?(_(),U("div",SQe,[(_(),U(lt,null,Zt(["pitch","f1","f2","f3","tilt"],a=>q("div",{class:W(["feature",a]),ref_for:!0,ref:"feature"},[q("div",IQe,[q("span",EQe,He(e.featureDescriptions[a].split(" - ")[0]),1),q("span",TQe,He(e.featureDescriptions[a].split(" - ")[1]),1)]),q("div",{class:"classification-bar unselectable clickable",onClick:l=>e.updateAccordion(a)},[q("span",{class:"f fbox-vcenter",style:it({width:`${(e.stats.fem_prob[a]*100).toFixed(0)}%`})},[q("span",{class:W(["percentage-sub",{right:e.stats.fem_prob[a]<.5}])},He((e.stats.fem_prob[a]*100).toFixed(0))+"% ",3)],4)],8,_Qe),q("div",NQe,[fe(i,{height:200,chartData:e.getCurveData(a),options:e.getOptions(a),style:{"min-height":"200px"}},null,8,["chartData","options"])])],2)),64))])):(_(),U("div",AQe," Sorry, audio is too short, no frequency feature was detected. ")),DQe,e.ml.length>0?(_(),U("div",RQe,[MQe,q("div",OQe,[(_(!0),U(lt,null,Zt(e.ml,a=>(_(),U("div",{class:"frame",style:it({width:`${(a[2]-a[1])/e.totalTime*100}%`,background:e.getColor(a)})},null,4))),256))])])):(_(),U("div",PQe,"Sorry, our model failed to detect voice on this audio."))])}var LQe=ml(bQe,[["render",FQe],["__scopeId","data-v-2555b081"]]),BQe=Object.defineProperty,zQe=Object.getOwnPropertyDescriptor,VU=(e,t,n,s)=>{for(var o=s>1?void 0:s?zQe(t,n):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(o=(s?i(t,n,o):i(o))||o);return s&&o&&BQe(t,n,o),o};const yk={position:"center",min:0,max:1,ticks:{padding:-15,showLabelBackdrop:!0,count:5,callback:(e,t,n)=>e.toFixed(2)},grid:{drawBorder:!1}},Ou={borderRadius:10,font:{size:15}},Dh="rgba(136,136,136,0.76)",sv=.03;let Kb=class extends iu{constructor(){super(...arguments);on(this,"stats");on(this,"options",{maintainAspectRatio:!1,scales:{x:Me({},yk),y:nt(Me({},yk),{ticks:nt(Me({},yk.ticks),{padding:-19})})},animation:!1,plugins:{legend:{display:!1},annotation:{annotations:{topRight:nt(Me({},Ou),{type:"label",xValue:.75,yValue:.75,content:["Feminine","Average"],color:"rgba(255,65,65,0.46)"}),bottomLeft:nt(Me({},Ou),{type:"label",xValue:.25,yValue:.25,content:["Masculine","Average"],color:"rgba(75,138,255,0.76)"}),center:nt(Me({},Ou),{type:"label",xValue:.5,yValue:.5,content:["Androgyny"],color:Dh,backgroundColor:"white"}),lowPitch:nt(Me({},Ou),{type:"label",xValue:.5,yValue:sv,content:["Low Pitch"],color:Dh}),highPitch:nt(Me({},Ou),{type:"label",xValue:.5,yValue:1-sv,content:["High Pitch"],color:Dh}),lowResonance:nt(Me({},Ou),{type:"label",xValue:sv,yValue:.5,rotation:-90,content:["Dark Resonance"],color:Dh}),highResonance:nt(Me({},Ou),{type:"label",xValue:1-sv,yValue:.5,rotation:90,content:["Bright Resonance"],color:Dh}),you:{type:"label",xValue:this.position.x,yValue:this.position.y,content:["You"],color:"rgba(119,119,119,0.63)",font:{size:11}}}}}})}get position(){return{x:.7,y:.6}}get chartData(){return{datasets:[{backgroundColor:"#ffffff",borderColor:"#777777",radius:15,data:[this.position]}]}}};VU([vu()],Kb.prototype,"stats",2);Kb=VU([Kc({components:{BubbleChart:hQe}})],Kb);const VQe=Kb,WQe={id:"PitchResGraph"};function HQe(e,t,n,s,o,r){const i=Ne("BubbleChart");return _(),U("div",WQe,[fe(i,{class:"chart",chartData:e.chartData,options:e.options},null,8,["chartData","options"])])}var UQe=ml(VQe,[["render",HQe],["__scopeId","data-v-a98809ce"]]),jQe=Object.defineProperty,GQe=Object.getOwnPropertyDescriptor,KQe=(e,t,n,s)=>{for(var o=s>1?void 0:s?GQe(t,n):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(o=(s?i(t,n,o):i(o))||o);return s&&o&&jQe(t,n,o),o};let MC=class extends iu{constructor(){super(...arguments);on(this,"dropped",!1);on(this,"activeTab",1);on(this,"audio",null);on(this,"stats",null);on(this,"ml");on(this,"spec",null);on(this,"specSr");on(this,"freqArrays",null);on(this,"recorderCompatible",navigator.mediaDevices);on(this,"recorder",null);on(this,"recordChunks",[])}async loadFile(t){const n=new Ob,s=HH("spec.local").val;console.log(`File Dropped: ${t.name}
- LastModified: ${t.lastModified}
- Size: ${t.size}
- Type: ${t.type}`),_Ke("/process",{file:t,params:{with_mel_spect:!s}}).then(async a=>{let l=await a.json();this.stats=l.result,this.ml=l.ml,s||(this.specSr=l.spec_sr,this.spec=TKe(l.spec.bytes,l.spec.shape)),this.freqArrays=EKe(l.freq_array.bytes,l.freq_array.shape),console.log(l)});const o=await t.arrayBuffer(),r=new AudioContext({sampleRate:16e3});this.audio=await r.decodeAudioData(o);const i=this.audio.getChannelData(0);n.log(`Audio Loaded:
- Sample Rate: ${this.audio.sampleRate} Hz
- Array Length: ${this.audio.length}
- Duration: ${this.audio.duration} sec
- Number of Channels: ${this.audio.numberOfChannels}
`),s&&(this.spec=await UH(i,16e3),this.specSr=16e3,n.log("Spectrogram - Mel STFT calculation done"))}async onDrop(t){if(t.preventDefault(),this.dropped=!0,!(t.dataTransfer&&t.dataTransfer.items))return;const n=t.dataTransfer.items.length;if(n>1)return Tx.error(`Only one file can be analyzed at a time, you dropped ${n}`);const s=t.dataTransfer.items[0];if(s.kind!="file")return Tx.error(`Error: The item dropped must be a file, not a ${s.kind}`);await this.loadFile(s.getAsFile())}async btnRecord(){if(this.recorder){this.recorder.stop(),this.recorder=null;return}const t=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1}});this.recorder=new MediaRecorder(t,{mimeType:"audio/webm;codecs=opus"}),this.recorder.addEventListener("dataavailable",n=>{this.recordChunks.push(n.data)}),this.recorder.addEventListener("stop",()=>{const n=new Blob(this.recordChunks,{type:"audio/webm;codecs=opus"});this.loadFile(new File([n],"recorded-audio.webm"))}),this.recorder.start()}};MC=KQe([Kc({components:{PitchResGraph:UQe,ClassificationResults:LQe,Waveform:hqe,Spectrogram:KKe,Loading:oqe}})],MC);const qQe=MC,YQe=e=>(cm("data-v-06cdc03e"),e=e(),dm(),e),XQe={id:"home",ref:"el",class:"fbox-v"},ZQe={key:0,class:"usage"},JQe=Yt(" Welcome to the voice analysis tool! "),QQe=YQe(()=>q("br",null,null,-1)),eet=Yt(" Drop or record an audio to analyze. "),tet=[JQe,QQe,eet],net={key:0,class:"drop-label"},set={key:0,class:"drop-label"},oet={key:1,class:"drop-label"},ret={key:3,class:"results"},iet={class:"result-nav unselectable anim"},aet={key:1,class:"result-tab card shadow"},uet={key:2,class:"result-tab card shadow"};function cet(e,t,n,s,o,r){const i=Ne("Loading"),a=Ne("Waveform"),l=Ne("Spectrogram"),u=Ne("ClassificationResults"),c=Ne("PitchResGraph");return _(),U("div",XQe,[e.audio?me("",!0):(_(),U("div",ZQe,tet)),e.audio?me("",!0):(_(),U("div",{key:1,class:"drop-box unselectable shadow",onDragover:t[0]||(t[0]=d=>d.preventDefault()),onDrop:t[1]||(t[1]=(...d)=>e.onDrop&&e.onDrop(...d))},[e.dropped?(_(),ye(i,{key:1})):(_(),U("span",net,"Drop Here"))],32)),!e.audio&&e.recorderCompatible?(_(),U("div",{key:2,class:"drop-box unselectable shadow record clickable",onClick:t[2]||(t[2]=(...d)=>e.btnRecord&&e.btnRecord(...d))},[e.recorder?(_(),U("span",oet,"Stop Recording")):(_(),U("span",set,"Record"))])):me("",!0),e.audio?(_(),U("div",ret,[e.audio?(_(),ye(a,{key:0,audio:e.audio},null,8,["audio"])):me("",!0),q("div",iet,[q("div",{class:W(["tab-button spectrogram",{sel:e.activeTab===1}]),onClick:t[3]||(t[3]=()=>e.activeTab=1)}," Spectrogram ",2),q("div",{class:W(["tab-button",{sel:e.activeTab===2}]),onClick:t[4]||(t[4]=()=>e.activeTab=2)}," Classification ",2),q("div",{class:W(["tab-button",{sel:e.activeTab===3}]),onClick:t[5]||(t[5]=()=>e.activeTab=3)}," Position ",2)]),q("div",{class:"result-tab card shadow",style:it(e.activeTab===1?{}:{display:"none"})},[e.spec?(_(),ye(l,{key:0,spec:e.spec,sr:e.specSr,"freq-arrays":e.freqArrays},null,8,["spec","sr","freq-arrays"])):(_(),ye(i,{key:1}))],4),e.activeTab===2?(_(),U("div",aet,[e.stats&&e.audio?(_(),ye(u,{key:0,stats:e.stats,ml:e.ml,"audio-duration":e.audio.duration},null,8,["stats","ml","audio-duration"])):(_(),ye(i,{key:1}))])):me("",!0),e.activeTab===3?(_(),U("div",uet,[e.stats?(_(),ye(c,{key:0,stats:e.stats},null,8,["stats"])):(_(),ye(i,{key:1}))])):me("",!0)])):me("",!0)],512)}var det=ml(qQe,[["render",cet],["__scopeId","data-v-06cdc03e"]]);const fet={id:"about",class:"card shadow"},het=xe({setup(e){return _o([1,1,1,1,0,0,0,0]).rfft().print(),(n,s)=>(_(),U("div",fet," This is an about page. "))}});var pet=ml(het,[["__scopeId","data-v-191d5f3e"]]);function WU(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let ch=WU();function met(e){ch=e}const get=/[&<>"']/,vet=/[&<>"']/g,bet=/[<>"']|&(?!#?\w+;)/,yet=/[<>"']|&(?!#?\w+;)/g,wet={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yO=e=>wet[e];function ho(e,t){if(t){if(get.test(e))return e.replace(vet,yO)}else if(bet.test(e))return e.replace(yet,yO);return e}const ket=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function HU(e){return e.replace(ket,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const xet=/(^|[^\[])\^/g;function cs(e,t){e=e.source||e,t=t||"";const n={replace:(s,o)=>(o=o.source||o,o=o.replace(xet,"$1"),e=e.replace(s,o),n),getRegex:()=>new RegExp(e,t)};return n}const Cet=/[^\w:]/g,$et=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function wO(e,t,n){if(e){let s;try{s=decodeURIComponent(HU(n)).replace(Cet,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}t&&!$et.test(n)&&(n=_et(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const ov={},Iet=/^[^:]+:\/*[^/]*$/,Eet=/^([^:]+:)[\s\S]*$/,Tet=/^([^:]+:\/*[^/]*)[\s\S]*$/;function _et(e,t){ov[" "+e]||(Iet.test(e)?ov[" "+e]=e+"/":ov[" "+e]=Wv(e,"/",!0)),e=ov[" "+e];const n=e.indexOf(":")===-1;return t.substring(0,2)==="//"?n?t:e.replace(Eet,"$1")+t:t.charAt(0)==="/"?n?t:e.replace(Tet,"$1")+t:e+t}const qb={exec:function(){}};function Qi(e){let t=1,n,s;for(;t<arguments.length;t++){n=arguments[t];for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}function kO(e,t){const n=e.replace(/\|/g,(r,i,a)=>{let l=!1,u=i;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),s=n.split(/ \|/);let o=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;o<s.length;o++)s[o]=s[o].trim().replace(/\\\|/g,"|");return s}function Wv(e,t,n){const s=e.length;if(s===0)return"";let o=0;for(;o<s;){const r=e.charAt(s-o-1);if(r===t&&!n)o++;else if(r!==t&&n)o++;else break}return e.substr(0,s-o)}function Net(e,t){if(e.indexOf(t[1])===-1)return-1;const n=e.length;let s=0,o=0;for(;o<n;o++)if(e[o]==="\\")o++;else if(e[o]===t[0])s++;else if(e[o]===t[1]&&(s--,s<0))return o;return-1}function UU(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function xO(e,t){if(t<1)return"";let n="";for(;t>1;)t&1&&(n+=e),t>>=1,e+=e;return n+e}function CO(e,t,n,s){const o=t.href,r=t.title?ho(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){s.state.inLink=!0;const a={type:"link",raw:n,href:o,title:r,text:i,tokens:s.inlineTokens(i,[])};return s.state.inLink=!1,a}else return{type:"image",raw:n,href:o,title:r,text:ho(i)}}function Aet(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const s=n[1];return t.split(`
`).map(o=>{const r=o.match(/^\s+/);if(r===null)return o;const[i]=r;return i.length>=s.length?o.slice(s.length):o}).join(`
`)}class PT{constructor(t){this.options=t||ch}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const s=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Wv(s,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const s=n[0],o=Aet(s,n[3]||"");return{type:"code",raw:s,lang:n[2]?n[2].trim():n[2],text:o}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let s=n[2].trim();if(/#$/.test(s)){const r=Wv(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}const o={type:"heading",raw:n[0],depth:n[1].length,text:s,tokens:[]};return this.lexer.inline(o.text,o.tokens),o}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const s=n[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:n[0],tokens:this.lexer.blockTokens(s,[]),text:s}}}list(t){let n=this.rules.block.list.exec(t);if(n){let s,o,r,i,a,l,u,c,d,f,h,p,m=n[1].trim();const g=m.length>1,v={type:"list",raw:"",ordered:g,start:g?+m.slice(0,-1):"",loose:!1,items:[]};m=g?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`,this.options.pedantic&&(m=g?m:"[*+-]");const b=new RegExp(`^( {0,3}${m})((?: [^\\n]*)?(?:\\n|$))`);for(;t&&(p=!1,!(!(n=b.exec(t))||this.rules.block.hr.test(t)));){if(s=n[0],t=t.substring(s.length),c=n[2].split(`
`,1)[0],d=t.split(`
`,1)[0],this.options.pedantic?(i=2,h=c.trimLeft()):(i=n[2].search(/[^ ]/),i=i>4?1:i,h=c.slice(i),i+=n[1].length),l=!1,!c&&/^ *$/.test(d)&&(s+=d+`
`,t=t.substring(d.length+1),p=!0),!p){const y=new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;t&&(f=t.split(`
`,1)[0],c=f,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!y.test(c));){if(c.search(/[^ ]/)>=i||!c.trim())h+=`
`+c.slice(i);else if(!l)h+=`
`+c;else break;!l&&!c.trim()&&(l=!0),s+=f+`
`,t=t.substring(f.length+1)}}v.loose||(u?v.loose=!0:/\n *\n *$/.test(s)&&(u=!0)),this.options.gfm&&(o=/^\[[ xX]\] /.exec(h),o&&(r=o[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:s,task:!!o,checked:r,loose:!1,text:h}),v.raw+=s}v.items[v.items.length-1].raw=s.trimRight(),v.items[v.items.length-1].text=h.trimRight(),v.raw=v.raw.trimRight();const w=v.items.length;for(a=0;a<w;a++){this.lexer.state.top=!1,v.items[a].tokens=this.lexer.blockTokens(v.items[a].text,[]);const y=v.items[a].tokens.filter(x=>x.type==="space"),k=y.every(x=>{const C=x.raw.split("");let S=0;for(const T of C)if(T===`
`&&(S+=1),S>1)return!0;return!1});!v.loose&&y.length&&k&&(v.loose=!0,v.items[a].loose=!0)}return v}}html(t){const n=this.rules.block.html.exec(t);if(n){const s={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};return this.options.sanitize&&(s.type="paragraph",s.text=this.options.sanitizer?this.options.sanitizer(n[0]):ho(n[0]),s.tokens=[],this.lexer.inline(s.text,s.tokens)),s}}def(t){const n=this.rules.block.def.exec(t);if(n){n[3]&&(n[3]=n[3].substring(1,n[3].length-1));const s=n[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:s,raw:n[0],href:n[2],title:n[3]}}}table(t){const n=this.rules.block.table.exec(t);if(n){const s={type:"table",header:kO(n[1]).map(o=>({text:o})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=n[0];let o=s.align.length,r,i,a,l;for(r=0;r<o;r++)/^ *-+: *$/.test(s.align[r])?s.align[r]="right":/^ *:-+: *$/.test(s.align[r])?s.align[r]="center":/^ *:-+ *$/.test(s.align[r])?s.align[r]="left":s.align[r]=null;for(o=s.rows.length,r=0;r<o;r++)s.rows[r]=kO(s.rows[r],s.header.length).map(u=>({text:u}));for(o=s.header.length,i=0;i<o;i++)s.header[i].tokens=[],this.lexer.inlineTokens(s.header[i].text,s.header[i].tokens);for(o=s.rows.length,i=0;i<o;i++)for(l=s.rows[i],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return s}}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n){const s={type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const s={type:"paragraph",raw:n[0],text:n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}text(t){const n=this.rules.block.text.exec(t);if(n){const s={type:"text",raw:n[0],text:n[0],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:ho(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):ho(n[0]):n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const s=n[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const i=Wv(s.slice(0,-1),"\\");if((s.length-i.length)%2===0)return}else{const i=Net(n[2],"()");if(i>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let o=n[2],r="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);i&&(o=i[1],r=i[3])}else r=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(s)?o=o.slice(1):o=o.slice(1,-1)),CO(n,{href:o&&o.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(t,n){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){let o=(s[2]||s[1]).replace(/\s+/g," ");if(o=n[o.toLowerCase()],!o||!o.href){const r=s[0].charAt(0);return{type:"text",raw:r,text:r}}return CO(s,o,s[0],this.lexer)}}emStrong(t,n,s=""){let o=this.rules.inline.emStrong.lDelim.exec(t);if(!o||o[3]&&s.match(/[\p{L}\p{N}]/u))return;const r=o[1]||o[2]||"";if(!r||r&&(s===""||this.rules.inline.punctuation.exec(s))){const i=o[0].length-1;let a,l,u=i,c=0;const d=o[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,n=n.slice(-1*t.length+i);(o=d.exec(n))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(l=a.length,o[3]||o[4]){u+=l;continue}else if((o[5]||o[6])&&i%3&&!((i+l)%3)){c+=l;continue}if(u-=l,u>0)continue;if(l=Math.min(l,l+u+c),Math.min(i,l)%2){const h=t.slice(1,i+o.index+l);return{type:"em",raw:t.slice(0,i+o.index+l+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}const f=t.slice(2,i+o.index+l-1);return{type:"strong",raw:t.slice(0,i+o.index+l+1),text:f,tokens:this.lexer.inlineTokens(f,[])}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let s=n[2].replace(/\n/g," ");const o=/[^ ]/.test(s),r=/^ /.test(s)&&/ $/.test(s);return o&&r&&(s=s.substring(1,s.length-1)),s=ho(s,!0),{type:"codespan",raw:n[0],text:s}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2],[])}}autolink(t,n){const s=this.rules.inline.autolink.exec(t);if(s){let o,r;return s[2]==="@"?(o=ho(this.options.mangle?n(s[1]):s[1]),r="mailto:"+o):(o=ho(s[1]),r=o),{type:"link",raw:s[0],text:o,href:r,tokens:[{type:"text",raw:o,text:o}]}}}url(t,n){let s;if(s=this.rules.inline.url.exec(t)){let o,r;if(s[2]==="@")o=ho(this.options.mangle?n(s[0]):s[0]),r="mailto:"+o;else{let i;do i=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(i!==s[0]);o=ho(s[0]),s[1]==="www."?r="http://"+o:r=o}return{type:"link",raw:s[0],text:o,href:r,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(t,n){const s=this.rules.inline.text.exec(t);if(s){let o;return this.lexer.state.inRawBlock?o=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):ho(s[0]):s[0]:o=ho(this.options.smartypants?n(s[0]):s[0]),{type:"text",raw:s[0],text:o}}}}const Xt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:qb,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Xt._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Xt._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Xt.def=cs(Xt.def).replace("label",Xt._label).replace("title",Xt._title).getRegex();Xt.bullet=/(?:[*+-]|\d{1,9}[.)])/;Xt.listItemStart=cs(/^( *)(bull) */).replace("bull",Xt.bullet).getRegex();Xt.list=cs(Xt.list).replace(/bull/g,Xt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Xt.def.source+")").getRegex();Xt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Xt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Xt.html=cs(Xt.html,"i").replace("comment",Xt._comment).replace("tag",Xt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Xt.paragraph=cs(Xt._paragraph).replace("hr",Xt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xt._tag).getRegex();Xt.blockquote=cs(Xt.blockquote).replace("paragraph",Xt.paragraph).getRegex();Xt.normal=Qi({},Xt);Xt.gfm=Qi({},Xt.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Xt.gfm.table=cs(Xt.gfm.table).replace("hr",Xt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xt._tag).getRegex();Xt.gfm.paragraph=cs(Xt._paragraph).replace("hr",Xt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Xt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xt._tag).getRegex();Xt.pedantic=Qi({},Xt.normal,{html:cs(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Xt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:qb,paragraph:cs(Xt.normal._paragraph).replace("hr",Xt.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Xt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Nt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:qb,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:qb,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Nt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Nt.punctuation=cs(Nt.punctuation).replace(/punctuation/g,Nt._punctuation).getRegex();Nt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Nt.escapedEmSt=/\\\*|\\_/g;Nt._comment=cs(Xt._comment).replace("(?:-->|$)","-->").getRegex();Nt.emStrong.lDelim=cs(Nt.emStrong.lDelim).replace(/punct/g,Nt._punctuation).getRegex();Nt.emStrong.rDelimAst=cs(Nt.emStrong.rDelimAst,"g").replace(/punct/g,Nt._punctuation).getRegex();Nt.emStrong.rDelimUnd=cs(Nt.emStrong.rDelimUnd,"g").replace(/punct/g,Nt._punctuation).getRegex();Nt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Nt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Nt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Nt.autolink=cs(Nt.autolink).replace("scheme",Nt._scheme).replace("email",Nt._email).getRegex();Nt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Nt.tag=cs(Nt.tag).replace("comment",Nt._comment).replace("attribute",Nt._attribute).getRegex();Nt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Nt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Nt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Nt.link=cs(Nt.link).replace("label",Nt._label).replace("href",Nt._href).replace("title",Nt._title).getRegex();Nt.reflink=cs(Nt.reflink).replace("label",Nt._label).replace("ref",Xt._label).getRegex();Nt.nolink=cs(Nt.nolink).replace("ref",Xt._label).getRegex();Nt.reflinkSearch=cs(Nt.reflinkSearch,"g").replace("reflink",Nt.reflink).replace("nolink",Nt.nolink).getRegex();Nt.normal=Qi({},Nt);Nt.pedantic=Qi({},Nt.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:cs(/^!?\[(label)\]\((.*?)\)/).replace("label",Nt._label).getRegex(),reflink:cs(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Nt._label).getRegex()});Nt.gfm=Qi({},Nt.normal,{escape:cs(Nt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Nt.gfm.url=cs(Nt.gfm.url,"i").replace("email",Nt.gfm._extended_email).getRegex();Nt.breaks=Qi({},Nt.gfm,{br:cs(Nt.br).replace("{2,}","*").getRegex(),text:cs(Nt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Det(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function $O(e){let t="",n,s;const o=e.length;for(n=0;n<o;n++)s=e.charCodeAt(n),Math.random()>.5&&(s="x"+s.toString(16)),t+="&#"+s+";";return t}class nl{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ch,this.options.tokenizer=this.options.tokenizer||new PT,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Xt.normal,inline:Nt.normal};this.options.pedantic?(n.block=Xt.pedantic,n.inline=Nt.pedantic):this.options.gfm&&(n.block=Xt.gfm,this.options.breaks?n.inline=Nt.breaks:n.inline=Nt.gfm),this.tokenizer.rules=n}static get rules(){return{block:Xt,inline:Nt}}static lex(t,n){return new nl(n).lex(t)}static lexInline(t,n){return new nl(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(t,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(t,n=[]){this.options.pedantic&&(t=t.replace(/^ +$/gm,""));let s,o,r,i;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,n))?(t=t.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+s.raw,o.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),n.push(s);continue}if(r=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=t.slice(1);let u;this.options.extensions.startBlock.forEach(function(c){u=c.call({lexer:this},l),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(r=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){o=n[n.length-1],i&&o.type==="paragraph"?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(s),i=r.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(t,n){this.inlineQueue.push({src:t,tokens:n})}inlineTokens(t,n=[]){let s,o,r,i=t,a,l,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,a.index)+"["+xO("a",a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,a.index)+"["+xO("a",a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(i))!=null;)i=i.slice(0,a.index)+"++"+i.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(s=c.call({lexer:this},t,n))?(t=t.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),o=n[n.length-1],o&&s.type==="text"&&o.type==="text"?(o.raw+=s.raw,o.text+=s.text):n.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length),o=n[n.length-1],o&&s.type==="text"&&o.type==="text"?(o.raw+=s.raw,o.text+=s.text):n.push(s);continue}if(s=this.tokenizer.emStrong(t,i,u)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.autolink(t,$O)){t=t.substring(s.raw.length),n.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t,$O))){t=t.substring(s.raw.length),n.push(s);continue}if(r=t,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=t.slice(1);let f;this.options.extensions.startInline.forEach(function(h){f=h.call({lexer:this},d),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(r=t.substring(0,c+1))}if(s=this.tokenizer.inlineText(r,Det)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(u=s.raw.slice(-1)),l=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=s.raw,o.text+=s.text):n.push(s);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}}class FT{constructor(t){this.options=t||ch}code(t,n,s){const o=(n||"").match(/\S*/)[0];if(this.options.highlight){const r=this.options.highlight(t,o);r!=null&&r!==t&&(s=!0,t=r)}return t=t.replace(/\n$/,"")+`
`,o?'<pre><code class="'+this.options.langPrefix+ho(o,!0)+'">'+(s?t:ho(t,!0))+`</code></pre>
`:"<pre><code>"+(s?t:ho(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
`+t+`</blockquote>
`}html(t){return t}heading(t,n,s,o){return this.options.headerIds?"<h"+n+' id="'+this.options.headerPrefix+o.slug(s)+'">'+t+"</h"+n+`>
`:"<h"+n+">"+t+"</h"+n+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,n,s){const o=n?"ol":"ul",r=n&&s!==1?' start="'+s+'"':"";return"<"+o+r+`>
`+t+"</"+o+`>
`}listitem(t){return"<li>"+t+`</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>"+t+`</p>
`}table(t,n){return n&&(n="<tbody>"+n+"</tbody>"),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
`+t+`</tr>
`}tablecell(t,n){const s=n.header?"th":"td";return(n.align?"<"+s+' align="'+n.align+'">':"<"+s+">")+t+"</"+s+`>
`}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,n,s){if(t=wO(this.options.sanitize,this.options.baseUrl,t),t===null)return s;let o='<a href="'+ho(t)+'"';return n&&(o+=' title="'+n+'"'),o+=">"+s+"</a>",o}image(t,n,s){if(t=wO(this.options.sanitize,this.options.baseUrl,t),t===null)return s;let o='<img src="'+t+'" alt="'+s+'"';return n&&(o+=' title="'+n+'"'),o+=this.options.xhtml?"/>":">",o}text(t){return t}}class jU{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,s){return""+s}image(t,n,s){return""+s}br(){return""}}class GU{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,n){let s=t,o=0;if(this.seen.hasOwnProperty(s)){o=this.seen[t];do o++,s=t+"-"+o;while(this.seen.hasOwnProperty(s))}return n||(this.seen[t]=o,this.seen[s]=0),s}slug(t,n={}){const s=this.serialize(t);return this.getNextSafeSlug(s,n.dryrun)}}class sl{constructor(t){this.options=t||ch,this.options.renderer=this.options.renderer||new FT,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new jU,this.slugger=new GU}static parse(t,n){return new sl(n).parse(t)}static parseInline(t,n){return new sl(n).parseInline(t)}parse(t,n=!0){let s="",o,r,i,a,l,u,c,d,f,h,p,m,g,v,b,w,y,k,x;const C=t.length;for(o=0;o<C;o++){if(h=t[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(x=this.options.extensions.renderers[h.type].call({parser:this},h),x!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){s+=x||"";continue}switch(h.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(h.tokens),h.depth,HU(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(d="",c="",a=h.header.length,r=0;r<a;r++)c+=this.renderer.tablecell(this.parseInline(h.header[r].tokens),{header:!0,align:h.align[r]});for(d+=this.renderer.tablerow(c),f="",a=h.rows.length,r=0;r<a;r++){for(u=h.rows[r],c="",l=u.length,i=0;i<l;i++)c+=this.renderer.tablecell(this.parseInline(u[i].tokens),{header:!1,align:h.align[i]});f+=this.renderer.tablerow(c)}s+=this.renderer.table(d,f);continue}case"blockquote":{f=this.parse(h.tokens),s+=this.renderer.blockquote(f);continue}case"list":{for(p=h.ordered,m=h.start,g=h.loose,a=h.items.length,f="",r=0;r<a;r++)b=h.items[r],w=b.checked,y=b.task,v="",b.task&&(k=this.renderer.checkbox(w),g?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=k+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=k+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:k}):v+=k),v+=this.parse(b.tokens,g),f+=this.renderer.listitem(v,y,w);s+=this.renderer.list(f,p,m);continue}case"html":{s+=this.renderer.html(h.text);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(f=h.tokens?this.parseInline(h.tokens):h.text;o+1<C&&t[o+1].type==="text";)h=t[++o],f+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);s+=n?this.renderer.paragraph(f):f;continue}default:{const S='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(S);return}else throw new Error(S)}}}return s}parseInline(t,n){n=n||this.renderer;let s="",o,r,i;const a=t.length;for(o=0;o<a;o++){if(r=t[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){s+=i||"";continue}switch(r.type){case"escape":{s+=n.text(r.text);break}case"html":{s+=n.html(r.text);break}case"link":{s+=n.link(r.href,r.title,this.parseInline(r.tokens,n));break}case"image":{s+=n.image(r.href,r.title,r.text);break}case"strong":{s+=n.strong(this.parseInline(r.tokens,n));break}case"em":{s+=n.em(this.parseInline(r.tokens,n));break}case"codespan":{s+=n.codespan(r.text);break}case"br":{s+=n.br();break}case"del":{s+=n.del(this.parseInline(r.tokens,n));break}case"text":{s+=n.text(r.text);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return s}}function pn(e,t,n){if(typeof e=="undefined"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof t=="function"&&(n=t,t=null),t=Qi({},pn.defaults,t||{}),UU(t),n){const s=t.highlight;let o;try{o=nl.lex(e,t)}catch(a){return n(a)}const r=function(a){let l;if(!a)try{t.walkTokens&&pn.walkTokens(o,t.walkTokens),l=sl.parse(o,t)}catch(u){a=u}return t.highlight=s,a?n(a):n(null,l)};if(!s||s.length<3||(delete t.highlight,!o.length))return r();let i=0;pn.walkTokens(o,function(a){a.type==="code"&&(i++,setTimeout(()=>{s(a.text,a.lang,function(l,u){if(l)return r(l);u!=null&&u!==a.text&&(a.text=u,a.escaped=!0),i--,i===0&&r()})},0))}),i===0&&r();return}try{const s=nl.lex(e,t);return t.walkTokens&&pn.walkTokens(s,t.walkTokens),sl.parse(s,t)}catch(s){if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+ho(s.message+"",!0)+"</pre>";throw s}}pn.options=pn.setOptions=function(e){return Qi(pn.defaults,e),met(pn.defaults),pn};pn.getDefaults=WU;pn.defaults=ch;pn.use=function(...e){const t=Qi({},...e),n=pn.defaults.extensions||{renderers:{},childTokens:{}};let s;e.forEach(o=>{if(o.extensions&&(s=!0,o.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const i=n.renderers?n.renderers[r.name]:null;i?n.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:n.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");n[r.level]?n[r.level].unshift(r.tokenizer):n[r.level]=[r.tokenizer],r.start&&(r.level==="block"?n.startBlock?n.startBlock.push(r.start):n.startBlock=[r.start]:r.level==="inline"&&(n.startInline?n.startInline.push(r.start):n.startInline=[r.start]))}r.childTokens&&(n.childTokens[r.name]=r.childTokens)})),o.renderer){const r=pn.defaults.renderer||new FT;for(const i in o.renderer){const a=r[i];r[i]=(...l)=>{let u=o.renderer[i].apply(r,l);return u===!1&&(u=a.apply(r,l)),u}}t.renderer=r}if(o.tokenizer){const r=pn.defaults.tokenizer||new PT;for(const i in o.tokenizer){const a=r[i];r[i]=(...l)=>{let u=o.tokenizer[i].apply(r,l);return u===!1&&(u=a.apply(r,l)),u}}t.tokenizer=r}if(o.walkTokens){const r=pn.defaults.walkTokens;t.walkTokens=function(i){o.walkTokens.call(this,i),r&&r.call(this,i)}}s&&(t.extensions=n),pn.setOptions(t)})};pn.walkTokens=function(e,t){for(const n of e)switch(t.call(pn,n),n.type){case"table":{for(const s of n.header)pn.walkTokens(s.tokens,t);for(const s of n.rows)for(const o of s)pn.walkTokens(o.tokens,t);break}case"list":{pn.walkTokens(n.items,t);break}default:pn.defaults.extensions&&pn.defaults.extensions.childTokens&&pn.defaults.extensions.childTokens[n.type]?pn.defaults.extensions.childTokens[n.type].forEach(function(s){pn.walkTokens(n[s],t)}):n.tokens&&pn.walkTokens(n.tokens,t)}};pn.parseInline=function(e,t){if(typeof e=="undefined"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=Qi({},pn.defaults,t||{}),UU(t);try{const n=nl.lexInline(e,t);return t.walkTokens&&pn.walkTokens(n,t.walkTokens),sl.parseInline(n,t)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+ho(n.message+"",!0)+"</pre>";throw n}};pn.Parser=sl;pn.parser=sl.parse;pn.Renderer=FT;pn.TextRenderer=jU;pn.Lexer=nl;pn.lexer=nl.lex;pn.Tokenizer=PT;pn.Slugger=GU;pn.parse=pn;sl.parse;nl.lex;const Ret={name:"HyInput",props:{modelValue:String,placeholder:String},emits:["update:modelValue","input"],methods:{passInput(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}},Met=["value"],Oet={key:0,class:"hy-input-placeholder"},Pet={for:"hy-input-inner"};function Fet(e,t,n,s,o,r){return _(),U("div",{class:W(["hy-input",{"has-text":n.modelValue,anim:n.placeholder}])},[q("input",Wn({id:"hy-input-inner",class:"hy-input-inner",value:n.modelValue,onInput:t[0]||(t[0]=i=>r.passInput(i.target.value))},e.$attrs,{autocomplete:"off"}),null,16,Met),n.placeholder?(_(),U("div",Oet,[q("label",Pet,He(n.placeholder),1)])):me("",!0)],2)}var Let=ml(Ret,[["render",Fet],["__scopeId","data-v-1f47755c"]]),Bet=Object.defineProperty,zet=Object.getOwnPropertyDescriptor,Vet=(e,t,n,s)=>{for(var o=s>1?void 0:s?zet(t,n):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(o=(s?i(t,n,o):i(o))||o);return s&&o&&Bet(t,n,o),o};let OC=class extends iu{constructor(){super(...arguments);on(this,"options",kC);on(this,"marked",pn)}getClass(t){const n={modified:t.modified};return n[t.type]=!0,n}reset(){az.confirm("Do you really want to reset?").then(()=>{kC.forEach(t=>t.reset()),this.$forceUpdate()})}};OC=Vet([Kc({components:{HyInput:Let}})],OC);const Wet=OC,KU=e=>(cm("data-v-03154754"),e=e(),dm(),e),Het={id:"Settings",class:"card shadow"},Uet=KU(()=>q("div",{id:"text"},[q("div",{id:"title"},"Settings"),q("div",{id:"subtitle"},"You can toggle things here!")],-1)),jet={id:"options"},Get=["innerHTML"],Ket={key:0},qet={key:1},Yet={key:2,class:"modified-text"},Xet=KU(()=>q("span",null,"Modified!",-1)),Zet=Yt(),Jet=Yt("Default is "),Qet=Yt("Reset");function ett(e,t,n,s,o,r){const i=Ne("el-switch"),a=Ne("hy-input"),l=Ne("el-button");return _(),U("div",Het,[Uet,q("div",jet,[(_(!0),U(lt,null,Zt(e.options,u=>(_(),U("div",{class:W(e.getClass(u))},[q("div",{class:"desc",innerHTML:e.marked(u.desc)},null,8,Get),u.type==="boolean"?(_(),U("div",Ket,[fe(i,{modelValue:u.val,"onUpdate:modelValue":c=>u.val=c,"active-color":"pink"},null,8,["modelValue","onUpdate:modelValue"])])):me("",!0),u.type==="string"?(_(),U("div",qet,[fe(a,{modelValue:u.val,"onUpdate:modelValue":c=>u.val=c},null,8,["modelValue","onUpdate:modelValue"])])):me("",!0),u.modified?(_(),U("div",Yet,[Xet,Zet,q("span",null,[Jet,q("code",null,He(u.def),1)])])):me("",!0)],2))),256))]),fe(l,{type:"danger",plain:"",round:"",onClick:e.reset},{default:de(()=>[Qet]),_:1},8,["onClick"])])}var ttt=ml(Wet,[["render",ett],["__scopeId","data-v-03154754"]]);/*!
  * vue-router v4.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const qU=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",dh=e=>qU?Symbol(e):"_vr_"+e,ntt=dh("rvlm"),SO=dh("rvd"),LT=dh("r"),YU=dh("rl"),PC=dh("rvl"),Od=typeof window!="undefined";function stt(e){return e.__esModule||qU&&e[Symbol.toStringTag]==="Module"}const os=Object.assign;function wk(e,t){const n={};for(const s in t){const o=t[s];n[s]=Array.isArray(o)?o.map(e):e(o)}return n}const vp=()=>{},ott=/\/$/,rtt=e=>e.replace(ott,"");function kk(e,t,n="/"){let s,o={},r="",i="";const a=t.indexOf("?"),l=t.indexOf("#",a>-1?a:0);return a>-1&&(s=t.slice(0,a),r=t.slice(a+1,l>-1?l:t.length),o=e(r)),l>-1&&(s=s||t.slice(0,l),i=t.slice(l,t.length)),s=utt(s!=null?s:t,n),{fullPath:s+(r&&"?")+r+i,path:s,query:o,hash:i}}function itt(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function IO(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function att(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&Mf(t.matched[s],n.matched[o])&&XU(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Mf(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function XU(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ltt(e[n],t[n]))return!1;return!0}function ltt(e,t){return Array.isArray(e)?EO(e,t):Array.isArray(t)?EO(t,e):e===t}function EO(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function utt(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/");let o=n.length-1,r,i;for(r=0;r<s.length;r++)if(i=s[r],!(o===1||i==="."))if(i==="..")o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(r-(r===s.length?1:0)).join("/")}var im;(function(e){e.pop="pop",e.push="push"})(im||(im={}));var bp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(bp||(bp={}));function ctt(e){if(!e)if(Od){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),rtt(e)}const dtt=/^[^#]+#/;function ftt(e,t){return e.replace(dtt,"#")+t}function htt(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Iw=()=>({left:window.pageXOffset,top:window.pageYOffset});function ptt(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=htt(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function TO(e,t){return(history.state?history.state.position-t:-1)+e}const FC=new Map;function mtt(e,t){FC.set(e,t)}function gtt(e){const t=FC.get(e);return FC.delete(e),t}let vtt=()=>location.protocol+"//"+location.host;function ZU(e,t){const{pathname:n,search:s,hash:o}=t,r=e.indexOf("#");if(r>-1){let a=o.includes(e.slice(r))?e.slice(r).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),IO(l,"")}return IO(n,e)+s+o}function btt(e,t,n,s){let o=[],r=[],i=null;const a=({state:f})=>{const h=ZU(e,location),p=n.value,m=t.value;let g=0;if(f){if(n.value=h,t.value=f,i&&i===p){i=null;return}g=m?f.position-m.position:0}else s(h);o.forEach(v=>{v(n.value,p,{delta:g,type:im.pop,direction:g?g>0?bp.forward:bp.back:bp.unknown})})};function l(){i=n.value}function u(f){o.push(f);const h=()=>{const p=o.indexOf(f);p>-1&&o.splice(p,1)};return r.push(h),h}function c(){const{history:f}=window;!f.state||f.replaceState(os({},f.state,{scroll:Iw()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:d}}function _O(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?Iw():null}}function ytt(e){const{history:t,location:n}=window,s={value:ZU(e,n)},o={value:t.state};o.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:vtt()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),o.value=u}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function i(l,u){const c=os({},t.state,_O(o.value.back,l,o.value.forward,!0),u,{position:o.value.position});r(l,c,!0),s.value=l}function a(l,u){const c=os({},o.value,t.state,{forward:l,scroll:Iw()});r(c.current,c,!0);const d=os({},_O(s.value,l,null),{position:c.position+1},u);r(l,d,!1),s.value=l}return{location:s,state:o,push:a,replace:i}}function wtt(e){e=ctt(e);const t=ytt(e),n=btt(e,t.state,t.location,t.replace);function s(r,i=!0){i||n.pauseListeners(),history.go(r)}const o=os({location:"",base:e,go:s,createHref:ftt.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function ktt(e){return typeof e=="string"||e&&typeof e=="object"}function JU(e){return typeof e=="string"||typeof e=="symbol"}const Cl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},QU=dh("nf");var NO;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NO||(NO={}));function Of(e,t){return os(new Error,{type:e,[QU]:!0},t)}function $l(e,t){return e instanceof Error&&QU in e&&(t==null||!!(e.type&t))}const AO="[^/]+?",xtt={sensitive:!1,strict:!1,start:!0,end:!0},Ctt=/[.+*?^${}()[\]/\\]/g;function $tt(e,t){const n=os({},xtt,t),s=[];let o=n.start?"^":"";const r=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(o+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(o+="/"),o+=f.value.replace(Ctt,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:m,optional:g,regexp:v}=f;r.push({name:p,repeatable:m,optional:g});const b=v||AO;if(b!==AO){h+=10;try{new RegExp(`(${b})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+y.message)}}let w=m?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(w=g&&u.length<2?`(?:/${w})`:"/"+w),g&&(w+="?"),o+=w,h+=20,g&&(h+=-8),m&&(h+=-20),b===".*"&&(h+=-50)}c.push(h)}s.push(c)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function a(u){const c=u.match(i),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",p=r[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:p,repeatable:m,optional:g}=h,v=p in u?u[p]:"";if(Array.isArray(v)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Array.isArray(v)?v.join("/"):v;if(!b)if(g)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c}return{re:i,score:s,keys:r,parse:a,stringify:l}}function Stt(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Itt(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const r=Stt(s[n],o[n]);if(r)return r;n++}return o.length-s.length}const Ett={type:0,value:""},Ttt=/[a-zA-Z0-9_]/;function _tt(e){if(!e)return[[]];if(e==="/")return[[Ett]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,s=n;const o=[];let r;function i(){r&&o.push(r),r=[]}let a=0,l,u="",c="";function d(){!u||(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),i()):l===":"?(d(),n=1):f();break;case 4:f(),n=s;break;case 1:l==="("?n=2:Ttt.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),i(),o}function Ntt(e,t,n){const s=$tt(_tt(e.path),n),o=os(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Att(e,t){const n=[],s=new Map;t=RO({strict:!1,end:!0,sensitive:!1},t);function o(c){return s.get(c)}function r(c,d,f){const h=!f,p=Rtt(c);p.aliasOf=f&&f.record;const m=RO(t,c),g=[p];if("alias"in c){const w=typeof c.alias=="string"?[c.alias]:c.alias;for(const y of w)g.push(os({},p,{components:f?f.record.components:p.components,path:y,aliasOf:f?f.record:p}))}let v,b;for(const w of g){const{path:y}=w;if(d&&y[0]!=="/"){const k=d.record.path,x=k[k.length-1]==="/"?"":"/";w.path=d.record.path+(y&&x+y)}if(v=Ntt(w,d,m),f?f.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),h&&c.name&&!DO(v)&&i(c.name)),"children"in p){const k=p.children;for(let x=0;x<k.length;x++)r(k[x],v,f&&f.children[x])}f=f||v,l(v)}return b?()=>{i(b)}:vp}function i(c){if(JU(c)){const d=s.get(c);d&&(s.delete(c),n.splice(n.indexOf(d),1),d.children.forEach(i),d.alias.forEach(i))}else{const d=n.indexOf(c);d>-1&&(n.splice(d,1),c.record.name&&s.delete(c.record.name),c.children.forEach(i),c.alias.forEach(i))}}function a(){return n}function l(c){let d=0;for(;d<n.length&&Itt(c,n[d])>=0&&(c.record.path!==n[d].record.path||!e9(c,n[d]));)d++;n.splice(d,0,c),c.record.name&&!DO(c)&&s.set(c.record.name,c)}function u(c,d){let f,h={},p,m;if("name"in c&&c.name){if(f=s.get(c.name),!f)throw Of(1,{location:c});m=f.record.name,h=os(Dtt(d.params,f.keys.filter(b=>!b.optional).map(b=>b.name)),c.params),p=f.stringify(h)}else if("path"in c)p=c.path,f=n.find(b=>b.re.test(p)),f&&(h=f.parse(p),m=f.record.name);else{if(f=d.name?s.get(d.name):n.find(b=>b.re.test(d.path)),!f)throw Of(1,{location:c,currentLocation:d});m=f.record.name,h=os({},d.params,c.params),p=f.stringify(h)}const g=[];let v=f;for(;v;)g.unshift(v.record),v=v.parent;return{name:m,path:p,params:h,matched:g,meta:Ott(g)}}return e.forEach(c=>r(c)),{addRoute:r,resolve:u,removeRoute:i,getRoutes:a,getRecordMatcher:o}}function Dtt(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Rtt(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Mtt(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function Mtt(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="boolean"?n:n[s];return t}function DO(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Ott(e){return e.reduce((t,n)=>os(t,n.meta),{})}function RO(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function e9(e,t){return t.children.some(n=>n===e||e9(e,n))}const t9=/#/g,Ptt=/&/g,Ftt=/\//g,Ltt=/=/g,Btt=/\?/g,n9=/\+/g,ztt=/%5B/g,Vtt=/%5D/g,s9=/%5E/g,Wtt=/%60/g,o9=/%7B/g,Htt=/%7C/g,r9=/%7D/g,Utt=/%20/g;function BT(e){return encodeURI(""+e).replace(Htt,"|").replace(ztt,"[").replace(Vtt,"]")}function jtt(e){return BT(e).replace(o9,"{").replace(r9,"}").replace(s9,"^")}function LC(e){return BT(e).replace(n9,"%2B").replace(Utt,"+").replace(t9,"%23").replace(Ptt,"%26").replace(Wtt,"`").replace(o9,"{").replace(r9,"}").replace(s9,"^")}function Gtt(e){return LC(e).replace(Ltt,"%3D")}function Ktt(e){return BT(e).replace(t9,"%23").replace(Btt,"%3F")}function qtt(e){return e==null?"":Ktt(e).replace(Ftt,"%2F")}function Yb(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Ytt(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<s.length;++o){const r=s[o].replace(n9," "),i=r.indexOf("="),a=Yb(i<0?r:r.slice(0,i)),l=i<0?null:Yb(r.slice(i+1));if(a in t){let u=t[a];Array.isArray(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function MO(e){let t="";for(let n in e){const s=e[n];if(n=Gtt(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(s)?s.map(r=>r&&LC(r)):[s&&LC(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Xtt(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Array.isArray(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}function Rh(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Al(e,t,n,s,o){const r=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((i,a)=>{const l=d=>{d===!1?a(Of(4,{from:n,to:t})):d instanceof Error?a(d):ktt(d)?a(Of(2,{from:t,to:d})):(r&&s.enterCallbacks[o]===r&&typeof d=="function"&&r.push(d),i())},u=e.call(s&&s.instances[o],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(d=>a(d))})}function xk(e,t,n,s){const o=[];for(const r of e)for(const i in r.components){let a=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(Ztt(a)){const u=(a.__vccOpts||a)[t];u&&o.push(Al(u,n,s,r,i))}else{let l=a();o.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${i}" at "${r.path}"`));const c=stt(u)?u.default:u;r.components[i]=c;const f=(c.__vccOpts||c)[t];return f&&Al(f,n,s,r,i)()}))}}return o}function Ztt(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function OO(e){const t=rt(LT),n=rt(YU),s=O(()=>t.resolve(N(e.to))),o=O(()=>{const{matched:l}=s.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(Mf.bind(null,c));if(f>-1)return f;const h=PO(l[u-2]);return u>1&&PO(c)===h&&d[d.length-1].path!==h?d.findIndex(Mf.bind(null,l[u-2])):f}),r=O(()=>o.value>-1&&tnt(n.params,s.value.params)),i=O(()=>o.value>-1&&o.value===n.matched.length-1&&XU(n.params,s.value.params));function a(l={}){return ent(l)?t[N(e.replace)?"replace":"push"](N(e.to)).catch(vp):Promise.resolve()}return{route:s,href:O(()=>s.value.href),isActive:r,isExactActive:i,navigate:a}}const Jtt=xe({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:OO,setup(e,{slots:t}){const n=vn(OO(e)),{options:s}=rt(LT),o=O(()=>({[FO(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[FO(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:at("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),Qtt=Jtt;function ent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function tnt(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!Array.isArray(o)||o.length!==s.length||s.some((r,i)=>r!==o[i]))return!1}return!0}function PO(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const FO=(e,t,n)=>e!=null?e:t!=null?t:n,nnt=xe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const s=rt(PC),o=O(()=>e.route||s.value),r=rt(SO,0),i=O(()=>o.value.matched[r]);Gt(SO,r+1),Gt(ntt,i),Gt(PC,o);const a=j();return We(()=>[a.value,i.value,e.name],([l,u,c],[d,f,h])=>{u&&(u.instances[c]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Mf(u,f)||!d)&&(u.enterCallbacks[c]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=o.value,u=i.value,c=u&&u.components[e.name],d=e.name;if(!c)return LO(n.default,{Component:c,route:l});const f=u.props[e.name],h=f?f===!0?l.params:typeof f=="function"?f(l):f:null,m=at(c,os({},h,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(u.instances[d]=null)},ref:a}));return LO(n.default,{Component:m,route:l})||m}}});function LO(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const snt=nnt;function ont(e){const t=Att(e.routes,e),n=e.parseQuery||Ytt,s=e.stringifyQuery||MO,o=e.history,r=Rh(),i=Rh(),a=Rh(),l=Ns(Cl);let u=Cl;Od&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=wk.bind(null,se=>""+se),d=wk.bind(null,qtt),f=wk.bind(null,Yb);function h(se,Q){let ae,pe;return JU(se)?(ae=t.getRecordMatcher(se),pe=Q):pe=se,t.addRoute(pe,ae)}function p(se){const Q=t.getRecordMatcher(se);Q&&t.removeRoute(Q)}function m(){return t.getRoutes().map(se=>se.record)}function g(se){return!!t.getRecordMatcher(se)}function v(se,Q){if(Q=os({},Q||l.value),typeof se=="string"){const qe=kk(n,se,Q.path),ne=t.resolve({path:qe.path},Q),ue=o.createHref(qe.fullPath);return os(qe,ne,{params:f(ne.params),hash:Yb(qe.hash),redirectedFrom:void 0,href:ue})}let ae;if("path"in se)ae=os({},se,{path:kk(n,se.path,Q.path).path});else{const qe=os({},se.params);for(const ne in qe)qe[ne]==null&&delete qe[ne];ae=os({},se,{params:d(se.params)}),Q.params=d(Q.params)}const pe=t.resolve(ae,Q),ke=se.hash||"";pe.params=c(f(pe.params));const Be=itt(s,os({},se,{hash:jtt(ke),path:pe.path})),je=o.createHref(Be);return os({fullPath:Be,hash:ke,query:s===MO?Xtt(se.query):se.query||{}},pe,{redirectedFrom:void 0,href:je})}function b(se){return typeof se=="string"?kk(n,se,l.value.path):os({},se)}function w(se,Q){if(u!==se)return Of(8,{from:Q,to:se})}function y(se){return C(se)}function k(se){return y(os(b(se),{replace:!0}))}function x(se){const Q=se.matched[se.matched.length-1];if(Q&&Q.redirect){const{redirect:ae}=Q;let pe=typeof ae=="function"?ae(se):ae;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=b(pe):{path:pe},pe.params={}),os({query:se.query,hash:se.hash,params:se.params},pe)}}function C(se,Q){const ae=u=v(se),pe=l.value,ke=se.state,Be=se.force,je=se.replace===!0,qe=x(ae);if(qe)return C(os(b(qe),{state:ke,force:Be,replace:je}),Q||ae);const ne=ae;ne.redirectedFrom=Q;let ue;return!Be&&att(s,pe,ae)&&(ue=Of(16,{to:ne,from:pe}),J(pe,pe,!0,!1)),(ue?Promise.resolve(ue):T(ne,pe)).catch(Se=>$l(Se)?$l(Se,2)?Se:Y(Se):M(Se,ne,pe)).then(Se=>{if(Se){if($l(Se,2))return C(os(b(Se.to),{state:ke,force:Be,replace:je}),Q||ne)}else Se=R(ne,pe,!0,je,ke);return A(ne,pe,Se),Se})}function S(se,Q){const ae=w(se,Q);return ae?Promise.reject(ae):Promise.resolve()}function T(se,Q){let ae;const[pe,ke,Be]=rnt(se,Q);ae=xk(pe.reverse(),"beforeRouteLeave",se,Q);for(const qe of pe)qe.leaveGuards.forEach(ne=>{ae.push(Al(ne,se,Q))});const je=S.bind(null,se,Q);return ae.push(je),Ed(ae).then(()=>{ae=[];for(const qe of r.list())ae.push(Al(qe,se,Q));return ae.push(je),Ed(ae)}).then(()=>{ae=xk(ke,"beforeRouteUpdate",se,Q);for(const qe of ke)qe.updateGuards.forEach(ne=>{ae.push(Al(ne,se,Q))});return ae.push(je),Ed(ae)}).then(()=>{ae=[];for(const qe of se.matched)if(qe.beforeEnter&&!Q.matched.includes(qe))if(Array.isArray(qe.beforeEnter))for(const ne of qe.beforeEnter)ae.push(Al(ne,se,Q));else ae.push(Al(qe.beforeEnter,se,Q));return ae.push(je),Ed(ae)}).then(()=>(se.matched.forEach(qe=>qe.enterCallbacks={}),ae=xk(Be,"beforeRouteEnter",se,Q),ae.push(je),Ed(ae))).then(()=>{ae=[];for(const qe of i.list())ae.push(Al(qe,se,Q));return ae.push(je),Ed(ae)}).catch(qe=>$l(qe,8)?qe:Promise.reject(qe))}function A(se,Q,ae){for(const pe of a.list())pe(se,Q,ae)}function R(se,Q,ae,pe,ke){const Be=w(se,Q);if(Be)return Be;const je=Q===Cl,qe=Od?history.state:{};ae&&(pe||je?o.replace(se.fullPath,os({scroll:je&&qe&&qe.scroll},ke)):o.push(se.fullPath,ke)),l.value=se,J(se,Q,ae,je),Y()}let L;function P(){L=o.listen((se,Q,ae)=>{const pe=v(se),ke=x(pe);if(ke){C(os(ke,{replace:!0}),pe).catch(vp);return}u=pe;const Be=l.value;Od&&mtt(TO(Be.fullPath,ae.delta),Iw()),T(pe,Be).catch(je=>$l(je,12)?je:$l(je,2)?(C(je.to,pe).then(qe=>{$l(qe,20)&&!ae.delta&&ae.type===im.pop&&o.go(-1,!1)}).catch(vp),Promise.reject()):(ae.delta&&o.go(-ae.delta,!1),M(je,pe,Be))).then(je=>{je=je||R(pe,Be,!1),je&&(ae.delta?o.go(-ae.delta,!1):ae.type===im.pop&&$l(je,20)&&o.go(-1,!1)),A(pe,Be,je)}).catch(vp)})}let V=Rh(),H=Rh(),F;function M(se,Q,ae){Y(se);const pe=H.list();return pe.length?pe.forEach(ke=>ke(se,Q,ae)):console.error(se),Promise.reject(se)}function B(){return F&&l.value!==Cl?Promise.resolve():new Promise((se,Q)=>{V.add([se,Q])})}function Y(se){return F||(F=!se,P(),V.list().forEach(([Q,ae])=>se?ae(se):Q()),V.reset()),se}function J(se,Q,ae,pe){const{scrollBehavior:ke}=e;if(!Od||!ke)return Promise.resolve();const Be=!ae&&gtt(TO(se.fullPath,0))||(pe||!ae)&&history.state&&history.state.scroll||null;return vt().then(()=>ke(se,Q,Be)).then(je=>je&&ptt(je)).catch(je=>M(je,se,Q))}const ee=se=>o.go(se);let te;const re=new Set;return{currentRoute:l,addRoute:h,removeRoute:p,hasRoute:g,getRoutes:m,resolve:v,options:e,push:y,replace:k,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:r.add,beforeResolve:i.add,afterEach:a.add,onError:H.add,isReady:B,install(se){const Q=this;se.component("RouterLink",Qtt),se.component("RouterView",snt),se.config.globalProperties.$router=Q,Object.defineProperty(se.config.globalProperties,"$route",{enumerable:!0,get:()=>N(l)}),Od&&!te&&l.value===Cl&&(te=!0,y(o.location).catch(ke=>{}));const ae={};for(const ke in Cl)ae[ke]=O(()=>l.value[ke]);se.provide(LT,Q),se.provide(YU,vn(ae)),se.provide(PC,l);const pe=se.unmount;re.add(se),se.unmount=function(){re.delete(se),re.size<1&&(u=Cl,L&&L(),l.value=Cl,te=!1,F=!1),pe()}}}}function Ed(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function rnt(e,t){const n=[],s=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let i=0;i<r;i++){const a=t.matched[i];a&&(e.matched.find(u=>Mf(u,a))?s.push(a):n.push(a));const l=e.matched[i];l&&(t.matched.find(u=>Mf(u,l))||o.push(l))}return[n,s,o]}const int=[{path:"/",name:"Home",component:det},{path:"/about",name:"About",component:pet},{path:"/settings",name:"Settings",component:ttt}],ant=ont({history:wtt(),routes:int});/*!
* chartjs-plugin-annotation v1.4.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2022 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const i9=["click","dblclick"],BC=["enter","leave"],zT=i9.concat(BC);function lnt(e,t,n){t.listened=!1,t.moveListened=!1,zT.forEach(s=>{typeof n[s]=="function"?(t.listened=!0,t.listeners[s]=n[s]):Js(t.listeners[s])&&delete t.listeners[s]}),BC.forEach(s=>{typeof n[s]=="function"&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(s=>{t.listened||i9.forEach(o=>{typeof s[o]=="function"&&(t.listened=!0)}),t.moveListened||BC.forEach(o=>{typeof s[o]=="function"&&(t.listened=!0,t.moveListened=!0)})})}function unt(e,t,n){if(e.listened)switch(t.type){case"mousemove":case"mouseout":cnt(e,t);break;case"click":fnt(e,t,n);break}}function cnt(e,t){if(!e.moveListened)return;let n;t.type==="mousemove"&&(n=a9(e.elements,t));const s=e.hovered;e.hovered=n,dnt(e,{previous:s,element:n},t)}function dnt(e,t,n){const{previous:s,element:o}=t;s&&s!==o&&yp(s.options.leave||e.listeners.leave,s,n),o&&o!==s&&yp(o.options.enter||e.listeners.enter,o,n)}function fnt(e,t,n){const s=e.listeners,o=a9(e.elements,t);if(o){const r=o.options,i=r.dblclick||s.dblclick,a=r.click||s.click;o.clickTimeout?(clearTimeout(o.clickTimeout),delete o.clickTimeout,yp(i,o,t)):i?o.clickTimeout=setTimeout(()=>{delete o.clickTimeout,yp(a,o,t)},n.dblClickSpeed):yp(a,o,t)}}function yp(e,t,n){rs(e,[t.$context,n])}function a9(e,t){let n=Number.POSITIVE_INFINITY;return e.filter(s=>s.options.display&&s.inRange(t.x,t.y)).reduce((s,o)=>{const r=o.getCenterPoint(),i=em(t,r);return i<n?(s=[o],n=i):i===n&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)[0]}function hnt(e,t,n){const s=bnt(t,n);let o=BO(t,s,"min","suggestedMin");o=BO(t,s,"max","suggestedMax")||o,o&&typeof t.handleTickRangeOptions=="function"&&t.handleTickRangeOptions()}function pnt(e,t){for(const n of e)gnt(n,t)}function BO(e,t,n,s){if(Ds(t[n])&&!mnt(e.options,n,s)){const o=e[n]!==t[n];return e[n]=t[n],o}}function mnt(e,t,n){return Js(e[t])||Js(e[n])}function gnt(e,t){for(const n of["scaleID","xScaleID","yScaleID"])e[n]&&!t[e[n]]&&vnt(e,n)&&console.warn(`No scale found with id '${e[n]}' for annotation '${e.id}'`)}function vnt(e,t){if(t==="scaleID")return!0;const n=t.charAt(0);for(const s of["Min","Max","Value"])if(Js(e[n+s]))return!0;return!1}function bnt(e,t){const n=e.axis,s=e.id,o=n+"ScaleID",r={min:nn(e.min,Number.NEGATIVE_INFINITY),max:nn(e.max,Number.POSITIVE_INFINITY)};for(const i of t)i.scaleID===s?zO(i,e,["value","endValue"],r):i[o]===s&&zO(i,e,[n+"Min",n+"Max",n+"Value"],r);return r}function zO(e,t,n,s){for(const o of n){const r=e[o];if(Js(r)){const i=t.parse(r);s.min=Math.min(s.min,i),s.max=Math.max(s.max,i)}}}const rv=.001,VT=(e,t,n)=>Math.min(n,Math.max(t,e));function ynt(e,t,n){for(const s of Object.keys(e))e[s]=VT(e[s],t,n);return e}function wnt(e,t,n,s){if(!e||!t||n<=0)return!1;const o=s/2||0;return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(n+o,2)}function l9(e,t,{x:n,y:s,width:o,height:r},i){const a=i/2;return e>=n-a-rv&&e<=n+o+a+rv&&t>=s-a-rv&&t<=s+r+a+rv}function u9(e,t){const{x:n,y:s}=e.getProps(["x","y"],t);return{x:n,y:s}}const knt=(e,t)=>t>e||e.length>t.length&&e.substr(0,t.length)===t;function xnt(e,t,n,s=!0){const o=n.split(".");let r=0;for(const i of t.split(".")){const a=o[r++];if(parseInt(i,10)<parseInt(a,10))break;if(knt(a,i)){if(s)throw new Error(`${e} v${n} is not supported. v${t} or newer is required.`);return!1}}return!0}const c9=e=>typeof e=="string"&&e.endsWith("%"),d9=e=>VT(parseFloat(e)/100,0,1);function WT(e,t){return t==="start"?0:t==="end"?e:c9(t)?d9(t)*e:e/2}function Pf(e,t){return typeof t=="number"?t:c9(t)?d9(t)*e:e}function Cnt(e,t){const{x:n,width:s}=e,o=t.textAlign;return o==="center"?n+s/2:o==="end"||o==="right"?n+s:n}function f9(e){return gn(e)?{x:nn(e.x,"center"),y:nn(e.y,"center")}:(e=nn(e,"center"),{x:e,y:e})}function h9(e){return e&&(Js(e.xValue)||Js(e.yValue))}const Ck=new Map;function HT(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function Xb(e,t,n){if(n){const s=t.getCenterPoint();e.translate(s.x,s.y),e.rotate(go(n)),e.translate(-s.x,-s.y)}}function od(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle,e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle,e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function fh(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function UT(e,t){const n=t.content;if(HT(n))return{width:Pf(n.width,t.width),height:Pf(n.height,t.height)};const s=Hs(t.font),o=t.textStrokeWidth,r=Gn(n)?n:[n],i=r.join()+s.string+o+(e._measureText?"-spriting":"");if(!Ck.has(i)){e.save(),e.font=s.string;const a=r.length;let l=0;for(let c=0;c<a;c++){const d=r[c];l=Math.max(l,e.measureText(d).width+o)}e.restore();const u=a*s.lineHeight+o;Ck.set(i,{width:l,height:u})}return Ck.get(i)}function jT(e,t,n){const{x:s,y:o,width:r,height:i}=t;e.save(),fh(e,n);const a=od(e,n);e.fillStyle=n.backgroundColor,e.beginPath(),om(e,{x:s,y:o,w:r,h:i,radius:ynt(pc(nn(n.cornerRadius,n.borderRadius)),0,Math.min(r,i)/2)}),e.closePath(),e.fill(),a&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}function GT(e,t,n){const s=n.content;if(HT(s)){e.drawImage(s,t.x,t.y,t.width,t.height);return}const o=Gn(s)?s:[s],r=Hs(n.font),i=r.lineHeight,a=Cnt(t,n),l=t.y+i/2+n.textStrokeWidth/2;e.save(),e.font=r.string,e.textBaseline="middle",e.textAlign=n.textAlign,$nt(e,n)&&o.forEach((u,c)=>e.strokeText(u,a,l+c*i)),e.fillStyle=n.color,o.forEach((u,c)=>e.fillText(u,a,l+c*i)),e.restore()}function $nt(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function am(e){const{x:t,y:n,width:s,height:o}=e;return{x:t+s/2,y:n+o/2}}function n0(e,t,n){const s=Math.cos(n),o=Math.sin(n),r=t.x,i=t.y;return{x:r+s*(e.x-r)-o*(e.y-i),y:i+o*(e.x-r)+s*(e.y-i)}}function ia(e,t,n){return t=typeof t=="number"?t:e.parse(t),Ds(t)?e.getPixelForValue(t):n}function VO(e,t){if(e){const n=ia(e,t.min,t.start),s=ia(e,t.max,t.end);return{start:Math.min(n,s),end:Math.max(n,s)}}return{start:t.start,end:t.end}}function p9(e,t){const{chartArea:n,scales:s}=e,o=s[t.xScaleID],r=s[t.yScaleID];let i=n.width/2,a=n.height/2;return o&&(i=ia(o,t.xValue,i)),r&&(a=ia(r,t.yValue,a)),{x:i,y:a}}function Ew(e,t){const n=e.scales[t.xScaleID],s=e.scales[t.yScaleID];let{top:o,left:r,bottom:i,right:a}=e.chartArea;if(!n&&!s)return{};const l=VO(n,{min:t.xMin,max:t.xMax,start:r,end:a});r=l.start,a=l.end;const u=VO(s,{min:t.yMin,max:t.yMax,start:o,end:i});return o=u.start,i=u.end,{x:r,y:o,x2:a,y2:i,width:a-r,height:i-o}}function Snt(e,t){const n=p9(e,t);return{x:n.x+t.xAdjust,y:n.y+t.yAdjust,width:t.radius*2,height:t.radius*2}}function m9(e,t){if(!h9(t)){const n=Ew(e,t),s=am(n);let o=t.radius;return(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,t.radius=o),{x:s.x+t.xAdjust,y:s.y+t.yAdjust,width:o*2,height:o*2}}return Snt(e,t)}class s0 extends Fo{inRange(t,n,s){const{x:o,y:r}=n0({x:t,y:n},this.getCenterPoint(s),go(-this.options.rotation));return l9(o,r,this.getProps(["x","y","width","height"],s),this.options.borderWidth)}getCenterPoint(t){return am(this.getProps(["x","y","width","height"],t))}draw(t){t.save(),Xb(t,this,this.options.rotation),jT(t,this,this.options),t.restore()}drawLabel(t){const{x:n,y:s,width:o,height:r,options:i}=this,{label:a,borderWidth:l}=i,u=l/2,c=f9(a.position),d=ao(a.padding),f=UT(t,a),h={x:Int(this,f,c,d),y:Ent(this,f,c,d),width:f.width,height:f.height};t.save(),Xb(t,this,a.rotation),t.beginPath(),t.rect(n+u+d.left,s+u+d.top,o-l-d.width,r-l-d.height),t.clip(),GT(t,h,a),t.restore()}resolveElementProperties(t,n){return Ew(t,n)}}s0.id="boxAnnotation";s0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,cornerRadius:void 0,display:!0,label:{borderWidth:void 0,color:"black",content:null,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,xAdjust:0,yAdjust:0,width:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};s0.defaultRoutes={borderColor:"color",backgroundColor:"color"};s0.descriptors={label:{_fallback:!0}};function Int(e,t,n,s){const{x:o,x2:r,width:i,options:a}=e,{xAdjust:l,borderWidth:u}=a.label;return g9({start:o,end:r,size:i},{position:n.x,padding:{start:s.left,end:s.right},adjust:l,borderWidth:u,size:t.width})}function Ent(e,t,n,s){const{y:o,y2:r,height:i,options:a}=e,{yAdjust:l,borderWidth:u}=a.label;return g9({start:o,end:r,size:i},{position:n.y,padding:{start:s.top,end:s.bottom},adjust:l,borderWidth:u,size:t.height})}function g9(e,t){const{start:n,end:s}=e,{position:o,padding:{start:r,end:i},adjust:a,borderWidth:l}=t,u=s-l-n-r-i-t.size;return n+l/2+a+r+WT(u,o)}const KT=(e,t,n)=>({x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}),zC=(e,t,n)=>KT(t,n,Math.abs((e-t.y)/(n.y-t.y))).x,WO=(e,t,n)=>KT(t,n,Math.abs((e-t.x)/(n.x-t.x))).y,Mh=e=>e*e,Oh=.001;function HO({x:e,y:t,x2:n,y2:s},{top:o,right:r,bottom:i,left:a}){return!(e<a&&n<a||e>r&&n>r||t<o&&s<o||t>i&&s>i)}function UO({x:e,y:t},n,{top:s,right:o,bottom:r,left:i}){return e<i&&(t=WO(i,{x:e,y:t},n),e=i),e>o&&(t=WO(o,{x:e,y:t},n),e=o),t<s&&(e=zC(s,{x:e,y:t},n),t=s),t>r&&(e=zC(r,{x:e,y:t},n),t=r),{x:e,y:t}}function Tnt(e,t,n){const{x:s,y:o}=UO(e,t,n),{x:r,y:i}=UO(t,e,n);return{x:s,y:o,x2:r,y2:i,width:Math.abs(r-s),height:Math.abs(i-o)}}class o0 extends Fo{intersects(t,n,s=Oh,o){const{x:r,y:i,x2:a,y2:l}=this.getProps(["x","y","x2","y2"],o),u=a-r,c=l-i,d=Mh(u)+Mh(c),f=d===0?-1:((t-r)*u+(n-i)*c)/d;let h,p;return f<0?(h=r,p=i):f>1?(h=a,p=l):(h=r+f*u,p=i+f*c),Mh(t-h)+Mh(n-p)<=s}labelIsVisible(t,n){const s=this.options.label;return!s||!s.enabled?!1:!n||HO(this.getProps(["x","y","x2","y2"],t),n)}isOnLabel(t,n,s){if(!this.labelIsVisible(s))return!1;const{labelX:o,labelY:r,labelWidth:i,labelHeight:a,labelRotation:l}=this.getProps(["labelX","labelY","labelWidth","labelHeight","labelRotation"],s),{x:u,y:c}=n0({x:t,y:n},{x:o,y:r},-l),d=this.options.label.borderWidth/2||0,f=i/2+d,h=a/2+d;return u>=o-f-Oh&&u<=o+f+Oh&&c>=r-h-Oh&&c<=r+h+Oh}inRange(t,n,s){const o=Mh(this.options.borderWidth/2);return this.intersects(t,n,o,s)||this.isOnLabel(t,n,s)}getCenterPoint(){return{x:(this.x2+this.x)/2,y:(this.y2+this.y)/2}}draw(t){const{x:n,y:s,x2:o,y2:r,options:i}=this;if(t.save(),!od(t,i))return t.restore();fh(t,i);const a=Math.atan2(r-s,o-n),l=Math.sqrt(Math.pow(o-n,2)+Math.pow(r-s,2)),{startOpts:u,endOpts:c,startAdjust:d,endAdjust:f}=Pnt(this);t.translate(n,s),t.rotate(a),t.beginPath(),t.moveTo(0+d,0),t.lineTo(l-f,0),t.shadowColor=i.borderShadowColor,t.stroke(),YO(t,0,d,u),YO(t,l,-f,c),t.restore()}drawLabel(t,n){if(!this.labelIsVisible(!1,n))return;const{labelX:s,labelY:o,labelWidth:r,labelHeight:i,labelRotation:a,labelPadding:l,labelTextSize:u,options:{label:c}}=this;t.save(),t.translate(s,o),t.rotate(a);const d={x:-(r/2),y:-(i/2),width:r,height:i};jT(t,d,c);const f={x:-(r/2)+l.left+c.borderWidth/2,y:-(i/2)+l.top+c.borderWidth/2,width:u.width,height:u.height};GT(t,f,c),t.restore()}resolveElementProperties(t,n){const s=t.scales[n.scaleID];let{top:o,left:r,bottom:i,right:a}=t.chartArea,l,u;if(s)l=ia(s,n.value,NaN),u=ia(s,n.endValue,l),s.isHorizontal()?(r=l,a=u):(o=l,i=u);else{const h=t.scales[n.xScaleID],p=t.scales[n.yScaleID];h&&(r=ia(h,n.xMin,r),a=ia(h,n.xMax,a)),p&&(o=ia(p,n.yMin,o),i=ia(p,n.yMax,i))}const d=HO({x:r,y:o,x2:a,y2:i},t.chartArea)?Tnt({x:r,y:o},{x:a,y:i},t.chartArea):{x:r,y:o,x2:a,y2:i,width:Math.abs(a-r),height:Math.abs(i-o)},f=n.label;return f&&f.content?_nt(d,t,f):d}}o0.id="lineAnnotation";const jO={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,enabled:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};o0.defaults={adjustScaleRange:!0,arrowHeads:{enabled:!1,end:Object.assign({},jO),fill:!1,length:12,start:Object.assign({},jO),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,display:!0,endValue:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,color:"#fff",content:null,cornerRadius:void 0,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xPadding:void 0,yAdjust:0,yPadding:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};o0.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};o0.defaultRoutes={borderColor:"color"};function _nt(e,t,n){const{padding:s,xPadding:o,yPadding:r,borderWidth:i}=n,a=Ant(s,o,r),l=UT(t.ctx,n),u=l.width+a.width+i,c=l.height+a.height+i,d=Dnt(e,n,{width:u,height:c,padding:a},t.chartArea);return e.labelX=d.x,e.labelY=d.y,e.labelWidth=d.width,e.labelHeight=d.height,e.labelRotation=d.rotation,e.labelPadding=a,e.labelTextSize=l,e}function Nnt(e){const{x:t,y:n,x2:s,y2:o}=e,r=Math.atan2(o-n,s-t);return r>Hn/2?r-Hn:r<Hn/-2?r+Hn:r}function Ant(e,t,n){let s=e;return(t||n)&&(s={x:t||6,y:n||6}),ao(s)}function Dnt(e,t,n,s){const{width:o,height:r,padding:i}=n,{xAdjust:a,yAdjust:l}=t,u={x:e.x,y:e.y},c={x:e.x2,y:e.y2},d=t.rotation==="auto"?Nnt(e):go(t.rotation),f=Rnt(o,r,d),h=Mnt(e,t,{labelSize:f,padding:i},s),p=KT(u,c,h),m={size:f.w,min:s.left,max:s.right,padding:i.left},g={size:f.h,min:s.top,max:s.bottom,padding:i.top};return{x:KO(p.x,m)+a,y:KO(p.y,g)+l,width:o,height:r,rotation:d}}function Rnt(e,t,n){const s=Math.cos(n),o=Math.sin(n);return{w:Math.abs(e*s)+Math.abs(t*o),h:Math.abs(e*o)+Math.abs(t*s)}}function Mnt(e,t,n,s){let o;const r=Ont(e,s);return t.position==="start"?o=GO({w:e.x2-e.x,h:e.y2-e.y},n,t,r):t.position==="end"?o=1-GO({w:e.x-e.x2,h:e.y-e.y2},n,t,r):o=WT(1,t.position),o}function GO(e,t,n,s){const{labelSize:o,padding:r}=t,i=e.w*s.dx,a=e.h*s.dy,l=i>0&&(o.w/2+r.left-s.x)/i,u=a>0&&(o.h/2+r.top-s.y)/a;return VT(Math.max(l,u),0,.25)}function Ont(e,t){const{x:n,x2:s,y:o,y2:r}=e,i=Math.min(o,r)-t.top,a=Math.min(n,s)-t.left,l=t.bottom-Math.max(o,r),u=t.right-Math.max(n,s);return{x:Math.min(a,u),y:Math.min(i,l),dx:a<=u?1:-1,dy:i<=l?1:-1}}function KO(e,t){const{size:n,min:s,max:o,padding:r}=t,i=n/2;return n>o-s?(o+s)/2:(s>=e-r-i&&(e=s+r+i),o<=e+r+i&&(e=o-r-i),e)}function Pnt(e){const t=e.options,n=t.arrowHeads&&t.arrowHeads.start,s=t.arrowHeads&&t.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:qO(e,n),endAdjust:qO(e,s)}}function qO(e,t){if(!t||!t.enabled)return 0;const{length:n,width:s}=t,o=e.options.borderWidth/2,r={x:n,y:s+o};return Math.abs(zC(0,r,{x:0,y:o}))}function YO(e,t,n,s){if(!s||!s.enabled)return;const{length:o,width:r,fill:i,backgroundColor:a,borderColor:l}=s,u=Math.abs(t-o)+n;e.beginPath(),fh(e,s),od(e,s),e.moveTo(u,-r),e.lineTo(t+n,0),e.lineTo(u,r),i===!0?(e.fillStyle=a||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=s.borderShadowColor,e.stroke()}class Tw extends Fo{inRange(t,n,s){return Fnt({x:t,y:n},this.getProps(["width","height"],s),this.options.rotation,this.options.borderWidth)}getCenterPoint(t){return am(this.getProps(["x","y","width","height"],t))}draw(t){const{width:n,height:s,options:o}=this,r=this.getCenterPoint();t.save(),Xb(t,this,o.rotation),fh(t,this.options),t.beginPath(),t.fillStyle=o.backgroundColor;const i=od(t,o);t.ellipse(r.x,r.y,s/2,n/2,Hn/2,0,2*Hn),t.fill(),i&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,n){return Ew(t,n)}}Tw.id="ellipseAnnotation";Tw.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};Tw.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Fnt(e,t,n,s){const{width:o,height:r}=t,i=t.getCenterPoint(!0),a=o/2,l=r/2;if(a<=0||l<=0)return!1;const u=go(n||0),c=s/2||0,d=Math.cos(u),f=Math.sin(u),h=Math.pow(d*(e.x-i.x)+f*(e.y-i.y),2),p=Math.pow(f*(e.x-i.x)-d*(e.y-i.y),2);return h/Math.pow(a+c,2)+p/Math.pow(l+c,2)<=1.0001}class _w extends Fo{inRange(t,n,s){const{x:o,y:r}=n0({x:t,y:n},this.getCenterPoint(s),go(-this.options.rotation));return l9(o,r,this.getProps(["x","y","width","height"],s),this.options.borderWidth)}getCenterPoint(t){return am(this.getProps(["x","y","width","height"],t))}draw(t){if(!this.options.content)return;const{labelX:n,labelY:s,labelWidth:o,labelHeight:r,options:i}=this;t.save(),Xb(t,this,i.rotation),Bnt(t,this),jT(t,this,i),GT(t,{x:n,y:s,width:o,height:r},i),t.restore()}resolveElementProperties(t,n){const s=h9(n)?p9(t,n):am(Ew(t,n)),o=ao(n.padding),r=UT(t.ctx,n),i=Lnt(s,r,n,o),a=n.borderWidth/2,l=nt(Me({pointX:s.x,pointY:s.y},i),{labelX:i.x+o.left+a,labelY:i.y+o.top+a,labelWidth:r.width,labelHeight:r.height});return l.calloutPosition=n.callout.enabled&&Unt(l,n.callout,n.rotation),l}}_w.id="labelAnnotation";_w.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,enabled:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};_w.defaultRoutes={borderColor:"color"};function Lnt(e,t,n,s){const o=t.width+s.width+n.borderWidth,r=t.height+s.height+n.borderWidth,i=f9(n.position);return{x:XO(e.x,o,n.xAdjust,i.x),y:XO(e.y,r,n.yAdjust,i.y),width:o,height:r}}function XO(e,t,n=0,s){return e-WT(t,s)+n}function Bnt(e,t){const{pointX:n,pointY:s,calloutPosition:o,options:r}=t;if(!o||t.inRange(n,s))return;const i=r.callout;if(e.save(),e.beginPath(),!od(e,i))return e.restore();const{separatorStart:l,separatorEnd:u}=znt(t,o),{sideStart:c,sideEnd:d}=Wnt(t,o,l);(i.margin>0||r.borderWidth===0)&&(e.moveTo(l.x,l.y),e.lineTo(u.x,u.y)),e.moveTo(c.x,c.y),e.lineTo(d.x,d.y);const f=n0({x:n,y:s},t.getCenterPoint(),go(-r.rotation));e.lineTo(f.x,f.y),e.stroke(),e.restore()}function znt(e,t){const{x:n,y:s,width:o,height:r}=e,i=Vnt(e,t);let a,l;return t==="left"||t==="right"?(a={x:n+i,y:s},l={x:a.x,y:a.y+r}):(a={x:n,y:s+i},l={x:a.x+o,y:a.y}),{separatorStart:a,separatorEnd:l}}function Vnt(e,t){const{width:n,height:s,options:o}=e,r=o.callout.margin+o.borderWidth/2;return t==="right"?n+r:t==="bottom"?s+r:-r}function Wnt(e,t,n){const{y:s,width:o,height:r,options:i}=e,a=i.callout.start,l=Hnt(t,i.callout);let u,c;return t==="left"||t==="right"?(u={x:n.x,y:s+Pf(r,a)},c={x:u.x+l,y:u.y}):(u={x:n.x+Pf(o,a),y:n.y},c={x:u.x,y:u.y+l}),{sideStart:u,sideEnd:c}}function Hnt(e,t){const n=t.side;return e==="left"||e==="top"?-n:n}function Unt(e,t,n){const s=t.position;return s==="left"||s==="right"||s==="top"||s==="bottom"?s:Gnt(e,t,n)}const jnt=["left","bottom","top","right"];function Gnt(e,t,n){const{x:s,y:o,width:r,height:i,pointX:a,pointY:l}=e,u={x:s+r/2,y:o+i/2},c=t.start,d=Pf(r,c),f=Pf(i,c),h=[s,s+d,s+d,s+r],p=[o+f,o+i,o,o+f],m=[];for(let g=0;g<4;g++){const v=n0({x:h[g],y:p[g]},u,go(n));m.push({position:jnt[g],distance:em(v,{x:a,y:l})})}return m.sort((g,v)=>g.distance-v.distance)[0].position}class Nw extends Fo{inRange(t,n,s){const{width:o}=this.getProps(["width"],s);return wnt({x:t,y:n},this.getCenterPoint(s),o/2,this.options.borderWidth)}getCenterPoint(t){return u9(this,t)}draw(t){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;t.save(),t.fillStyle=n.backgroundColor,fh(t,n);const o=od(t,n);n.borderWidth=0,sm(t,n,this.x,this.y),o&&!HT(n.pointStyle)&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore(),n.borderWidth=s}resolveElementProperties(t,n){return m9(t,n)}}Nw.id="pointAnnotation";Nw.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};Nw.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Aw extends Fo{inRange(t,n,s){return this.options.radius>=.1&&this.elements.length>1&&Knt(this.elements,t,n,s)}getCenterPoint(t){return u9(this,t)}draw(t){const{elements:n,options:s}=this;t.save(),t.beginPath(),t.fillStyle=s.backgroundColor,fh(t,s);const o=od(t,s);let r=!0;for(const i of n)r?(t.moveTo(i.x,i.y),r=!1):t.lineTo(i.x,i.y);t.closePath(),t.fill(),o&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,n){const{x:s,y:o,width:r,height:i}=m9(t,n),{sides:a,radius:l,rotation:u,borderWidth:c}=n,d=c/2,f=[],h=2*Hn/a;let p=u*ZH;for(let m=0;m<a;m++,p+=h){const g=Math.sin(p),v=Math.cos(p);f.push({type:"point",optionScope:"point",properties:{x:s+g*l,y:o-v*l,bX:s+g*(l+d),bY:o-v*(l+d)}})}return{x:s,y:o,width:r,height:i,elements:f,initProperties:{x:s,y:o}}}}Aw.id="polygonAnnotation";Aw.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};Aw.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Knt(e,t,n,s){let o=!1,r=e[e.length-1].getProps(["bX","bY"],s);for(const i of e){const a=i.getProps(["bX","bY"],s);a.bY>n!=r.bY>n&&t<(r.bX-a.bX)*(n-a.bY)/(r.bY-a.bY)+a.bX&&(o=!o),r=a}return o}const Gl={box:s0,ellipse:Tw,label:_w,line:o0,point:Nw,polygon:Aw};Object.keys(Gl).forEach(e=>{Tn.describe(`elements.${Gl[e].id}`,{_fallback:"plugins.annotation"})});const qnt={update:Object.assign};function qT(e="line"){return Gl[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function Ynt(e,t,n,s){const o=Znt(e,n.animations,s),r=t.annotations,i=est(t.elements,r);for(let a=0;a<r.length;a++){const l=r[a],u=v9(i,a,l.type),c=l.setContext(Qnt(e,u,l)),d=u.resolveElementProperties(e,c);d.skip=Xnt(d),"elements"in d&&(Jnt(u,d,c,o),delete d.elements),Js(u.x)||Object.assign(u,d),d.options=b9(c),o.update(u,d)}}function Xnt(e){return isNaN(e.x)||isNaN(e.y)}function Znt(e,t,n){return n==="reset"||n==="none"||n==="resize"?qnt:new TT(e,t)}function Jnt(e,{elements:t,initProperties:n},s,o){const r=e.elements||(e.elements=[]);r.length=t.length;for(let i=0;i<t.length;i++){const a=t[i],l=a.properties,u=v9(r,i,a.type,n),c=s[a.optionScope].override(a);l.options=b9(c),o.update(u,l)}}function v9(e,t,n,s){const o=Gl[qT(n)];let r=e[t];return(!r||!(r instanceof o))&&(r=e[t]=new o,gn(s)&&Object.assign(r,s)),r}function b9(e){const t=Gl[qT(e.type)],n={};n.id=e.id,n.type=e.type,n.drawTime=e.drawTime,Object.assign(n,VC(e,t.defaults),VC(e,t.defaultRoutes));for(const s of zT)n[s]=e[s];return n}function VC(e,t){const n={};for(const s of Object.keys(t)){const o=t[s],r=e[s];n[s]=gn(o)?VC(r,o):r}return n}function Qnt(e,t,n){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,id:n.id,type:"annotation"}))}function est(e,t){const n=t.length,s=e.length;if(s<n){const o=n-s;e.splice(s,0,...new Array(o))}else s>n&&e.splice(n,s-n);return e}var tst="chartjs-plugin-annotation",nst="1.4.0";const Tl=new Map;var sst={id:"annotation",version:nst,afterRegister(){Ua.register(Gl),xnt("chart.js","3.7",Ua.version,!1)||(console.warn(`${tst} has known issues with chart.js versions prior to 3.7, please consider upgrading.`),Ua.defaults.set("elements.lineAnnotation",{callout:{},font:{},padding:6}))},afterUnregister(){Ua.unregister(Gl)},beforeInit(e){Tl.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1})},beforeUpdate(e,t,n){const s=Tl.get(e),o=s.annotations=[];let r=n.annotations;gn(r)?Object.keys(r).forEach(i=>{const a=r[i];gn(a)&&(a.id=i,o.push(a))}):Gn(r)&&o.push(...r),pnt(o,e.scales)},afterDataLimits(e,t){const n=Tl.get(e);hnt(e,t.scale,n.annotations.filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(e,t,n){const s=Tl.get(e);lnt(e,s,n),Ynt(e,s,n,t.mode),s.visibleElements=s.elements.filter(o=>!o.skip&&o.options.display)},beforeDatasetsDraw(e,t,n){iv(e,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(e,t,n){iv(e,"afterDatasetsDraw",n.clip)},beforeDraw(e,t,n){iv(e,"beforeDraw",n.clip)},afterDraw(e,t,n){iv(e,"afterDraw",n.clip)},beforeEvent(e,t,n){const s=Tl.get(e);unt(s,t.event,n)},destroy(e){Tl.delete(e)},_getState(e){return Tl.get(e)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","pointX","pointY","labelX","labelY","labelWidth","labelHeight","radius"],type:"number"}},clip:!0,dblClickSpeed:350,drawTime:"afterDatasetsDraw",label:{drawTime:null}},descriptors:{_indexable:!1,_scriptable:e=>!zT.includes(e),annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${Gl[qT(t.type)].id}`}},additionalOptionScopes:[""]};function iv(e,t,n){const{ctx:s,chartArea:o}=e,{visibleElements:r}=Tl.get(e);n&&Yg(s,o),y9(s,r,t),ost(s,r,t),n&&Xg(s),r.forEach(i=>{if(!("drawLabel"in i))return;const a=i.options.label;a&&a.enabled&&a.content&&(a.drawTime||i.options.drawTime)===t&&i.drawLabel(s,o)})}function y9(e,t,n){for(const s of t)s.options.drawTime===n&&s.draw(e)}function ost(e,t,n){for(const s of t)Gn(s.elements)&&y9(e,s.elements,n)}Ua.register(...sQe);Ua.register(sst);lF(KY).use(ant).use(MSe).mount("#app")});export default rst();
