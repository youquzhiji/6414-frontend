var y5=Object.defineProperty,w5=Object.defineProperties;var $5=Object.getOwnPropertyDescriptors;var OS=Object.getOwnPropertySymbols;var C5=Object.prototype.hasOwnProperty,k5=Object.prototype.propertyIsEnumerable;var MS=(e,t,n)=>t in e?y5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ut=(e,t)=>{for(var n in t||(t={}))C5.call(t,n)&&MS(e,n,t[n]);if(OS)for(var n of OS(t))k5.call(t,n)&&MS(e,n,t[n]);return e},Ut=(e,t)=>w5(e,$5(t));function S5(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(s){if(s!=="default"&&!(s in e)){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:function(){return n[s]}})}})}),Object.freeze(e)}function iw(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const x5="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",I5=iw(x5);function GN(e){return!!e||e===""}function nt(e){if(Nt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Xt(s)?N5(s):nt(s);if(o)for(const r in o)t[r]=o[r]}return t}else{if(Xt(e))return e;if(rn(e))return e}}const E5=/;(?![^(]*\))/g,T5=/:(.+)/;function N5(e){const t={};return e.split(E5).forEach(n=>{if(n){const s=n.split(T5);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function q(e){let t="";if(Xt(e))t=e;else if(Nt(e))for(let n=0;n<e.length;n++){const s=q(e[n]);s&&(t+=s+" ")}else if(rn(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Bl(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Xt(t)&&(e.class=q(t)),n&&(e.style=nt(n)),e}function A5(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=nc(e[s],t[s]);return n}function nc(e,t){if(e===t)return!0;let n=FS(e),s=FS(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Nt(e),s=Nt(t),n||s)return n&&s?A5(e,t):!1;if(n=rn(e),s=rn(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const a in e){const i=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(i&&!l||!i&&l||!nc(e[a],t[a]))return!1}}return String(e)===String(t)}function KN(e,t){return e.findIndex(n=>nc(n,t))}const Fe=e=>Xt(e)?e:e==null?"":Nt(e)||rn(e)&&(e.toString===qN||!Pt(e.toString))?JSON.stringify(e,jN,2):String(e),jN=(e,t)=>t&&t.__v_isRef?jN(e,t.value):ju(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o])=>(n[`${s} =>`]=o,n),{})}:$g(t)?{[`Set(${t.size})`]:[...t.values()]}:rn(t)&&!Nt(t)&&!XN(t)?String(t):t,Gn={},Ku=[],on=()=>{},D5=()=>!1,R5=/^on[^a-z]/,wg=e=>R5.test(e),lw=e=>e.startsWith("onUpdate:"),Hs=Object.assign,uw=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},_5=Object.prototype.hasOwnProperty,Wt=(e,t)=>_5.call(e,t),Nt=Array.isArray,ju=e=>Tf(e)==="[object Map]",$g=e=>Tf(e)==="[object Set]",FS=e=>e instanceof Date,Pt=e=>typeof e=="function",Xt=e=>typeof e=="string",cw=e=>typeof e=="symbol",rn=e=>e!==null&&typeof e=="object",sc=e=>rn(e)&&Pt(e.then)&&Pt(e.catch),qN=Object.prototype.toString,Tf=e=>qN.call(e),jp=e=>Tf(e).slice(8,-1),XN=e=>Tf(e)==="[object Object]",dw=e=>Xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qp=iw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Cg=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},O5=/-(\w)/g,$r=Cg(e=>e.replace(O5,(t,n)=>n?n.toUpperCase():"")),M5=/\B([A-Z])/g,_i=Cg(e=>e.replace(M5,"-$1").toLowerCase()),Ko=Cg(e=>e.charAt(0).toUpperCase()+e.slice(1)),Xp=Cg(e=>e?`on${Ko(e)}`:""),qd=(e,t)=>!Object.is(e,t),Yp=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Am=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Dm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let PS;const F5=()=>PS||(PS=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ur;class YN{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ur&&(this.parent=ur,this.index=(ur.scopes||(ur.scopes=[])).push(this)-1)}run(t){if(this.active)try{return ur=this,t()}finally{ur=this.parent}}on(){ur=this}off(){ur=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function P5(e){return new YN(e)}function L5(e,t=ur){t&&t.active&&t.effects.push(e)}function B5(){return ur}function ZN(e){ur&&ur.cleanups.push(e)}const fw=e=>{const t=new Set(e);return t.w=0,t.n=0,t},JN=e=>(e.w&xi)>0,QN=e=>(e.n&xi)>0,z5=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=xi},V5=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];JN(o)&&!QN(o)?o.delete(e):t[n++]=o,o.w&=~xi,o.n&=~xi}t.length=n}},ay=new WeakMap;let wd=0,xi=1;const iy=30;let pa;const Nl=Symbol(""),ly=Symbol("");class hw{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,L5(this,s)}run(){if(!this.active)return this.fn();let t=pa,n=yi;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=pa,pa=this,yi=!0,xi=1<<++wd,wd<=iy?z5(this):LS(this),this.fn()}finally{wd<=iy&&V5(this),xi=1<<--wd,pa=this.parent,yi=n,this.parent=void 0}}stop(){this.active&&(LS(this),this.onStop&&this.onStop(),this.active=!1)}}function LS(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let yi=!0;const eA=[];function tu(){eA.push(yi),yi=!1}function nu(){const e=eA.pop();yi=e===void 0?!0:e}function Qo(e,t,n){if(yi&&pa){let s=ay.get(e);s||ay.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=fw()),tA(o)}}function tA(e,t){let n=!1;wd<=iy?QN(e)||(e.n|=xi,n=!JN(e)):n=!e.has(pa),n&&(e.add(pa),pa.deps.push(e))}function Va(e,t,n,s,o,r){const a=ay.get(e);if(!a)return;let i=[];if(t==="clear")i=[...a.values()];else if(n==="length"&&Nt(e))a.forEach((l,u)=>{(u==="length"||u>=s)&&i.push(l)});else switch(n!==void 0&&i.push(a.get(n)),t){case"add":Nt(e)?dw(n)&&i.push(a.get("length")):(i.push(a.get(Nl)),ju(e)&&i.push(a.get(ly)));break;case"delete":Nt(e)||(i.push(a.get(Nl)),ju(e)&&i.push(a.get(ly)));break;case"set":ju(e)&&i.push(a.get(Nl));break}if(i.length===1)i[0]&&uy(i[0]);else{const l=[];for(const u of i)u&&l.push(...u);uy(fw(l))}}function uy(e,t){for(const n of Nt(e)?e:[...e])(n!==pa||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const W5=iw("__proto__,__v_isRef,__isVue"),nA=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(cw)),H5=pw(),U5=pw(!1,!0),G5=pw(!0),BS=K5();function K5(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=bn(this);for(let r=0,a=this.length;r<a;r++)Qo(s,"get",r+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(bn)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){tu();const s=bn(this)[t].apply(this,n);return nu(),s}}),e}function pw(e=!1,t=!1){return function(s,o,r){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&r===(e?t?l8:iA:t?aA:rA).get(s))return s;const a=Nt(s);if(!e&&a&&Wt(BS,o))return Reflect.get(BS,o,r);const i=Reflect.get(s,o,r);return(cw(o)?nA.has(o):W5(o))||(e||Qo(s,"get",o),t)?i:rs(i)?!a||!dw(o)?i.value:i:rn(i)?e?Nf(i):Cn(i):i}}const j5=sA(),q5=sA(!0);function sA(e=!1){return function(n,s,o,r){let a=n[s];if(Xd(a)&&rs(a)&&!rs(o))return!1;if(!e&&!Xd(o)&&(lA(o)||(o=bn(o),a=bn(a)),!Nt(n)&&rs(a)&&!rs(o)))return a.value=o,!0;const i=Nt(n)&&dw(s)?Number(s)<n.length:Wt(n,s),l=Reflect.set(n,s,o,r);return n===bn(r)&&(i?qd(o,a)&&Va(n,"set",s,o):Va(n,"add",s,o)),l}}function X5(e,t){const n=Wt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&Va(e,"delete",t,void 0),s}function Y5(e,t){const n=Reflect.has(e,t);return(!cw(t)||!nA.has(t))&&Qo(e,"has",t),n}function Z5(e){return Qo(e,"iterate",Nt(e)?"length":Nl),Reflect.ownKeys(e)}const oA={get:H5,set:j5,deleteProperty:X5,has:Y5,ownKeys:Z5},J5={get:G5,set(e,t){return!0},deleteProperty(e,t){return!0}},Q5=Hs({},oA,{get:U5,set:q5}),mw=e=>e,kg=e=>Reflect.getPrototypeOf(e);function vp(e,t,n=!1,s=!1){e=e.__v_raw;const o=bn(e),r=bn(t);t!==r&&!n&&Qo(o,"get",t),!n&&Qo(o,"get",r);const{has:a}=kg(o),i=s?mw:n?bw:Zd;if(a.call(o,t))return i(e.get(t));if(a.call(o,r))return i(e.get(r));e!==o&&e.get(t)}function bp(e,t=!1){const n=this.__v_raw,s=bn(n),o=bn(e);return e!==o&&!t&&Qo(s,"has",e),!t&&Qo(s,"has",o),e===o?n.has(e):n.has(e)||n.has(o)}function yp(e,t=!1){return e=e.__v_raw,!t&&Qo(bn(e),"iterate",Nl),Reflect.get(e,"size",e)}function zS(e){e=bn(e);const t=bn(this);return kg(t).has.call(t,e)||(t.add(e),Va(t,"add",e,e)),this}function VS(e,t){t=bn(t);const n=bn(this),{has:s,get:o}=kg(n);let r=s.call(n,e);r||(e=bn(e),r=s.call(n,e));const a=o.call(n,e);return n.set(e,t),r?qd(t,a)&&Va(n,"set",e,t):Va(n,"add",e,t),this}function WS(e){const t=bn(this),{has:n,get:s}=kg(t);let o=n.call(t,e);o||(e=bn(e),o=n.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return o&&Va(t,"delete",e,void 0),r}function HS(){const e=bn(this),t=e.size!==0,n=e.clear();return t&&Va(e,"clear",void 0,void 0),n}function wp(e,t){return function(s,o){const r=this,a=r.__v_raw,i=bn(a),l=t?mw:e?bw:Zd;return!e&&Qo(i,"iterate",Nl),a.forEach((u,c)=>s.call(o,l(u),l(c),r))}}function $p(e,t,n){return function(...s){const o=this.__v_raw,r=bn(o),a=ju(r),i=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=o[e](...s),c=n?mw:t?bw:Zd;return!t&&Qo(r,"iterate",l?ly:Nl),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:i?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function ri(e){return function(...t){return e==="delete"?!1:this}}function e8(){const e={get(r){return vp(this,r)},get size(){return yp(this)},has:bp,add:zS,set:VS,delete:WS,clear:HS,forEach:wp(!1,!1)},t={get(r){return vp(this,r,!1,!0)},get size(){return yp(this)},has:bp,add:zS,set:VS,delete:WS,clear:HS,forEach:wp(!1,!0)},n={get(r){return vp(this,r,!0)},get size(){return yp(this,!0)},has(r){return bp.call(this,r,!0)},add:ri("add"),set:ri("set"),delete:ri("delete"),clear:ri("clear"),forEach:wp(!0,!1)},s={get(r){return vp(this,r,!0,!0)},get size(){return yp(this,!0)},has(r){return bp.call(this,r,!0)},add:ri("add"),set:ri("set"),delete:ri("delete"),clear:ri("clear"),forEach:wp(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=$p(r,!1,!1),n[r]=$p(r,!0,!1),t[r]=$p(r,!1,!0),s[r]=$p(r,!0,!0)}),[e,n,t,s]}const[t8,n8,s8,o8]=e8();function gw(e,t){const n=t?e?o8:s8:e?n8:t8;return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(Wt(n,o)&&o in s?n:s,o,r)}const r8={get:gw(!1,!1)},a8={get:gw(!1,!0)},i8={get:gw(!0,!1)},rA=new WeakMap,aA=new WeakMap,iA=new WeakMap,l8=new WeakMap;function u8(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function c8(e){return e.__v_skip||!Object.isExtensible(e)?0:u8(jp(e))}function Cn(e){return Xd(e)?e:vw(e,!1,oA,r8,rA)}function d8(e){return vw(e,!1,Q5,a8,aA)}function Nf(e){return vw(e,!0,J5,i8,iA)}function vw(e,t,n,s,o){if(!rn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const a=c8(e);if(a===0)return e;const i=new Proxy(e,a===2?s:n);return o.set(e,i),i}function qu(e){return Xd(e)?qu(e.__v_raw):!!(e&&e.__v_isReactive)}function Xd(e){return!!(e&&e.__v_isReadonly)}function lA(e){return!!(e&&e.__v_isShallow)}function uA(e){return qu(e)||Xd(e)}function bn(e){const t=e&&e.__v_raw;return t?bn(t):e}function Yd(e){return Am(e,"__v_skip",!0),e}const Zd=e=>rn(e)?Cn(e):e,bw=e=>rn(e)?Nf(e):e;function cA(e){yi&&pa&&(e=bn(e),tA(e.dep||(e.dep=fw())))}function yw(e,t){e=bn(e),e.dep&&uy(e.dep)}function rs(e){return!!(e&&e.__v_isRef===!0)}function L(e){return dA(e,!1)}function uo(e){return dA(e,!0)}function dA(e,t){return rs(e)?e:new f8(e,t)}class f8{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:bn(t),this._value=n?t:Zd(t)}get value(){return cA(this),this._value}set value(t){t=this.__v_isShallow?t:bn(t),qd(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Zd(t),yw(this))}}function ud(e){yw(e)}function je(e){return rs(e)?e.value:e}const h8={get:(e,t,n)=>je(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return rs(o)&&!rs(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Rm(e){return qu(e)?e:new Proxy(e,h8)}function so(e){const t=Nt(e)?new Array(e.length):{};for(const n in e)t[n]=Js(e,n);return t}class p8{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Js(e,t,n){const s=e[t];return rs(s)?s:new p8(e,t,n)}class m8{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new hw(t,()=>{this._dirty||(this._dirty=!0,yw(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=bn(this);return cA(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function g8(e,t,n=!1){let s,o;const r=Pt(e);return r?(s=e,o=on):(s=e.get,o=e.set),new m8(s,o,r||!o,n)}Promise.resolve();const _d=[];function v8(e,...t){tu();const n=_d.length?_d[_d.length-1].component:null,s=n&&n.appContext.config.warnHandler,o=b8();if(s)La(s,n,11,[e+t.join(""),n&&n.proxy,o.map(({vnode:r})=>`at <${VA(n,r.type)}>`).join(`
`),o]);else{const r=[`[Vue warn]: ${e}`,...t];o.length&&r.push(`
`,...y8(o)),console.warn(...r)}nu()}function b8(){let e=_d[_d.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function y8(e){const t=[];return e.forEach((n,s)=>{t.push(...s===0?[]:[`
`],...w8(n))}),t}function w8({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,o=` at <${VA(e.component,e.type,s)}`,r=">"+n;return e.props?[o,...$8(e.props),r]:[o+r]}function $8(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(s=>{t.push(...fA(s,e[s]))}),n.length>3&&t.push(" ..."),t}function fA(e,t,n){return Xt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:rs(t)?(t=fA(e,bn(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):Pt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=bn(t),n?t:[`${e}=`,t])}function La(e,t,n,s){let o;try{o=s?e(...s):e()}catch(r){Sg(r,t,n)}return o}function yr(e,t,n,s){if(Pt(e)){const r=La(e,t,n,s);return r&&sc(r)&&r.catch(a=>{Sg(a,t,n)}),r}const o=[];for(let r=0;r<e.length;r++)o.push(yr(e[r],t,n,s));return o}function Sg(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const a=t.proxy,i=n;for(;r;){const u=r.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,i)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){La(l,null,10,[e,a,i]);return}}C8(e,n,o,s)}function C8(e,t,n,s=!0){console.error(e)}let _m=!1,cy=!1;const jo=[];let Oa=0;const Od=[];let $d=null,Mu=0;const Md=[];let li=null,Fu=0;const hA=Promise.resolve();let ww=null,dy=null;function dt(e){const t=ww||hA;return e?t.then(this?e.bind(this):e):t}function k8(e){let t=Oa+1,n=jo.length;for(;t<n;){const s=t+n>>>1;Jd(jo[s])<e?t=s+1:n=s}return t}function pA(e){(!jo.length||!jo.includes(e,_m&&e.allowRecurse?Oa+1:Oa))&&e!==dy&&(e.id==null?jo.push(e):jo.splice(k8(e.id),0,e),mA())}function mA(){!_m&&!cy&&(cy=!0,ww=hA.then(bA))}function S8(e){const t=jo.indexOf(e);t>Oa&&jo.splice(t,1)}function gA(e,t,n,s){Nt(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&n.push(e),mA()}function x8(e){gA(e,$d,Od,Mu)}function I8(e){gA(e,li,Md,Fu)}function $w(e,t=null){if(Od.length){for(dy=t,$d=[...new Set(Od)],Od.length=0,Mu=0;Mu<$d.length;Mu++)$d[Mu]();$d=null,Mu=0,dy=null,$w(e,t)}}function vA(e){if(Md.length){const t=[...new Set(Md)];if(Md.length=0,li){li.push(...t);return}for(li=t,li.sort((n,s)=>Jd(n)-Jd(s)),Fu=0;Fu<li.length;Fu++)li[Fu]();li=null,Fu=0}}const Jd=e=>e.id==null?1/0:e.id;function bA(e){cy=!1,_m=!0,$w(e),jo.sort((n,s)=>Jd(n)-Jd(s));const t=on;try{for(Oa=0;Oa<jo.length;Oa++){const n=jo[Oa];n&&n.active!==!1&&La(n,null,14)}}finally{Oa=0,jo.length=0,vA(),_m=!1,ww=null,(jo.length||Od.length||Md.length)&&bA(e)}}function E8(e,t,...n){const s=e.vnode.props||Gn;let o=n;const r=t.startsWith("update:"),a=r&&t.slice(7);if(a&&a in s){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:f}=s[c]||Gn;f?o=n.map(h=>h.trim()):d&&(o=n.map(Dm))}let i,l=s[i=Xp(t)]||s[i=Xp($r(t))];!l&&r&&(l=s[i=Xp(_i(t))]),l&&yr(l,e,6,o);const u=s[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,yr(u,e,6,o)}}function yA(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let a={},i=!1;if(!Pt(e)){const l=u=>{const c=yA(u,t,!0);c&&(i=!0,Hs(a,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!i?(s.set(e,null),null):(Nt(r)?r.forEach(l=>a[l]=null):Hs(a,r),s.set(e,a),a)}function Cw(e,t){return!e||!wg(t)?!1:(t=t.slice(2).replace(/Once$/,""),Wt(e,t[0].toLowerCase()+t.slice(1))||Wt(e,_i(t))||Wt(e,t))}let Xo=null,xg=null;function Om(e){const t=Xo;return Xo=e,xg=e&&e.type.__scopeId||null,t}function Dje(e){xg=e}function Rje(){xg=null}function oe(e,t=Xo,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&tx(-1);const r=Om(t),a=e(...o);return Om(r),s._d&&tx(1),a};return s._n=!0,s._c=!0,s._d=!0,s}function rb(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:r,propsOptions:[a],slots:i,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=e;let g,v;const b=Om(e);try{if(n.shapeFlag&4){const y=o||s;g=ca(c.call(y,y,d,r,h,f,p)),v=l}else{const y=t;g=ca(y.length>1?y(r,{attrs:l,slots:i,emit:u}):y(r,null)),v=t.props?l:T8(l)}}catch(y){Pd.length=0,Sg(y,e,1),g=le(er)}let $=g;if(v&&m!==!1){const y=Object.keys(v),{shapeFlag:w}=$;y.length&&w&7&&(a&&y.some(lw)&&(v=N8(v,a)),$=Vl($,v))}return n.dirs&&($.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),g=$,Om(b),g}const T8=e=>{let t;for(const n in e)(n==="class"||n==="style"||wg(n))&&((t||(t={}))[n]=e[n]);return t},N8=(e,t)=>{const n={};for(const s in e)(!lw(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function A8(e,t,n){const{props:s,children:o,component:r}=e,{props:a,children:i,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?US(s,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(a[f]!==s[f]&&!Cw(u,f))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:s===a?!1:s?a?US(s,a,u):!0:!!a;return!1}function US(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!Cw(n,r))return!0}return!1}function D8({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const R8=e=>e.__isSuspense;function _8(e,t){t&&t.pendingBranch?Nt(e)?t.effects.push(...e):t.effects.push(e):I8(e)}function zt(e,t){if(Vs){let n=Vs.provides;const s=Vs.parent&&Vs.parent.provides;s===n&&(n=Vs.provides=Object.create(s)),n[e]=t}}function Ze(e,t,n=!1){const s=Vs||Xo;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Pt(t)?t.call(s.proxy):t}}function Ba(e,t){return kw(e,null,t)}const GS={};function Oe(e,t,n){return kw(e,t,n)}function kw(e,t,{immediate:n,deep:s,flush:o,onTrack:r,onTrigger:a}=Gn){const i=Vs;let l,u=!1,c=!1;if(rs(e)?(l=()=>e.value,u=lA(e)):qu(e)?(l=()=>e,s=!0):Nt(e)?(c=!0,u=e.some(qu),l=()=>e.map(v=>{if(rs(v))return v.value;if(qu(v))return $l(v);if(Pt(v))return La(v,i,2)})):Pt(e)?t?l=()=>La(e,i,2):l=()=>{if(!(i&&i.isUnmounted))return d&&d(),yr(e,i,3,[f])}:l=on,t&&s){const v=l;l=()=>$l(v())}let d,f=v=>{d=g.onStop=()=>{La(v,i,4)}};if(nf)return f=on,t?n&&yr(t,i,3,[l(),c?[]:void 0,f]):l(),on;let h=c?[]:GS;const p=()=>{if(!!g.active)if(t){const v=g.run();(s||u||(c?v.some((b,$)=>qd(b,h[$])):qd(v,h)))&&(d&&d(),yr(t,i,3,[v,h===GS?void 0:h,f]),h=v)}else g.run()};p.allowRecurse=!!t;let m;o==="sync"?m=p:o==="post"?m=()=>Io(p,i&&i.suspense):m=()=>{!i||i.isMounted?x8(p):p()};const g=new hw(l,m);return t?n?p():h=g.run():o==="post"?Io(g.run.bind(g),i&&i.suspense):g.run(),()=>{g.stop(),i&&i.scope&&uw(i.scope.effects,g)}}function O8(e,t,n){const s=this.proxy,o=Xt(e)?e.includes(".")?wA(s,e):()=>s[e]:e.bind(s,s);let r;Pt(t)?r=t:(r=t.handler,n=t);const a=Vs;oc(this);const i=kw(o,r.bind(s),n);return a?oc(a):Dl(),i}function wA(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function $l(e,t){if(!rn(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),rs(e))$l(e.value,t);else if(Nt(e))for(let n=0;n<e.length;n++)$l(e[n],t);else if($g(e)||ju(e))e.forEach(n=>{$l(n,t)});else if(XN(e))for(const n in e)$l(e[n],t);return e}function $A(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mt(()=>{e.isMounted=!0}),os(()=>{e.isUnmounting=!0}),e}const ar=[Function,Array],M8={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ar,onEnter:ar,onAfterEnter:ar,onEnterCancelled:ar,onBeforeLeave:ar,onLeave:ar,onAfterLeave:ar,onLeaveCancelled:ar,onBeforeAppear:ar,onAppear:ar,onAfterAppear:ar,onAppearCancelled:ar},setup(e,{slots:t}){const n=Lt(),s=$A();let o;return()=>{const r=t.default&&Sw(t.default(),!0);if(!r||!r.length)return;const a=bn(e),{mode:i}=a,l=r[0];if(s.isLeaving)return ab(l);const u=KS(l);if(!u)return ab(l);const c=Qd(u,a,s,n);ef(u,c);const d=n.subTree,f=d&&KS(d);let h=!1;const{getTransitionKey:p}=u.type;if(p){const m=p();o===void 0?o=m:m!==o&&(o=m,h=!0)}if(f&&f.type!==er&&(!ml(u,f)||h)){const m=Qd(f,a,s,n);if(ef(f,m),i==="out-in")return s.isLeaving=!0,m.afterLeave=()=>{s.isLeaving=!1,n.update()},ab(l);i==="in-out"&&u.type!==er&&(m.delayLeave=(g,v,b)=>{const $=kA(s,f);$[String(f.key)]=f,g._leaveCb=()=>{v(),g._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=b})}return l}}},CA=M8;function kA(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Qd(e,t,n,s){const{appear:o,mode:r,persisted:a=!1,onBeforeEnter:i,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:b}=t,$=String(e.key),y=kA(n,e),w=(k,S)=>{k&&yr(k,s,9,S)},C={mode:r,persisted:a,beforeEnter(k){let S=i;if(!n.isMounted)if(o)S=m||i;else return;k._leaveCb&&k._leaveCb(!0);const E=y[$];E&&ml(e,E)&&E.el._leaveCb&&E.el._leaveCb(),w(S,[k])},enter(k){let S=l,E=u,x=c;if(!n.isMounted)if(o)S=g||l,E=v||u,x=b||c;else return;let N=!1;const A=k._enterCb=D=>{N||(N=!0,D?w(x,[k]):w(E,[k]),C.delayedLeave&&C.delayedLeave(),k._enterCb=void 0)};S?(S(k,A),S.length<=1&&A()):A()},leave(k,S){const E=String(e.key);if(k._enterCb&&k._enterCb(!0),n.isUnmounting)return S();w(d,[k]);let x=!1;const N=k._leaveCb=A=>{x||(x=!0,S(),A?w(p,[k]):w(h,[k]),k._leaveCb=void 0,y[E]===e&&delete y[E])};y[E]=e,f?(f(k,N),f.length<=1&&N()):N()},clone(k){return Qd(k,t,n,s)}};return C}function ab(e){if(Ig(e))return e=Vl(e),e.children=null,e}function KS(e){return Ig(e)?e.children?e.children[0]:void 0:e}function ef(e,t){e.shapeFlag&6&&e.component?ef(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Sw(e,t=!1){let n=[],s=0;for(let o=0;o<e.length;o++){const r=e[o];r.type===it?(r.patchFlag&128&&s++,n=n.concat(Sw(r.children,t))):(t||r.type!==er)&&n.push(r)}if(s>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function me(e){return Pt(e)?{setup:e,name:e.name}:e}const fy=e=>!!e.type.__asyncLoader,Ig=e=>e.type.__isKeepAlive;function F8(e,t){SA(e,"a",t)}function P8(e,t){SA(e,"da",t)}function SA(e,t,n=Vs){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Eg(t,s,n),n){let o=n.parent;for(;o&&o.parent;)Ig(o.parent.vnode)&&L8(s,t,n,o),o=o.parent}}function L8(e,t,n,s){const o=Eg(t,e,s,!0);Df(()=>{uw(s[t],o)},n)}function Eg(e,t,n=Vs,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;tu(),oc(n);const i=yr(t,n,e,a);return Dl(),nu(),i});return s?o.unshift(r):o.push(r),r}}const qa=e=>(t,n=Vs)=>(!nf||e==="sp")&&Eg(e,t,n),Af=qa("bm"),Mt=qa("m"),xA=qa("bu"),sa=qa("u"),os=qa("bum"),Df=qa("um"),B8=qa("sp"),z8=qa("rtg"),V8=qa("rtc");function W8(e,t=Vs){Eg("ec",e,t)}let hy=!0;function H8(e){const t=EA(e),n=e.proxy,s=e.ctx;hy=!1,t.beforeCreate&&jS(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:a,watch:i,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:b,destroyed:$,unmounted:y,render:w,renderTracked:C,renderTriggered:k,errorCaptured:S,serverPrefetch:E,expose:x,inheritAttrs:N,components:A,directives:D,filters:M}=t;if(u&&U8(u,s,null,e.appContext.config.unwrapInjectedRef),a)for(const P in a){const V=a[P];Pt(V)&&(s[P]=V.bind(n))}if(o){const P=o.call(n,n);rn(P)&&(e.data=Cn(P))}if(hy=!0,r)for(const P in r){const V=r[P],G=Pt(V)?V.bind(n,n):Pt(V.get)?V.get.bind(n,n):on,se=!Pt(V)&&Pt(V.set)?V.set.bind(n):on,ke=_({get:G,set:se});Object.defineProperty(s,P,{enumerable:!0,configurable:!0,get:()=>ke.value,set:te=>ke.value=te})}if(i)for(const P in i)IA(i[P],s,n,P);if(l){const P=Pt(l)?l.call(n):l;Reflect.ownKeys(P).forEach(V=>{zt(V,P[V])})}c&&jS(c,e,"c");function R(P,V){Nt(V)?V.forEach(G=>P(G.bind(n))):V&&P(V.bind(n))}if(R(Af,d),R(Mt,f),R(xA,h),R(sa,p),R(F8,m),R(P8,g),R(W8,S),R(V8,C),R(z8,k),R(os,b),R(Df,y),R(B8,E),Nt(x))if(x.length){const P=e.exposed||(e.exposed={});x.forEach(V=>{Object.defineProperty(P,V,{get:()=>n[V],set:G=>n[V]=G})})}else e.exposed||(e.exposed={});w&&e.render===on&&(e.render=w),N!=null&&(e.inheritAttrs=N),A&&(e.components=A),D&&(e.directives=D)}function U8(e,t,n=on,s=!1){Nt(e)&&(e=py(e));for(const o in e){const r=e[o];let a;rn(r)?"default"in r?a=Ze(r.from||o,r.default,!0):a=Ze(r.from||o):a=Ze(r),rs(a)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:i=>a.value=i}):t[o]=a}}function jS(e,t,n){yr(Nt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function IA(e,t,n,s){const o=s.includes(".")?wA(n,s):()=>n[s];if(Xt(e)){const r=t[e];Pt(r)&&Oe(o,r)}else if(Pt(e))Oe(o,e.bind(n));else if(rn(e))if(Nt(e))e.forEach(r=>IA(r,t,n,s));else{const r=Pt(e.handler)?e.handler.bind(n):t[e.handler];Pt(r)&&Oe(o,r,e)}}function EA(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,i=r.get(t);let l;return i?l=i:!o.length&&!n&&!s?l=t:(l={},o.length&&o.forEach(u=>Mm(l,u,a,!0)),Mm(l,t,a)),r.set(t,l),l}function Mm(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&Mm(e,r,n,!0),o&&o.forEach(a=>Mm(e,a,n,!0));for(const a in t)if(!(s&&a==="expose")){const i=G8[a]||n&&n[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const G8={data:qS,props:ul,emits:ul,methods:ul,computed:ul,beforeCreate:mo,created:mo,beforeMount:mo,mounted:mo,beforeUpdate:mo,updated:mo,beforeDestroy:mo,beforeUnmount:mo,destroyed:mo,unmounted:mo,activated:mo,deactivated:mo,errorCaptured:mo,serverPrefetch:mo,components:ul,directives:ul,watch:j8,provide:qS,inject:K8};function qS(e,t){return t?e?function(){return Hs(Pt(e)?e.call(this,this):e,Pt(t)?t.call(this,this):t)}:t:e}function K8(e,t){return ul(py(e),py(t))}function py(e){if(Nt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mo(e,t){return e?[...new Set([].concat(e,t))]:t}function ul(e,t){return e?Hs(Hs(Object.create(null),e),t):t}function j8(e,t){if(!e)return t;if(!t)return e;const n=Hs(Object.create(null),e);for(const s in t)n[s]=mo(e[s],t[s]);return n}function q8(e,t,n,s=!1){const o={},r={};Am(r,Ng,1),e.propsDefaults=Object.create(null),TA(e,t,o,r);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);n?e.props=s?o:d8(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function X8(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:a}}=e,i=bn(o),[l]=e.propsOptions;let u=!1;if((s||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];const h=t[f];if(l)if(Wt(r,f))h!==r[f]&&(r[f]=h,u=!0);else{const p=$r(f);o[p]=my(l,i,p,h,e,!1)}else h!==r[f]&&(r[f]=h,u=!0)}}}else{TA(e,t,o,r)&&(u=!0);let c;for(const d in i)(!t||!Wt(t,d)&&((c=_i(d))===d||!Wt(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(o[d]=my(l,i,d,void 0,e,!0)):delete o[d]);if(r!==i)for(const d in r)(!t||!Wt(t,d)&&!0)&&(delete r[d],u=!0)}u&&Va(e,"set","$attrs")}function TA(e,t,n,s){const[o,r]=e.propsOptions;let a=!1,i;if(t)for(let l in t){if(qp(l))continue;const u=t[l];let c;o&&Wt(o,c=$r(l))?!r||!r.includes(c)?n[c]=u:(i||(i={}))[c]=u:Cw(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,a=!0)}if(r){const l=bn(n),u=i||Gn;for(let c=0;c<r.length;c++){const d=r[c];n[d]=my(o,l,d,u[d],e,!Wt(u,d))}}return a}function my(e,t,n,s,o,r){const a=e[n];if(a!=null){const i=Wt(a,"default");if(i&&s===void 0){const l=a.default;if(a.type!==Function&&Pt(l)){const{propsDefaults:u}=o;n in u?s=u[n]:(oc(o),s=u[n]=l.call(null,t),Dl())}else s=l}a[0]&&(r&&!i?s=!1:a[1]&&(s===""||s===_i(n))&&(s=!0))}return s}function NA(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const r=e.props,a={},i=[];let l=!1;if(!Pt(e)){const c=d=>{l=!0;const[f,h]=NA(d,t,!0);Hs(a,f),h&&i.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return s.set(e,Ku),Ku;if(Nt(r))for(let c=0;c<r.length;c++){const d=$r(r[c]);XS(d)&&(a[d]=Gn)}else if(r)for(const c in r){const d=$r(c);if(XS(d)){const f=r[c],h=a[d]=Nt(f)||Pt(f)?{type:f}:f;if(h){const p=JS(Boolean,h.type),m=JS(String,h.type);h[0]=p>-1,h[1]=m<0||p<m,(p>-1||Wt(h,"default"))&&i.push(d)}}}const u=[a,i];return s.set(e,u),u}function XS(e){return e[0]!=="$"}function YS(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function ZS(e,t){return YS(e)===YS(t)}function JS(e,t){return Nt(t)?t.findIndex(n=>ZS(n,e)):Pt(t)&&ZS(t,e)?0:-1}const AA=e=>e[0]==="_"||e==="$stable",xw=e=>Nt(e)?e.map(ca):[ca(e)],Y8=(e,t,n)=>{const s=oe((...o)=>xw(t(...o)),n);return s._c=!1,s},DA=(e,t,n)=>{const s=e._ctx;for(const o in e){if(AA(o))continue;const r=e[o];if(Pt(r))t[o]=Y8(o,r,s);else if(r!=null){const a=xw(r);t[o]=()=>a}}},RA=(e,t)=>{const n=xw(t);e.slots.default=()=>n},Z8=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=bn(t),Am(t,"_",n)):DA(t,e.slots={})}else e.slots={},t&&RA(e,t);Am(e.slots,Ng,1)},J8=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,a=Gn;if(s.shapeFlag&32){const i=t._;i?n&&i===1?r=!1:(Hs(o,t),!n&&i===1&&delete o._):(r=!t.$stable,DA(t,o)),a=t}else t&&(RA(e,t),a={default:1});if(r)for(const i in o)!AA(i)&&!(i in a)&&delete o[i]};function $t(e,t){const n=Xo;if(n===null)return e;const s=n.proxy,o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,i,l,u=Gn]=t[r];Pt(a)&&(a={mounted:a,updated:a}),a.deep&&$l(i),o.push({dir:a,instance:s,value:i,oldValue:void 0,arg:l,modifiers:u})}return e}function el(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let a=0;a<o.length;a++){const i=o[a];r&&(i.oldValue=r[a].value);let l=i.dir[s];l&&(tu(),yr(l,n,8,[e.el,i,e,t]),nu())}}function _A(){return{app:null,config:{isNativeTag:D5,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Q8=0;function eW(e,t){return function(s,o=null){o!=null&&!rn(o)&&(o=null);const r=_A(),a=new Set;let i=!1;const l=r.app={_uid:Q8++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:CW,get config(){return r.config},set config(u){},use(u,...c){return a.has(u)||(u&&Pt(u.install)?(a.add(u),u.install(l,...c)):Pt(u)&&(a.add(u),u(l,...c))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,c){return c?(r.components[u]=c,l):r.components[u]},directive(u,c){return c?(r.directives[u]=c,l):r.directives[u]},mount(u,c,d){if(!i){const f=le(s,o);return f.appContext=r,c&&t?t(f,u):e(f,u,d),i=!0,l._container=u,u.__vue_app__=l,Aw(f.component)||f.component.proxy}},unmount(){i&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return r.provides[u]=c,l}};return l}}function gy(e,t,n,s,o=!1){if(Nt(e)){e.forEach((f,h)=>gy(f,t&&(Nt(t)?t[h]:t),n,s,o));return}if(fy(s)&&!o)return;const r=s.shapeFlag&4?Aw(s.component)||s.component.proxy:s.el,a=o?null:r,{i,r:l}=e,u=t&&t.r,c=i.refs===Gn?i.refs={}:i.refs,d=i.setupState;if(u!=null&&u!==l&&(Xt(u)?(c[u]=null,Wt(d,u)&&(d[u]=null)):rs(u)&&(u.value=null)),Pt(l))La(l,i,12,[a,c]);else{const f=Xt(l),h=rs(l);if(f||h){const p=()=>{if(e.f){const m=f?c[l]:l.value;o?Nt(m)&&uw(m,r):Nt(m)?m.includes(r)||m.push(r):f?c[l]=[r]:(l.value=[r],e.k&&(c[e.k]=l.value))}else f?(c[l]=a,Wt(d,l)&&(d[l]=a)):rs(l)&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,Io(p,n)):p()}}}const Io=_8;function tW(e){return nW(e)}function nW(e,t){const n=F5();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:a,createText:i,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=on,cloneNode:p,insertStaticContent:m}=e,g=(U,Q,H,ne=null,ye=null,J=null,Ne=!1,Ie=null,fe=!!Q.dynamicChildren)=>{if(U===Q)return;U&&!ml(U,Q)&&(ne=ie(U),pe(U,ye,J,!0),U=null),Q.patchFlag===-2&&(fe=!1,Q.dynamicChildren=null);const{type:Ee,ref:rt,shapeFlag:Ye}=Q;switch(Ee){case Rf:v(U,Q,H,ne);break;case er:b(U,Q,H,ne);break;case ib:U==null&&$(Q,H,ne,Ne);break;case it:D(U,Q,H,ne,ye,J,Ne,Ie,fe);break;default:Ye&1?C(U,Q,H,ne,ye,J,Ne,Ie,fe):Ye&6?M(U,Q,H,ne,ye,J,Ne,Ie,fe):(Ye&64||Ye&128)&&Ee.process(U,Q,H,ne,ye,J,Ne,Ie,fe,Le)}rt!=null&&ye&&gy(rt,U&&U.ref,J,Q||U,!Q)},v=(U,Q,H,ne)=>{if(U==null)s(Q.el=i(Q.children),H,ne);else{const ye=Q.el=U.el;Q.children!==U.children&&u(ye,Q.children)}},b=(U,Q,H,ne)=>{U==null?s(Q.el=l(Q.children||""),H,ne):Q.el=U.el},$=(U,Q,H,ne)=>{[U.el,U.anchor]=m(U.children,Q,H,ne,U.el,U.anchor)},y=({el:U,anchor:Q},H,ne)=>{let ye;for(;U&&U!==Q;)ye=f(U),s(U,H,ne),U=ye;s(Q,H,ne)},w=({el:U,anchor:Q})=>{let H;for(;U&&U!==Q;)H=f(U),o(U),U=H;o(Q)},C=(U,Q,H,ne,ye,J,Ne,Ie,fe)=>{Ne=Ne||Q.type==="svg",U==null?k(Q,H,ne,ye,J,Ne,Ie,fe):x(U,Q,ye,J,Ne,Ie,fe)},k=(U,Q,H,ne,ye,J,Ne,Ie)=>{let fe,Ee;const{type:rt,props:Ye,shapeFlag:lt,transition:vt,patchFlag:Xe,dirs:de}=U;if(U.el&&p!==void 0&&Xe===-1)fe=U.el=p(U.el);else{if(fe=U.el=a(U.type,J,Ye&&Ye.is,Ye),lt&8?c(fe,U.children):lt&16&&E(U.children,fe,null,ne,ye,J&&rt!=="foreignObject",Ne,Ie),de&&el(U,null,ne,"created"),Ye){for(const Ke in Ye)Ke!=="value"&&!qp(Ke)&&r(fe,Ke,null,Ye[Ke],J,U.children,ne,ye,Y);"value"in Ye&&r(fe,"value",null,Ye.value),(Ee=Ye.onVnodeBeforeMount)&&ua(Ee,ne,U)}S(fe,U,U.scopeId,Ne,ne)}de&&el(U,null,ne,"beforeMount");const Re=(!ye||ye&&!ye.pendingBranch)&&vt&&!vt.persisted;Re&&vt.beforeEnter(fe),s(fe,Q,H),((Ee=Ye&&Ye.onVnodeMounted)||Re||de)&&Io(()=>{Ee&&ua(Ee,ne,U),Re&&vt.enter(fe),de&&el(U,null,ne,"mounted")},ye)},S=(U,Q,H,ne,ye)=>{if(H&&h(U,H),ne)for(let J=0;J<ne.length;J++)h(U,ne[J]);if(ye){let J=ye.subTree;if(Q===J){const Ne=ye.vnode;S(U,Ne,Ne.scopeId,Ne.slotScopeIds,ye.parent)}}},E=(U,Q,H,ne,ye,J,Ne,Ie,fe=0)=>{for(let Ee=fe;Ee<U.length;Ee++){const rt=U[Ee]=Ie?ci(U[Ee]):ca(U[Ee]);g(null,rt,Q,H,ne,ye,J,Ne,Ie)}},x=(U,Q,H,ne,ye,J,Ne)=>{const Ie=Q.el=U.el;let{patchFlag:fe,dynamicChildren:Ee,dirs:rt}=Q;fe|=U.patchFlag&16;const Ye=U.props||Gn,lt=Q.props||Gn;let vt;H&&tl(H,!1),(vt=lt.onVnodeBeforeUpdate)&&ua(vt,H,Q,U),rt&&el(Q,U,H,"beforeUpdate"),H&&tl(H,!0);const Xe=ye&&Q.type!=="foreignObject";if(Ee?N(U.dynamicChildren,Ee,Ie,H,ne,Xe,J):Ne||G(U,Q,Ie,null,H,ne,Xe,J,!1),fe>0){if(fe&16)A(Ie,Q,Ye,lt,H,ne,ye);else if(fe&2&&Ye.class!==lt.class&&r(Ie,"class",null,lt.class,ye),fe&4&&r(Ie,"style",Ye.style,lt.style,ye),fe&8){const de=Q.dynamicProps;for(let Re=0;Re<de.length;Re++){const Ke=de[Re],Ae=Ye[Ke],ct=lt[Ke];(ct!==Ae||Ke==="value")&&r(Ie,Ke,Ae,ct,ye,U.children,H,ne,Y)}}fe&1&&U.children!==Q.children&&c(Ie,Q.children)}else!Ne&&Ee==null&&A(Ie,Q,Ye,lt,H,ne,ye);((vt=lt.onVnodeUpdated)||rt)&&Io(()=>{vt&&ua(vt,H,Q,U),rt&&el(Q,U,H,"updated")},ne)},N=(U,Q,H,ne,ye,J,Ne)=>{for(let Ie=0;Ie<Q.length;Ie++){const fe=U[Ie],Ee=Q[Ie],rt=fe.el&&(fe.type===it||!ml(fe,Ee)||fe.shapeFlag&70)?d(fe.el):H;g(fe,Ee,rt,null,ne,ye,J,Ne,!0)}},A=(U,Q,H,ne,ye,J,Ne)=>{if(H!==ne){for(const Ie in ne){if(qp(Ie))continue;const fe=ne[Ie],Ee=H[Ie];fe!==Ee&&Ie!=="value"&&r(U,Ie,Ee,fe,Ne,Q.children,ye,J,Y)}if(H!==Gn)for(const Ie in H)!qp(Ie)&&!(Ie in ne)&&r(U,Ie,H[Ie],null,Ne,Q.children,ye,J,Y);"value"in ne&&r(U,"value",H.value,ne.value)}},D=(U,Q,H,ne,ye,J,Ne,Ie,fe)=>{const Ee=Q.el=U?U.el:i(""),rt=Q.anchor=U?U.anchor:i("");let{patchFlag:Ye,dynamicChildren:lt,slotScopeIds:vt}=Q;vt&&(Ie=Ie?Ie.concat(vt):vt),U==null?(s(Ee,H,ne),s(rt,H,ne),E(Q.children,H,rt,ye,J,Ne,Ie,fe)):Ye>0&&Ye&64&&lt&&U.dynamicChildren?(N(U.dynamicChildren,lt,H,ye,J,Ne,Ie),(Q.key!=null||ye&&Q===ye.subTree)&&Iw(U,Q,!0)):G(U,Q,H,rt,ye,J,Ne,Ie,fe)},M=(U,Q,H,ne,ye,J,Ne,Ie,fe)=>{Q.slotScopeIds=Ie,U==null?Q.shapeFlag&512?ye.ctx.activate(Q,H,ne,Ne,fe):F(Q,H,ne,ye,J,Ne,fe):R(U,Q,fe)},F=(U,Q,H,ne,ye,J,Ne)=>{const Ie=U.component=pW(U,ne,ye);if(Ig(U)&&(Ie.ctx.renderer=Le),mW(Ie),Ie.asyncDep){if(ye&&ye.registerDep(Ie,P),!U.el){const fe=Ie.subTree=le(er);b(null,fe,Q,H)}return}P(Ie,U,Q,H,ye,J,Ne)},R=(U,Q,H)=>{const ne=Q.component=U.component;if(A8(U,Q,H))if(ne.asyncDep&&!ne.asyncResolved){V(ne,Q,H);return}else ne.next=Q,S8(ne.update),ne.update();else Q.component=U.component,Q.el=U.el,ne.vnode=Q},P=(U,Q,H,ne,ye,J,Ne)=>{const Ie=()=>{if(U.isMounted){let{next:rt,bu:Ye,u:lt,parent:vt,vnode:Xe}=U,de=rt,Re;tl(U,!1),rt?(rt.el=Xe.el,V(U,rt,Ne)):rt=Xe,Ye&&Yp(Ye),(Re=rt.props&&rt.props.onVnodeBeforeUpdate)&&ua(Re,vt,rt,Xe),tl(U,!0);const Ke=rb(U),Ae=U.subTree;U.subTree=Ke,g(Ae,Ke,d(Ae.el),ie(Ae),U,ye,J),rt.el=Ke.el,de===null&&D8(U,Ke.el),lt&&Io(lt,ye),(Re=rt.props&&rt.props.onVnodeUpdated)&&Io(()=>ua(Re,vt,rt,Xe),ye)}else{let rt;const{el:Ye,props:lt}=Q,{bm:vt,m:Xe,parent:de}=U,Re=fy(Q);if(tl(U,!1),vt&&Yp(vt),!Re&&(rt=lt&&lt.onVnodeBeforeMount)&&ua(rt,de,Q),tl(U,!0),Ye&&Pe){const Ke=()=>{U.subTree=rb(U),Pe(Ye,U.subTree,U,ye,null)};Re?Q.type.__asyncLoader().then(()=>!U.isUnmounted&&Ke()):Ke()}else{const Ke=U.subTree=rb(U);g(null,Ke,H,ne,U,ye,J),Q.el=Ke.el}if(Xe&&Io(Xe,ye),!Re&&(rt=lt&&lt.onVnodeMounted)){const Ke=Q;Io(()=>ua(rt,de,Ke),ye)}Q.shapeFlag&256&&U.a&&Io(U.a,ye),U.isMounted=!0,Q=H=ne=null}},fe=U.effect=new hw(Ie,()=>pA(U.update),U.scope),Ee=U.update=fe.run.bind(fe);Ee.id=U.uid,tl(U,!0),Ee()},V=(U,Q,H)=>{Q.component=U;const ne=U.vnode.props;U.vnode=Q,U.next=null,X8(U,Q.props,ne,H),J8(U,Q.children,H),tu(),$w(void 0,U.update),nu()},G=(U,Q,H,ne,ye,J,Ne,Ie,fe=!1)=>{const Ee=U&&U.children,rt=U?U.shapeFlag:0,Ye=Q.children,{patchFlag:lt,shapeFlag:vt}=Q;if(lt>0){if(lt&128){ke(Ee,Ye,H,ne,ye,J,Ne,Ie,fe);return}else if(lt&256){se(Ee,Ye,H,ne,ye,J,Ne,Ie,fe);return}}vt&8?(rt&16&&Y(Ee,ye,J),Ye!==Ee&&c(H,Ye)):rt&16?vt&16?ke(Ee,Ye,H,ne,ye,J,Ne,Ie,fe):Y(Ee,ye,J,!0):(rt&8&&c(H,""),vt&16&&E(Ye,H,ne,ye,J,Ne,Ie,fe))},se=(U,Q,H,ne,ye,J,Ne,Ie,fe)=>{U=U||Ku,Q=Q||Ku;const Ee=U.length,rt=Q.length,Ye=Math.min(Ee,rt);let lt;for(lt=0;lt<Ye;lt++){const vt=Q[lt]=fe?ci(Q[lt]):ca(Q[lt]);g(U[lt],vt,H,null,ye,J,Ne,Ie,fe)}Ee>rt?Y(U,ye,J,!0,!1,Ye):E(Q,H,ne,ye,J,Ne,Ie,fe,Ye)},ke=(U,Q,H,ne,ye,J,Ne,Ie,fe)=>{let Ee=0;const rt=Q.length;let Ye=U.length-1,lt=rt-1;for(;Ee<=Ye&&Ee<=lt;){const vt=U[Ee],Xe=Q[Ee]=fe?ci(Q[Ee]):ca(Q[Ee]);if(ml(vt,Xe))g(vt,Xe,H,null,ye,J,Ne,Ie,fe);else break;Ee++}for(;Ee<=Ye&&Ee<=lt;){const vt=U[Ye],Xe=Q[lt]=fe?ci(Q[lt]):ca(Q[lt]);if(ml(vt,Xe))g(vt,Xe,H,null,ye,J,Ne,Ie,fe);else break;Ye--,lt--}if(Ee>Ye){if(Ee<=lt){const vt=lt+1,Xe=vt<rt?Q[vt].el:ne;for(;Ee<=lt;)g(null,Q[Ee]=fe?ci(Q[Ee]):ca(Q[Ee]),H,Xe,ye,J,Ne,Ie,fe),Ee++}}else if(Ee>lt)for(;Ee<=Ye;)pe(U[Ee],ye,J,!0),Ee++;else{const vt=Ee,Xe=Ee,de=new Map;for(Ee=Xe;Ee<=lt;Ee++){const Kt=Q[Ee]=fe?ci(Q[Ee]):ca(Q[Ee]);Kt.key!=null&&de.set(Kt.key,Ee)}let Re,Ke=0;const Ae=lt-Xe+1;let ct=!1,wt=0;const sn=new Array(Ae);for(Ee=0;Ee<Ae;Ee++)sn[Ee]=0;for(Ee=vt;Ee<=Ye;Ee++){const Kt=U[Ee];if(Ke>=Ae){pe(Kt,ye,J,!0);continue}let _n;if(Kt.key!=null)_n=de.get(Kt.key);else for(Re=Xe;Re<=lt;Re++)if(sn[Re-Xe]===0&&ml(Kt,Q[Re])){_n=Re;break}_n===void 0?pe(Kt,ye,J,!0):(sn[_n-Xe]=Ee+1,_n>=wt?wt=_n:ct=!0,g(Kt,Q[_n],H,null,ye,J,Ne,Ie,fe),Ke++)}const ln=ct?sW(sn):Ku;for(Re=ln.length-1,Ee=Ae-1;Ee>=0;Ee--){const Kt=Xe+Ee,_n=Q[Kt],Vo=Kt+1<rt?Q[Kt+1].el:ne;sn[Ee]===0?g(null,_n,H,Vo,ye,J,Ne,Ie,fe):ct&&(Re<0||Ee!==ln[Re]?te(_n,H,Vo,2):Re--)}}},te=(U,Q,H,ne,ye=null)=>{const{el:J,type:Ne,transition:Ie,children:fe,shapeFlag:Ee}=U;if(Ee&6){te(U.component.subTree,Q,H,ne);return}if(Ee&128){U.suspense.move(Q,H,ne);return}if(Ee&64){Ne.move(U,Q,H,Le);return}if(Ne===it){s(J,Q,H);for(let Ye=0;Ye<fe.length;Ye++)te(fe[Ye],Q,H,ne);s(U.anchor,Q,H);return}if(Ne===ib){y(U,Q,H);return}if(ne!==2&&Ee&1&&Ie)if(ne===0)Ie.beforeEnter(J),s(J,Q,H),Io(()=>Ie.enter(J),ye);else{const{leave:Ye,delayLeave:lt,afterLeave:vt}=Ie,Xe=()=>s(J,Q,H),de=()=>{Ye(J,()=>{Xe(),vt&&vt()})};lt?lt(J,Xe,de):de()}else s(J,Q,H)},pe=(U,Q,H,ne=!1,ye=!1)=>{const{type:J,props:Ne,ref:Ie,children:fe,dynamicChildren:Ee,shapeFlag:rt,patchFlag:Ye,dirs:lt}=U;if(Ie!=null&&gy(Ie,null,H,U,!0),rt&256){Q.ctx.deactivate(U);return}const vt=rt&1&&lt,Xe=!fy(U);let de;if(Xe&&(de=Ne&&Ne.onVnodeBeforeUnmount)&&ua(de,Q,U),rt&6)X(U.component,H,ne);else{if(rt&128){U.suspense.unmount(H,ne);return}vt&&el(U,null,Q,"beforeUnmount"),rt&64?U.type.remove(U,Q,H,ye,Le,ne):Ee&&(J!==it||Ye>0&&Ye&64)?Y(Ee,Q,H,!1,!0):(J===it&&Ye&384||!ye&&rt&16)&&Y(fe,Q,H),ne&&ae(U)}(Xe&&(de=Ne&&Ne.onVnodeUnmounted)||vt)&&Io(()=>{de&&ua(de,Q,U),vt&&el(U,null,Q,"unmounted")},H)},ae=U=>{const{type:Q,el:H,anchor:ne,transition:ye}=U;if(Q===it){K(H,ne);return}if(Q===ib){w(U);return}const J=()=>{o(H),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(U.shapeFlag&1&&ye&&!ye.persisted){const{leave:Ne,delayLeave:Ie}=ye,fe=()=>Ne(H,J);Ie?Ie(U.el,J,fe):fe()}else J()},K=(U,Q)=>{let H;for(;U!==Q;)H=f(U),o(U),U=H;o(Q)},X=(U,Q,H)=>{const{bum:ne,scope:ye,update:J,subTree:Ne,um:Ie}=U;ne&&Yp(ne),ye.stop(),J&&(J.active=!1,pe(Ne,U,Q,H)),Ie&&Io(Ie,Q),Io(()=>{U.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},Y=(U,Q,H,ne=!1,ye=!1,J=0)=>{for(let Ne=J;Ne<U.length;Ne++)pe(U[Ne],Q,H,ne,ye)},ie=U=>U.shapeFlag&6?ie(U.component.subTree):U.shapeFlag&128?U.suspense.next():f(U.anchor||U.el),xe=(U,Q,H)=>{U==null?Q._vnode&&pe(Q._vnode,null,null,!0):g(Q._vnode||null,U,Q,null,null,null,H),vA(),Q._vnode=U},Le={p:g,um:pe,m:te,r:ae,mt:F,mc:E,pc:G,pbc:N,n:ie,o:e};let Be,Pe;return t&&([Be,Pe]=t(Le)),{render:xe,hydrate:Be,createApp:eW(xe,Be)}}function tl({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Iw(e,t,n=!1){const s=e.children,o=t.children;if(Nt(s)&&Nt(o))for(let r=0;r<s.length;r++){const a=s[r];let i=o[r];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[r]=ci(o[r]),i.el=a.el),n||Iw(a,i))}}function sW(e){const t=e.slice(),n=[0];let s,o,r,a,i;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(r=0,a=n.length-1;r<a;)i=r+a>>1,e[n[i]]<u?r=i+1:a=i;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}const oW=e=>e.__isTeleport,Fd=e=>e&&(e.disabled||e.disabled===""),QS=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,vy=(e,t)=>{const n=e&&e.to;return Xt(n)?t?t(n):null:n},rW={__isTeleport:!0,process(e,t,n,s,o,r,a,i,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:g}}=u,v=Fd(t.props);let{shapeFlag:b,children:$,dynamicChildren:y}=t;if(e==null){const w=t.el=m(""),C=t.anchor=m("");h(w,n,s),h(C,n,s);const k=t.target=vy(t.props,p),S=t.targetAnchor=m("");k&&(h(S,k),a=a||QS(k));const E=(x,N)=>{b&16&&c($,x,N,o,r,a,i,l)};v?E(n,C):k&&E(k,S)}else{t.el=e.el;const w=t.anchor=e.anchor,C=t.target=e.target,k=t.targetAnchor=e.targetAnchor,S=Fd(e.props),E=S?n:C,x=S?w:k;if(a=a||QS(C),y?(f(e.dynamicChildren,y,E,o,r,a,i),Iw(e,t,!0)):l||d(e,t,E,x,o,r,a,i,!1),v)S||Cp(t,n,w,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const N=t.target=vy(t.props,p);N&&Cp(t,N,null,u,0)}else S&&Cp(t,C,k,u,1)}},remove(e,t,n,s,{um:o,o:{remove:r}},a){const{shapeFlag:i,children:l,anchor:u,targetAnchor:c,target:d,props:f}=e;if(d&&r(c),(a||!Fd(f))&&(r(u),i&16))for(let h=0;h<l.length;h++){const p=l[h];o(p,t,n,!0,!!p.dynamicChildren)}},move:Cp,hydrate:aW};function Cp(e,t,n,{o:{insert:s},m:o},r=2){r===0&&s(e.targetAnchor,t,n);const{el:a,anchor:i,shapeFlag:l,children:u,props:c}=e,d=r===2;if(d&&s(a,t,n),(!d||Fd(c))&&l&16)for(let f=0;f<u.length;f++)o(u[f],t,n,2);d&&s(i,t,n)}function aW(e,t,n,s,o,r,{o:{nextSibling:a,parentNode:i,querySelector:l}},u){const c=t.target=vy(t.props,l);if(c){const d=c._lpa||c.firstChild;t.shapeFlag&16&&(Fd(t.props)?(t.anchor=u(a(e),t,i(e),n,s,o,r),t.targetAnchor=d):(t.anchor=a(e),t.targetAnchor=u(d,t,c,n,s,o,r)),c._lpa=t.targetAnchor&&a(t.targetAnchor))}return t.anchor&&a(t.anchor)}const Tg=rW,Ew="components",iW="directives";function re(e,t){return Tw(Ew,e,!0,t)||e}const OA=Symbol();function en(e){return Xt(e)?Tw(Ew,e,!1)||e:e||OA}function wo(e){return Tw(iW,e)}function Tw(e,t,n=!0,s=!1){const o=Xo||Vs;if(o){const r=o.type;if(e===Ew){const i=zA(r);if(i&&(i===t||i===$r(t)||i===Ko($r(t))))return r}const a=ex(o[e]||r[e],t)||ex(o.appContext[e],t);return!a&&s?r:a}}function ex(e,t){return e&&(e[t]||e[$r(t)]||e[Ko($r(t))])}const it=Symbol(void 0),Rf=Symbol(void 0),er=Symbol(void 0),ib=Symbol(void 0),Pd=[];let Al=null;function T(e=!1){Pd.push(Al=e?null:[])}function lW(){Pd.pop(),Al=Pd[Pd.length-1]||null}let Fm=1;function tx(e){Fm+=e}function MA(e){return e.dynamicChildren=Fm>0?Al||Ku:null,lW(),Fm>0&&Al&&Al.push(e),e}function B(e,t,n,s,o,r){return MA(W(e,t,n,s,o,r,!0))}function ve(e,t,n,s,o){return MA(le(e,t,n,s,o,!0))}function bs(e){return e?e.__v_isVNode===!0:!1}function ml(e,t){return e.type===t.type&&e.key===t.key}const Ng="__vInternal",FA=({key:e})=>e!=null?e:null,Zp=({ref:e,ref_key:t,ref_for:n})=>e!=null?Xt(e)||rs(e)||Pt(e)?{i:Xo,r:e,k:t,f:!!n}:e:null;function W(e,t=null,n=null,s=0,o=null,r=e===it?0:1,a=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&FA(t),ref:t&&Zp(t),scopeId:xg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return i?(Nw(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Xt(n)?8:16),Fm>0&&!a&&Al&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Al.push(l),l}const le=uW;function uW(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===OA)&&(e=er),bs(e)){const i=Vl(e,t,!0);return n&&Nw(i,n),i}if($W(e)&&(e=e.__vccOpts),t){t=zl(t);let{class:i,style:l}=t;i&&!Xt(i)&&(t.class=q(i)),rn(l)&&(uA(l)&&!Nt(l)&&(l=Hs({},l)),t.style=nt(l))}const a=Xt(e)?1:R8(e)?128:oW(e)?64:rn(e)?4:Pt(e)?2:0;return W(e,t,n,s,o,a,r,!0)}function zl(e){return e?uA(e)||Ng in e?Hs({},e):e:null}function Vl(e,t,n=!1){const{props:s,ref:o,patchFlag:r,children:a}=e,i=t?Us(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:i,key:i&&FA(i),ref:t&&t.ref?n&&o?Nt(o)?o.concat(Zp(t)):[o,Zp(t)]:Zp(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==it?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vl(e.ssContent),ssFallback:e.ssFallback&&Vl(e.ssFallback),el:e.el,anchor:e.anchor}}function jt(e=" ",t=0){return le(Rf,null,e,t)}function ce(e="",t=!1){return t?(T(),ve(er,null,e)):le(er,null,e)}function ca(e){return e==null||typeof e=="boolean"?le(er):Nt(e)?le(it,null,e.slice()):typeof e=="object"?ci(e):le(Rf,null,String(e))}function ci(e){return e.el===null||e.memo?e:Vl(e)}function Nw(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Nt(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Nw(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(Ng in t)?t._ctx=Xo:o===3&&Xo&&(Xo.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Pt(t)?(t={default:t,_ctx:Xo},n=32):(t=String(t),s&64?(n=16,t=[jt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Us(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=q([t.class,s.class]));else if(o==="style")t.style=nt([t.style,s.style]);else if(wg(o)){const r=t[o],a=s[o];a&&r!==a&&!(Nt(r)&&r.includes(a))&&(t[o]=r?[].concat(r,a):a)}else o!==""&&(t[o]=s[o])}return t}function ua(e,t,n,s=null){yr(e,t,7,[n,s])}function Yt(e,t,n,s){let o;const r=n&&n[s];if(Nt(e)||Xt(e)){o=new Array(e.length);for(let a=0,i=e.length;a<i;a++)o[a]=t(e[a],a,void 0,r&&r[a])}else if(typeof e=="number"){o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,r&&r[a])}else if(rn(e))if(e[Symbol.iterator])o=Array.from(e,(a,i)=>t(a,i,void 0,r&&r[i]));else{const a=Object.keys(e);o=new Array(a.length);for(let i=0,l=a.length;i<l;i++){const u=a[i];o[i]=t(e[u],u,i,r&&r[i])}}else o=[];return n&&(n[s]=o),o}function tf(e,t){for(let n=0;n<t.length;n++){const s=t[n];if(Nt(s))for(let o=0;o<s.length;o++)e[s[o].name]=s[o].fn;else s&&(e[s.name]=s.fn)}return e}function _e(e,t,n={},s,o){if(Xo.isCE)return le("slot",t==="default"?null:{name:t},s&&s());let r=e[t];r&&r._c&&(r._d=!1),T();const a=r&&PA(r(n)),i=ve(it,{key:n.key||`_${t}`},a||(s?s():[]),a&&e._===1?64:-2);return!o&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),r&&r._c&&(r._d=!0),i}function PA(e){return e.some(t=>bs(t)?!(t.type===er||t.type===it&&!PA(t.children)):!0)?e:null}function cW(e){const t={};for(const n in e)t[Xp(n)]=e[n];return t}const by=e=>e?LA(e)?Aw(e)||e.proxy:by(e.parent):null,Pm=Hs(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>by(e.parent),$root:e=>by(e.root),$emit:e=>e.emit,$options:e=>EA(e),$forceUpdate:e=>()=>pA(e.update),$nextTick:e=>dt.bind(e.proxy),$watch:e=>O8.bind(e)}),dW={get({_:e},t){const{ctx:n,setupState:s,data:o,props:r,accessCache:a,type:i,appContext:l}=e;let u;if(t[0]!=="$"){const h=a[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(s!==Gn&&Wt(s,t))return a[t]=1,s[t];if(o!==Gn&&Wt(o,t))return a[t]=2,o[t];if((u=e.propsOptions[0])&&Wt(u,t))return a[t]=3,r[t];if(n!==Gn&&Wt(n,t))return a[t]=4,n[t];hy&&(a[t]=0)}}const c=Pm[t];let d,f;if(c)return t==="$attrs"&&Qo(e,"get",t),c(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(n!==Gn&&Wt(n,t))return a[t]=4,n[t];if(f=l.config.globalProperties,Wt(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return o!==Gn&&Wt(o,t)?(o[t]=n,!0):s!==Gn&&Wt(s,t)?(s[t]=n,!0):Wt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r}},a){let i;return!!n[a]||e!==Gn&&Wt(e,a)||t!==Gn&&Wt(t,a)||(i=r[0])&&Wt(i,a)||Wt(s,a)||Wt(Pm,a)||Wt(o.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?this.set(e,t,n.get(),null):n.value!=null&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},fW=_A();let hW=0;function pW(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||fW,r={uid:hW++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new YN(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:NA(s,o),emitsOptions:yA(s,o),emit:null,emitted:null,propsDefaults:Gn,inheritAttrs:s.inheritAttrs,ctx:Gn,data:Gn,props:Gn,attrs:Gn,slots:Gn,refs:Gn,setupState:Gn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=E8.bind(null,r),e.ce&&e.ce(r),r}let Vs=null;const Lt=()=>Vs||Xo,oc=e=>{Vs=e,e.scope.on()},Dl=()=>{Vs&&Vs.scope.off(),Vs=null};function LA(e){return e.vnode.shapeFlag&4}let nf=!1;function mW(e,t=!1){nf=t;const{props:n,children:s}=e.vnode,o=LA(e);q8(e,n,o,t),Z8(e,s);const r=o?gW(e,t):void 0;return nf=!1,r}function gW(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Yd(new Proxy(e.ctx,dW));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?bW(e):null;oc(e),tu();const r=La(s,e,0,[e.props,o]);if(nu(),Dl(),sc(r)){if(r.then(Dl,Dl),t)return r.then(a=>{nx(e,a,t)}).catch(a=>{Sg(a,e,0)});e.asyncDep=r}else nx(e,r,t)}else BA(e,t)}function nx(e,t,n){Pt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:rn(t)&&(e.setupState=Rm(t)),BA(e,n)}let sx;function BA(e,t,n){const s=e.type;if(!e.render){if(!t&&sx&&!s.render){const o=s.template;if(o){const{isCustomElement:r,compilerOptions:a}=e.appContext.config,{delimiters:i,compilerOptions:l}=s,u=Hs(Hs({isCustomElement:r,delimiters:i},a),l);s.render=sx(o,u)}}e.render=s.render||on}oc(e),tu(),H8(e),nu(),Dl()}function vW(e){return new Proxy(e.attrs,{get(t,n){return Qo(e,"get","$attrs"),t[n]}})}function bW(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=vW(e))},slots:e.slots,emit:e.emit,expose:t}}function Aw(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Rm(Yd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Pm)return Pm[n](e)}}))}const yW=/(?:^|[-_])(\w)/g,wW=e=>e.replace(yW,t=>t.toUpperCase()).replace(/[-_]/g,"");function zA(e){return Pt(e)&&e.displayName||e.name}function VA(e,t,n=!1){let s=zA(t);if(!s&&t.__file){const o=t.__file.match(/([^/\\]+)\.\w+$/);o&&(s=o[1])}if(!s&&e&&e.parent){const o=r=>{for(const a in r)if(r[a]===t)return a};s=o(e.components||e.parent.type.components)||o(e.appContext.components)}return s?wW(s):n?"App":"Anonymous"}function $W(e){return Pt(e)&&"__vccOpts"in e}const _=(e,t)=>g8(e,t,nf);function He(e,t,n){const s=arguments.length;return s===2?rn(t)&&!Nt(t)?bs(t)?le(e,null,[t]):le(e,t):le(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&bs(n)&&(n=[n]),le(e,t,n))}const CW="3.2.31",kW="http://www.w3.org/2000/svg",gl=typeof document!="undefined"?document:null,ox=gl&&gl.createElement("template"),SW={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t?gl.createElementNS(kW,e):gl.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>gl.createTextNode(e),createComment:e=>gl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>gl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,s,o,r){const a=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{ox.innerHTML=s?`<svg>${e}</svg>`:e;const i=ox.content;if(s){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function xW(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function IW(e,t,n){const s=e.style,o=Xt(n);if(n&&!o){for(const r in n)yy(s,r,n[r]);if(t&&!Xt(t))for(const r in t)n[r]==null&&yy(s,r,"")}else{const r=s.display;o?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=r)}}const rx=/\s*!important$/;function yy(e,t,n){if(Nt(n))n.forEach(s=>yy(e,t,s));else if(t.startsWith("--"))e.setProperty(t,n);else{const s=EW(e,t);rx.test(n)?e.setProperty(_i(s),n.replace(rx,""),"important"):e[s]=n}}const ax=["Webkit","Moz","ms"],lb={};function EW(e,t){const n=lb[t];if(n)return n;let s=$r(t);if(s!=="filter"&&s in e)return lb[t]=s;s=Ko(s);for(let o=0;o<ax.length;o++){const r=ax[o]+s;if(r in e)return lb[t]=r}return t}const ix="http://www.w3.org/1999/xlink";function TW(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ix,t.slice(6,t.length)):e.setAttributeNS(ix,t,n);else{const r=I5(t);n==null||r&&!GN(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function NW(e,t,n,s,o,r,a){if(t==="innerHTML"||t==="textContent"){s&&a(s,o,r),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const i=n==null?"":n;(e.value!==i||e.tagName==="OPTION")&&(e.value=i),n==null&&e.removeAttribute(t);return}if(n===""||n==null){const i=typeof e[t];if(i==="boolean"){e[t]=GN(n);return}else if(n==null&&i==="string"){e[t]="",e.removeAttribute(t);return}else if(i==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=n}catch{}}let Lm=Date.now,WA=!1;if(typeof window!="undefined"){Lm()>document.createEvent("Event").timeStamp&&(Lm=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);WA=!!(e&&Number(e[1])<=53)}let wy=0;const AW=Promise.resolve(),DW=()=>{wy=0},RW=()=>wy||(AW.then(DW),wy=Lm());function hi(e,t,n,s){e.addEventListener(t,n,s)}function _W(e,t,n,s){e.removeEventListener(t,n,s)}function OW(e,t,n,s,o=null){const r=e._vei||(e._vei={}),a=r[t];if(s&&a)a.value=s;else{const[i,l]=MW(t);if(s){const u=r[t]=FW(s,o);hi(e,i,u,l)}else a&&(_W(e,i,a,l),r[t]=void 0)}}const lx=/(?:Once|Passive|Capture)$/;function MW(e){let t;if(lx.test(e)){t={};let n;for(;n=e.match(lx);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[_i(e.slice(2)),t]}function FW(e,t){const n=s=>{const o=s.timeStamp||Lm();(WA||o>=n.attached-1)&&yr(PW(s,n.value),t,5,[s])};return n.value=e,n.attached=RW(),n}function PW(e,t){if(Nt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const ux=/^on[a-z]/,LW=(e,t,n,s,o=!1,r,a,i,l)=>{t==="class"?xW(e,s,o):t==="style"?IW(e,n,s):wg(t)?lw(t)||OW(e,t,n,s,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):BW(e,t,s,o))?NW(e,t,s,r,a,i,l):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),TW(e,t,s,o))};function BW(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&ux.test(t)&&Pt(n)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||ux.test(t)&&Xt(n)?!1:t in e}const ai="transition",cd="animation",cs=(e,{slots:t})=>He(CA,UA(e),t);cs.displayName="Transition";const HA={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},zW=cs.props=Hs({},CA.props,HA),nl=(e,t=[])=>{Nt(e)?e.forEach(n=>n(...t)):e&&e(...t)},cx=e=>e?Nt(e)?e.some(t=>t.length>1):e.length>1:!1;function UA(e){const t={};for(const A in e)A in HA||(t[A]=e[A]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:u=a,appearToClass:c=i,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,p=VW(o),m=p&&p[0],g=p&&p[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:$,onLeave:y,onLeaveCancelled:w,onBeforeAppear:C=v,onAppear:k=b,onAppearCancelled:S=$}=t,E=(A,D,M)=>{cl(A,D?c:i),cl(A,D?u:a),M&&M()},x=(A,D)=>{cl(A,h),cl(A,f),D&&D()},N=A=>(D,M)=>{const F=A?k:b,R=()=>E(D,A,M);nl(F,[D,R]),dx(()=>{cl(D,A?l:r),Ra(D,A?c:i),cx(F)||fx(D,s,m,R)})};return Hs(t,{onBeforeEnter(A){nl(v,[A]),Ra(A,r),Ra(A,a)},onBeforeAppear(A){nl(C,[A]),Ra(A,l),Ra(A,u)},onEnter:N(!1),onAppear:N(!0),onLeave(A,D){const M=()=>x(A,D);Ra(A,d),KA(),Ra(A,f),dx(()=>{cl(A,d),Ra(A,h),cx(y)||fx(A,s,g,M)}),nl(y,[A,M])},onEnterCancelled(A){E(A,!1),nl($,[A])},onAppearCancelled(A){E(A,!0),nl(S,[A])},onLeaveCancelled(A){x(A),nl(w,[A])}})}function VW(e){if(e==null)return null;if(rn(e))return[ub(e.enter),ub(e.leave)];{const t=ub(e);return[t,t]}}function ub(e){return Dm(e)}function Ra(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function cl(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function dx(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let WW=0;function fx(e,t,n,s){const o=e._endId=++WW,r=()=>{o===e._endId&&s()};if(n)return setTimeout(r,n);const{type:a,timeout:i,propCount:l}=GA(e,t);if(!a)return s();const u=a+"end";let c=0;const d=()=>{e.removeEventListener(u,f),r()},f=h=>{h.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},i+1),e.addEventListener(u,f)}function GA(e,t){const n=window.getComputedStyle(e),s=p=>(n[p]||"").split(", "),o=s(ai+"Delay"),r=s(ai+"Duration"),a=hx(o,r),i=s(cd+"Delay"),l=s(cd+"Duration"),u=hx(i,l);let c=null,d=0,f=0;t===ai?a>0&&(c=ai,d=a,f=r.length):t===cd?u>0&&(c=cd,d=u,f=l.length):(d=Math.max(a,u),c=d>0?a>u?ai:cd:null,f=c?c===ai?r.length:l.length:0);const h=c===ai&&/\b(transform|all)(,|$)/.test(n[ai+"Property"]);return{type:c,timeout:d,propCount:f,hasTransform:h}}function hx(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>px(n)+px(e[s])))}function px(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function KA(){return document.body.offsetHeight}const jA=new WeakMap,qA=new WeakMap,HW={name:"TransitionGroup",props:Hs({},zW,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Lt(),s=$A();let o,r;return sa(()=>{if(!o.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!qW(o[0].el,n.vnode.el,a))return;o.forEach(GW),o.forEach(KW);const i=o.filter(jW);KA(),i.forEach(l=>{const u=l.el,c=u.style;Ra(u,a),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,cl(u,a))};u.addEventListener("transitionend",d)})}),()=>{const a=bn(e),i=UA(a);let l=a.tag||it;o=r,r=t.default?Sw(t.default()):[];for(let u=0;u<r.length;u++){const c=r[u];c.key!=null&&ef(c,Qd(c,i,s,n))}if(o)for(let u=0;u<o.length;u++){const c=o[u];ef(c,Qd(c,i,s,n)),jA.set(c,c.el.getBoundingClientRect())}return le(l,null,r)}}},UW=HW;function GW(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function KW(e){qA.set(e,e.el.getBoundingClientRect())}function jW(e){const t=jA.get(e),n=qA.get(e),s=t.left-n.left,o=t.top-n.top;if(s||o){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${o}px)`,r.transitionDuration="0s",e}}function qW(e,t,n){const s=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(i=>i&&s.classList.remove(i))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(s);const{hasTransform:r}=GA(s);return o.removeChild(s),r}const rc=e=>{const t=e.props["onUpdate:modelValue"];return Nt(t)?n=>Yp(t,n):t};function XW(e){e.target.composing=!0}function mx(e){const t=e.target;t.composing&&(t.composing=!1,YW(t,"input"))}function YW(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const Dw={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e._assign=rc(o);const r=s||o.props&&o.props.type==="number";hi(e,t?"change":"input",a=>{if(a.target.composing)return;let i=e.value;n?i=i.trim():r&&(i=Dm(i)),e._assign(i)}),n&&hi(e,"change",()=>{e.value=e.value.trim()}),t||(hi(e,"compositionstart",XW),hi(e,"compositionend",mx),hi(e,"change",mx))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:o}},r){if(e._assign=rc(r),e.composing||document.activeElement===e&&(n||s&&e.value.trim()===t||(o||e.type==="number")&&Dm(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},Bm={deep:!0,created(e,t,n){e._assign=rc(n),hi(e,"change",()=>{const s=e._modelValue,o=YA(e),r=e.checked,a=e._assign;if(Nt(s)){const i=KN(s,o),l=i!==-1;if(r&&!l)a(s.concat(o));else if(!r&&l){const u=[...s];u.splice(i,1),a(u)}}else if($g(s)){const i=new Set(s);r?i.add(o):i.delete(o),a(i)}else a(ZA(e,r))})},mounted:gx,beforeUpdate(e,t,n){e._assign=rc(n),gx(e,t,n)}};function gx(e,{value:t,oldValue:n},s){e._modelValue=t,Nt(t)?e.checked=KN(t,s.props.value)>-1:$g(t)?e.checked=t.has(s.props.value):t!==n&&(e.checked=nc(t,ZA(e,!0)))}const XA={created(e,{value:t},n){e.checked=nc(t,n.props.value),e._assign=rc(n),hi(e,"change",()=>{e._assign(YA(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e._assign=rc(s),t!==n&&(e.checked=nc(t,s.props.value))}};function YA(e){return"_value"in e?e._value:e.value}function ZA(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const ZW=["ctrl","shift","alt","meta"],JW={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ZW.some(n=>e[`${n}Key`]&&!t.includes(n))},ht=(e,t)=>(n,...s)=>{for(let o=0;o<t.length;o++){const r=JW[t[o]];if(r&&r(n,t))return}return e(n,...s)},QW={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ht=(e,t)=>n=>{if(!("key"in n))return;const s=_i(n.key);if(t.some(o=>o===s||QW[o]===s))return e(n)},Qt={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):dd(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),dd(e,!0),s.enter(e)):s.leave(e,()=>{dd(e,!1)}):dd(e,t))},beforeUnmount(e,{value:t}){dd(e,t)}};function dd(e,t){e.style.display=t?e._vod:"none"}const eH=Hs({patchProp:LW},SW);let vx;function JA(){return vx||(vx=tW(eH))}const ac=(...e)=>{JA().render(...e)},tH=(...e)=>{const t=JA().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=nH(s);if(!o)return;const r=t._component;!Pt(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.innerHTML="";const a=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function nH(e){return Xt(e)?document.querySelector(e):e}var An=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function sH(e){for(var t=-1,n=e==null?0:e.length,s={};++t<n;){var o=e[t];s[o[0]]=o[1]}return s}var QA=sH;class oH extends Error{constructor(t){super(t);this.name="ElementPlusError"}}function oo(e,t){throw new oH(`[${e}] ${t}`)}const rH=["class","style"],aH=/^on[A-Z]/,Rw=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n=[]}=e,s=n.concat(rH),o=Lt();return _(o?()=>{var r;return QA(Object.entries((r=o.proxy)==null?void 0:r.$attrs).filter(([a])=>!s.includes(a)&&!(t&&aH.test(a))))}:()=>({}))},Lo=Symbol("elForm"),oa=Symbol("elFormItem"),eD=Symbol("buttonGroupContextKey"),tD=Symbol("elBreadcrumbKey"),nD=Symbol("elPaginationKey"),sD=Symbol(),oD=Symbol("radioGroupKey"),Ag=Symbol("tabsRootContextKey"),rD=Symbol("scrollbarContextKey"),$y=Symbol(),bx="__elPropsReservedKey";function Yr(e,t){if(!rn(e)||!!e[bx])return e;const{values:n,required:s,default:o,type:r,validator:a}=e,i=n||a?l=>{let u=!1,c=[];if(n&&(c=[...n,o],u||(u=c.includes(l))),a&&(u||(u=a(l))),!u&&c.length>0){const d=[...new Set(c)].map(f=>JSON.stringify(f)).join(", ");v8(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${d}], got value ${JSON.stringify(l)}.`)}return u}:void 0;return{type:typeof r=="object"&&Object.getOwnPropertySymbols(r).includes($y)?r[$y]:r,required:!!s,default:o,validator:i,[bx]:!0}}const gt=e=>QA(Object.entries(e).map(([t,n])=>[t,Yr(n,t)])),Je=e=>({[$y]:e}),iH=e=>Object.keys(e),vs=e=>e,_w=["large","default","small"],aD=e=>{const t=Lt();return _(()=>{var n,s;return(s=(n=t.proxy)==null?void 0:n.$props[e])!=null?s:void 0})};function lH(){this.__data__=[],this.size=0}var uH=lH;function cH(e,t){return e===t||e!==e&&t!==t}var Ow=cH,dH=Ow;function fH(e,t){for(var n=e.length;n--;)if(dH(e[n][0],t))return n;return-1}var Dg=fH,hH=Dg,pH=Array.prototype,mH=pH.splice;function gH(e){var t=this.__data__,n=hH(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():mH.call(t,n,1),--this.size,!0}var vH=gH,bH=Dg;function yH(e){var t=this.__data__,n=bH(t,e);return n<0?void 0:t[n][1]}var wH=yH,$H=Dg;function CH(e){return $H(this.__data__,e)>-1}var kH=CH,SH=Dg;function xH(e,t){var n=this.__data__,s=SH(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var IH=xH,EH=uH,TH=vH,NH=wH,AH=kH,DH=IH;function _c(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}_c.prototype.clear=EH;_c.prototype.delete=TH;_c.prototype.get=NH;_c.prototype.has=AH;_c.prototype.set=DH;var Rg=_c,RH=Rg;function _H(){this.__data__=new RH,this.size=0}var OH=_H;function MH(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var FH=MH;function PH(e){return this.__data__.get(e)}var LH=PH;function BH(e){return this.__data__.has(e)}var zH=BH,VH=typeof An=="object"&&An&&An.Object===Object&&An,iD=VH,WH=iD,HH=typeof self=="object"&&self&&self.Object===Object&&self,UH=WH||HH||Function("return this")(),ra=UH,GH=ra,KH=GH.Symbol,Oc=KH,yx=Oc,lD=Object.prototype,jH=lD.hasOwnProperty,qH=lD.toString,fd=yx?yx.toStringTag:void 0;function XH(e){var t=jH.call(e,fd),n=e[fd];try{e[fd]=void 0;var s=!0}catch{}var o=qH.call(e);return s&&(t?e[fd]=n:delete e[fd]),o}var YH=XH,ZH=Object.prototype,JH=ZH.toString;function QH(e){return JH.call(e)}var eU=QH,wx=Oc,tU=YH,nU=eU,sU="[object Null]",oU="[object Undefined]",$x=wx?wx.toStringTag:void 0;function rU(e){return e==null?e===void 0?oU:sU:$x&&$x in Object(e)?tU(e):nU(e)}var _f=rU;function aU(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Oi=aU,iU=_f,lU=Oi,uU="[object AsyncFunction]",cU="[object Function]",dU="[object GeneratorFunction]",fU="[object Proxy]";function hU(e){if(!lU(e))return!1;var t=iU(e);return t==cU||t==dU||t==uU||t==fU}var uD=hU,pU=ra,mU=pU["__core-js_shared__"],gU=mU,cb=gU,Cx=function(){var e=/[^.]+$/.exec(cb&&cb.keys&&cb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function vU(e){return!!Cx&&Cx in e}var bU=vU,yU=Function.prototype,wU=yU.toString;function $U(e){if(e!=null){try{return wU.call(e)}catch{}try{return e+""}catch{}}return""}var cD=$U,CU=uD,kU=bU,SU=Oi,xU=cD,IU=/[\\^$.*+?()[\]{}|]/g,EU=/^\[object .+?Constructor\]$/,TU=Function.prototype,NU=Object.prototype,AU=TU.toString,DU=NU.hasOwnProperty,RU=RegExp("^"+AU.call(DU).replace(IU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _U(e){if(!SU(e)||kU(e))return!1;var t=CU(e)?RU:EU;return t.test(xU(e))}var OU=_U;function MU(e,t){return e==null?void 0:e[t]}var FU=MU,PU=OU,LU=FU;function BU(e,t){var n=LU(e,t);return PU(n)?n:void 0}var su=BU,zU=su,VU=ra,WU=zU(VU,"Map"),Mw=WU,HU=su,UU=HU(Object,"create"),_g=UU,kx=_g;function GU(){this.__data__=kx?kx(null):{},this.size=0}var KU=GU;function jU(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var qU=jU,XU=_g,YU="__lodash_hash_undefined__",ZU=Object.prototype,JU=ZU.hasOwnProperty;function QU(e){var t=this.__data__;if(XU){var n=t[e];return n===YU?void 0:n}return JU.call(t,e)?t[e]:void 0}var eG=QU,tG=_g,nG=Object.prototype,sG=nG.hasOwnProperty;function oG(e){var t=this.__data__;return tG?t[e]!==void 0:sG.call(t,e)}var rG=oG,aG=_g,iG="__lodash_hash_undefined__";function lG(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=aG&&t===void 0?iG:t,this}var uG=lG,cG=KU,dG=qU,fG=eG,hG=rG,pG=uG;function Mc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Mc.prototype.clear=cG;Mc.prototype.delete=dG;Mc.prototype.get=fG;Mc.prototype.has=hG;Mc.prototype.set=pG;var mG=Mc,Sx=mG,gG=Rg,vG=Mw;function bG(){this.size=0,this.__data__={hash:new Sx,map:new(vG||gG),string:new Sx}}var yG=bG;function wG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var $G=wG,CG=$G;function kG(e,t){var n=e.__data__;return CG(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Og=kG,SG=Og;function xG(e){var t=SG(this,e).delete(e);return this.size-=t?1:0,t}var IG=xG,EG=Og;function TG(e){return EG(this,e).get(e)}var NG=TG,AG=Og;function DG(e){return AG(this,e).has(e)}var RG=DG,_G=Og;function OG(e,t){var n=_G(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var MG=OG,FG=yG,PG=IG,LG=NG,BG=RG,zG=MG;function Fc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Fc.prototype.clear=FG;Fc.prototype.delete=PG;Fc.prototype.get=LG;Fc.prototype.has=BG;Fc.prototype.set=zG;var Fw=Fc,VG=Rg,WG=Mw,HG=Fw,UG=200;function GG(e,t){var n=this.__data__;if(n instanceof VG){var s=n.__data__;if(!WG||s.length<UG-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new HG(s)}return n.set(e,t),this.size=n.size,this}var KG=GG,jG=Rg,qG=OH,XG=FH,YG=LH,ZG=zH,JG=KG;function Pc(e){var t=this.__data__=new jG(e);this.size=t.size}Pc.prototype.clear=qG;Pc.prototype.delete=XG;Pc.prototype.get=YG;Pc.prototype.has=ZG;Pc.prototype.set=JG;var dD=Pc,QG="__lodash_hash_undefined__";function eK(e){return this.__data__.set(e,QG),this}var tK=eK;function nK(e){return this.__data__.has(e)}var sK=nK,oK=Fw,rK=tK,aK=sK;function zm(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new oK;++t<n;)this.add(e[t])}zm.prototype.add=zm.prototype.push=rK;zm.prototype.has=aK;var fD=zm;function iK(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var lK=iK;function uK(e,t){return e.has(t)}var hD=uK,cK=fD,dK=lK,fK=hD,hK=1,pK=2;function mK(e,t,n,s,o,r){var a=n&hK,i=e.length,l=t.length;if(i!=l&&!(a&&l>i))return!1;var u=r.get(e),c=r.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=n&pK?new cK:void 0;for(r.set(e,t),r.set(t,e);++d<i;){var p=e[d],m=t[d];if(s)var g=a?s(m,p,d,t,e,r):s(p,m,d,e,t,r);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!dK(t,function(v,b){if(!fK(h,b)&&(p===v||o(p,v,n,s,r)))return h.push(b)})){f=!1;break}}else if(!(p===m||o(p,m,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}var pD=mK,gK=ra,vK=gK.Uint8Array,mD=vK;function bK(e){var t=-1,n=Array(e.size);return e.forEach(function(s,o){n[++t]=[o,s]}),n}var yK=bK;function wK(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var Pw=wK,xx=Oc,Ix=mD,$K=Ow,CK=pD,kK=yK,SK=Pw,xK=1,IK=2,EK="[object Boolean]",TK="[object Date]",NK="[object Error]",AK="[object Map]",DK="[object Number]",RK="[object RegExp]",_K="[object Set]",OK="[object String]",MK="[object Symbol]",FK="[object ArrayBuffer]",PK="[object DataView]",Ex=xx?xx.prototype:void 0,db=Ex?Ex.valueOf:void 0;function LK(e,t,n,s,o,r,a){switch(n){case PK:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case FK:return!(e.byteLength!=t.byteLength||!r(new Ix(e),new Ix(t)));case EK:case TK:case DK:return $K(+e,+t);case NK:return e.name==t.name&&e.message==t.message;case RK:case OK:return e==t+"";case AK:var i=kK;case _K:var l=s&xK;if(i||(i=SK),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;s|=IK,a.set(e,t);var c=CK(i(e),i(t),s,o,r,a);return a.delete(e),c;case MK:if(db)return db.call(e)==db.call(t)}return!1}var BK=LK;function zK(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}var Lw=zK,VK=Array.isArray,Mi=VK,WK=Lw,HK=Mi;function UK(e,t,n){var s=t(e);return HK(e)?s:WK(s,n(e))}var gD=UK;function GK(e,t){for(var n=-1,s=e==null?0:e.length,o=0,r=[];++n<s;){var a=e[n];t(a,n,e)&&(r[o++]=a)}return r}var KK=GK;function jK(){return[]}var vD=jK,qK=KK,XK=vD,YK=Object.prototype,ZK=YK.propertyIsEnumerable,Tx=Object.getOwnPropertySymbols,JK=Tx?function(e){return e==null?[]:(e=Object(e),qK(Tx(e),function(t){return ZK.call(e,t)}))}:XK,Bw=JK;function QK(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var ej=QK;function tj(e){return e!=null&&typeof e=="object"}var Fi=tj,nj=_f,sj=Fi,oj="[object Arguments]";function rj(e){return sj(e)&&nj(e)==oj}var aj=rj,Nx=aj,ij=Fi,bD=Object.prototype,lj=bD.hasOwnProperty,uj=bD.propertyIsEnumerable,cj=Nx(function(){return arguments}())?Nx:function(e){return ij(e)&&lj.call(e,"callee")&&!uj.call(e,"callee")},yD=cj,sf={exports:{}};function dj(){return!1}var fj=dj;(function(e,t){var n=ra,s=fj,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,a=r&&r.exports===o,i=a?n.Buffer:void 0,l=i?i.isBuffer:void 0,u=l||s;e.exports=u})(sf,sf.exports);var hj=9007199254740991,pj=/^(?:0|[1-9]\d*)$/;function mj(e,t){var n=typeof e;return t=t==null?hj:t,!!t&&(n=="number"||n!="symbol"&&pj.test(e))&&e>-1&&e%1==0&&e<t}var gj=mj,vj=9007199254740991;function bj(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vj}var wD=bj,yj=_f,wj=wD,$j=Fi,Cj="[object Arguments]",kj="[object Array]",Sj="[object Boolean]",xj="[object Date]",Ij="[object Error]",Ej="[object Function]",Tj="[object Map]",Nj="[object Number]",Aj="[object Object]",Dj="[object RegExp]",Rj="[object Set]",_j="[object String]",Oj="[object WeakMap]",Mj="[object ArrayBuffer]",Fj="[object DataView]",Pj="[object Float32Array]",Lj="[object Float64Array]",Bj="[object Int8Array]",zj="[object Int16Array]",Vj="[object Int32Array]",Wj="[object Uint8Array]",Hj="[object Uint8ClampedArray]",Uj="[object Uint16Array]",Gj="[object Uint32Array]",es={};es[Pj]=es[Lj]=es[Bj]=es[zj]=es[Vj]=es[Wj]=es[Hj]=es[Uj]=es[Gj]=!0;es[Cj]=es[kj]=es[Mj]=es[Sj]=es[Fj]=es[xj]=es[Ij]=es[Ej]=es[Tj]=es[Nj]=es[Aj]=es[Dj]=es[Rj]=es[_j]=es[Oj]=!1;function Kj(e){return $j(e)&&wj(e.length)&&!!es[yj(e)]}var jj=Kj;function qj(e){return function(t){return e(t)}}var zw=qj,of={exports:{}};(function(e,t){var n=iD,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===s,a=r&&n.process,i=function(){try{var l=o&&o.require&&o.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=i})(of,of.exports);var Xj=jj,Yj=zw,Ax=of.exports,Dx=Ax&&Ax.isTypedArray,Zj=Dx?Yj(Dx):Xj,$D=Zj,Jj=ej,Qj=yD,e9=Mi,t9=sf.exports,n9=gj,s9=$D,o9=Object.prototype,r9=o9.hasOwnProperty;function a9(e,t){var n=e9(e),s=!n&&Qj(e),o=!n&&!s&&t9(e),r=!n&&!s&&!o&&s9(e),a=n||s||o||r,i=a?Jj(e.length,String):[],l=i.length;for(var u in e)(t||r9.call(e,u))&&!(a&&(u=="length"||o&&(u=="offset"||u=="parent")||r&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||n9(u,l)))&&i.push(u);return i}var CD=a9,i9=Object.prototype;function l9(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||i9;return e===n}var Vw=l9;function u9(e,t){return function(n){return e(t(n))}}var kD=u9,c9=kD,d9=c9(Object.keys,Object),f9=d9,h9=Vw,p9=f9,m9=Object.prototype,g9=m9.hasOwnProperty;function v9(e){if(!h9(e))return p9(e);var t=[];for(var n in Object(e))g9.call(e,n)&&n!="constructor"&&t.push(n);return t}var b9=v9,y9=uD,w9=wD;function $9(e){return e!=null&&w9(e.length)&&!y9(e)}var Ww=$9,C9=CD,k9=b9,S9=Ww;function x9(e){return S9(e)?C9(e):k9(e)}var Hw=x9,I9=gD,E9=Bw,T9=Hw;function N9(e){return I9(e,T9,E9)}var SD=N9,Rx=SD,A9=1,D9=Object.prototype,R9=D9.hasOwnProperty;function _9(e,t,n,s,o,r){var a=n&A9,i=Rx(e),l=i.length,u=Rx(t),c=u.length;if(l!=c&&!a)return!1;for(var d=l;d--;){var f=i[d];if(!(a?f in t:R9.call(t,f)))return!1}var h=r.get(e),p=r.get(t);if(h&&p)return h==t&&p==e;var m=!0;r.set(e,t),r.set(t,e);for(var g=a;++d<l;){f=i[d];var v=e[f],b=t[f];if(s)var $=a?s(b,v,f,t,e,r):s(v,b,f,e,t,r);if(!($===void 0?v===b||o(v,b,n,s,r):$)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w)&&(m=!1)}return r.delete(e),r.delete(t),m}var O9=_9,M9=su,F9=ra,P9=M9(F9,"DataView"),L9=P9,B9=su,z9=ra,V9=B9(z9,"Promise"),W9=V9,H9=su,U9=ra,G9=H9(U9,"Set"),xD=G9,K9=su,j9=ra,q9=K9(j9,"WeakMap"),X9=q9,Cy=L9,ky=Mw,Sy=W9,xy=xD,Iy=X9,ID=_f,Lc=cD,_x="[object Map]",Y9="[object Object]",Ox="[object Promise]",Mx="[object Set]",Fx="[object WeakMap]",Px="[object DataView]",Z9=Lc(Cy),J9=Lc(ky),Q9=Lc(Sy),e7=Lc(xy),t7=Lc(Iy),dl=ID;(Cy&&dl(new Cy(new ArrayBuffer(1)))!=Px||ky&&dl(new ky)!=_x||Sy&&dl(Sy.resolve())!=Ox||xy&&dl(new xy)!=Mx||Iy&&dl(new Iy)!=Fx)&&(dl=function(e){var t=ID(e),n=t==Y9?e.constructor:void 0,s=n?Lc(n):"";if(s)switch(s){case Z9:return Px;case J9:return _x;case Q9:return Ox;case e7:return Mx;case t7:return Fx}return t});var Mg=dl,fb=dD,n7=pD,s7=BK,o7=O9,Lx=Mg,Bx=Mi,zx=sf.exports,r7=$D,a7=1,Vx="[object Arguments]",Wx="[object Array]",kp="[object Object]",i7=Object.prototype,Hx=i7.hasOwnProperty;function l7(e,t,n,s,o,r){var a=Bx(e),i=Bx(t),l=a?Wx:Lx(e),u=i?Wx:Lx(t);l=l==Vx?kp:l,u=u==Vx?kp:u;var c=l==kp,d=u==kp,f=l==u;if(f&&zx(e)){if(!zx(t))return!1;a=!0,c=!1}if(f&&!c)return r||(r=new fb),a||r7(e)?n7(e,t,n,s,o,r):s7(e,t,l,n,s,o,r);if(!(n&a7)){var h=c&&Hx.call(e,"__wrapped__"),p=d&&Hx.call(t,"__wrapped__");if(h||p){var m=h?e.value():e,g=p?t.value():t;return r||(r=new fb),o(m,g,n,s,r)}}return f?(r||(r=new fb),o7(e,t,n,s,o,r)):!1}var u7=l7,c7=u7,Ux=Fi;function ED(e,t,n,s,o){return e===t?!0:e==null||t==null||!Ux(e)&&!Ux(t)?e!==e&&t!==t:c7(e,t,n,s,ED,o)}var d7=ED;function Fg(e){return B5()?(ZN(e),!0):!1}const qt=typeof window!="undefined",f7=e=>typeof e=="string",hb=()=>{};function h7(e,t){function n(...s){e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})}return n}function p7(e,t=!0,n=!0){let s=0,o,r=!n;const a=()=>{o&&(clearTimeout(o),o=void 0)};return l=>{const u=je(e),c=Date.now()-s;if(a(),u<=0)return s=Date.now(),l();c>u&&(s=Date.now(),r?r=!1:l()),t&&(o=setTimeout(()=>{s=Date.now(),n||(r=!0),a(),l()},u)),!n&&!o&&(o=setTimeout(()=>r=!0,u))}}var m7=Object.defineProperty,g7=Object.defineProperties,v7=Object.getOwnPropertyDescriptors,Gx=Object.getOwnPropertySymbols,b7=Object.prototype.hasOwnProperty,y7=Object.prototype.propertyIsEnumerable,Kx=(e,t,n)=>t in e?m7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w7=(e,t)=>{for(var n in t||(t={}))b7.call(t,n)&&Kx(e,n,t[n]);if(Gx)for(var n of Gx(t))y7.call(t,n)&&Kx(e,n,t[n]);return e},$7=(e,t)=>g7(e,v7(t));function jx(e,t){var n;const s=uo();return Ba(()=>{s.value=e()},$7(w7({},t),{flush:(n=t==null?void 0:t.flush)!=null?n:"sync"})),Nf(s)}function TD(e,t=200,n=!0,s=!0){return h7(p7(t,n,s),e)}function ic(e,t,n={}){const{immediate:s=!0}=n,o=L(!1);let r=null;function a(){r&&(clearTimeout(r),r=null)}function i(){o.value=!1,a()}function l(...u){a(),o.value=!0,r=setTimeout(()=>{o.value=!1,r=null,e(...u)},je(t))}return s&&(o.value=!0,qt&&l()),Fg(i),{isPending:o,start:l,stop:i}}function Ld(e){var t;const n=je(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Of=qt?window:void 0,C7=qt?window.document:void 0;function Ss(...e){let t,n,s,o;if(f7(e[0])?([n,s,o]=e,t=Of):[t,n,s,o]=e,!t)return hb;let r=hb;const a=Oe(()=>je(t),l=>{r(),!!l&&(l.addEventListener(n,s,o),r=()=>{l.removeEventListener(n,s,o),r=hb})},{immediate:!0,flush:"post"}),i=()=>{a(),r()};return Fg(i),i}function Ey(e,t,n={}){const{window:s=Of,ignore:o}=n;if(!s)return;const r=L(!0),i=[Ss(s,"click",u=>{const c=Ld(e),d=u.composedPath();!c||c===u.target||d.includes(c)||!r.value||o&&o.length>0&&o.some(f=>{const h=Ld(f);return h&&(u.target===h||d.includes(h))})||t(u)},{passive:!0,capture:!0}),Ss(s,"pointerdown",u=>{const c=Ld(e);r.value=!!c&&!u.composedPath().includes(c)},{passive:!0})];return()=>i.forEach(u=>u())}const Ty=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ny="__vueuse_ssr_handlers__";Ty[Ny]=Ty[Ny]||{};Ty[Ny];function k7(e,t,{window:n=Of}={}){const s=L(""),o=_(()=>{var r;return Ld(t)||((r=n==null?void 0:n.document)==null?void 0:r.documentElement)});return Oe([o,()=>je(e)],([r,a])=>{r&&n&&(s.value=n.getComputedStyle(r).getPropertyValue(a))},{immediate:!0}),Oe(s,r=>{var a;((a=o.value)==null?void 0:a.style)&&o.value.style.setProperty(je(e),r)}),s}function S7({document:e=C7}={}){if(!e)return L("visible");const t=L(e.visibilityState);return Ss(e,"visibilitychange",()=>{t.value=e.visibilityState}),t}var qx=Object.getOwnPropertySymbols,x7=Object.prototype.hasOwnProperty,I7=Object.prototype.propertyIsEnumerable,E7=(e,t)=>{var n={};for(var s in e)x7.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&qx)for(var s of qx(e))t.indexOf(s)<0&&I7.call(e,s)&&(n[s]=e[s]);return n};function rf(e,t,n={}){const s=n,{window:o=Of}=s,r=E7(s,["window"]);let a;const i=o&&"ResizeObserver"in o,l=()=>{a&&(a.disconnect(),a=void 0)},u=Oe(()=>Ld(e),d=>{l(),i&&o&&d&&(a=new o.ResizeObserver(t),a.observe(d,r))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return Fg(c),{isSupported:i,stop:c}}var Xx,Yx;qt&&(window==null?void 0:window.navigator)&&((Xx=window==null?void 0:window.navigator)==null?void 0:Xx.platform)&&/iP(ad|hone|od)/.test((Yx=window==null?void 0:window.navigator)==null?void 0:Yx.platform);var T7=Object.defineProperty,Zx=Object.getOwnPropertySymbols,N7=Object.prototype.hasOwnProperty,A7=Object.prototype.propertyIsEnumerable,Jx=(e,t,n)=>t in e?T7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D7=(e,t)=>{for(var n in t||(t={}))N7.call(t,n)&&Jx(e,n,t[n]);if(Zx)for(var n of Zx(t))A7.call(t,n)&&Jx(e,n,t[n]);return e};const R7={top:0,left:0,bottom:0,right:0,height:0,width:0};D7({text:""},R7);function _7({window:e=Of}={}){if(!e)return L(!1);const t=L(e.document.hasFocus());return Ss(e,"blur",()=>{t.value=!1}),Ss(e,"focus",()=>{t.value=!0}),t}const O7="Util",Cs=(e,t="")=>{let n=e;return t.split(".").map(s=>{n=n==null?void 0:n[s]}),n};function Jp(e,t,n){let s=e,o,r;if(e&&Wt(e,t))o=t,r=s==null?void 0:s[t];else{t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");const a=t.split(".");let i=0;for(i;i<a.length-1&&!(!s&&!n);i++){const l=a[i];if(l in s)s=s[l];else{n&&oo(O7,"Please transfer a valid prop path to form item!");break}}o=a[i],r=s==null?void 0:s[a[i]]}return{o:s,k:o,v:r}}const af=()=>Math.floor(Math.random()*1e4),M7=(e="")=>String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),Rl=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],ND=function(){return qt&&!!window.navigator.userAgent.match(/firefox/i)},F7=function(e){const t=["transform","transition","animation"],n=["ms-","webkit-"];return t.forEach(s=>{const o=e[s];s&&o&&n.forEach(r=>{e[r+s]=o})}),e},Gr=e=>typeof e=="boolean",wn=e=>typeof e=="number";function pb(e){let t=!1;return function(...n){t||(t=!0,window.requestAnimationFrame(()=>{Reflect.apply(e,this,n),t=!1}))}}function lf(e){return e===void 0}function uf(e){return!!(!e&&e!==0||Nt(e)&&!e.length||rn(e)&&!Object.keys(e).length)}function AD(e){return e.reduce((t,n)=>{const s=Array.isArray(n)?AD(n):n;return t.concat(s)},[])}function Qx(e){return Array.from(new Set(e))}function Wa(e){return Xt(e)?e:wn(e)?`${e}px`:""}const P7=(e,t)=>{var n;const s=[...new Set([...Object.keys(e),...Object.keys(t)])],o={};for(const r of s)o[r]=(n=t[r])!=null?n:e[r];return o},DD=L({});function Bc(e){const t=Ze(sD,DD);return e?rn(t.value)&&Wt(t.value,e)?_(()=>t.value[e]):L(void 0):t}const RD=(e,t)=>{var n;const s=!!Lt(),o=s?Bc():void 0,r=(n=t==null?void 0:t.provide)!=null?n:s?zt:void 0;if(!r)return;const a=_(()=>{const i=je(e);return o?P7(o.value,i):i});return r(sD,a),DD.value=a.value,a},Pg=Yr({type:String,values:_w,required:!1}),ds=(e,t={})=>{const n=L(void 0),s=t.prop?n:aD("size"),o=t.global?n:Bc("size"),r=t.form?{size:void 0}:Ze(Lo,void 0),a=t.formItem?{size:void 0}:Ze(oa,void 0);return _(()=>s.value||je(e)||(a==null?void 0:a.size)||(r==null?void 0:r.size)||o.value||"default")},Mf=e=>{const t=aD("disabled"),n=Ze(Lo,void 0);return _(()=>t.value||je(e)||(n==null?void 0:n.disabled)||!1)},L7=e=>({focus:()=>{var t,n;(n=(t=e.value)==null?void 0:t.focus)==null||n.call(t)}}),zc=()=>{const e=Ze(Lo,void 0),t=Ze(oa,void 0);return{form:e,formItem:t}};var B7=_f,z7=Fi,V7="[object Symbol]";function W7(e){return typeof e=="symbol"||z7(e)&&B7(e)==V7}var Lg=W7,H7=Mi,U7=Lg,G7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K7=/^\w*$/;function j7(e,t){if(H7(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||U7(e)?!0:K7.test(e)||!G7.test(e)||t!=null&&e in Object(t)}var q7=j7,_D=Fw,X7="Expected a function";function Uw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(X7);var n=function(){var s=arguments,o=t?t.apply(this,s):s[0],r=n.cache;if(r.has(o))return r.get(o);var a=e.apply(this,s);return n.cache=r.set(o,a)||r,a};return n.cache=new(Uw.Cache||_D),n}Uw.Cache=_D;var OD=Uw,Y7=OD,Z7=500;function J7(e){var t=Y7(e,function(s){return n.size===Z7&&n.clear(),s}),n=t.cache;return t}var Q7=J7,eq=Q7,tq=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nq=/\\(\\)?/g,sq=eq(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(tq,function(n,s,o,r){t.push(o?r.replace(nq,"$1"):s||n)}),t}),oq=sq;function rq(e,t){for(var n=-1,s=e==null?0:e.length,o=Array(s);++n<s;)o[n]=t(e[n],n,e);return o}var aq=rq,eI=Oc,iq=aq,lq=Mi,uq=Lg,cq=1/0,tI=eI?eI.prototype:void 0,nI=tI?tI.toString:void 0;function MD(e){if(typeof e=="string")return e;if(lq(e))return iq(e,MD)+"";if(uq(e))return nI?nI.call(e):"";var t=e+"";return t=="0"&&1/e==-cq?"-0":t}var dq=MD,fq=dq;function hq(e){return e==null?"":fq(e)}var pq=hq,mq=Mi,gq=q7,vq=oq,bq=pq;function yq(e,t){return mq(e)?e:gq(e,t)?[e]:vq(bq(e))}var wq=yq,$q=Lg,Cq=1/0;function kq(e){if(typeof e=="string"||$q(e))return e;var t=e+"";return t=="0"&&1/e==-Cq?"-0":t}var Sq=kq,xq=wq,Iq=Sq;function Eq(e,t){t=xq(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[Iq(t[n++])];return n&&n==s?e:void 0}var Tq=Eq,Nq=Tq;function Aq(e,t,n){var s=e==null?void 0:Nq(e,t);return s===void 0?n:s}var Dq=Aq,Rq={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const _q=e=>(t,n)=>Oq(t,n,je(e)),Oq=(e,t,n)=>Dq(n,e,e).replace(/\{(\w+)\}/g,(s,o)=>{var r;return`${(r=t==null?void 0:t[o])!=null?r:`{${o}}`}`}),Mq=e=>{const t=_(()=>je(e).name),n=rs(e)?e:L(e);return{lang:t,locale:n,t:_q(e)}},kn=()=>{const e=Bc("locale");return Mq(_(()=>e.value||Rq))};let Sp;function Fq(){var e;if(!qt)return 0;if(Sp!==void 0)return Sp;const t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const o=s.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),Sp=n-o,Sp}const Ay=function(e){return(e||"").split(" ").filter(t=>!!t.trim())},gn=function(e,t,n,s=!1){e&&t&&n&&(e==null||e.addEventListener(t,n,s))},zn=function(e,t,n,s=!1){e&&t&&n&&(e==null||e.removeEventListener(t,n,s))},Pq=function(e,t,n){const s=function(...o){n&&n.apply(this,o),zn(e,t,s)};gn(e,t,s)};function Kr(e,t){if(!e||!t)return!1;if(t.indexOf(" ")!==-1)throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(e.getAttribute("class")||"").split(" ").includes(t)}function To(e,t){if(!e)return;let n=e.getAttribute("class")||"";const s=Ay(n),o=(t||"").split(" ").filter(r=>!s.includes(r)&&!!r.trim());e.classList?e.classList.add(...o):(n+=` ${o.join(" ")}`,e.setAttribute("class",n))}function Qs(e,t){if(!e||!t)return;const n=Ay(t);let s=e.getAttribute("class")||"";if(e.classList){e.classList.remove(...n);return}n.forEach(r=>{s=s.replace(` ${r} `," ")});const o=Ay(s).join(" ");e.setAttribute("class",o)}const fr=function(e,t){var n;if(!qt||!e||!t)return"";t=$r(t),t==="float"&&(t="cssFloat");try{const s=e.style[t];if(s)return s;const o=(n=document.defaultView)==null?void 0:n.getComputedStyle(e,"");return o?o[t]:""}catch{return e.style[t]}},Lq=(e,t)=>qt?(t==null?fr(e,"overflow"):t?fr(e,"overflow-y"):fr(e,"overflow-x")).match(/(scroll|auto|overlay)/):null,Gw=(e,t)=>{if(!qt)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Lq(n,t))return n;n=n.parentNode}return n},Bq=(e,t)=>{if(!qt||!e||!t)return!1;const n=e.getBoundingClientRect();let s;return t instanceof Element?s=t.getBoundingClientRect():s={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<s.bottom&&n.bottom>s.top&&n.right>s.left&&n.left<s.right},sI=e=>{let t=0,n=e;for(;n;)t+=n.offsetTop,n=n.offsetParent;return t},zq=(e,t)=>Math.abs(sI(e)-sI(t)),Kw=e=>{let t,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}},ks=(e,t,{checkForDefaultPrevented:n=!0}={})=>o=>{const r=e==null?void 0:e(o);if(n===!1||!r)return t==null?void 0:t(o)},oI=e=>t=>t.pointerType==="mouse"?e(t):void 0,FD=(...e)=>t=>{e.forEach(n=>{n.value=t})},PD=e=>{if(rs(e)||oo("[useLockscreen]","You need to pass a ref param to this function"),!qt||Kr(document.body,"el-popup-parent--hidden"))return;let t=0,n=!1,s="0",o=0;const r=()=>{Qs(document.body,"el-popup-parent--hidden"),n&&(document.body.style.paddingRight=s)};Oe(e,a=>{if(!a){r();return}n=!Kr(document.body,"el-popup-parent--hidden"),n&&(s=document.body.style.paddingRight,o=parseInt(fr(document.body,"paddingRight"),10)),t=Fq();const i=document.documentElement.clientHeight<document.body.scrollHeight,l=fr(document.body,"overflowY");t>0&&(i||l==="scroll")&&n&&(document.body.style.paddingRight=`${o+t}px`),To(document.body,"el-popup-parent--hidden")}),ZN(()=>r())},Qe={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Vq='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Wq=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,rI=e=>Array.from(e.querySelectorAll(Vq)).filter(t=>Hq(t)&&Wq(t)),Hq=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Qp=function(e,t,...n){let s;t.includes("mouse")||t.includes("click")?s="MouseEvents":t.includes("key")?s="KeyboardEvent":s="HTMLEvents";const o=document.createEvent(s);return o.initEvent(t,...n),e.dispatchEvent(o),e},LD=e=>!e.getAttribute("aria-owns"),BD=(e,t,n)=>{const{parentNode:s}=e;if(!s)return null;const o=s.querySelectorAll(n),r=Array.prototype.indexOf.call(o,e);return o[r+t]||null},em=e=>{!e||(e.focus(),!LD(e)&&e.click())},Xu=[],Uq=e=>{Xu.length!==0&&e.code===Qe.esc&&(e.stopPropagation(),Xu[Xu.length-1].handleClose())},zD=(e,t)=>{Oe(t,n=>{n?Xu.push(e):Xu.splice(Xu.findIndex(s=>s===e),1)})};qt&&Ss(document,"keydown",Uq);const VD=e=>{const t={[e]:Yr({type:Je(Boolean),default:null}),[`onUpdate:${e}`]:Yr({type:Je(Function)})},n=[`update:${e}`];return{useModelToggle:({indicator:o,shouldHideWhenRouteChanges:r,shouldProceed:a,onShow:i,onHide:l})=>{const u=Lt(),c=u.props,{emit:d}=u,f=`update:${e}`,h=_(()=>Pt(c[`onUpdate:${e}`])),p=_(()=>c[e]===null),m=()=>{o.value!==!0&&(o.value=!0,Pt(i)&&i())},g=()=>{o.value!==!1&&(o.value=!1,Pt(l)&&l())},v=()=>{if(c.disabled===!0||Pt(a)&&!a())return;const w=h.value&&qt;w&&d(f,!0),(p.value||!w)&&m()},b=()=>{if(c.disabled===!0||!qt)return;const w=h.value&&qt;w&&d(f,!1),(p.value||!w)&&g()},$=w=>{!Gr(w)||(c.disabled&&w?h.value&&d(f,!1):o.value!==w&&(w?m():g()))},y=()=>{o.value?b():v()};return Oe(()=>c[e],$),r&&u.appContext.config.globalProperties.$route!==void 0&&Oe(()=>ut({},u.proxy.$route),()=>{r.value&&o.value&&b()}),Mt(()=>{$(c[e])}),{hide:b,show:v,toggle:y}},useModelToggleProps:t,useModelToggleEmits:n}};VD("modelValue");const Gq=(e,t,n)=>{const s=r=>{n(r)&&r.stopImmediatePropagation()};let o;Oe(()=>e.value,r=>{r?o=Ss(document,t,s,!0):o==null||o()},{immediate:!0})},WD=(e,t)=>{let n;Oe(()=>e.value,s=>{var o,r;s?(n=document.activeElement,rs(t)&&((r=(o=t.value).focus)==null||r.call(o))):n.focus()})},HD=e=>{if(!e)return{onClick:on,onMousedown:on,onMouseup:on};let t=!1,n=!1;return{onClick:a=>{t&&n&&e(a),t=n=!1},onMousedown:a=>{t=a.target===a.currentTarget},onMouseup:a=>{n=a.target===a.currentTarget}}},Kq=(e,t=0)=>{if(t===0)return e;const n=L(!1);let s=0;const o=()=>{s&&clearTimeout(s),s=window.setTimeout(()=>{n.value=e.value},t)};return Mt(o),Oe(()=>e.value,r=>{r?o():n.value=r}),n};function jq(){let e;const t=(s,o)=>{n(),e=window.setTimeout(s,o)},n=()=>window.clearTimeout(e);return Fg(()=>n()),{registerTimeout:t,cancelTimeout:n}}const qq={prefix:Math.floor(Math.random()*1e4),current:0},Xq=Symbol("elIdInjection"),UD=e=>{const t=Ze(Xq,qq);return _(()=>je(e)||`el-id-${t.prefix}-${t.current++}`)},Yq=e=>{const t=n=>{const s=n;s.key===Qe.esc&&(e==null||e(s))};Mt(()=>{gn(document,"keydown",t)}),os(()=>{zn(document,"keydown",t)})};let aI;const GD=`el-popper-container-${af()}`,Zq=`#${GD}`,Jq=()=>{Af(()=>{if(!!qt&&!aI){const e=document.createElement("div");e.id=GD,document.body.appendChild(e),aI=e}})},Qq=gt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200}}),eX=({showAfter:e,hideAfter:t,open:n,close:s})=>{const{registerTimeout:o}=jq();return{onOpen:()=>{o(()=>{n()},je(e))},onClose:()=>{o(()=>{s()},je(t))}}},KD=Symbol("elForwardRef"),tX=e=>{zt(KD,{setForwardRef:n=>{e.value=n}})},nX=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}}),sX="el",oX="is-",sl=(e,t,n,s,o)=>{let r=`${e}-${t}`;return n&&(r+=`-${n}`),s&&(r+=`__${s}`),o&&(r+=`--${o}`),r},Dt=e=>{const t=_(()=>Bc("namespace").value||sX);return{namespace:t,b:(c="")=>sl(je(t),e,c,"",""),e:c=>c?sl(je(t),e,"",c,""):"",m:c=>c?sl(je(t),e,"","",c):"",be:(c,d)=>c&&d?sl(je(t),e,c,d,""):"",em:(c,d)=>c&&d?sl(je(t),e,"",c,d):"",bm:(c,d)=>c&&d?sl(je(t),e,c,"",d):"",bem:(c,d,f)=>c&&d&&f?sl(je(t),e,c,d,f):"",is:(c,d=!0)=>d?`${oX}${c}`:""}},rX=e=>{e.preventDefault(),e.stopPropagation()},aX=()=>{is==null||is.doOnModalClick()};let Dy=!1;const iI=function(){if(!qt)return;let e=is.modalDom;return e?Dy=!0:(Dy=!1,e=document.createElement("div"),is.modalDom=e,gn(e,"touchmove",rX),gn(e,"click",aX)),e},xp={},is={modalFade:!0,modalDom:void 0,globalInitialZIndex:2e3,zIndex:0,getInitialZIndex(){var e;return Lt()?(e=Bc("zIndex").value)!=null?e:this.globalInitialZIndex:this.globalInitialZIndex},getInstance(e){return xp[e]},register(e,t){e&&t&&(xp[e]=t)},deregister(e){e&&(xp[e]=null,delete xp[e])},nextZIndex(){return this.getInitialZIndex()+ ++this.zIndex},modalStack:[],doOnModalClick(){const e=is.modalStack[is.modalStack.length-1];if(!e)return;const t=is.getInstance(e.id);t&&t.closeOnClickModal.value&&t.close()},openModal(e,t,n,s,o){if(!qt||!e||t===void 0)return;this.modalFade=o;const r=this.modalStack;for(let i=0,l=r.length;i<l;i++)if(r[i].id===e)return;const a=iI();To(a,"v-modal"),this.modalFade&&!Dy&&To(a,"v-modal-enter"),s&&s.trim().split(/\s+/).forEach(l=>To(a,l)),setTimeout(()=>{Qs(a,"v-modal-enter")},200),n&&n.parentNode&&n.parentNode.nodeType!==11?n.parentNode.appendChild(a):document.body.appendChild(a),t&&(a.style.zIndex=String(t)),a.tabIndex=0,a.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:s})},closeModal(e){const t=this.modalStack,n=iI();if(t.length>0){const s=t[t.length-1];if(s.id===e)s.modalClass&&s.modalClass.trim().split(/\s+/).forEach(r=>Qs(n,r)),t.pop(),t.length>0&&(n.style.zIndex=`${t[t.length-1].zIndex}`);else for(let o=t.length-1;o>=0;o--)if(t[o].id===e){t.splice(o,1);break}}t.length===0&&(this.modalFade&&To(n,"v-modal-leave"),setTimeout(()=>{t.length===0&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",is.modalDom=void 0),Qs(n,"v-modal-leave")},200))}},iX=function(){if(!!qt&&is.modalStack.length>0){const e=is.modalStack[is.modalStack.length-1];return e?is.getInstance(e.id):void 0}};qt&&window.addEventListener("keydown",function(e){if(e.code===Qe.esc){const t=iX();t&&t.closeOnPressEscape.value&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}});const lX="1.3.0-beta.10",lI=Symbol("INSTALLED_KEY"),uX=(e=[])=>({version:lX,install:(n,s={})=>{n[lI]||(n[lI]=!0,e.forEach(o=>n.use(o)),RD(s,n),Oe(()=>je(s).zIndex,()=>{const o=je(s).zIndex;wn(o)&&(is.globalInitialZIndex=o)},{immediate:!0}))}}),Vt=(e,t)=>{if(e.install=n=>{for(const s of[e,...Object.values(t!=null?t:{})])n.component(s.name,s)},t)for(const[n,s]of Object.entries(t))e[n]=s;return e},jD=(e,t)=>(e.install=n=>{n.config.globalProperties[t]=e},e),Jn=e=>(e.install=on,e),cX=gt({zIndex:{type:Je([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),dX={scroll:({scrollTop:e,fixed:t})=>typeof e=="number"&&typeof t=="boolean",change:e=>typeof e=="boolean"};var We=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const fX=me({name:"ElAffix",props:cX,emits:dX,setup(e,{emit:t}){const n=Dt("affix"),s=uo(),o=uo(),r=uo(),a=Cn({fixed:!1,height:0,width:0,scrollTop:0,clientHeight:0,transform:0}),i=_(()=>({height:a.fixed?`${a.height}px`:"",width:a.fixed?`${a.width}px`:""})),l=_(()=>{if(!a.fixed)return;const d=e.offset?`${e.offset}px`:0,f=a.transform?`translateY(${a.transform}px)`:"";return{height:`${a.height}px`,width:`${a.width}px`,top:e.position==="top"?d:"",bottom:e.position==="bottom"?d:"",transform:f,zIndex:e.zIndex}}),u=()=>{if(!o.value||!s.value||!r.value)return;const d=o.value.getBoundingClientRect(),f=s.value.getBoundingClientRect();if(a.height=d.height,a.width=d.width,a.scrollTop=r.value instanceof Window?document.documentElement.scrollTop:r.value.scrollTop||0,a.clientHeight=document.documentElement.clientHeight,e.position==="top")if(e.target){const h=f.bottom-e.offset-a.height;a.fixed=e.offset>d.top&&f.bottom>0,a.transform=h<0?h:0}else a.fixed=e.offset>d.top;else if(e.target){const h=a.clientHeight-f.top-e.offset-a.height;a.fixed=a.clientHeight-e.offset<d.bottom&&a.clientHeight>f.top,a.transform=h<0?-h:0}else a.fixed=a.clientHeight-e.offset<d.bottom},c=()=>{u(),t("scroll",{scrollTop:a.scrollTop,fixed:a.fixed})};return Oe(()=>a.fixed,()=>{t("change",a.fixed)}),Mt(()=>{var d;if(e.target){if(s.value=(d=document.querySelector(e.target))!=null?d:void 0,!s.value)throw new Error(`Target is not existed: ${e.target}`)}else s.value=document.documentElement;r.value=Gw(o.value,!0)}),Ss(r,"scroll",c),rf(o,()=>u()),rf(s,()=>u()),{ns:n,root:o,state:a,rootStyle:i,affixStyle:l,update:u}}});function hX(e,t,n,s,o,r){return T(),B("div",{ref:"root",class:q(e.ns.b()),style:nt(e.rootStyle)},[W("div",{class:q({[e.ns.m("fixed")]:e.state.fixed}),style:nt(e.affixStyle)},[_e(e.$slots,"default")],6)],6)}var pX=We(fX,[["render",hX]]);const mX=Vt(pX),gX=gt({size:{type:Je([Number,String])},color:{type:String}}),vX=me({name:"ElIcon",inheritAttrs:!1,props:gX,setup(e){const t=Dt("icon"),n=_(()=>!e.size&&!e.color?{}:{fontSize:lf(e.size)?void 0:Wa(e.size),"--color":e.color});return{ns:t,style:n}}});function bX(e,t,n,s,o,r){return T(),B("i",Us({class:e.ns.b(),style:e.style},e.$attrs),[_e(e.$slots,"default")],16)}var yX=We(vX,[["render",bX]]);const _t=Vt(yX);var pn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const wX=me({name:"ArrowDown"}),$X={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},CX=W("path",{fill:"currentColor",d:"M831.872 340.864L512 652.672 192.128 340.864a30.592 30.592 0 00-42.752 0 29.12 29.12 0 000 41.6L489.664 714.24a32 32 0 0044.672 0l340.288-331.712a29.12 29.12 0 000-41.728 30.592 30.592 0 00-42.752 0z"},null,-1),kX=[CX];function SX(e,t,n,s,o,r){return T(),B("svg",$X,kX)}var ou=pn(wX,[["render",SX]]);const xX=me({name:"ArrowLeft"}),IX={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},EX=W("path",{fill:"currentColor",d:"M609.408 149.376L277.76 489.6a32 32 0 000 44.672l331.648 340.352a29.12 29.12 0 0041.728 0 30.592 30.592 0 000-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 000-42.688 29.12 29.12 0 00-41.728 0z"},null,-1),TX=[EX];function NX(e,t,n,s,o,r){return T(),B("svg",IX,TX)}var ru=pn(xX,[["render",NX]]);const AX=me({name:"ArrowRight"}),DX={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},RX=W("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 000 42.752L652.736 512 340.864 831.872a30.592 30.592 0 000 42.752 29.12 29.12 0 0041.728 0L714.24 534.336a32 32 0 000-44.672L382.592 149.376a29.12 29.12 0 00-41.728 0z"},null,-1),_X=[RX];function OX(e,t,n,s,o,r){return T(),B("svg",DX,_X)}var Er=pn(AX,[["render",OX]]);const MX=me({name:"ArrowUp"}),FX={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},PX=W("path",{fill:"currentColor",d:"M488.832 344.32l-339.84 356.672a32 32 0 000 44.16l.384.384a29.44 29.44 0 0042.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0042.688 0l.384-.384a32 32 0 000-44.16L535.168 344.32a32 32 0 00-46.336 0z"},null,-1),LX=[PX];function BX(e,t,n,s,o,r){return T(),B("svg",FX,LX)}var Ff=pn(MX,[["render",BX]]);const zX=me({name:"Back"}),VX={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},WX=W("path",{fill:"currentColor",d:"M224 480h640a32 32 0 110 64H224a32 32 0 010-64z"},null,-1),HX=W("path",{fill:"currentColor",d:"M237.248 512l265.408 265.344a32 32 0 01-45.312 45.312l-288-288a32 32 0 010-45.312l288-288a32 32 0 1145.312 45.312L237.248 512z"},null,-1),UX=[WX,HX];function GX(e,t,n,s,o,r){return T(),B("svg",VX,UX)}var KX=pn(zX,[["render",GX]]);const jX=me({name:"Calendar"}),qX={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},XX=W("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 11-64 0v-32H320v32a32 32 0 01-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1164 0v32h160a32 32 0 0132 32v768a32 32 0 01-32 32H96a32 32 0 01-32-32V160a32 32 0 0132-32h160V96a32 32 0 0164 0v32zm-32 384h64a32 32 0 010 64h-64a32 32 0 010-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64zm192-192h64a32 32 0 010 64h-64a32 32 0 010-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64zm192-192h64a32 32 0 110 64h-64a32 32 0 110-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64z"},null,-1),YX=[XX];function ZX(e,t,n,s,o,r){return T(),B("svg",qX,YX)}var JX=pn(jX,[["render",ZX]]);const QX=me({name:"CaretRight"}),eY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},tY=W("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),nY=[tY];function sY(e,t,n,s,o,r){return T(),B("svg",eY,nY)}var qD=pn(QX,[["render",sY]]);const oY=me({name:"CaretTop"}),rY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},aY=W("path",{fill:"currentColor",d:"M512 320L192 704h639.936z"},null,-1),iY=[aY];function lY(e,t,n,s,o,r){return T(),B("svg",rY,iY)}var uY=pn(oY,[["render",lY]]);const cY=me({name:"Check"}),dY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fY=W("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z"},null,-1),hY=[fY];function pY(e,t,n,s,o,r){return T(),B("svg",dY,hY)}var lc=pn(cY,[["render",pY]]);const mY=me({name:"CircleCheckFilled"}),gY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},vY=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm-55.808 536.384l-99.52-99.584a38.4 38.4 0 10-54.336 54.336l126.72 126.72a38.272 38.272 0 0054.336 0l262.4-262.464a38.4 38.4 0 10-54.272-54.336L456.192 600.384z"},null,-1),bY=[vY];function yY(e,t,n,s,o,r){return T(),B("svg",gY,bY)}var wY=pn(mY,[["render",yY]]);const $Y=me({name:"CircleCheck"}),CY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},kY=W("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),SY=W("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0145.312 45.312l-288 288a32 32 0 01-45.312 0l-160-160a32 32 0 1145.312-45.312L480 626.752l265.344-265.408z"},null,-1),xY=[kY,SY];function IY(e,t,n,s,o,r){return T(),B("svg",CY,xY)}var Vm=pn($Y,[["render",IY]]);const EY=me({name:"CircleCloseFilled"}),TY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},NY=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 393.664L407.936 353.6a38.4 38.4 0 10-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1054.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1054.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 10-54.336-54.336L512 457.664z"},null,-1),AY=[NY];function DY(e,t,n,s,o,r){return T(),B("svg",TY,AY)}var jw=pn(EY,[["render",DY]]);const RY=me({name:"CircleClose"}),_Y={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},OY=W("path",{fill:"currentColor",d:"M466.752 512l-90.496-90.496a32 32 0 0145.248-45.248L512 466.752l90.496-90.496a32 32 0 1145.248 45.248L557.248 512l90.496 90.496a32 32 0 11-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 01-45.248-45.248L466.752 512z"},null,-1),MY=W("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),FY=[OY,MY];function PY(e,t,n,s,o,r){return T(),B("svg",_Y,FY)}var Ha=pn(RY,[["render",PY]]);const LY=me({name:"Clock"}),BY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zY=W("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),VY=W("path",{fill:"currentColor",d:"M480 256a32 32 0 0132 32v256a32 32 0 01-64 0V288a32 32 0 0132-32z"},null,-1),WY=W("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),HY=[zY,VY,WY];function UY(e,t,n,s,o,r){return T(),B("svg",BY,HY)}var XD=pn(LY,[["render",UY]]);const GY=me({name:"Close"}),KY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},jY=W("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88 259.712 214.592a31.936 31.936 0 00-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1045.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0045.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 10-45.12-45.184z"},null,-1),qY=[jY];function XY(e,t,n,s,o,r){return T(),B("svg",KY,qY)}var Zr=pn(GY,[["render",XY]]);const YY=me({name:"DArrowLeft"}),ZY={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},JY=W("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0141.728 0 30.592 30.592 0 010 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 01-.512 43.264 29.12 29.12 0 01-41.216-.512L197.76 534.272a32 32 0 010-44.672l331.648-340.224zm256 0a29.12 29.12 0 0141.728 0 30.592 30.592 0 010 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 01-.512 43.264 29.12 29.12 0 01-41.216-.512L453.76 534.272a32 32 0 010-44.672l331.648-340.224z"},null,-1),QY=[JY];function eZ(e,t,n,s,o,r){return T(),B("svg",ZY,QY)}var Bg=pn(YY,[["render",eZ]]);const tZ=me({name:"DArrowRight"}),nZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},sZ=W("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0141.728.064L826.24 489.664a32 32 0 010 44.672L494.592 874.624a29.12 29.12 0 01-41.728 0 30.592 30.592 0 010-42.752L764.736 512 452.864 192a30.592 30.592 0 010-42.688zm-256 0a29.12 29.12 0 0141.728.064L570.24 489.664a32 32 0 010 44.672L238.592 874.624a29.12 29.12 0 01-41.728 0 30.592 30.592 0 010-42.752L508.736 512 196.864 192a30.592 30.592 0 010-42.688z"},null,-1),oZ=[sZ];function rZ(e,t,n,s,o,r){return T(),B("svg",nZ,oZ)}var zg=pn(tZ,[["render",rZ]]);const aZ=me({name:"Delete"}),iZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},lZ=W("path",{fill:"currentColor",d:"M160 256H96a32 32 0 010-64h256V95.936a32 32 0 0132-32h256a32 32 0 0132 32V192h256a32 32 0 110 64h-64v672a32 32 0 01-32 32H192a32 32 0 01-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 01-32-32V416a32 32 0 0164 0v320a32 32 0 01-32 32zm192 0a32 32 0 01-32-32V416a32 32 0 0164 0v320a32 32 0 01-32 32z"},null,-1),uZ=[lZ];function cZ(e,t,n,s,o,r){return T(),B("svg",iZ,uZ)}var dZ=pn(aZ,[["render",cZ]]);const fZ=me({name:"Document"}),hZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},pZ=W("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 01-32 32H160a32 32 0 01-32-32V96a32 32 0 0132-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),mZ=[pZ];function gZ(e,t,n,s,o,r){return T(),B("svg",hZ,mZ)}var vZ=pn(fZ,[["render",gZ]]);const bZ=me({name:"FullScreen"}),yZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},wZ=W("path",{fill:"currentColor",d:"M160 96.064l192 .192a32 32 0 010 64l-192-.192V352a32 32 0 01-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1164 0v191.936l192-.192a32 32 0 110 64l-192 .192zM864 96.064V96h64v256a32 32 0 11-64 0V160.064l-192 .192a32 32 0 110-64l192-.192zm0 831.872l-192-.192a32 32 0 010-64l192 .192V672a32 32 0 1164 0v256h-64v-.064z"},null,-1),$Z=[wZ];function CZ(e,t,n,s,o,r){return T(),B("svg",yZ,$Z)}var kZ=pn(bZ,[["render",CZ]]);const SZ=me({name:"InfoFilled"}),xZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},IZ=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896.064A448 448 0 01512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 01-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 017.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),EZ=[IZ];function TZ(e,t,n,s,o,r){return T(),B("svg",xZ,EZ)}var qw=pn(SZ,[["render",TZ]]);const NZ=me({name:"Loading"}),AZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},DZ=W("path",{fill:"currentColor",d:"M512 64a32 32 0 0132 32v192a32 32 0 01-64 0V96a32 32 0 0132-32zm0 640a32 32 0 0132 32v192a32 32 0 11-64 0V736a32 32 0 0132-32zm448-192a32 32 0 01-32 32H736a32 32 0 110-64h192a32 32 0 0132 32zm-640 0a32 32 0 01-32 32H96a32 32 0 010-64h192a32 32 0 0132 32zM195.2 195.2a32 32 0 0145.248 0L376.32 331.008a32 32 0 01-45.248 45.248L195.2 240.448a32 32 0 010-45.248zm452.544 452.544a32 32 0 0145.248 0L828.8 783.552a32 32 0 01-45.248 45.248L647.744 692.992a32 32 0 010-45.248zM828.8 195.264a32 32 0 010 45.184L692.992 376.32a32 32 0 01-45.248-45.248l135.808-135.808a32 32 0 0145.248 0zm-452.544 452.48a32 32 0 010 45.248L240.448 828.8a32 32 0 01-45.248-45.248l135.808-135.808a32 32 0 0145.248 0z"},null,-1),RZ=[DZ];function _Z(e,t,n,s,o,r){return T(),B("svg",AZ,RZ)}var Xa=pn(NZ,[["render",_Z]]);const OZ=me({name:"Minus"}),MZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},FZ=W("path",{fill:"currentColor",d:"M128 544h768a32 32 0 100-64H128a32 32 0 000 64z"},null,-1),PZ=[FZ];function LZ(e,t,n,s,o,r){return T(),B("svg",MZ,PZ)}var BZ=pn(OZ,[["render",LZ]]);const zZ=me({name:"MoreFilled"}),VZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},WZ=W("path",{fill:"currentColor",d:"M176 416a112 112 0 110 224 112 112 0 010-224zm336 0a112 112 0 110 224 112 112 0 010-224zm336 0a112 112 0 110 224 112 112 0 010-224z"},null,-1),HZ=[WZ];function UZ(e,t,n,s,o,r){return T(),B("svg",VZ,HZ)}var GZ=pn(zZ,[["render",UZ]]);const KZ=me({name:"More"}),jZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},qZ=W("path",{fill:"currentColor",d:"M176 416a112 112 0 100 224 112 112 0 000-224m0 64a48 48 0 110 96 48 48 0 010-96zm336-64a112 112 0 110 224 112 112 0 010-224zm0 64a48 48 0 100 96 48 48 0 000-96zm336-64a112 112 0 110 224 112 112 0 010-224zm0 64a48 48 0 100 96 48 48 0 000-96z"},null,-1),XZ=[qZ];function YZ(e,t,n,s,o,r){return T(),B("svg",jZ,XZ)}var ZZ=pn(KZ,[["render",YZ]]);const JZ=me({name:"Plus"}),QZ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},eJ=W("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0164 0v352h352a32 32 0 110 64H544v352a32 32 0 11-64 0V544H128a32 32 0 010-64h352z"},null,-1),tJ=[eJ];function nJ(e,t,n,s,o,r){return T(),B("svg",QZ,tJ)}var YD=pn(JZ,[["render",nJ]]);const sJ=me({name:"QuestionFilled"}),oJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},rJ=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 00-38.72 14.784 49.408 49.408 0 00-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 00523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0016.192-38.72 51.968 51.968 0 00-15.488-38.016 55.936 55.936 0 00-39.424-14.784z"},null,-1),aJ=[rJ];function iJ(e,t,n,s,o,r){return T(),B("svg",oJ,aJ)}var lJ=pn(sJ,[["render",iJ]]);const uJ=me({name:"RefreshLeft"}),cJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},dJ=W("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 010 64H232.96a32 32 0 01-32-32V179.712a32 32 0 0164 0v50.56a384 384 0 01643.84 282.88 384 384 0 01-383.936 384 384 384 0 01-384-384h64a320 320 0 10640 0 320 320 0 00-555.712-216.448z"},null,-1),fJ=[dJ];function hJ(e,t,n,s,o,r){return T(),B("svg",cJ,fJ)}var pJ=pn(uJ,[["render",hJ]]);const mJ=me({name:"RefreshRight"}),gJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},vJ=W("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1164 0v149.056a32 32 0 01-32 32H667.52a32 32 0 110-64h92.992A320 320 0 10524.8 833.152a320 320 0 00320-320h64a384 384 0 01-384 384 384 384 0 01-384-384 384 384 0 01643.712-282.88z"},null,-1),bJ=[vJ];function yJ(e,t,n,s,o,r){return T(),B("svg",gJ,bJ)}var wJ=pn(mJ,[["render",yJ]]);const $J=me({name:"ScaleToOriginal"}),CJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},kJ=W("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0160.236 60.235v481.883a60.235 60.235 0 01-60.236 60.235H210.824a60.235 60.235 0 01-60.236-60.235V240.94a60.235 60.235 0 0160.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0090.353 240.94v481.883a120.47 120.47 0 00120.47 120.47h602.353a120.47 120.47 0 00120.471-120.47V240.94a120.47 120.47 0 00-120.47-120.47zm-120.47 180.705a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 0060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zm-361.412 0a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 1060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zM512 361.412a30.118 30.118 0 00-30.118 30.117v30.118a30.118 30.118 0 0060.236 0V391.53A30.118 30.118 0 00512 361.412zM512 512a30.118 30.118 0 00-30.118 30.118v30.117a30.118 30.118 0 0060.236 0v-30.117A30.118 30.118 0 00512 512z"},null,-1),SJ=[kJ];function xJ(e,t,n,s,o,r){return T(),B("svg",CJ,SJ)}var IJ=pn($J,[["render",xJ]]);const EJ=me({name:"Search"}),TJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},NJ=W("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704z"},null,-1),AJ=[NJ];function DJ(e,t,n,s,o,r){return T(),B("svg",TJ,AJ)}var RJ=pn(EJ,[["render",DJ]]);const _J=me({name:"StarFilled"}),OJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},MJ=W("path",{fill:"currentColor",d:"M283.84 867.84L512 747.776l228.16 119.936a6.4 6.4 0 009.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 00-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 00-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 00-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 009.28 6.72z"},null,-1),FJ=[MJ];function PJ(e,t,n,s,o,r){return T(),B("svg",OJ,FJ)}var Cd=pn(_J,[["render",PJ]]);const LJ=me({name:"Star"}),BJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zJ=W("path",{fill:"currentColor",d:"M512 747.84l228.16 119.936a6.4 6.4 0 009.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 00-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 00-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 00-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 009.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 01-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 01128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 01126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0139.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 01-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),VJ=[zJ];function WJ(e,t,n,s,o,r){return T(),B("svg",BJ,VJ)}var ZD=pn(LJ,[["render",WJ]]);const HJ=me({name:"SuccessFilled"}),UJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},GJ=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm-55.808 536.384l-99.52-99.584a38.4 38.4 0 10-54.336 54.336l126.72 126.72a38.272 38.272 0 0054.336 0l262.4-262.464a38.4 38.4 0 10-54.272-54.336L456.192 600.384z"},null,-1),KJ=[GJ];function jJ(e,t,n,s,o,r){return T(),B("svg",UJ,KJ)}var JD=pn(HJ,[["render",jJ]]);const qJ=me({name:"View"}),XJ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},YJ=W("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 110 448 224 224 0 010-448zm0 64a160.192 160.192 0 00-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),ZJ=[YJ];function JJ(e,t,n,s,o,r){return T(),B("svg",XJ,ZJ)}var QJ=pn(qJ,[["render",JJ]]);const eQ=me({name:"WarningFilled"}),tQ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},nQ=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 192a58.432 58.432 0 00-58.24 63.744l23.36 256.384a35.072 35.072 0 0069.76 0l23.296-256.384A58.432 58.432 0 00512 256zm0 512a51.2 51.2 0 100-102.4 51.2 51.2 0 000 102.4z"},null,-1),sQ=[nQ];function oQ(e,t,n,s,o,r){return T(),B("svg",tQ,sQ)}var cf=pn(eQ,[["render",oQ]]);const rQ=me({name:"ZoomIn"}),aQ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},iQ=W("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704zm-32-384v-96a32 32 0 0164 0v96h96a32 32 0 010 64h-96v96a32 32 0 01-64 0v-96h-96a32 32 0 010-64h96z"},null,-1),lQ=[iQ];function uQ(e,t,n,s,o,r){return T(),B("svg",aQ,lQ)}var QD=pn(rQ,[["render",uQ]]);const cQ=me({name:"ZoomOut"}),dQ={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fQ=W("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704zM352 448h256a32 32 0 010 64H352a32 32 0 010-64z"},null,-1),hQ=[fQ];function pQ(e,t,n,s,o,r){return T(),B("svg",dQ,hQ)}var mQ=pn(cQ,[["render",pQ]]);const gQ={Close:Zr},Vg={Close:Zr,SuccessFilled:JD,InfoFilled:qw,WarningFilled:cf,CircleCloseFilled:jw},Ua={success:JD,warning:cf,error:jw,info:qw},eR={validating:Xa,success:Vm,error:Ha},vQ=["light","dark"],bQ=gt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:iH(Ua),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:vQ,default:"light"}}),yQ={close:e=>e instanceof MouseEvent},wQ=me({name:"ElAlert",components:ut({ElIcon:_t},Vg),props:bQ,emits:yQ,setup(e,{emit:t,slots:n}){const s=Dt("alert"),o=L(!0),r=_(()=>Ua[e.type]||Ua.info),a=_(()=>e.description||n.default?s.is("big"):""),i=_(()=>e.description||n.default?s.is("bold"):"");return{ns:s,visible:o,iconComponent:r,isBigIcon:a,isBoldTitle:i,close:u=>{o.value=!1,t("close",u)}}}});function $Q(e,t,n,s,o,r){const a=re("el-icon"),i=re("close");return T(),ve(cs,{name:"el-alert-fade"},{default:oe(()=>[$t(W("div",{class:q([e.ns.b(),e.ns.m(e.type),e.ns.is("center",e.center),e.ns.is(e.effect)]),role:"alert"},[e.showIcon&&e.iconComponent?(T(),ve(a,{key:0,class:q([e.ns.e("icon"),e.isBigIcon])},{default:oe(()=>[(T(),ve(en(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),W("div",{class:q(e.ns.e("content"))},[e.title||e.$slots.title?(T(),B("span",{key:0,class:q([e.ns.e("title"),e.isBoldTitle])},[_e(e.$slots,"title",{},()=>[jt(Fe(e.title),1)])],2)):ce("v-if",!0),e.$slots.default||e.description?(T(),B("p",{key:1,class:q(e.ns.e("description"))},[_e(e.$slots,"default",{},()=>[jt(Fe(e.description),1)])],2)):ce("v-if",!0),e.closable?(T(),B(it,{key:2},[e.closeText?(T(),B("div",{key:0,class:q([e.ns.e("closebtn"),e.ns.is("customed")]),onClick:t[0]||(t[0]=(...l)=>e.close&&e.close(...l))},Fe(e.closeText),3)):(T(),ve(a,{key:1,class:q(e.ns.e("closebtn")),onClick:e.close},{default:oe(()=>[le(i)]),_:1},8,["class","onClick"]))],2112)):ce("v-if",!0)],2)],2),[[Qt,e.visible]])]),_:3})}var CQ=We(wQ,[["render",$Q]]);const kQ=Vt(CQ);var SQ=ra,xQ=function(){return SQ.Date.now()},IQ=xQ,EQ=/\s/;function TQ(e){for(var t=e.length;t--&&EQ.test(e.charAt(t)););return t}var NQ=TQ,AQ=NQ,DQ=/^\s+/;function RQ(e){return e&&e.slice(0,AQ(e)+1).replace(DQ,"")}var _Q=RQ,OQ=_Q,uI=Oi,MQ=Lg,cI=0/0,FQ=/^[-+]0x[0-9a-f]+$/i,PQ=/^0b[01]+$/i,LQ=/^0o[0-7]+$/i,BQ=parseInt;function zQ(e){if(typeof e=="number")return e;if(MQ(e))return cI;if(uI(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=uI(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=OQ(e);var n=PQ.test(e);return n||LQ.test(e)?BQ(e.slice(2),n?2:8):FQ.test(e)?cI:+e}var VQ=zQ,WQ=Oi,mb=IQ,dI=VQ,HQ="Expected a function",UQ=Math.max,GQ=Math.min;function KQ(e,t,n){var s,o,r,a,i,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(HQ);t=dI(t)||0,WQ(n)&&(c=!!n.leading,d="maxWait"in n,r=d?UQ(dI(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f);function h(C){var k=s,S=o;return s=o=void 0,u=C,a=e.apply(S,k),a}function p(C){return u=C,i=setTimeout(v,t),c?h(C):a}function m(C){var k=C-l,S=C-u,E=t-k;return d?GQ(E,r-S):E}function g(C){var k=C-l,S=C-u;return l===void 0||k>=t||k<0||d&&S>=r}function v(){var C=mb();if(g(C))return b(C);i=setTimeout(v,m(C))}function b(C){return i=void 0,f&&s?h(C):(s=o=void 0,a)}function $(){i!==void 0&&clearTimeout(i),u=0,s=l=o=i=void 0}function y(){return i===void 0?a:b(mb())}function w(){var C=mb(),k=g(C);if(s=arguments,o=this,l=C,k){if(i===void 0)return p(l);if(d)return clearTimeout(i),i=setTimeout(v,t),h(l)}return i===void 0&&(i=setTimeout(v,t)),a}return w.cancel=$,w.flush=y,w}var _o=KQ;const ui=new Map;let fI;qt&&(gn(document,"mousedown",e=>fI=e),gn(document,"mouseup",e=>{for(const t of ui.values())for(const{documentHandler:n}of t)n(e,fI)}));function hI(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:t.arg instanceof HTMLElement&&n.push(t.arg),function(s,o){const r=t.instance.popperRef,a=s.target,i=o==null?void 0:o.target,l=!t||!t.instance,u=!a||!i,c=e.contains(a)||e.contains(i),d=e===a,f=n.length&&n.some(p=>p==null?void 0:p.contains(a))||n.length&&n.includes(i),h=r&&(r.contains(a)||r.contains(i));l||u||c||d||f||h||t.value(s,o)}}const Pi={beforeMount(e,t){ui.has(e)||ui.set(e,[]),ui.get(e).push({documentHandler:hI(e,t),bindingFn:t.value})},updated(e,t){ui.has(e)||ui.set(e,[]);const n=ui.get(e),s=n.findIndex(r=>r.bindingFn===t.oldValue),o={documentHandler:hI(e,t),bindingFn:t.value};s>=0?n.splice(s,1,o):n.push(o)},unmounted(e){ui.delete(e)}};var tR={beforeMount(e,t){let n=null,s;const o=()=>t.value&&t.value(),r=()=>{Date.now()-s<100&&o(),clearInterval(n),n=null};gn(e,"mousedown",a=>{a.button===0&&(s=Date.now(),Pq(document,"mouseup",r),clearInterval(n),n=setInterval(o,100))})}};const Ry="_trap-focus-children",Cl=[],pI=e=>{if(Cl.length===0)return;const t=Cl[Cl.length-1][Ry];if(t.length>0&&e.code===Qe.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const n=e.shiftKey,s=e.target===t[0],o=e.target===t[t.length-1];s&&n&&(e.preventDefault(),t[t.length-1].focus()),o&&!n&&(e.preventDefault(),t[0].focus())}},Xw={beforeMount(e){e[Ry]=rI(e),Cl.push(e),Cl.length<=1&&gn(document,"keydown",pI)},updated(e){dt(()=>{e[Ry]=rI(e)})},unmounted(){Cl.shift(),Cl.length===0&&zn(document,"keydown",pI)}};var mI=!1,vl,_y,Oy,tm,nm,nR,sm,My,Fy,Py,sR,Ly,By,oR,rR;function xo(){if(!mI){mI=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Ly=/\b(iPhone|iP[ao]d)/.exec(e),By=/\b(iP[ao]d)/.exec(e),Py=/Android/i.exec(e),oR=/FBAN\/\w+;/i.exec(e),rR=/Mobile/i.exec(e),sR=!!/Win64/.exec(e),t){vl=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,vl&&document&&document.documentMode&&(vl=document.documentMode);var s=/(?:Trident\/(\d+.\d+))/.exec(e);nR=s?parseFloat(s[1])+4:vl,_y=t[2]?parseFloat(t[2]):NaN,Oy=t[3]?parseFloat(t[3]):NaN,tm=t[4]?parseFloat(t[4]):NaN,tm?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),nm=t&&t[1]?parseFloat(t[1]):NaN):nm=NaN}else vl=_y=Oy=nm=tm=NaN;if(n){if(n[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);sm=o?parseFloat(o[1].replace("_",".")):!0}else sm=!1;My=!!n[2],Fy=!!n[3]}else sm=My=Fy=!1}}var zy={ie:function(){return xo()||vl},ieCompatibilityMode:function(){return xo()||nR>vl},ie64:function(){return zy.ie()&&sR},firefox:function(){return xo()||_y},opera:function(){return xo()||Oy},webkit:function(){return xo()||tm},safari:function(){return zy.webkit()},chrome:function(){return xo()||nm},windows:function(){return xo()||My},osx:function(){return xo()||sm},linux:function(){return xo()||Fy},iphone:function(){return xo()||Ly},mobile:function(){return xo()||Ly||By||Py||rR},nativeApp:function(){return xo()||oR},android:function(){return xo()||Py},ipad:function(){return xo()||By}},jQ=zy,Ip=!!(typeof window!="undefined"&&window.document&&window.document.createElement),qQ={canUseDOM:Ip,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:Ip&&!!(window.addEventListener||window.attachEvent),canUseViewport:Ip&&!!window.screen,isInWorker:!Ip},aR=qQ,iR;aR.canUseDOM&&(iR=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function XQ(e,t){if(!aR.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var o=document.createElement("div");o.setAttribute(n,"return;"),s=typeof o[n]=="function"}return!s&&iR&&e==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var YQ=XQ,gI=10,vI=40,bI=800;function lR(e){var t=0,n=0,s=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),s=t*gI,o=n*gI,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(s=e.deltaX),(s||o)&&e.deltaMode&&(e.deltaMode==1?(s*=vI,o*=vI):(s*=bI,o*=bI)),s&&!t&&(t=s<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:s,pixelY:o}}lR.getEventType=function(){return jQ.firefox()?"DOMMouseScroll":YQ("wheel")?"wheel":"mousewheel"};var ZQ=lR;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const JQ=function(e,t){if(e&&e.addEventListener){const n=function(s){const o=ZQ(s);t&&t.apply(this,[s,o])};ND()?e.addEventListener("DOMMouseScroll",n):e.onmousewheel=n}},QQ={beforeMount(e,t){JQ(e,t.value)}},eee=function(e){for(const t of e){const n=t.target.__resizeListeners__||[];n.length&&n.forEach(s=>{s()})}},Li=function(e,t){!qt||!e||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new ResizeObserver(eee),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},Bi=function(e,t){var n;!e||!e.__resizeListeners__||(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(n=e.__ro__)==null||n.disconnect())},tee={beforeMount(e,t){e._handleResize=()=>{var n;e&&((n=t.value)==null||n.call(t,e))},Li(e,e._handleResize)},beforeUnmount(e){Bi(e,e._handleResize)}},Ft="update:modelValue",Ms="change",Ii="input";function Wg(e){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e)}let Lr;const nee=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,see=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function oee(e){const t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),s=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),o=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:see.map(a=>`${a}:${t.getPropertyValue(a)}`).join(";"),paddingSize:s,borderSize:o,boxSizing:n}}function yI(e,t=1,n){var s;Lr||(Lr=document.createElement("textarea"),document.body.appendChild(Lr));const{paddingSize:o,borderSize:r,boxSizing:a,contextStyle:i}=oee(e);Lr.setAttribute("style",`${i};${nee}`),Lr.value=e.value||e.placeholder||"";let l=Lr.scrollHeight;const u={};a==="border-box"?l=l+r:a==="content-box"&&(l=l-o),Lr.value="";const c=Lr.scrollHeight-o;if(wn(t)){let d=c*t;a==="border-box"&&(d=d+o+r),l=Math.max(d,l),u.minHeight=`${d}px`}if(wn(n)){let d=c*n;a==="border-box"&&(d=d+o+r),l=Math.min(d,l)}return u.height=`${l}px`,(s=Lr.parentNode)==null||s.removeChild(Lr),Lr=void 0,u}const ree=gt({size:Pg,disabled:Boolean,modelValue:{type:Je(void 0),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Je([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Je([String,Object]),default:""},prefixIcon:{type:Je([String,Object]),default:""},label:{type:String},tabindex:{type:[Number,String]},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Je([Object,Array,String]),default:()=>vs({})}}),aee={[Ft]:e=>Xt(e),input:e=>Xt(e),change:e=>Xt(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof KeyboardEvent,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},iee={suffix:"append",prefix:"prepend"},lee=me({name:"ElInput",components:{ElIcon:_t,CircleClose:Ha,IconView:QJ},inheritAttrs:!1,props:ree,emits:aee,setup(e,{slots:t,emit:n,attrs:s}){const o=Lt(),r=Rw(),{form:a,formItem:i}=zc(),l=ds(),u=Mf(),c=Dt("input"),d=Dt("textarea"),f=L(),h=L(),p=L(!1),m=L(!1),g=L(!1),v=L(!1),b=uo(e.inputStyle),$=_(()=>f.value||h.value),y=_(()=>{var H;return(H=a==null?void 0:a.statusIcon)!=null?H:!1}),w=_(()=>(i==null?void 0:i.validateState)||""),C=_(()=>eR[w.value]),k=_(()=>s.style),S=_(()=>[e.inputStyle,b.value,{resize:e.resize}]),E=_(()=>e.modelValue===null||e.modelValue===void 0?"":String(e.modelValue)),x=_(()=>e.clearable&&!u.value&&!e.readonly&&!!E.value&&(p.value||m.value)),N=_(()=>e.showPassword&&!u.value&&!e.readonly&&(!!E.value||p.value)),A=_(()=>e.showWordLimit&&!!r.value.maxlength&&(e.type==="text"||e.type==="textarea")&&!u.value&&!e.readonly&&!e.showPassword),D=_(()=>Array.from(E.value).length),M=_(()=>!!A.value&&D.value>Number(r.value.maxlength)),F=()=>{const{type:H,autosize:ne}=e;if(!(!qt||H!=="textarea"))if(ne){const ye=rn(ne)?ne.minRows:void 0,J=rn(ne)?ne.maxRows:void 0;b.value=ut({},yI(h.value,ye,J))}else b.value={minHeight:yI(h.value).minHeight}},R=()=>{const H=$.value;!H||H.value===E.value||(H.value=E.value)},P=H=>{const{el:ne}=o.vnode;if(!ne)return;const J=Array.from(ne.querySelectorAll(`.${c.e(H)}`)).find(Ie=>Ie.parentNode===ne);if(!J)return;const Ne=iee[H];t[Ne]?J.style.transform=`translateX(${H==="suffix"?"-":""}${ne.querySelector(`.${c.be("group",Ne)}`).offsetWidth}px)`:J.removeAttribute("style")},V=()=>{P("prefix"),P("suffix")},G=H=>{const{value:ne}=H.target;g.value||ne!==E.value&&(n(Ft,ne),n("input",ne),dt(R))},se=H=>{n("change",H.target.value)},ke=()=>{dt(()=>{var H;(H=$.value)==null||H.focus()})},te=()=>{var H;(H=$.value)==null||H.blur()},pe=H=>{p.value=!0,n("focus",H)},ae=H=>{var ne;p.value=!1,n("blur",H),e.validateEvent&&((ne=i==null?void 0:i.validate)==null||ne.call(i,"blur"))},K=()=>{var H;(H=$.value)==null||H.select()},X=H=>{n("compositionstart",H),g.value=!0},Y=H=>{var ne;n("compositionupdate",H);const ye=(ne=H.target)==null?void 0:ne.value,J=ye[ye.length-1]||"";g.value=!Wg(J)},ie=H=>{n("compositionend",H),g.value&&(g.value=!1,G(H))},xe=()=>{n(Ft,""),n("change",""),n("clear"),n("input","")},Le=()=>{v.value=!v.value,ke()},Be=_(()=>!!t.suffix||!!e.suffixIcon||x.value||e.showPassword||A.value||!!w.value&&y.value);return Oe(()=>e.modelValue,()=>{var H;dt(F),e.validateEvent&&((H=i==null?void 0:i.validate)==null||H.call(i,"change"))}),Oe(E,()=>R()),Oe(()=>e.type,()=>{dt(()=>{R(),F(),V()})}),Mt(()=>{R(),V(),dt(F)}),sa(()=>{dt(V)}),{input:f,textarea:h,attrs:r,inputSize:l,validateState:w,validateIcon:C,containerStyle:k,computedTextareaStyle:S,inputDisabled:u,showClear:x,showPwdVisible:N,isWordLimitVisible:A,textLength:D,hovering:m,inputExceed:M,passwordVisible:v,inputOrTextarea:$,suffixVisible:Be,needStatusIcon:y,resizeTextarea:F,handleInput:G,handleChange:se,handleFocus:pe,handleBlur:ae,handleCompositionStart:X,handleCompositionUpdate:Y,handleCompositionEnd:ie,handlePasswordVisible:Le,clear:xe,select:K,focus:ke,blur:te,onMouseLeave:H=>{m.value=!1,n("mouseleave",H)},onMouseEnter:H=>{m.value=!0,n("mouseenter",H)},handleKeydown:H=>{n("keydown",H)},nsInput:c,nsTextarea:d}}}),uee=["type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder"],cee=["tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];function dee(e,t,n,s,o,r){const a=re("el-icon"),i=re("circle-close"),l=re("icon-view");return $t((T(),B("div",{class:q([e.type==="textarea"?e.nsTextarea.b():e.nsInput.b(),e.nsInput.m(e.inputSize),e.nsInput.is("disabled",e.inputDisabled),e.nsInput.is("exceed",e.inputExceed),{[e.nsInput.b("group")]:e.$slots.prepend||e.$slots.append,[e.nsInput.bm("group","append")]:e.$slots.append,[e.nsInput.bm("group","prepend")]:e.$slots.prepend,[e.nsInput.m("prefix")]:e.$slots.prefix||e.prefixIcon,[e.nsInput.m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[e.nsInput.m("suffix--password-clear")]:e.clearable&&e.showPassword},e.$attrs.class]),style:nt(e.containerStyle),onMouseenter:t[17]||(t[17]=(...u)=>e.onMouseEnter&&e.onMouseEnter(...u)),onMouseleave:t[18]||(t[18]=(...u)=>e.onMouseLeave&&e.onMouseLeave(...u))},[ce(" input "),e.type!=="textarea"?(T(),B(it,{key:0},[ce(" prepend slot "),e.$slots.prepend?(T(),B("div",{key:0,class:q(e.nsInput.be("group","prepend"))},[_e(e.$slots,"prepend")],2)):ce("v-if",!0),W("input",Us({ref:"input",class:e.nsInput.e("inner")},e.attrs,{type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:t[0]||(t[0]=(...u)=>e.handleCompositionStart&&e.handleCompositionStart(...u)),onCompositionupdate:t[1]||(t[1]=(...u)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...u)),onCompositionend:t[2]||(t[2]=(...u)=>e.handleCompositionEnd&&e.handleCompositionEnd(...u)),onInput:t[3]||(t[3]=(...u)=>e.handleInput&&e.handleInput(...u)),onFocus:t[4]||(t[4]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[5]||(t[5]=(...u)=>e.handleBlur&&e.handleBlur(...u)),onChange:t[6]||(t[6]=(...u)=>e.handleChange&&e.handleChange(...u)),onKeydown:t[7]||(t[7]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))}),null,16,uee),ce(" prefix slot "),e.$slots.prefix||e.prefixIcon?(T(),B("span",{key:1,class:q(e.nsInput.e("prefix"))},[W("span",{class:q(e.nsInput.e("prefix-inner"))},[_e(e.$slots,"prefix"),e.prefixIcon?(T(),ve(a,{key:0,class:q(e.nsInput.e("icon"))},{default:oe(()=>[(T(),ve(en(e.prefixIcon)))]),_:1},8,["class"])):ce("v-if",!0)],2)],2)):ce("v-if",!0),ce(" suffix slot "),e.suffixVisible?(T(),B("span",{key:2,class:q(e.nsInput.e("suffix"))},[W("span",{class:q(e.nsInput.e("suffix-inner"))},[!e.showClear||!e.showPwdVisible||!e.isWordLimitVisible?(T(),B(it,{key:0},[_e(e.$slots,"suffix"),e.suffixIcon?(T(),ve(a,{key:0,class:q(e.nsInput.e("icon"))},{default:oe(()=>[(T(),ve(en(e.suffixIcon)))]),_:1},8,["class"])):ce("v-if",!0)],64)):ce("v-if",!0),e.showClear?(T(),ve(a,{key:1,class:q([e.nsInput.e("icon"),e.nsInput.e("clear")]),onMousedown:t[8]||(t[8]=ht(()=>{},["prevent"])),onClick:e.clear},{default:oe(()=>[le(i)]),_:1},8,["class","onClick"])):ce("v-if",!0),e.showPwdVisible?(T(),ve(a,{key:2,class:q([e.nsInput.e("icon"),e.nsInput.e("clear")]),onClick:e.handlePasswordVisible},{default:oe(()=>[le(l)]),_:1},8,["class","onClick"])):ce("v-if",!0),e.isWordLimitVisible?(T(),B("span",{key:3,class:q(e.nsInput.e("count"))},[W("span",{class:q(e.nsInput.e("count-inner"))},Fe(e.textLength)+" / "+Fe(e.attrs.maxlength),3)],2)):ce("v-if",!0)],2),e.validateState&&e.validateIcon&&e.needStatusIcon?(T(),ve(a,{key:0,class:q([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:oe(()=>[(T(),ve(en(e.validateIcon)))]),_:1},8,["class"])):ce("v-if",!0)],2)):ce("v-if",!0),ce(" append slot "),e.$slots.append?(T(),B("div",{key:3,class:q(e.nsInput.be("group","append"))},[_e(e.$slots,"append")],2)):ce("v-if",!0)],64)):(T(),B(it,{key:1},[ce(" textarea "),W("textarea",Us({ref:"textarea",class:e.nsTextarea.e("inner")},e.attrs,{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autocomplete,style:e.computedTextareaStyle,"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:t[9]||(t[9]=(...u)=>e.handleCompositionStart&&e.handleCompositionStart(...u)),onCompositionupdate:t[10]||(t[10]=(...u)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...u)),onCompositionend:t[11]||(t[11]=(...u)=>e.handleCompositionEnd&&e.handleCompositionEnd(...u)),onInput:t[12]||(t[12]=(...u)=>e.handleInput&&e.handleInput(...u)),onFocus:t[13]||(t[13]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[14]||(t[14]=(...u)=>e.handleBlur&&e.handleBlur(...u)),onChange:t[15]||(t[15]=(...u)=>e.handleChange&&e.handleChange(...u)),onKeydown:t[16]||(t[16]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))}),null,16,cee),e.isWordLimitVisible?(T(),B("span",{key:0,class:q(e.nsInput.e("count"))},Fe(e.textLength)+" / "+Fe(e.attrs.maxlength),3)):ce("v-if",!0)],64))],38)),[[Qt,e.type!=="hidden"]])}var fee=We(lee,[["render",dee]]);const Tr=Vt(fee),uR={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},hee=({move:e,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${e}%)`}),pee=gt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),wI="Thumb",mee=me({name:wI,props:pee,setup(e){const t=Ze(rD),n=Dt("scrollbar");t||oo(wI,"can not inject scrollbar context");const s=L(),o=L(),r=L({}),a=L(!1);let i=!1,l=!1,u=qt?document.onselectstart:null;const c=_(()=>uR[e.vertical?"vertical":"horizontal"]),d=_(()=>hee({size:e.size,move:e.move,bar:c.value})),f=_(()=>s.value[c.value.offset]**2/t.wrapElement[c.value.scrollSize]/e.ratio/o.value[c.value.offset]),h=w=>{var C;if(w.stopPropagation(),w.ctrlKey||[1,2].includes(w.button))return;(C=window.getSelection())==null||C.removeAllRanges(),m(w);const k=w.currentTarget;!k||(r.value[c.value.axis]=k[c.value.offset]-(w[c.value.client]-k.getBoundingClientRect()[c.value.direction]))},p=w=>{if(!o.value||!s.value||!t.wrapElement)return;const C=Math.abs(w.target.getBoundingClientRect()[c.value.direction]-w[c.value.client]),k=o.value[c.value.offset]/2,S=(C-k)*100*f.value/s.value[c.value.offset];t.wrapElement[c.value.scroll]=S*t.wrapElement[c.value.scrollSize]/100},m=w=>{w.stopImmediatePropagation(),i=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),u=document.onselectstart,document.onselectstart=()=>!1},g=w=>{if(!s.value||!o.value||i===!1)return;const C=r.value[c.value.axis];if(!C)return;const k=(s.value.getBoundingClientRect()[c.value.direction]-w[c.value.client])*-1,S=o.value[c.value.offset]-C,E=(k-S)*100*f.value/s.value[c.value.offset];t.wrapElement[c.value.scroll]=E*t.wrapElement[c.value.scrollSize]/100},v=()=>{i=!1,r.value[c.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v),y(),l&&(a.value=!1)},b=()=>{l=!1,a.value=!!e.size},$=()=>{l=!0,a.value=i};os(()=>{y(),document.removeEventListener("mouseup",v)});const y=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Ss(Js(t,"scrollbarElement"),"mousemove",b),Ss(Js(t,"scrollbarElement"),"mouseleave",$),{ns:n,instance:s,thumb:o,bar:c,thumbStyle:d,visible:a,clickTrackHandler:p,clickThumbHandler:h}}});function gee(e,t,n,s,o,r){return T(),ve(cs,{name:e.ns.b("fade")},{default:oe(()=>[$t(W("div",{ref:"instance",class:q([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:t[1]||(t[1]=(...a)=>e.clickTrackHandler&&e.clickTrackHandler(...a))},[W("div",{ref:"thumb",class:q(e.ns.e("thumb")),style:nt(e.thumbStyle),onMousedown:t[0]||(t[0]=(...a)=>e.clickThumbHandler&&e.clickThumbHandler(...a))},null,38)],34),[[Qt,e.always||e.visible]])]),_:1},8,["name"])}var vee=We(mee,[["render",gee]]);const bee=gt({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),yee=me({components:{Thumb:vee},props:bee,setup(e){const t=L(0),n=L(0),s=4;return{handleScroll:r=>{if(r){const a=r.offsetHeight-s,i=r.offsetWidth-s;n.value=r.scrollTop*100/a*e.ratioY,t.value=r.scrollLeft*100/i*e.ratioX}},moveX:t,moveY:n}}});function wee(e,t,n,s,o,r){const a=re("thumb");return T(),B(it,null,[le(a,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),le(a,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}var $ee=We(yee,[["render",wee]]);const Cee=gt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Je([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),kee={scroll:({scrollTop:e,scrollLeft:t})=>wn(e)&&wn(t)},See=me({name:"ElScrollbar",components:{Bar:$ee},props:Cee,emits:kee,setup(e,{emit:t}){const n=Dt("scrollbar");let s,o;const r=L(),a=L(),i=L(),l=L("0"),u=L("0"),c=L(),d=L(0),f=L(0),h=L(1),p=L(1),m=4,g=_(()=>{const w={};return e.height&&(w.height=Wa(e.height)),e.maxHeight&&(w.maxHeight=Wa(e.maxHeight)),[e.wrapStyle,w]}),v=()=>{var w;a.value&&((w=c.value)==null||w.handleScroll(a.value),t("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft}))},b=w=>{!wn(w)||(a.value.scrollTop=w)},$=w=>{!wn(w)||(a.value.scrollLeft=w)},y=()=>{if(!a.value)return;const w=a.value.offsetHeight-m,C=a.value.offsetWidth-m,k=w**2/a.value.scrollHeight,S=C**2/a.value.scrollWidth,E=Math.max(k,e.minSize),x=Math.max(S,e.minSize);h.value=k/(w-k)/(E/(w-E)),p.value=S/(C-S)/(x/(C-x)),u.value=E+m<w?`${E}px`:"",l.value=x+m<C?`${x}px`:""};return Oe(()=>e.noresize,w=>{w?(s==null||s(),o==null||o()):({stop:s}=rf(i,y),o=Ss("resize",y))},{immediate:!0}),zt(rD,Cn({scrollbarElement:r,wrapElement:a})),Mt(()=>{e.native||dt(()=>y())}),{ns:n,scrollbar$:r,wrap$:a,resize$:i,barRef:c,moveX:d,moveY:f,ratioX:p,ratioY:h,sizeWidth:l,sizeHeight:u,style:g,update:y,handleScroll:v,setScrollTop:b,setScrollLeft:$}}});function xee(e,t,n,s,o,r){const a=re("bar");return T(),B("div",{ref:"scrollbar$",class:q(e.ns.b())},[W("div",{ref:"wrap$",class:q([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:nt(e.style),onScroll:t[0]||(t[0]=(...i)=>e.handleScroll&&e.handleScroll(...i))},[(T(),ve(en(e.tag),{ref:"resize$",class:q([e.ns.e("view"),e.viewClass]),style:nt(e.viewStyle)},{default:oe(()=>[_e(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?ce("v-if",!0):(T(),ve(a,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var Iee=We(See,[["render",xee]]);const Ya=Vt(Iee),Yw=Symbol("elPopper"),cR=Symbol("elPopperContent"),Eee=me({name:"ElPopperProvider",inheritAttrs:!1,setup(){const e={triggerRef:L(null),popperInstanceRef:L(null),contentRef:L(null)};return zt(Yw,e),e}});function Tee(e,t,n,s,o,r){return _e(e.$slots,"default")}var Nee=We(Eee,[["render",Tee]]),Do="top",Cr="bottom",kr="right",Ro="left",Zw="auto",Pf=[Do,Cr,kr,Ro],uc="start",df="end",Aee="clippingParents",dR="viewport",hd="popper",Dee="reference",$I=Pf.reduce(function(e,t){return e.concat([t+"-"+uc,t+"-"+df])},[]),Jw=[].concat(Pf,[Zw]).reduce(function(e,t){return e.concat([t,t+"-"+uc,t+"-"+df])},[]),Ree="beforeRead",_ee="read",Oee="afterRead",Mee="beforeMain",Fee="main",Pee="afterMain",Lee="beforeWrite",Bee="write",zee="afterWrite",Vee=[Ree,_ee,Oee,Mee,Fee,Pee,Lee,Bee,zee];function $a(e){return e?(e.nodeName||"").toLowerCase():null}function aa(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function cc(e){var t=aa(e).Element;return e instanceof t||e instanceof Element}function wr(e){var t=aa(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function fR(e){if(typeof ShadowRoot=="undefined")return!1;var t=aa(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Wee(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},o=t.attributes[n]||{},r=t.elements[n];!wr(r)||!$a(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(a){var i=o[a];i===!1?r.removeAttribute(a):r.setAttribute(a,i===!0?"":i)}))})}function Hee(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var o=t.elements[s],r=t.attributes[s]||{},a=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),i=a.reduce(function(l,u){return l[u]="",l},{});!wr(o)||!$a(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(l){o.removeAttribute(l)}))})}}var Uee={name:"applyStyles",enabled:!0,phase:"write",fn:Wee,effect:Hee,requires:["computeStyles"]};function ga(e){return e.split("-")[0]}var _l=Math.max,Wm=Math.min,dc=Math.round;function fc(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),s=1,o=1;if(wr(e)&&t){var r=e.offsetHeight,a=e.offsetWidth;a>0&&(s=dc(n.width)/a||1),r>0&&(o=dc(n.height)/r||1)}return{width:n.width/s,height:n.height/o,top:n.top/o,right:n.right/s,bottom:n.bottom/o,left:n.left/s,x:n.left/s,y:n.top/o}}function Qw(e){var t=fc(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function hR(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&fR(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ga(e){return aa(e).getComputedStyle(e)}function Gee(e){return["table","td","th"].indexOf($a(e))>=0}function zi(e){return((cc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Hg(e){return $a(e)==="html"?e:e.assignedSlot||e.parentNode||(fR(e)?e.host:null)||zi(e)}function CI(e){return!wr(e)||Ga(e).position==="fixed"?null:e.offsetParent}function Kee(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&wr(e)){var s=Ga(e);if(s.position==="fixed")return null}for(var o=Hg(e);wr(o)&&["html","body"].indexOf($a(o))<0;){var r=Ga(o);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return o;o=o.parentNode}return null}function Lf(e){for(var t=aa(e),n=CI(e);n&&Gee(n)&&Ga(n).position==="static";)n=CI(n);return n&&($a(n)==="html"||$a(n)==="body"&&Ga(n).position==="static")?t:n||Kee(e)||t}function e$(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Bd(e,t,n){return _l(e,Wm(t,n))}function jee(e,t,n){var s=Bd(e,t,n);return s>n?n:s}function pR(){return{top:0,right:0,bottom:0,left:0}}function mR(e){return Object.assign({},pR(),e)}function gR(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var qee=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,mR(typeof t!="number"?t:gR(t,Pf))};function Xee(e){var t,n=e.state,s=e.name,o=e.options,r=n.elements.arrow,a=n.modifiersData.popperOffsets,i=ga(n.placement),l=e$(i),u=[Ro,kr].indexOf(i)>=0,c=u?"height":"width";if(!(!r||!a)){var d=qee(o.padding,n),f=Qw(r),h=l==="y"?Do:Ro,p=l==="y"?Cr:kr,m=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],g=a[l]-n.rects.reference[l],v=Lf(r),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,$=m/2-g/2,y=d[h],w=b-f[c]-d[p],C=b/2-f[c]/2+$,k=Bd(y,C,w),S=l;n.modifiersData[s]=(t={},t[S]=k,t.centerOffset=k-C,t)}}function Yee(e){var t=e.state,n=e.options,s=n.element,o=s===void 0?"[data-popper-arrow]":s;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||!hR(t.elements.popper,o)||(t.elements.arrow=o))}var Zee={name:"arrow",enabled:!0,phase:"main",fn:Xee,effect:Yee,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hc(e){return e.split("-")[1]}var Jee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qee(e){var t=e.x,n=e.y,s=window,o=s.devicePixelRatio||1;return{x:dc(t*o)/o||0,y:dc(n*o)/o||0}}function kI(e){var t,n=e.popper,s=e.popperRect,o=e.placement,r=e.variation,a=e.offsets,i=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=a.x,h=f===void 0?0:f,p=a.y,m=p===void 0?0:p,g=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var v=a.hasOwnProperty("x"),b=a.hasOwnProperty("y"),$=Ro,y=Do,w=window;if(u){var C=Lf(n),k="clientHeight",S="clientWidth";if(C===aa(n)&&(C=zi(n),Ga(C).position!=="static"&&i==="absolute"&&(k="scrollHeight",S="scrollWidth")),C=C,o===Do||(o===Ro||o===kr)&&r===df){y=Cr;var E=d&&w.visualViewport?w.visualViewport.height:C[k];m-=E-s.height,m*=l?1:-1}if(o===Ro||(o===Do||o===Cr)&&r===df){$=kr;var x=d&&w.visualViewport?w.visualViewport.width:C[S];h-=x-s.width,h*=l?1:-1}}var N=Object.assign({position:i},u&&Jee),A=c===!0?Qee({x:h,y:m}):{x:h,y:m};if(h=A.x,m=A.y,l){var D;return Object.assign({},N,(D={},D[y]=b?"0":"",D[$]=v?"0":"",D.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",D))}return Object.assign({},N,(t={},t[y]=b?m+"px":"",t[$]=v?h+"px":"",t.transform="",t))}function ete(e){var t=e.state,n=e.options,s=n.gpuAcceleration,o=s===void 0?!0:s,r=n.adaptive,a=r===void 0?!0:r,i=n.roundOffsets,l=i===void 0?!0:i,u={placement:ga(t.placement),variation:hc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,kI(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,kI(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var tte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ete,data:{}},Ep={passive:!0};function nte(e){var t=e.state,n=e.instance,s=e.options,o=s.scroll,r=o===void 0?!0:o,a=s.resize,i=a===void 0?!0:a,l=aa(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&u.forEach(function(c){c.addEventListener("scroll",n.update,Ep)}),i&&l.addEventListener("resize",n.update,Ep),function(){r&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Ep)}),i&&l.removeEventListener("resize",n.update,Ep)}}var ste={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nte,data:{}},ote={left:"right",right:"left",bottom:"top",top:"bottom"};function om(e){return e.replace(/left|right|bottom|top/g,function(t){return ote[t]})}var rte={start:"end",end:"start"};function SI(e){return e.replace(/start|end/g,function(t){return rte[t]})}function t$(e){var t=aa(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function n$(e){return fc(zi(e)).left+t$(e).scrollLeft}function ate(e){var t=aa(e),n=zi(e),s=t.visualViewport,o=n.clientWidth,r=n.clientHeight,a=0,i=0;return s&&(o=s.width,r=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=s.offsetLeft,i=s.offsetTop)),{width:o,height:r,x:a+n$(e),y:i}}function ite(e){var t,n=zi(e),s=t$(e),o=(t=e.ownerDocument)==null?void 0:t.body,r=_l(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=_l(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),i=-s.scrollLeft+n$(e),l=-s.scrollTop;return Ga(o||n).direction==="rtl"&&(i+=_l(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:a,x:i,y:l}}function s$(e){var t=Ga(e),n=t.overflow,s=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+s)}function vR(e){return["html","body","#document"].indexOf($a(e))>=0?e.ownerDocument.body:wr(e)&&s$(e)?e:vR(Hg(e))}function zd(e,t){var n;t===void 0&&(t=[]);var s=vR(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),r=aa(s),a=o?[r].concat(r.visualViewport||[],s$(s)?s:[]):s,i=t.concat(a);return o?i:i.concat(zd(Hg(a)))}function Vy(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lte(e){var t=fc(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function xI(e,t){return t===dR?Vy(ate(e)):cc(t)?lte(t):Vy(ite(zi(e)))}function ute(e){var t=zd(Hg(e)),n=["absolute","fixed"].indexOf(Ga(e).position)>=0,s=n&&wr(e)?Lf(e):e;return cc(s)?t.filter(function(o){return cc(o)&&hR(o,s)&&$a(o)!=="body"}):[]}function cte(e,t,n){var s=t==="clippingParents"?ute(e):[].concat(t),o=[].concat(s,[n]),r=o[0],a=o.reduce(function(i,l){var u=xI(e,l);return i.top=_l(u.top,i.top),i.right=Wm(u.right,i.right),i.bottom=Wm(u.bottom,i.bottom),i.left=_l(u.left,i.left),i},xI(e,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function bR(e){var t=e.reference,n=e.element,s=e.placement,o=s?ga(s):null,r=s?hc(s):null,a=t.x+t.width/2-n.width/2,i=t.y+t.height/2-n.height/2,l;switch(o){case Do:l={x:a,y:t.y-n.height};break;case Cr:l={x:a,y:t.y+t.height};break;case kr:l={x:t.x+t.width,y:i};break;case Ro:l={x:t.x-n.width,y:i};break;default:l={x:t.x,y:t.y}}var u=o?e$(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(r){case uc:l[u]=l[u]-(t[c]/2-n[c]/2);break;case df:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function ff(e,t){t===void 0&&(t={});var n=t,s=n.placement,o=s===void 0?e.placement:s,r=n.boundary,a=r===void 0?Aee:r,i=n.rootBoundary,l=i===void 0?dR:i,u=n.elementContext,c=u===void 0?hd:u,d=n.altBoundary,f=d===void 0?!1:d,h=n.padding,p=h===void 0?0:h,m=mR(typeof p!="number"?p:gR(p,Pf)),g=c===hd?Dee:hd,v=e.rects.popper,b=e.elements[f?g:c],$=cte(cc(b)?b:b.contextElement||zi(e.elements.popper),a,l),y=fc(e.elements.reference),w=bR({reference:y,element:v,strategy:"absolute",placement:o}),C=Vy(Object.assign({},v,w)),k=c===hd?C:y,S={top:$.top-k.top+m.top,bottom:k.bottom-$.bottom+m.bottom,left:$.left-k.left+m.left,right:k.right-$.right+m.right},E=e.modifiersData.offset;if(c===hd&&E){var x=E[o];Object.keys(S).forEach(function(N){var A=[kr,Cr].indexOf(N)>=0?1:-1,D=[Do,Cr].indexOf(N)>=0?"y":"x";S[N]+=x[D]*A})}return S}function dte(e,t){t===void 0&&(t={});var n=t,s=n.placement,o=n.boundary,r=n.rootBoundary,a=n.padding,i=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Jw:l,c=hc(s),d=c?i?$I:$I.filter(function(p){return hc(p)===c}):Pf,f=d.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=ff(e,{placement:m,boundary:o,rootBoundary:r,padding:a})[ga(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function fte(e){if(ga(e)===Zw)return[];var t=om(e);return[SI(e),t,SI(t)]}function hte(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var o=n.mainAxis,r=o===void 0?!0:o,a=n.altAxis,i=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,m=n.allowedAutoPlacements,g=t.options.placement,v=ga(g),b=v===g,$=l||(b||!p?[om(g)]:fte(g)),y=[g].concat($).reduce(function(ae,K){return ae.concat(ga(K)===Zw?dte(t,{placement:K,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):K)},[]),w=t.rects.reference,C=t.rects.popper,k=new Map,S=!0,E=y[0],x=0;x<y.length;x++){var N=y[x],A=ga(N),D=hc(N)===uc,M=[Do,Cr].indexOf(A)>=0,F=M?"width":"height",R=ff(t,{placement:N,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),P=M?D?kr:Ro:D?Cr:Do;w[F]>C[F]&&(P=om(P));var V=om(P),G=[];if(r&&G.push(R[A]<=0),i&&G.push(R[P]<=0,R[V]<=0),G.every(function(ae){return ae})){E=N,S=!1;break}k.set(N,G)}if(S)for(var se=p?3:1,ke=function(K){var X=y.find(function(Y){var ie=k.get(Y);if(ie)return ie.slice(0,K).every(function(xe){return xe})});if(X)return E=X,"break"},te=se;te>0;te--){var pe=ke(te);if(pe==="break")break}t.placement!==E&&(t.modifiersData[s]._skip=!0,t.placement=E,t.reset=!0)}}var pte={name:"flip",enabled:!0,phase:"main",fn:hte,requiresIfExists:["offset"],data:{_skip:!1}};function II(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function EI(e){return[Do,kr,Cr,Ro].some(function(t){return e[t]>=0})}function mte(e){var t=e.state,n=e.name,s=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,a=ff(t,{elementContext:"reference"}),i=ff(t,{altBoundary:!0}),l=II(a,s),u=II(i,o,r),c=EI(l),d=EI(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var gte={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mte};function vte(e,t,n){var s=ga(e),o=[Ro,Do].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=r[0],i=r[1];return a=a||0,i=(i||0)*o,[Ro,kr].indexOf(s)>=0?{x:i,y:a}:{x:a,y:i}}function bte(e){var t=e.state,n=e.options,s=e.name,o=n.offset,r=o===void 0?[0,0]:o,a=Jw.reduce(function(c,d){return c[d]=vte(d,t.rects,r),c},{}),i=a[t.placement],l=i.x,u=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=a}var yte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:bte};function wte(e){var t=e.state,n=e.name;t.modifiersData[n]=bR({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var $te={name:"popperOffsets",enabled:!0,phase:"read",fn:wte,data:{}};function Cte(e){return e==="x"?"y":"x"}function kte(e){var t=e.state,n=e.options,s=e.name,o=n.mainAxis,r=o===void 0?!0:o,a=n.altAxis,i=a===void 0?!1:a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,m=p===void 0?0:p,g=ff(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),v=ga(t.placement),b=hc(t.placement),$=!b,y=e$(v),w=Cte(y),C=t.modifiersData.popperOffsets,k=t.rects.reference,S=t.rects.popper,E=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,x=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),N=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(!!C){if(r){var D,M=y==="y"?Do:Ro,F=y==="y"?Cr:kr,R=y==="y"?"height":"width",P=C[y],V=P+g[M],G=P-g[F],se=h?-S[R]/2:0,ke=b===uc?k[R]:S[R],te=b===uc?-S[R]:-k[R],pe=t.elements.arrow,ae=h&&pe?Qw(pe):{width:0,height:0},K=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:pR(),X=K[M],Y=K[F],ie=Bd(0,k[R],ae[R]),xe=$?k[R]/2-se-ie-X-x.mainAxis:ke-ie-X-x.mainAxis,Le=$?-k[R]/2+se+ie+Y+x.mainAxis:te+ie+Y+x.mainAxis,Be=t.elements.arrow&&Lf(t.elements.arrow),Pe=Be?y==="y"?Be.clientTop||0:Be.clientLeft||0:0,U=(D=N==null?void 0:N[y])!=null?D:0,Q=P+xe-U-Pe,H=P+Le-U,ne=Bd(h?Wm(V,Q):V,P,h?_l(G,H):G);C[y]=ne,A[y]=ne-P}if(i){var ye,J=y==="x"?Do:Ro,Ne=y==="x"?Cr:kr,Ie=C[w],fe=w==="y"?"height":"width",Ee=Ie+g[J],rt=Ie-g[Ne],Ye=[Do,Ro].indexOf(v)!==-1,lt=(ye=N==null?void 0:N[w])!=null?ye:0,vt=Ye?Ee:Ie-k[fe]-S[fe]-lt+x.altAxis,Xe=Ye?Ie+k[fe]+S[fe]-lt-x.altAxis:rt,de=h&&Ye?jee(vt,Ie,Xe):Bd(h?vt:Ee,Ie,h?Xe:rt);C[w]=de,A[w]=de-Ie}t.modifiersData[s]=A}}var Ste={name:"preventOverflow",enabled:!0,phase:"main",fn:kte,requiresIfExists:["offset"]};function xte(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ite(e){return e===aa(e)||!wr(e)?t$(e):xte(e)}function Ete(e){var t=e.getBoundingClientRect(),n=dc(t.width)/e.offsetWidth||1,s=dc(t.height)/e.offsetHeight||1;return n!==1||s!==1}function Tte(e,t,n){n===void 0&&(n=!1);var s=wr(t),o=wr(t)&&Ete(t),r=zi(t),a=fc(e,o),i={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&(($a(t)!=="body"||s$(r))&&(i=Ite(t)),wr(t)?(l=fc(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=n$(r))),{x:a.left+i.scrollLeft-l.x,y:a.top+i.scrollTop-l.y,width:a.width,height:a.height}}function Nte(e){var t=new Map,n=new Set,s=[];e.forEach(function(r){t.set(r.name,r)});function o(r){n.add(r.name);var a=[].concat(r.requires||[],r.requiresIfExists||[]);a.forEach(function(i){if(!n.has(i)){var l=t.get(i);l&&o(l)}}),s.push(r)}return e.forEach(function(r){n.has(r.name)||o(r)}),s}function Ate(e){var t=Nte(e);return Vee.reduce(function(n,s){return n.concat(t.filter(function(o){return o.phase===s}))},[])}function Dte(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Rte(e){var t=e.reduce(function(n,s){var o=n[s.name];return n[s.name]=o?Object.assign({},o,s,{options:Object.assign({},o.options,s.options),data:Object.assign({},o.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var TI={placement:"bottom",modifiers:[],strategy:"absolute"};function NI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function _te(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,o=t.defaultOptions,r=o===void 0?TI:o;return function(i,l,u){u===void 0&&(u=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},TI,r),modifiersData:{},elements:{reference:i,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(v){var b=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},r,c.options,b),c.scrollParents={reference:cc(i)?zd(i):i.contextElement?zd(i.contextElement):[],popper:zd(l)};var $=Ate(Rte([].concat(s,c.options.modifiers)));return c.orderedModifiers=$.filter(function(y){return y.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var v=c.elements,b=v.reference,$=v.popper;if(!!NI(b,$)){c.rects={reference:Tte(b,Lf($),c.options.strategy==="fixed"),popper:Qw($)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(x){return c.modifiersData[x.name]=Object.assign({},x.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var w=c.orderedModifiers[y],C=w.fn,k=w.options,S=k===void 0?{}:k,E=w.name;typeof C=="function"&&(c=C({state:c,options:S,name:E,instance:h})||c)}}}},update:Dte(function(){return new Promise(function(g){h.forceUpdate(),g(c)})}),destroy:function(){m(),f=!0}};if(!NI(i,l))return h;h.setOptions(u).then(function(g){!f&&u.onFirstUpdate&&u.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var v=g.name,b=g.options,$=b===void 0?{}:b,y=g.effect;if(typeof y=="function"){var w=y({state:c,name:v,instance:h,options:$}),C=function(){};d.push(w||C)}})}function m(){d.forEach(function(g){return g()}),d=[]}return h}}var Ote=[ste,$te,tte,Uee,yte,pte,Ste,Zee,gte],yR=_te({defaultModifiers:Ote});const wR={LIGHT:"light",DARK:"dark"},$R=gt({arrowOffset:{type:Number,default:5}}),Mte=gt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Je(Array),default:()=>[]},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Jw,default:"bottom"},popperOptions:{type:Je(Object),default:()=>({})},strategy:{type:String,values:["fixed","absolute"],default:"absolute"}});gt({autoClose:{type:Number,default:0},cutoff:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}});const CR=gt(Ut(ut({},Mte),{style:{type:Je([String,Array,Object])},className:{type:Je([String,Array,Object])},effect:{type:String,default:"dark"},enterable:{type:Boolean,default:!0},pure:{type:Boolean},popperClass:{type:Je([String,Array,Object])},popperStyle:{type:Je([String,Array,Object])},referenceEl:{type:Je(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},zIndex:Number})),kR=gt({virtualRef:{type:Je(Object)},virtualTriggering:{type:Boolean}}),Fte=me({name:"ElPopperArrow",props:$R,setup(e){const t=L(null),n=Ze(cR,void 0);return Oe(()=>e.arrowOffset,s=>{n.arrowOffset.value=s}),Mt(()=>{n.arrowRef.value=je(t)}),os(()=>{n.arrowRef.value=null}),{arrowRef:t}}}),Pte={ref:"arrowRef",class:"el-popper__arrow","data-popper-arrow":""};function Lte(e,t,n,s,o,r){return T(),B("span",Pte,null,512)}var Bte=We(Fte,[["render",Lte]]);const zte="ElOnlyChild",Vte=me({name:zte,setup(e,{slots:t,attrs:n}){var s;const o=Ze(KD,void 0),r=nX((s=o.setForwardRef)!=null?s:on);return()=>{var a;const i=(a=t.default)==null?void 0:a.call(t,n);if(!i||i.length>1)return null;const l=SR(i);return l?$t(Vl(l,n),[[r]]):null}}});function SR(e){if(!e)return null;const t=e;for(let n=0;n<t.length;n++){const s=t[n];if(rn(s))switch(s.type){case er:continue;case Rf:return AI(s);case it:return SR(s.children);default:return s}return AI(s)}return null}function AI(e){return He("span",{class:"el-only-child__content"},[e])}const Wte=(e,t)=>{const{placement:n,strategy:s,popperOptions:o}=e,r=Ut(ut({placement:n,strategy:s},o),{modifiers:Hte(e)});return Ute(r,t),Gte(r,o==null?void 0:o.modifiers),r},xR=e=>{let t=null;return e?("getBoundingClientRect"in e||e instanceof HTMLElement?t=e:t=e.$el,t):null};function Hte(e){const{offset:t,gpuAcceleration:n,fallbackPlacements:s}=e;return[{name:"offset",options:{offset:[0,t!=null?t:12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:s!=null?s:[]}},{name:"computeStyles",options:{gpuAcceleration:n,adaptive:n}}]}function Ute(e,{arrowEl:t,arrowOffset:n}){e.modifiers.push({name:"arrow",options:{element:t,padding:n!=null?n:5}})}function Gte(e,t){t&&(e.modifiers=[...e.modifiers,...t!=null?t:[]])}const Kte=me({name:"ElPopperTrigger",components:{ElOnlyChild:Vte},inheritAttrs:!1,props:Ut(ut({},kR),{onMouseenter:Function,onMouseleave:Function,onClick:Function,onKeydown:Function,onFocus:Function,onBlur:Function,onContextmenu:Function,id:String,open:Boolean}),setup(e){const{triggerRef:t}=Ze(Yw,void 0);return tX(t),Oe(()=>e.virtualRef,n=>{n&&(t.value=xR(n))},{immediate:!0}),Oe(()=>t.value,(n,s)=>{n&&n instanceof HTMLElement&&["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(o=>{const r=e[o];r&&(n.addEventListener(o.slice(2).toLowerCase(),r),s==null||s.removeEventListener(o.slice(2).toLowerCase(),r))})},{immediate:!0}),{triggerRef:t}}});function jte(e,t,n,s,o,r){const a=re("el-only-child");return e.virtualTriggering?ce("v-if",!0):(T(),ve(a,Us({key:0},e.$attrs,{"aria-describedby":e.open?e.id:void 0}),{default:oe(()=>[_e(e.$slots,"default")]),_:3},16,["aria-describedby"]))}var qte=We(Kte,[["render",jte]]);const Xte=me({name:"ElPopperContent",props:CR,emits:["mouseenter","mouseleave"],setup(e){const{triggerRef:t,popperInstanceRef:n,contentRef:s}=Ze(Yw,void 0),o=L(null),r=L(null),a=L();zt(cR,{arrowRef:r,arrowOffset:a});const i=L(e.zIndex||is.nextZIndex()),l=_(()=>[{zIndex:je(i)},e.popperStyle]),u=_(()=>[{"el-popper":!0,"is-pure":e.pure,[`is-${e.effect}`]:!!e.effect},e.popperClass]),c=({referenceEl:f,popperContentEl:h,arrowEl:p})=>{const m=Wte(e,{arrowEl:p,arrowOffset:je(a)});return yR(f,h,m)},d=()=>{var f;(f=je(n))==null||f.update(),i.value=e.zIndex||is.nextZIndex()};return Mt(()=>{let f;Oe(()=>xR(e.referenceEl)||je(t),h=>{var p;if(f==null||f(),h){(p=n.value)==null||p.destroy();const m=je(o);s.value=m;const g=je(r),v=c({referenceEl:h,popperContentEl:je(o),arrowEl:g});n.value=v,f=Oe(()=>h.getBoundingClientRect(),()=>{d()},{immediate:!0})}else n.value=null},{immediate:!0})}),{popperContentRef:o,popperInstanceRef:n,contentStyle:l,contentClass:u,updatePopper:d}}});function Yte(e,t,n,s,o,r){return T(),B("div",{ref:"popperContentRef",style:nt(e.contentStyle),class:q(e.contentClass),role:"tooltip",onMouseenter:t[0]||(t[0]=a=>e.$emit("mouseenter",a)),onMouseleave:t[1]||(t[1]=a=>e.$emit("mouseleave",a))},[_e(e.$slots,"default")],38)}var Zte=We(Xte,[["render",Yte]]);const IR=Vt(Nee),Jte=me({name:"ElVisuallyHidden",props:{style:{type:[String,Object,Array]}},setup(e){return{computedStyle:_(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}])}}});function Qte(e,t,n,s,o,r){return T(),B("span",Us(e.$attrs,{style:e.computedStyle}),null,16)}var ene=We(Jte,[["render",Qte]]);const pi=ut(ut(ut({},Qq),CR),gt({appendTo:{type:Je([String,Object]),default:Zq},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Je(Boolean),default:null},transition:{type:String,default:"el-fade-in-linear"},teleported:{type:Boolean,default:!0},disabled:{type:Boolean}})),o$=Ut(ut({},kR),{disabled:Boolean,trigger:{type:[String,Array],default:"hover"}}),tne=gt({openDelay:{type:Number},visibleArrow:{type:Boolean,default:void 0},hideAfter:{type:Number,default:200},showArrow:{type:Boolean,default:!0}}),Ug=Symbol("elTooltip"),nne=me({name:"ElTooltipContent",components:{ElPopperContent:Zte,ElVisuallyHidden:ene},inheritAttrs:!1,props:pi,setup(e){const t=L(null),n=L(!1),s=L(!1),o=L(!1),{controlled:r,id:a,open:i,trigger:l,onClose:u,onOpen:c,onShow:d,onHide:f}=Ze(Ug,void 0),h=_(()=>e.persistent),p=_(()=>je(h)?!0:je(i)),m=_(()=>e.disabled?!1:je(i)),g=_(()=>{var E;return(E=e.style)!=null?E:{}}),v=_(()=>!je(i));Yq(u);const b=()=>{f()},$=()=>{if(je(r))return!0},y=ks($,()=>{e.enterable&&je(l)==="hover"&&c()}),w=ks($,()=>{je(l)==="hover"&&u()}),C=()=>{var E,x;(x=(E=t.value)==null?void 0:E.updatePopper)==null||x.call(E)},k=()=>{d()};let S;return Oe(()=>je(i),E=>{E?S=Ey(_(()=>{var x;return(x=t.value)==null?void 0:x.popperContentRef}),()=>{if(je(r))return;je(l)!=="hover"&&u()}):S==null||S()},{flush:"post"}),{ariaHidden:v,entering:s,leaving:o,id:a,intermediateOpen:n,contentStyle:g,contentRef:t,shouldRender:p,shouldShow:m,open:i,onAfterShow:k,onBeforeEnter:C,onContentEnter:y,onContentLeave:w,onTransitionLeave:b}}});function sne(e,t,n,s,o,r){const a=re("el-visually-hidden"),i=re("el-popper-content");return T(),ve(Tg,{disabled:!e.teleported,to:e.appendTo},[le(cs,{name:e.transition,onAfterLeave:e.onTransitionLeave,onBeforeEnter:e.onBeforeEnter,onAfterEnter:e.onAfterShow},{default:oe(()=>[e.shouldRender?$t((T(),ve(i,Us({key:0,ref:"contentRef"},e.$attrs,{"aria-hidden":e.ariaHidden,"boundaries-padding":e.boundariesPadding,"fallback-placements":e.fallbackPlacements,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,placement:e.placement,"popper-options":e.popperOptions,strategy:e.strategy,effect:e.effect,enterable:e.enterable,pure:e.pure,"popper-class":e.popperClass,"popper-style":[e.popperStyle,e.contentStyle],"reference-el":e.referenceEl,"z-index":e.zIndex,onMouseenter:e.onContentEnter,onMouseleave:e.onContentLeave}),{default:oe(()=>[_e(e.$slots,"default"),le(a,{id:e.id,role:"tooltip"},{default:oe(()=>[jt(Fe(e.ariaLabel),1)]),_:1},8,["id"])]),_:3},16,["aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","z-index","onMouseenter","onMouseleave"])),[[Qt,e.shouldShow]]):ce("v-if",!0)]),_:3},8,["name","onAfterLeave","onBeforeEnter","onAfterEnter"])],8,["disabled","to"])}var one=We(nne,[["render",sne]]);const rne=(e,t)=>Nt(e)?e.includes(t):e===t,Iu=(e,t,n)=>s=>{rne(je(e),t)&&n(s)},ane=me({name:"ElTooltipTrigger",components:{ElPopperTrigger:qte},props:o$,setup(e){const{controlled:t,id:n,open:s,onOpen:o,onClose:r,onToggle:a}=Ze(Ug,void 0),i=L(null),l=()=>{if(je(t)||e.disabled)return!0},u=Js(e,"trigger"),c=ks(l,Iu(u,"hover",o)),d=ks(l,Iu(u,"hover",r)),f=ks(l,Iu(u,"click",v=>{v.button===0&&a(v)})),h=ks(l,Iu(u,"focus",o)),p=ks(l,Iu(u,"focus",r)),m=ks(l,Iu(u,"contextmenu",v=>{v.preventDefault(),a(v)})),g=ks(l,v=>{const{code:b}=v;(b===Qe.enter||b===Qe.space)&&a(v)});return{onBlur:p,onContextMenu:m,onFocus:h,onMouseenter:c,onMouseleave:d,onClick:f,onKeydown:g,open:s,id:n,triggerRef:i}}});function ine(e,t,n,s,o,r){const a=re("el-popper-trigger");return T(),ve(a,{id:e.id,"virtual-ref":e.virtualRef,open:e.open,"virtual-triggering":e.virtualTriggering,class:"el-tooltip__trigger",onBlur:e.onBlur,onClick:e.onClick,onContextmenu:e.onContextMenu,onFocus:e.onFocus,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave,onKeydown:e.onKeydown},{default:oe(()=>[_e(e.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"])}var lne=We(ane,[["render",ine]]);const{useModelToggleProps:une,useModelToggle:cne,useModelToggleEmits:dne}=VD("visible"),fne=me({name:"ElTooltip",components:{ElPopper:IR,ElPopperArrow:Bte,ElTooltipContent:one,ElTooltipTrigger:lne},props:ut(ut(ut(ut(ut({},une),pi),o$),$R),tne),emits:[...dne,"show","hide"],setup(e,{emit:t}){Jq();const n=_(()=>(!lf(e.openDelay),e.openDelay||e.showAfter)),s=_(()=>(!lf(e.visibleArrow),Gr(e.visibleArrow)?e.visibleArrow:e.showArrow)),o=UD(),r=L(null),a=()=>{var h;const p=je(r);p&&((h=p.popperInstanceRef)==null||h.update())},i=L(!1),{show:l,hide:u}=cne({indicator:i}),{onOpen:c,onClose:d}=eX({showAfter:n,hideAfter:Js(e,"hideAfter"),open:l,close:u}),f=_(()=>Gr(e.visible));return zt(Ug,{controlled:f,id:o,open:Nf(i),trigger:Js(e,"trigger"),onOpen:c,onClose:d,onToggle:()=>{je(i)?d():c()},onShow:()=>{t("show")},onHide:()=>{t("hide")},updatePopper:a}),{compatShowAfter:n,compatShowArrow:s,popperRef:r,open:i,hide:u,updatePopper:a,onOpen:c,onClose:d}}}),hne=["innerHTML"],pne={key:1};function mne(e,t,n,s,o,r){const a=re("el-tooltip-trigger"),i=re("el-popper-arrow"),l=re("el-tooltip-content"),u=re("el-popper");return T(),ve(u,{ref:"popperRef"},{default:oe(()=>[le(a,{disabled:e.disabled,trigger:e.trigger,"virtual-ref":e.virtualRef,"virtual-triggering":e.virtualTriggering},{default:oe(()=>[e.$slots.default?_e(e.$slots,"default",{key:0}):ce("v-if",!0)]),_:3},8,["disabled","trigger","virtual-ref","virtual-triggering"]),le(l,{"aria-label":e.ariaLabel,"boundaries-padding":e.boundariesPadding,content:e.content,disabled:e.disabled,effect:e.effect,enterable:e.enterable,"fallback-placements":e.fallbackPlacements,"hide-after":e.hideAfter,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,persistent:e.persistent,"popper-class":e.popperClass,"popper-style":e.popperStyle,placement:e.placement,"popper-options":e.popperOptions,pure:e.pure,"raw-content":e.rawContent,"reference-el":e.referenceEl,"show-after":e.compatShowAfter,strategy:e.strategy,teleported:e.teleported,transition:e.transition,"z-index":e.zIndex},{default:oe(()=>[_e(e.$slots,"content",{},()=>[e.rawContent?(T(),B("span",{key:0,innerHTML:e.content},null,8,hne)):(T(),B("span",pne,Fe(e.content),1))]),e.compatShowArrow?(T(),ve(i,{key:0,"arrow-offset":e.arrowOffset},null,8,["arrow-offset"])):ce("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","show-after","strategy","teleported","transition","z-index"])]),_:3},512)}var gne=We(fne,[["render",mne]]);const Bo=Vt(gne),vne=me({name:"ElAutocomplete",components:{ElTooltip:Bo,ElInput:Tr,ElScrollbar:Ya,ElIcon:_t,Loading:Xa},directives:{clickoutside:Pi},inheritAttrs:!1,props:{valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:String,validator:e=>["top","top-start","top-end","bottom","bottom-start","bottom-end"].includes(e),default:"bottom-start"},fetchSuggestions:{type:Function,default:on},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},emits:[Ft,"input","change","focus","blur","clear","select"],setup(e,t){const n=Dt("autocomplete"),s=Rw(),o=L([]),r=L(-1),a=L(""),i=L(!1),l=L(!1),u=L(!1),c=L(null),d=L(null),f=L(null),h=_(()=>n.b(String(af()))),p=_(()=>(Nt(o.value)&&o.value.length>0||u.value)&&i.value),m=_(()=>!e.hideLoading&&u.value),g=()=>{dt(()=>{p.value&&(a.value=`${c.value.$el.offsetWidth}px`)})};Mt(()=>{c.value.inputOrTextarea.setAttribute("role","textbox"),c.value.inputOrTextarea.setAttribute("aria-autocomplete","list"),c.value.inputOrTextarea.setAttribute("aria-controls","id"),c.value.inputOrTextarea.setAttribute("aria-activedescendant",`${h.value}-item-${r.value}`)});const v=D=>{l.value||(u.value=!0,e.fetchSuggestions(D,M=>{u.value=!1,!l.value&&(Nt(M)?(o.value=M,r.value=e.highlightFirstItem?0:-1):oo("ElAutocomplete","autocomplete suggestions must be an array"))}))},b=_o(v,e.debounce),$=D=>{if(t.emit("input",D),t.emit(Ft,D),l.value=!1,!e.triggerOnFocus&&!D){l.value=!0,o.value=[];return}b(D)},y=D=>{t.emit("change",D)},w=D=>{i.value=!0,t.emit("focus",D),e.triggerOnFocus&&b(String(e.modelValue))},C=D=>{t.emit("blur",D)},k=()=>{i.value=!1,t.emit(Ft,""),t.emit("clear")},S=()=>{p.value&&r.value>=0&&r.value<o.value.length?N(o.value[r.value]):e.selectWhenUnmatched&&(t.emit("select",{value:e.modelValue}),dt(()=>{o.value=[],r.value=-1}))},E=()=>{i.value=!1},x=()=>{var D;(D=c.value)==null||D.focus()},N=D=>{t.emit("input",D[e.valueKey]),t.emit(Ft,D[e.valueKey]),t.emit("select",D),dt(()=>{o.value=[],r.value=-1})};return{attrs:s,suggestions:o,highlightedIndex:r,dropdownWidth:a,activated:i,suggestionDisabled:l,loading:u,inputRef:c,regionRef:d,popper:f,id:h,suggestionVisible:p,suggestionLoading:m,getData:v,handleInput:$,handleChange:y,handleFocus:w,handleBlur:C,handleClear:k,handleKeyEnter:S,close:E,focus:x,select:N,highlight:D=>{if(!p.value||u.value)return;if(D<0){r.value=-1;return}D>=o.value.length&&(D=o.value.length-1);const M=d.value.querySelector(`.${n.be("suggestion","wrap")}`),R=M.querySelectorAll(`.${n.be("suggestion","list")} li`)[D],P=M.scrollTop,{offsetTop:V,scrollHeight:G}=R;V+G>P+M.clientHeight&&(M.scrollTop+=G),V<P&&(M.scrollTop-=G),r.value=D,c.value.inputOrTextarea.setAttribute("aria-activedescendant",`${h.value}-item-${r.value}`)},onSuggestionShow:g,ns:n}}}),bne=["aria-expanded","aria-owns"],yne={key:0},wne=["id","aria-selected","onClick"];function $ne(e,t,n,s,o,r){const a=re("el-input"),i=re("loading"),l=re("el-icon"),u=re("el-scrollbar"),c=re("el-tooltip"),d=wo("clickoutside");return T(),ve(c,{ref:"popper",visible:e.suggestionVisible,"onUpdate:visible":t[2]||(t[2]=f=>e.suggestionVisible=f),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":`${e.ns.e("popper")} ${e.popperClass}`,"append-to-body":e.popperAppendToBody,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${e.ns.namespace.value}-zoom-in-top`,persistent:"",onShow:e.onSuggestionShow},{content:oe(()=>[W("div",{ref:"regionRef",class:q([e.ns.b("suggestion"),e.ns.is("loading",e.suggestionLoading)]),style:nt({minWidth:e.dropdownWidth,outline:"none"}),role:"region"},[le(u,{id:e.id,tag:"ul","wrap-class":e.ns.be("suggestion","wrap"),"view-class":e.ns.be("suggestion","list"),role:"listbox"},{default:oe(()=>[e.suggestionLoading?(T(),B("li",yne,[le(l,{class:"is-loading"},{default:oe(()=>[le(i)]),_:1})])):(T(!0),B(it,{key:1},Yt(e.suggestions,(f,h)=>(T(),B("li",{id:`${e.id}-item-${h}`,key:h,class:q({highlighted:e.highlightedIndex===h}),role:"option","aria-selected":e.highlightedIndex===h,onClick:p=>e.select(f)},[_e(e.$slots,"default",{item:f},()=>[jt(Fe(f[e.valueKey]),1)])],10,wne))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:oe(()=>[$t((T(),B("div",{class:q([e.ns.b(),e.$attrs.class]),style:nt(e.$attrs.style),role:"combobox","aria-haspopup":"listbox","aria-expanded":e.suggestionVisible,"aria-owns":e.id},[le(a,Us({ref:"inputRef"},e.attrs,{"model-value":e.modelValue,onInput:e.handleInput,onChange:e.handleChange,onFocus:e.handleFocus,onBlur:e.handleBlur,onClear:e.handleClear,onKeydown:[t[0]||(t[0]=Ht(ht(f=>e.highlight(e.highlightedIndex-1),["prevent"]),["up"])),t[1]||(t[1]=Ht(ht(f=>e.highlight(e.highlightedIndex+1),["prevent"]),["down"])),Ht(e.handleKeyEnter,["enter"]),Ht(e.close,["tab"])]}),tf({_:2},[e.$slots.prepend?{name:"prepend",fn:oe(()=>[_e(e.$slots,"prepend")])}:void 0,e.$slots.append?{name:"append",fn:oe(()=>[_e(e.$slots,"append")])}:void 0,e.$slots.prefix?{name:"prefix",fn:oe(()=>[_e(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:oe(()=>[_e(e.$slots,"suffix")])}:void 0]),1040,["model-value","onInput","onChange","onFocus","onBlur","onClear","onKeydown"])],14,bne)),[[d,e.close]])]),_:3},8,["visible","placement","popper-class","append-to-body","transition","onShow"])}var rm=We(vne,[["render",$ne]]);rm.install=e=>{e.component(rm.name,rm)};const Cne=rm,kne=Cne,Sne=gt({size:{type:[Number,String],values:["large","default","small"],default:"default",validator:e=>typeof e=="number"},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Je([String,Object])},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Je(String),default:"cover"}}),xne={error:e=>e instanceof Event},Ine=me({name:"ElAvatar",components:{ElIcon:_t},props:Sne,emits:xne,setup(e,{emit:t}){const n=Dt("avatar"),s=L(!1),o=_(()=>{const{size:l,icon:u,shape:c}=e,d=[n.b()];return Xt(l)&&d.push(n.m(l)),u&&d.push(n.m("icon")),c&&d.push(n.m(c)),d}),r=_(()=>{const{size:l}=e;return wn(l)?{"--el-avatar-size":Wa(l)}:void 0}),a=_(()=>({objectFit:e.fit}));Oe(()=>e.src,()=>s.value=!1);function i(l){s.value=!0,t("error",l)}return{hasLoadError:s,avatarClass:o,sizeStyle:r,fitStyle:a,handleError:i}}}),Ene=["src","alt","srcset"];function Tne(e,t,n,s,o,r){const a=re("el-icon");return T(),B("span",{class:q(e.avatarClass),style:nt(e.sizeStyle)},[(e.src||e.srcSet)&&!e.hasLoadError?(T(),B("img",{key:0,src:e.src,alt:e.alt,srcset:e.srcSet,style:nt(e.fitStyle),onError:t[0]||(t[0]=(...i)=>e.handleError&&e.handleError(...i))},null,44,Ene)):e.icon?(T(),ve(a,{key:1},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1})):_e(e.$slots,"default",{key:2})],6)}var Nne=We(Ine,[["render",Tne]]);const Ane=Vt(Nne),DI=e=>Math.pow(e,3),Dne=e=>e<.5?DI(e*2)/2:1-DI((1-e)*2)/2,Rne={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},_ne={click:e=>e instanceof MouseEvent},RI="ElBacktop",One=me({name:RI,components:{ElIcon:_t,CaretTop:uY},props:Rne,emits:_ne,setup(e,{emit:t}){const n=Dt("backtop"),s=uo(document.documentElement),o=uo(document),r=L(!1),a=_(()=>`${e.bottom}px`),i=_(()=>`${e.right}px`),l=()=>{if(!s.value)return;const f=Date.now(),h=s.value.scrollTop,p=()=>{if(!s.value)return;const m=(Date.now()-f)/500;m<1?(s.value.scrollTop=h*(1-Dne(m)),requestAnimationFrame(p)):s.value.scrollTop=0};requestAnimationFrame(p)},u=()=>{s.value&&(r.value=s.value.scrollTop>=e.visibilityHeight)},c=f=>{l(),t("click",f)},d=TD(u,300);return Mt(()=>{var f;e.target&&(s.value=(f=document.querySelector(e.target))!=null?f:void 0,s.value||oo(RI,`target is not existed: ${e.target}`),o.value=s.value),Ss(o,"scroll",d)}),{visible:r,styleBottom:a,styleRight:i,handleClick:c,ns:n}}});function Mne(e,t,n,s,o,r){const a=re("caret-top"),i=re("el-icon");return T(),ve(cs,{name:`${e.ns.namespace.value}-fade-in`},{default:oe(()=>[e.visible?(T(),B("div",{key:0,style:nt({right:e.styleRight,bottom:e.styleBottom}),class:q(e.ns.b()),onClick:t[0]||(t[0]=ht((...l)=>e.handleClick&&e.handleClick(...l),["stop"]))},[_e(e.$slots,"default",{},()=>[le(i,{class:q(e.ns.e("icon"))},{default:oe(()=>[le(a)]),_:1},8,["class"])])],6)):ce("v-if",!0)]),_:3},8,["name"])}var Fne=We(One,[["render",Mne]]);const Pne=Vt(Fne),Lne=gt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Bne=me({name:"ElBadge",props:Lne,setup(e){const t=Dt("badge"),n=_(()=>e.isDot?"":typeof e.value=="number"&&typeof e.max=="number"?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return{ns:t,content:n}}}),zne=["textContent"];function Vne(e,t,n,s,o,r){return T(),B("div",{class:q(e.ns.b())},[_e(e.$slots,"default"),le(cs,{name:"el-zoom-in-center"},{default:oe(()=>[$t(W("sup",{class:q([e.ns.e("content"),e.ns.em("content",e.type),e.ns.is("fixed",!!e.$slots.default),e.ns.is("dot",e.isDot)]),textContent:Fe(e.content)},null,10,zne),[[Qt,!e.hidden&&(e.content||e.content==="0"||e.isDot)]])]),_:1})],2)}var Wne=We(Bne,[["render",Vne]]);const ER=Vt(Wne),Hne=gt({separator:{type:String,default:"/"},separatorIcon:{type:Je([String,Object]),default:""}}),Une=me({name:"ElBreadcrumb",props:Hne,setup(e){const t=Dt("breadcrumb"),n=L();return zt(tD,e),Mt(()=>{const s=n.value.querySelectorAll(`.${t.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),{ns:t,breadcrumb:n}}});function Gne(e,t,n,s,o,r){return T(),B("div",{ref:"breadcrumb",class:q(e.ns.b()),"aria-label":"Breadcrumb",role:"navigation"},[_e(e.$slots,"default")],2)}var Kne=We(Une,[["render",Gne]]);const jne=gt({to:{type:Je([String,Object]),default:""},replace:{type:Boolean,default:!1}}),qne="ElBreadcrumbItem",Xne=me({name:qne,components:{ElIcon:_t},props:jne,setup(e){const n=Lt().appContext.config.globalProperties.$router,s=Ze(tD,void 0),o=Dt("breadcrumb"),r=L();return Mt(()=>{r.value.setAttribute("role","link"),r.value.addEventListener("click",()=>{!e.to||!n||(e.replace?n.replace(e.to):n.push(e.to))})}),{ns:o,link:r,separator:s==null?void 0:s.separator,separatorIcon:s==null?void 0:s.separatorIcon}}});function Yne(e,t,n,s,o,r){const a=re("el-icon");return T(),B("span",{class:q(e.ns.e("item"))},[W("span",{ref:"link",class:q([e.ns.e("inner"),e.ns.is("link",!!e.to)]),role:"link"},[_e(e.$slots,"default")],2),e.separatorIcon?(T(),ve(a,{key:0,class:q(e.ns.e("separator"))},{default:oe(()=>[(T(),ve(en(e.separatorIcon)))]),_:1},8,["class"])):(T(),B("span",{key:1,class:q(e.ns.e("separator")),role:"presentation"},Fe(e.separator),3))],2)}var TR=We(Xne,[["render",Yne]]);const Zne=Vt(Kne,{BreadcrumbItem:TR}),Jne=Jn(TR);function eo(e,t){Qne(e)&&(e="100%");var n=ese(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Tp(e){return Math.min(1,Math.max(0,e))}function Qne(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function ese(e){return typeof e=="string"&&e.indexOf("%")!==-1}function NR(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Np(e){return e<=1?Number(e)*100+"%":e}function kl(e){return e.length===1?"0"+e:String(e)}function tse(e,t,n){return{r:eo(e,255)*255,g:eo(t,255)*255,b:eo(n,255)*255}}function _I(e,t,n){e=eo(e,255),t=eo(t,255),n=eo(n,255);var s=Math.max(e,t,n),o=Math.min(e,t,n),r=0,a=0,i=(s+o)/2;if(s===o)a=0,r=0;else{var l=s-o;switch(a=i>.5?l/(2-s-o):l/(s+o),s){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4;break}r/=6}return{h:r,s:a,l:i}}function gb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function nse(e,t,n){var s,o,r;if(e=eo(e,360),t=eo(t,100),n=eo(n,100),t===0)o=n,r=n,s=n;else{var a=n<.5?n*(1+t):n+t-n*t,i=2*n-a;s=gb(i,a,e+1/3),o=gb(i,a,e),r=gb(i,a,e-1/3)}return{r:s*255,g:o*255,b:r*255}}function OI(e,t,n){e=eo(e,255),t=eo(t,255),n=eo(n,255);var s=Math.max(e,t,n),o=Math.min(e,t,n),r=0,a=s,i=s-o,l=s===0?0:i/s;if(s===o)r=0;else{switch(s){case e:r=(t-n)/i+(t<n?6:0);break;case t:r=(n-e)/i+2;break;case n:r=(e-t)/i+4;break}r/=6}return{h:r,s:l,v:a}}function sse(e,t,n){e=eo(e,360)*6,t=eo(t,100),n=eo(n,100);var s=Math.floor(e),o=e-s,r=n*(1-t),a=n*(1-o*t),i=n*(1-(1-o)*t),l=s%6,u=[n,a,r,r,i,n][l],c=[i,n,n,a,r,r][l],d=[r,r,i,n,n,a][l];return{r:u*255,g:c*255,b:d*255}}function MI(e,t,n,s){var o=[kl(Math.round(e).toString(16)),kl(Math.round(t).toString(16)),kl(Math.round(n).toString(16))];return s&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function ose(e,t,n,s,o){var r=[kl(Math.round(e).toString(16)),kl(Math.round(t).toString(16)),kl(Math.round(n).toString(16)),kl(rse(s))];return o&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function rse(e){return Math.round(parseFloat(e)*255).toString(16)}function FI(e){return Uo(e)/255}function Uo(e){return parseInt(e,16)}function ase(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var Wy={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ise(e){var t={r:0,g:0,b:0},n=1,s=null,o=null,r=null,a=!1,i=!1;return typeof e=="string"&&(e=cse(e)),typeof e=="object"&&(Da(e.r)&&Da(e.g)&&Da(e.b)?(t=tse(e.r,e.g,e.b),a=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Da(e.h)&&Da(e.s)&&Da(e.v)?(s=Np(e.s),o=Np(e.v),t=sse(e.h,s,o),a=!0,i="hsv"):Da(e.h)&&Da(e.s)&&Da(e.l)&&(s=Np(e.s),r=Np(e.l),t=nse(e.h,s,r),a=!0,i="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=NR(n),{ok:a,format:e.format||i,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var lse="[-\\+]?\\d+%?",use="[-\\+]?\\d*\\.\\d+%?",gi="(?:"+use+")|(?:"+lse+")",vb="[\\s|\\(]+("+gi+")[,|\\s]+("+gi+")[,|\\s]+("+gi+")\\s*\\)?",bb="[\\s|\\(]+("+gi+")[,|\\s]+("+gi+")[,|\\s]+("+gi+")[,|\\s]+("+gi+")\\s*\\)?",Br={CSS_UNIT:new RegExp(gi),rgb:new RegExp("rgb"+vb),rgba:new RegExp("rgba"+bb),hsl:new RegExp("hsl"+vb),hsla:new RegExp("hsla"+bb),hsv:new RegExp("hsv"+vb),hsva:new RegExp("hsva"+bb),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function cse(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(Wy[e])e=Wy[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Br.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Br.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Br.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=Br.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Br.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=Br.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Br.hex8.exec(e),n?{r:Uo(n[1]),g:Uo(n[2]),b:Uo(n[3]),a:FI(n[4]),format:t?"name":"hex8"}:(n=Br.hex6.exec(e),n?{r:Uo(n[1]),g:Uo(n[2]),b:Uo(n[3]),format:t?"name":"hex"}:(n=Br.hex4.exec(e),n?{r:Uo(n[1]+n[1]),g:Uo(n[2]+n[2]),b:Uo(n[3]+n[3]),a:FI(n[4]+n[4]),format:t?"name":"hex8"}:(n=Br.hex3.exec(e),n?{r:Uo(n[1]+n[1]),g:Uo(n[2]+n[2]),b:Uo(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function Da(e){return Boolean(Br.CSS_UNIT.exec(String(e)))}var kd=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var s;if(t instanceof e)return t;typeof t=="number"&&(t=ase(t)),this.originalInput=t;var o=ise(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=n.format)!==null&&s!==void 0?s:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,s,o,r=t.r/255,a=t.g/255,i=t.b/255;return r<=.03928?n=r/12.92:n=Math.pow((r+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*n+.7152*s+.0722*o},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=NR(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var t=OI(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=OI(this.r,this.g,this.b),n=Math.round(t.h*360),s=Math.round(t.s*100),o=Math.round(t.v*100);return this.a===1?"hsv("+n+", "+s+"%, "+o+"%)":"hsva("+n+", "+s+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHsl=function(){var t=_I(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=_I(this.r,this.g,this.b),n=Math.round(t.h*360),s=Math.round(t.s*100),o=Math.round(t.l*100);return this.a===1?"hsl("+n+", "+s+"%, "+o+"%)":"hsla("+n+", "+s+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHex=function(t){return t===void 0&&(t=!1),MI(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),ose(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb("+t+", "+n+", "+s+")":"rgba("+t+", "+n+", "+s+", "+this.roundA+")"},e.prototype.toPercentageRgb=function(){var t=function(n){return Math.round(eo(n,255)*100)+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(eo(n,255)*100)};return this.a===1?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+MI(this.r,this.g,this.b,!1),n=0,s=Object.entries(Wy);n<s.length;n++){var o=s[n],r=o[0],a=o[1];if(t===a)return r}return!1},e.prototype.toString=function(t){var n=Boolean(t);t=t!=null?t:this.format;var s=!1,o=this.a<1&&this.a>=0,r=!n&&o&&(t.startsWith("hex")||t==="name");return r?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(s=this.toRgbString()),t==="prgb"&&(s=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(s=this.toHexString()),t==="hex3"&&(s=this.toHexString(!0)),t==="hex4"&&(s=this.toHex8String(!0)),t==="hex8"&&(s=this.toHex8String()),t==="name"&&(s=this.toName()),t==="hsl"&&(s=this.toHslString()),t==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Tp(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Tp(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Tp(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Tp(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),s=(n.h+t)%360;return n.h=s<0?360+s:s,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var s=this.toRgb(),o=new e(t).toRgb(),r=n/100,a={r:(o.r-s.r)*r+s.r,g:(o.g-s.g)*r+s.g,b:(o.b-s.b)*r+s.b,a:(o.a-s.a)*r+s.a};return new e(a)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var s=this.toHsl(),o=360/n,r=[this];for(s.h=(s.h-(o*t>>1)+720)%360;--t;)s.h=(s.h+o)%360,r.push(new e(s));return r},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),s=n.h,o=n.s,r=n.v,a=[],i=1/t;t--;)a.push(new e({h:s,s:o,v:r})),r=(r+i)%1;return a},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),s=new e(t).toRgb();return new e({r:s.r+(n.r-s.r)*n.a,g:s.g+(n.g-s.g)*n.a,b:s.b+(n.b-s.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),s=n.h,o=[this],r=360/t,a=1;a<t;a++)o.push(new e({h:(s+a*r)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();const Hy=["default","primary","success","warning","info","danger","text",""],dse=["button","submit","reset"],Uy=gt({size:Pg,disabled:Boolean,type:{type:String,values:Hy,default:""},icon:{type:Je([String,Object]),default:""},nativeType:{type:String,values:dse,default:"button"},loading:Boolean,loadingIcon:{type:Je([String,Object]),default:()=>Xa},plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,autoInsertSpace:{type:Boolean,default:void 0}}),fse={click:e=>e instanceof MouseEvent},hse=me({name:"ElButton",components:{ElIcon:_t,Loading:Xa},props:Uy,emits:fse,setup(e,{emit:t,slots:n}){const s=L(),o=Ze(eD,void 0),r=Bc("button"),a=Dt("button"),i=_(()=>{var g,v,b;return(b=(v=e.autoInsertSpace)!=null?v:(g=r.value)==null?void 0:g.autoInsertSpace)!=null?b:!1}),l=_(()=>{var g;const v=(g=n.default)==null?void 0:g.call(n);if(i.value&&(v==null?void 0:v.length)===1){const b=v[0];if((b==null?void 0:b.type)===Rf){const $=b.children;return/^\p{Unified_Ideograph}{2}$/u.test($)}}return!1}),{form:u}=zc(),c=ds(_(()=>o==null?void 0:o.size)),d=Mf(),f=_(()=>e.type||(o==null?void 0:o.type)||""),h=_(()=>k7(`--el-color-${e.type}`).value),p=_(()=>{let g={};const v=e.color||h.value;if(v){const b=new kd(v).shade(10).toString();if(e.plain)g={"--el-button-bg-color":new kd(v).tint(90).toString(),"--el-button-text-color":v,"--el-button-hover-text-color":"var(--el-color-white)","--el-button-hover-bg-color":v,"--el-button-hover-border-color":v,"--el-button-active-bg-color":b,"--el-button-active-text-color":"var(--el-color-white)","--el-button-active-border-color":b};else{const $=new kd(v).tint(20).toString();g={"--el-button-bg-color":v,"--el-button-border-color":v,"--el-button-hover-bg-color":$,"--el-button-hover-border-color":$,"--el-button-active-bg-color":b,"--el-button-active-border-color":b}}if(d.value){const $=new kd(v).tint(50).toString();g["--el-button-disabled-bg-color"]=$,g["--el-button-disabled-border-color"]=$}}return g});return{buttonRef:s,buttonStyle:p,buttonSize:c,buttonType:f,buttonDisabled:d,shouldAddSpace:l,handleClick:g=>{e.nativeType==="reset"&&(u==null||u.resetFields()),t("click",g)},ns:a}}}),pse=["disabled","autofocus","type"];function mse(e,t,n,s,o,r){const a=re("el-icon");return T(),B("button",{ref:"buttonRef",class:q([e.ns.b(),e.ns.m(e.buttonType),e.ns.m(e.buttonSize),e.ns.is("disabled",e.buttonDisabled),e.ns.is("loading",e.loading),e.ns.is("plain",e.plain),e.ns.is("round",e.round),e.ns.is("circle",e.circle)]),disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType,style:nt(e.buttonStyle),onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},[e.loading?(T(),B(it,{key:0},[e.$slots.loading?_e(e.$slots,"loading",{key:0}):(T(),ve(a,{key:1,class:q(e.ns.is("loading"))},{default:oe(()=>[(T(),ve(en(e.loadingIcon)))]),_:1},8,["class"]))],2112)):e.icon?(T(),ve(a,{key:1},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1})):ce("v-if",!0),e.$slots.default?(T(),B("span",{key:2,class:q({[e.ns.em("text","expand")]:e.shouldAddSpace})},[_e(e.$slots,"default")],2)):ce("v-if",!0)],14,pse)}var gse=We(hse,[["render",mse]]);const vse={size:Uy.size,type:Uy.type},bse=me({name:"ElButtonGroup",props:vse,setup(e){return zt(eD,Cn({size:Js(e,"size"),type:Js(e,"type")})),{ns:Dt("button")}}});function yse(e,t,n,s,o,r){return T(),B("div",{class:q(`${e.ns.b("group")}`)},[_e(e.$slots,"default")],2)}var AR=We(bse,[["render",yse]]);const Ia=Vt(gse,{ButtonGroup:AR}),DR=Jn(AR);var RR={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){var n=1e3,s=6e4,o=36e5,r="millisecond",a="second",i="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},$=function(D,M,F){var R=String(D);return!R||R.length>=M?D:""+Array(M+1-R.length).join(F)+D},y={s:$,z:function(D){var M=-D.utcOffset(),F=Math.abs(M),R=Math.floor(F/60),P=F%60;return(M<=0?"+":"-")+$(R,2,"0")+":"+$(P,2,"0")},m:function D(M,F){if(M.date()<F.date())return-D(F,M);var R=12*(F.year()-M.year())+(F.month()-M.month()),P=M.clone().add(R,d),V=F-P<0,G=M.clone().add(R+(V?-1:1),d);return+(-(R+(F-P)/(V?P-G:G-P))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:d,y:h,w:c,d:u,D:p,h:l,m:i,s:a,ms:r,Q:f}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},w="en",C={};C[w]=b;var k=function(D){return D instanceof N},S=function(D,M,F){var R;if(!D)return w;if(typeof D=="string")C[D]&&(R=D),M&&(C[D]=M,R=D);else{var P=D.name;C[P]=D,R=P}return!F&&R&&(w=R),R||!F&&w},E=function(D,M){if(k(D))return D.clone();var F=typeof M=="object"?M:{};return F.date=D,F.args=arguments,new N(F)},x=y;x.l=S,x.i=k,x.w=function(D,M){return E(D,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var N=function(){function D(F){this.$L=S(F.locale,null,!0),this.parse(F)}var M=D.prototype;return M.parse=function(F){this.$d=function(R){var P=R.date,V=R.utc;if(P===null)return new Date(NaN);if(x.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var G=P.match(g);if(G){var se=G[2]-1||0,ke=(G[7]||"0").substring(0,3);return V?new Date(Date.UTC(G[1],se,G[3]||1,G[4]||0,G[5]||0,G[6]||0,ke)):new Date(G[1],se,G[3]||1,G[4]||0,G[5]||0,G[6]||0,ke)}}return new Date(P)}(F),this.$x=F.x||{},this.init()},M.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},M.$utils=function(){return x},M.isValid=function(){return this.$d.toString()!==m},M.isSame=function(F,R){var P=E(F);return this.startOf(R)<=P&&P<=this.endOf(R)},M.isAfter=function(F,R){return E(F)<this.startOf(R)},M.isBefore=function(F,R){return this.endOf(R)<E(F)},M.$g=function(F,R,P){return x.u(F)?this[R]:this.set(P,F)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(F,R){var P=this,V=!!x.u(R)||R,G=x.p(F),se=function(ie,xe){var Le=x.w(P.$u?Date.UTC(P.$y,xe,ie):new Date(P.$y,xe,ie),P);return V?Le:Le.endOf(u)},ke=function(ie,xe){return x.w(P.toDate()[ie].apply(P.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(xe)),P)},te=this.$W,pe=this.$M,ae=this.$D,K="set"+(this.$u?"UTC":"");switch(G){case h:return V?se(1,0):se(31,11);case d:return V?se(1,pe):se(0,pe+1);case c:var X=this.$locale().weekStart||0,Y=(te<X?te+7:te)-X;return se(V?ae-Y:ae+(6-Y),pe);case u:case p:return ke(K+"Hours",0);case l:return ke(K+"Minutes",1);case i:return ke(K+"Seconds",2);case a:return ke(K+"Milliseconds",3);default:return this.clone()}},M.endOf=function(F){return this.startOf(F,!1)},M.$set=function(F,R){var P,V=x.p(F),G="set"+(this.$u?"UTC":""),se=(P={},P[u]=G+"Date",P[p]=G+"Date",P[d]=G+"Month",P[h]=G+"FullYear",P[l]=G+"Hours",P[i]=G+"Minutes",P[a]=G+"Seconds",P[r]=G+"Milliseconds",P)[V],ke=V===u?this.$D+(R-this.$W):R;if(V===d||V===h){var te=this.clone().set(p,1);te.$d[se](ke),te.init(),this.$d=te.set(p,Math.min(this.$D,te.daysInMonth())).$d}else se&&this.$d[se](ke);return this.init(),this},M.set=function(F,R){return this.clone().$set(F,R)},M.get=function(F){return this[x.p(F)]()},M.add=function(F,R){var P,V=this;F=Number(F);var G=x.p(R),se=function(pe){var ae=E(V);return x.w(ae.date(ae.date()+Math.round(pe*F)),V)};if(G===d)return this.set(d,this.$M+F);if(G===h)return this.set(h,this.$y+F);if(G===u)return se(1);if(G===c)return se(7);var ke=(P={},P[i]=s,P[l]=o,P[a]=n,P)[G]||1,te=this.$d.getTime()+F*ke;return x.w(te,this)},M.subtract=function(F,R){return this.add(-1*F,R)},M.format=function(F){var R=this,P=this.$locale();if(!this.isValid())return P.invalidDate||m;var V=F||"YYYY-MM-DDTHH:mm:ssZ",G=x.z(this),se=this.$H,ke=this.$m,te=this.$M,pe=P.weekdays,ae=P.months,K=function(xe,Le,Be,Pe){return xe&&(xe[Le]||xe(R,V))||Be[Le].substr(0,Pe)},X=function(xe){return x.s(se%12||12,xe,"0")},Y=P.meridiem||function(xe,Le,Be){var Pe=xe<12?"AM":"PM";return Be?Pe.toLowerCase():Pe},ie={YY:String(this.$y).slice(-2),YYYY:this.$y,M:te+1,MM:x.s(te+1,2,"0"),MMM:K(P.monthsShort,te,ae,3),MMMM:K(ae,te),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:K(P.weekdaysMin,this.$W,pe,2),ddd:K(P.weekdaysShort,this.$W,pe,3),dddd:pe[this.$W],H:String(se),HH:x.s(se,2,"0"),h:X(1),hh:X(2),a:Y(se,ke,!0),A:Y(se,ke,!1),m:String(ke),mm:x.s(ke,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:G};return V.replace(v,function(xe,Le){return Le||ie[xe]||G.replace(":","")})},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(F,R,P){var V,G=x.p(R),se=E(F),ke=(se.utcOffset()-this.utcOffset())*s,te=this-se,pe=x.m(this,se);return pe=(V={},V[h]=pe/12,V[d]=pe,V[f]=pe/3,V[c]=(te-ke)/6048e5,V[u]=(te-ke)/864e5,V[l]=te/o,V[i]=te/s,V[a]=te/n,V)[G]||te,P?pe:x.a(pe)},M.daysInMonth=function(){return this.endOf(d).$D},M.$locale=function(){return C[this.$L]},M.locale=function(F,R){if(!F)return this.$L;var P=this.clone(),V=S(F,R,!0);return V&&(P.$L=V),P},M.clone=function(){return x.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},D}(),A=N.prototype;return E.prototype=A,[["$ms",r],["$s",a],["$m",i],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function(D){A[D[1]]=function(M){return this.$g(M,D[0],D[1])}}),E.extend=function(D,M){return D.$i||(D(M,N,E),D.$i=!0),E},E.locale=S,E.isDayjs=k,E.unix=function(D){return E(1e3*D)},E.en=C[w],E.Ls=C,E.p={},E})})(RR);var Ct=RR.exports,_R={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){return function(n,s,o){var r=s.prototype,a=function(d){return d&&(d.indexOf?d:d.s)},i=function(d,f,h,p,m){var g=d.name?d:d.$locale(),v=a(g[f]),b=a(g[h]),$=v||b.map(function(w){return w.substr(0,p)});if(!m)return $;var y=g.weekStart;return $.map(function(w,C){return $[(C+(y||0))%7]})},l=function(){return o.Ls[o.locale()]},u=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,g){return m||g.slice(1)})}(d.formats[f.toUpperCase()])},c=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):i(d,"months")},monthsShort:function(f){return f?f.format("MMM"):i(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):i(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):i(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):i(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return u(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return c.bind(this)()},o.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return o.weekdays()},weekdaysShort:function(){return o.weekdaysShort()},weekdaysMin:function(){return o.weekdaysMin()},months:function(){return o.months()},monthsShort:function(){return o.monthsShort()},longDateFormat:function(f){return u(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},o.months=function(){return i(l(),"months")},o.monthsShort=function(){return i(l(),"monthsShort","months",3)},o.weekdays=function(d){return i(l(),"weekdays",null,null,d)},o.weekdaysShort=function(d){return i(l(),"weekdaysShort","weekdays",3,d)},o.weekdaysMin=function(d){return i(l(),"weekdaysMin","weekdays",2,d)}}})})(_R);var OR=_R.exports,MR={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,r=/\d\d?/,a=/\d*[^\s\d-_:/()]+/,i={},l=function(m){return(m=+m)+(m>68?1900:2e3)},u=function(m){return function(g){this[m]=+g}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var v=g.match(/([+-]|\d\d)/g),b=60*v[1]+(+v[2]||0);return b===0?0:v[0]==="+"?-b:b}(m)}],d=function(m){var g=i[m];return g&&(g.indexOf?g:g.s.concat(g.f))},f=function(m,g){var v,b=i.meridiem;if(b){for(var $=1;$<=24;$+=1)if(m.indexOf(b($,0,g))>-1){v=$>12;break}}else v=m===(g?"pm":"PM");return v},h={A:[a,function(m){this.afternoon=f(m,!1)}],a:[a,function(m){this.afternoon=f(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[o,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[r,u("seconds")],ss:[r,u("seconds")],m:[r,u("minutes")],mm:[r,u("minutes")],H:[r,u("hours")],h:[r,u("hours")],HH:[r,u("hours")],hh:[r,u("hours")],D:[r,u("day")],DD:[o,u("day")],Do:[a,function(m){var g=i.ordinal,v=m.match(/\d+/);if(this.day=v[0],g)for(var b=1;b<=31;b+=1)g(b).replace(/\[|\]/g,"")===m&&(this.day=b)}],M:[r,u("month")],MM:[o,u("month")],MMM:[a,function(m){var g=d("months"),v=(d("monthsShort")||g.map(function(b){return b.substr(0,3)})).indexOf(m)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[a,function(m){var g=d("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[o,function(m){this.year=l(m)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function p(m){var g,v;g=m,v=i&&i.formats;for(var b=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,x,N){var A=N&&N.toUpperCase();return x||v[N]||n[N]||v[A].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(D,M,F){return M||F.slice(1)})})).match(s),$=b.length,y=0;y<$;y+=1){var w=b[y],C=h[w],k=C&&C[0],S=C&&C[1];b[y]=S?{regex:k,parser:S}:w.replace(/^\[|\]$/g,"")}return function(E){for(var x={},N=0,A=0;N<$;N+=1){var D=b[N];if(typeof D=="string")A+=D.length;else{var M=D.regex,F=D.parser,R=E.substr(A),P=M.exec(R)[0];F.call(x,P),E=E.replace(P,"")}}return function(V){var G=V.afternoon;if(G!==void 0){var se=V.hours;G?se<12&&(V.hours+=12):se===12&&(V.hours=0),delete V.afternoon}}(x),x}}return function(m,g,v){v.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var b=g.prototype,$=b.parse;b.parse=function(y){var w=y.date,C=y.utc,k=y.args;this.$u=C;var S=k[1];if(typeof S=="string"){var E=k[2]===!0,x=k[3]===!0,N=E||x,A=k[2];x&&(A=k[2]),i=this.$locale(),!E&&A&&(i=v.Ls[A]),this.$d=function(R,P,V){try{if(["x","X"].indexOf(P)>-1)return new Date((P==="X"?1e3:1)*R);var G=p(P)(R),se=G.year,ke=G.month,te=G.day,pe=G.hours,ae=G.minutes,K=G.seconds,X=G.milliseconds,Y=G.zone,ie=new Date,xe=te||(se||ke?1:ie.getDate()),Le=se||ie.getFullYear(),Be=0;se&&!ke||(Be=ke>0?ke-1:ie.getMonth());var Pe=pe||0,U=ae||0,Q=K||0,H=X||0;return Y?new Date(Date.UTC(Le,Be,xe,Pe,U,Q,H+60*Y.offset*1e3)):V?new Date(Date.UTC(Le,Be,xe,Pe,U,Q,H)):new Date(Le,Be,xe,Pe,U,Q,H)}catch{return new Date("")}}(w,S,C),this.init(),A&&A!==!0&&(this.$L=this.locale(A).$L),N&&w!=this.format(S)&&(this.$d=new Date("")),i={}}else if(S instanceof Array)for(var D=S.length,M=1;M<=D;M+=1){k[1]=S[M-1];var F=v.apply(this,k);if(F.isValid()){this.$d=F.$d,this.$L=F.$L,this.init();break}M===D&&(this.$d=new Date(""))}else $.call(this,y)}}})})(MR);var r$=MR.exports;const Gy="HH:mm:ss",Sd="YYYY-MM-DD",wse={date:Sd,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${Sd} ${Gy}`,monthrange:"YYYY-MM",daterange:Sd,datetimerange:`${Sd} ${Gy}`};var $se=d7;function Cse(e,t){return $se(e,t)}var jr=Cse;const Oo=e=>["","large","default","small"].includes(e),FR=e=>["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"].includes(e),a$={id:{type:[Array,String]},name:{type:[Array,String],default:""},popperClass:{type:String,default:""},format:{type:String},valueFormat:{type:String},type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Ha},editable:{type:Boolean,default:!0},prefixIcon:{type:[String,Object],default:""},size:{type:String,validator:Oo},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},modelValue:{type:[Date,Array,String,Number],default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:[Date,Array]},defaultTime:{type:[Date,Array]},isRange:{type:Boolean,default:!1},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean},PI=function(e,t){const n=e instanceof Date,s=t instanceof Date;return n&&s?e.getTime()===t.getTime():!n&&!s?e===t:!1},LI=function(e,t){const n=e instanceof Array,s=t instanceof Array;return n&&s?e.length!==t.length?!1:e.every((o,r)=>PI(o,t[r])):!n&&!s?PI(e,t):!1},BI=function(e,t,n){const s=uf(t)||t==="x"?Ct(e).locale(n):Ct(e,t).locale(n);return s.isValid()?s:void 0},zI=function(e,t,n){return uf(t)?e:t==="x"?+e:Ct(e).locale(n).format(t)},kse=me({name:"Picker",components:{ElInput:Tr,ElTooltip:Bo,ElIcon:_t},props:a$,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change"],setup(e,t){const{lang:n}=kn(),s=Ze(Lo,{}),o=Ze(oa,{}),r=Ze("ElPopperOptions",{}),a=L(),i=L(),l=L(!1),u=L(!1),c=L(null);Oe(l,J=>{var Ne;J?c.value=e.modelValue:(te.value=null,dt(()=>{d(e.modelValue)}),t.emit("blur"),ae(),e.validateEvent&&((Ne=o.validate)==null||Ne.call(o,"blur")))});const d=(J,Ne)=>{var Ie;(Ne||!LI(J,c.value))&&(t.emit("change",J),e.validateEvent&&((Ie=o.validate)==null||Ie.call(o,"change")))},f=J=>{if(!LI(e.modelValue,J)){let Ne;Array.isArray(J)?Ne=J.map(Ie=>zI(Ie,e.valueFormat,n.value)):J&&(Ne=zI(J,e.valueFormat,n.value)),t.emit("update:modelValue",J&&Ne,n.value)}},h=_(()=>{if(i.value){const J=P.value?i.value:i.value.$el;return Array.from(J.querySelectorAll("input"))}return[]}),p=_(()=>h==null?void 0:h.value[0]),m=_(()=>h==null?void 0:h.value[1]),g=(J,Ne,Ie)=>{const fe=h.value;!fe.length||(!Ie||Ie==="min"?(fe[0].setSelectionRange(J,Ne),fe[0].focus()):Ie==="max"&&(fe[1].setSelectionRange(J,Ne),fe[1].focus()))},v=(J="",Ne=!1)=>{l.value=Ne;let Ie;Array.isArray(J)?Ie=J.map(fe=>fe.toDate()):Ie=J&&J.toDate(),te.value=null,f(Ie)},b=(J=!0)=>{let Ne=p.value;!J&&P.value&&(Ne=m.value),Ne&&Ne.focus()},$=J=>{e.readonly||w.value||l.value||(l.value=!0,t.emit("focus",J))},y=()=>{var J;(J=a.value)==null||J.onClose(),ae()},w=_(()=>e.disabled||s.disabled),C=_(()=>{let J;if(M.value?Q.value.getDefaultValue&&(J=Q.value.getDefaultValue()):Array.isArray(e.modelValue)?J=e.modelValue.map(Ne=>BI(Ne,e.valueFormat,n.value)):J=BI(e.modelValue,e.valueFormat,n.value),Q.value.getRangeAvailableTime){const Ne=Q.value.getRangeAvailableTime(J);jr(Ne,J)||(J=Ne,f(Array.isArray(J)?J.map(Ie=>Ie.toDate()):J.toDate()))}return Array.isArray(J)&&J.some(Ne=>!Ne)&&(J=[]),J}),k=_(()=>{if(!Q.value.panelReady)return;const J=X(C.value);if(Array.isArray(te.value))return[te.value[0]||J&&J[0]||"",te.value[1]||J&&J[1]||""];if(te.value!==null)return te.value;if(!(!E.value&&M.value)&&!(!l.value&&M.value))return J?x.value?J.join(", "):J:""}),S=_(()=>e.type.includes("time")),E=_(()=>e.type.startsWith("time")),x=_(()=>e.type==="dates"),N=_(()=>e.prefixIcon||(S.value?XD:JX)),A=L(!1),D=J=>{e.readonly||w.value||A.value&&(J.stopPropagation(),f(null),d(null,!0),A.value=!1,l.value=!1,Q.value.handleClear&&Q.value.handleClear())},M=_(()=>!e.modelValue||Array.isArray(e.modelValue)&&!e.modelValue.length),F=()=>{e.readonly||w.value||!M.value&&e.clearable&&(A.value=!0)},R=()=>{A.value=!1},P=_(()=>e.type.indexOf("range")>-1),V=ds(),G=_(()=>{var J,Ne;return(Ne=(J=a.value)==null?void 0:J.popperRef)==null?void 0:Ne.contentRef}),se=_(()=>{var J,Ne;return(Ne=(J=je(a))==null?void 0:J.popperRef)==null?void 0:Ne.contentRef}),ke=_(()=>{var J;return je(P)?je(i):(J=je(i))==null?void 0:J.$el});Ey(ke,J=>{const Ne=je(se),Ie=je(ke);Ne&&(J.target===Ne||J.composedPath().includes(Ne))||J.target===Ie||J.composedPath().includes(Ie)||(l.value=!1)});const te=L(null),pe=()=>{if(te.value){const J=K(k.value);J&&Y(J)&&(f(Array.isArray(J)?J.map(Ne=>Ne.toDate()):J.toDate()),te.value=null)}te.value===""&&(f(null),d(null),te.value=null)},ae=()=>{h.value.forEach(J=>J.blur())},K=J=>J?Q.value.parseUserInput(J):null,X=J=>J?Q.value.formatToString(J):null,Y=J=>Q.value.isValidValue(J),ie=J=>{const Ne=J.code;if(Ne===Qe.esc){l.value=!1,J.stopPropagation();return}if(Ne===Qe.tab){P.value?setTimeout(()=>{h.value.indexOf(document.activeElement)===-1&&(l.value=!1,ae())},0):(pe(),l.value=!1,J.stopPropagation());return}if(Ne===Qe.enter||Ne===Qe.numpadEnter){(te.value===null||te.value===""||Y(K(k.value)))&&(pe(),l.value=!1),J.stopPropagation();return}if(te.value){J.stopPropagation();return}Q.value.handleKeydown&&Q.value.handleKeydown(J)},xe=J=>{te.value=J},Le=J=>{te.value?te.value=[J.target.value,te.value[1]]:te.value=[J.target.value,null]},Be=J=>{te.value?te.value=[te.value[0],J.target.value]:te.value=[null,J.target.value]},Pe=()=>{const J=K(te.value&&te.value[0]);if(J&&J.isValid()){te.value=[X(J),k.value[1]];const Ne=[J,C.value&&C.value[1]];Y(Ne)&&(f(Ne),te.value=null)}},U=()=>{const J=K(te.value&&te.value[1]);if(J&&J.isValid()){te.value=[k.value[0],X(J)];const Ne=[C.value&&C.value[0],J];Y(Ne)&&(f(Ne),te.value=null)}},Q=L({}),H=J=>{Q.value[J[0]]=J[1],Q.value.panelReady=!0},ne=J=>{t.emit("calendar-change",J)},ye=(J,Ne,Ie)=>{t.emit("panel-change",J,Ne,Ie)};return zt("EP_PICKER_BASE",{props:e}),{elPopperOptions:r,isDatesPicker:x,handleEndChange:U,handleStartChange:Pe,handleStartInput:Le,handleEndInput:Be,onUserInput:xe,handleChange:pe,handleKeydown:ie,popperPaneRef:G,onClickOutside:Ey,pickerSize:V,isRangeInput:P,onMouseLeave:R,onMouseEnter:F,onClearIconClick:D,showClose:A,triggerIcon:N,onPick:v,handleFocus:$,handleBlur:y,pickerVisible:l,pickerActualVisible:u,displayValue:k,parsedValue:C,setSelectionRange:g,refPopper:a,inputRef:i,pickerDisabled:w,onSetPickerOption:H,onCalendarChange:ne,onPanelChange:ye,focus:b}}}),Sse=["id","name","placeholder","value","disabled","readonly"],xse={class:"el-range-separator"},Ise=["id","name","placeholder","value","disabled","readonly"];function Ese(e,t,n,s,o,r){const a=re("el-icon"),i=re("el-input"),l=re("el-tooltip");return T(),ve(l,Us({ref:"refPopper",visible:e.pickerVisible,"onUpdate:visible":t[17]||(t[17]=u=>e.pickerVisible=u),effect:"light",pure:"",trigger:"click"},e.$attrs,{"append-to-body":"",transition:"el-zoom-in-top","popper-class":`el-picker__popper ${e.popperClass}`,"popper-options":e.elPopperOptions,"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onShow:t[18]||(t[18]=u=>e.pickerActualVisible=!0),onHide:t[19]||(t[19]=u=>e.pickerActualVisible=!1)}),{default:oe(()=>[e.isRangeInput?(T(),B("div",{key:1,ref:"inputRef",class:q(["el-date-editor el-range-editor el-input__inner",["el-date-editor--"+e.type,e.pickerSize?`el-range-editor--${e.pickerSize}`:"",e.pickerDisabled?"is-disabled":"",e.pickerVisible?"is-active":"",e.$attrs.class||void 0]]),style:nt(e.$attrs.style||void 0),onClick:t[7]||(t[7]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onMouseenter:t[8]||(t[8]=(...u)=>e.onMouseEnter&&e.onMouseEnter(...u)),onMouseleave:t[9]||(t[9]=(...u)=>e.onMouseLeave&&e.onMouseLeave(...u)),onKeydown:t[10]||(t[10]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))},[e.triggerIcon?(T(),ve(a,{key:0,class:"el-input__icon el-range__icon",onClick:e.handleFocus},{default:oe(()=>[(T(),ve(en(e.triggerIcon)))]),_:1},8,["onClick"])):ce("v-if",!0),W("input",{id:e.id&&e.id[0],autocomplete:"off",name:e.name&&e.name[0],placeholder:e.startPlaceholder,value:e.displayValue&&e.displayValue[0],disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,class:"el-range-input",onInput:t[1]||(t[1]=(...u)=>e.handleStartInput&&e.handleStartInput(...u)),onChange:t[2]||(t[2]=(...u)=>e.handleStartChange&&e.handleStartChange(...u)),onFocus:t[3]||(t[3]=(...u)=>e.handleFocus&&e.handleFocus(...u))},null,40,Sse),_e(e.$slots,"range-separator",{},()=>[W("span",xse,Fe(e.rangeSeparator),1)]),W("input",{id:e.id&&e.id[1],autocomplete:"off",name:e.name&&e.name[1],placeholder:e.endPlaceholder,value:e.displayValue&&e.displayValue[1],disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,class:"el-range-input",onFocus:t[4]||(t[4]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onInput:t[5]||(t[5]=(...u)=>e.handleEndInput&&e.handleEndInput(...u)),onChange:t[6]||(t[6]=(...u)=>e.handleEndChange&&e.handleEndChange(...u))},null,40,Ise),e.clearIcon?(T(),ve(a,{key:1,class:q(["el-input__icon el-range__close-icon",{"el-range__close-icon--hidden":!e.showClose}]),onClick:e.onClearIconClick},{default:oe(()=>[(T(),ve(en(e.clearIcon)))]),_:1},8,["class","onClick"])):ce("v-if",!0)],38)):(T(),ve(i,{key:0,id:e.id,ref:"inputRef","model-value":e.displayValue,name:e.name,size:e.pickerSize,disabled:e.pickerDisabled,placeholder:e.placeholder,class:q(["el-date-editor",["el-date-editor--"+e.type,e.$attrs.class||void 0]]),style:nt(e.$attrs.style||void 0),readonly:!e.editable||e.readonly||e.isDatesPicker||e.type==="week",onInput:e.onUserInput,onFocus:e.handleFocus,onKeydown:e.handleKeydown,onChange:e.handleChange,onMouseenter:e.onMouseEnter,onMouseleave:e.onMouseLeave,onClick:t[0]||(t[0]=ht(()=>{},["stop"]))},{prefix:oe(()=>[e.triggerIcon?(T(),ve(a,{key:0,class:"el-input__icon",onClick:e.handleFocus},{default:oe(()=>[(T(),ve(en(e.triggerIcon)))]),_:1},8,["onClick"])):ce("v-if",!0)]),suffix:oe(()=>[e.showClose&&e.clearIcon?(T(),ve(a,{key:0,class:"el-input__icon clear-icon",onClick:e.onClearIconClick},{default:oe(()=>[(T(),ve(en(e.clearIcon)))]),_:1},8,["onClick"])):ce("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","onInput","onFocus","onKeydown","onChange","onMouseenter","onMouseleave"]))]),content:oe(()=>[_e(e.$slots,"default",{visible:e.pickerVisible,actualVisible:e.pickerActualVisible,parsedValue:e.parsedValue,format:e.format,unlinkPanels:e.unlinkPanels,type:e.type,defaultValue:e.defaultValue,onPick:t[11]||(t[11]=(...u)=>e.onPick&&e.onPick(...u)),onSelectRange:t[12]||(t[12]=(...u)=>e.setSelectionRange&&e.setSelectionRange(...u)),onSetPickerOption:t[13]||(t[13]=(...u)=>e.onSetPickerOption&&e.onSetPickerOption(...u)),onCalendarChange:t[14]||(t[14]=(...u)=>e.onCalendarChange&&e.onCalendarChange(...u)),onPanelChange:t[15]||(t[15]=(...u)=>e.onPanelChange&&e.onPanelChange(...u)),onMousedown:t[16]||(t[16]=ht(()=>{},["stop"]))})]),_:3},16,["visible","popper-class","popper-options"])}var PR=We(kse,[["render",Ese]]);const yb=(e,t,n)=>{const s=[],o=t&&n();for(let r=0;r<e;r++)s[r]=o?o.includes(r):!1;return s},wb=e=>e.map((t,n)=>t||n).filter(t=>t!==!0),LR=(e,t,n)=>({getHoursList:(a,i)=>yb(24,e,()=>e(a,i)),getMinutesList:(a,i,l)=>yb(60,t,()=>t(a,i,l)),getSecondsList:(a,i,l,u)=>yb(60,n,()=>n(a,i,l,u))}),BR=(e,t,n)=>{const{getHoursList:s,getMinutesList:o,getSecondsList:r}=LR(e,t,n);return{getAvailableHours:(u,c)=>wb(s(u,c)),getAvailableMinutes:(u,c,d)=>wb(o(u,c,d)),getAvailableSeconds:(u,c,d,f)=>wb(r(u,c,d,f))}},zR=e=>{const t=L(e.parsedValue);return Oe(()=>e.visible,n=>{n||(t.value=e.parsedValue)}),t},Tse=me({directives:{repeatClick:tR},components:{ElScrollbar:Ya,ElIcon:_t,ArrowUp:Ff,ArrowDown:ou},props:{role:{type:String,required:!0},spinnerDate:{type:Object,required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function}},emits:["change","select-range","set-option"],setup(e,t){let n=!1;const s=_o(ae=>{n=!1,S(ae)},200),o=L(null),r=L(null),a=L(null),i=L(null),l={hours:r,minutes:a,seconds:i},u=_(()=>{const ae=["hours","minutes","seconds"];return e.showSeconds?ae:ae.slice(0,2)}),c=_(()=>e.spinnerDate.hour()),d=_(()=>e.spinnerDate.minute()),f=_(()=>e.spinnerDate.second()),h=_(()=>({hours:c,minutes:d,seconds:f})),p=_(()=>ke(e.role)),m=_(()=>te(c.value,e.role)),g=_(()=>pe(c.value,d.value,e.role)),v=_(()=>({hours:p,minutes:m,seconds:g})),b=_(()=>{const ae=c.value;return[ae>0?ae-1:void 0,ae,ae<23?ae+1:void 0]}),$=_(()=>{const ae=d.value;return[ae>0?ae-1:void 0,ae,ae<59?ae+1:void 0]}),y=_(()=>{const ae=f.value;return[ae>0?ae-1:void 0,ae,ae<59?ae+1:void 0]}),w=_(()=>({hours:b,minutes:$,seconds:y})),C=ae=>{if(!!!e.amPmMode)return"";const X=e.amPmMode==="A";let Y=ae<12?" am":" pm";return X&&(Y=Y.toUpperCase()),Y},k=ae=>{ae==="hours"?t.emit("select-range",0,2):ae==="minutes"?t.emit("select-range",3,5):ae==="seconds"&&t.emit("select-range",6,8),o.value=ae},S=ae=>{x(ae,h.value[ae].value)},E=()=>{S("hours"),S("minutes"),S("seconds")},x=(ae,K)=>{if(e.arrowControl)return;const X=l[ae];X&&X.$el&&(X.$el.querySelector(".el-scrollbar__wrap").scrollTop=Math.max(0,K*N(ae)))},N=ae=>l[ae].$el.querySelector("li").offsetHeight,A=()=>{M(1)},D=()=>{M(-1)},M=ae=>{o.value||k("hours");const K=o.value;let X=h.value[K].value;const Y=o.value==="hours"?24:60;X=(X+ae+Y)%Y,F(K,X),x(K,X),dt(()=>k(o.value))},F=(ae,K)=>{if(!v.value[ae].value[K])switch(ae){case"hours":t.emit("change",e.spinnerDate.hour(K).minute(d.value).second(f.value));break;case"minutes":t.emit("change",e.spinnerDate.hour(c.value).minute(K).second(f.value));break;case"seconds":t.emit("change",e.spinnerDate.hour(c.value).minute(d.value).second(K));break}},R=(ae,{value:K,disabled:X})=>{X||(F(ae,K),k(ae),x(ae,K))},P=ae=>{n=!0,s(ae);const K=Math.min(Math.round((l[ae].$el.querySelector(".el-scrollbar__wrap").scrollTop-(V(ae)*.5-10)/N(ae)+3)/N(ae)),ae==="hours"?23:59);F(ae,K)},V=ae=>l[ae].$el.offsetHeight,G=()=>{const ae=K=>{l[K]&&l[K].$el&&(l[K].$el.querySelector(".el-scrollbar__wrap").onscroll=()=>{P(K)})};ae("hours"),ae("minutes"),ae("seconds")};Mt(()=>{dt(()=>{!e.arrowControl&&G(),E(),e.role==="start"&&k("hours")})});const se=(ae,K)=>{l[K]=ae};t.emit("set-option",[`${e.role}_scrollDown`,M]),t.emit("set-option",[`${e.role}_emitSelectRange`,k]);const{getHoursList:ke,getMinutesList:te,getSecondsList:pe}=LR(e.disabledHours,e.disabledMinutes,e.disabledSeconds);return Oe(()=>e.spinnerDate,()=>{n||E()}),{setRef:se,spinnerItems:u,currentScrollbar:o,hours:c,minutes:d,seconds:f,hoursList:p,minutesList:m,arrowHourList:b,arrowMinuteList:$,arrowSecondList:y,getAmPmFlag:C,emitSelectRange:k,adjustCurrentSpinner:S,typeItemHeight:N,listHoursRef:r,listMinutesRef:a,listSecondsRef:i,onIncreaseClick:A,onDecreaseClick:D,handleClick:R,secondsList:g,timePartsMap:h,arrowListMap:w,listMap:v}}}),Nse=["onClick"],Ase=["onMouseenter"],Dse={class:"el-time-spinner__list"};function Rse(e,t,n,s,o,r){const a=re("el-scrollbar"),i=re("arrow-up"),l=re("el-icon"),u=re("arrow-down"),c=wo("repeat-click");return T(),B("div",{class:q(["el-time-spinner",{"has-seconds":e.showSeconds}])},[e.arrowControl?ce("v-if",!0):(T(!0),B(it,{key:0},Yt(e.spinnerItems,d=>(T(),ve(a,{key:d,ref_for:!0,ref:f=>e.setRef(f,d),class:"el-time-spinner__wrapper","wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul",onMouseenter:f=>e.emitSelectRange(d),onMousemove:f=>e.adjustCurrentSpinner(d)},{default:oe(()=>[(T(!0),B(it,null,Yt(e.listMap[d].value,(f,h)=>(T(),B("li",{key:h,class:q(["el-time-spinner__item",{active:h===e.timePartsMap[d].value,disabled:f}]),onClick:p=>e.handleClick(d,{value:h,disabled:f})},[d==="hours"?(T(),B(it,{key:0},[jt(Fe(("0"+(e.amPmMode?h%12||12:h)).slice(-2))+Fe(e.getAmPmFlag(h)),1)],2112)):(T(),B(it,{key:1},[jt(Fe(("0"+h).slice(-2)),1)],2112))],10,Nse))),128))]),_:2},1032,["onMouseenter","onMousemove"]))),128)),e.arrowControl?(T(!0),B(it,{key:1},Yt(e.spinnerItems,d=>(T(),B("div",{key:d,class:"el-time-spinner__wrapper is-arrow",onMouseenter:f=>e.emitSelectRange(d)},[$t((T(),ve(l,{class:"el-time-spinner__arrow arrow-up"},{default:oe(()=>[le(i)]),_:1})),[[c,e.onDecreaseClick]]),$t((T(),ve(l,{class:"el-time-spinner__arrow arrow-down"},{default:oe(()=>[le(u)]),_:1})),[[c,e.onIncreaseClick]]),W("ul",Dse,[(T(!0),B(it,null,Yt(e.arrowListMap[d].value,(f,h)=>(T(),B("li",{key:h,class:q(["el-time-spinner__item",{active:f===e.timePartsMap[d].value,disabled:e.listMap[d].value[f]}])},[typeof f=="number"?(T(),B(it,{key:0},[d==="hours"?(T(),B(it,{key:0},[jt(Fe(("0"+(e.amPmMode?f%12||12:f)).slice(-2))+Fe(e.getAmPmFlag(f)),1)],2112)):(T(),B(it,{key:1},[jt(Fe(("0"+f).slice(-2)),1)],2112))],2112)):ce("v-if",!0)],2))),128))])],40,Ase))),128)):ce("v-if",!0)],2)}var VR=We(Tse,[["render",Rse]]);const _se=me({components:{TimeSpinner:VR},props:{visible:Boolean,actualVisible:{type:Boolean,default:void 0},datetimeRole:{type:String},parsedValue:{type:[Object,String]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,t){const{t:n,lang:s}=kn(),o=L([0,2]),r=zR(e),a=_(()=>e.actualVisible===void 0?"el-zoom-in-top":""),i=_(()=>e.format.includes("ss")),l=_(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),u=F=>{const R=Ct(F).locale(s.value),P=g(R);return R.isSame(P)},c=()=>{t.emit("pick",r.value,!1)},d=(F=!1,R=!1)=>{R||t.emit("pick",e.parsedValue,F)},f=F=>{if(!e.visible)return;const R=g(F).millisecond(0);t.emit("pick",R,!0)},h=(F,R)=>{t.emit("select-range",F,R),o.value=[F,R]},p=F=>{const R=[0,3].concat(i.value?[6]:[]),P=["hours","minutes"].concat(i.value?["seconds"]:[]),G=(R.indexOf(o.value[0])+F+R.length)%R.length;y.start_emitSelectRange(P[G])},m=F=>{const R=F.code;if(R===Qe.left||R===Qe.right){const P=R===Qe.left?-1:1;p(P),F.preventDefault();return}if(R===Qe.up||R===Qe.down){const P=R===Qe.up?-1:1;y.start_scrollDown(P),F.preventDefault();return}},g=F=>{const R={hour:A,minute:D,second:M};let P=F;return["hour","minute","second"].forEach(V=>{if(R[V]){let G;const se=R[V];V==="minute"?G=se(P.hour(),e.datetimeRole):V==="second"?G=se(P.hour(),P.minute(),e.datetimeRole):G=se(e.datetimeRole),G&&G.length&&!G.includes(P[V]())&&(P=P[V](G[0]))}}),P},v=F=>F?Ct(F,e.format).locale(s.value):null,b=F=>F?F.format(e.format):null,$=()=>Ct(N).locale(s.value);t.emit("set-picker-option",["isValidValue",u]),t.emit("set-picker-option",["formatToString",b]),t.emit("set-picker-option",["parseUserInput",v]),t.emit("set-picker-option",["handleKeydown",m]),t.emit("set-picker-option",["getRangeAvailableTime",g]),t.emit("set-picker-option",["getDefaultValue",$]);const y={},w=F=>{y[F[0]]=F[1]},C=Ze("EP_PICKER_BASE"),{arrowControl:k,disabledHours:S,disabledMinutes:E,disabledSeconds:x,defaultValue:N}=C.props,{getAvailableHours:A,getAvailableMinutes:D,getAvailableSeconds:M}=BR(S,E,x);return{transitionName:a,arrowControl:k,onSetOption:w,t:n,handleConfirm:d,handleChange:f,setSelectionRange:h,amPmMode:l,showSeconds:i,handleCancel:c,disabledHours:S,disabledMinutes:E,disabledSeconds:x}}}),Ose={key:0,class:"el-time-panel"},Mse={class:"el-time-panel__footer"};function Fse(e,t,n,s,o,r){const a=re("time-spinner");return T(),ve(cs,{name:e.transitionName},{default:oe(()=>[e.actualVisible||e.visible?(T(),B("div",Ose,[W("div",{class:q(["el-time-panel__content",{"has-seconds":e.showSeconds}])},[le(a,{ref:"spinner",role:e.datetimeRole||"start","arrow-control":e.arrowControl,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"spinner-date":e.parsedValue,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,onChange:e.handleChange,onSetOption:e.onSetOption,onSelectRange:e.setSelectionRange},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2),W("div",Mse,[W("button",{type:"button",class:"el-time-panel__btn cancel",onClick:t[0]||(t[0]=(...i)=>e.handleCancel&&e.handleCancel(...i))},Fe(e.t("el.datepicker.cancel")),1),W("button",{type:"button",class:"el-time-panel__btn confirm",onClick:t[1]||(t[1]=i=>e.handleConfirm())},Fe(e.t("el.datepicker.confirm")),1)])])):ce("v-if",!0)]),_:1},8,["name"])}var i$=We(_se,[["render",Fse]]),VI=Oc,Pse=yD,Lse=Mi,WI=VI?VI.isConcatSpreadable:void 0;function Bse(e){return Lse(e)||Pse(e)||!!(WI&&e&&e[WI])}var zse=Bse,Vse=Lw,Wse=zse;function WR(e,t,n,s,o){var r=-1,a=e.length;for(n||(n=Wse),o||(o=[]);++r<a;){var i=e[r];t>0&&n(i)?t>1?WR(i,t-1,n,s,o):Vse(o,i):s||(o[o.length]=i)}return o}var Hse=WR;function Use(e){return e}var HR=Use;function Gse(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Kse=Gse,jse=Kse,HI=Math.max;function qse(e,t,n){return t=HI(t===void 0?e.length-1:t,0),function(){for(var s=arguments,o=-1,r=HI(s.length-t,0),a=Array(r);++o<r;)a[o]=s[t+o];o=-1;for(var i=Array(t+1);++o<t;)i[o]=s[o];return i[t]=n(a),jse(e,this,i)}}var Xse=qse;function Yse(e){return function(){return e}}var Zse=Yse,Jse=su,Qse=function(){try{var e=Jse(Object,"defineProperty");return e({},"",{}),e}catch{}}(),UR=Qse,eoe=Zse,UI=UR,toe=HR,noe=UI?function(e,t){return UI(e,"toString",{configurable:!0,enumerable:!1,value:eoe(t),writable:!0})}:toe,soe=noe,ooe=800,roe=16,aoe=Date.now;function ioe(e){var t=0,n=0;return function(){var s=aoe(),o=roe-(s-n);if(n=s,o>0){if(++t>=ooe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var loe=ioe,uoe=soe,coe=loe,doe=coe(uoe),foe=doe,hoe=HR,poe=Xse,moe=foe;function goe(e,t){return moe(poe(e,t,hoe),e+"")}var voe=goe;function boe(e,t,n,s){for(var o=e.length,r=n+(s?1:-1);s?r--:++r<o;)if(t(e[r],r,e))return r;return-1}var yoe=boe;function woe(e){return e!==e}var $oe=woe;function Coe(e,t,n){for(var s=n-1,o=e.length;++s<o;)if(e[s]===t)return s;return-1}var koe=Coe,Soe=yoe,xoe=$oe,Ioe=koe;function Eoe(e,t,n){return t===t?Ioe(e,t,n):Soe(e,xoe,n)}var Toe=Eoe,Noe=Toe;function Aoe(e,t){var n=e==null?0:e.length;return!!n&&Noe(e,t,0)>-1}var Doe=Aoe;function Roe(e,t,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(n(t,e[s]))return!0;return!1}var _oe=Roe;function Ooe(){}var Moe=Ooe,$b=xD,Foe=Moe,Poe=Pw,Loe=1/0,Boe=$b&&1/Poe(new $b([,-0]))[1]==Loe?function(e){return new $b(e)}:Foe,zoe=Boe,Voe=fD,Woe=Doe,Hoe=_oe,Uoe=hD,Goe=zoe,Koe=Pw,joe=200;function qoe(e,t,n){var s=-1,o=Woe,r=e.length,a=!0,i=[],l=i;if(n)a=!1,o=Hoe;else if(r>=joe){var u=t?null:Goe(e);if(u)return Koe(u);a=!1,o=Uoe,l=new Voe}else l=t?[]:i;e:for(;++s<r;){var c=e[s],d=t?t(c):c;if(c=n||c!==0?c:0,a&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),i.push(c)}else o(l,d,n)||(l!==i&&l.push(d),i.push(c))}return i}var Xoe=qoe,Yoe=Ww,Zoe=Fi;function Joe(e){return Zoe(e)&&Yoe(e)}var Qoe=Joe,ere=Hse,tre=voe,nre=Xoe,sre=Qoe,ore=tre(function(e){return nre(ere(e,1,sre,!0))}),Cb=ore;const Eu=(e,t)=>{const n=[];for(let s=e;s<=t;s++)n.push(s);return n},rre=me({components:{TimeSpinner:VR},props:{visible:Boolean,actualVisible:Boolean,parsedValue:{type:[Array]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,t){const{t:n,lang:s}=kn(),o=_(()=>e.parsedValue[0]),r=_(()=>e.parsedValue[1]),a=zR(e),i=()=>{t.emit("pick",a.value,null)},l=_(()=>e.format.includes("ss")),u=_(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),c=L([]),d=L([]),f=(Y=!1)=>{t.emit("pick",[o.value,r.value],Y)},h=Y=>{g(Y.millisecond(0),r.value)},p=Y=>{g(o.value,Y.millisecond(0))},m=Y=>{const ie=Y.map(Le=>Ct(Le).locale(s.value)),xe=N(ie);return ie[0].isSame(xe[0])&&ie[1].isSame(xe[1])},g=(Y,ie)=>{t.emit("pick",[Y,ie],!0)},v=_(()=>o.value>r.value),b=L([0,2]),$=(Y,ie)=>{t.emit("select-range",Y,ie,"min"),b.value=[Y,ie]},y=_(()=>l.value?11:8),w=(Y,ie)=>{t.emit("select-range",Y,ie,"max"),b.value=[Y+y.value,ie+y.value]},C=Y=>{const ie=l.value?[0,3,6,11,14,17]:[0,3,8,11],xe=["hours","minutes"].concat(l.value?["seconds"]:[]),Be=(ie.indexOf(b.value[0])+Y+ie.length)%ie.length,Pe=ie.length/2;Be<Pe?G.start_emitSelectRange(xe[Be]):G.end_emitSelectRange(xe[Be-Pe])},k=Y=>{const ie=Y.code;if(ie===Qe.left||ie===Qe.right){const xe=ie===Qe.left?-1:1;C(xe),Y.preventDefault();return}if(ie===Qe.up||ie===Qe.down){const xe=ie===Qe.up?-1:1,Le=b.value[0]<y.value?"start":"end";G[`${Le}_scrollDown`](xe),Y.preventDefault();return}},S=(Y,ie)=>{const xe=pe?pe(Y):[],Le=Y==="start",Pe=(ie||(Le?r.value:o.value)).hour(),U=Le?Eu(Pe+1,23):Eu(0,Pe-1);return Cb(xe,U)},E=(Y,ie,xe)=>{const Le=ae?ae(Y,ie):[],Be=ie==="start",Pe=xe||(Be?r.value:o.value),U=Pe.hour();if(Y!==U)return Le;const Q=Pe.minute(),H=Be?Eu(Q+1,59):Eu(0,Q-1);return Cb(Le,H)},x=(Y,ie,xe,Le)=>{const Be=K?K(Y,ie,xe):[],Pe=xe==="start",U=Le||(Pe?r.value:o.value),Q=U.hour(),H=U.minute();if(Y!==Q||ie!==H)return Be;const ne=U.second(),ye=Pe?Eu(ne+1,59):Eu(0,ne-1);return Cb(Be,ye)},N=Y=>Y.map((ie,xe)=>F(Y[0],Y[1],xe===0?"start":"end")),{getAvailableHours:A,getAvailableMinutes:D,getAvailableSeconds:M}=BR(S,E,x),F=(Y,ie,xe)=>{const Le={hour:A,minute:D,second:M},Be=xe==="start";let Pe=Be?Y:ie;const U=Be?ie:Y;return["hour","minute","second"].forEach(Q=>{if(Le[Q]){let H;const ne=Le[Q];if(Q==="minute"?H=ne(Pe.hour(),xe,U):Q==="second"?H=ne(Pe.hour(),Pe.minute(),xe,U):H=ne(xe,U),H&&H.length&&!H.includes(Pe[Q]())){const ye=Be?0:H.length-1;Pe=Pe[Q](H[ye])}}}),Pe},R=Y=>Y?Array.isArray(Y)?Y.map(ie=>Ct(ie,e.format).locale(s.value)):Ct(Y,e.format).locale(s.value):null,P=Y=>Y?Array.isArray(Y)?Y.map(ie=>ie.format(e.format)):Y.format(e.format):null,V=()=>{if(Array.isArray(X))return X.map(ie=>Ct(ie).locale(s.value));const Y=Ct(X).locale(s.value);return[Y,Y.add(60,"m")]};t.emit("set-picker-option",["formatToString",P]),t.emit("set-picker-option",["parseUserInput",R]),t.emit("set-picker-option",["isValidValue",m]),t.emit("set-picker-option",["handleKeydown",k]),t.emit("set-picker-option",["getDefaultValue",V]),t.emit("set-picker-option",["getRangeAvailableTime",N]);const G={},se=Y=>{G[Y[0]]=Y[1]},ke=Ze("EP_PICKER_BASE"),{arrowControl:te,disabledHours:pe,disabledMinutes:ae,disabledSeconds:K,defaultValue:X}=ke.props;return{arrowControl:te,onSetOption:se,setMaxSelectionRange:w,setMinSelectionRange:$,btnConfirmDisabled:v,handleCancel:i,handleConfirm:f,t:n,showSeconds:l,minDate:o,maxDate:r,amPmMode:u,handleMinChange:h,handleMaxChange:p,minSelectableRange:c,maxSelectableRange:d,disabledHours_:S,disabledMinutes_:E,disabledSeconds_:x}}}),are={key:0,class:"el-time-range-picker el-picker-panel"},ire={class:"el-time-range-picker__content"},lre={class:"el-time-range-picker__cell"},ure={class:"el-time-range-picker__header"},cre={class:"el-time-range-picker__cell"},dre={class:"el-time-range-picker__header"},fre={class:"el-time-panel__footer"},hre=["disabled"];function pre(e,t,n,s,o,r){const a=re("time-spinner");return e.actualVisible?(T(),B("div",are,[W("div",ire,[W("div",lre,[W("div",ure,Fe(e.t("el.datepicker.startTime")),1),W("div",{class:q([{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl},"el-time-range-picker__body el-time-panel__content"])},[le(a,{ref:"minSpinner",role:"start","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.minDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMinChange,onSetOption:e.onSetOption,onSelectRange:e.setMinSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)]),W("div",cre,[W("div",dre,Fe(e.t("el.datepicker.endTime")),1),W("div",{class:q([{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl},"el-time-range-picker__body el-time-panel__content"])},[le(a,{ref:"maxSpinner",role:"end","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.maxDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMaxChange,onSetOption:e.onSetOption,onSelectRange:e.setMaxSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)])]),W("div",fre,[W("button",{type:"button",class:"el-time-panel__btn cancel",onClick:t[0]||(t[0]=i=>e.handleCancel())},Fe(e.t("el.datepicker.cancel")),1),W("button",{type:"button",class:"el-time-panel__btn confirm",disabled:e.btnConfirmDisabled,onClick:t[1]||(t[1]=i=>e.handleConfirm())},Fe(e.t("el.datepicker.confirm")),9,hre)])])):ce("v-if",!0)}var mre=We(rre,[["render",pre]]);Ct.extend(r$);var gre=me({name:"ElTimePicker",install:null,props:Ut(ut({},a$),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(e,t){const n=L(null),s=e.isRange?"timerange":"time",o=e.isRange?mre:i$,r=Ut(ut({},e),{focus:()=>{var a;(a=n.value)==null||a.handleFocus()},blur:()=>{var a;(a=n.value)==null||a.handleBlur()}});return zt("ElPopperOptions",e.popperOptions),t.expose(r),()=>{var a;const i=(a=e.format)!=null?a:Gy;return He(PR,Ut(ut({},e),{format:i,type:s,ref:n,"onUpdate:modelValue":l=>t.emit("update:modelValue",l)}),{default:l=>He(o,l)})}}});const wi=e=>Array.from(Array(e).keys()),GR=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),KR=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),am=gre;am.install=e=>{e.component(am.name,am)};const vre=am,bre=gt({selectedDay:{type:Je(Object)},range:{type:Je(Array)},date:{type:Je(Object),required:!0},hideHeader:{type:Boolean}}),yre={pick:e=>rn(e)};Ct.extend(OR);const kb=["sun","mon","tue","wed","thu","fri","sat"],wre=(e,t)=>{const n=e.subtract(1,"month").endOf("month").date();return wi(t).map((s,o)=>n-(t-o-1))},$re=e=>{const t=e.daysInMonth();return wi(t).map((n,s)=>s+1)},Cre=e=>wi(e.length/7).map(t=>{const n=t*7;return e.slice(n,n+7)}),kre=me({props:bre,emits:yre,setup(e,{emit:t}){const{t:n,lang:s}=kn(),o=Dt("calendar-table"),r=Dt("calendar-day"),a=Ct().locale(s.value),i=a.$locale().weekStart||0,l=_(()=>!!e.range&&!!e.range.length),u=_(()=>{let m=[];if(l.value){const[g,v]=e.range,b=wi(v.date()-g.date()+1).map(w=>({text:g.date()+w,type:"current"}));let $=b.length%7;$=$===0?0:7-$;const y=wi($).map((w,C)=>({text:C+1,type:"next"}));m=b.concat(y)}else{const g=e.date.startOf("month").day()||7,v=wre(e.date,g-i).map(y=>({text:y,type:"prev"})),b=$re(e.date).map(y=>({text:y,type:"current"}));m=[...v,...b];const $=wi(42-m.length).map((y,w)=>({text:w+1,type:"next"}));m=m.concat($)}return Cre(m)}),c=_(()=>{const m=i;return m===0?kb.map(g=>n(`el.datepicker.weeks.${g}`)):kb.slice(m).concat(kb.slice(0,m)).map(g=>n(`el.datepicker.weeks.${g}`))}),d=(m,g)=>{switch(g){case"prev":return e.date.startOf("month").subtract(1,"month").date(m);case"next":return e.date.startOf("month").add(1,"month").date(m);case"current":return e.date.date(m)}};return{isInRange:l,weekDays:c,rows:u,getCellClass:({text:m,type:g})=>{const v=[g];if(g==="current"){const b=d(m,g);b.isSame(e.selectedDay,"day")&&v.push("is-selected"),b.isSame(a,"day")&&v.push("is-today")}return v},handlePickDay:({text:m,type:g})=>{const v=d(m,g);t("pick",v)},getSlotData:({text:m,type:g})=>{const v=d(m,g);return{isSelected:v.isSame(e.selectedDay),type:`${g}-month`,day:v.format("YYYY-MM-DD"),date:v.toDate()}},nsTable:o,nsDay:r}}}),Sre={key:0},xre=["onClick"];function Ire(e,t,n,s,o,r){return T(),B("table",{class:q([e.nsTable.b(),e.nsTable.is("range",e.isInRange)]),cellspacing:"0",cellpadding:"0"},[e.hideHeader?ce("v-if",!0):(T(),B("thead",Sre,[(T(!0),B(it,null,Yt(e.weekDays,a=>(T(),B("th",{key:a},Fe(a),1))),128))])),W("tbody",null,[(T(!0),B(it,null,Yt(e.rows,(a,i)=>(T(),B("tr",{key:i,class:q({[e.nsTable.e("row")]:!0,[e.nsTable.em("row","hide-border")]:i===0&&e.hideHeader})},[(T(!0),B(it,null,Yt(a,(l,u)=>(T(),B("td",{key:u,class:q(e.getCellClass(l)),onClick:c=>e.handlePickDay(l)},[W("div",{class:q(e.nsDay.b())},[_e(e.$slots,"dateCell",{data:e.getSlotData(l)},()=>[W("span",null,Fe(l.text),1)])],2)],10,xre))),128))],2))),128))])],2)}var Ere=We(kre,[["render",Ire]]);const Tre=gt({modelValue:{type:Date},range:{type:Je(Array),validator:e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date)}}),Nre={[Ft]:e=>e instanceof Date,input:e=>e instanceof Date},Are=me({name:"ElCalendar",components:{DateTable:Ere,ElButton:Ia,ElButtonGroup:DR},props:Tre,emits:Nre,setup(e,{emit:t}){const n=Dt("calendar"),{t:s,lang:o}=kn(),r=L(),a=Ct().locale(o.value),i=_(()=>p.value.subtract(1,"month").date(1)),l=_(()=>Ct(p.value).locale(o.value).format("YYYY-MM")),u=_(()=>p.value.add(1,"month").date(1)),c=_(()=>p.value.subtract(1,"year").date(1)),d=_(()=>p.value.add(1,"year").date(1)),f=_(()=>{const $=`el.datepicker.month${p.value.format("M")}`;return`${p.value.year()} ${s("el.datepicker.year")} ${s($)}`}),h=_({get(){return e.modelValue?p.value:r.value},set($){if(!$)return;r.value=$;const y=$.toDate();t("input",y),t("update:modelValue",y)}}),p=_(()=>e.modelValue?Ct(e.modelValue).locale(o.value):h.value?h.value:g.value.length?g.value[0][0]:a),m=($,y)=>{const w=$.startOf("week"),C=y.endOf("week"),k=w.get("month"),S=C.get("month");if(k===S)return[[w,C]];if(k+1===S){const E=w.endOf("month"),x=C.startOf("month"),A=E.isSame(x,"week")?x.add(1,"week"):x;return[[w,E],[A.startOf("week"),C]]}else if(k+2===S){const E=w.endOf("month"),x=w.add(1,"month").startOf("month"),N=E.isSame(x,"week")?x.add(1,"week"):x,A=N.endOf("month"),D=C.startOf("month"),M=A.isSame(D,"week")?D.add(1,"week"):D;return[[w,E],[N.startOf("week"),A],[M.startOf("week"),C]]}else return[]},g=_(()=>{if(!e.range)return[];const $=e.range.map(C=>Ct(C).locale(o.value)),[y,w]=$;return y.isAfter(w)?[]:y.isSame(w,"month")?m(y,w):y.add(1,"month").month()!==w.month()?[]:m(y,w)}),v=$=>{h.value=$};return{selectedDay:r,curMonthDatePrefix:l,i18nDate:f,realSelectedDay:h,date:p,validatedRange:g,pickDay:v,selectDate:$=>{let y;$==="prev-month"?y=i.value:$==="next-month"?y=u.value:$==="prev-year"?y=c.value:$==="next-year"?y=d.value:y=a,!y.isSame(p.value,"day")&&v(y)},t:s,ns:n}}});function Dre(e,t,n,s,o,r){const a=re("el-button"),i=re("el-button-group"),l=re("date-table");return T(),B("div",{class:q(e.ns.b())},[W("div",{class:q(e.ns.e("header"))},[_e(e.$slots,"header",{date:e.i18nDate},()=>[W("div",{class:q(e.ns.e("title"))},Fe(e.i18nDate),3),e.validatedRange.length===0?(T(),B("div",{key:0,class:q(e.ns.e("button-group"))},[le(i,null,{default:oe(()=>[le(a,{size:"small",onClick:t[0]||(t[0]=u=>e.selectDate("prev-month"))},{default:oe(()=>[jt(Fe(e.t("el.datepicker.prevMonth")),1)]),_:1}),le(a,{size:"small",onClick:t[1]||(t[1]=u=>e.selectDate("today"))},{default:oe(()=>[jt(Fe(e.t("el.datepicker.today")),1)]),_:1}),le(a,{size:"small",onClick:t[2]||(t[2]=u=>e.selectDate("next-month"))},{default:oe(()=>[jt(Fe(e.t("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):ce("v-if",!0)])],2),e.validatedRange.length===0?(T(),B("div",{key:0,class:q(e.ns.e("body"))},[le(l,{date:e.date,"selected-day":e.realSelectedDay,onPick:e.pickDay},tf({_:2},[e.$slots.dateCell?{name:"dateCell",fn:oe(u=>[_e(e.$slots,"dateCell",Bl(zl(u)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(T(),B("div",{key:1,class:q(e.ns.e("body"))},[(T(!0),B(it,null,Yt(e.validatedRange,(u,c)=>(T(),ve(l,{key:c,date:u[0],"selected-day":e.realSelectedDay,range:u,"hide-header":c!==0,onPick:e.pickDay},tf({_:2},[e.$slots.dateCell?{name:"dateCell",fn:oe(d=>[_e(e.$slots,"dateCell",Bl(zl(d)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2)}var Rre=We(Are,[["render",Dre]]);const _re=Vt(Rre),Ore=gt({header:{type:String,default:""},bodyStyle:{type:Je([String,Object,Array]),default:""},shadow:{type:String,default:"always"}}),Mre=me({name:"ElCard",props:Ore,setup(){return{ns:Dt("card")}}});function Fre(e,t,n,s,o,r){return T(),B("div",{class:q([e.ns.b(),e.ns.is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?(T(),B("div",{key:0,class:q(e.ns.e("header"))},[_e(e.$slots,"header",{},()=>[jt(Fe(e.header),1)])],2)):ce("v-if",!0),W("div",{class:q(e.ns.e("body")),style:nt(e.bodyStyle)},[_e(e.$slots,"default")],6)],2)}var Pre=We(Mre,[["render",Fre]]);const Lre=Vt(Pre);var Bre=_o,zre=Oi,Vre="Expected a function";function Wre(e,t,n){var s=!0,o=!0;if(typeof e!="function")throw new TypeError(Vre);return zre(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),Bre(e,t,{leading:s,maxWait:t,trailing:o})}var Hm=Wre;const Hre=me({name:"ElCarousel",components:{ElIcon:_t,ArrowLeft:ru,ArrowRight:Er},props:{initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:{type:String,default:""},loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator(e){return["horizontal","vertical"].includes(e)}},pauseOnHover:{type:Boolean,default:!0}},emits:["change"],setup(e,{emit:t}){const n=Dt("carousel"),s=Cn({activeIndex:-1,containerWidth:0,timer:null,hover:!1}),o=L(null),r=L([]),a=_(()=>e.arrow!=="never"&&e.direction!=="vertical"),i=_(()=>r.value.some(A=>A.label.toString().length>0)),l=_(()=>{const A=[n.b(),n.m(e.direction)];return e.type==="card"&&A.push(n.m("card")),A}),u=_(()=>{const A=[n.e("indicators"),n.em("indicators",e.direction)];return i.value&&A.push(n.em("indicators","labels")),(e.indicatorPosition==="outside"||e.type==="card")&&A.push(n.em("indicators","outside")),A}),c=Hm(A=>{m(A)},300,{trailing:!0}),d=Hm(A=>{E(A)},300);function f(){s.timer&&(clearInterval(s.timer),s.timer=null)}function h(){e.interval<=0||!e.autoplay||s.timer||(s.timer=setInterval(()=>p(),e.interval))}const p=()=>{s.activeIndex<r.value.length-1?s.activeIndex=s.activeIndex+1:e.loop&&(s.activeIndex=0)};function m(A){if(typeof A=="string"){const F=r.value.filter(R=>R.name===A);F.length>0&&(A=r.value.indexOf(F[0]))}if(A=Number(A),isNaN(A)||A!==Math.floor(A))return;const D=r.value.length,M=s.activeIndex;A<0?s.activeIndex=e.loop?D-1:0:A>=D?s.activeIndex=e.loop?0:D-1:s.activeIndex=A,M===s.activeIndex&&g(M)}function g(A){r.value.forEach((D,M)=>{D.translateItem(M,s.activeIndex,A)})}function v(A){r.value.push(A)}function b(A){const D=r.value.findIndex(M=>M.uid===A);D!==-1&&(r.value.splice(D,1),s.activeIndex===D&&N())}function $(A,D){const M=r.value.length;return D===M-1&&A.inStage&&r.value[0].active||A.inStage&&r.value[D+1]&&r.value[D+1].active?"left":D===0&&A.inStage&&r.value[M-1].active||A.inStage&&r.value[D-1]&&r.value[D-1].active?"right":!1}function y(){s.hover=!0,e.pauseOnHover&&f()}function w(){s.hover=!1,h()}function C(A){e.direction!=="vertical"&&r.value.forEach((D,M)=>{A===$(D,M)&&(D.hover=!0)})}function k(){e.direction!=="vertical"&&r.value.forEach(A=>{A.hover=!1})}function S(A){s.activeIndex=A}function E(A){e.trigger==="hover"&&A!==s.activeIndex&&(s.activeIndex=A)}function x(){m(s.activeIndex-1)}function N(){m(s.activeIndex+1)}return Oe(()=>s.activeIndex,(A,D)=>{g(D),D>-1&&t("change",A,D)}),Oe(()=>e.autoplay,A=>{A?h():f()}),Oe(()=>e.loop,()=>{m(s.activeIndex)}),Mt(()=>{dt(()=>{Li(o.value,g),e.initialIndex<r.value.length&&e.initialIndex>=0&&(s.activeIndex=e.initialIndex),h()})}),os(()=>{o.value&&Bi(o.value,g),f()}),zt("injectCarouselScope",{root:o,direction:e.direction,type:e.type,items:r,loop:e.loop,addItem:v,removeItem:b,setActiveItem:m}),{data:s,props:e,items:r,arrowDisplay:a,carouselClasses:l,indicatorsClasses:u,hasLabel:i,handleMouseEnter:y,handleMouseLeave:w,handleIndicatorClick:S,throttledArrowClick:c,throttledIndicatorHover:d,handleButtonEnter:C,handleButtonLeave:k,prev:x,next:N,setActiveItem:m,root:o,ns:n}}}),Ure=["onMouseenter","onClick"],Gre={key:0};function Kre(e,t,n,s,o,r){const a=re("arrow-left"),i=re("el-icon"),l=re("arrow-right");return T(),B("div",{ref:"root",class:q(e.carouselClasses),onMouseenter:t[6]||(t[6]=ht((...u)=>e.handleMouseEnter&&e.handleMouseEnter(...u),["stop"])),onMouseleave:t[7]||(t[7]=ht((...u)=>e.handleMouseLeave&&e.handleMouseLeave(...u),["stop"]))},[W("div",{class:q(e.ns.e("container")),style:nt({height:e.height})},[e.arrowDisplay?(T(),ve(cs,{key:0,name:"carousel-arrow-left"},{default:oe(()=>[$t(W("button",{type:"button",class:q([e.ns.e("arrow"),e.ns.em("arrow","left")]),onMouseenter:t[0]||(t[0]=u=>e.handleButtonEnter("left")),onMouseleave:t[1]||(t[1]=(...u)=>e.handleButtonLeave&&e.handleButtonLeave(...u)),onClick:t[2]||(t[2]=ht(u=>e.throttledArrowClick(e.data.activeIndex-1),["stop"]))},[le(i,null,{default:oe(()=>[le(a)]),_:1})],34),[[Qt,(e.arrow==="always"||e.data.hover)&&(e.props.loop||e.data.activeIndex>0)]])]),_:1})):ce("v-if",!0),e.arrowDisplay?(T(),ve(cs,{key:1,name:"carousel-arrow-right"},{default:oe(()=>[$t(W("button",{type:"button",class:q([e.ns.e("arrow"),e.ns.em("arrow","right")]),onMouseenter:t[3]||(t[3]=u=>e.handleButtonEnter("right")),onMouseleave:t[4]||(t[4]=(...u)=>e.handleButtonLeave&&e.handleButtonLeave(...u)),onClick:t[5]||(t[5]=ht(u=>e.throttledArrowClick(e.data.activeIndex+1),["stop"]))},[le(i,null,{default:oe(()=>[le(l)]),_:1})],34),[[Qt,(e.arrow==="always"||e.data.hover)&&(e.props.loop||e.data.activeIndex<e.items.length-1)]])]),_:1})):ce("v-if",!0),_e(e.$slots,"default")],6),e.indicatorPosition!=="none"?(T(),B("ul",{key:0,class:q(e.indicatorsClasses)},[(T(!0),B(it,null,Yt(e.items,(u,c)=>(T(),B("li",{key:c,class:q([e.ns.e("indicator"),e.ns.em("indicator",e.direction),e.ns.is("active",c===e.data.activeIndex)]),onMouseenter:d=>e.throttledIndicatorHover(c),onClick:ht(d=>e.handleIndicatorClick(c),["stop"])},[W("button",{class:q(e.ns.e("button"))},[e.hasLabel?(T(),B("span",Gre,Fe(u.label),1)):ce("v-if",!0)],2)],42,Ure))),128))],2)):ce("v-if",!0)],34)}var jre=We(Hre,[["render",Kre]]);const Ap=.83,qre=me({name:"ElCarouselItem",props:{name:{type:String,default:""},label:{type:[String,Number],default:""}},setup(e){const t=Dt("carousel"),n=Lt(),s=Cn({hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}),o=Ze("injectCarouselScope"),r=_(()=>o.direction),a=_(()=>{const p={transform:`${r.value==="vertical"?"translateY":"translateX"}(${s.translate}px) scale(${s.scale})`};return F7(p)});function i(f,h,p){return h===0&&f===p-1?-1:h===p-1&&f===0?p:f<h-1&&h-f>=p/2?p+1:f>h+1&&f-h>=p/2?-2:f}function l(f,h){var p;const m=((p=o.root.value)==null?void 0:p.offsetWidth)||0;return s.inStage?m*((2-Ap)*(f-h)+1)/4:f<h?-(1+Ap)*m/4:(3+Ap)*m/4}function u(f,h,p){var m,g;return((p?(m=o.root.value)==null?void 0:m.offsetHeight:(g=o.root.value)==null?void 0:g.offsetWidth)||0)*(f-h)}const c=(f,h,p)=>{const m=o.type,g=o.items.value.length;if(m!=="card"&&p!==void 0&&(s.animating=f===h||f===p),f!==h&&g>2&&o.loop&&(f=i(f,h,g)),m==="card")r.value==="vertical",s.inStage=Math.round(Math.abs(f-h))<=1,s.active=f===h,s.translate=l(f,h),s.scale=s.active?1:Ap;else{s.active=f===h;const v=r.value==="vertical";s.translate=u(f,h,v)}s.ready=!0};function d(){if(o&&o.type==="card"){const f=o.items.value.map(h=>h.uid).indexOf(n.uid);o.setActiveItem(f)}}return Mt(()=>{o.addItem&&o.addItem(Ut(ut(ut({uid:n.uid},e),so(s)),{translateItem:c}))}),Df(()=>{o.removeItem&&o.removeItem(n.uid)}),{data:s,itemStyle:a,translateItem:c,type:o.type,handleItemClick:d,ns:t}}});function Xre(e,t,n,s,o,r){return $t((T(),B("div",{class:q([e.ns.e("item"),e.ns.is("active",e.data.active),e.ns.is("in-stage",e.data.inStage),e.ns.is("hover",e.data.hover),e.ns.is("animating",e.data.animating),{[e.ns.em("item","card")]:e.type==="card"}]),style:nt(e.itemStyle),onClick:t[0]||(t[0]=(...a)=>e.handleItemClick&&e.handleItemClick(...a))},[e.type==="card"?$t((T(),B("div",{key:0,class:q(e.ns.e("mask"))},null,2)),[[Qt,!e.data.active]]):ce("v-if",!0),_e(e.$slots,"default")],6)),[[Qt,e.data.ready]])}var jR=We(qre,[["render",Xre]]);const Yre=Vt(jre,{CarouselItem:jR}),Zre=Jn(jR);function qR(e,t){if(!qt)return;if(!t){e.scrollTop=0;return}const n=[];let s=t.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)n.push(s),s=s.offsetParent;const o=t.offsetTop+n.reduce((l,u)=>l+u.offsetTop,0),r=o+t.offsetHeight,a=e.scrollTop,i=a+e.clientHeight;o<a?e.scrollTop=o:r>i&&(e.scrollTop=r-e.clientHeight)}const Jre={modelValue:{type:[Boolean,Number,String],default:()=>{}},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},tabindex:[String,Number],size:String},Vc=()=>{const e=Ze(Lo,{}),t=Ze(oa,{}),n=Ze("CheckboxGroup",{}),s=_(()=>n&&(n==null?void 0:n.name)==="ElCheckboxGroup"),o=_(()=>t.size);return{isGroup:s,checkboxGroup:n,elForm:e,elFormItemSize:o,elFormItem:t}},Qre=e=>{const t=L(!1),{emit:n}=Lt(),{isGroup:s,checkboxGroup:o}=Vc(),r=L(!1);return{model:_({get(){var i,l;return s.value?(i=o.modelValue)==null?void 0:i.value:(l=e.modelValue)!=null?l:t.value},set(i){var l;s.value&&Array.isArray(i)?(r.value=o.max!==void 0&&i.length>o.max.value,r.value===!1&&((l=o==null?void 0:o.changeEvent)==null||l.call(o,i))):(n(Ft,i),t.value=i)}}),isLimitExceeded:r}},eae=(e,{model:t})=>{const{isGroup:n,checkboxGroup:s}=Vc(),o=L(!1),r=ds(s==null?void 0:s.checkboxGroupSize,{prop:!0}),a=_(()=>{const l=t.value;return Tf(l)==="[object Boolean]"?l:Array.isArray(l)?l.includes(e.label):l!=null?l===e.trueLabel:!!l}),i=ds(_(()=>{var l;return n.value?(l=s==null?void 0:s.checkboxGroupSize)==null?void 0:l.value:void 0}));return{isChecked:a,focus:o,size:r,checkboxSize:i}},tae=(e,{model:t,isChecked:n})=>{const{elForm:s,isGroup:o,checkboxGroup:r}=Vc(),a=_(()=>{var l,u;const c=(l=r.max)==null?void 0:l.value,d=(u=r.min)==null?void 0:u.value;return!!(c||d)&&t.value.length>=c&&!n.value||t.value.length<=d&&n.value});return{isDisabled:_(()=>{var l,u;const c=e.disabled||s.disabled;return(u=o.value?((l=r.disabled)==null?void 0:l.value)||c||a.value:e.disabled||s.disabled)!=null?u:!1}),isLimitDisabled:a}},nae=(e,{model:t})=>{function n(){Array.isArray(t.value)&&!t.value.includes(e.label)?t.value.push(e.label):t.value=e.trueLabel||!0}e.checked&&n()},sae=(e,{isLimitExceeded:t})=>{const{elFormItem:n}=Vc(),{emit:s}=Lt();function o(r){var a,i;if(t.value)return;const u=r.target.checked?(a=e.trueLabel)!=null?a:!0:(i=e.falseLabel)!=null?i:!1;s("change",u,r)}return Oe(()=>e.modelValue,()=>{var r;(r=n.validate)==null||r.call(n,"change")}),{handleChange:o}},XR=e=>{const{model:t,isLimitExceeded:n}=Qre(e),{focus:s,size:o,isChecked:r,checkboxSize:a}=eae(e,{model:t}),{isDisabled:i}=tae(e,{model:t,isChecked:r}),{handleChange:l}=sae(e,{isLimitExceeded:n});return nae(e,{model:t}),{isChecked:r,isDisabled:i,checkboxSize:a,model:t,handleChange:l,focus:s,size:o}},oae=me({name:"ElCheckbox",props:{modelValue:{type:[Boolean,Number,String],default:()=>{}},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:{type:String,validator:Oo},tabindex:[String,Number]},emits:[Ft,"change"],setup(e){const t=Dt("checkbox");return ut({ns:t},XR(e))}}),rae=["id","aria-controls"],aae=["tabindex","role","aria-checked"],iae=["aria-hidden","name","tabindex","disabled","true-value","false-value"],lae=["aria-hidden","disabled","value","name","tabindex"];function uae(e,t,n,s,o,r){return T(),B("label",{id:e.id,class:q([e.ns.b(),e.ns.m(e.checkboxSize),e.ns.is("disabled",e.isDisabled),e.ns.is("bordered",e.border),e.ns.is("checked",e.isChecked)]),"aria-controls":e.indeterminate?e.controls:null},[W("span",{class:q([e.ns.e("input"),e.ns.is("disabled",e.isDisabled),e.ns.is("checked",e.isChecked),e.ns.is("indeterminate",e.indeterminate),e.ns.is("focus",e.focus)]),tabindex:e.indeterminate?0:void 0,role:e.indeterminate?"checkbox":void 0,"aria-checked":e.indeterminate?"mixed":!1},[W("span",{class:q(e.ns.e("inner"))},null,2),e.trueLabel||e.falseLabel?$t((T(),B("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=a=>e.model=a),class:q(e.ns.e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...a)=>e.handleChange&&e.handleChange(...a)),onFocus:t[2]||(t[2]=a=>e.focus=!0),onBlur:t[3]||(t[3]=a=>e.focus=!1)},null,42,iae)),[[Bm,e.model]]):$t((T(),B("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=a=>e.model=a),class:q(e.ns.e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,value:e.label,name:e.name,tabindex:e.tabindex,onChange:t[5]||(t[5]=(...a)=>e.handleChange&&e.handleChange(...a)),onFocus:t[6]||(t[6]=a=>e.focus=!0),onBlur:t[7]||(t[7]=a=>e.focus=!1)},null,42,lae)),[[Bm,e.model]])],10,aae),e.$slots.default||e.label?(T(),B("span",{key:0,class:q(e.ns.e("label"))},[_e(e.$slots,"default"),e.$slots.default?ce("v-if",!0):(T(),B(it,{key:0},[jt(Fe(e.label),1)],2112))],2)):ce("v-if",!0)],10,rae)}var cae=We(oae,[["render",uae]]);const dae=me({name:"ElCheckboxButton",props:Jre,emits:[Ft,"change"],setup(e){const{focus:t,isChecked:n,isDisabled:s,size:o,model:r,handleChange:a}=XR(e),{checkboxGroup:i}=Vc(),l=Dt("checkbox"),u=_(()=>{var c,d,f,h;const p=(d=(c=i==null?void 0:i.fill)==null?void 0:c.value)!=null?d:"";return{backgroundColor:p,borderColor:p,color:(h=(f=i==null?void 0:i.textColor)==null?void 0:f.value)!=null?h:"",boxShadow:p?`-1px 0 0 0 ${p}`:null}});return{focus:t,isChecked:n,isDisabled:s,model:r,handleChange:a,activeStyle:u,size:o,ns:l}}}),fae=["aria-checked","aria-disabled"],hae=["name","tabindex","disabled","true-value","false-value"],pae=["name","tabindex","disabled","value"];function mae(e,t,n,s,o,r){return T(),B("label",{class:q([e.ns.b("button"),e.ns.bm("button",e.size),e.ns.is("disabled",e.isDisabled),e.ns.is("checked",e.isChecked),e.ns.is("focus",e.focus)]),role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled},[e.trueLabel||e.falseLabel?$t((T(),B("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=a=>e.model=a),class:q(e.ns.be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...a)=>e.handleChange&&e.handleChange(...a)),onFocus:t[2]||(t[2]=a=>e.focus=!0),onBlur:t[3]||(t[3]=a=>e.focus=!1)},null,42,hae)),[[Bm,e.model]]):$t((T(),B("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=a=>e.model=a),class:q(e.ns.be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,value:e.label,onChange:t[5]||(t[5]=(...a)=>e.handleChange&&e.handleChange(...a)),onFocus:t[6]||(t[6]=a=>e.focus=!0),onBlur:t[7]||(t[7]=a=>e.focus=!1)},null,42,pae)),[[Bm,e.model]]),e.$slots.default||e.label?(T(),B("span",{key:2,class:q(e.ns.be("button","inner")),style:nt(e.isChecked?e.activeStyle:null)},[_e(e.$slots,"default",{},()=>[jt(Fe(e.label),1)])],6)):ce("v-if",!0)],10,fae)}var YR=We(dae,[["render",mae]]);const ZR=me({name:"ElCheckboxGroup",props:{modelValue:{type:Array,default:()=>[]},disabled:Boolean,min:{type:Number,default:void 0},max:{type:Number,default:void 0},size:{type:String,validator:Oo},fill:{type:String,default:void 0},textColor:{type:String,default:void 0},tag:{type:String,default:"div"}},emits:[Ft,"change"],setup(e,{emit:t,slots:n}){const{elFormItem:s}=Vc(),o=ds(),r=Dt("checkbox"),a=l=>{t(Ft,l),dt(()=>{t("change",l)})},i=_({get(){return e.modelValue},set(l){a(l)}});return zt("CheckboxGroup",Ut(ut({name:"ElCheckboxGroup",modelValue:i},so(e)),{checkboxGroupSize:o,changeEvent:a})),Oe(()=>e.modelValue,()=>{var l;(l=s.validate)==null||l.call(s,"change")}),()=>He(e.tag,{class:r.b("group"),role:"group","aria-label":"checkbox-group"},[_e(n,"default")])}}),Jr=Vt(cae,{CheckboxButton:YR,CheckboxGroup:ZR}),gae=Jn(YR),JR=Jn(ZR),QR=gt({size:Pg,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),vae=gt(Ut(ut({},QR),{modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean})),e_={[Ft]:e=>Xt(e)||wn(e)||Gr(e),change:e=>Xt(e)||wn(e)||Gr(e)},t_=(e,t)=>{const n=L(),s=Ze(oD,void 0),o=_(()=>!!s),r=_({get(){return o.value?s.modelValue:e.modelValue},set(c){o.value?s.changeEvent(c):t(Ft,c),n.value.checked=e.modelValue===e.label}}),a=ds(_(()=>s==null?void 0:s.size)),i=Mf(_(()=>s==null?void 0:s.disabled)),l=L(!1),u=_(()=>i.value||o.value&&r.value!==e.label?-1:0);return{radioRef:n,isGroup:o,radioGroup:s,focus:l,size:a,disabled:i,tabIndex:u,modelValue:r}},bae=me({name:"ElRadio",props:vae,emits:e_,setup(e,{emit:t}){const{radioRef:n,isGroup:s,focus:o,size:r,disabled:a,tabIndex:i,modelValue:l}=t_(e,t);function u(){dt(()=>t("change",l.value))}return{focus:o,isGroup:s,modelValue:l,tabIndex:i,size:r,disabled:a,radioRef:n,handleChange:u}}}),yae=["aria-checked","aria-disabled","tabindex"],wae=W("span",{class:"el-radio__inner"},null,-1),$ae=["value","name","disabled"];function Cae(e,t,n,s,o,r){return T(),B("label",{class:q(["el-radio",{[`el-radio--${e.size||""}`]:e.size,"is-disabled":e.disabled,"is-focus":e.focus,"is-bordered":e.border,"is-checked":e.modelValue===e.label}]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[5]||(t[5]=Ht(ht(a=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[W("span",{class:q(["el-radio__input",{"is-disabled":e.disabled,"is-checked":e.modelValue===e.label}])},[wae,$t(W("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=a=>e.modelValue=a),class:"el-radio__original",value:e.label,type:"radio","aria-hidden":"true",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=a=>e.focus=!0),onBlur:t[2]||(t[2]=a=>e.focus=!1),onChange:t[3]||(t[3]=(...a)=>e.handleChange&&e.handleChange(...a))},null,40,$ae),[[XA,e.modelValue]])],2),W("span",{class:"el-radio__label",onKeydown:t[4]||(t[4]=ht(()=>{},["stop"]))},[_e(e.$slots,"default",{},()=>[jt(Fe(e.label),1)])],32)],42,yae)}var kae=We(bae,[["render",Cae]]);const Sae=gt(Ut(ut({},QR),{name:{type:String,default:""}})),xae=me({name:"ElRadioButton",props:Sae,setup(e,{emit:t}){const{radioRef:n,isGroup:s,focus:o,size:r,disabled:a,tabIndex:i,modelValue:l,radioGroup:u}=t_(e,t),c=_(()=>({backgroundColor:(u==null?void 0:u.fill)||"",borderColor:(u==null?void 0:u.fill)||"",boxShadow:(u==null?void 0:u.fill)?`-1px 0 0 0 ${u.fill}`:"",color:(u==null?void 0:u.textColor)||""}));return{isGroup:s,size:r,disabled:a,tabIndex:i,modelValue:l,focus:o,activeStyle:c,radioRef:n}}}),Iae=["aria-checked","aria-disabled","tabindex"],Eae=["value","name","disabled"];function Tae(e,t,n,s,o,r){return T(),B("label",{class:q(["el-radio-button",[e.size?"el-radio-button--"+e.size:"",{"is-active":e.modelValue===e.label,"is-disabled":e.disabled,"is-focus":e.focus}]]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[4]||(t[4]=Ht(ht(a=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[$t(W("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=a=>e.modelValue=a),class:"el-radio-button__original-radio",value:e.label,type:"radio",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=a=>e.focus=!0),onBlur:t[2]||(t[2]=a=>e.focus=!1)},null,40,Eae),[[XA,e.modelValue]]),W("span",{class:"el-radio-button__inner",style:nt(e.modelValue===e.label?e.activeStyle:{}),onKeydown:t[3]||(t[3]=ht(()=>{},["stop"]))},[_e(e.$slots,"default",{},()=>[jt(Fe(e.label),1)])],36)],42,Iae)}var n_=We(xae,[["render",Tae]]);const Nae=gt({size:Pg,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},textColor:{type:String,default:""}}),Aae=e_,Dae=me({name:"ElRadioGroup",props:Nae,emits:Aae,setup(e,t){const n=L(),{formItem:s}=zc(),o=a=>{t.emit(Ft,a),dt(()=>t.emit("change",a))},r=a=>{if(!n.value)return;const i=a.target,l=i.nodeName==="INPUT"?"[type=radio]":"[role=radio]",u=n.value.querySelectorAll(l),c=u.length,d=Array.from(u).indexOf(i),f=n.value.querySelectorAll("[role=radio]");let h=null;switch(a.code){case Qe.left:case Qe.up:a.stopPropagation(),a.preventDefault(),h=d===0?c-1:d-1;break;case Qe.right:case Qe.down:a.stopPropagation(),a.preventDefault(),h=d===c-1?0:d+1;break}h!==null&&(f[h].click(),f[h].focus())};return Mt(()=>{const a=n.value.querySelectorAll("[type=radio]"),i=a[0];!Array.from(a).some(l=>l.checked)&&i&&(i.tabIndex=0)}),zt(oD,Cn(Ut(ut({},so(e)),{changeEvent:o}))),Oe(()=>e.modelValue,()=>s==null?void 0:s.validate("change")),{radioGroupRef:n,handleKeydown:r}}});function Rae(e,t,n,s,o,r){return T(),B("div",{ref:"radioGroupRef",class:"el-radio-group",role:"radiogroup",onKeydown:t[0]||(t[0]=(...a)=>e.handleKeydown&&e.handleKeydown(...a))},[_e(e.$slots,"default")],544)}var s_=We(Dae,[["render",Rae]]);const o_=Vt(kae,{RadioButton:n_,RadioGroup:s_}),_ae=Jn(s_),Oae=Jn(n_);var Mae=me({name:"NodeContent",render(){const{node:e,panel:t}=this.$parent,{data:n,label:s}=e,{renderLabelFn:o}=t;return He("span",{class:"el-cascader-node__label"},o?o({node:e,data:n}):s)}});const l$=Symbol(),Fae=me({name:"ElCascaderNode",components:{ElCheckbox:Jr,ElRadio:o_,NodeContent:Mae,ElIcon:_t,Check:lc,Loading:Xa,ArrowRight:Er},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=Ze(l$),s=_(()=>n.isHoverMenu),o=_(()=>n.config.multiple),r=_(()=>n.config.checkStrictly),a=_(()=>{var w;return(w=n.checkedNodes[0])==null?void 0:w.uid}),i=_(()=>e.node.isDisabled),l=_(()=>e.node.isLeaf),u=_(()=>r.value&&!l.value||!i.value),c=_(()=>f(n.expandingNode)),d=_(()=>r.value&&n.checkedNodes.some(f)),f=w=>{var C;const{level:k,uid:S}=e.node;return((C=w==null?void 0:w.pathNodes[k-1])==null?void 0:C.uid)===S},h=()=>{c.value||n.expandNode(e.node)},p=w=>{const{node:C}=e;w!==C.checked&&n.handleCheckChange(C,w)},m=()=>{n.lazyLoad(e.node,()=>{l.value||h()})},g=w=>{!s.value||(v(),!l.value&&t("expand",w))},v=()=>{const{node:w}=e;!u.value||w.loading||(w.loaded?h():m())},b=()=>{s.value&&!l.value||(l.value&&!i.value&&!r.value&&!o.value?y(!0):v())},$=w=>{r.value?(p(w),e.node.loaded&&h()):y(w)},y=w=>{e.node.loaded?(p(w),!r.value&&h()):m()};return{panel:n,isHoverMenu:s,multiple:o,checkStrictly:r,checkedNodeId:a,isDisabled:i,isLeaf:l,expandable:u,inExpandingPath:c,inCheckedPath:d,handleHoverExpand:g,handleExpand:v,handleClick:b,handleCheck:y,handleSelectCheck:$}}}),Pae=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Lae=W("span",null,null,-1);function Bae(e,t,n,s,o,r){const a=re("el-checkbox"),i=re("el-radio"),l=re("check"),u=re("el-icon"),c=re("node-content"),d=re("loading"),f=re("arrow-right");return T(),B("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:q(["el-cascader-node",e.checkStrictly&&"is-selectable",e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path",e.node.checked&&"is-active",!e.expandable&&"is-disabled"]),onMouseenter:t[2]||(t[2]=(...h)=>e.handleHoverExpand&&e.handleHoverExpand(...h)),onFocus:t[3]||(t[3]=(...h)=>e.handleHoverExpand&&e.handleHoverExpand(...h)),onClick:t[4]||(t[4]=(...h)=>e.handleClick&&e.handleClick(...h))},[ce(" prefix "),e.multiple?(T(),ve(a,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ht(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(T(),ve(i,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ht(()=>{},["stop"]))},{default:oe(()=>[ce(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Lae]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(T(),ve(u,{key:2,class:"el-cascader-node__prefix"},{default:oe(()=>[le(l)]),_:1})):ce("v-if",!0),ce(" content "),le(c),ce(" postfix "),e.isLeaf?ce("v-if",!0):(T(),B(it,{key:3},[e.node.loading?(T(),ve(u,{key:0,class:"is-loading el-cascader-node__postfix"},{default:oe(()=>[le(d)]),_:1})):(T(),ve(u,{key:1,class:"arrow-right el-cascader-node__postfix"},{default:oe(()=>[le(f)]),_:1}))],2112))],42,Pae)}var zae=We(Fae,[["render",Bae]]);const Vae=me({name:"ElCascaderMenu",components:{Loading:Xa,ElIcon:_t,ElScrollbar:Ya,ElCascaderNode:zae},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Lt(),{t:n}=kn(),s=af();let o=null,r=null;const a=Ze(l$),i=L(null),l=_(()=>!e.nodes.length),u=_(()=>!a.initialLoaded),c=_(()=>`cascader-menu-${s}-${e.index}`),d=m=>{o=m.target},f=m=>{if(!(!a.isHoverMenu||!o||!i.value))if(o.contains(m.target)){h();const g=t.vnode.el,{left:v}=g.getBoundingClientRect(),{offsetWidth:b,offsetHeight:$}=g,y=m.clientX-v,w=o.offsetTop,C=w+o.offsetHeight;i.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${y} ${w} L${b} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${y} ${C} L${b} ${$} V${C} Z" />
        `}else r||(r=window.setTimeout(p,a.config.hoverThreshold))},h=()=>{!r||(clearTimeout(r),r=null)},p=()=>{!i.value||(i.value.innerHTML="",h())};return{panel:a,hoverZone:i,isEmpty:l,isLoading:u,menuId:c,t:n,handleExpand:d,handleMouseMove:f,clearHoverZone:p}}}),Wae={key:0,class:"el-cascader-menu__empty-text"},Hae={key:1,class:"el-cascader-menu__empty-text"},Uae={key:2,ref:"hoverZone",class:"el-cascader-menu__hover-zone"};function Gae(e,t,n,s,o,r){const a=re("el-cascader-node"),i=re("loading"),l=re("el-icon"),u=re("el-scrollbar");return T(),ve(u,{key:e.menuId,tag:"ul",role:"menu",class:"el-cascader-menu","wrap-class":"el-cascader-menu__wrap","view-class":["el-cascader-menu__list",e.isEmpty&&"is-empty"],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:oe(()=>{var c;return[(T(!0),B(it,null,Yt(e.nodes,d=>(T(),ve(a,{key:d.uid,node:d,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(T(),B("div",Wae,[le(l,{size:"14",class:"is-loading"},{default:oe(()=>[le(i)]),_:1}),jt(" "+Fe(e.t("el.cascader.loading")),1)])):e.isEmpty?(T(),B("div",Hae,Fe(e.t("el.cascader.noData")),1)):((c=e.panel)==null?void 0:c.isHoverMenu)?(T(),B("svg",Uae,null,512)):ce("v-if",!0)]}),_:1},8,["view-class","onMousemove","onMouseleave"])}var Kae=We(Vae,[["render",Gae]]),u$=(e=>(e.CLICK="click",e.HOVER="hover",e))(u$||{});let jae=0;const qae=e=>{const t=[e];let{parent:n}=e;for(;n;)t.unshift(n),n=n.parent;return t};class pc{constructor(t,n,s,o=!1){this.data=t,this.config=n,this.parent=s,this.root=o,this.uid=jae++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:r,label:a,children:i}=n,l=t[i],u=qae(this);this.level=o?0:s?s.level+1:1,this.value=t[r],this.label=t[a],this.pathNodes=u,this.pathValues=u.map(c=>c.value),this.pathLabels=u.map(c=>c.label),this.childrenData=l,this.children=(l||[]).map(c=>new pc(c,n,this)),this.loaded=!n.lazy||this.isLeaf||!uf(l)}get isDisabled(){const{data:t,parent:n,config:s}=this,{disabled:o,checkStrictly:r}=s;return(Pt(o)?o(t,this):!!t[o])||!r&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:t,config:n,childrenData:s,loaded:o}=this,{lazy:r,leaf:a}=n,i=Pt(a)?a(t,this):t[a];return lf(i)?r&&!o?!1:!(Array.isArray(s)&&s.length):!!i}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:n,children:s}=this,o=new pc(t,this.config,this);return Array.isArray(n)?n.push(t):this.childrenData=[t],s.push(o),o}calcText(t,n){const s=t?this.pathLabels.join(n):this.label;return this.text=s,s}broadcast(t,...n){const s=`onParent${Ko(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...n),o[s]&&o[s](...n))})}emit(t,...n){const{parent:s}=this,o=`onChild${Ko(t)}`;s&&(s[o]&&s[o](...n),s.emit(t,...n))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,n=t.filter(o=>!o.isDisabled),s=n.length?n.every(o=>o.checked):!1;this.setCheckState(s)}setCheckState(t){const n=this.children.length,s=this.children.reduce((o,r)=>{const a=r.checked?1:r.indeterminate?.5:0;return o+a},0);this.checked=this.loaded&&this.children.every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&s!==n&&s>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:n,multiple:s}=this.config;n||!s?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Ky=(e,t)=>e.reduce((n,s)=>(s.isLeaf?n.push(s):(!t&&n.push(s),n=n.concat(Ky(s.children,t))),n),[]);class GI{constructor(t,n){this.config=n;const s=(t||[]).map(o=>new pc(o,this.config));this.nodes=s,this.allNodes=Ky(s,!1),this.leafNodes=Ky(s,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,n){const s=n?n.appendChild(t):new pc(t,this.config);n||this.nodes.push(s),this.allNodes.push(s),s.isLeaf&&this.leafNodes.push(s)}appendNodes(t,n){t.forEach(s=>this.appendNode(s,n))}getNodeByValue(t,n=!1){return!t&&t!==0?null:this.getFlattedNodes(n).filter(o=>jr(o.value,t)||jr(o.pathValues,t))[0]||null}getSameNode(t){return t&&this.getFlattedNodes(!1).filter(({value:s,level:o})=>jr(t.value,s)&&t.level===o)[0]||null}}const r_={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},Xae={expandTrigger:u$.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:on,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Yae=e=>_(()=>ut(ut({},Xae),e.props)),KI=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Zae=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():LD(e)&&e.click()},Jae=(e,t)=>{const n=t.slice(0),s=n.map(r=>r.uid),o=e.reduce((r,a)=>{const i=s.indexOf(a.uid);return i>-1&&(r.push(a),n.splice(i,1),s.splice(i,1)),r},[]);return o.push(...n),o},Qae=me({name:"ElCascaderPanel",components:{ElCascaderMenu:Kae},props:Ut(ut({},r_),{border:{type:Boolean,default:!0},renderLabel:Function}),emits:[Ft,Ms,"close","expand-change"],setup(e,{emit:t,slots:n}){let s=!1;const o=Yae(e);let r=null;const a=L(!0),i=L([]),l=L(null),u=L([]),c=L(null),d=L([]),f=_(()=>o.value.expandTrigger===u$.HOVER),h=_(()=>e.renderLabel||n.default),p=()=>{const{options:N}=e,A=o.value;s=!1,r=new GI(N,A),u.value=[r.getNodes()],A.lazy&&uf(e.options)?(a.value=!1,m(void 0,D=>{D&&(r=new GI(D,A),u.value=[r.getNodes()]),a.value=!0,k(!1,!0)})):k(!1,!0)},m=(N,A)=>{const D=o.value;N=N||new pc({},D,void 0,!0),N.loading=!0;const M=F=>{const R=N,P=R.root?null:R;F&&(r==null||r.appendNodes(F,P)),R.loading=!1,R.loaded=!0,R.childrenData=R.childrenData||[],A&&A(F)};D.lazyLoad(N,M)},g=(N,A)=>{var D;const{level:M}=N,F=u.value.slice(0,M);let R;N.isLeaf?R=N.pathNodes[M-2]:(R=N,F.push(N.children)),((D=c.value)==null?void 0:D.uid)!==(R==null?void 0:R.uid)&&(c.value=N,u.value=F,!A&&t("expand-change",(N==null?void 0:N.pathValues)||[]))},v=(N,A,D=!0)=>{const{checkStrictly:M,multiple:F}=o.value,R=d.value[0];s=!0,!F&&(R==null||R.doCheck(!1)),N.doCheck(A),C(),D&&!F&&!M&&t("close"),!D&&!F&&!M&&b(N)},b=N=>{!N||(N=N.parent,b(N),N&&g(N))},$=N=>r==null?void 0:r.getFlattedNodes(N),y=N=>{var A;return(A=$(N))==null?void 0:A.filter(D=>D.checked!==!1)},w=()=>{d.value.forEach(N=>N.doCheck(!1)),C()},C=()=>{var N;const{checkStrictly:A,multiple:D}=o.value,M=d.value,F=y(!A),R=Jae(M,F),P=R.map(V=>V.valueByOption);d.value=R,l.value=D?P:(N=P[0])!=null?N:null},k=(N=!1,A=!1)=>{const{modelValue:D}=e,{lazy:M,multiple:F,checkStrictly:R}=o.value,P=!R;if(!(!a.value||s||!A&&jr(D,l.value)))if(M&&!N){const G=Qx(AD(Rl(D))).map(se=>r==null?void 0:r.getNodeByValue(se)).filter(se=>!!se&&!se.loaded&&!se.loading);G.length?G.forEach(se=>{m(se,()=>k(!1,A))}):k(!0,A)}else{const V=F?Rl(D):[D],G=Qx(V.map(se=>r==null?void 0:r.getNodeByValue(se,P)));S(G,!1),l.value=D}},S=(N,A=!0)=>{const{checkStrictly:D}=o.value,M=d.value,F=N.filter(V=>!!V&&(D||V.isLeaf)),R=r==null?void 0:r.getSameNode(c.value),P=A&&R||F[0];P?P.pathNodes.forEach(V=>g(V,!0)):c.value=null,M.forEach(V=>V.doCheck(!1)),F.forEach(V=>V.doCheck(!0)),d.value=F,dt(E)},E=()=>{!qt||i.value.forEach(N=>{const A=N==null?void 0:N.$el;if(A){const D=A.querySelector(".el-scrollbar__wrap"),M=A.querySelector(".el-cascader-node.is-active")||A.querySelector(".el-cascader-node.in-active-path");qR(D,M)}})},x=N=>{const A=N.target,{code:D}=N;switch(D){case Qe.up:case Qe.down:{N.preventDefault();const M=D===Qe.up?-1:1;em(BD(A,M,'.el-cascader-node[tabindex="-1"]'));break}case Qe.left:{N.preventDefault();const M=i.value[KI(A)-1],F=M==null?void 0:M.$el.querySelector('.el-cascader-node[aria-expanded="true"]');em(F);break}case Qe.right:{N.preventDefault();const M=i.value[KI(A)+1],F=M==null?void 0:M.$el.querySelector('.el-cascader-node[tabindex="-1"]');em(F);break}case Qe.enter:Zae(A);break;case Qe.esc:case Qe.tab:t("close");break}};return zt(l$,Cn({config:o,expandingNode:c,checkedNodes:d,isHoverMenu:f,initialLoaded:a,renderLabelFn:h,lazyLoad:m,expandNode:g,handleCheckChange:v})),Oe([o,()=>e.options],p,{deep:!0,immediate:!0}),Oe(()=>e.modelValue,()=>{s=!1,k()}),Oe(l,N=>{jr(N,e.modelValue)||(t(Ft,N),t(Ms,N))}),xA(()=>i.value=[]),Mt(()=>!uf(e.modelValue)&&k()),{menuList:i,menus:u,checkedNodes:d,handleKeyDown:x,handleCheckChange:v,getFlattedNodes:$,getCheckedNodes:y,clearCheckedNodes:w,calculateCheckedValue:C,scrollToExpandingNode:E}}});function eie(e,t,n,s,o,r){const a=re("el-cascader-menu");return T(),B("div",{class:q(["el-cascader-panel",e.border&&"is-bordered"]),onKeydown:t[0]||(t[0]=(...i)=>e.handleKeyDown&&e.handleKeyDown(...i))},[(T(!0),B(it,null,Yt(e.menus,(i,l)=>(T(),ve(a,{key:l,ref_for:!0,ref:u=>e.menuList[l]=u,index:l,nodes:i},null,8,["index","nodes"]))),128))],34)}var im=We(Qae,[["render",eie]]);im.install=e=>{e.component(im.name,im)};const a_=im,tie=a_,nie=gt({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:["large","default","small"]},effect:{type:String,values:["dark","light","plain"],default:"light"}}),sie={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},oie=me({name:"ElTag",components:{ElIcon:_t,Close:Zr},props:nie,emits:sie,setup(e,{emit:t}){const n=ds(),s=Dt("tag"),o=_(()=>{const{type:i,hit:l,effect:u,closable:c}=e;return[s.b(),s.is("closable",c),s.m(i),s.m(n.value),s.m(u),s.is("hit",l)]});return{ns:s,classes:o,handleClose:i=>{i.stopPropagation(),t("close",i)},handleClick:i=>{t("click",i)}}}});function rie(e,t,n,s,o,r){const a=re("close"),i=re("el-icon");return e.disableTransitions?(T(),ve(cs,{key:1,name:`${e.ns.namespace.value}-zoom-in-center`},{default:oe(()=>[W("span",{class:q(e.classes),style:nt({backgroundColor:e.color}),onClick:t[1]||(t[1]=(...l)=>e.handleClick&&e.handleClick(...l))},[W("span",{class:q(e.ns.e("content"))},[_e(e.$slots,"default")],2),e.closable?(T(),ve(i,{key:0,class:q(e.ns.e("close")),onClick:e.handleClose},{default:oe(()=>[le(a)]),_:1},8,["class","onClick"])):ce("v-if",!0)],6)]),_:3},8,["name"])):(T(),B("span",{key:0,class:q(e.classes),style:nt({backgroundColor:e.color}),onClick:t[0]||(t[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[W("span",{class:q(e.ns.e("content"))},[_e(e.$slots,"default")],2),e.closable?(T(),ve(i,{key:0,class:q(e.ns.e("close")),onClick:e.handleClose},{default:oe(()=>[le(a)]),_:1},8,["class","onClick"])):ce("v-if",!0)],6))}var aie=We(oie,[["render",rie]]);const Gg=Vt(aie),iie=40,lie={large:36,default:32,small:28},uie={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:t,placement:n}=e;["right","left","bottom","top"].includes(n)||(t.arrow.x=35)},requires:["arrow"]}]},cie=me({name:"ElCascader",components:{ElCascaderPanel:a_,ElInput:Tr,ElTooltip:Bo,ElScrollbar:Ya,ElTag:Gg,ElIcon:_t,CircleClose:Ha,Check:lc,ArrowDown:ou},directives:{Clickoutside:Pi},props:Ut(ut({},r_),{size:{type:String,validator:Oo},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},popperAppendToBody:{type:Boolean,default:!0}}),emits:[Ft,Ms,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:t}){let n=0,s=0;const{t:o}=kn(),r=Ze(Lo,{}),a=Ze(oa,{}),i=L(null),l=L(null),u=L(null),c=L(null),d=L(null),f=L(!1),h=L(!1),p=L(!1),m=L(""),g=L(""),v=L([]),b=L([]),$=L(!1),y=_(()=>e.disabled||r.disabled),w=_(()=>e.placeholder||o("el.cascader.placeholder")),C=ds(),k=_(()=>["small"].includes(C.value)?"small":"default"),S=_(()=>!!e.props.multiple),E=_(()=>!e.filterable||S.value),x=_(()=>S.value?g.value:m.value),N=_(()=>{var H;return((H=c.value)==null?void 0:H.checkedNodes)||[]}),A=_(()=>!e.clearable||y.value||p.value||!h.value?!1:!!N.value.length),D=_(()=>{const{showAllLevels:H,separator:ne}=e,ye=N.value;return ye.length?S.value?" ":ye[0].calcText(H,ne):""}),M=_({get(){return e.modelValue},set(H){var ne;t(Ft,H),t(Ms,H),(ne=a.validate)==null||ne.call(a,"change")}}),F=_(()=>{var H,ne;return(ne=(H=i.value)==null?void 0:H.popperRef)==null?void 0:ne.contentRef}),R=H=>{var ne,ye,J;if(!y.value&&(H=H!=null?H:!f.value,H!==f.value)){if(f.value=H,(ye=(ne=l.value)==null?void 0:ne.input)==null||ye.setAttribute("aria-expanded",`${H}`),H)P(),dt((J=c.value)==null?void 0:J.scrollToExpandingNode);else if(e.filterable){const{value:Ne}=D;m.value=Ne,g.value=Ne}t("visible-change",H)}},P=()=>{dt(()=>{var H;(H=i.value)==null||H.updatePopper()})},V=()=>{p.value=!1},G=H=>{const{showAllLevels:ne,separator:ye}=e;return{node:H,key:H.uid,text:H.calcText(ne,ye),hitState:!1,closable:!y.value&&!H.isDisabled}},se=H=>{var ne;const ye=H.node;ye.doCheck(!1),(ne=c.value)==null||ne.calculateCheckedValue(),t("remove-tag",ye.valueByOption)},ke=()=>{if(!S.value)return;const H=N.value,ne=[];if(H.length){const[ye,...J]=H,Ne=J.length;ne.push(G(ye)),Ne&&(e.collapseTags?ne.push({key:-1,text:`+ ${Ne}`,closable:!1}):J.forEach(Ie=>ne.push(G(Ie))))}v.value=ne},te=()=>{var H,ne;const{filterMethod:ye,showAllLevels:J,separator:Ne}=e,Ie=(ne=(H=c.value)==null?void 0:H.getFlattedNodes(!e.props.checkStrictly))==null?void 0:ne.filter(fe=>fe.isDisabled?!1:(fe.calcText(J,Ne),ye(fe,x.value)));S.value&&v.value.forEach(fe=>{fe.hitState=!1}),p.value=!0,b.value=Ie,P()},pe=()=>{var H;let ne;p.value&&d.value?ne=d.value.$el.querySelector(".el-cascader__suggestion-item"):ne=(H=c.value)==null?void 0:H.$el.querySelector('.el-cascader-node[tabindex="-1"]'),ne&&(ne.focus(),!p.value&&ne.click())},ae=()=>{var H,ne;const ye=(H=l.value)==null?void 0:H.input,J=u.value,Ne=(ne=d.value)==null?void 0:ne.$el;if(!(!qt||!ye)){if(Ne){const Ie=Ne.querySelector(".el-cascader__suggestion-list");Ie.style.minWidth=`${ye.offsetWidth}px`}if(J){const{offsetHeight:Ie}=J,fe=v.value.length>0?`${Math.max(Ie+6,n)}px`:`${n}px`;ye.style.height=fe,P()}}},K=H=>{var ne;return(ne=c.value)==null?void 0:ne.getCheckedNodes(H)},X=H=>{P(),t("expand-change",H)},Y=H=>{var ne;const ye=(ne=H.target)==null?void 0:ne.value;if(H.type==="compositionend")$.value=!1,dt(()=>Q(ye));else{const J=ye[ye.length-1]||"";$.value=!Wg(J)}},ie=H=>{if(!$.value)switch(H.code){case Qe.enter:R();break;case Qe.down:R(!0),dt(pe),H.preventDefault();break;case Qe.esc:case Qe.tab:R(!1);break}},xe=()=>{var H;(H=c.value)==null||H.clearCheckedNodes(),R(!1)},Le=H=>{var ne,ye;const{checked:J}=H;S.value?(ne=c.value)==null||ne.handleCheckChange(H,!J,!1):(!J&&((ye=c.value)==null||ye.handleCheckChange(H,!0,!1)),R(!1))},Be=H=>{const ne=H.target,{code:ye}=H;switch(ye){case Qe.up:case Qe.down:{const J=ye===Qe.up?-1:1;em(BD(ne,J,'.el-cascader__suggestion-item[tabindex="-1"]'));break}case Qe.enter:ne.click();break;case Qe.esc:case Qe.tab:R(!1);break}},Pe=()=>{const H=v.value,ne=H[H.length-1];s=g.value?0:s+1,!(!ne||!s)&&(ne.hitState?se(ne):ne.hitState=!0)},U=_o(()=>{const{value:H}=x;if(!H)return;const ne=e.beforeFilter(H);sc(ne)?ne.then(te).catch(()=>{}):ne!==!1?te():V()},e.debounce),Q=(H,ne)=>{!f.value&&R(!0),!(ne==null?void 0:ne.isComposing)&&(H?U():V())};return Oe(p,P),Oe([N,y],ke),Oe(v,()=>{dt(()=>ae())}),Oe(D,H=>m.value=H,{immediate:!0}),Mt(()=>{var H;const ne=(H=l.value)==null?void 0:H.$el;n=(ne==null?void 0:ne.offsetHeight)||lie[C.value]||iie,Li(ne,ae)}),os(()=>{var H;Bi((H=l.value)==null?void 0:H.$el,ae)}),{popperOptions:uie,tooltipRef:i,popperPaneRef:F,input:l,tagWrapper:u,panel:c,suggestionPanel:d,popperVisible:f,inputHover:h,inputPlaceholder:w,filtering:p,presentText:D,checkedValue:M,inputValue:m,searchInputValue:g,presentTags:v,suggestions:b,isDisabled:y,isOnComposition:$,realSize:C,tagSize:k,multiple:S,readonly:E,clearBtnVisible:A,t:o,togglePopperVisible:R,hideSuggestionPanel:V,deleteTag:se,focusFirstNode:pe,getCheckedNodes:K,handleExpandChange:X,handleKeyDown:ie,handleComposition:Y,handleClear:xe,handleSuggestionClick:Le,handleSuggestionKeyDown:Be,handleDelete:Pe,handleInput:Q}}}),die={key:0,ref:"tagWrapper",class:"el-cascader__tags"},fie=["placeholder"],hie=["onClick"],pie={class:"el-cascader__empty-text"};function mie(e,t,n,s,o,r){const a=re("circle-close"),i=re("el-icon"),l=re("arrow-down"),u=re("el-input"),c=re("el-tag"),d=re("el-cascader-panel"),f=re("check"),h=re("el-scrollbar"),p=re("el-tooltip"),m=wo("clickoutside");return T(),ve(p,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":t[17]||(t[17]=g=>e.popperVisible=g),"append-to-body":e.popperAppendToBody,"popper-class":`el-cascader__dropdown ${e.popperClass}`,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:"el-zoom-in-top",effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:oe(()=>[$t((T(),B("div",{class:q(["el-cascader",e.realSize&&`el-cascader--${e.realSize}`,{"is-disabled":e.isDisabled},e.$attrs.class]),style:nt(e.$attrs.style),onClick:t[11]||(t[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:t[12]||(t[12]=(...g)=>e.handleKeyDown&&e.handleKeyDown(...g)),onMouseenter:t[13]||(t[13]=g=>e.inputHover=!0),onMouseleave:t[14]||(t[14]=g=>e.inputHover=!1)},[le(u,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":t[1]||(t[1]=g=>e.inputValue=g),placeholder:e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:q({"is-focus":e.popperVisible}),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:t[2]||(t[2]=g=>e.$emit("focus",g)),onBlur:t[3]||(t[3]=g=>e.$emit("blur",g)),onInput:e.handleInput},{suffix:oe(()=>[e.clearBtnVisible?(T(),ve(i,{key:"clear",class:"el-input__icon icon-circle-close",onClick:ht(e.handleClear,["stop"])},{default:oe(()=>[le(a)]),_:1},8,["onClick"])):(T(),ve(i,{key:"arrow-down",class:q(["el-input__icon","icon-arrow-down",e.popperVisible&&"is-reverse"]),onClick:t[0]||(t[0]=ht(g=>e.togglePopperVisible(),["stop"]))},{default:oe(()=>[le(l)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(T(),B("div",die,[(T(!0),B(it,null,Yt(e.presentTags,g=>(T(),ve(c,{key:g.key,type:"info",size:e.tagSize,hit:g.hitState,closable:g.closable,"disable-transitions":"",onClose:v=>e.deleteTag(g)},{default:oe(()=>[W("span",null,Fe(g.text),1)]),_:2},1032,["size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?$t((T(),B("input",{key:0,"onUpdate:modelValue":t[4]||(t[4]=g=>e.searchInputValue=g),type:"text",class:"el-cascader__search-input",placeholder:e.presentText?"":e.inputPlaceholder,onInput:t[5]||(t[5]=g=>e.handleInput(e.searchInputValue,g)),onClick:t[6]||(t[6]=ht(g=>e.togglePopperVisible(!0),["stop"])),onKeydown:t[7]||(t[7]=Ht((...g)=>e.handleDelete&&e.handleDelete(...g),["delete"])),onCompositionstart:t[8]||(t[8]=(...g)=>e.handleComposition&&e.handleComposition(...g)),onCompositionupdate:t[9]||(t[9]=(...g)=>e.handleComposition&&e.handleComposition(...g)),onCompositionend:t[10]||(t[10]=(...g)=>e.handleComposition&&e.handleComposition(...g))},null,40,fie)),[[Dw,e.searchInputValue]]):ce("v-if",!0)],512)):ce("v-if",!0)],38)),[[m,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:oe(()=>[$t(le(d,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":t[15]||(t[15]=g=>e.checkedValue=g),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:t[16]||(t[16]=g=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[Qt,!e.filtering]]),e.filterable?$t((T(),ve(h,{key:0,ref:"suggestionPanel",tag:"ul",class:"el-cascader__suggestion-panel","view-class":"el-cascader__suggestion-list",onKeydown:e.handleSuggestionKeyDown},{default:oe(()=>[e.suggestions.length?(T(!0),B(it,{key:0},Yt(e.suggestions,g=>(T(),B("li",{key:g.uid,class:q(["el-cascader__suggestion-item",g.checked&&"is-checked"]),tabindex:-1,onClick:v=>e.handleSuggestionClick(g)},[W("span",null,Fe(g.text),1),g.checked?(T(),ve(i,{key:0},{default:oe(()=>[le(f)]),_:1})):ce("v-if",!0)],10,hie))),128)):_e(e.$slots,"empty",{key:1},()=>[W("li",pie,Fe(e.t("el.cascader.noMatch")),1)])]),_:3},8,["onKeydown"])),[[Qt,e.filtering]]):ce("v-if",!0)]),_:3},8,["visible","append-to-body","popper-class","popper-options","onHide"])}var lm=We(cie,[["render",mie]]);lm.install=e=>{e.component(lm.name,lm)};const gie=lm,vie=gie,bie=gt({checked:{type:Boolean,default:!1}}),yie={"update:checked":e=>Gr(e),change:e=>Gr(e)},wie=me({name:"ElCheckTag",props:bie,emits:yie,setup(e,{emit:t}){return{ns:Dt("check-tag"),onChange:()=>{const o=!e.checked;t("change",o),t("update:checked",o)}}}});function $ie(e,t,n,s,o,r){return T(),B("span",{class:q([e.ns.b(),e.ns.is("checked",e.checked)]),onClick:t[0]||(t[0]=(...a)=>e.onChange&&e.onChange(...a))},[_e(e.$slots,"default")],2)}var Cie=We(wie,[["render",$ie]]);const kie=Vt(Cie),Sie=gt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Je([Number,Object]),default:()=>vs({})},sm:{type:Je([Number,Object]),default:()=>vs({})},md:{type:Je([Number,Object]),default:()=>vs({})},lg:{type:Je([Number,Object]),default:()=>vs({})},xl:{type:Je([Number,Object]),default:()=>vs({})}});var xie=me({name:"ElCol",props:Sie,setup(e,{slots:t}){const{gutter:n}=Ze("ElRow",{gutter:{value:0}}),s=_(()=>n.value?{paddingLeft:`${n.value/2}px`,paddingRight:`${n.value/2}px`}:{}),o=_(()=>{const r=[];return["span","offset","pull","push"].forEach(l=>{const u=e[l];typeof u=="number"&&(l==="span"?r.push(`el-col-${e[l]}`):u>0&&r.push(`el-col-${l}-${e[l]}`))}),["xs","sm","md","lg","xl"].forEach(l=>{if(typeof e[l]=="number")r.push(`el-col-${l}-${e[l]}`);else if(typeof e[l]=="object"){const u=e[l];Object.keys(u).forEach(c=>{r.push(c!=="span"?`el-col-${l}-${c}-${u[c]}`:`el-col-${l}-${u[c]}`)})}}),n.value&&r.push("is-guttered"),r});return()=>He(e.tag,{class:["el-col",o.value],style:s.value},[_e(t,"default")])}});const Iie=Vt(xie),Eie=me({name:"ElCollapse",props:{accordion:Boolean,modelValue:{type:[Array,String,Number],default:()=>[]}},emits:[Ft,Ms],setup(e,{emit:t}){const n=L([].concat(e.modelValue)),s=r=>{n.value=[].concat(r);const a=e.accordion?n.value[0]:n.value;t(Ft,a),t(Ms,a)},o=r=>{if(e.accordion)s((n.value[0]||n.value[0]===0)&&n.value[0]===r?"":r);else{const a=n.value.slice(0),i=a.indexOf(r);i>-1?a.splice(i,1):a.push(r),s(a)}};return Oe(()=>e.modelValue,()=>{n.value=[].concat(e.modelValue)},{deep:!0}),zt("collapse",{activeNames:n,handleItemClick:o}),{activeNames:n,setActiveNames:s,handleItemClick:o}}}),Tie={class:"el-collapse",role:"tablist","aria-multiselectable":"true"};function Nie(e,t,n,s,o,r){return T(),B("div",Tie,[_e(e.$slots,"default")])}var Aie=We(Eie,[["render",Nie]]);const Die=me({name:"ElCollapseTransition",setup(){return{on:{beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){e.dataset.oldOverflow=e.style.overflow,e.scrollHeight!==0?(e.style.maxHeight=`${e.scrollHeight}px`,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow="hidden"},leave(e){e.scrollHeight!==0&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}}}}});function Rie(e,t,n,s,o,r){return T(),ve(cs,Us({name:"el-collapse-transition"},cW(e.on)),{default:oe(()=>[_e(e.$slots,"default")]),_:3},16)}var um=We(Die,[["render",Rie]]);um.install=e=>{e.component(um.name,um)};const Kg=um,_ie=Kg,Oie=me({name:"ElCollapseItem",components:{ElCollapseTransition:Kg,ElIcon:_t,ArrowRight:Er},props:{title:{type:String,default:""},name:{type:[String,Number],default:()=>af()},disabled:Boolean},setup(e){const t=Ze("collapse"),n=L({height:"auto",display:"block"}),s=L(0),o=L(!1),r=L(!1),a=L(af());return{isActive:_(()=>(t==null?void 0:t.activeNames.value.indexOf(e.name))>-1),contentWrapStyle:n,contentHeight:s,focusing:o,isClick:r,id:a,handleFocus:()=>{setTimeout(()=>{r.value?r.value=!1:o.value=!0},50)},handleHeaderClick:()=>{e.disabled||(t==null||t.handleItemClick(e.name),o.value=!1,r.value=!0)},handleEnterClick:()=>{t==null||t.handleItemClick(e.name)},collapse:t}}}),Mie=["aria-expanded","aria-controls","aria-describedby"],Fie=["id","tabindex"],Pie=["id","aria-hidden","aria-labelledby"],Lie={class:"el-collapse-item__content"};function Bie(e,t,n,s,o,r){const a=re("arrow-right"),i=re("el-icon"),l=re("el-collapse-transition");return T(),B("div",{class:q(["el-collapse-item",{"is-active":e.isActive,"is-disabled":e.disabled}])},[W("div",{role:"tab","aria-expanded":e.isActive,"aria-controls":`el-collapse-content-${e.id}`,"aria-describedby":`el-collapse-content-${e.id}`},[W("div",{id:`el-collapse-head-${e.id}`,class:q(["el-collapse-item__header",{focusing:e.focusing,"is-active":e.isActive}]),role:"button",tabindex:e.disabled?-1:0,onClick:t[0]||(t[0]=(...u)=>e.handleHeaderClick&&e.handleHeaderClick(...u)),onKeyup:t[1]||(t[1]=Ht(ht((...u)=>e.handleEnterClick&&e.handleEnterClick(...u),["stop"]),["space","enter"])),onFocus:t[2]||(t[2]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[3]||(t[3]=u=>e.focusing=!1)},[_e(e.$slots,"title",{},()=>[jt(Fe(e.title),1)]),le(i,{class:q(["el-collapse-item__arrow",{"is-active":e.isActive}])},{default:oe(()=>[le(a)]),_:1},8,["class"])],42,Fie)],8,Mie),le(l,null,{default:oe(()=>[$t(W("div",{id:`el-collapse-content-${e.id}`,class:"el-collapse-item__wrap",role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":`el-collapse-head-${e.id}`},[W("div",Lie,[_e(e.$slots,"default")])],8,Pie),[[Qt,e.isActive]])]),_:3})],2)}var i_=We(Oie,[["render",Bie]]);const zie=Vt(Aie,{CollapseItem:i_}),Vie=Jn(i_);let Sb=!1;function hf(e,t){if(!qt)return;const n=function(r){var a;(a=t.drag)==null||a.call(t,r)},s=function(r){var a;zn(document,"mousemove",n),zn(document,"mouseup",s),zn(document,"touchmove",n),zn(document,"touchend",s),document.onselectstart=null,document.ondragstart=null,Sb=!1,(a=t.end)==null||a.call(t,r)},o=function(r){var a;Sb||(r.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,gn(document,"mousemove",n),gn(document,"mouseup",s),gn(document,"touchmove",n),gn(document,"touchend",s),Sb=!0,(a=t.start)==null||a.call(t,r))};gn(e,"mousedown",o),gn(e,"touchstart",o)}const Wie=me({name:"ElColorAlphaSlider",props:{color:{type:Object,required:!0},vertical:{type:Boolean,default:!1}},setup(e){const t=Lt(),n=uo(null),s=uo(null),o=L(0),r=L(0),a=L(null);Oe(()=>e.color.get("alpha"),()=>{f()}),Oe(()=>e.color.value,()=>{f()});function i(){if(e.vertical)return 0;const h=t.vnode.el,p=e.color.get("alpha");return h?Math.round(p*(h.offsetWidth-n.value.offsetWidth/2)/100):0}function l(){const h=t.vnode.el;if(!e.vertical)return 0;const p=e.color.get("alpha");return h?Math.round(p*(h.offsetHeight-n.value.offsetHeight/2)/100):0}function u(){if(e.color&&e.color.value){const{r:h,g:p,b:m}=e.color.toRgb();return`linear-gradient(to right, rgba(${h}, ${p}, ${m}, 0) 0%, rgba(${h}, ${p}, ${m}, 1) 100%)`}return null}function c(h){h.target!==n.value&&d(h)}function d(h){const m=t.vnode.el.getBoundingClientRect(),{clientX:g,clientY:v}=Kw(h);if(e.vertical){let b=v-m.top;b=Math.max(n.value.offsetHeight/2,b),b=Math.min(b,m.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((b-n.value.offsetHeight/2)/(m.height-n.value.offsetHeight)*100))}else{let b=g-m.left;b=Math.max(n.value.offsetWidth/2,b),b=Math.min(b,m.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((b-n.value.offsetWidth/2)/(m.width-n.value.offsetWidth)*100))}}function f(){o.value=i(),r.value=l(),a.value=u()}return Mt(()=>{const h={drag:p=>{d(p)},end:p=>{d(p)}};hf(s.value,h),hf(n.value,h),f()}),{thumb:n,bar:s,thumbLeft:o,thumbTop:r,background:a,handleClick:c,update:f}}});function Hie(e,t,n,s,o,r){return T(),B("div",{class:q(["el-color-alpha-slider",{"is-vertical":e.vertical}])},[W("div",{ref:"bar",class:"el-color-alpha-slider__bar",style:nt({background:e.background}),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},null,4),W("div",{ref:"thumb",class:"el-color-alpha-slider__thumb",style:nt({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,4)],2)}var Uie=We(Wie,[["render",Hie]]);const Gie=me({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=Lt(),n=L(null),s=L(null),o=L(0),r=L(0),a=_(()=>e.color.get("hue"));Oe(()=>a.value,()=>{d()});function i(f){f.target!==n.value&&l(f)}function l(f){const p=t.vnode.el.getBoundingClientRect(),{clientX:m,clientY:g}=Kw(f);let v;if(e.vertical){let b=g-p.top;b=Math.min(b,p.height-n.value.offsetHeight/2),b=Math.max(n.value.offsetHeight/2,b),v=Math.round((b-n.value.offsetHeight/2)/(p.height-n.value.offsetHeight)*360)}else{let b=m-p.left;b=Math.min(b,p.width-n.value.offsetWidth/2),b=Math.max(n.value.offsetWidth/2,b),v=Math.round((b-n.value.offsetWidth/2)/(p.width-n.value.offsetWidth)*360)}e.color.set("hue",v)}function u(){const f=t.vnode.el;if(e.vertical)return 0;const h=e.color.get("hue");return f?Math.round(h*(f.offsetWidth-n.value.offsetWidth/2)/360):0}function c(){const f=t.vnode.el;if(!e.vertical)return 0;const h=e.color.get("hue");return f?Math.round(h*(f.offsetHeight-n.value.offsetHeight/2)/360):0}function d(){o.value=u(),r.value=c()}return Mt(()=>{const f={drag:h=>{l(h)},end:h=>{l(h)}};hf(s.value,f),hf(n.value,f),d()}),{bar:s,thumb:n,thumbLeft:o,thumbTop:r,hueValue:a,handleClick:i,update:d}}});function Kie(e,t,n,s,o,r){return T(),B("div",{class:q(["el-color-hue-slider",{"is-vertical":e.vertical}])},[W("div",{ref:"bar",class:"el-color-hue-slider__bar",onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},null,512),W("div",{ref:"thumb",class:"el-color-hue-slider__thumb",style:nt({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,4)],2)}var jie=We(Gie,[["render",Kie]]);const l_=Symbol(),qie=()=>Ze(l_),jI=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},Xie=function(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1},Yie=function(e){return typeof e=="string"&&e.indexOf("%")!==-1},Yu=function(e,t){Xie(e)&&(e="100%");const n=Yie(e);return e=Math.min(t,Math.max(0,parseFloat(`${e}`))),n&&(e=parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)},qI={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},cm=function(e){e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${qI[t]||t}${qI[n]||n}`},XI=function({r:e,g:t,b:n}){return isNaN(e)||isNaN(t)||isNaN(n)?"":`#${cm(e)}${cm(t)}${cm(n)}`},xb={A:10,B:11,C:12,D:13,E:14,F:15},ol=function(e){return e.length===2?(xb[e[0].toUpperCase()]||+e[0])*16+(xb[e[1].toUpperCase()]||+e[1]):xb[e[1].toUpperCase()]||+e[1]},Zie=function(e,t,n){t=t/100,n=n/100;let s=t;const o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,s*=o<=1?o:2-o;const r=(n+t)/2,a=n===0?2*s/(o+s):2*t/(n+t);return{h:e,s:a*100,v:r*100}},YI=function(e,t,n){e=Yu(e,255),t=Yu(t,255),n=Yu(n,255);const s=Math.max(e,t,n),o=Math.min(e,t,n);let r;const a=s,i=s-o,l=s===0?0:i/s;if(s===o)r=0;else{switch(s){case e:{r=(t-n)/i+(t<n?6:0);break}case t:{r=(n-e)/i+2;break}case n:{r=(e-t)/i+4;break}}r/=6}return{h:r*360,s:l*100,v:a*100}},pd=function(e,t,n){e=Yu(e,360)*6,t=Yu(t,100),n=Yu(n,100);const s=Math.floor(e),o=e-s,r=n*(1-t),a=n*(1-o*t),i=n*(1-(1-o)*t),l=s%6,u=[n,a,r,r,i,n][l],c=[i,n,n,a,r,r][l],d=[r,r,i,n,n,a][l];return{r:Math.round(u*255),g:Math.round(c*255),b:Math.round(d*255)}};class Vd{constructor(t){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",t=t||{};for(const n in t)Wt(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const s in t)Wt(t,s)&&this.set(s,t[s]);return}this[`_${t}`]=n,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return pd(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(s,o,r)=>{this._hue=Math.max(0,Math.min(360,s)),this._saturation=Math.max(0,Math.min(100,o)),this._value=Math.max(0,Math.min(100,r)),this.doOnChange()};if(t.indexOf("hsl")!==-1){const s=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));if(s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:o,s:r,v:a}=Zie(s[0],s[1],s[2]);n(o,r,a)}}else if(t.indexOf("hsv")!==-1){const s=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3&&n(s[0],s[1],s[2])}else if(t.indexOf("rgb")!==-1){const s=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));if(s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:o,s:r,v:a}=YI(s[0],s[1],s[2]);n(o,r,a)}}else if(t.indexOf("#")!==-1){const s=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(s))return;let o,r,a;s.length===3?(o=ol(s[0]+s[0]),r=ol(s[1]+s[1]),a=ol(s[2]+s[2])):(s.length===6||s.length===8)&&(o=ol(s.substring(0,2)),r=ol(s.substring(2,4)),a=ol(s.substring(4,6))),s.length===8?this._alpha=ol(s.substring(6))/255*100:(s.length===3||s.length===6)&&(this._alpha=100);const{h:i,s:l,v:u}=YI(o,r,a);n(i,l,u)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:n,_value:s,_alpha:o,format:r}=this;if(this.enableAlpha)switch(r){case"hsl":{const a=jI(t,n/100,s/100);this.value=`hsla(${t}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(n)}%, ${Math.round(s)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${XI(pd(t,n,s))}${cm(o*255/100)}`;break}default:{const{r:a,g:i,b:l}=pd(t,n,s);this.value=`rgba(${a}, ${i}, ${l}, ${this.get("alpha")/100})`}}else switch(r){case"hsl":{const a=jI(t,n/100,s/100);this.value=`hsl(${t}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(n)}%, ${Math.round(s)}%)`;break}case"rgb":{const{r:a,g:i,b:l}=pd(t,n,s);this.value=`rgb(${a}, ${i}, ${l})`;break}default:this.value=XI(pd(t,n,s))}}}const Jie=me({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const{currentColor:t}=qie(),n=L(o(e.colors,e.color));Oe(()=>t.value,r=>{const a=new Vd;a.fromString(r),n.value.forEach(i=>{i.selected=a.compare(i)})}),Ba(()=>{n.value=o(e.colors,e.color)});function s(r){e.color.fromString(e.colors[r])}function o(r,a){return r.map(i=>{const l=new Vd;return l.enableAlpha=!0,l.format="rgba",l.fromString(i),l.selected=l.value===a.value,l})}return{rgbaColors:n,handleSelect:s}}}),Qie={class:"el-color-predefine"},ele={class:"el-color-predefine__colors"},tle=["onClick"];function nle(e,t,n,s,o,r){return T(),B("div",Qie,[W("div",ele,[(T(!0),B(it,null,Yt(e.rgbaColors,(a,i)=>(T(),B("div",{key:e.colors[i],class:q(["el-color-predefine__color-selector",{selected:a.selected,"is-alpha":a._alpha<100}]),onClick:l=>e.handleSelect(i)},[W("div",{style:nt({backgroundColor:a.value})},null,4)],10,tle))),128))])])}var sle=We(Jie,[["render",nle]]);const ole=me({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=Lt(),n=L(0),s=L(0),o=L("hsl(0, 100%, 50%)"),r=_(()=>{const l=e.color.get("hue"),u=e.color.get("value");return{hue:l,value:u}});function a(){const l=e.color.get("saturation"),u=e.color.get("value"),c=t.vnode.el,{clientWidth:d,clientHeight:f}=c;s.value=l*d/100,n.value=(100-u)*f/100,o.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function i(l){const c=t.vnode.el.getBoundingClientRect(),{clientX:d,clientY:f}=Kw(l);let h=d-c.left,p=f-c.top;h=Math.max(0,h),h=Math.min(h,c.width),p=Math.max(0,p),p=Math.min(p,c.height),s.value=h,n.value=p,e.color.set({saturation:h/c.width*100,value:100-p/c.height*100})}return Oe(()=>r.value,()=>{a()}),Mt(()=>{hf(t.vnode.el,{drag:l=>{i(l)},end:l=>{i(l)}}),a()}),{cursorTop:n,cursorLeft:s,background:o,colorValue:r,handleDrag:i,update:a}}}),rle=W("div",{class:"el-color-svpanel__white"},null,-1),ale=W("div",{class:"el-color-svpanel__black"},null,-1),ile=W("div",null,null,-1),lle=[ile];function ule(e,t,n,s,o,r){return T(),B("div",{class:"el-color-svpanel",style:nt({backgroundColor:e.background})},[rle,ale,W("div",{class:"el-color-svpanel__cursor",style:nt({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},lle,4)],4)}var cle=We(ole,[["render",ule]]);const dle=me({name:"ElColorPicker",components:{ElButton:Ia,ElTooltip:Bo,ElInput:Tr,ElIcon:_t,Close:Zr,ArrowDown:ou,SvPanel:cle,HueSlider:jie,AlphaSlider:Uie,Predefine:sle},directives:{ClickOutside:Pi},props:{modelValue:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:{type:String,validator:Oo},popperClass:String,predefine:Array},emits:["change","active-change",Ft],setup(e,{emit:t}){const{t:n}=kn(),s=Ze(Lo,{}),o=Ze(oa,{}),r=L(null),a=L(null),i=L(null),l=L(null),u=Cn(new Vd({enableAlpha:e.showAlpha,format:e.colorFormat,value:e.modelValue})),c=L(!1),d=L(!1),f=L(""),h=_(()=>!e.modelValue&&!d.value?"transparent":v(u,e.showAlpha)),p=ds(),m=_(()=>e.disabled||s.disabled),g=_(()=>!e.modelValue&&!d.value?"":u.value);Oe(()=>e.modelValue,x=>{x?x&&x!==u.value&&u.fromString(x):d.value=!1}),Oe(()=>g.value,x=>{f.value=x,t("active-change",x)}),Oe(()=>u.value,()=>{!e.modelValue&&!d.value&&(d.value=!0)});function v(x,N){if(!(x instanceof Vd))throw Error("color should be instance of _color Class");const{r:A,g:D,b:M}=x.toRgb();return N?`rgba(${A}, ${D}, ${M}, ${x.get("alpha")/100})`:`rgb(${A}, ${D}, ${M})`}function b(x){c.value=x}const $=_o(b,100);function y(){$(!1),w()}function w(){dt(()=>{e.modelValue?u.fromString(e.modelValue):d.value=!1})}function C(){m.value||$(!c.value)}function k(){u.fromString(f.value)}function S(){var x;const N=u.value;t(Ft,N),t("change",N),(x=o.validate)==null||x.call(o,"change"),$(!1),dt(()=>{const A=new Vd({enableAlpha:e.showAlpha,format:e.colorFormat,value:e.modelValue});u.compare(A)||w()})}function E(){var x;$(!1),t(Ft,null),t("change",null),e.modelValue!==null&&((x=o.validate)==null||x.call(o,"change")),w()}return Mt(()=>{e.modelValue&&(f.value=g.value)}),Oe(()=>c.value,()=>{dt(()=>{var x,N,A;(x=r.value)==null||x.update(),(N=a.value)==null||N.update(),(A=i.value)==null||A.update()})}),zt(l_,{currentColor:g}),{color:u,colorDisabled:m,colorSize:p,displayedColor:h,showPanelColor:d,showPicker:c,customInput:f,handleConfirm:k,hide:y,handleTrigger:C,clear:E,confirmValue:S,t:n,hue:r,svPanel:a,alpha:i,popper:l}}}),fle={class:"el-color-dropdown__main-wrapper"},hle={class:"el-color-dropdown__btns"},ple={class:"el-color-dropdown__value"},mle={key:0,class:"el-color-picker__mask"};function gle(e,t,n,s,o,r){const a=re("hue-slider"),i=re("sv-panel"),l=re("alpha-slider"),u=re("predefine"),c=re("el-input"),d=re("el-button"),f=re("arrow-down"),h=re("el-icon"),p=re("close"),m=re("el-tooltip"),g=wo("click-outside");return T(),ve(m,{ref:"popper",visible:e.showPicker,"onUpdate:visible":t[2]||(t[2]=v=>e.showPicker=v),"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":`el-color-picker__panel el-color-dropdown ${e.popperClass}`,"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:"el-zoom-in-top",persistent:""},{content:oe(()=>[$t((T(),B("div",null,[W("div",fle,[le(a,{ref:"hue",class:"hue-slider",color:e.color,vertical:""},null,8,["color"]),le(i,{ref:"svPanel",color:e.color},null,8,["color"])]),e.showAlpha?(T(),ve(l,{key:0,ref:"alpha",color:e.color},null,8,["color"])):ce("v-if",!0),e.predefine?(T(),ve(u,{key:1,ref:"predefine",color:e.color,colors:e.predefine},null,8,["color","colors"])):ce("v-if",!0),W("div",hle,[W("span",ple,[le(c,{modelValue:e.customInput,"onUpdate:modelValue":t[0]||(t[0]=v=>e.customInput=v),"validate-event":!1,size:"small",onKeyup:Ht(e.handleConfirm,["enter"]),onBlur:e.handleConfirm},null,8,["modelValue","onKeyup","onBlur"])]),le(d,{size:"small",type:"text",class:"el-color-dropdown__link-btn",onClick:e.clear},{default:oe(()=>[jt(Fe(e.t("el.colorpicker.clear")),1)]),_:1},8,["onClick"]),le(d,{plain:"",size:"small",class:"el-color-dropdown__btn",onClick:e.confirmValue},{default:oe(()=>[jt(Fe(e.t("el.colorpicker.confirm")),1)]),_:1},8,["onClick"])])])),[[g,e.hide]])]),default:oe(()=>[W("div",{class:q(["el-color-picker",e.colorDisabled?"is-disabled":"",e.colorSize?`el-color-picker--${e.colorSize}`:""])},[e.colorDisabled?(T(),B("div",mle)):ce("v-if",!0),W("div",{class:"el-color-picker__trigger",onClick:t[1]||(t[1]=(...v)=>e.handleTrigger&&e.handleTrigger(...v))},[W("span",{class:q(["el-color-picker__color",{"is-alpha":e.showAlpha}])},[W("span",{class:"el-color-picker__color-inner",style:nt({backgroundColor:e.displayedColor})},[$t(le(h,{class:"el-color-picker__icon is-icon-arrow-down"},{default:oe(()=>[le(f)]),_:1},512),[[Qt,e.modelValue||e.showPanelColor]]),!e.modelValue&&!e.showPanelColor?(T(),ve(h,{key:0,class:"el-color-picker__empty is-icon-close"},{default:oe(()=>[le(p)]),_:1})):ce("v-if",!0)],4)],2)])],2)]),_:1},8,["visible","popper-class"])}var dm=We(dle,[["render",gle]]);dm.install=e=>{e.component(dm.name,dm)};const vle=dm,ble=vle,jy={},yle=gt({locale:{type:Je(Object)},size:{type:String,values:["large","default","small"]},button:{type:Je(Object)},message:{type:Je(Object)},zIndex:{type:Number},namespace:{type:String,default:"el"}});var wle=me({name:"ElConfigProvider",props:yle,setup(e,{slots:t}){Oe(()=>e.message,s=>{Object.assign(jy,s!=null?s:{})},{immediate:!0,deep:!0});const n=RD(e);return()=>_e(t,"default",{config:n==null?void 0:n.value})}});const $le=Vt(wle),Cle=me({name:"ElContainer",props:{direction:{type:String,default:""}},setup(e,{slots:t}){const n=Dt("container");return{isVertical:_(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(r=>{const a=r.type.name;return a==="ElHeader"||a==="ElFooter"}):!1),ns:n}}});function kle(e,t,n,s,o,r){return T(),B("section",{class:q([e.ns.b(),e.ns.is("vertical",e.isVertical)])},[_e(e.$slots,"default")],2)}var Sle=We(Cle,[["render",kle]]);const xle=me({name:"ElAside",props:{width:{type:String,default:null}},setup(e){const t=Dt("aside");return{style:_(()=>e.width?{"--el-aside-width":e.width}:{}),ns:t}}});function Ile(e,t,n,s,o,r){return T(),B("aside",{class:q(e.ns.b()),style:nt(e.style)},[_e(e.$slots,"default")],6)}var u_=We(xle,[["render",Ile]]);const Ele=me({name:"ElFooter",props:{height:{type:String,default:null}},setup(e){const t=Dt("footer");return{style:_(()=>e.height?{"--el-footer-height":e.height}:{}),ns:t}}});function Tle(e,t,n,s,o,r){return T(),B("footer",{class:q(e.ns.b()),style:nt(e.style)},[_e(e.$slots,"default")],6)}var c_=We(Ele,[["render",Tle]]);const Nle=me({name:"ElHeader",props:{height:{type:String,default:null}},setup(e){const t=Dt("header");return{style:_(()=>e.height?{"--el-header-height":e.height}:{}),ns:t}}});function Ale(e,t,n,s,o,r){return T(),B("header",{class:q(e.ns.b()),style:nt(e.style)},[_e(e.$slots,"default")],6)}var d_=We(Nle,[["render",Ale]]);const Dle=me({name:"ElMain",setup(){return{ns:Dt("main")}}});function Rle(e,t,n,s,o,r){return T(),B("main",{class:q(e.ns.b())},[_e(e.$slots,"default")],2)}var f_=We(Dle,[["render",Rle]]);const _le=Vt(Sle,{Aside:u_,Footer:c_,Header:d_,Main:f_}),Ole=Jn(u_),Mle=Jn(c_),Fle=Jn(d_),Ple=Jn(f_);var h_={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){return function(n,s,o){var r=s.prototype,a=r.format;o.en.ordinal=function(i){var l=["th","st","nd","rd"],u=i%100;return"["+i+(l[(u-20)%10]||l[u]||l[0])+"]"},r.format=function(i){var l=this,u=this.$locale();if(!this.isValid())return a.bind(this)(i);var c=this.$utils(),d=(i||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((l.$M+1)/3);case"Do":return u.ordinal(l.$D);case"gggg":return l.weekYear();case"GGGG":return l.isoWeekYear();case"wo":return u.ordinal(l.week(),"W");case"w":case"ww":return c.s(l.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(l.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(l.$H===0?24:l.$H),f==="k"?1:2,"0");case"X":return Math.floor(l.$d.getTime()/1e3);case"x":return l.$d.getTime();case"z":return"["+l.offsetName()+"]";case"zzz":return"["+l.offsetName("long")+"]";default:return f}});return a.bind(this)(d)}}})})(h_);var Lle=h_.exports,p_={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){var n="week",s="year";return function(o,r,a){var i=r.prototype;i.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=a(this).startOf(s).add(1,s).date(u),d=a(this).endOf(n);if(c.isBefore(d))return 1}var f=a(this).startOf(s).date(u).startOf(n).subtract(1,"millisecond"),h=this.diff(f,n,!0);return h<0?a(this).startOf("week").week():Math.ceil(h)},i.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(p_);var Ble=p_.exports,m_={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){return function(n,s){s.prototype.weekYear=function(){var o=this.month(),r=this.week(),a=this.year();return r===1&&o===11?a+1:o===0&&r>=52?a-1:a}}})})(m_);var zle=m_.exports,g_={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){return function(n,s,o){s.prototype.dayOfYear=function(r){var a=Math.round((o(this).startOf("day")-o(this).startOf("year"))/864e5)+1;return r==null?a:this.add(r-a,"day")}}})})(g_);var Vle=g_.exports,v_={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){return function(n,s){s.prototype.isSameOrAfter=function(o,r){return this.isSame(o,r)||this.isAfter(o,r)}}})})(v_);var Wle=v_.exports,b_={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(An,function(){return function(n,s){s.prototype.isSameOrBefore=function(o,r){return this.isSame(o,r)||this.isBefore(o,r)}}})})(b_);var Hle=b_.exports;const y_=Symbol();var Ule=me({name:"ElDatePickerCell",props:gt({cell:{type:Je(Object)}}),setup(e){const t=Ze(y_);return()=>{const n=e.cell;if(t==null?void 0:t.ctx.slots.default){const s=t.ctx.slots.default(n).filter(o=>o.patchFlag!==-2&&o.type.toString()!=="Symbol(Comment)");if(s.length)return s}return He("div",{class:"el-date-table-cell"},[He("span",{class:"el-date-table-cell__text"},[n==null?void 0:n.text])])}}});const Gle=me({components:{ElDatePickerCell:Ule},props:{date:{type:Object},minDate:{type:Object},maxDate:{type:Object},parsedValue:{type:[Object,Array]},selectionMode:{type:String,default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{type:Function},cellClassName:{type:Function},rangeState:{type:Object,default:()=>({endDate:null,selecting:!1})}},emits:["changerange","pick","select"],setup(e,t){const{t:n,lang:s}=kn(),o=L(null),r=L(null),a=L([[],[],[],[],[],[]]),i=e.date.$locale().weekStart||7,l=e.date.locale("en").localeData().weekdaysShort().map(y=>y.toLowerCase()),u=_(()=>i>3?7-i:-i),c=_(()=>{const y=e.date.startOf("month");return y.subtract(y.day()||7,"day")}),d=_(()=>l.concat(l).slice(i,i+7)),f=_(()=>{var y;const w=e.date.startOf("month"),C=w.day()||7,k=w.daysInMonth(),S=w.subtract(1,"month").daysInMonth(),E=u.value,x=a.value;let N=1;const A=e.selectionMode==="dates"?Rl(e.parsedValue):[],D=Ct().locale(s.value).startOf("day");for(let M=0;M<6;M++){const F=x[M];e.showWeekNumber&&(F[0]||(F[0]={type:"week",text:c.value.add(M*7+1,"day").week()}));for(let R=0;R<7;R++){let P=F[e.showWeekNumber?R+1:R];P||(P={row:M,column:R,type:"normal",inRange:!1,start:!1,end:!1});const V=M*7+R,G=c.value.add(V-E,"day");P.dayjs=G,P.date=G.toDate(),P.timestamp=G.valueOf(),P.type="normal";const se=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate;if(P.inRange=e.minDate&&G.isSameOrAfter(e.minDate,"day")&&se&&G.isSameOrBefore(se,"day")||e.minDate&&G.isSameOrBefore(e.minDate,"day")&&se&&G.isSameOrAfter(se,"day"),((y=e.minDate)==null?void 0:y.isSameOrAfter(se))?(P.start=se&&G.isSame(se,"day"),P.end=e.minDate&&G.isSame(e.minDate,"day")):(P.start=e.minDate&&G.isSame(e.minDate,"day"),P.end=se&&G.isSame(se,"day")),G.isSame(D,"day")&&(P.type="today"),M>=0&&M<=1){const pe=C+E<0?7+C+E:C+E;R+M*7>=pe?P.text=N++:(P.text=S-(pe-R%7)+1+M*7,P.type="prev-month")}else N<=k?P.text=N++:(P.text=N++-k,P.type="next-month");const te=G.toDate();P.selected=A.find(pe=>pe.valueOf()===G.valueOf()),P.isSelected=!!P.selected,P.isCurrent=h(P),P.disabled=e.disabledDate&&e.disabledDate(te),P.customClass=e.cellClassName&&e.cellClassName(te),F[e.showWeekNumber?R+1:R]=P}if(e.selectionMode==="week"){const R=e.showWeekNumber?1:0,P=e.showWeekNumber?7:6,V=$(F[R+1]);F[R].inRange=V,F[R].start=V,F[P].inRange=V,F[P].end=V}}return x}),h=y=>e.selectionMode==="day"&&(y.type==="normal"||y.type==="today")&&p(y,e.parsedValue),p=(y,w)=>w?Ct(w).locale(s.value).isSame(e.date.date(Number(y.text)),"day"):!1,m=y=>{const w=[];return(y.type==="normal"||y.type==="today")&&!y.disabled?(w.push("available"),y.type==="today"&&w.push("today")):w.push(y.type),h(y)&&w.push("current"),y.inRange&&(y.type==="normal"||y.type==="today"||e.selectionMode==="week")&&(w.push("in-range"),y.start&&w.push("start-date"),y.end&&w.push("end-date")),y.disabled&&w.push("disabled"),y.selected&&w.push("selected"),y.customClass&&w.push(y.customClass),w.join(" ")},g=(y,w)=>{const C=y*7+(w-(e.showWeekNumber?1:0))-u.value;return c.value.add(C,"day")},v=y=>{if(!e.rangeState.selecting)return;let w=y.target;if(w.tagName==="SPAN"&&(w=w.parentNode.parentNode),w.tagName==="DIV"&&(w=w.parentNode),w.tagName!=="TD")return;const C=w.parentNode.rowIndex-1,k=w.cellIndex;f.value[C][k].disabled||(C!==o.value||k!==r.value)&&(o.value=C,r.value=k,t.emit("changerange",{selecting:!0,endDate:g(C,k)}))},b=y=>{let w=y.target;for(;w&&w.tagName!=="TD";)w=w.parentNode;if(!w||w.tagName!=="TD")return;const C=w.parentNode.rowIndex-1,k=w.cellIndex,S=f.value[C][k];if(S.disabled||S.type==="week")return;const E=g(C,k);if(e.selectionMode==="range")e.rangeState.selecting?(E>=e.minDate?t.emit("pick",{minDate:e.minDate,maxDate:E}):t.emit("pick",{minDate:E,maxDate:e.minDate}),t.emit("select",!1)):(t.emit("pick",{minDate:E,maxDate:null}),t.emit("select",!0));else if(e.selectionMode==="day")t.emit("pick",E);else if(e.selectionMode==="week"){const x=E.week(),N=`${E.year()}w${x}`;t.emit("pick",{year:E.year(),week:x,value:N,date:E.startOf("week")})}else if(e.selectionMode==="dates"){const x=S.selected?Rl(e.parsedValue).filter(N=>N.valueOf()!==E.valueOf()):Rl(e.parsedValue).concat([E]);t.emit("pick",x)}},$=y=>{if(e.selectionMode!=="week")return!1;let w=e.date.startOf("day");if(y.type==="prev-month"&&(w=w.subtract(1,"month")),y.type==="next-month"&&(w=w.add(1,"month")),w=w.date(parseInt(y.text,10)),e.parsedValue&&!Array.isArray(e.parsedValue)){const C=(e.parsedValue.day()-i+7)%7-1;return e.parsedValue.subtract(C,"day").isSame(w,"day")}return!1};return{handleMouseMove:v,t:n,rows:f,isWeekActive:$,getCellClasses:m,WEEKS:d,handleClick:b}}}),Kle={key:0};function jle(e,t,n,s,o,r){const a=re("el-date-picker-cell");return T(),B("table",{cellspacing:"0",cellpadding:"0",class:q(["el-date-table",{"is-week-mode":e.selectionMode==="week"}]),onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i)),onMousemove:t[1]||(t[1]=(...i)=>e.handleMouseMove&&e.handleMouseMove(...i))},[W("tbody",null,[W("tr",null,[e.showWeekNumber?(T(),B("th",Kle,Fe(e.t("el.datepicker.week")),1)):ce("v-if",!0),(T(!0),B(it,null,Yt(e.WEEKS,(i,l)=>(T(),B("th",{key:l},Fe(e.t("el.datepicker.weeks."+i)),1))),128))]),(T(!0),B(it,null,Yt(e.rows,(i,l)=>(T(),B("tr",{key:l,class:q(["el-date-table__row",{current:e.isWeekActive(i[1])}])},[(T(!0),B(it,null,Yt(i,(u,c)=>(T(),B("td",{key:c,class:q(e.getCellClasses(u))},[le(a,{cell:u},null,8,["cell"])],2))),128))],2))),128))])],34)}var w_=We(Gle,[["render",jle]]);const qle=(e,t,n)=>{const s=Ct().locale(n).startOf("month").month(t).year(e),o=s.daysInMonth();return wi(o).map(r=>s.add(r,"day").toDate())},Xle=me({props:{disabledDate:{type:Function},selectionMode:{type:String,default:"month"},minDate:{type:Object},maxDate:{type:Object},date:{type:Object},parsedValue:{type:Object},rangeState:{type:Object,default:()=>({endDate:null,selecting:!1})}},emits:["changerange","pick","select"],setup(e,t){const{t:n,lang:s}=kn(),o=L(e.date.locale("en").localeData().monthsShort().map(f=>f.toLowerCase())),r=L([[],[],[]]),a=L(null),i=L(null),l=_(()=>{var f;const h=r.value,p=Ct().locale(s.value).startOf("month");for(let m=0;m<3;m++){const g=h[m];for(let v=0;v<4;v++){let b=g[v];b||(b={row:m,column:v,type:"normal",inRange:!1,start:!1,end:!1}),b.type="normal";const $=m*4+v,y=e.date.startOf("year").month($),w=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate;b.inRange=e.minDate&&y.isSameOrAfter(e.minDate,"month")&&w&&y.isSameOrBefore(w,"month")||e.minDate&&y.isSameOrBefore(e.minDate,"month")&&w&&y.isSameOrAfter(w,"month"),((f=e.minDate)==null?void 0:f.isSameOrAfter(w))?(b.start=w&&y.isSame(w,"month"),b.end=e.minDate&&y.isSame(e.minDate,"month")):(b.start=e.minDate&&y.isSame(e.minDate,"month"),b.end=w&&y.isSame(w,"month")),p.isSame(y)&&(b.type="today"),b.text=$;const k=y.toDate();b.disabled=e.disabledDate&&e.disabledDate(k),g[v]=b}}return h});return{handleMouseMove:f=>{if(!e.rangeState.selecting)return;let h=f.target;if(h.tagName==="A"&&(h=h.parentNode.parentNode),h.tagName==="DIV"&&(h=h.parentNode),h.tagName!=="TD")return;const p=h.parentNode.rowIndex,m=h.cellIndex;l.value[p][m].disabled||(p!==a.value||m!==i.value)&&(a.value=p,i.value=m,t.emit("changerange",{selecting:!0,endDate:e.date.startOf("year").month(p*4+m)}))},handleMonthTableClick:f=>{let h=f.target;if(h.tagName==="A"&&(h=h.parentNode.parentNode),h.tagName==="DIV"&&(h=h.parentNode),h.tagName!=="TD"||Kr(h,"disabled"))return;const p=h.cellIndex,g=h.parentNode.rowIndex*4+p,v=e.date.startOf("year").month(g);e.selectionMode==="range"?e.rangeState.selecting?(v>=e.minDate?t.emit("pick",{minDate:e.minDate,maxDate:v}):t.emit("pick",{minDate:v,maxDate:e.minDate}),t.emit("select",!1)):(t.emit("pick",{minDate:v,maxDate:null}),t.emit("select",!0)):t.emit("pick",g)},rows:l,getCellStyle:f=>{const h={},p=e.date.year(),m=new Date,g=f.text;return h.disabled=e.disabledDate?qle(p,g,s.value).every(e.disabledDate):!1,h.current=Rl(e.parsedValue).findIndex(v=>v.year()===p&&v.month()===g)>=0,h.today=m.getFullYear()===p&&m.getMonth()===g,f.inRange&&(h["in-range"]=!0,f.start&&(h["start-date"]=!0),f.end&&(h["end-date"]=!0)),h},t:n,months:o}}}),Yle={class:"cell"};function Zle(e,t,n,s,o,r){return T(),B("table",{class:"el-month-table",onClick:t[0]||(t[0]=(...a)=>e.handleMonthTableClick&&e.handleMonthTableClick(...a)),onMousemove:t[1]||(t[1]=(...a)=>e.handleMouseMove&&e.handleMouseMove(...a))},[W("tbody",null,[(T(!0),B(it,null,Yt(e.rows,(a,i)=>(T(),B("tr",{key:i},[(T(!0),B(it,null,Yt(a,(l,u)=>(T(),B("td",{key:u,class:q(e.getCellStyle(l))},[W("div",null,[W("a",Yle,Fe(e.t("el.datepicker.months."+e.months[l.text])),1)])],2))),128))]))),128))])],32)}var $_=We(Xle,[["render",Zle]]);const Jle=(e,t)=>{const n=Ct(String(e)).locale(t).startOf("year"),o=n.endOf("year").dayOfYear();return wi(o).map(r=>n.add(r,"day").toDate())},Qle=me({props:{disabledDate:{type:Function},parsedValue:{type:Object},date:{type:Object}},emits:["pick"],setup(e,t){const{lang:n}=kn();return{startYear:_(()=>Math.floor(e.date.year()/10)*10),getCellStyle:a=>{const i={},l=Ct().locale(n.value);return i.disabled=e.disabledDate?Jle(a,n.value).every(e.disabledDate):!1,i.current=Rl(e.parsedValue).findIndex(u=>u.year()===a)>=0,i.today=l.year()===a,i},handleYearTableClick:a=>{const i=a.target;if(i.tagName==="A"){if(Kr(i.parentNode,"disabled"))return;const l=i.textContent||i.innerText;t.emit("pick",Number(l))}}}}}),eue={class:"cell"},tue={class:"cell"},nue={class:"cell"},sue={class:"cell"},oue={class:"cell"},rue={class:"cell"},aue={class:"cell"},iue={class:"cell"},lue={class:"cell"},uue={class:"cell"},cue=W("td",null,null,-1),due=W("td",null,null,-1);function fue(e,t,n,s,o,r){return T(),B("table",{class:"el-year-table",onClick:t[0]||(t[0]=(...a)=>e.handleYearTableClick&&e.handleYearTableClick(...a))},[W("tbody",null,[W("tr",null,[W("td",{class:q(["available",e.getCellStyle(e.startYear+0)])},[W("a",eue,Fe(e.startYear),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+1)])},[W("a",tue,Fe(e.startYear+1),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+2)])},[W("a",nue,Fe(e.startYear+2),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+3)])},[W("a",sue,Fe(e.startYear+3),1)],2)]),W("tr",null,[W("td",{class:q(["available",e.getCellStyle(e.startYear+4)])},[W("a",oue,Fe(e.startYear+4),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+5)])},[W("a",rue,Fe(e.startYear+5),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+6)])},[W("a",aue,Fe(e.startYear+6),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+7)])},[W("a",iue,Fe(e.startYear+7),1)],2)]),W("tr",null,[W("td",{class:q(["available",e.getCellStyle(e.startYear+8)])},[W("a",lue,Fe(e.startYear+8),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+9)])},[W("a",uue,Fe(e.startYear+9),1)],2),cue,due])])])}var hue=We(Qle,[["render",fue]]);const pue=(e,t,n)=>!0,mue=me({components:{DateTable:w_,ElInput:Tr,ElButton:Ia,ElIcon:_t,TimePickPanel:i$,MonthTable:$_,YearTable:hue,DArrowLeft:Bg,ArrowLeft:ru,DArrowRight:zg,ArrowRight:Er},directives:{clickoutside:Pi},props:{visible:{type:Boolean,default:!1},parsedValue:{type:[Object,Array]},format:{type:String,default:""},type:{type:String,required:!0,validator:FR}},emits:["pick","set-picker-option","panel-change"],setup(e,t){const{t:n,lang:s}=kn(),o=Ze("EP_PICKER_BASE"),r=Ze(Ug),{shortcuts:a,disabledDate:i,cellClassName:l,defaultTime:u,arrowControl:c}=o.props,d=Js(o.props,"defaultValue"),f=L(Ct().locale(s.value)),h=_(()=>Ct(u).locale(s.value)),p=_(()=>f.value.month()),m=_(()=>f.value.year()),g=L([]),v=L(null),b=L(null),$=fe=>g.value.length>0?pue(fe,g.value,e.format||"HH:mm:ss"):!0,y=fe=>u&&!X.value?h.value.year(fe.year()).month(fe.month()).date(fe.date()):se.value?fe.millisecond(0):fe.startOf("day"),w=(fe,...Ee)=>{if(!fe)t.emit("pick",fe,...Ee);else if(Array.isArray(fe)){const rt=fe.map(y);t.emit("pick",rt,...Ee)}else t.emit("pick",y(fe),...Ee);v.value=null,b.value=null},C=fe=>{if(M.value==="day"){let Ee=e.parsedValue?e.parsedValue.year(fe.year()).month(fe.month()).date(fe.date()):fe;$(Ee)||(Ee=g.value[0][0].year(fe.year()).month(fe.month()).date(fe.date())),f.value=Ee,w(Ee,se.value)}else M.value==="week"?w(fe.date):M.value==="dates"&&w(fe,!0)},k=()=>{f.value=f.value.subtract(1,"month"),Ie("month")},S=()=>{f.value=f.value.add(1,"month"),Ie("month")},E=()=>{N.value==="year"?f.value=f.value.subtract(10,"year"):f.value=f.value.subtract(1,"year"),Ie("year")},x=()=>{N.value==="year"?f.value=f.value.add(10,"year"):f.value=f.value.add(1,"year"),Ie("year")},N=L("date"),A=_(()=>{const fe=n("el.datepicker.year");if(N.value==="year"){const Ee=Math.floor(m.value/10)*10;return fe?`${Ee} ${fe} - ${Ee+9} ${fe}`:`${Ee} - ${Ee+9}`}return`${m.value} ${fe}`}),D=fe=>{const Ee=typeof fe.value=="function"?fe.value():fe.value;if(Ee){w(Ct(Ee).locale(s.value));return}fe.onClick&&fe.onClick(t)},M=_(()=>["week","month","year","dates"].includes(e.type)?e.type:"day");Oe(()=>M.value,fe=>{if(["month","year"].includes(fe)){N.value=fe;return}N.value="date"},{immediate:!0}),Oe(()=>N.value,()=>{r==null||r.updatePopper()});const F=_(()=>!!a.length),R=fe=>{f.value=f.value.startOf("month").month(fe),M.value==="month"?w(f.value):N.value="date",Ie("month")},P=fe=>{M.value==="year"?(f.value=f.value.startOf("year").year(fe),w(f.value)):(f.value=f.value.year(fe),N.value="month"),Ie("year")},V=()=>{N.value="month"},G=()=>{N.value="year"},se=_(()=>e.type==="datetime"||e.type==="datetimerange"),ke=_(()=>se.value||M.value==="dates"),te=()=>{if(M.value==="dates")w(e.parsedValue);else{let fe=e.parsedValue;if(!fe){const Ee=Ct(u).locale(s.value),rt=ye();fe=Ee.year(rt.year()).month(rt.month()).date(rt.date())}f.value=fe,w(fe)}},pe=()=>{const Ee=Ct().locale(s.value).toDate();(!i||!i(Ee))&&$(Ee)&&(f.value=Ct().locale(s.value),w(f.value))},ae=_(()=>KR(e.format)),K=_(()=>GR(e.format)),X=_(()=>{if(b.value)return b.value;if(!(!e.parsedValue&&!d.value))return(e.parsedValue||f.value).format(ae.value)}),Y=_(()=>{if(v.value)return v.value;if(!(!e.parsedValue&&!d.value))return(e.parsedValue||f.value).format(K.value)}),ie=L(!1),xe=()=>{ie.value=!0},Le=()=>{ie.value=!1},Be=(fe,Ee,rt)=>{const Ye=e.parsedValue?e.parsedValue.hour(fe.hour()).minute(fe.minute()).second(fe.second()):fe;f.value=Ye,w(f.value,!0),rt||(ie.value=Ee)},Pe=fe=>{const Ee=Ct(fe,ae.value).locale(s.value);Ee.isValid()&&$(Ee)&&(f.value=Ee.year(f.value.year()).month(f.value.month()).date(f.value.date()),b.value=null,ie.value=!1,w(f.value,!0))},U=fe=>{const Ee=Ct(fe,K.value).locale(s.value);if(Ee.isValid()){if(i&&i(Ee.toDate()))return;f.value=Ee.hour(f.value.hour()).minute(f.value.minute()).second(f.value.second()),v.value=null,w(f.value,!0)}},Q=fe=>Ct.isDayjs(fe)&&fe.isValid()&&(i?!i(fe.toDate()):!0),H=fe=>M.value==="dates"?fe.map(Ee=>Ee.format(e.format)):fe.format(e.format),ne=fe=>Ct(fe,e.format).locale(s.value),ye=()=>{const fe=Ct(d.value).locale(s.value);if(!d.value){const Ee=h.value;return Ct().hour(Ee.hour()).minute(Ee.minute()).second(Ee.second()).locale(s.value)}return fe},J=fe=>{const{code:Ee,keyCode:rt}=fe,Ye=[Qe.up,Qe.down,Qe.left,Qe.right];e.visible&&!ie.value&&(Ye.includes(Ee)&&(Ne(rt),fe.stopPropagation(),fe.preventDefault()),Ee===Qe.enter&&v.value===null&&b.value===null&&w(f,!1))},Ne=fe=>{const Ee={year:{38:-4,40:4,37:-1,39:1,offset:(Ye,lt)=>Ye.setFullYear(Ye.getFullYear()+lt)},month:{38:-4,40:4,37:-1,39:1,offset:(Ye,lt)=>Ye.setMonth(Ye.getMonth()+lt)},week:{38:-1,40:1,37:-1,39:1,offset:(Ye,lt)=>Ye.setDate(Ye.getDate()+lt*7)},day:{38:-7,40:7,37:-1,39:1,offset:(Ye,lt)=>Ye.setDate(Ye.getDate()+lt)}},rt=f.value.toDate();for(;Math.abs(f.value.diff(rt,"year",!0))<1;){const Ye=Ee[M.value];if(Ye.offset(rt,Ye[fe]),i&&i(rt))continue;const lt=Ct(rt).locale(s.value);f.value=lt,t.emit("pick",lt,!0);break}},Ie=fe=>{t.emit("panel-change",f.value.toDate(),fe,N.value)};return t.emit("set-picker-option",["isValidValue",Q]),t.emit("set-picker-option",["formatToString",H]),t.emit("set-picker-option",["parseUserInput",ne]),t.emit("set-picker-option",["handleKeydown",J]),Oe(()=>d.value,fe=>{fe&&(f.value=ye())},{immediate:!0}),Oe(()=>e.parsedValue,fe=>{if(fe){if(M.value==="dates"||Array.isArray(fe))return;f.value=fe}else f.value=ye()},{immediate:!0}),{handleTimePick:Be,handleTimePickClose:Le,onTimePickerInputFocus:xe,timePickerVisible:ie,visibleTime:X,visibleDate:Y,showTime:se,changeToNow:pe,onConfirm:te,footerVisible:ke,handleYearPick:P,showMonthPicker:V,showYearPicker:G,handleMonthPick:R,hasShortcuts:F,shortcuts:a,arrowControl:c,disabledDate:i,cellClassName:l,selectionMode:M,handleShortcutClick:D,prevYear_:E,nextYear_:x,prevMonth_:k,nextMonth_:S,innerDate:f,t:n,yearLabel:A,currentView:N,month:p,handleDatePick:C,handleVisibleTimeChange:Pe,handleVisibleDateChange:U,timeFormat:ae,userInputTime:b,userInputDate:v}}}),gue={class:"el-picker-panel__body-wrapper"},vue={key:0,class:"el-picker-panel__sidebar"},bue=["onClick"],yue={class:"el-picker-panel__body"},wue={key:0,class:"el-date-picker__time-header"},$ue={class:"el-date-picker__editor-wrap"},Cue={class:"el-date-picker__editor-wrap"},kue=["aria-label"],Sue=["aria-label"],xue=["aria-label"],Iue=["aria-label"],Eue={class:"el-picker-panel__content"},Tue={class:"el-picker-panel__footer"};function Nue(e,t,n,s,o,r){const a=re("el-input"),i=re("time-pick-panel"),l=re("d-arrow-left"),u=re("el-icon"),c=re("arrow-left"),d=re("d-arrow-right"),f=re("arrow-right"),h=re("date-table"),p=re("year-table"),m=re("month-table"),g=re("el-button"),v=wo("clickoutside");return T(),B("div",{class:q(["el-picker-panel el-date-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts,"has-time":e.showTime}]])},[W("div",gue,[_e(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(T(),B("div",vue,[(T(!0),B(it,null,Yt(e.shortcuts,(b,$)=>(T(),B("button",{key:$,type:"button",class:"el-picker-panel__shortcut",onClick:y=>e.handleShortcutClick(b)},Fe(b.text),9,bue))),128))])):ce("v-if",!0),W("div",yue,[e.showTime?(T(),B("div",wue,[W("span",$ue,[le(a,{placeholder:e.t("el.datepicker.selectDate"),"model-value":e.visibleDate,size:"small",onInput:t[0]||(t[0]=b=>e.userInputDate=b),onChange:e.handleVisibleDateChange},null,8,["placeholder","model-value","onChange"])]),$t((T(),B("span",Cue,[le(a,{placeholder:e.t("el.datepicker.selectTime"),"model-value":e.visibleTime,size:"small",onFocus:e.onTimePickerInputFocus,onInput:t[1]||(t[1]=b=>e.userInputTime=b),onChange:e.handleVisibleTimeChange},null,8,["placeholder","model-value","onFocus","onChange"]),le(i,{visible:e.timePickerVisible,format:e.timeFormat,"time-arrow-control":e.arrowControl,"parsed-value":e.innerDate,onPick:e.handleTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[v,e.handleTimePickClose]])])):ce("v-if",!0),$t(W("div",{class:q(["el-date-picker__header",{"el-date-picker__header--bordered":e.currentView==="year"||e.currentView==="month"}])},[W("button",{type:"button","aria-label":e.t("el.datepicker.prevYear"),class:"el-picker-panel__icon-btn el-date-picker__prev-btn d-arrow-left",onClick:t[2]||(t[2]=(...b)=>e.prevYear_&&e.prevYear_(...b))},[le(u,null,{default:oe(()=>[le(l)]),_:1})],8,kue),$t(W("button",{type:"button","aria-label":e.t("el.datepicker.prevMonth"),class:"el-picker-panel__icon-btn el-date-picker__prev-btn arrow-left",onClick:t[3]||(t[3]=(...b)=>e.prevMonth_&&e.prevMonth_(...b))},[le(u,null,{default:oe(()=>[le(c)]),_:1})],8,Sue),[[Qt,e.currentView==="date"]]),W("span",{role:"button",class:"el-date-picker__header-label",onClick:t[4]||(t[4]=(...b)=>e.showYearPicker&&e.showYearPicker(...b))},Fe(e.yearLabel),1),$t(W("span",{role:"button",class:q(["el-date-picker__header-label",{active:e.currentView==="month"}]),onClick:t[5]||(t[5]=(...b)=>e.showMonthPicker&&e.showMonthPicker(...b))},Fe(e.t(`el.datepicker.month${e.month+1}`)),3),[[Qt,e.currentView==="date"]]),W("button",{type:"button","aria-label":e.t("el.datepicker.nextYear"),class:"el-picker-panel__icon-btn el-date-picker__next-btn d-arrow-right",onClick:t[6]||(t[6]=(...b)=>e.nextYear_&&e.nextYear_(...b))},[le(u,null,{default:oe(()=>[le(d)]),_:1})],8,xue),$t(W("button",{type:"button","aria-label":e.t("el.datepicker.nextMonth"),class:"el-picker-panel__icon-btn el-date-picker__next-btn arrow-right",onClick:t[7]||(t[7]=(...b)=>e.nextMonth_&&e.nextMonth_(...b))},[le(u,null,{default:oe(()=>[le(f)]),_:1})],8,Iue),[[Qt,e.currentView==="date"]])],2),[[Qt,e.currentView!=="time"]]),W("div",Eue,[e.currentView==="date"?(T(),ve(h,{key:0,"selection-mode":e.selectionMode,date:e.innerDate,"parsed-value":e.parsedValue,"disabled-date":e.disabledDate,onPick:e.handleDatePick},null,8,["selection-mode","date","parsed-value","disabled-date","onPick"])):ce("v-if",!0),e.currentView==="year"?(T(),ve(p,{key:1,date:e.innerDate,"disabled-date":e.disabledDate,"parsed-value":e.parsedValue,onPick:e.handleYearPick},null,8,["date","disabled-date","parsed-value","onPick"])):ce("v-if",!0),e.currentView==="month"?(T(),ve(m,{key:2,date:e.innerDate,"parsed-value":e.parsedValue,"disabled-date":e.disabledDate,onPick:e.handleMonthPick},null,8,["date","parsed-value","disabled-date","onPick"])):ce("v-if",!0)])])]),$t(W("div",Tue,[$t(le(g,{size:"small",type:"text",class:"el-picker-panel__link-btn",onClick:e.changeToNow},{default:oe(()=>[jt(Fe(e.t("el.datepicker.now")),1)]),_:1},8,["onClick"]),[[Qt,e.selectionMode!=="dates"]]),le(g,{plain:"",size:"small",class:"el-picker-panel__link-btn",onClick:e.onConfirm},{default:oe(()=>[jt(Fe(e.t("el.datepicker.confirm")),1)]),_:1},8,["onClick"])],512),[[Qt,e.footerVisible&&e.currentView==="date"]])],2)}var Aue=We(mue,[["render",Nue]]);const Due=me({directives:{clickoutside:Pi},components:{TimePickPanel:i$,DateTable:w_,ElInput:Tr,ElButton:Ia,ElIcon:_t,DArrowLeft:Bg,ArrowLeft:ru,DArrowRight:zg,ArrowRight:Er},props:{unlinkPanels:Boolean,parsedValue:{type:Array},type:{type:String,required:!0,validator:FR}},emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,t){const{t:n,lang:s}=kn(),o=L(Ct().locale(s.value)),r=L(Ct().locale(s.value).add(1,"month")),a=L(null),i=L(null),l=L({min:null,max:null}),u=L({min:null,max:null}),c=_(()=>`${o.value.year()} ${n("el.datepicker.year")} ${n(`el.datepicker.month${o.value.month()+1}`)}`),d=_(()=>`${r.value.year()} ${n("el.datepicker.year")} ${n(`el.datepicker.month${r.value.month()+1}`)}`),f=_(()=>o.value.year()),h=_(()=>o.value.month()),p=_(()=>r.value.year()),m=_(()=>r.value.month()),g=_(()=>!!rt.length),v=_(()=>l.value.min!==null?l.value.min:a.value?a.value.format(C.value):""),b=_(()=>l.value.max!==null?l.value.max:i.value||a.value?(i.value||a.value).format(C.value):""),$=_(()=>u.value.min!==null?u.value.min:a.value?a.value.format(w.value):""),y=_(()=>u.value.max!==null?u.value.max:i.value||a.value?(i.value||a.value).format(w.value):""),w=_(()=>KR(vt)),C=_(()=>GR(vt)),k=()=>{o.value=o.value.subtract(1,"year"),e.unlinkPanels||(r.value=o.value.add(1,"month")),F("year")},S=()=>{o.value=o.value.subtract(1,"month"),e.unlinkPanels||(r.value=o.value.add(1,"month")),F("month")},E=()=>{e.unlinkPanels?r.value=r.value.add(1,"year"):(o.value=o.value.add(1,"year"),r.value=o.value.add(1,"month")),F("year")},x=()=>{e.unlinkPanels?r.value=r.value.add(1,"month"):(o.value=o.value.add(1,"month"),r.value=o.value.add(1,"month")),F("month")},N=()=>{o.value=o.value.add(1,"year"),F("year")},A=()=>{o.value=o.value.add(1,"month"),F("month")},D=()=>{r.value=r.value.subtract(1,"year"),F("year")},M=()=>{r.value=r.value.subtract(1,"month"),F("month")},F=Ae=>{t.emit("panel-change",[o.value.toDate(),r.value.toDate()],Ae)},R=_(()=>{const Ae=(h.value+1)%12,ct=h.value+1>=12?1:0;return e.unlinkPanels&&new Date(f.value+ct,Ae)<new Date(p.value,m.value)}),P=_(()=>e.unlinkPanels&&p.value*12+m.value-(f.value*12+h.value+1)>=12),V=Ae=>Array.isArray(Ae)&&Ae[0]&&Ae[1]&&Ae[0].valueOf()<=Ae[1].valueOf(),G=L({endDate:null,selecting:!1}),se=_(()=>!(a.value&&i.value&&!G.value.selecting&&V([a.value,i.value]))),ke=Ae=>{G.value=Ae},te=Ae=>{G.value.selecting=Ae,Ae||(G.value.endDate=null)},pe=_(()=>e.type==="datetime"||e.type==="datetimerange"),ae=(Ae=!1)=>{V([a.value,i.value])&&t.emit("pick",[a.value,i.value],Ae)},K=(Ae,ct)=>{if(!!Ae)return Xe?Ct(Xe[ct]||Xe).locale(s.value).year(Ae.year()).month(Ae.month()).date(Ae.date()):Ae},X=(Ae,ct=!0)=>{const wt=Ae.minDate,sn=Ae.maxDate,ln=K(wt,0),Kt=K(sn,1);i.value===Kt&&a.value===ln||(t.emit("calendar-change",[wt.toDate(),sn&&sn.toDate()]),i.value=Kt,a.value=ln,!(!ct||pe.value)&&ae())},Y=Ae=>{const ct=typeof Ae.value=="function"?Ae.value():Ae.value;if(ct){t.emit("pick",[Ct(ct[0]).locale(s.value),Ct(ct[1]).locale(s.value)]);return}Ae.onClick&&Ae.onClick(t)},ie=L(!1),xe=L(!1),Le=()=>{ie.value=!1},Be=()=>{xe.value=!1},Pe=(Ae,ct)=>{l.value[ct]=Ae;const wt=Ct(Ae,C.value).locale(s.value);if(wt.isValid()){if(Ye&&Ye(wt.toDate()))return;ct==="min"?(o.value=wt,a.value=(a.value||o.value).year(wt.year()).month(wt.month()).date(wt.date()),e.unlinkPanels||(r.value=wt.add(1,"month"),i.value=a.value.add(1,"month"))):(r.value=wt,i.value=(i.value||r.value).year(wt.year()).month(wt.month()).date(wt.date()),e.unlinkPanels||(o.value=wt.subtract(1,"month"),a.value=i.value.subtract(1,"month")))}},U=(Ae,ct)=>{l.value[ct]=null},Q=(Ae,ct)=>{u.value[ct]=Ae;const wt=Ct(Ae,w.value).locale(s.value);wt.isValid()&&(ct==="min"?(ie.value=!0,a.value=(a.value||o.value).hour(wt.hour()).minute(wt.minute()).second(wt.second()),(!i.value||i.value.isBefore(a.value))&&(i.value=a.value)):(xe.value=!0,i.value=(i.value||r.value).hour(wt.hour()).minute(wt.minute()).second(wt.second()),r.value=i.value,i.value&&i.value.isBefore(a.value)&&(a.value=i.value)))},H=(Ae,ct)=>{u.value[ct]=null,ct==="min"?(o.value=a.value,ie.value=!1):(r.value=i.value,xe.value=!1)},ne=(Ae,ct,wt)=>{u.value.min||(Ae&&(o.value=Ae,a.value=(a.value||o.value).hour(Ae.hour()).minute(Ae.minute()).second(Ae.second())),wt||(ie.value=ct),(!i.value||i.value.isBefore(a.value))&&(i.value=a.value,r.value=Ae))},ye=(Ae,ct,wt)=>{u.value.max||(Ae&&(r.value=Ae,i.value=(i.value||r.value).hour(Ae.hour()).minute(Ae.minute()).second(Ae.second())),wt||(xe.value=ct),i.value&&i.value.isBefore(a.value)&&(a.value=i.value))},J=()=>{o.value=fe()[0],r.value=o.value.add(1,"month"),t.emit("pick",null)},Ne=Ae=>Array.isArray(Ae)?Ae.map(ct=>ct.format(vt)):Ae.format(vt),Ie=Ae=>Array.isArray(Ae)?Ae.map(ct=>Ct(ct,vt).locale(s.value)):Ct(Ae,vt).locale(s.value),fe=()=>{let Ae;if(Array.isArray(Ke.value)){const ct=Ct(Ke.value[0]);let wt=Ct(Ke.value[1]);return e.unlinkPanels||(wt=ct.add(1,"month")),[ct,wt]}else Ke.value?Ae=Ct(Ke.value):Ae=Ct();return Ae=Ae.locale(s.value),[Ae,Ae.add(1,"month")]};t.emit("set-picker-option",["isValidValue",V]),t.emit("set-picker-option",["parseUserInput",Ie]),t.emit("set-picker-option",["formatToString",Ne]),t.emit("set-picker-option",["handleClear",J]);const Ee=Ze("EP_PICKER_BASE"),{shortcuts:rt,disabledDate:Ye,cellClassName:lt,format:vt,defaultTime:Xe,arrowControl:de,clearable:Re}=Ee.props,Ke=Js(Ee.props,"defaultValue");return Oe(()=>Ke.value,Ae=>{if(Ae){const ct=fe();a.value=null,i.value=null,o.value=ct[0],r.value=ct[1]}},{immediate:!0}),Oe(()=>e.parsedValue,Ae=>{if(Ae&&Ae.length===2)if(a.value=Ae[0],i.value=Ae[1],o.value=a.value,e.unlinkPanels&&i.value){const ct=a.value.year(),wt=a.value.month(),sn=i.value.year(),ln=i.value.month();r.value=ct===sn&&wt===ln?i.value.add(1,"month"):i.value}else r.value=o.value.add(1,"month"),i.value&&(r.value=r.value.hour(i.value.hour()).minute(i.value.minute()).second(i.value.second()));else{const ct=fe();a.value=null,i.value=null,o.value=ct[0],r.value=ct[1]}},{immediate:!0}),{shortcuts:rt,disabledDate:Ye,cellClassName:lt,minTimePickerVisible:ie,maxTimePickerVisible:xe,handleMinTimeClose:Le,handleMaxTimeClose:Be,handleShortcutClick:Y,rangeState:G,minDate:a,maxDate:i,handleRangePick:X,onSelect:te,handleChangeRange:ke,btnDisabled:se,enableYearArrow:P,enableMonthArrow:R,rightPrevMonth:M,rightPrevYear:D,rightNextMonth:x,rightNextYear:E,leftPrevMonth:S,leftPrevYear:k,leftNextMonth:A,leftNextYear:N,hasShortcuts:g,leftLabel:c,rightLabel:d,leftDate:o,rightDate:r,showTime:pe,t:n,minVisibleDate:v,maxVisibleDate:b,minVisibleTime:$,maxVisibleTime:y,arrowControl:de,handleDateInput:Pe,handleDateChange:U,handleTimeInput:Q,handleTimeChange:H,handleMinTimePick:ne,handleMaxTimePick:ye,handleClear:J,handleConfirm:ae,timeFormat:w,clearable:Re}}}),Rue={class:"el-picker-panel__body-wrapper"},_ue={key:0,class:"el-picker-panel__sidebar"},Oue=["onClick"],Mue={class:"el-picker-panel__body"},Fue={key:0,class:"el-date-range-picker__time-header"},Pue={class:"el-date-range-picker__editors-wrap"},Lue={class:"el-date-range-picker__time-picker-wrap"},Bue={class:"el-date-range-picker__time-picker-wrap"},zue={class:"el-date-range-picker__editors-wrap is-right"},Vue={class:"el-date-range-picker__time-picker-wrap"},Wue={class:"el-date-range-picker__time-picker-wrap"},Hue={class:"el-picker-panel__content el-date-range-picker__content is-left"},Uue={class:"el-date-range-picker__header"},Gue=["disabled"],Kue=["disabled"],jue={class:"el-picker-panel__content el-date-range-picker__content is-right"},que={class:"el-date-range-picker__header"},Xue=["disabled"],Yue=["disabled"],Zue={key:0,class:"el-picker-panel__footer"};function Jue(e,t,n,s,o,r){const a=re("el-input"),i=re("time-pick-panel"),l=re("arrow-right"),u=re("el-icon"),c=re("d-arrow-left"),d=re("arrow-left"),f=re("d-arrow-right"),h=re("date-table"),p=re("el-button"),m=wo("clickoutside");return T(),B("div",{class:q(["el-picker-panel el-date-range-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts,"has-time":e.showTime}]])},[W("div",Rue,[_e(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(T(),B("div",_ue,[(T(!0),B(it,null,Yt(e.shortcuts,(g,v)=>(T(),B("button",{key:v,type:"button",class:"el-picker-panel__shortcut",onClick:b=>e.handleShortcutClick(g)},Fe(g.text),9,Oue))),128))])):ce("v-if",!0),W("div",Mue,[e.showTime?(T(),B("div",Fue,[W("span",Pue,[W("span",Lue,[le(a,{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),class:"el-date-range-picker__editor","model-value":e.minVisibleDate,onInput:t[0]||(t[0]=g=>e.handleDateInput(g,"min")),onChange:t[1]||(t[1]=g=>e.handleDateChange(g,"min"))},null,8,["disabled","placeholder","model-value"])]),$t((T(),B("span",Bue,[le(a,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),"model-value":e.minVisibleTime,onFocus:t[2]||(t[2]=g=>e.minTimePickerVisible=!0),onInput:t[3]||(t[3]=g=>e.handleTimeInput(g,"min")),onChange:t[4]||(t[4]=g=>e.handleTimeChange(g,"min"))},null,8,["disabled","placeholder","model-value"]),le(i,{visible:e.minTimePickerVisible,format:e.timeFormat,"datetime-role":"start","time-arrow-control":e.arrowControl,"parsed-value":e.leftDate,onPick:e.handleMinTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[m,e.handleMinTimeClose]])]),W("span",null,[le(u,null,{default:oe(()=>[le(l)]),_:1})]),W("span",zue,[W("span",Vue,[le(a,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),"model-value":e.maxVisibleDate,readonly:!e.minDate,onInput:t[5]||(t[5]=g=>e.handleDateInput(g,"max")),onChange:t[6]||(t[6]=g=>e.handleDateChange(g,"max"))},null,8,["disabled","placeholder","model-value","readonly"])]),$t((T(),B("span",Wue,[le(a,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),"model-value":e.maxVisibleTime,readonly:!e.minDate,onFocus:t[7]||(t[7]=g=>e.minDate&&(e.maxTimePickerVisible=!0)),onInput:t[8]||(t[8]=g=>e.handleTimeInput(g,"max")),onChange:t[9]||(t[9]=g=>e.handleTimeChange(g,"max"))},null,8,["disabled","placeholder","model-value","readonly"]),le(i,{"datetime-role":"end",visible:e.maxTimePickerVisible,format:e.timeFormat,"time-arrow-control":e.arrowControl,"parsed-value":e.rightDate,onPick:e.handleMaxTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[m,e.handleMaxTimeClose]])])])):ce("v-if",!0),W("div",Hue,[W("div",Uue,[W("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-left",onClick:t[10]||(t[10]=(...g)=>e.leftPrevYear&&e.leftPrevYear(...g))},[le(u,null,{default:oe(()=>[le(c)]),_:1})]),W("button",{type:"button",class:"el-picker-panel__icon-btn arrow-left",onClick:t[11]||(t[11]=(...g)=>e.leftPrevMonth&&e.leftPrevMonth(...g))},[le(u,null,{default:oe(()=>[le(d)]),_:1})]),e.unlinkPanels?(T(),B("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-right"]),onClick:t[12]||(t[12]=(...g)=>e.leftNextYear&&e.leftNextYear(...g))},[le(u,null,{default:oe(()=>[le(f)]),_:1})],10,Gue)):ce("v-if",!0),e.unlinkPanels?(T(),B("button",{key:1,type:"button",disabled:!e.enableMonthArrow,class:q([{"is-disabled":!e.enableMonthArrow},"el-picker-panel__icon-btn arrow-right"]),onClick:t[13]||(t[13]=(...g)=>e.leftNextMonth&&e.leftNextMonth(...g))},[le(u,null,{default:oe(()=>[le(l)]),_:1})],10,Kue)):ce("v-if",!0),W("div",null,Fe(e.leftLabel),1)]),le(h,{"selection-mode":"range",date:e.leftDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onPick","onSelect"])]),W("div",jue,[W("div",que,[e.unlinkPanels?(T(),B("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-left"]),onClick:t[14]||(t[14]=(...g)=>e.rightPrevYear&&e.rightPrevYear(...g))},[le(u,null,{default:oe(()=>[le(c)]),_:1})],10,Xue)):ce("v-if",!0),e.unlinkPanels?(T(),B("button",{key:1,type:"button",disabled:!e.enableMonthArrow,class:q([{"is-disabled":!e.enableMonthArrow},"el-picker-panel__icon-btn arrow-left"]),onClick:t[15]||(t[15]=(...g)=>e.rightPrevMonth&&e.rightPrevMonth(...g))},[le(u,null,{default:oe(()=>[le(d)]),_:1})],10,Yue)):ce("v-if",!0),W("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-right",onClick:t[16]||(t[16]=(...g)=>e.rightNextYear&&e.rightNextYear(...g))},[le(u,null,{default:oe(()=>[le(f)]),_:1})]),W("button",{type:"button",class:"el-picker-panel__icon-btn arrow-right",onClick:t[17]||(t[17]=(...g)=>e.rightNextMonth&&e.rightNextMonth(...g))},[le(u,null,{default:oe(()=>[le(l)]),_:1})]),W("div",null,Fe(e.rightLabel),1)]),le(h,{"selection-mode":"range",date:e.rightDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onPick","onSelect"])])])]),e.showTime?(T(),B("div",Zue,[e.clearable?(T(),ve(p,{key:0,size:"small",type:"text",class:"el-picker-panel__link-btn",onClick:e.handleClear},{default:oe(()=>[jt(Fe(e.t("el.datepicker.clear")),1)]),_:1},8,["onClick"])):ce("v-if",!0),le(p,{plain:"",size:"small",class:"el-picker-panel__link-btn",disabled:e.btnDisabled,onClick:t[18]||(t[18]=g=>e.handleConfirm(!1))},{default:oe(()=>[jt(Fe(e.t("el.datepicker.confirm")),1)]),_:1},8,["disabled"])])):ce("v-if",!0)],2)}var Que=We(Due,[["render",Jue]]);const ece=me({components:{MonthTable:$_,ElIcon:_t,DArrowLeft:Bg,DArrowRight:zg},props:{unlinkPanels:Boolean,parsedValue:{type:Array}},emits:["pick","set-picker-option"],setup(e,t){const{t:n,lang:s}=kn(),o=L(Ct().locale(s.value)),r=L(Ct().locale(s.value).add(1,"year")),a=_(()=>!!A.length),i=R=>{const P=typeof R.value=="function"?R.value():R.value;if(P){t.emit("pick",[Ct(P[0]).locale(s.value),Ct(P[1]).locale(s.value)]);return}R.onClick&&R.onClick(t)},l=()=>{o.value=o.value.subtract(1,"year"),e.unlinkPanels||(r.value=r.value.subtract(1,"year"))},u=()=>{e.unlinkPanels||(o.value=o.value.add(1,"year")),r.value=r.value.add(1,"year")},c=()=>{o.value=o.value.add(1,"year")},d=()=>{r.value=r.value.subtract(1,"year")},f=_(()=>`${o.value.year()} ${n("el.datepicker.year")}`),h=_(()=>`${r.value.year()} ${n("el.datepicker.year")}`),p=_(()=>o.value.year()),m=_(()=>r.value.year()===o.value.year()?o.value.year()+1:r.value.year()),g=_(()=>e.unlinkPanels&&m.value>p.value+1),v=L(null),b=L(null),$=L({endDate:null,selecting:!1}),y=R=>{$.value=R},w=(R,P=!0)=>{const V=R.minDate,G=R.maxDate;b.value===G&&v.value===V||(b.value=G,v.value=V,!!P&&k())},C=R=>Array.isArray(R)&&R&&R[0]&&R[1]&&R[0].valueOf()<=R[1].valueOf(),k=(R=!1)=>{C([v.value,b.value])&&t.emit("pick",[v.value,b.value],R)},S=R=>{$.value.selecting=R,R||($.value.endDate=null)},E=R=>R.map(P=>P.format(M)),x=()=>{let R;if(Array.isArray(F.value)){const P=Ct(F.value[0]);let V=Ct(F.value[1]);return e.unlinkPanels||(V=P.add(1,"year")),[P,V]}else F.value?R=Ct(F.value):R=Ct();return R=R.locale(s.value),[R,R.add(1,"year")]};t.emit("set-picker-option",["formatToString",E]);const N=Ze("EP_PICKER_BASE"),{shortcuts:A,disabledDate:D,format:M}=N.props,F=Js(N.props,"defaultValue");return Oe(()=>F.value,R=>{if(R){const P=x();o.value=P[0],r.value=P[1]}},{immediate:!0}),Oe(()=>e.parsedValue,R=>{if(R&&R.length===2)if(v.value=R[0],b.value=R[1],o.value=v.value,e.unlinkPanels&&b.value){const P=v.value.year(),V=b.value.year();r.value=P===V?b.value.add(1,"year"):b.value}else r.value=o.value.add(1,"year");else{const P=x();v.value=null,b.value=null,o.value=P[0],r.value=P[1]}},{immediate:!0}),{shortcuts:A,disabledDate:D,onSelect:S,handleRangePick:w,rangeState:$,handleChangeRange:y,minDate:v,maxDate:b,enableYearArrow:g,leftLabel:f,rightLabel:h,leftNextYear:c,leftPrevYear:l,rightNextYear:u,rightPrevYear:d,t:n,leftDate:o,rightDate:r,hasShortcuts:a,handleShortcutClick:i}}}),tce={class:"el-picker-panel__body-wrapper"},nce={key:0,class:"el-picker-panel__sidebar"},sce=["onClick"],oce={class:"el-picker-panel__body"},rce={class:"el-picker-panel__content el-date-range-picker__content is-left"},ace={class:"el-date-range-picker__header"},ice=["disabled"],lce={class:"el-picker-panel__content el-date-range-picker__content is-right"},uce={class:"el-date-range-picker__header"},cce=["disabled"];function dce(e,t,n,s,o,r){const a=re("d-arrow-left"),i=re("el-icon"),l=re("d-arrow-right"),u=re("month-table");return T(),B("div",{class:q(["el-picker-panel el-date-range-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts}]])},[W("div",tce,[_e(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(T(),B("div",nce,[(T(!0),B(it,null,Yt(e.shortcuts,(c,d)=>(T(),B("button",{key:d,type:"button",class:"el-picker-panel__shortcut",onClick:f=>e.handleShortcutClick(c)},Fe(c.text),9,sce))),128))])):ce("v-if",!0),W("div",oce,[W("div",rce,[W("div",ace,[W("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-left",onClick:t[0]||(t[0]=(...c)=>e.leftPrevYear&&e.leftPrevYear(...c))},[le(i,null,{default:oe(()=>[le(a)]),_:1})]),e.unlinkPanels?(T(),B("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-right"]),onClick:t[1]||(t[1]=(...c)=>e.leftNextYear&&e.leftNextYear(...c))},[le(i,null,{default:oe(()=>[le(l)]),_:1})],10,ice)):ce("v-if",!0),W("div",null,Fe(e.leftLabel),1)]),le(u,{"selection-mode":"range",date:e.leftDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onPick","onSelect"])]),W("div",lce,[W("div",uce,[e.unlinkPanels?(T(),B("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-left"]),onClick:t[2]||(t[2]=(...c)=>e.rightPrevYear&&e.rightPrevYear(...c))},[le(i,null,{default:oe(()=>[le(a)]),_:1})],10,cce)):ce("v-if",!0),W("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-right",onClick:t[3]||(t[3]=(...c)=>e.rightNextYear&&e.rightNextYear(...c))},[le(i,null,{default:oe(()=>[le(l)]),_:1})]),W("div",null,Fe(e.rightLabel),1)]),le(u,{"selection-mode":"range",date:e.rightDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onPick","onSelect"])])])])],2)}var fce=We(ece,[["render",dce]]);Ct.extend(OR);Ct.extend(Lle);Ct.extend(r$);Ct.extend(Ble);Ct.extend(zle);Ct.extend(Vle);Ct.extend(Wle);Ct.extend(Hle);const hce=function(e){return e==="daterange"||e==="datetimerange"?Que:e==="monthrange"?fce:Aue};var pce=me({name:"ElDatePicker",install:null,props:Ut(ut({},a$),{type:{type:String,default:"date"}}),emits:["update:modelValue"],setup(e,t){zt("ElPopperOptions",e.popperOptions),zt(y_,{ctx:t});const n=L(null),s=Ut(ut({},e),{focus:(o=!0)=>{var r;(r=n.value)==null||r.focus(o)}});return t.expose(s),()=>{var o;const r=(o=e.format)!=null?o:wse[e.type]||Sd;return He(PR,Ut(ut({},e),{format:r,type:e.type,ref:n,"onUpdate:modelValue":a=>t.emit("update:modelValue",a)}),{default:a=>He(hce(e.type),a),"range-separator":()=>_e(t.slots,"range-separator")})}}});const fm=pce;fm.install=e=>{e.component(fm.name,fm)};const mce=fm;var cr=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(cr||{});const C_=e=>bs(e)&&e.type===it,gce=e=>e.type===er,vce=e=>bs(e)&&!C_(e)&&!gce(e),bce=e=>{if(!bs(e))return;const t=e.props||{},n=e.type.props||{},s={};return Object.keys(n).forEach(o=>{Wt(n[o],"default")&&(s[o]=n[o].default)}),Object.keys(t).forEach(o=>{s[$r(o)]=t[o]}),s},c$="elDescriptions";var ZI=me({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:Ze(c$,{})}},render(){var e,t,n,s,o,r;const a=bce(this.cell),{border:i,direction:l}=this.descriptions,u=l==="vertical",c=((n=(t=(e=this.cell)==null?void 0:e.children)==null?void 0:t.label)==null?void 0:n.call(t))||a.label,d=(r=(o=(s=this.cell)==null?void 0:s.children)==null?void 0:o.default)==null?void 0:r.call(o),f=a.span,h=a.align?`is-${a.align}`:"",p=a.labelAlign?`is-${a.labelAlign}`:h,m=a.className,g=a.labelClassName,v={width:Wa(a.width),minWidth:Wa(a.minWidth)},b=Dt("descriptions");switch(this.type){case"label":return He(this.tag,{style:v,class:[b.e("cell"),b.e("label"),b.is("bordered-label",i),b.is("vertical-label",u),p,g],colSpan:u?f:1},c);case"content":return He(this.tag,{style:v,class:[b.e("cell"),b.e("content"),b.is("bordered-content",i),b.is("vertical-content",u),h,m],colSpan:u?f:f*2-1},d);default:return He("td",{style:v,class:[b.e("cell"),h],colSpan:f},[He("span",{class:[b.e("label"),g]},c),He("span",{class:[b.e("content"),m]},d)])}}});const yce=me({name:"ElDescriptionsRow",components:{[ZI.name]:ZI},props:{row:{type:Array}},setup(){return{descriptions:Ze(c$,{})}}}),wce={key:1};function $ce(e,t,n,s,o,r){const a=re("el-descriptions-cell");return e.descriptions.direction==="vertical"?(T(),B(it,{key:0},[W("tr",null,[(T(!0),B(it,null,Yt(e.row,(i,l)=>(T(),ve(a,{key:`tr1-${l}`,cell:i,tag:"th",type:"label"},null,8,["cell"]))),128))]),W("tr",null,[(T(!0),B(it,null,Yt(e.row,(i,l)=>(T(),ve(a,{key:`tr2-${l}`,cell:i,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(T(),B("tr",wce,[(T(!0),B(it,null,Yt(e.row,(i,l)=>(T(),B(it,{key:`tr3-${l}`},[e.descriptions.border?(T(),B(it,{key:0},[le(a,{cell:i,tag:"td",type:"label"},null,8,["cell"]),le(a,{cell:i,tag:"td",type:"content"},null,8,["cell"])],64)):(T(),ve(a,{key:1,cell:i,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}var JI=We(yce,[["render",$ce]]);const Cce=me({name:"ElDescriptions",components:{[JI.name]:JI},props:{border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,default:"horizontal"},size:{type:String,validator:Oo},title:{type:String,default:""},extra:{type:String,default:""}},setup(e,{slots:t}){zt(c$,e);const n=ds(),s=Dt("descriptions"),o=_(()=>[s.b(),s.is(s.m(n.value),!!n.value)]),r=l=>{const u=Array.isArray(l)?l:[l],c=[];return u.forEach(d=>{Array.isArray(d.children)?c.push(...r(d.children)):c.push(d)}),c},a=(l,u,c,d=!1)=>(l.props||(l.props={}),u>c&&(l.props.span=c),d&&(l.props.span=u),l);return{descriptionKls:o,getRows:()=>{var l;const u=r((l=t.default)==null?void 0:l.call(t)).filter(p=>{var m;return((m=p==null?void 0:p.type)==null?void 0:m.name)==="ElDescriptionsItem"}),c=[];let d=[],f=e.column,h=0;return u.forEach((p,m)=>{var g;const v=((g=p.props)==null?void 0:g.span)||1;if(m<u.length-1&&(h+=v>f?f:v),m===u.length-1){const b=e.column-h%e.column;d.push(a(p,b,f,!0)),c.push(d);return}v<f?(f-=v,d.push(p)):(d.push(a(p,v,f)),c.push(d),f=e.column,d=[])}),c},ns:s}}});function kce(e,t,n,s,o,r){const a=re("el-descriptions-row");return T(),B("div",{class:q(e.descriptionKls)},[e.title||e.extra||e.$slots.title||e.$slots.extra?(T(),B("div",{key:0,class:q(e.ns.e("header"))},[W("div",{class:q(e.ns.e("title"))},[_e(e.$slots,"title",{},()=>[jt(Fe(e.title),1)])],2),W("div",{class:q(e.ns.e("extra"))},[_e(e.$slots,"extra",{},()=>[jt(Fe(e.extra),1)])],2)],2)):ce("v-if",!0),W("div",{class:q(e.ns.e("body"))},[W("table",{class:q([e.ns.e("table"),e.ns.is("bordered",e.border)])},[W("tbody",null,[(T(!0),B(it,null,Yt(e.getRows(),(i,l)=>(T(),ve(a,{key:l,row:i},null,8,["row"]))),128))])],2)],2)],2)}var Sce=We(Cce,[["render",kce]]),k_=me({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const xce=Vt(Sce,{DescriptionsItem:k_}),Ice=Jn(k_),Ece=gt({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Je([String,Array,Object])},zIndex:{type:Je([String,Number])}}),Tce={click:e=>e instanceof MouseEvent};var Nce=me({name:"ElOverlay",props:Ece,emits:Tce,setup(e,{slots:t,emit:n}){const s=i=>{n("click",i)},{onClick:o,onMousedown:r,onMouseup:a}=HD(e.customMaskEvent?void 0:s);return()=>e.mask?le("div",{class:["el-overlay",e.overlayClass],style:{zIndex:e.zIndex},onClick:o,onMousedown:r,onMouseup:a},[_e(t,"default")],cr.STYLE|cr.CLASS|cr.PROPS,["onClick","onMouseup","onMousedown"]):He("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[_e(t,"default")])}});const d$=Nce,S_=gt({appendToBody:{type:Boolean,default:!1},beforeClose:{type:Je(Function)},destroyOnClose:{type:Boolean,default:!1},center:{type:Boolean,default:!1},customClass:{type:String,default:""},closeIcon:{type:Je([String,Object]),default:""},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},title:{type:String,default:""},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number}}),x_={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ft]:e=>typeof e=="boolean"},I_=(e,{emit:t},n)=>{const s=L(!1),o=L(!1),r=L(!1),a=L(e.zIndex||is.nextZIndex());let i,l;const u=_(()=>wn(e.width)?`${e.width}px`:e.width),c=_(()=>{const w={},C="--el-dialog";return e.fullscreen||(e.top&&(w[`${C}-margin-top`]=e.top),e.width&&(w[`${C}-width`]=u.value)),w});function d(){t("opened")}function f(){t("closed"),t(Ft,!1),e.destroyOnClose&&(r.value=!1)}function h(){t("close")}function p(){l==null||l(),i==null||i(),e.openDelay&&e.openDelay>0?{stop:i}=ic(()=>$(),e.openDelay):$()}function m(){i==null||i(),l==null||l(),e.closeDelay&&e.closeDelay>0?{stop:l}=ic(()=>y(),e.closeDelay):y()}function g(w){w||(o.value=!0,s.value=!1)}function v(){e.beforeClose?e.beforeClose(g):m()}function b(){e.closeOnClickModal&&v()}function $(){!qt||(s.value=!0)}function y(){s.value=!1}return e.lockScroll&&PD(s),e.closeOnPressEscape&&zD({handleClose:v},s),WD(s),Oe(()=>e.modelValue,w=>{w?(o.value=!1,p(),r.value=!0,t("open"),a.value=e.zIndex?a.value++:is.nextZIndex(),dt(()=>{n.value&&(n.value.scrollTop=0)})):s.value&&m()}),Mt(()=>{e.modelValue&&(s.value=!0,r.value=!0,p())}),{afterEnter:d,afterLeave:f,beforeLeave:h,handleClose:v,onModalClick:b,close:m,doClose:y,closed:o,style:c,rendered:r,visible:s,zIndex:a}},Ace=me({name:"ElDialog",components:ut({ElOverlay:d$,ElIcon:_t},gQ),directives:{TrapFocus:Xw},props:S_,emits:x_,setup(e,t){const n=L(),s=I_(e,t,n),o=HD(s.onModalClick);return ut({dialogRef:n,overlayEvent:o},s)}}),Dce=["aria-label"],Rce={class:"el-dialog__header"},_ce={class:"el-dialog__title"},Oce={key:0,class:"el-dialog__body"},Mce={key:1,class:"el-dialog__footer"};function Fce(e,t,n,s,o,r){const a=re("el-icon"),i=re("el-overlay"),l=wo("trap-focus");return T(),ve(Tg,{to:"body",disabled:!e.appendToBody},[le(cs,{name:"dialog-fade",onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave},{default:oe(()=>[$t(le(i,{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex},{default:oe(()=>[W("div",{class:"el-overlay-dialog",onClick:t[2]||(t[2]=(...u)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...u)),onMousedown:t[3]||(t[3]=(...u)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...u)),onMouseup:t[4]||(t[4]=(...u)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...u))},[$t((T(),B("div",{ref:"dialogRef",class:q(["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass]),"aria-modal":"true",role:"dialog","aria-label":e.title||"dialog",style:nt(e.style),onClick:t[1]||(t[1]=ht(()=>{},["stop"]))},[W("div",Rce,[_e(e.$slots,"title",{},()=>[W("span",_ce,Fe(e.title),1)]),e.showClose?(T(),B("button",{key:0,"aria-label":"close",class:"el-dialog__headerbtn",type:"button",onClick:t[0]||(t[0]=(...u)=>e.handleClose&&e.handleClose(...u))},[le(a,{class:"el-dialog__close"},{default:oe(()=>[(T(),ve(en(e.closeIcon||"close")))]),_:1})])):ce("v-if",!0)]),e.rendered?(T(),B("div",Oce,[_e(e.$slots,"default")])):ce("v-if",!0),e.$slots.footer?(T(),B("div",Mce,[_e(e.$slots,"footer")])):ce("v-if",!0)],14,Dce)),[[l]])],32)]),_:3},8,["mask","overlay-class","z-index"]),[[Qt,e.visible]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Pce=We(Ace,[["render",Fce]]);const Lce=Vt(Pce),Bce=gt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Je(String),default:"solid"}}),zce=me({name:"ElDivider",props:Bce,setup(e){const t=Dt("divider"),n=_(()=>({"--el-border-style":e.borderStyle}));return{ns:t,dividerStyle:n}}});function Vce(e,t,n,s,o,r){return T(),B("div",{class:q([e.ns.b(),e.ns.m(e.direction)]),style:nt(e.dividerStyle)},[e.$slots.default&&e.direction!=="vertical"?(T(),B("div",{key:0,class:q([e.ns.e("text"),e.ns.is(e.contentPosition)])},[_e(e.$slots,"default")],2)):ce("v-if",!0)],6)}var Wce=We(zce,[["render",Vce]]);const Hce=Vt(Wce),Uce=gt(Ut(ut({},S_),{direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}})),Gce=x_,Kce=me({name:"ElDrawer",components:{ElOverlay:d$,ElIcon:_t,Close:Zr},directives:{TrapFocus:Xw},props:Uce,emits:Gce,setup(e,t){const n=L(),s=Dt("drawer"),o=_(()=>e.direction==="rtl"||e.direction==="ltr"),r=_(()=>typeof e.size=="number"?`${e.size}px`:e.size);return Ut(ut({},I_(e,t,n)),{drawerRef:n,isHorizontal:o,drawerSize:r,ns:s})}}),jce=["aria-labelledby","aria-label"],qce=["id"],Xce=["title"],Yce=["aria-label"];function Zce(e,t,n,s,o,r){const a=re("close"),i=re("el-icon"),l=re("el-overlay"),u=wo("trap-focus");return T(),ve(Tg,{to:"body",disabled:!e.appendToBody},[le(cs,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave},{default:oe(()=>[$t(le(l,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:oe(()=>[$t((T(),B("div",{ref:"drawerRef","aria-modal":"true","aria-labelledby":e.ns.e("title"),"aria-label":e.title,class:q([e.ns.b(),e.direction,e.visible&&"open",e.customClass]),style:nt(e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize),role:"dialog",onClick:t[1]||(t[1]=ht(()=>{},["stop"]))},[e.withHeader?(T(),B("header",{key:0,id:e.ns.e("title"),class:q(e.ns.e("header"))},[_e(e.$slots,"title",{},()=>[W("span",{role:"heading",title:e.title},Fe(e.title),9,Xce)]),e.showClose?(T(),B("button",{key:0,"aria-label":"close "+(e.title||"drawer"),class:q(e.ns.e("close-btn")),type:"button",onClick:t[0]||(t[0]=(...c)=>e.handleClose&&e.handleClose(...c))},[le(i,{class:q(e.ns.e("close"))},{default:oe(()=>[le(a)]),_:1},8,["class"])],10,Yce)):ce("v-if",!0)],10,qce)):ce("v-if",!0),e.rendered?(T(),B("section",{key:1,class:q(e.ns.e("body"))},[_e(e.$slots,"default")],2)):ce("v-if",!0),e.$slots.footer?(T(),B("div",{key:2,class:q(e.ns.e("footer"))},[_e(e.$slots,"footer")],2)):ce("v-if",!0)],14,jce)),[[u]])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Qt,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Jce=We(Kce,[["render",Zce]]);const Qce=Vt(Jce),E_=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},QI=(e,t)=>{for(const n of e)if(!ede(n,t))return n},ede=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},tde=e=>{const t=E_(e),n=QI(t,e),s=QI(t.reverse(),e);return[n,s]},nde=e=>e instanceof HTMLInputElement&&"select"in e,fl=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&nde(e)&&t&&e.select()}};function eE(e,t){const n=[...e],s=e.indexOf(t);return s!==-1&&n.splice(s,1),n}const sde=()=>{let e=[];return{push:s=>{const o=e[0];o&&s!==o&&o.pause(),e=eE(e,s),e.unshift(s)},remove:s=>{var o,r;e=eE(e,s),(r=(o=e[0])==null?void 0:o.resume)==null||r.call(o)}}},ode=(e,t=!1)=>{const n=document.activeElement;for(const s of e)if(fl(s,t),document.activeElement!==n)return},tE=sde(),Ib="focus-trap.focus-on-mount",Eb="focus-trap.focus-on-unmount",nE={cancelable:!0,bubbles:!1},sE="mountOnFocus",oE="unmountOnFocus",T_=Symbol("elFocusTrap"),rde=me({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean},emits:[sE,oE],setup(e,{emit:t}){const n=L(),s=L(null);let o,r;const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},i=f=>{if(!e.loop&&!e.trapped||a.paused)return;const{key:h,altKey:p,ctrlKey:m,metaKey:g,currentTarget:v,shiftKey:b}=f,{loop:$}=e,y=h===Qe.tab&&!p&&!m&&!g,w=document.activeElement;if(y&&w){const C=v,[k,S]=tde(C);k&&S?!b&&w===S?(f.preventDefault(),$&&fl(k,!0)):b&&w===k&&(f.preventDefault(),$&&fl(S,!0)):w===C&&f.preventDefault()}};zt(T_,{focusTrapRef:s,onKeydown:i});const l=f=>{t(sE,f)},u=f=>t(oE,f),c=f=>{const h=je(s);if(a.paused||!h)return;const p=f.target;p&&h.contains(p)?r=p:fl(r,!0)},d=f=>{const h=je(s);a.paused||!h||h.contains(f.relatedTarget)||fl(r,!0)};return Mt(()=>{const f=je(s);if(f){tE.push(a);const h=document.activeElement;if(o=h,!f.contains(h)){const m=new Event(Ib,nE);gn(f,Ib,l),f.dispatchEvent(m),m.defaultPrevented||(ode(E_(f),!0),document.activeElement===h&&fl(f))}}Oe(()=>e.trapped,h=>{h?(gn(document,"focusin",c),gn(document,"focusout",d)):(zn(document,"focusin",c),zn(document,"focusout",d))},{immediate:!0})}),os(()=>{const f=je(s);if(f){zn(f,Ib,l);const h=new Event(Eb,nE);gn(f,Eb,u),f.dispatchEvent(h),h.defaultPrevented||fl(o!=null?o:document.body,!0),zn(f,Eb,u),tE.remove(a)}}),{focusTrapRef:n,forwardRef:s,onKeydown:i}}});function ade(e,t,n,s,o,r){return _e(e.$slots,"default")}var ide=We(rde,[["render",ade]]);const lde=me({inheritAttrs:!1});function ude(e,t,n,s,o,r){return _e(e.$slots,"default")}var cde=We(lde,[["render",ude]]);const dde=me({name:"ElCollectionItem",inheritAttrs:!1});function fde(e,t,n,s,o,r){return _e(e.$slots,"default")}var hde=We(dde,[["render",fde]]);const N_="data-el-collection-item",A_=e=>{const t=`El${e}Collection`,n=`${t}Item`,s=Symbol(t),o=Symbol(n),r=Ut(ut({},cde),{name:t,setup(){const i=L(null),l=new Map;zt(s,{itemMap:l,getItems:()=>{const c=je(i);if(!c)return[];const d=Array.from(c.querySelectorAll(`[${N_}]`));return[...l.values()].sort((p,m)=>d.indexOf(p.ref)-d.indexOf(m.ref))},collectionRef:i})}}),a=Ut(ut({},hde),{name:n,setup(i,{attrs:l}){const u=L(null),c=Ze(s,void 0);zt(o,{collectionItemRef:u}),Mt(()=>{const d=je(u);d&&c.itemMap.set(d,ut({ref:d},l))}),os(()=>{const d=je(u);c.itemMap.delete(d)})}});return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:r,ElCollectionItem:a}},pde=gt({style:{type:Je([String,Array,Object])},currentTabId:{type:Je(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Je(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:mde,ElCollectionItem:gde,COLLECTION_INJECTION_KEY:f$,COLLECTION_ITEM_INJECTION_KEY:vde}=A_("RovingFocusGroup"),h$=Symbol("elRovingFocusGroup"),D_=Symbol("elRovingFocusGroupItem"),bde={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},yde=(e,t)=>{if(t!=="rtl")return e;switch(e){case Qe.right:return Qe.left;case Qe.left:return Qe.right;default:return e}},wde=(e,t,n)=>{const s=yde(e.key,n);if(!(t==="vertical"&&[Qe.left,Qe.right].includes(s))&&!(t==="horizontal"&&[Qe.up,Qe.down].includes(s)))return bde[s]},$de=(e,t)=>e.map((n,s)=>e[(s+t)%e.length]),p$=e=>{const{activeElement:t}=document;for(const n of e)if(n===t||(n.focus(),t!==document.activeElement))return},rE="currentTabIdChange",Tb="rovingFocusGroup.entryFocus",Cde={bubbles:!1,cancelable:!0},kde=me({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:pde,emits:[rE,"entryFocus"],setup(e,{emit:t}){var n;const s=L((n=e.currentTabId||e.defaultCurrentTabId)!=null?n:null),o=L(!1),r=L(!1),a=L(null),{getItems:i}=Ze(f$,void 0),l=_(()=>[{outline:"none"},e.style]),u=m=>{t(rE,m)},c=()=>{o.value=!0},d=ks(m=>{var g;(g=e.onMousedown)==null||g.call(e,m)},()=>{r.value=!0}),f=ks(m=>{var g;(g=e.onFocus)==null||g.call(e,m)},m=>{const g=!je(r),{target:v,currentTarget:b}=m;if(v===b&&g&&!je(o)){const $=new Event(Tb,Cde);if(b==null||b.dispatchEvent($),!$.defaultPrevented){const y=i().filter(E=>E.focusable),w=y.find(E=>E.active),C=y.find(E=>E.id===je(s)),S=[w,C,...y].filter(Boolean).map(E=>E.ref);p$(S)}}r.value=!1}),h=ks(m=>{var g;(g=e.onBlur)==null||g.call(e,m)},()=>{o.value=!1}),p=(...m)=>{t("entryFocus",...m)};zt(h$,{currentTabbedId:Nf(s),loop:Js(e,"loop"),tabIndex:_(()=>je(o)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:l,orientation:Js(e,"orientation"),dir:Js(e,"dir"),onItemFocus:u,onItemShiftTab:c,onBlur:h,onFocus:f,onMousedown:d}),Oe(()=>e.currentTabId,m=>{s.value=m!=null?m:null}),Mt(()=>{const m=je(a);gn(m,Tb,p)}),os(()=>{const m=je(a);zn(m,Tb,p)})}});function Sde(e,t,n,s,o,r){return _e(e.$slots,"default")}var xde=We(kde,[["render",Sde]]);const Ide=me({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:mde,ElRovingFocusGroupImpl:xde}});function Ede(e,t,n,s,o,r){const a=re("el-roving-focus-group-impl"),i=re("el-focus-group-collection");return T(),ve(i,null,{default:oe(()=>[le(a,Bl(zl(e.$attrs)),{default:oe(()=>[_e(e.$slots,"default")]),_:3},16)]),_:3})}var Tde=We(Ide,[["render",Ede]]);const Nde=me({components:{ElRovingFocusCollectionItem:gde},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:t}){const{currentTabbedId:n,loop:s,onItemFocus:o,onItemShiftTab:r}=Ze(h$,void 0),{getItems:a}=Ze(f$,void 0),i=UD(),l=L(null),u=ks(h=>{t("mousedown",h)},h=>{e.focusable?o(je(i)):h.preventDefault()}),c=ks(h=>{t("focus",h)},()=>{o(je(i))}),d=ks(h=>{t("keydown",h)},h=>{const{key:p,shiftKey:m,target:g,currentTarget:v}=h;if(p===Qe.tab&&m){r();return}if(g!==v)return;const b=wde(h);if(b){h.preventDefault();let y=a().filter(w=>w.focusable).map(w=>w.ref);switch(b){case"last":{y.reverse();break}case"prev":case"next":{b==="prev"&&y.reverse();const w=y.indexOf(v);y=s.value?$de(y,w+1):y.slice(w+1);break}}dt(()=>{p$(y)})}}),f=_(()=>n.value===je(i));return zt(D_,{rovingFocusGroupItemRef:l,tabIndex:_(()=>je(f)?0:-1),handleMousedown:u,handleFocus:c,handleKeydown:d}),{id:i,handleKeydown:d,handleFocus:c,handleMousedown:u}}});function Ade(e,t,n,s,o,r){const a=re("el-roving-focus-collection-item");return T(),ve(a,{id:e.id,focusable:e.focusable,active:e.active},{default:oe(()=>[_e(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Dde=We(Nde,[["render",Ade]]);const Rde=ut({trigger:o$.trigger,effect:Ut(ut({},pi.effect),{default:"light"})},gt({type:{type:Je(String)},placement:{type:Je(String),default:"bottom"},popperOptions:{type:Je(Object),default:()=>({})},size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Je([Number,String]),default:0},maxHeight:{type:Je([Number,String]),default:""},popperClass:{type:String,default:""}})),R_=gt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Je([String,Object])}}),_de=gt({onKeydown:{type:Je(Function)}}),Ode=[Qe.down,Qe.pageDown,Qe.home],__=[Qe.up,Qe.pageUp,Qe.end],Mde=[...Ode,...__],{ElCollection:Fde,ElCollectionItem:Pde,COLLECTION_INJECTION_KEY:Lde,COLLECTION_ITEM_INJECTION_KEY:Bde}=A_("Dropdown"),m$=Symbol("elDropdown"),{ButtonGroup:zde}=Ia,Vde=me({name:"ElDropdown",components:{ElButton:Ia,ElFocusTrap:ide,ElButtonGroup:zde,ElScrollbar:Ya,ElDropdownCollection:Fde,ElTooltip:Bo,ElRovingFocusGroup:Tde,ElIcon:_t,ArrowDown:ou},props:Rde,emits:["visible-change","click","command"],setup(e,{emit:t}){const n=Lt(),s=L(),o=L(),r=L(null),a=L(null),i=L(null),l=L(null),u=L(!1),c=_(()=>({maxHeight:Wa(e.maxHeight)})),d=_(()=>[[m.value?`el-dropdown--${m.value}`:""]]);function f(){h()}function h(){var k;(k=r.value)==null||k.onClose()}function p(){var k;(k=r.value)==null||k.onOpen()}const m=ds();function g(...k){t("command",...k)}function v(){}function b(){const k=je(a);k==null||k.focus(),l.value=null}function $(k){l.value=k}function y(k){u.value||(k.preventDefault(),k.stopImmediatePropagation())}return zt(m$,{contentRef:a,isUsingKeyboard:u,onItemEnter:v,onItemLeave:b}),zt("elDropdown",{instance:n,dropdownSize:m,handleClick:f,commandHandler:g,trigger:Js(e,"trigger"),hideOnClick:Js(e,"hideOnClick")}),{scrollbar:i,wrapStyle:c,dropdownTriggerKls:d,dropdownSize:m,currentTabId:l,handleCurrentTabIdChange:$,handlerMainButtonClick:k=>{t("click",k)},handleEntryFocus:y,handleClose:h,handleOpen:p,onMountOnFocus:k=>{var S,E;k.preventDefault(),(E=(S=a.value)==null?void 0:S.focus)==null||E.call(S,{preventScroll:!0})},popperRef:r,triggeringElementRef:s,referenceElementRef:o}}}),Wde={class:"el-dropdown"};function Hde(e,t,n,s,o,r){var a;const i=re("el-dropdown-collection"),l=re("el-roving-focus-group"),u=re("el-focus-trap"),c=re("el-scrollbar"),d=re("el-tooltip"),f=re("el-button"),h=re("arrow-down"),p=re("el-icon"),m=re("el-button-group");return T(),B("div",Wde,[le(d,{ref:"popperRef",effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.hideTimeout,"manual-mode":!0,placement:e.placement,"popper-class":`el-dropdown__popper ${e.popperClass}`,"reference-element":(a=e.referenceElementRef)==null?void 0:a.$el,trigger:e.trigger,"show-after":e.showTimeout,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,"append-to-body":"",pure:"",transition:"el-zoom-in-top",persistent:"",onShow:t[0]||(t[0]=g=>e.$emit("visible-change",!0)),onHide:t[1]||(t[1]=g=>e.$emit("visible-change",!1))},tf({content:oe(()=>[le(c,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"ul","view-class":"el-dropdown__list"},{default:oe(()=>[le(u,{trapped:"",onMountOnFocus:e.onMountOnFocus},{default:oe(()=>[le(l,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:oe(()=>[le(i,null,{default:oe(()=>[_e(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["onMountOnFocus"])]),_:3},8,["wrap-style"])]),_:2},[e.splitButton?void 0:{name:"default",fn:oe(()=>[W("div",{class:q(e.dropdownTriggerKls)},[_e(e.$slots,"default")],2)])}]),1032,["effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","show-after","virtual-ref","virtual-triggering"]),e.splitButton?(T(),ve(m,{key:0},{default:oe(()=>[le(f,{ref:"referenceElementRef",size:e.dropdownSize,type:e.type,onClick:e.handlerMainButtonClick},{default:oe(()=>[_e(e.$slots,"default")]),_:3},8,["size","type","onClick"]),le(f,{ref:"triggeringElementRef",size:e.dropdownSize,type:e.type,class:"el-dropdown__caret-button"},{default:oe(()=>[le(p,{class:"el-dropdown__icon"},{default:oe(()=>[le(h)]),_:1})]),_:1},8,["size","type"])]),_:3})):ce("v-if",!0)])}var Ude=We(Vde,[["render",Hde]]);const Gde=me({name:"DropdownItemImpl",components:{ElIcon:_t},props:R_,emits:["pointermove","pointerleave","click"],setup(e,{emit:t}){const{collectionItemRef:n}=Ze(Bde,void 0),{collectionItemRef:s}=Ze(vde,void 0),{rovingFocusGroupItemRef:o,tabIndex:r,handleFocus:a,handleKeydown:i,handleMousedown:l}=Ze(D_,void 0),u=FD(n,s,o),c=ks(d=>{const{code:f}=d;if(f===Qe.enter||f===Qe.space)return d.preventDefault(),d.stopImmediatePropagation(),t("click",d),!0},i);return{itemRef:u,dataset:{[N_]:""},tabIndex:r,handleFocus:a,handleKeydown:c,handleMousedown:l}}}),Kde={key:0,class:"el-dropdown-menu__item--divided"},jde=["aria-disabled","tabindex"];function qde(e,t,n,s,o,r){const a=re("el-icon");return T(),B(it,null,[e.divided?(T(),B("div",Kde)):ce("v-if",!0),W("div",Us({ref:e.itemRef},e.dataset,{"aria-disabled":e.disabled,class:{"el-dropdown-menu__item":!0,"is-disabled":e.disabled},tabindex:e.tabIndex,role:"menuitem",onClick:t[0]||(t[0]=i=>e.$emit("click",i)),onFocus:t[1]||(t[1]=(...i)=>e.handleFocus&&e.handleFocus(...i)),onKeydown:t[2]||(t[2]=(...i)=>e.handleKeydown&&e.handleKeydown(...i)),onMousedown:t[3]||(t[3]=(...i)=>e.handleMousedown&&e.handleMousedown(...i)),onPointermove:t[4]||(t[4]=i=>e.$emit("pointermove",i)),onPointerleave:t[5]||(t[5]=i=>e.$emit("pointerleave",i))}),[e.icon?(T(),ve(a,{key:0},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1})):ce("v-if",!0),_e(e.$slots,"default")],16,jde)],64)}var Xde=We(Gde,[["render",qde]]);const O_=()=>{const e=Ze("elDropdown",{}),t=_(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:t}},Yde=me({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Pde,ElRovingFocusItem:Dde,ElDropdownItemImpl:Xde},props:R_,emits:["pointermove","pointerleave","click"],setup(e,{emit:t}){const{elDropdown:n}=O_(),s=Lt(),o=L(null),r=_(()=>{var d,f;return(f=(d=je(o))==null?void 0:d.textContent)!=null?f:""}),{onItemEnter:a,onItemLeave:i}=Ze(m$,void 0),l=ks(d=>(t("pointermove",d),d.defaultPrevented),oI(d=>{var f;e.disabled?i(d):(a(d),d.defaultPrevented||(f=d.currentTarget)==null||f.focus())})),u=ks(d=>(t("pointerleave",d),d.defaultPrevented),oI(d=>{i(d)}));return{handleClick:ks(d=>(t("click",d),d.defaultPrevented),d=>{var f,h,p;if(e.disabled){d.stopImmediatePropagation();return}((f=n==null?void 0:n.hideOnClick)==null?void 0:f.value)&&((h=n.handleClick)==null||h.call(n)),(p=n.commandHandler)==null||p.call(n,e.command,s,d)}),handlePointerMove:l,handlePointerLeave:u,textContent:r}}});function Zde(e,t,n,s,o,r){var a;const i=re("el-dropdown-item-impl"),l=re("el-roving-focus-item"),u=re("el-dropdown-collection-item");return T(),ve(u,{disabled:e.disabled,"text-value":(a=e.textValue)!=null?a:e.textContent},{default:oe(()=>[le(l,{focusable:!e.disabled},{default:oe(()=>[le(i,Us(e.$props,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClick:e.handleClick}),{default:oe(()=>[_e(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClick"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var M_=We(Yde,[["render",Zde]]);const Jde=me({name:"ElDropdownMenu",props:_de,setup(e){const{_elDropdownSize:t}=O_(),n=t.value,{focusTrapRef:s,onKeydown:o}=Ze(T_,void 0),{contentRef:r}=Ze(m$,void 0),{collectionRef:a,getItems:i}=Ze(Lde,void 0),{rovingFocusGroupRef:l,rovingFocusGroupRootStyle:u,tabIndex:c,onBlur:d,onFocus:f,onMousedown:h}=Ze(h$,void 0),{collectionRef:p}=Ze(f$,void 0),m=_(()=>["el-dropdown-menu",n.value&&`el-dropdown-menu--${n.value}`]),g=FD(r,a,s,l,p),v=ks($=>{var y;(y=e.onKeydown)==null||y.call(e,$)},$=>{const{currentTarget:y,code:w,target:C}=$;if(y.contains(C),Qe.tab===w&&$.stopImmediatePropagation(),$.preventDefault(),C!==je(r)||!Mde.includes(w))return;const S=i().filter(E=>!E.disabled).map(E=>E.ref);__.includes(w)&&S.reverse(),p$(S)});return{size:n,rovingFocusGroupRootStyle:u,tabIndex:c,dropdownKls:m,dropdownListWrapperRef:g,handleKeydown:$=>{v($),o($)},onBlur:d,onFocus:f,onMousedown:h}}});function Qde(e,t,n,s,o,r){return T(),B("ul",{ref:e.dropdownListWrapperRef,class:q(e.dropdownKls),style:nt(e.rovingFocusGroupRootStyle),tabindex:-1,role:"menu",onBlur:t[0]||(t[0]=(...a)=>e.onBlur&&e.onBlur(...a)),onFocus:t[1]||(t[1]=(...a)=>e.onFocus&&e.onFocus(...a)),onKeydown:t[2]||(t[2]=(...a)=>e.handleKeydown&&e.handleKeydown(...a)),onMousedown:t[3]||(t[3]=(...a)=>e.onMousedown&&e.onMousedown(...a))},[_e(e.$slots,"default")],38)}var F_=We(Jde,[["render",Qde]]);const efe=Vt(Ude,{DropdownItem:M_,DropdownMenu:F_}),tfe=Jn(M_),nfe=Jn(F_);let sfe=0;const ofe=me({name:"ImgEmpty",setup(){return{id:++sfe}}}),rfe={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},afe=["id"],ife=W("stop",{"stop-color":"var(--el-empty-fill-color-1)",offset:"0%"},null,-1),lfe=W("stop",{"stop-color":"var(--el-empty-fill-color-4)",offset:"100%"},null,-1),ufe=[ife,lfe],cfe=["id"],dfe=W("stop",{"stop-color":"var(--el-empty-fill-color-1)",offset:"0%"},null,-1),ffe=W("stop",{"stop-color":"var(--el-empty-fill-color-6)",offset:"100%"},null,-1),hfe=[dfe,ffe],pfe=["id"],mfe={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},gfe={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},vfe={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},bfe=W("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:"var(--el-empty-fill-color-3)"},null,-1),yfe=W("polygon",{id:"Rectangle-Copy-14",fill:"var(--el-empty-fill-color-7)",transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,-1),wfe={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},$fe=W("polygon",{id:"Rectangle-Copy-10",fill:"var(--el-empty-fill-color-7)",transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,-1),Cfe=W("polygon",{id:"Rectangle-Copy-11",fill:"var(--el-empty-fill-color-5)",points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,-1),kfe=["fill"],Sfe=W("polygon",{id:"Rectangle-Copy-13",fill:"var(--el-empty-fill-color-2)",transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,-1),xfe=["fill"],Ife={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},Efe=["id"],Tfe=["xlink:href"],Nfe=["xlink:href"],Afe=["mask"],Dfe=W("polygon",{id:"Rectangle-Copy-18",fill:"var(--el-empty-fill-color-2)",transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,-1);function Rfe(e,t,n,s,o,r){return T(),B("svg",rfe,[W("defs",null,[W("linearGradient",{id:`linearGradient-1-${e.id}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},ufe,8,afe),W("linearGradient",{id:`linearGradient-2-${e.id}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},hfe,8,cfe),W("rect",{id:`path-3-${e.id}`,x:"0",y:"0",width:"17",height:"36"},null,8,pfe)]),W("g",mfe,[W("g",gfe,[W("g",vfe,[bfe,yfe,W("g",wfe,[$fe,Cfe,W("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${e.id})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,kfe),Sfe]),W("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${e.id})`,x:"13",y:"45",width:"40",height:"36"},null,8,xfe),W("g",Ife,[W("mask",{id:`mask-4-${e.id}`,fill:"var(--el-empty-fill-color-0)"},[W("use",{"xlink:href":`#path-3-${e.id}`},null,8,Tfe)],8,Efe),W("use",{id:"Mask",fill:"var(--el-empty-fill-color-8)",transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${e.id}`},null,8,Nfe),W("polygon",{id:"Rectangle-Copy",fill:"var(--el-empty-fill-color-9)",mask:`url(#mask-4-${e.id})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 -1.70530257e-13 16"},null,8,Afe)]),Dfe])])])])}var _fe=We(ofe,[["render",Rfe]]);const Ofe={image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},Mfe=me({name:"ElEmpty",components:{ImgEmpty:_fe},props:Ofe,setup(e){const{t}=kn(),n=Dt("empty"),s=_(()=>e.description||t("el.table.emptyText")),o=_(()=>({width:e.imageSize?`${e.imageSize}px`:""}));return{ns:n,emptyDescription:s,imageStyle:o}}}),Ffe=["src"],Pfe={key:1};function Lfe(e,t,n,s,o,r){const a=re("img-empty");return T(),B("div",{class:q(e.ns.b())},[W("div",{class:q(e.ns.e("image")),style:nt(e.imageStyle)},[e.image?(T(),B("img",{key:0,src:e.image,ondragstart:"return false"},null,8,Ffe)):_e(e.$slots,"image",{key:1},()=>[le(a)])],6),W("div",{class:q(e.ns.e("description"))},[e.$slots.description?_e(e.$slots,"description",{key:0}):(T(),B("p",Pfe,Fe(e.emptyDescription),1))],2),e.$slots.default?(T(),B("div",{key:0,class:q(e.ns.e("bottom"))},[_e(e.$slots,"default")],2)):ce("v-if",!0)],2)}var Bfe=We(Mfe,[["render",Lfe]]);const zfe=Vt(Bfe);function Vfe(){const e=L([]),t=_(()=>{if(!e.value.length)return"0";const r=Math.max(...e.value);return r?`${r}px`:""});function n(r){return e.value.indexOf(r)}function s(r,a){if(r&&a){const i=n(a);e.value.splice(i,1,r)}else r&&e.value.push(r)}function o(r){const a=n(r);a>-1&&e.value.splice(a,1)}return{autoLabelWidth:t,registerLabelWidth:s,deregisterLabelWidth:o}}const Wfe=me({name:"ElForm",props:{model:Object,rules:Object,labelPosition:String,labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean},emits:["validate"],setup(e,{emit:t}){const n=[];Oe(()=>e.rules,()=>{n.forEach(p=>{p.evaluateValidationEnabled()}),e.validateOnRuleChange&&c(()=>({}))});const s=ds(),o="el-form",r=_(()=>{const{labelPosition:p,inline:m}=e;return[o,`${o}--${s.value}`,p?`${o}--label-${p}`:"",m?`${o}--inline`:""]}),a=p=>{p&&n.push(p)},i=p=>{p.prop&&n.splice(n.indexOf(p),1)},l=()=>{!e.model||n.forEach(p=>{p.resetField()})},u=(p=[])=>{(p.length?typeof p=="string"?n.filter(g=>p===g.prop):n.filter(g=>p.indexOf(g.prop)>-1):n).forEach(g=>{g.clearValidate()})},c=p=>{if(!e.model)return;let m;typeof p!="function"&&(m=new Promise((y,w)=>{p=function(C,k){C?y(!0):w(k)}})),n.length===0&&p(!0);let g=!0,v=0,b={},$;for(const y of n)y.validate("",(w,C)=>{w&&(g=!1,$||($=C)),b=ut(ut({},b),C),++v===n.length&&p(g,b)});return!g&&e.scrollToError&&f(Object.keys($)[0]),m},d=(p,m)=>{p=[].concat(p);const g=n.filter(v=>p.indexOf(v.prop)!==-1);!n.length||g.forEach(v=>{v.validate("",m)})},f=p=>{n.forEach(m=>{m.prop===p&&m.$el.scrollIntoView()})},h=Cn(ut(Ut(ut({},so(e)),{resetFields:l,clearValidate:u,validateField:d,emit:t,addField:a,removeField:i}),Vfe()));return zt(Lo,h),{formKls:r,validate:c,resetFields:l,clearValidate:u,validateField:d,scrollToField:f}}});function Hfe(e,t,n,s,o,r){return T(),B("form",{class:q(e.formKls)},[_e(e.$slots,"default")],2)}var Ufe=We(Wfe,[["render",Hfe]]);function Sl(){return Sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sl.apply(this,arguments)}function Gfe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pf(e,t)}function qy(e){return qy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},qy(e)}function pf(e,t){return pf=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},pf(e,t)}function Kfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hm(e,t,n){return Kfe()?hm=Reflect.construct:hm=function(o,r,a){var i=[null];i.push.apply(i,r);var l=Function.bind.apply(o,i),u=new l;return a&&pf(u,a.prototype),u},hm.apply(null,arguments)}function jfe(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Xy(e){var t=typeof Map=="function"?new Map:void 0;return Xy=function(s){if(s===null||!jfe(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(s))return t.get(s);t.set(s,o)}function o(){return hm(s,arguments,qy(this).constructor)}return o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),pf(o,s)},Xy(e)}var qfe=/%[sdj%]/g,Xfe=function(){};typeof process!="undefined"&&process.env;function Yy(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var s=n.field;t[s]=t[s]||[],t[s].push(n)}),t}function Yo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var o=0,r=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var a=e.replace(qfe,function(i){if(i==="%%")return"%";if(o>=r)return i;switch(i){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch{return"[Circular]"}break;default:return i}});return a}return e}function Yfe(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Fs(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||Yfe(t)&&typeof e=="string"&&!e)}function Zfe(e,t,n){var s=[],o=0,r=e.length;function a(i){s.push.apply(s,i||[]),o++,o===r&&n(s)}e.forEach(function(i){t(i,a)})}function aE(e,t,n){var s=0,o=e.length;function r(a){if(a&&a.length){n(a);return}var i=s;s=s+1,i<o?t(e[i],r):n([])}r([])}function Jfe(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n]||[])}),t}var iE=function(e){Gfe(t,e);function t(n,s){var o;return o=e.call(this,"Async Validation Error")||this,o.errors=n,o.fields=s,o}return t}(Xy(Error));function Qfe(e,t,n,s,o){if(t.first){var r=new Promise(function(f,h){var p=function(v){return s(v),v.length?h(new iE(v,Yy(v))):f(o)},m=Jfe(e);aE(m,n,p)});return r.catch(function(f){return f}),r}var a=t.firstFields===!0?Object.keys(e):t.firstFields||[],i=Object.keys(e),l=i.length,u=0,c=[],d=new Promise(function(f,h){var p=function(g){if(c.push.apply(c,g),u++,u===l)return s(c),c.length?h(new iE(c,Yy(c))):f(o)};i.length||(s(c),f(o)),i.forEach(function(m){var g=e[m];a.indexOf(m)!==-1?aE(g,n,p):Zfe(g,n,p)})});return d.catch(function(f){return f}),d}function ehe(e){return!!(e&&e.message!==void 0)}function the(e,t){for(var n=e,s=0;s<t.length;s++){if(n==null)return n;n=n[t[s]]}return n}function lE(e,t){return function(n){var s;return e.fullFields?s=the(t,e.fullFields):s=t[n.field||e.fullField],ehe(n)?(n.field=n.field||e.fullField,n.fieldValue=s,n):{message:typeof n=="function"?n():n,fieldValue:s,field:n.field||e.fullField}}}function uE(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];typeof s=="object"&&typeof e[n]=="object"?e[n]=Sl({},e[n],s):e[n]=s}}return e}var P_=function(t,n,s,o,r,a){t.required&&(!s.hasOwnProperty(t.field)||Fs(n,a||t.type))&&o.push(Yo(r.messages.required,t.fullField))},nhe=function(t,n,s,o,r){(/^\s+$/.test(n)||n==="")&&o.push(Yo(r.messages.whitespace,t.fullField))},Nb={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},xd={integer:function(t){return xd.number(t)&&parseInt(t,10)===t},float:function(t){return xd.number(t)&&!xd.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!xd.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(Nb.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(Nb.url)},hex:function(t){return typeof t=="string"&&!!t.match(Nb.hex)}},she=function(t,n,s,o,r){if(t.required&&n===void 0){P_(t,n,s,o,r);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],i=t.type;a.indexOf(i)>-1?xd[i](n)||o.push(Yo(r.messages.types[i],t.fullField,t.type)):i&&typeof n!==t.type&&o.push(Yo(r.messages.types[i],t.fullField,t.type))},ohe=function(t,n,s,o,r){var a=typeof t.len=="number",i=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,d=null,f=typeof n=="number",h=typeof n=="string",p=Array.isArray(n);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(c=n.length),h&&(c=n.replace(u,"_").length),a?c!==t.len&&o.push(Yo(r.messages[d].len,t.fullField,t.len)):i&&!l&&c<t.min?o.push(Yo(r.messages[d].min,t.fullField,t.min)):l&&!i&&c>t.max?o.push(Yo(r.messages[d].max,t.fullField,t.max)):i&&l&&(c<t.min||c>t.max)&&o.push(Yo(r.messages[d].range,t.fullField,t.min,t.max))},Tu="enum",rhe=function(t,n,s,o,r){t[Tu]=Array.isArray(t[Tu])?t[Tu]:[],t[Tu].indexOf(n)===-1&&o.push(Yo(r.messages[Tu],t.fullField,t[Tu].join(", ")))},ahe=function(t,n,s,o,r){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||o.push(Yo(r.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var a=new RegExp(t.pattern);a.test(n)||o.push(Yo(r.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},vn={required:P_,whitespace:nhe,type:she,range:ohe,enum:rhe,pattern:ahe},ihe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n,"string")&&!t.required)return s();vn.required(t,n,o,a,r,"string"),Fs(n,"string")||(vn.type(t,n,o,a,r),vn.range(t,n,o,a,r),vn.pattern(t,n,o,a,r),t.whitespace===!0&&vn.whitespace(t,n,o,a,r))}s(a)},lhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r),n!==void 0&&vn.type(t,n,o,a,r)}s(a)},uhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(n===""&&(n=void 0),Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r),n!==void 0&&(vn.type(t,n,o,a,r),vn.range(t,n,o,a,r))}s(a)},che=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r),n!==void 0&&vn.type(t,n,o,a,r)}s(a)},dhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r),Fs(n)||vn.type(t,n,o,a,r)}s(a)},fhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r),n!==void 0&&(vn.type(t,n,o,a,r),vn.range(t,n,o,a,r))}s(a)},hhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r),n!==void 0&&(vn.type(t,n,o,a,r),vn.range(t,n,o,a,r))}s(a)},phe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(n==null&&!t.required)return s();vn.required(t,n,o,a,r,"array"),n!=null&&(vn.type(t,n,o,a,r),vn.range(t,n,o,a,r))}s(a)},mhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r),n!==void 0&&vn.type(t,n,o,a,r)}s(a)},ghe="enum",vhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r),n!==void 0&&vn[ghe](t,n,o,a,r)}s(a)},bhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n,"string")&&!t.required)return s();vn.required(t,n,o,a,r),Fs(n,"string")||vn.pattern(t,n,o,a,r)}s(a)},yhe=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n,"date")&&!t.required)return s();if(vn.required(t,n,o,a,r),!Fs(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),vn.type(t,l,o,a,r),l&&vn.range(t,l.getTime(),o,a,r)}}s(a)},whe=function(t,n,s,o,r){var a=[],i=Array.isArray(n)?"array":typeof n;vn.required(t,n,o,a,r,i),s(a)},Ab=function(t,n,s,o,r){var a=t.type,i=[],l=t.required||!t.required&&o.hasOwnProperty(t.field);if(l){if(Fs(n,a)&&!t.required)return s();vn.required(t,n,o,i,r,a),Fs(n,a)||vn.type(t,n,o,i,r)}s(i)},$he=function(t,n,s,o,r){var a=[],i=t.required||!t.required&&o.hasOwnProperty(t.field);if(i){if(Fs(n)&&!t.required)return s();vn.required(t,n,o,a,r)}s(a)},Wd={string:ihe,method:lhe,number:uhe,boolean:che,regexp:dhe,integer:fhe,float:hhe,array:phe,object:mhe,enum:vhe,pattern:bhe,date:yhe,url:Ab,hex:Ab,email:Ab,required:whe,any:$he};function Zy(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var Jy=Zy(),Bf=function(){function e(n){this.rules=null,this._messages=Jy,this.define(n)}var t=e.prototype;return t.define=function(s){var o=this;if(!s)throw new Error("Cannot configure a schema with no rules");if(typeof s!="object"||Array.isArray(s))throw new Error("Rules must be an object");this.rules={},Object.keys(s).forEach(function(r){var a=s[r];o.rules[r]=Array.isArray(a)?a:[a]})},t.messages=function(s){return s&&(this._messages=uE(Zy(),s)),this._messages},t.validate=function(s,o,r){var a=this;o===void 0&&(o={}),r===void 0&&(r=function(){});var i=s,l=o,u=r;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,i),Promise.resolve(i);function c(m){var g=[],v={};function b(y){if(Array.isArray(y)){var w;g=(w=g).concat.apply(w,y)}else g.push(y)}for(var $=0;$<m.length;$++)b(m[$]);g.length?(v=Yy(g),u(g,v)):u(null,i)}if(l.messages){var d=this.messages();d===Jy&&(d=Zy()),uE(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(m){var g=a.rules[m],v=i[m];g.forEach(function(b){var $=b;typeof $.transform=="function"&&(i===s&&(i=Sl({},i)),v=i[m]=$.transform(v)),typeof $=="function"?$={validator:$}:$=Sl({},$),$.validator=a.getValidationMethod($),!!$.validator&&($.field=m,$.fullField=$.fullField||m,$.type=a.getType($),f[m]=f[m]||[],f[m].push({rule:$,value:v,source:i,field:m}))})});var p={};return Qfe(f,l,function(m,g){var v=m.rule,b=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");b=b&&(v.required||!v.required&&m.value),v.field=m.field;function $(C,k){return Sl({},k,{fullField:v.fullField+"."+C,fullFields:v.fullFields?[].concat(v.fullFields,[C]):[C]})}function y(C){C===void 0&&(C=[]);var k=Array.isArray(C)?C:[C];!l.suppressWarning&&k.length&&e.warning("async-validator:",k),k.length&&v.message!==void 0&&(k=[].concat(v.message));var S=k.map(lE(v,i));if(l.first&&S.length)return p[v.field]=1,g(S);if(!b)g(S);else{if(v.required&&!m.value)return v.message!==void 0?S=[].concat(v.message).map(lE(v,i)):l.error&&(S=[l.error(v,Yo(l.messages.required,v.field))]),g(S);var E={};v.defaultField&&Object.keys(m.value).map(function(A){E[A]=v.defaultField}),E=Sl({},E,m.rule.fields);var x={};Object.keys(E).forEach(function(A){var D=E[A],M=Array.isArray(D)?D:[D];x[A]=M.map($.bind(null,A))});var N=new e(x);N.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),N.validate(m.value,m.rule.options||l,function(A){var D=[];S&&S.length&&D.push.apply(D,S),A&&A.length&&D.push.apply(D,A),g(D.length?D:null)})}}var w;v.asyncValidator?w=v.asyncValidator(v,m.value,y,m.source,l):v.validator&&(w=v.validator(v,m.value,y,m.source,l),w===!0?y():w===!1?y(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):w instanceof Array?y(w):w instanceof Error&&y(w.message)),w&&w.then&&w.then(function(){return y()},function(C){return y(C)})},function(m){c(m)},i)},t.getType=function(s){if(s.type===void 0&&s.pattern instanceof RegExp&&(s.type="pattern"),typeof s.validator!="function"&&s.type&&!Wd.hasOwnProperty(s.type))throw new Error(Yo("Unknown rule type %s",s.type));return s.type||"string"},t.getValidationMethod=function(s){if(typeof s.validator=="function")return s.validator;var o=Object.keys(s),r=o.indexOf("message");return r!==-1&&o.splice(r,1),o.length===1&&o[0]==="required"?Wd.required:Wd[this.getType(s)]||void 0},e}();Bf.register=function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Wd[t]=n};Bf.warning=Xfe;Bf.messages=Jy;Bf.validators=Wd;var Che=me({name:"ElLabelWrap",props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:t}){const n=L(null),s=Ze(Lo),o=Ze(oa),r=L(0);Oe(r,(c,d)=>{e.updateAll&&(s.registerLabelWidth(c,d),o.updateComputedLabelWidth(c))});const a=()=>{var c;if((c=n.value)==null?void 0:c.firstElementChild){const d=window.getComputedStyle(n.value.firstElementChild).width;return Math.ceil(parseFloat(d))}else return 0},i=(c="update")=>{dt(()=>{t.default&&e.isAutoWidth&&(c==="update"?r.value=a():c==="remove"&&s.deregisterLabelWidth(r.value))})},l=()=>i("update");Mt(()=>{Li(n.value.firstElementChild,l),l()}),sa(l),os(()=>{var c;i("remove"),Bi((c=n.value)==null?void 0:c.firstElementChild,l)});function u(){var c,d;if(!t)return null;if(e.isAutoWidth){const f=s.autoLabelWidth,h={};if(f&&f!=="auto"){const p=Math.max(0,parseInt(f,10)-r.value),m=s.labelPosition==="left"?"marginRight":"marginLeft";p&&(h[m]=`${p}px`)}return He("div",{ref:n,class:["el-form-item__label-wrap"],style:h},(c=t.default)==null?void 0:c.call(t))}else return He(it,{ref:n},(d=t.default)==null?void 0:d.call(t))}return u}});const khe=me({name:"ElFormItem",componentName:"ElFormItem",components:{LabelWrap:Che},props:{label:String,labelWidth:{type:[String,Number],default:""},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,validator:Oo}},setup(e,{slots:t}){const n=Ze(Lo,{}),s=L(""),o=L(""),r=L(!1),a=L(""),i=L(),l=Lt(),u=_(()=>{let A=l.parent;for(;A&&A.type.name!=="ElForm";){if(A.type.name==="ElFormItem")return!0;A=A.parent}return!1});let c;Oe(()=>e.error,A=>{o.value=A,s.value=A?"error":""},{immediate:!0}),Oe(()=>e.validateStatus,A=>{s.value=A});const d=_(()=>e.for||e.prop),f=_(()=>{const A={};if(n.labelPosition==="top")return A;const D=Wa(e.labelWidth||n.labelWidth);return D&&(A.width=D),A}),h=_(()=>{const A={};if(n.labelPosition==="top"||n.inline||!e.label&&!e.labelWidth&&u.value)return A;const D=Wa(e.labelWidth||n.labelWidth);return!e.label&&!t.label&&(A.marginLeft=D),A}),p=_(()=>{const A=n.model;if(!A||!e.prop)return;let D=e.prop;return D.indexOf(":")!==-1&&(D=D.replace(/:/,".")),Jp(A,D,!0).v}),m=_(()=>{const A=y();let D=!1;return A&&A.length&&A.every(M=>M.required?(D=!0,!1):!0),D}),g=ds(void 0,{formItem:!1}),v=(A,D=on)=>{if(!r.value){D();return}const M=w(A);if((!M||M.length===0)&&e.required===void 0){D();return}s.value="validating";const F={};M&&M.length>0&&M.forEach(V=>{delete V.trigger}),F[e.prop]=M;const R=new Bf(F),P={};P[e.prop]=p.value,R.validate(P,{firstFields:!0},(V,G)=>{var se;s.value=V?"error":"success",o.value=V?V[0].message||`${e.prop} is required`:"",D(o.value,V?G:{}),(se=n.emit)==null||se.call(n,"validate",e.prop,!V,o.value||null)})},b=()=>{s.value="",o.value=""},$=()=>{const A=n.model,D=p.value;let M=e.prop;M.indexOf(":")!==-1&&(M=M.replace(/:/,"."));const F=Jp(A,M,!0);Array.isArray(D)?F.o[F.k]=[].concat(c):F.o[F.k]=c,dt(()=>{b()})},y=()=>{const A=n.rules,D=e.rules,M=e.required!==void 0?{required:!!e.required}:[],F=Jp(A,e.prop||"",!1),R=A?F.o[e.prop||""]||F.v:[];return[].concat(D||R||[]).concat(M)},w=A=>y().filter(M=>!M.trigger||A===""?!0:Array.isArray(M.trigger)?M.trigger.indexOf(A)>-1:M.trigger===A).map(M=>ut({},M)),C=()=>{var A;r.value=!!((A=y())==null?void 0:A.length)},k=A=>{a.value=A?`${A}px`:""},S=Cn(Ut(ut({},so(e)),{size:g,validateState:s,$el:i,evaluateValidationEnabled:C,resetField:$,clearValidate:b,validate:v,updateComputedLabelWidth:k}));Mt(()=>{if(e.prop){n==null||n.addField(S);const A=p.value;c=Array.isArray(A)?[...A]:A,C()}}),os(()=>{n==null||n.removeField(S)}),zt(oa,S);const E=_(()=>[{"el-form-item--feedback":n.statusIcon,"is-error":s.value==="error","is-validating":s.value==="validating","is-success":s.value==="success","is-required":m.value||e.required,"is-no-asterisk":n.hideRequiredAsterisk},g.value?`el-form-item--${g.value}`:""]),x=_(()=>s.value==="error"&&e.showMessage&&n.showMessage),N=_(()=>(e.label||"")+(n.labelSuffix||""));return{formItemRef:i,formItemClass:E,shouldShowError:x,elForm:n,labelStyle:f,contentStyle:h,validateMessage:o,labelFor:d,resetField:$,clearValidate:b,currentLabel:N}}}),She=["for"];function xhe(e,t,n,s,o,r){const a=re("LabelWrap");return T(),B("div",{ref:"formItemRef",class:q(["el-form-item",e.formItemClass])},[le(a,{"is-auto-width":e.labelStyle.width==="auto","update-all":e.elForm.labelWidth==="auto"},{default:oe(()=>[e.label||e.$slots.label?(T(),B("label",{key:0,for:e.labelFor,class:"el-form-item__label",style:nt(e.labelStyle)},[_e(e.$slots,"label",{label:e.currentLabel},()=>[jt(Fe(e.currentLabel),1)])],12,She)):ce("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),W("div",{class:"el-form-item__content",style:nt(e.contentStyle)},[_e(e.$slots,"default"),le(cs,{name:"el-zoom-in-top"},{default:oe(()=>[e.shouldShowError?_e(e.$slots,"error",{key:0,error:e.validateMessage},()=>[W("div",{class:q(["el-form-item__error",{"el-form-item__error--inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:e.elForm.inlineMessage||!1}])},Fe(e.validateMessage),3)]):ce("v-if",!0)]),_:3})],4)],2)}var L_=We(khe,[["render",xhe]]);const Ihe=Vt(Ufe,{FormItem:L_}),Ehe=Jn(L_),The=gt({urlList:{type:Je(Array),default:()=>vs([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1}}),Nhe={close:()=>!0,switch:e=>typeof e=="number"},md={CONTAIN:{name:"contain",icon:Yd(kZ)},ORIGINAL:{name:"original",icon:Yd(IJ)}},Ahe=ND()?"DOMMouseScroll":"mousewheel",Dhe=me({name:"ElImageViewer",components:{ElIcon:_t,Close:Zr,ArrowLeft:ru,ArrowRight:Er,ZoomOut:mQ,ZoomIn:QD,RefreshLeft:pJ,RefreshRight:wJ},props:The,emits:Nhe,setup(e,{emit:t}){const{t:n}=kn(),s=Dt("image-viewer"),o=L(),r=L([]),a=P5(),i=L(!0),l=L(e.initialIndex),u=L(md.CONTAIN),c=L({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),d=_(()=>{const{urlList:N}=e;return N.length<=1}),f=_(()=>l.value===0),h=_(()=>l.value===e.urlList.length-1),p=_(()=>e.urlList[l.value]),m=_(()=>{const{scale:N,deg:A,offsetX:D,offsetY:M,enableTransition:F}=c.value;let R=D/N,P=M/N;switch(A%360){case 90:case-270:[R,P]=[P,-R];break;case 180:case-180:[R,P]=[-R,-P];break;case 270:case-90:[R,P]=[-P,R];break}const V={transform:`scale(${N}) rotate(${A}deg) translate(${R}px, ${P}px)`,transition:F?"transform .3s":""};return u.value.name===md.CONTAIN.name&&(V.maxWidth=V.maxHeight="100%"),V});function g(){b(),t("close")}function v(){const N=pb(D=>{switch(D.code){case Qe.esc:g();break;case Qe.space:k();break;case Qe.left:S();break;case Qe.up:x("zoomIn");break;case Qe.right:E();break;case Qe.down:x("zoomOut");break}}),A=pb(D=>{(D.wheelDelta?D.wheelDelta:-D.detail)>0?x("zoomIn",{zoomRate:1.2,enableTransition:!1}):x("zoomOut",{zoomRate:1.2,enableTransition:!1})});a.run(()=>{Ss(document,"keydown",N),Ss(document,Ahe,A)})}function b(){a.stop()}function $(){i.value=!1}function y(N){i.value=!1,N.target.alt=n("el.image.error")}function w(N){if(i.value||N.button!==0||!o.value)return;c.value.enableTransition=!1;const{offsetX:A,offsetY:D}=c.value,M=N.pageX,F=N.pageY,R=pb(V=>{c.value=Ut(ut({},c.value),{offsetX:A+V.pageX-M,offsetY:D+V.pageY-F})}),P=Ss(document,"mousemove",R);Ss(document,"mouseup",()=>{P()}),N.preventDefault()}function C(){c.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function k(){if(i.value)return;const N=Object.keys(md),A=Object.values(md),D=u.value.name,F=(A.findIndex(R=>R.name===D)+1)%N.length;u.value=md[N[F]],C()}function S(){if(f.value&&!e.infinite)return;const N=e.urlList.length;l.value=(l.value-1+N)%N}function E(){if(h.value&&!e.infinite)return;const N=e.urlList.length;l.value=(l.value+1)%N}function x(N,A={}){if(i.value)return;const{zoomRate:D,rotateDeg:M,enableTransition:F}=ut({zoomRate:1.4,rotateDeg:90,enableTransition:!0},A);switch(N){case"zoomOut":c.value.scale>.2&&(c.value.scale=parseFloat((c.value.scale/D).toFixed(3)));break;case"zoomIn":c.value.scale<7&&(c.value.scale=parseFloat((c.value.scale*D).toFixed(3)));break;case"clockwise":c.value.deg+=M;break;case"anticlockwise":c.value.deg-=M;break}c.value.enableTransition=F}return Oe(p,()=>{dt(()=>{const N=r.value[0];(N==null?void 0:N.complete)||(i.value=!0)})}),Oe(l,N=>{C(),t("switch",N)}),Mt(()=>{var N,A;v(),(A=(N=o.value)==null?void 0:N.focus)==null||A.call(N)}),{index:l,wrapper:o,imgRefs:r,isSingle:d,isFirst:f,isLast:h,currentImg:p,imgStyle:m,mode:u,handleActions:x,prev:S,next:E,hide:g,toggleMode:k,handleImgLoad:$,handleImgError:y,handleMouseDown:w,ns:s}}}),Rhe=["src"];function _he(e,t,n,s,o,r){const a=re("close"),i=re("el-icon"),l=re("arrow-left"),u=re("arrow-right"),c=re("zoom-out"),d=re("zoom-in"),f=re("refresh-left"),h=re("refresh-right");return T(),ve(cs,{name:"viewer-fade"},{default:oe(()=>[W("div",{ref:"wrapper",tabindex:-1,class:q(e.ns.e("wrapper")),style:nt({zIndex:e.zIndex})},[W("div",{class:q(e.ns.e("mask")),onClick:t[0]||(t[0]=ht(p=>e.hideOnClickModal&&e.hide(),["self"]))},null,2),ce(" CLOSE "),W("span",{class:q([e.ns.e("btn"),e.ns.e("close")]),onClick:t[1]||(t[1]=(...p)=>e.hide&&e.hide(...p))},[le(i,null,{default:oe(()=>[le(a)]),_:1})],2),ce(" ARROW "),e.isSingle?ce("v-if",!0):(T(),B(it,{key:0},[W("span",{class:q([e.ns.e("btn"),e.ns.e("prev"),e.ns.is("disabled",!e.infinite&&e.isFirst)]),onClick:t[2]||(t[2]=(...p)=>e.prev&&e.prev(...p))},[le(i,null,{default:oe(()=>[le(l)]),_:1})],2),W("span",{class:q([e.ns.e("btn"),e.ns.e("next"),e.ns.is("disabled",!e.infinite&&e.isLast)]),onClick:t[3]||(t[3]=(...p)=>e.next&&e.next(...p))},[le(i,null,{default:oe(()=>[le(u)]),_:1})],2)],64)),ce(" ACTIONS "),W("div",{class:q([e.ns.e("btn"),e.ns.e("actions")])},[W("div",{class:q(e.ns.e("actions__inner"))},[le(i,{onClick:t[4]||(t[4]=p=>e.handleActions("zoomOut"))},{default:oe(()=>[le(c)]),_:1}),le(i,{onClick:t[5]||(t[5]=p=>e.handleActions("zoomIn"))},{default:oe(()=>[le(d)]),_:1}),W("i",{class:q(e.ns.e("actions__divider"))},null,2),le(i,{onClick:e.toggleMode},{default:oe(()=>[(T(),ve(en(e.mode.icon)))]),_:1},8,["onClick"]),W("i",{class:q(e.ns.e("actions__divider"))},null,2),le(i,{onClick:t[6]||(t[6]=p=>e.handleActions("anticlockwise"))},{default:oe(()=>[le(f)]),_:1}),le(i,{onClick:t[7]||(t[7]=p=>e.handleActions("clockwise"))},{default:oe(()=>[le(h)]),_:1})],2)],2),ce(" CANVAS "),W("div",{class:q(e.ns.e("canvas"))},[(T(!0),B(it,null,Yt(e.urlList,(p,m)=>$t((T(),B("img",{ref_for:!0,ref:g=>e.imgRefs[m]=g,key:p,src:p,style:nt(e.imgStyle),class:q(e.ns.e("img")),onLoad:t[8]||(t[8]=(...g)=>e.handleImgLoad&&e.handleImgLoad(...g)),onError:t[9]||(t[9]=(...g)=>e.handleImgError&&e.handleImgError(...g)),onMousedown:t[10]||(t[10]=(...g)=>e.handleMouseDown&&e.handleMouseDown(...g))},null,46,Rhe)),[[Qt,m===e.index]])),128))],2),_e(e.$slots,"default")],6)]),_:3})}var Ohe=We(Dhe,[["render",_he]]);const B_=Vt(Ohe),Mhe=gt({appendToBody:{type:Boolean,default:!1},hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:Je([String,Object])},previewSrcList:{type:Je(Array),default:()=>vs([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0}}),Fhe={error:e=>e instanceof Event,switch:e=>wn(e),close:()=>!0},Phe=e=>e&&e.nodeType===Node.ELEMENT_NODE;let cE="";const Lhe=me({name:"ElImage",components:{ImageViewer:B_},inheritAttrs:!1,props:Mhe,emits:Fhe,setup(e,{emit:t,attrs:n}){const{t:s}=kn(),o=Dt("image"),r=Rw(),a=L(!1),i=L(!0),l=L(0),u=L(0),c=L(!1),d=L(),f=L();let h,p;const m=_(()=>n.style),g=_(()=>{const{fit:M}=e;return qt&&M?{objectFit:M}:{}}),v=_(()=>{const{previewSrcList:M}=e;return Array.isArray(M)&&M.length>0}),b=_(()=>{const{previewSrcList:M,initialIndex:F}=e;let R=F;return F>M.length-1&&(R=0),R}),$=()=>{if(!qt)return;i.value=!0,a.value=!1;const M=new Image,F=e.src;M.addEventListener("load",R=>{F===e.src&&y(R,M)}),M.addEventListener("error",R=>{F===e.src&&w(R)}),Object.entries(r.value).forEach(([R,P])=>{R.toLowerCase()!=="onload"&&M.setAttribute(R,P)}),M.src=F};function y(M,F){l.value=F.width,u.value=F.height,i.value=!1,a.value=!1}function w(M){i.value=!1,a.value=!0,t("error",M)}function C(){Bq(d.value,f.value)&&($(),E())}const k=TD(C,200);async function S(){var M;if(!qt)return;await dt();const{scrollContainer:F}=e;Phe(F)?f.value=F:Xt(F)&&F!==""?f.value=(M=document.querySelector(F))!=null?M:void 0:d.value&&(f.value=Gw(d.value)),f.value&&(h=Ss(f,"scroll",k),setTimeout(()=>C(),100))}function E(){!qt||!f.value||!k||(h(),f.value=void 0)}function x(M){if(!!M.ctrlKey){if(M.deltaY<0)return M.preventDefault(),!1;if(M.deltaY>0)return M.preventDefault(),!1}}function N(){!v.value||(p=Ss("wheel",x,{passive:!1}),cE=document.body.style.overflow,document.body.style.overflow="hidden",c.value=!0)}function A(){p==null||p(),document.body.style.overflow=cE,c.value=!1,t("close")}function D(M){t("switch",M)}return Oe(()=>e.src,()=>{e.lazy?(i.value=!0,a.value=!1,E(),S()):$()}),Mt(()=>{e.lazy?S():$()}),{attrs:r,loading:i,hasLoadError:a,showViewer:c,containerStyle:m,imageStyle:g,preview:v,imageIndex:b,container:d,ns:o,clickHandler:N,closeViewer:A,switchViewer:D,t:s}}}),Bhe=["src"],zhe={key:0};function Vhe(e,t,n,s,o,r){const a=re("image-viewer");return T(),B("div",{ref:"container",class:q([e.ns.b(),e.$attrs.class]),style:nt(e.containerStyle)},[e.loading?_e(e.$slots,"placeholder",{key:0},()=>[W("div",{class:q(e.ns.e("placeholder"))},null,2)]):e.hasLoadError?_e(e.$slots,"error",{key:1},()=>[W("div",{class:q(e.ns.e("error"))},Fe(e.t("el.image.error")),3)]):(T(),B("img",Us({key:2},e.attrs,{src:e.src,style:e.imageStyle,class:[e.ns.e("inner"),e.preview?e.ns.e("preview"):""],onClick:t[0]||(t[0]=(...i)=>e.clickHandler&&e.clickHandler(...i))}),null,16,Bhe)),(T(),ve(Tg,{to:"body",disabled:!e.appendToBody},[e.preview?(T(),B(it,{key:0},[e.showViewer?(T(),ve(a,{key:0,"z-index":e.zIndex,"initial-index":e.imageIndex,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,onClose:e.closeViewer,onSwitch:e.switchViewer},{default:oe(()=>[e.$slots.viewer?(T(),B("div",zhe,[_e(e.$slots,"viewer")])):ce("v-if",!0)]),_:3},8,["z-index","initial-index","url-list","hide-on-click-modal","onClose","onSwitch"])):ce("v-if",!0)],2112)):ce("v-if",!0)],8,["disabled"]))],6)}var Whe=We(Lhe,[["render",Vhe]]);const Hhe=Vt(Whe),Uhe=gt({step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:_w},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===parseInt(`${e}`,10)}}),Ghe={change:(e,t)=>e!==t,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>wn(e),"update:modelValue":e=>wn(e)||e===void 0},Khe=me({name:"ElInputNumber",components:{ElInput:Tr,ElIcon:_t,ArrowUp:Ff,ArrowDown:ou,Plus:YD,Minus:BZ},directives:{RepeatClick:tR},props:Uhe,emits:Ghe,setup(e,{emit:t}){const n=L(),s=Cn({currentValue:e.modelValue,userInput:null}),{formItem:o}=zc(),r=Dt("input-number"),a=_(()=>g(e.modelValue)<e.min),i=_(()=>m(e.modelValue)>e.max),l=_(()=>{const x=p(e.step);return e.precision!==void 0?(x>e.precision,e.precision):Math.max(p(e.modelValue),x)}),u=_(()=>e.controls&&e.controlsPosition==="right"),c=ds(),d=Mf(),f=_(()=>{if(s.userInput!==null)return s.userInput;let x=s.currentValue;if(wn(x)){if(Number.isNaN(x))return"";e.precision!==void 0&&(x=x.toFixed(e.precision))}return x}),h=(x,N)=>(N===void 0&&(N=l.value),parseFloat(`${Math.round(x*Math.pow(10,N))/Math.pow(10,N)}`)),p=x=>{if(x===void 0)return 0;const N=x.toString(),A=N.indexOf(".");let D=0;return A!==-1&&(D=N.length-A-1),D},m=x=>{if(!wn(x))return s.currentValue;const N=Math.pow(10,l.value);return x=wn(x)?x:NaN,h((N*x+N*e.step)/N)},g=x=>{if(!wn(x))return s.currentValue;const N=Math.pow(10,l.value);return x=wn(x)?x:NaN,h((N*x-N*e.step)/N)},v=()=>{if(d.value||i.value)return;const x=e.modelValue||0,N=m(x);$(N)},b=()=>{if(d.value||a.value)return;const x=e.modelValue||0,N=g(x);$(N)},$=x=>{var N;const A=s.currentValue;typeof x=="number"&&e.precision!==void 0&&(x=h(x,e.precision)),x!==void 0&&x>=e.max&&(x=e.max),x!==void 0&&x<=e.min&&(x=e.min),A!==x&&(wn(x)||(x=void 0),s.userInput=null,t("update:modelValue",x),t("input",x),t("change",x,A),(N=o==null?void 0:o.validate)==null||N.call(o,"change"),s.currentValue=x)},y=x=>s.userInput=x,w=x=>{const N=x!==""?Number(x):"";(wn(N)&&!Number.isNaN(N)||x==="")&&$(N),s.userInput=null},C=()=>{var x,N;(N=(x=n.value)==null?void 0:x.focus)==null||N.call(x)},k=()=>{var x,N;(N=(x=n.value)==null?void 0:x.blur)==null||N.call(x)},S=x=>{t("focus",x)},E=x=>{var N;t("blur",x),(N=o==null?void 0:o.validate)==null||N.call(o,"blur")};return Oe(()=>e.modelValue,x=>{let N=Number(x);if(x===null&&(N=Number.NaN),!isNaN(N)){if(e.stepStrictly){const A=p(e.step),D=Math.pow(10,A);N=Math.round(N/e.step)*D*e.step/D}e.precision!==void 0&&(N=h(N,e.precision)),N>e.max&&(N=e.max,t("update:modelValue",N)),N<e.min&&(N=e.min,t("update:modelValue",N))}s.currentValue=N,s.userInput=null},{immediate:!0}),Mt(()=>{var x;const N=(x=n.value)==null?void 0:x.input;if(N.setAttribute("role","spinbutton"),N.setAttribute("aria-valuemax",String(e.max)),N.setAttribute("aria-valuemin",String(e.min)),N.setAttribute("aria-valuenow",String(s.currentValue)),N.setAttribute("aria-disabled",String(d.value)),!wn(e.modelValue)){let A=Number(e.modelValue);isNaN(A)&&(A=void 0),t("update:modelValue",A)}}),sa(()=>{var x;((x=n.value)==null?void 0:x.input).setAttribute("aria-valuenow",s.currentValue)}),{input:n,displayValue:f,handleInput:y,handleInputChange:w,controlsAtRight:u,decrease:b,increase:v,inputNumberSize:c,inputNumberDisabled:d,maxDisabled:i,minDisabled:a,focus:C,blur:k,handleFocus:S,handleBlur:E,ns:r}}});function jhe(e,t,n,s,o,r){const a=re("arrow-down"),i=re("minus"),l=re("el-icon"),u=re("arrow-up"),c=re("plus"),d=re("el-input"),f=wo("repeat-click");return T(),B("div",{class:q([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:t[2]||(t[2]=ht(()=>{},["prevent"]))},[e.controls?$t((T(),B("span",{key:0,role:"button",class:q([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:t[0]||(t[0]=Ht((...h)=>e.decrease&&e.decrease(...h),["enter"]))},[le(l,null,{default:oe(()=>[e.controlsAtRight?(T(),ve(a,{key:0})):(T(),ve(i,{key:1}))]),_:1})],34)),[[f,e.decrease]]):ce("v-if",!0),e.controls?$t((T(),B("span",{key:1,role:"button",class:q([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:t[1]||(t[1]=Ht((...h)=>e.increase&&e.increase(...h),["enter"]))},[le(l,null,{default:oe(()=>[e.controlsAtRight?(T(),ve(u,{key:0})):(T(),ve(c,{key:1}))]),_:1})],34)),[[f,e.increase]]):ce("v-if",!0),le(d,{ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[Ht(ht(e.increase,["prevent"]),["up"]),Ht(ht(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}var qhe=We(Khe,[["render",jhe]]);const z_=Vt(qhe),Xhe=gt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Je([String,Object]),default:""}}),Yhe={click:e=>e instanceof MouseEvent},Zhe=me({name:"ElLink",components:{ElIcon:_t},props:Xhe,emits:Yhe,setup(e,{emit:t}){const n=Dt("link");function s(o){e.disabled||t("click",o)}return{ns:n,handleClick:s}}}),Jhe=["href"];function Qhe(e,t,n,s,o,r){const a=re("el-icon");return T(),B("a",{class:q([e.ns.b(),e.type?e.ns.m(e.type):"",e.ns.is("disabled",e.disabled),e.ns.is("underline",e.underline&&!e.disabled)]),href:e.disabled||!e.href?void 0:e.href,onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},[e.icon?(T(),ve(a,{key:0},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1})):ce("v-if",!0),e.$slots.default?(T(),B("span",{key:1,class:q(e.ns.m("inner"))},[_e(e.$slots,"default")],2)):ce("v-if",!0),e.$slots.icon?_e(e.$slots,"icon",{key:2}):ce("v-if",!0)],10,Jhe)}var epe=We(Zhe,[["render",Qhe]]);const tpe=Vt(epe);class npe{constructor(t,n){this.parent=t,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",s=>{let o=!1;switch(s.code){case Qe.down:{this.gotoSubIndex(this.subIndex+1),o=!0;break}case Qe.up:{this.gotoSubIndex(this.subIndex-1),o=!0;break}case Qe.tab:{Qp(t,"mouseleave");break}case Qe.enter:case Qe.space:{o=!0,s.currentTarget.click();break}}return o&&(s.preventDefault(),s.stopPropagation()),!1})})}}class spe{constructor(t){this.domNode=t,this.submenu=null,this.submenu=null,this.init()}init(){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(".el-menu");t&&(this.submenu=new npe(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let n=!1;switch(t.code){case Qe.down:{Qp(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case Qe.up:{Qp(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case Qe.tab:{Qp(t.currentTarget,"mouseleave");break}case Qe.enter:case Qe.space:{n=!0,t.currentTarget.click();break}}n&&t.preventDefault()})}}class ope{constructor(t){this.domNode=t,this.init()}init(){const t=this.domNode.childNodes;Array.from(t,n=>{n.nodeType===1&&new spe(n)})}}const rpe=me({name:"ElMenuCollapseTransition",setup(){return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,n){To(t,"el-opacity-transition"),t.style.opacity="1",n()},onAfterEnter(t){Qs(t,"el-opacity-transition"),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),Kr(t,"el-menu--collapse")?(Qs(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),To(t,"el-menu--collapse")):(To(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),Qs(t,"el-menu--collapse")),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){To(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function ape(e,t,n,s,o,r){return T(),ve(cs,Us({mode:"out-in"},e.listeners),{default:oe(()=>[_e(e.$slots,"default")]),_:3},16)}var ipe=We(rpe,[["render",ape]]);function V_(e,t){const n=Ze("rootMenu");n||oo("useMenu","can not inject root menu");const s=_(()=>{let a=e.parent;const i=[t.value];for(;a.type.name!=="ElMenu";)a.props.index&&i.unshift(a.props.index),a=a.parent;return i}),o=_(()=>{let a=e.parent;for(;a&&!["ElMenu","ElSubMenu"].includes(a.type.name);)a=a.parent;return a}),r=_(()=>{let a=e.parent;if(n.props.mode!=="vertical")return{};let i=20;if(n.props.collapse)i=20;else for(;a&&a.type.name!=="ElMenu";)a.type.name==="ElSubMenu"&&(i+=20),a=a.parent;return{paddingLeft:`${i}px`}});return{parentMenu:o,paddingStyle:r,indexPath:s}}function lpe(e){return _(()=>{const n=e.backgroundColor;return n?new kd(n).shade(20).toString():""})}const W_=e=>_(()=>({"--el-menu-text-color":e.textColor||"","--el-menu-hover-text-color":e.textColor||"","--el-menu-bg-color":e.backgroundColor||"","--el-menu-hover-bg-color":lpe(e).value||"","--el-menu-active-color":e.activeTextColor||""})),upe=gt({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}}),Db="ElSubMenu";var g$=me({name:Db,props:upe,setup(e,{slots:t,expose:n}){const s=Lt(),{paddingStyle:o,indexPath:r,parentMenu:a}=V_(s,_(()=>e.index)),i=Ze("rootMenu");i||oo(Db,"can not inject root menu");const l=Ze(`subMenu:${a.value.uid}`);l||oo(Db,"can not inject sub menu");const u=L({}),c=L({});let d;const f=L(!1),h=L(),p=L(null),m=_(()=>x.value==="horizontal"&&v.value?"bottom-start":"right-start"),g=_(()=>x.value==="horizontal"&&v.value||x.value==="vertical"&&!i.props.collapse?ou:Er),v=_(()=>{let V=!0,G=s.parent;for(;G&&G.type.name!=="ElMenu";)if(["ElSubMenu","ElMenuItemGroup"].includes(G.type.name)){V=!1;break}else G=G.parent;return V}),b=_(()=>e.popperAppendToBody===void 0?v.value:Boolean(e.popperAppendToBody)),$=_(()=>i.props.collapse?"el-zoom-in-left":"el-zoom-in-top"),y=_(()=>x.value==="horizontal"&&v.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),w=_(()=>i.openedMenus.includes(e.index)),C=_(()=>{let V=!1;return Object.values(u.value).forEach(G=>{G.active&&(V=!0)}),Object.values(c.value).forEach(G=>{G.active&&(V=!0)}),V}),k=_(()=>i.props.backgroundColor||""),S=_(()=>i.props.activeTextColor||""),E=_(()=>i.props.textColor||""),x=_(()=>i.props.mode),N=Cn({index:e.index,indexPath:r,active:C}),A=_(()=>x.value!=="horizontal"?{color:E.value}:{borderBottomColor:C.value?i.props.activeTextColor?S.value:"":"transparent",color:C.value?S.value:E.value}),D=()=>{var V,G,se;return(se=(G=(V=p.value)==null?void 0:V.popperRef)==null?void 0:G.popperInstanceRef)==null?void 0:se.destroy()},M=V=>{V||D()},F=()=>{i.props.menuTrigger==="hover"&&i.props.mode==="horizontal"||i.props.collapse&&i.props.mode==="vertical"||e.disabled||i.handleSubMenuClick({index:e.index,indexPath:r.value,active:C.value})},R=(V,G=e.showTimeout)=>{var se;V.type==="focus"&&!V.relatedTarget||i.props.menuTrigger==="click"&&i.props.mode==="horizontal"||!i.props.collapse&&i.props.mode==="vertical"||e.disabled||(l.mouseInChild.value=!0,d==null||d(),{stop:d}=ic(()=>{i.openMenu(e.index,r.value)},G),b.value&&((se=a.value.vnode.el)==null||se.dispatchEvent(new MouseEvent("mouseenter"))))},P=(V=!1)=>{var G,se;i.props.menuTrigger==="click"&&i.props.mode==="horizontal"||!i.props.collapse&&i.props.mode==="vertical"||(d==null||d(),l.mouseInChild.value=!1,{stop:d}=ic(()=>!f.value&&i.closeMenu(e.index,r.value),e.hideTimeout),b.value&&V&&((G=s.parent)==null?void 0:G.type.name)==="ElSubMenu"&&((se=l.handleMouseleave)==null||se.call(l,!0)))};Oe(()=>i.props.collapse,V=>M(Boolean(V)));{const V=se=>{c.value[se.index]=se},G=se=>{delete c.value[se.index]};zt(`subMenu:${s.uid}`,{addSubMenu:V,removeSubMenu:G,handleMouseleave:P,mouseInChild:f})}return n({opened:w}),Mt(()=>{i.addSubMenu(N),l.addSubMenu(N)}),os(()=>{l.removeSubMenu(N),i.removeSubMenu(N)}),()=>{var V;const G=[(V=t.title)==null?void 0:V.call(t),He(_t,{class:["el-sub-menu__icon-arrow"]},{default:()=>He(g.value)})],se=W_(i.props),ke=i.isMenuPopup?He(Bo,{ref:p,visible:w.value,effect:"light",pure:!0,offset:6,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:m.value,teleported:b.value,fallbackPlacements:y.value,transition:$.value,gpuAcceleration:!1},{content:()=>{var te;return He("div",{class:[`el-menu--${x.value}`,e.popperClass],onMouseenter:pe=>R(pe,100),onMouseleave:()=>P(!0),onFocus:pe=>R(pe,100)},[He("ul",{class:["el-menu el-menu--popup",`el-menu--popup-${m.value}`],style:se.value},[(te=t.default)==null?void 0:te.call(t)])])},default:()=>He("div",{class:"el-sub-menu__title",style:[o.value,A.value,{backgroundColor:k.value}],onClick:F},G)}):He(it,{},[He("div",{class:"el-sub-menu__title",style:[o.value,A.value,{backgroundColor:k.value}],ref:h,onClick:F},G),He(Kg,{},{default:()=>{var te;return $t(He("ul",{role:"menu",class:"el-menu el-menu--inline",style:se.value},[(te=t.default)==null?void 0:te.call(t)]),[[Qt,w.value]])}})]);return He("li",{class:["el-sub-menu",{"is-active":C.value,"is-opened":w.value,"is-disabled":e.disabled}],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:R,onMouseleave:()=>P(!0),onFocus:R},[ke])}}});const cpe=gt({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Je(Array),default:()=>vs([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0}}),Rb=e=>Array.isArray(e)&&e.every(t=>Xt(t)),dpe={close:(e,t)=>Xt(e)&&Rb(t),open:(e,t)=>Xt(e)&&Rb(t),select:(e,t,n,s)=>Xt(e)&&Rb(t)&&rn(n)&&(s===void 0||s instanceof Promise)};var fpe=me({name:"ElMenu",props:cpe,emits:dpe,setup(e,{emit:t,slots:n,expose:s}){const o=Lt(),r=o.appContext.config.globalProperties.$router,a=L(),i=L(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),l=L(e.defaultActive),u=L({}),c=L({}),d=L(!1),f=_(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),h=()=>{const C=l.value&&u.value[l.value];if(!C||e.mode==="horizontal"||e.collapse)return;C.indexPath.forEach(S=>{const E=c.value[S];E&&p(S,E.indexPath)})},p=(C,k)=>{i.value.includes(C)||(e.uniqueOpened&&(i.value=i.value.filter(S=>k.includes(S))),i.value.push(C),t("open",C,k))},m=(C,k)=>{const S=i.value.indexOf(C);S!==-1&&i.value.splice(S,1),t("close",C,k)},g=({index:C,indexPath:k})=>{i.value.includes(C)?m(C,k):p(C,k)},v=C=>{(e.mode==="horizontal"||e.collapse)&&(i.value=[]);const{index:k,indexPath:S}=C;if(!(k===void 0||S===void 0))if(e.router&&r){const E=C.route||k,x=r.push(E).then(N=>(N||(l.value=k),N));t("select",k,S,{index:k,indexPath:S,route:E},x)}else l.value=k,t("select",k,S,{index:k,indexPath:S})},b=C=>{const k=u.value,S=k[C]||l.value&&k[l.value]||k[e.defaultActive];S?(l.value=S.index,h()):d.value?d.value=!1:l.value=void 0},$=()=>{dt(()=>o.proxy.$forceUpdate())};Oe(()=>e.defaultActive,C=>{u.value[C]||(l.value=""),b(C)}),Oe(u.value,()=>h()),Oe(()=>e.collapse,(C,k)=>{C!==k&&(d.value=!0),C&&(i.value=[])});{const C=x=>{c.value[x.index]=x},k=x=>{delete c.value[x.index]};zt("rootMenu",Cn({props:e,openedMenus:i,items:u,subMenus:c,activeIndex:l,isMenuPopup:f,addMenuItem:x=>{u.value[x.index]=x},removeMenuItem:x=>{delete u.value[x.index]},addSubMenu:C,removeSubMenu:k,openMenu:p,closeMenu:m,handleMenuItemClick:v,handleSubMenuClick:g})),zt(`subMenu:${o.uid}`,{addSubMenu:C,removeSubMenu:k,mouseInChild:L(!1)})}Mt(()=>{h(),e.mode==="horizontal"&&new ope(o.vnode.el)}),s({open:k=>{const{indexPath:S}=c.value[k];S.forEach(E=>p(E,S))},close:m,handleResize:$});const y=C=>{const k=Array.isArray(C)?C:[C],S=[];return k.forEach(E=>{Array.isArray(E.children)?S.push(...y(E.children)):S.push(E)}),S},w=C=>e.mode==="horizontal"?$t(C,[[tee,$]]):C;return()=>{var C,k,S,E;let x=(k=(C=n.default)==null?void 0:C.call(n))!=null?k:[];const N=[];if(e.mode==="horizontal"&&a.value){const F=Array.from((E=(S=a.value)==null?void 0:S.childNodes)!=null?E:[]).filter(K=>K.nodeName!=="#text"||K.nodeValue),R=y(x),P=64,V=parseInt(getComputedStyle(a.value).paddingLeft,10),G=parseInt(getComputedStyle(a.value).paddingRight,10),se=a.value.clientWidth-V-G;let ke=0,te=0;F.forEach((K,X)=>{ke+=K.offsetWidth||0,ke<=se-P&&(te=X+1)});const pe=R.slice(0,te),ae=R.slice(te);(ae==null?void 0:ae.length)&&e.ellipsis&&(x=pe,N.push(He(g$,{index:"sub-menu-more",class:"el-sub-menu__hide-arrow"},{title:()=>He(_t,{class:["el-sub-menu__icon-more"]},{default:()=>He(ZZ)}),default:()=>ae})))}const A=W_(e),D=F=>e.ellipsis?w(F):F,M=D(He("ul",{key:String(e.collapse),role:"menubar",ref:a,style:A.value,class:{"el-menu":!0,"el-menu--horizontal":e.mode==="horizontal","el-menu--collapse":e.collapse}},[...x.map(F=>D(F)),...N]));return e.collapseTransition&&e.mode==="vertical"?He(ipe,()=>M):M}}});const hpe=gt({index:{type:Je([String,null]),default:null},route:{type:Je([String,Object])},disabled:Boolean}),ppe={click:e=>Xt(e.index)&&Array.isArray(e.indexPath)},_b="ElMenuItem",mpe=me({name:_b,components:{ElTooltip:Bo},props:hpe,emits:ppe,setup(e,{emit:t}){const n=Lt(),s=Ze("rootMenu");s||oo(_b,"can not inject root menu");const{parentMenu:o,paddingStyle:r,indexPath:a}=V_(n,Js(e,"index")),i=Ze(`subMenu:${o.value.uid}`);i||oo(_b,"can not inject sub menu");const l=_(()=>e.index===s.activeIndex),u=Cn({index:e.index,indexPath:a,active:l}),c=()=>{e.disabled||(s.handleMenuItemClick({index:e.index,indexPath:a.value,route:e.route}),t("click",u))};return Mt(()=>{i.addSubMenu(u),s.addMenuItem(u)}),os(()=>{i.removeSubMenu(u),s.removeMenuItem(u)}),{Effect:wR,parentMenu:o,rootMenu:s,paddingStyle:r,active:l,handleClick:c}}}),gpe={style:{position:"absolute",left:0,top:0,height:"100%",width:"100%",display:"inline-block",boxSizing:"border-box",padding:"0 20px"}};function vpe(e,t,n,s,o,r){const a=re("el-tooltip");return T(),B("li",{class:q(["el-menu-item",{"is-active":e.active,"is-disabled":e.disabled}]),role:"menuitem",tabindex:"-1",style:nt(e.paddingStyle),onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(T(),ve(a,{key:0,effect:e.Effect.DARK,placement:"right",persistent:""},{content:oe(()=>[_e(e.$slots,"title")]),default:oe(()=>[W("div",gpe,[_e(e.$slots,"default")])]),_:3},8,["effect"])):(T(),B(it,{key:1},[_e(e.$slots,"default"),_e(e.$slots,"title")],64))],6)}var H_=We(mpe,[["render",vpe]]);const bpe={title:String},dE="ElMenuItemGroup",ype=me({name:dE,props:bpe,setup(){const e=Lt(),t=Ze("rootMenu");return t||oo(dE,"can not inject root menu"),{levelPadding:_(()=>{if(t.props.collapse)return 20;let s=20,o=e.parent;for(;o&&o.type.name!=="ElMenu";)o.type.name==="ElSubMenu"&&(s+=20),o=o.parent;return s})}}}),wpe={class:"el-menu-item-group"};function $pe(e,t,n,s,o,r){return T(),B("li",wpe,[W("div",{class:"el-menu-item-group__title",style:nt({paddingLeft:`${e.levelPadding}px`})},[e.$slots.title?_e(e.$slots,"title",{key:1}):(T(),B(it,{key:0},[jt(Fe(e.title),1)],2112))],4),W("ul",null,[_e(e.$slots,"default")])])}var U_=We(ype,[["render",$pe]]);const Cpe=Vt(fpe,{MenuItem:H_,MenuItemGroup:U_,SubMenu:g$}),kpe=Jn(H_),Spe=Jn(U_);Jn(g$);const xpe={icon:{type:[String,Object],default:KX},title:String,content:{type:String,default:""}},Ipe={back:()=>!0},Epe=me({name:"ElPageHeader",components:{ElIcon:_t},props:xpe,emits:Ipe,setup(e,{emit:t}){const{t:n}=kn();function s(){t("back")}return{handleClick:s,t:n}}}),Tpe={class:"el-page-header"},Npe={key:0,class:"el-page-header__icon"},Ape={class:"el-page-header__title"},Dpe={class:"el-page-header__content"};function Rpe(e,t,n,s,o,r){const a=re("el-icon");return T(),B("div",Tpe,[W("div",{class:"el-page-header__left",onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},[e.icon||e.$slots.icon?(T(),B("div",Npe,[_e(e.$slots,"icon",{},()=>[e.icon?(T(),ve(a,{key:0},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1})):ce("v-if",!0)])])):ce("v-if",!0),W("div",Ape,[_e(e.$slots,"title",{},()=>[jt(Fe(e.title||e.t("el.pageHeader.title")),1)])])]),W("div",Dpe,[_e(e.$slots,"content",{},()=>[jt(Fe(e.content),1)])])])}var _pe=We(Epe,[["render",Rpe]]);const Ope=Vt(_pe),Mpe={disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String,default:""}},Fpe=me({name:"ElPaginationPrev",components:{ElIcon:_t,ArrowLeft:ru},props:Mpe,emits:["click"],setup(e){return{internalDisabled:_(()=>e.disabled||e.currentPage<=1)}}}),Ppe=["disabled","aria-disabled"],Lpe={key:0};function Bpe(e,t,n,s,o,r){const a=re("arrow-left"),i=re("el-icon");return T(),B("button",{type:"button",class:"btn-prev",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:t[0]||(t[0]=l=>e.$emit("click",l))},[e.prevText?(T(),B("span",Lpe,Fe(e.prevText),1)):(T(),ve(i,{key:1},{default:oe(()=>[le(a)]),_:1}))],8,Ppe)}var zpe=We(Fpe,[["render",Bpe]]);const Vpe={disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String,default:""}},Wpe=me({name:"ElPaginationNext",components:{ElIcon:_t,ArrowRight:Er},props:Vpe,emits:["click"],setup(e){return{internalDisabled:_(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0)}}}),Hpe=["disabled","aria-disabled"],Upe={key:0};function Gpe(e,t,n,s,o,r){const a=re("arrow-right"),i=re("el-icon");return T(),B("button",{type:"button",class:"btn-next",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:t[0]||(t[0]=l=>e.$emit("click",l))},[e.nextText?(T(),B("span",Upe,Fe(e.nextText),1)):(T(),ve(i,{key:1},{default:oe(()=>[le(a)]),_:1}))],8,Hpe)}var Kpe=We(Wpe,[["render",Gpe]]);const G_="ElSelectGroup",jg="ElSelect";function jpe(e,t){const n=Ze(jg),s=Ze(G_,{disabled:!1}),o=_(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),r=_(()=>n.props.multiple?d(n.props.modelValue,e.value):f(e.value,n.props.modelValue)),a=_(()=>{if(n.props.multiple){const m=n.props.modelValue||[];return!r.value&&m.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),i=_(()=>e.label||(o.value?"":e.value)),l=_(()=>e.value||e.label||""),u=_(()=>e.disabled||t.groupDisabled||a.value),c=Lt(),d=(m=[],g)=>{if(o.value){const v=n.props.valueKey;return m&&m.some(b=>Cs(b,v)===Cs(g,v))}else return m&&m.indexOf(g)>-1},f=(m,g)=>{if(o.value){const{valueKey:v}=n.props;return Cs(m,v)===Cs(g,v)}else return m===g},h=()=>{!e.disabled&&!s.disabled&&(n.hoverIndex=n.optionsArray.indexOf(c.proxy))};Oe(()=>i.value,()=>{!e.created&&!n.props.remote&&n.setSelected()}),Oe(()=>e.value,(m,g)=>{const{remote:v,valueKey:b}=n.props;if(!e.created&&!v){if(b&&typeof m=="object"&&typeof g=="object"&&m[b]===g[b])return;n.setSelected()}}),Oe(()=>s.disabled,()=>{t.groupDisabled=s.disabled},{immediate:!0});const{queryChange:p}=bn(n);return Oe(p,m=>{const{query:g}=je(m),v=new RegExp(M7(g),"i");t.visible=v.test(i.value)||e.created,t.visible||n.filteredOptionsCount--}),{select:n,currentLabel:i,currentValue:l,itemSelected:r,isDisabled:u,hoverItem:h}}const qpe=me({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(e){const t=Cn({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:n,itemSelected:s,isDisabled:o,select:r,hoverItem:a}=jpe(e,t),{visible:i,hover:l}=so(t),u=Lt().proxy,c=u.value;r.onOptionCreate(u),os(()=>{const{selected:f}=r,h=r.props.multiple?f:[f],p=r.cachedOptions.has(c),m=h.some(g=>g.value===u.value);p&&!m&&r.cachedOptions.delete(c),r.onOptionDestroy(c)});function d(){e.disabled!==!0&&t.groupDisabled!==!0&&r.handleOptionSelect(u,!0)}return{currentLabel:n,itemSelected:s,isDisabled:o,select:r,hoverItem:a,visible:i,hover:l,selectOptionClick:d,states:t}}});function Xpe(e,t,n,s,o,r){return $t((T(),B("li",{class:q(["el-select-dropdown__item",{selected:e.itemSelected,"is-disabled":e.isDisabled,hover:e.hover}]),onMouseenter:t[0]||(t[0]=(...a)=>e.hoverItem&&e.hoverItem(...a)),onClick:t[1]||(t[1]=ht((...a)=>e.selectOptionClick&&e.selectOptionClick(...a),["stop"]))},[_e(e.$slots,"default",{},()=>[W("span",null,Fe(e.currentLabel),1)])],34)),[[Qt,e.visible]])}var v$=We(qpe,[["render",Xpe]]);const Ype=me({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=Ze(jg),t=_(()=>e.props.popperClass),n=_(()=>e.props.multiple),s=_(()=>e.props.fitInputWidth),o=L("");function r(){var a;o.value=`${(a=e.selectWrapper)==null?void 0:a.getBoundingClientRect().width}px`}return Mt(()=>{r(),Li(e.selectWrapper,r)}),os(()=>{Bi(e.selectWrapper,r)}),{minWidth:o,popperClass:t,isMultiple:n,isFitInputWidth:s}}});function Zpe(e,t,n,s,o,r){return T(),B("div",{class:q(["el-select-dropdown",[{"is-multiple":e.isMultiple},e.popperClass]]),style:nt({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[_e(e.$slots,"default")],6)}var Jpe=We(Ype,[["render",Zpe]]);function Qpe(e){const{t}=kn();return Cn({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:t("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:0,tagInMultiLine:!1})}const eme=(e,t,n)=>{const{t:s}=kn(),o=L(null),r=L(null),a=L(null),i=L(null),l=L(null),u=L(null),c=L(-1),d=uo({query:""}),f=uo(""),h=Ze(Lo,{}),p=Ze(oa,{}),m=_(()=>!e.filterable||e.multiple||!t.visible),g=_(()=>e.disabled||h.disabled),v=_(()=>{const de=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!g.value&&t.inputHovering&&de}),b=_(()=>e.remote&&e.filterable?"":e.suffixIcon),$=_(()=>b.value&&t.visible?"is-reverse":""),y=_(()=>e.remote?300:0),w=_(()=>e.loading?e.loadingText||s("el.select.loading"):e.remote&&t.query===""&&t.options.size===0?!1:e.filterable&&t.query&&t.options.size>0&&t.filteredOptionsCount===0?e.noMatchText||s("el.select.noMatch"):t.options.size===0?e.noDataText||s("el.select.noData"):null),C=_(()=>Array.from(t.options.values())),k=_(()=>Array.from(t.cachedOptions.values())),S=_(()=>{const de=C.value.filter(Re=>!Re.created).some(Re=>Re.currentLabel===t.query);return e.filterable&&e.allowCreate&&t.query!==""&&!de}),E=ds(),x=_(()=>["small"].indexOf(E.value)>-1?"small":"default"),N=_({get(){return t.visible&&w.value!==!1},set(de){t.visible=de}});Oe(()=>g.value,()=>{dt(()=>{A()})}),Oe(()=>e.placeholder,de=>{t.cachedPlaceHolder=t.currentPlaceholder=de}),Oe(()=>e.modelValue,(de,Re)=>{var Ke;e.multiple&&(A(),de&&de.length>0||r.value&&t.query!==""?t.currentPlaceholder="":t.currentPlaceholder=t.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(t.query="",D(t.query))),R(),e.filterable&&!e.multiple&&(t.inputLength=20),jr(de,Re)||(Ke=p.validate)==null||Ke.call(p,"change")},{flush:"post",deep:!0}),Oe(()=>t.visible,de=>{var Re,Ke,Ae;de?((Ke=(Re=a.value)==null?void 0:Re.updatePopper)==null||Ke.call(Re),e.filterable&&(t.filteredOptionsCount=t.optionsCount,t.query=e.remote?"":t.selectedLabel,e.multiple?(Ae=r.value)==null||Ae.focus():t.selectedLabel&&(t.currentPlaceholder=t.selectedLabel,t.selectedLabel=""),D(t.query),!e.multiple&&!e.remote&&(d.value.query="",ud(d),ud(f)))):(r.value&&r.value.blur(),t.query="",t.previousQuery=null,t.selectedLabel="",t.inputLength=20,t.menuVisibleOnFocus=!1,V(),dt(()=>{r.value&&r.value.value===""&&t.selected.length===0&&(t.currentPlaceholder=t.cachedPlaceHolder)}),e.multiple||(t.selected&&(e.filterable&&e.allowCreate&&t.createdSelected&&t.createdLabel?t.selectedLabel=t.createdLabel:t.selectedLabel=t.selected.currentLabel,e.filterable&&(t.query=t.selectedLabel)),e.filterable&&(t.currentPlaceholder=t.cachedPlaceHolder))),n.emit("visible-change",de)}),Oe(()=>t.options.entries(),()=>{var de,Re,Ke;if(!qt)return;(Re=(de=a.value)==null?void 0:de.updatePopper)==null||Re.call(de),e.multiple&&A();const Ae=((Ke=l.value)==null?void 0:Ke.querySelectorAll("input"))||[];Array.from(Ae).indexOf(document.activeElement)===-1&&R(),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&F()},{flush:"post"}),Oe(()=>t.hoverIndex,de=>{typeof de=="number"&&de>-1&&(c.value=C.value[de]||{}),C.value.forEach(Re=>{Re.hover=c.value===Re})});const A=()=>{e.collapseTags&&!e.filterable||dt(()=>{var de,Re;if(!o.value)return;const Ke=o.value.$el.childNodes,Ae=Array.from(Ke).filter(sn=>sn.tagName==="INPUT")[0],ct=i.value,wt=t.initialInputHeight||40;Ae.style.height=t.selected.length===0?`${wt}px`:`${Math.max(ct?ct.clientHeight+(ct.clientHeight>wt?6:0):0,wt)}px`,t.tagInMultiLine=parseFloat(Ae.style.height)>wt,t.visible&&w.value!==!1&&((Re=(de=a.value)==null?void 0:de.updatePopper)==null||Re.call(de))})},D=de=>{if(!(t.previousQuery===de||t.isOnComposition)){if(t.previousQuery===null&&(typeof e.filterMethod=="function"||typeof e.remoteMethod=="function")){t.previousQuery=de;return}t.previousQuery=de,dt(()=>{var Re,Ke;t.visible&&((Ke=(Re=a.value)==null?void 0:Re.updatePopper)==null||Ke.call(Re))}),t.hoverIndex=-1,e.multiple&&e.filterable&&dt(()=>{const Re=r.value.value.length*15+20;t.inputLength=e.collapseTags?Math.min(50,Re):Re,M(),A()}),e.remote&&typeof e.remoteMethod=="function"?(t.hoverIndex=-1,e.remoteMethod(de)):typeof e.filterMethod=="function"?(e.filterMethod(de),ud(f)):(t.filteredOptionsCount=t.optionsCount,d.value.query=de,ud(d),ud(f)),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&F()}},M=()=>{t.currentPlaceholder!==""&&(t.currentPlaceholder=r.value.value?"":t.cachedPlaceHolder)},F=()=>{const de=C.value.filter(Ae=>Ae.visible&&!Ae.disabled&&!Ae.states.groupDisabled),Re=de.filter(Ae=>Ae.created)[0],Ke=de[0];t.hoverIndex=xe(C.value,Re||Ke)},R=()=>{var de;if(!e.multiple){const Ke=P(e.modelValue);((de=Ke.props)==null?void 0:de.created)?(t.createdLabel=Ke.props.value,t.createdSelected=!0):t.createdSelected=!1,t.selectedLabel=Ke.currentLabel,t.selected=Ke,e.filterable&&(t.query=t.selectedLabel);return}const Re=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(Ke=>{Re.push(P(Ke))}),t.selected=Re,dt(()=>{A()})},P=de=>{let Re;const Ke=jp(de).toLowerCase()==="object",Ae=jp(de).toLowerCase()==="null",ct=jp(de).toLowerCase()==="undefined";for(let ln=t.cachedOptions.size-1;ln>=0;ln--){const Kt=k.value[ln];if(Ke?Cs(Kt.value,e.valueKey)===Cs(de,e.valueKey):Kt.value===de){Re={value:de,currentLabel:Kt.currentLabel,isDisabled:Kt.isDisabled};break}}if(Re)return Re;const sn={value:de,currentLabel:!Ke&&!Ae&&!ct?de:""};return e.multiple&&(sn.hitState=!1),sn},V=()=>{setTimeout(()=>{const de=e.valueKey;e.multiple?t.selected.length>0?t.hoverIndex=Math.min.apply(null,t.selected.map(Re=>C.value.findIndex(Ke=>Cs(Ke,de)===Cs(Re,de)))):t.hoverIndex=-1:t.hoverIndex=C.value.findIndex(Re=>lt(Re)===lt(t.selected))},300)},G=()=>{var de,Re;se(),(Re=(de=a.value)==null?void 0:de.updatePopper)==null||Re.call(de),e.multiple&&A()},se=()=>{var de;t.inputWidth=(de=o.value)==null?void 0:de.$el.getBoundingClientRect().width},ke=()=>{e.filterable&&t.query!==t.selectedLabel&&(t.query=t.selectedLabel,D(t.query))},te=_o(()=>{ke()},y.value),pe=_o(de=>{D(de.target.value)},y.value),ae=de=>{jr(e.modelValue,de)||n.emit(Ms,de)},K=de=>{if(de.target.value.length<=0&&!H()){const Re=e.modelValue.slice();Re.pop(),n.emit(Ft,Re),ae(Re)}de.target.value.length===1&&e.modelValue.length===0&&(t.currentPlaceholder=t.cachedPlaceHolder)},X=(de,Re)=>{const Ke=t.selected.indexOf(Re);if(Ke>-1&&!g.value){const Ae=e.modelValue.slice();Ae.splice(Ke,1),n.emit(Ft,Ae),ae(Ae),n.emit("remove-tag",Re.value)}de.stopPropagation()},Y=de=>{de.stopPropagation();const Re=e.multiple?[]:"";if(typeof Re!="string")for(const Ke of t.selected)Ke.isDisabled&&Re.push(Ke.value);n.emit(Ft,Re),ae(Re),t.visible=!1,n.emit("clear")},ie=(de,Re)=>{var Ke;if(e.multiple){const Ae=(e.modelValue||[]).slice(),ct=xe(Ae,de.value);ct>-1?Ae.splice(ct,1):(e.multipleLimit<=0||Ae.length<e.multipleLimit)&&Ae.push(de.value),n.emit(Ft,Ae),ae(Ae),de.created&&(t.query="",D(""),t.inputLength=20),e.filterable&&((Ke=r.value)==null||Ke.focus())}else n.emit(Ft,de.value),ae(de.value),t.visible=!1;t.isSilentBlur=Re,Le(),!t.visible&&dt(()=>{Be(de)})},xe=(de=[],Re)=>{if(!rn(Re))return de.indexOf(Re);const Ke=e.valueKey;let Ae=-1;return de.some((ct,wt)=>Cs(ct,Ke)===Cs(Re,Ke)?(Ae=wt,!0):!1),Ae},Le=()=>{t.softFocus=!0;const de=r.value||o.value;de&&(de==null||de.focus())},Be=de=>{var Re,Ke,Ae,ct,wt;const sn=Array.isArray(de)?de[0]:de;let ln=null;if(sn==null?void 0:sn.value){const Kt=C.value.filter(_n=>_n.value===sn.value);Kt.length>0&&(ln=Kt[0].$el)}if(a.value&&ln){const Kt=(ct=(Ae=(Ke=(Re=a.value)==null?void 0:Re.popperRef)==null?void 0:Ke.contentRef)==null?void 0:Ae.querySelector)==null?void 0:ct.call(Ae,".el-select-dropdown__wrap");Kt&&qR(Kt,ln)}(wt=u.value)==null||wt.handleScroll()},Pe=de=>{t.optionsCount++,t.filteredOptionsCount++,t.options.set(de.value,de),t.cachedOptions.set(de.value,de)},U=de=>{t.optionsCount--,t.filteredOptionsCount--,t.options.delete(de)},Q=de=>{de.code!==Qe.backspace&&H(!1),t.inputLength=r.value.value.length*15+20,A()},H=de=>{if(!Array.isArray(t.selected))return;const Re=t.selected[t.selected.length-1];if(!!Re)return de===!0||de===!1?(Re.hitState=de,de):(Re.hitState=!Re.hitState,Re.hitState)},ne=de=>{const Re=de.target.value;if(de.type==="compositionend")t.isOnComposition=!1,dt(()=>D(Re));else{const Ke=Re[Re.length-1]||"";t.isOnComposition=!Wg(Ke)}},ye=()=>{dt(()=>Be(t.selected))},J=de=>{t.softFocus?t.softFocus=!1:((e.automaticDropdown||e.filterable)&&(t.visible=!0,e.filterable&&(t.menuVisibleOnFocus=!0)),n.emit("focus",de))},Ne=()=>{var de;t.visible=!1,(de=o.value)==null||de.blur()},Ie=de=>{dt(()=>{t.isSilentBlur?t.isSilentBlur=!1:n.emit("blur",de)}),t.softFocus=!1},fe=de=>{Y(de)},Ee=()=>{t.visible=!1},rt=()=>{var de;e.automaticDropdown||g.value||(t.menuVisibleOnFocus?t.menuVisibleOnFocus=!1:t.visible=!t.visible,t.visible&&((de=r.value||o.value)==null||de.focus()))},Ye=()=>{t.visible?C.value[t.hoverIndex]&&ie(C.value[t.hoverIndex],void 0):rt()},lt=de=>rn(de.value)?Cs(de.value,e.valueKey):de.value,vt=_(()=>C.value.filter(de=>de.visible).every(de=>de.disabled)),Xe=de=>{if(!t.visible){t.visible=!0;return}if(!(t.options.size===0||t.filteredOptionsCount===0)&&!t.isOnComposition&&!vt.value){de==="next"?(t.hoverIndex++,t.hoverIndex===t.options.size&&(t.hoverIndex=0)):de==="prev"&&(t.hoverIndex--,t.hoverIndex<0&&(t.hoverIndex=t.options.size-1));const Re=C.value[t.hoverIndex];(Re.disabled===!0||Re.states.groupDisabled===!0||!Re.visible)&&Xe(de),dt(()=>Be(c.value))}};return{optionsArray:C,selectSize:E,handleResize:G,debouncedOnInputChange:te,debouncedQueryChange:pe,deletePrevTag:K,deleteTag:X,deleteSelected:Y,handleOptionSelect:ie,scrollToOption:Be,readonly:m,resetInputHeight:A,showClose:v,iconComponent:b,iconReverse:$,showNewOption:S,collapseTagSize:x,setSelected:R,managePlaceholder:M,selectDisabled:g,emptyText:w,toggleLastOptionHitState:H,resetInputState:Q,handleComposition:ne,onOptionCreate:Pe,onOptionDestroy:U,handleMenuEnter:ye,handleFocus:J,blur:Ne,handleBlur:Ie,handleClearClick:fe,handleClose:Ee,toggleMenu:rt,selectOption:Ye,getValueKey:lt,navigateOptions:Xe,dropMenuVisible:N,queryChange:d,groupQueryChange:f,reference:o,input:r,tooltipRef:a,tags:i,selectWrapper:l,scrollbar:u}},tme=me({name:"ElSelect",componentName:"ElSelect",components:{ElInput:Tr,ElSelectMenu:Jpe,ElOption:v$,ElTag:Gg,ElScrollbar:Ya,ElTooltip:Bo,ElIcon:_t},directives:{ClickOutside:Pi},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:Oo},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Ha},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:[String,Object],default:Ff},tagType:{type:String,default:"info"}},emits:[Ft,Ms,"remove-tag","clear","visible-change","focus","blur"],setup(e,t){const{t:n}=kn(),s=Qpe(e),{optionsArray:o,selectSize:r,readonly:a,handleResize:i,collapseTagSize:l,debouncedOnInputChange:u,debouncedQueryChange:c,deletePrevTag:d,deleteTag:f,deleteSelected:h,handleOptionSelect:p,scrollToOption:m,setSelected:g,resetInputHeight:v,managePlaceholder:b,showClose:$,selectDisabled:y,iconComponent:w,iconReverse:C,showNewOption:k,emptyText:S,toggleLastOptionHitState:E,resetInputState:x,handleComposition:N,onOptionCreate:A,onOptionDestroy:D,handleMenuEnter:M,handleFocus:F,blur:R,handleBlur:P,handleClearClick:V,handleClose:G,toggleMenu:se,selectOption:ke,getValueKey:te,navigateOptions:pe,dropMenuVisible:ae,reference:K,input:X,tooltipRef:Y,tags:ie,selectWrapper:xe,scrollbar:Le,queryChange:Be,groupQueryChange:Pe}=eme(e,s,t),{focus:U}=L7(K),{inputWidth:Q,selected:H,inputLength:ne,filteredOptionsCount:ye,visible:J,softFocus:Ne,selectedLabel:Ie,hoverIndex:fe,query:Ee,inputHovering:rt,currentPlaceholder:Ye,menuVisibleOnFocus:lt,isOnComposition:vt,isSilentBlur:Xe,options:de,cachedOptions:Re,optionsCount:Ke,prefixWidth:Ae,tagInMultiLine:ct}=so(s),wt=_(()=>{const Kt=["el-select"],_n=je(r);return _n&&Kt.push(`el-select--${_n}`),e.disabled&&Kt.push("el-select--disabled"),Kt}),sn=_(()=>({maxWidth:`${je(Q)-32}px`,width:"100%"}));zt(jg,Cn({props:e,options:de,optionsArray:o,cachedOptions:Re,optionsCount:Ke,filteredOptionsCount:ye,hoverIndex:fe,handleOptionSelect:p,onOptionCreate:A,onOptionDestroy:D,selectWrapper:xe,selected:H,setSelected:g,queryChange:Be,groupQueryChange:Pe})),Mt(()=>{if(s.cachedPlaceHolder=Ye.value=e.placeholder||n("el.select.placeholder"),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(Ye.value=""),Li(xe.value,i),K.value&&K.value.$el){const Kt={large:36,default:32,small:28},_n=K.value.input;s.initialInputHeight=_n.getBoundingClientRect().height||Kt[r.value]}e.remote&&e.multiple&&v(),dt(()=>{if(!!K.value&&(K.value.$el&&(Q.value=K.value.$el.getBoundingClientRect().width),t.slots.prefix)){const Kt=K.value.$el.childNodes,_n=Array.from(Kt).filter(Or=>Or.tagName==="INPUT")[0],Vo=K.value.$el.querySelector(".el-input__prefix");Ae.value=Math.max(Vo.getBoundingClientRect().width+5,30),s.prefixWidth&&(_n.style.paddingLeft=`${Math.max(s.prefixWidth,30)}px`)}}),g()}),os(()=>{Bi(xe.value,i)}),e.multiple&&!Array.isArray(e.modelValue)&&t.emit(Ft,[]),!e.multiple&&Array.isArray(e.modelValue)&&t.emit(Ft,"");const ln=_(()=>{var Kt,_n;return(_n=(Kt=Y.value)==null?void 0:Kt.popperRef)==null?void 0:_n.contentRef});return{tagInMultiLine:ct,prefixWidth:Ae,selectSize:r,readonly:a,handleResize:i,collapseTagSize:l,debouncedOnInputChange:u,debouncedQueryChange:c,deletePrevTag:d,deleteTag:f,deleteSelected:h,handleOptionSelect:p,scrollToOption:m,inputWidth:Q,selected:H,inputLength:ne,filteredOptionsCount:ye,visible:J,softFocus:Ne,selectedLabel:Ie,hoverIndex:fe,query:Ee,inputHovering:rt,currentPlaceholder:Ye,menuVisibleOnFocus:lt,isOnComposition:vt,isSilentBlur:Xe,options:de,resetInputHeight:v,managePlaceholder:b,showClose:$,selectDisabled:y,iconComponent:w,iconReverse:C,showNewOption:k,emptyText:S,toggleLastOptionHitState:E,resetInputState:x,handleComposition:N,handleMenuEnter:M,handleFocus:F,blur:R,handleBlur:P,handleClearClick:V,handleClose:G,toggleMenu:se,selectOption:ke,getValueKey:te,navigateOptions:pe,dropMenuVisible:ae,focus:U,reference:K,input:X,tooltipRef:Y,popperPaneRef:ln,tags:ie,selectWrapper:xe,scrollbar:Le,wrapperKls:wt,selectTagsStyle:sn}}}),nme={class:"select-trigger"},sme={key:0},ome={class:"el-select__tags-text"},rme=["disabled","autocomplete"],ame={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},ime={key:1,class:"el-select-dropdown__empty"};function lme(e,t,n,s,o,r){const a=re("el-tag"),i=re("el-icon"),l=re("el-input"),u=re("el-option"),c=re("el-scrollbar"),d=re("el-select-menu"),f=re("el-tooltip"),h=wo("click-outside");return $t((T(),B("div",{ref:"selectWrapper",class:q(e.wrapperKls),onClick:t[24]||(t[24]=ht((...p)=>e.toggleMenu&&e.toggleMenu(...p),["stop"]))},[le(f,{ref:"tooltipRef",visible:e.dropMenuVisible,"onUpdate:visible":t[23]||(t[23]=p=>e.dropMenuVisible=p),placement:"bottom-start","append-to-body":e.popperAppendToBody,"popper-class":`el-select__popper ${e.popperClass}`,"fallback-placements":["bottom-start","top-start","right","left"],effect:"light",pure:"",trigger:"click",transition:"el-zoom-in-top","stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:"",onShow:e.handleMenuEnter},{default:oe(()=>[W("div",nme,[e.multiple?(T(),B("div",{key:0,ref:"tags",class:"el-select__tags",style:nt(e.selectTagsStyle)},[e.collapseTags&&e.selected.length?(T(),B("span",sme,[le(a,{closable:!e.selectDisabled&&!e.selected[0].isDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:e.tagType,"disable-transitions":"",onClose:t[0]||(t[0]=p=>e.deleteTag(p,e.selected[0]))},{default:oe(()=>[W("span",{class:"el-select__tags-text",style:nt({maxWidth:e.inputWidth-123+"px"})},Fe(e.selected[0].currentLabel),5)]),_:1},8,["closable","size","hit","type"]),e.selected.length>1?(T(),ve(a,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:oe(()=>[W("span",ome,"+ "+Fe(e.selected.length-1),1)]),_:1},8,["size","type"])):ce("v-if",!0)])):ce("v-if",!0),ce(" <div> "),e.collapseTags?ce("v-if",!0):(T(),ve(cs,{key:1,onAfterLeave:e.resetInputHeight},{default:oe(()=>[W("span",{style:nt({marginLeft:e.prefixWidth&&e.selected.length?`${e.prefixWidth}px`:null})},[(T(!0),B(it,null,Yt(e.selected,p=>(T(),ve(a,{key:e.getValueKey(p),closable:!e.selectDisabled&&!p.isDisabled,size:e.collapseTagSize,hit:p.hitState,type:e.tagType,"disable-transitions":"",onClose:m=>e.deleteTag(m,p)},{default:oe(()=>[W("span",{class:"el-select__tags-text",style:nt({maxWidth:e.inputWidth-75+"px"})},Fe(p.currentLabel),5)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],4)]),_:1},8,["onAfterLeave"])),ce(" </div> "),e.filterable?$t((T(),B("input",{key:2,ref:"input","onUpdate:modelValue":t[1]||(t[1]=p=>e.query=p),type:"text",class:q(["el-select__input",[e.selectSize?`is-${e.selectSize}`:""]]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:nt({marginLeft:e.prefixWidth&&!e.selected.length||e.tagInMultiLine?`${e.prefixWidth}px`:null,flexGrow:"1",width:`${e.inputLength/(e.inputWidth-32)}%`,maxWidth:`${e.inputWidth-42}px`}),onFocus:t[2]||(t[2]=(...p)=>e.handleFocus&&e.handleFocus(...p)),onBlur:t[3]||(t[3]=(...p)=>e.handleBlur&&e.handleBlur(...p)),onKeyup:t[4]||(t[4]=(...p)=>e.managePlaceholder&&e.managePlaceholder(...p)),onKeydown:[t[5]||(t[5]=(...p)=>e.resetInputState&&e.resetInputState(...p)),t[6]||(t[6]=Ht(ht(p=>e.navigateOptions("next"),["prevent"]),["down"])),t[7]||(t[7]=Ht(ht(p=>e.navigateOptions("prev"),["prevent"]),["up"])),t[8]||(t[8]=Ht(ht(p=>e.visible=!1,["stop","prevent"]),["esc"])),t[9]||(t[9]=Ht(ht((...p)=>e.selectOption&&e.selectOption(...p),["stop","prevent"]),["enter"])),t[10]||(t[10]=Ht((...p)=>e.deletePrevTag&&e.deletePrevTag(...p),["delete"])),t[11]||(t[11]=Ht(p=>e.visible=!1,["tab"]))],onCompositionstart:t[12]||(t[12]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onCompositionupdate:t[13]||(t[13]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onCompositionend:t[14]||(t[14]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onInput:t[15]||(t[15]=(...p)=>e.debouncedQueryChange&&e.debouncedQueryChange(...p))},null,46,rme)),[[Dw,e.query]]):ce("v-if",!0)],4)):ce("v-if",!0),le(l,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":t[16]||(t[16]=p=>e.selectedLabel=p),type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:q({"is-focus":e.visible}),tabindex:e.multiple&&e.filterable?-1:void 0,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[t[17]||(t[17]=Ht(ht(p=>e.navigateOptions("next"),["stop","prevent"]),["down"])),t[18]||(t[18]=Ht(ht(p=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),Ht(ht(e.selectOption,["stop","prevent"]),["enter"]),t[19]||(t[19]=Ht(ht(p=>e.visible=!1,["stop","prevent"]),["esc"])),t[20]||(t[20]=Ht(p=>e.visible=!1,["tab"]))],onMouseenter:t[21]||(t[21]=p=>e.inputHovering=!0),onMouseleave:t[22]||(t[22]=p=>e.inputHovering=!1)},tf({suffix:oe(()=>[e.iconComponent?$t((T(),ve(i,{key:0,class:q(["el-select__caret","el-input__icon",e.iconReverse])},{default:oe(()=>[(T(),ve(en(e.iconComponent)))]),_:1},8,["class"])),[[Qt,!e.showClose]]):ce("v-if",!0),e.showClose&&e.clearIcon?(T(),ve(i,{key:1,class:"el-select__caret el-input__icon",onClick:e.handleClearClick},{default:oe(()=>[(T(),ve(en(e.clearIcon)))]),_:1},8,["onClick"])):ce("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:oe(()=>[W("div",ame,[_e(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])])]),content:oe(()=>[le(d,null,{default:oe(()=>[$t(le(c,{ref:"scrollbar",tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list",class:q({"is-empty":!e.allowCreate&&e.query&&e.filteredOptionsCount===0})},{default:oe(()=>[e.showNewOption?(T(),ve(u,{key:0,value:e.query,created:!0},null,8,["value"])):ce("v-if",!0),_e(e.$slots,"default")]),_:3},8,["class"]),[[Qt,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(T(),B(it,{key:0},[e.$slots.empty?_e(e.$slots,"empty",{key:0}):(T(),B("p",ime,Fe(e.emptyText),1))],2112)):ce("v-if",!0)]),_:3})]),_:3},8,["visible","append-to-body","popper-class","onShow"])],2)),[[h,e.handleClose,e.popperPaneRef]])}var ume=We(tme,[["render",lme]]);const cme=me({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(e){const t=L(!0),n=Lt(),s=L([]);zt(G_,Cn(ut({},so(e))));const o=Ze(jg);Mt(()=>{s.value=r(n.subTree)});const r=i=>{const l=[];return Array.isArray(i.children)&&i.children.forEach(u=>{var c;u.type&&u.type.name==="ElOption"&&u.component&&u.component.proxy?l.push(u.component.proxy):((c=u.children)==null?void 0:c.length)&&l.push(...r(u))}),l},{groupQueryChange:a}=bn(o);return Oe(a,()=>{t.value=s.value.some(i=>i.visible===!0)}),{visible:t}}}),dme={class:"el-select-group__wrap"},fme={class:"el-select-group__title"},hme={class:"el-select-group"};function pme(e,t,n,s,o,r){return $t((T(),B("ul",dme,[W("li",fme,Fe(e.label),1),W("li",null,[W("ul",hme,[_e(e.$slots,"default")])])],512)),[[Qt,e.visible]])}var K_=We(cme,[["render",pme]]);const qg=Vt(ume,{Option:v$,OptionGroup:K_}),j_=Jn(v$),mme=Jn(K_),b$=()=>Ze(nD,{}),gme=gt({pageSize:{type:Number,required:!0},pageSizes:{type:Je(Array),default:()=>vs([10,20,30,40,50,100])},popperClass:{type:String,default:""},disabled:Boolean,size:{type:String,default:"default"}}),vme=me({name:"ElPaginationSizes",components:{ElSelect:qg,ElOption:j_},props:gme,emits:["page-size-change"],setup(e,{emit:t}){const{t:n}=kn(),s=b$(),o=L(e.pageSize);Oe(()=>e.pageSizes,(i,l)=>{if(!jr(i,l)&&Array.isArray(i)){const u=i.indexOf(e.pageSize)>-1?e.pageSize:e.pageSizes[0];t("page-size-change",u)}}),Oe(()=>e.pageSize,i=>{o.value=i});const r=_(()=>e.pageSizes);function a(i){var l;i!==o.value&&(o.value=i,(l=s.handleSizeChange)==null||l.call(s,Number(i)))}return{innerPagesizes:r,innerPageSize:o,t:n,handleChange:a}}}),bme={class:"el-pagination__sizes"};function yme(e,t,n,s,o,r){const a=re("el-option"),i=re("el-select");return T(),B("span",bme,[le(i,{"model-value":e.innerPageSize,disabled:e.disabled,"popper-class":e.popperClass,size:e.size,onChange:e.handleChange},{default:oe(()=>[(T(!0),B(it,null,Yt(e.innerPagesizes,l=>(T(),ve(a,{key:l,value:l,label:l+e.t("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","onChange"])])}var wme=We(vme,[["render",yme]]);const $me=me({name:"ElPaginationJumper",components:{ElInput:Tr},setup(){const{t:e}=kn(),{pageCount:t,disabled:n,currentPage:s,changeEvent:o}=b$(),r=L(),a=_(()=>{var u;return(u=r.value)!=null?u:s==null?void 0:s.value});function i(u){r.value=+u}function l(u){u=Math.trunc(+u),o==null||o(+u),r.value=void 0}return{pageCount:t,disabled:n,innerValue:a,t:e,handleInput:i,handleChange:l}}}),Cme=["disabled"];function kme(e,t,n,s,o,r){const a=re("el-input");return T(),B("span",{class:"el-pagination__jump",disabled:e.disabled},[jt(Fe(e.t("el.pagination.goto"))+" ",1),le(a,{size:"small",class:"el-pagination__editor is-in-pagination",min:1,max:e.pageCount,disabled:e.disabled,"model-value":e.innerValue,type:"number","onUpdate:modelValue":e.handleInput,onChange:e.handleChange},null,8,["max","disabled","model-value","onUpdate:modelValue","onChange"]),jt(" "+Fe(e.t("el.pagination.pageClassifier")),1)],8,Cme)}var Sme=We($me,[["render",kme]]);const xme={total:{type:Number,default:1e3}},Ime=me({name:"ElPaginationTotal",props:xme,setup(){const{t:e}=kn(),{disabled:t}=b$();return{t:e,disabled:t}}}),Eme=["disabled"];function Tme(e,t,n,s,o,r){return T(),B("span",{class:"el-pagination__total",disabled:e.disabled},Fe(e.t("el.pagination.total",{total:e.total})),9,Eme)}var Nme=We(Ime,[["render",Tme]]);const Ame={currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean},Dme=me({name:"ElPaginationPager",components:{DArrowLeft:Bg,DArrowRight:zg,MoreFilled:GZ},props:Ame,emits:["change"],setup(e,{emit:t}){const n=L(!1),s=L(!1),o=L(!1),r=L(!1),a=_(()=>{const c=e.pagerCount,d=(c-1)/2,f=Number(e.currentPage),h=Number(e.pageCount);let p=!1,m=!1;h>c&&(f>c-d&&(p=!0),f<h-d&&(m=!0));const g=[];if(p&&!m){const v=h-(c-2);for(let b=v;b<h;b++)g.push(b)}else if(!p&&m)for(let v=2;v<c;v++)g.push(v);else if(p&&m){const v=Math.floor(c/2)-1;for(let b=f-v;b<=f+v;b++)g.push(b)}else for(let v=2;v<h;v++)g.push(v);return g});Ba(()=>{const c=(e.pagerCount-1)/2;n.value=!1,s.value=!1,e.pageCount>e.pagerCount&&(e.currentPage>e.pagerCount-c&&(n.value=!0),e.currentPage<e.pageCount-c&&(s.value=!0))});function i(c){e.disabled||(c==="left"?o.value=!0:r.value=!0)}function l(c){const d=c.target;if(d.tagName.toLowerCase()==="li"&&Array.from(d.classList).includes("number")){const f=Number(d.textContent);f!==e.currentPage&&t("change",f)}}function u(c){const d=c.target;if(d.tagName.toLowerCase()==="ul"||e.disabled)return;let f=Number(d.textContent);const h=e.pageCount,p=e.currentPage,m=e.pagerCount-2;d.className.includes("more")&&(d.className.includes("quickprev")?f=p-m:d.className.includes("quicknext")&&(f=p+m)),isNaN(f)||(f<1&&(f=1),f>h&&(f=h)),f!==p&&t("change",f)}return{showPrevMore:n,showNextMore:s,quickPrevHover:o,quickNextHover:r,pagers:a,onMouseenter:i,onPagerClick:u,onEnter:l}}}),Rme=["aria-current"],_me=["aria-current"],Ome=["aria-current"];function Mme(e,t,n,s,o,r){const a=re("d-arrow-left"),i=re("more-filled"),l=re("d-arrow-right");return T(),B("ul",{class:"el-pager",onClick:t[4]||(t[4]=(...u)=>e.onPagerClick&&e.onPagerClick(...u)),onKeyup:t[5]||(t[5]=Ht((...u)=>e.onEnter&&e.onEnter(...u),["enter"]))},[e.pageCount>0?(T(),B("li",{key:0,class:q([{active:e.currentPage===1,disabled:e.disabled},"number"]),"aria-current":e.currentPage===1,tabindex:"0"}," 1 ",10,Rme)):ce("v-if",!0),e.showPrevMore?(T(),B("li",{key:1,class:q(["el-icon more btn-quickprev",{disabled:e.disabled}]),onMouseenter:t[0]||(t[0]=u=>e.onMouseenter("left")),onMouseleave:t[1]||(t[1]=u=>e.quickPrevHover=!1)},[e.quickPrevHover?(T(),ve(a,{key:0})):(T(),ve(i,{key:1}))],34)):ce("v-if",!0),(T(!0),B(it,null,Yt(e.pagers,u=>(T(),B("li",{key:u,class:q([{active:e.currentPage===u,disabled:e.disabled},"number"]),"aria-current":e.currentPage===u,tabindex:"0"},Fe(u),11,_me))),128)),e.showNextMore?(T(),B("li",{key:2,class:q(["el-icon more btn-quicknext",{disabled:e.disabled}]),onMouseenter:t[2]||(t[2]=u=>e.onMouseenter("right")),onMouseleave:t[3]||(t[3]=u=>e.quickNextHover=!1)},[e.quickNextHover?(T(),ve(l,{key:0})):(T(),ve(i,{key:1}))],34)):ce("v-if",!0),e.pageCount>1?(T(),B("li",{key:3,class:q([{active:e.currentPage===e.pageCount,disabled:e.disabled},"number"]),"aria-current":e.currentPage===e.pageCount,tabindex:"0"},Fe(e.pageCount),11,Ome)):ce("v-if",!0)],32)}var Fme=We(Dme,[["render",Mme]]);const po=e=>typeof e!="number",Pme=gt({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>typeof e=="number"&&(e|0)===e&&e>4&&e<22&&e%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Je(Array),default:()=>vs([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},nextText:{type:String,default:""},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),Lme={"update:current-page":e=>typeof e=="number","update:page-size":e=>typeof e=="number","size-change":e=>typeof e=="number","current-change":e=>typeof e=="number","prev-click":e=>typeof e=="number","next-click":e=>typeof e=="number"},fE="ElPagination";var Bme=me({name:fE,props:Pme,emits:Lme,setup(e,{emit:t,slots:n}){const{t:s}=kn(),o=Lt().vnode.props||{},r="onUpdate:currentPage"in o||"onUpdate:current-page"in o||"onCurrentChange"in o,a="onUpdate:pageSize"in o||"onUpdate:page-size"in o||"onSizeChange"in o,i=_(()=>{if(po(e.total)&&po(e.pageCount)||!po(e.currentPage)&&!r)return!1;if(e.layout.includes("sizes")){if(po(e.pageCount)){if(!po(e.total)&&!po(e.pageSize)&&!a)return!1}else if(!a)return!1}return!0}),l=L(po(e.defaultPageSize)?10:e.defaultPageSize),u=L(po(e.defaultCurrentPage)?1:e.defaultCurrentPage),c=_({get(){return po(e.pageSize)?l.value:e.pageSize},set(b){po(e.pageSize)&&(l.value=b),a&&(t("update:page-size",b),t("size-change",b))}}),d=_(()=>{let b=0;return po(e.pageCount)?po(e.total)||(b=Math.max(1,Math.ceil(e.total/c.value))):b=e.pageCount,b}),f=_({get(){return po(e.currentPage)?u.value:e.currentPage},set(b){let $=b;b<1?$=1:b>d.value&&($=d.value),po(e.currentPage)&&(u.value=$),r&&(t("update:current-page",$),t("current-change",$))}});Oe(d,b=>{f.value>b&&(f.value=b)});function h(b){f.value=b}function p(b){c.value=b;const $=d.value;f.value>$&&(f.value=$)}function m(){e.disabled||(f.value-=1,t("prev-click",f.value))}function g(){e.disabled||(f.value+=1,t("next-click",f.value))}function v(b,$){b&&(b.props||(b.props={}),b.props.class=[b.props.class,$].join(" "))}return zt(nD,{pageCount:d,disabled:_(()=>e.disabled),currentPage:f,changeEvent:h,handleSizeChange:p}),()=>{var b,$;if(!i.value)return s("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&d.value<=1)return null;const y=[],w=[],C=He("div",{class:"el-pagination__rightwrapper"},w),k={prev:He(zpe,{disabled:e.disabled,currentPage:f.value,prevText:e.prevText,onClick:m}),jumper:He(Sme),pager:He(Fme,{currentPage:f.value,pageCount:d.value,pagerCount:e.pagerCount,onChange:h,disabled:e.disabled}),next:He(Kpe,{disabled:e.disabled,currentPage:f.value,pageCount:d.value,nextText:e.nextText,onClick:g}),sizes:He(wme,{pageSize:c.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:($=(b=n==null?void 0:n.default)==null?void 0:b.call(n))!=null?$:null,total:He(Nme,{total:po(e.total)?0:e.total})},S=e.layout.split(",").map(x=>x.trim());let E=!1;return S.forEach(x=>{if(x==="->"){E=!0;return}E?w.push(k[x]):y.push(k[x])}),E&&w.length>0&&y.unshift(C),v(y[0],"is-first"),v(y[y.length-1],"is-last"),He("div",{role:"pagination","aria-label":"pagination",class:["el-pagination",{"is-background":e.background,"el-pagination--small":e.small}]},y)}}});const zme=Vt(Bme),Vme=gt({title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,values:Hy,default:"primary"},cancelButtonType:{type:String,values:Hy,default:"text"},icon:{type:Je([String,Object]),default:lJ},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},onConfirm:{type:Je(Function)},onCancel:{type:Je(Function)}}),Wme=me({name:"ElPopconfirm",components:{ElButton:Ia,ElTooltip:Bo,ElIcon:_t},props:Vme,setup(e){const{t}=kn(),n=L(),s=()=>{var u,c;(c=(u=je(n))==null?void 0:u.onClose)==null||c.call(u)},o=()=>{s()},r=u=>{var c;(c=e.onConfirm)==null||c.call(e,u),o()},a=u=>{var c;(c=e.onCancel)==null||c.call(e,u),o()},i=_(()=>e.confirmButtonText||t("el.popconfirm.confirmButtonText")),l=_(()=>e.cancelButtonText||t("el.popconfirm.cancelButtonText"));return{finalConfirmButtonText:i,finalCancelButtonText:l,tooltipRef:n,confirm:r,cancel:a}}}),Hme={class:"el-popconfirm"},Ume={class:"el-popconfirm__main"},Gme={class:"el-popconfirm__action"};function Kme(e,t,n,s,o,r){const a=re("el-icon"),i=re("el-button"),l=re("el-tooltip");return T(),ve(l,Us({ref:"tooltipRef"},e.$attrs,{trigger:"click",effect:"light","popper-class":"el-popover","append-to-body":"","fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:""}),{content:oe(()=>[W("div",Hme,[W("div",Ume,[!e.hideIcon&&e.icon?(T(),ve(a,{key:0,class:"el-popconfirm__icon",style:nt({color:e.iconColor})},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1},8,["style"])):ce("v-if",!0),jt(" "+Fe(e.title),1)]),W("div",Gme,[le(i,{size:"small",type:e.cancelButtonType,onClick:e.cancel},{default:oe(()=>[jt(Fe(e.finalCancelButtonText),1)]),_:1},8,["type","onClick"]),le(i,{size:"small",type:e.confirmButtonType,onClick:e.confirm},{default:oe(()=>[jt(Fe(e.finalConfirmButtonText),1)]),_:1},8,["type","onClick"])])])]),default:oe(()=>[e.$slots.reference?_e(e.$slots,"reference",{key:0}):ce("v-if",!0)]),_:3},16,["hide-after"])}var jme=We(Wme,[["render",Kme]]);const qme=Vt(jme),Xme=ut({content:pi.content,popperStyle:pi.popperStyle,popperClass:pi.popperClass,enterable:Ut(ut({},pi.enterable),{default:!0}),effect:Ut(ut({},pi.effect),{default:"light"})},gt({title:String,width:{type:[String,Number],default:150}})),Yme=["update:visible","after-enter","after-leave"],Zme="ElPopover",Jme=me({name:Zme,components:{ElTooltip:Bo},props:Xme,emits:Yme,setup(e,{emit:t}){const n=L(null),s=_(()=>{var c;return(c=je(n))==null?void 0:c.popperRef}),o=_(()=>Xt(e.width)?e.width:`${e.width}px`),r=_(()=>[{width:o.value},e.popperStyle]);return{kls:_(()=>[{"el-popover--plain":!!e.content},"el-popover",e.popperClass]),style:r,tooltipRef:n,popperRef:s,hide:()=>{var c;(c=n.value)==null||c.hide()},afterEnter:()=>{t("after-enter")},afterLeave:()=>{t("after-leave")}}}}),Qme={key:0,class:"el-popover__title",role:"title"};function ege(e,t,n,s,o,r){const a=re("el-tooltip");return T(),ve(a,Us({ref:"tooltipRef"},e.$attrs,{"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":e.kls,"popper-style":e.style,persistent:"",onShow:e.afterEnter,onHide:e.afterLeave}),{content:oe(()=>[e.title?(T(),B("div",Qme,Fe(e.title),1)):ce("v-if",!0),_e(e.$slots,"default",{},()=>[jt(Fe(e.content),1)])]),default:oe(()=>[e.$slots.reference?_e(e.$slots,"reference",{key:0}):ce("v-if",!0)]),_:3},16,["aria-label","effect","enterable","popper-class","popper-style","onShow","onHide"])}var Hd=We(Jme,[["render",ege]]);const hE=(e,t)=>{const n=t.arg||t.value,s=n==null?void 0:n.popperRef;s&&(s.triggerRef=e)};var Qy={mounted(e,t){hE(e,t)},updated(e,t){hE(e,t)}};const tge="popover";Hd.install=e=>{e.component(Hd.name,Hd)};Qy.install=e=>{e.directive(tge,Qy)};const q_=Qy;Hd.directive=q_;const nge=Hd,sge=nge,oge=q_,rge=gt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Je(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Je([String,Array,Function]),default:""},format:{type:Je(Function),default:e=>`${e}%`}}),age=me({name:"ElProgress",components:{ElIcon:_t,CircleCheck:Vm,CircleClose:Ha,Check:lc,Close:Zr,WarningFilled:cf},props:rge,setup(e){const t=_(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:p(e.percentage)})),n=_(()=>(e.strokeWidth/e.width*100).toFixed(1)),s=_(()=>e.type==="circle"||e.type==="dashboard"?parseInt(`${50-parseFloat(n.value)/2}`,10):0),o=_(()=>{const g=s.value,v=e.type==="dashboard";return`
          M 50 50
          m 0 ${v?"":"-"}${g}
          a ${g} ${g} 0 1 1 0 ${v?"-":""}${g*2}
          a ${g} ${g} 0 1 1 0 ${v?"":"-"}${g*2}
          `}),r=_(()=>2*Math.PI*s.value),a=_(()=>e.type==="dashboard"?.75:1),i=_(()=>`${-1*r.value*(1-a.value)/2}px`),l=_(()=>({strokeDasharray:`${r.value*a.value}px, ${r.value}px`,strokeDashoffset:i.value})),u=_(()=>({strokeDasharray:`${r.value*a.value*(e.percentage/100)}px, ${r.value}px`,strokeDashoffset:i.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"})),c=_(()=>{let g;if(e.color)g=p(e.percentage);else switch(e.status){case"success":g="#13ce66";break;case"exception":g="#ff4949";break;case"warning":g="#e6a23c";break;default:g="#20a0ff"}return g}),d=_(()=>e.status==="warning"?cf:e.type==="line"?e.status==="success"?Vm:Ha:e.status==="success"?lc:Zr),f=_(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),h=_(()=>e.format(e.percentage)),p=g=>{var v;const{color:b}=e;if(typeof b=="function")return b(g);if(typeof b=="string")return b;{const $=100/b.length,w=b.map((C,k)=>typeof C=="string"?{color:C,percentage:(k+1)*$}:C).sort((C,k)=>C.percentage-k.percentage);for(const C of w)if(C.percentage>g)return C.color;return(v=w[w.length-1])==null?void 0:v.color}},m=_(()=>({percentage:e.percentage}));return{barStyle:t,relativeStrokeWidth:n,radius:s,trackPath:o,perimeter:r,rate:a,strokeDashoffset:i,trailPathStyle:l,circlePathStyle:u,stroke:c,statusIcon:d,progressTextSize:f,content:h,slotData:m}}}),ige=["aria-valuenow"],lge={key:0,class:"el-progress-bar"},uge={key:0,class:"el-progress-bar__innerText"},cge={viewBox:"0 0 100 100"},dge=["d","stroke-width"],fge=["d","stroke","stroke-linecap","stroke-width"],hge={key:0};function pge(e,t,n,s,o,r){const a=re("el-icon");return T(),B("div",{class:q(["el-progress",[`el-progress--${e.type}`,e.status?`is-${e.status}`:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}]]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[e.type==="line"?(T(),B("div",lge,[W("div",{class:"el-progress-bar__outer",style:nt({height:`${e.strokeWidth}px`})},[W("div",{class:q(["el-progress-bar__inner",{"el-progress-bar__inner--indeterminate":e.indeterminate}]),style:nt(e.barStyle)},[(e.showText||e.$slots.default)&&e.textInside?(T(),B("div",uge,[_e(e.$slots,"default",Bl(zl(e.slotData)),()=>[W("span",null,Fe(e.content),1)])])):ce("v-if",!0)],6)],4)])):(T(),B("div",{key:1,class:"el-progress-circle",style:nt({height:`${e.width}px`,width:`${e.width}px`})},[(T(),B("svg",cge,[W("path",{class:"el-progress-circle__track",d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none",style:nt(e.trailPathStyle)},null,12,dge),W("path",{class:"el-progress-circle__path",d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0,style:nt(e.circlePathStyle)},null,12,fge)]))],4)),(e.showText||e.$slots.default)&&!e.textInside?(T(),B("div",{key:2,class:"el-progress__text",style:nt({fontSize:`${e.progressTextSize}px`})},[_e(e.$slots,"default",Bl(zl(e.slotData)),()=>[e.status?(T(),ve(a,{key:1},{default:oe(()=>[(T(),ve(en(e.statusIcon)))]),_:1})):(T(),B("span",hge,Fe(e.content),1))])],4)):ce("v-if",!0)],10,ige)}var mge=We(age,[["render",pge]]);const X_=Vt(mge),gge=gt({modelValue:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Je([Array,Object]),default:()=>vs(["var(--el-rate-star-color)","var(--el-rate-star-color)","var(--el-rate-star-color)"])},voidColor:{type:String,default:"var(--el-rate-void-color)"},disabledVoidColor:{type:String,default:"var(--el-rate-disable-void-color)"},icons:{type:Je([Array,Object]),default:()=>[Cd,Cd,Cd]},voidIcon:{type:Je([String,Object]),default:()=>ZD},disabledvoidIcon:{type:Je([String,Object]),default:()=>Cd},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"var(--el-rate-text-color)"},texts:{type:Je(Array),default:()=>vs(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:Oo}}),vge={change:e=>typeof e=="number",[Ft]:e=>typeof e=="number"};function Ob(e,t){const n=r=>rn(r),s=Object.keys(t).map(r=>+r).filter(r=>{const a=t[r];return(n(a)?a.excluded:!1)?e<r:e<=r}).sort((r,a)=>r-a),o=t[s[0]];return n(o)&&o.value||o}const bge=me({name:"ElRate",components:{ElIcon:_t,StarFilled:Cd,Star:ZD},props:gge,emits:vge,setup(e,{emit:t}){const n=Ze(Lo,{}),s=ds(),o=Dt("rate"),r=L(e.modelValue),a=L(-1),i=L(!0),l=_(()=>[o.b(),o.m(s.value)]),u=_(()=>e.disabled||n.disabled),c=_(()=>{let x="";return e.showScore?x=e.scoreTemplate.replace(/\{\s*value\s*\}/,u.value?`${e.modelValue}`:`${r.value}`):e.showText&&(x=e.texts[Math.ceil(r.value)-1]),x}),d=_(()=>e.modelValue*100-Math.floor(e.modelValue)*100),f=_(()=>Nt(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),h=_(()=>Ob(r.value,f.value)),p=_(()=>{let x="";return u.value?x=`${d.value}%`:e.allowHalf&&(x="50%"),{color:h.value,width:x}}),m=_(()=>Nt(e.icons)?{[e.lowThreshold]:e.icons[0],[e.highThreshold]:{value:e.icons[1],excluded:!0},[e.max]:e.icons[2]}:e.icons),g=_(()=>Ob(e.modelValue,m.value)),v=_(()=>u.value?e.disabledvoidIcon:e.voidIcon),b=_(()=>Ob(r.value,m.value)),$=_(()=>{const x=Array(e.max),N=r.value;return x.fill(b.value,0,N),x.fill(v.value,N,e.max),x});function y(x){const N=u.value&&d.value>0&&x-1<e.modelValue&&x>e.modelValue,A=e.allowHalf&&i.value&&x-.5<=r.value&&x>r.value;return N||A}function w(x){const N=u.value?e.disabledVoidColor:e.voidColor;return{color:x<=r.value?h.value:N}}function C(x){u.value||(e.allowHalf&&i.value?(t(Ft,r.value),e.modelValue!==r.value&&t("change",r.value)):(t(Ft,x),e.modelValue!==x&&t("change",x)))}function k(x){if(u.value)return;let N=r.value;const A=x.code;return A===Qe.up||A===Qe.right?(e.allowHalf?N+=.5:N+=1,x.stopPropagation(),x.preventDefault()):(A===Qe.left||A===Qe.down)&&(e.allowHalf?N-=.5:N-=1,x.stopPropagation(),x.preventDefault()),N=N<0?0:N,N=N>e.max?e.max:N,t(Ft,N),t("change",N),N}function S(x,N){if(!u.value){if(e.allowHalf){let A=N.target;Kr(A,o.e("item"))&&(A=A.querySelector(`.${o.e("icon")}`)),(A.clientWidth===0||Kr(A,o.e("decimal")))&&(A=A.parentNode),i.value=N.offsetX*2<=A.clientWidth,r.value=i.value?x-.5:x}else r.value=x;a.value=x}}function E(){u.value||(e.allowHalf&&(i.value=e.modelValue!==Math.floor(e.modelValue)),r.value=e.modelValue,a.value=-1)}return Oe(()=>e.modelValue,x=>{r.value=x,i.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||t(Ft,0),{ns:o,hoverIndex:a,currentValue:r,rateDisabled:u,text:c,decimalStyle:p,decimalIconComponent:g,iconComponents:$,rateKls:l,showDecimalIcon:y,getIconStyle:w,selectValue:C,handleKey:k,setCurrentValue:S,resetCurrentValue:E}}}),yge=["aria-valuenow","aria-valuetext","aria-valuemax"],wge=["onMousemove","onClick"];function $ge(e,t,n,s,o,r){const a=re("el-icon");return T(),B("div",{class:q(e.rateKls),role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",onKeydown:t[1]||(t[1]=(...i)=>e.handleKey&&e.handleKey(...i))},[(T(!0),B(it,null,Yt(e.max,(i,l)=>(T(),B("span",{key:l,class:q(e.ns.e("item")),style:nt({cursor:e.rateDisabled?"auto":"pointer"}),onMousemove:u=>e.setCurrentValue(i,u),onMouseleave:t[0]||(t[0]=(...u)=>e.resetCurrentValue&&e.resetCurrentValue(...u)),onClick:u=>e.selectValue(i)},[le(a,{class:q([e.ns.e("icon"),{hover:e.hoverIndex===i}]),style:nt(e.getIconStyle(i))},{default:oe(()=>[(T(),ve(en(e.iconComponents[i-1]))),e.showDecimalIcon(i)?(T(),ve(a,{key:0,style:nt(e.decimalStyle),class:q([e.ns.e("icon"),e.ns.e("decimal")])},{default:oe(()=>[(T(),ve(en(e.decimalIconComponent)))]),_:1},8,["style","class"])):ce("v-if",!0)]),_:2},1032,["class","style"])],46,wge))),128)),e.showText||e.showScore?(T(),B("span",{key:0,class:q(e.ns.e("text")),style:nt({color:e.textColor})},Fe(e.text),7)):ce("v-if",!0)],42,yge)}var Cge=We(bge,[["render",$ge]]);const kge=Vt(Cge),Hu={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},pE={[Hu.success]:wY,[Hu.warning]:cf,[Hu.error]:jw,[Hu.info]:qw},Sge=gt({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{values:["success","warning","info","error"],default:"info"}}),xge=me({name:"ElResult",props:Sge,setup(e){const t=Dt("result"),n=_(()=>{const s=e.icon,o=s&&Hu[s]?Hu[s]:"icon-info",r=pE[o]||pE["icon-info"];return{class:o,component:r}});return{ns:t,resultIcon:n}}});function Ige(e,t,n,s,o,r){return T(),B("div",{class:q(e.ns.b())},[W("div",{class:q(e.ns.e("icon"))},[_e(e.$slots,"icon",{},()=>[e.resultIcon.component?(T(),ve(en(e.resultIcon.component),{key:0,class:q(e.resultIcon.class)},null,8,["class"])):ce("v-if",!0)])],2),e.title||e.$slots.title?(T(),B("div",{key:0,class:q(e.ns.e("title"))},[_e(e.$slots,"title",{},()=>[W("p",null,Fe(e.title),1)])],2)):ce("v-if",!0),e.subTitle||e.$slots.subTitle?(T(),B("div",{key:1,class:q(e.ns.e("subtitle"))},[_e(e.$slots,"subTitle",{},()=>[W("p",null,Fe(e.subTitle),1)])],2)):ce("v-if",!0),e.$slots.extra?(T(),B("div",{key:2,class:q(e.ns.e("extra"))},[_e(e.$slots,"extra")],2)):ce("v-if",!0)],2)}var Ege=We(xge,[["render",Ige]]);const Tge=Vt(Ege),Nge=gt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between"],default:"start"},align:{type:String,values:["top","middle","bottom"],default:"top"}}),Age=me({name:"ElRow",props:Nge,setup(e,{slots:t}){const n=Dt("row"),s=_(()=>e.gutter);zt("ElRow",{gutter:s});const o=_(()=>{const r={marginLeft:"",marginRight:""};return e.gutter&&(r.marginLeft=`-${e.gutter/2}px`,r.marginRight=r.marginLeft),r});return()=>{var r;return He(e.tag,{class:[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,e.align!=="top")],style:o.value},(r=t.default)==null?void 0:r.call(t))}}}),Dge=Vt(Age);var mE=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Rge(e,t){return!!(e===t||mE(e)&&mE(t))}function _ge(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Rge(e[n],t[n]))return!1;return!0}function Oge(e,t){t===void 0&&(t=_ge);var n=null;function s(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;var a=e.apply(this,o);return n={lastResult:a,lastArgs:o,lastThis:this},a}return s.clear=function(){n=null},s}const Mge=()=>{const t=Lt().proxy.$props;return _(()=>{const n=(s,o,r)=>({});return t.perfMode?OD(n):Oge(n)})};let y$=e=>setTimeout(e,16),w$=e=>clearTimeout(e);qt&&(y$=e=>window.requestAnimationFrame(e),w$=e=>window.cancelAnimationFrame(e));const Fge=50,gE="item-rendered",vE="scroll",Y_="forward",Z_="backward",mf="auto",J_="smart",Q_="start",Um="center",e3="end",mc="horizontal",$$="vertical",Pge="ltr",pm="rtl",t3="negative",Lge="positive-ascending",n3="positive-descending",Bge={[mc]:"left",[$$]:"top"},zge=20,Mb=(e,t)=>e<t?Y_:Z_,gf=e=>e===Pge||e===pm||e===mc;let Nu=null;function bE(e=!1){if(Nu===null||e){const t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const s=document.createElement("div"),o=s.style;return o.width="100px",o.height="100px",t.appendChild(s),document.body.appendChild(t),t.scrollLeft>0?Nu=n3:(t.scrollLeft=1,t.scrollLeft===0?Nu=t3:Nu=Lge),document.body.removeChild(t),Nu}return Nu}function Vge({move:e,size:t,bar:n},s){const o={},r=`translate${n.axis}(${e}px)`;return o[n.size]=t,o.transform=r,o.msTransform=r,o.webkitTransform=r,s==="horizontal"?o.height="100%":o.width="100%",o}const Wge=typeof navigator!="undefined"&&rn(navigator)&&/Firefox/i.test(navigator.userAgent),Hge={[mc]:"deltaX",[$$]:"deltaY"},Uge=({atEndEdge:e,atStartEdge:t,layout:n},s)=>{let o,r=0;const a=l=>l<0&&t.value||l>0&&e.value;return{hasReachedEdge:a,onWheel:l=>{w$(o);const u=l[Hge[n.value]];a(r)&&a(r+u)||(r+=u,Wge||l.preventDefault(),o=y$(()=>{s(r),r=0}))}}},e1=Yr({type:Je([Number,Function]),required:!0}),t1=Yr({type:Number}),n1=Yr({type:Number,default:2}),Gge=Yr({type:String,values:["ltr","rtl"],default:"ltr"}),s1=Yr({type:Number,default:0}),Gm=Yr({type:Number,required:!0}),s3=Yr({type:String,values:["horizontal","vertical"],default:$$}),o3=gt({className:{type:String,default:""},containerElement:{type:Je([String,Object]),default:"div"},data:{type:Je(Array),default:()=>vs([])},direction:Gge,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Je([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Kge=gt(ut({cache:n1,estimatedItemSize:t1,layout:s3,initScrollOffset:s1,total:Gm,itemSize:e1},o3));gt(ut({columnCache:n1,columnWidth:e1,estimatedColumnWidth:t1,estimatedRowHeight:t1,initScrollLeft:s1,initScrollTop:s1,rowCache:n1,rowHeight:e1,totalColumn:Gm,totalRow:Gm},o3));const jge=gt({layout:s3,total:Gm,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},visible:Boolean}),qge=me({name:"ElVirtualScrollBar",props:jge,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const s=L(),o=L();let r=null,a=null;const i=Cn({isDragging:!1,traveled:0}),l=_(()=>uR[e.layout]),u=_(()=>e.clientSize-4),c=_(()=>({position:"absolute",width:mc===e.layout?`${u.value}px`:"6px",height:mc===e.layout?"6px":`${u.value}px`,[Bge[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),d=_(()=>{const w=e.ratio,C=e.clientSize;if(w>=100)return Number.POSITIVE_INFINITY;if(w>=50)return w*C/100;const k=C/3;return Math.floor(Math.min(Math.max(w*C,zge),k))}),f=_(()=>{if(!Number.isFinite(d.value))return{display:"none"};const w=`${d.value}px`;return Vge({bar:l.value,size:w,move:i.traveled},e.layout)}),h=_(()=>Math.floor(e.clientSize-d.value-4)),p=()=>{gn(window,"mousemove",b),gn(window,"mouseup",v);const w=je(o);!w||(a=document.onselectstart,document.onselectstart=()=>!1,gn(w,"touchmove",b),gn(w,"touchend",v))},m=()=>{zn(window,"mousemove",b),zn(window,"mouseup",v),document.onselectstart=a,a=null;const w=je(o);!w||(zn(w,"touchmove",b),zn(w,"touchend",v))},g=w=>{w.stopImmediatePropagation(),!(w.ctrlKey||[1,2].includes(w.button))&&(i.isDragging=!0,i[l.value.axis]=w.currentTarget[l.value.offset]-(w[l.value.client]-w.currentTarget.getBoundingClientRect()[l.value.direction]),t("start-move"),p())},v=()=>{i.isDragging=!1,i[l.value.axis]=0,t("stop-move"),m()},b=w=>{const{isDragging:C}=i;if(!C||!o.value||!s.value)return;const k=i[l.value.axis];if(!k)return;w$(r);const S=(s.value.getBoundingClientRect()[l.value.direction]-w[l.value.client])*-1,E=o.value[l.value.offset]-k,x=S-E;r=y$(()=>{i.traveled=Math.max(0,Math.min(x,h.value)),t("scroll",x,h.value)})},$=w=>{const C=Math.abs(w.target.getBoundingClientRect()[l.value.direction]-w[l.value.client]),k=o.value[l.value.offset]/2,S=C-k;i.traveled=Math.max(0,Math.min(S,h.value)),t("scroll",S,h.value)},y=w=>w.preventDefault();return Oe(()=>e.scrollFrom,w=>{i.isDragging||(i.traveled=Math.ceil(w*h.value))}),Mt(()=>{!qt||(gn(s.value,"touchstart",y),gn(o.value,"touchstart",g))}),os(()=>{zn(s.value,"touchstart",y),m()}),()=>He("div",{role:"presentation",ref:s,class:"el-virtual-scrollbar",style:c.value,onMousedown:ht($,["stop","prevent"])},He("div",{ref:o,class:"el-scrollbar__thumb",style:f.value,onMousedown:g},[]))}}),r3=({name:e,getOffset:t,getItemSize:n,getItemOffset:s,getEstimatedTotalSize:o,getStartIndexForOffset:r,getStopIndexForStartIndex:a,initCache:i,clearCache:l,validateProps:u})=>me({name:e!=null?e:"ElVirtualList",props:Kge,emits:[gE,vE],setup(c,{emit:d,expose:f}){u(c);const h=Lt(),p=L(i(c,h)),m=Mge(),g=L(),v=L(),b=L(),$=L({isScrolling:!1,scrollDir:"forward",scrollOffset:wn(c.initScrollOffset)?c.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:c.scrollbarAlwaysOn}),y=_(()=>{const{total:te,cache:pe}=c,{isScrolling:ae,scrollDir:K,scrollOffset:X}=je($);if(te===0)return[0,0,0,0];const Y=r(c,X,je(p)),ie=a(c,Y,X,je(p)),xe=!ae||K===Z_?Math.max(1,pe):1,Le=!ae||K===Y_?Math.max(1,pe):1;return[Math.max(0,Y-xe),Math.max(0,Math.min(te-1,ie+Le)),Y,ie]}),w=_(()=>o(c,je(p))),C=_(()=>gf(c.layout)),k=_(()=>[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:c.direction,height:wn(c.height)?`${c.height}px`:c.height,width:wn(c.width)?`${c.width}px`:c.width},c.style]),S=_(()=>{const te=je(w),pe=je(C);return{height:pe?"100%":`${te}px`,pointerEvents:je($).isScrolling?"none":void 0,width:pe?`${te}px`:"100%"}}),E=_(()=>C.value?c.width:c.height),{onWheel:x}=Uge({atStartEdge:_(()=>$.value.scrollOffset<=0),atEndEdge:_(()=>$.value.scrollOffset>=w.value),layout:_(()=>c.layout)},te=>{var pe,ae;(ae=(pe=b.value).onMouseUp)==null||ae.call(pe),R(Math.min($.value.scrollOffset+te,w.value-E.value))}),N=()=>{const{total:te}=c;if(te>0){const[X,Y,ie,xe]=je(y);d(gE,X,Y,ie,xe)}const{scrollDir:pe,scrollOffset:ae,updateRequested:K}=je($);d(vE,pe,ae,K)},A=te=>{const{clientHeight:pe,scrollHeight:ae,scrollTop:K}=te.currentTarget,X=je($);if(X.scrollOffset===K)return;const Y=Math.max(0,Math.min(K,ae-pe));$.value=Ut(ut({},X),{isScrolling:!0,scrollDir:Mb(X.scrollOffset,Y),scrollOffset:Y,updateRequested:!1}),dt(G)},D=te=>{const{clientWidth:pe,scrollLeft:ae,scrollWidth:K}=te.currentTarget,X=je($);if(X.scrollOffset===ae)return;const{direction:Y}=c;let ie=ae;if(Y===pm)switch(bE()){case t3:{ie=-ae;break}case n3:{ie=K-pe-ae;break}}ie=Math.max(0,Math.min(ie,K-pe)),$.value=Ut(ut({},X),{isScrolling:!0,scrollDir:Mb(X.scrollOffset,ie),scrollOffset:ie,updateRequested:!1}),dt(G)},M=te=>{je(C)?D(te):A(te),N()},F=(te,pe)=>{const ae=(w.value-E.value)/pe*te;R(Math.min(w.value-E.value,ae))},R=te=>{te=Math.max(te,0),te!==je($).scrollOffset&&($.value=Ut(ut({},je($)),{scrollOffset:te,scrollDir:Mb(je($).scrollOffset,te),updateRequested:!0}),dt(G))},P=(te,pe=mf)=>{const{scrollOffset:ae}=je($);te=Math.max(0,Math.min(te,c.total-1)),R(t(c,te,pe,ae,je(p)))},V=te=>{const{direction:pe,itemSize:ae,layout:K}=c,X=m.value(l&&ae,l&&K,l&&pe);let Y;if(Wt(X,String(te)))Y=X[te];else{const ie=s(c,te,je(p)),xe=n(c,te,je(p)),Le=je(C),Be=pe===pm,Pe=Le?ie:0;X[te]=Y={position:"absolute",left:Be?void 0:`${Pe}px`,right:Be?`${Pe}px`:void 0,top:Le?0:`${ie}px`,height:Le?"100%":`${xe}px`,width:Le?`${xe}px`:"100%"}}return Y},G=()=>{$.value.isScrolling=!1,dt(()=>{m.value(-1,null,null)})},se=()=>{const te=g.value;te&&(te.scrollTop=0)};Mt(()=>{if(!qt)return;const{initScrollOffset:te}=c,pe=je(g);wn(te)&&pe&&(je(C)?pe.scrollLeft=te:pe.scrollTop=te),N()}),sa(()=>{const{direction:te,layout:pe}=c,{scrollOffset:ae,updateRequested:K}=je($),X=je(g);if(K&&X)if(pe===mc)if(te===pm)switch(bE()){case"negative":{X.scrollLeft=-ae;break}case"positive-ascending":{X.scrollLeft=ae;break}default:{const{clientWidth:Y,scrollWidth:ie}=X;X.scrollLeft=ie-Y-ae;break}}else X.scrollLeft=ae;else X.scrollTop=ae});const ke={clientSize:E,estimatedTotalSize:w,windowStyle:k,windowRef:g,innerRef:v,innerStyle:S,itemsToRender:y,scrollbarRef:b,states:$,getItemStyle:V,onScroll:M,onScrollbarScroll:F,onWheel:x,scrollTo:R,scrollToItem:P,resetScrollTop:se};return f({windowRef:g,innerRef:v,getItemStyleCache:m,scrollTo:R,scrollToItem:P,resetScrollTop:se,states:$}),ke},render(c){var d;const{$slots:f,className:h,clientSize:p,containerElement:m,data:g,getItemStyle:v,innerElement:b,itemsToRender:$,innerStyle:y,layout:w,total:C,onScroll:k,onScrollbarScroll:S,onWheel:E,states:x,useIsScrolling:N,windowStyle:A}=c,[D,M]=$,F=en(m),R=en(b),P=[];if(C>0)for(let ke=D;ke<=M;ke++)P.push((d=f.default)==null?void 0:d.call(f,{data:g,key:ke,index:ke,isScrolling:N?x.isScrolling:void 0,style:v(ke)}));const V=[He(R,{style:y,ref:"innerRef"},Xt(R)?P:{default:()=>P})],G=He(qge,{ref:"scrollbarRef",clientSize:p,layout:w,onScroll:S,ratio:p*100/this.estimatedTotalSize,scrollFrom:x.scrollOffset/(this.estimatedTotalSize-p),total:C}),se=He(F,{class:h,style:A,onScroll:k,onWheel:E,ref:"windowRef",key:0},Xt(F)?[V]:{default:()=>[V]});return He("div",{key:0,class:["el-vl__wrapper",x.scrollbarAlwaysOn?"always-on":""]},[se,G])}}),a3=r3({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:n,layout:s,width:o},r,a,i)=>{const l=gf(s)?o:e,u=Math.max(0,t*n-l),c=Math.min(u,r*n),d=Math.max(0,(r+1)*n-l);switch(a===J_&&(i>=d-l&&i<=c+l?a=mf:a=Um),a){case Q_:return c;case e3:return d;case Um:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(l/2)?0:f>u+Math.floor(l/2)?u:f}case mf:default:return i>=d&&i<=c?i:i<d?d:c}},getStartIndexForOffset:({total:e,itemSize:t},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:n,layout:s,width:o},r,a)=>{const i=r*n,l=gf(s)?o:e,u=Math.ceil((l+a-i)/n);return Math.max(0,Math.min(t-1,r+u-1))},initCache(){},clearCache:!0,validateProps(){}}),Uu=(e,t,n)=>{const{itemSize:s}=e,{items:o,lastVisitedIndex:r}=n;if(t>r){let a=0;if(r>=0){const i=o[r];a=i.offset+i.size}for(let i=r+1;i<=t;i++){const l=s(i);o[i]={offset:a,size:l},a+=l}n.lastVisitedIndex=t}return o[t]},Xge=(e,t,n)=>{const{items:s,lastVisitedIndex:o}=t;return(o>0?s[o].offset:0)>=n?i3(e,t,0,o,n):Yge(e,t,Math.max(0,o),n)},i3=(e,t,n,s,o)=>{for(;n<=s;){const r=n+Math.floor((s-n)/2),a=Uu(e,r,t).offset;if(a===o)return r;a<o?n=r+1:a>o&&(s=r-1)}return Math.max(0,n-1)},Yge=(e,t,n,s)=>{const{total:o}=e;let r=1;for(;n<o&&Uu(e,n,t).offset<s;)n+=r,r*=2;return i3(e,t,Math.floor(n/2),Math.min(n,o-1),s)},yE=({total:e},{items:t,estimatedItemSize:n,lastVisitedIndex:s})=>{let o=0;if(s>=e&&(s=e-1),s>=0){const i=t[s];o=i.offset+i.size}const a=(e-s-1)*n;return o+a},Zge=r3({name:"ElDynamicSizeList",getItemOffset:(e,t,n)=>Uu(e,t,n).offset,getItemSize:(e,t,{items:n})=>n[t].size,getEstimatedTotalSize:yE,getOffset:(e,t,n,s,o)=>{const{height:r,layout:a,width:i}=e,l=gf(a)?i:r,u=Uu(e,t,o),c=yE(e,o),d=Math.max(0,Math.min(c-l,u.offset)),f=Math.max(0,u.offset-l+u.size);switch(n===J_&&(s>=f-l&&s<=d+l?n=mf:n=Um),n){case Q_:return d;case e3:return f;case Um:return Math.round(f+(d-f)/2);case mf:default:return s>=f&&s<=d?s:s<f?f:d}},getStartIndexForOffset:(e,t,n)=>Xge(e,n,t),getStopIndexForStartIndex:(e,t,n,s)=>{const{height:o,total:r,layout:a,width:i}=e,l=gf(a)?i:o,u=Uu(e,t,s),c=n+l;let d=u.offset+u.size,f=t;for(;f<r-1&&d<c;)f++,d+=Uu(e,f,s).size;return f},initCache({estimatedItemSize:e=Fge},t){const n={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(s,o=!0)=>{var r,a;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,s-1),(r=t.exposed)==null||r.getItemStyleCache(-1),o&&((a=t.proxy)==null||a.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:e})=>{}}),Jge=me({props:{item:{type:Object,required:!0},style:Object,height:Number}});function Qge(e,t,n,s,o,r){return e.item.isTitle?(T(),B("div",{key:0,class:"el-select-group__title",style:nt([e.style,{lineHeight:`${e.height}px`}])},Fe(e.item.label),5)):(T(),B("div",{key:1,class:"el-select-group__split",style:nt(e.style)},[W("span",{class:"el-select-group__split-dash",style:nt({top:`${e.height/2}px`})},null,4)],4))}var eve=We(Jge,[["render",Qge]]);function tve(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}const nve={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:Ha},collapseTags:Boolean,defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},popperAppendToBody:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:Oo},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1}},sve={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},ove=me({props:sve,emits:["select","hover"],setup(e,{emit:t}){const{hoverItem:n,selectOptionClick:s}=tve(e,{emit:t});return{hoverItem:n,selectOptionClick:s}}}),rve=["aria-selected"];function ave(e,t,n,s,o,r){return T(),B("li",{"aria-selected":e.selected,style:nt(e.style),class:q({"el-select-dropdown__option-item":!0,"is-selected":e.selected,"is-disabled":e.disabled,"is-created":e.created,hover:e.hovering}),onMouseenter:t[0]||(t[0]=(...a)=>e.hoverItem&&e.hoverItem(...a)),onClick:t[1]||(t[1]=ht((...a)=>e.selectOptionClick&&e.selectOptionClick(...a),["stop"]))},[_e(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[W("span",null,Fe(e.item.label),1)])],46,rve)}var ive=We(ove,[["render",ave]]);const l3="ElSelectV2Injection",lve=me({name:"ElSelectDropdown",props:{data:Array,hoveringIndex:Number,width:Number},setup(e){const t=Ze(l3),n=L([]),s=L(null),o=_(()=>lf(t.props.estimatedOptionHeight)),r=_(()=>o.value?{itemSize:t.props.itemHeight}:{estimatedSize:t.props.estimatedOptionHeight,itemSize:h=>n.value[h]}),a=(h=[],p)=>{const{props:{valueKey:m}}=t;return rn(p)?h&&h.some(g=>Cs(g,m)===Cs(p,m)):h.includes(p)},i=(h,p)=>{if(rn(p)){const{valueKey:m}=t.props;return Cs(h,m)===Cs(p,m)}else return h===p};return{select:t,listProps:r,listRef:s,isSized:o,isItemDisabled:(h,p)=>{const{disabled:m,multiple:g,multipleLimit:v}=t.props;return m||!p&&(g?v>0&&h.length>=v:!1)},isItemHovering:h=>e.hoveringIndex===h,isItemSelected:(h,p)=>t.props.multiple?a(h,p.value):i(h,p.value),scrollToItem:h=>{const p=s.value;p&&p.scrollToItem(h)},resetScrollTop:()=>{const h=s.value;h&&h.resetScrollTop()}}},render(e,t){var n;const{$slots:s,data:o,listProps:r,select:a,isSized:i,width:l,isItemDisabled:u,isItemHovering:c,isItemSelected:d}=e,f=i?a3:Zge,{props:h,onSelect:p,onHover:m,onKeyboardNavigate:g,onKeyboardSelect:v}=a,{height:b,modelValue:$,multiple:y}=h;if(o.length===0)return He("div",{class:"el-select-dropdown",style:{width:`${l}px`}},(n=s.empty)==null?void 0:n.call(s));const w=oe(k=>{const{index:S,data:E}=k,x=E[S];if(E[S].type==="Group")return He(eve,{item:x,style:k.style,height:i?r.itemSize:r.estimatedSize});const N=d($,x),A=u($,N);return He(ive,Ut(ut({},k),{selected:N,disabled:x.disabled||A,created:!!x.created,hovering:c(S),item:x,onSelect:p,onHover:m}),{default:oe(D=>_e(s,"default",D,()=>[He("span",x.label)]))})}),C=He(f,ut({ref:"listRef",className:"el-select-dropdown__list",data:o,height:b,width:l,total:o.length,scrollbarAlwaysOn:h.scrollbarAlwaysOn,onKeydown:[t[1]||(t[1]=Ht(ht(()=>g("forward"),["stop","prevent"]),["down"])),t[2]||(t[2]=Ht(ht(()=>g("backward"),["stop","prevent"]),["up"])),t[3]||(t[3]=Ht(ht(v,["stop","prevent"]),["enter"])),t[4]||(t[4]=Ht(ht(()=>a.expanded=!1,["stop","prevent"]),["esc"])),t[5]||(t[5]=Ht(()=>a.expanded=!1,["tab"]))]},r),{default:w});return He("div",{class:{"is-multiple":y,"el-select-dropdown":!0}},[C])}});function uve(e,t){const n=L(0),s=L(null),o=_(()=>e.allowCreate&&e.filterable);function r(c){const d=f=>f.value===c;return e.options&&e.options.some(d)||t.createdOptions.some(d)}function a(c){!o.value||(e.multiple&&c.created?n.value++:s.value=c)}function i(c){if(o.value)if(c&&c.length>0&&!r(c)){const d={value:c,label:c,created:!0,disabled:!1};t.createdOptions.length>=n.value?t.createdOptions[n.value]=d:t.createdOptions.push(d)}else if(e.multiple)t.createdOptions.length=n.value;else{const d=s.value;t.createdOptions.length=0,d&&d.created&&t.createdOptions.push(d)}}function l(c){if(!o.value||!c||!c.created)return;const d=t.createdOptions.findIndex(f=>f.value===c.value);~d&&(t.createdOptions.splice(d,1),n.value--)}function u(){o.value&&(t.createdOptions.length=0,n.value=0)}return{createNewOption:i,removeNewOption:l,selectNewOption:a,clearAllNewOption:u}}const cve=e=>{const t=[];return e.map(n=>{Nt(n.options)?(t.push({label:n.label,isTitle:!0,type:"Group"}),n.options.forEach(s=>{t.push(s)}),t.push({type:"Group"})):t.push(n)}),t};function dve(e){const t=L(!1);return{handleCompositionStart:()=>{t.value=!0},handleCompositionUpdate:r=>{const a=r.target.value,i=a[a.length-1]||"";t.value=!Wg(i)},handleCompositionEnd:r=>{t.value&&(t.value=!1,Pt(e)&&e(r))}}}const wE="",$E=11,fve={larget:51,default:42,small:33},hve=(e,t)=>{const{t:n}=kn(),{form:s,formItem:o}=zc(),r=Cn({inputValue:wE,displayInputValue:wE,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:"",query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),a=L(-1),i=L(-1),l=L(null),u=L(null),c=L(null),d=L(null),f=L(null),h=L(null),p=L(null),m=L(!1),g=_(()=>e.disabled||(s==null?void 0:s.disabled)),v=_(()=>{const ze=x.value.length*34;return ze>e.height?e.height:ze}),b=_(()=>e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!==""),$=_(()=>{const ze=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:b.value;return e.clearable&&!g.value&&r.comboBoxHovering&&ze}),y=_(()=>e.remote&&e.filterable?"":Ff),w=_(()=>y.value&&m.value?"is-reverse":""),C=_(()=>(o==null?void 0:o.validateState)||""),k=_(()=>eR[C.value]),S=_(()=>e.remote?300:0),E=_(()=>{const ze=x.value;return e.loading?e.loadingText||n("el.select.loading"):e.remote&&r.inputValue===""&&ze.length===0?!1:e.filterable&&r.inputValue&&ze.length>0?e.noMatchText||n("el.select.noMatch"):ze.length===0?e.noDataText||n("el.select.noData"):null}),x=_(()=>{const ze=pt=>{const Zt=r.inputValue;return Zt?pt.label.includes(Zt):!0};return e.loading?[]:cve(e.options.concat(r.createdOptions).map(pt=>{if(Nt(pt.options)){const Zt=pt.options.filter(ze);if(Zt.length>0)return Ut(ut({},pt),{options:Zt})}else if(e.remote||ze(pt))return pt;return null}).filter(pt=>pt!==null))}),N=_(()=>x.value.every(ze=>ze.disabled)),A=ds(),D=_(()=>A.value==="small"?"small":"default"),M=_(()=>{const ze=h.value,pt=D.value||"default",Zt=ze?parseInt(getComputedStyle(ze).paddingLeft):0,Qn=ze?parseInt(getComputedStyle(ze).paddingRight):0;return r.selectWidth-Qn-Zt-fve[pt]}),F=()=>{var ze,pt,Zt;i.value=((Zt=(pt=(ze=f.value)==null?void 0:ze.getBoundingClientRect)==null?void 0:pt.call(ze))==null?void 0:Zt.width)||200},R=_(()=>({width:`${r.calculatedWidth===0?$E:Math.ceil(r.calculatedWidth)+$E}px`})),P=_(()=>Nt(e.modelValue)?e.modelValue.length===0&&!r.displayInputValue:e.filterable?r.displayInputValue.length===0:!0),V=_(()=>{const ze=e.placeholder||n("el.select.placeholder");return e.multiple?ze:r.selectedLabel||ze}),G=_(()=>{var ze,pt;return(pt=(ze=d.value)==null?void 0:ze.popperRef)==null?void 0:pt.contentRef}),se=_(()=>{if(e.multiple){const ze=e.modelValue.length;if(e.modelValue.length>0)return x.value.findIndex(pt=>pt.value===e.modelValue[ze-1])}else if(e.modelValue)return x.value.findIndex(ze=>ze.value===e.modelValue);return-1}),ke=_(()=>m.value&&E.value!==!1),{createNewOption:te,removeNewOption:pe,selectNewOption:ae,clearAllNewOption:K}=uve(e,r),{handleCompositionStart:X,handleCompositionUpdate:Y,handleCompositionEnd:ie}=dve(ze=>ln(ze)),xe=()=>{var ze,pt,Zt;(pt=(ze=u.value).focus)==null||pt.call(ze),(Zt=d.value)==null||Zt.updatePopper()},Le=()=>{if(!e.automaticDropdown&&!g.value)return r.isComposing&&(r.softFocus=!0),dt(()=>{var ze,pt;m.value=!m.value,(pt=(ze=u.value)==null?void 0:ze.focus)==null||pt.call(ze)})},Be=()=>(e.filterable&&r.inputValue!==r.selectedLabel&&(r.query=r.selectedLabel),U(r.inputValue),dt(()=>{te(r.inputValue)})),Pe=_o(Be,S.value),U=ze=>{r.previousQuery!==ze&&(r.previousQuery=ze,e.filterable&&Pt(e.filterMethod)?e.filterMethod(ze):e.filterable&&e.remote&&Pt(e.remoteMethod)&&e.remoteMethod(ze))},Q=ze=>{jr(e.modelValue,ze)||t(Ms,ze)},H=ze=>{t(Ft,ze),Q(ze),r.previousValue=ze.toString()},ne=(ze=[],pt)=>{if(!rn(pt))return ze.indexOf(pt);const Zt=e.valueKey;let Qn=-1;return ze.some((Ta,rr)=>Cs(Ta,Zt)===Cs(pt,Zt)?(Qn=rr,!0):!1),Qn},ye=ze=>rn(ze)?Cs(ze,e.valueKey):ze,J=ze=>rn(ze)?ze.label:ze,Ne=()=>{if(!(e.collapseTags&&!e.filterable))return dt(()=>{var ze,pt;if(!u.value)return;const Zt=h.value;f.value.height=Zt.offsetHeight,m.value&&E.value!==!1&&((pt=(ze=d.value)==null?void 0:ze.updatePopper)==null||pt.call(ze))})},Ie=()=>{var ze,pt;if(fe(),F(),(pt=(ze=d.value)==null?void 0:ze.updatePopper)==null||pt.call(ze),e.multiple)return Ne()},fe=()=>{const ze=h.value;ze&&(r.selectWidth=ze.getBoundingClientRect().width)},Ee=(ze,pt,Zt=!0)=>{var Qn,Ta;if(e.multiple){let rr=e.modelValue.slice();const mu=ne(rr,ye(ze));mu>-1?(rr=[...rr.slice(0,mu),...rr.slice(mu+1)],r.cachedOptions.splice(mu,1),pe(ze)):(e.multipleLimit<=0||rr.length<e.multipleLimit)&&(rr=[...rr,ye(ze)],r.cachedOptions.push(ze),ae(ze),ct(pt)),H(rr),ze.created&&(r.query="",U(""),r.inputLength=20),e.filterable&&!e.reserveKeyword&&((Ta=(Qn=u.value).focus)==null||Ta.call(Qn),Re("")),e.filterable&&(r.calculatedWidth=p.value.getBoundingClientRect().width),Ne(),sn()}else a.value=pt,r.selectedLabel=ze.label,H(ye(ze)),m.value=!1,r.isComposing=!1,r.isSilentBlur=Zt,ae(ze),ze.created||K(),ct(pt)},rt=(ze,pt)=>{const Zt=e.modelValue.indexOf(pt.value);if(Zt>-1&&!g.value){const Qn=[...e.modelValue.slice(0,Zt),...e.modelValue.slice(Zt+1)];return r.cachedOptions.splice(Zt,1),H(Qn),t("remove-tag",pt.value),r.softFocus=!0,pe(pt),dt(xe)}ze.stopPropagation()},Ye=ze=>{const pt=r.isComposing;r.isComposing=!0,r.softFocus?r.softFocus=!1:pt||t("focus",ze)},lt=()=>(r.softFocus=!1,dt(()=>{var ze,pt;(pt=(ze=u.value)==null?void 0:ze.blur)==null||pt.call(ze),p.value&&(r.calculatedWidth=p.value.getBoundingClientRect().width),r.isSilentBlur?r.isSilentBlur=!1:r.isComposing&&t("blur"),r.isComposing=!1})),vt=()=>{r.displayInputValue.length>0?Re(""):m.value=!1},Xe=ze=>{if(r.displayInputValue.length===0){ze.preventDefault();const pt=e.modelValue.slice();pt.pop(),pe(r.cachedOptions.pop()),H(pt)}},de=()=>{let ze;return Nt(e.modelValue)?ze=[]:ze="",r.softFocus=!0,e.multiple?r.cachedOptions=[]:r.selectedLabel="",m.value=!1,H(ze),t("clear"),K(),dt(xe)},Re=ze=>{r.displayInputValue=ze,r.inputValue=ze},Ke=(ze,pt=void 0)=>{const Zt=x.value;if(!["forward","backward"].includes(ze)||g.value||Zt.length<=0||N.value)return;if(!m.value)return Le();pt===void 0&&(pt=r.hoveringIndex);let Qn=-1;ze==="forward"?(Qn=pt+1,Qn>=Zt.length&&(Qn=0)):ze==="backward"&&(Qn=pt-1,Qn<0&&(Qn=Zt.length-1));const Ta=Zt[Qn];if(Ta.disabled||Ta.type==="Group")return Ke(ze,Qn);ct(Qn),Vo(Qn)},Ae=()=>{if(m.value)~r.hoveringIndex&&Ee(x.value[r.hoveringIndex],r.hoveringIndex,!1);else return Le()},ct=ze=>{r.hoveringIndex=ze},wt=()=>{r.hoveringIndex=-1},sn=()=>{var ze;const pt=u.value;pt&&((ze=pt.focus)==null||ze.call(pt))},ln=ze=>{const pt=ze.target.value;if(Re(pt),r.displayInputValue.length>0&&!m.value&&(m.value=!0),r.calculatedWidth=p.value.getBoundingClientRect().width,e.multiple&&Ne(),e.remote)Pe();else return Be()},Kt=()=>(m.value=!1,lt()),_n=()=>(r.inputValue=r.displayInputValue,dt(()=>{~se.value&&(ct(se.value),Vo(r.hoveringIndex))})),Vo=ze=>{c.value.scrollToItem(ze)},Or=()=>{if(wt(),e.multiple)if(e.modelValue.length>0){let ze=!1;r.cachedOptions.length=0,r.previousValue=e.modelValue.toString(),e.modelValue.map(pt=>{const Zt=x.value.findIndex(Qn=>ye(Qn)===pt);~Zt&&(r.cachedOptions.push(x.value[Zt]),ze||ct(Zt),ze=!0)})}else r.cachedOptions=[],r.previousValue="";else if(b.value){r.previousValue=e.modelValue;const ze=x.value,pt=ze.findIndex(Zt=>ye(Zt)===e.modelValue);~pt?(r.selectedLabel=ze[pt].label,ct(pt)):r.selectedLabel=`${e.modelValue}`}else r.selectedLabel="",r.previousValue="";F()};return Oe(m,ze=>{var pt,Zt;t("visible-change",ze),ze?(Zt=(pt=d.value).update)==null||Zt.call(pt):(r.displayInputValue="",te(""))}),Oe(()=>e.modelValue,(ze,pt)=>{var Zt;(!ze||ze.toString()!==r.previousValue)&&Or(),jr(ze,pt)||(Zt=o==null?void 0:o.validate)==null||Zt.call(o,"change")},{deep:!0}),Oe(()=>e.options,()=>{const ze=u.value;(!ze||ze&&document.activeElement!==ze)&&Or()},{deep:!0}),Oe(x,()=>dt(c.value.resetScrollTop)),Mt(()=>{Or(),Li(f.value,Ie)}),Af(()=>{Bi(f.value,Ie)}),{collapseTagSize:D,currentPlaceholder:V,expanded:m,emptyText:E,popupHeight:v,debounce:S,filteredOptions:x,iconComponent:y,iconReverse:w,inputWrapperStyle:R,popperSize:i,dropdownMenuVisible:ke,hasModelValue:b,shouldShowPlaceholder:P,selectDisabled:g,selectSize:A,showClearBtn:$,states:r,tagMaxWidth:M,calculatorRef:p,controlRef:l,inputRef:u,menuRef:c,popper:d,selectRef:f,selectionRef:h,popperRef:G,validateState:C,validateIcon:k,Effect:wR,debouncedOnInputChange:Pe,deleteTag:rt,getLabel:J,getValueKey:ye,handleBlur:lt,handleClear:de,handleClickOutside:Kt,handleDel:Xe,handleEsc:vt,handleFocus:Ye,handleMenuEnter:_n,handleResize:Ie,toggleMenu:Le,scrollTo:Vo,onInput:ln,onKeyboardNavigate:Ke,onKeyboardSelect:Ae,onSelect:Ee,onHover:ct,onUpdateInputValue:Re,handleCompositionStart:X,handleCompositionEnd:ie,handleCompositionUpdate:Y}},pve=me({name:"ElSelectV2",components:{ElSelectMenu:lve,ElTag:Gg,ElTooltip:Bo,ElIcon:_t},directives:{ClickOutside:Pi,ModelText:Dw},props:nve,emits:[Ft,Ms,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const n=hve(e,t);return zt(l3,{props:Cn(Ut(ut({},so(e)),{height:n.popupHeight})),onSelect:n.onSelect,onHover:n.onHover,onKeyboardNavigate:n.onKeyboardNavigate,onKeyboardSelect:n.onKeyboardSelect}),n}}),mve={key:0},gve={key:1,class:"el-select-v2__selection"},vve={key:0,class:"el-select-v2__selected-item"},bve=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],yve=["textContent"],wve={class:"el-select-v2__selected-item el-select-v2__input-wrapper"},$ve=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],Cve=["textContent"],kve={class:"el-select-v2__suffix"},Sve={class:"el-select-v2__empty"};function xve(e,t,n,s,o,r){const a=re("el-tag"),i=re("el-icon"),l=re("el-select-menu"),u=re("el-tooltip"),c=wo("model-text"),d=wo("click-outside");return $t((T(),B("div",{ref:"selectRef",class:q([[e.selectSize?"el-select-v2--"+e.selectSize:""],"el-select-v2"]),onClick:t[24]||(t[24]=ht((...f)=>e.toggleMenu&&e.toggleMenu(...f),["stop"])),onMouseenter:t[25]||(t[25]=f=>e.states.comboBoxHovering=!0),onMouseleave:t[26]||(t[26]=f=>e.states.comboBoxHovering=!1)},[le(u,{ref:"popper",visible:e.dropdownMenuVisible,"onUpdate:visible":t[22]||(t[22]=f=>e.dropdownMenuVisible=f),"append-to-body":e.popperAppendToBody,"popper-class":`el-select-v2__popper ${e.popperClass}`,"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:"light",placement:"bottom-start",pure:"",transition:"el-zoom-in-top",trigger:"click",persistent:"",onShow:e.handleMenuEnter,onHide:t[23]||(t[23]=f=>e.states.inputValue=e.states.displayInputValue)},{default:oe(()=>{var f;return[W("div",{ref:"selectionRef",class:q(["el-select-v2__wrapper",{"is-focused":e.states.isComposing,"is-hovering":e.states.comboBoxHovering,"is-filterable":e.filterable,"is-disabled":e.disabled}])},[e.$slots.prefix?(T(),B("div",mve,[_e(e.$slots,"prefix")])):ce("v-if",!0),e.multiple?(T(),B("div",gve,[e.collapseTags&&e.modelValue.length>0?(T(),B("div",vve,[le(a,{closable:!e.selectDisabled&&!((f=e.states.cachedOptions[0])==null?void 0:f.disable),size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:t[0]||(t[0]=h=>e.deleteTag(h,e.states.cachedOptions[0]))},{default:oe(()=>{var h;return[W("span",{class:"el-select-v2__tags-text",style:nt({maxWidth:`${e.tagMaxWidth}px`})},Fe((h=e.states.cachedOptions[0])==null?void 0:h.label),5)]}),_:1},8,["closable","size"]),e.modelValue.length>1?(T(),ve(a,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:oe(()=>[W("span",{class:"el-select-v2__tags-text",style:nt({maxWidth:`${e.tagMaxWidth}px`})},"+ "+Fe(e.modelValue.length-1),5)]),_:1},8,["size"])):ce("v-if",!0)])):(T(!0),B(it,{key:1},Yt(e.states.cachedOptions,(h,p)=>(T(),B("div",{key:p,class:"el-select-v2__selected-item"},[(T(),ve(a,{key:e.getValueKey(h),closable:!e.selectDisabled&&!h.disabled,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:m=>e.deleteTag(m,h)},{default:oe(()=>[W("span",{class:"el-select-v2__tags-text",style:nt({maxWidth:`${e.tagMaxWidth}px`})},Fe(e.getLabel(h)),5)]),_:2},1032,["closable","size","onClose"]))]))),128)),W("div",{class:"el-select-v2__selected-item el-select-v2__input-wrapper",style:nt(e.inputWrapperStyle)},[$t(W("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:q(["el-select-v2__combobox-input",[e.selectSize?`is-${e.selectSize}`:""]]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":t[1]||(t[1]=(...h)=>e.onUpdateInputValue&&e.onUpdateInputValue(...h)),onFocus:t[2]||(t[2]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onInput:t[3]||(t[3]=(...h)=>e.onInput&&e.onInput(...h)),onCompositionstart:t[4]||(t[4]=(...h)=>e.handleCompositionStart&&e.handleCompositionStart(...h)),onCompositionupdate:t[5]||(t[5]=(...h)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...h)),onCompositionend:t[6]||(t[6]=(...h)=>e.handleCompositionEnd&&e.handleCompositionEnd(...h)),onKeydown:[t[7]||(t[7]=Ht(ht(h=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[8]||(t[8]=Ht(ht(h=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[9]||(t[9]=Ht(ht((...h)=>e.onKeyboardSelect&&e.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),t[10]||(t[10]=Ht(ht((...h)=>e.handleEsc&&e.handleEsc(...h),["stop","prevent"]),["esc"])),t[11]||(t[11]=Ht(ht((...h)=>e.handleDel&&e.handleDel(...h),["stop"]),["delete"]))]},null,42,bve),[[c,e.states.displayInputValue]]),e.filterable?(T(),B("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:"el-select-v2__input-calculator",textContent:Fe(e.states.displayInputValue)},null,8,yve)):ce("v-if",!0)],4)])):(T(),B(it,{key:2},[W("div",wve,[$t(W("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:"el-select-v2__combobox-input",disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",unselectable:e.expanded?"on":void 0,onCompositionstart:t[12]||(t[12]=(...h)=>e.handleCompositionStart&&e.handleCompositionStart(...h)),onCompositionupdate:t[13]||(t[13]=(...h)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...h)),onCompositionend:t[14]||(t[14]=(...h)=>e.handleCompositionEnd&&e.handleCompositionEnd(...h)),onFocus:t[15]||(t[15]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onInput:t[16]||(t[16]=(...h)=>e.onInput&&e.onInput(...h)),onKeydown:[t[17]||(t[17]=Ht(ht(h=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[18]||(t[18]=Ht(ht(h=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[19]||(t[19]=Ht(ht((...h)=>e.onKeyboardSelect&&e.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),t[20]||(t[20]=Ht(ht((...h)=>e.handleEsc&&e.handleEsc(...h),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":t[21]||(t[21]=(...h)=>e.onUpdateInputValue&&e.onUpdateInputValue(...h))},null,40,$ve),[[c,e.states.displayInputValue]])]),e.filterable?(T(),B("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:"el-select-v2__selected-item el-select-v2__input-calculator",textContent:Fe(e.states.displayInputValue)},null,8,Cve)):ce("v-if",!0)],64)),e.shouldShowPlaceholder?(T(),B("span",{key:3,class:q({"el-select-v2__placeholder":!0,"is-transparent":e.states.isComposing||(e.placeholder&&e.multiple?e.modelValue.length===0:!e.hasModelValue)})},Fe(e.currentPlaceholder),3)):ce("v-if",!0),W("span",kve,[e.iconComponent?$t((T(),ve(i,{key:0,class:q(["el-select-v2__caret","el-input__icon",e.iconReverse])},{default:oe(()=>[(T(),ve(en(e.iconComponent)))]),_:1},8,["class"])),[[Qt,!e.showClearBtn]]):ce("v-if",!0),e.showClearBtn&&e.clearIcon?(T(),ve(i,{key:1,class:"el-select-v2__caret el-input__icon",onClick:ht(e.handleClear,["prevent","stop"])},{default:oe(()=>[(T(),ve(en(e.clearIcon)))]),_:1},8,["onClick"])):ce("v-if",!0),e.validateState&&e.validateIcon?(T(),ve(i,{key:2,class:"el-input__icon el-input__validateIcon"},{default:oe(()=>[(T(),ve(en(e.validateIcon)))]),_:1})):ce("v-if",!0)])],2)]}),content:oe(()=>[le(l,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:oe(f=>[_e(e.$slots,"default",Bl(zl(f)))]),empty:oe(()=>[_e(e.$slots,"empty",{},()=>[W("p",Sve,Fe(e.emptyText?e.emptyText:""),1)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","append-to-body","popper-class","popper-options","onShow"])],34)),[[d,e.handleClickOutside,e.popperRef]])}var mm=We(pve,[["render",xve]]);mm.install=e=>{e.component(mm.name,mm)};const Ive=mm,Eve=Ive,Tve=me({name:"ImgPlaceholder"}),Nve={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ave=W("path",{d:"M64 896V128h896v768H64z m64-128l192-192 116.352 116.352L640 448l256 307.2V192H128v576z m224-480a96 96 0 1 1-0.064 192.064A96 96 0 0 1 352 288z"},null,-1),Dve=[Ave];function Rve(e,t,n,s,o,r){return T(),B("svg",Nve,Dve)}var _ve=We(Tve,[["render",Rve]]);const Ove=gt({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Mve=me({name:"ElSkeletonItem",components:{ImgPlaceholder:_ve},props:Ove,setup(){return{ns:Dt("skeleton")}}});function Fve(e,t,n,s,o,r){const a=re("img-placeholder");return T(),B("div",{class:q([e.ns.e("item"),e.ns.e(e.variant)])},[e.variant==="image"?(T(),ve(a,{key:0})):ce("v-if",!0)],2)}var Km=We(Mve,[["render",Fve]]);const Pve=gt({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),Lve=me({name:"ElSkeleton",components:{[Km.name]:Km},props:Pve,setup(e){const t=Dt("skeleton"),n=_(()=>e.loading),s=Kq(n,e.throttle);return{ns:t,uiLoading:s}}});function Bve(e,t,n,s,o,r){const a=re("el-skeleton-item");return e.uiLoading?(T(),B("div",Us({key:0,class:[e.ns.b(),e.ns.is("animated",e.animated)]},e.$attrs),[(T(!0),B(it,null,Yt(e.count,i=>(T(),B(it,{key:i},[e.loading?_e(e.$slots,"template",{key:i},()=>[le(a,{class:q(e.ns.is("first")),variant:"p"},null,8,["class"]),(T(!0),B(it,null,Yt(e.rows,l=>(T(),ve(a,{key:l,class:q([e.ns.e("paragraph"),e.ns.is("last",l===e.rows&&e.rows>1)]),variant:"p"},null,8,["class"]))),128))]):ce("v-if",!0)],64))),128))],16)):_e(e.$slots,"default",Bl(Us({key:1},e.$attrs)))}var zve=We(Lve,[["render",Bve]]);const Vve=Vt(zve,{SkeletonItem:Km}),Wve=Jn(Km),Hve=(e,t,n)=>{const s=L(null),o=L(!1),r=_(()=>t.value instanceof Function),a=_(()=>r.value&&t.value(e.modelValue)||e.modelValue),i=_o(()=>{n.value&&(o.value=!0)},50),l=_o(()=>{n.value&&(o.value=!1)},50);return{tooltip:s,tooltipVisible:o,formatValue:a,displayTooltip:i,hideTooltip:l}},Uve=(e,t,n)=>{const{disabled:s,min:o,max:r,step:a,showTooltip:i,precision:l,sliderSize:u,formatTooltip:c,emitChange:d,resetSize:f,updateDragging:h}=Ze("SliderProvider"),{tooltip:p,tooltipVisible:m,formatValue:g,displayTooltip:v,hideTooltip:b}=Hve(e,c,i),$=_(()=>`${(e.modelValue-o.value)/(r.value-o.value)*100}%`),y=_(()=>e.vertical?{bottom:$.value}:{left:$.value}),w=()=>{t.hovering=!0,v()},C=()=>{t.hovering=!1,t.dragging||b()},k=F=>{s.value||(F.preventDefault(),N(F),gn(window,"mousemove",A),gn(window,"touchmove",A),gn(window,"mouseup",D),gn(window,"touchend",D),gn(window,"contextmenu",D))},S=()=>{s.value||(t.newPosition=parseFloat($.value)-a.value/(r.value-o.value)*100,M(t.newPosition),d())},E=()=>{s.value||(t.newPosition=parseFloat($.value)+a.value/(r.value-o.value)*100,M(t.newPosition),d())},x=F=>{let R,P;return F.type.startsWith("touch")?(P=F.touches[0].clientY,R=F.touches[0].clientX):(P=F.clientY,R=F.clientX),{clientX:R,clientY:P}},N=F=>{t.dragging=!0,t.isClick=!0;const{clientX:R,clientY:P}=x(F);e.vertical?t.startY=P:t.startX=R,t.startPosition=parseFloat($.value),t.newPosition=t.startPosition},A=F=>{if(t.dragging){t.isClick=!1,v(),f();let R;const{clientX:P,clientY:V}=x(F);e.vertical?(t.currentY=V,R=(t.startY-t.currentY)/u.value*100):(t.currentX=P,R=(t.currentX-t.startX)/u.value*100),t.newPosition=t.startPosition+R,M(t.newPosition)}},D=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||b(),t.isClick||(M(t.newPosition),d())},0),zn(window,"mousemove",A),zn(window,"touchmove",A),zn(window,"mouseup",D),zn(window,"touchend",D),zn(window,"contextmenu",D))},M=async F=>{if(F===null||isNaN(F))return;F<0?F=0:F>100&&(F=100);const R=100/((r.value-o.value)/a.value);let V=Math.round(F/R)*R*(r.value-o.value)*.01+o.value;V=parseFloat(V.toFixed(l.value)),n(Ft,V),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await dt(),t.dragging&&v(),p.value.updatePopper()};return Oe(()=>t.dragging,F=>{h(F)}),{tooltip:p,tooltipVisible:m,showTooltip:i,wrapperStyle:y,formatValue:g,handleMouseEnter:w,handleMouseLeave:C,onButtonDown:k,onLeftKeyDown:S,onRightKeyDown:E,setPosition:M}},Gve=me({name:"ElSliderButton",components:{ElTooltip:Bo},props:{modelValue:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:{type:String,default:""}},emits:[Ft],setup(e,{emit:t}){const n=Cn({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:e.modelValue}),{tooltip:s,showTooltip:o,tooltipVisible:r,wrapperStyle:a,formatValue:i,handleMouseEnter:l,handleMouseLeave:u,onButtonDown:c,onLeftKeyDown:d,onRightKeyDown:f,setPosition:h}=Uve(e,n,t),{hovering:p,dragging:m}=so(n);return{tooltip:s,tooltipVisible:r,showTooltip:o,wrapperStyle:a,formatValue:i,handleMouseEnter:l,handleMouseLeave:u,onButtonDown:c,onLeftKeyDown:d,onRightKeyDown:f,setPosition:h,hovering:p,dragging:m}}});function Kve(e,t,n,s,o,r){const a=re("el-tooltip");return T(),B("div",{ref:"button",class:q(["el-slider__button-wrapper",{hover:e.hovering,dragging:e.dragging}]),style:nt(e.wrapperStyle),tabindex:"0",onMouseenter:t[1]||(t[1]=(...i)=>e.handleMouseEnter&&e.handleMouseEnter(...i)),onMouseleave:t[2]||(t[2]=(...i)=>e.handleMouseLeave&&e.handleMouseLeave(...i)),onMousedown:t[3]||(t[3]=(...i)=>e.onButtonDown&&e.onButtonDown(...i)),onTouchstart:t[4]||(t[4]=(...i)=>e.onButtonDown&&e.onButtonDown(...i)),onFocus:t[5]||(t[5]=(...i)=>e.handleMouseEnter&&e.handleMouseEnter(...i)),onBlur:t[6]||(t[6]=(...i)=>e.handleMouseLeave&&e.handleMouseLeave(...i)),onKeydown:[t[7]||(t[7]=Ht((...i)=>e.onLeftKeyDown&&e.onLeftKeyDown(...i),["left"])),t[8]||(t[8]=Ht((...i)=>e.onRightKeyDown&&e.onRightKeyDown(...i),["right"])),t[9]||(t[9]=Ht(ht((...i)=>e.onLeftKeyDown&&e.onLeftKeyDown(...i),["prevent"]),["down"])),t[10]||(t[10]=Ht(ht((...i)=>e.onRightKeyDown&&e.onRightKeyDown(...i),["prevent"]),["up"]))]},[le(a,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[0]||(t[0]=i=>e.tooltipVisible=i),placement:"top","stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!e.showTooltip,persistent:""},{content:oe(()=>[W("span",null,Fe(e.formatValue),1)]),default:oe(()=>[W("div",{class:q(["el-slider__button",{hover:e.hovering,dragging:e.dragging}])},null,2)]),_:1},8,["visible","popper-class","disabled"])],38)}var jve=We(Gve,[["render",Kve]]);const qve=me({name:"ElMarker",props:{mark:{type:[String,Object],default:()=>{}}},setup(e){return{label:_(()=>typeof e.mark=="string"?e.mark:e.mark.label)}},render(){var e;return He("div",{class:"el-slider__marks-text",style:(e=this.mark)==null?void 0:e.style},this.label)}}),Xve=e=>_(()=>e.marks?Object.keys(e.marks).map(parseFloat).sort((n,s)=>n-s).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),Yve=(e,t,n)=>{const s=Ze(Lo,{}),o=Ze(oa,{}),r=uo(null),a=L(null),i=L(null),l={firstButton:a,secondButton:i},u=_(()=>e.disabled||s.disabled||!1),c=_(()=>Math.min(t.firstValue,t.secondValue)),d=_(()=>Math.max(t.firstValue,t.secondValue)),f=_(()=>e.range?`${100*(d.value-c.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),h=_(()=>e.range?`${100*(c.value-e.min)/(e.max-e.min)}%`:"0%"),p=_(()=>e.vertical?{height:e.height}:{}),m=_(()=>e.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),g=()=>{r.value&&(t.sliderSize=r.value[`client${e.vertical?"Height":"Width"}`])},v=k=>{const S=e.min+k*(e.max-e.min)/100;if(!e.range){a.value.setPosition(k);return}let E;Math.abs(c.value-S)<Math.abs(d.value-S)?E=t.firstValue<t.secondValue?"firstButton":"secondButton":E=t.firstValue>t.secondValue?"firstButton":"secondButton",l[E].value.setPosition(k)},b=k=>{t.firstValue=k,y(e.range?[c.value,d.value]:k)},$=k=>{t.secondValue=k,e.range&&y([c.value,d.value])},y=k=>{n(Ft,k),n(Ii,k)},w=async()=>{await dt(),n(Ms,e.range?[c.value,d.value]:e.modelValue)};return{elFormItem:o,slider:r,firstButton:a,secondButton:i,sliderDisabled:u,minValue:c,maxValue:d,runwayStyle:p,barStyle:m,resetSize:g,setPosition:v,emitChange:w,onSliderClick:k=>{if(!(u.value||t.dragging)){if(g(),e.vertical){const S=r.value.getBoundingClientRect().bottom;v((S-k.clientY)/t.sliderSize*100)}else{const S=r.value.getBoundingClientRect().left;v((k.clientX-S)/t.sliderSize*100)}w()}},setFirstValue:b,setSecondValue:$}},Zve=(e,t,n,s)=>({stops:_(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const a=(e.max-e.min)/e.step,i=100*e.step/(e.max-e.min),l=Array.from({length:a-1}).map((u,c)=>(c+1)*i);return e.range?l.filter(u=>u<100*(n.value-e.min)/(e.max-e.min)||u>100*(s.value-e.min)/(e.max-e.min)):l.filter(u=>u>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}),Jve=me({name:"ElSlider",components:{ElInputNumber:z_,SliderButton:jve,SliderMarker:qve},props:{modelValue:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},size:{type:String,validator:Oo},inputSize:{type:String,validator:Oo},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Function,default:void 0},disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String,default:""},debounce:{type:Number,default:300},label:{type:String,default:void 0},tooltipClass:{type:String,default:void 0},marks:Object},emits:[Ft,Ms,Ii],setup(e,{emit:t}){const n=Cn({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:s,slider:o,firstButton:r,secondButton:a,sliderDisabled:i,minValue:l,maxValue:u,runwayStyle:c,barStyle:d,resetSize:f,emitChange:h,onSliderClick:p,setFirstValue:m,setSecondValue:g}=Yve(e,n,t),{stops:v,getStopStyle:b}=Zve(e,n,l,u),$=ds(),y=_(()=>e.inputSize||$.value),w="el-slider",C=_(()=>[w,`${w}--${$.value}`,e.vertical?"is-vertical":"",e.showInput?"el-slider--with-input":""]),k=Xve(e);Qve(e,n,l,u,t,s);const S=_(()=>{const R=[e.min,e.max,e.step].map(P=>{const V=`${P}`.split(".")[1];return V?V.length:0});return Math.max.apply(null,R)}),{sliderWrapper:E}=e0e(e,n,f),{firstValue:x,secondValue:N,oldValue:A,dragging:D,sliderSize:M}=so(n),F=R=>{n.dragging=R};return zt("SliderProvider",Ut(ut({},so(e)),{sliderSize:M,disabled:i,precision:S,emitChange:h,resetSize:f,updateDragging:F})),{firstValue:x,secondValue:N,oldValue:A,dragging:D,sliderSize:M,slider:o,firstButton:r,secondButton:a,sliderDisabled:i,runwayStyle:c,barStyle:d,emitChange:h,onSliderClick:p,getStopStyle:b,setFirstValue:m,setSecondValue:g,stops:v,markList:k,sliderWrapper:E,sliderWrapperSize:$,sliderInputSize:y,sliderKls:C}}}),Qve=(e,t,n,s,o,r)=>{const a=u=>{o(Ft,u),o(Ii,u)},i=()=>e.range?![n.value,s.value].every((u,c)=>u===t.oldValue[c]):e.modelValue!==t.oldValue,l=()=>{var u,c;if(e.min>e.max){oo("Slider","min should not be greater than max.");return}const d=e.modelValue;e.range&&Array.isArray(d)?d[1]<e.min?a([e.min,e.min]):d[0]>e.max?a([e.max,e.max]):d[0]<e.min?a([e.min,d[1]]):d[1]>e.max?a([d[0],e.max]):(t.firstValue=d[0],t.secondValue=d[1],i()&&((u=r.validate)==null||u.call(r,"change"),t.oldValue=d.slice())):!e.range&&typeof d=="number"&&!isNaN(d)&&(d<e.min?a(e.min):d>e.max?a(e.max):(t.firstValue=d,i()&&((c=r.validate)==null||c.call(r,"change"),t.oldValue=d)))};l(),Oe(()=>t.dragging,u=>{u||l()}),Oe(()=>e.modelValue,(u,c)=>{t.dragging||Array.isArray(u)&&Array.isArray(c)&&u.every((d,f)=>d===c[f])||l()}),Oe(()=>[e.min,e.max],()=>{l()})},e0e=(e,t,n)=>{const s=L(null);return Mt(async()=>{let o;e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue],o=`${t.firstValue}-${t.secondValue}`):(typeof e.modelValue!="number"||isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue,o=t.firstValue),s.value.setAttribute("aria-valuetext",o),s.value.setAttribute("aria-label",e.label?e.label:`slider between ${e.min} and ${e.max}`),gn(window,"resize",n),await dt(),n()}),os(()=>{zn(window,"resize",n)}),{sliderWrapper:s}},t0e=["aria-valuemin","aria-valuemax","aria-orientation","aria-disabled"],n0e={key:1},s0e={class:"el-slider__marks"};function o0e(e,t,n,s,o,r){const a=re("slider-button"),i=re("slider-marker"),l=re("el-input-number");return T(),B("div",{ref:"sliderWrapper",class:q(e.sliderKls),role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled},[W("div",{ref:"slider",class:q(["el-slider__runway",{"show-input":e.showInput&&!e.range,disabled:e.sliderDisabled}]),style:nt(e.runwayStyle),onClick:t[0]||(t[0]=(...u)=>e.onSliderClick&&e.onSliderClick(...u))},[W("div",{class:"el-slider__bar",style:nt(e.barStyle)},null,4),le(a,{ref:"firstButton","model-value":e.firstValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setFirstValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"]),e.range?(T(),ve(a,{key:0,ref:"secondButton","model-value":e.secondValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setSecondValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"])):ce("v-if",!0),e.showStops?(T(),B("div",n0e,[(T(!0),B(it,null,Yt(e.stops,(u,c)=>(T(),B("div",{key:c,class:"el-slider__stop",style:nt(e.getStopStyle(u))},null,4))),128))])):ce("v-if",!0),e.markList.length>0?(T(),B(it,{key:2},[W("div",null,[(T(!0),B(it,null,Yt(e.markList,(u,c)=>(T(),B("div",{key:c,style:nt(e.getStopStyle(u.position)),class:"el-slider__stop el-slider__marks-stop"},null,4))),128))]),W("div",s0e,[(T(!0),B(it,null,Yt(e.markList,(u,c)=>(T(),ve(i,{key:c,mark:u.mark,style:nt(e.getStopStyle(u.position))},null,8,["mark","style"]))),128))])],64)):ce("v-if",!0)],6),e.showInput&&!e.range?(T(),ve(l,{key:0,ref:"input","model-value":e.firstValue,class:"el-slider__input",step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.sliderInputSize,"onUpdate:modelValue":e.setFirstValue,onChange:e.emitChange},null,8,["model-value","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):ce("v-if",!0)],10,t0e)}var gm=We(Jve,[["render",o0e]]);gm.install=e=>{e.component(gm.name,gm)};const r0e=gm,a0e=r0e,i0e=gt({prefixCls:{type:String,default:"el-space"}}),l0e=me({props:i0e,setup(e){return{classes:_(()=>[`${e.prefixCls}__item`])}}});function u0e(e,t,n,s,o,r){return T(),B("div",{class:q(e.classes)},[_e(e.$slots,"default")],2)}var CE=We(l0e,[["render",u0e]]);const kE={small:8,default:12,large:16};function c0e(e){const t=_(()=>["el-space",`el-space--${e.direction}`,e.class]),n=L(0),s=L(0),o=_(()=>{const a=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${s.value}px`}:{},i={alignItems:e.alignment};return[a,i,e.style]}),r=_(()=>{const a={paddingBottom:`${s.value}px`,marginRight:`${n.value}px`},i=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[a,i]});return Ba(()=>{const{size:a="small",wrap:i,direction:l,fill:u}=e;if(Array.isArray(a)){const[c=0,d=0]=a;n.value=c,s.value=d}else{let c;wn(a)?c=a:c=kE[a]||kE.small,(i||u)&&l==="horizontal"?n.value=s.value=c:l==="horizontal"?(n.value=c,s.value=0):(s.value=c,n.value=0)}}),{classes:t,containerStyle:o,itemStyle:r}}const d0e=gt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Je([String,Object,Array]),default:""},style:{type:Je([String,Array,Object]),default:""},alignment:{type:Je(String),default:"center"},prefixCls:{type:String},spacer:{type:Je([Object,String,Number,Array]),default:null,validator:e=>bs(e)||wn(e)||Xt(e)},wrap:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:_w,validator:e=>wn(e)||Nt(e)&&e.length===2&&e.every(t=>wn(t))}});var f0e=me({name:"ElSpace",props:d0e,setup(e,{slots:t}){const{classes:n,containerStyle:s,itemStyle:o}=c0e(e);return()=>{var r;const{spacer:a,prefixCls:i,direction:l}=e,u=_e(t,"default",{key:0},()=>[]);if(((r=u.children)!=null?r:[]).length===0)return null;if(Nt(u.children)){let c=[];if(u.children.forEach((d,f)=>{C_(d)?Nt(d.children)&&d.children.forEach((h,p)=>{c.push(le(CE,{style:o.value,prefixCls:i,key:`nested-${p}`},{default:()=>[h]},cr.PROPS|cr.STYLE,["style","prefixCls"]))}):vce(d)&&c.push(le(CE,{style:o.value,prefixCls:i,key:`LoopKey${f}`},{default:()=>[d]},cr.PROPS|cr.STYLE,["style","prefixCls"]))}),a){const d=c.length-1;c=c.reduce((f,h,p)=>{const m=[...f,h];return p!==d&&m.push(le("span",{style:[o.value,l==="vertical"?"width: 100%":null],key:p},[bs(a)?a:jt(a,cr.TEXT)],cr.STYLE)),m},[])}return le("div",{class:n.value,style:s.value},c,cr.STYLE|cr.CLASS)}return u.children}}});const h0e=Vt(f0e),p0e=me({name:"ElSteps",props:{space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},alignCenter:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},finishStatus:{type:String,default:"finish",validator:e=>["wait","process","finish","error","success"].includes(e)},processStatus:{type:String,default:"process",validator:e=>["wait","process","finish","error","success"].includes(e)}},emits:[Ms],setup(e,{emit:t}){const n=L([]);return Oe(n,()=>{n.value.forEach((s,o)=>{s.setIndex(o)})}),zt("ElSteps",{props:e,steps:n}),Oe(()=>e.active,(s,o)=>{t(Ms,s,o)}),{steps:n}}});function m0e(e,t,n,s,o,r){return T(),B("div",{class:q(["el-steps",e.simple?"el-steps--simple":`el-steps--${e.direction}`])},[_e(e.$slots,"default")],2)}var g0e=We(p0e,[["render",m0e]]);const v0e=me({name:"ElStep",components:{ElIcon:_t,Close:Zr,Check:lc},props:{title:{type:String,default:""},icon:{type:[String,Object],default:""},description:{type:String,default:""},status:{type:String,default:"",validator:e=>["","wait","process","finish","error","success"].includes(e)}},setup(e){const t=L(-1),n=L({}),s=L(""),o=Ze("ElSteps"),r=Lt();Mt(()=>{Oe([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([$])=>{v($)},{immediate:!0})}),os(()=>{o.steps.value=o.steps.value.filter($=>$.uid!==r.uid)});const a=_(()=>e.status||s.value),i=_(()=>{const $=o.steps.value[t.value-1];return $?$.currentStatus:"wait"}),l=_(()=>o.props.alignCenter),u=_(()=>o.props.direction==="vertical"),c=_(()=>o.props.simple),d=_(()=>o.steps.value.length),f=_(()=>{var $;return(($=o.steps.value[d.value-1])==null?void 0:$.uid)===r.uid}),h=_(()=>c.value?"":o.props.space),p=_(()=>{const $={flexBasis:typeof h.value=="number"?`${h.value}px`:h.value?h.value:`${100/(d.value-(l.value?0:1))}%`};return u.value||f.value&&($.maxWidth=`${100/d.value}%`),$}),m=$=>{t.value=$},g=$=>{let y=100;const w={};w.transitionDelay=`${150*t.value}ms`,$===o.props.processStatus?y=0:$==="wait"&&(y=0,w.transitionDelay=`${-150*t.value}ms`),w.borderWidth=y&&!c.value?"1px":0,w[o.props.direction==="vertical"?"height":"width"]=`${y}%`,n.value=w},v=$=>{$>t.value?s.value=o.props.finishStatus:$===t.value&&i.value!=="error"?s.value=o.props.processStatus:s.value="wait";const y=o.steps.value[d.value-1];y&&y.calcProgress(s.value)},b=Cn({uid:_(()=>r.uid),currentStatus:a,setIndex:m,calcProgress:g});return o.steps.value=[...o.steps.value,b],{index:t,lineStyle:n,currentStatus:a,isCenter:l,isVertical:u,isSimple:c,isLast:f,space:h,style:p,parent:o,setIndex:m,calcProgress:g,updateStatus:v}}}),b0e={key:0,class:"el-step__line"},y0e={key:1,class:"el-step__icon-inner"},w0e={class:"el-step__main"},$0e={key:0,class:"el-step__arrow"};function C0e(e,t,n,s,o,r){const a=re("el-icon"),i=re("check"),l=re("close");return T(),B("div",{style:nt(e.style),class:q(["el-step",e.isSimple?"is-simple":`is-${e.parent.props.direction}`,e.isLast&&!e.space&&!e.isCenter&&"is-flex",e.isCenter&&!e.isVertical&&!e.isSimple&&"is-center"])},[ce(" icon & line "),W("div",{class:q(["el-step__head",`is-${e.currentStatus}`])},[e.isSimple?ce("v-if",!0):(T(),B("div",b0e,[W("i",{class:"el-step__line-inner",style:nt(e.lineStyle)},null,4)])),W("div",{class:q(["el-step__icon",`is-${e.icon?"icon":"text"}`])},[e.currentStatus!=="success"&&e.currentStatus!=="error"?_e(e.$slots,"icon",{key:0},()=>[e.icon?(T(),ve(a,{key:0,class:"el-step__icon-inner"},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1})):ce("v-if",!0),!e.icon&&!e.isSimple?(T(),B("div",y0e,Fe(e.index+1),1)):ce("v-if",!0)]):(T(),ve(a,{key:1,class:"el-step__icon-inner is-status"},{default:oe(()=>[e.currentStatus==="success"?(T(),ve(i,{key:0})):(T(),ve(l,{key:1}))]),_:1}))],2)],2),ce(" title & description "),W("div",w0e,[W("div",{class:q(["el-step__title",`is-${e.currentStatus}`])},[_e(e.$slots,"title",{},()=>[jt(Fe(e.title),1)])],2),e.isSimple?(T(),B("div",$0e)):(T(),B("div",{key:1,class:q(["el-step__description",`is-${e.currentStatus}`])},[_e(e.$slots,"description",{},()=>[jt(Fe(e.description),1)])],2))])],6)}var u3=We(v0e,[["render",C0e]]);const k0e=Vt(g0e,{Step:u3}),S0e=Jn(u3),x0e=gt({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:Je([String,Object,Function]),default:""},inactiveIcon:{type:Je([String,Object,Function]),default:""},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:Je(Function)},size:{type:String,validator:Oo}}),I0e={[Ft]:e=>Gr(e)||Xt(e)||wn(e),[Ms]:e=>Gr(e)||Xt(e)||wn(e),[Ii]:e=>Gr(e)||Xt(e)||wn(e)},SE="ElSwitch",E0e=me({name:SE,components:{ElIcon:_t,Loading:Xa},props:x0e,emits:I0e,setup(e,{emit:t}){const{formItem:n}=zc(),s=Mf(_(()=>e.loading)),o=Dt("switch"),r=ds(),a=L(e.modelValue!==!1),i=L(),l=L(),u=_(()=>[o.b(),o.m(r.value),o.is("disabled",s.value),o.is("checked",d.value)]);Oe(()=>e.modelValue,()=>{a.value=!0}),Oe(()=>e.value,()=>{a.value=!1});const c=_(()=>a.value?e.modelValue:e.value),d=_(()=>c.value===e.activeValue);[e.activeValue,e.inactiveValue].includes(c.value)||(t(Ft,e.inactiveValue),t(Ms,e.inactiveValue),t(Ii,e.inactiveValue)),Oe(d,()=>{var g;i.value.checked=d.value,(e.activeColor||e.inactiveColor)&&p(),e.validateEvent&&((g=n==null?void 0:n.validate)==null||g.call(n,"change"))});const f=()=>{const g=d.value?e.inactiveValue:e.activeValue;t(Ft,g),t(Ms,g),t(Ii,g),dt(()=>{i.value.checked=d.value})},h=()=>{if(s.value)return;const{beforeChange:g}=e;if(!g){f();return}const v=g();[sc(v),Gr(v)].some($=>$)||oo(SE,"beforeChange must return type `Promise<boolean>` or `boolean`"),sc(v)?v.then($=>{$&&f()}).catch($=>{}):v&&f()},p=()=>{const g=d.value?e.activeColor:e.inactiveColor,v=l.value;e.borderColor?v.style.borderColor=e.borderColor:e.borderColor||(v.style.borderColor=g),v.style.backgroundColor=g,v.children[0].style.color=g},m=()=>{var g,v;(v=(g=i.value)==null?void 0:g.focus)==null||v.call(g)};return Mt(()=>{(e.activeColor||e.inactiveColor||e.borderColor)&&p(),i.value.checked=d.value}),{ns:o,input:i,core:l,switchDisabled:s,checked:d,switchKls:u,handleChange:f,switchValue:h,focus:m}}}),T0e=["aria-checked","aria-disabled"],N0e=["id","name","true-value","false-value","disabled"],A0e=["aria-hidden"],D0e=["aria-hidden"],R0e=["aria-hidden"],_0e=["aria-hidden"];function O0e(e,t,n,s,o,r){const a=re("el-icon"),i=re("loading");return T(),B("div",{class:q(e.switchKls),role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled,onClick:t[2]||(t[2]=ht((...l)=>e.switchValue&&e.switchValue(...l),["prevent"]))},[W("input",{id:e.id,ref:"input",class:q(e.ns.e("input")),type:"checkbox",name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled,onChange:t[0]||(t[0]=(...l)=>e.handleChange&&e.handleChange(...l)),onKeydown:t[1]||(t[1]=Ht((...l)=>e.switchValue&&e.switchValue(...l),["enter"]))},null,42,N0e),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(T(),B("span",{key:0,class:q([e.ns.e("label"),e.ns.em("label","left"),e.ns.is("active",!e.checked)])},[e.inactiveIcon?(T(),ve(a,{key:0},{default:oe(()=>[(T(),ve(en(e.inactiveIcon)))]),_:1})):ce("v-if",!0),!e.inactiveIcon&&e.inactiveText?(T(),B("span",{key:1,"aria-hidden":e.checked},Fe(e.inactiveText),9,A0e)):ce("v-if",!0)],2)):ce("v-if",!0),W("span",{ref:"core",class:q(e.ns.e("core")),style:nt({width:(e.width||40)+"px"})},[e.inlinePrompt?(T(),B("div",{key:0,class:q(e.ns.e("inner"))},[e.activeIcon||e.inactiveIcon?(T(),B(it,{key:0},[e.activeIcon?(T(),ve(a,{key:0,class:q([e.ns.is("icon"),e.checked?e.ns.is("show"):e.ns.is("hide")])},{default:oe(()=>[(T(),ve(en(e.activeIcon)))]),_:1},8,["class"])):ce("v-if",!0),e.inactiveIcon?(T(),ve(a,{key:1,class:q([e.ns.is("icon"),e.checked?e.ns.is("hide"):e.ns.is("show")])},{default:oe(()=>[(T(),ve(en(e.inactiveIcon)))]),_:1},8,["class"])):ce("v-if",!0)],64)):e.activeText||e.inactiveIcon?(T(),B(it,{key:1},[e.activeText?(T(),B("span",{key:0,class:q([e.ns.is("text"),e.checked?e.ns.is("show"):e.ns.is("hide")]),"aria-hidden":!e.checked},Fe(e.activeText.substr(0,1)),11,D0e)):ce("v-if",!0),e.inactiveText?(T(),B("span",{key:1,class:q([e.ns.is("text"),e.checked?e.ns.is("hide"):e.ns.is("show")]),"aria-hidden":e.checked},Fe(e.inactiveText.substr(0,1)),11,R0e)):ce("v-if",!0)],64)):ce("v-if",!0)],2)):ce("v-if",!0),W("div",{class:q(e.ns.e("action"))},[e.loading?(T(),ve(a,{key:0,class:q(e.ns.is("loading"))},{default:oe(()=>[le(i)]),_:1},8,["class"])):ce("v-if",!0)],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(T(),B("span",{key:1,class:q([e.ns.e("label"),e.ns.em("label","right"),e.ns.is("active",e.checked)])},[e.activeIcon?(T(),ve(a,{key:0},{default:oe(()=>[(T(),ve(en(e.activeIcon)))]),_:1})):ce("v-if",!0),!e.activeIcon&&e.activeText?(T(),B("span",{key:1,"aria-hidden":!e.checked},Fe(e.activeText),9,_0e)):ce("v-if",!0)],2)):ce("v-if",!0)],10,T0e)}var M0e=We(E0e,[["render",O0e]]);const F0e=Vt(M0e),Fb=function(e){let t=e.target;for(;t&&t.tagName.toUpperCase()!=="HTML";){if(t.tagName.toUpperCase()==="TD")return t;t=t.parentNode}return null},xE=function(e){return e!==null&&typeof e=="object"},P0e=function(e,t,n,s,o){if(!t&&!s&&(!o||Array.isArray(o)&&!o.length))return e;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const r=s?null:function(i,l){return o?(Array.isArray(o)||(o=[o]),o.map(function(u){return typeof u=="string"?Cs(i,u):u(i,l,e)})):(t!=="$key"&&xE(i)&&"$value"in i&&(i=i.$value),[xE(i)?Cs(i,t):i])},a=function(i,l){if(s)return s(i.value,l.value);for(let u=0,c=i.key.length;u<c;u++){if(i.key[u]<l.key[u])return-1;if(i.key[u]>l.key[u])return 1}return 0};return e.map(function(i,l){return{value:i,index:l,key:r?r(i,l):null}}).sort(function(i,l){let u=a(i,l);return u||(u=i.index-l.index),u*+n}).map(i=>i.value)},c3=function(e,t){let n=null;return e.columns.forEach(function(s){s.id===t&&(n=s)}),n},L0e=function(e,t){let n=null;for(let s=0;s<e.columns.length;s++){const o=e.columns[s];if(o.columnKey===t){n=o;break}}return n},IE=function(e,t,n){const s=(t.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return s?c3(e,s[0]):null},Zs=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof t=="string"){if(t.indexOf(".")<0)return`${e[t]}`;const n=t.split(".");let s=e;for(let o=0;o<n.length;o++)s=s[n[o]];return`${s}`}else if(typeof t=="function")return t.call(null,e)},xl=function(e,t){const n={};return(e||[]).forEach((s,o)=>{n[Zs(s,t)]={row:s,index:o}}),n};function B0e(e,t){const n={};let s;for(s in e)n[s]=e[s];for(s in t)if(Wt(t,s)){const o=t[s];typeof o!="undefined"&&(n[s]=o)}return n}function C$(e){return e===""||e!==void 0&&(e=parseInt(e,10),Number.isNaN(e)&&(e="")),e}function d3(e){return e===""||e!==void 0&&(e=C$(e),Number.isNaN(e)&&(e=80)),e}function vm(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?parseInt(e,10):e:null}function z0e(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function bm(e,t,n){let s=!1;const o=e.indexOf(t),r=o!==-1,a=()=>{e.push(t),s=!0},i=()=>{e.splice(o,1),s=!0};return typeof n=="boolean"?n&&!r?a():!n&&r&&i():r?i():a(),s}function V0e(e,t,n="children",s="hasChildren"){const o=a=>!(Array.isArray(a)&&a.length);function r(a,i,l){t(a,i,l),i.forEach(u=>{if(u[s]){t(u,null,l+1);return}const c=u[n];o(c)||r(u,c,l+1)})}e.forEach(a=>{if(a[s]){t(a,null,0);return}const i=a[n];o(i)||r(a,i,0)})}let jm;function W0e(e,t,n,s){function o(){const c=s==="light",d=document.createElement("div");return d.className=`el-popper ${c?"is-light":"is-dark"}`,d.innerHTML=t,d.style.zIndex=String(is.nextZIndex()),document.body.appendChild(d),d}function r(){const c=document.createElement("div");return c.className="el-popper__arrow",c}function a(){i&&i.update()}jm=function c(){try{i&&i.destroy(),l&&document.body.removeChild(l),zn(e,"mouseenter",a),zn(e,"mouseleave",c)}catch{}};let i=null;const l=o(),u=r();return l.appendChild(u),i=yR(e,l,ut({modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"arrow",options:{element:u,padding:10}}]},n)),gn(e,"mouseenter",a),gn(e,"mouseleave",jm),i}const f3=(e,t,n,s)=>{let o=0,r=e;if(s){for(let l=0;l<e;l++)o+=s[l].colSpan;r=o+s[e].colSpan-1}else o=e;let a;const i=n.states.columns;switch(t){case"left":r<n.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":o>=i.value.length-n.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:r<n.states.fixedLeafColumnsLength.value?a="left":o>=i.value.length-n.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:o,after:r}:{}},k$=(e,t,n,s,o)=>{const r=[],{direction:a,start:i}=f3(t,n,s,o);if(a){const l=a==="left";r.push(`${e}-fixed-column--${a}`),l&&i===s.states.fixedLeafColumnsLength.value-1?r.push("is-last-column"):!l&&i===s.states.columns.value.length-s.states.rightFixedLeafColumnsLength.value&&r.push("is-first-column")}return r};function EE(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const S$=(e,t,n,s)=>{const{direction:o,start:r=0}=f3(e,t,n,s);if(!o)return;const a={},i=o==="left",l=n.states.columns.value;return i?a.left=l.slice(0,e).reduce(EE,0):a.right=l.slice(r+1).reverse().reduce(EE,0),a},gc=(e,t)=>{!e||Number.isNaN(e[t])||(e[t]=`${e[t]}px`)};function H0e(e){const t=Lt(),n=L(!1),s=L([]);return{updateExpandRows:()=>{const l=e.data.value||[],u=e.rowKey.value;if(n.value)s.value=l.slice();else if(u){const c=xl(s.value,u);s.value=l.reduce((d,f)=>{const h=Zs(f,u);return c[h]&&d.push(f),d},[])}else s.value=[]},toggleRowExpansion:(l,u)=>{bm(s.value,l,u)&&(t.emit("expand-change",l,s.value.slice()),t.store.scheduleLayout())},setExpandRowKeys:l=>{t.store.assertRowKey();const u=e.data.value||[],c=e.rowKey.value,d=xl(u,c);s.value=l.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:l=>{const u=e.rowKey.value;return u?!!xl(s.value,u)[Zs(l,u)]:s.value.indexOf(l)!==-1},states:{expandRows:s,defaultExpandAll:n}}}function U0e(e){const t=Lt(),n=L(null),s=L(null),o=u=>{t.store.assertRowKey(),n.value=u,a(u)},r=()=>{n.value=null},a=u=>{const{data:c,rowKey:d}=e;let f=null;d.value&&(f=(je(c)||[]).find(h=>Zs(h,d.value)===u)),s.value=f};return{setCurrentRowKey:o,restoreCurrentRowKey:r,setCurrentRowByKey:a,updateCurrentRow:u=>{const c=s.value;if(u&&u!==c){s.value=u,t.emit("current-change",s.value,c);return}!u&&c&&(s.value=null,t.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=e.rowKey.value,c=e.data.value||[],d=s.value;if(c.indexOf(d)===-1&&d){if(u){const f=Zs(d,u);a(f)}else s.value=null;s.value===null&&t.emit("current-change",null,d)}else n.value&&(a(n.value),r())},states:{_currentRowKey:n,currentRow:s}}}function G0e(e){const t=L([]),n=L({}),s=L(16),o=L(!1),r=L({}),a=L("hasChildren"),i=L("children"),l=Lt(),u=_(()=>{if(!e.rowKey.value)return{};const v=e.data.value||[];return d(v)}),c=_(()=>{const v=e.rowKey.value,b=Object.keys(r.value),$={};return b.length&&b.forEach(y=>{if(r.value[y].length){const w={children:[]};r.value[y].forEach(C=>{const k=Zs(C,v);w.children.push(k),C[a.value]&&!$[k]&&($[k]={children:[]})}),$[y]=w}}),$}),d=v=>{const b=e.rowKey.value,$={};return V0e(v,(y,w,C)=>{const k=Zs(y,b);Array.isArray(w)?$[k]={children:w.map(S=>Zs(S,b)),level:C}:o.value&&($[k]={children:[],lazy:!0,level:C})},i.value,a.value),$},f=(v=!1,b=($=>($=l.store)==null?void 0:$.states.defaultExpandAll.value)())=>{var $;const y=u.value,w=c.value,C=Object.keys(y),k={};if(C.length){const S=je(n),E=[],x=(A,D)=>{if(v)return t.value?b||t.value.includes(D):!!(b||(A==null?void 0:A.expanded));{const M=b||t.value&&t.value.includes(D);return!!((A==null?void 0:A.expanded)||M)}};C.forEach(A=>{const D=S[A],M=ut({},y[A]);if(M.expanded=x(D,A),M.lazy){const{loaded:F=!1,loading:R=!1}=D||{};M.loaded=!!F,M.loading=!!R,E.push(A)}k[A]=M});const N=Object.keys(w);o.value&&N.length&&E.length&&N.forEach(A=>{const D=S[A],M=w[A].children;if(E.indexOf(A)!==-1){if(k[A].children.length!==0)throw new Error("[ElTable]children must be an empty array.");k[A].children=M}else{const{loaded:F=!1,loading:R=!1}=D||{};k[A]={lazy:!0,loaded:!!F,loading:!!R,expanded:x(D,A),children:M,level:""}}})}n.value=k,($=l.store)==null||$.updateTableScrollY()};Oe(()=>t.value,()=>{f(!0)}),Oe(()=>u.value,()=>{f()}),Oe(()=>c.value,()=>{f()});const h=v=>{t.value=v,f()},p=(v,b)=>{l.store.assertRowKey();const $=e.rowKey.value,y=Zs(v,$),w=y&&n.value[y];if(y&&w&&"expanded"in w){const C=w.expanded;b=typeof b=="undefined"?!w.expanded:b,n.value[y].expanded=b,C!==b&&l.emit("expand-change",v,b),l.store.updateTableScrollY()}},m=v=>{l.store.assertRowKey();const b=e.rowKey.value,$=Zs(v,b),y=n.value[$];o.value&&y&&"loaded"in y&&!y.loaded?g(v,$,y):p(v,void 0)},g=(v,b,$)=>{const{load:y}=l.props;y&&!n.value[b].loaded&&(n.value[b].loading=!0,y(v,$,w=>{if(!Array.isArray(w))throw new Error("[ElTable] data must be an array");n.value[b].loading=!1,n.value[b].loaded=!0,n.value[b].expanded=!0,w.length&&(r.value[b]=w),l.emit("expand-change",v,!0)}))};return{loadData:g,loadOrToggle:m,toggleTreeExpansion:p,updateTreeExpandKeys:h,updateTreeData:f,normalize:d,states:{expandRowKeys:t,treeData:n,indent:s,lazy:o,lazyTreeNodeMap:r,lazyColumnIdentifier:a,childrenColumnName:i}}}const K0e=(e,t)=>{const n=t.sortingColumn;return!n||typeof n.sortable=="string"?e:P0e(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy)},ym=e=>{const t=[];return e.forEach(n=>{n.children?t.push.apply(t,ym(n.children)):t.push(n)}),t};function j0e(){var e;const t=Lt(),{size:n}=so((e=t.proxy)==null?void 0:e.$props),s=L(null),o=L([]),r=L([]),a=L(!1),i=L([]),l=L([]),u=L([]),c=L([]),d=L([]),f=L([]),h=L([]),p=L([]),m=L(0),g=L(0),v=L(0),b=L(!1),$=L([]),y=L(!1),w=L(!1),C=L(null),k=L({}),S=L(null),E=L(null),x=L(null),N=L(null),A=L(null);Oe(o,()=>t.state&&F(!1),{deep:!0});const D=()=>{if(!s.value)throw new Error("[ElTable] prop row-key is required")},M=()=>{c.value=i.value.filter(Ae=>Ae.fixed===!0||Ae.fixed==="left"),d.value=i.value.filter(Ae=>Ae.fixed==="right"),c.value.length>0&&i.value[0]&&i.value[0].type==="selection"&&!i.value[0].fixed&&(i.value[0].fixed=!0,c.value.unshift(i.value[0]));const Xe=i.value.filter(Ae=>!Ae.fixed);l.value=[].concat(c.value).concat(Xe).concat(d.value);const de=ym(Xe),Re=ym(c.value),Ke=ym(d.value);m.value=de.length,g.value=Re.length,v.value=Ke.length,u.value=[].concat(Re).concat(de).concat(Ke),a.value=c.value.length>0||d.value.length>0},F=(Xe,de=!1)=>{Xe&&M(),de?t.state.doLayout():t.state.debouncedUpdateLayout()},R=Xe=>$.value.indexOf(Xe)>-1,P=()=>{b.value=!1,$.value.length&&($.value=[],t.emit("selection-change",[]))},V=()=>{let Xe;if(s.value){Xe=[];const de=xl($.value,s.value),Re=xl(o.value,s.value);for(const Ke in de)Wt(de,Ke)&&!Re[Ke]&&Xe.push(de[Ke].row)}else Xe=$.value.filter(de=>o.value.indexOf(de)===-1);if(Xe.length){const de=$.value.filter(Re=>Xe.indexOf(Re)===-1);$.value=de,t.emit("selection-change",de.slice())}},G=(Xe,de=void 0,Re=!0)=>{if(bm($.value,Xe,de)){const Ae=($.value||[]).slice();Re&&t.emit("select",Ae,Xe),t.emit("selection-change",Ae)}},se=()=>{var Xe,de;const Re=w.value?!b.value:!(b.value||$.value.length);b.value=Re;let Ke=!1,Ae=0;const ct=(de=(Xe=t==null?void 0:t.store)==null?void 0:Xe.states)==null?void 0:de.rowKey.value;o.value.forEach((wt,sn)=>{const ln=sn+Ae;C.value?C.value.call(null,wt,ln)&&bm($.value,wt,Re)&&(Ke=!0):bm($.value,wt,Re)&&(Ke=!0),Ae+=pe(Zs(wt,ct))}),Ke&&t.emit("selection-change",$.value?$.value.slice():[]),t.emit("select-all",$.value)},ke=()=>{const Xe=xl($.value,s.value);o.value.forEach(de=>{const Re=Zs(de,s.value),Ke=Xe[Re];Ke&&($.value[Ke.index]=de)})},te=()=>{var Xe,de,Re;if(((Xe=o.value)==null?void 0:Xe.length)===0){b.value=!1;return}let Ke;s.value&&(Ke=xl($.value,s.value));const Ae=function(ln){return Ke?!!Ke[Zs(ln,s.value)]:$.value.indexOf(ln)!==-1};let ct=!0,wt=0,sn=0;for(let ln=0,Kt=(o.value||[]).length;ln<Kt;ln++){const _n=(Re=(de=t==null?void 0:t.store)==null?void 0:de.states)==null?void 0:Re.rowKey.value,Vo=ln+sn,Or=o.value[ln],ze=C.value&&C.value.call(null,Or,Vo);if(Ae(Or))wt++;else if(!C.value||ze){ct=!1;break}sn+=pe(Zs(Or,_n))}wt===0&&(ct=!1),b.value=ct},pe=Xe=>{var de;if(!t||!t.store)return 0;const{treeData:Re}=t.store.states;let Ke=0;const Ae=(de=Re.value[Xe])==null?void 0:de.children;return Ae&&(Ke+=Ae.length,Ae.forEach(ct=>{Ke+=pe(ct)})),Ke},ae=(Xe,de)=>{Array.isArray(Xe)||(Xe=[Xe]);const Re={};return Xe.forEach(Ke=>{k.value[Ke.id]=de,Re[Ke.columnKey||Ke.id]=de}),Re},K=(Xe,de,Re)=>{E.value&&E.value!==Xe&&(E.value.order=null),E.value=Xe,x.value=de,N.value=Re},X=()=>{let Xe=je(r);Object.keys(k.value).forEach(de=>{const Re=k.value[de];if(!Re||Re.length===0)return;const Ke=c3({columns:u.value},de);Ke&&Ke.filterMethod&&(Xe=Xe.filter(Ae=>Re.some(ct=>Ke.filterMethod.call(null,ct,Ae,Ke))))}),S.value=Xe},Y=()=>{o.value=K0e(S.value,{sortingColumn:E.value,sortProp:x.value,sortOrder:N.value})},ie=(Xe=void 0)=>{Xe&&Xe.filter||X(),Y()},xe=Xe=>{const{tableHeader:de,fixedTableHeader:Re,rightFixedTableHeader:Ke}=t.refs;let Ae={};de&&(Ae=Object.assign(Ae,de.filterPanels)),Re&&(Ae=Object.assign(Ae,Re.filterPanels)),Ke&&(Ae=Object.assign(Ae,Ke.filterPanels));const ct=Object.keys(Ae);if(!!ct.length)if(typeof Xe=="string"&&(Xe=[Xe]),Array.isArray(Xe)){const wt=Xe.map(sn=>L0e({columns:u.value},sn));ct.forEach(sn=>{const ln=wt.find(Kt=>Kt.id===sn);ln&&(ln.filteredValue=[])}),t.store.commit("filterChange",{column:wt,values:[],silent:!0,multi:!0})}else ct.forEach(wt=>{const sn=u.value.find(ln=>ln.id===wt);sn&&(sn.filteredValue=[])}),k.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},Le=()=>{!E.value||(K(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Be,toggleRowExpansion:Pe,updateExpandRows:U,states:Q,isRowExpanded:H}=H0e({data:o,rowKey:s}),{updateTreeExpandKeys:ne,toggleTreeExpansion:ye,updateTreeData:J,loadOrToggle:Ne,states:Ie}=G0e({data:o,rowKey:s}),{updateCurrentRowData:fe,updateCurrentRow:Ee,setCurrentRowKey:rt,states:Ye}=U0e({data:o,rowKey:s});return{assertRowKey:D,updateColumns:M,scheduleLayout:F,isSelected:R,clearSelection:P,cleanSelection:V,toggleRowSelection:G,_toggleAllSelection:se,toggleAllSelection:null,updateSelectionByRowKey:ke,updateAllSelected:te,updateFilters:ae,updateCurrentRow:Ee,updateSort:K,execFilter:X,execSort:Y,execQuery:ie,clearFilter:xe,clearSort:Le,toggleRowExpansion:Pe,setExpandRowKeysAdapter:Xe=>{Be(Xe),ne(Xe)},setCurrentRowKey:rt,toggleRowExpansionAdapter:(Xe,de)=>{u.value.some(({type:Ke})=>Ke==="expand")?Pe(Xe,de):ye(Xe,de)},isRowExpanded:H,updateExpandRows:U,updateCurrentRowData:fe,loadOrToggle:Ne,updateTreeData:J,states:ut(ut(ut({tableSize:n,rowKey:s,data:o,_data:r,isComplex:a,_columns:i,originColumns:l,columns:u,fixedColumns:c,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,leafColumnsLength:m,fixedLeafColumnsLength:g,rightFixedLeafColumnsLength:v,isAllSelected:b,selection:$,reserveSelection:y,selectOnIndeterminate:w,selectable:C,filters:k,filteredData:S,sortingColumn:E,sortProp:x,sortOrder:N,hoverRow:A},Q),Ie),Ye)}}function o1(e,t){return e.map(n=>{var s;return n.id===t.id?t:(((s=n.children)==null?void 0:s.length)&&(n.children=o1(n.children,t)),n)})}function h3(e){e.forEach(t=>{var n,s;t.no=(n=t.getColumnIndex)==null?void 0:n.call(t),((s=t.children)==null?void 0:s.length)&&h3(t.children)}),e.sort((t,n)=>t.no-n.no)}function q0e(){const e=Lt(),t=j0e(),n=Dt("table"),s={setData(a,i){const l=je(a._data)!==i;a.data.value=i,a._data.value=i,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),je(a.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):l?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(a,i,l){const u=je(a._columns);let c=[];l?(l&&!l.children&&(l.children=[]),l.children.push(i),c=o1(u,l)):(u.push(i),c=u),h3(c),a._columns.value=c,i.type==="selection"&&(a.selectable.value=i.selectable,a.reserveSelection.value=i.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},removeColumn(a,i,l){const u=je(a._columns)||[];if(l)l.children.splice(l.children.findIndex(c=>c.id===i.id),1),l.children.length===0&&delete l.children,a._columns.value=o1(u,l);else{const c=u.indexOf(i);c>-1&&(u.splice(c,1),a._columns.value=u)}e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(a,i){const{prop:l,order:u,init:c}=i;if(l){const d=je(a.columns).find(f=>f.property===l);d&&(d.order=u,e.store.updateSort(d,l,u),e.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(a,i){const{sortingColumn:l,sortProp:u,sortOrder:c}=a;je(c)===null&&(a.sortingColumn.value=null,a.sortProp.value=null);const d={filter:!0};e.store.execQuery(d),(!i||!(i.silent||i.init))&&e.emit("sort-change",{column:je(l),prop:je(u),order:je(c)}),e.store.updateTableScrollY()},filterChange(a,i){const{column:l,values:u,silent:c}=i,d=e.store.updateFilters(l,u);e.store.execQuery(),c||e.emit("filter-change",d),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(a,i){e.store.toggleRowSelection(i),e.store.updateAllSelected()},setHoverRow(a,i){a.hoverRow.value=i},setCurrentRow(a,i){e.store.updateCurrentRow(i)}},o=function(a,...i){const l=e.store.mutations;if(l[a])l[a].apply(e,[e.store.states].concat(i));else throw new Error(`Action not found: ${a}`)},r=function(){dt(()=>e.layout.updateScrollY.apply(e.layout))};return Ut(ut({ns:n},t),{mutations:s,commit:o,updateTableScrollY:r})}const Ud={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data",["treeProps.hasChildren"]:{key:"lazyColumnIdentifier",default:"hasChildren"},["treeProps.children"]:{key:"childrenColumnName",default:"children"}};function X0e(e,t){if(!e)throw new Error("Table is required.");const n=q0e();return n.toggleAllSelection=_o(n._toggleAllSelection,10),Object.keys(Ud).forEach(s=>{p3(m3(t,s),s,n)}),Y0e(n,t),n}function Y0e(e,t){Object.keys(Ud).forEach(n=>{Oe(()=>m3(t,n),s=>{p3(s,n,e)})})}function p3(e,t,n){let s=e,o=Ud[t];typeof Ud[t]=="object"&&(o=o.key,s=s||Ud[t].default),n.states[o].value=s}function m3(e,t){if(t.includes(".")){const n=t.split(".");let s=e;return n.forEach(o=>{s=s[o]}),s}else return e[t]}class Z0e{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=L(null),this.scrollX=L(!1),this.scrollY=L(!1),this.bodyWidth=L(null),this.fixedWidth=L(null),this.rightFixedWidth=L(null),this.tableHeight=L(null),this.headerHeight=L(44),this.appendHeight=L(0),this.footerHeight=L(44),this.viewportHeight=L(null),this.bodyHeight=L(null),this.bodyScrollHeight=L(0),this.fixedBodyHeight=L(null),this.gutterWidth=0;for(const n in t)Wt(t,n)&&(rs(this[n])?this[n].value=t[n]:this[n]=t[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.bodyWrapper;if(this.table.vnode.el&&n){let s=!0;const o=this.scrollY.value;return this.bodyHeight.value===null?s=!1:s=n.scrollHeight>this.bodyHeight.value,this.scrollY.value=s,o!==s}return!1}setHeight(t,n="height"){if(!qt)return;const s=this.table.vnode.el;if(t=vm(t),this.height.value=Number(t),!s&&(t||t===0))return dt(()=>this.setHeight(t,n));typeof t=="number"?(s.style[n]=`${t}px`,this.updateElsHeight()):typeof t=="string"&&(s.style[n]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(s=>{s.isColumnGroup?t.push.apply(t,s.columns):t.push(s)}),t}updateElsHeight(){var t,n;if(!this.table.$ready)return dt(()=>this.updateElsHeight());const{headerWrapper:s,appendWrapper:o,footerWrapper:r,tableHeader:a,tableBody:i}=this.table.refs;if(this.appendHeight.value=o?o.offsetHeight:0,this.showHeader&&!s)return;const l=a?a.$el:null,u=this.headerDisplayNone(l),c=this.headerHeight.value=this.showHeader?s.offsetHeight:0;if(this.showHeader&&!u&&s.offsetWidth>0&&(this.table.store.states.columns.value||[]).length>0&&c<2)return dt(()=>this.updateElsHeight());const d=this.tableHeight.value=(n=(t=this.table)==null?void 0:t.vnode.el)==null?void 0:n.clientHeight,f=this.footerHeight.value=r?r.offsetHeight:0;this.height.value!==null&&(this.bodyHeight.value===null&&requestAnimationFrame(()=>this.updateElsHeight()),this.bodyHeight.value=d-c-f+(r?1:0),this.bodyScrollHeight.value=i==null?void 0:i.$el.scrollHeight),this.fixedBodyHeight.value=this.scrollX.value?this.bodyHeight.value-this.gutterWidth:this.bodyHeight.value,this.viewportHeight.value=this.scrollX.value?d-this.gutterWidth:d,this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let n=t;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!qt)return;const t=this.fit,n=this.table.vnode.el.clientWidth;let s=0;const o=this.getFlattenColumns(),r=o.filter(l=>typeof l.width!="number");if(o.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),r.length>0&&t){o.forEach(u=>{s+=Number(u.width||u.minWidth||80)});const l=this.scrollY.value?this.gutterWidth:0;if(s<=n-l){this.scrollX.value=!1;const u=n-l-s;if(r.length===1)r[0].realWidth=Number(r[0].minWidth||80)+u;else{const c=r.reduce((h,p)=>h+Number(p.minWidth||80),0),d=u/c;let f=0;r.forEach((h,p)=>{if(p===0)return;const m=Math.floor(Number(h.minWidth||80)*d);f+=m,h.realWidth=Number(h.minWidth||80)+m}),r[0].realWidth=Number(r[0].minWidth||80)+u-f}}else this.scrollX.value=!0,r.forEach(function(u){u.realWidth=Number(u.minWidth)});this.bodyWidth.value=Math.max(s,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else o.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),s+=l.realWidth}),this.scrollX.value=s>n,this.bodyWidth.value=s;const a=this.store.states.fixedColumns.value;if(a.length>0){let l=0;a.forEach(function(u){l+=Number(u.realWidth||u.width)}),this.fixedWidth.value=l}const i=this.store.states.rightFixedColumns.value;if(i.length>0){let l=0;i.forEach(function(u){l+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const n=this.observers.indexOf(t);n!==-1&&this.observers.splice(n,1)}notifyObservers(t){this.observers.forEach(s=>{var o,r;switch(t){case"columns":(o=s.state)==null||o.onColumnsChange(this);break;case"scrollable":(r=s.state)==null||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:J0e}=Jr,Q0e=me({name:"ElTableFilterPanel",components:{ElCheckbox:Jr,ElCheckboxGroup:J0e,ElScrollbar:Ya,ElTooltip:Bo,ElIcon:_t,ArrowDown:ou,ArrowUp:Ff},directives:{ClickOutside:Pi},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const t=Lt(),{t:n}=kn(),s=Dt("table-filter"),o=t==null?void 0:t.parent;o.filterPanels.value[e.column.id]||(o.filterPanels.value[e.column.id]=t);const r=L(!1),a=L(null),i=_(()=>e.column&&e.column.filters),l=_({get:()=>{var y;return(((y=e.column)==null?void 0:y.filteredValue)||[])[0]},set:y=>{u.value&&(typeof y!="undefined"&&y!==null?u.value.splice(0,1,y):u.value.splice(0,1))}}),u=_({get(){return e.column?e.column.filteredValue||[]:[]},set(y){e.column&&e.upDataColumn("filteredValue",y)}}),c=_(()=>e.column?e.column.filterMultiple:!0),d=y=>y.value===l.value,f=()=>{r.value=!1},h=y=>{y.stopPropagation(),r.value=!r.value},p=()=>{r.value=!1},m=()=>{b(u.value),f()},g=()=>{u.value=[],b(u.value),f()},v=y=>{l.value=y,b(typeof y!="undefined"&&y!==null?u.value:[]),f()},b=y=>{e.store.commit("filterChange",{column:e.column,values:y}),e.store.updateAllSelected()};Oe(r,y=>{e.column&&e.upDataColumn("filterOpened",y)},{immediate:!0});const $=_(()=>{var y,w;return(w=(y=a.value)==null?void 0:y.popperRef)==null?void 0:w.contentRef});return{tooltipVisible:r,multiple:c,filteredValue:u,filterValue:l,filters:i,handleConfirm:m,handleReset:g,handleSelect:v,isActive:d,t:n,ns:s,showFilterPanel:h,hideFilterPanel:p,popperPaneRef:$,tooltip:a}}}),ebe={key:0},tbe=["disabled"],nbe=["label","onClick"];function sbe(e,t,n,s,o,r){const a=re("el-checkbox"),i=re("el-checkbox-group"),l=re("el-scrollbar"),u=re("arrow-up"),c=re("arrow-down"),d=re("el-icon"),f=re("el-tooltip"),h=wo("click-outside");return T(),ve(f,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[5]||(t[5]=p=>e.tooltipVisible=p),offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,"append-to-body":"",effect:"light",pure:"","popper-class":e.ns.b(),persistent:""},{content:oe(()=>[e.multiple?(T(),B("div",ebe,[W("div",{class:q(e.ns.e("content"))},[le(l,{"wrap-class":e.ns.e("wrap")},{default:oe(()=>[le(i,{modelValue:e.filteredValue,"onUpdate:modelValue":t[0]||(t[0]=p=>e.filteredValue=p),class:q(e.ns.e("checkbox-group"))},{default:oe(()=>[(T(!0),B(it,null,Yt(e.filters,p=>(T(),ve(a,{key:p.value,label:p.value},{default:oe(()=>[jt(Fe(p.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),W("div",{class:q(e.ns.e("bottom"))},[W("button",{class:q({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:t[1]||(t[1]=(...p)=>e.handleConfirm&&e.handleConfirm(...p))},Fe(e.t("el.table.confirmFilter")),11,tbe),W("button",{type:"button",onClick:t[2]||(t[2]=(...p)=>e.handleReset&&e.handleReset(...p))},Fe(e.t("el.table.resetFilter")),1)],2)])):(T(),B("ul",{key:1,class:q(e.ns.e("list"))},[W("li",{class:q([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:t[3]||(t[3]=p=>e.handleSelect(null))},Fe(e.t("el.table.clearFilter")),3),(T(!0),B(it,null,Yt(e.filters,p=>(T(),B("li",{key:p.value,class:q([e.ns.e("list-item"),e.ns.is("active",e.isActive(p))]),label:p.value,onClick:m=>e.handleSelect(p.value)},Fe(p.text),11,nbe))),128))],2))]),default:oe(()=>[$t((T(),B("span",{class:q([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:t[4]||(t[4]=(...p)=>e.showFilterPanel&&e.showFilterPanel(...p))},[le(d,null,{default:oe(()=>[e.column.filterOpened?(T(),ve(u,{key:0})):(T(),ve(c,{key:1}))]),_:1})],2)),[[h,e.hideFilterPanel,e.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var obe=We(Q0e,[["render",sbe]]);function g3(e){const t=Lt();Af(()=>{n.value.addObserver(t)}),Mt(()=>{s(n.value),o(n.value)}),sa(()=>{s(n.value),o(n.value)}),Df(()=>{n.value.removeObserver(t)});const n=_(()=>{const r=e.layout;if(!r)throw new Error("Can not find table layout.");return r}),s=r=>{var a;const i=((a=e.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col"))||[];if(!i.length)return;const l=r.getFlattenColumns(),u={};l.forEach(c=>{u[c.id]=c});for(let c=0,d=i.length;c<d;c++){const f=i[c],h=f.getAttribute("name"),p=u[h];p&&f.setAttribute("width",p.realWidth||p.width)}},o=r=>{var a,i;const l=((a=e.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,d=l.length;c<d;c++)l[c].setAttribute("width",r.scrollY.value?r.gutterWidth:"0");const u=((i=e.vnode.el)==null?void 0:i.querySelectorAll("th.gutter"))||[];for(let c=0,d=u.length;c<d;c++){const f=u[c];f.style.width=r.scrollY.value?`${r.gutterWidth}px`:"0",f.style.display=r.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:s,onScrollableChange:o}}function x$(e){return He("colgroup",{},[...e.map(t=>He("col",{name:t.id,key:t.id}))])}const Ea=Symbol("ElTable");function rbe(e,t){const n=Lt(),s=Ze(Ea),o=m=>{m.stopPropagation()},r=(m,g)=>{!g.filters&&g.sortable?p(m,g,!1):g.filterable&&!g.sortable&&o(m),s==null||s.emit("header-click",g,m)},a=(m,g)=>{s==null||s.emit("header-contextmenu",g,m)},i=L(null),l=L(!1),u=L({}),c=(m,g)=>{if(!!qt&&!(g.children&&g.children.length>0)&&i.value&&e.border){l.value=!0;const v=s;t("set-drag-visible",!0);const $=(v==null?void 0:v.vnode.el).getBoundingClientRect().left,y=n.vnode.el.querySelector(`th.${g.id}`),w=y.getBoundingClientRect(),C=w.left-$+30;To(y,"noclick"),u.value={startMouseLeft:m.clientX,startLeft:w.right-$,startColumnLeft:w.left-$,tableLeft:$};const k=v==null?void 0:v.refs.resizeProxy;k.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const S=x=>{const N=x.clientX-u.value.startMouseLeft,A=u.value.startLeft+N;k.style.left=`${Math.max(C,A)}px`},E=()=>{if(l.value){const{startColumnLeft:x,startLeft:N}=u.value,D=parseInt(k.style.left,10)-x;g.width=g.realWidth=D,v==null||v.emit("header-dragend",g.width,N-x,g,m),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,i.value=null,u.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",E),document.onselectstart=null,document.ondragstart=null,setTimeout(function(){Qs(y,"noclick")},0)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",E)}},d=(m,g)=>{if(g.children&&g.children.length>0)return;let v=m.target;for(;v&&v.tagName!=="TH";)v=v.parentNode;if(!(!g||!g.resizable)&&!l.value&&e.border){const b=v.getBoundingClientRect(),$=document.body.style;b.width>12&&b.right-m.pageX<8?($.cursor="col-resize",Kr(v,"is-sortable")&&(v.style.cursor="col-resize"),i.value=g):l.value||($.cursor="",Kr(v,"is-sortable")&&(v.style.cursor="pointer"),i.value=null)}},f=()=>{!qt||(document.body.style.cursor="")},h=({order:m,sortOrders:g})=>{if(m==="")return g[0];const v=g.indexOf(m||null);return g[v>g.length-2?0:v+1]},p=(m,g,v)=>{m.stopPropagation();const b=g.order===v?null:v||h(g);let $=m.target;for(;$&&$.tagName!=="TH";)$=$.parentNode;if($&&$.tagName==="TH"&&Kr($,"noclick")){Qs($,"noclick");return}if(!g.sortable)return;const y=e.store.states;let w=y.sortProp.value,C;const k=y.sortingColumn.value;(k!==g||k===g&&k.order===null)&&(k&&(k.order=null),y.sortingColumn.value=g,w=g.property),b?C=g.order=b:C=g.order=null,y.sortProp.value=w,y.sortOrder.value=C,s==null||s.store.commit("changeSortCondition")};return{handleHeaderClick:r,handleHeaderContextMenu:a,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:o}}function abe(e){const t=Ze(Ea),n=Dt("table");return{getHeaderRowStyle:i=>{const l=t==null?void 0:t.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:i}):l},getHeaderRowClass:i=>{const l=[],u=t==null?void 0:t.props.headerRowClassName;return typeof u=="string"?l.push(u):typeof u=="function"&&l.push(u.call(null,{rowIndex:i})),l.join(" ")},getHeaderCellStyle:(i,l,u,c)=>{var d;let f=(d=t==null?void 0:t.props.headerCellStyle)!=null?d:{};typeof f=="function"&&(f=f.call(null,{rowIndex:i,columnIndex:l,row:u,column:c}));const h=S$(l,c.fixed,e.store,u);return gc(h,"left"),gc(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(i,l,u,c)=>{const d=c.isSubColumn?[]:k$(n.b(),l,c.fixed,e.store,u),f=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...d];c.children||f.push("is-leaf"),c.sortable&&f.push("is-sortable");const h=t==null?void 0:t.props.headerCellClassName;return typeof h=="string"?f.push(h):typeof h=="function"&&f.push(h.call(null,{rowIndex:i,columnIndex:l,row:u,column:c})),f.push(n.e("cell")),f.join(" ")}}}const v3=e=>{const t=[];return e.forEach(n=>{n.children?(t.push(n),t.push.apply(t,v3(n.children))):t.push(n)}),t},ibe=e=>{let t=1;const n=(r,a)=>{if(a&&(r.level=a.level+1,t<r.level&&(t=r.level)),r.children){let i=0;r.children.forEach(l=>{n(l,r),i+=l.colSpan}),r.colSpan=i}else r.colSpan=1};e.forEach(r=>{r.level=1,n(r,void 0)});const s=[];for(let r=0;r<t;r++)s.push([]);return v3(e).forEach(r=>{r.children?(r.rowSpan=1,r.children.forEach(a=>a.isSubColumn=!0)):r.rowSpan=t-r.level+1,s[r.level-1].push(r)}),s};function lbe(e){const t=Ze(Ea),n=_(()=>ibe(e.store.states.originColumns.value));return{isGroup:_(()=>{const r=n.value.length>1;return r&&t&&(t.state.isGroup.value=!0),r}),toggleAllSelection:r=>{r.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:n}}var ube=me({name:"ElTableHeader",components:{ElCheckbox:Jr},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:t}){const n=Lt(),s=Ze(Ea),o=Dt("table"),r=s==null?void 0:s.store.states,a=L({}),{onColumnsChange:i,onScrollableChange:l}=g3(s);Mt(()=>{dt(()=>{const{prop:k,order:S}=e.defaultSort,E=!0;s==null||s.store.commit("sort",{prop:k,order:S,init:E})})});const{handleHeaderClick:u,handleHeaderContextMenu:c,handleMouseDown:d,handleMouseMove:f,handleMouseOut:h,handleSortClick:p,handleFilterClick:m}=rbe(e,t),{getHeaderRowStyle:g,getHeaderRowClass:v,getHeaderCellStyle:b,getHeaderCellClass:$}=abe(e),{isGroup:y,toggleAllSelection:w,columnRows:C}=lbe(e);return n.state={onColumnsChange:i,onScrollableChange:l},n.filterPanels=a,{ns:o,columns:r.columns,filterPanels:a,onColumnsChange:i,onScrollableChange:l,columnRows:C,getHeaderRowClass:v,getHeaderRowStyle:g,getHeaderCellClass:$,getHeaderCellStyle:b,handleHeaderClick:u,handleHeaderContextMenu:c,handleMouseDown:d,handleMouseMove:f,handleMouseOut:h,handleSortClick:p,handleFilterClick:m,isGroup:y,toggleAllSelection:w}},render(){const{ns:e,columns:t,isGroup:n,columnRows:s,getHeaderCellStyle:o,getHeaderCellClass:r,getHeaderRowClass:a,getHeaderRowStyle:i,handleHeaderClick:l,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:d,handleSortClick:f,handleMouseOut:h,store:p,$parent:m}=this;let g=1;return He("table",{border:"0",cellpadding:"0",cellspacing:"0",class:e.e("header")},[x$(t),He("thead",{class:{[e.is("group")]:n}},s.map((v,b)=>He("tr",{class:a(b),key:b,style:i(b)},v.map(($,y)=>($.rowSpan>g&&(g=$.rowSpan),He("th",{class:r(b,y,v,$),colspan:$.colSpan,key:`${$.id}-thead`,rowSpan:$.rowSpan,style:o(b,y,v,$),onClick:w=>l(w,$),onContextmenu:w=>u(w,$),onMousedown:w=>c(w,$),onMousemove:w=>d(w,$),onMouseout:h},[He("div",{class:["cell",$.filteredValue&&$.filteredValue.length>0?"highlight":"",$.labelClassName]},[$.renderHeader?$.renderHeader({column:$,$index:y,store:p,_self:m}):$.label,$.sortable&&He("span",{onClick:w=>f(w,$),class:"caret-wrapper"},[He("i",{onClick:w=>f(w,$,"ascending"),class:"sort-caret ascending"}),He("i",{onClick:w=>f(w,$,"descending"),class:"sort-caret descending"})]),$.filterable&&He(obe,{store:m.store,placement:$.filterPlacement||"bottom-start",column:$,upDataColumn:(w,C)=>{$[w]=C}})])]))))))])}});function cbe(e){const t=Ze(Ea),n=L(""),s=L(He("div")),o=(f,h,p)=>{var m;const g=t,v=Fb(f);let b;const $=(m=g==null?void 0:g.vnode.el)==null?void 0:m.dataset.prefix;v&&(b=IE({columns:e.store.states.columns.value},v,$),b&&(g==null||g.emit(`cell-${p}`,h,b,v,f))),g==null||g.emit(`row-${p}`,h,b,f)},r=(f,h)=>{o(f,h,"dblclick")},a=(f,h)=>{e.store.commit("setCurrentRow",h),o(f,h,"click")},i=(f,h)=>{o(f,h,"contextmenu")},l=_o(function(f){e.store.commit("setHoverRow",f)},30),u=_o(function(){e.store.commit("setHoverRow",null)},30);return{handleDoubleClick:r,handleClick:a,handleContextMenu:i,handleMouseEnter:l,handleMouseLeave:u,handleCellMouseEnter:(f,h)=>{var p;const m=t,g=Fb(f),v=(p=m==null?void 0:m.vnode.el)==null?void 0:p.dataset.prefix;if(g){const C=IE({columns:e.store.states.columns.value},g,v),k=m.hoverState={cell:g,column:C,row:h};m==null||m.emit("cell-mouse-enter",k.row,k.column,k.cell,f)}const b=f.target.querySelector(".cell");if(!(Kr(b,`${v}-tooltip`)&&b.childNodes.length))return;const $=document.createRange();$.setStart(b,0),$.setEnd(b,b.childNodes.length);const y=$.getBoundingClientRect().width,w=(parseInt(fr(b,"paddingLeft"),10)||0)+(parseInt(fr(b,"paddingRight"),10)||0);(y+w>b.offsetWidth||b.scrollWidth>b.offsetWidth)&&W0e(g,g.innerText||g.textContent,{placement:"top",strategy:"fixed"},h.tooltipEffect)},handleCellMouseLeave:f=>{if(!Fb(f))return;const p=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",p==null?void 0:p.row,p==null?void 0:p.column,p==null?void 0:p.cell,f)},tooltipContent:n,tooltipTrigger:s}}function dbe(e){const t=Ze(Ea),n=Dt("table");return{getRowStyle:(u,c)=>{const d=t==null?void 0:t.props.rowStyle;return typeof d=="function"?d.call(null,{row:u,rowIndex:c}):d||null},getRowClass:(u,c)=>{const d=[n.e("row")];(t==null?void 0:t.props.highlightCurrentRow)&&u===e.store.states.currentRow.value&&d.push("current-row"),e.stripe&&c%2===1&&d.push(n.em("row","striped"));const f=t==null?void 0:t.props.rowClassName;return typeof f=="string"?d.push(f):typeof f=="function"&&d.push(f.call(null,{row:u,rowIndex:c})),e.store.states.expandRows.value.indexOf(u)>-1&&d.push("expanded"),d},getCellStyle:(u,c,d,f)=>{const h=t==null?void 0:t.props.cellStyle;let p=h!=null?h:{};typeof h=="function"&&(p=h.call(null,{rowIndex:u,columnIndex:c,row:d,column:f}));const m=S$(c,e==null?void 0:e.fixed,e.store);return gc(m,"left"),gc(m,"right"),Object.assign({},p,m)},getCellClass:(u,c,d,f)=>{const h=f.isSubColumn?[]:k$(n.b(),c,e==null?void 0:e.fixed,e.store),p=[f.id,f.align,f.className,...h],m=t==null?void 0:t.props.cellClassName;return typeof m=="string"?p.push(m):typeof m=="function"&&p.push(m.call(null,{rowIndex:u,columnIndex:c,row:d,column:f})),p.push(n.e("cell")),p.join(" ")},getSpan:(u,c,d,f)=>{let h=1,p=1;const m=t==null?void 0:t.props.spanMethod;if(typeof m=="function"){const g=m({row:u,column:c,rowIndex:d,columnIndex:f});Array.isArray(g)?(h=g[0],p=g[1]):typeof g=="object"&&(h=g.rowspan,p=g.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(u,c,d)=>{if(c<1)return u[d].realWidth;const f=u.map(({realWidth:h,width:p})=>h||p).slice(d,d+c);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}function fbe(e){const t=Ze(Ea),{handleDoubleClick:n,handleClick:s,handleContextMenu:o,handleMouseEnter:r,handleMouseLeave:a,handleCellMouseEnter:i,handleCellMouseLeave:l,tooltipContent:u,tooltipTrigger:c}=cbe(e),{getRowStyle:d,getRowClass:f,getCellStyle:h,getCellClass:p,getSpan:m,getColspanRealWidth:g}=dbe(e),v=_(()=>e.store.states.columns.value.findIndex(({type:C})=>C==="default")),b=(C,k)=>{const S=t.props.rowKey;return S?Zs(C,S):k},$=(C,k,S)=>{const{tooltipEffect:E,store:x}=e,{indent:N,columns:A}=x.states,D=f(C,k);let M=!0;return S&&(D.push(`el-table__row--level-${S.level}`),M=S.display),He("tr",{style:[M?null:{display:"none"},d(C,k)],class:D,key:b(C,k),onDblclick:R=>n(R,C),onClick:R=>s(R,C),onContextmenu:R=>o(R,C),onMouseenter:()=>r(k),onMouseleave:a},A.value.map((R,P)=>{const{rowspan:V,colspan:G}=m(C,R,k,P);if(!V||!G)return null;const se=ut({},R);se.realWidth=g(A.value,G,P);const ke={store:e.store,_self:e.context||t,column:se,row:C,$index:k};P===v.value&&S&&(ke.treeNode={indent:S.level*N.value,level:S.level},typeof S.expanded=="boolean"&&(ke.treeNode.expanded=S.expanded,"loading"in S&&(ke.treeNode.loading=S.loading),"noLazyChildren"in S&&(ke.treeNode.noLazyChildren=S.noLazyChildren)));const te=`${k},${P}`,pe=se.columnKey||se.rawColumnKey||"",ae=y(P,R,ke);return He("td",{style:h(k,P,C,R),class:p(k,P,C,R),key:`${pe}${te}`,rowspan:V,colspan:G,onMouseenter:K=>i(K,Ut(ut({},C),{tooltipEffect:E})),onMouseleave:l},[ae])}))},y=(C,k,S)=>k.renderCell(S);return{wrappedRowRender:(C,k)=>{const S=e.store,{isRowExpanded:E,assertRowKey:x}=S,{treeData:N,lazyTreeNodeMap:A,childrenColumnName:D,rowKey:M}=S.states;if(S.states.columns.value.some(({type:R})=>R==="expand")&&E(C)){const R=t.renderExpanded,P=$(C,k,void 0);return R?[[P,He("tr",{key:`expanded-row__${P.key}`},[He("td",{colspan:S.states.columns.value.length,class:"el-table__cell el-table__expanded-cell"},[R({row:C,$index:k,store:S})])])]]:(console.error("[Element Error]renderExpanded is required."),P)}else if(Object.keys(N.value).length){x();const R=Zs(C,M.value);let P=N.value[R],V=null;P&&(V={expanded:P.expanded,level:P.level,display:!0},typeof P.lazy=="boolean"&&(typeof P.loaded=="boolean"&&P.loaded&&(V.noLazyChildren=!(P.children&&P.children.length)),V.loading=P.loading));const G=[$(C,k,V)];if(P){let se=0;const ke=(pe,ae)=>{!(pe&&pe.length&&ae)||pe.forEach(K=>{const X={display:ae.display&&ae.expanded,level:ae.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Y=Zs(K,M.value);if(Y==null)throw new Error("For nested data item, row-key is required.");if(P=ut({},N.value[Y]),P&&(X.expanded=P.expanded,P.level=P.level||X.level,P.display=!!(P.expanded&&X.display),typeof P.lazy=="boolean"&&(typeof P.loaded=="boolean"&&P.loaded&&(X.noLazyChildren=!(P.children&&P.children.length)),X.loading=P.loading)),se++,G.push($(K,k+se,X)),P){const ie=A.value[Y]||K[D.value];ke(ie,P)}})};P.display=!0;const te=A.value[R]||C[D.value];ke(te,P)}return G}else return $(C,k,void 0)},tooltipContent:u,tooltipTrigger:c}}const hbe={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var pbe=me({name:"ElTableBody",props:hbe,setup(e){const t=Lt(),n=Ze(Ea),s=Dt("table"),{wrappedRowRender:o,tooltipContent:r,tooltipTrigger:a}=fbe(e),{onColumnsChange:i,onScrollableChange:l}=g3(n);return Oe(e.store.states.hoverRow,(u,c)=>{if(!e.store.states.isComplex.value||!qt)return;let d=window.requestAnimationFrame;d||(d=f=>window.setTimeout(f,16)),d(()=>{var f;const h=(f=t==null?void 0:t.vnode.el)==null?void 0:f.querySelectorAll(`.${s.e("row")}`),p=h[c],m=h[u];p&&Qs(p,"hover-row"),m&&To(m,"hover-row")})}),Df(()=>{var u;(u=jm)==null||u()}),sa(()=>{var u;(u=jm)==null||u()}),{ns:s,onColumnsChange:i,onScrollableChange:l,wrappedRowRender:o,tooltipContent:r,tooltipTrigger:a}},render(){const{ns:e,wrappedRowRender:t,store:n}=this,s=n.states.data.value||[],o=n.states.columns.value;return He("table",{class:e.e("body"),cellspacing:"0",cellpadding:"0",border:"0"},[x$(o),He("tbody",{},[s.reduce((r,a)=>r.concat(t(a,r.length)),[])])])}});function mbe(){const e=Ze(Ea),t=e==null?void 0:e.store,n=_(()=>t.states.fixedLeafColumnsLength.value),s=_(()=>t.states.rightFixedColumns.value.length),o=_(()=>t.states.columns.value.length),r=_(()=>t.states.fixedColumns.value.length),a=_(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:s,columnsCount:o,leftFixedCount:r,rightFixedCount:a,columns:t.states.columns}}function gbe(e){const{columns:t}=mbe(),n=Dt("table");return{getCellClasses:(r,a)=>{const i=r[a],l=[n.e("cell"),i.id,i.align,i.labelClassName,...k$(n.b(),a,i.fixed,e.store)];return i.className&&l.push(i.className),i.children||l.push(n.is("leaf")),l},getCellStyles:(r,a)=>{const i=S$(a,r.fixed,e.store);return gc(i,"left"),gc(i,"right"),i},columns:t}}var vbe=me({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:n,columns:s}=gbe(e);return{ns:Dt("table"),getCellClasses:t,getCellStyles:n,columns:s}},render(){const{columns:e,getCellStyles:t,getCellClasses:n,summaryMethod:s,sumText:o,ns:r}=this,a=this.store.states.data.value;let i=[];return s?i=s({columns:e,data:a}):e.forEach((l,u)=>{if(u===0){i[u]=o;return}const c=a.map(p=>Number(p[l.property])),d=[];let f=!0;c.forEach(p=>{if(!isNaN(p)){f=!1;const m=`${p}`.split(".")[1];d.push(m?m.length:0)}});const h=Math.max.apply(null,d);f?i[u]="":i[u]=c.reduce((p,m)=>{const g=Number(m);return isNaN(g)?p:parseFloat((p+m).toFixed(Math.min(h,20)))},0)}),He("table",{class:r.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[x$(e),He("tbody",[He("tr",{},[...e.map((l,u)=>He("td",{key:u,colspan:l.colSpan,rowspan:l.rowSpan,class:n(e,u),style:t(l,u)},[He("div",{class:["cell",l.labelClassName]},[i[u]])]))])])])}});function bbe(e){return{setCurrentRow:u=>{e.commit("setCurrentRow",u)},toggleRowSelection:(u,c)=>{e.toggleRowSelection(u,c,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:u=>{e.clearFilter(u)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(u,c)=>{e.toggleRowExpansionAdapter(u,c)},clearSort:()=>{e.clearSort()},sort:(u,c)=>{e.commit("sort",{prop:u,order:c})}}}function ybe(e,t,n,s){const o=L(!1),r=L(null),a=L(!1),i=D=>{a.value=D},l=L({width:null,height:null}),u=L(!1);Ba(()=>{t.setHeight(e.height)}),Ba(()=>{t.setMaxHeight(e.maxHeight)}),Oe(()=>[e.currentRowKey,n.states.rowKey],([D,M])=>{!je(M)||n.setCurrentRowKey(`${D}`)},{immediate:!0}),Oe(()=>e.data,D=>{s.store.commit("setData",D)},{immediate:!0,deep:!0}),Ba(()=>{e.expandRowKeys&&n.setExpandRowKeysAdapter(e.expandRowKeys)});const c=()=>{s.store.commit("setHoverRow",null),s.hoverState&&(s.hoverState=null)},d=(D,M)=>{const{pixelX:F,pixelY:R}=M;Math.abs(F)>=Math.abs(R)&&(s.refs.bodyWrapper.scrollLeft+=M.pixelX/5)},f=_(()=>e.height||e.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),h=_(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),p=()=>{f.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(v)};Mt(async()=>{g("is-scrolling-left"),n.updateColumns(),await dt(),b(),requestAnimationFrame(p),l.value={width:s.vnode.el.offsetWidth,height:s.vnode.el.offsetHeight},n.states.columns.value.forEach(D=>{D.filteredValue&&D.filteredValue.length&&s.store.commit("filterChange",{column:D,values:D.filteredValue,silent:!0})}),s.$ready=!0});const m=(D,M)=>{if(!D)return;const F=Array.from(D.classList).filter(R=>!R.startsWith("is-scrolling-"));F.push(t.scrollX.value?M:"is-scrolling-none"),D.className=F.join(" ")},g=D=>{const{tableWrapper:M}=s.refs;m(M,D)},v=function(){if(!s.refs.scrollWrapper)return;const D=s.refs.scrollWrapper.wrap$;if(!D)return;const{scrollLeft:M,offsetWidth:F,scrollWidth:R}=D,{headerWrapper:P,footerWrapper:V}=s.refs;P&&(P.scrollLeft=M),V&&(V.scrollLeft=M);const G=R-F-1;M>=G?g("is-scrolling-right"):g(M===0?"is-scrolling-left":"is-scrolling-middle")},b=()=>{var D;(D=s.refs.scrollWrapper.wrap$)==null||D.addEventListener("scroll",v,{passive:!0}),e.fit?Li(s.vnode.el,y):gn(window,"resize",p)};os(()=>{$()});const $=()=>{var D;(D=s.refs.scrollWrapper.wrap$)==null||D.removeEventListener("scroll",v,!0),e.fit?Bi(s.vnode.el,y):zn(window,"resize",p)},y=()=>{if(!s.$ready)return;let D=!1;const M=s.vnode.el,{width:F,height:R}=l.value,P=M.offsetWidth;F!==P&&(D=!0);const V=M.offsetHeight;(e.height||f.value)&&R!==V&&(D=!0),D&&(l.value={width:P,height:V},p())},w=ds(),C=_(()=>{const{bodyWidth:D,scrollY:M,gutterWidth:F}=t;return D.value?`${D.value-(M.value?F:0)}px`:""}),k=_(()=>{const D=t.headerHeight.value||0,M=t.bodyHeight.value,F=t.footerHeight.value||0;if(e.height)return M||void 0;if(e.maxHeight)return vm(e.maxHeight)-F-(e.showHeader?D:0)}),S=_(()=>{const D=t.headerHeight.value||0,M=t.bodyHeight.value,F=t.footerHeight.value||0;if(e.height)return{height:M?`${M}px`:""};if(e.maxHeight){const R=vm(e.maxHeight);if(typeof R=="number")return{"max-height":`${R-F-(e.showHeader?D:0)}px`}}return{}}),E=_(()=>{if(e.data&&e.data.length)return null;let D="100%";return t.appendHeight.value&&(D=`calc(100% - ${t.appendHeight.value}px)`),{width:C.value,height:D}}),x=(D,M)=>{const F=s.refs.bodyWrapper;if(Math.abs(M.spinY)>0){const R=F.scrollTop;M.pixelY<0&&R!==0&&D.preventDefault(),M.pixelY>0&&F.scrollHeight-F.clientHeight>R&&D.preventDefault(),F.scrollTop+=Math.ceil(M.pixelY/5)}else F.scrollLeft+=Math.ceil(M.pixelX/5)},N=_(()=>e.maxHeight?e.showSummary?{bottom:0}:{bottom:t.scrollX.value&&e.data.length?`${t.gutterWidth}px`:""}:e.showSummary?{height:t.tableHeight.value?`${t.tableHeight.value}px`:""}:{height:t.viewportHeight.value?`${t.viewportHeight.value}px`:""}),A=_(()=>{if(e.height)return{height:t.fixedBodyHeight.value?`${t.fixedBodyHeight.value}px`:""};if(e.maxHeight){let D=vm(e.maxHeight);if(typeof D=="number")return D=t.scrollX.value?D-t.gutterWidth:D,e.showHeader&&(D-=t.headerHeight.value),D-=t.footerHeight.value,{"max-height":`${D}px`}}return{}});return{isHidden:o,renderExpanded:r,setDragVisible:i,isGroup:u,handleMouseLeave:c,handleHeaderFooterMousewheel:d,tableSize:w,bodyHeight:S,height:k,emptyBlockStyle:E,handleFixedMousewheel:x,fixedHeight:N,fixedBodyHeight:A,resizeProxyVisible:a,bodyWidth:C,resizeState:l,doLayout:p,tableBodyStyles:h}}var wbe={data:{type:Array,default:()=>[]},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""}};let $be=1;const Cbe=me({name:"ElTable",directives:{Mousewheel:QQ},components:{TableHeader:ube,TableBody:pbe,TableFooter:vbe,ElScrollbar:Ya},props:wbe,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=kn(),n=Dt("table"),s=Lt();zt(Ea,s);const o=X0e(s,e);s.store=o;const r=new Z0e({store:s.store,table:s,fit:e.fit,showHeader:e.showHeader});s.layout=r;const a=_(()=>(o.states.data.value||[]).length===0),{setCurrentRow:i,toggleRowSelection:l,clearSelection:u,clearFilter:c,toggleAllSelection:d,toggleRowExpansion:f,clearSort:h,sort:p}=bbe(o),{isHidden:m,renderExpanded:g,setDragVisible:v,isGroup:b,handleMouseLeave:$,handleHeaderFooterMousewheel:y,tableSize:w,bodyHeight:C,height:k,emptyBlockStyle:S,handleFixedMousewheel:E,fixedHeight:x,fixedBodyHeight:N,resizeProxyVisible:A,bodyWidth:D,resizeState:M,doLayout:F,tableBodyStyles:R}=ybe(e,r,o,s),P=_o(F,50),V=`el-table_${$be++}`;s.tableId=V,s.state={isGroup:b,resizeState:M,doLayout:F,debouncedUpdateLayout:P};const G=_(()=>e.sumText||t("el.table.sumText")),se=_(()=>e.emptyText||t("el.table.emptyText"));return{ns:n,layout:r,store:o,handleHeaderFooterMousewheel:y,handleMouseLeave:$,tableId:V,tableSize:w,isHidden:m,isEmpty:a,renderExpanded:g,resizeProxyVisible:A,resizeState:M,isGroup:b,bodyWidth:D,bodyHeight:C,height:k,tableBodyStyles:R,emptyBlockStyle:S,debouncedUpdateLayout:P,handleFixedMousewheel:E,fixedHeight:x,fixedBodyHeight:N,setCurrentRow:i,toggleRowSelection:l,clearSelection:u,clearFilter:c,toggleAllSelection:d,toggleRowExpansion:f,clearSort:h,doLayout:F,sort:p,t,setDragVisible:v,context:s,computedSumText:G,computedEmptyText:se}}}),kbe=["data-prefix"],Sbe={ref:"hiddenColumns",class:"hidden-columns"};function xbe(e,t,n,s,o,r){const a=re("table-header"),i=re("table-body"),l=re("el-scrollbar"),u=re("table-footer"),c=wo("mousewheel");return T(),B("div",{ref:"tableWrapper",class:q([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b()]),style:nt(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:t[0]||(t[0]=d=>e.handleMouseLeave())},[W("div",{class:q(e.ns.e("inner-wrapper"))},[W("div",Sbe,[_e(e.$slots,"default")],512),e.showHeader?$t((T(),B("div",{key:0,ref:"headerWrapper",class:q(e.ns.e("header-wrapper"))},[le(a,{ref:"tableHeader",border:e.border,"default-sort":e.defaultSort,store:e.store,style:nt(e.tableBodyStyles),onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","style","onSetDragVisible"])],2)),[[c,e.handleHeaderFooterMousewheel]]):ce("v-if",!0),W("div",{ref:"bodyWrapper",style:nt(e.bodyHeight),class:q(e.ns.e("body-wrapper"))},[le(l,{ref:"scrollWrapper",height:e.maxHeight?void 0:e.height,"max-height":e.maxHeight?e.height:void 0},{default:oe(()=>[le(i,{ref:"tableBody",context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"row-style":e.rowStyle,store:e.store,stripe:e.stripe,style:nt({width:e.bodyWidth})},null,8,["context","highlight","row-class-name","tooltip-effect","row-style","store","stripe","style"]),e.isEmpty?(T(),B("div",{key:0,ref:"emptyBlock",style:nt(e.emptyBlockStyle),class:q(e.ns.e("empty-block"))},[W("span",{class:q(e.ns.e("empty-text"))},[_e(e.$slots,"empty",{},()=>[jt(Fe(e.computedEmptyText),1)])],2)],6)):ce("v-if",!0),e.$slots.append?(T(),B("div",{key:1,ref:"appendWrapper",class:q(e.ns.e("append-wrapper"))},[_e(e.$slots,"append")],2)):ce("v-if",!0)]),_:3},8,["height","max-height"])],6),e.border||e.isGroup?(T(),B("div",{key:1,class:q(e.ns.e("border-left-patch"))},null,2)):ce("v-if",!0)],2),e.showSummary?$t((T(),B("div",{key:0,ref:"footerWrapper",class:q(e.ns.e("footer-wrapper"))},[le(u,{border:e.border,"default-sort":e.defaultSort,store:e.store,style:nt(e.tableBodyStyles),"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[Qt,!e.isEmpty],[c,e.handleHeaderFooterMousewheel]]):ce("v-if",!0),$t(W("div",{ref:"resizeProxy",class:q(e.ns.e("column-resize-proxy"))},null,2),[[Qt,e.resizeProxyVisible]])],46,kbe)}var Ibe=We(Cbe,[["render",xbe]]);const Ebe={selection:"table-column--selection",expand:"table__expand-column"},Tbe={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Nbe=e=>Ebe[e]||"",Abe={selection:{renderHeader({store:e}){function t(){return e.states.data.value&&e.states.data.value.length===0}return He(Jr,{disabled:t(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value})},renderCell({row:e,column:t,store:n,$index:s}){return He(Jr,{disabled:t.selectable?!t.selectable.call(null,e,s):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",e)},onClick:o=>o.stopPropagation(),modelValue:n.isSelected(e)})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let n=t+1;const s=e.index;return typeof s=="number"?n=t+s:typeof s=="function"&&(n=s(t)),He("div",{},[n])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t}){const{ns:n}=t,s=[n.e("expand-icon")];return t.states.expandRows.value.indexOf(e)>-1&&s.push(n.em("expand-icon","expanded")),He("div",{class:s,onClick:function(r){r.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[He(_t,null,{default:()=>[He(Er)]})]})},sortable:!1,resizable:!1}};function Dbe({row:e,column:t,$index:n}){var s;const o=t.property,r=o&&Jp(e,o,!1).v;return t&&t.formatter?t.formatter(e,t,r,n):((s=r==null?void 0:r.toString)==null?void 0:s.call(r))||""}function Rbe({row:e,treeNode:t,store:n}){if(!t)return null;const s=[],o=function(a){a.stopPropagation(),n.loadOrToggle(e)},{ns:r}=n;if(t.indent&&s.push(He("span",{class:r.e("indent"),style:{"padding-left":`${t.indent}px`}})),typeof t.expanded=="boolean"&&!t.noLazyChildren){const a=[r.e("expand-icon"),t.expanded?r.em("expand-icon","expanded"):""];let i=Er;t.loading&&(i=Xa),s.push(He("div",{class:a,onClick:o},{default:()=>[He(_t,{class:{[r.is("loading")]:t.loading}},{default:()=>[He(i)]})]}))}else s.push(He("span",{class:r.e("placeholder")}));return s}function _be(e,t){const n=Lt();return{registerComplexWatchers:()=>{const r=["fixed"],a={realWidth:"width",realMinWidth:"minWidth"},i=r.reduce((l,u)=>(l[u]=u,l),a);Object.keys(i).forEach(l=>{const u=a[l];Wt(t,u)&&Oe(()=>t[u],c=>{let d=c;u==="width"&&l==="realWidth"&&(d=C$(c)),u==="minWidth"&&l==="realMinWidth"&&(d=d3(c)),n.columnConfig.value[u]=d,n.columnConfig.value[l]=d;const f=u==="fixed";e.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const r=["label","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],a={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},i=r.reduce((l,u)=>(l[u]=u,l),a);Object.keys(i).forEach(l=>{const u=a[l];Wt(t,u)&&Oe(()=>t[u],c=>{n.columnConfig.value[l]=c})})}}}function Obe(e,t,n){const s=Lt(),o=L(""),r=L(!1),a=L(),i=L(),l=Dt("table");Ba(()=>{a.value=e.align?`is-${e.align}`:null,a.value}),Ba(()=>{i.value=e.headerAlign?`is-${e.headerAlign}`:a.value,i.value});const u=_(()=>{let b=s.vnode.vParent||s.parent;for(;b&&!b.tableId&&!b.columnId;)b=b.vnode.vParent||b.parent;return b}),c=L(C$(e.width)),d=L(d3(e.minWidth)),f=b=>(c.value&&(b.width=c.value),d.value&&(b.minWidth=d.value),b.minWidth||(b.minWidth=80),b.realWidth=Number(b.width===void 0?b.minWidth:b.width),b),h=b=>{const $=b.type,y=Abe[$]||{};Object.keys(y).forEach(C=>{const k=y[C];C!=="className"&&k!==void 0&&(b[C]=k)});const w=Nbe($);if(w){const C=`${je(l.namespace)}-${w}`;b.className=b.className?`${b.className} ${C}`:C}return b},p=b=>{b instanceof Array?b.forEach(y=>$(y)):$(b);function $(y){var w;((w=y==null?void 0:y.type)==null?void 0:w.name)==="ElTableColumn"&&(y.vParent=s)}};return{columnId:o,realAlign:a,isSubColumn:r,realHeaderAlign:i,columnOrTableParent:u,setColumnWidth:f,setColumnForcedProps:h,setColumnRenders:b=>{e.renderHeader||b.type!=="selection"&&(b.renderHeader=y=>{s.columnConfig.value.label;const w=t.header;return w?w(y):b.label});let $=b.renderCell;return b.type==="expand"?(b.renderCell=y=>He("div",{class:"cell"},[$(y)]),n.value.renderExpanded=y=>t.default?t.default(y):t.default):($=$||Dbe,b.renderCell=y=>{let w=null;t.default?w=t.default(y):w=$(y);const C=Rbe(y),k={class:"cell",style:{}};return b.showOverflowTooltip&&(k.class=`${k.class} ${je(l.namespace)}-tooltip`,k.style={width:`${(y.column.realWidth||Number(y.column.width))-1}px`}),p(w),He("div",k,[C,w])}),b},getPropsData:(...b)=>b.reduce(($,y)=>(Array.isArray(y)&&y.forEach(w=>{$[w]=e[w]}),$),{}),getColumnElIndex:(b,$)=>[].indexOf.call(b,$)}}var Mbe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].indexOf(t)>-1)}};let Fbe=1;var b3=me({name:"ElTableColumn",components:{ElCheckbox:Jr},props:Mbe,setup(e,{slots:t}){const n=Lt(),s=L({}),o=_(()=>{let b=n.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:r,registerComplexWatchers:a}=_be(o,e),{columnId:i,isSubColumn:l,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:m,realAlign:g}=Obe(e,t,o),v=c.value;i.value=`${v.tableId||v.columnId}_column_${Fbe++}`,Af(()=>{l.value=o.value!==v;const b=e.type||"default",$=e.sortable===""?!0:e.sortable,y=Ut(ut({},Tbe[b]),{id:i.value,type:b,property:e.prop||e.property,align:g,headerAlign:u,showOverflowTooltip:e.showOverflowTooltip||e.showTooltipWhenOverflow,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:$,index:e.index,rawColumnKey:n.vnode.key});let E=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);E=B0e(y,E),E=z0e(h,d,f)(E),s.value=E,r(),a()}),Mt(()=>{var b;const $=c.value,y=l.value?$.vnode.el.children:(b=$.refs.hiddenColumns)==null?void 0:b.children,w=()=>m(y||[],n.vnode.el);s.value.getColumnIndex=w,w()>-1&&o.value.store.commit("insertColumn",s.value,l.value?$.columnConfig.value:null)}),os(()=>{o.value.store.commit("removeColumn",s.value,l.value?v.columnConfig.value:null)}),n.columnId=i.value,n.columnConfig=s},render(){var e,t,n;let s=[];try{const o=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1});if(o instanceof Array)for(const r of o)((n=r.type)==null?void 0:n.name)==="ElTableColumn"||r.shapeFlag&2?s.push(r):r.type===it&&r.children instanceof Array&&s.push(...r.children)}catch{s=[]}return He("div",s)}});const Pbe=Vt(Ibe,{TableColumn:b3}),Lbe=Jn(b3),Bbe=gt({tabs:{type:Je(Array),default:()=>vs([])}}),TE="ElTabBar",zbe=me({name:TE,props:Bbe,setup(e){const t=Lt(),n=Ze(Ag);n||oo(TE,"must use with ElTabs");const s=L(),o=L(),r=()=>{let i=0,l=0;const u=["top","bottom"].includes(n.props.tabPosition)?"width":"height",c=u==="width"?"x":"y";return e.tabs.every(d=>{var f,h,p,m;const g=(h=(f=t.parent)==null?void 0:f.refs)==null?void 0:h[`tab-${d.paneName}`];if(!g)return!1;if(!d.active)return!0;l=g[`client${Ko(u)}`];const v=c==="x"?"left":"top";i=g.getBoundingClientRect()[v]-((m=(p=g.parentElement)==null?void 0:p.getBoundingClientRect()[v])!=null?m:0);const b=window.getComputedStyle(g);return u==="width"&&(e.tabs.length>1&&(l-=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight)),i+=parseFloat(b.paddingLeft)),!1}),{[u]:`${l}px`,transform:`translate${Ko(c)}(${i}px)`}},a=()=>o.value=r();return Oe(()=>e.tabs,async()=>{await dt(),a()},{immediate:!0}),rf(s,()=>a()),{bar$:s,rootTabs:n,barStyle:o,update:a}}});function Vbe(e,t,n,s,o,r){return T(),B("div",{ref:"bar$",class:q(["el-tabs__active-bar",`is-${e.rootTabs.props.tabPosition}`]),style:nt(e.barStyle)},null,6)}var Wbe=We(zbe,[["render",Vbe]]);const Hbe=gt({panes:{type:Je(Array),default:()=>vs([])},currentName:{type:String,default:""},editable:Boolean,onTabClick:{type:Je(Function),default:on},onTabRemove:{type:Je(Function),default:on},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),NE="ElTabNav";var Ube=me({name:NE,props:Hbe,setup(e,{expose:t}){const n=S7(),s=_7(),o=Ze(Ag);o||oo(NE,"ElTabNav must be nested inside ElTabs");const r=L(!1),a=L(0),i=L(!1),l=L(!0),u=L(),c=L(),d=L(),f=_(()=>["top","bottom"].includes(o.props.tabPosition)?"width":"height"),h=_(()=>({transform:`translate${f.value==="width"?"X":"Y"}(-${a.value}px)`})),p=()=>{if(!u.value)return;const w=u.value[`offset${Ko(f.value)}`],C=a.value;if(!C)return;const k=C>w?C-w:0;a.value=k},m=()=>{if(!u.value||!c.value)return;const w=c.value[`offset${Ko(f.value)}`],C=u.value[`offset${Ko(f.value)}`],k=a.value;if(w-k<=C)return;const S=w-k>C*2?k+C:w-C;a.value=S},g=()=>{const w=c.value;if(!r.value||!d.value||!u.value||!w)return;const C=d.value.querySelector(".is-active");if(!C)return;const k=u.value,S=["top","bottom"].includes(o.props.tabPosition),E=C.getBoundingClientRect(),x=k.getBoundingClientRect(),N=S?w.offsetWidth-x.width:w.offsetHeight-x.height,A=a.value;let D=A;S?(E.left<x.left&&(D=A-(x.left-E.left)),E.right>x.right&&(D=A+E.right-x.right)):(E.top<x.top&&(D=A-(x.top-E.top)),E.bottom>x.bottom&&(D=A+(E.bottom-x.bottom))),D=Math.max(D,0),a.value=Math.min(D,N)},v=()=>{if(!c.value||!u.value)return;const w=c.value[`offset${Ko(f.value)}`],C=u.value[`offset${Ko(f.value)}`],k=a.value;if(C<w){const S=a.value;r.value=r.value||{},r.value.prev=S,r.value.next=S+C<w,w-S<C&&(a.value=w-C)}else r.value=!1,k>0&&(a.value=0)},b=w=>{const C=w.code,{up:k,down:S,left:E,right:x}=Qe;if(![k,S,E,x].includes(C))return;const N=Array.from(w.currentTarget.querySelectorAll("[role=tab]")),A=N.indexOf(w.target);let D;C===E||C===k?A===0?D=N.length-1:D=A-1:A<N.length-1?D=A+1:D=0,N[D].focus(),N[D].click(),$()},$=()=>{l.value&&(i.value=!0)},y=()=>i.value=!1;return Oe(n,w=>{w==="hidden"?l.value=!1:w==="visible"&&setTimeout(()=>l.value=!0,50)}),Oe(s,w=>{w?setTimeout(()=>l.value=!0,50):l.value=!1}),rf(d,v),Mt(()=>setTimeout(()=>g(),0)),sa(()=>v()),t({scrollToActiveTab:g,removeFocus:y}),()=>{const w=r.value?[He("span",{class:["el-tabs__nav-prev",r.value.prev?"":"is-disabled"],onClick:p},[He(_t,{},{default:()=>He(ru)})]),He("span",{class:["el-tabs__nav-next",r.value.next?"":"is-disabled"],onClick:m},[He(_t,{},{default:()=>He(Er)})])]:null,C=e.panes.map((k,S)=>{var E,x;const N=k.props.name||k.index||`${S}`,A=k.isClosable||e.editable;k.index=`${S}`;const D=A?He(_t,{class:"is-icon-close",onClick:R=>e.onTabRemove(k,R)},{default:()=>He(Zr)}):null,M=((x=(E=k.instance.slots).label)==null?void 0:x.call(E))||k.props.label,F=k.active?0:-1;return He("div",{class:{"el-tabs__item":!0,[`is-${o.props.tabPosition}`]:!0,"is-active":k.active,"is-disabled":k.props.disabled,"is-closable":A,"is-focus":i},id:`tab-${N}`,key:`tab-${N}`,"aria-controls":`pane-${N}`,role:"tab","aria-selected":k.active,ref:`tab-${N}`,tabindex:F,onFocus:()=>$(),onBlur:()=>y(),onClick:R=>{y(),e.onTabClick(k,N,R)},onKeydown:R=>{A&&(R.code===Qe.delete||R.code===Qe.backspace)&&e.onTabRemove(k,R)}},[M,D])});return He("div",{ref:d,class:["el-tabs__nav-wrap",r.value?"is-scrollable":"",`is-${o.props.tabPosition}`]},[w,He("div",{class:"el-tabs__nav-scroll",ref:u},[He("div",{class:["el-tabs__nav",`is-${o.props.tabPosition}`,e.stretch&&["top","bottom"].includes(o.props.tabPosition)?"is-stretch":""],ref:c,style:h.value,role:"tablist",onKeydown:b},[e.type?null:He(Wbe,{tabs:[...e.panes]}),C])])])}}});const Gbe=gt({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:String,default:""},closable:Boolean,addable:Boolean,modelValue:{type:String,default:""},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Je(Function),default:()=>!0},stretch:Boolean}),Kbe={[Ft]:e=>typeof e=="string",[Ii]:e=>typeof e=="string","tab-click":(e,t)=>t instanceof Event,edit:(e,t)=>t==="remove"||t==="add","tab-remove":e=>typeof e=="string","tab-add":()=>!0},y3=(e,t=[])=>{const n=e.children||[];return Array.from(n).forEach(s=>{let o=s.type;o=o.name||o,o==="ElTabPane"&&s.component?t.push(s.component):(o===it||o==="template")&&y3(s,t)}),t};var jbe=me({name:"ElTabs",props:Gbe,emits:Kbe,setup(e,{emit:t,slots:n,expose:s}){const o=Lt(),r=L(),a=L([]),i=L(e.modelValue||e.activeName||"0"),l={},u=(m=!1)=>{if(n.default){const g=o.subTree.children,v=Array.from(g).find(({props:y})=>(y==null?void 0:y.class)==="el-tabs__content");if(!v)return;const b=y3(v).map(y=>l[y.uid]),$=!(b.length===a.value.length&&b.every((y,w)=>y.uid===a.value[w].uid));(m||$)&&(a.value=b)}else a.value.length!==0&&(a.value=[])},c=m=>{i.value=m,t(Ii,m),t(Ft,m)},d=m=>{var g;if(i.value===m)return;const v=(g=e.beforeLeave)==null?void 0:g.call(e,m,i.value);sc(v)?v.then(()=>{var b,$;c(m),($=(b=r.value)==null?void 0:b.removeFocus)==null||$.call(b)},on):v!==!1&&c(m)},f=(m,g,v)=>{m.props.disabled||(d(g),t("tab-click",m,v))},h=(m,g)=>{m.props.disabled||(g.stopPropagation(),t("edit",m.props.name,"remove"),t("tab-remove",m.props.name))},p=()=>{t("edit",null,"add"),t("tab-add")};return sa(()=>u()),Mt(()=>u()),Oe(()=>e.activeName,m=>d(m)),Oe(()=>e.modelValue,m=>d(m)),Oe(i,async()=>{var m,g;u(!0),await dt(),await((m=r.value)==null?void 0:m.$nextTick()),(g=r.value)==null||g.scrollToActiveTab()}),zt(Ag,{props:e,currentName:i,updatePaneState:m=>l[m.uid]=m}),s({currentName:i}),()=>{const m=e.editable||e.addable?He("span",{class:"el-tabs__new-tab",tabindex:"0",onClick:p,onKeydown:b=>{b.code===Qe.enter&&p()}},[He(_t,{class:"is-icon-plus"},{default:()=>He(YD)})]):null,g=He("div",{class:["el-tabs__header",`is-${e.tabPosition}`]},[m,He(Ube,{currentName:i.value,editable:e.editable,type:e.type,panes:a.value,stretch:e.stretch,ref:r,onTabClick:f,onTabRemove:h})]),v=He("div",{class:"el-tabs__content"},[_e(n,"default")]);return He("div",{class:{"el-tabs":!0,"el-tabs--card":e.type==="card",[`el-tabs--${e.tabPosition}`]:!0,"el-tabs--border-card":e.type==="border-card"}},e.tabPosition!=="bottom"?[g,v]:[v,g])}}});const qbe=gt({label:{type:String,default:""},name:{type:String,default:""},closable:Boolean,disabled:Boolean,lazy:Boolean}),AE="ElTabPane",Xbe=me({name:AE,props:qbe,setup(e){const t=Lt(),n=Ze(Ag);n||oo(AE,"must use with ElTabs");const s=L(),o=L(!1),r=_(()=>e.closable||n.props.closable),a=jx(()=>n.currentName.value===(e.name||s.value)),i=_(()=>e.name||s.value),l=jx(()=>!e.lazy||o.value||a.value);return Oe(a,u=>{u&&(o.value=!0)}),n.updatePaneState(Cn({uid:t.uid,instance:Yd(t),props:e,paneName:i,active:a,index:s,isClosable:r})),{active:a,paneName:i,shouldBeRender:l}}}),Ybe=["id","aria-hidden","aria-labelledby"];function Zbe(e,t,n,s,o,r){return e.shouldBeRender?$t((T(),B("div",{key:0,id:`pane-${e.paneName}`,class:"el-tab-pane",role:"tabpanel","aria-hidden":!e.active,"aria-labelledby":`tab-${e.paneName}`},[_e(e.$slots,"default")],8,Ybe)),[[Qt,e.active]]):ce("v-if",!0)}var w3=We(Xbe,[["render",Zbe]]);const Jbe=Vt(jbe,{TabPane:w3}),Qbe=Jn(w3);Ct.extend(r$);const{Option:eye}=qg,Ma=e=>{const t=(e||"").split(":");if(t.length>=2){let n=parseInt(t[0],10);const s=parseInt(t[1],10),o=e.toUpperCase();return o.includes("AM")&&n===12?n=0:o.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:s}}return null},Pb=(e,t)=>{const n=Ma(e),s=Ma(t),o=n.minutes+n.hours*60,r=s.minutes+s.hours*60;return o===r?0:o>r?1:-1},DE=e=>`${e}`.padStart(2,"0"),Pu=e=>`${DE(e.hours)}:${DE(e.minutes)}`,tye=(e,t)=>{const n=Ma(e),s=Ma(t),o={hours:n.hours,minutes:n.minutes};return o.minutes+=s.minutes,o.hours+=s.hours,o.hours+=Math.floor(o.minutes/60),o.minutes=o.minutes%60,Pu(o)},nye=me({name:"ElTimeSelect",components:{ElSelect:qg,ElOption:eye,ElIcon:_t},model:{prop:"value",event:"change"},props:{format:{type:String,default:"HH:mm"},modelValue:String,disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},size:{type:String,default:"default",validator:e=>!e||["large","default","small"].indexOf(e)!==-1},placeholder:{type:String,default:""},start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:{type:String,default:""},maxTime:{type:String,default:""},name:{type:String,default:""},prefixIcon:{type:[String,Object],default:XD},clearIcon:{type:[String,Object],default:Ha}},emits:["change","blur","focus","update:modelValue"],setup(e){const t=L(null),n=_(()=>e.modelValue),s=_(()=>{const d=Ma(e.start);return Pu(d)}),o=_(()=>{const d=Ma(e.end);return Pu(d)}),r=_(()=>{const d=Ma(e.step);return Pu(d)}),a=_(()=>{const d=Ma(e.minTime);return d?Pu(d):null}),i=_(()=>{const d=Ma(e.maxTime);return d?Pu(d):null}),l=_(()=>{const d=[];if(e.start&&e.end&&e.step){let f=s.value,h;for(;Pb(f,o.value)<=0;)h=Ct(f,"HH:mm").format(e.format),d.push({value:h,disabled:Pb(f,a.value||"-1:-1")<=0||Pb(f,i.value||"100:100")>=0}),f=tye(f,r.value)}return d});return{select:t,value:n,items:l,blur:()=>{var d,f;(f=(d=t.value)==null?void 0:d.blur)==null||f.call(d)},focus:()=>{var d,f;(f=(d=t.value)==null?void 0:d.focus)==null||f.call(d)}}}});function sye(e,t,n,s,o,r){const a=re("el-option"),i=re("el-icon"),l=re("el-select");return T(),ve(l,{ref:"select","model-value":e.value,disabled:e.disabled,clearable:e.clearable,"clear-icon":e.clearIcon,size:e.size,placeholder:e.placeholder,"default-first-option":"",filterable:e.editable,"onUpdate:modelValue":t[0]||(t[0]=u=>e.$emit("update:modelValue",u)),onChange:t[1]||(t[1]=u=>e.$emit("change",u)),onBlur:t[2]||(t[2]=u=>e.$emit("blur",u)),onFocus:t[3]||(t[3]=u=>e.$emit("focus",u))},{prefix:oe(()=>[e.prefixIcon?(T(),ve(i,{key:0,class:"el-input__prefix-icon"},{default:oe(()=>[(T(),ve(en(e.prefixIcon)))]),_:1})):ce("v-if",!0)]),default:oe(()=>[(T(!0),B(it,null,Yt(e.items,u=>(T(),ve(a,{key:u.value,label:u.value,value:u.value,disabled:u.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","placeholder","filterable"])}var wm=We(nye,[["render",sye]]);wm.install=e=>{e.component(wm.name,wm)};const oye=wm,rye=oye,aye=me({name:"ElTimeline",setup(e,{slots:t}){const n=Dt("timeline");return zt("timeline",t),()=>He("ul",{class:[n.b()]},[_e(t,"default")])}}),iye=gt({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:{type:String,default:""},color:{type:String,default:""},size:{type:String,default:"normal"},icon:{type:Je([String,Object]),default:""},hollow:{type:Boolean,default:!1}}),lye=me({name:"ElTimelineItem",components:{ElIcon:_t},props:iye,setup(){return{ns:Dt("timeline-item")}}});function uye(e,t,n,s,o,r){const a=re("el-icon");return T(),B("li",{class:q([e.ns.b(),{[e.ns.e("center")]:e.center}])},[W("div",{class:q(e.ns.e("tail"))},null,2),e.$slots.dot?ce("v-if",!0):(T(),B("div",{key:0,class:q([e.ns.e("node"),e.ns.em("node",e.size||""),e.ns.em("node",e.type||""),e.ns.is("hollow",e.hollow)]),style:nt({backgroundColor:e.color})},[e.icon?(T(),ve(a,{key:0,class:q(e.ns.e("icon"))},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1},8,["class"])):ce("v-if",!0)],6)),e.$slots.dot?(T(),B("div",{key:1,class:q(e.ns.e("dot"))},[_e(e.$slots,"dot")],2)):ce("v-if",!0),W("div",{class:q(e.ns.e("wrapper"))},[!e.hideTimestamp&&e.placement==="top"?(T(),B("div",{key:0,class:q([e.ns.e("timestamp"),e.ns.is("top")])},Fe(e.timestamp),3)):ce("v-if",!0),W("div",{class:q(e.ns.e("content"))},[_e(e.$slots,"default")],2),!e.hideTimestamp&&e.placement==="bottom"?(T(),B("div",{key:1,class:q([e.ns.e("timestamp"),e.ns.is("bottom")])},Fe(e.timestamp),3)):ce("v-if",!0)],2)],2)}var $3=We(lye,[["render",uye]]);const cye=Vt(aye,{TimelineItem:$3}),dye=Jn($3),r1="checked-change",fye={data:{type:Array,default(){return[]}},optionRender:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},hye=(e,t)=>{const{emit:n}=Lt(),s=_(()=>e.props.label||"label"),o=_(()=>e.props.key||"key"),r=_(()=>e.props.disabled||"disabled"),a=_(()=>e.data.filter(f=>typeof e.filterMethod=="function"?e.filterMethod(t.query,f):(f[s.value]||f[o.value].toString()).toLowerCase().includes(t.query.toLowerCase()))),i=_(()=>a.value.filter(f=>!f[r.value])),l=_(()=>{const f=t.checked.length,h=e.data.length,{noChecked:p,hasChecked:m}=e.format;return p&&m?f>0?m.replace(/\${checked}/g,f.toString()).replace(/\${total}/g,h.toString()):p.replace(/\${total}/g,h.toString()):`${f}/${h}`}),u=_(()=>{const f=t.checked.length;return f>0&&f<i.value.length}),c=()=>{const f=i.value.map(h=>h[o.value]);t.allChecked=f.length>0&&f.every(h=>t.checked.includes(h))},d=f=>{t.checked=f?i.value.map(h=>h[o.value]):[]};return Oe(()=>t.checked,(f,h)=>{if(c(),t.checkChangeByUser){const p=f.concat(h).filter(m=>!f.includes(m)||!h.includes(m));n(r1,f,p)}else n(r1,f),t.checkChangeByUser=!0}),Oe(i,()=>{c()}),Oe(()=>e.data,()=>{const f=[],h=a.value.map(p=>p[o.value]);t.checked.forEach(p=>{h.includes(p)&&f.push(p)}),t.checkChangeByUser=!1,t.checked=f}),Oe(()=>e.defaultChecked,(f,h)=>{if(h&&f.length===h.length&&f.every(g=>h.includes(g)))return;const p=[],m=i.value.map(g=>g[o.value]);f.forEach(g=>{m.includes(g)&&p.push(g)}),t.checkChangeByUser=!1,t.checked=p},{immediate:!0}),{labelProp:s,keyProp:o,disabledProp:r,filteredData:a,checkableData:i,checkedSummary:l,isIndeterminate:u,updateAllChecked:c,handleAllCheckedChange:d}},pye=me({name:"ElTransferPanel",components:{ElCheckboxGroup:JR,ElCheckbox:Jr,ElInput:Tr,OptionContent:({option:e})=>e},props:fye,emits:[r1],setup(e,{slots:t}){const{t:n}=kn(),s=Cn({checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}),{labelProp:o,keyProp:r,disabledProp:a,filteredData:i,checkedSummary:l,isIndeterminate:u,handleAllCheckedChange:c}=hye(e,s),d=_(()=>s.query.length>0&&i.value.length===0),f=_(()=>!!t.default()[0].children.length),{checked:h,allChecked:p,query:m,inputHover:g,checkChangeByUser:v}=so(s);return{labelProp:o,keyProp:r,disabledProp:a,filteredData:i,checkedSummary:l,isIndeterminate:u,handleAllCheckedChange:c,checked:h,allChecked:p,query:m,inputHover:g,checkChangeByUser:v,hasNoMatch:d,SearchIcon:RJ,hasFooter:f,t:n}}}),mye={class:"el-transfer-panel"},gye={class:"el-transfer-panel__header"},vye={key:0,class:"el-transfer-panel__footer"};function bye(e,t,n,s,o,r){const a=re("el-checkbox"),i=re("el-input"),l=re("option-content"),u=re("el-checkbox-group");return T(),B("div",mye,[W("p",gye,[le(a,{modelValue:e.allChecked,"onUpdate:modelValue":t[0]||(t[0]=c=>e.allChecked=c),indeterminate:e.isIndeterminate,onChange:e.handleAllCheckedChange},{default:oe(()=>[jt(Fe(e.title)+" ",1),W("span",null,Fe(e.checkedSummary),1)]),_:1},8,["modelValue","indeterminate","onChange"])]),W("div",{class:q(["el-transfer-panel__body",e.hasFooter?"is-with-footer":""])},[e.filterable?(T(),ve(i,{key:0,modelValue:e.query,"onUpdate:modelValue":t[1]||(t[1]=c=>e.query=c),class:"el-transfer-panel__filter",size:"default",placeholder:e.placeholder,"prefix-icon":e.SearchIcon,clearable:"",onMouseenter:t[2]||(t[2]=c=>e.inputHover=!0),onMouseleave:t[3]||(t[3]=c=>e.inputHover=!1)},null,8,["modelValue","placeholder","prefix-icon"])):ce("v-if",!0),$t(le(u,{modelValue:e.checked,"onUpdate:modelValue":t[4]||(t[4]=c=>e.checked=c),class:q([{"is-filterable":e.filterable},"el-transfer-panel__list"])},{default:oe(()=>[(T(!0),B(it,null,Yt(e.filteredData,c=>(T(),ve(a,{key:c[e.keyProp],class:"el-transfer-panel__item",label:c[e.keyProp],disabled:c[e.disabledProp]},{default:oe(()=>[le(l,{option:e.optionRender(c)},null,8,["option"])]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[Qt,!e.hasNoMatch&&e.data.length>0]]),$t(W("p",{class:"el-transfer-panel__empty"},Fe(e.hasNoMatch?e.t("el.transfer.noMatch"):e.t("el.transfer.noData")),513),[[Qt,e.hasNoMatch||e.data.length===0]])],2),e.hasFooter?(T(),B("p",vye,[_e(e.$slots,"default")])):ce("v-if",!0)])}var yye=We(pye,[["render",bye]]);const wye=e=>{const t=_(()=>e.props.key),n=_(()=>e.data.reduce((r,a)=>(r[a[t.value]]=a)&&r,{})),s=_(()=>e.data.filter(r=>!e.modelValue.includes(r[t.value]))),o=_(()=>e.targetOrder==="original"?e.data.filter(r=>e.modelValue.includes(r[t.value])):e.modelValue.reduce((r,a)=>{const i=n.value[a];return i&&r.push(i),r},[]));return{propsKey:t,sourceData:s,targetData:o}},C3="left-check-change",k3="right-check-change",$ye=(e,t)=>({onSourceCheckedChange:(o,r)=>{e.leftChecked=o,r!==void 0&&t(C3,o,r)},onTargetCheckedChange:(o,r)=>{e.rightChecked=o,r!==void 0&&t(k3,o,r)}}),Cye=(e,t,n,s)=>{const o=(i,l,u)=>{s(Ft,i),s(Ms,i,l,u)};return{addToLeft:()=>{const i=e.modelValue.slice();t.rightChecked.forEach(l=>{const u=i.indexOf(l);u>-1&&i.splice(u,1)}),o(i,"left",t.rightChecked)},addToRight:()=>{let i=e.modelValue.slice();const l=e.data.filter(u=>{const c=u[n.value];return t.leftChecked.includes(c)&&!e.modelValue.includes(c)}).map(u=>u[n.value]);i=e.targetOrder==="unshift"?l.concat(i):i.concat(l),e.targetOrder==="original"&&(i=e.data.filter(u=>i.includes(u[n.value])).map(u=>u[n.value])),o(i,"right",t.leftChecked)}}},kye=me({name:"ElTransfer",components:{TransferPanel:yye,ElButton:Ia,ElIcon:_t,ArrowLeft:ru,ArrowRight:Er},props:{data:{type:Array,default:()=>[]},titles:{type:Array,default:()=>[]},buttonTexts:{type:Array,default:()=>[]},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:()=>[]},rightDefaultChecked:{type:Array,default:()=>[]},renderContent:Function,modelValue:{type:Array,default:()=>[]},format:{type:Object,default:()=>({})},filterable:{type:Boolean,default:!1},props:{type:Object,default:()=>({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,default:"original",validator:e=>["original","push","unshift"].includes(e)}},emits:[Ft,Ms,C3,k3],setup(e,{emit:t,slots:n}){const{t:s}=kn(),o=Ze(oa,{}),r=Cn({leftChecked:[],rightChecked:[]}),{propsKey:a,sourceData:i,targetData:l}=wye(e),{onSourceCheckedChange:u,onTargetCheckedChange:c}=$ye(r,t),{addToLeft:d,addToRight:f}=Cye(e,r,a,t),h=L(),p=L(),m=w=>{switch(w){case"left":h.value.query="";break;case"right":p.value.query="";break}},g=_(()=>e.buttonTexts.length===2),v=_(()=>e.titles[0]||s("el.transfer.titles.0")),b=_(()=>e.titles[1]||s("el.transfer.titles.1")),$=_(()=>e.filterPlaceholder||s("el.transfer.filterPlaceholder"));Oe(()=>e.modelValue,()=>{var w;(w=o.validate)==null||w.call(o,"change")});const y=_(()=>w=>e.renderContent?e.renderContent(He,w):n.default?n.default({option:w}):He("span",w[e.props.label]||w[e.props.key]));return Ut(ut({sourceData:i,targetData:l,onSourceCheckedChange:u,onTargetCheckedChange:c,addToLeft:d,addToRight:f},so(r)),{hasButtonTexts:g,leftPanelTitle:v,rightPanelTitle:b,panelFilterPlaceholder:$,clearQuery:m,leftPanel:h,rightPanel:p,optionRender:y})}}),Sye={class:"el-transfer"},xye={class:"el-transfer__buttons"},Iye={key:0},Eye={key:0};function Tye(e,t,n,s,o,r){const a=re("transfer-panel"),i=re("arrow-left"),l=re("el-icon"),u=re("el-button"),c=re("arrow-right");return T(),B("div",Sye,[le(a,{ref:"leftPanel",data:e.sourceData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,title:e.leftPanelTitle,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,"default-checked":e.leftDefaultChecked,props:e.props,onCheckedChange:e.onSourceCheckedChange},{default:oe(()=>[_e(e.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),W("div",xye,[le(u,{type:"primary",class:q(["el-transfer__button",e.hasButtonTexts?"is-with-texts":""]),disabled:e.rightChecked.length===0,onClick:e.addToLeft},{default:oe(()=>[le(l,null,{default:oe(()=>[le(i)]),_:1}),e.buttonTexts[0]!==void 0?(T(),B("span",Iye,Fe(e.buttonTexts[0]),1)):ce("v-if",!0)]),_:1},8,["class","disabled","onClick"]),le(u,{type:"primary",class:q(["el-transfer__button",e.hasButtonTexts?"is-with-texts":""]),disabled:e.leftChecked.length===0,onClick:e.addToRight},{default:oe(()=>[e.buttonTexts[1]!==void 0?(T(),B("span",Eye,Fe(e.buttonTexts[1]),1)):ce("v-if",!0),le(l,null,{default:oe(()=>[le(c)]),_:1})]),_:1},8,["class","disabled","onClick"])]),le(a,{ref:"rightPanel",data:e.targetData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,title:e.rightPanelTitle,"default-checked":e.rightDefaultChecked,props:e.props,onCheckedChange:e.onTargetCheckedChange},{default:oe(()=>[_e(e.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])])}var $m=We(kye,[["render",Tye]]);$m.install=e=>{e.component($m.name,$m)};const Nye=$m,Aye=Nye,Zu="$treeNodeId",RE=function(e,t){!t||t[Zu]||Object.defineProperty(t,Zu,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},I$=function(e,t){return e?t[e]:t[Zu]},a1=e=>{let t=!0,n=!0,s=!0;for(let o=0,r=e.length;o<r;o++){const a=e[o];(a.checked!==!0||a.indeterminate)&&(t=!1,a.disabled||(s=!1)),(a.checked!==!1||a.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:s,half:!t&&!n}},Cm=function(e){if(e.childNodes.length===0)return;const{all:t,none:n,half:s}=a1(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):s?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const o=e.parent;!o||o.level===0||e.store.checkStrictly||Cm(o)},Dp=function(e,t){const n=e.store.props,s=e.data||{},o=n[t];if(typeof o=="function")return o(s,e);if(typeof o=="string")return s[o];if(typeof o=="undefined"){const r=s[t];return r===void 0?"":r}};let Dye=0;class Ol{constructor(t){this.id=Dye++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)Wt(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const n=t.props;if(n&&typeof n.isLeaf!="undefined"){const r=Dp(this,"isLeaf");typeof r=="boolean"&&(this.isLeafByUser=r)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&this.expand(),Array.isArray(this.data)||RE(this,this.data),!this.data)return;const s=t.defaultExpandedKeys,o=t.key;o&&s&&s.indexOf(this.key)!==-1&&this.expand(null,t.autoExpandParent),o&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Array.isArray(t)||RE(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&this.data instanceof Array?n=this.data:n=Dp(this,"children")||[];for(let s=0,o=n.length;s<o;s++)this.insertChild({data:n[s]})}get label(){return Dp(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return Dp(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(s=>s===t||n&&s.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,s){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof Ol)){if(!s){const o=this.getChildren(!0);o.indexOf(t.data)===-1&&(typeof n=="undefined"||n<0?o.push(t.data):o.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=Cn(new Ol(t)),t instanceof Ol&&t.initialize()}t.level=this.level+1,typeof n=="undefined"||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let s;n&&(s=this.childNodes.indexOf(n)),this.insertChild(t,s)}insertAfter(t,n){let s;n&&(s=this.childNodes.indexOf(n),s!==-1&&(s+=1)),this.insertChild(t,s)}removeChild(t){const n=this.getChildren()||[],s=n.indexOf(t.data);s>-1&&n.splice(s,1);const o=this.childNodes.indexOf(t);o>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let s=0;s<this.childNodes.length;s++)if(this.childNodes[s].data===t){n=this.childNodes[s];break}n&&this.removeChild(n)}expand(t,n){const s=()=>{if(n){let o=this.parent;for(;o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(o=>{o.canFocus=!0})};this.shouldLoadData()?this.loadData(o=>{Array.isArray(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Cm(this),s())}):s()}doCreateChildren(t,n={}){t.forEach(s=>{this.insertChild(Object.assign({data:s},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser!="undefined"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,s,o){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:a,allWithoutDisable:i}=a1(this.childNodes);!this.isLeaf&&!a&&i&&(this.checked=!1,t=!1);const l=()=>{if(n){const u=this.childNodes;for(let f=0,h=u.length;f<h;f++){const p=u[f];o=o||t!==!1;const m=p.disabled?p.checked:o;p.setChecked(m,n,!0,o)}const{half:c,all:d}=a1(u);d||(this.checked=d,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Cm(this)},{checked:t!==!1});return}else l()}const r=this.parent;!r||r.level===0||s||Cm(r)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const s=this.store.props;let o="children";return s&&(o=s.children||"children"),n[o]===void 0&&(n[o]=null),t&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(r=>r.data),s={},o=[];t.forEach((r,a)=>{const i=r[Zu];!!i&&n.findIndex(u=>u[Zu]===i)>=0?s[i]={index:a,data:r}:o.push({index:a,data:r})}),this.store.lazy||n.forEach(r=>{s[r[Zu]]||this.removeChildByData(r)}),o.forEach(({index:r,data:a})=>{this.insertChild({data:a},r)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const s=o=>{this.loaded=!0,this.loading=!1,this.childNodes=[],this.doCreateChildren(o,n),this.updateLeafState(),t&&t.call(this,o)};this.store.load(this,s)}else t&&t.call(this)}}class Rye{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const n in t)Wt(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){this.root=new Ol({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load?this.load(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()}):this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,s=this.lazy,o=function(r){const a=r.root?r.root.childNodes:r.childNodes;if(a.forEach(i=>{i.visible=n.call(i,t,i.data,i),o(i)}),!r.visible&&a.length){let i=!0;i=!a.some(l=>l.visible),r.root?r.root.visible=i===!1:r.visible=i===!1}!t||r.visible&&!r.isLeaf&&!s&&r.expand()};o(this)}setData(t){t!==this.root.data?(this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(t){if(t instanceof Ol)return t;const n=typeof t!="object"?t:I$(this.key,t);return this.nodesMap[n]||null}insertBefore(t,n){const s=this.getNode(n);s.parent.insertBefore({data:t},s)}insertAfter(t,n){const s=this.getNode(n);s.parent.insertAfter({data:t},s)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const s=n?this.getNode(n):this.root;s&&s.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(s=>{const o=n[s];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).indexOf(t.key)!==-1&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;!t||!t.data||(n?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(s=>{this.deregisterNode(s)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const s=[],o=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(i=>{(i.checked||n&&i.indeterminate)&&(!t||t&&i.isLeaf)&&s.push(i.data),o(i)})};return o(this),s}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(r=>{r.indeterminate&&t.push(r.data),n(r)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const s in n)Wt(n,s)&&t.push(n[s]);return t}updateChildren(t,n){const s=this.nodesMap[t];if(!s)return;const o=s.childNodes;for(let r=o.length-1;r>=0;r--){const a=o[r];this.remove(a.data)}for(let r=0,a=n.length;r<a;r++){const i=n[r];this.append(i,s.data)}}_setCheckedKeys(t,n=!1,s){const o=this._getAllNodes().sort((i,l)=>l.level-i.level),r=Object.create(null),a=Object.keys(s);o.forEach(i=>i.setChecked(!1,!1));for(let i=0,l=o.length;i<l;i++){const u=o[i],c=u.data[t].toString();if(!(a.indexOf(c)>-1)){u.checked&&!r[c]&&u.setChecked(!1,!1);continue}let f=u.parent;for(;f&&f.level>0;)r[f.data[t]]=!0,f=f.parent;if(u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),n){u.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(g=>{g.isLeaf||g.setChecked(!1,!1),h(g)})};h(u)}}}setCheckedNodes(t,n=!1){const s=this.key,o={};t.forEach(r=>{o[(r||{})[s]]=!0}),this._setCheckedKeys(s,n,o)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const s=this.key,o={};t.forEach(r=>{o[r]=!0}),this._setCheckedKeys(s,n,o)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const s=this.getNode(n);s&&s.expand(null,this.autoExpandParent)})}setChecked(t,n,s){const o=this.getNode(t);o&&o.setChecked(!!n,s)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){const s=t[this.key],o=this.nodesMap[s];this.setCurrentNode(o),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,n=!0){if(t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const s=this.getNode(t);s&&(this.setCurrentNode(s),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const _ye=me({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=Ze("NodeInstance"),n=Ze("RootTree");return()=>{const s=e.node,{data:o,store:r}=s;return e.renderContent?e.renderContent(He,{_self:t,node:s,data:o,store:r}):n.ctx.slots.default?n.ctx.slots.default({node:s,data:o}):He("span",{class:"el-tree-node__label"},[s.label])}}});function S3(e){const t=Ze("TreeNodeMap",null),n={treeNodeExpand:s=>{e.node!==s&&e.node.collapse()},children:[]};return t&&t.children.push(n),zt("TreeNodeMap",n),{broadcastExpanded:s=>{if(!!e.accordion)for(const o of n.children)o.treeNodeExpand(s)}}}const x3=Symbol("dragEvents");function Oye({props:e,ctx:t,el$:n,dropIndicator$:s,store:o}){const r=L({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return zt(x3,{treeNodeDragStart:({event:u,treeNode:c})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(c.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}r.value.draggingNode=c,t.emit("node-drag-start",c.node,u)},treeNodeDragOver:({event:u,treeNode:c})=>{const d=c,f=r.value.dropNode;f&&f!==d&&Qs(f.$el,"is-drop-inner");const h=r.value.draggingNode;if(!h||!d)return;let p=!0,m=!0,g=!0,v=!0;typeof e.allowDrop=="function"&&(p=e.allowDrop(h.node,d.node,"prev"),v=m=e.allowDrop(h.node,d.node,"inner"),g=e.allowDrop(h.node,d.node,"next")),u.dataTransfer.dropEffect=m||p||g?"move":"none",(p||m||g)&&f!==d&&(f&&t.emit("node-drag-leave",h.node,f.node,u),t.emit("node-drag-enter",h.node,d.node,u)),(p||m||g)&&(r.value.dropNode=d),d.node.nextSibling===h.node&&(g=!1),d.node.previousSibling===h.node&&(p=!1),d.node.contains(h.node,!1)&&(m=!1),(h.node===d.node||h.node.contains(d.node))&&(p=!1,m=!1,g=!1);const b=d.$el.getBoundingClientRect(),$=n.value.getBoundingClientRect();let y;const w=p?m?.25:g?.45:1:-1,C=g?m?.75:p?.55:0:1;let k=-9999;const S=u.clientY-b.top;S<b.height*w?y="before":S>b.height*C?y="after":m?y="inner":y="none";const E=d.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),x=s.value;y==="before"?k=E.top-$.top:y==="after"&&(k=E.bottom-$.top),x.style.top=`${k}px`,x.style.left=`${E.right-$.left}px`,y==="inner"?To(d.$el,"is-drop-inner"):Qs(d.$el,"is-drop-inner"),r.value.showDropIndicator=y==="before"||y==="after",r.value.allowDrop=r.value.showDropIndicator||v,r.value.dropType=y,t.emit("node-drag-over",h.node,d.node,u)},treeNodeDragEnd:u=>{const{draggingNode:c,dropType:d,dropNode:f}=r.value;if(u.preventDefault(),u.dataTransfer.dropEffect="move",c&&f){const h={data:c.node.data};d!=="none"&&c.node.remove(),d==="before"?f.node.parent.insertBefore(h,f.node):d==="after"?f.node.parent.insertAfter(h,f.node):d==="inner"&&f.node.insertChild(h),d!=="none"&&o.value.registerNode(h),Qs(f.$el,"is-drop-inner"),t.emit("node-drag-end",c.node,f.node,d,u),d!=="none"&&t.emit("node-drop",c.node,f.node,d,u)}c&&!f&&t.emit("node-drag-end",c.node,null,d,u),r.value.showDropIndicator=!1,r.value.draggingNode=null,r.value.dropNode=null,r.value.allowDrop=!0}}),{dragState:r}}const Mye=me({name:"ElTreeNode",components:{ElCollapseTransition:Kg,ElCheckbox:Jr,NodeContent:_ye,ElIcon:_t,Loading:Xa},props:{node:{type:Ol,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const{broadcastExpanded:n}=S3(e),s=Ze("RootTree"),o=L(!1),r=L(!1),a=L(null),i=L(null),l=L(null),u=Ze(x3),c=Lt();zt("NodeInstance",c),e.node.expanded&&(o.value=!0,r.value=!0);const d=s.props.children||"children";Oe(()=>{const S=e.node.data[d];return S&&[...S]},()=>{e.node.updateChildren()}),Oe(()=>e.node.indeterminate,S=>{p(e.node.checked,S)}),Oe(()=>e.node.checked,S=>{p(S,e.node.indeterminate)}),Oe(()=>e.node.expanded,S=>{dt(()=>o.value=S),S&&(r.value=!0)});const f=S=>I$(s.props.nodeKey,S.data),h=S=>{const E=e.props.class;if(!E)return{};let x;if(Pt(E)){const{data:N}=S;x=E(N,S)}else x=E;return Xt(x)?{[x]:!0}:x},p=(S,E)=>{(a.value!==S||i.value!==E)&&s.ctx.emit("check-change",e.node.data,S,E),a.value=S,i.value=E},m=S=>{const E=s.store.value;E.setCurrentNode(e.node),s.ctx.emit("current-change",E.currentNode?E.currentNode.data:null,E.currentNode),s.currentNode.value=e.node,s.props.expandOnClickNode&&v(),s.props.checkOnClickNode&&!e.node.disabled&&b(null,{target:{checked:!e.node.checked}}),s.ctx.emit("node-click",e.node.data,e.node,c,S)},g=S=>{s.instance.vnode.props.onNodeContextmenu&&(S.stopPropagation(),S.preventDefault()),s.ctx.emit("node-contextmenu",S,e.node.data,e.node,c)},v=()=>{e.node.isLeaf||(o.value?(s.ctx.emit("node-collapse",e.node.data,e.node,c),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,c)))},b=(S,E)=>{e.node.setChecked(E.target.checked,!s.props.checkStrictly),dt(()=>{const x=s.store.value;s.ctx.emit("check",e.node.data,{checkedNodes:x.getCheckedNodes(),checkedKeys:x.getCheckedKeys(),halfCheckedNodes:x.getHalfCheckedNodes(),halfCheckedKeys:x.getHalfCheckedKeys()})})};return{node$:l,tree:s,expanded:o,childNodeRendered:r,oldChecked:a,oldIndeterminate:i,getNodeKey:f,getNodeClass:h,handleSelectChange:p,handleClick:m,handleContextMenu:g,handleExpandIconClick:v,handleCheckChange:b,handleChildNodeExpand:(S,E,x)=>{n(E),s.ctx.emit("node-expand",S,E,x)},handleDragStart:S=>{!s.props.draggable||u.treeNodeDragStart({event:S,treeNode:e})},handleDragOver:S=>{S.preventDefault(),!!s.props.draggable&&u.treeNodeDragOver({event:S,treeNode:{$el:l.value,node:e.node}})},handleDrop:S=>{S.preventDefault()},handleDragEnd:S=>{!s.props.draggable||u.treeNodeDragEnd(S)},CaretRight:qD}}}),Fye=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],Pye=["aria-expanded"];function Lye(e,t,n,s,o,r){const a=re("el-icon"),i=re("el-checkbox"),l=re("loading"),u=re("node-content"),c=re("el-tree-node"),d=re("el-collapse-transition");return $t((T(),B("div",{ref:"node$",class:q(["el-tree-node",ut({"is-expanded":e.expanded,"is-current":e.node.isCurrent,"is-hidden":!e.node.visible,"is-focusable":!e.node.disabled,"is-checked":!e.node.disabled&&e.node.checked},e.getNodeClass(e.node))]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=ht((...f)=>e.handleClick&&e.handleClick(...f),["stop"])),onContextmenu:t[2]||(t[2]=(...f)=>e.handleContextMenu&&e.handleContextMenu(...f)),onDragstart:t[3]||(t[3]=ht((...f)=>e.handleDragStart&&e.handleDragStart(...f),["stop"])),onDragover:t[4]||(t[4]=ht((...f)=>e.handleDragOver&&e.handleDragOver(...f),["stop"])),onDragend:t[5]||(t[5]=ht((...f)=>e.handleDragEnd&&e.handleDragEnd(...f),["stop"])),onDrop:t[6]||(t[6]=ht((...f)=>e.handleDrop&&e.handleDrop(...f),["stop"]))},[W("div",{class:"el-tree-node__content",style:nt({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(T(),ve(a,{key:0,class:q([{"is-leaf":e.node.isLeaf,expanded:!e.node.isLeaf&&e.expanded},"el-tree-node__expand-icon"]),onClick:ht(e.handleExpandIconClick,["stop"])},{default:oe(()=>[(T(),ve(en(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):ce("v-if",!0),e.showCheckbox?(T(),ve(i,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=ht(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):ce("v-if",!0),e.node.loading?(T(),ve(a,{key:2,class:"el-tree-node__loading-icon is-loading"},{default:oe(()=>[le(l)]),_:1})):ce("v-if",!0),le(u,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],4),le(d,null,{default:oe(()=>[!e.renderAfterExpand||e.childNodeRendered?$t((T(),B("div",{key:0,class:"el-tree-node__children",role:"group","aria-expanded":e.expanded},[(T(!0),B(it,null,Yt(e.node.childNodes,f=>(T(),ve(c,{key:e.getNodeKey(f),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:f,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],8,Pye)),[[Qt,e.expanded]]):ce("v-if",!0)]),_:1})],42,Fye)),[[Qt,e.node.visible]])}var Bye=We(Mye,[["render",Lye]]);function zye({el$:e},t){const n=uo([]),s=uo([]);Mt(()=>{r(),gn(e.value,"keydown",o)}),os(()=>{zn(e.value,"keydown",o)}),sa(()=>{n.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),s.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),Oe(s,a=>{a.forEach(i=>{i.setAttribute("tabindex","-1")})});const o=a=>{const i=a.target;if(i.className.indexOf("el-tree-node")===-1)return;const l=a.code;n.value=Array.from(e.value.querySelectorAll(".is-focusable[role=treeitem]"));const u=n.value.indexOf(i);let c;if([Qe.up,Qe.down].indexOf(l)>-1){if(a.preventDefault(),l===Qe.up){c=u===-1?0:u!==0?u-1:n.value.length-1;const f=c;for(;!t.value.getNode(n.value[c].dataset.key).canFocus;){if(c--,c===f){c=-1;break}c<0&&(c=n.value.length-1)}}else{c=u===-1?0:u<n.value.length-1?u+1:0;const f=c;for(;!t.value.getNode(n.value[c].dataset.key).canFocus;){if(c++,c===f){c=-1;break}c>=n.value.length&&(c=0)}}c!==-1&&n.value[c].focus()}[Qe.left,Qe.right].indexOf(l)>-1&&(a.preventDefault(),i.click());const d=i.querySelector('[type="checkbox"]');[Qe.enter,Qe.space].indexOf(l)>-1&&d&&(a.preventDefault(),d.click())},r=()=>{var a;n.value=Array.from(e.value.querySelectorAll(".is-focusable[role=treeitem]")),s.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const i=e.value.querySelectorAll(".is-checked[role=treeitem]");if(i.length){i[0].setAttribute("tabindex","0");return}(a=n.value[0])==null||a.setAttribute("tabindex","0")}}const Vye=me({name:"ElTree",components:{ElTreeNode:Bye},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:[String,Object]},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=kn(),s=L(new Rye({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));s.value.initialize();const o=L(s.value.root),r=L(null),a=L(null),i=L(null),{broadcastExpanded:l}=S3(e),{dragState:u}=Oye({props:e,ctx:t,el$:a,dropIndicator$:i,store:s});zye({el$:a},s);const c=_(()=>{const{childNodes:R}=o.value;return!R||R.length===0||R.every(({visible:P})=>!P)});Oe(()=>e.defaultCheckedKeys,R=>{s.value.setDefaultCheckedKey(R)}),Oe(()=>e.defaultExpandedKeys,R=>{s.value.defaultExpandedKeys=R,s.value.setDefaultExpandedKeys(R)}),Oe(()=>e.data,R=>{s.value.setData(R)},{deep:!0}),Oe(()=>e.checkStrictly,R=>{s.value.checkStrictly=R});const d=R=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(R)},f=R=>I$(e.nodeKey,R.data),h=R=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const P=s.value.getNode(R);if(!P)return[];const V=[P.data];let G=P.parent;for(;G&&G!==o.value;)V.push(G.data),G=G.parent;return V.reverse()},p=(R,P)=>s.value.getCheckedNodes(R,P),m=R=>s.value.getCheckedKeys(R),g=()=>{const R=s.value.getCurrentNode();return R?R.data:null},v=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const R=g();return R?R[e.nodeKey]:null},b=(R,P)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(R,P)},$=(R,P)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(R,P)},y=(R,P,V)=>{s.value.setChecked(R,P,V)},w=()=>s.value.getHalfCheckedNodes(),C=()=>s.value.getHalfCheckedKeys(),k=(R,P=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");s.value.setUserCurrentNode(R,P)},S=(R,P=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");s.value.setCurrentNodeKey(R,P)},E=R=>s.value.getNode(R),x=R=>{s.value.remove(R)},N=(R,P)=>{s.value.append(R,P)},A=(R,P)=>{s.value.insertBefore(R,P)},D=(R,P)=>{s.value.insertAfter(R,P)},M=(R,P,V)=>{l(P),t.emit("node-expand",R,P,V)},F=(R,P)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(R,P)};return zt("RootTree",{ctx:t,props:e,store:s,root:o,currentNode:r,instance:Lt()}),{store:s,root:o,currentNode:r,dragState:u,el$:a,dropIndicator$:i,isEmpty:c,filter:d,getNodeKey:f,getNodePath:h,getCheckedNodes:p,getCheckedKeys:m,getCurrentNode:g,getCurrentKey:v,setCheckedNodes:b,setCheckedKeys:$,setChecked:y,getHalfCheckedNodes:w,getHalfCheckedKeys:C,setCurrentNode:k,setCurrentKey:S,t:n,getNode:E,remove:x,append:N,insertBefore:A,insertAfter:D,handleNodeExpand:M,updateKeyChildren:F}}}),Wye={key:0,class:"el-tree__empty-block"},Hye={class:"el-tree__empty-text"},Uye={ref:"dropIndicator$",class:"el-tree__drop-indicator"};function Gye(e,t,n,s,o,r){var a;const i=re("el-tree-node");return T(),B("div",{ref:"el$",class:q(["el-tree",{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":e.dragState.dropType==="inner"}]),role:"tree"},[(T(!0),B(it,null,Yt(e.root.childNodes,l=>(T(),ve(i,{key:e.getNodeKey(l),node:l,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(T(),B("div",Wye,[W("span",Hye,Fe((a=e.emptyText)!=null?a:e.t("el.tree.emptyText")),1)])):ce("v-if",!0),$t(W("div",Uye,null,512),[[Qt,e.dragState.showDropIndicator]])],2)}var km=We(Vye,[["render",Gye]]);km.install=e=>{e.component(km.name,km)};const Kye=km,jye=Kye,E$=Symbol(),qye={key:-1,level:-1,data:{}};var Id=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(Id||{}),i1=(e=>(e.ADD="add",e.DELETE="delete",e))(i1||{});const Xye=gt({data:{type:Je(Array),default:()=>vs([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Je(Object),default:()=>vs({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Je(Array),default:()=>vs([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Je(Array),default:()=>vs([])},indent:{type:Number,default:16},icon:{type:String},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Je([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Je(Function)},perfMode:{type:Boolean,default:!0}}),Yye=gt({node:{type:Je(Object),default:()=>vs(qye)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1}}),Zye=gt({node:{type:Je(Object),required:!0}}),I3="node-click",E3="node-expand",T3="node-collapse",N3="current-change",A3="check",D3="check-change",R3="node-contextmenu",Jye={[I3]:(e,t,n)=>e&&t&&n,[E3]:(e,t)=>e&&t,[T3]:(e,t)=>e&&t,[N3]:(e,t)=>e&&t,[A3]:(e,t)=>e&&t,[D3]:(e,t)=>e&&typeof t=="boolean",[R3]:(e,t,n)=>e&&t&&n},Qye={click:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&typeof t=="boolean"};function e1e(e,t){const n=L(new Set),s=L(new Set),{emit:o}=Lt();Oe(()=>t.value,()=>dt(()=>{b(e.defaultCheckedKeys)}),{immediate:!0});const r=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:$,maxLevel:y}=t.value,w=n.value,C=new Set;for(let k=y-1;k>=1;--k){const S=$.get(k);!S||S.forEach(E=>{const x=E.children;if(x){let N=!0,A=!1;for(let D=0;D<x.length;++D){const F=x[D].key;if(w.has(F))A=!0;else if(C.has(F)){N=!1,A=!0;break}else N=!1}N?w.add(E.key):A?(C.add(E.key),w.delete(E.key)):(w.delete(E.key),C.delete(E.key))}})}s.value=C},a=$=>n.value.has($.key),i=$=>s.value.has($.key),l=($,y,w=!0)=>{const C=n.value,k=(S,E)=>{C[E?i1.ADD:i1.DELETE](S.key);const x=S.children;!e.checkStrictly&&x&&x.forEach(N=>{N.disabled||k(N,E)})};k($,y),r(),w&&u($,y)},u=($,y)=>{const{checkedNodes:w,checkedKeys:C}=p(),{halfCheckedNodes:k,halfCheckedKeys:S}=m();o(A3,$.data,{checkedKeys:C,checkedNodes:w,halfCheckedKeys:S,halfCheckedNodes:k}),o(D3,$.data,y)};function c($=!1){return p($).checkedKeys}function d($=!1){return p($).checkedNodes}function f(){return m().halfCheckedKeys}function h(){return m().halfCheckedNodes}function p($=!1){const y=[],w=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:C}=t.value;n.value.forEach(k=>{const S=C.get(k);S&&(!$||$&&S.isLeaf)&&(w.push(k),y.push(S.data))})}return{checkedKeys:w,checkedNodes:y}}function m(){const $=[],y=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:w}=t.value;s.value.forEach(C=>{const k=w.get(C);k&&(y.push(C),$.push(k.data))})}return{halfCheckedNodes:$,halfCheckedKeys:y}}function g($){n.value.clear(),b($)}function v($,y){if((t==null?void 0:t.value)&&e.showCheckbox){const w=t.value.treeNodeMap.get($);w&&l(w,y,!1)}}function b($){if(t==null?void 0:t.value){const{treeNodeMap:y}=t.value;if(e.showCheckbox&&y&&$)for(let w=0;w<$.length;++w){const C=$[w],k=y.get(C);k&&!a(k)&&l(k,!0,!1)}}}return{updateCheckedKeys:r,toggleCheckbox:l,isChecked:a,isIndeterminate:i,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:v,setCheckedKeys:g}}function t1e(e,t){const n=L(new Set([])),s=L(new Set([])),o=_(()=>Pt(e.filterMethod));function r(i){var l;if(!o.value)return;const u=new Set,c=s.value,d=n.value,f=[],h=((l=t.value)==null?void 0:l.treeNodes)||[],p=e.filterMethod;d.clear();function m(g){g.forEach(v=>{f.push(v),(p==null?void 0:p(i,v.data))?f.forEach($=>{u.add($.key)}):v.isLeaf&&d.add(v.key);const b=v.children;if(b&&m(b),!v.isLeaf){if(!u.has(v.key))d.add(v.key);else if(b){let $=!0;for(let y=0;y<b.length;++y){const w=b[y];if(!d.has(w.key)){$=!1;break}}$?c.add(v.key):c.delete(v.key)}}f.pop()})}return m(h),u}function a(i){return s.value.has(i.key)}return{hiddenExpandIconKeySet:s,hiddenNodeKeySet:n,doFilter:r,isForceHiddenExpandIcon:a}}function n1e(e,t){const n=L(new Set(e.defaultExpandedKeys)),s=L(),o=uo();Oe(()=>e.currentNodeKey,X=>{s.value=X},{immediate:!0}),Oe(()=>e.data,X=>{K(X)},{immediate:!0});const{isIndeterminate:r,isChecked:a,toggleCheckbox:i,getCheckedKeys:l,getCheckedNodes:u,getHalfCheckedKeys:c,getHalfCheckedNodes:d,setChecked:f,setCheckedKeys:h}=e1e(e,o),{doFilter:p,hiddenNodeKeySet:m,isForceHiddenExpandIcon:g}=t1e(e,o),v=_(()=>{var X;return((X=e.props)==null?void 0:X.value)||Id.KEY}),b=_(()=>{var X;return((X=e.props)==null?void 0:X.children)||Id.CHILDREN}),$=_(()=>{var X;return((X=e.props)==null?void 0:X.disabled)||Id.DISABLED}),y=_(()=>{var X;return((X=e.props)==null?void 0:X.label)||Id.LABEL}),w=_(()=>{const X=n.value,Y=m.value,ie=[],xe=o.value&&o.value.treeNodes||[];function Le(){const Be=[];for(let Pe=xe.length-1;Pe>=0;--Pe)Be.push(xe[Pe]);for(;Be.length;){const Pe=Be.pop();if(!!Pe&&(Y.has(Pe.key)||ie.push(Pe),X.has(Pe.key))){const U=Pe.children;if(U){const Q=U.length;for(let H=Q-1;H>=0;--H)Be.push(U[H])}}}}return Le(),ie}),C=_(()=>w.value.length>0);function k(X){const Y=new Map,ie=new Map;let xe=1;function Le(Pe,U=1,Q=void 0){var H;const ne=[];for(let ye=0;ye<Pe.length;++ye){const J=Pe[ye],Ne=x(J),Ie={level:U,key:Ne,data:J};Ie.label=A(J),Ie.parent=Q;const fe=E(J);Ie.disabled=N(J),Ie.isLeaf=!fe||fe.length===0,fe&&fe.length&&(Ie.children=Le(fe,U+1,Ie)),ne.push(Ie),Y.set(Ne,Ie),ie.has(U)||ie.set(U,[]),(H=ie.get(U))==null||H.push(Ie)}return U>xe&&(xe=U),ne}const Be=Le(X);return{treeNodeMap:Y,levelTreeNodeMap:ie,maxLevel:xe,treeNodes:Be}}function S(X){const Y=p(X);Y&&(n.value=Y)}function E(X){return X[b.value]}function x(X){return X?X[v.value]:""}function N(X){return X[$.value]}function A(X){return X[y.value]}function D(X){n.value.has(X.key)?V(X):P(X)}function M(X,Y){t(I3,X.data,X,Y),F(X),e.expandOnClickNode&&D(X),e.showCheckbox&&e.checkOnClickNode&&!X.disabled&&i(X,!a(X),!0)}function F(X){ke(X)||(s.value=X.key,t(N3,X.data,X))}function R(X,Y){i(X,Y)}function P(X){const Y=n.value;if((o==null?void 0:o.value)&&e.accordion){const{treeNodeMap:ie}=o.value;Y.forEach(xe=>{const Le=ie.get(xe);Le&&Le.level===Le.level&&Y.delete(xe)})}Y.add(X.key),t(E3,X.data,X)}function V(X){n.value.delete(X.key),t(T3,X.data,X)}function G(X){return n.value.has(X.key)}function se(X){return!!X.disabled}function ke(X){const Y=s.value;return!!Y&&Y===X.key}function te(){var X,Y;if(!!s.value)return(Y=(X=o==null?void 0:o.value)==null?void 0:X.treeNodeMap.get(s.value))==null?void 0:Y.data}function pe(){return s.value}function ae(X){s.value=X}function K(X){dt(()=>o.value=k(X))}return{tree:o,flattenTree:w,isNotEmpty:C,getKey:x,getChildren:E,toggleExpand:D,toggleCheckbox:i,isExpanded:G,isChecked:a,isIndeterminate:r,isDisabled:se,isCurrent:ke,isForceHiddenExpandIcon:g,handleNodeClick:M,handleNodeCheck:R,getCurrentNode:te,getCurrentKey:pe,setCurrentKey:ae,getCheckedKeys:l,getCheckedNodes:u,getHalfCheckedKeys:c,getHalfCheckedNodes:d,setChecked:f,setCheckedKeys:h,filter:S,setData:K}}var s1e=me({name:"ElTreeNodeContent",props:Zye,setup(e){const t=Ze(E$);return()=>{const n=e.node,{data:s}=n;return(t==null?void 0:t.ctx.slots.default)?t.ctx.slots.default({node:n,data:s}):He("span",{class:"el-tree-node__label"},[n==null?void 0:n.label])}}});const o1e="caret-right",r1e=me({name:"ElTreeNode",components:{ElIcon:_t,CaretRight:qD,ElCheckbox:Jr,ElNodeContent:s1e},props:Yye,emits:Qye,setup(e,{emit:t}){const n=Ze(E$),s=_(()=>{var u;return(u=n==null?void 0:n.props.indent)!=null?u:16}),o=_(()=>{var u;return(u=n==null?void 0:n.props.icon)!=null?u:o1e});return{indent:s,icon:o,handleClick:u=>{t("click",e.node,u)},handleExpandIconClick:()=>{t("toggle",e.node)},handleCheckChange:u=>{t("check",e.node,u)},handleContextMenu:u=>{var c,d,f,h;((f=(d=(c=n==null?void 0:n.instance)==null?void 0:c.vnode)==null?void 0:d.props)==null?void 0:f.onNodeContextmenu)&&(u.stopPropagation(),u.preventDefault()),n==null||n.ctx.emit(R3,u,(h=e.node)==null?void 0:h.data,e.node)}}}}),a1e=["aria-expanded","aria-disabled","aria-checked","data-key"];function i1e(e,t,n,s,o,r){var a,i,l;const u=re("el-icon"),c=re("el-checkbox"),d=re("el-node-content");return T(),B("div",{ref:"node$",class:q(["el-tree-node",{"is-expanded":e.expanded,"is-current":e.current,"is-focusable":!e.disabled,"is-checked":!e.disabled&&e.checked}]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.disabled,"aria-checked":e.checked,"data-key":(a=e.node)==null?void 0:a.key,onClick:t[1]||(t[1]=ht((...f)=>e.handleClick&&e.handleClick(...f),["stop"])),onContextmenu:t[2]||(t[2]=(...f)=>e.handleContextMenu&&e.handleContextMenu(...f))},[W("div",{class:"el-tree-node__content",style:nt({paddingLeft:`${(e.node.level-1)*e.indent}px`})},[e.icon?(T(),ve(u,{key:0,class:q([{"is-leaf":(i=e.node)==null?void 0:i.isLeaf,"is-hidden":e.hiddenExpandIcon,expanded:!((l=e.node)==null?void 0:l.isLeaf)&&e.expanded},"el-tree-node__expand-icon"]),onClick:ht(e.handleExpandIconClick,["stop"])},{default:oe(()=>[(T(),ve(en(e.icon)))]),_:1},8,["class","onClick"])):ce("v-if",!0),e.showCheckbox?(T(),ve(c,{key:1,"model-value":e.checked,indeterminate:e.indeterminate,disabled:e.disabled,onChange:e.handleCheckChange,onClick:t[0]||(t[0]=ht(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled","onChange"])):ce("v-if",!0),le(d,{node:e.node},null,8,["node"])],4)],42,a1e)}var l1e=We(r1e,[["render",i1e]]);const u1e=me({name:"ElTreeV2",components:{ElTreeNode:l1e,FixedSizeList:a3},props:Xye,emits:Jye,setup(e,t){zt(E$,{ctx:t,props:e,instance:Lt()});const{t:n}=kn(),{flattenTree:s,isNotEmpty:o,toggleExpand:r,isExpanded:a,isIndeterminate:i,isChecked:l,isDisabled:u,isCurrent:c,isForceHiddenExpandIcon:d,toggleCheckbox:f,handleNodeClick:h,handleNodeCheck:p,getCurrentNode:m,getCurrentKey:g,setCurrentKey:v,getCheckedKeys:b,getCheckedNodes:$,getHalfCheckedKeys:y,getHalfCheckedNodes:w,setChecked:C,setCheckedKeys:k,filter:S,setData:E}=n1e(e,t.emit);return t.expose({getCurrentNode:m,getCurrentKey:g,setCurrentKey:v,getCheckedKeys:b,getCheckedNodes:$,getHalfCheckedKeys:y,getHalfCheckedNodes:w,setChecked:C,setCheckedKeys:k,filter:S,setData:E}),{t:n,flattenTree:s,itemSize:26,isNotEmpty:o,toggleExpand:r,toggleCheckbox:f,isExpanded:a,isIndeterminate:i,isChecked:l,isDisabled:u,isCurrent:c,isForceHiddenExpandIcon:d,handleNodeClick:h,handleNodeCheck:p}}}),c1e={key:1,class:"el-tree__empty-block"},d1e={class:"el-tree__empty-text"};function f1e(e,t,n,s,o,r){var a;const i=re("el-tree-node"),l=re("fixed-size-list");return T(),B("div",{class:q(["el-tree",{"el-tree--highlight-current":e.highlightCurrent}]),role:"tree"},[e.isNotEmpty?(T(),ve(l,{key:0,"class-name":"el-tree-virtual-list",data:e.flattenTree,total:e.flattenTree.length,height:e.height,"item-size":e.itemSize,"perf-mode":e.perfMode},{default:oe(({data:u,index:c,style:d})=>[(T(),ve(i,{key:u[c].key,style:nt(d),node:u[c],expanded:e.isExpanded(u[c]),"show-checkbox":e.showCheckbox,checked:e.isChecked(u[c]),indeterminate:e.isIndeterminate(u[c]),disabled:e.isDisabled(u[c]),current:e.isCurrent(u[c]),"hidden-expand-icon":e.isForceHiddenExpandIcon(u[c]),onClick:e.handleNodeClick,onToggle:e.toggleExpand,onCheck:e.handleNodeCheck},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["data","total","height","item-size","perf-mode"])):(T(),B("div",c1e,[W("span",d1e,Fe((a=e.emptyText)!=null?a:e.t("el.tree.emptyText")),1)]))],2)}var h1e=We(u1e,[["render",f1e]]);const p1e=Vt(h1e);function _E(e,t,n){let s;n.response?s=`${n.response.error||n.response}`:n.responseText?s=`${n.responseText}`:s=`fail to ${t.method} ${e} ${n.status}`;const o=new Error(s);return o.status=n.status,o.method=t.method,o.url=e,o}function m1e(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}function _3(e){if(typeof XMLHttpRequest=="undefined")return;const t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(a){a.total>0&&(a.percent=a.loaded/a.total*100),e.onProgress(a)});const s=new FormData;e.data&&Object.keys(e.data).forEach(r=>{s.append(r,e.data[r])}),s.append(e.filename,e.file,e.file.name),t.onerror=function(){e.onError(_E(n,e,t))},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(_E(n,e,t));e.onSuccess(m1e(t))},t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const o=e.headers||{};for(const r in o)Wt(o,r)&&o[r]!==null&&t.setRequestHeader(r,o[r]);return o instanceof Headers&&o.forEach((r,a)=>{t.setRequestHeader(a,r)}),t.send(s),t}const g1e=me({name:"ElUploadList",components:{ElProgress:X_,ElIcon:_t,Document:vZ,Delete:dZ,Close:Zr,ZoomIn:QD,Check:lc,CircleCheck:Vm},props:{files:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},handlePreview:{type:Function,default:()=>on},listType:{type:String,default:"text"}},emits:["remove"],setup(e,{emit:t}){const{t:n}=kn(),s=a=>{e.handlePreview(a)},o=a=>{a.target.focus()},r=a=>{t("remove",a)};return{focusing:L(!1),handleClick:s,handleRemove:r,onFileClicked:o,t:n}}}),v1e=["onKeydown"],b1e=["src"],y1e=["onClick"],w1e={class:"el-upload-list__item-status-label"},$1e={key:2,class:"el-icon--close-tip"},C1e={key:4,class:"el-upload-list__item-actions"},k1e=["onClick"],S1e=["onClick"];function x1e(e,t,n,s,o,r){const a=re("document"),i=re("el-icon"),l=re("circle-check"),u=re("check"),c=re("close"),d=re("el-progress"),f=re("zoom-in"),h=re("delete");return T(),ve(UW,{tag:"ul",class:q(["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}]),name:"el-list"},{default:oe(()=>[(T(!0),B(it,null,Yt(e.files,p=>(T(),B("li",{key:p.uid||p,class:q(["el-upload-list__item","is-"+p.status,e.focusing?"focusing":""]),tabindex:"0",onKeydown:Ht(m=>!e.disabled&&e.handleRemove(p),["delete"]),onFocus:t[0]||(t[0]=m=>e.focusing=!0),onBlur:t[1]||(t[1]=m=>e.focusing=!1),onClick:t[2]||(t[2]=(...m)=>e.onFileClicked&&e.onFileClicked(...m))},[_e(e.$slots,"default",{file:p},()=>[p.status!=="uploading"&&["picture-card","picture"].includes(e.listType)?(T(),B("img",{key:0,class:"el-upload-list__item-thumbnail",src:p.url,alt:""},null,8,b1e)):ce("v-if",!0),W("a",{class:"el-upload-list__item-name",onClick:m=>e.handleClick(p)},[le(i,{class:"el-icon--document"},{default:oe(()=>[le(a)]),_:1}),jt(" "+Fe(p.name),1)],8,y1e),W("label",w1e,[e.listType==="text"?(T(),ve(i,{key:0,class:"el-icon--upload-success el-icon--circle-check"},{default:oe(()=>[le(l)]),_:1})):["picture-card","picture"].includes(e.listType)?(T(),ve(i,{key:1,class:"el-icon--upload-success el-icon--check"},{default:oe(()=>[le(u)]),_:1})):ce("v-if",!0)]),e.disabled?ce("v-if",!0):(T(),ve(i,{key:1,class:"el-icon--close",onClick:m=>e.handleRemove(p)},{default:oe(()=>[le(c)]),_:2},1032,["onClick"])),ce(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),ce(" This is a bug which needs to be fixed "),ce(" TODO: Fix the incorrect navigation interaction "),e.disabled?ce("v-if",!0):(T(),B("i",$1e,Fe(e.t("el.upload.deleteTip")),1)),p.status==="uploading"?(T(),ve(d,{key:3,type:e.listType==="picture-card"?"circle":"line","stroke-width":e.listType==="picture-card"?6:2,percentage:+p.percentage,style:{"margin-top":"0.5rem"}},null,8,["type","stroke-width","percentage"])):ce("v-if",!0),e.listType==="picture-card"?(T(),B("span",C1e,[W("span",{class:"el-upload-list__item-preview",onClick:m=>e.handlePreview(p)},[le(i,{class:"el-icon--zoom-in"},{default:oe(()=>[le(f)]),_:1})],8,k1e),e.disabled?ce("v-if",!0):(T(),B("span",{key:0,class:"el-upload-list__item-delete",onClick:m=>e.handleRemove(p)},[le(i,{class:"el-icon--delete"},{default:oe(()=>[le(h)]),_:1})],8,S1e))])):ce("v-if",!0)])],42,v1e))),128))]),_:3},8,["class"])}var OE=We(g1e,[["render",x1e]]);const I1e=me({name:"ElUploadDrag",props:{disabled:{type:Boolean,default:!1}},emits:["file"],setup(e,{emit:t}){const n=Ze("uploader",{}),s=L(!1);function o(a){var i;if(e.disabled||!n)return;const l=((i=n.props)==null?void 0:i.accept)||n.accept;if(s.value=!1,!l){t("file",a.dataTransfer.files);return}t("file",Array.from(a.dataTransfer.files).filter(u=>{const{type:c,name:d}=u,f=d.indexOf(".")>-1?`.${d.split(".").pop()}`:"",h=c.replace(/\/.*$/,"");return l.split(",").map(p=>p.trim()).filter(p=>p).some(p=>p.startsWith(".")?f===p:/\/\*$/.test(p)?h===p.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(p)?c===p:!1)}))}function r(){e.disabled||(s.value=!0)}return{dragover:s,onDrop:o,onDragover:r}}});function E1e(e,t,n,s,o,r){return T(),B("div",{class:q({"el-upload-dragger":!0,"is-dragover":e.dragover}),onDrop:t[0]||(t[0]=ht((...a)=>e.onDrop&&e.onDrop(...a),["prevent"])),onDragover:t[1]||(t[1]=ht((...a)=>e.onDragover&&e.onDragover(...a),["prevent"])),onDragleave:t[2]||(t[2]=ht(a=>e.dragover=!1,["prevent"]))},[_e(e.$slots,"default")],34)}var T1e=We(I1e,[["render",E1e]]);const N1e=me({components:{UploadDragger:T1e},props:{type:{type:String,default:""},action:{type:String,required:!0},name:{type:String,default:"file"},data:{type:Object,default:()=>null},headers:{type:Object,default:()=>null},method:{type:String,default:"post"},withCredentials:{type:Boolean,default:!1},multiple:{type:Boolean,default:null},accept:{type:String,default:""},onStart:{type:Function,default:on},onProgress:{type:Function,default:on},onSuccess:{type:Function,default:on},onError:{type:Function,default:on},beforeUpload:{type:Function,default:on},drag:{type:Boolean,default:!1},onPreview:{type:Function,default:on},onRemove:{type:Function,default:on},fileList:{type:Array,default:()=>[]},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:{type:Function,default:()=>_3},disabled:Boolean,limit:{type:Number,default:null},onExceed:{type:Function,default:on}},setup(e){const t=L({}),n=L(!1),s=L(null);function o(d){if(e.limit&&e.fileList.length+d.length>e.limit){e.onExceed(d,e.fileList);return}let f=Array.from(d);e.multiple||(f=f.slice(0,1)),f.length!==0&&f.forEach(h=>{e.onStart(h),e.autoUpload&&r(h)})}function r(d){if(s.value.value=null,!e.beforeUpload)return i(d);const f=e.beforeUpload(d);f instanceof Promise?f.then(h=>{const p=Object.prototype.toString.call(h);if(p==="[object File]"||p==="[object Blob]"){p==="[object Blob]"&&(h=new File([h],d.name,{type:d.type}));for(const m in d)Wt(d,m)&&(h[m]=d[m]);i(h)}else i(d)}).catch(()=>{e.onRemove(null,d)}):f!==!1?i(d):e.onRemove(null,d)}function a(d){const f=t.value;if(d){let h=d;d.uid&&(h=d.uid),f[h]&&f[h].abort()}else Object.keys(f).forEach(h=>{f[h]&&f[h].abort(),delete f[h]})}function i(d){const{uid:f}=d,h={headers:e.headers,withCredentials:e.withCredentials,file:d,data:e.data,method:e.method,filename:e.name,action:e.action,onProgress:m=>{e.onProgress(m,d)},onSuccess:m=>{e.onSuccess(m,d),delete t.value[f]},onError:m=>{e.onError(m,d),delete t.value[f]}},p=e.httpRequest(h);t.value[f]=p,p instanceof Promise&&p.then(h.onSuccess,h.onError)}function l(d){const f=d.target.files;!f||o(f)}function u(){e.disabled||(s.value.value=null,s.value.click())}function c(){u()}return{reqs:t,mouseover:n,inputRef:s,abort:a,post:i,handleChange:l,handleClick:u,handleKeydown:c,upload:r,uploadFiles:o}}}),A1e=["name","multiple","accept"];function D1e(e,t,n,s,o,r){const a=re("upload-dragger");return T(),B("div",{class:q(["el-upload",`el-upload--${e.listType}`]),tabindex:"0",onClick:t[1]||(t[1]=(...i)=>e.handleClick&&e.handleClick(...i)),onKeydown:t[2]||(t[2]=Ht(ht((...i)=>e.handleKeydown&&e.handleKeydown(...i),["self"]),["enter","space"]))},[e.drag?(T(),ve(a,{key:0,disabled:e.disabled,onFile:e.uploadFiles},{default:oe(()=>[_e(e.$slots,"default")]),_:3},8,["disabled","onFile"])):_e(e.$slots,"default",{key:1}),W("input",{ref:"inputRef",class:"el-upload__input",type:"file",name:e.name,multiple:e.multiple,accept:e.accept,onChange:t[0]||(t[0]=(...i)=>e.handleChange&&e.handleChange(...i))},null,40,A1e)],34)}var ME=We(N1e,[["render",D1e]]);function R1e(e,t){for(var n=-1,s=e==null?0:e.length;++n<s&&t(e[n],n,e)!==!1;);return e}var _1e=R1e,FE=UR;function O1e(e,t,n){t=="__proto__"&&FE?FE(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var O3=O1e,M1e=O3,F1e=Ow,P1e=Object.prototype,L1e=P1e.hasOwnProperty;function B1e(e,t,n){var s=e[t];(!(L1e.call(e,t)&&F1e(s,n))||n===void 0&&!(t in e))&&M1e(e,t,n)}var M3=B1e,z1e=M3,V1e=O3;function W1e(e,t,n,s){var o=!n;n||(n={});for(var r=-1,a=t.length;++r<a;){var i=t[r],l=s?s(n[i],e[i],i,n,e):void 0;l===void 0&&(l=e[i]),o?V1e(n,i,l):z1e(n,i,l)}return n}var Xg=W1e,H1e=Xg,U1e=Hw;function G1e(e,t){return e&&H1e(t,U1e(t),e)}var K1e=G1e;function j1e(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var q1e=j1e,X1e=Oi,Y1e=Vw,Z1e=q1e,J1e=Object.prototype,Q1e=J1e.hasOwnProperty;function ewe(e){if(!X1e(e))return Z1e(e);var t=Y1e(e),n=[];for(var s in e)s=="constructor"&&(t||!Q1e.call(e,s))||n.push(s);return n}var twe=ewe,nwe=CD,swe=twe,owe=Ww;function rwe(e){return owe(e)?nwe(e,!0):swe(e)}var T$=rwe,awe=Xg,iwe=T$;function lwe(e,t){return e&&awe(t,iwe(t),e)}var uwe=lwe,l1={exports:{}};(function(e,t){var n=ra,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===s,a=r?n.Buffer:void 0,i=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=i?i(d):new u.constructor(d);return u.copy(f),f}e.exports=l})(l1,l1.exports);function cwe(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var dwe=cwe,fwe=Xg,hwe=Bw;function pwe(e,t){return fwe(e,hwe(e),t)}var mwe=pwe,gwe=kD,vwe=gwe(Object.getPrototypeOf,Object),F3=vwe,bwe=Lw,ywe=F3,wwe=Bw,$we=vD,Cwe=Object.getOwnPropertySymbols,kwe=Cwe?function(e){for(var t=[];e;)bwe(t,wwe(e)),e=ywe(e);return t}:$we,P3=kwe,Swe=Xg,xwe=P3;function Iwe(e,t){return Swe(e,xwe(e),t)}var Ewe=Iwe,Twe=gD,Nwe=P3,Awe=T$;function Dwe(e){return Twe(e,Awe,Nwe)}var Rwe=Dwe,_we=Object.prototype,Owe=_we.hasOwnProperty;function Mwe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Owe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Fwe=Mwe,PE=mD;function Pwe(e){var t=new e.constructor(e.byteLength);return new PE(t).set(new PE(e)),t}var N$=Pwe,Lwe=N$;function Bwe(e,t){var n=t?Lwe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var zwe=Bwe,Vwe=/\w*$/;function Wwe(e){var t=new e.constructor(e.source,Vwe.exec(e));return t.lastIndex=e.lastIndex,t}var Hwe=Wwe,LE=Oc,BE=LE?LE.prototype:void 0,zE=BE?BE.valueOf:void 0;function Uwe(e){return zE?Object(zE.call(e)):{}}var Gwe=Uwe,Kwe=N$;function jwe(e,t){var n=t?Kwe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var qwe=jwe,Xwe=N$,Ywe=zwe,Zwe=Hwe,Jwe=Gwe,Qwe=qwe,e$e="[object Boolean]",t$e="[object Date]",n$e="[object Map]",s$e="[object Number]",o$e="[object RegExp]",r$e="[object Set]",a$e="[object String]",i$e="[object Symbol]",l$e="[object ArrayBuffer]",u$e="[object DataView]",c$e="[object Float32Array]",d$e="[object Float64Array]",f$e="[object Int8Array]",h$e="[object Int16Array]",p$e="[object Int32Array]",m$e="[object Uint8Array]",g$e="[object Uint8ClampedArray]",v$e="[object Uint16Array]",b$e="[object Uint32Array]";function y$e(e,t,n){var s=e.constructor;switch(t){case l$e:return Xwe(e);case e$e:case t$e:return new s(+e);case u$e:return Ywe(e,n);case c$e:case d$e:case f$e:case h$e:case p$e:case m$e:case g$e:case v$e:case b$e:return Qwe(e,n);case n$e:return new s;case s$e:case a$e:return new s(e);case o$e:return Zwe(e);case r$e:return new s;case i$e:return Jwe(e)}}var w$e=y$e,$$e=Oi,VE=Object.create,C$e=function(){function e(){}return function(t){if(!$$e(t))return{};if(VE)return VE(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),k$e=C$e,S$e=k$e,x$e=F3,I$e=Vw;function E$e(e){return typeof e.constructor=="function"&&!I$e(e)?S$e(x$e(e)):{}}var T$e=E$e,N$e=Mg,A$e=Fi,D$e="[object Map]";function R$e(e){return A$e(e)&&N$e(e)==D$e}var _$e=R$e,O$e=_$e,M$e=zw,WE=of.exports,HE=WE&&WE.isMap,F$e=HE?M$e(HE):O$e,P$e=F$e,L$e=Mg,B$e=Fi,z$e="[object Set]";function V$e(e){return B$e(e)&&L$e(e)==z$e}var W$e=V$e,H$e=W$e,U$e=zw,UE=of.exports,GE=UE&&UE.isSet,G$e=GE?U$e(GE):H$e,K$e=G$e,j$e=dD,q$e=_1e,X$e=M3,Y$e=K1e,Z$e=uwe,J$e=l1.exports,Q$e=dwe,eCe=mwe,tCe=Ewe,nCe=SD,sCe=Rwe,oCe=Mg,rCe=Fwe,aCe=w$e,iCe=T$e,lCe=Mi,uCe=sf.exports,cCe=P$e,dCe=Oi,fCe=K$e,hCe=Hw,pCe=T$,mCe=1,gCe=2,vCe=4,L3="[object Arguments]",bCe="[object Array]",yCe="[object Boolean]",wCe="[object Date]",$Ce="[object Error]",B3="[object Function]",CCe="[object GeneratorFunction]",kCe="[object Map]",SCe="[object Number]",z3="[object Object]",xCe="[object RegExp]",ICe="[object Set]",ECe="[object String]",TCe="[object Symbol]",NCe="[object WeakMap]",ACe="[object ArrayBuffer]",DCe="[object DataView]",RCe="[object Float32Array]",_Ce="[object Float64Array]",OCe="[object Int8Array]",MCe="[object Int16Array]",FCe="[object Int32Array]",PCe="[object Uint8Array]",LCe="[object Uint8ClampedArray]",BCe="[object Uint16Array]",zCe="[object Uint32Array]",qn={};qn[L3]=qn[bCe]=qn[ACe]=qn[DCe]=qn[yCe]=qn[wCe]=qn[RCe]=qn[_Ce]=qn[OCe]=qn[MCe]=qn[FCe]=qn[kCe]=qn[SCe]=qn[z3]=qn[xCe]=qn[ICe]=qn[ECe]=qn[TCe]=qn[PCe]=qn[LCe]=qn[BCe]=qn[zCe]=!0;qn[$Ce]=qn[B3]=qn[NCe]=!1;function Sm(e,t,n,s,o,r){var a,i=t&mCe,l=t&gCe,u=t&vCe;if(n&&(a=o?n(e,s,o,r):n(e)),a!==void 0)return a;if(!dCe(e))return e;var c=lCe(e);if(c){if(a=rCe(e),!i)return Q$e(e,a)}else{var d=oCe(e),f=d==B3||d==CCe;if(uCe(e))return J$e(e,i);if(d==z3||d==L3||f&&!o){if(a=l||f?{}:iCe(e),!i)return l?tCe(e,Z$e(a,e)):eCe(e,Y$e(a,e))}else{if(!qn[d])return o?e:{};a=aCe(e,d,i)}}r||(r=new j$e);var h=r.get(e);if(h)return h;r.set(e,a),fCe(e)?e.forEach(function(g){a.add(Sm(g,t,n,g,e,r))}):cCe(e)&&e.forEach(function(g,v){a.set(v,Sm(g,t,n,v,e,r))});var p=u?l?sCe:nCe:l?pCe:hCe,m=c?void 0:p(e);return q$e(m||e,function(g,v){m&&(v=g,g=e[v]),X$e(a,v,Sm(g,t,n,v,e,r))}),a}var VCe=Sm,WCe=VCe,HCe=1,UCe=4;function GCe(e){return WCe(e,HCe|UCe)}var KCe=GCe;function Rp(e,t){return t.find(n=>n.uid===e.uid)}function KE(e){return Date.now()+e}var jCe=e=>{const t=L([]),n=L(null);let s=1;function o(f){n.value.abort(f)}function r(f=["ready","uploading","success","fail"]){t.value=t.value.filter(h=>!f.includes(h.status))}function a(f,h){const p=Rp(h,t.value);p.status="fail",t.value.splice(t.value.indexOf(p),1),e.onError(f,p,t.value),e.onChange(p,t.value)}function i(f,h){const p=Rp(h,t.value);e.onProgress(f,p,t.value),p.status="uploading",p.percentage=f.percent||0}function l(f,h){const p=Rp(h,t.value);p&&(p.status="success",p.response=f,e.onSuccess(f,p,t.value),e.onChange(p,t.value))}function u(f){const h=KE(s++);f.uid=h;const p={name:f.name,percentage:0,status:"ready",size:f.size,raw:f,uid:h};if(e.listType==="picture-card"||e.listType==="picture")try{p.url=URL.createObjectURL(f)}catch(m){console.error("[Element Error][Upload]",m),e.onError(m,p,t.value)}t.value.push(p),e.onChange(p,t.value)}function c(f,h){h&&(f=Rp(h,t.value));const p=()=>{f.url&&f.url.indexOf("blob:")===0&&URL.revokeObjectURL(f.url)},m=()=>{o(f);const g=t.value;g.splice(g.indexOf(f),1),e.onRemove(f,g),p()};if(!e.beforeRemove)m();else if(typeof e.beforeRemove=="function"){const g=e.beforeRemove(f,t.value);g instanceof Promise?g.then(()=>{m()}).catch(on):g!==!1&&m()}}function d(){t.value.filter(f=>f.status==="ready").forEach(f=>{n.value.upload(f.raw)})}return Oe(()=>e.listType,f=>{(f==="picture-card"||f==="picture")&&(t.value=t.value.map(h=>{if(!h.url&&h.raw)try{h.url=URL.createObjectURL(h.raw)}catch(p){e.onError(p,h,t.value)}return h}))}),Oe(()=>e.fileList,f=>{t.value=f.map(h=>{const p=KCe(h);return Ut(ut({},p),{uid:h.uid||KE(s++),status:h.status||"success"})})},{immediate:!0,deep:!0}),{abort:o,clearFiles:r,handleError:a,handleProgress:i,handleStart:u,handleSuccess:l,handleRemove:c,submit:d,uploadFiles:t,uploadRef:n}};const xm=me({name:"ElUpload",components:{Upload:ME,UploadList:OE},props:{action:{type:String,required:!0},headers:{type:Object,default:()=>({})},method:{type:String,default:"post"},data:{type:Object,default:()=>({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},beforeUpload:{type:Function,default:on},beforeRemove:{type:Function,default:on},onRemove:{type:Function,default:on},onChange:{type:Function,default:on},onPreview:{type:Function,default:on},onSuccess:{type:Function,default:on},onProgress:{type:Function,default:on},onError:{type:Function,default:on},fileList:{type:Array,default:()=>[]},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:{type:Function,default:_3},disabled:Boolean,limit:{type:Number,default:null},onExceed:{type:Function,default:()=>on}},setup(e){const t=Ze(Lo,{}),n=_(()=>e.disabled||t.disabled),{abort:s,clearFiles:o,handleError:r,handleProgress:a,handleStart:i,handleSuccess:l,handleRemove:u,submit:c,uploadRef:d,uploadFiles:f}=jCe(e);return zt("uploader",Lt()),os(()=>{f.value.forEach(h=>{h.url&&h.url.indexOf("blob:")===0&&URL.revokeObjectURL(h.url)})}),{abort:s,dragOver:L(!1),draging:L(!1),handleError:r,handleProgress:a,handleRemove:u,handleStart:i,handleSuccess:l,uploadDisabled:n,uploadFiles:f,uploadRef:d,submit:c,clearFiles:o}},render(){var e,t;let n;this.showFileList?n=He(OE,{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,onRemove:this.handleRemove,handlePreview:this.onPreview},this.$slots.file?{default:a=>this.$slots.file({file:a.file})}:null):n=null;const s={type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,method:this.method,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest,ref:"uploadRef"},o=this.$slots.trigger||this.$slots.default,r=He(ME,s,{default:()=>o==null?void 0:o()});return He("div",[this.listType==="picture-card"?n:null,this.$slots.trigger?[r,this.$slots.default()]:r,(t=(e=this.$slots).tip)==null?void 0:t.call(e),this.listType!=="picture-card"?n:null])}});xm.install=e=>{e.component(xm.name,xm)};const qCe=xm,XCe=qCe;var YCe=[mX,kQ,kne,Ane,Pne,ER,Zne,Jne,Ia,DR,_re,Lre,Yre,Zre,vie,tie,kie,Jr,gae,JR,Iie,zie,Vie,_ie,ble,$le,_le,Ole,Mle,Fle,Ple,mce,xce,Ice,Lce,Hce,Qce,efe,tfe,nfe,zfe,Ihe,Ehe,_t,Hhe,B_,Tr,z_,tpe,Cpe,kpe,Spe,Ope,zme,qme,sge,IR,X_,o_,Oae,_ae,kge,Tge,Dge,Ya,qg,j_,mme,Eve,Vve,Wve,a0e,h0e,k0e,S0e,F0e,Pbe,Lbe,Jbe,Qbe,Gg,vre,rye,cye,dye,Bo,Aye,jye,p1e,XCe];const Vr="ElInfiniteScroll",ZCe=50,JCe=200,QCe=0,e2e={delay:{type:Number,default:JCe},distance:{type:Number,default:QCe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},A$=(e,t)=>Object.entries(e2e).reduce((n,[s,o])=>{var r,a;const{type:i,default:l}=o,u=e.getAttribute(`infinite-scroll-${s}`);let c=(a=(r=t[u])!=null?r:u)!=null?a:l;return c=c==="false"?!1:c,c=i(c),n[s]=Number.isNaN(c)?l:c,n},{}),V3=e=>{const{observer:t}=e[Vr];t&&(t.disconnect(),delete e[Vr].observer)},t2e=(e,t)=>{const{container:n,containerEl:s,instance:o,observer:r,lastScrollTop:a}=e[Vr],{disabled:i,distance:l}=A$(e,o),{clientHeight:u,scrollHeight:c,scrollTop:d}=s,f=d-a;if(e[Vr].lastScrollTop=d,r||i||f<0)return;let h=!1;if(n===e)h=c-(u+d)<=l;else{const{clientTop:p,scrollHeight:m}=e,g=zq(e,s);h=d+u>=g+p+m-l}h&&t.call(o)};function Lb(e,t){const{containerEl:n,instance:s}=e[Vr],{disabled:o}=A$(e,s);o||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?t.call(s):V3(e))}const n2e={async mounted(e,t){const{instance:n,value:s}=t;Pt(s)||oo(Vr,"'v-infinite-scroll' binding value must be a function"),await dt();const{delay:o,immediate:r}=A$(e,n),a=Gw(e,!0),i=a===window?document.documentElement:a,l=Hm(t2e.bind(null,e,s),o);if(!!a){if(e[Vr]={instance:n,container:a,containerEl:i,delay:o,cb:s,onScroll:l,lastScrollTop:i.scrollTop},r){const u=new MutationObserver(Hm(Lb.bind(null,e,s),ZCe));e[Vr].observer=u,u.observe(e,{childList:!0,subtree:!0}),Lb(e,s)}a.addEventListener("scroll",l)}},unmounted(e){const{container:t,onScroll:n}=e[Vr];t==null||t.removeEventListener("scroll",n),V3(e)},async updated(e){e[Vr]||await dt();const{containerEl:t,cb:n,observer:s}=e[Vr];t.clientHeight&&s&&Lb(e,n)}},u1=n2e;u1.install=e=>{e.directive("InfiniteScroll",u1)};const s2e=u1;function o2e(e){let t;const n=L(!1),s=Cn(Ut(ut({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function o(d){s.text=d}function r(){const d=s.parent;if(!d.vLoadingAddClassList){let f=d.getAttribute("loading-number");f=Number.parseInt(f)-1,f?d.setAttribute("loading-number",f.toString()):(Qs(d,"el-loading-parent--relative"),d.removeAttribute("loading-number")),Qs(d,"el-loading-parent--hidden")}a()}function a(){var d,f;(f=(d=c.$el)==null?void 0:d.parentNode)==null||f.removeChild(c.$el)}function i(){var d;if(e.beforeClose&&!e.beforeClose())return;const f=s.parent;f.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(t),t=window.setTimeout(()=>{n.value&&(n.value=!1,r())},400),s.visible=!1,(d=e.closed)==null||d.call(e)}function l(){!n.value||(n.value=!1,r())}const c=tH({name:"ElLoading",setup(){return()=>{const d=s.spinner||s.svg,f=He("svg",ut({class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"25 25 50 50"},d?{innerHTML:d}:{}),[He("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),h=s.text?He("p",{class:"el-loading-text"},[s.text]):void 0;return He(cs,{name:"el-loading-fade",onAfterLeave:l},{default:oe(()=>[$t(le("div",{style:{backgroundColor:s.background||""},class:["el-loading-mask",s.customClass,s.fullscreen?"is-fullscreen":""]},[He("div",{class:"el-loading-spinner"},[f,h])]),[[Qt,s.visible]])])})}}}).mount(document.createElement("div"));return Ut(ut({},so(s)),{setText:o,remvoeElLoadingChild:a,close:i,handleAfterLeave:l,vm:c,get $el(){return c.$el}})}let gd;const c1=function(e={}){if(!qt)return;const t=r2e(e);t.fullscreen&&gd&&(gd.remvoeElLoadingChild(),gd.close());const n=o2e(Ut(ut({},t),{closed:()=>{var o;(o=t.closed)==null||o.call(t),t.fullscreen&&(gd=void 0)}}));a2e(t,t.parent,n),jE(t,t.parent,n),t.parent.vLoadingAddClassList=()=>jE(t,t.parent,n);let s=t.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",t.parent.setAttribute("loading-number",s),t.parent.appendChild(n.$el),dt(()=>n.visible.value=t.visible),t.fullscreen&&(gd=n),n},r2e=e=>{var t,n,s,o;let r;return Xt(e.target)?r=(t=document.querySelector(e.target))!=null?t:document.body:r=e.target||document.body,{parent:r===document.body||e.body?document.body:r,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:r===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(s=e.lock)!=null?s:!1,customClass:e.customClass||"",visible:(o=e.visible)!=null?o:!0,target:r}},a2e=async(e,t,n)=>{const s={};if(e.fullscreen)n.originalPosition.value=fr(document.body,"position"),n.originalOverflow.value=fr(document.body,"overflow"),s.zIndex=is.nextZIndex();else if(e.parent===document.body){n.originalPosition.value=fr(document.body,"position"),await dt();for(const o of["top","left"]){const r=o==="top"?"scrollTop":"scrollLeft";s[o]=`${e.target.getBoundingClientRect()[o]+document.body[r]+document.documentElement[r]-parseInt(fr(document.body,`margin-${o}`),10)}px`}for(const o of["height","width"])s[o]=`${e.target.getBoundingClientRect()[o]}px`}else n.originalPosition.value=fr(t,"position");for(const[o,r]of Object.entries(s))n.$el.style[o]=r},jE=(e,t,n)=>{n.originalPosition.value!=="absolute"&&n.originalPosition.value!=="fixed"?To(t,"el-loading-parent--relative"):Qs(t,"el-loading-parent--relative"),e.fullscreen&&e.lock?To(t,"el-loading-parent--hidden"):Qs(t,"el-loading-parent--hidden")},d1=Symbol("ElLoading"),qE=(e,t)=>{var n,s,o,r;const a=t.instance,i=f=>rn(t.value)?t.value[f]:void 0,l=f=>{const h=Xt(f)&&(a==null?void 0:a[f])||f;return h&&L(h)},u=f=>l(i(f)||e.getAttribute(`element-loading-${_i(f)}`)),c=(n=i("fullscreen"))!=null?n:t.modifiers.fullscreen,d={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:c,target:(s=i("target"))!=null?s:c?void 0:e,body:(o=i("body"))!=null?o:t.modifiers.body,lock:(r=i("lock"))!=null?r:t.modifiers.lock};e[d1]={options:d,instance:c1(d)}},i2e=(e,t)=>{for(const n of Object.keys(t))rs(t[n])&&(t[n].value=e[n])},XE={mounted(e,t){t.value&&qE(e,t)},updated(e,t){const n=e[d1];t.oldValue!==t.value&&(t.value&&!t.oldValue?qE(e,t):t.value&&t.oldValue?rn(t.value)&&i2e(t.value,n.options):n==null||n.instance.close())},unmounted(e){var t;(t=e[d1])==null||t.instance.close()}},l2e={install(e){e.directive("loading",XE),e.config.globalProperties.$loading=c1},directive:XE,service:c1},W3=["success","info","warning","error"],u2e=gt({customClass:{type:String,default:""},center:{type:Boolean,default:!1},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:3e3},icon:{type:Je([String,Object]),default:""},id:{type:String,default:""},message:{type:Je([String,Object]),default:""},onClose:{type:Je(Function),required:!1},showClose:{type:Boolean,default:!1},type:{type:String,values:W3,default:"info"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1}}),c2e={destroy:()=>!0},d2e=me({name:"ElMessage",components:ut({ElBadge:ER,ElIcon:_t},Vg),props:u2e,emits:c2e,setup(e){const t=L(!1),n=L(e.type?e.type==="error"?"danger":e.type:"info");let s;const o=_(()=>{const d=e.type;return d&&Ua[d]?`el-message-icon--${d}`:""}),r=_(()=>e.icon||Ua[e.type]||""),a=_(()=>({top:`${e.offset}px`,zIndex:e.zIndex}));function i(){e.duration>0&&({stop:s}=ic(()=>{t.value&&u()},e.duration))}function l(){s==null||s()}function u(){t.value=!1}function c({code:d}){d===Qe.esc?t.value&&u():i()}return Mt(()=>{i(),t.value=!0}),Oe(()=>e.repeatNum,()=>{l(),i()}),Ss(document,"keydown",c),{typeClass:o,iconComponent:r,customStyle:a,visible:t,badgeType:n,close:u,clearTimer:l,startTimer:i}}}),f2e=["id"],h2e={key:0,class:"el-message__content"},p2e=["innerHTML"];function m2e(e,t,n,s,o,r){const a=re("el-badge"),i=re("el-icon"),l=re("close");return T(),ve(cs,{name:"el-message-fade",onBeforeLeave:e.onClose,onAfterLeave:t[2]||(t[2]=u=>e.$emit("destroy"))},{default:oe(()=>[$t(W("div",{id:e.id,class:q(["el-message",e.type&&!e.icon?`el-message--${e.type}`:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass]),style:nt(e.customStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...u)=>e.clearTimer&&e.clearTimer(...u)),onMouseleave:t[1]||(t[1]=(...u)=>e.startTimer&&e.startTimer(...u))},[e.repeatNum>1?(T(),ve(a,{key:0,value:e.repeatNum,type:e.badgeType,class:"el-message__badge"},null,8,["value","type"])):ce("v-if",!0),e.iconComponent?(T(),ve(i,{key:1,class:q(["el-message__icon",e.typeClass])},{default:oe(()=>[(T(),ve(en(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),_e(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(T(),B(it,{key:1},[ce(" Caution here, message could've been compromised, never use user's input as message "),W("p",{class:"el-message__content",innerHTML:e.message},null,8,p2e)],2112)):(T(),B("p",h2e,Fe(e.message),1))]),e.showClose?(T(),ve(i,{key:2,class:"el-message__closeBtn",onClick:ht(e.close,["stop"])},{default:oe(()=>[le(l)]),_:1},8,["onClick"])):ce("v-if",!0)],46,f2e),[[Qt,e.visible]])]),_:3},8,["onBeforeLeave"])}var g2e=We(d2e,[["render",m2e]]);const Go=[];let v2e=1;const qm=function(e={}){if(!qt)return{close:()=>{}};if(wn(jy.max)&&Go.length>=jy.max)return{close:()=>{}};if(!bs(e)&&typeof e=="object"&&e.grouping&&!bs(e.message)&&Go.length){const u=Go.find(c=>{var d,f,h;return`${(f=(d=c.vm.props)==null?void 0:d.message)!=null?f:""}`==`${(h=e.message)!=null?h:""}`});if(u)return u.vm.component.props.repeatNum+=1,u.vm.component.props.type=e==null?void 0:e.type,{close:()=>l.component.proxy.visible=!1}}(typeof e=="string"||bs(e))&&(e={message:e});let t=e.offset||20;Go.forEach(({vm:u})=>{var c;t+=(((c=u.el)==null?void 0:c.offsetHeight)||0)+16}),t+=16;const n=`message_${v2e++}`,s=e.onClose,o=Ut(ut({zIndex:is.nextZIndex(),offset:t},e),{id:n,onClose:()=>{b2e(n,s)}});let r=document.body;e.appendTo instanceof HTMLElement?r=e.appendTo:typeof e.appendTo=="string"&&(r=document.querySelector(e.appendTo)),r instanceof HTMLElement||(r=document.body);const a=document.createElement("div");a.className=`container_${n}`;const i=o.message,l=le(g2e,o,bs(o.message)?{default:()=>i}:null);return l.props.onDestroy=()=>{ac(null,a)},ac(l,a),Go.push({vm:l}),r.appendChild(a.firstElementChild),{close:()=>l.component.proxy.visible=!1}};W3.forEach(e=>{qm[e]=(t={})=>((typeof t=="string"||bs(t))&&(t={message:t}),qm(Ut(ut({},t),{type:e})))});function b2e(e,t){const n=Go.findIndex(({vm:a})=>e===a.component.props.id);if(n===-1)return;const{vm:s}=Go[n];if(!s)return;t==null||t(s);const o=s.el.offsetHeight;Go.splice(n,1);const r=Go.length;if(!(r<1))for(let a=n;a<r;a++){const i=parseInt(Go[a].vm.el.style.top,10)-o-16;Go[a].vm.component.props.offset=i}}function y2e(){var e;for(let t=Go.length-1;t>=0;t--){const n=Go[t].vm.component;(e=n==null?void 0:n.proxy)==null||e.close()}}qm.closeAll=y2e;const w2e=jD(qm,"$message"),$2e=me({name:"ElMessageBox",directives:{TrapFocus:Xw},components:ut({ElButton:Ia,ElInput:Tr,ElOverlay:d$,ElIcon:_t},Vg),inheritAttrs:!1,props:{buttonSize:{type:String,validator:Oo},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{t:n}=kn(),s=L(!1),o=Cn({beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:is.nextZIndex()}),r=_(()=>{const $=o.type;return $&&Ua[$]?`el-message-box-icon--${$}`:""}),a=ds(_(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),i=_(()=>o.icon||Ua[o.type]||""),l=_(()=>!!o.message),u=L(null),c=L(null),d=_(()=>o.confirmButtonClass);Oe(()=>o.inputValue,async $=>{await dt(),e.boxType==="prompt"&&$!==null&&g()},{immediate:!0}),Oe(()=>s.value,$=>{$&&((e.boxType==="alert"||e.boxType==="confirm")&&dt().then(()=>{var y,w,C;(C=(w=(y=c.value)==null?void 0:y.$el)==null?void 0:w.focus)==null||C.call(w)}),o.zIndex=is.nextZIndex()),e.boxType==="prompt"&&($?dt().then(()=>{u.value&&u.value.$el&&v().focus()}):(o.editorErrorMessage="",o.validateError=!1))}),Mt(async()=>{await dt(),e.closeOnHashChange&&gn(window,"hashchange",f)}),os(()=>{e.closeOnHashChange&&zn(window,"hashchange",f)});function f(){!s.value||(s.value=!1,dt(()=>{o.action&&t("action",o.action)}))}const h=()=>{e.closeOnClickModal&&m(o.distinguishCancelAndClose?"close":"cancel")},p=()=>{if(o.inputType!=="textarea")return m("confirm")},m=$=>{var y;e.boxType==="prompt"&&$==="confirm"&&!g()||(o.action=$,o.beforeClose?(y=o.beforeClose)==null||y.call(o,$,o,f):f())},g=()=>{if(e.boxType==="prompt"){const $=o.inputPattern;if($&&!$.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||n("el.messagebox.error"),o.validateError=!0,!1;const y=o.inputValidator;if(typeof y=="function"){const w=y(o.inputValue);if(w===!1)return o.editorErrorMessage=o.inputErrorMessage||n("el.messagebox.error"),o.validateError=!0,!1;if(typeof w=="string")return o.editorErrorMessage=w,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},v=()=>{const $=u.value.$refs;return $.input||$.textarea},b=()=>{m("close")};return e.closeOnPressEscape?zD({handleClose:b},s):Gq(s,"keydown",$=>$.code===Qe.esc),e.lockScroll&&PD(s),WD(s),Ut(ut({},so(o)),{visible:s,hasMessage:l,typeClass:r,btnSize:a,iconComponent:i,confirmButtonClasses:d,inputRef:u,confirmRef:c,doClose:f,handleClose:b,handleWrapperClick:h,handleInputEnter:p,handleAction:m,t:n})}}),C2e=["aria-label"],k2e={key:0,class:"el-message-box__header"},S2e={class:"el-message-box__title"},x2e={class:"el-message-box__content"},I2e={class:"el-message-box__container"},E2e={key:1,class:"el-message-box__message"},T2e={key:0},N2e=["innerHTML"],A2e={class:"el-message-box__input"},D2e={class:"el-message-box__btns"};function R2e(e,t,n,s,o,r){const a=re("el-icon"),i=re("close"),l=re("el-input"),u=re("el-button"),c=re("el-overlay"),d=wo("trap-focus");return T(),ve(cs,{name:"fade-in-linear",onAfterLeave:t[7]||(t[7]=f=>e.$emit("vanish"))},{default:oe(()=>[$t(le(c,{"z-index":e.zIndex,"overlay-class":["is-message-box",e.modalClass],mask:e.modal,onClick:ht(e.handleWrapperClick,["self"])},{default:oe(()=>[$t((T(),B("div",{ref:"root",role:"dialog","aria-label":e.title||"dialog","aria-modal":"true",class:q(["el-message-box",e.customClass,{"el-message-box--center":e.center}]),style:nt(e.customStyle)},[e.title!==null&&e.title!==void 0?(T(),B("div",k2e,[W("div",S2e,[e.iconComponent&&e.center?(T(),ve(a,{key:0,class:q(["el-message-box__status",e.typeClass])},{default:oe(()=>[(T(),ve(en(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),W("span",null,Fe(e.title),1)]),e.showClose?(T(),B("button",{key:0,type:"button",class:"el-message-box__headerbtn","aria-label":"Close",onClick:t[0]||(t[0]=f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=Ht(ht(f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[le(a,{class:"el-message-box__close"},{default:oe(()=>[le(i)]),_:1})],32)):ce("v-if",!0)])):ce("v-if",!0),W("div",x2e,[W("div",I2e,[e.iconComponent&&!e.center&&e.hasMessage?(T(),ve(a,{key:0,class:q(["el-message-box__status",e.typeClass])},{default:oe(()=>[(T(),ve(en(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),e.hasMessage?(T(),B("div",E2e,[_e(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(T(),B("p",{key:1,innerHTML:e.message},null,8,N2e)):(T(),B("p",T2e,Fe(e.message),1))])])):ce("v-if",!0)]),$t(W("div",A2e,[le(l,{ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=f=>e.inputValue=f),type:e.inputType,placeholder:e.inputPlaceholder,class:q({invalid:e.validateError}),onKeydown:Ht(ht(e.handleInputEnter,["prevent"]),["enter"])},null,8,["modelValue","type","placeholder","class","onKeydown"]),W("div",{class:"el-message-box__errormsg",style:nt({visibility:e.editorErrorMessage?"visible":"hidden"})},Fe(e.editorErrorMessage),5)],512),[[Qt,e.showInput]])]),W("div",D2e,[e.showCancelButton?(T(),ve(u,{key:0,loading:e.cancelButtonLoading,class:q([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=f=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=Ht(ht(f=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:oe(()=>[jt(Fe(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):ce("v-if",!0),$t(le(u,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:q([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=f=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=Ht(ht(f=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:oe(()=>[jt(Fe(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[Qt,e.showConfirmButton]])])],14,C2e)),[[d]])]),_:3},8,["z-index","overlay-class","mask","onClick"]),[[Qt,e.visible]])]),_:3})}var _2e=We($2e,[["render",R2e]]);const vf=new Map,O2e=(e,t)=>{const n=He(_2e,e);return ac(n,t),document.body.appendChild(t.firstElementChild),n.component},M2e=()=>document.createElement("div"),F2e=e=>{const t=M2e();e.onVanish=()=>{ac(null,t),vf.delete(s)},e.onAction=o=>{const r=vf.get(s);let a;e.showInput?a={value:s.inputValue,action:o}:a=o,e.callback?e.callback(a,n.proxy):o==="cancel"||o==="close"?e.distinguishCancelAndClose&&o!=="cancel"?r.reject("close"):r.reject("cancel"):r.resolve(a)};const n=O2e(e,t),s=n.proxy;for(const o in e)Wt(e,o)&&!Wt(s.$props,o)&&(s[o]=e[o]);return Oe(()=>s.message,(o,r)=>{bs(o)?n.slots.default=()=>[o]:bs(r)&&!bs(o)&&delete n.slots.default},{immediate:!0}),s.visible=!0,s};function Ei(e){if(!qt)return;let t;return Xt(e)||bs(e)?e={message:e}:t=e.callback,new Promise((n,s)=>{const o=F2e(e);vf.set(o,{options:e,callback:t,resolve:n,reject:s})})}Ei.alert=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),Ei(Object.assign({title:t,message:e,type:"",closeOnPressEscape:!1,closeOnClickModal:!1},n,{boxType:"alert"})));Ei.confirm=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),Ei(Object.assign({title:t,message:e,type:"",showCancelButton:!0},n,{boxType:"confirm"})));Ei.prompt=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),Ei(Object.assign({title:t,message:e,showCancelButton:!0,showInput:!0,type:""},n,{boxType:"prompt"})));Ei.close=()=>{vf.forEach((e,t)=>{t.doClose()}),vf.clear()};const hl=Ei;hl.install=e=>{e.config.globalProperties.$msgbox=hl,e.config.globalProperties.$messageBox=hl,e.config.globalProperties.$alert=hl.alert,e.config.globalProperties.$confirm=hl.confirm,e.config.globalProperties.$prompt=hl.prompt};const P2e=hl,H3=["success","info","warning","error"],L2e=gt({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Je([String,Object]),default:""},id:{type:String,default:""},message:{type:Je([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Je(Function),default:()=>{}},onClose:{type:Je(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...H3,""],default:""},zIndex:{type:Number,default:0}}),B2e={destroy:()=>!0},z2e=me({name:"ElNotification",components:ut({ElIcon:_t},Vg),props:L2e,emits:B2e,setup(e){const t=L(!1);let n;const s=_(()=>{const f=e.type;return f&&Ua[e.type]?`el-notification--${f}`:""}),o=_(()=>Ua[e.type]||e.icon||""),r=_(()=>e.position.endsWith("right")?"right":"left"),a=_(()=>e.position.startsWith("top")?"top":"bottom"),i=_(()=>({[a.value]:`${e.offset}px`,zIndex:e.zIndex}));function l(){e.duration>0&&({stop:n}=ic(()=>{t.value&&c()},e.duration))}function u(){n==null||n()}function c(){t.value=!1}function d({code:f}){f===Qe.delete||f===Qe.backspace?u():f===Qe.esc?t.value&&c():l()}return Mt(()=>{l(),t.value=!0}),Ss(document,"keydown",d),{horizontalClass:r,typeClass:s,iconComponent:o,positionStyle:i,visible:t,close:c,clearTimer:u,startTimer:l}}}),V2e=["id"],W2e={class:"el-notification__group"},H2e=["textContent"],U2e={key:0},G2e=["innerHTML"];function K2e(e,t,n,s,o,r){const a=re("el-icon"),i=re("close");return T(),ve(cs,{name:"el-notification-fade",onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=l=>e.$emit("destroy"))},{default:oe(()=>[$t(W("div",{id:e.id,class:q(["el-notification",e.customClass,e.horizontalClass]),style:nt(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...l)=>e.clearTimer&&e.clearTimer(...l)),onMouseleave:t[1]||(t[1]=(...l)=>e.startTimer&&e.startTimer(...l)),onClick:t[2]||(t[2]=(...l)=>e.onClick&&e.onClick(...l))},[e.iconComponent?(T(),ve(a,{key:0,class:q(["el-notification__icon",e.typeClass])},{default:oe(()=>[(T(),ve(en(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),W("div",W2e,[W("h2",{class:"el-notification__title",textContent:Fe(e.title)},null,8,H2e),$t(W("div",{class:"el-notification__content",style:nt(e.title?void 0:{margin:0})},[_e(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(T(),B(it,{key:1},[ce(" Caution here, message could've been compromized, nerver use user's input as message "),ce(" eslint-disable-next-line "),W("p",{innerHTML:e.message},null,8,G2e)],2112)):(T(),B("p",U2e,Fe(e.message),1))])],4),[[Qt,e.message]]),e.showClose?(T(),ve(a,{key:0,class:"el-notification__closeBtn",onClick:ht(e.close,["stop"])},{default:oe(()=>[le(i)]),_:1},8,["onClick"])):ce("v-if",!0)])],46,V2e),[[Qt,e.visible]])]),_:3},8,["onBeforeLeave"])}var j2e=We(z2e,[["render",K2e]]);const Xm={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},f1=16;let q2e=1;const Ym=function(e={}){if(!qt)return{close:()=>{}};(typeof e=="string"||bs(e))&&(e={message:e});const t=e.position||"top-right";let n=e.offset||0;Xm[t].forEach(({vm:u})=>{var c;n+=(((c=u.el)==null?void 0:c.offsetHeight)||0)+f1}),n+=f1;const s=`notification_${q2e++}`,o=e.onClose,r=Ut(ut({zIndex:is.nextZIndex(),offset:n},e),{id:s,onClose:()=>{X2e(s,t,o)}});let a=document.body;e.appendTo instanceof HTMLElement?a=e.appendTo:typeof e.appendTo=="string"&&(a=document.querySelector(e.appendTo)),a instanceof HTMLElement||(a=document.body);const i=document.createElement("div"),l=le(j2e,r,bs(r.message)?{default:()=>r.message}:null);return l.props.onDestroy=()=>{ac(null,i)},ac(l,i),Xm[t].push({vm:l}),a.appendChild(i.firstElementChild),{close:()=>{l.component.proxy.visible=!1}}};H3.forEach(e=>{Ym[e]=(t={})=>((typeof t=="string"||bs(t))&&(t={message:t}),Ym(Ut(ut({},t),{type:e})))});function X2e(e,t,n){const s=Xm[t],o=s.findIndex(({vm:u})=>{var c;return((c=u.component)==null?void 0:c.props.id)===e});if(o===-1)return;const{vm:r}=s[o];if(!r)return;n==null||n(r);const a=r.el.offsetHeight,i=t.split("-")[0];s.splice(o,1);const l=s.length;if(!(l<1))for(let u=o;u<l;u++){const{el:c,component:d}=s[u].vm,f=parseInt(c.style[i],10)-a-f1;d.props.offset=f}}function Y2e(){for(const e of Object.values(Xm))e.forEach(({vm:t})=>{t.component.proxy.visible=!1})}Ym.closeAll=Y2e;const Z2e=jD(Ym,"$notify");var J2e=[s2e,l2e,w2e,P2e,Z2e,oge],_je=uX([...YCe,...J2e]);/**
  * vue-class-component v8.0.0-rc.1
  * (c) 2015-present Evan You
  * @license MIT
  */function YE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Q2e(e,t,n){return t&&ZE(e.prototype,t),n&&ZE(e,n),e}function eke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function Bb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(s){eke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h1(e,t)}function Zm(e){return Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Zm(e)}function h1(e,t){return h1=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},h1(e,t)}function nke(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ske(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oke(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:ske(e)}function rke(e){var t=nke();return function(){var s=Zm(e),o;if(t){var r=Zm(this).constructor;o=Reflect.construct(s,arguments,r)}else o=s.apply(this,arguments);return oke(this,o)}}function ake(e){return ike(e)||lke(e)||uke(e)||cke()}function ike(e){if(Array.isArray(e))return p1(e)}function lke(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function uke(e,t){if(!!e){if(typeof e=="string")return p1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p1(e,t)}}function p1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function cke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _p(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!1,configurable:!0})}function dke(e,t,n){Object.defineProperty(e,t,{get:function(){return n[t].value},set:function(o){n[t].value=o},enumerable:!0,configurable:!0})}function fke(e){var t=Object.getPrototypeOf(e.prototype);if(!!t)return t.constructor}function Op(e,t){return e.hasOwnProperty(t)?e[t]:void 0}var U3=function(){function e(t,n){var s=this;YE(this,e),_p(this,"$props",function(){return t}),_p(this,"$attrs",function(){return n.attrs}),_p(this,"$slots",function(){return n.slots}),_p(this,"$emit",function(){return n.emit}),Object.keys(t).forEach(function(o){Object.defineProperty(s,o,{enumerable:!1,configurable:!0,writable:!0,value:t[o]})})}return Q2e(e,null,[{key:"registerHooks",value:function(n){var s;(s=this.__h).push.apply(s,ake(n))}},{key:"with",value:function(n){var s=new n,o={};Object.keys(s).forEach(function(a){var i=s[a];o[a]=i!=null?i:null});var r=function(a){tke(l,a);var i=rke(l);function l(){return YE(this,l),i.apply(this,arguments)}return l}(this);return r.__b={props:o},r}},{key:"__vccOpts",get:function(){if(this===hke)return{};var n=this,s=Op(n,"__c");if(s)return s;var o=Bb({},Op(n,"__o"));n.__c=o;var r=fke(n);r&&(o.extends=r.__vccOpts);var a=Op(n,"__b");a&&(o.mixins=o.mixins||[],o.mixins.unshift(a)),o.methods=Bb({},o.methods),o.computed=Bb({},o.computed);var i=n.prototype;Object.getOwnPropertyNames(i).forEach(function(c){if(c!=="constructor"){if(n.__h.indexOf(c)>-1){o[c]=i[c];return}var d=Object.getOwnPropertyDescriptor(i,c);if(typeof d.value=="function"){o.methods[c]=d.value;return}if(d.get||d.set){o.computed[c]={get:d.get,set:d.set};return}}}),o.setup=function(c,d){var f,h=new n(c,d),p=Object.keys(h),m={},g=null;return p.forEach(function(v){h[v]===void 0||h[v]&&h[v].__s||(m[v]=L(h[v]),dke(h,v,m))}),p.forEach(function(v){if(h[v]&&h[v].__s){var b=h[v].__s();b instanceof Promise?(g||(g=Promise.resolve(m)),g=g.then(function(){return b.then(function($){return m[v]=Rm($),m})})):m[v]=Rm(b)}}),(f=g)!==null&&f!==void 0?f:m};var l=Op(n,"__d");l&&l.forEach(function(c){return c(o)});var u=["render","ssrRender","__file","__cssModules","__scopeId","__hmrId"];return u.forEach(function(c){n[c]&&(o[c]=n[c])}),o}}]),e}();U3.__h=["data","beforeCreate","created","beforeMount","mounted","beforeUnmount","unmounted","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];var hke=U3;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pke=1e-7,mke=1e-4;class G3{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class D${refCount(t){return Ho("refCount")}incRef(t){return Ho("incRef")}timerAvailable(){return!0}time(t){return Ho("time")}read(t){return Ho("read")}readSync(t){return Ho("readSync")}readToGPU(t,n){return Ho("readToGPU")}numDataIds(){return Ho("numDataIds")}disposeData(t,n){return Ho("disposeData")}write(t,n,s){return Ho("write")}move(t,n,s,o,r){return Ho("move")}memory(){return Ho("memory")}floatPrecision(){return Ho("floatPrecision")}epsilon(){return this.floatPrecision()===32?pke:mke}dispose(){return Ho("dispose")}}function Ho(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Lu(e,t,n)}function Wl(e,t,n){return Math.max(e,Math.min(t,n))}function K3(e){return e%2===0?e:e+1}function Lu(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function vke(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function j(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Nr(e,t,n=""){j(Dn(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function j3(e){j(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function vc(e,t=[],n=!1){if(t==null&&(t=[]),Array.isArray(e)||Ca(e)&&!n)for(let s=0;s<e.length;++s)vc(e[s],t,n);else t.push(e);return t}function Ue(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Dn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function bc(e){return e%1===0}function m1(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Ju(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function QE(e,t=s=>0,n){return new Promise((s,o)=>{let r=0;const a=()=>{if(e()){s();return}r++;const i=t(r);if(n!=null&&r>=n){o();return}setTimeout(a,i)};a()})}function q3(e,t){let n=1,s=-1;for(let r=0;r<e.length;++r)if(e[r]>=0)n*=e[r];else if(e[r]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${r}`);s=r}else if(e[r]<0)throw Error(`Shapes can not be < 0. Found ${e[r]} at dim ${r}`);if(s===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const o=e.slice();return o[s]=t/n,o}function an(e,t){const n=t.length;return e=e==null?t.map((s,o)=>o):[].concat(e),j(e.every(s=>s>=-n&&s<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),j(e.every(s=>bc(s)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(s=>s<0?n+s:s)}function Vi(e,t){const n=[],s=[],o=t!=null&&Array.isArray(t)&&t.length===0,r=t==null||o?null:an(t,e).sort();let a=0;for(let i=0;i<e.length;++i){if(r!=null){if(r[a]===i&&e[i]!==1)throw new Error(`Can't squeeze axis ${i} since its dim '${e[i]}' is not 1`);(r[a]==null||r[a]>i)&&e[i]===1&&(n.push(e[i]),s.push(i)),r[a]<=i&&a++}e[i]!==1&&(n.push(e[i]),s.push(i))}return{newShape:n,keptDims:s}}function Gs(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else throw new Error(`Unknown data type ${e}`);return n}function yo(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function bke(e,t){for(let n=0;n<e.length;n++){const s=e[n];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${t} being uploaded contains ${s}.`)}}function yke(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function X3(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function Ca(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function g1(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function wke(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function zf(e){return typeof e=="string"||e instanceof String}function $ke(e){return typeof e=="boolean"}function v1(e){return typeof e=="number"}function Vf(e){return Array.isArray(e)?Vf(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":v1(e)?"float32":zf(e)?"string":$ke(e)?"bool":"float32"}function b1(e){return!!(e&&e.constructor&&e.call&&e.apply)}function y1(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Rt(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let s=t-3;s>=0;--s)n[s]=n[s+1]*e[s+1];return n}function Y3(e,t,n,s=!1){const o=new Array;if(t.length===1){const r=t[0]*(s?2:1);for(let a=0;a<r;a++)o[a]=n[e+a]}else{const r=t[0],a=t.slice(1),i=a.reduce((l,u)=>l*u)*(s?2:1);for(let l=0;l<r;l++)o[l]=Y3(e+l*i,a,n,s)}return o}function qr(e,t,n=!1){if(e.length===0)return t[0];const s=e.reduce((o,r)=>o*r)*(n?2:1);if(s===0)return[];if(s!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return Y3(0,e,t,n)}function Z3(e,t){const n=ro(e,t);for(let s=0;s<n.length;s++)n[s]=1;return n}function ro(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function J3(e,t){const n=e.reduce((s,o)=>s*o,1);if(t==null||t==="float32")return qr(e,new Float32Array(n));if(t==="int32")return qr(e,new Int32Array(n));if(t==="bool")return qr(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function Q3(e){e.forEach(t=>{j(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function va(e,t,n){if(t===0)return 0;if(t===1)return e[0];let s=e[e.length-1];for(let o=0;o<e.length-1;++o)s+=n[o]*e[o];return s}function Wf(e,t,n){if(t===0)return[];if(t===1)return[e];const s=new Array(t);for(let o=0;o<s.length-1;++o)s[o]=Math.floor(e/n[o]),e-=s[o]*n[o];return s[s.length-1]=e,s}function eO(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eT="tfjsflags";class Cke{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=kke,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(Ge().getBool("IS_TEST")||Ge().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,s){if(this.flagRegistry[t]={evaluationFn:n,setHook:s},this.urlFlags[t]!=null){const o=this.urlFlags[t];Ge().getBool("IS_TEST")||Ge().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(eO(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global=="undefined"||typeof this.global.location=="undefined"||typeof this.global.location.search=="undefined")return;const t=this.getQueryParams(this.global.location.search);eT in t&&t[eT].split(",").forEach(s=>{const[o,r]=s.split(":");this.urlFlags[o]=xke(o,r)})}}function kke(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...s)=>(Ske(t,s[0],s[1]),s.join("="))),t}function Ske(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function xke(e,t){if(t=t.toLowerCase(),t==="true"||t==="false")return t==="true";if(`${+t}`===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}function Ge(){return tO}let tO=null;function Ike(e){tO=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let zb;function nO(){if(zb==null){let e;if(typeof window!="undefined")e=window;else if(typeof global!="undefined")e=global;else if(typeof process!="undefined")e=process;else if(typeof self!="undefined")e=self;else throw new Error("Could not find a global object");zb=e}return zb}function Eke(){const e=nO();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function R$(e,t){const n=Eke();if(n.has(e))return n.get(e);{const s=t();return n.set(e,s),n.get(e)}}const Yg="Abs",Hf="Acos",Uf="Acosh",Wc="Add",_$="AddN",O$="All",M$="Any",Zg="ArgMax",Jg="ArgMin",Gf="Asin",Kf="Asinh",jf="Atan",qf="Atanh",Xf="Atan2",Qg="AvgPool",F$="AvgPoolGrad",ev="AvgPool3D",P$="AvgPool3DGrad",tv="BatchMatMul",nv="BatchToSpaceND",L$="Bincount",Tke="BroadcastTo",sO="BroadcastArgs",Yf="Cast",Zf="Ceil",Jf="ClipByValue",B$="Complex",sv="ComplexAbs",ov="Concat",rv="Conv2D",z$="Conv2DBackpropFilter",av="Conv2DBackpropInput",iv="Conv3D",V$="Conv3DBackpropFilterV2",W$="Conv3DBackpropInputV2",Qf="Cos",eh="Cosh",lv="Cumsum",H$="CropAndResize",oO="DenseBincount",U$="DepthToSpace",uv="DepthwiseConv2dNative",G$="DepthwiseConv2dNativeBackpropFilter",K$="DepthwiseConv2dNativeBackpropInput",rO="Diag",cv="Dilation2D",w1="Dilation2DBackpropInput",$1="Dilation2DBackpropFilter",th="RealDiv",aO="Einsum",nh="Elu",j$="EluGrad",sh="Erf",dv="Equal",oh="Exp",fv="ExpandDims",rh="Expm1",q$="FFT",X$="Fill",Y$="FlipLeftRight",ah="Floor",ih="FloorDiv",hv="FusedBatchNorm",pv="GatherV2",iO="GatherNd",mv="Greater",lh="GreaterEqual",uh="Identity",Z$="IFFT",J$="Imag",ch="IsFinite",dh="IsInf",fh="IsNan",gv="LeakyRelu",vv="Less",bv="LessEqual",lO="LinSpace",hh="Log",ph="Log1p",yv="LogicalAnd",wv="LogicalNot",$v="LogicalOr",Nke="LogSoftmax",Cv="LRN",Q$="LRNGrad",kv="Max",mh="Maximum",Sv="MaxPool",eC="MaxPoolGrad",xv="MaxPool3D",tC="MaxPool3DGrad",uO="MaxPoolWithArgmax",Iv="Mean",Ev="Min",gh="Minimum",Tv="MirrorPad",vh="Mod",cO="Multinomial",bh="Multiply",Nv="Neg",Av="NotEqual",nC="NonMaxSuppressionV3",sC="NonMaxSuppressionV4",oC="NonMaxSuppressionV5",Dv="OnesLike",Rv="OneHot",_v="Pack",Ov="PadV2",yh="Pow",Mv="Prelu",rC="Prod",aC="Range",iC="Real",wh="Reciprocal",$h="Relu",Fv="Reshape",Pv="ResizeNearestNeighbor",lC="ResizeNearestNeighborGrad",Lv="ResizeBilinear",uC="ResizeBilinearGrad",Ch="Relu6",Bv="Reverse",kh="Round",Sh="Rsqrt",dO="ScatterNd",zv="Select",xh="Selu",Vv="Slice",Ih="Sin",Eh="Sinh",Th="Sign",Nh="Sigmoid",Ah="Softplus",Dh="Sqrt",Wv="Sum",Hv="SpaceToBatchND",Uv="SplitV",Gv="Softmax",cC="SparseFillEmptyRows",dC="SparseReshape",fC="SparseSegmentMean",hC="SparseSegmentSum",fO="SparseToDense",Rh="SquaredDifference",pC="Square",mC="StridedSlice",gC="StringNGrams",vC="StringSplit",bC="StringToHashBucketFast",_h="Sub",Oh="Tan",Mh="Tanh",Fh="Tile",yC="TopK",wC="Transform",Kv="Transpose",$C="Unique",jv="Unpack",qv="UnsortedSegmentSum",Xv="ZerosLike",Ph="Step",Ake="FromPixels",CC="RotateWithOffset",Jm="_FusedMatMul",Qm="FusedConv2D",hO="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qo(...e){Ge().getBool("IS_TEST")||Ge().getBool("PROD")||console.warn(...e)}function Dke(...e){Ge().getBool("IS_TEST")||Ge().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eg=R$("kernelRegistry",()=>new Map),C1=R$("gradRegistry",()=>new Map);function tT(e,t){const n=mO(e,t);return eg.get(n)}function nT(e){return C1.get(e)}function sT(e){const t=eg.entries(),n=[];for(;;){const{done:s,value:o}=t.next();if(s)break;const[r,a]=o,[i]=r.split("_");i===e&&n.push(a)}return n}function pO(e){const{kernelName:t,backendName:n}=e,s=mO(t,n);eg.has(s)&&qo(`The kernel '${t}' for backend '${n}' is already registered`),eg.set(s,e)}function Rke(e){const{kernelName:t}=e;C1.has(t)&&Ge().getBool("DEBUG")&&qo(`Overriding the gradient for '${t}'`),C1.set(t,e)}function mO(e,t){return`${t}_${e}`}var k1=Yn,pr=null;try{pr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Yn(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}Yn.prototype.__isLong__;Object.defineProperty(Yn.prototype,"__isLong__",{value:!0});function zo(e){return(e&&e.__isLong__)===!0}Yn.isLong=zo;var oT={},rT={};function au(e,t){var n,s,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(s=rT[e],s)?s:(n=Zn(e,(e|0)<0?-1:0,!0),o&&(rT[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(s=oT[e],s)?s:(n=Zn(e,e<0?-1:0,!1),o&&(oT[e]=n),n))}Yn.fromInt=au;function mr(e,t){if(isNaN(e))return t?Il:gr;if(t){if(e<0)return Il;if(e>=gO)return yO}else{if(e<=-iT)return No;if(e+1>=iT)return bO}return e<0?mr(-e,t).neg():Zn(e%yc|0,e/yc|0,t)}Yn.fromNumber=mr;function Zn(e,t,n){return new Yn(e,t,n)}Yn.fromBits=Zn;var tg=Math.pow;function kC(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return gr;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var s;if((s=e.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return kC(e.substring(1),t,n).neg();for(var o=mr(tg(n,8)),r=gr,a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+i),n);if(i<8){var u=mr(tg(n,i));r=r.mul(u).add(mr(l))}else r=r.mul(o),r=r.add(mr(l))}return r.unsigned=t,r}Yn.fromString=kC;function ia(e,t){return typeof e=="number"?mr(e,t):typeof e=="string"?kC(e,t):Zn(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}Yn.fromValue=ia;var aT=1<<16,_ke=1<<24,yc=aT*aT,gO=yc*yc,iT=gO/2,lT=au(_ke),gr=au(0);Yn.ZERO=gr;var Il=au(0,!0);Yn.UZERO=Il;var Gu=au(1);Yn.ONE=Gu;var vO=au(1,!0);Yn.UONE=vO;var S1=au(-1);Yn.NEG_ONE=S1;var bO=Zn(-1,2147483647,!1);Yn.MAX_VALUE=bO;var yO=Zn(-1,-1,!0);Yn.MAX_UNSIGNED_VALUE=yO;var No=Zn(0,-2147483648,!1);Yn.MIN_VALUE=No;var ft=Yn.prototype;ft.toInt=function(){return this.unsigned?this.low>>>0:this.low};ft.toNumber=function(){return this.unsigned?(this.high>>>0)*yc+(this.low>>>0):this.high*yc+(this.low>>>0)};ft.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(No)){var n=mr(t),s=this.div(n),o=s.mul(n).sub(this);return s.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var r=mr(tg(t,6),this.unsigned),a=this,i="";;){var l=a.div(r),u=a.sub(l.mul(r)).toInt()>>>0,c=u.toString(t);if(a=l,a.isZero())return c+i;for(;c.length<6;)c="0"+c;i=""+c+i}};ft.getHighBits=function(){return this.high};ft.getHighBitsUnsigned=function(){return this.high>>>0};ft.getLowBits=function(){return this.low};ft.getLowBitsUnsigned=function(){return this.low>>>0};ft.getNumBitsAbs=function(){if(this.isNegative())return this.eq(No)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&(t&1<<n)==0;n--);return this.high!=0?n+33:n+1};ft.isZero=function(){return this.high===0&&this.low===0};ft.eqz=ft.isZero;ft.isNegative=function(){return!this.unsigned&&this.high<0};ft.isPositive=function(){return this.unsigned||this.high>=0};ft.isOdd=function(){return(this.low&1)===1};ft.isEven=function(){return(this.low&1)===0};ft.equals=function(t){return zo(t)||(t=ia(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};ft.eq=ft.equals;ft.notEquals=function(t){return!this.eq(t)};ft.neq=ft.notEquals;ft.ne=ft.notEquals;ft.lessThan=function(t){return this.comp(t)<0};ft.lt=ft.lessThan;ft.lessThanOrEqual=function(t){return this.comp(t)<=0};ft.lte=ft.lessThanOrEqual;ft.le=ft.lessThanOrEqual;ft.greaterThan=function(t){return this.comp(t)>0};ft.gt=ft.greaterThan;ft.greaterThanOrEqual=function(t){return this.comp(t)>=0};ft.gte=ft.greaterThanOrEqual;ft.ge=ft.greaterThanOrEqual;ft.compare=function(t){if(zo(t)||(t=ia(t)),this.eq(t))return 0;var n=this.isNegative(),s=t.isNegative();return n&&!s?-1:!n&&s?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};ft.comp=ft.compare;ft.negate=function(){return!this.unsigned&&this.eq(No)?No:this.not().add(Gu)};ft.neg=ft.negate;ft.add=function(t){zo(t)||(t=ia(t));var n=this.high>>>16,s=this.high&65535,o=this.low>>>16,r=this.low&65535,a=t.high>>>16,i=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,f=0,h=0;return h+=r+u,f+=h>>>16,h&=65535,f+=o+l,d+=f>>>16,f&=65535,d+=s+i,c+=d>>>16,d&=65535,c+=n+a,c&=65535,Zn(f<<16|h,c<<16|d,this.unsigned)};ft.subtract=function(t){return zo(t)||(t=ia(t)),this.add(t.neg())};ft.sub=ft.subtract;ft.multiply=function(t){if(this.isZero())return gr;if(zo(t)||(t=ia(t)),pr){var n=pr.mul(this.low,this.high,t.low,t.high);return Zn(n,pr.get_high(),this.unsigned)}if(t.isZero())return gr;if(this.eq(No))return t.isOdd()?No:gr;if(t.eq(No))return this.isOdd()?No:gr;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(lT)&&t.lt(lT))return mr(this.toNumber()*t.toNumber(),this.unsigned);var s=this.high>>>16,o=this.high&65535,r=this.low>>>16,a=this.low&65535,i=t.high>>>16,l=t.high&65535,u=t.low>>>16,c=t.low&65535,d=0,f=0,h=0,p=0;return p+=a*c,h+=p>>>16,p&=65535,h+=r*c,f+=h>>>16,h&=65535,h+=a*u,f+=h>>>16,h&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=r*u,d+=f>>>16,f&=65535,f+=a*l,d+=f>>>16,f&=65535,d+=s*c+o*u+r*l+a*i,d&=65535,Zn(h<<16|p,d<<16|f,this.unsigned)};ft.mul=ft.multiply;ft.divide=function(t){if(zo(t)||(t=ia(t)),t.isZero())throw Error("division by zero");if(pr){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?pr.div_u:pr.div_s)(this.low,this.high,t.low,t.high);return Zn(n,pr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Il:gr;var s,o,r;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Il;if(t.gt(this.shru(1)))return vO;r=Il}else{if(this.eq(No)){if(t.eq(Gu)||t.eq(S1))return No;if(t.eq(No))return Gu;var a=this.shr(1);return s=a.div(t).shl(1),s.eq(gr)?t.isNegative()?Gu:S1:(o=this.sub(t.mul(s)),r=s.add(o.div(t)),r)}else if(t.eq(No))return this.unsigned?Il:gr;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=gr}for(o=this;o.gte(t);){s=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var i=Math.ceil(Math.log(s)/Math.LN2),l=i<=48?1:tg(2,i-48),u=mr(s),c=u.mul(t);c.isNegative()||c.gt(o);)s-=l,u=mr(s,this.unsigned),c=u.mul(t);u.isZero()&&(u=Gu),r=r.add(u),o=o.sub(c)}return r};ft.div=ft.divide;ft.modulo=function(t){if(zo(t)||(t=ia(t)),pr){var n=(this.unsigned?pr.rem_u:pr.rem_s)(this.low,this.high,t.low,t.high);return Zn(n,pr.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};ft.mod=ft.modulo;ft.rem=ft.modulo;ft.not=function(){return Zn(~this.low,~this.high,this.unsigned)};ft.and=function(t){return zo(t)||(t=ia(t)),Zn(this.low&t.low,this.high&t.high,this.unsigned)};ft.or=function(t){return zo(t)||(t=ia(t)),Zn(this.low|t.low,this.high|t.high,this.unsigned)};ft.xor=function(t){return zo(t)||(t=ia(t)),Zn(this.low^t.low,this.high^t.high,this.unsigned)};ft.shiftLeft=function(t){return zo(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Zn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Zn(0,this.low<<t-32,this.unsigned)};ft.shl=ft.shiftLeft;ft.shiftRight=function(t){return zo(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Zn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Zn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};ft.shr=ft.shiftRight;ft.shiftRightUnsigned=function(t){if(zo(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var s=this.low;return Zn(s>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?Zn(n,0,this.unsigned):Zn(n>>>t-32,0,this.unsigned)};ft.shru=ft.shiftRightUnsigned;ft.shr_u=ft.shiftRightUnsigned;ft.toSigned=function(){return this.unsigned?Zn(this.low,this.high,!1):this};ft.toUnsigned=function(){return this.unsigned?this:Zn(this.low,this.high,!0)};ft.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};ft.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};ft.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Yn.fromBytes=function(t,n,s){return s?Yn.fromBytesLE(t,n):Yn.fromBytesBE(t,n)};Yn.fromBytesLE=function(t,n){return new Yn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};Yn.fromBytesBE=function(t,n){return new Yn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var Oke=Object.freeze(S5({__proto__:null,[Symbol.toStringTag]:"Module",default:k1},[k1]));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bl=k1||Oke;function Yv(e){return bl.fromString(e,!0,16)}const wO=Yv("c3a5c85c97cb3127"),pl=Yv("b492b66fbe98f273"),io=Yv("9ae16a3b2f90404f");function x1(e){return e.xor(e.shru(47))}function $O(e,t,n){const s=e.slice(t,t+n);return bl.fromBytes(Array.from(s),!0,!0)}function Un(e,t){return $O(e,t,8)}function uT(e,t){return $O(e,t,4)}function Rs(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function $i(e,t,n=Yv("9ddfea08eb382d69")){let s=e.xor(t).mul(n);s=s.xor(s.shru(47));let o=t.xor(s).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function Mke(e,t,n,s,o,r){o=o.add(e),r=Rs(r.add(o).add(s),21);const a=o;return o=o.add(t),o=o.add(n),r=r.add(Rs(o,44)),[o.add(s),r.add(a)]}function Mp(e,t,n,s){return Mke(Un(e,t),Un(e,t+8),Un(e,t+16),Un(e,t+24),n,s)}function Fke(e,t=e.length){if(t>=8){const n=io.add(t*2),s=Un(e,0).add(io),o=Un(e,t-8),r=Rs(o,37).mul(n).add(s),a=Rs(s,25).add(o).mul(n);return $i(r,a,n)}if(t>=4){const n=io.add(t*2),s=uT(e,0);return $i(s.shl(3).add(t),uT(e,t-4),n)}if(t>0){const n=e[0],s=e[t>>1],o=e[t-1],r=n+(s<<8),a=t+(o<<2);return x1(io.mul(r).xor(wO.mul(a))).mul(io)}return io}function Pke(e,t=e.length){const n=io.add(t*2),s=Un(e,0).mul(pl),o=Un(e,8),r=Un(e,t-8).mul(n),a=Un(e,t-16).mul(io);return $i(Rs(s.add(o),43).add(Rs(r,30)).add(a),s.add(Rs(o.add(io),18)).add(r),n)}function Lke(e,t=e.length){const n=io.add(t*2),s=Un(e,0).mul(io),o=Un(e,8),r=Un(e,t-8).mul(n),a=Un(e,t-16).mul(io),i=Rs(s.add(o),43).add(Rs(r,30)).add(a),l=$i(i,s.add(Rs(o.add(io),18)).add(r),n),u=Un(e,16).mul(n),c=Un(e,24),d=i.add(Un(e,t-32)).mul(n),f=l.add(Un(e,t-24)).mul(n);return $i(Rs(u.add(c),43).add(Rs(d,30)).add(f),u.add(Rs(c.add(s),18)).add(d),n)}function Bke(e,t=e.length){const n=bl.fromNumber(81,!0);if(t<=32)return t<=16?Fke(e,t):Pke(e,t);if(t<=64)return Lke(e,t);let s=n,o=n.mul(pl).add(113),r=x1(o.mul(io).add(113)).mul(io),a=[bl.UZERO,bl.UZERO],i=[bl.UZERO,bl.UZERO];s=s.mul(io).add(Un(e,0));let l=0;const u=(t-1>>6)*64,c=u+(t-1&63)-63;do s=Rs(s.add(o).add(a[0]).add(Un(e,l+8)),37).mul(pl),o=Rs(o.add(a[1]).add(Un(e,l+48)),42).mul(pl),s=s.xor(i[1]),o=o.add(a[0]).add(Un(e,l+40)),r=Rs(r.add(i[0]),33).mul(pl),a=Mp(e,l,a[1].mul(pl),s.add(i[0])),i=Mp(e,l+32,r.add(i[1]),o.add(Un(e,l+16))),[r,s]=[s,r],l+=64;while(l!==u);const d=pl.add(r.and(255).shl(1));return l=c,i[0]=i[0].add(t-1&63),a[0]=a[0].add(i[0]),i[0]=i[0].add(a[0]),s=Rs(s.add(o).add(a[0]).add(Un(e,l+8)),37).mul(d),o=Rs(o.add(a[1]).add(Un(e,l+48)),42).mul(d),s=s.xor(i[1].mul(9)),o=o.add(a[0].mul(9).add(Un(e,l+40))),r=Rs(r.add(i[0]),33).mul(d),a=Mp(e,l,a[1].mul(d),s.add(i[0])),i=Mp(e,l+32,r.add(i[1]),o.add(Un(e,l+16))),[r,s]=[s,r],$i($i(a[0],i[0],d).add(x1(o).mul(wO)).add(r),$i(a[1],i[1],d).add(s),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wi(e,t){return t==="string"?Ci(e):iu([e],t)}function zke(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function iu(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=vc(e)),Ge().getBool("DEBUG")&&bke(e,t),zke(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let s=0;s<n.length;++s)Math.round(e[s])!==0&&(n[s]=1);return n}else throw new Error(`Unknown data type ${t}`)}function go(){return Ge().platform.now()}function Ci(e,t="utf-8"){return t=t||"utf-8",Ge().platform.encode(e,t)}function wc(e,t="utf-8"){return t=t||"utf-8",Ge().platform.decode(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vke{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new Hke)}profileKernel(t,n,s){let o;const r=()=>{o=s()};let a;const i=go();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(r);else{r();for(const u of o)u.dataSync();a=Promise.resolve({kernelMs:go()-i})}if(Ge().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<o.length;u++){const c=o[u];c.data().then(d=>{Wke(d,c.dtype,t)})}return{kernelName:t,outputs:o,inputs:n,timeMs:a.then(u=>u.kernelMs),extraInfo:a.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:s,timeMs:o,inputs:r,extraInfo:a}=t;s.forEach(i=>{Promise.all([i.data(),o,a]).then(l=>{this.logger.logKernelProfile(n,i,l[0],l[1],r,l[2])})})}}function Wke(e,t,n){if(t!=="float32")return!1;for(let s=0;s<e.length;s++){const o=e[s];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class Hke{logKernelProfile(t,n,s,o,r,a){const i=typeof o=="number"?Ju(`${o}ms`,9):o.error,l=Ju(t,25),u=n.rank,c=n.size,d=Ju(n.shape.toString(),14);let f="";for(const h in r){const p=r[h];if(p!=null){const m=p.shape||n.shape,g=m.length;f+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${i}	%c${u}D ${d}	%c${c}	%c${f}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(e,t,n){const s={},o={};for(let l=0;l<t.length;l++)s[t[l].id]=!0;for(let l=0;l<e.length;l++){const u=e[l],c=u.inputs;for(const d in c){const f=c[d];let h=!1;for(let p=0;p<t.length;p++)if(s[f.id]){u.outputs.forEach(m=>s[m.id]=!0),h=!0,o[u.id]=!0;break}if(h)break}}const r={};r[n.id]=!0;const a={};for(let l=e.length-1;l>=0;l--){const u=e[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(r[u.outputs[d].id]){for(const f in c)r[c[f].id]=!0,a[u.id]=!0;break}}const i=[];for(let l=0;l<e.length;l++){const u=e[l];if(o[u.id]&&a[u.id]){const c={};for(const f in u.inputs){const h=u.inputs[f];s[h.id]&&(c[f]=h)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,i.push(d)}}return i}function Gke(e,t,n,s){for(let o=t.length-1;o>=0;o--){const r=t[o],a=[];if(r.outputs.forEach(l=>{const u=e[l.id];u!=null?a.push(u):a.push(null)}),r.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const i=r.gradient(a);for(const l in r.inputs){if(!(l in i))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(i)}.`);const u=n(()=>i[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=r.inputs[l];if(!Dn(u.shape,c.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=u;else{const d=e[c.id];e[c.id]=s(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cT=20,vd=3,Vb=7;function Kke(e,t,n,s){const o=Rt(t),r=jke(e,t,n,o),a=t.length,i=Im(e,t,n,o,r),l=["Tensor"];return s&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(i.map(u=>"    "+u).join(`
`)),l.join(`
`)}function jke(e,t,n,s){const o=Ue(t),r=s[s.length-1],a=new Array(r).fill(0),i=t.length,l=n==="complex64"?Td(e):e;if(i>1)for(let u=0;u<o/r;u++){const c=u*r;for(let d=0;d<r;d++)a[d]=Math.max(a[d],Ed(l[c+d],0,n).length)}return a}function Ed(e,t,n){let s;return Array.isArray(e)?s=`${parseFloat(e[0].toFixed(Vb))} + ${parseFloat(e[1].toFixed(Vb))}j`:zf(e)?s=`'${e}'`:n==="bool"?s=CO(e):s=parseFloat(e.toFixed(Vb)).toString(),Ju(s,t)}function CO(e){return e===0?"false":"true"}function Im(e,t,n,s,o,r=!0){const a=n==="complex64"?2:1,i=t[0],l=t.length;if(l===0){if(n==="complex64"){const m=Td(e);return[Ed(m[0],0,n)]}return n==="bool"?[CO(e[0])]:[e[0].toString()]}if(l===1){if(i>cT){const g=vd*a;let v=Array.from(e.slice(0,g)),b=Array.from(e.slice((i-vd)*a,i*a));return n==="complex64"&&(v=Td(v),b=Td(b)),["["+v.map(($,y)=>Ed($,o[y],n)).join(", ")+", ..., "+b.map(($,y)=>Ed($,o[i-vd+y],n)).join(", ")+"]"]}const m=n==="complex64"?Td(e):Array.from(e);return["["+m.map((g,v)=>Ed(g,o[v],n)).join(", ")+"]"]}const u=t.slice(1),c=s.slice(1),d=s[0]*a,f=[];if(i>cT){for(let m=0;m<vd;m++){const g=m*d,v=g+d;f.push(...Im(e.slice(g,v),u,n,c,o,!1))}f.push("...");for(let m=i-vd;m<i;m++){const g=m*d,v=g+d;f.push(...Im(e.slice(g,v),u,n,c,o,m===i-1))}}else for(let m=0;m<i;m++){const g=m*d,v=g+d;f.push(...Im(e.slice(g,v),u,n,c,o,m===i-1))}const h=l===2?",":"";f[0]="["+f[0]+h;for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(r?"":p),f}function Td(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class to{constructor(t,n,s){if(this.dtype=n,this.shape=t.slice(),this.size=Ue(t),s!=null){const o=s.length;j(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||yo(n,this.size),this.strides=Rt(t)}set(t,...n){n.length===0&&(n=[0]),j(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const s=this.locToIndex(n);this.values[s]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const o of t){if(o<0||o>=this.shape[n]){const r=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(r)}n++}let s=t[t.length-1];for(let o=0;o<t.length-1;++o)s+=this.strides[o]*t[o];return this.values[s]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let s=0;s<t.length-1;++s)n+=this.strides[s]*t[s];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let s=0;s<n.length-1;++s)n[s]=Math.floor(t/this.strides[s]),t-=n[s]*this.strides[s];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return Wr().makeTensor(this.values,this.shape,this.dtype)}}let Wr=null,Bu=null;function qke(e){Wr=e}function Xke(e){Bu=e}class gs{constructor(t,n,s,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Ue(t),this.strides=Rt(t),this.dataId=s,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return Bu.buffer(this.shape,this.dtype,t)}bufferSync(){return Bu.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return qr(this.shape,t,this.dtype==="complex64")}arraySync(){return qr(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=Wr().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(s=>wc(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),Wr().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=Wr().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>wc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Wr().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(Wr().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Bu.print(this,t)}clone(){return this.throwIfDisposed(),Bu.clone(this)}toString(t=!1){const n=this.dataSync();return Kke(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Bu.cast(this,t)}variable(t=!0,n,s){return this.throwIfDisposed(),Wr().makeVariable(this,t,n,s)}}Object.defineProperty(gs,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function Ve(){return R$("Tensor",()=>gs)}Ve();class ng extends gs{constructor(t,n,s,o){super(t.shape,t.dtype,t.dataId,o);this.trainable=n,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Dn(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Wr().disposeTensor(this),this.dataId=t.dataId,Wr().incRef(this,null)}dispose(){Wr().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(ng,Symbol.hasInstance,{value:e=>e instanceof gs&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var dT;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(dT||(dT={}));var I1;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(I1||(I1={}));var E1;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(E1||(E1={}));var T1;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(T1||(T1={}));var N1;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(N1||(N1={}));const Yke={float32:T1,int32:I1,bool:E1,complex64:N1};function tr(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Yke[e][t]}function SC(e){return tr(e,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fs(e,t){if(e.dtype===t.dtype)return[e,t];const n=tr(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function kO(e){const t=[];return SO(e,t,new Set),t}function SO(e,t,n){if(e==null)return;if(e instanceof gs){t.push(e);return}if(!Zke(e))return;const s=e;for(const o in s){const r=s[o];n.has(r)||(n.add(r),SO(r,t,n))}}function Zke(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wb(e){return e.kernelName!=null}class fT{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class $c{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new fT}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const s=t[n];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,s=1){return t in this.registryFactory?(qo(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:s},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:s}=this.initializeBackend(t);if(!(s?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Vke(this.backendInstance),!0}setupRegisteredKernels(){sT(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){sT(t).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const s=n.factory();if(s&&!(s instanceof D$)&&typeof s.then=="function"){const o=++this.pendingBackendInitId,r=s.then(a=>o<this.pendingBackendInitId?!1:(this.registry[t]=a,this.pendingBackendInit=null,!0)).catch(a=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,qo(`Initialization of backend ${t} failed`),qo(a.stack||a.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(s){return qo(`Initialization of backend ${t} failed`),qo(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const s=t[n],{success:o,asyncInit:r}=this.initializeBackend(s);if(r||o)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const s=this.state.tensorInfo.get(n),o=s.backend,r=this.readSync(n),a=o.refCount(n);o.disposeData(n,!0),s.backend=t,t.move(n,r,s.shape,s.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let s=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=t}let o;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(t,n,s){t();try{const o=s();return n(),o}catch(o){throw n(),o}}nextTensorId(){return $c.nextTensorId++}nextVariableId(){return $c.nextVariableId++}clone(t){const n=Ce.runKernel(uh,{x:t}),s={x:t},o=a=>({x:()=>{const i="float32",l={x:a},u={dtype:i};return Ce.runKernel(Yf,l,u)}}),r=[];return this.addTapeNode(this.state.activeScope.name,s,[n],o,r,{}),n}runKernel(t,n,s){if(this.backendName==null&&this.backend,!(tT(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,s){const o=this.backend.numDataIds();let r=0;s.forEach(l=>{r+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=o-n-r-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${t}'`)}runKernelFunc(t){let n,s=[];const o=this.isTapeOn(),r=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let i;this.backendName==null&&this.backend;let l;const u=Wb(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Wb(t)){const{kernelName:p,inputs:m,attrs:g}=t;this.backendName==null&&this.backend;const v=tT(p,this.backendName);j(v!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),i=()=>{const b=this.backend.numDataIds();l=v.kernelFunc({inputs:m,attrs:g,backend:this.backend});const $=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,$);const y=$.map(w=>{if(w.rank!=null)return w;const{dataId:C,shape:k,dtype:S}=w;return this.makeTensorFromDataId(C,k,S)});if(o){const w=this.getTensorsForGradient(p,m,y);s=this.saveTensorsForBackwardMode(w)}return y}}else{const{forwardFunc:p}=t,m=g=>{!o||(s=g.map(v=>this.keep(this.clone(v))))};i=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,v),v}}const{inputs:c,attrs:d}=t,f=Wb(t)?null:t.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=i():(h=this.profiler.profileKernel(u,c,()=>i()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),o&&this.addTapeNode(u,c,n,f,s,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(t,n,s){const o=nT(t);if(o!=null){const r=o.inputsToSave||[],a=o.outputsToSave||[];let i;o.saveAllInputs?(j(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),i=Object.keys(n).map(u=>n[u])):i=r.map(u=>n[u]);const l=s.filter((u,c)=>a[c]);return i.concat(l)}return[]}makeTensor(t,n,s,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",o=o||this.backend;let r=t;s==="string"&&zf(t[0])&&(r=t.map(l=>Ci(l)));const a=o.write(r,n,s),i=new gs(n,s,a,this.nextTensorId());if(this.trackTensor(i,o),s==="string"){const l=this.state.tensorInfo.get(a),u=wke(r);this.state.numBytes+=u-l.bytes,l.bytes=u}return i}makeTensorFromDataId(t,n,s,o){s=s||"float32";const r=new gs(n,s,t,this.nextTensorId());return this.trackTensor(r,o),r}makeVariable(t,n=!0,s,o){s=s||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.cast(o));const r=new ng(t,n,s,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*g1(t.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:s})),t instanceof ng||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const s=t.size*g1(t.dtype);this.state.numBytes-=s}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,s,o,r,a){const i={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:s,saved:r},l=nT(t);l!=null&&(o=l.gradFunc),o!=null&&(i.gradient=u=>(u=u.map((c,d)=>{if(c==null){const f=s[d],h=ro(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],r,a))),this.state.activeTape.push(i)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=kO(t),s=new Set(n.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const a=this.state.activeScope.track[r];!a.kept&&!s.has(a.id)&&a.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(r=>{!r.kept&&r.scopeId===o.id&&this.track(r)})}gradients(t,n,s,o=!1){if(j(n.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));j(r instanceof gs,()=>"The result y returned by f() must be a tensor.");const a=Uke(this.state.activeTape,n,r);if(!o&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const i={};i[r.id]=s==null?Jke(r.shape):s,Gke(i,a,u=>this.tidy(u),Qke);const l=n.map(u=>i[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:r,grads:l}})}customGrad(t){return j(b1(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{j(n.every(i=>i instanceof gs),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const o={};n.forEach((i,l)=>{o[l]=i});const r=(i,l)=>(s=t(...n,l),j(s.value instanceof gs,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),j(b1(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),a=(i,l)=>{const u=s.gradFunc(i,l),c=Array.isArray(u)?u:[u];j(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),j(c.every(f=>f instanceof gs),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:r,backwardsFunc:a,inputs:o})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=go(),s=await this.backend.time(t);return s.wallMs=go()-n,s}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new fT;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}$c.nextTensorId=0;$c.nextVariableId=0;function Jke(e){const t=Z3(Ue(e),"float32");return Ce.makeTensor(t,e,"float32")}function xO(){const e=nO();if(e._tfengine==null){const t=new Cke(e);e._tfengine=new $c(t)}return Ike(e._tfengine.ENV),qke(()=>e._tfengine),e._tfengine}const Ce=xO();function Qke(e,t){const n={a:e,b:t};return Ce.runKernel(Wc,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSe(){return typeof navigator!="undefined"&&navigator!=null}function IO(e){if(e||eSe()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window!="undefined"?window.opera:"");if(!t){const n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function EO(){return typeof window!="undefined"&&window.document!=null||typeof WorkerGlobalScope!="undefined"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qr=Ge();Qr.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Qr.registerFlag("IS_BROWSER",()=>EO());Qr.registerFlag("IS_NODE",()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined");Qr.registerFlag("IS_CHROME",()=>typeof navigator!="undefined"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Qr.registerFlag("PROD",()=>!1);Qr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Qr.getBool("DEBUG"));Qr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Qr.registerFlag("IS_TEST",()=>!1);Qr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);Qr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zv(e,t){let n=e;if(Ca(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];const s=[];for(;Array.isArray(n)||Ca(n)&&t!=="string";)s.push(n.length),n=n[0];return Array.isArray(e)&&Ge().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&TO(e,s,[]),s}function TO(e,t,n){if(n=n||[],!Array.isArray(e)&&!Ca(e)){j(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}j(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),j(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const s=t.slice(1);for(let o=0;o<e.length;++o)TO(e[o],s,n.concat(o))}function hT(e,t,n,s){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${s}' must be ${e} tensor, but got ${t} tensor`)}}function Z(e,t,n,s="numeric"){if(e instanceof gs)return hT(s,e.dtype,t,n),e;let o=Vf(e);if(o!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(o=s),hT(s,o,t,n),e==null||!Ca(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const r=Zv(e,o);!Ca(e)&&!Array.isArray(e)&&(e=[e]);const i=o!=="string"?iu(e,o):vc(e,[],!0);return Ce.makeTensor(i,r,o)}function NO(e,t,n,s="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((r,a)=>Z(r,`${t}[${a}]`,n,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tSe="__op";function $e(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const s=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+tSe;const o=(...r)=>{Ce.startScope(n);try{const a=s(...r);return eO(a)&&console.error("Cannot return a Promise inside of tidy."),Ce.endScope(a),a}catch(a){throw Ce.endScope(null),a}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nSe(e,t){const n=Z(e,"real","complex"),s=Z(t,"imag","complex");Nr(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const o={real:n,imag:s};return Ce.runKernel(B$,o)}const bf=$e({complex_:nSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jv(e,t,n,s){if(s==null&&(s=Vf(e)),s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ca(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Q3(t);const o=Ue(t),r=Ue(n);j(o===r,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${r}`);for(let a=0;a<n.length;++a){const i=n[a],l=a===n.length-1?i!==Ue(t.slice(a)):!0;j(n[a]===t[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Ca(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=s!=="string"?iu(e,s):vc(e,[],!0),Ce.makeTensor(e,t,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSe(e,t,n){const s=Zv(e,n);return Jv(e,t,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pT=4;async function mT(e,t){const n=[],s=[],o=Array.isArray(e)?e.map(a=>a.name):Object.keys(e);for(let a=0;a<o.length;++a){const i=o[a],l=Array.isArray(e)?e[a].tensor:e[i];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${i}': ${l.dtype}`);const u={name:i,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((g,v)=>g+v.length,0)+pT*f.length,p=new Uint8Array(h);let m=0;for(let g=0;g<f.length;g++){const v=f[g],b=new Uint8Array(new Uint32Array([v.length]).buffer);p.set(b,m),m+=pT,p.set(v,m),m+=v.length}d(p)});s.push(c)}else s.push(l.data());t!=null&&(u.group=t),n.push(u)}const r=await Promise.all(s);return{data:oSe(r),specs:n}}function oSe(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(r=>{if(t+=r.byteLength,n.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const s=new Uint8Array(t);let o=0;return n.forEach(r=>{s.set(new Uint8Array(r.buffer),o),o+=r.byteLength}),s.buffer}const xC=typeof Buffer!="undefined"&&(typeof Blob=="undefined"||typeof atob=="undefined"||typeof btoa=="undefined");function gT(e){return xC?Buffer.byteLength(e):new Blob([e]).size}function rSe(e){if(xC)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let s=0,o=t.length;s<o;s++)n+=String.fromCharCode(t[s]);return btoa(n)}function aSe(e){if(xC){const s=Buffer.from(e,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;++s)n.set([t.charCodeAt(s)],s);return n.buffer}function AO(e){if(e.length===1)return e[0];let t=0;e.forEach(o=>{t+=o.byteLength});const n=new Uint8Array(t);let s=0;return e.forEach(o=>{n.set(new Uint8Array(o),s),s+=o.byteLength}),n.buffer}function DO(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}async function iSe(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),e.weightsManifest!=null){const[s,o]=await t(e.weightsManifest);n.weightSpecs=s,n.weightData=o}return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),n}function Qv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:gT(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:gT(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class As{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return As.instance==null&&(As.instance=new As),As.instance}static registerSaveRouter(t){As.getInstance().saveRouters.push(t)}static registerLoadRouter(t){As.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return As.getHandlers(t,"save")}static getLoadHandlers(t,n){return As.getHandlers(t,"load",n)}static getHandlers(t,n,s){const o=[];return(n==="load"?As.getInstance().loadRouters:As.getInstance().saveRouters).forEach(a=>{const i=a(t,s);i!==null&&o.push(i)}),o}}const lSe=e=>As.getSaveHandlers(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A1="tensorflowjs",D1=1,El="models_store",vi="model_info_store";function RO(){if(!Ge().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window=="undefined"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function R1(e){const t=e.result;t.createObjectStore(El,{keyPath:"modelPath"}),t.createObjectStore(vi,{keyPath:"modelPath"})}class Hl{constructor(t){if(this.indexedDB=RO(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((s,o)=>{const r=this.indexedDB.open(A1,D1);r.onupgradeneeded=()=>R1(r),r.onsuccess=()=>{const a=r.result;if(n==null){const i=a.transaction(El,"readonly"),u=i.objectStore(El).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=c=>(a.close(),o(u.error)),i.oncomplete=()=>a.close()}else{const i=Qv(n),l=a.transaction(vi,"readwrite");let u=l.objectStore(vi);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:i});let d;c.onsuccess=()=>{d=a.transaction(El,"readwrite");const h=d.objectStore(El).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:i});h.onsuccess=()=>s({modelArtifactsInfo:i}),h.onerror=p=>{u=l.objectStore(vi);const m=u.delete(this.modelPath);m.onsuccess=()=>(a.close(),o(h.error)),m.onerror=g=>(a.close(),o(h.error))}},c.onerror=f=>(a.close(),o(c.error)),l.oncomplete=()=>{d==null?a.close():d.oncomplete=()=>a.close()}}},r.onerror=a=>o(r.error)})}}Hl.URL_SCHEME="indexeddb://";const _O=e=>Ge().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Hl.URL_SCHEME)?uSe(e.slice(Hl.URL_SCHEME.length)):null;As.registerSaveRouter(_O);As.registerLoadRouter(_O);function uSe(e){return new Hl(e)}function cSe(e){return e.startsWith(Hl.URL_SCHEME)?e.slice(Hl.URL_SCHEME.length):e}class dSe{constructor(){this.indexedDB=RO()}async listModels(){return new Promise((t,n)=>{const s=this.indexedDB.open(A1,D1);s.onupgradeneeded=()=>R1(s),s.onsuccess=()=>{const o=s.result,r=o.transaction(vi,"readonly"),i=r.objectStore(vi).getAll();i.onsuccess=()=>{const l={};for(const u of i.result)l[u.modelPath]=u.modelArtifactsInfo;t(l)},i.onerror=l=>(o.close(),n(i.error)),r.oncomplete=()=>o.close()},s.onerror=o=>n(s.error)})}async removeModel(t){return t=cSe(t),new Promise((n,s)=>{const o=this.indexedDB.open(A1,D1);o.onupgradeneeded=()=>R1(o),o.onsuccess=()=>{const r=o.result,a=r.transaction(vi,"readwrite"),i=a.objectStore(vi),l=i.get(t);let u;l.onsuccess=()=>{if(l.result==null)return r.close(),s(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const c=i.delete(t),d=()=>{u=r.transaction(El,"readwrite");const h=u.objectStore(El).delete(t);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>s(l.error)};c.onsuccess=d,c.onerror=f=>(d(),r.close(),s(l.error))}},l.onerror=c=>(r.close(),s(l.error)),a.oncomplete=()=>{u==null?r.close():u.oncomplete=()=>r.close()}},o.onerror=r=>s(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fa="/",zu="tensorflowjs_models",OO="info",fSe="model_topology",hSe="weight_specs",pSe="weight_data",mSe="model_metadata";function MO(e){return{info:[zu,e,OO].join(Fa),topology:[zu,e,fSe].join(Fa),weightSpecs:[zu,e,hSe].join(Fa),weightData:[zu,e,pSe].join(Fa),modelMetadata:[zu,e,mSe].join(Fa)}}function FO(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function gSe(e){const t=e.split(Fa);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Fa)}function vSe(e){return e.startsWith(Ul.URL_SCHEME)?e.slice(Ul.URL_SCHEME.length):e}class Ul{constructor(t){if(!Ge().getBool("IS_BROWSER")||typeof window=="undefined"||typeof window.localStorage=="undefined")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=MO(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),s=JSON.stringify(t.weightSpecs),o=Qv(t);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,rSe(t.weightData));const r={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(r)),{modelArtifactsInfo:o}}catch{throw FO(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=s;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const i=JSON.parse(r);n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,i.signature!=null&&(n.signature=i.signature),i.userDefinedMetadata!=null&&(n.userDefinedMetadata=i.userDefinedMetadata),i.modelInitializer!=null&&(n.modelInitializer=i.modelInitializer),i.trainingConfig!=null&&(n.trainingConfig=i.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=aSe(a),n}}Ul.URL_SCHEME="localstorage://";const PO=e=>Ge().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ul.URL_SCHEME)?bSe(e.slice(Ul.URL_SCHEME.length)):null;As.registerSaveRouter(PO);As.registerLoadRouter(PO);function bSe(e){return new Ul(e)}class ySe{constructor(){j(Ge().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),j(typeof window=="undefined"||typeof window.localStorage!="undefined",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=zu+Fa,s=Fa+OO;for(let o=0;o<this.LS.length;++o){const r=this.LS.key(o);if(r.startsWith(n)&&r.endsWith(s)){const a=gSe(r);t[a]=JSON.parse(this.LS.getItem(r))}}return t}async removeModel(t){t=vSe(t);const n=MO(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const s=JSON.parse(this.LS.getItem(n.info));return FO(n),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vT="://";class mi{constructor(){this.managers={}}static getInstance(){return mi.instance==null&&(mi.instance=new mi),mi.instance}static registerManager(t,n){j(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(vT)&&(t=t.slice(0,t.indexOf(vT))),j(t.length>0,()=>"scheme must not be an empty string.");const s=mi.getInstance();j(s.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),s.managers[t]=n}static getManager(t){const n=this.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wSe{fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}}if(Ge().get("IS_BROWSER")){Ge().setPlatform("browser",new wSe);try{mi.registerManager(Ul.URL_SCHEME,new ySe)}catch{}try{mi.registerManager(Hl.URL_SCHEME,new dSe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Se={importFetch:()=>require("node-fetch")};let Hb;class CSe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return Ge().global.fetch!=null?Ge().global.fetch(t,n):(Hb==null&&(Hb=$Se.importFetch()),Hb(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}}Ge().get("IS_NODE")&&Ge().setPlatform("node",new CSe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hn(e,t="float32",n){return t=t||"float32",Q3(e),new to(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSe(e,t){const n=Z(e,"x","cast");if(!yke(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:n},o={dtype:t};return Ce.runKernel(Yf,s,o)}const mt=$e({cast_:kSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(e){const n={x:Z(e,"x","clone","string_or_numeric")};return Ce.runKernel(uh,n)}const Ml=$e({clone_:SSe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xO();const ISe={buffer:hn,cast:mt,clone:Ml,print:xSe};Xke(ISe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESe="model",TSe=".json",NSe=".weights.bin";function bT(e){return new Promise(t=>setTimeout(t)).then(e)}class Gl{constructor(t){if(!Ge().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(Gl.URL_SCHEME)&&(t=t.slice(Gl.URL_SCHEME.length)),(t==null||t.length===0)&&(t=ESe),this.modelJsonFileName=t+TSe,this.weightDataFileName=t+NSe}async save(t){if(typeof document=="undefined")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o=DO(t,s),r=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=r,await bT(()=>a.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const i=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;i.download=this.weightDataFileName,i.href=n,await bT(()=>i.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Qv(t)}}}}Gl.URL_SCHEME="downloads://";const ASe=e=>Ge().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gl.URL_SCHEME)?DSe(e.slice(Gl.URL_SCHEME.length)):null;As.registerSaveRouter(ASe);function DSe(e="model"){return new Gl(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yT(e,t,n,s){a(e),n=n==null?0:n,s=s==null?1:s,i(n,s);let o=0;const r=l=>(l.then(u=>{const c=n+ ++o/e.length*(s-n);return t(c),u}),l);function a(l){j(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function i(l,u){j(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),j(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),j(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(e.map(r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function RSe(e,t){t==null&&(t={});const n=t.fetchFunc==null?Ge().platform.fetch:t.fetchFunc,s=e.map(d=>n(d,t.requestInit,{isBinary:!0})),o=0,r=.5,i=(t.onProgress==null?await Promise.all(s):await yT(s,t.onProgress,o,r)).map(d=>d.arrayBuffer()),l=.5,u=1;return t.onProgress==null?await Promise.all(i):await yT(i,t.onProgress,l,u)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Se="application/octet-stream",OSe="application/json";class IC{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(j(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Ge().platform.fetch,j(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&j(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o=DO(t,s);n.body.append("model.json",new Blob([JSON.stringify(o)],{type:OSe}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:_Se}),"model.weights.bin");const r=await this.fetch(this.path,n);if(r.ok)return{modelArtifactsInfo:Qv(t),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const s=n.modelTopology,o=n.weightsManifest;if(s==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return iSe(n,r=>this.loadWeights(r))}async loadWeights(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[s,o]=MSe(n),r=this.weightPathPrefix||s,a=[];for(const c of t)a.push(...c.weights);const i=[],l=[];for(const c of t)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):i.push(r+d+o);this.weightUrlConverter&&i.push(...await Promise.all(l));const u=await RSe(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,AO(u)]}}IC.URL_SCHEME_REGEX=/^https?:\/\//;function MSe(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),s=e.substring(0,t),o=n>t?e.substring(n):"";return[s+"/",o]}function wT(e){return e.match(IC.URL_SCHEME_REGEX)!=null}const LO=(e,t)=>{if(typeof fetch=="undefined"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(s=>wT(s)):n=wT(e),n)return FSe(e,t)}return null};As.registerSaveRouter(LO);As.registerLoadRouter(LO);function FSe(e,t){return new IC(e,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSe(e,t,n=!1,s=!1){let o=Z(e,"a","matMul"),r=Z(t,"b","matMul");[o,r]=fs(o,r);const a={a:o,b:r},i={transposeA:n,transposeB:s};return Ce.runKernel(tv,a,i)}const Nn=$e({matMul_:PSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(e,t,n=1,s=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const r={indices:Z(e,"indices","oneHot","int32")},a={depth:t,onValue:n,offValue:s};return Ce.runKernel(Rv,r,a)}const BO=$e({oneHot_:LSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BSe(e,t){const n=Z(e,"x","transpose");if(t==null&&(t=n.shape.map((r,a)=>a).reverse()),j(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(r=>{j(r>=0&&r<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1)return n.clone();const s={x:n},o={perm:t};return Ce.runKernel(Kv,s,o)}const Tn=$e({transpose_:BSe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cc(e,t){const n=e.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,a=e[r]||1;(t[t.length-1-o]||1)>1&&a===1&&s.unshift(r)}return s}function Ns(e,t){const n=[];for(let s=0;s<t.length;s++){const o=e[e.length-s-1],r=t.length-s-1,a=t[r];(o==null||o===1&&a>1)&&n.unshift(r)}return n}function tn(e,t){const n=[],s=Math.max(e.length,t.length);for(let o=0;o<s;o++){let r=e[e.length-o-1];r==null&&(r=1);let a=t[t.length-o-1];if(a==null&&(a=1),r===1)n.unshift(a);else if(a===1)n.unshift(r);else if(r!==a){const i=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(i)}else n.unshift(r)}return n}function EC(e,t){const n=e.shape.length,s=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[s-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[s-1]} vs. ${n}`);if(Ue(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,r=o[o.length-1];let a=1;for(let d=0;d<o.length-1;++d)a*=o[d];const i=e.shape,l=o.slice();l.pop();let u=1;for(let d=r;d<n;++d)u*=i[d],l.push(i[d]);const c=[...Rt(e.shape).map(d=>d/u),1].slice(0,r);return[l,a,u,c]}function zO(e,t,n){const s=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${s}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(r+` update.rank < ${o}. `);if(e.length<s+(n.rank-o))throw new Error(r+` Output shape length < ${s+(n.rank-o)}`);if(n.rank!==o+e.length-s)throw new Error(r+` update.rank != ${o+e.length-s}`);for(let a=0;a<o;++a)if(n.shape[a]!==t.shape[a])throw new Error(r+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${t.shape[a]}).`);for(let a=0;a<n.rank-o;++a)if(n.shape[a+o]!==e[a+s])throw new Error(r+` updates.shape[${a+o}] (${n.shape[a+o]}) != shape[${a+o}] (${e[a+o]})`)}function zSe(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}zO(n,t,e)}function Lh(e,t,n){const s=t.shape.length,o=s>1?t.shape[s-1]:1,r=n.length;let a=1;for(let d=o;d<r;++d)a*=n[d];const i=o<1?1:o,l=Ue(t.shape)/i,u=[...Rt(n.slice(0,o)),1],c=Ue(n);return{sliceRank:o,numUpdates:l,sliceSize:a,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _1=-2,VSe=-1;function TC(e,t,n){const s=e.shape.length;j(s===t.length,()=>`Error in slice${s}D: Length of begin ${t} must match the rank of the array (${s}).`),j(s===n.length,()=>`Error in slice${s}D: Length of size ${n} must match the rank of the array (${s}).`);for(let o=0;o<s;++o)j(t[o]+n[o]<=e.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function WSe(e){const t=[];let n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function NC(e,t,n){const s=[];for(let o=0;o<e.length;o++)s[o]=Math.ceil((t[o]-e[o])/n[o]);return s}function VO(e,t,n,s){const o=[...e];for(let r=o.length;r<s.length;r++)o.push(1);for(let r=0;r<n;r++)r===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function WO(e,t,n){return n<=e?n:n-(t-1)}function HO(e,t){const n=[];for(let s=0;s<e;s++)n.push(t+s);return n}function HSe(e,t,n,s,o,r,a,i,l){const u=e.length;let c=new Array(u),d=new Array(u),f=new Array(u);if(t.length&&n>0){const h=t[0],p=n+1;c=UO(a,h,p,s,e),d=GO(i,h,p,o,e),f=VO(r,h,p,e)}else for(let h=0;h<u;h++)c[h]=jO(a,s,r,e,h,l),d[h]=qO(i,o,r,e,h,l),f[h]=KO(r,h,l);return{begin:c,end:d,strides:f}}function UO(e,t,n,s,o){const r=[...o],a=HO(n,t);for(let i=0;i<r.length;i++)if(a.indexOf(i)>-1)r[i]=0;else{const l=WO(t,n,i);let u=s[l];e&1<<l&&(u=0),r[i]=u}return r}function GO(e,t,n,s,o){const r=[...o],a=HO(n,t);for(let i=0;i<r.length;i++)if(a.indexOf(i)>-1)r[i]=Number.MAX_SAFE_INTEGER;else{const l=WO(t,n,i);let u=s[l];e&1<<l&&(u=Number.MAX_SAFE_INTEGER),r[i]=u}for(let i=0;i<r.length;i++){const l=o[i];r[i]<0&&(r[i]+=l),r[i]=Wl(0,r[i],o[i])}return r}function KO(e,t,n){let s=e[t];return(n&1<<t||s==null)&&(s=1),s}function jO(e,t,n,s,o,r){let a=t[o];const i=n[o]||1;(e&1<<o||r&1<<o||a==null)&&(i>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=s[o];return a<0&&(a+=l),a=Wl(0,a,l-1),a}function qO(e,t,n,s,o,r){let a=t[o];const i=n[o]||1;(e&1<<o||r&1<<o||a==null)&&(i>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=s[o];return a<0&&(a+=l),i>0?a=Wl(0,a,l):a=Wl(-1,a,l-1),a}function AC(e,t,n){let s=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){s=o;break}for(let o=s+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function DC(e,t){let n=e.length>0?e[e.length-1]:1;for(let s=0;s<e.length-1;s++)n+=e[s]*t[s];return n}function e0(e,t,n){let s;const o=e.shape.length;typeof t=="number"?s=[t,...new Array(o-1).fill(0)]:t.length<o?s=t.concat(new Array(o-t.length).fill(0)):s=t.slice(),s.forEach(a=>{j(a!==-1,()=>"slice() does not support negative begin indexing.")});let r;return n==null?r=new Array(o).fill(-1):typeof n=="number"?r=[n,...new Array(o-1).fill(-1)]:n.length<o?r=n.concat(new Array(o-n.length).fill(-1)):r=n,r=r.map((a,i)=>a>=0?a:(j(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${i}.`),e.shape[i]-s[i])),[s,r]}function RC(e,t,n,s,o,r,a,i,l){let u;if(s==null?(u=new Array(t.length),u.fill(1)):u=s,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:r,ellipsisMask:a,newAxisMask:i,shrinkAxisMask:l};for(let $=0;$<d.dims;$++)c&&(1<<$&i)!==0&&d.numAddAxisAfterEllipsis++,1<<$&a&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};USe(d,f);let h=!0,p=!0,m=!0;const g=[],v=[];for(let $=0;$<e.length;++$){if(f.strides[$]===0)throw Error(`strides[${$}] must be non-zero`);const y=!!(f.shrinkAxisMask&1<<$),w=e[$];if(w===-1){g.push(y?1:-1);continue}const C=[f.beginMask&1<<$,f.endMask&1<<$],k=[f.strides[$]>0?0:-1,f.strides[$]>0?w:w-1];if(y&&f.strides[$]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[$]===1;const S=!!(f.beginMask&1<<$&&f.endMask&1<<$);if(f.beginValid&&f.endValid){if(y){const A=f.begin[$]<0?w+f.begin[$]:f.begin[$];if(f.begin[$]=A,f.end[$]=f.begin[$]+1,A<0||A>=w)throw Error(`slice index ${f.begin[$]} of dimension ${$} out of bounds.`)}else f.begin[$]=$T(f.begin[$],0,f.strides[$],w,C,k),f.end[$]=$T(f.end[$],1,f.strides[$],w,C,k);const N=f.strides[$]===1&&f.begin[$]===0&&f.end[$]===w;h=h&&N,p=p&&($===0&&f.strides[$]===1||N)}else h=h&&f.strides[$]===1&&S,p=p&&($===0&&f.strides[$]===1||S);let E,x=!1;if(f.beginValid&&f.endValid?(E=f.end[$]-f.begin[$],x=!0):y?(E=1,x=!0):S&&w>=0&&(f.strides[$]<0?E=-w:E=w,x=!0),x){let N;E===0||E<0!=f.strides[$]<0?N=0:N=Math.trunc(E/f.strides[$])+(E%f.strides[$]!==0?1:0),g.push(N)}else g.push(-1)}for(let $=0;$<f.finalShapeGatherIndices.length;++$){const y=f.finalShapeGatherIndices[$];y>=0?v.push(g[y]):y===_1&&v.push(1)}return{finalShapeSparse:v.filter(($,y)=>f.finalShapeGatherIndices[y]!==_1),finalShape:v,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function USe(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let s=0;s<e.dims;s++)if(1<<s&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-s)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=s}else if(1<<s&e.newAxisMask)t.finalShapeGatherIndices.push(_1),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[s]),e.end!=null&&(t.end[n]=e.end[s]),t.strides[n]=e.strides[s],e.beginMask&1<<s&&(t.beginMask|=1<<n),e.endMask&1<<s&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<s?(t.finalShapeGatherIndices.push(VSe),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(s)),t.inputShapeGatherIndicesSparse[n]=s,n++}}function $T(e,t,n,s,o,r){if(o[t])return n>0?r[t]:r[t+1&1];{const a=e<0?s+e:e;return a<r[0]?r[0]:a>r[1]?r[1]:a}}var GSe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",assertParamsValid:TC,maskToAxes:WSe,computeOutShape:NC,stridesWithElidedDims:VO,getNormalizedAxes:HSe,startIndicesWithElidedDims:UO,stopIndicesWithElidedDims:GO,stridesForAxis:KO,startForAxis:jO,stopForAxis:qO,isSliceContinous:AC,computeFlatOffset:DC,parseSliceParams:e0,sliceInfo:RC});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hc{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class hr{constructor(){this.classNameMap={}}static getMap(){return hr.instance==null&&(hr.instance=new hr),hr.instance}static register(t){hr.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function et(e){j(e.className!=null,()=>"Class being registered does not have the static className property defined."),j(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),j(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),hr.register(e)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function di(){return Ce}function O1(){return Ce.memory()}function Me(e,t){return Ce.tidy(e,t)}function dn(e){kO(e).forEach(n=>n.dispose())}function ka(e){return Ce.keep(e)}function XO(e,t,n=1){return Ce.registerBackend(e,t,n)}function KSe(){return Ce.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jSe(e,t){let n=Z(e,"a","add"),s=Z(t,"b","add");[n,s]=fs(n,s);const o={a:n,b:s};return Ce.runKernel(Wc,o)}const st=$e({add_:jSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qSe(e,t){let n=Z(e,"a","floorDiv"),s=Z(t,"b","floorDiv");[n,s]=fs(n,s);const o={a:n,b:s};return Ce.runKernel(ih,o)}const YO=$e({floorDiv_:qSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XSe(e,t){let n=Z(e,"a","div"),s=Z(t,"b","div");if([n,s]=fs(n,s),n.dtype==="int32"&&s.dtype==="int32")return YO(n,s);const o={a:n,b:s},r={};return Ce.runKernel(th,o,r)}const At=$e({div_:XSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe(e,t){let n=Z(e,"a","mul"),s=Z(t,"b","mul");[n,s]=fs(n,s);const o={a:n,b:s};return Ce.runKernel(bh,o)}const ge=$e({mul_:YSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(e){const t=Z(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return Ce.runKernel(sv,n)}else{const n={x:t};return Ce.runKernel(Yg,n)}}const Ds=$e({abs_:ZSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(e){const n={x:Z(e,"x","acos")};return Ce.runKernel(Hf,n)}const QSe=$e({acos_:JSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exe(e){const n={x:Z(e,"x","acosh")};return Ce.runKernel(Uf,n)}const txe=$e({acosh_:exe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(e,t=null,n=!1){const o={x:Z(e,"x","all","bool")},r={axis:t,keepDims:n};return Ce.runKernel(O$,o,r)}const ZO=$e({all_:nxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sxe(e,t=null,n=!1){const o={x:Z(e,"x","any","bool")},r={axis:t,keepDims:n};return Ce.runKernel(M$,o,r)}const M1=$e({any_:sxe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(e,t=0){const s={x:Z(e,"x","argMax")},o={axis:t};return Ce.runKernel(Zg,s,o)}const yf=$e({argMax_:oxe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rxe(e,t=0){const s={x:Z(e,"x","argMin")},o={axis:t};return Ce.runKernel(Jg,s,o)}const axe=$e({argMin_:rxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ixe(e){const n={x:Z(e,"x","asin")};return Ce.runKernel(Gf,n)}const lxe=$e({asin_:ixe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(e){const n={x:Z(e,"x","asinh")};return Ce.runKernel(Kf,n)}const cxe=$e({asinh_:uxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(e){const n={x:Z(e,"x","atan")};return Ce.runKernel(jf,n)}const fxe=$e({atan_:dxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hxe(e,t){let n=Z(e,"a","atan2"),s=Z(t,"b","atan2");[n,s]=fs(n,s);const o={a:n,b:s};return Ce.runKernel(Xf,o)}const pxe=$e({atan2_:hxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(e){const n={x:Z(e,"x","atanh")};return Ce.runKernel(qf,n)}const gxe=$e({atanh_:mxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bh(e,t,n,s,o="NHWC",r){const a=e[3],i=[...t,a],l=Ja(o);return Ks(e,i,n,r,s,null,null,l)}function Ar(e,t,n,s,o,r,a="channelsLast"){const[i,l]=sg(t);let u;if(a==="channelsLast")u=[i,l,e[3],e[3]];else if(a==="channelsFirst")u=[i,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${a}`);return Ks(e,u,n,s,o,r,!1,a)}function Za(e,t,n,s,o,r,a="NDHWC"){const[i,l,u]=F1(t);let c,d;if(a==="NDHWC")d="channelsLast",c=[i,l,u,e[4],e[4]];else if(a==="NCDHW")d="channelsFirst",c=[i,l,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${a}`);return Hi(e,c,n,s,o,!1,d,r)}function Ks(e,t,n,s,o,r,a=!1,i="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(i==="channelsLast")[l,u,c,d]=e;else if(i==="channelsFirst")[l,d,u,c]=e;else throw new Error(`Unknown dataFormat ${i}`);const[f,h,,p]=t,[m,g]=sg(n),[v,b]=sg(s),$=Qu(f,v),y=Qu(h,b),{padInfo:w,outHeight:C,outWidth:k}=yxe(o,u,c,m,g,$,y,r,i),S=a?p*d:p;let E;return i==="channelsFirst"?E=[l,S,C,k]:i==="channelsLast"&&(E=[l,C,k,S]),{batchSize:l,dataFormat:i,inHeight:u,inWidth:c,inChannels:d,outHeight:C,outWidth:k,outChannels:S,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:h,effectiveFilterHeight:$,effectiveFilterWidth:y,dilationHeight:v,dilationWidth:b,inShape:e,outShape:E,filterShape:t}}function Hi(e,t,n,s,o,r=!1,a="channelsLast",i){let[l,u,c,d,f]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d,f]=e;else if(a==="channelsFirst")[l,f,u,c,d]=e;else throw new Error(`Unknown dataFormat ${a}`);const[h,p,m,,g]=t,[v,b,$]=F1(n),[y,w,C]=F1(s),k=Qu(h,y),S=Qu(p,w),E=Qu(m,C),{padInfo:x,outDepth:N,outHeight:A,outWidth:D}=wxe(o,u,c,d,v,b,$,k,S,E,i),M=r?g*f:g;let F;return a==="channelsFirst"?F=[l,M,N,A,D]:a==="channelsLast"&&(F=[l,N,A,D,M]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:d,inChannels:f,outDepth:N,outHeight:A,outWidth:D,outChannels:M,padInfo:x,strideDepth:v,strideHeight:b,strideWidth:$,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:k,effectiveFilterHeight:S,effectiveFilterWidth:E,dilationDepth:y,dilationHeight:w,dilationWidth:C,inShape:e,outShape:F,filterShape:t}}function vxe(e,t,n,s,o){s==null&&(s=_C(e,t,n));const r=e[0],a=e[1],i=Fl((r-t+2*s)/n+1,o),l=Fl((a-t+2*s)/n+1,o);return[i,l]}function bxe(e,t,n,s,o,r){o==null&&(o=_C(e,t,s));const a=e[0],i=e[1],l=e[2],u=Fl((a-t+2*o)/s+1,r),c=Fl((i-t+2*o)/s+1,r),d=Fl((l-t+2*o)/s+1,r);return[u,c,d,n]}function _C(e,t,n,s=1){const o=Qu(t,s);return Math.floor((e[0]*(n-1)-n+o)/2)}function sg(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function F1(e){return typeof e=="number"?[e,e,e]:e}function Qu(e,t){return t<=1?e:e+(e-1)*(t-1)}function yxe(e,t,n,s,o,r,a,i,l){let u,c,d;if(typeof e=="number"){u={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const h=vxe([t,n],r,s,e,i);c=h[0],d=h[1]}else if(e==="same"){c=Math.ceil(t/s),d=Math.ceil(n/o);const f=Math.max(0,(c-1)*s+r-t),h=Math.max(0,(d-1)*o+a-n),p=Math.floor(f/2),m=f-p,g=Math.floor(h/2),v=h-g;u={top:p,bottom:m,left:g,right:v,type:"SAME"}}else if(e==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-r+1)/s),d=Math.ceil((n-a+1)/o);else if(typeof e=="object"){const f=l==="channelsLast"?e[1][0]:e[2][0],h=l==="channelsLast"?e[1][1]:e[2][1],p=l==="channelsLast"?e[2][0]:e[3][0],m=l==="channelsLast"?e[2][1]:e[3][1];u={top:f,bottom:h,left:p,right:m,type:f===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=Fl((t-r+f+h)/s+1,i),d=Fl((n-a+p+m)/o+1,i)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outHeight:c,outWidth:d}}function wxe(e,t,n,s,o,r,a,i,l,u,c){let d,f,h,p;if(typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const g=bxe([t,n,s,1],i,1,o,e,c);f=g[0],h=g[1],p=g[2]}else if(e==="same"){f=Math.ceil(t/o),h=Math.ceil(n/r),p=Math.ceil(s/a);const m=(f-1)*o+i-t,g=(h-1)*r+l-n,v=(p-1)*a+u-s,b=Math.floor(m/2),$=m-b,y=Math.floor(g/2),w=g-y,C=Math.floor(v/2),k=v-C;d={top:y,bottom:w,left:C,right:k,front:b,back:$,type:"SAME"}}else if(e==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-i+1)/o),h=Math.ceil((n-l+1)/r),p=Math.ceil((s-u+1)/a);else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function Fl(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Kl(e){const[t,n,s]=sg(e);return t===1&&n===1&&s===1}function ao(e,t){return Kl(e)||Kl(t)}function Ja(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function $o(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")j(bc(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(s=>{s.forEach(o=>{j(bc(o),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(e,t){const s={x:Z(e,"x","reshape","string_or_numeric")},o={shape:t};return Ce.runKernel(Fv,s,o)}const Se=$e({reshape_:$xe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(e,t,n,s,o){const r=Z(e,"x","avgPool","float32"),a=1;j(ao(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let i=r,l=!1;r.rank===3&&(l=!0,i=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]])),j(i.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`),$o("avgPool",s,o);const u={x:i},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o};let d=Ce.runKernel(Qg,u,c);return d=mt(d,r.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const OC=$e({avgPool_:Cxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(e,t,n,s,o,r="NDHWC"){const a=Z(e,"x","avgPool3d","float32");let i=a,l=!1;a.rank===4&&(l=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),j(i.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${i.rank}.`),j(r==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),$o("avgPool3d",s,o);const u={x:i},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o,dataFormat:r};let d=Ce.runKernel(ev,u,c);return d=mt(d,i.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const Sxe=$e({avgPool3d_:kxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(e,t=0){j(e.length>=1,()=>"Pass at least one tensor to concat");const n=NO(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(r=>{if(r.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${r.dtype}. `)}),n.length===1)return Ml(n[0]);const s=n,o={axis:t};return Ce.runKernel(ov,s,o)}const no=$e({concat_:xxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(e){const n={x:Z(e,"x","sigmoid","float32")};return Ce.runKernel(Nh,n)}const Uc=$e({sigmoid_:Ixe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(e,t,n){const s=Z(e,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const o={x:s},r={begin:t,size:n};return Ce.runKernel(Vv,o,r)}const Bn=$e({slice_:Exe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Txe(e){const n={x:Z(e,"x","tanh","float32")};return Ce.runKernel(Mh,n)}const MC=$e({tanh_:Txe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxe(e,t,n){const s=Z(e,"x","batchToSpaceND"),o=t.reduce((i,l)=>i*l);j(s.rank>=1+t.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`),j(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),j(s.shape[0]%o===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);const r={x:s},a={blockShape:t,crops:n};return Ce.runKernel(nv,r,a)}const FC=$e({batchToSpaceND_:Nxe});function Axe(e){let t;return e.rank===0||e.rank===1?t=Se(e,[1,1,1,e.size]):e.rank===2?t=Se(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(e,t,n,s,o,r){r==null&&(r=.001);const a=Z(e,"x","batchNorm"),i=Z(t,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let u;o!=null&&(u=Z(o,"scale","batchNorm"));let c;s!=null&&(c=Z(s,"offset","batchNorm")),j(i.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(c==null||i.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(u==null||i.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:Axe(a),scale:u,offset:c,mean:i,variance:l},h={varianceEpsilon:r},p=Ce.runKernel(hv,f,h);return Se(p,a.shape)}const t0=$e({batchNorm_:Dxe});function Rxe(e,t,n,s,o,r){const a=Z(e,"x","batchNorm"),i=Z(t,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let u;o!=null&&(u=Z(o,"scale","batchNorm"));let c;return s!=null&&(c=Z(s,"offset","batchNorm")),j(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),j(i.rank===2||i.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${i.rank}.`),j(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&j(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&j(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),t0(a,i,l,c,u,r)}const _xe=$e({batchNorm2d_:Rxe});function Oxe(e,t,n,s,o,r){const a=Z(e,"x","batchNorm"),i=Z(t,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let u;o!=null&&(u=Z(o,"scale","batchNorm"));let c;return s!=null&&(c=Z(s,"offset","batchNorm")),j(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),j(i.rank===3||i.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${i.rank}.`),j(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&j(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&j(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),t0(a,i,l,c,u,r)}const Mxe=$e({batchNorm3d_:Oxe});function Fxe(e,t,n,s,o,r){const a=Z(e,"x","batchNorm"),i=Z(t,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let u;o!=null&&(u=Z(o,"scale","batchNorm"));let c;return s!=null&&(c=Z(s,"offset","batchNorm")),j(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),j(i.rank===4||i.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${i.rank}.`),j(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&j(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&j(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),t0(a,i,l,c,u,r)}const Pxe=$e({batchNorm4d_:Fxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(e,t,n){const s=Z(e,"x","bincount"),o=Z(t,"weights","bincount");j(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),j(n>=0,()=>`size must be non-negative, but got ${n}.`),j(o.size===s.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${o.shape}.`);const r={x:s,weights:o},a={size:n};return Ce.runKernel(L$,r,a)}const Bxe=$e({bincount_:Lxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zxe(e,t){let n=Z(e,"broadcastTo","x");const s=n.shape;if(t.some(u=>!(u>0)||u%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const u=n.shape.slice();for(;u.length<t.length;)u.unshift(1);n=Se(n,u)}const o=n.shape,r=Array.from(t);for(let u=t.length-1;u>=0;u--)if(o[u]===t[u])r[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${t}].`);if(r.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return Ml(n);const i={x:n},l={reps:r};return Ce.runKernel(Fh,i,l)}const Em=$e({broadcastTo_:zxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(e){const n={x:Z(e,"x","ceil","float32")};return Ce.runKernel(Zf,n)}const Wxe=$e({ceil_:Vxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hxe(e,t,n){const s=Z(e,"x","clipByValue");j(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`);const o={x:s},r={clipValueMin:t,clipValueMax:n};return Ce.runKernel(Jf,o,r)}const nr=$e({clipByValue_:Hxe});function Uxe(e){return no(e,0)}const Gxe=$e({concat1d_:Uxe});function Kxe(e,t){return no(e,t)}const jxe=$e({concat2d_:Kxe});function qxe(e,t){return no(e,t)}const Xxe=$e({concat3d_:qxe});function Yxe(e,t){return no(e,t)}const Zxe=$e({concat4d_:Yxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jxe(e,t,n,s,o="NHWC",r=[1,1],a){const i=Z(e,"x","conv2d","float32"),l=Z(t,"filter","conv2d","float32");let u=i,c=!1;i.rank===3&&(c=!0,u=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),j(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),j(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),$o("conv2d",s,a);const d=o==="NHWC"?u.shape[3]:u.shape[1];j(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),j(ao(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`);const f={x:u,filter:l},h={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:a},p=Ce.runKernel(rv,f,h);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const jl=$e({conv2d_:Jxe});function Qxe(e,t,n,s,o="NWC",r=1,a){const i=Z(e,"x","conv1d"),l=Z(t,"filter","conv1d");let u=i,c=!1;i.rank===2&&(c=!0,u=Se(i,[1,i.shape[0],i.shape[1]])),j(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),j(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),$o("conv1d",s,a),j(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),j(ao(n,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${r}'`),j(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=Se(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=jl(f,d,[1,n],s,"NHWC",[1,r],a);return c?Se(g,[g.shape[2],g.shape[3]]):Se(g,[g.shape[0],g.shape[2],g.shape[3]])}const JO=$e({conv1d_:Qxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe(e,t,n,s,o,r="NHWC",a){j(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let i=e,l=t,u=!1;t.rank===3&&(u=!0,l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]),i=[1,e[0],e[1],e[2]]),j(i.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${i.length}.`),j(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),j(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=r==="NHWC"?i[3]:i[1],d=r==="NHWC"?l.shape[3]:l.shape[1];j(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),j(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),$o("conv2dDerInput",o,a);const f={dy:l,filter:n},h={strides:s,pad:o,dataFormat:r,dimRoundingMode:a,inputShape:i},p=Ce.runKernel(av,f,h);return u?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const PC=$e({conv2DBackpropInput_:eIe});function tIe(e,t,n,s,o,r){const a=Z(e,"x","conv2dTranspose"),i=Z(t,"filter","conv2dTranspose");return PC(n,a,i,s,o,"NHWC",r)}const QO=$e({conv2dTranspose_:tIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(e,t,n,s,o="NDHWC",r=[1,1,1]){const a=Z(e,"x","conv3d"),i=Z(t,"filter","conv3d");let l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),j(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),j(i.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${i.rank}.`),j(l.shape[4]===i.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${i.shape[3]}.`),j(ao(n,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),j(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`);const c={x:l,filter:i},d={strides:n,pad:s,dataFormat:o,dilations:r},f=Ce.runKernel(iv,c,d);return u?Se(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const sIe=$e({conv3d_:nIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oIe(e,t,n,s,o){j(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let r=e,a=t,i=!1;t.rank===4&&(i=!0,a=Se(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),r=[1,e[0],e[1],e[2],e[3]]);const l=r[4],u=a.shape[4];j(r.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),j(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),j(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),j(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),j(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:a,filter:n},d={pad:o,strides:s,inputShape:r},f=Ce.runKernel(W$,c,d);return i?Se(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const eM=$e({conv3DBackpropInput_:oIe});function rIe(e,t,n,s,o){const r=Z(e,"x","conv3dTranspose"),a=Z(t,"filter","conv3dTranspose");return eM(n,r,a,s,o)}const aIe=$e({conv3dTranspose_:rIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(e){const n={x:Z(e,"x","cos","float32")};return Ce.runKernel(Qf,n)}const LC=$e({cos_:iIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(e){const n={x:Z(e,"x","cosh","float32")};return Ce.runKernel(eh,n)}const tM=$e({cosh_:lIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uIe(e,t=0,n=!1,s=!1){const r={x:Z(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:s};return Ce.runKernel(lv,r,a)}const nM=$e({cumsum_:uIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(e,t,n="NHWC"){const s=Z(e,"x","depthToSpace","float32"),o=n==="NHWC"?s.shape[1]:s.shape[2],r=n==="NHWC"?s.shape[2]:s.shape[3],a=n==="NHWC"?s.shape[3]:s.shape[1];j(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),j(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${s.shape}`),j(r*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${t} for depthToSpace with input shape
        ${s.shape}`),j(a%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${s.shape}`);const i={x:s},l={blockSize:t,dataFormat:n};return Ce.runKernel(U$,i,l)}const dIe=$e({depthToSpace_:cIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(e,t,n,s,o="NHWC",r=[1,1],a){const i=Z(e,"x","depthwiseConv2d","float32"),l=Z(t,"filter","depthwiseConv2d","float32");let u=i,c=!1;i.rank===3&&(c=!0,u=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),j(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),j(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),j(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),$o("depthwiseConv2d",s,a);const d={x:u,filter:l},f={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:a},h=Ce.runKernel(uv,d,f);return c?Se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const BC=$e({depthwiseConv2d_:fIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hIe(e,t,n,s,o=[1,1],r="NHWC"){const a=Z(e,"x","dilation2d"),i=Z(t,"filter","dilation2d");j(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),j(i.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${i.rank}.`),j(r==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=a,u=!1;a.rank===3&&(l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0);const c={x:l,filter:i},d={strides:n,pad:s,dilations:o},f=Ce.runKernel(cv,c,d);return u?Se(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const pIe=$e({dilation2d_:hIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(e,t){let n=Z(e,"a","equal","string_or_numeric"),s=Z(t,"b","equal","string_or_numeric");[n,s]=fs(n,s),tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(dv,o)}const Sa=$e({equal_:mIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gIe(e,t,n){const s=Z(t,"a","where"),o=Z(n,"b","where"),r=Z(e,"condition","where","bool"),a=tn(tn(r.shape,s.shape),o.shape),i=Em(r,a),l=Em(s,a),u=Em(o,a),c={condition:i,t:l,e:u};return Ce.runKernel(zv,c)}const Mo=$e({where_:gIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vIe(e){const n={x:Z(e,"x","zerosLike")};return Ce.runKernel(Xv,n)}const $n=$e({zerosLike_:vIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIe(e,t){let n=Z(e,"a","div"),s=Z(t,"b","div");[n,s]=fs(n,s);const o=At(n,s),r=$n(o),a=Sa(s,r);return Mo(a,r,o)}const yIe=$e({divNoNan_:bIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wIe(e,t){const n=Z(e,"t1","dot"),s=Z(t,"t2","dot");j((n.rank===1||n.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const o=n.rank===1?n.size:n.shape[1],r=s.rank===1?s.size:s.shape[0];if(j(o===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${r}.`),n.rank===1&&s.rank===1){const a=Se(n,[1,-1]),i=Se(s,[-1,1]),l=Nn(a,i);return Se(l,[])}else if(n.rank===1&&s.rank===2){const a=Se(n,[1,-1]),i=Se(s,[s.shape[0],s.shape[1]]),l=Nn(a,i);return Se(l,[l.size])}else if(n.rank===2&&s.rank===1){const a=Se(s,[-1,1]),i=Nn(n,a);return Se(i,[i.size])}else{const a=Se(s,[s.shape[0],s.shape[1]]);return Nn(n,a)}}const $Ie=$e({dot_:wIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CIe(e){const n={x:Z(e,"x","elu","float32")};return Ce.runKernel(nh,n)}const n0=$e({elu_:CIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kIe(e){let t=Z(e,"x","erf");j(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=mt(t,"float32"));const n={x:t};return Ce.runKernel(sh,n)}const SIe=$e({erf_:kIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xIe(e){const n={x:Z(e,"x","exp")};return Ce.runKernel(oh,n)}const Sr=$e({exp_:xIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(e,t=0){const n=Z(e,"x","expandDims","string_or_numeric");j(t<=n.rank,()=>"Axis must be <= rank of the tensor");const s={input:n},o={dim:t};return Ce.runKernel(fv,s,o)}const dr=$e({expandDims_:IIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(e){const n={x:Z(e,"x","expm1")};return Ce.runKernel(rh,n)}const TIe=$e({expm1_:EIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(e,t){const n=Z(e,"x","tile","string_or_numeric");j(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const s={x:n},o={reps:t};return Ce.runKernel(Fh,s,o)}const Ur=$e({tile_:NIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(e,t,n,s="float32"){t==null&&(t=e);const o=hn([e,t],s),r=e<=t?e:t;for(let i=0;i<r;++i)o.set(1,i,i);const a=Se(o.toTensor(),[e,t]);if(n==null)return a;if(n.length===1)return Ur(dr(a,0),[n[0],1,1]);if(n.length===2)return Ur(dr(dr(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ur(dr(dr(dr(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const sM=$e({eye_:AIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0(e,t,n){const s={shape:e,value:t,dtype:n};return Ce.runKernel(X$,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(e){const n={x:Z(e,"x","floor","float32")};return Ce.runKernel(ah,n)}const o0=$e({floor_:DIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(e,t,n=0,s=0){const o=Z(e,"x","gather"),r=Z(t,"indices","gather","int32"),a={x:o,indices:r},i={axis:n,batchDims:s};return Ce.runKernel(pv,a,i)}const zC=$e({gather_:RIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ie(e,t){let n=Z(e,"a","greater","string_or_numeric"),s=Z(t,"b","greater","string_or_numeric");[n,s]=fs(n,s),tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(mv,o)}const Dr=$e({greater_:_Ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(e,t){let n=Z(e,"a","greaterEqual","string_or_numeric"),s=Z(t,"b","greaterEqual","string_or_numeric");[n,s]=fs(n,s),tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(lh,o)}const Gc=$e({greaterEqual_:OIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(e){const n={input:Z(e,"input","imag")};return Ce.runKernel(J$,n)}const oM=$e({imag_:MIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FIe(e){const n={x:Z(e,"x","isFinite")};return Ce.runKernel(ch,n)}const PIe=$e({isFinite_:FIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(e){const n={x:Z(e,"x","isInf")};return Ce.runKernel(dh,n)}const BIe=$e({isInf_:LIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zIe(e){const n={x:Z(e,"x","isNaN")};return Ce.runKernel(fh,n)}const VIe=$e({isNaN_:zIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(e,t=.2){const s={x:Z(e,"x","leakyRelu")},o={alpha:t};return Ce.runKernel(gv,s,o)}const VC=$e({leakyRelu_:WIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(e,t){let n=Z(e,"a","less","string_or_numeric"),s=Z(t,"b","less","string_or_numeric");[n,s]=fs(n,s),tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(vv,o)}const rM=$e({less_:HIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UIe(e,t){let n=Z(e,"a","lessEqual","string_or_numeric"),s=Z(t,"b","lessEqual","string_or_numeric");[n,s]=fs(n,s),tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(bv,o)}const Kc=$e({lessEqual_:UIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GIe(e,t=5,n=1,s=1,o=.5){const r=Z(e,"x","localResponseNormalization");j(r.rank===4||r.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${r.rank}.`),j(bc(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let a=r,i=!1;r.rank===3&&(i=!0,a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={x:a},u={depthRadius:t,bias:n,alpha:s,beta:o},c=Ce.runKernel(Cv,l,u);return i?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const KIe=$e({localResponseNormalization_:GIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jIe(e){const n={x:Z(e,"x","log","float32")};return Ce.runKernel(hh,n)}const xr=$e({log_:jIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qIe(e){const n={x:Z(e,"x","log1p")};return Ce.runKernel(ph,n)}const WC=$e({log1p_:qIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(e,t){j(b1(e),()=>"The f passed in variableGrads(f) must be a function"),j(t==null||Array.isArray(t)&&t.every(u=>u instanceof ng),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const u in Ce.registeredVariables)t.push(Ce.registeredVariables[u])}const s=n?t.filter(u=>!u.trainable):null,o=t.length;t=t.filter(u=>u.trainable),j(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const r=!0,{value:a,grads:i}=Ce.gradients(e,t,null,r);j(i.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),j(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return t.forEach((u,c)=>{i[c]!=null&&(l[u.name]=i[c])}),s!=null&&s.forEach(u=>l[u.name]=null),{value:a,grads:l}}function ql(e){return Ce.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YIe(e){const n={x:Z(e,"x","neg")};return Ce.runKernel(Nv,n)}const ls=$e({neg_:YIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZIe(e){const n={x:Z(e,"x","softplus")};return Ce.runKernel(Ah,n)}const zh=$e({softplus_:ZIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIe(e){const t=Z(e,"x","logSigmoid");return ql(s=>({value:ls(zh(ls(s))),gradFunc:a=>ge(a,Uc(ls(s)))}))(t)}const QIe=$e({logSigmoid_:JIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(e,t=null,n=!1){const o={x:Z(e,"x","max")},r={reductionIndices:t,keepDims:n};return Ce.runKernel(kv,o,r)}const ba=$e({max_:eEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEe(e,t){let n=Z(e,"a","sub"),s=Z(t,"b","sub");[n,s]=fs(n,s);const o={a:n,b:s};return Ce.runKernel(_h,o)}const Tt=$e({sub_:tEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(e,t=null,n=!1){let s=Z(e,"x","sum");s.dtype==="bool"&&(s=mt(s,"int32"));const o={x:s},r={axis:t,keepDims:n};return Ce.runKernel(Wv,o,r)}const Et=$e({sum_:nEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(e,t=-1){const n=Z(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return ql((o,r)=>{const i=ba(o,t,!0),l=Tt(o,i),u=Tt(mt(l,"float32"),xr(Et(Sr(l),t,!0)));return r([u]),{value:u,gradFunc:(d,f)=>{const[h]=f,p=!0,m=Sr(h);return Tt(d,ge(Et(d,t,p),m))}}})(n)}const aM=$e({logSoftmax_:sEe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HC(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function iM(e,t,n){const s=e.length+t.length,o=[];let r=0,a=0;for(let i=0;i<s;i++)n.indexOf(i)===-1?o.push(e[r++]):o.push(t[a++]);return o}function Ps(e,t){const n=[],s=e.length;for(let r=0;r<s;r++)t.indexOf(r)===-1&&n.push(e[r]);const o=t.map(r=>e[r]);return[n,o]}function hs(e,t){const n=t.map(s=>1);return iM(e,n,t)}function js(e,t,n){j(HC(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function ps(e,t){if(HC(e,t))return null;const n=[];for(let s=0;s<t;++s)e.indexOf(s)===-1&&n.push(s);return e.forEach(s=>n.push(s)),n}function jc(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function ys(e,t){const n=[];for(let s=t-e;s<t;++s)n.push(s);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(e,t=null,n=!1){const s=Z(e,"x","logSumExp"),o=an(t,s.shape),r=ba(s,o,!0),a=Tt(s,r),i=Sr(a),l=Et(i,o),u=xr(l),c=st(Se(r,u.shape),u);if(n){const d=hs(c.shape,o);return Se(c,d)}return c}const lM=$e({logSumExp_:oEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEe(e,t){const n=Z(e,"a","logicalAnd","bool"),s=Z(t,"b","logicalAnd","bool");tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(yv,o)}const Ka=$e({logicalAnd_:rEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEe(e){const n={x:Z(e,"x","logicalNot","bool")};return Ce.runKernel(wv,n)}const UC=$e({logicalNot_:aEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iEe(e,t){const n=Z(e,"a","logicalOr","bool"),s=Z(t,"b","logicalOr","bool");tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel($v,o)}const uM=$e({logicalOr_:iEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(e,t){const n=Z(e,"a","logicalXor","bool"),s=Z(t,"b","logicalXor","bool");return tn(n.shape,s.shape),Ka(uM(e,t),UC(Ka(e,t)))}const uEe=$e({logicalXor_:lEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(e,t,n,s,o){const r=Z(e,"x","maxPool"),a=1;let i=r,l=!1;r.rank===3&&(l=!0,i=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]])),j(i.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`),j(ao(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),$o("maxPool",s,o);const u={x:i},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o},d=Ce.runKernel(Sv,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const GC=$e({maxPool_:cEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEe(e,t=[1,1,1],n,s,o,r="NDHWC"){const a=Z(e,"x","maxPool3d");let i=a,l=!1;a.rank===4&&(l=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),j(i.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${i.rank}.`),j(r==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),$o("maxPool3d",s,o);const u={x:i},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o,dataFormat:r},d=Ce.runKernel(xv,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const fEe=$e({maxPool3d_:dEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(e,t){let n=Z(e,"a","maximum"),s=Z(t,"b","maximum");[n,s]=fs(n,s),n.dtype==="bool"&&(n=mt(n,"int32"),s=mt(s,"int32")),tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(mh,o)}const Ui=$e({maximum_:hEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(e,t=null,n=!1){const o={x:Z(e,"x","mean")},r={axis:t,keepDims:n};return Ce.runKernel(Iv,o,r)}const us=$e({mean_:pEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _s(e,t="float32"){if(t==="complex64"){const s=_s(e,"float32"),o=_s(e,"float32");return bf(s,o)}const n=ro(Ue(e),t);return Ce.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gi(e,t="float32"){if(t==="complex64"){const s=Gi(e,"float32"),o=_s(e,"float32");return bf(s,o)}const n=Z3(Ue(e),t);return Ce.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mEe(e,t=null,n=!1){const o={x:Z(e,"x","min")},r={axis:t,keepDims:n};return Ce.runKernel(Ev,o,r)}const P1=$e({min_:mEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEe(e,t){let n=Z(e,"a","minimum"),s=Z(t,"b","minimum");[n,s]=fs(n,s),n.dtype==="bool"&&(n=mt(n,"int32"),s=mt(s,"int32")),tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(gh,o)}const r0=$e({minimum_:gEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEe(e,t,n){j(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const s=Z(e,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");j(t.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`);const o=n==="reflect"?1:0;for(let i=0;i<s.rank;i++)j(t[i].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),j(t[i][0]>=0&&t[i][0]<=s.shape[i]-o&&t[i][1]>=0&&t[i][1]<=s.shape[i]-o,()=>`Padding in dimension ${i} cannot be greater than or equal to ${s.shape[i]-o} or less than 0 for input of shape ${s.shape}`);const r={paddings:t,mode:n},a={x:s};return Ce.runKernel(Tv,a,r)}const bEe=$e({mirrorPad_:vEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(e,t){let n=Z(e,"a","mod"),s=Z(t,"b","mod");[n,s]=fs(n,s);const o={a:n,b:s};return Ce.runKernel(vh,o)}const wEe=$e({mod_:yEe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ee(e){const t=Z(e,"x","square"),n={};return Ce.runKernel("Square",{x:t},n)}const Kn=$e({square_:$Ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe(e,t=null,n=!1){e=Z(e,"x","moments");const s=an(t,e.shape),o=us(e,s,n);let r=o.shape;n||(r=hs(o.shape,s));const a=Kn(Tt(mt(e,"float32"),Se(o,r))),i=us(a,s,n);return{mean:o,variance:i}}const KC=$e({moments_:CEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(e,t){let n=Z(e,"a","notEqual","string_or_numeric"),s=Z(t,"b","notEqual","string_or_numeric");[n,s]=fs(n,s),tn(n.shape,s.shape);const o={a:n,b:s};return Ce.runKernel(Av,o)}const wf=$e({notEqual_:kEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(e){const n={x:Z(e,"x","onesLike")};return Ce.runKernel(Dv,n)}const Ir=$e({onesLike_:SEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(e,t,n=0){const s=Z(e,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},r={x:s};return Ce.runKernel(Ov,r,o)}const jC=$e({pad_:xEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(e,t,n){const s=Z(e,"x","spaceToBatchND");j(s.rank>=1+t.length,()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`),j(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),j(s.shape.reduce((a,i,l)=>l>0&&l<=t.length?a&&(i+n[l-1][0]+n[l-1][1])%t[l-1]===0:a,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const o={x:s},r={blockShape:t,paddings:n};return Ce.runKernel(Hv,o,r)}const qC=$e({spaceToBatchND_:IEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EEe(e,t,n,s,o,r,a){o==null&&(o=[1,1]),r==null&&(r=1),s===0&&(s="valid");const i=Z(e,"x","maxPool");let l=i,u=!1;i.rank===3&&(u=!0,l=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),j(ao(r,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`);const c=Ar(l.shape,t,r,o,s),d=[c.dilationHeight,c.dilationWidth];let f;s==="same"?f=NEe([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,m]=TEe([c.inHeight,c.inWidth],d,f),g=h?s:"valid",v=h?l:qC(l,d,p),$=(n==="avg"?()=>OC(v,t,r,g,a):()=>GC(v,t,r,g,a))(),y=h?$:FC($,d,m);return u?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function TEe(e,t,n){const s=n.map(c=>c[0]),o=n.map(c=>c[1]),r=e.concat(s,o),a=t.map((c,d)=>(c-r[d]%c)%c),i=o.map((c,d)=>c+a[d]),l=t.map((c,d)=>[s[d],i[d]]),u=t.map((c,d)=>[0,a[d]]);return[l,u]}function NEe(e,t){const s=e.map((a,i)=>a+(a-1)*(t[i]-1)).map(a=>a-1),o=s.map(a=>Math.floor(a/2)),r=s.map((a,i)=>a-o[i]);return s.map((a,i)=>[o[i],r[i]])}const AEe=$e({pool_:EEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEe(e,t){let n=Z(e,"base","pow"),s=Z(t,"exp","pow");[n,s]=fs(n,s);const o={a:n,b:s};return Ce.runKernel(yh,o)}const kc=$e({pow_:DEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REe(e,t){const n=Z(e,"x","prelu"),s=Z(t,"alpha","prelu"),o={x:n,alpha:s};return Ce.runKernel(Mv,o)}const XC=$e({prelu_:REe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(e,t=null,n=!1){let s=Z(e,"x","prod");s.dtype==="bool"&&(s=mt(s,"int32"));const o={x:s},r={axis:t,keepDims:n};return Ce.runKernel(rC,o,r)}const OEe=$e({prod_:_Ee});var cM={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=i();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function i(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.alea=a})(An,e,!1)})(cM);var dM={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},i===(i|0)?l.x=i:u+=i;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xor128=a})(An,e,!1)})(dM);var fM={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,i===(i|0)?l.x=i:u+=i;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l.v=i.v,l.d=i.d,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xorwow=a})(An,e,!1)})(fM);var hM={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,i)}function r(i,l){return l.x=i.x.slice(),l.i=i.i,l}function a(i,l){i==null&&(i=+new Date);var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xorshift7=a})(An,e,!1)})(hM);var pM={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,m,g,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=v[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=g,c.X=v,c.i=p}u(l,i)}function r(i,l){return l.i=i.i,l.w=i.w,l.X=i.X.slice(),l}function a(i,l){i==null&&(i=+new Date);var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xor4096=a})(An,e,!1)})(pM);var mM={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,i===Math.floor(i)?(l.a=i/4294967296|0,l.b=i|0):u+=i;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(i,l){return l.a=i.a,l.b=i.b,l.c=i.c,l.d=i.d,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.tychei=a})(An,e,!1)})(mM);var gM={exports:{}};(function(e){(function(t,n){var s=this,o=256,r=6,a=52,i="random",l=n.pow(o,r),u=n.pow(2,a),c=u*2,d=o-1,f;function h(y,w,C){var k=[];w=w==!0?{entropy:!0}:w||{};var S=v(g(w.entropy?[y,$(t)]:y==null?b():y,3),k),E=new p(k),x=function(){for(var N=E.g(r),A=l,D=0;N<u;)N=(N+D)*o,A*=o,D=E.g(1);for(;N>=c;)N/=2,A/=2,D>>>=1;return(N+D)/A};return x.int32=function(){return E.g(4)|0},x.quick=function(){return E.g(4)/4294967296},x.double=x,v($(E.S),t),(w.pass||C||function(N,A,D,M){return M&&(M.S&&m(M,E),N.state=function(){return m(E,{})}),D?(n[i]=N,A):N})(x,S,"global"in w?w.global:this==n,w.state)}n["seed"+i]=h;function p(y){var w,C=y.length,k=this,S=0,E=k.i=k.j=0,x=k.S=[];for(C||(y=[C++]);S<o;)x[S]=S++;for(S=0;S<o;S++)x[S]=x[E=d&E+y[S%C]+(w=x[S])],x[E]=w;(k.g=function(N){for(var A,D=0,M=k.i,F=k.j,R=k.S;N--;)A=R[M=d&M+1],D=D*o+R[d&(R[M]=R[F=d&F+A])+(R[F]=A)];return k.i=M,k.j=F,D})(o)}function m(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function g(y,w){var C=[],k=typeof y,S;if(w&&k=="object")for(S in y)try{C.push(g(y[S],w-1))}catch{}return C.length?C:k=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",k,S=0;S<C.length;)w[d&S]=d&(k^=w[d&S]*19)+C.charCodeAt(S++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(gM);var MEe=cM.exports,FEe=dM.exports,PEe=fM.exports,LEe=hM.exports,BEe=pM.exports,zEe=mM.exports,lu=gM.exports;lu.alea=MEe;lu.xor128=FEe;lu.xorwow=PEe;lu.xorshift7=LEe;lu.xor4096=BEe;lu.tychei=zEe;var vM=lu;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bM{constructor(t,n,s,o,r){this.mean=t,this.stdDev=n,this.dtype=s,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=r||Math.random();this.random=vM.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let t,n,s=!1;for(;!s;){let o,r,a;do o=2*this.random()-1,r=2*this.random()-1,a=o*o+r*r;while(a>=1||a===0);const i=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*o*i,n=this.mean+this.stdDev*r*i,(!this.truncated||this.isValidTruncated(t))&&(s=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class VEe{constructor(t=0,n=1,s,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=s,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=vM.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(e,t=0,n=1,s,o){if(s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const r=new bM(t,n,s,!1,o),a=hn(e,s);for(let i=0;i<a.values.length;i++)a.values[i]=r.nextValue();return a.toTensor()}const HEe=$e({randomNormal_:WEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(e,t=0,n=1,s="float32",o){const r=hn(e,s),a=new VEe(t,n,null,o);for(let i=0;i<r.values.length;i++)r.values[i]=a.nextValue();return r.toTensor()}const a0=$e({randomUniform_:UEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function og(e,t,n=1,s="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:s};return Ce.runKernel(aC,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(e){const n={input:Z(e,"input","real")};return Ce.runKernel(iC,n)}const L1=$e({real_:GEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(e){const n={x:Z(e,"x","reciprocal")};return Ce.runKernel(wh,n)}const jEe=$e({reciprocal_:KEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEe(e){const n={x:Z(e,"x","relu")};return Ce.runKernel($h,n)}const Qa=$e({relu_:qEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEe(e){const n={x:Z(e,"x","relu6")};return Ce.runKernel(Ch,n)}const yM=$e({relu6_:XEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEe(e,t){const s={x:Z(e,"x","reverse")},o={dims:t};return Ce.runKernel(Bv,s,o)}const Xl=$e({reverse_:YEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZEe(e){const n={x:Z(e,"x","round")};return Ce.runKernel(kh,n)}const wM=$e({round_:ZEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JEe(e){const n={x:Z(e,"x","rsqrt","float32")};return Ce.runKernel(Sh,n)}const $M=$e({rsqrt_:JEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gt(e,t){if((Ca(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Ca(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Jv(e,[],[],t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(e){const n={x:Z(e,"x","selu")};return Ce.runKernel(xh,n)}const CM=$e({selu_:QEe});function eTe(e,t,n,s,o,r=[1,1],a="NHWC"){const i=Z(e,"x","separableConv2d"),l=Z(t,"depthwiseFilter","separableConv2d"),u=Z(n,"pointwiseFilter","separableConv2d");let c=i,d=!1;if(i.rank===3&&(d=!0,c=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");j(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),j(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),j(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),j(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),j(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],h=l.shape[3];j(u.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${u.shape[2]}.`);const p=BC(c,l,s,o,a,r),g=jl(p,u,1,"valid",a);return d?Se(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const kM=$e({separableConv2d_:eTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(e){const n={x:Z(e,"x","sign")};return Ce.runKernel(Th,n)}const nTe=$e({sign_:tTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(e){const n={x:Z(e,"x","sin","float32")};return Ce.runKernel(Ih,n)}const SM=$e({sin_:sTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTe(e){const n={x:Z(e,"x","sinh")};return Ce.runKernel(Eh,n)}const xM=$e({sinh_:oTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(e,t,n){const s=Z(e,"x","slice1d");return j(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),Bn(s,[t],[n])}const YC=$e({slice1d_:rTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(e,t,n){const s=Z(e,"x","slice2d");return j(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),Bn(s,t,n)}const IM=$e({slice2d_:aTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(e,t,n){const s=Z(e,"x","slice3d");return j(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),Bn(s,t,n)}const ZC=$e({slice3d_:iTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(e,t,n){const s=Z(e,"x","slice4d");return j(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),Bn(s,t,n)}const rg=$e({slice4d_:lTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(e,t=-1){const n=Z(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const s={logits:n},o={dim:t};return Ce.runKernel(Gv,s,o)}const JC=$e({softmax_:uTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTe(e){j(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return Ce.runKernel(q$,t)}const EM=$e({fft_:cTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(e){j(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return Ce.runKernel(Z$,t)}const B1=$e({ifft_:dTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTe(e){const t=e.shape[e.shape.length-1],n=e.size/t;let s;if(t<=2){const o=Se(e,[n,t]);s=B1(o)}else{const o=[n,2*(t-1)],r=Se(L1(e),[n,t]),a=Se(oM(e),[n,t]),i=Xl(Bn(r,[0,1],[n,t-2]),1),l=ge(Xl(Bn(a,[0,1],[n,t-2]),1),Gt(-1)),u=no([r,i],1),c=no([a,l],1),d=Se(bf(u,c),[o[0],o[1]]);s=B1(d)}if(s=L1(s),e.rank===3&&e.shape[0]!==0){const o=s,r=e.shape[0];s=Se(s,[r,s.shape[0]/r,s.shape[1]]),o.dispose()}return s}const hTe=$e({irfft_:fTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(e,t,n=0){const o={x:Z(e,"x","split")},r={numOrSizeSplits:t,axis:n};return Ce.runKernel(Uv,o,r)}const Jo=$e({split_:pTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTe(e,t){j(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const s=e.size/n;let o;if(t!=null&&t<n){const p=e.shape.map(g=>0),m=e.shape.map(g=>g);m[e.shape.length-1]=t,o=Bn(e,p,m),n=t}else if(t!=null&&t>n){const p=e.shape.map(m=>m);p[e.shape.length-1]=t-n,o=no([e,_s(p)],e.shape.length-1),n=t}else o=e;const r=$n(o),a=Se(bf(o,r),[s,n]),i=EM(a),l=Math.floor(n/2)+1,u=L1(i),c=oM(i),d=Jo(u,[l,n-l],u.shape.length-1),f=Jo(c,[l,n-l],c.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,Se(bf(d[0],f[0]),h)}const TM=$e({rfft_:mTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTe(e){const n={x:Z(e,"x","sqrt","float32")};return Ce.runKernel(Dh,n)}const co=$e({sqrt_:gTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(e,t){let n=Z(e,"a","squaredDifference"),s=Z(t,"b","squaredDifference");[n,s]=fs(n,s),tn(n.shape,s.shape);const o={a:n,b:s},r={};return Ce.runKernel(Rh,o,r)}const NM=$e({squaredDifference_:vTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTe(e,t){const n=Z(e,"x","squeeze");return Se(n,Vi(n.shape,t).newShape)}const Vh=$e({squeeze_:bTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTe(e,t=0){const n=NO(e,"tensors","stack","string_or_numeric");j(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&j(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const s=n,o={axis:t};return Ce.runKernel(_v,s,o)}const Yl=$e({stack_:yTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTe(e,t=0){const s={x:Z(e,"x","step")},o={alpha:t};return Ce.runKernel(Ph,s,o)}const Wh=$e({step_:wTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Te(e,t,n,s,o=0,r=0,a=0,i=0,l=0){const c={x:Z(e,"x","stridedSlice","string_or_numeric")},d={begin:t,end:n,strides:s,beginMask:o,endMask:r,ellipsisMask:a,newAxisMask:i,shrinkAxisMask:l};return Ce.runKernel(mC,c,d)}const CTe=$e({stridedSlice_:$Te});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(e){const n={x:Z(e,"x","tan","float32")};return Ce.runKernel(Oh,n)}const STe=$e({tan_:kTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ao(e,t){j3(e);const n=Zv(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Jv(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tm(e,t,n){if(j3(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=Zv(e,n);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Jv(e,t,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(e,t=1,n=!0){const s=Z(e,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=s.shape[s.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const r={x:s},a={k:t,sorted:n},[i,l]=Ce.runKernel(yC,r,a);return{values:i,indices:l}}const ITe=$e({topk_:xTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(e,t=0,n=1,s,o){if(s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new bM(t,n,s,!0,o),a=hn(e,s);for(let i=0;i<a.values.length;i++)a.values[i]=r.nextValue();return a.toTensor()}const AM=$e({truncatedNormal_:ETe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(e,t=0){const n=Z(e,"x","unique","string_or_numeric");j(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},o={axis:t},[r,a]=Ce.runKernel($C,s,o);return{values:r,indices:a}}const NTe=$e({unique_:TTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATe(e,t,n){const s=Z(e,"x","unsortedSegmentSum"),o=Z(t,"segmentIds","unsortedSegmentSum","int32");j(bc(n),()=>"numSegments must be of dtype int");const r={x:s,segmentIds:o},a={numSegments:n};return Ce.runKernel(qv,r,a)}const DM=$e({unsortedSegmentSum_:ATe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(e,t=0){const n=Z(e,"x","unstack","string_or_numeric");j(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const s={value:n},o={axis:t};return Ce.runKernel(jv,s,o)}const Sc=$e({unstack_:DTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RTe(e,t=!0,n,s){return Ce.makeVariable(e,t,n,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RM(e,t){const n=[];for(let r=0;r<t.length;r++)t[r]&&n.push(r);const s=hn(e,"int32"),o=hn([n.length,e.length],"int32");for(let r=0;r<n.length;r++){const a=s.indexToLoc(n[r]),i=r*e.length;o.values.set(a,i)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(e,t="euclidean",n=null,s=!1){e=Z(e,"x","norm");const o=_M(e,t,n);let r=o.shape;if(s){const a=an(n,e.shape);r=hs(o.shape,a)}return Se(o,r)}function _M(e,t,n=null){if(e.rank===0)return Ds(e);if(e.rank!==1&&n===null)return _M(Se(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Et(Ds(e),n);if(t===1/0)return ba(Ds(e),n);if(t===-1/0)return P1(Ds(e),n);if(t==="euclidean"||t===2)return co(Et(kc(Ds(e),Gt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return ba(Et(Ds(e),n[0]),n[1]-1);if(t===1/0)return ba(Et(Ds(e),n[1]),n[0]);if(t===-1/0)return P1(Et(Ds(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return co(Et(Kn(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const QC=$e({norm_:_Te});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(e,t){if(t==null)return e.shape.slice();if(Dn(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let s=0;s<e.shape.length;s++)t[s]==null&&e.shape[s]!=null?n.push(e.shape[s]):n.push(t[s]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(e,t,n,s){const o=Z(e,"x","dropout");if(j(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),j(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof gs?o.clone():o;const r=OTe(o,n),a=1-t,i=At(o0(st(a0(r,0,1,"float32",s),a)),a);return ge(o,i)}const FTe=$e({dropout_:MTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function OM(e,t,n){const s=1-e%2,o=new Float32Array(e);for(let r=0;r<e;++r){const a=2*Math.PI*r/(e+s-1);o[r]=t-n*Math.cos(a)}return Ao(o,"float32")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(e,t,n,s,o,r="NHWC",a){let i=e;e.rank===3&&(i=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]])),j(i.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${i.shape}.`),j(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),j(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=r==="NHWC"?i.shape[3]:i.shape[1],c=r==="NHWC"?l.shape[3]:l.shape[1];j(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),j(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),$o("conv2dDerFilter",o,a);const d={x:i,dy:l},f={strides:s,pad:o,dataFormat:r,dimRoundingMode:a,filterShape:n};return Ce.runKernel(z$,d,f)}const e2=$e({conv2DBackpropFilter_:LTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return ge(e,Wh(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function n2(e,t){let n=t;const s=Ns(e.shape,t.shape);return s.length>0&&(n=Et(n,s)),Se(n,e.shape)}function s2(e,t,n,s){if(t==="linear")return e;if(t==="relu")return Qa(e);if(t==="elu")return n0(e);if(t==="relu6")return yM(e);if(t==="prelu")return XC(e,n);if(t==="leakyrelu")return VC(e,s);if(t==="sigmoid")return Uc(e);throw new Error(`Unknown fused activation ${t}.`)}const o2=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTe({x:e,filter:t,strides:n,pad:s,dataFormat:o="NHWC",dilations:r=[1,1],dimRoundingMode:a,bias:i,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",o2(Ce.state.gradientDepth,l)===!1){let w=jl(e,t,n,s,o,r,a);return i!=null&&(w=st(w,i)),s2(w,l,u,c)}const d=Z(e,"x","conv2d","float32"),f=Z(t,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),j(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),j(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),$o("fused conv2d",s,a),j(h.shape[3]===f.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${f.shape[2]}.`),j(ao(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),j(o==="NHWC",()=>`Error in conv2d: got dataFormat of ${o} but only NHWC is currently supported.`);const m=Ks(h.shape,f.shape,n,r,s,a);let g;i!=null&&(g=Z(i,"bias","fused conv2d"),[g]=fs(g,d),tn(m.outShape,g.shape));let v;u!=null&&(v=Z(u,"prelu weights","fused conv2d"));const b=(w,C)=>{const[k,S,E,x]=C,N=t2(w,E,l);j(Kl(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const A=PC(S.shape,N,k,n,s),D=e2(S,N,k.shape,n,s),M=[A,D];if(x!=null){const F=n2(x,N);M.push(F)}return M},$={x:h,filter:f,bias:g,preluActivationWeights:v},y={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return i==null?ql((C,k,S)=>{let E=Ce.runKernel(Qm,$,y);return S([k,C,E]),p&&(E=Se(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:b}})(h,f):ql((C,k,S,E)=>{let x=Ce.runKernel(Qm,$,y);return E([k,C,x,S]),p&&(x=Se(x,[x.shape[1],x.shape[2],x.shape[3]])),{value:x,gradFunc:b}})(h,f,g)}const zTe=$e({fusedConv2d_:BTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(e,t,n,s,o,r=[1,1],a){let i=e;e.rank===3&&(i=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:i,dy:l},c={strides:s,pad:o,dimRoundingMode:a,dilations:r,filterShape:n};return Ce.runKernel(G$,u,c)}const WTe=$e({depthwiseConv2dNativeBackpropFilter_:VTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTe(e,t,n,s,o,r=[1,1],a){let i=t,l=!1;t.rank===3&&(l=!0,i=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:i,filter:n},c={strides:s,pad:o,dimRoundingMode:a,dilations:r,inputShape:e},d=Ce.runKernel(K$,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const UTe=$e({depthwiseConv2dNativeBackpropInput_:HTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe({a:e,b:t,transposeA:n=!1,transposeB:s=!1,bias:o,activation:r="linear",preluActivationWeights:a,leakyreluAlpha:i}){if(o2(Ce.state.gradientDepth,r)===!1){let N=Nn(e,t,n,s);return o!=null&&(N=st(N,o)),s2(N,r,a,i)}let l=Z(e,"a","fused matMul"),u=Z(t,"b","fused matMul");[l,u]=fs(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=s?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=s?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=Ue(p),v=Ue(m);j(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${s} must match.`);const $=tn(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,h]),y=n?Se(l,[g,c,f]):Se(l,[g,f,c]),w=s?Se(u,[v,h,d]):Se(u,[v,d,h]);let C;o!=null&&(C=Z(o,"bias","fused matMul"),[C]=fs(C,l),tn($,C.shape));let k;a!=null&&(k=Z(a,"prelu weights","fused matMul"));const S=(N,A)=>{const[D,M,F,R]=A,P=t2(Se(N,F.shape),F,r);let V,G;if(!n&&!s?(V=Nn(P,M,!1,!0),G=Nn(D,P,!0,!1)):!n&&s?(V=Nn(P,M,!1,!1),G=Nn(P,D,!0,!1)):n&&!s?(V=Nn(M,P,!1,!0),G=Nn(D,P,!1,!1)):(V=Nn(M,P,!0,!0),G=Nn(P,D,!0,!0)),o!=null){const se=n2(R,P);return[V,G,se]}else return[V,G]},E={a:y,b:w,bias:C,preluActivationWeights:k},x={transposeA:n,transposeB:s,activation:r,leakyreluAlpha:i};return o==null?ql((A,D,M)=>{const F=Ce.runKernel(Jm,E,x);return M([A,D,F]),{value:Se(F,$),gradFunc:S}})(y,w):ql((A,D,M,F)=>{const R=Ce.runKernel(Jm,E,x);return F([A,D,R,M]),{value:Se(R,$),gradFunc:S}})(y,w,C)}const CT=$e({fusedMatMul_:GTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(e){return OM(e,.54,.46)}const jTe=$e({hammingWindow_:KTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qTe(e){return OM(e,.5,.5)}const MM=$e({hannWindow_:qTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(e,t,n,s=!1,o=0){let r=0;const a=[];for(;r+t<=e.size;)a.push(Bn(e,r,t)),r+=n;if(s)for(;r<e.size;){const i=r+t-e.size,l=no([Bn(e,r,t-i),s0([i],o)]);a.push(l),r+=n}return a.length===0?Tm([],[0,t]):Se(no(a),[a.length,t])}const FM=$e({frame_:XTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(e,t,n,s,o=MM){s==null&&(s=PTe(t));const r=FM(e,t,n),a=ge(r,o(t));return TM(a,s)}const ZTe=$e({stft_:YTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(e,t,n,s,o="bilinear",r=0){const a=Z(e,"image","cropAndResize"),i=Z(t,"boxes","cropAndResize","float32"),l=Z(n,"boxInd","cropAndResize","int32"),u=i.shape[0];j(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),j(i.rank===2&&i.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${i.shape}.`),j(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${i.shape}.`),j(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),j(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),j(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const c={image:a,boxes:i,boxInd:l},d={method:o,extrapolationValue:r,cropSize:s};return Ce.runKernel(H$,c,d)}const QTe=$e({cropAndResize_:JTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNe(e){const t=Z(e,"image","flipLeftRight","float32");j(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return Ce.runKernel(Y$,n,{})}const tNe=$e({flipLeftRight_:eNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(e){const t=Z(e,"image","grayscaleToRGB"),n=t.rank-1,s=t.shape[n];j(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),j(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,Ur(t,o)}const sNe=$e({grayscaleToRGB_:nNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oNe(e,t,n=0,s=.5){const o=Z(e,"image","rotateWithOffset","float32");j(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const r={image:o},a={radians:t,fillValue:n,center:s};return Ce.runKernel(CC,r,a)}const rNe=$e({rotateWithOffset_:oNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qc(e,t,n,s,o,r){s==null&&(s=.5),o==null&&(o=Number.NEGATIVE_INFINITY),r==null&&(r=0);const a=e.shape[0];return n=Math.min(n,a),j(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),j(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),j(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),j(t.rank===1,()=>"scores must be a 1D tensor"),j(t.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${t.shape[0]}`),j(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=Z(e,"boxes","nonMaxSuppression","float32"),a=Z(t,"scores","nonMaxSuppression","float32"),i=qc(r,a,n,s,o);n=i.maxOutputSize,s=i.iouThreshold,o=i.scoreThreshold;const l={maxOutputSize:n,iouThreshold:s,scoreThreshold:o};return Ce.runKernel(nC,{boxes:r,scores:a},l)}const iNe=$e({nonMaxSuppression_:aNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(e,t,n){const s=uNe(e,t,n),o=s<0?-(s+1):s;e.splice(o,0,t)}function uNe(e,t,n){return dNe(e,t,n||cNe)}function cNe(e,t){return e>t?1:e<t?-1:0}function dNe(e,t,n){let s=0,o=e.length,r=0,a=!1;for(;s<o;){r=s+(o-s>>>1);const i=n(t,e[r]);i>0?s=r+1:(o=r,a=!i)}return a?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2(e,t,n,s,o){return l2(e,t,n,s,o,0)}function a2(e,t,n,s,o,r){return l2(e,t,n,s,o,0,!1,r,!0)}function i2(e,t,n,s,o,r){return l2(e,t,n,s,o,r,!0)}function l2(e,t,n,s,o,r,a=!1,i=!1,l=!1){const u=[];for(let g=0;g<t.length;g++)t[g]>o&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(kT);const c=r>0?-.5/r:0,d=[],f=[];for(;d.length<n&&u.length>0;){const g=u.pop(),{score:v,boxIndex:b,suppressBeginIndex:$}=g;if(v<o)break;let y=!1;for(let w=d.length-1;w>=$;--w){const C=fNe(e,b,d[w]);if(C>=s){y=!0;break}if(g.score=g.score*hNe(s,c,C),g.score<=o)break}g.suppressBeginIndex=d.length,y||(g.score===v?(d.push(b),f.push(g.score)):g.score>o&&lNe(u,g,kT))}const h=d.length,p=n-h;i&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:d};return a&&(m.selectedScores=f),l&&(m.validOutputs=h),m}function fNe(e,t,n){const s=e.subarray(t*4,t*4+4),o=e.subarray(n*4,n*4+4),r=Math.min(s[0],s[2]),a=Math.min(s[1],s[3]),i=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(i-r)*(l-a),p=(d-u)*(f-c);if(h<=0||p<=0)return 0;const m=Math.max(r,u),g=Math.max(a,c),v=Math.min(i,d),b=Math.min(l,f),$=Math.max(v-m,0)*Math.max(b-g,0);return $/(h+p-$)}function hNe(e,t,n){const s=Math.exp(t*n*n);return n<=e?s:0}function kT(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pNe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=Z(e,"boxes","nonMaxSuppressionAsync"),a=Z(t,"scores","nonMaxSuppressionAsync"),i=qc(r,a,n,s,o);n=i.maxOutputSize,s=i.iouThreshold,o=i.scoreThreshold;const l=await Promise.all([r.data(),a.data()]),u=l[0],c=l[1],{selectedIndices:d}=r2(u,c,n,s,o);return r!==e&&r.dispose(),a!==t&&a.dispose(),Ao(d,"int32")}const mNe=pNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const a=Z(e,"boxes","nonMaxSuppression"),i=Z(t,"scores","nonMaxSuppression"),l=qc(a,i,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const u={boxes:a,scores:i},c={maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r},d=Ce.runKernel(oC,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const vNe=$e({nonMaxSuppressionWithScore_:gNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function bNe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const a=Z(e,"boxes","nonMaxSuppressionAsync"),i=Z(t,"scores","nonMaxSuppressionAsync"),l=qc(a,i,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const u=await Promise.all([a.data(),i.data()]),c=u[0],d=u[1],{selectedIndices:f,selectedScores:h}=i2(c,d,n,s,o,r);return a!==e&&a.dispose(),i!==t&&i.dispose(),{selectedIndices:Ao(f,"int32"),selectedScores:Ao(h)}}const yNe=bNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wNe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const a=Z(e,"boxes","nonMaxSuppression"),i=Z(t,"scores","nonMaxSuppression"),l=qc(a,i,n,s,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,f={boxes:a,scores:i},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:r},p=Ce.runKernel(sC,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const $Ne=$e({nonMaxSuppressionPadded_:wNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function CNe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const a=Z(e,"boxes","nonMaxSuppressionAsync"),i=Z(t,"scores","nonMaxSuppressionAsync"),l=qc(a,i,n,s,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([a.data(),i.data()]),{selectedIndices:p,validOutputs:m}=a2(f,h,u,c,d,r);return a!==e&&a.dispose(),i!==t&&i.dispose(),{selectedIndices:Ao(p,"int32"),validOutputs:Gt(m,"int32")}}const kNe=CNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(e,t,n=!1,s=!1){const o=Z(e,"images","resizeBilinear");j(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),j(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),j(s===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=o,a=!1;o.rank===3&&(a=!0,r=Se(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const i={images:r},l={alignCorners:n,halfPixelCenters:s,size:t},u=Ce.runKernel(Lv,i,l);return a?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const PM=$e({resizeBilinear_:SNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNe(e,t,n=!1,s=!1){const o=Z(e,"images","resizeNearestNeighbor");j(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),j(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),j(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),j(s===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=o,a=!1;o.rank===3&&(a=!0,r=Se(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const i={images:r},l={alignCorners:n,halfPixelCenters:s,size:t},u=Ce.runKernel(Pv,i,l);return a?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const LM=$e({resizeNearestNeighbor_:xNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function INe(e,t="binary",n=!1,s=.5){const o=Z(e,"image","threshold"),r=.2989,a=.587,i=.114,l=o.shape[0]*o.shape[1];let u=ge(Ao([s]),255),c,d,f,h;if(j(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),j(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),j(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),j(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[c,d,f]=Jo(o,[1,1,1],-1);const g=ge(c,r),v=ge(d,a),b=ge(f,i);h=st(st(g,v),b)}else h=e;if(t==="otsu"){const g=Bxe(mt(wM(h),"int32"),sSe([]),256);u=ENe(g,l)}const p=n?Kc(h,u):Dr(h,u);return mt(ge(p,255),"int32")}function ENe(e,t){let n=Ao([-1]),s=Ao([0]),o=Ao([0]),r,a,i,l,u,c;for(let d=0;d<e.size-1;d++){r=Bn(e,0,d+1),a=Bn(e,d+1),u=At(Et(r),t),c=At(Et(a),t);const f=Et(ge(r,og(0,r.size)));i=At(f,Et(r));const h=s0(a.shape,r.size),p=st(og(0,a.size),h),m=ge(a,p);l=At(Et(m),Et(a));const g=Tt(i,l),v=Tt(i,l),b=ge(u,c);o=ge(ge(b,g),v);const $=Dr(o,s);s=Mo($,o,s),n=Mo($,Ao([d]),n)}return n}const TNe=$e({threshold_:INe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(e,t,n="nearest",s="constant",o=0,r){const a=Z(e,"image","transform","float32"),i=Z(t,"transforms","transform","float32");j(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),j(i.rank===2&&(i.shape[0]===a.shape[0]||i.shape[0]===1)&&i.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),j(r==null||r.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`);const l={image:a,transforms:i},u={interpolation:n,fillMode:s,fillValue:o,outputShape:r};return Ce.runKernel(wC,l,u)}const ANe=$e({transform_:NNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNe(e,t,n){j(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),j(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const s=Z(e,"a","bandPart");j(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const o=s.shape,[r,a]=s.shape.slice(-2);if(!(t<=r))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${r}).`);if(!(n<=a))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`);t<0&&(t=r),n<0&&(n=a);const i=Se(og(0,r,1,"int32"),[-1,1]),l=og(0,a,1,"int32"),u=Tt(i,l),c=Ka(Kc(u,Gt(+t,"int32")),Gc(u,Gt(-n,"int32"))),d=_s([r,a],s.dtype);return Se(Yl(Sc(Se(s,[-1,r,a])).map(f=>Mo(c,f,d))),o)}const RNe=$e({bandPart_:DNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne(e){let t;if(Array.isArray(e)){t=!1,j(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=e[0].shape[0];for(let r=1;r<e.length;++r)j(e[r].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[r].shape[0]} vs. ${o})`)}else t=!0,e=Jo(e,e.shape[0],0).map(o=>Vh(o,[0]));j(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],s=e;for(let o=0;o<e.length;++o)n.push(Ce.tidy(()=>{let r=s[o];if(o>0)for(let a=0;a<o;++a){const i=ge(Et(ge(n[a],r)),n[a]);r=Tt(r,i)}return At(r,QC(r,"euclidean"))}));return t?Yl(n,0):n}const ONe=$e({gramSchmidt_:_Ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNe(e,t=!1){if(j(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return ST(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((l,u)=>l*u),s=Sc(Se(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],r=[];s.forEach(l=>{const[u,c]=ST(l,t);o.push(u),r.push(c)});const a=Se(Yl(o,0),e.shape),i=Se(Yl(r,0),e.shape);return[a,i]}}function ST(e,t=!1){return Ce.tidy(()=>{j(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],s=e.shape[1];let o=sM(n),r=Ml(e);const a=Tm([[1]],[1,1]);let i=Ml(a);const l=n>=s?s:n;for(let u=0;u<l;++u){const c=r,d=i,f=o;[i,r,o]=Ce.tidy(()=>{const h=Bn(r,[u,u],[n-u,1]),p=QC(h),m=Bn(r,[u,u],[1,1]),g=Mo(Dr(m,0),Tm([[-1]]),Tm([[1]])),v=Tt(m,ge(g,p)),b=At(h,v);b.shape[0]===1?i=Ml(a):i=no([a,Bn(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const $=ls(At(Nn(g,v),p)),y=Bn(r,[u,0],[n-u,s]),w=ge($,i),C=Tn(i);if(u===0)r=Tt(y,Nn(w,Nn(C,y)));else{const E=Tt(y,Nn(w,Nn(C,y)));r=no([Bn(r,[0,0],[u,s]),E],0)}const k=Tn(w),S=Bn(o,[0,u],[n,o.shape[1]-u]);if(u===0)o=Tt(S,Nn(Nn(S,i),k));else{const E=Tt(S,Nn(Nn(S,i),k));o=no([Bn(o,[0,0],[n,u]),E],1)}return[i,r,o]}),dn([c,d,f])}return!t&&n>s&&(o=Bn(o,[0,0],[n,s]),r=Bn(r,[0,0],[s,s])),[o,r]})}const FNe=$e({qr_:MNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var bo;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(bo||(bo={}));function PNe(e,t,n=bo.SUM_BY_NONZERO_WEIGHTS){const s=Z(e,"losses","computeWeightedLoss");let o=null;t!=null&&(o=Z(t,"weights","computeWeightedLoss"));const r=o==null?s:ge(s,o);if(n===bo.NONE)return r;if(n===bo.SUM)return Et(r);if(n===bo.MEAN){if(o==null)return us(r);{const a=s.size/o.size,i=At(Et(r),Et(o));return a>1?At(i,Gt(a)):i}}if(n===bo.SUM_BY_NONZERO_WEIGHTS){if(o==null)return At(Et(r),Gt(s.size));{const a=ge(o,Gi(s.shape)),i=mt(Et(wf(a,Gt(0))),"float32");return At(Et(r),i)}}throw Error(`Unknown reduction: ${n}`)}const Ki=$e({computeWeightedLoss_:PNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LNe(e,t,n,s=bo.SUM_BY_NONZERO_WEIGHTS){const o=Z(e,"labels","absoluteDifference"),r=Z(t,"predictions","absoluteDifference");let a=null;n!=null&&(a=Z(n,"weights","absoluteDifference")),Nr(o.shape,r.shape,"Error in absoluteDifference: ");const i=Ds(Tt(o,r));return Ki(i,a,s)}const Oje=$e({absoluteDifference_:LNe});function BNe(e,t,n,s,o=bo.SUM_BY_NONZERO_WEIGHTS){const r=Z(e,"labels","cosineDistance"),a=Z(t,"predictions","cosineDistance");let i=null;s!=null&&(i=Z(s,"weights","cosineDistance")),Nr(r.shape,a.shape,"Error in cosineDistance: ");const l=Gt(1),u=Tt(l,Et(ge(r,a),n,!0));return Ki(u,i,o)}const Mje=$e({cosineDistance_:BNe});function zNe(e,t,n,s=bo.SUM_BY_NONZERO_WEIGHTS){let o=Z(e,"labels","hingeLoss");const r=Z(t,"predictions","hingeLoss");let a=null;n!=null&&(a=Z(n,"weights","hingeLoss")),Nr(o.shape,r.shape,"Error in hingeLoss: ");const i=Gt(1);o=Tt(ge(Gt(2),o),i);const l=Qa(Tt(i,ge(o,r)));return Ki(l,a,s)}const Fje=$e({hingeLoss_:zNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(e,t,n,s=1,o=bo.SUM_BY_NONZERO_WEIGHTS){const r=Z(e,"labels","huberLoss"),a=Z(t,"predictions","huberLoss");let i=null;n!=null&&(i=Z(n,"weights","huberLoss")),Nr(r.shape,a.shape,"Error in huberLoss: ");const l=Gt(s),u=Ds(Tt(a,r)),c=r0(u,l),d=Tt(u,c),f=st(ge(Gt(.5),Kn(c)),ge(l,d));return Ki(f,i,o)}const Pje=$e({huberLoss_:VNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WNe(e,t,n,s=1e-7,o=bo.SUM_BY_NONZERO_WEIGHTS){const r=Z(e,"labels","logLoss"),a=Z(t,"predictions","logLoss");let i=null;n!=null&&(i=Z(n,"weights","logLoss")),Nr(r.shape,a.shape,"Error in logLoss: ");const l=Gt(1),u=Gt(s),c=ls(ge(r,xr(st(a,u)))),d=ge(Tt(l,r),xr(st(Tt(l,a),u))),f=Tt(c,d);return Ki(f,i,o)}const Lje=$e({logLoss_:WNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNe(e,t,n,s=bo.SUM_BY_NONZERO_WEIGHTS){const o=Z(e,"labels","meanSquaredError"),r=Z(t,"predictions","meanSquaredError");let a=null;n!=null&&(a=Z(n,"weights","meanSquaredError")),Nr(o.shape,r.shape,"Error in meanSquaredError: ");const i=NM(o,r);return Ki(i,a,s)}const Bje=$e({meanSquaredError_:HNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UNe(e,t){const n=Z(e,"labels","sigmoidCrossEntropyWithLogits"),s=Z(t,"logits","sigmoidCrossEntropyWithLogits");Nr(n.shape,s.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=Qa(s),r=ge(s,n),a=WC(Sr(ls(Ds(s))));return st(Tt(o,r),a)}function GNe(e,t,n,s=0,o=bo.SUM_BY_NONZERO_WEIGHTS){let r=Z(e,"multiClassLabels","sigmoidCrossEntropy");const a=Z(t,"logits","sigmoidCrossEntropy");let i=null;if(n!=null&&(i=Z(n,"weights","sigmoidCrossEntropy")),Nr(r.shape,a.shape,"Error in sigmoidCrossEntropy: "),s>0){const u=Gt(s),c=Gt(1),d=Gt(.5);r=st(ge(r,Tt(c,u)),ge(d,u))}const l=UNe(r,a);return Ki(l,i,o)}const zje=$e({sigmoidCrossEntropy_:GNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return ql((o,r,a)=>{const l=lM(r,[n],!0),u=Tt(mt(r,"float32"),l);a([o,u]);const c=ls(ge(u,o));return{value:Et(c,[n]),gradFunc:(h,p)=>{const[m,g]=p,v=hs(h.shape,[n]);return[ge(Se(h,v),Tt(mt(m,"float32"),Sr(g))),ge(Se(h,v),Tt(Sr(g),mt(m,"float32")))]}}})(e,t)}function jNe(e,t,n,s=0,o=bo.SUM_BY_NONZERO_WEIGHTS){let r=Z(e,"onehotLabels","softmaxCrossEntropy");const a=Z(t,"logits","softmaxCrossEntropy");let i=null;if(n!=null&&(i=Z(n,"weights","softmaxCrossEntropy")),Nr(r.shape,a.shape,"Error in softmaxCrossEntropy: "),s>0){const u=Gt(s),c=Gt(1),d=Gt(r.shape[1]);r=st(ge(r,Tt(c,u)),At(u,d))}const l=KNe(r,a);return Ki(l,i,o)}const Vje=$e({softmaxCrossEntropy_:jNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(e,t,n,s){const o=Z(e,"indices","sparseFillEmptyRows","int32"),r=Z(t,"values","sparseFillEmptyRows"),a=Z(n,"denseShape","sparseFillEmptyRows","int32"),i=Z(s,"defaultValue","sparseFillEmptyRows",r.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(r.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${r.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==0)throw new Error(`Default value should be a scalar but received shape ${i.shape}`);const l={indices:o,values:r,denseShape:a,defaultValue:i},u=Ce.runKernel(cC,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const Wje=$e({sparseFillEmptyRows_:qNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XNe(e,t,n){const s=Z(e,"inputIndices","sparseReshape","int32"),o=Z(t,"inputShape","sparseReshape","int32"),r=Z(n,"newShape","sparseReshape","int32");if(s.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${s.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(r.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${r.shape}`);const a={inputIndices:s,inputShape:o,newShape:r},i=Ce.runKernel(dC,a);return{outputIndices:i[0],outputShape:i[1]}}const Hje=$e({sparseReshape_:XNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(e,t,n){const s=Z(e,"data","sparseSegmentMean"),o=Z(t,"indices","sparseSegmentMean","int32"),r=Z(n,"segmentIds","sparseSegmentMean","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(r.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${r.shape}`);const a={data:s,indices:o,segmentIds:r};return Ce.runKernel(fC,a)}const Uje=$e({sparseSegmentMean_:YNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe(e,t,n){const s=Z(e,"data","sparseSegmentSum"),o=Z(t,"indices","sparseSegmentSum","int32"),r=Z(n,"segmentIds","sparseSegmentSum","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(r.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${r.shape}`);const a={data:s,indices:o,segmentIds:r};return Ce.runKernel(hC,a)}const Gje=$e({sparseSegmentSum_:ZNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JNe(e,t,n,s,o,r,a,i){const l=Z(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=Z(t,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:s,leftPad:o,rightPad:r,padWidth:a,preserveShortSequences:i},d={data:l,dataSplits:u},f=Ce.runKernel(gC,d,c);return{nGrams:f[0],nGramsSplits:f[1]}}const Kje=$e({stringNGrams_:JNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(e,t,n=!0){const s=Z(e,"input","stringSplit","string"),o=Z(t,"delimiter","stringSplit","string");if(s.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${s.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const r={skipEmpty:n},a={input:s,delimiter:o},i=Ce.runKernel(vC,a,r);return{indices:i[0],values:i[1],shape:i[2]}}const jje=$e({stringSplit_:QNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAe(e,t){const n=Z(e,"input","stringToHashBucketFast","string"),s={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return Ce.runKernel(bC,o,s)}const qje=$e({stringToHashBucketFast_:eAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xje={hammingWindow:jTe,hannWindow:MM,frame:FM,stft:ZTe},Fp={flipLeftRight:tNe,grayscaleToRGB:sNe,resizeNearestNeighbor:LM,resizeBilinear:PM,rotateWithOffset:rNe,cropAndResize:QTe,nonMaxSuppression:iNe,nonMaxSuppressionAsync:mNe,nonMaxSuppressionWithScore:vNe,nonMaxSuppressionWithScoreAsync:yNe,nonMaxSuppressionPadded:$Ne,nonMaxSuppressionPaddedAsync:kNe,threshold:TNe,transform:ANe},tAe={bandPart:RNe,gramSchmidt:ONe,qr:FNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ji extends Hc{minimize(t,n=!1,s){const{value:o,grads:r}=this.computeGradients(t,s);if(s!=null){const a=s.map(i=>({name:i.name,tensor:r[i.name]}));this.applyGradients(a)}else this.applyGradients(r);return dn(r),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return XIe(t,n)}dispose(){this.iterations_!=null&&dn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Gt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(ji,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u2 extends ji{constructor(t,n,s=null){super();this.learningRate=t,this.rho=n,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=Ce.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Ce.registeredVariables[s],a=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accum_grad`,variable:Me(()=>$n(r).variable(a))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${s}/accum_var`,variable:Me(()=>$n(r).variable(a))});const i=Array.isArray(t)?t[o].tensor:t[s];if(i==null)return;const l=this.accumulatedGrads[o].variable,u=this.accumulatedUpdates[o].variable;Me(()=>{const c=st(ge(l,this.rho),ge(Kn(i),1-this.rho)),d=ge(At(co(st(u,this.epsilon)),co(st(l,this.epsilon))),i),f=st(ge(u,this.rho),ge(Kn(d),1-this.rho));l.assign(c),u.assign(f);const h=st(ge(d,-this.learningRate),r);r.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(dn(this.accumulatedGrads.map(t=>t.variable)),dn(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,s=!1;this.accumulatedGrads=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedUpdates=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}u2.className="Adadelta";et(u2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c2 extends ji{constructor(t,n=.1){super();this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Ce.registeredVariables[s];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accumulator`,variable:Me(()=>s0(r.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(t)?t[o].tensor:t[s];if(a==null)return;const i=this.accumulatedGrads[o].variable;Me(()=>{const l=st(i,Kn(a));i.assign(l);const u=st(ge(At(a,co(st(l,Ce.backend.epsilon()))),-this.learningRate),r);r.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&dn(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}c2.className="Adagrad";et(c2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d2 extends ji{constructor(t,n,s,o=null){super();this.learningRate=t,this.beta1=n,this.beta2=s,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Me(()=>{this.accBeta1=Gt(n).variable(),this.accBeta2=Gt(s).variable()}),o==null&&(this.epsilon=Ce.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);Me(()=>{const s=Tt(1,this.accBeta1),o=Tt(1,this.accBeta2);n.forEach((r,a)=>{const i=Ce.registeredVariables[r],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${r}/m`,variable:Me(()=>$n(i).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${r}/v`,variable:Me(()=>$n(i).variable(l))});const u=Array.isArray(t)?t[a].tensor:t[r];if(u==null)return;const c=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,f=st(ge(c,this.beta1),ge(u,1-this.beta1)),h=st(ge(d,this.beta2),ge(Kn(u),1-this.beta2)),p=At(f,s),m=At(h,o);c.assign(f),d.assign(h);const g=st(ge(At(p,st(co(m),this.epsilon)),-this.learningRate),i);i.assign(g)}),this.accBeta1.assign(ge(this.accBeta1,this.beta1)),this.accBeta2.assign(ge(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&dn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&dn(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),Me(()=>{this.accBeta1.assign(kc(this.beta1,this.iterations_+1)),this.accBeta2.assign(kc(this.beta2,this.iterations_+1))});const n=t.length/2,s=!1;this.accumulatedFirstMoment=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}d2.className="Adam";et(d2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class f2 extends ji{constructor(t,n,s,o=null,r=0){super();this.learningRate=t,this.beta1=n,this.beta2=s,this.epsilon=o,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Me(()=>{this.iteration=Gt(0).variable(),this.accBeta1=Gt(n).variable()}),o==null&&(this.epsilon=Ce.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);Me(()=>{const s=Tt(1,this.accBeta1),o=At(-this.learningRate,st(ge(this.iteration,this.decay),1));n.forEach((r,a)=>{const i=Ce.registeredVariables[r],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${r}/m`,variable:$n(i).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${r}/v`,variable:$n(i).variable(l)});const u=Array.isArray(t)?t[a].tensor:t[r];if(u==null)return;const c=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,f=st(ge(c,this.beta1),ge(u,1-this.beta1)),h=ge(d,this.beta2),p=Ds(u),m=Ui(h,p);c.assign(f),d.assign(m);const g=st(ge(At(o,s),At(f,st(m,this.epsilon))),i);i.assign(g)}),this.iteration.assign(st(this.iteration,1)),this.accBeta1.assign(ge(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&dn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&dn(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}f2.className="Adamax";et(f2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i0 extends ji{constructor(t){super();this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Array.isArray(t)?t[o].tensor:t[s];if(r==null)return;const a=Ce.registeredVariables[s];Me(()=>{const i=st(ge(this.c,r),a);a.assign(i)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=ka(Gt(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}i0.className="SGD";et(i0);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h2 extends i0{constructor(t,n,s=!1){super(t);this.learningRate=t,this.momentum=n,this.useNesterov=s,this.accumulations=[],this.m=Gt(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Ce.registeredVariables[s];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${s}/momentum`,variable:Me(()=>$n(r).variable(!1))});const a=this.accumulations[o].variable,i=Array.isArray(t)?t[o].tensor:t[s];i!=null&&Me(()=>{let l;const u=st(ge(this.m,a),i);this.useNesterov?l=st(ge(this.c,st(i,ge(u,this.m))),r):l=st(ge(this.c,u),r),a.assign(u),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&dn(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}h2.className="Momentum";et(h2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p2 extends ji{constructor(t,n=.9,s=0,o=null,r=!1){super();if(this.learningRate=t,this.decay=n,this.momentum=s,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,o==null&&(this.epsilon=Ce.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Ce.registeredVariables[s],a=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${s}/rms`,variable:Me(()=>$n(r).variable(a))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${s}/momentum`,variable:Me(()=>$n(r).variable(a))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${s}/mg`,variable:Me(()=>$n(r).variable(a))});const i=Array.isArray(t)?t[o].tensor:t[s];if(i==null)return;const l=this.accumulatedMeanSquares[o].variable,u=this.accumulatedMoments[o].variable;Me(()=>{const c=st(ge(l,this.decay),ge(Kn(i),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=st(ge(d,this.decay),ge(i,1-this.decay)),h=At(ge(i,this.learningRate),co(Tt(c,st(Kn(f),this.epsilon)))),p=st(ge(u,this.momentum),h);l.assign(c),d.assign(f),u.assign(p);const m=Tt(r,p);r.assign(m)}else{const d=st(ge(l,this.decay),ge(Kn(i),1-this.decay)),f=st(ge(u,this.momentum),At(ge(i,this.learningRate),co(st(d,this.epsilon))));l.assign(d),u.assign(f);const h=Tt(r,f);r.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&dn(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&dn(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&dn(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,s=!1;this.accumulatedMeanSquares=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedMoments=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}p2.className="RMSProp";et(p2);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rl{static sgd(t){return new i0(t)}static momentum(t,n,s=!1){return new h2(t,n,s)}static rmsprop(t,n=.9,s=0,o=null,r=!1){return new p2(t,n,s,o,r)}static adam(t=.001,n=.9,s=.999,o=null){return new d2(t,n,s,o)}static adadelta(t=.001,n=.95,s=null){return new u2(t,n,s)}static adamax(t=.002,n=.9,s=.999,o=null,r=0){return new f2(t,n,s,o,r)}static adagrad(t,n=.1){return new c2(t,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Au={sgd:rl.sgd,momentum:rl.momentum,adadelta:rl.adadelta,adagrad:rl.adagrad,rmsprop:rl.rmsprop,adamax:rl.adamax,adam:rl.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nAe=(()=>typeof requestAnimationFrame!="undefined"?requestAnimationFrame:typeof setImmediate!="undefined"?setImmediate:e=>e())();function sAe(){return new Promise(e=>nAe(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2(e,t){const n=e[0].length;e.forEach((o,r)=>{j(o.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same as the rank of the rest (${n})`)}),j(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const s=e[0];e.forEach((o,r)=>{for(let a=0;a<n;a++)j(a===t||o[a]===s[a],()=>`Error in concat${n}D: Shape of tensors[${r}] (${o}) does not match the shape of the rest (${s}) along the non-concatenated axis ${r}.`)})}function ya(e,t){const n=e[0].slice();for(let s=1;s<e.length;s++)n[t]+=e[s][t];return n}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g2=30;function l0(e){return e<=g2?e:y1(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2(e,t,n){const s=n*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[s,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hh(e,t,n,s=!0){let o=[];if(s)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const r=t.length;for(let a=0;a<r;++a)o=o.concat([e[a+1]/t[a],t[a]]);o=o.concat(e.slice(r+1))}return o}function Uh(e,t,n=!0){const s=[];if(n){s.push(t);for(let o=t+1;o<e;++o)o<=2*t?(s.push(o),s.push(o-(t+1))):s.push(o)}else{const o=[],r=[];for(let a=1;a<e;++a)a>=t*2+1||a%2===1?r.push(a):o.push(a);s.push(...o),s.push(0),s.push(...r)}return s}function Gh(e,t,n,s=!0){const o=[];s?o.push(e[0]/n):o.push(e[0]*n);for(let r=1;r<e.length;++r)r<=t.length?s?o.push(t[r-1]*e[r]):o.push(e[r]/t[r-1]):o.push(e[r]);return o}function b2(e,t){const n=[0];for(let s=0;s<t;++s)n.push(e[s][0]);return n}function y2(e,t,n){const s=e.slice(0,1);for(let o=0;o<n;++o)s.push(e[o+1]-t[o][0]-t[o][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u0=1.7580993408473768,c0=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2=.3275911,$2=.254829592,C2=-.284496736,k2=1.421413741,S2=-1.453152027,x2=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ja(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let s=0;s<n.length;s+=2)n[s]=e[s/2],n[s+1]=t[s/2];return n}function BM(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let s=0;s<e.length;s+=2)t[s/2]=e[s],n[s/2]=e[s+1];return{real:t,imag:n}}function zM(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),s=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:n,imag:s}}function VM(e){const t=Math.floor(e.length/4),n=new Float32Array(t),s=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:n,imag:s}}function I2(e,t){const n=e[t*2],s=e[t*2+1];return{real:n,imag:s}}function WM(e,t,n,s){e[s*2]=t,e[s*2+1]=n}function HM(e,t){const n=new Float32Array(e/2),s=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const r=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(r),s[o]=Math.sin(r)}return{real:n,imag:s}}function UM(e,t,n){const s=(n?2:-2)*Math.PI*(e/t),o=Math.cos(s),r=Math.sin(s);return{real:o,imag:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ub="->",oAe=/->/g,xT=",",IT="...";function E2(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(oAe,"").length)/Ub.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Ub}").`);const[s,o]=e.split(Ub);j(s.indexOf(IT)===-1,()=>`The ellipsis notation ("${IT}") is not supported yet.`);const r=s.split(xT),a=r.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let f=0;f<o.length;++f){const h=o[f];if(!r.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);i.indexOf(h)===-1&&i.push(h)}for(let f=0;f<s.length;++f){const h=s[f];i.indexOf(h)===-1&&h!==xT&&i.push(h)}const l=new Array(r.length);for(let f=0;f<a;++f){if(new Set(r[f].split("")).size!==r[f].length)throw new Error(`Found duplicate axes in input component ${r[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<r[f].length;++h)l[f].push(i.indexOf(r[f][h]))}const u=i.length,c=o.length,d=[];for(let f=c;f<u;++f)d.push(f);return{allDims:i,summedDims:d,idDims:l}}function T2(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;const s=[];for(let o=0;o<e;++o)n[o]===-1&&s.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:s}}function N2(e,t,n){const s=new Array(e);for(let o=0;o<n.length;++o){const r=n[o].shape;for(let a=0;a<t[o].length;++a)s[t[o][a]]===void 0?s[t[o][a]]=r[a]:j(s[t[o][a]]===r[a],()=>`Expected dimension ${s[t[o][a]]} at axis ${a} of input shaped ${JSON.stringify(r)}, but got dimension ${r[a]}`)}}function A2(e,t){const n=e,s=[];let o=0;e.length===0&&n.push(-1),o=e.length+1;for(let a=0;a<o;++a)s.push([]);const r=[];for(let a=0;a<n.length;++a){const i=n[a],l=rAe(t,i);for(const u of l)r.indexOf(u)===-1&&(s[a].push(u),r.push(u))}return{path:n,steps:s}}function D2(e){return e.every((t,n)=>t===n)}function rAe(e,t){const n=[];for(let s=0;s<e.length;++s)(e[s].length===0||e[s].indexOf(t)!==-1||t===-1)&&n.push(s);return n}function R2(e,t,n=0){let s=[];if(typeof t=="number")j(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),s=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce((a,i)=>(i===-1&&(a+=1),a),0);j(o<=1,()=>"There should be only one negative value in split array.");const r=t.indexOf(-1);if(r!==-1){const a=t.reduce((i,l)=>l>0?i+l:i);t[r]=e.shape[n]-a}j(e.shape[n]===t.reduce((a,i)=>a+i),()=>"The sum of sizes must match the size of the axis dimension."),s=t}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GM(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function KM(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function jM(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qM(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function XM(e,t){return`size ${e} must be non-negative, not ${t}`}function YM(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function ZM(e,t){const n=Ue(e),s=Ue(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${e} outputShape= ${t}`}function JM(e,t){const n=Ue(e),s=Ue(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${s}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1(){return"segment ids must be >= 0"}function QM(){return"segment ids are not increasing"}function eF(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function tF(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nF(e,t){let n=!1,s;for(e<=g2?(s=e,n=!0):s=y1(e,Math.floor(Math.sqrt(e)));!n;)s>t||s===e?n=!0:s=y1(e,s+1);return s}function sF(e,t,n){const s=[],o=e.length;for(let r=0;r<o;r++)r!==t?s.push(e[r]):s.push(n);return s}function _2(e,t,n,s){const o=t.shape.length,r=e.shape.length;if(s!==0&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>r)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${r}).`);if(n<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${n}).`);for(let d=0;d<s;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const a=e.shape[n],i=[];let l=1,u=1,c=1;for(let d=0;d<s;++d)i.push(e.shape[d]),l*=e.shape[d];for(let d=s;d<n;d++)i.push(e.shape[d]),u*=e.shape[d];for(let d=s;d<o;d++)i.push(t.shape[d]);for(let d=n+1;d<r;d++)i.push(e.shape[d]),c*=e.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:a,outputShape:i}}var aAe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",segOpComputeOptimalWindowSize:nF,computeOutShape:sF,collectGatherOpShapeInfo:_2});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zl(e){try{return e.map(t=>wc(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function oF(e){return e.map(t=>Ci(t))}var iAe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",slice_util:GSe,segment_util:aAe,fromUint8ToStringArray:Zl,fromStringArrayToUint8:oF,upcastType:tr,axesAreInnerMostDims:HC,combineLocations:iM,computeOutAndReduceShapes:Ps,expandShapeToKeepDim:hs,assertAxesAreInnerMostDims:js,getAxesPermutation:ps,getUndoAxesPermutation:jc,getInnerMostAxes:ys,getBroadcastDims:Cc,getReductionAxes:Ns,assertAndGetBroadcastShape:tn,assertParamsConsistent:m2,computeOutShape:ya,computeDilation2DInfo:Bh,computePool2DInfo:Ar,computePool3DInfo:Za,computeConv2DInfo:Ks,computeConv3DInfo:Hi,computeDefaultPad:_C,tupleValuesAreOne:Kl,eitherStridesOrDilationsAreOne:ao,convertConv2DDataFormat:Ja,checkPadOnDimRoundingMode:$o,getFusedDyActivation:t2,getFusedBiasGradient:n2,applyActivation:s2,shouldFuse:o2,PARALLELIZE_THRESHOLD:g2,computeOptimalWindowSize:l0,getImageCenter:v2,getReshaped:Hh,getPermuted:Uh,getReshapedPermuted:Gh,getSliceBeginCoords:b2,getSliceSize:y2,prepareAndValidate:EC,validateUpdateShape:zO,validateInput:zSe,calculateShapes:Lh,SELU_SCALEALPHA:u0,SELU_SCALE:c0,ERF_P:w2,ERF_A1:$2,ERF_A2:C2,ERF_A3:k2,ERF_A4:S2,ERF_A5:x2,warn:qo,log:Dke,mergeRealAndImagArrays:ja,splitRealAndImagArrays:BM,complexWithEvenIndex:zM,complexWithOddIndex:VM,getComplexWithIndex:I2,assignToTypedArray:WM,exponents:HM,exponent:UM,decodeEinsumEquation:E2,getEinsumPermutation:T2,checkEinsumDimSizes:N2,getEinsumComputePath:A2,isIdentityPermutation:D2,prepareSplitSize:R2,getSparseFillEmptyRowsIndicesDenseShapeMismatch:GM,getSparseFillEmptyRowsNegativeIndexErrorMessage:KM,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:jM,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:qM,getSparseReshapeNegativeOutputDimErrorMessage:XM,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:YM,getSparseReshapeInputOutputMultipleErrorMessage:ZM,getSparseReshapeInputOutputMismatchErrorMessage:JM,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:z1,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:QM,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:eF,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:tF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rF={kernelName:Yg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(e,Wh(mt(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lAe={kernelName:Hf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=Kn(mt(n,"float32")),o=co(Tt(Gt(1),s));return ls(At(e,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uAe={kernelName:Uf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=co(Tt(Kn(mt(n,"float32")),1));return At(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAe={kernelName:Wc,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=tn(n.shape,s.shape);return{a:()=>{let i=e;const l=Ns(n.shape,o);return l.length>0&&(i=Et(i,l)),Se(i,n.shape)},b:()=>{let i=e;const l=Ns(s.shape,o);return l.length>0&&(i=Et(i,l)),Se(i,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dAe={kernelName:_$,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((s,o)=>{n[o]=()=>e.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fAe={kernelName:Zg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>$n(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hAe={kernelName:Jg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>$n(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pAe={kernelName:Gf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>At(e,co(Tt(Gt(1),Kn(mt(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe={kernelName:Kf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=co(st(Gt(1),Kn(mt(n,"float32"))));return At(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe={kernelName:Xf,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=tn(n.shape,s.shape);return{a:()=>{const i=st(Kn(n),Kn(s));let l=ge(e,At(s,i));const u=Ns(n.shape,o);return u.length>0&&(l=Et(l,u)),Se(l,n.shape)},b:()=>{const i=st(Kn(n),Kn(s));let l=ls(ge(e,At(n,i)));const u=Ns(s.shape,o);return u.length>0&&(l=Et(l,u)),Se(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe={kernelName:jf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>At(e,st(Kn(mt(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe={kernelName:qf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>At(e,Tt(Gt(1),Kn(mt(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yAe(e,t,n,s,o,r){const a=Z(e,"dy","avgPool3dGrad"),i=Z(t,"input","avgPool3dGrad");let l=a,u=i,c=!1;i.rank===4&&(c=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=Se(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),j(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),j(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),$o("avgPool3dGrad",o,r);const d={dy:l,input:u},f={filterSize:n,strides:s,pad:o,dimRoundingMode:r},h=Ce.runKernel(P$,d,f);return c?Se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const wAe=$e({avgPool3dGrad_:yAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ae={kernelName:ev,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{filterSize:o,strides:r,pad:a,dimRoundingMode:i}=n;return{x:()=>wAe(e,s,o,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(e,t,n,s,o){const r=Z(e,"dy","avgPoolGrad"),a=Z(t,"input","avgPoolGrad");j(a.rank===r.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${r.rank})`);let i=a,l=r,u=!1;a.rank===3&&(u=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]])),j(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),j(i.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${i.rank}.`);const c={dy:l,input:i},d={filterSize:n,strides:s,pad:o},f=Ce.runKernel(F$,c,d);return u?Se(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const kAe=$e({avgPoolGrad_:CAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SAe={kernelName:Qg,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{filterSize:o,strides:r,pad:a}=n;return{x:()=>kAe(e,s,o,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xAe={kernelName:tv,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[s,o]=t,{transposeA:r,transposeB:a}=n;return!r&&!a?{a:()=>Nn(e,o,!1,!0),b:()=>Nn(s,e,!0,!1)}:!r&&a?{a:()=>Nn(e,o,!1,!1),b:()=>Nn(e,s,!0,!1)}:r&&!a?{a:()=>Nn(o,e,!1,!0),b:()=>Nn(s,e,!1,!1)}:{a:()=>Nn(o,e,!0,!0),b:()=>Nn(e,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe={kernelName:nv,gradFunc:(e,t,n)=>{const{blockShape:s,crops:o}=n;return{x:()=>qC(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAe={kernelName:Tke,gradFunc:(e,t,n)=>{const s=n,o=s.inputShape,r=s.shape,a=Array.from(r);for(let l=o.length-1;l>=0;l--)if(o[l]===r[l])a[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);const i=[];for(let l=0;l<a.length;l++)a[l]>1&&i.push(l);return{x:()=>Et(e,i,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe={kernelName:Yf,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAe={kernelName:Zf,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe={kernelName:Jf,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{clipValueMin:o,clipValueMax:r}=n;return{x:()=>Mo(Ka(Gc(s,o),Kc(s,r)),e,$n(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DAe={kernelName:sv,inputsToSave:["x"],gradFunc:rF.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe={kernelName:ov,saveAllInputs:!0,gradFunc:(e,t,n)=>{const s=t.map(l=>l.shape),{axis:o}=n,r=an(o,t[0].shape)[0],a=s.map(l=>l[r]);return Jo(e,a,r).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae={kernelName:rv,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,{dilations:r,strides:a,pad:i,dataFormat:l}=n;return j(Kl(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>PC(s.shape,e,o,a,i,l),filter:()=>e2(s,e,o.shape,a,i,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OAe={kernelName:av,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,{strides:r,pad:a,dataFormat:i,dimRoundingMode:l}=n;return{dy:()=>jl(e,o,r,a,i,1,l),filter:()=>e2(e,s,o.shape,r,a,i,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(e,t,n,s,o){let r=e;e.rank===4&&(r=Se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let a=t;a.rank===4&&(a=Se(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),j(r.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),j(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),j(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),j(r.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${n[3]}.`),j(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const i={x:r,dy:a},l={strides:s,pad:o,filterShape:n};return Ce.runKernel(V$,i,l)}const FAe=$e({conv3DBackpropFilter_:MAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PAe={kernelName:iv,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:s,strides:o,pad:r}=n;j(Kl(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[a,i]=t;return{x:()=>eM(a.shape,e,i,o,r),filter:()=>FAe(a,e,i.shape,o,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAe={kernelName:Qf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(ls(SM(mt(n,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe={kernelName:eh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(xM(mt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zAe={kernelName:lv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{axis:o,exclusive:r,reverse:a}=n;return{x:()=>{const i=ps([o],s.rank);let l=nM(e,o,r,!a);return i!=null&&(l=Tn(l,i)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VAe={kernelName:uv,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:s,strides:o,pad:r,dimRoundingMode:a}=n,i=s==null?[1,1]:s;j(Kl(i),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[l,u]=t;return j(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),j(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),j(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),j(ao(o,i),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${i}'.`),$o("depthwiseConv2d",r,a),{x:()=>UTe(l.shape,e,u,o,r,i,a),filter:()=>WTe(l,e,u.shape,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WAe={kernelName:cv,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,r={x:s,filter:o,dy:e},a={x:s,filter:o,dy:e};return{x:()=>Ce.runKernel(w1,r,n),filter:()=>Ce.runKernel($1,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe={kernelName:nh,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,s={dy:e,y:n};return{x:()=>Ce.runKernel(j$,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UAe={kernelName:sh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,s=ge(Sr(ls(Kn(n))),2/Math.sqrt(Math.PI));return{x:()=>ge(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAe={kernelName:oh,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(e,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAe={kernelName:fv,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>Se(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jAe={kernelName:rh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(e,Sr(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qAe={kernelName:ah,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XAe={kernelName:ih,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=tn(n.shape,s.shape);return{a:()=>{const i=At(e,mt(s,"float32")),l=Ns(n.shape,o);return l.length>0?Se(Et(i,l),n.shape):i},b:()=>{let i=ge(e,mt(n,"float32"));const l=Ns(s.shape,o);l.length>0&&(i=Se(Et(i,l),s.shape));const u=Kn(s);return ls(At(i,mt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YAe={kernelName:hv,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:s}=n,[o,r,a,i]=t,l=i==null?Gt(1):i,u=Ns(r.shape,o.shape),c=[];if(r.rank===1){for(let y=0;y<o.shape.length-1;++y)c.push(o.shape[y]);c.push(1)}const d=Tt(o,r),f=ge(e,l),h=$M(st(a,Gt(s))),p=ge(ge(ge(h,h),h),Gt(-.5));return{x:()=>r.rank===1?Se(ge(ge(e,Ur(Se(h,[1,1,1,r.shape[0]]),c)),l),o.shape):Se(ge(ge(e,h),l),o.shape),mean:()=>{let y=ge(ge(h,Gt(-1)),f);return r.rank===1&&(y=Et(y,u)),Se(y,r.shape)},variance:()=>{let y=ge(ge(p,d),f);return r.rank===1&&(y=Et(y,u)),Se(y,r.shape)},scale:()=>{const y=ge(d,h);let w=ge(e,y);return r.rank===1&&(w=Et(w,u)),Se(w,r.shape)},offset:()=>{let y=e;return r.rank===1&&(y=Et(y,u)),Se(y,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAe={kernelName:pv,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[s,o]=t,{axis:r}=n,a=an(r,s.shape)[0];return{x:()=>{const l=s.shape,u=o.size,c=l.slice(0,a),d=c.length,f=l.slice(r,l.length).slice(1),h=f.length,p=ET(0,d),m=ET(d+1,d+1+h),g=TT([c,[u],f]),v=Se(e,g),b=Se(o,[u]),$=TT([[d],p,m]),y=Tn(v,$);let w=DM(y,b,s.shape[a]);const C=jc($);return w=Tn(w,C),w},indices:()=>o}}};function ET(e,t){const n=[];for(let s=e;s<t;++s)n.push(s);return n}function TT(e){const t=[];for(let n=0;n<e.length;++n)for(let s=0;s<e[n].length;++s)t.push(e[n][s]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAe={kernelName:lh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>$n(n),b:()=>$n(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAe={kernelName:uh,gradFunc:e=>({x:()=>mt(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eDe={kernelName:ch,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tDe={kernelName:dh,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nDe={kernelName:fh,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sDe={kernelName:gv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{alpha:o}=n,r=Dr(s,0);return{x:()=>Mo(r,e,ge(e,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oDe={kernelName:ph,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>At(e,st(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rDe={kernelName:hh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>At(e,mt(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe={kernelName:Nke,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s]=t,{axis:o}=n;return{logits:()=>{const a=Sr(s);return Tt(e,ge(Et(e,o,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(e,t,n,s=5,o=1,r=1,a=.5){const i={x:e,y:t,dy:n},l={depthRadius:s,bias:o,alpha:r,beta:a};return Ce.runKernel(Q$,i,l)}const lDe=$e({localResponseNormalizationBackprop_:iDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uDe={kernelName:Cv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{depthRadius:r,bias:a,alpha:i,beta:l}=n;return{x:()=>lDe(s,o,e,r,a,i,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aF(e,t,n,s){return t.rank<n.rank&&(t=Se(t,hs(t.shape,s))),e.rank<n.rank&&(e=Se(e,hs(e.shape,s))),{x:()=>ge(e,mt(Sa(n,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NT={kernelName:kv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const s=n,{reductionIndices:o}=s,r=t[0],a=t[1],i=an(o,r.shape),l=aF(e,a,r,i);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe={kernelName:mh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>ge(e,mt(Gc(n,s),"float32")),b:()=>ge(e,mt(rM(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dDe(e,t,n,s,o,r,a){const i=Z(e,"dy","maxPool3dGrad"),l=Z(t,"input","maxPool3dGrad"),u=Z(n,"output","maxPool3dGrad");let c=i,d=l,f=u,h=!1;l.rank===4&&(h=!0,c=Se(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),d=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=Se(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),j(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),j(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),j(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),$o("maxPool3dGrad",r,a);const p={dy:c,input:d,output:f},m={filterSize:s,strides:o,pad:r,dimRoundingMode:a},g=Ce.runKernel(tC,p,m);return h?Se(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const fDe=$e({maxPool3dGrad_:dDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hDe={kernelName:xv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{filterSize:r,strides:a,pad:i,dimRoundingMode:l}=n;return{x:()=>fDe(e,s,o,r,a,i,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(e,t,n,s,o,r,a){const i=Z(e,"dy","maxPoolGrad"),l=Z(t,"input","maxPoolGrad"),u=Z(n,"output","maxPoolGrad");j(l.rank===i.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${i.rank})`),j(i.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${i.rank}.`),j(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),$o("maxPoolGrad",r,a);const c={dy:i,input:l,output:u},d={filterSize:s,strides:o,pad:r,dimRoundingMode:a};return Ce.runKernel(eC,c,d)}const mDe=$e({maxPoolGrad_:pDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gDe={kernelName:Sv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{filterSize:r,strides:a,pad:i}=n;return{x:()=>mDe(e,s,o,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vDe={kernelName:Iv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{axis:o}=n,r=an(o,s.shape),i=Ps(s.shape,r)[1],l=Ue(i);return{x:()=>{const c=s.shape.slice();r.forEach(h=>{c[h]=1});const d=Se(e,c);return At(ge(d,Gi(s.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bDe={kernelName:Ev,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const s=n,{axis:o}=s,[r,a]=t,i=an(o,r.shape),l=aF(e,a,r,i);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yDe={kernelName:gh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>ge(e,mt(Kc(n,s),"float32")),b:()=>ge(e,mt(Dr(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wDe={kernelName:Tv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const s=t[0],{paddings:o}=n,r=o.map(a=>a[0]);return{x:()=>Bn(e,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $De={kernelName:vh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=tn(n.shape,s.shape);return{a:()=>{const i=Ns(n.shape,o);return i.length>0?Se(Et(e,i),n.shape):e},b:()=>{const i=ge(e,ls(o0(At(n,s)))),l=Ns(s.shape,o);return l.length>0?Se(Et(i,l),s.shape):i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CDe={kernelName:bh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=tn(n.shape,s.shape);return{a:()=>{const i=ge(e,mt(s,"float32")),l=Ns(n.shape,o);return l.length>0?Se(Et(i,l),n.shape):i},b:()=>{const i=ge(e,mt(n,"float32")),l=Ns(s.shape,o);return l.length>0?Se(Et(i,l),s.shape):i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kDe={kernelName:Nv,gradFunc:e=>({x:()=>ls(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SDe={kernelName:Rv,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>_s(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xDe={kernelName:Dv,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IDe={kernelName:_v,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:s}=n;return Sc(e,s).map(r=>()=>r)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AT={kernelName:Ov,inputsToSave:["x"],gradFunc:(e,t,n)=>{const s=t[0],{paddings:o}=n,r=o.map(a=>a[0]);return{x:()=>Bn(e,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EDe={kernelName:yh,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,s,o]=t,r=n,a=s,i=tn(r.shape,a.shape);return{a:()=>{const c=mt(a,"float32");let d=ge(e,ge(c,kc(r,Tt(c,Gt(1)))));const f=Ns(r.shape,i);return f.length>0&&(d=Et(d,f)),Se(d,r.shape)},b:()=>{const c=Dr(r,0),d=Mo(c,xr(r),$n(r));let f=ge(e,ge(o,d));const h=Ns(a.shape,i);return h.length>0&&(f=Et(f,h)),Se(f,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TDe={kernelName:Mv,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,s]=t,o=Dr(n,0);return{x:()=>Mo(o,e,ge(e,s)),alpha:()=>{let r=Mo(o,$n(e),ge(e,n));const a=Ns(s.shape,e.shape);return a.length>0&&(r=Et(r,a)),Se(r,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NDe={kernelName:th,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=tn(n.shape,s.shape);return{a:()=>{const i=At(e,mt(s,"float32")),l=Ns(n.shape,o);return l.length>0?Se(Et(i,l),n.shape):i},b:()=>{let i=ge(e,mt(n,"float32"));const l=Ns(s.shape,o);l.length>0&&(i=Se(Et(i,l),s.shape));const u=Kn(s);return ls(At(i,mt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADe={kernelName:wh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>At(e,ls(Kn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DDe={kernelName:Ch,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,s=ge(Kc(n,6),Wh(n));return{x:()=>ge(e,mt(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RDe={kernelName:$h,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(e,mt(Wh(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _De={kernelName:Fv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Se(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ODe={kernelName:Lv,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[s]=t,o={dy:e,images:s};return{images:()=>Ce.runKernel(uC,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MDe={kernelName:Pv,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[s]=t,o={dy:e,images:s};return{images:()=>Ce.runKernel(lC,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FDe={kernelName:Bv,gradFunc:(e,t,n)=>{const{dims:s}=n,o=an(s,e.shape);return{x:()=>Xl(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PDe={kernelName:kh,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LDe={kernelName:Sh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ls(At(e,ge(kc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BDe={kernelName:zv,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>mt($n(n),"float32"),t:()=>ge(e,mt(n,e.dtype)),e:()=>ge(e,mt(UC(n),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zDe={kernelName:xh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=Dr(n,Gt(0)),o=Gt(u0),r=Gt(c0),a=ge(e,r),i=ge(ge(e,o),Sr(mt(n,"float32")));return Mo(s,a,i)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VDe={kernelName:Nh,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(e,ge(n,Tt(Gt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WDe={kernelName:Th,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HDe={kernelName:Ih,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(LC(mt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDe={kernelName:Eh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(tM(mt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe={kernelName:Vv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{begin:o,size:r}=n,a=s.shape,[i,l]=e0(s,o,r),u=[];for(let c=0;c<e.rank;c++)u.push([i[c],a[c]-i[c]-l[c]]);return{x:()=>jC(e,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KDe={kernelName:Gv,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s]=t,{dim:o}=n,r=!0,a=ge(e,s);return{logits:()=>Tt(a,ge(Et(a,[o],r),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jDe={kernelName:Ah,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(e,Uc(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DT={kernelName:Hv,gradFunc:(e,t,n)=>{const{blockShape:s,paddings:o}=n;return{x:()=>FC(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RT={kernelName:Uv,gradFunc:(e,t,n)=>{const{axis:s}=n;return{x:()=>no(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qDe={kernelName:Dh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>At(e,ge(co(mt(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDe={kernelName:pC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(e,ge(mt(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YDe={kernelName:Rh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=Gt(2);return{a:()=>ge(e,ge(o,Tt(n,s))),b:()=>ge(e,ge(o,Tt(s,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZDe={kernelName:Ph,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JDe={kernelName:_h,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=tn(n.shape,s.shape);return{a:()=>{let i=e;const l=Ns(n.shape,o);return l.length>0&&(i=Et(i,l)),Se(i,n.shape)},b:()=>{let i=e;const l=Ns(s.shape,o);return l.length>0&&(i=Et(i,l)),Se(ls(i),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QDe={kernelName:Wv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,o=s.shape.slice(),{axis:r}=n;an(r,s.shape).forEach(u=>{o[u]=1});const i=Se(e,o),l=ge(i,Gi(s.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe={kernelName:Oh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>At(e,Kn(LC(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRe={kernelName:Mh,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ge(Tt(Gt(1),Kn(n)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nRe={kernelName:Fh,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{reps:o}=n;return{x:()=>{let a=$n(s);if(s.rank===1)for(let i=0;i<o[0];++i)a=st(a,Bn(e,[i*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let i=0;i<o[0];++i)for(let l=0;l<o[1];++l)a=st(a,Bn(e,[i*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let i=0;i<o[0];++i)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)a=st(a,Bn(e,[i*s.shape[0],l*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let i=0;i<o[0];++i)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)for(let c=0;c<o[3];++c)a=st(a,Bn(e,[i*s.shape[0],l*s.shape[1],u*s.shape[2],c*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sRe={kernelName:Kv,gradFunc:(e,t,n)=>{const s=n,{perm:o}=s,r=jc(o);return{x:()=>Tn(e,r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oRe={kernelName:jv,gradFunc:(e,t,n)=>{const s=n,{axis:o}=s;return{value:()=>Yl(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rRe={kernelName:qv,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>aRe(e,n)}}};function aRe(e,t){const n=Ui(t,$n(t)),s=zC(e,n);let o=Gc(t,Gt(0,"int32"));const r=s.rank-o.rank;for(let i=0;i<r;++i)o=dr(o,i+1);o=Ka(o,Gi(s.shape,"bool"));const a=$n(s);return Mo(o,s,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iRe={kernelName:Xv,gradFunc:e=>({x:()=>$n(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lRe=[rF,lAe,uAe,cAe,dAe,fAe,hAe,pAe,mAe,gAe,vAe,bAe,$Ae,SAe,xAe,IAe,EAe,TAe,NAe,AAe,DAe,RAe,OAe,_Ae,PAe,LAe,BAe,zAe,VAe,WAe,NDe,HAe,UAe,GAe,KAe,jAe,XAe,qAe,YAe,ZAe,JAe,QAe,eDe,tDe,nDe,sDe,oDe,rDe,aDe,uDe,NT,NT,cDe,hDe,gDe,vDe,bDe,yDe,wDe,$De,CDe,kDe,SDe,xDe,IDe,AT,AT,EDe,TDe,ADe,DDe,RDe,_De,ODe,MDe,FDe,PDe,LDe,BDe,zDe,VDe,WDe,HDe,UDe,GDe,KDe,jDe,DT,DT,RT,RT,qDe,YDe,XDe,ZDe,JDe,QDe,eRe,tRe,nRe,sRe,oRe,rRe,iRe];for(const e of lRe)Rke(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.abs=function(){return this.throwIfDisposed(),Ds(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.acos=function(){return this.throwIfDisposed(),QSe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.acosh=function(){return this.throwIfDisposed(),txe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.add=function(e){return this.throwIfDisposed(),st(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.all=function(e,t){return this.throwIfDisposed(),ZO(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.any=function(e,t){return this.throwIfDisposed(),M1(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.argMax=function(e){return this.throwIfDisposed(),yf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.argMin=function(e){return this.throwIfDisposed(),axe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asScalar=function(){return this.throwIfDisposed(),j(this.size===1,()=>"The array must have only 1 element."),Se(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asType=function(e){return this.throwIfDisposed(),mt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as1D=function(){return this.throwIfDisposed(),Se(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as2D=function(e,t){return this.throwIfDisposed(),Se(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Se(this,[e,t,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as4D=function(e,t,n,s){return this.throwIfDisposed(),Se(this,[e,t,n,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as5D=function(e,t,n,s,o){return this.throwIfDisposed(),Se(this,[e,t,n,s,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asin=function(){return this.throwIfDisposed(),lxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asinh=function(){return this.throwIfDisposed(),cxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atan=function(){return this.throwIfDisposed(),fxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atan2=function(e){return this.throwIfDisposed(),pxe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atanh=function(){return this.throwIfDisposed(),gxe(this)};Ve().prototype.avgPool=function(e,t,n,s){return this.throwIfDisposed(),OC(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),FC(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.batchNorm=function(e,t,n,s,o){return this.throwIfDisposed(),t0(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Em(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cast=function(e){return this.throwIfDisposed(),mt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.ceil=function(){return this.throwIfDisposed(),Wxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),nr(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof gs&&(e=[e]),no([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv1d=function(e,t,n,s,o,r){return this.throwIfDisposed(),JO(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv2dTranspose=function(e,t,n,s,o){return this.throwIfDisposed(),QO(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),jl(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cos=function(){return this.throwIfDisposed(),LC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cosh=function(){return this.throwIfDisposed(),tM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),nM(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),dIe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.depthwiseConv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),BC(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.dilation2d=function(e,t,n,s,o){return this.throwIfDisposed(),pIe(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.divNoNan=function(e){return this.throwIfDisposed(),yIe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.div=function(e){return this.throwIfDisposed(),At(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.dot=function(e){return this.throwIfDisposed(),$Ie(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.elu=function(){return this.throwIfDisposed(),n0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.equal=function(e){return this.throwIfDisposed(),Sa(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.erf=function(){return this.throwIfDisposed(),SIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.exp=function(){return this.throwIfDisposed(),Sr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.expandDims=function(e){return this.throwIfDisposed(),dr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.expm1=function(){return this.throwIfDisposed(),TIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.fft=function(){return this.throwIfDisposed(),EM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.flatten=function(){return this.throwIfDisposed(),Se(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.floor=function(){return this.throwIfDisposed(),o0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.floorDiv=function(e){return this.throwIfDisposed(),YO(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.gather=function(e,t){return this.throwIfDisposed(),zC(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Gc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.greater=function(e){return this.throwIfDisposed(),Dr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.ifft=function(){return this.throwIfDisposed(),B1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.irfft=function(){return this.throwIfDisposed(),hTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isFinite=function(){return this.throwIfDisposed(),PIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isInf=function(){return this.throwIfDisposed(),BIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isNaN=function(){return this.throwIfDisposed(),VIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.leakyRelu=function(e){return this.throwIfDisposed(),VC(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.lessEqual=function(e){return this.throwIfDisposed(),Kc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.less=function(e){return this.throwIfDisposed(),rM(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.localResponseNormalization=function(e,t,n,s){return this.throwIfDisposed(),KIe(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSigmoid=function(){return this.throwIfDisposed(),QIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSoftmax=function(e){return this.throwIfDisposed(),aM(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),lM(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.log=function(){return this.throwIfDisposed(),xr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.log1p=function(){return this.throwIfDisposed(),WC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Ka(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalNot=function(){return this.throwIfDisposed(),UC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalOr=function(e){return this.throwIfDisposed(),uM(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalXor=function(e){return this.throwIfDisposed(),uEe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Nn(this,e,t,n)};Ve().prototype.maxPool=function(e,t,n,s){return this.throwIfDisposed(),GC(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.max=function(e,t){return this.throwIfDisposed(),ba(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.maximum=function(e){return this.throwIfDisposed(),Ui(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mean=function(e,t){return this.throwIfDisposed(),us(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.min=function(e,t){return this.throwIfDisposed(),P1(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.minimum=function(e){return this.throwIfDisposed(),r0(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),bEe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mod=function(e){return this.throwIfDisposed(),wEe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mul=function(e){return this.throwIfDisposed(),ge(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.neg=function(){return this.throwIfDisposed(),ls(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.norm=function(e,t,n){return this.throwIfDisposed(),QC(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.notEqual=function(e){return this.throwIfDisposed(),wf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),BO(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.onesLike=function(){return this.throwIfDisposed(),Ir(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.pad=function(e,t){return this.throwIfDisposed(),jC(this,e,t)};Ve().prototype.pool=function(e,t,n,s,o,r){return this.throwIfDisposed(),AEe(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.pow=function(e){return this.throwIfDisposed(),kc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.prelu=function(e){return this.throwIfDisposed(),XC(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.prod=function(e,t){return this.throwIfDisposed(),OEe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reciprocal=function(){return this.throwIfDisposed(),jEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.relu=function(){return this.throwIfDisposed(),Qa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.relu6=function(){return this.throwIfDisposed(),yM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Se(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reshape=function(e){return this.throwIfDisposed(),Se(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),PM(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),LM(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reverse=function(e){return this.throwIfDisposed(),Xl(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.rfft=function(){return this.throwIfDisposed(),TM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.round=function(){return this.throwIfDisposed(),wM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.rsqrt=function(){return this.throwIfDisposed(),$M(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.selu=function(){return this.throwIfDisposed(),CM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.separableConv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),kM(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sigmoid=function(){return this.throwIfDisposed(),Uc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sign=function(){return this.throwIfDisposed(),nTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sin=function(){return this.throwIfDisposed(),SM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sinh=function(){return this.throwIfDisposed(),xM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.slice=function(e,t){return this.throwIfDisposed(),Bn(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.softmax=function(e){return this.throwIfDisposed(),JC(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.softplus=function(){return this.throwIfDisposed(),zh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),qC(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.split=function(e,t){return this.throwIfDisposed(),Jo(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sqrt=function(){return this.throwIfDisposed(),co(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.square=function(){return this.throwIfDisposed(),Kn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.squaredDifference=function(e){return this.throwIfDisposed(),NM(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.squeeze=function(e){return this.throwIfDisposed(),Vh(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof gs?[this,e]:[this,...e];return Yl(n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.step=function(e){return this.throwIfDisposed(),Wh(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.stridedSlice=function(e,t,n,s,o,r,a,i){return this.throwIfDisposed(),CTe(this,e,t,n,s,o,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sub=function(e){return this.throwIfDisposed(),Tt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sum=function(e,t){return this.throwIfDisposed(),Et(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tan=function(){return this.throwIfDisposed(),STe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tanh=function(){return this.throwIfDisposed(),MC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tile=function(e){return this.throwIfDisposed(),Ur(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toBool=function(){return this.throwIfDisposed(),mt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toFloat=function(){return this.throwIfDisposed(),mt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toInt=function(){return this.throwIfDisposed(),mt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.topk=function(e,t){return this.throwIfDisposed(),ITe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.transpose=function(e){return this.throwIfDisposed(),Tn(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unique=function(e){return this.throwIfDisposed(),NTe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),DM(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unstack=function(e){return this.throwIfDisposed(),Sc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.where=function(e,t){return this.throwIfDisposed(),Mo(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.zerosLike=function(){return this.throwIfDisposed(),$n(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Gb;function xs(){return Gb==null&&(Gb=KSe().epsilon()),Gb}function ea(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class da extends Error{constructor(t){super(t);Object.setPrototypeOf(this,da.prototype)}}class vr extends Error{constructor(t){super(t);Object.setPrototypeOf(this,vr.prototype)}}class be extends Error{constructor(t){super(t);Object.setPrototypeOf(this,be.prototype)}}class Jt extends Error{constructor(t){super(t);Object.setPrototypeOf(this,Jt.prototype)}}class O2 extends Error{constructor(t){super(t);Object.setPrototypeOf(this,O2.prototype)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jl(e,t){if(Array.isArray(e)){let n=[];for(let s=0;s<t;s++)n=n.concat(e);return n}else{const n=new Array(t);return n.fill(e),n}}function fa(e,t){if(!e)throw new O2(t)}function _T(e,t){let n=0;for(const s of e)s===t&&n++;return n}function vo(e){return e.length===1?e[0]:e}function Xn(e){return Array.isArray(e)?e:[e]}function _a(e){const n=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function yl(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}let ir={};function M2(e){if(e==null)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function V1(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>V1(t));else{const t=Object.keys(e);for(const n of t){const s=e[n];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?e[n]=s.value:V1(s))}}}function Kh(e,t={},n={},s="object",o=!1){if(typeof e=="string"){const r=e;let a;if(r in n)a=n[r];else if(r in ir)a=ir[r];else if(a=t[r],a==null)throw new be(`Unknown ${s}: ${e}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const r=e;if(r.className==null||r.config==null)throw new be(`${s}: Improper config format: ${JSON.stringify(r)}.
'className' and 'config' must set.`);const a=r.className;let i,l;if(a in n?[i,l]=n[a]:a in ir?[i,l]=ir.className:a in t&&([i,l]=t[a]),i==null)throw new be(`Unknown ${s}: ${a}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(ir))u[h]=ir[h];for(const h of Object.keys(n))u[h]=n[h];const c=r.config;c.customObjects=u;const d=Object.assign({},ir);for(const h of Object.keys(n))ir[h]=n[h];V1(r.config);const f=l(i,r.config,n,o);return ir=Object.assign({},d),f}else{const u=Object.assign({},ir);for(const d of Object.keys(n))ir[d]=n[d];const c=new i(r.config);return ir=Object.assign({},u),c}}}function uRe(e,t){return e<t?-1:e>t?1:0}function Pp(e,t){return-1*uRe(e,t)}function ki(e){if(e==null)return e;const t=[];for(const n of e)t.indexOf(n)===-1&&t.push(n);return t}function cRe(e){if(e==null)throw new be(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function uu(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new be(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function F2(e,t,n=0,s=1/0){return fa(n>=0),fa(s>=n),Array.isArray(e)&&e.length>=n&&e.length<=s&&e.every(o=>typeof o===t)}function Os(e,t){Array.isArray(e)?(j(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((n,s)=>Os(n,`element ${s+1} of ${t}`))):j(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${iF(e)}.`)}function iF(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>iF(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function dRe(e,t,n){let s=n!=null?n():go(),o;return(...a)=>{const i=n!=null?n():go();return i-s<t||(s=i,o=e(...a)),o}}function lF(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function P2(e,t){return Me(()=>co(Et(ge(e,e),t,!0)))}class jh extends Hc{getConfig(){return{}}}class uF extends jh{constructor(t){super();this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Me(()=>{const n=P2(t,this.axis),s=nr(n,0,this.maxValue);return ge(t,At(s,st(xs(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}uF.className="MaxNorm";et(uF);class cF extends jh{constructor(t){super();this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Me(()=>At(t,st(xs(),P2(t,this.axis))))}getConfig(){return{axis:this.axis}}}cF.className="UnitNorm";et(cF);class dF extends jh{apply(t){return Qa(t)}}dF.className="NonNeg";et(dF);class fF extends jh{constructor(t){super();this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Me(()=>{const n=P2(t,this.axis),s=st(ge(this.rate,nr(n,this.minValue,this.maxValue)),ge(1-this.rate,n));return ge(t,At(s,st(xs(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}fF.className="MinMaxNorm";et(fF);const OT={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Es(e){return M2(e)}function MT(e,t={}){return Kh(e,hr.getMap().classNameMap,t,"constraint")}function Ts(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in OT?OT[e]:e,config:{}};return MT(n)}else return e instanceof jh?e:MT(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const fRe=["channelsFirst","channelsLast"],hRe=["nearest","bilinear"],pRe=["valid","same","causal"],mRe=["max","avg"],gRe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Du=new Map;function ms(e){uu(fRe,"DataFormat",e)}function vRe(e){uu(hRe,"InterpolationFormat",e)}function or(e){uu(pRe,"PaddingMode",e)}function hF(e){uu(mRe,"PoolMode",e)}const Gd=[],FT="/";function Pl(e,t){Gd.push(e);try{const n=t();return Gd.pop(),n}catch(n){throw Gd.pop(),n}}function bRe(){return Gd.length===0?"":Gd.join(FT)+FT}function pF(e){if(!gF(e))throw new Error("Not a valid tensor name: '"+e+"'");return bRe()+e}function mF(e){if(!gF(e))throw new Error("Not a valid tensor name: '"+e+"'");Du.has(e)||Du.set(e,0);const t=Du.get(e);if(Du.set(e,Du.get(e)+1),t>0){const n=`${e}_${t}`;return Du.set(n,1),n}else return e}const yRe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function gF(e){return!!e.match(yRe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wRe(e){return e===parseInt(e.toString(),10)}function Si(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let s=1;for(let o=t;o<n;++o)s*=e[o];return s}function xc(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const s=e[n];s<t&&(t=s)}return t}function Ti(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const s=e[n];s>t&&(t=s)}return t}function ta(e,t){if(t<e)throw new be(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let s=e;s<t;++s)n.push(s);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function d0(e,t){return mt(e,t)}function qh(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Se(e,n)}function $Re(e,t){return Me(()=>{if(e.shape.length!==2)throw new be(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const n=qh(e,1);return W1(n,[1,t,1])})}function CRe(e){const t=[Si(e.shape)];return Se(e,t)}function kRe(e){if(e.rank<=1)throw new be(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],Si(e.shape,1)];return Se(e,t)}function Ll(e,t,n){return Me(()=>{switch(e.rank){case 1:return YC(e,t,n);case 2:return IM(e,[t,0],[n,e.shape[1]]);case 3:return ZC(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return rg(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Bn(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Bn(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new be(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function Kb(e,t,n){return Me(()=>{switch(e.rank){case 1:return YC(e,t,n);case 2:return IM(e,[0,t],[e.shape[0],n]);case 3:return ZC(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return rg(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new be(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function Lp(e,t,n,s){return Me(()=>{switch(e.rank){case 1:return YC(e,t,n);case 2:switch(s){case 1:return Ll(e,t,n);case 2:return Kb(e,t,n);default:throw new be(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return Ll(e,t,n);case 2:return ZC(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Kb(e,t,n);default:throw new be(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return Ll(e,t,n);case 2:return rg(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return rg(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Kb(e,t,n);default:throw new be(`The axis is not within the rank of the tensor ${s}`)}default:throw new be(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function L2(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),no(e,t)}function PT(e,t){switch(e.rank){case 1:return Gxe([e,t]);case 2:return jxe([e,t],0);case 3:return Xxe([e,t],0);case 4:return Zxe([e,t],0);default:throw new be(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function W1(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new be(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Ur(e,t)}function f0(e,t=0,n=1,s,o){return HEe(e,t,n,s,o)}function wa(e,t,n,s){if(e.rank<2||t.rank<2)throw new Jt(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const o=e.shape.slice(-1)[0],r=t.shape.slice(-2)[0];if(o!==r)throw new Jt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return CT({a:e,b:t,transposeA:!1,transposeB:!1,bias:s?H1(e.rank,s,ea()):null,activation:n});{const o=e.shape.slice(),r=o.pop();e=Se(e,[-1,r]);const a=t.shape.slice(),i=a.pop(),l=a.pop(),u=[...a,i],c=Array.from({length:t.rank},(p,m)=>m===0?t.rank-2:m<=t.rank-2?m-1:m);t=Se(Tn(t,c),[l,-1]);const d=[...o,...u];return Se(CT({a:e,b:t,transposeA:!1,transposeB:!1,bias:s?H1(e.rank,s,ea()):null,activation:n}),d)}}function vF(e,t,n){return Me(()=>(Array.isArray(t)?t=Ao(t,"int32"):t=mt(t,"int32"),zC(e,t,n)))}function Xh(e){return ge(e,e)}function H1(e,t,n){const s=t.shape;if(t.rank!==1&&t.rank!==e)throw new be(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(n==="channelsFirst")return s.length===1?Se(t,[1,s[0],1,1,1]):Se(t,[1,s[3],s[0],s[1],s[2]]);if(n==="channelsLast")return s.length===1?Se(t,[1,1,1,1,s[0]]):Se(t,[1].concat(s))}else if(e===4){if(n==="channelsFirst")return s.length===1?Se(t,[1,s[0],1,1]):Se(t,[1,s[2],s[0],s[1]]);if(n==="channelsLast")return s.length===1?Se(t,[1,1,1,s[0]]):Se(t,[1].concat(s))}else if(e===3){if(n==="channelsFirst")return s.length===1?Se(t,[1,s[0],1]):Se(t,[1,s[1],s[0]]);if(n==="channelsLast")return s.length===1?Se(t,[1,1,s[0]]):Se(t,[1].concat(s))}else if(e<3)return t;throw new be(`Unsupported input rank by biasAdd: ${t.rank}`)}function la(e,t,n){return Me(()=>(n==null&&(n=ea()),ms(n),st(e,H1(e.rank,t,n))))}function SRe(e,t=1){if(t!==1)throw new Jt(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return n0(e)}function xRe(e){return Me(()=>At(e,st(Ds(e),1)))}function bF(e,t,n,s){return Me(()=>FTe(e,t,n,s))}function IRe(e){return Me(()=>{const t=st(.5,ge(.2,e));return nr(t,0,1)})}function Yh(e,t,n=!1){return n?e():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ERe=["fanIn","fanOut","fanAvg"],TRe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NRe(e){uu(ERe,"FanMode",e)}function ARe(e){uu(TRe,"Distribution",e)}class Rr extends Hc{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class yF extends Rr{apply(t,n){return _s(t,n)}}yF.className="Zeros";et(yF);class B2 extends Rr{apply(t,n){return Gi(t,n)}}B2.className="Ones";et(B2);class wF extends Rr{constructor(t){super();if(typeof t!="object")throw new be(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new be(`config must have value set but got ${t}`);this.value=t.value}apply(t,n){return Me(()=>ge(Gt(this.value),Gi(t,n)))}getConfig(){return{value:this.value}}}wF.className="Constant";et(wF);class $F extends Rr{constructor(t){super();this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,n){return a0(t,this.minval,this.maxval,n)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}$F.className="RandomUniform";et($F);class CF extends Rr{constructor(t){super();this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`randomNormal does not support dType ${n}.`);return f0(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}CF.className="RandomNormal";et(CF);class kF extends Rr{constructor(t){super();this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`truncatedNormal does not support dType ${n}.`);return AM(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}kF.className="TruncatedNormal";et(kF);class SF extends Rr{constructor(t){super();this.gain=t.gain!=null?t.gain:1}apply(t,n){return Me(()=>{if(t.length!==2||t[0]!==t[1])throw new be("Identity matrix initializer can only be used for 2D square matrices.");return ge(this.gain,sM(t[0]))})}getConfig(){return{gain:this.gain}}}SF.className="Identity";et(SF);function DRe(e,t="channelsLast"){let n,s;if(ms(t),e.length===2)n=e[0],s=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){const o=Si(e,2);n=e[1]*o,s=e[0]*o}else if(t==="channelsLast"){const o=Si(e,0,e.length-2);n=e[e.length-2]*o,s=e[e.length-1]*o}}else{const o=Si(e);n=Math.sqrt(o),s=Math.sqrt(o)}return[n,s]}class Fo extends Rr{constructor(t){super();if(t.scale<0)throw new be(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,NRe(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,ARe(this.distribution),this.seed=t.seed}apply(t,n){const s=DRe(t),o=s[0],r=s[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,o):this.mode==="fanOut"?a/=Math.max(1,r):a/=Math.max(1,(o+r)/2),this.distribution==="normal"){const i=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`${this.getClassName()} does not support dType ${n}.`);return AM(t,0,i,n,this.seed)}else{const i=Math.sqrt(3*a);return a0(t,-i,i,n)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Fo.className="VarianceScaling";et(Fo);class z2 extends Fo{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Fo.className}}z2.className="GlorotUniform";et(z2);class V2 extends Fo{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Fo.className}}V2.className="GlorotNormal";et(V2);class W2 extends Fo{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Fo.className}}W2.className="HeNormal";et(W2);class H2 extends Fo{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Fo.className}}H2.className="HeUniform";et(H2);class U2 extends Fo{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Fo.className}}U2.className="LeCunNormal";et(U2);class G2 extends Fo{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Fo.className}}G2.className="LeCunNormal";et(G2);class xF extends Rr{constructor(t){super();if(this.DEFAULT_GAIN=1,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,this.seed!=null)throw new Jt("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,n){return Me(()=>{if(t.length<2)throw new Jt("Shape must be at least 2D.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const s=t[0]>t[1]?[t[1],t[0]]:t,o=f0(s,0,1,"float32");let r=tAe.gramSchmidt(o);return t[0]>t[1]&&(r=Tn(r)),ge(this.gain,r)})}getConfig(){return{gain:this.gain,seed:this.seed}}}xF.className="Orthogonal";et(xF);const LT={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function BT(e,t={}){return Kh(e,hr.getMap().classNameMap,t,"initializer")}function as(e){return M2(e)}function ts(e){if(typeof e=="string"){const t=e in LT?LT[e]:e;if(t==="GlorotNormal")return new V2;if(t==="GlorotUniform")return new z2;if(t==="HeNormal")return new W2;if(t==="HeUniform")return new H2;if(t==="LeCunNormal")return new U2;if(t==="LeCunUniform")return new G2;{const n={};return n.className=t,n.config={},BT(n)}}else return e instanceof Rr?e:BT(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let RRe=0;function IF(){return RRe++}const Bp={};function h0(e=""){return e in Bp||(Bp[e]=0),Bp[e]+=1,e+Bp[e].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U1(e){return Array.isArray(e)&&Array.isArray(e[0])}function ag(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function nn(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new be(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function Fn(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new be(`Expected exactly 1 Shape; got ${e.length}`)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ig(e){let t=0;for(const n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((s,o)=>s*o);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zT="Variable";class _Re{constructor(t,n="float32",s=zT,o=!0,r=null){this.dtype=n==null?"float32":n,this.shape=t.shape,this.id=IF(),s=s==null?zT:s,this.originalName=pF(s),this.name=mF(this.originalName),this.trainable_=o,this.constraint=r,this.val=RTe(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),ORe(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function ORe(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function G1(e){return e.map(t=>t.read())}function K2(e){e.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Is{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class ma{constructor(t,n,s,o,r,a,i){this.dtype=t,this.shape=n,this.sourceLayer=s,this.inputs=o,this.callArgs=r,this.outputTensorIndex=i,this.id=IF(),a!=null&&(this.originalName=pF(a),this.name=mF(this.originalName)),this.rank=n.length}}let MRe=0;class p0{constructor(t,n){this.callArgs=n,this.id=MRe++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const s of t.inboundLayers)s!=null&&s.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const n of this.inboundLayers)n!=null?t.push(n.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let FRe=0;class Sn extends Hc{constructor(t={}){super();this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=FRe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const s=this.getClassName();n=_a(s)+"_"+h0(s)}if(this.name=n,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let s;if(t.batchInputShape!=null)s=t.batchInputShape;else if(t.inputShape!=null){let r=null;t.batchSize!=null&&(r=t.batchSize),s=[r].concat(t.inputShape)}this.batchInputShape=s;let o=t.dtype;o==null&&(o=t.inputDType),o==null&&(o="float32"),this.dtype=o}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,n){return t.name+"_ib-"+n.toString()}getNodeAtIndex(t,n){if(this.inboundNodes.length===0)throw new vr(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=t)throw new be(`Asked to get ${n} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return vo(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return vo(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new da(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new da(`Layer ${this.name} is not connected, no input to return.`);return vo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new da(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new da(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return vo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(n=>n.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=Xn(t),this.inputSpec==null||this.inputSpec.length===0)return;const n=Xn(this.inputSpec);if(t.length!==n.length)throw new be(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${t}`);for(let s=0;s<t.length;s++){const o=t[s],r=n[s];if(r==null)continue;const a=o.rank;if(r.ndim!=null&&a!==r.ndim)throw new be(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${r.ndim}, found ndim=${a}`);if(r.maxNDim!=null&&a>r.maxNDim)throw new be(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${r.maxNDim}, found ndim=${a}`);if(r.minNDim!=null&&a<r.minNDim)throw new be(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${r.minNDim}, found ndim=${a}.`);if(r.dtype!=null&&o.dtype!==r.dtype)throw new be(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${r.dtype}, found dtype=${o.dtype}.`);if(r.axes){const i=o.shape;for(const l in r.axes){const u=Number(l),c=r.axes[l],d=u>=0?i[u]:i[i.length+u];if(c!=null&&[c,null].indexOf(d)===-1)throw new be(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${i}.`)}}if(r.shape!=null)for(let i=0;i<r.shape.length;++i){const l=r.shape[i],u=o.shape[i];if(l!=null&&u!=null&&l!==u)throw new be(`Input ${s} is incompatible with layer ${this.name}: expected shape=${r.shape}, found shape=${o.shape}.`)}}}call(t,n){return t}invokeCallHook(t,n){this._callHook!=null&&this._callHook(t,n)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,n){n=n||{},this.assertNotDisposed();const s=Xn(t);let o=!0;for(const a of s)if(!(a instanceof ma)){o=!1;break}let r=!0;for(const a of s)if(a instanceof ma){r=!1;break}if(o===r)throw new be("Arguments to apply() must be all SymbolicTensors or all Tensors");return Pl(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const a=[];for(const i of Xn(t))a.push(i.shape);this.build(vo(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(t),r){let a=this.call(t,n);const i=Xn(a),l=[];for(let u of i)s.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(a=vo(l),this.activityRegularizer!=null)throw new Jt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=PRe(t),i=this.computeOutputShape(a);let l;const u=LRe(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?a[0]:a),i!=null&&i.length>0&&Array.isArray(i[0])?l=i.map((c,d)=>new ma(u,c,this,Xn(t),n,this.name,d)):l=new ma(u,i,this,Xn(t),n,this.name),this.addInboundNode(t,l,null,null,a,i,n),this._refCount++,this.activityRegularizer!=null)throw new Jt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((s,o)=>{s!=null&&t[o]!=null&&t[o]!==s&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new da(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const n of this.inboundNodes){const s=JSON.stringify(n.outputShapes);t.indexOf(s)===-1&&t.push(s)}if(t.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new da(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new vr(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return ig(this.weights)}build(t){this.built=!0}getWeights(t=!1){return G1(t?this.trainableWeights:this.weights)}setWeights(t){Me(()=>{const n=this.weights;if(n.length!==t.length)throw new be(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${n.length} weights. Provided weights: ${t}...`);if(n.length===0)return;const s=[],o=G1(n);for(let r=0;r<o.length;++r){const a=o[r],i=n[r],l=t[r];if(!Dn(a.shape,l.shape))throw new be(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);s.push([i,l])}K2(s)})}addWeight(t,n,s,o,r,a,i,l){if(this._addedWeightNames.indexOf(t)!==-1)throw new be(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():ts("zeros"));const u=o.apply(n,s),c=new _Re(u,s,t,a,i);return u.dispose(),r!=null&&this.addLoss(()=>r.apply(c.read())),a==null&&(a=!0),a?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=Xn(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}addInboundNode(t,n,s,o,r,a,i=null){const l=Xn(t);n=Xn(n),s=Xn(s),o=Xn(o),r=ag(r),a=ag(a);const u=[],c=[],d=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex);new p0({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:s,outputMasks:o,inputShapes:r,outputShapes:a},i);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function PRe(e){e=Xn(e);const t=[];for(const n of e)t.push(n.shape);return vo(t)}function LRe(e){return"float32"}function EF(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{const s=t.inboundNodes[n];if(s.inboundLayers.length===0)return s.inputTensors;{const o=[];for(let r=0;r<s.inboundLayers.length;r++){const a=s.inputTensors[r],i=s.inboundLayers[r],l=s.nodeIndices[r],u=EF(a,i,l);for(const c of u)o.indexOf(c)===-1&&o.push(c)}return o}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Zh extends Sn{constructor(t){super({dtype:t.dtype,name:t.name!=null?t.name:h0("input").toString()});if(t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new be("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=t.batchInputShape;if(n==null){if(t.inputShape==null)throw new be("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new be("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=t.dtype||"float32";this.batchInputShape=n,this.dtype=s,this.inputSpec=[{shape:n}];const o=new ma(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new p0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(t,n){throw new be(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Zh.className="InputLayer";et(Zh);function BRe(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new be("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new Zh({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function al(e){if(e==null)return;const t=[],n=[],s=[];for(const o in e){const r=e[o];if(typeof r!="number"){const a=r;t.push(a.data()),n.push(o),s.push(a)}}if(t.length>0){const o=await Promise.all(t);for(let r=0;r<o.length;++r)e[n[r]]=o[r][0];dn(s)}}function TF(e){if(e!=null)for(const t in e){const n=e[t];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var VT;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(VT||(VT={}));const zRe=125;class $f{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class VRe{constructor(t,n=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochBegin(t,n)}async onEpochEnd(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochEnd(t,n)}async onBatchBegin(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchBegin(t,n)}async onBatchEnd(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchEnd(t,n)}async onTrainBegin(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class WRe extends $f{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){n==null&&(n={});const s=n.size==null?0:n.size;this.seen+=s;for(const o in n){const r=n[o];if(typeof r=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+r*s;else{let a;o in this.totals?a=this.totals[o]:this.totals[o]=0;const i=Me(()=>st(this.totals[o],ge(r,s)));this.totals[o]=i,a!=null&&a.dispose()}}}async onEpochEnd(t,n){if(n!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?n[s]=this.totals[s]/this.seen:Me(()=>{const o=ge(At(1,this.seen),this.totals[s]);n[s]=o,this.totals[s].dispose(),ka(n[s])}))}}class HRe extends $f{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){n==null&&(n={}),this.epoch.push(t);for(const s in n)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(n[s])}async syncData(){const t=[],n=[],s=[];for(const r in this.history){const a=this.history[r];for(let i=0;i<a.length;++i)if(typeof a[i]!="number"){const l=a[i];t.push(l.data()),n.push(r),s.push(i)}}const o=await Promise.all(t);for(let r=0;r<o.length;++r)this.history[n[r]][s[r]].dispose(),this.history[n[r]][s[r]]=o[r][0]}}class URe extends $f{constructor(t,n){super();if(this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||sAe,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=zRe),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");v1(this.yieldEvery)&&(this.maybeWait=dRe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,s){const o=[];this.yield!=null&&(await al(s),o.push(this.yield(t,n,s))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(t,n){this.currentEpoch=t,this.epochBegin!=null&&(await al(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const s=[];this.epochEnd!=null&&(await al(n),s.push(this.epochEnd(t,n))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(t,n){this.batchBegin!=null&&(await al(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const s=[];this.batchEnd!=null&&(await al(n),s.push(this.batchEnd(t,n))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):v1(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(s)}async onTrainBegin(t){this.trainBegin!=null&&(await al(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await al(t),await this.trainEnd(t))}}function NF(e,t){return e==null&&(e={}),e instanceof $f?[e]:Array.isArray(e)&&e[0]instanceof $f?e:Xn(e).map(s=>new URe(s,t))}class lr{constructor(){}static registerCallbackConstructor(t,n){j(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),lr.checkForDuplicate(n),lr.constructors[t]==null&&(lr.constructors[t]=[]),lr.constructors[t].push(n)}static checkForDuplicate(t){for(const n in lr.constructors)lr.constructors[+n].forEach(o=>{if(o===t)throw new be("Duplicate callback constructor.")})}static clear(){lr.constructors={}}static createCallbacks(t){const n=[];for(const s in lr.constructors){const o=+s;t>=o&&n.push(...lr.constructors[o])}return n.map(s=>new s)}}lr.constructors={};function AF(e,t,n,s,o,r,a,i,l){const u=new HRe,c=[new WRe,...lr.createCallbacks(t)];e!=null&&c.push(...e),c.push(u);const d=new VRe(c);return d.setParams({epochs:n,initialEpoch:s,samples:o,steps:r,batchSize:a,verbose:t,doValidation:i,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function za(e,t={},n=!1){return Kh(e,hr.getMap().classNameMap,t,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lg(e,t){return Me(()=>{e.dtype!=="float32"&&(e=mt(e,"float32"));const n=Et(Xh(e),t,!0),s=s0(n.shape,xs()),o=co(Ui(n,s));return At(e,o)})}function m0(e,t){return Me(()=>us(Xh(Tt(t,e)),-1))}function j2(e,t){return Me(()=>us(Ds(Tt(t,e)),-1))}function q2(e,t){return Me(()=>{const n=Tt(e,t),s=nr(Ds(e),xs(),Number.MAX_VALUE),o=Ds(At(n,s));return ge(100,us(o,-1))})}function GRe(e,t){return Me(()=>{const n=nr(t,xs(),Number.MAX_VALUE),s=xr(st(1,n)),o=nr(e,xs(),Number.MAX_VALUE),r=xr(st(1,o));return us(Xh(Tt(s,r)),-1)})}function KRe(e,t){return Me(()=>{const n=Ui(0,Tt(1,ge(e,t)));return us(Xh(n),-1)})}function jRe(e,t){return Me(()=>{const n=Ui(0,Tt(1,ge(e,t)));return us(n,-1)})}function qRe(e,t){return Me(()=>{const n=Et(ge(e,t),-1),s=ba(ge(Tt(1,e),t),-1);return Ui(0,st(1,Tt(s,n)))})}function XRe(e,t){return Me(()=>{const n=Math.log(2),s=Tt(t,e),o=Tt(st(s,zh(ge(-2,s))),n);return us(o,-1)})}function Cf(e,t,n=!1){return Me(()=>{if(n)t=JC(t);else{const s=Et(t,t.shape.length-1,!0);t=At(t,s)}return t=nr(t,xs(),1-xs()),ls(Et(ge(mt(e,"float32"),xr(t)),t.shape.length-1))})}function ug(e,t,n=!1){return Me(()=>{const s=mt(o0(CRe(e)),"int32");t=nr(t,xs(),1-xs());const o=t.shape,r=Se(BO(s,o[o.length-1]),o);return Cf(r,t,n)})}function YRe(e,t){if(!Dn(e.shape,t.shape))throw new be(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return Me(()=>{const n=Qa(t),s=ls(Ds(t));return st(Tt(n,ge(t,e)),WC(Sr(s)))})}function g0(e,t){return Me(()=>{let n;return n=nr(t,xs(),1-xs()),n=xr(At(n,Tt(1,n))),us(YRe(e,n),-1)})}function ZRe(e,t){return Me(()=>{const n=nr(e,xs(),1),s=nr(t,xs(),1);return Et(ge(e,xr(At(n,s))),-1)})}function JRe(e,t){return Me(()=>{const n=xr(st(xs(),t));return us(Tt(t,ge(e,n)),-1)})}function DF(e,t){return Me(()=>{const n=lg(e,-1),s=lg(t,-1),o=ge(n,s);return ls(Et(o,-1))})}const cg={meanSquaredError:m0,meanAbsoluteError:j2,meanAbsolutePercentageError:q2,meanSquaredLogarithmicError:GRe,squaredHinge:KRe,hinge:jRe,categoricalHinge:qRe,logcosh:XRe,categoricalCrossentropy:Cf,sparseCategoricalCrossentropy:ug,binaryCrossentropy:g0,kullbackLeiblerDivergence:ZRe,poisson:JRe,cosineProximity:DF};function jb(e){if(typeof e=="string"){if(e in cg)return cg[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new be(t)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RF(e,t){return Me(()=>{const n=ge(.5,Ir(t)),s=d0(Dr(t,n),e.dtype);return us(Sa(e,s),-1)})}function _F(e,t){return Me(()=>d0(Sa(yf(e,-1),yf(t,-1)),"float32"))}function QRe(e,t){return Me(()=>mt(Et(Ka(Sa(e,1),Sa(t,1))),"float32"))}function e_e(e,t){return Me(()=>mt(Et(Ka(Sa(e,0),Sa(t,1))),"float32"))}function t_e(e,t){return Me(()=>{const n=QRe(e,t),s=e_e(e,t),o=st(n,s);return mt(Mo(Dr(o,0),At(n,o),0),"float32")})}function n_e(e,t){return g0(e,t)}function s_e(e,t){return e.rank===t.rank&&(e=Vh(e,[e.rank-1])),t=yf(t,-1),t.dtype!==e.dtype&&(t=mt(t,e.dtype)),mt(Sa(e,t),"float32")}const o_e=m0,r_e=m0,a_e=j2,i_e=j2,l_e=q2,u_e=q2,OF=Cf,c_e=DF,MF=ug,dg={binaryAccuracy:RF,categoricalAccuracy:_F,precision:t_e,categoricalCrossentropy:OF,sparseCategoricalCrossentropy:MF,mse:o_e,MSE:r_e,mae:a_e,MAE:i_e,mape:l_e,MAPE:u_e,cosine:c_e};function d_e(e){if(typeof e=="string"&&e in dg)return dg[e];if(typeof e!="string"&&e!=null)return e;throw new be(`Unknown metric ${e}`)}function zp(e){if(fa(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(const n of Object.keys(cg))if(cg[n]===e){t=n;break}if(t!==void 0)return t;for(const n of Object.keys(dg))if(dg[n]===e){t=n;break}return t!==void 0?t:e.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function f_e(e){const t={Adagrad:()=>Au.adagrad(.01),Adadelta:()=>Au.adadelta(1,.95,xs()),Adam:()=>Au.adam(.001,.9,.999,xs()),Adamax:()=>Au.adamax(.002,.9,.999,xs(),0),RMSProp:()=>Au.rmsprop(.001,.9,0,xs()),SGD:()=>Au.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new be(`Unknown Optimizer ${e}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const WT=1*1024*1024;function HT(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!K1(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const s=JSON.stringify(e);s.length>WT&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${WT}.`)}}function K1(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t)if(typeof n!="string"||!K1(e[n]))return!1;return!0}else if(Array.isArray(e)){for(const t of e)if(!K1(t))return!1;return!0}else return!1;else{const t=typeof e;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h_e(e,t,n,s=console.log){const o=m_e(e),r=["Layer (type)","Output shape","Param #"];o?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(t*c)));let a;if(!o){r.push("Receives inputs"),a=[];for(const c in e.nodesByDepth)a.push(...e.nodesByDepth[c])}s("_".repeat(t)),fg(r,n,s),s("=".repeat(t));const i=e.layers;for(let c=0;c<i.length;++c)o?g_e(i[c],n,s):v_e(i[c],n,a,s),s((c===i.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=p_e(e),u=ig(e.nonTrainableWeights);s(`Total params: ${l+u}`),s(`Trainable params: ${l}`),s(`Non-trainable params: ${u}`),s("_".repeat(t))}function p_e(e){let t;return e.collectedTrainableWeights!=null?t=ig(e.collectedTrainableWeights):t=ig(e.trainableWeights),t}function m_e(e){let t=!0;const n=[],s=[];for(const o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){t=!1;break}s.push(...o)}if(t)for(const o of e.layers){let r=!1;for(const a of o.inboundNodes)if(s.indexOf(a)!==-1)if(r){t=!1;break}else r=!0;if(!t)break}return t}function fg(e,t,n=console.log){let s="";for(let o=0;o<e.length;++o)o>0&&(s=s.slice(0,s.length-1)+" "),s+=e[o],s=s.slice(0,t[o]),s+=" ".repeat(t[o]-s.length);n(s)}function g_e(e,t,n){let s;try{s=JSON.stringify(e.outputShape)}catch{s="multiple"}const o=e.name,r=e.getClassName(),a=[`${o} (${r})`,s,e.countParams().toString()];fg(a,t,n)}function v_e(e,t,n,s){let o;try{o=JSON.stringify(e.outputShape)}catch{o="multiple"}const r=[];for(const c of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(c)===-1))for(let d=0;d<c.inboundLayers.length;++d){const f=c.inboundLayers[d].name,h=c.nodeIndices[d],p=c.tensorIndices[d];r.push(`${f}[${h}][${p}]`)}const a=e.name,i=e.getClassName(),l=r.length===0?"":r[0],u=[`${a} (${i})`,o,e.countParams().toString(),l];fg(u,t,s);for(let c=1;c<r.length;++c)fg(["","","",r[c]],t,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FF(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function j1(e,t){if(e===null)return null;if(typeof e=="string")return yl(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],s=e.length;for(let o=0;o<s;++o){const r=e[o];FF(t,o,r)?n.push(r):n.push(j1(r,t))}return n}else{const n={};for(const s of Object.keys(e)){const o=e[s];if(s==="name"&&typeof o=="string")n[s]=o;else{const r=yl(s);n[r]=j1(o,r)}}return n}}function q1(e,t){if(e==null)return null;if(typeof e=="string")return _a(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],s=e.length;for(let o=0;o<s;++o){const r=e[o];FF(t,o,r)?n.push(r):n.push(q1(r,t))}return n}else{const n={};for(const s of Object.keys(e)){const o=e[s],r=_a(s);(s==="name"||s==="className")&&typeof o=="string"?n[r]=o:n[r]=q1(o,s)}return n}}/** @license See the LICENSE file. */const PF="3.13.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function b_e(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return mt(t,e.dtype)}catch{throw new be(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}class bi{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof bi)for(const n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(const n of t)this.add(n.key,n.value)}}add(t,n,s){if(this.id2Value[t.id]==null)this.id2Value[t.id]=b_e(t,n),this.name2Id[t.name]=t.id,s!=null&&(this.id2Mask[t.id]=s);else throw new be(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof ma){if(this.id2Value[t.id]==null)throw new be(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const n=this.name2Id[t];if(n==null)throw new be(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof ma){if(this.id2Value[t.id]==null)throw new be(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const n=this.name2Id[t];if(n==null)throw new be(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&dn(this.id2Mask)}}const qb={},UT={};function Nd(e,t,n,s){const o=n==null?!1:n.training,r=Array.isArray(e),a=r?e:[e],i=a.map(p=>p.name),l=[],u=t.names();for(const p of i)u.indexOf(p)!==-1?l.push(t.getValue(p)):l.push(null);s!=null&&(s.maxNumTensors=-1/0,s.minNumTensors=1/0);const c=i.join(",")+"|"+t.names().join(",");let d,f;if(qb[c]==null){const p=y_e(a,t);d=p.sorted,f=p.recipientCounts,qb[c]=d,UT[c]=f}d=qb[c],f={},o||Object.assign(f,UT[c]);const h=new bi(t);for(let p=0;p<d.length;++p){if(s!=null){const E=O1().numTensors;E>s.maxNumTensors&&(s.maxNumTensors=E),E<s.minNumTensors&&(s.minNumTensors=E)}const m=d[p],g=m.sourceLayer;if(g instanceof Zh)continue;const v=[],b=[],$=[];let y=!1;for(const E of m.inputs){const x=h.getValue(E),N=h.getMask(E);v.push(x),b.push(N),N!=null&&(y=!0),o||(f[E.name]--,f[E.name]===0&&!t.hasKey(E)&&i.indexOf(E.name)===-1&&!x.isDisposed&&E.sourceLayer.stateful!==!0&&$.push(x))}y&&(n=n||{},n.mask=b[0]);const w=Xn(g.apply(v,n));let C=null;g.supportsMasking&&(C=g.computeMask(v,b));const k=$_e(m),S=Array.isArray(k)?k:[k];for(let E=0;E<S.length;++E){h.hasKey(S[E])||h.add(S[E],w[E],Array.isArray(C)?C[0]:C);const x=i.indexOf(S[E].name);x!==-1&&(l[x]=w[E])}o||dn($)}return h.disposeMasks(),r?l:l[0]}function y_e(e,t){j(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(e.length===1){const o=GT(e[0],t);n=o.sorted,s=o.recipientMap}else{const o=new Set;for(const r of e){const{sorted:a,recipientMap:i}=GT(r,t);for(const l of a)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in i)s[l]==null&&(s[l]=new Set),i[l].forEach(u=>s[l].add(u))}}return{sorted:n,recipientCounts:w_e(s)}}function w_e(e){const t={};for(const n in e)t[n]=e[n].size;return t}function GT(e,t){const n=new Set,s=[],o={};for(const i of t.names())n.add(i);const r=[],a=[];for(r.push(e);r.length>0;){const i=r[r.length-1];if(n.has(i.name)){r.pop();continue}const l=a[a.length-1]===r.length-1;if(i.inputs.length===0||l)r.pop(),s.push(i),n.add(i.name),l&&a.pop();else{a.push(r.length-1);for(const u of i.inputs)o[u.name]==null&&(o[u.name]=new Set),o[u.name].add(i.name),!n.has(u.name)&&r.push(u)}}return{sorted:s,recipientMap:o}}function $_e(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let s=0;s<e.sourceLayer.inboundNodes.length;++s)for(const o of e.sourceLayer.inboundNodes[s].outputTensors)if(o.id===e.id){n=s;break}t=e.sourceLayer.getOutputAt(n)}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zr extends Sn{constructor(t){super({});if(this.containerNodes=new Set,this.name=t.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=h0(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],ki(this.inputs).length!==this.inputs.length)throw new be(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);ki(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const $=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;this.outputLayers.push($),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(w)}for(const b of this.inputs){const $=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;fa(y===0,"input layer has >1 nodes"),fa(w===0,"input layer has >1 tensors"),this.inputLayers.push($),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const $=this.inputLayers[b];if(!($ instanceof Zh))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${$.getClassName()}.`);this.inputNames.push($.name),this.feedInputShapes.push($.batchInputShape),this.feedInputNames.push($.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},s={},o={},r={},a={},i=[],l=(b,$,y,w,C,k)=>{(w==null||C==null||k==null)&&(w=b.sourceLayer,C=b.nodeIndex,k=b.tensorIndex);const S=w.inboundNodes[C];if(y.indexOf(S)!==-1)throw new vr(`The tensor ${b.name} at layer "${w.name}" is part of a cycle.`);if($.indexOf(S)!==-1)return;this.containerNodes.add(zr.nodeKey(w,C)),w.id in a||(a[w.id]=Object.keys(a).length),y.indexOf(S)===-1&&y.push(S);const E=S.inboundLayers.length;for(let x=0;x<E;x++){const N=S.inputTensors[x],A=S.inboundLayers[x],D=S.nodeIndices[x],M=S.tensorIndices[x];l(N,$,y,A,D,M)}for($.push(S);y.indexOf(S)>=0;)y.splice(y.indexOf(S),1);i.push(S)},u=[],c=[];for(const b of this.outputs)l(b,u,c);const d=i.slice().reverse();for(const b of d){s[b.id]=b,b.id in n||(n[b.id]=0);let $=n[b.id];const y=o[b.outboundLayer.id]==null?0:o[b.outboundLayer.id];$=Math.max($,y),o[b.outboundLayer.id]=$,r[b.outboundLayer.id]=b.outboundLayer,n[b.id]=$;for(let w=0;w<b.inboundLayers.length;w++){const C=b.inboundLayers[w],k=b.nodeIndices[w],S=C.inboundNodes[k],E=n[S.id]==null?0:n[S.id];n[S.id]=Math.max($+1,E),s[S.id]=S}}const f={};for(const b in n){const $=n[b];$ in f||(f[$]=[]),f[$].push(s[b])}const h={};for(const b in o){const $=o[b];$ in h||(h[$]=[]),h[$].push(r[b])}let p=Object.keys(h).map(b=>parseInt(b,10)).sort(Pp);this.layers=[];for(const b of p){const $=h[b];$.sort((y,w)=>{const C=a[y.id],k=a[w.id];return C<k?-1:C>k?1:0});for(const y of $)y instanceof zr&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=h,p=Object.keys(f).map(b=>parseInt(b,10)).sort(Pp);const m=this.inputs.slice(),g=[];for(const b of p)for(const $ of f[b]){const y=$.outboundLayer;if(y!=null){for(const w of $.inputTensors)if(m.indexOf(w)===-1)throw new vr(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${y.name}". The following previous layers were accessed without issue: ${g}`);for(const w of $.outputTensors)m.push(w);g.push(y.name)}}this.nodesByDepth=f;const v=this.layers.map(b=>b.name);for(const b of v){const $=v.filter(y=>y===b).length;if($!==1)throw new vr(`The name "${b}" is used ${$} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new p0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(s=>s.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new be("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.layers)n.push(...s.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){const s={};let o=0;for(const a of this.layers)for(const i of a.weights){if(s[i.originalName]!=null)throw new be(`Duplicate weight name: ${i.originalName}`);s[i.originalName]=i,o++}const r=[];for(const a in t){let i=a;if(s[a]==null){const l=a.split("/");i=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(s[i]!=null)r.push([s[i],t[a]]);else if(n)throw new be(`Provided weight data has no target variable: ${a}`);delete s[i]}if(n){const a=[];for(const i in s)a.push(i);if(a.length>0)throw new be(`${a.length} of ${o} weights are not set: ${a}`)}K2(r)}updatedConfig(){const t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${PF}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){const s=q1(this.updatedConfig());return n?JSON.stringify(s):s}call(t,n){return Me(()=>{t=Xn(t);const s=new bi;for(let o=0;o<this.inputs.length;++o)s.add(this.inputs[o],t[o]);return Nd(this.outputs,s,n)})}computeMask(t,n){return Me(()=>{t=Xn(t);let s;return n==null?s=Jl(null,t.length):s=Xn(n),this.runInternalGraph(t,s)[1]})}computeOutputShape(t){const n=ag(t);if(n.length!==this.inputLayers.length)throw new be(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let i=0;i<n.length;i++){const l=this.inputLayers[i],u=n[i],c=l.name+"_0_0";s[c]=u}const o=Object.keys(this.nodesByDepth).map(i=>parseInt(i,10)).sort(Pp);if(o.length>1)for(const i of o){const l=this.nodesByDepth[i];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],v=u.nodeIndices[m],b=u.tensorIndices[m],$=`${g.name}_${v}_${b}`,y=s[$];d.push(y)}const f=c.computeOutputShape(vo(d)),h=ag(f),p=c.inboundNodes.indexOf(u);for(let m=0;m<h.length;m++){const g=`${c.name}_${p}_${m}`;s[g]=h[m]}}}const r=[],a=[];for(let i=0;i<this.outputLayers.length;i++){const l=this.outputLayers[i],u=this.outputLayersNodeIndices[i],c=this.outputLayersTensorIndices[i],d=`${l.name}_${u}_${c}`;a.push(d)}for(let i=0;i<a.length;i++){const l=a[i];fa(l in s),r.push(s[l])}return vo(r)}runInternalGraph(t,n){n==null&&(n=Jl(null,t.length));const s={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=t[l],d=n[l];s[u.id]=[c,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Pp);for(const l of o){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,f=c.inputTensors,h=c.outputTensors,p=new Array;for(const m of f)m.id in s&&p.push(s[m.id]);if(p.length===f.length){let m={},g,v,b,$;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[y,w]=p[0];m.mask==null&&(m.mask=w),b=Xn(d.call(y,m)),$=Xn(d.computeMask(y,w)),g=[y],v=[w]}else g=p.map(y=>y[0]),v=p.map(y=>y[1]),m.mask==null&&(m.mask=v),b=Xn(d.call(g,m)),$=Xn(d.computeMask(g,v));if(d.activityRegularizer)throw new Jt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<h.length;++y){const w=h[y],C=b[y],k=$[y];s[w.id]=[C,k]}}}}const r=[],a=[],i=[];for(const l of this.outputs){fa(l.id in s,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=s[l.id];i.push(u.shape),r.push(u),a.push(c)}return[r,a,i]}buildNodeConversionMap(t){const n={};let s;for(const o of this.layers){s=o instanceof zr?1:0;for(let r=0;r<o.inboundNodes.length;r++){const a=zr.nodeKey(o,r);this.containerNodes.has(a)&&(n[a]=s,s+=1)}}return n}getLayer(t,n){if(n!=null){if(this.layers.length<=n)throw new be(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}else if(t==null)throw new be("Provide either a layer name or layer index");for(const s of this.layers)if(s.name===t)return s;throw new be(`No such layer: ${t}`)}calculateLosses(){return Me(()=>{const t=[];for(const n of this.layers)for(let s=0;s<n.inboundNodes.length;++s){const o=zr.nodeKey(n,s);this.containerNodes.has(o)&&t.push(...n.calculateLosses())}return t})}getConfig(){const t={name:this.name},n=this.buildNodeConversionMap(this.layers),s=[];for(const a of this.layers){const i=a.getClassName(),l=a.getConfig(),u=[];for(let d=0;d<a.inboundNodes.length;d++){const f=a.inboundNodes[d],h=zr.nodeKey(a,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const m=[];for(let g=0;g<f.inboundLayers.length;g++){const v=f.inboundLayers[g],b=f.nodeIndices[g],$=f.tensorIndices[g],y=zr.nodeKey(v,b);let w=n[y];w==null&&(w=0),m.push([v.name,w,$,p])}u.push(m)}}}const c={};c.name=a.name,c.className=i,c.config=l,c.inboundNodes=u,s.push(c)}t.layers=s;const o=[];for(let a=0;a<this.inputLayers.length;a++){const i=this.inputLayers[a],l=this.inputLayersNodeIndices[a],u=zr.nodeKey(i,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[a];o.push([i.name,c,d])}t.inputLayers=o;const r=[];for(let a=0;a<this.outputLayers.length;a++){const i=this.outputLayers[a],l=this.outputLayersNodeIndices[a],u=zr.nodeKey(i,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[a];r.push([i.name,c,d])}return t.outputLayers=r,t}static fromConfig(t,n,s={},o=!1){const r={},a={};function i(g,v){g.name in a?a[g.name].push(v):a[g.name]=[v]}function l(g,v){const b=[];let $;for(const y of v){const w=y[0],C=y[1],k=y[2];if($=y[3]==null?{}:y[3],!(w in r)){i(g,v);return}const S=r[w];if(S.inboundNodes.length<=C){i(g,v);return}const E=S.inboundNodes[C];b.push(E.outputTensors[k])}b.length>0&&g.apply(vo(b),$)}function u(g){const v=g.name,b=za(g,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(o),r[v]=b,g.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new be(`Corrupted configuration, expected array for nodeData: ${y}`);i(b,y)})}const c=n.name,d=n.layers;for(const g of d)u(g);for(;!cRe(a);)for(const g of d){const v=r[g.name];if(v.name in a){const b=a[v.name];delete a[v.name];for(const $ of b)l(v,$)}}const f=[],h=[],p=n.inputLayers;for(const g of p){const v=g[0],b=g[1],$=g[2];fa(v in r);const w=r[v].inboundNodes[b].outputTensors;f.push(w[$])}const m=n.outputLayers;for(const g of m){const v=g[0],b=g[1],$=g[2];fa(v in r);const w=r[v].inboundNodes[b].outputTensors;h.push(w[$])}return new t({inputs:f,outputs:h,name:c})}get stateful(){if(this._stateful)throw new be("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Me(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function C_e(e,t,n){const s=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(o=>null);if(s===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==s)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){const o=[];return t.forEach(r=>{r in e?o.push(e[r]):o.push(null)}),o}else throw new Error(`The model has multiple (${s}) outputs, so ${n} must be either an array with ${s} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function LF(e,t){return C_e(e,t,"classWeight")}async function BF(e,t,n,s){if(t!=null||s!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const o=Me(()=>{if(e.shape.length===1)return Ml(e);if(e.shape.length===2){if(e.shape[1]>1)return yf(e,1);if(e.shape[1]===1)return Se(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await o.data());dn(o);const a=[];return r.forEach(i=>{if(n[i]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${i} exists in the data but not in classWeight`);a.push(n[i])}),Ao(a,"float32")}else return null}function k_e(e,t){return ge(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const S_e=32;function zF(e,t){let n,s;const o=t;n=o.xs,s=o.ys,j(n!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const r=KT("input",e.inputNames,n),a=KT("output",e.outputNames,s),i=r[0].shape[0];j(r.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),j(a.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<r.length;l++)j(r[l].shape[0]===i,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${r[l].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`);for(let l=0;l<a.length;l++)j(a[l].shape[0]===i,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${a[l].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`);return{xs:r,ys:a}}function KT(e,t,n){if(n instanceof gs)return[n];if(Array.isArray(n))return j(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const s=[];for(const o of t){if(n[o]==null)throw new be(`The feature data generated by the dataset lacks the required ${e} key '${o}'.`);s.push(n[o])}return s}}function x_e(e){if(e.length===3)throw new Jt("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function I_e(e,t,n){const s=n.batchesPerEpoch!=null;if(j(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),j(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),j(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),j(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),j(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=n.validationData!=null;let r,a;if(o)if(jT(n.validationData))j(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=x_e(n.validationData);r=g.xs,a=g.ys}const i=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;o?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=NF(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=AF(c,d,n.epochs,null,null,E_e(t,n),null,o,u);f.setModel(e),e.history=h,await f.onTrainBegin(),e.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await t.iterator();for(;p<n.epochs;){const g={};await f.onEpochBegin(p);let v=0,b=0;for(s||(m=await t.iterator());s?v<n.batchesPerEpoch:!0;){const $=await m.next();if(s&&$.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if($.value!=null){const{xs:y,ys:w}=zF(e,$.value),C={};C.batch=b,C.size=y[0].shape[0],await f.onBatchBegin(b,C);const k=[];if(n.classWeight!=null){const x=LF(n.classWeight,e.outputNames);for(let N=0;N<x.length;++N)k.push(await BF(w[N],null,x[N]))}const S=y.concat(w).concat(k),E=i(S);dn(S);for(let x=0;x<l.length;++x){const N=l[x],A=E[x];C[N]=A,ka(A)}await f.onBatchEnd(b,C),TF(C),b++,v++}if(s?v>=n.batchesPerEpoch:$.done){if(o){let y;jT(n.validationData)?y=Xn(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):y=Xn(e.evaluate(r,a,{batchSize:n.validationBatchSize==null?S_e:n.validationBatchSize,verbose:0}));for(let w=0;w<e.metricsNames.length;++w)g[`val_${e.metricsNames[w]}`]=y[w]}break}if(e.stopTraining_)break}if(await f.onEpochEnd(p,g),p++,e.stopTraining_)break}return await f.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function E_e(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function jT(e){return typeof e.iterator=="function"}function T_e(e){return typeof e.next=="function"}async function N_e(e,t,n){n=n||{};const s=n.batches!=null,o=e.testFunction;let r=[];if(n.verbose>0)throw new Jt("Verbose mode is not implemented yet.");j(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=T_e(t)?t:await t.iterator();let i=0,l=0;for(;s?l<n.batches:!0;){const u=await a.next();if(r=Me(()=>{if(u.value){const{xs:c,ys:d}=zF(e,u.value),f=c.concat(d),h=Me(()=>o(f));if(dn(f),l===0)for(let m=0;m<h.length;++m)r.push(Gt(0));const p=f[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],v=r[m];r[m]=Me(()=>st(r[m],ge(p,g))),l>0&&dn(v)}dn(h),i+=p,++l}return r}),u.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<r.length;++u){const c=r[u];r[u]=At(r[u],i),dn(c)}return vo(r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function X1(e){j(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function Ad(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(s=>Ll(s,t,n-t)):Ll(e,t,n-t)}function X2(e,t){return Me(()=>e==null?null:Array.isArray(e)?e.map(n=>X2(n,t)):vF(e,t.dtype==="int32"?t:mt(t,"int32")))}function Y1(e,t){const n=[];let s=0,o=null;for(;s<e;)o=s+t,o>=e&&(o=e),n.push([s,o]),s=o;return n}async function A_e(e,t,n,s,o,r,a,i,l,u,c,d,f,h,p){o==null&&(o=32),r==null&&(r=1),c==null&&(c=!0),f==null&&(f=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new be("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=e.checkNumSamples(n,o,h,"steps_per_epoch");let v;g!=null&&(v=ta(0,g)),a==null&&(a=1);const{callbackList:b,history:$}=AF(i,a,r,f,g,h,o,m,d);b.setModel(e),e.history=$,await b.onTrainBegin(),e.stopTraining_=!1;for(let y=f;y<r;++y){await b.onEpochBegin(y);const w={};if(h!=null)throw new Jt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Jt("batch shuffling is not implemneted yet");c&&gke(v);const C=Ao(v),k=Y1(g,o);for(let S=0;S<k.length;++S){const E={};if(await b.onBatchBegin(S,E),Me(()=>{const x=k[S][0],N=k[S][1],A=Ll(C,x,N-x);E.batch=S,E.size=N-x;const D=X2(n,A),M=t(D);for(let F=0;F<s.length;++F){const R=s[F],P=M[F];E[R]=P,ka(P)}if(S===k.length-1&&m){const F=e.testLoop(l,u,o);for(let R=0;R<s.length;++R){const P=s[R],V=F[R];ka(V),w["val_"+P]=V}}}),await b.onBatchEnd(S,E),TF(E),e.stopTraining_)break}C.dispose()}if(await b.onEpochEnd(y,w),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}async function D_e(e,t,n,s={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;let o,r,a,i,l,u,c,d,f;try{const h=s.batchSize==null?32:s.batchSize;X1(h);const p=!1,m=await e.standardizeUserData(t,n,s.sampleWeight,s.classWeight,p,h);o=m[0],r=m[1],f=m[2];let g=!1,v;if(s.validationData!=null&&s.validationData.length>0){if(g=!0,s.validationData.length===2)l=s.validationData[0],u=s.validationData[1];else throw s.validationData.length===3?new Jt("validationData including sample weights is not supported yet."):new be(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const E=!0,x=await e.standardizeUserData(l,u,null,null,E,h);c=x[0],d=x[1],v=c.concat(d)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){g=!0;const E=Math.floor(o[0].shape[0]*(1-s.validationSplit)),x=o[0].shape[0];c=Ad(o,E,x),a=o,o=Ad(o,0,E),d=Ad(r,E,x),i=r,r=Ad(r,0,E),v=c.concat(d)}else s.validationSteps!=null&&(g=!0);const b=o.concat(r).concat(f);e.checkTrainableWeightsConsistency();const $=e.makeTrainFunction(),y=e.getDedupedMetricsNames();let w,C;g?(e.makeTestFunction(),w=e.testFunction,C=y.slice().concat(y.map(E=>"val_"+E))):(w=null,v=[],C=y.slice());const k=NF(s.callbacks,s.yieldEvery);return await A_e(e,$,b,y,h,s.epochs,s.verbose,k,w,v,s.shuffle,C,s.initialEpoch,null,null)}finally{e.isTraining=!1,Hr(o,t),Hr(r,n),Hr(a,t),Hr(i,n),Hr(c,l),Hr(d,u),f!=null&&dn(f)}}function VF(e){const t=[];e instanceof gs&&(e=[e]);for(let n=0;n<e.length;++n){const s=e[n];if(s.rank===1)t.push(qh(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(s)}}return t}function Hr(e,t){if(e==null)return;const n=[];if(t instanceof gs)n.push(t.id);else if(Array.isArray(t))t.forEach(o=>n.push(o.id));else if(t!=null)for(const o in t){const r=t[o];n.push(r.id)}const s=[];if(e instanceof gs)n.indexOf(e.id)===-1&&s.push(e);else if(Array.isArray(e))e.forEach(o=>{n.indexOf(o.id)===-1&&s.push(o)});else if(e!=null)for(const o in e){const r=e[o];n.indexOf(r.id)===-1&&s.push(r)}s.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function R_e(e){return e instanceof gs}function Z1(e){return Array.isArray(e)}function qT(e){return!R_e(e)&&!Z1(e)}function XT(e,t,n,s=!0,o=""){if(t==null||t.length===0){if(e!=null){let a=!1;if(Z1(e)&&e.length>0)a=!0;else if(qT(e)){for(const i in e)if(e.hasOwnProperty(i)){a=!0;break}}else a=!0;if(a)throw new be(`Error when checking model ${o} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(a=>null);let r;if(qT(e)){e=e,r=[];for(const a of t){if(e[a]==null)throw new be(`No data provided for "${a}". Need data for each key in: ${t}`);r.push(e[a])}}else if(Z1(e)){if(e=e,e.length!==t.length)throw new be(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);r=e}else{if(e=e,t.length>1)throw new be(`The model ${o} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);r=[e]}if(r=VF(r),n!=null)for(let a=0;a<t.length;++a){if(n[a]==null)continue;const i=r[a];if(i.shape.length!==n[a].length)throw new be(`Error when checking ${o}: expected ${t[a]} to have ${n[a].length} dimension(s). but got array with shape ${i.shape}`);for(let l=0;l<n[a].length;++l){if(l===0&&!s)continue;const u=i.shape[l],c=n[a][l];if(c!=null&&c>=0&&u!==c)throw new be(`${o} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${o} received an input with ${i.shape[0]} examples, each with shape [${i.shape.slice(1,i.shape.length)}] (tensor shape [${i.shape}])`)}}return r}function __e(e,t,n){const s=ki(e.map(r=>r.shape[0]));s.sort();const o=ki(t.map(r=>r.shape[0]));if(o.sort(),s.length>1)throw new be(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(r=>r.shape))}`);if(o.length>1)throw new be(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(s.length>0&&o.length>0&&!Dn(s,o))throw new be(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${o[0]} target sample(s).`)}function O_e(e,t,n){const s=[m0,g0,Cf];for(let o=0;o<e.length;++o){const r=e[o],a=t[o],i=n[o];if(a!=null){if(a===Cf&&r.shape[r.shape.length-1]===1)throw new be(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(a)!==-1){const l=r.shape.slice(1),u=i.slice(1);for(let c=0;c<l.length;++c){const d=l[c],f=u[c];if(f!=null&&d!==f)throw new be(`A target Tensor with shape ${r.shape} was passed for an output of shape ${i}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function YT(e,t,n,s=!0,o=""){let r;if(Array.isArray(e)){if(e.length!==t.length)throw new be(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);r=e}else{if(t.length>1)throw new be(`The model expects ${t.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);r=[e]}if(n!=null)for(let a=0;a<t.length;++a){if(n[a]==null)continue;const i=r[a];if(i.shape.length!==n[a].length)throw new be(`Error when checking ${o}: expected ${t[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(i.shape)}`);for(let l=0;l<n[a].length;++l){if(l===0&&!s)continue;const u=i.shape[l],c=n[a][l];if(c!=null&&c!==u)throw new be(`Error when checking ${o}: expected ${t[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(i.shape)}.`)}}}function M_e(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(s=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(n))return t.map(s=>n);{const s=[];for(const o of t){let r=n.hasOwnProperty(o)?n[o]:[];Array.isArray(r)||(r=[r]),s.push(r)}return s}}const F_e="layers-model";class ec extends zr{constructor(t){super(t);this.isTraining=!1}summary(t,n,s=console.log){if(!this.built)throw new be("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");h_e(this,t,n,s)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=f_e(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof ji))throw new be("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const a in t.loss)if(this.outputNames.indexOf(a)===-1)throw new be(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)t.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(jb(t.loss[a]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new be(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);n=t.loss.map(i=>jb(i))}else{const a=jb(t.loss);this.outputs.forEach(i=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const i=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(i),this.feedLossFns.push(this.lossFunctions[a])}const s=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Pl("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(s.indexOf(a)!==-1)continue;const i=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([i,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const o=M_e(t.metrics,this.outputNames),r=(a,i,l)=>{this.outputNames.length>1&&(i=this.outputNames[a]+"_"+i),this.metricsNames.push(i),this.metricsTensors.push([l,a])};Pl("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(s.indexOf(a)!==-1)continue;const i=o[a];(u=>{const c="";let d,f,h;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[a];g[g.length-1]===1||this.lossFunctions[a]===g0?["accuracy","acc"].indexOf(p)!==-1?f=RF:["crossentropy","ce"].indexOf(p)!==-1&&(f=n_e):this.lossFunctions[a]===ug?["accuracy","acc"].indexOf(p)!==-1?f=s_e:["crossentropy","ce"].indexOf(p)!==-1&&(f=MF):["accuracy","acc"].indexOf(p)!==-1?f=_F:["crossentropy","ce"].indexOf(p)!==-1&&(f=OF);let v;["accuracy","acc"].indexOf(p)!==-1?v="acc":["crossentropy","ce"].indexOf(p)!==-1&&(v="ce"),h=f,d=c+v}else h=d_e(p),d=c+zp(p);let m;Pl(d,()=>{m=h}),r(a,d,m)}})(i)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,n,s={}){const o=s.batchSize==null?32:s.batchSize;X1(o);const r=!0,a=this.standardizeUserDataXY(t,n,r,o);try{const i=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,i,o,s.verbose,s.steps);return vo(u)}finally{Hr(a[0],t),Hr(a[1],n)}}async evaluateDataset(t,n){return this.makeTestFunction(),N_e(this,t,n)}checkNumSamples(t,n,s,o="steps"){let r;if(s!=null){if(r=null,n!=null)throw new be(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(t!=null)Array.isArray(t)?r=t[0].shape[0]:r=t.shape[0];else throw new be(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return r}execute(t,n){if(Array.isArray(n)&&n.length===0)throw new be("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(n),o=s?n:[n],r=this.retrieveSymbolicTensors(o),a=new bi;if(t instanceof gs&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new be(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],t[l])}else for(const l of this.inputs){const u=t[l.name];if(u==null)throw new be(`No value is provided for the model's input ${l.name}`);a.add(l,u)}const i=Nd(r,a);return s?i:i[0]}retrieveSymbolicTensors(t){const n=Jl(null,t.length);let s=t.length;for(const o of this.layers){const r=Array.isArray(o.output)?o.output:[o.output],a=r.map(i=>i.name);for(let i=0;i<t.length;++i){const l=a.indexOf(t[i]);if(l!==-1&&(n[i]=r[l],s--),s===0)break}if(s===0)break}if(s>0){const o=[];throw n.forEach((r,a)=>{r==null&&o.push(t[a])}),new be(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(t,n=32,s=!1){return Me(()=>{const o=this.checkNumSamples(t);if(s)throw new Jt("Verbose predictLoop() is not implemented yet.");const r=Y1(o,n),a=this.outputs.map(i=>[]);for(let i=0;i<r.length;++i)Me(()=>{const u=r[i][0],c=r[i][1],d=Ad(t,u,c),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new bi(f);return Nd(this.outputs,h)}).forEach((u,c)=>a[c].push(u));return vo(a.map(i=>no(i,0)))})}predict(t,n={}){const s=VF(t);YT(s,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return X1(o),this.predictLoop(s,o)}finally{Hr(s,t)}}predictOnBatch(t){YT(t,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,n)}standardizeUserDataXY(t,n,s=!0,o){if(this.optimizer_==null)throw new vr("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let a=0;a<this.feedOutputShapes.length;++a){const i=this.feedOutputShapes[a];this.feedLossFns[a]===ug?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(t=XT(t,this.feedInputNames,this.feedInputShapes,!1,"input"),n=XT(n,this.feedOutputNames,r,!1,"target"),__e(t,n),O_e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&t[0].shape[0]%o!==0)throw new be(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${t[0].shape[0]} sample(s).`);return[t,n]}async standardizeUserData(t,n,s,o,r=!0,a){const[i,l]=this.standardizeUserDataXY(t,n,r,a);if(s!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){const c=LF(o,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await BF(l[d],null,c[d]))}return[i,l,u]}testLoop(t,n,s,o=0,r){return Me(()=>{const a=this.checkNumSamples(n,s,r,"steps"),i=[];if(o>0)throw new Jt("Verbose mode is not implemented yet.");if(r!=null)throw new Jt("steps mode in testLoop() is not implemented yet");{const l=Y1(a,s),u=Ao(ta(0,a));for(let c=0;c<l.length;++c){const d=l[c][0],f=l[c][1],h=Ll(u,d,f-d),p=X2(n,h),m=t(p);if(c===0)for(let g=0;g<m.length;++g)i.push(Gt(0));for(let g=0;g<m.length;++g){const v=m[g];i[g]=st(i[g],ge(f-d,v))}}for(let c=0;c<i.length;++c)i[c]=At(i[c],a)}return i})}getDedupedMetricsNames(){const t=this.metricsNames,n=[];for(let s=0;s<t.length;++s){const o=t[s];let r=o;_T(t,o)>1&&(r+=`_${_T(t.slice(0,s),o)}`),n.push(r)}return n}makeTrainFunction(){return t=>{const n=[],s=t.slice(0,this.inputs.length),o=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],i=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:s[m]});const f=new bi(d),h=Nd(this.outputs,f,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){let v=this.lossFunctions[m](o[m],h[m]);r[m]!=null&&(v=k_e(v,r[m]));const b=us(v);n.push(b),m===0?p=v:p=st(p,v)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const v=this.metricsTensors[m][0],b=this.metricsTensors[m][1];g=us(v(o[b],h[b]))}ka(g),a.push(g)}return p=us(p),this.calculateLosses().forEach(m=>{p=st(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),u=!0;return[this.optimizer_.minimize(i,u,l)].concat(a)}}makeTestFunction(){this.testFunction=t=>Me(()=>{const n=[];let s;const o=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:o[u]});const i=new bi(a),l=Nd(this.outputs,i);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=us(c(r[u],l[u]));u===0?s=d:s=st(s,d),n.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],f=us(c(r[d],l[d]));n.push(f)}return n})}async fit(t,n,s={}){return D_e(this,t,n,s)}async fitDataset(t,n){return I_e(this,t,n)}async trainOnBatch(t,n){const s=await this.standardizeUserData(t,n),o=s[0],r=s[1],i=this.makeTrainFunction()(o.concat(r)),l=[];for(const u of i){const c=await u.data();l.push(c[0])}return dn(i),Hr(s[0],t),Hr(s[1],n),vo(l)}getNamedWeights(t){const n=[],s=t!=null&&t.trainableOnly,o=s?this.trainableWeights:this.weights,r=this.getWeights(s);for(let a=0;a<o.length;++a)s&&!o[a].trainable||n.push({name:o[a].originalName,tensor:r[a]});return n}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=O1().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-O1().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=_a(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(n=>_a(n))}else{const n=Object.keys(this.loss);t={};const s=this.loss;for(const o of n)if(typeof s[o]=="string")t[o]=_a(s[o]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[_a(zp(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>_a(zp(t)));{const t={};for(const n in this.metrics)t[n]=_a(zp(this.metrics[n]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=j1(t.optimizer_config),s=za(n);let o;if(typeof t.loss=="string")o=yl(t.loss);else if(Array.isArray(t.loss))o=t.loss.map(a=>yl(a));else if(t.loss!=null){o={};for(const a in t.loss)o[a]=yl(t.loss[a])}let r;if(Array.isArray(t.metrics))r=t.metrics.map(a=>yl(a));else if(t.metrics!=null){r={};for(const a in t.metrics)r[a]=yl(t.metrics[a])}this.compile({loss:o,metrics:r,optimizer:s})}async save(t,n){if(typeof t=="string"){const u=lSe(t);if(u.length===0)throw new be(`Cannot find any save handlers for URL '${t}'`);if(u.length>1)throw new be(`Found more than one (${u.length}) save handlers for URL '${t}'`);t=u[0]}if(t.save==null)throw new be("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await mT(this.getNamedWeights(n)),o=!1,r=null,i={modelTopology:this.toJSON(r,o),format:F_e,generatedBy:`TensorFlow.js tfjs-layers v${PF}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){i.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await mT(await this.optimizer.getWeights(),u);s.specs.push(...d),s.data=AO([s.data,c])}return this.userDefinedMetadata!=null&&(HT(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=s.data,i.weightSpecs=s.specs,t.save(i)}setUserDefinedMetadata(t){HT(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}ec.className="Model";et(ec);class WF extends ec{}WF.className="Functional";et(WF);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kf extends ec{constructor(t){super({inputs:[],outputs:[]});if(t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:h0("sequential_"),t.layers!=null)for(const n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new be(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const n=t instanceof kf||t instanceof ec;let s;if(n){if(s=t,s.outputs.length!==1)throw new be("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new be("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new be("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=BRe({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(o)}if(n)this.outputs=s.outputs,this.inputs=s.inputs;else{if(t.inboundNodes.length!==1)throw new be(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new be("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=EF(this.outputs[0])}this.inboundNodes=[],new p0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Jl(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=t.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(Fn(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ec({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,s=console.log){this.built||this.build(),super.summary(t,n,s)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,s={}){if(!this.built)throw new vr("The model needs to be compiled before being used.");return this.model.evaluate(t,n,s)}async evaluateDataset(t,n){if(!this.built)throw new vr("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,s={}){if(!this.built)throw new vr("The model needs to be compiled before being used.");return this.model.fit(t,n,s)}async fitDataset(t,n){if(!this.built)throw new vr("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,s={},o=!1){let r,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new be("Legacy serialization format not supported yet.");r=n}else j(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,a=n;const i=new t(a);if(!(i instanceof kf))throw new Jt(`Sequential.fromConfig called on non-Sequential input: ${i}`);for(const l of r){const c=za(l,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),i.add(c)}return i}set stopTraining(t){if(this.model==null)throw new be("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new be("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const n of this.layers){const s={};s.className=n.getClassName(),s.config=n.getConfig(),t.push(s)}return{name:this.name,layers:t}}}kf.className="Sequential";et(kf);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Co extends Hc{getConfig(){return{}}}class HF extends Co{apply(t,n=1){return SRe(t,n)}}HF.className="elu";et(HF);class UF extends Co{apply(t){return CM(t)}}UF.className="selu";et(UF);class GF extends Co{apply(t){return Qa(t)}}GF.className="relu";et(GF);class KF extends Co{apply(t){return Me(()=>r0(6,Qa(t)))}}KF.className="relu6";et(KF);class jF extends Co{apply(t){return t}}jF.className="linear";et(jF);class qF extends Co{apply(t){return Uc(t)}}qF.className="sigmoid";et(qF);class XF extends Co{apply(t){return IRe(t)}}XF.className="hardSigmoid";et(XF);class YF extends Co{apply(t){return zh(t)}}YF.className="softplus";et(YF);class ZF extends Co{apply(t){return xRe(t)}}ZF.className="softsign";et(ZF);class JF extends Co{apply(t){return MC(t)}}JF.className="tanh";et(JF);class Y2 extends Co{apply(t,n=-1){return JC(t,n)}}Y2.className="softmax";et(Y2);class QF extends Co{apply(t,n=-1){return aM(t,n)}}QF.className="logSoftmax";et(QF);class eP extends Co{apply(t,n=1){return Me(()=>ge(Uc(ge(t,n)),t))}}eP.className="swish";et(eP);class tP extends Co{apply(t){return Me(()=>ge(t,MC(zh(t))))}}tP.className="mish";et(tP);function Ni(e){return e.getClassName()}function Xb(e,t={}){return Kh(e,hr.getMap().classNameMap,t,"activation")}function Ai(e){if(e==null){const t={};return t.className="linear",t.config={},Xb(t)}if(typeof e=="string"){const t={};return t.className=e,t.config={},Xb(t)}else return e instanceof Co?e:Xb(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function P_e(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class nP extends Hc{}class sP extends nP{constructor(t){super();P_e(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return Me(()=>{let n=_s([1]);return this.hasL1&&(n=st(n,Et(ge(this.l1,Ds(t))))),this.hasL2&&(n=st(n,Et(ge(this.l2,Xh(t))))),Se(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,n){return new t({l1:n.l1,l2:n.l2})}}sP.className="L1L2";et(sP);const ZT={l1l2:"L1L2"};function Vn(e){return M2(e)}function JT(e,t={}){return Kh(e,hr.getMap().classNameMap,t,"regularizer")}function ns(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in ZT?ZT[e]:e,config:{}};return JT(n)}else return e instanceof nP?e:JT(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class oP extends Sn{constructor(t){super(t==null?{}:t);this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,n){t=nn(t);let s=Qa(t);return this.maxValue!=null&&(s=nr(s,0,this.maxValue)),s}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},n=super.getConfig();return Object.assign(t,n),t}}oP.className="ReLU";et(oP);class rP extends Sn{constructor(t){super(t==null?{}:t);this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const s=nn(t);return VC(s,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}rP.className="LeakyReLU";et(rP);class aP extends Sn{constructor(t){super(t==null?{}:t);if(this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=ts(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ns(t.alphaRegularizer),this.alphaConstraint=Ts(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new be(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=Fn(t);const n=t.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let o=1;o<t.length;++o)s[o]=t[o];this.inputSpec=[new Is({ndim:t.length,axes:s})],this.built=!0}call(t,n){return t=nn(t),XC(t,this.alpha.read())}getConfig(){const t={alphaInitializer:as(this.alphaInitializer),alphaRegularizer:Vn(this.alphaRegularizer),alphaConstraint:Es(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(t,n),t}}aP.className="PReLU";et(aP);class iP extends Sn{constructor(t){super(t==null?{}:t);if(this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new Jt(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const s=nn(t);return n0(s)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}iP.className="ELU";et(iP);class lP extends Sn{constructor(t){super(t==null?{}:t);this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,n){const s=nn(t);return ge(s,mt(Dr(s,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},n=super.getConfig();return Object.assign(t,n),t}}lP.className="ThresholdedReLU";et(lP);class uP extends Sn{constructor(t){super(t==null?{}:t);this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new Y2().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,n){const s=nn(t);return this.softmax(s,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}uP.className="Softmax";et(uP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tc(e,t,n){if(typeof e=="number")return Jl(e,t);if(e.length!==t)throw new be(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let s=0;s<t;++s){const o=e[s];if(!wRe(o))throw new be(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${o}`)}return e}function Xr(e,t,n,s,o=1){if(e==null)return e;const r=t+(t-1)*(o-1);let a;return n==="same"?a=e:a=e-r+1,Math.floor((a+s-1)/s)}function ha(e,t,n,s){if(e==null)return null;if(s==="valid")e=e*t+Ti([n-t,0]);else if(s==="same")e=e*t;else throw new be(`Unsupport padding mode: ${s}.`);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z2(e,t){return Me(()=>(ms(t),t==="channelsFirst"?Tn(e,[0,2,3,1]):e))}function cP(e,t){return Me(()=>(ms(t),t==="channelsFirst"?Tn(e,[0,2,3,4,1]):e))}function L_e(e,t,n,s=1,o="valid",r,a=1){return Me(()=>{if(r==null&&(r=ea()),ms(r),e.shape.length!==3)throw new be(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new be(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new be(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(r==="channelsFirst"&&(e=Tn(e,[0,2,1])),o==="causal")throw new Jt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let i=JO(e,t,s,o==="same"?"same":"valid","NWC",a);return n!=null&&(i=la(i,n)),i})}function QT(e,t,n,s=[1,1],o="valid",r,a,i=null){return Me(()=>{if(r==null&&(r=ea()),ms(r),e.rank!==3&&e.rank!==4)throw new be(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new be(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=Z2(e,r);if(o==="causal")throw new Jt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=zTe({x:l,filter:t,strides:s,pad:o==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:i}),r==="channelsFirst"&&(l=Tn(l,[0,3,1,2])),l})}function B_e(e,t,n,s=[1,1,1],o="valid",r,a){return Me(()=>{if(r==null&&(r=ea()),ms(r),e.rank!==4&&e.rank!==5)throw new be(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new be(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let i=cP(e,r);if(o==="causal")throw new Jt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return i=sIe(i,t,s,o==="same"?"same":"valid","NDHWC",a),n!=null&&(i=la(i,n)),r==="channelsFirst"&&(i=Tn(i,[0,4,1,2,3])),i})}class v0 extends Sn{constructor(t,n){super(n);if(this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",v0.verifyArgs(n),this.rank=t,Os(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Jt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=tc(n.kernelSize,t,"kernelSize"),this.strides=tc(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,or(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,ms(this.dataFormat),this.activation=Ai(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=ts(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ts(n.biasConstraint),this.biasRegularizer=ns(n.biasRegularizer),this.activityRegularizer=ns(n.activityRegularizer),this.dilationRate=tc(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new be(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new be(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new be(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(fa("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!F2(t.kernelSize,"number",1,3))throw new be(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ni(this.activation),useBias:this.useBias,biasInitializer:as(this.biasInitializer),biasRegularizer:Vn(this.biasRegularizer),activityRegularizer:Vn(this.activityRegularizer),biasConstraint:Es(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}class Xc extends v0{constructor(t,n){super(t,n);this.kernel=null,Xc.verifyArgs(n),this.filters=n.filters,Os(this.filters,"filters"),this.kernelInitializer=ts(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ts(n.kernelConstraint),this.kernelRegularizer=ns(n.kernelRegularizer)}build(t){t=Fn(t);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new be(`The channel dimension of the input should be defined. Found ${t[n]}`);const s=t[n],o=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:s}}],this.built=!0}call(t,n){return Me(()=>{t=nn(t);let s;const o=this.bias==null?null:this.bias.read(),r=lF(this.activation.getClassName());if(r!=null&&this.rank===2)s=QT(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)s=L_e(t,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=QT(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=B_e(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Jt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(t){t=Fn(t);const n=[],s=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let r=0;r<s.length;++r){const a=Xr(s[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);n.push(a)}let o=[t[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const t={filters:this.filters,kernelInitializer:as(this.kernelInitializer),kernelRegularizer:Vn(this.kernelRegularizer),kernelConstraint:Es(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new be(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class Jh extends Xc{constructor(t){super(2,t);Jh.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!F2(t.kernelSize,"number",1,2))throw new be(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}Jh.className="Conv2D";et(Jh);class Qh extends Xc{constructor(t){super(3,t);Qh.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new be(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}Qh.className="Conv3D";et(Qh);class dP extends Jh{constructor(t){super(t);if(this.inputSpec=[new Is({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new be(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Fn(t),t.length!==4)throw new be("Input should have rank 4; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new be("The channel dimension of the inputs should be defined. Found `None`.");const s=t[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Is({ndim:4,axes:{[n]:s}})],this.built=!0}call(t,n){return Me(()=>{let s=nn(t);if(s.shape.length!==4)throw new be(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let a,i;this.dataFormat==="channelsFirst"?(a=2,i=3):(a=1,i=2);const l=o[a],u=o[i],c=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=ha(l,f,c,this.padding),m=ha(u,h,d,this.padding),g=[r,p,m,this.filters];this.dataFormat!=="channelsLast"&&(s=Tn(s,[0,2,3,1]));let v=QO(s,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=Tn(v,[0,3,1,2])),this.bias!=null&&(v=la(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(t){t=Fn(t);const n=t.slice();let s,o,r;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3):(s=3,o=1,r=2);const a=this.kernelSize[0],i=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[s]=this.filters,n[o]=ha(n[o],l,a,this.padding),n[r]=ha(n[r],u,i,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}dP.className="Conv2DTranspose";et(dP);class fP extends Qh{constructor(t){super(t);if(this.inputSpec=[new Is({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new be(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Fn(t),t.length!==5)throw new be("Input should have rank 5; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new be("The channel dimension of the inputs should be defined. Found `None`.");const s=t[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Is({ndim:5,axes:{[n]:s}})],this.built=!0}call(t,n){return Me(()=>{let s=nn(t);if(s.shape.length!==5)throw new be(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let a,i,l;this.dataFormat==="channelsFirst"?(l=2,a=3,i=4):(l=1,a=2,i=3);const u=o[l],c=o[a],d=o[i],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],v=this.strides[2],b=ha(u,m,f,this.padding),$=ha(c,g,h,this.padding),y=ha(d,v,p,this.padding),w=[r,b,$,y,this.filters];this.dataFormat!=="channelsLast"&&(s=Tn(s,[0,2,3,4,1]));let C=aIe(s,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Tn(C,[0,4,1,2,3])),this.bias!==null&&(C=la(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(t){t=Fn(t);const n=t.slice();let s,o,r,a;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3,a=4):(s=4,o=1,r=2,a=3);const i=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],f=this.strides[2];return n[s]=this.filters,n[o]=ha(n[o],c,i,this.padding),n[r]=ha(n[r],d,l,this.padding),n[a]=ha(n[a],f,u,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}fP.className="Conv3DTranspose";et(fP);class hP extends Xc{constructor(t,n){super(t,n);if(this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new be("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new be("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new be(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=ts(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ns(n.depthwiseRegularizer),this.depthwiseConstraint=Ts(n.depthwiseConstraint),this.pointwiseInitializer=ts(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ns(n.pointwiseRegularizer),this.pointwiseConstraint=Ts(n.pointwiseConstraint)}build(t){if(t=Fn(t),t.length<this.rank+2)throw new be(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null||t[n]<0)throw new be(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[n])}`);const s=t[n],o=this.kernelSize.concat([s,this.depthMultiplier]),r=[];for(let i=0;i<this.rank;++i)r.push(1);r.push(s*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Is({ndim:this.rank+2,axes:{[n]:s}})],this.built=!0}call(t,n){return Me(()=>{t=nn(t);let s;if(this.rank===1)throw new Jt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=Tn(t,[0,2,3,1])),s=kM(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=la(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=Tn(s,[0,3,1,2])),s})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=as(this.depthwiseInitializer),t.pointwiseInitializer=as(this.pointwiseInitializer),t.depthwiseRegularizer=Vn(this.depthwiseRegularizer),t.pointwiseRegularizer=Vn(this.pointwiseRegularizer),t.depthwiseConstraint=Es(this.depthwiseConstraint),t.pointwiseConstraint=Es(this.pointwiseConstraint),t}}hP.className="SeparableConv";class pP extends hP{constructor(t){super(2,t)}}pP.className="SeparableConv2D";et(pP);class b0 extends Xc{constructor(t){super(1,t);b0.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!F2(t.kernelSize,"number",1,1))throw new be(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}b0.className="Conv1D";et(b0);class mP extends Sn{constructor(t){super(t);typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,n){return Me(()=>{if(t=nn(t),this.dataFormat==="channelsLast"){const s=Lp(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Lp(s,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=Lp(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Lp(s,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}mP.className="Cropping2D";et(mP);class gP extends Sn{constructor(t){super(t);this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,ms(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,vRe(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const n=t[2]==null?null:this.size[0]*t[2],s=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],n,s]}else{const n=t[1]==null?null:this.size[0]*t[1],s=t[2]==null?null:this.size[1]*t[2];return[t[0],n,s,t[3]]}}call(t,n){return Me(()=>{let s=nn(t);const o=s.shape;if(this.dataFormat==="channelsFirst"){s=Tn(s,[0,2,3,1]);const r=this.size[0]*o[2],a=this.size[1]*o[3],i=this.interpolation==="nearest"?Fp.resizeNearestNeighbor(s,[r,a]):Fp.resizeBilinear(s,[r,a]);return Tn(i,[0,3,1,2])}else{const r=this.size[0]*o[1],a=this.size[1]*o[2];return this.interpolation==="nearest"?Fp.resizeNearestNeighbor(s,[r,a]):Fp.resizeBilinear(s,[r,a])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}gP.className="UpSampling2D";et(gP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function z_e(e,t,n=[1,1],s="valid",o,r){return Me(()=>{o==null&&(o=ea()),ms(o);let a=Z2(e,o);if(e.rank!==4)throw new be(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new be(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return a=BC(a,t,n,s==="same"?"same":"valid","NHWC",r),o==="channelsFirst"&&(a=Tn(a,[0,3,1,2])),a})}class vP extends v0{constructor(t){super(2,t);this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=ts(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ts(t.depthwiseConstraint),this.depthwiseRegularizer=ns(t.depthwiseRegularizer)}build(t){if(t=Fn(t),t.length<4)throw new be(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(t[n]==null||t[n]<0)throw new be(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[n]}).`);const s=t[n],o=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Me(()=>{t=nn(t);let s=z_e(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=la(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(t){t=Fn(t);const n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=Xr(n,this.kernelSize[0],this.padding,this.strides[0]),a=Xr(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],o,r,a]:[t[0],r,a,o]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=as(this.depthwiseInitializer),t.depthwiseRegularizer=Vn(this.depthwiseRegularizer),t.depthwiseConstraint=Es(this.depthwiseRegularizer),t}}vP.className="DepthwiseConv2D";et(vP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bP(e,t,n,s){if(Array.isArray(e)){if(t!=null||n!=null)throw new be("When inputs is an array, neither initialState or constants should be provided");s!=null&&(n=e.slice(e.length-s,e.length),e=e.slice(0,e.length-s)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(r){return r==null||Array.isArray(r)?r:[r]}return t=o(t),n=o(n),{inputs:e,initialState:t,constants:n}}function yP(e,t,n,s=!1,o,r,a=!1,i=!1){return Me(()=>{const l=t.shape.length;if(l<3)throw new be(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(ta(2,l));if(t=Tn(t,u),r!=null)throw new Jt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=mt(mt(o,"bool"),"float32"),o.rank===l-1&&(o=dr(o,-1)),o=Tn(o,u)),s&&(t=Xl(t,0),o!=null&&(o=Xl(o,0)));const c=[];let d,f=n;const h=t.shape[0],p=Sc(t);let m;o!=null&&(m=Sc(o));for(let v=0;v<h;++v){const b=p[v],$=Me(()=>e(b,f));if(o==null)d=$[0],f=$[1];else{const y=Me(()=>{const w=m[v],C=Tt(Ir(w),w),k=st(ge($[0],w),ge(f[0],C)),S=f.map((E,x)=>st(ge($[1][x],w),ge(E,C)));return{output:k,newStates:S}});d=y.output,f=y.newStates}i&&c.push(d)}let g;return i&&(g=Yl(c,1)),[d,g,f]})}class qi extends Sn{constructor(t){super(t);let n;if(t.cell==null)throw new be("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new ek({cells:t.cell}):n=t.cell,n.stateSize==null)throw new be("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new Is({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ta(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){U1(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const s=n[0];let o;if(this.returnSequences?o=[t[0],t[1],s]:o=[t[0],s],this.returnState){const r=[];for(const a of n)r.push([t[0],a]);return[o].concat(r)}else return o}computeMask(t,n){return Me(()=>{Array.isArray(n)&&(n=n[0]);const s=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(r=>null);return[s].concat(o)}else return s})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let s=0;s<t;++s)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new Jt("Constants support is not implemented in RNN yet.");U1(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,s=t.slice(2);this.inputSpec[0]=new Is({shape:[n,null,...s]});const o=[t[0]].concat(t.slice(2));this.cell.build(o);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!Dn(this.stateSpec.map(a=>a.shape[a.shape.length-1]),r))throw new be(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(a=>new Is({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){Me(()=>{if(!this.stateful)throw new da("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new be("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>_s([s,o])):this.states_=[_s([s,this.cell.stateSize])];else if(t==null)dn(this.states_),this.keptStates!=null&&(dn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>_s([s,o])):this.states_[0]=_s([s,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new be(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):dn(this.states_);for(let o=0;o<this.states_.length;++o){const r=t[o],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,i=[s,a];if(!Dn(r.shape,i))throw new be(`State ${o} is incompatible with layer ${this.name}: expected shape=${i}, received shape=${r.shape}`);this.states_[o]=r}}this.states_=this.states_.map(o=>ka(o.clone()))})}apply(t,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=bP(t,s,o,this.numConstants);t=r.inputs,s=r.initialState,o=r.constants;let a=[],i=[];if(s!=null){n.initialState=s,a=a.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new Is({shape:u.shape}));i=i.concat(this.stateSpec)}if(o!=null&&(n.constants=o,a=a.concat(o),this.numConstants=o.length),a[0]instanceof ma){const u=[t].concat(a),c=this.inputSpec.concat(i),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(t,n)}call(t,n){return Me(()=>{const s=n==null?null:n.mask,o=n==null?null:n.training;let r=n==null?null:n.initialState;t=nn(t),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(t));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==a)throw new be(`RNN Layer has ${a} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:o},u=yP((p,m)=>{const g=this.cell.call([p].concat(m),i);return[g[0],g.slice(1)]},t,r,this.goBackwards,s,null,this.unroll,this.returnSequences),c=u[0],d=u[1],f=u[2];this.stateful&&this.resetStates(f,o);const h=this.returnSequences?d:c;return this.returnState?[h].concat(f):h})}getInitialState(t){return Me(()=>{let n=_s(t.shape);return n=Et(n,[1,2]),n=qh(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?W1(n,[1,s]):n):this.cell.stateSize>1?[W1(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===qi.className&&(n.cell={className:this.cell.getClassName(),config:s}),Object.assign({},s,t,n)}static fromConfig(t,n,s={}){const o=n.cell,r=za(o,s);return new t(Object.assign(n,{cell:r}))}}qi.className="RNN";et(qi);class y0 extends Sn{}class J2 extends y0{constructor(t){super(t);this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Os(this.units,"units"),this.activation=Ai(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ts(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ts(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ts(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ns(t.kernelRegularizer),this.recurrentRegularizer=ns(t.recurrentRegularizer),this.biasRegularizer=ns(t.biasRegularizer),this.kernelConstraint=Ts(t.kernelConstraint),this.recurrentConstraint=Ts(t.recurrentConstraint),this.biasConstraint=Ts(t.biasConstraint),this.dropout=xc([1,Ti([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=xc([1,Ti([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Fn(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Me(()=>{if(t=t,t.length!==2)throw new be(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let s=t[1];t=t[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Di({ones:()=>Ir(t),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Di({ones:()=>Ir(s),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let r;const a=this.dropoutMask,i=this.recurrentDropoutMask;a!=null?r=wa(ge(t,a),this.kernel.read()):r=wa(t,this.kernel.read()),this.bias!=null&&(r=la(r,this.bias.read())),i!=null&&(s=ge(s,i));let l=st(r,wa(s,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Ni(this.activation),useBias:this.useBias,kernelInitializer:as(this.kernelInitializer),recurrentInitializer:as(this.recurrentInitializer),biasInitializer:as(this.biasInitializer),kernelRegularizer:Vn(this.kernelRegularizer),recurrentRegularizer:Vn(this.recurrentRegularizer),biasRegularizer:Vn(this.biasRegularizer),activityRegularizer:Vn(this.activityRegularizer),kernelConstraint:Es(this.kernelConstraint),recurrentConstraint:Es(this.recurrentConstraint),biasConstraint:Es(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,n)}}J2.className="SimpleRNNCell";et(J2);class wP extends qi{constructor(t){t.cell=new J2(t);super(t)}call(t,n){return Me(()=>{this.cell.dropoutMask!=null&&(dn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return new t(n)}}wP.className="SimpleRNN";et(wP);class Q2 extends y0{constructor(t){super(t);if(this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new be("GRUCell does not support reset_after parameter set to true.");this.units=t.units,Os(this.units,"units"),this.activation=Ai(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ai(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ts(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ts(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ts(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ns(t.kernelRegularizer),this.recurrentRegularizer=ns(t.recurrentRegularizer),this.biasRegularizer=ns(t.biasRegularizer),this.kernelConstraint=Ts(t.kernelConstraint),this.recurrentConstraint=Ts(t.recurrentConstraint),this.biasConstraint=Ts(t.biasConstraint),this.dropout=xc([1,Ti([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=xc([1,Ti([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Fn(t);const n=t[t.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Me(()=>{if(t=t,t.length!==2)throw new be(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const s=n.training==null?!1:n.training;let o=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Di({ones:()=>Ir(t),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Di({ones:()=>Ir(o),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,a=this.recurrentDropoutMask;let i,l,u;0<this.dropout&&this.dropout<1&&(t=ge(t,r[0]));let c=wa(t,this.kernel.read());this.useBias&&(c=la(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=ge(o,a[0]));const d=this.recurrentKernel.read(),[f,h]=Jo(d,[2*this.units,this.units],d.rank-1),p=wa(o,f),[m,g,v]=Jo(c,3,c.rank-1),[b,$]=Jo(p,2,p.rank-1);i=this.recurrentActivation.apply(st(m,b)),l=this.recurrentActivation.apply(st(g,$));const y=wa(ge(l,o),h);u=this.activation.apply(st(v,y));const w=st(ge(i,o),ge(st(1,ls(i)),u));return[w,w]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Ni(this.activation),recurrentActivation:Ni(this.recurrentActivation),useBias:this.useBias,kernelInitializer:as(this.kernelInitializer),recurrentInitializer:as(this.recurrentInitializer),biasInitializer:as(this.biasInitializer),kernelRegularizer:Vn(this.kernelRegularizer),recurrentRegularizer:Vn(this.recurrentRegularizer),biasRegularizer:Vn(this.biasRegularizer),activityRegularizer:Vn(this.activityRegularizer),kernelConstraint:Es(this.kernelConstraint),recurrentConstraint:Es(this.recurrentConstraint),biasConstraint:Es(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,n)}}Q2.className="GRUCell";et(Q2);class $P extends qi{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Q2(t);super(t)}call(t,n){return Me(()=>{this.cell.dropoutMask!=null&&(dn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}$P.className="GRU";et($P);class w0 extends y0{constructor(t){super(t);this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Os(this.units,"units"),this.activation=Ai(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ai(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ts(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ts(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ts(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=ns(t.kernelRegularizer),this.recurrentRegularizer=ns(t.recurrentRegularizer),this.biasRegularizer=ns(t.biasRegularizer),this.kernelConstraint=Ts(t.kernelConstraint),this.recurrentConstraint=Ts(t.recurrentConstraint),this.biasConstraint=Ts(t.biasConstraint),this.dropout=xc([1,Ti([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=xc([1,Ti([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var n;t=Fn(t);const s=t[t.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,a=this.units;o=new(n=class extends Rr{apply(l,u){const c=r.apply([a]),d=new B2().apply([a]),f=r.apply([a*2]);return PT(PT(c,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,n){return Me(()=>{const s=n.training==null?!1:n.training;if(t=t,t.length!==3)throw new be(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let o=t[1];const r=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Di({ones:()=>Ir(t),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Di({ones:()=>Ir(o),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(t=ge(t,a[0]));let f=wa(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=ge(o,i[0])),f=st(f,wa(o,this.recurrentKernel.read())),this.useBias&&(f=la(f,this.bias.read()));const[h,p,m,g]=Jo(f,4,f.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=st(ge(u,r),ge(l,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const v=ge(d,this.activation.apply(c));return[v,v,c]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Ni(this.activation),recurrentActivation:Ni(this.recurrentActivation),useBias:this.useBias,kernelInitializer:as(this.kernelInitializer),recurrentInitializer:as(this.recurrentInitializer),biasInitializer:as(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Vn(this.kernelRegularizer),recurrentRegularizer:Vn(this.recurrentRegularizer),biasRegularizer:Vn(this.biasRegularizer),activityRegularizer:Vn(this.activityRegularizer),kernelConstraint:Es(this.kernelConstraint),recurrentConstraint:Es(this.recurrentConstraint),biasConstraint:Es(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,n)}}w0.className="LSTMCell";et(w0);class CP extends qi{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new w0(t);super(t)}call(t,n){return Me(()=>{this.cell.dropoutMask!=null&&(dn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}CP.className="LSTM";et(CP);class ek extends y0{constructor(t){super(t);this.cells=t.cells}get stateSize(){const t=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?t.push(...n.stateSize):t.push(n.stateSize);return t}call(t,n){return Me(()=>{t=t;let s=t.slice(1);const o=[];for(const i of this.cells.slice().reverse())Array.isArray(i.stateSize)?o.push(s.splice(0,i.stateSize.length)):o.push(s.splice(0,1));o.reverse();const r=[];let a;for(let i=0;i<this.cells.length;++i){const l=this.cells[i];s=o[i],i===0?a=[t[0]].concat(s):a=[a[0]].concat(s),a=l.call(a,n),r.push(a.slice(1))}s=[];for(const i of r.slice().reverse())s.push(...i);return[a[0]].concat(s)})}build(t){U1(t)&&(t=t[0]),t=t;let n;this.cells.forEach((s,o)=>{Pl(`RNNCell_${o}`,()=>{s.build(t),Array.isArray(s.stateSize)?n=s.stateSize[0]:n=s.stateSize,t=[t[0],n]})}),this.built=!0}getConfig(){const t=super.getConfig(),n=r=>({className:r.getClassName(),config:r.getConfig()}),o={cells:this.cells.map(n)};return Object.assign({},t,o)}static fromConfig(t,n,s={}){const o=[];for(const r of n.cells)o.push(za(r,s));return new t({cells:o})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const n of this.cells)t.push(...n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.cells)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.cells)n.push(...s.trainableWeights);return n.concat(t)}return t}getWeights(){const t=[];for(const n of this.cells)t.push(...n.weights);return G1(t)}setWeights(t){const n=[];for(const s of this.cells){const o=s.weights.length,r=t.splice(o);for(let a=0;a<s.weights.length;++a)n.push([s.weights[a],r[a]])}K2(n)}}ek.className="StackedRNNCells";et(ek);function Di(e){const{ones:t,rate:n,training:s=!1,count:o=1,dropoutFunc:r}=e,a=()=>r!=null?r(t(),n):bF(t(),n),i=()=>Yh(a,t,s);return!o||o<=1?ka(i().clone()):Array(o).fill(void 0).map(i).map(u=>ka(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var V_e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n};class kP extends qi{constructor(t){if(t.unroll)throw new Jt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new Jt("It is not possible at the moment to stack convolutional cells.");super(t);this.inputSpec=[new Is({ndim:5})]}call(t,n){return Me(()=>{if(this.cell.dropoutMask!=null&&(dn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new be("ConvRNN2D cell does not support constants");const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}computeOutputShape(t){let n=this.computeSingleOutputShape(t);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([t[0],...n.slice(-3)])]),n}getInitialState(t){return Me(()=>{const{stateSize:n}=this.cell,s=t.shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)],a=_s(r);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(t,n=!1){Me(()=>{if(!this.stateful)throw new da("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)];if(s[0]==null)throw new be("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_s(r)):this.states_=[_s(r)];else if(t==null)dn(this.states_),this.keptStates!=null&&(dn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_s(r)):this.states_[0]=_s(r);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new be(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n?this.keptStates.push(this.states_.slice()):dn(this.states_);for(let i=0;i<this.states_.length;++i){const l=t[i],u=r;if(!Dn(l.shape,u))throw new be(`State ${i} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[i]=l}}this.states_=this.states_.map(i=>ka(i.clone()))})}computeSingleOutputShape(t){const{dataFormat:n,filters:s,kernelSize:o,padding:r,strides:a,dilationRate:i}=this.cell,l=n==="channelsFirst",u=t[l?3:2],c=t[l?4:3],d=Xr(u,o[0],r,a[0],i[0]),f=Xr(c,o[1],r,a[1],i[1]);return[...t.slice(0,2),...l?[s,d,f]:[d,f,s]]}}kP.className="ConvRNN2D";class tk extends w0{constructor(t){const{filters:n,kernelSize:s,strides:o,padding:r,dataFormat:a,dilationRate:i}=t;super(Object.assign({},t,{units:n}));this.filters=n,Os(this.filters,"filters"),this.kernelSize=tc(s,2,"kernelSize"),this.kernelSize.forEach(l=>Os(l,"kernelSize")),this.strides=tc(o||1,2,"strides"),this.strides.forEach(l=>Os(l,"strides")),this.padding=r||"valid",or(this.padding),this.dataFormat=a||"channelsLast",ms(this.dataFormat),this.dilationRate=tc(i||1,2,"dilationRate"),this.dilationRate.forEach(l=>Os(l,"dilationRate"))}build(t){var n;t=Fn(t);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new be(`The channel dimension of the input should be defined. Found ${t[s]}`);const o=t[s],r=4,a=this.kernelSize.concat([o,this.filters*r]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const i=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Rr{apply(f,h){const p=u.apply([c]),m=Gi([c]),g=u.apply([c*2]);return L2([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,n){return Me(()=>{if(t.length!==3)throw new be(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const s=n.training||!1,o=t[0],r=t[1],a=t[2],i=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Di({ones:()=>Ir(o),rate:this.dropout,training:s,count:i,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(se,ke,te)=>!ke||!ke[te]?se:ge(ke[te],se);let c=u(o,l,0),d=u(o,l,1),f=u(o,l,2),h=u(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Di({ones:()=>Ir(r),rate:this.recurrentDropout,training:s,count:i,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(r,p,0),g=u(r,p,1),v=u(r,p,2),b=u(r,p,3);const $=3,[y,w,C,k]=Jo(this.kernel.read(),i,$),[S,E,x,N]=this.useBias?Jo(this.bias.read(),i):[null,null,null,null];c=this.inputConv(c,y,S,this.padding),d=this.inputConv(d,w,E,this.padding),f=this.inputConv(f,C,x,this.padding),h=this.inputConv(h,k,N,this.padding);const[A,D,M,F]=Jo(this.recurrentKernel.read(),i,$);m=this.recurrentConv(m,A),g=this.recurrentConv(g,D),v=this.recurrentConv(v,M),b=this.recurrentConv(b,F);const R=this.recurrentActivation.apply(st(c,m)),P=this.recurrentActivation.apply(st(d,g)),V=st(ge(P,a),ge(R,this.activation.apply(st(f,v)))),G=ge(this.recurrentActivation.apply(st(h,b)),this.activation.apply(V));return[G,G,V]})}getConfig(){const t=super.getConfig(),n=V_e(t,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,s)}inputConv(t,n,s,o){const r=jl(t,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?la(r,s,this.dataFormat):r}recurrentConv(t,n){return jl(t,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}tk.className="ConvLSTM2DCell";et(tk);class SP extends kP{constructor(t){const n=new tk(t);super(Object.assign({},t,{cell:n}))}static fromConfig(t,n){return new t(n)}}SP.className="ConvLSTM2D";et(SP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nk extends Sn{constructor(t){super(t);this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const n=t.shape,s=[];for(let o=0;o<this.noiseShape.length;++o)s.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return s}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=nn(t);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,r=this.getNoiseShape(s);return Yh(()=>bF(s,this.rate,r,this.seed),()=>s,o)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(t,n),t}dispose(){return super.dispose()}}nk.className="Dropout";et(nk);class xP extends nk{constructor(t){super(t);this.inputSpec=[{ndim:3}]}getNoiseShape(t){const n=t.shape;return[n[0],1,n[2]]}}xP.className="SpatialDropout1D";et(xP);class IP extends Sn{constructor(t){super(t);if(this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let n=null;t.batchSize!=null&&(n=t.batchSize),this.batchInputShape=[n,t.inputDim]}this.units=t.units,Os(this.units,"units"),this.activation=Ai(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=ts(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ts(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ts(t.kernelConstraint),this.biasConstraint=Ts(t.biasConstraint),this.kernelRegularizer=ns(t.kernelRegularizer),this.biasRegularizer=ns(t.biasRegularizer),this.activityRegularizer=ns(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=Fn(t);const n=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(t){t=Fn(t);const n=t.slice();return n[n.length-1]=this.units,n}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=nn(t),o=lF(this.activation.getClassName());let r;return o!=null?r=wa(s,this.kernel.read(),o,this.bias?this.bias.read():null):(r=wa(s,this.kernel.read()),this.bias!=null&&(r=la(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const t={units:this.units,activation:Ni(this.activation),useBias:this.useBias,kernelInitializer:as(this.kernelInitializer),biasInitializer:as(this.biasInitializer),kernelRegularizer:Vn(this.kernelRegularizer),biasRegularizer:Vn(this.biasRegularizer),activityRegularizer:Vn(this.activityRegularizer),kernelConstraint:Es(this.kernelConstraint),biasConstraint:Es(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}IP.className="Dense";et(IP);class EP extends Sn{constructor(t){t=t||{};super(t);this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Fn(t);for(const n of t.slice(1))if(n==null)throw new be(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],Si(t,1)]}call(t,n){return Me(()=>{this.invokeCallHook(t,n);let s=nn(t);if(this.dataFormat==="channelsFirst"&&s.rank>1){const o=[0];for(let r=2;r<s.rank;++r)o.push(r);o.push(1),s=Tn(s,o)}return kRe(s)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(t,n),t}}EP.className="Flatten";et(EP);class TP extends Sn{constructor(t){super(t);this.supportsMasking=!0,this.activation=Ai(t.activation)}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=nn(t);return this.activation.apply(s)})}getConfig(){const t={activation:Ni(this.activation)},n=super.getConfig();return Object.assign(t,n),t}}TP.className="Activation";et(TP);class NP extends Sn{constructor(t){super(t);this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,n){return Me(()=>(t=nn(t),$Re(t,this.n)))}getConfig(){const t={n:this.n},n=super.getConfig();return Object.assign(t,n),t}}NP.className="RepeatVector";et(NP);class AP extends Sn{constructor(t){super(t);this.targetShape=t.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,n){const s="Total size of new array must be unchanged.",o=n.slice();let r=1,a=null;for(let l=0;l<o.length;++l){const u=o[l];if(this.isUnknown(u))if(a===null)a=l;else throw new be("Can only specifiy one unknown dimension.");else r*=u}const i=Si(t);if(a!==null){if(r===0||i%r!==0)throw new be(s);o[a]=i/r}else if(i!==r)throw new be(s);return o}computeOutputShape(t){let n=!1;for(let s=0;s<t.length;++s)if(this.isUnknown(t[s])){n=!0;break}return n?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=nn(t),o=s.shape,r=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return Se(s,r)})}getConfig(){const t={targetShape:this.targetShape},n=super.getConfig();return Object.assign(t,n),t}}AP.className="Reshape";et(AP);class DP extends Sn{constructor(t){super(t);if(t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const n=ta(1,t.dims.length+1);if(!Dn(t.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Is({ndim:this.dims.length+1})]}computeOutputShape(t){t=Fn(t);const n=t.slice();return this.dims.forEach((s,o)=>{n[o+1]=t[s]}),n}call(t,n){return Tn(nn(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},n=super.getConfig();return Object.assign(t,n),t}}DP.className="Permute";et(DP);class RP extends Sn{constructor(t){super(t==null?{}:t);this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,t),n}computeMask(t,n){const s=nn(t),o=-1;return M1(wf(s,this.maskValue),o)}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=nn(t),o=-1,r=!0,a=M1(wf(s,this.maskValue),o,r);return ge(s,mt(a,s.dtype))})}}RP.className="Masking";et(RP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _P extends Sn{constructor(t){super(t);if(this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let n=null;t.batchSize!=null&&(n=t.batchSize),t.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Xn(t.inputLength))}this.inputDim=t.inputDim,Os(this.inputDim,"inputDim"),this.outputDim=t.outputDim,Os(this.outputDim,"outputDim"),this.embeddingsInitializer=ts(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ns(t.embeddingsRegularizer),this.activityRegularizer=ns(t.activityRegularizer),this.embeddingsConstraint=Ts(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,n){return Me(()=>this.maskZero?(t=nn(t),wf(t,$n(t))):null)}computeOutputShape(t){if(t=Fn(t),this.inputLength==null)return[...t,this.outputDim];const n=Xn(this.inputLength);if(n.length!==t.length-1)throw new be(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let s=0;for(let o=0;o<n.length;++o){const r=n[o],a=t[o+1];if(r!=null&&a!=null&&r!==a)throw new be(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);r==null&&(n[s]=a),s++}}return[t[0],...n,this.outputDim]}call(t,n){return Me(()=>{this.invokeCallHook(t,n);let s=nn(t);s.dtype!=="int32"&&(s=d0(s,"int32"));const o=vF(this.embeddings.read(),Se(s,[s.size]));return Se(o,Fn(this.computeOutputShape(s.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:as(this.embeddingsInitializer),embeddingsRegularizer:Vn(this.embeddingsRegularizer),activityRegularizer:Vn(this.activityRegularizer),embeddingsConstraint:Es(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(t,n),t}}_P.className="Embedding";et(_P);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cu extends Sn{constructor(t){super(t||{});this.supportsMasking=!0}mergeFunction(t){throw new Jt}computeElementwiseOpOutputShape(t,n){if(t==null||n==null)return null;if(t.length<n.length)return this.computeElementwiseOpOutputShape(n,t);if(n.length===0)return t;const s=t.slice(0,t.length-n.length);for(let o=0;o<n.length;++o){const r=t[t.length-n.length+o],a=n[o];if(r==null||a==null||r<0||a<0)s.push(null);else if(r===1)s.push(a);else if(a===1)s.push(r);else{if(r!==a)throw new be("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(n));s.push(r)}}return s}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Fn(t)]),t=t,t.length<2)throw new be(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let n=[];for(const r of t)r!=null&&r[0]!==null&&n.push(r[0]);if(n=ki(n),n.length>1)throw new be(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let s=t[0]==null?null:t[0].slice(1);for(let r=1;r<t.length;++r){const a=t[r]==null?null:t[r].slice(1);s=this.computeElementwiseOpOutputShape(s,a)}const o=t.map(r=>r.length);t.indexOf(null)===-1&&ki(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,n){return Me(()=>{if(t=t,this.reshapeRequired){const s=[],o=t.map(r=>r.rank);if(o.indexOf(null)===-1){const r=Ti(o);for(let a of t){const i=a.rank;for(let l=0;l<r-i;++l)a=qh(a,1);s.push(a)}return this.mergeFunction(s)}else{let r=!1;for(const l of t){const u=l.rank;if(u==null){const c=l.shape,d=c[0],f=c.slice(1).concat([d]);let h=Se(l,[d].concat(Si(c.slice(1))));h=Tn(h,[1,0]),h=Se(h,f),s.push(h),r=!0}else if(u>1){const c=ta(1,u).concat([0]);s.push(Tn(l,c)),r=!0}else s.push(l)}let a=this.mergeFunction(s);const i=a.rank;if(r){if(i==null){const l=a.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));a=Se(Tn(Se(a,[-1,c]),[1,0]),d)}else if(i>1){const l=[i-1].concat(ta(0,i-1));a=Tn(a,l)}}return a}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let n;t[0]==null?n=null:n=t[0].slice(1);for(let o=1;o<t.length;++o){const r=t[o]==null?null:t[o].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let s=[];for(const o of t)o!=null&&o[0]!==null&&s.push(o[0]);return s=ki(s),s.length===1?n=s.concat(n):n=[null].concat(n),n}computeMask(t,n){return Me(()=>{if(n==null)return null;if(!Array.isArray(n))throw new be("`mask` should be an Array");if(!Array.isArray(t))throw new be("`inputs` should be an Array");if(n.length!==t.length)throw new be(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:dr(o,0));let s=n[0];for(let o=1;o<n.length-1;++o)s=Ka(s,n[o]);return s})}}class OP extends cu{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=st(n,t[s]);return n})}}OP.className="Add";et(OP);class MP extends cu{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=ge(n,t[s]);return n})}}MP.className="Multiply";et(MP);class FP extends cu{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=st(n,t[s]);return ge(1/t.length,n)})}}FP.className="Average";et(FP);class PP extends cu{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0];for(let s=1;s<t.length;++s)n=Ui(n,t[s]);return n})}}PP.className="Maximum";et(PP);class LP extends cu{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0];for(let s=1;s<t.length;++s)n=r0(n,t[s]);return n})}}LP.className="Minimum";et(LP);class BP extends cu{constructor(t){super(t);this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new be("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let n=!0;for(const o of t)if(o!=null){n=!1;break}if(n)return;const s=[];for(let o=0;o<t.length;++o){const r=t[o].slice();r.splice(this.axis,1);let a=!1;for(const i of s)if(Dn(i,r)){a=!0;break}a||s.push(r)}if(s.length>1)throw new be("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Me(()=>L2(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new be("A `Concatenate` layer should be called on a list of inputs.");const n=t,s=n[0].slice(),o=this.axis<0?s.length+this.axis:this.axis;for(const r of n.slice(1)){if(s[o]==null||r[o]==null){s[o]=null;break}s[o]+=r[o]}return s}computeMask(t,n){if(n==null)return null;if(!Array.isArray(n))throw new be("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new be("`inputs` should be an array for Concatenate");if(n.length!==t.length)throw new be(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${t.length})`);return Me(()=>{let s=!0;if(n.forEach(a=>{if(a!=null){s=!1;return}}),s)return null;const o=[];for(let a=0;a<t.length;++a)n[a]==null?o.push(mt(Ir(t[a]),"bool")):n[a].rank<t[a].rank?o.push(dr(n[a],-1)):o.push(n[a]);const r=no(o,this.axis);return ZO(r,-1,!1)})}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}BP.className="Concatenate";et(BP);function bd(e,t){for(;e<0;)e+=t;return e}function W_e(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Jt("batchDot is not implemented for tensors of 4D or higher rank yet");if(j(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),j(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new Jt("batchDot is not implemented for complex64-type Tensors yet.");const s=e.shape.length,o=t.shape.length;n==null&&(n=[s-1,o-2]);const r=n;return Me(()=>{let a;if(s>o){a=s-o;const l=[];for(let u=0;u<a;++u)l.push(1);t=Se(t,t.shape.concat(l))}else if(o>s){a=o-s;const l=[];for(let u=0;u<a;++u)l.push(1);e=Se(e,e.shape.concat(l))}else a=0;let i;if(e.shape.length===2&&t.shape.length===2)r[0]===r[1]?i=Et(ge(e,t),r[0]):i=Et(ge(Tn(e,[1,0]),t),r[1]);else{const l=r[0]!==e.shape.length-1,u=r[1]===t.shape.length-1;i=Nn(e,t,l,u)}if(a>0){let l;s>o?l=s+o-3:l=s-1;const u=[];for(let c=l;c<l+a;++c)u.push(c);i=Vh(i,u)}return i.shape.length===1&&(i=dr(i,1)),i})}class zP extends cu{constructor(t){super(t);this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){j(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0],s=t[1];if(n.length>3||s.length>3)throw new Jt("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);if(n[o[0]]!==s[o[1]])throw new be(`Dimension incompatibility: ${n[o[0]]} !== ${s[o[1]]}`)}mergeFunction(t){if(t.length!==2)throw new be(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let n=t[0],s=t[1],o;return Array.isArray(this.axes)?o=this.axes.map((r,a)=>bd(r,t[a].shape.length)):o=[bd(this.axes,n.shape.length),bd(this.axes,s.shape.length)],this.normalize&&(n=lg(n,o[0]),s=lg(s,o[1])),W_e(n,s,o)}interpretAxes(t,n){let s;return Array.isArray(this.axes)?s=this.axes:s=[bd(this.axes,t.length),bd(this.axes,n.length)],s}computeOutputShape(t){j(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0].slice(),s=t[1].slice();if(n.length>3||s.length>3)throw new Jt("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);n.splice(o[0],1),s.splice(o[1],1),s.splice(0,1);const r=n.concat(s);return r.length===1&&r.push(1),r}computeMask(t,n){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(t,n),t}}zP.className="Dot";et(zP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class VP extends Sn{constructor(t){super(t);this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,t),n}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=nn(t);return Yh(()=>st(f0(s.shape,0,this.stddev),s),()=>s,n.training||!1)})}}VP.className="GaussianNoise";et(VP);class WP extends Sn{constructor(t){super(t);this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=nn(t);return this.rate>0&&this.rate<1?Yh(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return ge(s,f0(s.shape,1,r))},()=>s,n.training||!1):s})}}WP.className="GaussianDropout";et(WP);class HP extends Sn{constructor(t){super(t);this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||nn(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Me(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(t);return Yh(()=>{const r=nn(t),a=1.6732632423543772,i=1.0507009873554805,l=-a*i;let u=Gc(a0(s),this.rate);u=d0(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,f=st(ge(r,u),ge(st(u,-1),l));return st(ge(f,c),d)},()=>nn(t),n.training||!1)}return t})}}HP.className="AlphaDropout";et(HP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sf(e,t,n,s,o,r=.001){let a;if(e.rank===2)a=_xe(e,t,n,s,o,r);else if(e.rank===3)a=Mxe(e,t,n,s,o,r);else if(e.rank===4)a=Pxe(e,t,n,s,o,r);else throw new Jt(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return a}function H_e(e,t,n,s,o=.001){return Me(()=>{const r=KC(e,s),a=r.mean,i=r.variance;return[Sf(e,a,i,n,t,o),a,i]})}function U_e(e,t,n,s,o=.001){return Me(()=>{const r=KC(e,s),a=r.mean,i=r.variance,l=[];for(const p of ta(0,e.rank))s.indexOf(p)!==-1?l.push(1):l.push(e.shape[p]);const u=Se(a,l),c=Se(i,l),d=t==null?null:Se(t,l),f=n==null?null:Se(n,l);return[Sf(e,u,c,f,d,o),a,i]})}function G_e(e,t,n,s,o=.001){return Dn(s.slice().sort(),ta(0,e.rank-1))?H_e(e,t,n,s,o):U_e(e,t,n,s,o)}class UP extends Sn{constructor(t){t==null&&(t={});super(t);this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=ts(t.betaInitializer||"zeros"),this.gammaInitializer=ts(t.gammaInitializer||"ones"),this.movingMeanInitializer=ts(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ts(t.movingVarianceInitializer||"ones"),this.betaConstraint=Ts(t.betaConstraint),this.gammaConstraint=Ts(t.gammaConstraint),this.betaRegularizer=ns(t.betaRegularizer),this.gammaRegularizer=ns(t.gammaRegularizer)}build(t){t=Fn(t);const n=this.axis>=0?this.axis:this.axis+t.length,s=t[n];if(s==null)throw new be(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new Is({ndim:t.length,axes:{[n]:s}})];const o=[s];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,n){return Me(()=>{const s=n.training==null?!1:n.training,o=nn(t),r=o.shape,a=r.length,i=ta(0,a),l=this.axis>=0?this.axis:this.axis+a;i.splice(l,1);const u=Jl(1,a);u[l]=r[l];const c=i.slice();c.sort();const d=!Dn(c,ta(0,a).slice(0,a-1)),f=()=>{if(d){const b=Se(this.movingMean.read(),u),$=Se(this.movingVariance.read(),u),y=this.center?Se(this.beta.read(),u):null,w=this.scale?Se(this.gamma.read(),u):null;return Sf(o,b,$,y,w,this.epsilon)}else return Sf(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return f();const[h,p,m]=G_e(o,this.gamma.read(),this.beta.read(),i,this.epsilon),g=(b,$,y)=>{Me(()=>{const w=1-y,C=b.read(),k=ge(Tt(C,$),w);b.write(Tt(C,k))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:as(this.betaInitializer),gammaInitializer:as(this.gammaInitializer),movingMeanInitializer:as(this.movingMeanInitializer),movingVarianceInitializer:as(this.movingVarianceInitializer),betaRegularizer:Vn(this.betaRegularizer),gammaRegularizer:Vn(this.gammaRegularizer),betaConstraint:Es(this.betaConstraint),gammaConstraint:Es(this.gammaConstraint)},n=super.getConfig();return Object.assign(t,n),t}}UP.className="BatchNormalization";et(UP);class GP extends Sn{constructor(t){t==null&&(t={});super(t);if(this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=ts(t.betaInitializer||"zeros"),this.gammaInitializer=ts(t.gammaInitializer||"ones"),this.betaRegularizer=ns(t.betaRegularizer),this.gammaRegularizer=ns(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=Fn(t);const n=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=n);for(const r of this.axis)if(r<0||r>=n)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==ki(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(r=>t[r]),o=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(t,n){const s=nn(t),o=s.shape,r=o.length;return Me(()=>{let{mean:i,variance:l}=KC(s,this.axis,!0);const u=Jl(1,r);for(const m of this.axis)u[m]=o[m];const c=m=>m!=null&&m.shape.length!==r?Se(m,u):m;let d=c(this.gamma.read()),f=c(this.beta.read());const h=[],p=[];for(let m=0;m<r;++m)this.axis.indexOf(m)!==-1?(h.push(o[m]),p.push(1)):(h.push(1),p.push(o[m]));return i=Ur(i,h),l=Ur(l,h),d=Ur(d,p),f=Ur(f,p),Sf(s,i,l,f,d,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:as(this.betaInitializer),gammaInitializer:as(this.gammaInitializer),betaRegularizer:Vn(this.betaRegularizer),gammaRegularizer:Vn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(t,n),t}}GP.className="LayerNormalization";et(GP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function K_e(e,t,n){return Me(()=>{if(e.rank!==4)throw new be(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new be("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ea()),n!=="channelsLast"&&n!=="channelsFirst")throw new be(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return n==="channelsFirst"?s=[[0,0],[0,0],t[0],t[1]]:s=[[0,0],t[0],t[1],[0,0]],jC(e,s)})}class KP extends Sn{constructor(t){t==null&&(t={});super(t);if(this.dataFormat=t.dataFormat==null?ea():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new be(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let n,s;if(typeof t.padding[0]=="number")n=[t.padding[0],t.padding[0]],s=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new be(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(n=t.padding[0],t.padding[1].length!==2)throw new be(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);s=t.padding[1]}this.padding=[n,s]}this.inputSpec=[new Is({ndim:4})]}computeOutputShape(t){t=Fn(t);let n,s;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?n=t[2]+this.padding[0][0]+this.padding[0][1]:n=null,t[3]!=null&&t[3]>=0?s=t[3]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],t[1],n,s]):(t[1]!=null&&t[1]>=0?n=t[1]+this.padding[0][0]+this.padding[0][1]:n=null,t[2]!=null&&t[2]>=0?s=t[2]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],n,s,t[3]])}call(t,n){return Me(()=>K_e(nn(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}KP.className="ZeroPadding2D";et(KP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $0(e,t,n,s,o,r){return Me(()=>{ms(o),hF(r),or(s),n==null&&(n=[1,1]),s==null&&(s="valid"),o==null&&(o=ea()),r==null&&(r="max"),e=Z2(e,o);let a;const i=s==="same"?"same":"valid";return r==="max"?a=GC(e,t,n,i):a=OC(e,t,n,i),o==="channelsFirst"&&(a=Tn(a,[0,3,1,2])),a})}function jP(e,t,n,s,o,r){return Me(()=>{ms(o),hF(r),or(s),n==null&&(n=[1,1,1]),s==null&&(s="valid"),o==null&&(o=ea()),r==null&&(r="max"),e=cP(e,o);let a;const i=s==="same"?"same":"valid";return r==="max"?a=fEe(e,t,n,i):a=Sxe(e,t,n,i),o==="channelsFirst"&&(a=Tn(a,[0,4,1,2,3])),a})}class qP extends Sn{constructor(t){t.poolSize==null&&(t.poolSize=2);super(t);if(typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new be(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(Os(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new be(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);Os(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,or(this.padding),this.inputSpec=[new Is({ndim:3})]}computeOutputShape(t){t=Fn(t);const n=Xr(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],n,t[2]]}call(t,n){return Me(()=>{this.invokeCallHook(t,n),t=qh(nn(t),2);const s=this.poolingFunction(nn(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Vh(s,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(t,n),t}}class XP extends qP{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return ms(r),or(o),$0(t,n,s,o,r,"max")}}XP.className="MaxPooling1D";et(XP);class YP extends qP{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return ms(r),or(o),$0(t,n,s,o,r,"avg")}}YP.className="AveragePooling1D";et(YP);class ZP extends Sn{constructor(t){t.poolSize==null&&(t.poolSize=[2,2]);super(t);if(this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new be(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];Os(this.poolSize,"poolSize"),Os(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,ms(this.dataFormat),or(this.padding),this.inputSpec=[new Is({ndim:4})]}computeOutputShape(t){t=Fn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2];return n=Xr(n,this.poolSize[0],this.padding,this.strides[0]),s=Xr(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,s]:[t[0],n,s,t[3]]}call(t,n){return Me(()=>(this.invokeCallHook(t,n),this.poolingFunction(nn(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class JP extends ZP{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return ms(r),or(o),$0(t,n,s,o,r,"max")}}JP.className="MaxPooling2D";et(JP);class QP extends ZP{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return ms(r),or(o),$0(t,n,s,o,r,"avg")}}QP.className="AveragePooling2D";et(QP);class e4 extends Sn{constructor(t){t.poolSize==null&&(t.poolSize=[2,2,2]);super(t);if(this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new be(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];Os(this.poolSize,"poolSize"),Os(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,ms(this.dataFormat),or(this.padding),this.inputSpec=[new Is({ndim:5})]}computeOutputShape(t){t=Fn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[4]:t[3];return n=Xr(n,this.poolSize[0],this.padding,this.strides[0]),s=Xr(s,this.poolSize[1],this.padding,this.strides[1]),o=Xr(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,s,o]:[t[0],n,s,o,t[4]]}call(t,n){return Me(()=>(this.invokeCallHook(t,n),this.poolingFunction(nn(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class t4 extends e4{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return ms(r),or(o),jP(t,n,s,o,r,"max")}}t4.className="MaxPooling3D";et(t4);class n4 extends e4{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return ms(r),or(o),jP(t,n,s,o,r,"avg")}}n4.className="AveragePooling3D";et(n4);class s4 extends Sn{constructor(t){super(t);this.inputSpec=[new Is({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,n){throw new Jt}}class o4 extends s4{constructor(t){super(t||{})}call(t,n){return Me(()=>{const s=nn(t);return us(s,1)})}}o4.className="GlobalAveragePooling1D";et(o4);class r4 extends s4{constructor(t){super(t||{})}call(t,n){return Me(()=>{const s=nn(t);return ba(s,1)})}}r4.className="GlobalMaxPooling1D";et(r4);class a4 extends Sn{constructor(t){super(t);this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,ms(this.dataFormat),this.inputSpec=[new Is({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,n){throw new Jt}getConfig(){const t={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class i4 extends a4{call(t,n){return Me(()=>{const s=nn(t);return this.dataFormat==="channelsLast"?us(s,[1,2]):us(s,[2,3])})}}i4.className="GlobalAveragePooling2D";et(i4);class l4 extends a4{call(t,n){return Me(()=>{const s=nn(t);return this.dataFormat==="channelsLast"?ba(s,[1,2]):ba(s,[2,3])})}}l4.className="GlobalMaxPooling2D";et(l4);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class u4 extends Sn{constructor(t){super(t);this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(t,n),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,n,s={}){const o=n.layer,r=za(o,s);delete n.layer;const a={layer:r};return Object.assign(a,n),new t(a)}}class c4 extends u4{constructor(t){super(t);this.supportsMasking=!0}build(t){if(t=Fn(t),t.length<3)throw new be(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=Fn(t);const n=[t[0]].concat(t.slice(2)),s=this.layer.computeOutputShape(n),o=t[1];return[s[0],o].concat(s.slice(1))}call(t,n){return Me(()=>(t=nn(t),yP((a,i)=>[nn(this.layer.call(a,n)),[]],t,[],!1,null,null,!1,!0)[1]))}}c4.className="TimeDistributed";et(c4);function j_e(e){uu(gRe,"BidirectionalMergeMode",e)}const q_e="concat";class d4 extends u4{constructor(t){super(t);const n=t.layer.getConfig(),s={};s.className=t.layer.getClassName(),s.config=n,this.forwardLayer=za(s),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=t.layer.getClassName(),o.config=n,this.backwardLayer=za(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?q_e:t.mergeMode,j_e(this.mergeMode),t.weights)throw new Jt("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const n=t.length,s=Math.floor(n/2);this.forwardLayer.setWeights(t.slice(0,s)),this.backwardLayer.setWeights(t.slice(s))}computeOutputShape(t){let n=this.forwardLayer.computeOutputShape(t);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let s,o,r;return this.returnState&&(r=n.slice(1)),s=n[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,o=[s]):this.mergeMode==null?o=[s,s.slice()]:o=[s],this.returnState?this.mergeMode==null?o.concat(r).concat(r.slice()):[s].concat(r).concat(r.slice()):vo(o)}apply(t,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=bP(t,s,o,this.numConstants);if(t=r.inputs,s=r.initialState,o=r.constants,Array.isArray(t)&&(s=t.slice(1),t=t[0]),(s==null||s.length===0)&&o==null)return super.apply(t,n);const a=[],i=[];if(s!=null){const u=s.length;if(u%2>0)throw new be("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=s,a.push(...s);const c=s.map(d=>new Is({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),i.push(...c)}if(o!=null)throw new Jt("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof ma;for(const u of a)if(u instanceof ma!==l)throw new be("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[t].concat(a),c=this.inputSpec.concat(i),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(t,n)}call(t,n){return Me(()=>{const s=n.initialState;let o,r;if(s==null)o=this.forwardLayer.call(t,n),r=this.backwardLayer.call(t,n);else{const l=s.slice(0,s.length/2),u=s.slice(s.length/2);o=this.forwardLayer.call(t,Object.assign(n,{initialState:l})),r=this.backwardLayer.call(t,Object.assign(n,{initialState:u}))}let a;this.returnState&&(Array.isArray(o)&&(a=o.slice(1).concat(r.slice(1))),o=o[0],r=r[0]),this.returnSequences&&(r=Xl(r,1));let i;return this.mergeMode==="concat"?i=L2([o,r]):this.mergeMode==="sum"?i=st(o,r):this.mergeMode==="ave"?i=ge(.5,st(o,r)):this.mergeMode==="mul"?i=ge(o,r):this.mergeMode==null&&(i=[o,r]),this.returnState?this.mergeMode==null?i.concat(a):[i].concat(a):i})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Pl(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Pl(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,n){Array.isArray(n)&&(n=n[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[n,n]:s=n:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const r=this.forwardLayer.states.map(a=>null);return Array.isArray(s)?s.concat(r).concat(r):[s].concat(r).concat(r)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,n){const s=za(n.layer);if(delete n.layer,n.numConstants!=null)throw new Jt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=s,new t(o)}}d4.className="Bidirectional";et(d4);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X_e=Ge();X_e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var eN;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(eN||(eN={}));var tN;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(tN||(tN={}));/** @license See the LICENSE file. */var f4={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=i();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function i(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.alea=a})(An,e,!1)})(f4);var h4={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},i===(i|0)?l.x=i:u+=i;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xor128=a})(An,e,!1)})(h4);var p4={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,i===(i|0)?l.x=i:u+=i;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l.v=i.v,l.d=i.d,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xorwow=a})(An,e,!1)})(p4);var m4={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,i)}function r(i,l){return l.x=i.x.slice(),l.i=i.i,l}function a(i,l){i==null&&(i=+new Date);var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xorshift7=a})(An,e,!1)})(m4);var g4={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,m,g,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=v[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=g,c.X=v,c.i=p}u(l,i)}function r(i,l){return l.i=i.i,l.w=i.w,l.X=i.X.slice(),l}function a(i,l){i==null&&(i=+new Date);var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xor4096=a})(An,e,!1)})(g4);var v4={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,i===Math.floor(i)?(l.a=i/4294967296|0,l.b=i|0):u+=i;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(i,l){return l.a=i.a,l.b=i.b,l.c=i.c,l.d=i.d,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.tychei=a})(An,e,!1)})(v4);var b4={exports:{}};(function(e){(function(t,n){var s=(0,eval)("this"),o=256,r=6,a=52,i="random",l=n.pow(o,r),u=n.pow(2,a),c=u*2,d=o-1,f;function h(y,w,C){var k=[];w=w==!0?{entropy:!0}:w||{};var S=v(g(w.entropy?[y,$(t)]:y==null?b():y,3),k),E=new p(k),x=function(){for(var N=E.g(r),A=l,D=0;N<u;)N=(N+D)*o,A*=o,D=E.g(1);for(;N>=c;)N/=2,A/=2,D>>>=1;return(N+D)/A};return x.int32=function(){return E.g(4)|0},x.quick=function(){return E.g(4)/4294967296},x.double=x,v($(E.S),t),(w.pass||C||function(N,A,D,M){return M&&(M.S&&m(M,E),N.state=function(){return m(E,{})}),D?(n[i]=N,A):N})(x,S,"global"in w?w.global:this==n,w.state)}n["seed"+i]=h;function p(y){var w,C=y.length,k=this,S=0,E=k.i=k.j=0,x=k.S=[];for(C||(y=[C++]);S<o;)x[S]=S++;for(S=0;S<o;S++)x[S]=x[E=d&E+y[S%C]+(w=x[S])],x[E]=w;(k.g=function(N){for(var A,D=0,M=k.i,F=k.j,R=k.S;N--;)A=R[M=d&M+1],D=D*o+R[d&(R[M]=R[F=d&F+A])+(R[F]=A)];return k.i=M,k.j=F,D})(o)}function m(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function g(y,w){var C=[],k=typeof y,S;if(w&&k=="object")for(S in y)try{C.push(g(y[S],w-1))}catch{}return C.length?C:k=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",k,S=0;S<C.length;)w[d&S]=d&(k^=w[d&S]*19)+C.charCodeAt(S++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(b4);var Y_e=f4.exports,Z_e=h4.exports,J_e=p4.exports,Q_e=m4.exports,e3e=g4.exports,t3e=v4.exports,Yc=b4.exports;Yc.alea=Y_e;Yc.xor128=Z_e;Yc.xorwow=J_e;Yc.xorshift7=Q_e;Yc.xor4096=e3e;Yc.tychei=t3e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var nN;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(nN||(nN={}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function It(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&j(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n3e=RM;class C0 extends D${constructor(){super();this.blockSize=48,this.firstUse=!0,this.data=new G3(this,di())}nextDataId(){return C0.nextDataId++}write(t,n,s){this.firstUse&&(this.firstUse=!1,Ge().get("IS_NODE")&&qo(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:t,dtype:s,refCount:1}),o}makeTensorInfo(t,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&zf(s[0])){const r=s.map(a=>Ci(a));o=this.write(r,t,n)}else o=this.write(s,t,n);return{dataId:o,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,s,o,r){this.data.set(t,{values:n,dtype:o,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:s}=this.data.get(t);if(n==="complex64"){const o=this.readSync(s.real.dataId),r=this.readSync(s.imag.dataId);return ja(o,r)}return this.data.get(t).values}bufferSync(t){const n=this.readSync(t.dataId);let s=n;if(t.dtype==="string")try{s=n.map(o=>wc(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return hn(t.shape,t.dtype,s)}makeOutput(t,n,s){const o=this.write(t,n,s);return di().makeTensorFromDataId(o,n,s,this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(t);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=go();return t(),{kernelMs:go()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){It([t],"where");const n=this.readSync(t.dataId);return n3e(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}C0.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y4(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const s3e=e=>{const{x:t}=e.inputs,n=e.backend;It(t,"abs");let s=new Float32Array(Ue(t.shape));const o=n.data.get(t.dataId).values;return s=y4(o),n.makeOutput(s,t.shape,t.dtype)},o3e={kernelName:Yg,backendName:"cpu",kernelFunc:s3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ws(e){return(t,n,s,o,r)=>{const a=tn(t,n),i=a.length,l=Rt(a),u=Ue(a),c=Gs(r,u),d=t.length,f=n.length,h=Rt(t),p=Rt(n),m=Cc(t,a),g=Cc(n,a);if(m.length+g.length===0)for(let v=0;v<c.length;++v)c[v]=e(s[v%s.length],o[v%o.length]);else for(let v=0;v<c.length;++v){const b=Wf(v,i,l),$=b.slice(-d);m.forEach(k=>$[k]=0);const y=va($,d,h),w=b.slice(-f);g.forEach(k=>w[k]=0);const C=va(w,f,p);c[v]=e(s[y],o[C])}return[c,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eo(e){const{inputs:t,backend:n}=e,{real:s,imag:o}=t,r=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,i=n.makeTensorInfo(s.shape,"complex64"),l=n.data.get(i.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(s.shape,"float32",r),imag:n.makeTensorInfo(o.shape,"float32",a)},i}const r3e={kernelName:B$,backendName:"cpu",kernelFunc:Eo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hg(e,t,n="float32"){if(n==="complex64"){const o=hg(e,t,"float32"),r=hg(e,t,"float32");return Eo({inputs:{real:o,imag:r},backend:e})}const s=ro(Ue(t),n);return e.makeTensorInfo(t,n,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xa(e){const{inputs:t,backend:n}=e,{x:s}=t;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const a3e={kernelName:uh,backendName:"cpu",kernelFunc:xa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ql(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.data.get(s.dataId).complexTensorInfos.real,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const i3e={kernelName:iC,backendName:"cpu",kernelFunc:Ql};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ri(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return xa({inputs:{x:o},backend:n});const a=hg(n,o.shape,o.dtype),i=Ri({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Eo({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),l}if(o.dtype==="complex64"){const a=Ql({inputs:{input:o},backend:n}),i=Ri({inputs:{x:a},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(a),i}if(!X3(o.dtype,r)){const a=xa({inputs:{x:o},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:r}}if(r==="int32"){const a=n.data.get(o.dataId).values,i=Int32Array.from(a);return n.makeTensorInfo(o.shape,"int32",i)}if(r==="bool"){const a=n.data.get(o.dataId).values,i=iu([0],o.dtype),[l,u]=ws((c,d)=>c!==d?1:0)(o.shape,[],a,i,"bool");return n.makeTensorInfo(u,"bool",l)}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const l3e={kernelName:Yf,backendName:"cpu",kernelFunc:Ri};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ls(e,t,n,s){return n==null?({inputs:o,backend:r})=>{const{a,b:i}=o,l=r;It([a,i],e);const u=l.data.get(a.dataId).values,c=l.data.get(i.dataId).values,d=a.dtype==="string"?Zl(u):u,f=a.dtype==="string"?Zl(c):c,h=s||a.dtype,[p,m]=t(a.shape,i.shape,d,f,h);return l.makeTensorInfo(m,h,p)}:({inputs:o,backend:r})=>{const{a,b:i}=o,l=r;if(a.dtype==="complex64"||i.dtype==="complex64"){const u=Ri({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,m=Ri({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),v=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,$=l.data.get(v.dataId).values,y=l.data.get(b.dataId).values,[w,C,k]=n(a.shape,i.shape,h,p,$,y),S=l.makeTensorInfo(k,"float32",w),E=l.makeTensorInfo(k,"float32",C),x=Eo({inputs:{real:S,imag:E},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(S),l.disposeIntermediateTensorInfo(E),x}else{const u=l.data.get(a.dataId).values,c=l.data.get(i.dataId).values,d=s||a.dtype,[f,h]=t(a.shape,i.shape,u,c,d);return l.makeTensorInfo(h,d,f)}}}function sk(e){return(t,n,s,o,r,a)=>{const i=tn(t,n),l=Ue(i),u=i.length,c=Rt(i),d=Gs("float32",l),f=Gs("float32",l),h=Cc(t,i),p=Cc(n,i),m=ja(s,o),g=ja(r,a),v=t.length,b=Rt(t),$=n.length,y=Rt(n);if(h.length+p.length===0)for(let w=0;w<d.length;w++){const C=w%m.length,k=w%g.length,S=e(m[C*2],m[C*2+1],g[k*2],g[k*2+1]);d[w]=S.real,f[w]=S.imag}else for(let w=0;w<d.length;w++){const C=Wf(w,u,c),k=C.slice(-v);h.forEach(A=>k[A]=0);const S=va(k,v,b),E=C.slice(-$);p.forEach(A=>E[A]=0);const x=va(E,$,y),N=e(m[S*2],m[S*2+1],g[x*2],g[x*2+1]);d[w]=N.real,f[w]=N.imag}return[d,f,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4=ws((e,t)=>e+t),u3e=sk((e,t,n,s)=>({real:e+n,imag:t+s})),ep=Ls(Wc,w4,u3e),c3e={kernelName:Wc,backendName:"cpu",kernelFunc:ep};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ok(e,t,n,s,o){const r=Ue(s),a=ro(o,n);for(let i=0;i<e.length;i++){const l=e[i];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(r>0?a[l]+=t[i]:a[l]+=1)}return a}function $4(e,t,n,s=!1){const o=e.shape[0],r=e.shape[1],a=hn([o,n],t.dtype);for(let i=0;i<o;i++)for(let l=0;l<r;l++){const u=e.get(i,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(s?a.set(1,i,u):t.size>0?a.set(a.get(i,u)+t.get(i,l),i,u):a.set(a.get(i,u)+1,i,u))}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xi(e){return(t,n,s)=>{const o=Gs(n,t.length);for(let r=0;r<t.length;++r)o[r]=e(t[r],s);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pn(e,t,n){return({inputs:s,attrs:o,backend:r})=>{const{x:a}=s;if(It(a,e),a.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const i=r,l=i.data.get(a.dataId).values,u=Ue(a.shape),c=n||a.dtype,d=yo(c,u);for(let f=0;f<u;++f)d[f]=t(l[f],o);return i.makeTensorInfo(a.shape,c,d)}}function Zc(e,t,n){return({inputs:s,attrs:o,backend:r})=>{const{x:a}=s;if(It(a,e),a.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const i=r,l=i.data.get(a.dataId).values,u=n||a.dtype,c=t(l,u,o);return i.makeTensorInfo(a.shape,u,c)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4=Xi(e=>Math.ceil(e)),d3e=Zc(Zf,C4),f3e={kernelName:Zf,backendName:"cpu",kernelFunc:d3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4(e,t,n,s){const o=yo(n,Ue(t));if(s&&n!=="string"){let r=0;e.forEach(a=>{const i=Ue(a.shape);o.set(a.vals,r),r+=i})}else{let r=0;e.forEach(a=>{const i=n==="string"?Zl(a.vals):a.vals;let l=0;for(let u=0;u<a.shape[0];++u){const c=u*t[1]+r;for(let d=0;d<a.shape[1];++d)o[c+d]=i[l++]}r+=a.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4=ws((e,t)=>e===t?1:0),x4=Ls(dv,S4,null,"bool"),h3e={kernelName:dv,backendName:"cpu",kernelFunc:x4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4=Xi(e=>Math.exp(e)),E4=Zc(oh,I4,"float32"),p3e={kernelName:oh,backendName:"cpu",kernelFunc:E4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4=Xi(e=>Math.expm1(e)),m3e=Zc(rh,T4),g3e={kernelName:rh,backendName:"cpu",kernelFunc:m3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4=Xi(e=>Math.floor(e)),v3e=Zc(ah,N4),b3e={kernelName:ah,backendName:"cpu",kernelFunc:v3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A4(e,t,n,s,o,r,a,i,l){const u=hn([s,r],n);for(let c=0;c<s;c++){const d=[];let f=0;for(let h=0;h<o;h++){const p=e[c*o+h];f+=p*a[h],d.push(p)}if(f<0||f>=l/r)throw new Error(`Invalid indices: ${d} does not index into ${i}`);for(let h=0;h<r;h++)u.values[c*r+h]=t.get(...t.indexToLoc(f*r+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4(e,t,n){const s=hn(n,e.dtype);for(let o=0;o<s.size;++o){const a=s.indexToLoc(o).slice(),i=a[0],l=a[2],u=t.locToIndex([i,l]);a[2]=t.values[u];const c=e.locToIndex(a);0<=c&&c<e.values.length&&(s.values[o]=e.values[c])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4=ws((e,t)=>e>t?1:0),y3e=Ls(mv,R4,null,"bool"),w3e={kernelName:mv,backendName:"cpu",kernelFunc:y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4=ws((e,t)=>e>=t?1:0),$3e=Ls(lh,_4,null,"bool"),C3e={kernelName:lh,backendName:"cpu",kernelFunc:$3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4=ws((e,t)=>e<t?1:0),k3e=Ls(vv,O4,null,"bool"),S3e={kernelName:vv,backendName:"cpu",kernelFunc:k3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M4=ws((e,t)=>e<=t?1:0),x3e=Ls(bv,M4,null,"bool"),I3e={kernelName:bv,backendName:"cpu",kernelFunc:x3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F4(e,t,n){const s=(t-e)/(n-1),o=ro(n,"float32");o[0]=e;for(let r=1;r<o.length;r++)o[r]=o[r-1]+s;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4=Xi(e=>Math.log(e)),E3e=Zc(hh,P4),T3e={kernelName:hh,backendName:"cpu",kernelFunc:E3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4(e,t,n,s){const o=Gs(s,Ue(n));for(let r=0;r<o.length;++r){const a=r*t;let i=e[a];for(let l=0;l<t;++l){const u=e[a+l];(Number.isNaN(u)||u>i)&&(i=u)}o[r]=i}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4=ws((e,t)=>Math.max(e,t)),N3e=Ls(mh,B4),A3e={kernelName:mh,backendName:"cpu",kernelFunc:N3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4=ws((e,t)=>Math.min(e,t)),D3e=Ls(gh,z4),R3e={kernelName:gh,backendName:"cpu",kernelFunc:D3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rk=ws((e,t)=>e*t),_3e=sk((e,t,n,s)=>({real:e*n-t*s,imag:e*s+t*n})),k0=Ls(bh,rk,_3e),O3e={kernelName:bh,backendName:"cpu",kernelFunc:k0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4(e,t,n){const s=Wi(-1,n);return rk([],t,s,e,n)}function M3e(e){const{inputs:t,backend:n}=e,{x:s}=t;It(s,"neg");const o=n.data.get(s.dataId).values,[r,a]=V4(o,s.shape,s.dtype);return n.makeTensorInfo(a,s.dtype,r)}const F3e={kernelName:Nv,backendName:"cpu",kernelFunc:M3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W4=ws((e,t)=>e!==t?1:0),P3e=Ls(Av,W4,null,"bool"),L3e={kernelName:Av,backendName:"cpu",kernelFunc:P3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ak(e,t,n,s,o){const r=t.length,a=Ue(t),i=Rt(t),l=Rt(o),u=Gs(n,Ue(o));for(let c=0;c<a;++c){const d=Wf(c,r,i),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[s[p]];const h=va(f,r,l);u[h]=e[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sr(e){const{inputs:t,attrs:n,backend:s}=e,{x:o}=t,{perm:r}=n;It(o,"transpose");const a=o.shape.length,i=new Array(a);for(let d=0;d<i.length;d++)i[d]=o.shape[r[d]];const l=s.data.get(o.dataId).values,u=ak(l,o.shape,o.dtype,r,i);return{dataId:s.write(u,i,o.dtype),shape:i,dtype:o.dtype}}const B3e={kernelName:Kv,backendName:"cpu",kernelFunc:sr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H4(e,t,n,s){const[o,r]=Ps(e,s),a=tr(t,"int32"),i=ro(Ue(o),a),l=Ue(r);for(let u=0;u<i.length;++u){const c=u*l;let d=1;for(let f=0;f<l;++f)d*=n[c+f];i[u]=d}return{outVals:i,outShape:o,outDtype:a}}function z3e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s;It(o,"prod");const i=o.shape.length,l=an(r,o.shape),u=ps(l,i);let c=l,d=o;const f=[];u!=null&&(d=sr({inputs:{x:o},backend:n,attrs:{perm:u}}),f.push(d),c=ys(c.length,i));const h=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:g}=H4(d.shape,d.dtype,h,c);let v=m;return a&&(v=hs(m,l)),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(v,g,p)}const V3e={kernelName:rC,backendName:"cpu",kernelFunc:z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U4(e,t,n,s){const o=e===t,r=e<t&&n<0,a=t<e&&n>1;if(o||r||a)return ro(0,s);const i=Math.abs(Math.ceil((t-e)/n)),l=ro(i,s);t<e&&n===1&&(n=-1),l[0]=e;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4=Xi(e=>1/Math.sqrt(e)),W3e=Zc(Sh,G4),H3e={kernelName:Sh,backendName:"cpu",kernelFunc:W3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=Xi(e=>1/(1+Math.exp(-e))),K4=Pn(Nh,e=>1/(1+Math.exp(-e))),G3e={kernelName:Nh,backendName:"cpu",kernelFunc:K4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4(e,t,n,s,o){const r=AC(s,t,n),a=Ue(n),i=Rt(s);if(r){const d=DC(t,i);return o==="string"?e.slice(d,d+a):e.subarray(d,d+a)}const l=o==="string"?Zl(e):e,u=hn(s,o,l),c=hn(n,o);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),h=f.map((p,m)=>p+t[m]);c.set(u.get(...h),...f)}return o==="string"?oF(c.values):c.values}function eu(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,size:a}=s;It(o,"slice");const[i,l]=e0(o,r,a);TC(o,i,l);const u=n.data.get(o.dataId).values,c=j4(u,i,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const K3e={kernelName:Vv,backendName:"cpu",kernelFunc:eu};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q4(e,t,n,s,o,r,a){const i=t[0],l=r[0],u=new Array(l),c=new Array(i),d=t[1];if(l===0){if(i!==0)throw new Error(GM(i));const g=yo(n,0),v=yo(o,0);return[g,[0,d],v,u,c]}let f=!0,h=0;const p=new Array(l).fill(0);for(let g=0;g<i;++g){const v=e[g*d];if(v<0)throw new Error(KM(g,v));if(v>=l)throw new Error(jM(g,v,l));++p[v],f=f&&v>=h,h=v}let m=!0;for(let g=0;g<l;++g){const v=p[g]===0;u[g]=v,m=m&&!v,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&f){const g=e,v=s;for(let b=0;b<i;++b)c[b]=b;return[g,[i,d],v,u,c]}else{const g=p[l-1],v=yo(n,g*d),b=yo(o,g),$=new Array(l).fill(0);for(let y=0;y<i;++y){const w=e[y*d],C=$[w],k=(w===0?0:p[w-1])+C;$[w]++;for(let S=0;S<d;++S)v[k*d+S]=e[y*d+S];b[k]=s[y],c[y]=k}for(let y=0;y<l;++y)if($[y]===0){const C=y===0?0:p[y-1];v[C*d+0]=y;for(let k=1;k<d;++k)v[C*d+k]=0;b[C]=a}return[v,[g,d],b,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X4(e,t,n,s,o){const r=Ue(s),a=t[0],i=o.length,l=[];let u=1,c=-1;for(let g=0;g<i;++g){const v=o[g];if(v===-1){if(c!==-1)throw new Error(qM(c,g));c=g,l.push(1)}else{if(v<0)throw new Error(XM(g,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(YM());const g=Math.trunc(r/u);if(u*g!==r)throw new Error(ZM(s,l));l[c]=g}if(Ue(l)!==r)throw new Error(JM(s,l));const f=s.length,h=[];if(f>0){h[f-1]=1;for(let g=f-2;g>=0;--g)h[g]=h[g+1]*s[g+1]}const p=[];if(i>0){p[i-1]=1;for(let g=i-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=yo(n,a*i);for(let g=0;g<a;++g){let v=0;for(let b=0;b<f;++b)v+=e[g*f+b]*h[b];for(let b=0;b<i;++b)m[g*i+b]=Math.trunc(v/p[b]),v%=p[b]}return[m,[a,i],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ik(e,t,n,s,o,r=!1,a=0){const i=s.length,l=[t[0],e.length/t[0]],u=l[1],d=i>0?o[i-1]+1:0;if(d<0)throw new Error(z1());const f=t.slice();f[0]=d;const h=f.reduce(($,y)=>$*y,1),p=yo(n,h);if(i===0)return d>0&&p.fill(a),[p,f];if(d<=0)throw new Error(z1());let m=0,g=1,v=0,b=o[m];for(;;){let $=0;if(g<i){if($=o[g],b===$){++g;continue}if(b>=$)throw new Error(QM())}if(b<0||b>=d)throw new Error(eF(b,d));b>v&&p.fill(a,v*u,b*u);for(let y=m;y<g;++y){const w=s[y];if(w<0||w>=l[0])throw new Error(tF(y,s[y],l[0]));for(let C=0;C<u;C++)p[b*u+C]+=e[w*u+C]}if(r)for(let y=0;y<u;y++)p[b*u+y]/=g-m;if(m=g,++g,v=b+1,b=$,g>i)break}return v<d&&p.fill(a,v*u,d*u),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3e=Xi(e=>Math.sqrt(e)),q3e=Pn(Dh,e=>Math.sqrt(e)),X3e={kernelName:Dh,backendName:"cpu",kernelFunc:q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4=ws((e,t)=>{const n=e-t;return n*n}),Y3e=Ls(Rh,Y4),Z3e={kernelName:Rh,backendName:"cpu",kernelFunc:Y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z4(e,t,n,s){const o=hn(e,t.dtype);for(let r=0;r<o.size;r++){const a=o.indexToLoc(r),i=new Array(a.length);for(let l=0;l<i.length;l++)i[l]=a[l]*n[l]+s[l];o.set(t.get(...i),...a)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J3e{constructor(t,n,s,o,r,a){this.separator=Ci(t),this.nGramWidths=n,this.leftPad=Ci(s),this.rightPad=Ci(o),this.padWidth=r,this.preserveShort=a}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const s=this.getPadWidth(n);return Math.max(0,t+2*s-n+1)}createNGrams(t,n,s,o,r,a){for(let i=0;i<r;++i){const l=this.getPadWidth(a),u=Math.max(0,l-i),c=Math.max(0,l-(r-(i+1))),d=a-(u+c),f=n+(u>0?0:i-l);let h=0;h+=u*this.leftPad.length;for(let b=0;b<d;++b)h+=t[f+b].length;h+=c*this.rightPad.length,h+=(u+c+d-1)*this.separator.length,s[o+i]=new Uint8Array(h);const m=s[o+i];let g=0;const v=b=>b.forEach($=>m[g++]=$);for(let b=0;b<u;++b)v(this.leftPad),v(this.separator);for(let b=0;b<d-1;++b)v(t[f+b]),v(this.separator);if(d>0){v(t[f+d-1]);for(let b=0;b<c;++b)v(this.separator),v(this.rightPad)}else{for(let b=0;b<c-1;++b)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(t,n){const s=t.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<o;++u){let c=n[u]>=l;if(c=c&&n[u]<=s,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${s}]`);l=n[u]}if(l!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${l}`)}const r=o-1,a=yo("int32",o);if(s===0||o===0){const l=new Array(s);for(let u=0;u<=r;++u)a[u]=0;return[l,a]}a[0]=0;for(let l=1;l<=r;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),a[l]=a[l-1]+c}const i=new Array(a[r]);for(let l=0;l<r;++l){const u=n[l];let c=a[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(t,u,i,c,h,d),c+=h}),this.preserveShort&&c===a[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth,h=1;this.createNGrams(t,u,i,c,h,f)}}return[i,a]}}function J4(e,t,n,s,o,r,a,i){return new J3e(n,s,o,r,a,i).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q3e(e,t,n,s){if(!e.length)return;if(t.length===0){for(let r=0;r<e.length;++r)s.push(e.subarray(r,r+1));return}if(t.length===1){const r=t[0];let a=e.indexOf(r);for(;a!==-1;){const i=e.subarray(0,a);(!n||i.length!==0)&&s.push(i),e=e.subarray(a+1),a=e.indexOf(r)}(!n||e.length!==0)&&s.push(e);return}let o=0;for(let r=0;r<e.length+1;r++)if(r===e.length||t.indexOf(e[r])!==-1){const a=e.subarray(o,r);(!n||a.length!==0)&&s.push(a),o=r+1}}function Q4(e,t,n){const s=e.length,o=[];let r=0,a=0;const i=new Array(s);for(let f=0;f<s;++f){const h=o.length;Q3e(e[f],t,n,o);const p=o.length-h;i[f]=p,r+=p,a=Math.max(a,p)}const l=yo("int32",r*2),u=new Array(r),c=[s,a];let d=0;for(let f=0;f<s;++f)for(let h=0;h<i[f];++h)l[d*2]=f,l[d*2+1]=h,u[d]=o[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eL(e,t){const n=yo("int32",e.length);for(let s=0;s<e.length;++s)n[s]=Bke(e[s]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tL=ws((e,t)=>e-t),eOe=sk((e,t,n,s)=>({real:e-n,imag:t-s})),lk=Ls(_h,tL,eOe),tOe={kernelName:_h,backendName:"cpu",kernelFunc:lk};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nL(e,t){const n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];const s=hn(n,e.dtype);for(let o=0;o<s.values.length;++o){const r=s.indexToLoc(o),a=new Array(e.rank);for(let l=0;l<a.length;l++)a[l]=r[l]%e.shape[l];const i=e.locToIndex(a);s.values[o]=e.values[i]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dd=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function sL(e,t,n=0,s=e.length-1){for(;s>n;){if(s-n>600){const i=s-n+1,l=t-n+1,u=Math.log(i),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(i-c)/i)*Math.sign(l-i/2),f=Math.max(n,Math.floor(t-l*c/i+d)),h=Math.min(s,Math.floor(t+(i-l)*c/i+d));sL(e,t,f,h)}const o=e[t];let r=n,a=s;for(Lu(e,n,t),Dd(e[s],o)>0&&Lu(e,n,s);r<a;){for(Lu(e,r,a),r++,a--;Dd(e[r],o)<0;)r=r+1;for(;Dd(e[a],o)>0;)a=a-1}Dd(e[n],o)===0?Lu(e,n,a):(a=a+1,Lu(e,a,s)),a<=t&&(n=a+1),t<=a&&(s=a-1)}}function oL(e,t,n,s,o){const r=t[t.length-1],[a,i]=[e.length/r,r],l=Gs(n,a*s),u=Gs("int32",a*s);for(let d=0;d<a;d++){const f=d*i,h=e.subarray(f,f+i);let p=new Array(h.length);h.forEach((b,$)=>p[$]={value:b,index:$}),s<p.length&&(sL(p,s),p=p.slice(0,s)),o&&p.sort(Dd);const m=d*s,g=l.subarray(m,m+s),v=u.subarray(m,m+s);for(let b=0;b<s;b++)g[b]=p[b].value,v[b]=p[b].index}const c=t.slice();return c[c.length-1]=s,[hn(c,n,l),hn(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rL(e,t,n,s){const o=an(t,n)[0],r=[1,n[0],1];for(let p=0;p<o;p++)r[0]*=n[p];r[1]=n[o];for(let p=o+1;p<n.length;p++)r[2]*=n[p];const a={},i=new Int32Array(n[o]),l=new to(r,s,e),u=[],c=r[0]===1&&r[2]===1;for(let p=0;p<n[o];p++){let m;if(c)m=e[p].toString();else{const g=[];for(let v=0;v<r[0];v++)for(let b=0;b<r[2];b++)g.push(l.get(v,p,b));m=g.join(",")}if(a[m]!==void 0)i[p]=a[m];else{const g=Object.keys(a).length;a[m]=g,i[p]=g,u.push(p)}}const d=r.slice();d[1]=Object.keys(a).length;const f=new to(d,s);u.forEach((p,m)=>{for(let g=0;g<r[0];g++)for(let v=0;v<r[2];v++)f.set(l.get(g,p,v),g,m,v)});const h=n.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var nOe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",simpleAbsImpl:y4,addImpl:w4,bincountImpl:ok,bincountReduceImpl:$4,ceilImpl:C4,concatImpl:k4,equalImpl:S4,expImpl:I4,expm1Impl:T4,floorImpl:N4,gatherNdImpl:A4,gatherV2Impl:D4,greaterImpl:R4,greaterEqualImpl:_4,lessImpl:O4,lessEqualImpl:M4,linSpaceImpl:F4,logImpl:P4,maxImpl:L4,maximumImpl:B4,minimumImpl:z4,multiplyImpl:rk,negImpl:V4,notEqualImpl:W4,prodImpl:H4,rangeImpl:U4,rsqrtImpl:G4,sigmoidImpl:U3e,sliceImpl:j4,sparseFillEmptyRowsImpl:q4,sparseReshapeImpl:X4,sparseSegmentReductionImpl:ik,sqrtImpl:j3e,squaredDifferenceImpl:Y4,stridedSliceImpl:Z4,stringNGramsImpl:J4,stringSplitImpl:Q4,stringToHashBucketFastImpl:eL,subImpl:tL,tileImpl:nL,topKImpl:oL,transposeImpl:ak,uniqueImpl:rL});/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */XO("cpu",()=>new C0,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aL=Pn(nh,e=>e>=0?e:Math.exp(e)-1),sOe={kernelName:nh,backendName:"cpu",kernelFunc:aL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iL(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{alpha:r}=s;It([o],"leakyRelu");const a=Ue(o.shape),i=n.data.get(o.dataId).values,l=Gs("float32",a);for(let u=0;u<i.length;u++)l[u]=i[u]<0?r*i[u]:i[u];return n.makeTensorInfo(o.shape,"float32",l)}const oOe={kernelName:gv,backendName:"cpu",kernelFunc:iL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOe=ws((e,t)=>e<0?t*e:e);function lL(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t;It([s,o],"prelu");const r=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,[i,l]=rOe(s.shape,o.shape,r,a,"float32");return n.makeTensorInfo(l,"float32",i)}const aOe={kernelName:Mv,backendName:"cpu",kernelFunc:lL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uL=Pn($h,e=>Math.max(0,e)),iOe={kernelName:$h,backendName:"cpu",kernelFunc:uL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cL=Pn(Ch,e=>Math.min(Math.max(0,e),6)),lOe={kernelName:Ch,backendName:"cpu",kernelFunc:cL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uk(e,t,n,s,o){if(n==="linear")return xa({inputs:{x:t},backend:e});if(n==="relu")return uL({inputs:{x:t},backend:e});if(n==="elu")return aL({inputs:{x:t},backend:e});if(n==="relu6")return cL({inputs:{x:t},backend:e});if(n==="prelu")return lL({inputs:{x:t,alpha:s},backend:e});if(n==="leakyrelu")return iL({inputs:{x:t},backend:e,attrs:{alpha:o}});if(n==="sigmoid")return K4({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ss(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{shape:r}=s,a=Ue(o.shape),i=q3(r,a),l=Ue(i);j(a===l,()=>`The new shape (${i}) has ${l} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=i,d.shape=i}return{dataId:o.dataId,shape:i,dtype:o.dtype}}const uOe={kernelName:Fv,backendName:"cpu",kernelFunc:ss};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dL(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r}=t,{transposeA:a,transposeB:i}=s;It([o,r],"matMul");const l=o.shape.length,u=r.shape.length,c=a?o.shape[l-2]:o.shape[l-1],d=i?r.shape[u-1]:r.shape[u-2],f=a?o.shape[l-1]:o.shape[l-2],h=i?r.shape[u-2]:r.shape[u-1],p=o.shape.slice(0,-2),m=r.shape.slice(0,-2),g=Ue(p),v=Ue(m),$=tn(o.shape.slice(0,-2),r.shape.slice(0,-2)).concat([f,h]);j(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${r.shape} and transposeA=${a} and transposeB=${i} must match.`);const y=a?[g,c,f]:[g,f,c],w=i?[v,h,d]:[v,d,h],C=ss({inputs:{x:o},backend:n,attrs:{shape:y}}),k=ss({inputs:{x:r},backend:n,attrs:{shape:w}}),S=a?C.shape[1]:C.shape[2],E=a?C.shape[2]:C.shape[1],x=i?k.shape[1]:k.shape[2],N=Math.max(g,v),A=n.data.get(C.dataId).values,D=n.data.get(k.dataId).values,M=Rt(C.shape),F=Rt(k.shape),[R,P,V]=a?[M[0],1,M[1]]:[M[0],M[1],1],[G,se,ke]=i?[1,F[1],F[0]]:[F[1],1,F[0]],te=E*x,pe=hn([N,E,x],C.dtype),ae=pe.values,K=n.blockSize;for(let X=0;X<N;X++)for(let Y=0;Y<E;Y+=K)for(let ie=0;ie<x;ie+=K)for(let xe=0;xe<S;xe+=K){const Le=Math.min(Y+K,E),Be=Math.min(ie+K,x),Pe=Math.min(xe+K,S);for(let U=Y;U<Le;U++)for(let Q=ie;Q<Be;Q++){let H=0;for(let ne=xe;ne<Pe;ne++){const ye=Math.min(X,g-1)*R,J=Math.min(X,v-1)*ke,Ne=A[ye+U*P+ne*V],Ie=D[ne*G+Q*se+J];H+=Ne*Ie}ae[X*te+(U*x+Q)]+=H}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo($,pe.dtype,pe.values)}const cOe={kernelName:tv,backendName:"cpu",kernelFunc:dL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r,bias:a,preluActivationWeights:i}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;let f,h,p;const m=[];f=dL({inputs:{a:o,b:r},attrs:{transposeA:l,transposeB:u},backend:n}),a&&(h=ep({inputs:{a:f,b:a},backend:n}),m.push(f),f=h),c&&(p=uk(n,f,c,i,d),m.push(f),f=p);for(const v of m)n.disposeIntermediateTensorInfo(v);return f}const fOe={kernelName:Jm,backendName:"cpu",kernelFunc:dOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hOe=Pn(Hf,e=>Math.acos(e)),pOe={kernelName:Hf,backendName:"cpu",kernelFunc:hOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mOe=Pn(Uf,e=>Math.acosh(e)),gOe={kernelName:Uf,backendName:"cpu",kernelFunc:mOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vOe(e){const{inputs:t,backend:n}=e,s=t;It(t,"addN");const o=s.map(i=>n.data.get(i.dataId).values),r=hn(s[0].shape,s[0].dtype),a=r.values;for(let i=0;i<s.length;i++){const l=o[i];for(let u=0;u<a.length;u++)a[u]+=l[u]}return n.makeTensorInfo(r.shape,r.dtype,r.values)}const bOe={kernelName:_$,backendName:"cpu",kernelFunc:vOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s;It(o,"all");const i=an(r,o.shape);let l=i;const u=ps(l,o.shape.length);let c=o;u!=null&&(c=sr({inputs:{x:o},backend:n,attrs:{perm:u}}),l=ys(l.length,o.shape.length)),js("all",l,c.shape.length);const[d,f]=Ps(c.shape,l),h=Ue(f),p=ro(Ue(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=m[b];for(let y=0;y<h;++y){const w=m[b+y];$=$&&w}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(a){const v=hs(d,i),b=ss({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const wOe={kernelName:O$,backendName:"cpu",kernelFunc:yOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s;It(o,"any");const i=an(r,o.shape);let l=i;const u=ps(l,o.shape.length);let c=o;u!=null&&(c=sr({inputs:{x:o},backend:n,attrs:{perm:u}}),l=ys(l.length,o.shape.length)),js("any",l,c.shape.length);const[d,f]=Ps(c.shape,l),h=Ue(f),p=ro(Ue(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=m[b];for(let y=0;y<h;++y){const w=m[b+y];$=$||w}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(a){const v=hs(d,i),b=ss({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const COe={kernelName:M$,backendName:"cpu",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kOe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;It(o,"argMax");let a=an(r,o.shape);const i=ps(a,o.shape.length);let l=o;const u=[];i!=null&&(l=sr({inputs:{x:o},backend:n,attrs:{perm:i}}),u.push(l),a=ys(a.length,l.shape.length)),a=[a[0]],js("argMax",a,l.shape.length);const[c,d]=Ps(l.shape,a),f=Ue(c),h=ro(f,"int32"),p=Ue(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const v=g*p;let b=m[v],$=0;for(let y=0;y<p;++y){const w=m[v+y];w>b&&(b=w,$=y)}h[g]=$}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const SOe={kernelName:Zg,backendName:"cpu",kernelFunc:kOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;It(o,"argMin");let a=an(r,o.shape);const i=ps(a,o.shape.length);let l=o;const u=[];i!=null&&(l=sr({inputs:{x:o},backend:n,attrs:{perm:i}}),u.push(l),a=ys(a.length,l.shape.length)),a=[a[0]],js("argMin",a,l.shape.length);const[c,d]=Ps(l.shape,a),f=Ue(c),h=ro(f,"int32"),p=Ue(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const v=g*p;let b=m[v],$=0;for(let y=0;y<p;++y){const w=m[v+y];w<b&&(b=w,$=y)}h[g]=$}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const IOe={kernelName:Jg,backendName:"cpu",kernelFunc:xOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EOe=Pn(Gf,e=>Math.asin(e)),TOe={kernelName:Gf,backendName:"cpu",kernelFunc:EOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOe=Pn(Kf,e=>Math.asinh(e)),AOe={kernelName:Kf,backendName:"cpu",kernelFunc:NOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe=Pn(jf,e=>Math.atan(e)),ROe={kernelName:jf,backendName:"cpu",kernelFunc:DOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Oe=ws((e,t)=>Math.atan2(e,t)),OOe=Ls(Xf,_Oe),MOe={kernelName:Xf,backendName:"cpu",kernelFunc:OOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FOe=Pn(qf,e=>Math.atanh(e)),POe={kernelName:qf,backendName:"cpu",kernelFunc:FOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ck(e,t,n,s,o,r){const a=o.strideHeight,i=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=hn(o.outShape,n),g=m.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],$=o.outShape[3];for(let y=0;y<o.batchSize;++y){const w=y*v,C=y*s[0];for(let k=0;k<o.inChannels;++k)for(let S=0;S<o.outHeight;++S){const E=S*a-f,x=Math.max(0,E),N=Math.min(o.inHeight,c+E),A=w+S*b;for(let D=0;D<o.outWidth;++D){const M=D*i-h,F=Math.max(0,M),R=Math.min(o.inWidth,d+M);let P=p,V=0,G=0;for(let ke=x;ke<N;ke+=l){const te=C+ke*s[1];for(let pe=F;pe<R;pe+=u){const ae=te+pe*s[2],K=e[ae+k];r==="max"&&K>P?P=K:r==="avg"&&(V+=K,G++)}if(isNaN(P))break}const se=A+D*$+k;g[se]=r==="avg"?V/G:P}}}return m}function fL(e,t,n,s,o=!1,r=!1){const a=hn(s.outShape,"int32"),i=s.strideHeight,l=s.strideWidth,u=s.dilationHeight,c=s.dilationWidth,d=s.effectiveFilterHeight,f=s.effectiveFilterWidth,h=s.padInfo.top,p=s.padInfo.left,m=hn(t,n,e);for(let g=0;g<s.batchSize;++g)for(let v=0;v<s.inChannels;++v)for(let b=0;b<s.outHeight;++b){const $=b*i-h;let y=$;for(;y<0;)y+=u;const w=Math.min(s.inHeight,d+$);for(let C=0;C<s.outWidth;++C){const k=C*l-p;let S=k;for(;S<0;)S+=c;const E=Math.min(s.inWidth,f+k);let x=Number.NEGATIVE_INFINITY,N=-1;for(let A=y;A<w;A+=u){const D=A-$;for(let M=S;M<E;M+=c){const F=M-k,R=m.get(g,A,M,v);R>x&&(x=R,o?N=r?((g*s.inHeight+A)*s.inWidth+M)*s.inChannels+v:(A*s.inWidth+M)*s.inChannels+v:N=D*f+F)}}a.set(N,g,b,C,v)}}return a}function hL(e,t,n,s,o,r){const a=o.strideDepth,i=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,v=o.padInfo.left,b=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,$=hn(o.outShape,n),y=$.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[2]*o.outShape[3]*o.outShape[4],k=o.outShape[3]*o.outShape[4],S=o.outShape[4];for(let E=0;E<o.batchSize;++E){const x=E*w,N=E*s[0];for(let A=0;A<o.inChannels;++A)for(let D=0;D<o.outDepth;++D){const M=D*a-m;let F=M;for(;F<0;)F+=u;const R=Math.min(o.inDepth,f+M),P=x+D*C;for(let V=0;V<o.outHeight;++V){const G=V*i-g;let se=G;for(;se<0;)se+=c;const ke=Math.min(o.inHeight,h+G),te=P+V*k;for(let pe=0;pe<o.outWidth;++pe){const ae=pe*l-v;let K=ae;for(;K<0;)K+=d;const X=Math.min(o.inWidth,p+ae),Y=te+pe*S;let ie=b,xe=0,Le=0;for(let Pe=F;Pe<R;Pe+=u){const U=N+Pe*s[1];for(let Q=se;Q<ke;Q+=c){const H=U+Q*s[2];for(let ne=K;ne<X;ne+=d){const ye=H+ne*s[3],J=e[ye+A];if(r==="max"&&J>ie?ie=J:r==="avg"&&(xe+=J,Le++),isNaN(ie))break}if(isNaN(ie))break}if(isNaN(ie))break}const Be=Y+A;y[Be]=r==="avg"?xe/Le:ie}}}}return $}function LOe(e,t){const n=hn(t.outShape,"int32"),s=t.strideDepth,o=t.strideHeight,r=t.strideWidth,a=t.dilationDepth,i=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let v=0;v<t.outDepth;++v){const b=v*s-f;let $=b;for(;$<0;)$+=a;const y=Math.min(t.inDepth,u+b);for(let w=0;w<t.outHeight;++w){const C=w*o-h;let k=C;for(;k<0;)k+=i;const S=Math.min(t.inHeight,c+C);for(let E=0;E<t.outWidth;++E){const x=E*r-p;let N=x;for(;N<0;)N+=l;const A=Math.min(t.inWidth,d+x);let D=Number.NEGATIVE_INFINITY,M=-1;for(let F=$;F<y;F+=a){const R=F-b;for(let P=k;P<S;P+=i){const V=P-C;for(let G=N;G<A;G+=l){const se=G-x,ke=e.get(m,F,P,G,g);ke>=D&&(D=ke,M=R*c*d+V*c+se)}}}n.set(M,m,v,w,E,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;It(o,"avgPool");const{filterSize:r,strides:a,pad:i,dimRoundingMode:l}=s,u=1;j(ao(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ar(o.shape,r,a,u,i,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Dn(c.inShape,c.outShape))d=xa({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Rt(o.shape),p=ck(f,o.shape,o.dtype,h,c,"avg");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const zOe={kernelName:Qg,backendName:"cpu",kernelFunc:BOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:a,pad:i,dimRoundingMode:l,dataFormat:u}=s;It(o,"avgPool3d");const c=Za(o.shape,r,a,1,i,l,u),d=n.data.get(o.dataId).values,f=hL(d,o.shape,o.dtype,Rt(o.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const WOe={kernelName:ev,backendName:"cpu",kernelFunc:VOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,{filterSize:a,strides:i,pad:l,dimRoundingMode:u}=s;It([o,r],"avgPool3DGrad");const c=Za(r.shape,a,i,1,l,u),d=c.strideDepth,f=c.strideHeight,h=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,$=c.dilationWidth,y=c.effectiveFilterDepth,w=c.effectiveFilterHeight,C=c.effectiveFilterWidth,k=y-1-c.padInfo.front,S=C-1-c.padInfo.left,E=w-1-c.padInfo.top,x=hn(r.shape,"float32"),N=1/(p*m*g),A=n.bufferSync(o);for(let D=0;D<c.batchSize;++D)for(let M=0;M<c.inChannels;++M)for(let F=0;F<c.inDepth;++F)for(let R=0;R<c.inHeight;++R)for(let P=0;P<c.inWidth;++P){const V=F-k,G=R-E,se=P-S;let ke=0;for(let te=0;te<y;te+=v){const pe=(V+te)/d;if(!(pe<0||pe>=c.outDepth||Math.floor(pe)!==pe))for(let ae=0;ae<w;ae+=b){const K=(G+ae)/f;if(!(K<0||K>=c.outHeight||Math.floor(K)!==K))for(let X=0;X<C;X+=$){const Y=(se+X)/h;if(Y<0||Y>=c.outWidth||Math.floor(Y)!==Y)continue;ke+=A.get(D,pe,K,Y,M)}}}x.set(ke*N,D,F,R,P,M)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const UOe={kernelName:P$,backendName:"cpu",kernelFunc:HOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GOe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,a=r;It([o,r],"avgPoolGrad");const{filterSize:i,strides:l,pad:u}=s,c=Ar(a.shape,i,l,1,u),d=c.strideHeight,f=c.strideWidth,h=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,$=b-1-c.padInfo.left,y=v-1-c.padInfo.top,w=hn(a.shape,"float32"),C=1/(h*p),k=n.data.get(o.dataId).values,S=hn(o.shape,"float32",k);for(let E=0;E<c.batchSize;++E)for(let x=0;x<c.inChannels;++x)for(let N=0;N<c.inHeight;++N)for(let A=0;A<c.inWidth;++A){const D=N-y,M=A-$;let F=0;for(let R=0;R<v;R+=m){const P=(D+R)/d;if(!(P<0||P>=c.outHeight||Math.floor(P)!==P))for(let V=0;V<b;V+=g){const G=(M+V)/f;if(G<0||G>=c.outWidth||Math.floor(G)!==G)continue;F+=S.get(E,P,G,x)}}w.set(F*C,E,N,A,x)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const KOe={kernelName:F$,backendName:"cpu",kernelFunc:GOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,scale:r,offset:a,mean:i,variance:l}=t;j(i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(r==null||i.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),It([o,i,l,r,a],"batchNorm");let{varianceEpsilon:u}=s;u==null&&(u=.001);const c=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,f=n.data.get(l.dataId).values,h=r?n.data.get(r.dataId).values:new Float32Array([1]),p=a?n.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,v=h.length,b=f.length,$=d.length;let y=0,w=0,C=0,k=0;for(let S=0;S<c.length;++S)m[S]=p[y++]+(c[S]-d[w++])*h[C++]/Math.sqrt(f[k++]+u),y>=g&&(y=0),w>=$&&(w=0),C>=v&&(C=0),k>=b&&(k=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const qOe={kernelName:hv,backendName:"cpu",kernelFunc:jOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,crops:a}=s;It([o],"batchToSpaceND");const i=r.reduce((v,b)=>v*b),l=Hh(o.shape,r,i),u=Uh(l.length,r.length),c=Gh(o.shape,r,i),d=b2(a,r.length),f=y2(c,a,r.length),h=ss({inputs:{x:o},backend:n,attrs:{shape:l}}),p=sr({inputs:{x:h},backend:n,attrs:{perm:u}}),m=ss({inputs:{x:p},backend:n,attrs:{shape:c}}),g=eu({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const YOe={kernelName:nv,backendName:"cpu",kernelFunc:XOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:a}=s,i=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,u=ok(i,l,r.dtype,r.shape,a);return n.makeTensorInfo([a],r.dtype,u)}const JOe={kernelName:L$,backendName:"cpu",kernelFunc:ZOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(e){const{inputs:t,backend:n}=e,{s0:s,s1:o}=t,r=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,i=tn(Array.from(r),Array.from(a));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}const eMe={kernelName:sO,backendName:"cpu",kernelFunc:QOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tMe=Pn(Jf,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),nMe={kernelName:Jf,backendName:"cpu",kernelFunc:tMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sMe=e=>{const{x:t}=e.inputs,n=e.backend,s=new Float32Array(Ue(t.shape)),o=n.data.get(t.dataId),r=o.complexTensorInfos.real,a=o.complexTensorInfos.imag,i=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values;for(let u=0;u<i.length;u++){const c=i[u],d=l[u];s[u]=Math.hypot(c,d)}return n.makeOutput(s,t.shape,"float32")},oMe={kernelName:sv,backendName:"cpu",kernelFunc:sMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ic(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.data.get(s.dataId).complexTensorInfos.imag,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const rMe={kernelName:J$,backendName:"cpu",kernelFunc:Ic};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ec(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s,r=an(o,t[0].shape)[0];let a=ya(t.map(m=>m.shape),r);if(Ue(a)===0)return n.makeTensorInfo(a,t[0].dtype,[]);const i=t.filter(m=>Ue(m.shape)>0);if(i.length===1)return xa({inputs:{x:i[0]},backend:n});const l=i.map(m=>m.shape);if(m2(l,r),i[0].dtype==="complex64"){const m=i.map(y=>Ql({inputs:{input:y},backend:n})),g=i.map(y=>Ic({inputs:{input:y},backend:n})),v=Ec({inputs:m,backend:n,attrs:{axis:r}}),b=Ec({inputs:g,backend:n,attrs:{axis:r}}),$=Eo({inputs:{real:v,imag:b},backend:n});return m.forEach(y=>n.disposeIntermediateTensorInfo(y)),g.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),$}const u=i.map(m=>{const g=Ue(m.shape.slice(r));return ss({inputs:{x:m},backend:n,attrs:{shape:[-1,g]}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=ya(u.map(m=>m.shape),1);const d=u[0].shape[0]===1,f=k4(c,a,t[0].dtype,d),h=ya(i.map(m=>m.shape),r),p=n.makeTensorInfo(h,t[0].dtype,f);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const aMe={kernelName:ov,backendName:"cpu",kernelFunc:Ec};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pL(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:a,pad:i,dataFormat:l,dilations:u,dimRoundingMode:c}=s;It([o,r],"conv2d");const d=Ja(l),f=Ks(o.shape,r.shape,a,u,i,c,!1,d),h=f.filterHeight,p=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,v=f.padInfo.left,b=f.padInfo.top,$=f.dataFormat==="channelsLast",y=new to(f.outShape,o.dtype),w=Rt(o.shape),C=Rt(r.shape),k=w[0],S=$?w[1]:w[2],E=$?w[2]:1,x=$?1:w[1],N=y.strides[0],A=$?y.strides[1]:y.strides[2],D=$?y.strides[2]:1,M=$?1:y.strides[1],F=n.data.get(o.dataId).values,R=n.data.get(r.dataId).values,P=y.values;for(let V=0;V<f.batchSize;++V){const G=V*k,se=V*N;for(let ke=0;ke<f.outHeight;++ke){const te=se+ke*A,pe=ke*f.strideHeight-b;for(let ae=0;ae<h;++ae){const K=pe+ae*m;if(K<0||K>=f.inHeight)continue;const X=ae*C[0],Y=G+K*S;for(let ie=0;ie<f.outWidth;++ie){const xe=te+ie*D,Le=ie*f.strideWidth-v;for(let Be=0;Be<p;++Be){const Pe=Le+Be*g;if(Pe<0||Pe>=f.inWidth)continue;const U=X+Be*C[1],Q=Y+Pe*E;let H=U;for(let ne=0;ne<f.inChannels;++ne){const ye=F[Q+ne*x];for(let J=0;J<f.outChannels;++J)P[xe+J*M]+=ye*R[H+J];H+=f.outChannels}}}}}}return n.makeTensorInfo(y.shape,y.dtype,P)}const iMe={kernelName:rv,backendName:"cpu",kernelFunc:pL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:a,pad:i,dataFormat:l,dimRoundingMode:u,filterShape:c}=s;It([o,r],"conv2dBackpropFilter");const d=Ja(l),f=Ks(o.shape,c,a,1,i,u,!1,d),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=f,v=f.dataFormat==="channelsLast",b=new to(f.filterShape,"float32"),$=f.padInfo.left,y=f.padInfo.top,w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,k=new to(o.shape,o.dtype,w),S=new to(r.shape,r.dtype,C);for(let E=0;E<m;++E){const x=Math.max(0,Math.ceil((y-E)/h)),N=Math.min(f.outHeight,(f.inHeight+y-E)/h);for(let A=0;A<g;++A){const D=Math.max(0,Math.ceil(($-A)/p)),M=Math.min(f.outWidth,(f.inWidth+$-A)/p);for(let F=0;F<f.inChannels;++F)for(let R=0;R<f.outChannels;++R){let P=0;for(let V=0;V<f.batchSize;++V)for(let G=x;G<N;++G){const se=E+G*h-y;for(let ke=D;ke<M;++ke){const te=A+ke*p-$;v?P+=k.get(V,se,te,F)*S.get(V,G,ke,R):P+=k.get(V,F,se,te)*S.get(V,R,G,ke)}}b.set(P,E,A,F,R)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const uMe={kernelName:z$,backendName:"cpu",kernelFunc:lMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cMe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{inputShape:a,strides:i,pad:l,dataFormat:u,dimRoundingMode:c}=s;It([o,r],"conv2dBackpropInput");const d=Rt(r.shape),f=Rt(o.shape);let h=Ja(u);const p=Ks(a,r.shape,i,1,l,c,!1,h),m=new to(p.inShape,"float32"),g=m.values,v=n.data.get(o.dataId).values,b=n.data.get(r.dataId).values,[$,y,w]=d,{batchSize:C,filterHeight:k,filterWidth:S,inChannels:E,inHeight:x,inWidth:N,outChannels:A,outHeight:D,outWidth:M,strideHeight:F,strideWidth:R}=p;h=p.dataFormat;const P=k-1-p.padInfo.top,V=S-1-p.padInfo.left,G=h==="channelsLast",se=m.strides[0],ke=G?m.strides[1]:m.strides[2],te=G?m.strides[2]:1,pe=G?1:m.strides[1],ae=f[0],K=G?f[1]:f[2],X=G?f[2]:1,Y=G?1:f[1];for(let ie=0;ie<C;++ie)for(let xe=0;xe<E;++xe)for(let Le=0;Le<x;++Le){const Be=Le-P,Pe=Math.max(0,Math.ceil(Be/F)),U=Math.min(D,(k+Be)/F);for(let Q=0;Q<N;++Q){const H=Q-V,ne=Math.max(0,Math.ceil(H/R)),ye=Math.min(M,(S+H)/R);let J=0;for(let Ie=Pe;Ie<U;++Ie){const fe=Ie*F-Be;for(let Ee=ne;Ee<ye;++Ee){const rt=Ee*R-H,Ye=ae*ie+K*Ie+X*Ee,lt=$*(k-1-fe)+y*(S-1-rt)+w*xe;for(let vt=0;vt<A;++vt){const Xe=v[Ye+Y*vt],de=b[lt+vt];J+=Xe*de}}}const Ne=se*ie+ke*Le+te*Q+pe*xe;g[Ne]=J}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const dMe={kernelName:av,backendName:"cpu",kernelFunc:cMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:a,pad:i,dilations:l}=s;It([o,r],"conv3d");const u=Hi(o.shape,r.shape,a,l,i),{filterDepth:c,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=u,v=g.front,b=g.left,$=g.top,y=new to(u.outShape,o.dtype),w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,k=y.values,S=Rt(o.shape),E=Rt(r.shape);for(let x=0;x<u.batchSize;++x){const N=x*S[0],A=x*y.strides[0];for(let D=0;D<u.outDepth;++D){const M=A+D*y.strides[1],F=D*u.strideDepth-v;for(let R=0;R<c;++R){const P=F+R*h;if(P<0||P>=u.inDepth)continue;const V=R*E[0],G=N+P*S[1];for(let se=0;se<u.outHeight;++se){const ke=M+se*y.strides[2],te=se*u.strideHeight-$;for(let pe=0;pe<d;++pe){const ae=te+pe*p;if(ae<0||ae>=u.inHeight)continue;const K=V+pe*E[1],X=G+ae*S[2];for(let Y=0;Y<u.outWidth;++Y){const ie=ke+Y*u.outChannels,xe=Y*u.strideWidth-b;for(let Le=0;Le<f;++Le){const Be=xe+Le*m;if(Be<0||Be>=u.inWidth)continue;const Pe=K+Le*E[2],U=X+Be*u.inChannels;let Q=Pe;for(let H=0;H<u.inChannels;++H){const ne=w[U+H];for(let ye=0;ye<u.outChannels;++ye)k[ie+ye]+=ne*C[Q+ye];Q+=u.outChannels}}}}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const hMe={kernelName:iv,backendName:"cpu",kernelFunc:fMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:a,pad:i,filterShape:l}=s;It([o,r],"conv3dBackpropFilterV2");const u=Rt(o.shape),c=Rt(r.shape),d=Hi(o.shape,l,a,1,i),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,b=new to(d.filterShape,"float32"),$=b.values,[y,w,C,k]=b.strides,S=n.data.get(r.dataId).values,[E,x,N,A]=c,D=n.data.get(o.dataId).values,[M,F,R,P]=u,V=d.padInfo.front,G=d.padInfo.left,se=d.padInfo.top;for(let ke=0;ke<m;++ke){const te=Math.max(0,Math.ceil((V-ke)/f)),pe=Math.min(d.outDepth,(d.inDepth+V-ke)/f),ae=ke*y;for(let K=0;K<g;++K){const X=Math.max(0,Math.ceil((se-K)/h)),Y=Math.min(d.outHeight,(d.inHeight+se-K)/h),ie=K*w+ae;for(let xe=0;xe<v;++xe){const Le=Math.max(0,Math.ceil((G-xe)/p)),Be=Math.min(d.outWidth,(d.inWidth+G-xe)/p),Pe=xe*C+ie;for(let U=0;U<d.inChannels;++U){const Q=U*k+Pe;for(let H=0;H<d.outChannels;++H){let ne=0;for(let ye=0;ye<d.batchSize;++ye){const J=ye*M,Ne=ye*E;for(let Ie=te;Ie<pe;++Ie){const Ee=(ke+Ie*f-V)*F+J,rt=Ie*x+Ne;for(let Ye=X;Ye<Y;++Ye){const vt=(K+Ye*h-se)*R+Ee,Xe=Ye*N+rt;for(let de=Le;de<Be;++de){const Ke=(xe+de*p-G)*P+vt,Ae=de*A+Xe;ne+=D[Ke+U]*S[Ae+H]}}}}$[Q+H]=ne}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const mMe={kernelName:V$,backendName:"cpu",kernelFunc:pMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{pad:a,strides:i,inputShape:l}=s;It([o],"conv3dBackpropInputV2");const u=Rt(o.shape),c=Rt(r.shape),d=Hi(l,r.shape,i,1,a),f=new to(d.inShape,"float32"),h=f.values,[p,m,g,v]=f.strides,b=n.data.get(o.dataId).values,[$,y,w,C]=u,k=n.data.get(r.dataId).values,[S,E,x,N]=c,{batchSize:A,filterDepth:D,filterHeight:M,filterWidth:F,inChannels:R,inDepth:P,inHeight:V,inWidth:G,outChannels:se,outDepth:ke,outHeight:te,outWidth:pe,strideDepth:ae,strideHeight:K,strideWidth:X}=d,Y=D-1-d.padInfo.front,ie=M-1-d.padInfo.top,xe=F-1-d.padInfo.left;for(let Le=0;Le<A;++Le)for(let Be=0;Be<R;++Be)for(let Pe=0;Pe<P;++Pe){const U=Pe-Y,Q=Math.max(0,Math.ceil(U/ae)),H=Math.min(ke,(D+U)/ae);for(let ne=0;ne<V;++ne){const ye=ne-ie,J=Math.max(0,Math.ceil(ye/K)),Ne=Math.min(te,(M+ye)/K);for(let Ie=0;Ie<G;++Ie){const fe=Ie-xe,Ee=Math.max(0,Math.ceil(fe/X)),rt=Math.min(pe,(F+fe)/X);let Ye=0;for(let lt=Q;lt<H;++lt){const vt=lt*ae-U;for(let Xe=J;Xe<Ne;++Xe){const de=Xe*K-ye;for(let Re=Ee;Re<rt;++Re){const Ke=Re*X-fe,Ae=$*Le+y*lt+w*Xe+C*Re,ct=S*(D-1-vt)+E*(M-1-de)+x*(F-1-Ke)+N*Be;for(let wt=0;wt<se;++wt){const sn=b[Ae+wt],ln=k[ct+wt];Ye+=sn*ln}}}}h[p*Le+m*Pe+g*ne+v*Ie+Be]=Ye}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const vMe={kernelName:W$,backendName:"cpu",kernelFunc:gMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bMe=Pn(Qf,e=>Math.cos(e)),yMe={kernelName:Qf,backendName:"cpu",kernelFunc:bMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wMe=Pn(eh,e=>Math.cosh(e)),$Me={kernelName:eh,backendName:"cpu",kernelFunc:wMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(e){const{inputs:t,backend:n,attrs:s}=e,{image:o,boxes:r,boxInd:a}=t,{cropSize:i,method:l,extrapolationValue:u}=s,[c,d,f,h]=o.shape,p=r.shape[0],[m,g]=i,v=hn([p,m,g,h],"float32"),b=n.data.get(r.dataId).values,$=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,w=Rt(o.shape),C=Rt(v.shape);for(let k=0;k<p;k++){const S=k*4,E=b[S],x=b[S+1],N=b[S+2],A=b[S+3],D=$[k];if(D>=c)continue;const M=m>1?(N-E)*(d-1)/(m-1):0,F=g>1?(A-x)*(f-1)/(g-1):0;for(let R=0;R<m;R++){const P=m>1?E*(d-1)+R*M:.5*(E+N)*(d-1);if(P<0||P>d-1){for(let V=0;V<g;V++)for(let G=0;G<h;G++){const se=G+V*C[2]+R*C[1]+k*C[0];v.values[se]=u}continue}if(l==="bilinear"){const V=Math.floor(P),G=Math.ceil(P),se=P-V;for(let ke=0;ke<g;ke++){const te=g>1?x*(f-1)+ke*F:.5*(x+A)*(f-1);if(te<0||te>f-1){for(let X=0;X<h;X++){const Y=X+ke*C[2]+R*C[1]+k*C[0];v.values[Y]=u}continue}const pe=Math.floor(te),ae=Math.ceil(te),K=te-pe;for(let X=0;X<h;X++){let Y=X+pe*w[2]+V*w[1]+D*w[0];const ie=y[Y];Y=X+ae*w[2]+V*w[1]+D*w[0];const xe=y[Y];Y=X+pe*w[2]+G*w[1]+D*w[0];const Le=y[Y];Y=X+ae*w[2]+G*w[1]+D*w[0];const Be=y[Y],Pe=ie+(xe-ie)*K,U=Le+(Be-Le)*K;Y=X+ke*C[2]+R*C[1]+k*C[0],v.values[Y]=Pe+(U-Pe)*se}}}else for(let V=0;V<g;++V){const G=g>1?x*(f-1)+V*F:.5*(x+A)*(f-1);if(G<0||G>f-1){for(let te=0;te<h;te++){const pe=te+V*C[2]+R*C[1]+k*C[0];v.values[pe]=u}continue}const se=Math.round(G),ke=Math.round(P);for(let te=0;te<h;te++){const pe=te+se*w[2]+ke*w[1]+D*w[0],ae=te+V*C[2]+R*C[1]+k*C[0];v.values[ae]=y[pe]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const kMe={kernelName:H$,backendName:"cpu",kernelFunc:CMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:a,reverse:i}=s;It(o,"cumsum");const l=ps([r],o.shape.length);let u=o;l!=null&&(u=sr({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=ys(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=tr(u.dtype,"int32"),f=ro(Ue(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=i?(v,b)=>v+p-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=p)for(let b=0;b<p;b++){const $=m(v,b);if(b===0)f[$]=a?0:h[$];else{const y=m(v,b-1);f[$]=a?h[y]+f[y]:h[$]+f[y]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const v=jc(l),b=sr({inputs:{x:g},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),b}return g}const xMe={kernelName:lv,backendName:"cpu",kernelFunc:SMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:a,binaryOutput:i}=s;if(o.shape.length===1){const l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=ok(l,u,r.dtype,r.shape,a);return n.makeTensorInfo([a],r.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(r),c=$4(l,u,a,i);return n.makeTensorInfo(c.shape,r.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const EMe={kernelName:oO,backendName:"cpu",kernelFunc:IMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockSize:r,dataFormat:a}=s;j(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const i=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],d=l*r,f=u*r,h=c/(r*r),p=n.data.get(o.dataId).values,m=new Float32Array(i*d*f*h);let g=0;for(let v=0;v<i;++v)for(let b=0;b<d;++b){const $=Math.floor(b/r),y=b%r;for(let w=0;w<f;++w){const C=Math.floor(w/r),k=w%r,S=(y*r+k)*h;for(let E=0;E<h;++E){const N=E+S+c*(C+u*($+l*v));m[g++]=p[N]}}}return n.makeTensorInfo([i,d,f,h],o.dtype,m)}const NMe={kernelName:U$,backendName:"cpu",kernelFunc:TMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mL(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:a,pad:i,dilations:l,dimRoundingMode:u}=s;It([o,r],"depthwiseConv2DNative");const c=Rt(o.shape),d=Rt(r.shape);let f=l;f==null&&(f=[1,1]),j(ao(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);const h=Ks(o.shape,r.shape,a,f,i,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:b}=h,$=b.left,y=b.top,w=h.outChannels/h.inChannels,C=new to(h.outShape,o.dtype),k=n.data.get(o.dataId).values,S=n.data.get(r.dataId).values,E=C.values;for(let x=0;x<h.batchSize;++x){const N=x*c[0],A=x*C.strides[0];for(let D=0;D<h.outHeight;++D){const M=A+D*C.strides[1],F=D*h.strideHeight-y;for(let R=0;R<p;++R){const P=F+R*g;if(P<0||P>=h.inHeight)continue;const V=R*d[0],G=N+P*c[1];for(let se=0;se<h.outWidth;++se){const ke=M+se*C.strides[2],te=se*h.strideWidth-$;for(let pe=0;pe<m;++pe){const ae=te+pe*v;if(ae<0||ae>=h.inWidth)continue;const K=V+pe*d[1],X=G+ae*h.inChannels;let Y=ke,ie=K;for(let xe=0;xe<h.inChannels;++xe){const Le=k[X+xe];for(let Be=0;Be<w;++Be)E[Y+Be]+=Le*S[ie+Be];Y+=w,ie+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const AMe={kernelName:uv,backendName:"cpu",kernelFunc:mL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DMe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:a,dilations:i,pad:l,dimRoundingMode:u,filterShape:c}=s;It([o,r],"depthwiseConv2dNativeBackpropFilter");const d=Ks(o.shape,c,a,i,l,u,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:m}=d,g=new to(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,$=d.outChannels/d.inChannels,y=n.data.get(o.dataId).values,w=new to(o.shape,o.dtype,y),C=n.data.get(r.dataId).values,k=new to(r.shape,r.dtype,C);for(let S=0;S<p;++S){const E=Math.max(0,Math.ceil((b-S)/f)),x=Math.min(d.outHeight,(d.inHeight+b-S)/f);for(let N=0;N<m;++N){const A=Math.max(0,Math.ceil((v-N)/h)),D=Math.min(d.outWidth,(d.inWidth+v-N)/h);for(let M=0;M<d.outChannels;++M){const F=Math.trunc(M/$),R=M%$;let P=0;for(let V=0;V<d.batchSize;++V)for(let G=E;G<x;++G){const se=S+G*f-b;for(let ke=A;ke<D;++ke){const te=N+ke*h-v;P+=w.get(V,se,te,F)*k.get(V,G,ke,M)}}g.set(P,S,N,F,R)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const RMe={kernelName:G$,backendName:"cpu",kernelFunc:DMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Me(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{strides:a,dilations:i,pad:l,dimRoundingMode:u,inputShape:c}=s;It([o,r],"depthwiseConv2DNativeBackpropInput");const d=Rt(o.shape),f=Rt(r.shape),h=Ks(c,r.shape,a,i,l,u,!0),p=new to(h.inShape,"float32"),m=p.values,[g,v,b]=p.strides,$=n.data.get(o.dataId).values,[y,w,C]=d,k=n.data.get(r.dataId).values,[S,E,x]=f,{batchSize:N,filterHeight:A,filterWidth:D,inChannels:M,inHeight:F,inWidth:R,outChannels:P,outHeight:V,outWidth:G,strideHeight:se,strideWidth:ke}=h,te=A-1-h.padInfo.top,pe=D-1-h.padInfo.left,ae=P/M;for(let K=0;K<N;++K)for(let X=0;X<M;++X)for(let Y=0;Y<F;++Y){const ie=Y-te,xe=Math.max(0,Math.ceil(ie/se)),Le=Math.min(V,(A+ie)/se);for(let Be=0;Be<R;++Be){const Pe=Be-pe,U=Math.max(0,Math.ceil(Pe/ke)),Q=Math.min(G,(D+Pe)/ke);let H=0;for(let ne=xe;ne<Le;++ne){const ye=ne*se-ie;for(let J=U;J<Q;++J){const Ne=J*ke-Pe,Ie=y*K+w*ne+C*J,fe=S*(A-1-ye)+E*(D-1-Ne)+x*X;for(let Ee=0;Ee<ae;++Ee){const rt=X*ae+Ee,Ye=$[Ie+rt],lt=k[fe+Ee];H+=Ye*lt}}}m[g*K+v*Y+b*Be+X]=H}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const OMe={kernelName:K$,backendName:"cpu",kernelFunc:_Me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MMe(e){const{inputs:t,backend:n}=e,{x:s}=t,o=Ue(s.shape),r=n.data.get(s.dataId).values,a=hn([o,o],s.dtype),i=a.values;for(let u=0;u<r.length;u++)i[u*o+u]=r[u];const l=[...s.shape,...s.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const FMe={kernelName:rO,backendName:"cpu",kernelFunc:MMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PMe={kernelName:cv,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o}=e,{strides:r,pad:a,dilations:i}=n,l=t,u=l.data.get(s.dataId).values,c=s.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:v,outWidth:b,padInfo:$,strideHeight:y,strideWidth:w,filterHeight:C,filterWidth:k,dilationHeight:S,dilationWidth:E,outShape:x}=Bh(s.shape,o.shape,r,a,"NHWC",i),N=Ue(x),A=x.length,D=yo(s.dtype,N);for(let F=0;F<h;++F)for(let R=0;R<v;++R){const P=R*y-$.top;for(let V=0;V<b;++V){const G=V*w-$.left;for(let se=0;se<g;++se){let ke=Number.MIN_SAFE_INTEGER;for(let pe=0;pe<C;++pe){const ae=P+pe*S;if(ae>=0&&ae<p)for(let K=0;K<k;++K){const X=G+K*E;if(X>=0&&X<m){const Y=va([F,ae,X,se],c,Rt(s.shape)),ie=va([pe,K,se],f,Rt(o.shape)),xe=u[Y]+d[ie];xe>ke&&(ke=xe)}}}const te=va([F,R,V,se],A,Rt(x));D[te]=ke}}}return{dataId:l.write(iu(D,s.dtype),x,s.dtype),shape:x,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMe={kernelName:$1,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o,dy:r}=e,{strides:a,pad:i,dilations:l}=n,u=t,c=qr(s.shape,u.data.get(s.dataId).values),d=qr(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:$,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:k,dilationWidth:S,outShape:E}=Bh(s.shape,o.shape,a,i,"NHWC",l);j(r.rank===E.length,()=>`Error in ${$1}, dy must have the same rank as output ${E.length}, but got ${r.rank}`);const x=qr(E,u.data.get(r.dataId).values),N=J3(o.shape,o.dtype);for(let D=0;D<f;++D)for(let M=0;M<g;++M){const F=M*$-b.top;for(let R=0;R<v;++R){const P=R*y-b.left;for(let V=0;V<m;++V){let G=Number.MIN_SAFE_INTEGER,se=0,ke=0;for(let te=0;te<w;++te){const pe=F+te*k;if(pe>=0&&pe<h)for(let ae=0;ae<C;++ae){const K=P+ae*S;if(K>=0&&K<p){const X=c[D][pe][K][V]+d[te][ae][V];X>G&&(G=X,se=te,ke=ae)}}}N[se][ke][V]+=x[D][M][R][V]}}}return{dataId:u.write(iu(N,s.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BMe={kernelName:w1,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o,dy:r}=e,{strides:a,pad:i,dilations:l}=n,u=t,c=qr(s.shape,u.data.get(s.dataId).values),d=qr(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:$,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:k,dilationWidth:S,outShape:E}=Bh(s.shape,o.shape,a,i,"NHWC",l);j(r.rank===E.length,()=>`Error in ${w1}, dy must have the same rank as output ${E.length}, but got ${r.rank}`);const x=qr(E,u.data.get(r.dataId).values),N=J3(s.shape,s.dtype);for(let D=0;D<f;++D)for(let M=0;M<g;++M){const F=M*$-b.top;for(let R=0;R<v;++R){const P=R*y-b.left;for(let V=0;V<m;++V){let G=Number.MIN_SAFE_INTEGER,se=F<0?0:F,ke=P<0?0:P;for(let te=0;te<w;++te){const pe=F+te*k;if(pe>=0&&pe<h)for(let ae=0;ae<C;++ae){const K=P+ae*S;if(K>=0&&K<p){const X=c[D][pe][K][V]+d[te][ae][V];X>G&&(G=X,se=pe,ke=K)}}}N[D][se][ke][V]+=x[D][M][R][V]}}}return{dataId:u.write(iu(N,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tp(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s;It(o,"sum");let i;o.dtype==="bool"?i=Ri({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):i=xa({inputs:{x:o},backend:n});const l=i.shape.length,u=an(r,i.shape),c=ps(u,l);let d=u,f=i;c!=null&&(f=sr({inputs:{x:i},backend:n,attrs:{perm:c}}),d=ys(d.length,l)),js("sum",d,f.shape.length);const[h,p]=Ps(f.shape,d),m=tr(f.dtype,"int32");let g=hg(n,h,m);const v=Ue(p),b=n.data.get(g.dataId).values,$=n.data.get(f.dataId).values;for(let y=0;y<b.length;++y){const w=y*v;let C=0;for(let k=0;k<v;++k)C+=$[w+k];b[y]=C}if(a){const y=hs(g.shape,u),w=g;g=ss({inputs:{x:g},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(i),c!=null&&n.disposeIntermediateTensorInfo(f),g}const zMe={kernelName:Wv,backendName:"cpu",kernelFunc:tp};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMe(e){const{inputs:t,backend:n,attrs:s}=e,{equation:o}=s,r=t,{allDims:a,summedDims:i,idDims:l}=E2(o,r.length);N2(a.length,l,r);const{path:u,steps:c}=A2(i,l),d=c.length;let f=null,h=a.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:v,expandDims:b}=T2(h,l[g]);let $;D2(v)?$=r[g]:($=sr({inputs:{x:r[g]},backend:n,attrs:{perm:v}}),p.push($));const y=$.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);Dn($.shape,y)||($=ss({inputs:{x:$},backend:n,attrs:{shape:y}}),p.push($)),f===null?f=$:(f=k0({inputs:{a:$,b:f},backend:n}),p.push(f))}m<d-1&&(u[m]>=0&&(f=tp({inputs:{x:f},backend:n,attrs:{axis:u[m]-(a.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const WMe={kernelName:aO,backendName:"cpu",kernelFunc:VMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(e){const{inputs:t,backend:n}=e,{dy:s,y:o}=t;It([s,o],"eluGrad");const r=new Float32Array(Ue(o.shape)),a=n.data.get(o.dataId).values,i=n.data.get(s.dataId).values;for(let l=0;l<a.length;++l){const u=a[l];u>=1?r[l]=i[l]:r[l]=i[l]*(u+1)}return n.makeTensorInfo(o.shape,"float32",r)}const UMe={kernelName:j$,backendName:"cpu",kernelFunc:HMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GMe=w2,KMe=$2,jMe=C2,qMe=k2,XMe=S2,YMe=x2,ZMe=Pn(sh,e=>{const t=Math.sign(e),n=Math.abs(e),s=1/(1+GMe*n);return t*(1-((((YMe*s+XMe)*s+qMe)*s+jMe)*s+KMe)*s*Math.exp(-n*n))}),JMe={kernelName:sh,backendName:"cpu",kernelFunc:ZMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pg(e){const{inputs:t,backend:n,attrs:s}=e,{input:o}=t,{dim:r}=s,a=o.shape.length,i=o.shape.slice();let l=r;return r<0&&(j(-(a+1)<=r,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+r+1),i.splice(l,0,1),ss({inputs:{x:o},backend:n,attrs:{shape:i}})}const QMe={kernelName:fv,backendName:"cpu",kernelFunc:pg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eFe=ws((e,t)=>e/t),dk=Ls(th,eFe),J1={kernelName:th,backendName:"cpu",kernelFunc:dk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gL(e,t,n){const s=e.shape,o=s[0],r=s[1],a=n.data.get(e.dataId),i=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,u=[o,r],c=Ue(u),d=Gs("float32",c),f=Gs("float32",c);for(let g=0;g<o;g++){const v=eu({inputs:{x:i},backend:n,attrs:{begin:[g,0],size:[1,r]}}),b=eu({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,r]}}),$=Eo({inputs:{real:v,imag:b},backend:n}),{real:y,imag:w}=tFe($,t,n),C=ja(y,w);for(let k=0;k<r;k++){const S=I2(C,k);d[g*r+k]=S.real,f[g*r+k]=S.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo($)}const h=n.makeTensorInfo(u,"float32",d),p=n.makeTensorInfo(u,"float32",f),m=Eo({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function tFe(e,t,n){const s=Ue(e.shape),o=n.data.get(e.dataId),r=n.data.get(o.complexTensorInfos.real.dataId).values,a=n.data.get(o.complexTensorInfos.imag.dataId).values;if(nFe(s)){const i=Q1(r,a,s,t,n),l=[e.shape[0],e.shape[1]];if(t){const u=n.makeTensorInfo(l,"float32",i.real),c=n.makeTensorInfo(l,"float32",i.imag),d=n.makeTensorInfo([],"float32",Wi(s,"float32")),f=xa({inputs:{x:d},backend:n}),h=J1.kernelFunc({inputs:{a:u,b:d},backend:n}),p=J1.kernelFunc({inputs:{a:c,b:f},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return i}else{const i=ja(r,a),l=sFe(i,s,t);return BM(l)}}function nFe(e){return(e&e-1)===0}function Q1(e,t,n,s,o){if(n===1)return{real:e,imag:t};const r=ja(e,t),a=n/2,i=zM(r),l=i.real,u=i.imag,c=[l.length],d=o.makeTensorInfo(c,"float32",l),f=o.makeTensorInfo(c,"float32",u),h=Eo({inputs:{real:d,imag:f},backend:o}),p=VM(r),m=p.real,g=p.imag,v=[m.length],b=o.makeTensorInfo(v,"float32",m),$=o.makeTensorInfo(v,"float32",g),y=Eo({inputs:{real:b,imag:$},backend:o}),w=Q1(l,u,a,s,o),C=w.real,k=w.imag,S=[C.length],E=o.makeTensorInfo(S,"float32",C),x=o.makeTensorInfo(S,"float32",k),N=Eo({inputs:{real:E,imag:x},backend:o}),A=Q1(m,g,a,s,o),D=A.real,M=A.imag,F=[D.length],R=o.makeTensorInfo(F,"float32",D),P=o.makeTensorInfo(F,"float32",M),V=Eo({inputs:{real:R,imag:P},backend:o}),G=HM(n,s),se=[G.real.length],ke=o.makeTensorInfo(se,"float32",G.real),te=o.makeTensorInfo(se,"float32",G.imag),pe=Eo({inputs:{real:ke,imag:te},backend:o}),ae=k0({inputs:{a:pe,b:V},backend:o}),K=ep({inputs:{a:N,b:ae},backend:o}),X=lk({inputs:{a:N,b:ae},backend:o}),Y=Ql({inputs:{input:K},backend:o}),ie=Ql({inputs:{input:X},backend:o}),xe=Ic({inputs:{input:K},backend:o}),Le=Ic({inputs:{input:X},backend:o}),Be=Ec({inputs:[Y,ie],backend:o,attrs:{axis:0}}),Pe=Ec({inputs:[xe,Le],backend:o,attrs:{axis:0}}),U=o.data.get(Be.dataId).values,Q=o.data.get(Pe.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo($),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(R),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(ke),o.disposeIntermediateTensorInfo(te),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(ae),o.disposeIntermediateTensorInfo(K),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(Y),o.disposeIntermediateTensorInfo(xe),o.disposeIntermediateTensorInfo(ie),o.disposeIntermediateTensorInfo(Le),o.disposeIntermediateTensorInfo(Be),o.disposeIntermediateTensorInfo(Pe),{real:U,imag:Q}}function sFe(e,t,n){const s=new Float32Array(t*2);for(let o=0;o<t;o++){let r=0,a=0;for(let i=0;i<t;i++){const l=UM(o*i,t,n),u=I2(e,i);r+=u.real*l.real-u.imag*l.imag,a+=u.real*l.imag+u.imag*l.real}n&&(r/=t,a/=t),WM(s,r,a,o)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(e){const{inputs:t,backend:n}=e,{input:s}=t,o=Ue(s.shape),r=s.shape[s.shape.length-1],a=o/r,i=ss({inputs:{x:s},backend:n,attrs:{shape:[a,r]}}),l=gL(i,!1,n),u=ss({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const rFe={kernelName:q$,backendName:"cpu",kernelFunc:oFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fk(e){const{backend:t,attrs:n}=e,{shape:s,value:o,dtype:r}=n,a=r||Vf(o),i=yo(a,Ue(s));return iFe(i,o,a),t.makeTensorInfo(s,a,i)}const aFe={kernelName:X$,backendName:"cpu",kernelFunc:fk};function iFe(e,t,n){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lFe={kernelName:Y$,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,o=n,r=Gs(s.dtype,Ue(s.shape)),[a,i,l,u]=s.shape,c=o.data.get(s.dataId).values;for(let f=0;f<a;f++){const h=f*l*i*u;for(let p=0;p<i;p++){const m=p*(l*u);for(let g=0;g<l;g++){const v=g*u;for(let b=0;b<u;b++){const $=Math.round(l-g-1),y=h+m+v+b;let w=c[y];if($>=0&&$<l){const C=$*u,k=h+m+C+b;w=c[k]}r[y]=w}}}}return{dataId:o.write(r,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uFe=ws((e,t)=>Math.floor(e/t)),cFe=Ls(ih,uFe,null,"int32"),dFe={kernelName:ih,backendName:"cpu",kernelFunc:cFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:a,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s;let m=pL({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(a){const g=m;m=ep({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=uk(n,m,h,i,p),n.disposeIntermediateTensorInfo(g)}return m}const hFe={kernelName:Qm,backendName:"cpu",kernelFunc:fFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:a,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s;let m=mL({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(a){const g=m;m=ep({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=uk(n,m,h,i,p),n.disposeIntermediateTensorInfo(g)}return m}const mFe={kernelName:hO,backendName:"cpu",kernelFunc:pFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(e){const{inputs:t,backend:n}=e,{params:s,indices:o}=t,r=Ue(s.shape),a=o.shape,i=a[a.length-1],[l,u,c,d]=EC(s,o);if(u===0)return n.makeTensorInfo(l,s.dtype,[]);const f=n.data.get(o.dataId).values,h=n.bufferSync(s),p=A4(f,h,s.dtype,u,i,c,d,s.shape,r);return n.makeTensorInfo(l,s.dtype,p.values)}const vFe={kernelName:iO,backendName:"cpu",kernelFunc:gFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,indices:r}=t,{axis:a,batchDims:i}=s;It([o,r],"gatherV2");const l=an(a,o.shape)[0],u=n.data.get(r.dataId).values,c=o.shape[l];for(let y=0;y<u.length;++y){const w=u[y];j(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let d=i;i==null&&(d=0);const f=Ue(r.shape),h=_2(o,r,l,d),p=ss({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=ss({inputs:{x:r},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),g=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],v=n.bufferSync(m),b=n.bufferSync(p),$=D4(b,v,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,$.dtype,$.values)}const yFe={kernelName:pv,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wFe(e){const{inputs:t,backend:n}=e,{input:s}=t,o=Ue(s.shape),r=s.shape[s.shape.length-1],a=o/r,i=ss({inputs:{x:s},backend:n,attrs:{shape:[a,r]}}),l=gL(i,!0,n),u=ss({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const $Fe={kernelName:Z$,backendName:"cpu",kernelFunc:wFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CFe=Pn(ch,e=>Number.isFinite(e)?1:0,"bool"),kFe={kernelName:ch,backendName:"cpu",kernelFunc:CFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SFe=Pn(dh,e=>Math.abs(e)===1/0?1:0,"bool"),xFe={kernelName:dh,backendName:"cpu",kernelFunc:SFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IFe=Pn(fh,e=>Number.isNaN(e)?1:0,"bool"),EFe={kernelName:fh,backendName:"cpu",kernelFunc:IFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TFe(e){const{backend:t,attrs:n}=e,{start:s,stop:o,num:r}=n,a=F4(s,o,r);return t.makeTensorInfo([a.length],"float32",a)}const NFe={kernelName:lO,backendName:"cpu",kernelFunc:TFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AFe=Pn(ph,e=>Math.log1p(e)),DFe={kernelName:ph,backendName:"cpu",kernelFunc:AFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RFe=ws((e,t)=>e&&t),_Fe=Ls(yv,RFe,null,"bool"),OFe={kernelName:yv,backendName:"cpu",kernelFunc:_Fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MFe=Pn(wv,e=>e?0:1,"bool"),FFe={kernelName:wv,backendName:"cpu",kernelFunc:MFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PFe=ws((e,t)=>e||t),LFe=Ls($v,PFe,null,"bool"),BFe={kernelName:$v,backendName:"cpu",kernelFunc:LFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{depthRadius:r,bias:a,alpha:i,beta:l}=s;It(o,"LRN");const u=o.shape[3],c=u-1,d=n.data.get(o.dataId).values,f=Ue(o.shape),h=new Float32Array(f);function p(m){const g=m%u;let v=m-g+Math.max(0,g-r);const b=m-g+Math.min(g+r,c);let $=0;for(;v<=b;v++){const y=d[v];$+=y*y}return $}for(let m=0;m<f;m++){const g=p(m),v=d[m]*Math.pow(a+i*g,-l);h[m]=v}return n.makeTensorInfo(o.shape,o.dtype,h)}const VFe={kernelName:Cv,backendName:"cpu",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,y:r,dy:a}=t,{depthRadius:i,bias:l,alpha:u,beta:c}=s;It(a,"LRNGrad");const d=Ue(a.shape),f=a.shape[3],h=n.data.get(a.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(r.dataId).values,g=new Float32Array(d),v=d;for(let b=0;b<v;b++){const $=b%f,y=b-$+Math.max(0,$-i),w=b-$+Math.min(f,$+i+1);let C=0;for(let k=y;k<w;k++)C+=Math.pow(p[k],2);C=u*C+l;for(let k=y;k<w;k++){let S=-2*u*c*p[k]*m[b]/C;b===k&&(S+=Math.pow(C,-c)),S*=h[b],g[k]+=S}}return n.makeTensorInfo(a.shape,o.dtype,g)}const HFe={kernelName:Q$,backendName:"cpu",kernelFunc:WFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vL(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reductionIndices:r,keepDims:a}=s,i=n;let l=o.shape;const u=l.length,c=an(r,l);let d=c;const f=ps(d,u);let h=i.data.get(o.dataId).values;if(f!=null){const y=new Array(u);for(let w=0;w<y.length;w++)y[w]=l[f[w]];h=ak(h,l,o.dtype,f,y),d=ys(d.length,u),l=y}It(o,"max"),js("max",d,u);const[p,m]=Ps(l,d),g=Ue(m),v=L4(h,g,p,o.dtype),b=i.write(v,p,o.dtype);let $=p;return a&&($=hs(p,c)),{dataId:b,shape:$,dtype:o.dtype}}const UFe={kernelName:kv,backendName:"cpu",kernelFunc:vL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;It(o,"maxPool");const{filterSize:r,strides:a,pad:i,dimRoundingMode:l}=s,u=1;j(ao(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ar(o.shape,r,a,u,i,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Dn(c.inShape,c.outShape))d=xa({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Rt(o.shape),p=ck(f,o.shape,o.dtype,h,c,"max");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const KFe={kernelName:Sv,backendName:"cpu",kernelFunc:GFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:a,pad:i,dimRoundingMode:l,dataFormat:u}=s;It(o,"maxPool3d");const c=Za(o.shape,r,a,1,i,l,u),d=n.data.get(o.dataId).values,f=hL(d,o.shape,o.dtype,Rt(o.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const qFe={kernelName:xv,backendName:"cpu",kernelFunc:jFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,{filterSize:a,strides:i,pad:l,dimRoundingMode:u}=s;It([o,r],"maxPool3DGrad");const c=Za(r.shape,a,i,1,l,u),d=n.bufferSync(r),f=LOe(d,c),h=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,$=c.effectiveFilterDepth,y=c.effectiveFilterHeight,w=c.effectiveFilterWidth,C=$-1-c.padInfo.front,k=w-1-c.padInfo.left,S=y-1-c.padInfo.top,E=hn(r.shape,"float32"),x=n.bufferSync(o);for(let N=0;N<c.batchSize;++N)for(let A=0;A<c.inChannels;++A)for(let D=0;D<c.inDepth;++D)for(let M=0;M<c.inHeight;++M)for(let F=0;F<c.inWidth;++F){const R=D-C,P=M-S,V=F-k;let G=0;for(let se=0;se<$;se+=g){const ke=(R+se)/h;if(!(ke<0||ke>=c.outDepth||Math.floor(ke)!==ke))for(let te=0;te<y;te+=v){const pe=(P+te)/p;if(!(pe<0||pe>=c.outHeight||Math.floor(pe)!==pe))for(let ae=0;ae<w;ae+=b){const K=(V+ae)/m;if(K<0||K>=c.outWidth||Math.floor(K)!==K)continue;const X=$*y*w-1-f.get(N,ke,pe,K,A),Y=se*y*w+te*w+ae,ie=X===Y?1:0;if(ie===0)continue;G+=x.get(N,ke,pe,K,A)*ie}}}E.set(G,N,D,M,F,A)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const YFe={kernelName:tC,backendName:"cpu",kernelFunc:XFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZFe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r,output:a}=t,i=r;It([r,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,f=Ar(i.shape,l,u,1,c,d),h=n.data.get(i.dataId).values,p=hn(f.outShape,i.dtype,fL(h,i.shape,i.dtype,f).values),m=f.strideHeight,g=f.strideWidth,v=f.dilationHeight,b=f.dilationWidth,$=f.effectiveFilterHeight,y=f.effectiveFilterWidth,w=y-1-f.padInfo.left,C=$-1-f.padInfo.top,k=hn(i.shape,"float32"),S=n.data.get(o.dataId).values,E=hn(o.shape,"float32",S);for(let x=0;x<f.batchSize;++x)for(let N=0;N<f.inChannels;++N)for(let A=0;A<f.inHeight;++A)for(let D=0;D<f.inWidth;++D){const M=A-C,F=D-w;let R=0;for(let P=0;P<$;P+=v){const V=(M+P)/m;if(!(V<0||V>=f.outHeight||Math.floor(V)!==V))for(let G=0;G<y;G+=b){const se=(F+G)/g;if(se<0||se>=f.outWidth||Math.floor(se)!==se)continue;const ke=$*y-1-p.get(x,V,se,N),te=P*y+G,pe=ke===te?1:0;if(pe===0)continue;R+=E.get(x,V,se,N)*pe}}k.set(R,x,A,D,N)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const JFe={kernelName:eC,backendName:"cpu",kernelFunc:ZFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(e,t,n,s,o){const r=Rt(t),a=ck(e,t,n,r,o,"max"),i=fL(e,t,n,o,!0,s);return[a.values,i.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ePe={kernelName:uO,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{filterSize:o,strides:r,pad:a,includeBatchInIndex:i}=t,l=n;It(s,"MaxPoolWithArgmax");const u=l.data.get(s.dataId).values,c=Ar(s.shape,o,r,[1,1],a),[d,f]=QFe(u,s.shape,s.dtype,i,c),h=l.write(d,c.outShape,s.dtype),p=l.write(f,c.outShape,s.dtype);return[{dataId:h,shape:c.outShape,dtype:s.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s,i=an(r,o.shape),u=Ps(o.shape,i)[1],c=Ue(u),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(f);const h=Ri({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=dk({inputs:{a:h,b:f},backend:n});d.push(p);const m=tp({inputs:{x:p},backend:n,attrs:{axis:r,keepDims:a}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const nPe={kernelName:Iv,backendName:"cpu",kernelFunc:tPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s;It(o,"min");const i=an(r,o.shape);let l=i;const u=ps(l,o.shape.length);let c=o;u!=null&&(c=sr({inputs:{x:o},backend:n,attrs:{perm:u}}),l=ys(l.length,o.shape.length)),js("min",l,c.shape.length);const[d,f]=Ps(c.shape,l),h=Ue(f),p=ro(Ue(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=m[b];for(let y=0;y<h;++y){const w=m[b+y];(Number.isNaN(w)||w<$)&&($=w)}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(a){const v=hs(d,i),b=ss({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),b}return g}const oPe={kernelName:Ev,backendName:"cpu",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,mode:a}=s;It(o,"mirrorPad");const i=r.map(($,y)=>$[0]+o.shape[y]+$[1]),l=r.map($=>$[0]),u=r.map(($,y)=>$[0]+o.shape[y]),c=a==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,h=Rt(o.shape),p=Ue(i),m=i.length,g=Rt(i),v=Gs(o.dtype,p);for(let $=0;$<p;$++){let y=Wf($,m,g);for(let C=0;C<m;C++)y[C]<l[C]?y[C]=l[C]*2-y[C]-c:y[C]>=u[C]&&(y[C]=(u[C]-1)*2-y[C]+c);y=y.map((C,k)=>C-l[k]);const w=va(y,f,h);v[$]=d[w]}return{dataId:n.write(v,i,o.dtype),shape:i,dtype:o.dtype}}const aPe={kernelName:Tv,backendName:"cpu",kernelFunc:rPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iPe=ws((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),lPe=Ls(vh,iPe),uPe={kernelName:vh,backendName:"cpu",kernelFunc:lPe};var bL={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=i();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function i(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.alea=a})(An,e,!1)})(bL);var yL={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},i===(i|0)?l.x=i:u+=i;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xor128=a})(An,e,!1)})(yL);var wL={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,i===(i|0)?l.x=i:u+=i;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l.v=i.v,l.d=i.d,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xorwow=a})(An,e,!1)})(wL);var $L={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,i)}function r(i,l){return l.x=i.x.slice(),l.i=i.i,l}function a(i,l){i==null&&(i=+new Date);var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xorshift7=a})(An,e,!1)})($L);var CL={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,m,g,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=v[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=g,c.X=v,c.i=p}u(l,i)}function r(i,l){return l.i=i.i,l.w=i.w,l.X=i.X.slice(),l}function a(i,l){i==null&&(i=+new Date);var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.xor4096=a})(An,e,!1)})(CL);var kL={exports:{}};(function(e){(function(t,n,s){function o(i){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,i===Math.floor(i)?(l.a=i/4294967296|0,l.b=i|0):u+=i;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(i,l){return l.a=i.a,l.b=i.b,l.c=i.c,l.d=i.d,l}function a(i,l){var u=new o(i),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=a:s&&s.amd?s(function(){return a}):this.tychei=a})(An,e,!1)})(kL);var SL={exports:{}};(function(e){(function(t,n){var s=this,o=256,r=6,a=52,i="random",l=n.pow(o,r),u=n.pow(2,a),c=u*2,d=o-1,f;function h(y,w,C){var k=[];w=w==!0?{entropy:!0}:w||{};var S=v(g(w.entropy?[y,$(t)]:y==null?b():y,3),k),E=new p(k),x=function(){for(var N=E.g(r),A=l,D=0;N<u;)N=(N+D)*o,A*=o,D=E.g(1);for(;N>=c;)N/=2,A/=2,D>>>=1;return(N+D)/A};return x.int32=function(){return E.g(4)|0},x.quick=function(){return E.g(4)/4294967296},x.double=x,v($(E.S),t),(w.pass||C||function(N,A,D,M){return M&&(M.S&&m(M,E),N.state=function(){return m(E,{})}),D?(n[i]=N,A):N})(x,S,"global"in w?w.global:this==n,w.state)}n["seed"+i]=h;function p(y){var w,C=y.length,k=this,S=0,E=k.i=k.j=0,x=k.S=[];for(C||(y=[C++]);S<o;)x[S]=S++;for(S=0;S<o;S++)x[S]=x[E=d&E+y[S%C]+(w=x[S])],x[E]=w;(k.g=function(N){for(var A,D=0,M=k.i,F=k.j,R=k.S;N--;)A=R[M=d&M+1],D=D*o+R[d&(R[M]=R[F=d&F+A])+(R[F]=A)];return k.i=M,k.j=F,D})(o)}function m(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function g(y,w){var C=[],k=typeof y,S;if(w&&k=="object")for(S in y)try{C.push(g(y[S],w-1))}catch{}return C.length?C:k=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",k,S=0;S<C.length;)w[d&S]=d&(k^=w[d&S]*19)+C.charCodeAt(S++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(SL);var cPe=bL.exports,dPe=yL.exports,fPe=wL.exports,hPe=$L.exports,pPe=CL.exports,mPe=kL.exports,du=SL.exports;du.alea=cPe;du.xor128=dPe;du.xorwow=fPe;du.xorshift7=hPe;du.xor4096=pPe;du.tychei=mPe;var gPe=du;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xL(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{dim:r}=s,a=o.shape.length;let i=r;if(i===-1&&(i=a-1),i!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${i}`);const l=an([i],o.shape),u=vL({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=hs(u.shape,l),d=ss({inputs:{x:u},backend:n,attrs:{shape:c}}),f=lk({inputs:{a:o,b:d},backend:n}),h=E4({inputs:{x:f},backend:n}),p=tp({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=ss({inputs:{x:p},backend:n,attrs:{shape:c}}),g=dk({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const vPe={kernelName:Gv,backendName:"cpu",kernelFunc:xL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bPe(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{numSamples:r,seed:a,normalized:i}=s;It(o,"multinomial");const l=i?o:xL({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,f=[u,r],h=ro(Ue(f),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=d[m];for(let $=1;$<g.length;++$)g[$]=g[$-1]+d[m+$];const v=gPe.alea(a.toString()),b=p*r;for(let $=0;$<r;++$){const y=v();h[b+$]=g.length;for(let w=0;w<g.length;w++)if(y<g[w]){h[b+$]=w;break}}}return i||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const yPe={kernelName:cO,backendName:"cpu",kernelFunc:bPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe=r2;function $Pe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l}=s;It(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,{selectedIndices:d}=wPe(u,c,a,i,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const CPe={kernelName:nC,backendName:"cpu",kernelFunc:$Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kPe=a2;function SPe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l,padToMaxOutputSize:u}=s;It(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,{selectedIndices:f,validOutputs:h}=kPe(c,d,a,i,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const xPe={kernelName:sC,backendName:"cpu",kernelFunc:SPe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IPe=i2;function EPe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l,softNmsSigma:u}=s;It(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,f=a,h=i,p=l,m=u,{selectedIndices:g,selectedScores:v}=IPe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const TPe={kernelName:oC,backendName:"cpu",kernelFunc:EPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o}=t,{depth:r,onValue:a,offValue:i}=s;It(o,"oneHot");const l=Ue(o.shape),u=new Float32Array(l*r);u.fill(i);const c=n.data.get(o.dataId).values;for(let d=0;d<l;++d)c[d]>=0&&c[d]<r&&(u[d*r+c[d]]=a);return n.makeTensorInfo([...o.shape,r],"int32",u)}const APe={kernelName:Rv,backendName:"cpu",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mg(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const o=Ql({inputs:{input:s},backend:n}),r=mg({inputs:{x:o},backend:n}),a=Ic({inputs:{input:s},backend:n}),i=mg({inputs:{x:a},backend:n}),l=Eo({inputs:{real:r,imag:i},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),l}else return fk({backend:n,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const DPe={kernelName:Xv,backendName:"cpu",kernelFunc:mg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IL(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const o=Ql({inputs:{input:s},backend:n}),r=IL({inputs:{x:o},backend:n}),a=Ic({inputs:{input:s},backend:n}),i=mg({inputs:{x:a},backend:n}),l=Eo({inputs:{real:r,imag:i},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),l}else return fk({backend:n,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const RPe={kernelName:Dv,backendName:"cpu",kernelFunc:IL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EL(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s;if(t.length===1)return pg({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const r=t[0].shape,a=t[0].dtype;t.forEach(c=>{Nr(r,c.shape,"All tensors passed to stack must have matching shapes"),j(a===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const i=[],l=t.map(c=>{const d=pg({inputs:{input:c},backend:n,attrs:{dim:o}});return i.push(d),d}),u=Ec({inputs:l,backend:n,attrs:{axis:o}});return i.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const _Pe={kernelName:_v,backendName:"cpu",kernelFunc:EL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OPe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,constantValue:a}=s;It(o,"pad");const i=r.map((b,$)=>b[0]+o.shape[$]+b[1]),l=r.map(b=>b[0]),u=n.data.get(o.dataId).values,c=Ue(o.shape),d=o.shape.length,f=Rt(o.shape),h=Ue(i),p=i.length,m=Rt(i),g=Gs(o.dtype,h);a!==0&&g.fill(a);for(let b=0;b<c;b++){const y=Wf(b,d,f).map((C,k)=>C+l[k]),w=va(y,p,m);g[w]=u[b]}return{dataId:n.write(g,i,o.dtype),shape:i,dtype:o.dtype}}const TL={kernelName:Ov,backendName:"cpu",kernelFunc:OPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MPe=ws((e,t)=>Math.pow(e,t)),FPe=Ls(yh,MPe),PPe={kernelName:yh,backendName:"cpu",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LPe(e){const{backend:t,attrs:n}=e,{start:s,stop:o,dtype:r,step:a}=n,i=U4(s,o,a,r);return t.makeTensorInfo([i.length],r,i)}const BPe={kernelName:aC,backendName:"cpu",kernelFunc:LPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zPe=Pn(wh,e=>1/e),VPe={kernelName:wh,backendName:"cpu",kernelFunc:zPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WPe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:a,size:i}=s;It(o,"resizeBilinear");const l=Rt(o.shape),[u,c]=i,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(Ue([d,u,c,p])),v=[r&&u>1?f-1:f,r&&c>1?h-1:h],b=[r&&u>1?u-1:u,r&&c>1?c-1:c];let $=0;const y=v[0]/b[0],w=v[1]/b[1];for(let C=0;C<d;C++)for(let k=0;k<u;k++){let S;a?S=y*(k+.5)-.5:S=y*k;const E=Math.max(0,Math.floor(S)),x=S-E,N=Math.min(f-1,Math.ceil(S)),A=C*l[0]+E*l[1],D=C*l[0]+N*l[1];for(let M=0;M<c;M++){let F;a?F=w*(M+.5)-.5:F=w*M;const R=Math.max(0,Math.floor(F)),P=F-R,V=Math.min(h-1,Math.ceil(F)),G=A+R*l[2],se=D+R*l[2],ke=A+V*l[2],te=D+V*l[2];for(let pe=0;pe<p;pe++){const ae=m[G+pe],K=m[se+pe],X=m[ke+pe],Y=m[te+pe],ie=ae+(X-ae)*P,xe=K+(Y-K)*P,Le=ie+(xe-ie)*x;g[$++]=Le}}}return n.makeTensorInfo([d,u,c,p],"float32",g)}const HPe={kernelName:Lv,backendName:"cpu",kernelFunc:WPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:a}=s;It([r,o],"resizeBilinearGrad");const i=Rt(o.shape),[l,u,c,d]=o.shape,[,f,h]=r.shape,p=new Float32Array(l*u*c*d),m=[a&&f>1?u-1:u,a&&h>1?c-1:c],g=[a&&f>1?f-1:f,a&&h>1?h-1:h],v=m[0]/g[0],b=m[1]/g[1],$=n.data.get(r.dataId).values;let y=0;for(let w=0;w<l;w++){const C=w*i[0];for(let k=0;k<f;k++){const S=k*v,E=Math.floor(S),x=Math.min(Math.ceil(S),u-1),N=C+E*i[1],A=C+x*i[1],D=S-E,M=1-D;for(let F=0;F<h;F++){const R=F*b,P=Math.floor(R),V=Math.min(Math.ceil(R),c-1),G=R-P,se=1-G,ke=N+P*i[2],te=N+V*i[2],pe=A+P*i[2],ae=A+V*i[2],K=M*se,X=M*G,Y=D*se,ie=D*G;for(let xe=0;xe<d;xe++){const Le=$[y++];p[ke+xe]+=Le*K,p[te+xe]+=Le*X,p[pe+xe]+=Le*Y,p[ae+xe]+=Le*ie}}}}return n.makeTensorInfo([l,c,u,d],"float32",p)}const GPe={kernelName:uC,backendName:"cpu",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:a,size:i}=s;It(o,"resizeNearestNeighbor");const l=Rt(o.shape),[u,c]=i,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*u*c*p),v=[r&&u>1?f-1:f,r&&c>1?h-1:h],b=[r&&u>1?u-1:u,r&&c>1?c-1:c],$=v[0]/b[0],y=v[1]/b[1];let w=0;for(let C=0;C<d;C++){const k=C*l[0];for(let S=0;S<u;S++){const E=a?$*(S+.5):$*S;let x=Math.min(f-1,r?Math.round(E):Math.floor(E));a&&(x=Math.max(0,x));const N=k+x*l[1];for(let A=0;A<c;A++){const D=a?y*(A+.5):y*A;let M=Math.min(h-1,r?Math.round(D):Math.floor(D));a&&(M=Math.max(0,M));const F=N+M*l[2];for(let R=0;R<p;R++){const P=m[F+R];g[w++]=P}}}}return n.makeTensorInfo([d,u,c,p],o.dtype,g)}const jPe={kernelName:Pv,backendName:"cpu",kernelFunc:KPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:a}=s;It([r,o],"resizeNearestNeighborGrad");const i=Rt(o.shape),l=Rt(r.shape),[u,c,d,f]=o.shape,[,h,p]=r.shape,m=new Float32Array(u*c*d*f),g=n.data.get(r.dataId).values,v=[a&&h>1?c-1:c,a&&p>1?d-1:d],b=[a&&h>1?h-1:h,a&&p>1?p-1:p],$=v[0]/b[0],y=v[1]/b[1],w=1/$,C=1/y,k=Math.ceil(w)*2+2,S=Math.ceil(C)*2+2;for(let E=0;E<u;E++){const x=E*i[0];for(let N=0;N<c;N++){const A=x+N*i[1],D=Math.floor(N*w),M=Math.floor(D-k/2);for(let F=0;F<d;F++){const R=A+F*i[2],P=Math.floor(F*C),V=Math.floor(P-S/2);for(let G=0;G<f;G++){let se=0;for(let ke=0;ke<k;ke++){const te=ke+M;if(te<0||te>=h)continue;const pe=x+te*l[1],ae=te*$,K=Math.min(c-1,a?Math.round(ae):Math.floor(ae));if(N===K)for(let X=0;X<S;X++){const Y=X+V;if(Y<0||Y>=p)continue;const ie=pe+Y*l[2],xe=Y*y,Le=Math.min(d-1,a?Math.round(xe):Math.floor(xe));F===Le&&(se+=g[ie+G])}}m[R+G]=se}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const XPe={kernelName:lC,backendName:"cpu",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dims:r}=s;It(o,"reverse");const a=o.shape.length,i=an(r,o.shape);if(a===0)return xa({inputs:{x:o},backend:n});const l=new to(o.shape,o.dtype),u=n.bufferSync(o);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),f=d.slice();i.forEach(h=>f[h]=o.shape[h]-1-f[h]),l.set(u.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const ZPe={kernelName:Bv,backendName:"cpu",kernelFunc:YPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JPe={kernelName:CC,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,{radians:o,fillValue:r,center:a}=t,i=n,l=Gs(s.dtype,Ue(s.shape)),[u,c,d,f]=s.shape,[h,p]=v2(a,c,d),m=255,g=Math.sin(o),v=Math.cos(o),b=i.data.get(s.dataId).values;for(let y=0;y<u;y++){const w=y*d*c*f;for(let C=0;C<c;C++){const k=C*(d*f);for(let S=0;S<d;S++){const E=S*f;for(let x=0;x<f;x++){const N=[u,C,S,x],A=N[2],D=N[1];let M=(A-h)*v-(D-p)*g,F=(A-h)*g+(D-p)*v;M=Math.round(M+h),F=Math.round(F+p);let R=r;if(typeof r!="number"&&(x===3?R=m:R=r[x]),M>=0&&M<d&&F>=0&&F<c){const V=F*(d*f),G=M*f,se=w+V+G+x;R=b[se]}const P=w+k+E+x;l[P]=R}}}}return{dataId:i.write(l,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QPe=Pn(kh,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),e4e={kernelName:kh,backendName:"cpu",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NL(e,t,n,s,o,r,a,i,l,u){const c=[s/o,o],d=e.values,f=t.values;if(s===0)return hn(n,t.dtype);const h=hn(c,t.dtype);h.values.fill(l);for(let p=0;p<r;p++){const m=[];let g=0;for(let v=0;v<a;v++){const b=d[p*a+v];m.push(b),g+=b*i[v]}if(g<0||g>=s/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let v=0;v<o;v++)u?h.values[g*o+v]+=f[p*o+v]:h.values[g*o+v]=t.rank===0?f[0]:f[p*o+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4e(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o,updates:r}=t,{shape:a}=s,{sliceRank:i,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Lh(r,o,a),f=!0,h=n.bufferSync(o),p=n.bufferSync(r),m=NL(h,p,a,d,u,l,i,c,0,f);return n.makeTensorInfo(a,m.dtype,m.values)}const n4e={kernelName:dO,backendName:"cpu",kernelFunc:t4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s4e(e){const{inputs:t,backend:n}=e,{condition:s,t:o,e:r}=t;It([s,o,r],"select");const a=s.shape.length,i=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=tr(o.dtype,r.dtype),d=ro(Ue(o.shape),c);let f=0;const h=a===0||a>1||o.shape.length===1?1:Ue(o.shape.slice(1));for(let p=0;p<i.length;p++)for(let m=0;m<h;m++)i[p]===1?d[f++]=l[p]:d[f++]=u[p];return n.makeTensorInfo(o.shape,c,d)}const o4e={kernelName:zv,backendName:"cpu",kernelFunc:s4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4e=u0,a4e=c0,i4e=Pn(xh,e=>e>=0?a4e*e:r4e*(Math.exp(e)-1)),l4e={kernelName:xh,backendName:"cpu",kernelFunc:i4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e=Pn(Th,e=>e<0?-1:e>0?1:0),c4e={kernelName:Th,backendName:"cpu",kernelFunc:u4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e=Pn(Ih,e=>Math.sin(e)),f4e={kernelName:Ih,backendName:"cpu",kernelFunc:d4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=Pn(Eh,e=>Math.sinh(e)),p4e={kernelName:Eh,backendName:"cpu",kernelFunc:h4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m4e=11920928955078125e-23,sN=Math.log(m4e)+2,g4e=Pn(Ah,e=>{const t=e>-sN,n=e<sN,s=Math.exp(e);let o;return n?o=s:t?o=e:o=Math.log(1+s),o}),v4e={kernelName:Ah,backendName:"cpu",kernelFunc:g4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,paddings:a}=s;It([o],"spaceToBatchND");const i=Ue(r),l=[[0,0]];l.push(...a);for(let C=1+r.length;C<o.shape.length;++C)l.push([0,0]);const u=TL.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),c=Hh(u.shape,r,i,!1),d=Uh(c.length,r.length,!1),f=Gh(u.shape,r,i,!1),m=ss({inputs:{x:u},backend:n,attrs:{shape:c}}),b=sr({inputs:{x:m},backend:n,attrs:{perm:d}}),w=ss({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),w}const y4e={kernelName:Hv,backendName:"cpu",kernelFunc:b4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w4e(e){const{inputs:t,backend:n}=e,{indices:s,values:o,denseShape:r,defaultValue:a}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const i=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values[0],[d,f,h,p,m]=q4(i,s.shape,s.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,s.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const $4e={kernelName:cC,backendName:"cpu",kernelFunc:w4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4e(e){const{inputs:t,backend:n}=e,{inputIndices:s,inputShape:o,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const a=Array.from(n.data.get(o.dataId).values),i=n.data.get(s.dataId).values,l=Array.from(n.data.get(r.dataId).values),[u,c,d]=X4(i,s.shape,s.dtype,a,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const k4e={kernelName:dC,backendName:"cpu",kernelFunc:C4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4e(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[u,c]=ik(a,s.shape,s.dtype,i,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const x4e={kernelName:fC,backendName:"cpu",kernelFunc:S4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4e(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[u,c]=ik(a,s.shape,s.dtype,i,l);return n.makeTensorInfo(c,s.dtype,u)}const E4e={kernelName:hC,backendName:"cpu",kernelFunc:I4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T4e(e){const{inputs:t,backend:n,attrs:s}=e,{sparseIndices:o,sparseValues:r,defaultValue:a}=t,{outputShape:i}=s,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=Lh(r,o,i),h=!1,p=n.bufferSync(o),m=n.bufferSync(r),g=n.data.get(a.dataId).values[0],v=NL(p,m,i,f,c,u,l,d,g,h);return n.makeTensorInfo(i,v.dtype,v.values)}const N4e={kernelName:fO,backendName:"cpu",kernelFunc:T4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{numOrSizeSplits:r,axis:a}=s,i=an(a,o.shape)[0],l=R2(o,r,i),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map(d=>{const f=[...c];f[i]=d;const h=eu({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[i]+=d,h})}const D4e={kernelName:Uv,backendName:"cpu",kernelFunc:A4e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4e={kernelName:pC,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,s=t;It(n,"square");const o=s.data.get(n.dataId).values,r=new Float32Array(o.length);for(let i=0;i<o.length;++i){const l=o[i];r[i]=l*l}return{dataId:s.write(r,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e=Pn(Ph,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),O4e={kernelName:Ph,backendName:"cpu",kernelFunc:_4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,end:a,strides:i,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=s;It(o,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:$,strides:y}=RC(o.shape,r,a,i,l,u,c,d,f);let w;if(m)w=ss({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||v){j(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const C=NC(b,$,y),k=eu({inputs:{x:o},backend:n,attrs:{begin:b,size:C}});w=ss({inputs:{x:k},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(k)}else{const C=n.bufferSync(o),k=Z4(h,C,y,b);w=n.makeTensorInfo(p,k.dtype,k.values)}return w}const F4e={kernelName:mC,backendName:"cpu",kernelFunc:M4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P4e(e){const{inputs:t,backend:n,attrs:s}=e,{separator:o,nGramWidths:r,leftPad:a,rightPad:i,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=t,f=n.data.get(c.dataId).values,h=n.data.get(d.dataId).values,[p,m]=J4(f,h,o,r,a,i,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const L4e={kernelName:gC,backendName:"cpu",kernelFunc:P4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4e(e){const{inputs:t,backend:n,attrs:s}=e,{skipEmpty:o}=s,{input:r,delimiter:a}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const i=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values[0],[u,c,d]=Q4(i,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const z4e={kernelName:vC,backendName:"cpu",kernelFunc:B4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4e(e){const{inputs:t,backend:n,attrs:s}=e,{numBuckets:o}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(r.dataId).values,i=eL(a,o);return n.makeTensorInfo(r.shape,"int32",i)}const W4e={kernelName:bC,backendName:"cpu",kernelFunc:V4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e=Pn(Oh,e=>Math.tan(e)),U4e={kernelName:Oh,backendName:"cpu",kernelFunc:H4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e=Pn(Mh,e=>Math.tanh(e)),K4e={kernelName:Mh,backendName:"cpu",kernelFunc:G4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reps:r}=s;It(o,"tile");const a=nL(n.bufferSync(o),r);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const q4e={kernelName:Fh,backendName:"cpu",kernelFunc:j4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X4e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{k:r,sorted:a}=s;It(o,"topk");const i=n.data.get(o.dataId).values,[l,u]=oL(i,o.shape,o.dtype,r,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Y4e={kernelName:yC,backendName:"cpu",kernelFunc:X4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z4e(e){const{inputs:t,attrs:n,backend:s}=e,{image:o,transforms:r}=t,{interpolation:a,fillMode:i,fillValue:l,outputShape:u}=n,[c,d,f,h]=o.shape,[p,m]=u!=null?u:[d,f],g=[c,p,m,h],v=Rt(o.shape),b=v[0],$=v[1],y=v[2],w=Gs(o.dtype,Ue(g));w.fill(l);const C=s.data.get(o.dataId).values,k=s.data.get(r.dataId).values;for(let E=0;E<c;++E){const x=r.shape[0]===1?k:k.subarray(E*8,E*8+8);for(let N=0;N<p;++N)for(let A=0;A<m;++A)for(let D=0;D<h;++D){let M;const F=x[6]*A+x[7]*N+1;if(F===0)continue;const R=(x[0]*A+x[1]*N+x[2])/F,P=(x[3]*A+x[4]*N+x[5])/F,V=oN(R,f,i),G=oN(P,d,i);switch(a){case"nearest":M=sLe(C,d,f,b,$,y,E,G,V,D,l);break;case"bilinear":M=oLe(C,d,f,b,$,y,E,G,V,D,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const se=E*b+N*$+A*y+D;w[se]=M}return s.makeTensorInfo(g,o.dtype,w)}return{dataId:s.write(w,g,o.dtype),shape:o.shape,dtype:o.dtype}}const J4e={kernelName:wC,backendName:"cpu",kernelFunc:Z4e};function oN(e,t,n){switch(n){case"reflect":return Q4e(e,t);case"wrap":return eLe(e,t);case"nearest":return nLe(e,t);case"constant":default:return tLe(e)}}function Q4e(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const s=2*t;n<s&&(n=s*Math.trunc(-n/s)+n),n=n<-t?n+s:-n-1}else if(n>t-1)if(t<=1)n=0;else{const s=2*t;n-=s*Math.trunc(n/s),n>=t&&(n=s-n-1)}return Wl(0,n,t-1)}function eLe(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const s=t-1;n+=t*(Math.trunc(-n/s)+1)}else if(n>t-1)if(t<=1)n=0;else{const s=t-1;n-=t*Math.trunc(n/s)}return Wl(0,n,t-1)}function tLe(e,t){return e}function nLe(e,t){return Wl(0,e,t-1)}function Rd(e,t,n,s,o,r,a,i,l,u,c){const d=a*s+i*o+l*r+u;return 0<=i&&i<t&&0<=l&&l<n?e[d]:c}function sLe(e,t,n,s,o,r,a,i,l,u,c){const d=Math.round(i),f=Math.round(l);return Rd(e,t,n,s,o,r,a,d,f,u,c)}function oLe(e,t,n,s,o,r,a,i,l,u,c){const d=Math.floor(i),f=Math.floor(l),h=d+1,p=f+1,m=(p-l)*Rd(e,t,n,s,o,r,a,d,f,u,c)+(l-f)*Rd(e,t,n,s,o,r,a,d,p,u,c),g=(p-l)*Rd(e,t,n,s,o,r,a,h,f,u,c)+(l-f)*Rd(e,t,n,s,o,r,a,h,p,u,c);return(h-i)*m+(i-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rLe(e){const{inputs:t,attrs:n,backend:s}=e,{axis:o}=n,{x:r}=t;It(r,"unique");const a=s.data.get(r.dataId).values,{outputValues:i,outputShape:l,indices:u}=rL(a,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,i),s.makeTensorInfo([u.length],"int32",u)]}const aLe={kernelName:$C,backendName:"cpu",kernelFunc:rLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(e){const{inputs:t,backend:n,attrs:s}=e,{value:o}=t;let{axis:r}=s;r<0&&(r+=o.shape.length);const a=o.shape.length,i=o.shape[r],l=new Array(a-1);let u=0;for(let h=0;h<a;h++)h!==r&&(l[u++]=o.shape[h]);const c=new Array(a).fill(0),d=o.shape.slice();d[r]=1;const f=new Array(i);for(let h=0;h<f.length;h++){c[r]=h;const p=eu({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});f[h]=ss({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const lLe={kernelName:jv,backendName:"cpu",kernelFunc:iLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,segmentIds:r}=t,{numSegments:a}=s;It(o,"unsortedSegmentSum");const i=o.shape.length,l=r.shape.length,u=[],c=[],d=i-l;let f=r;for(let p=0;p<d;++p){const m=pg({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=m,c.push(m)}for(let p=0;p<a;++p){const m=Wi(p,"int32"),g=n.makeTensorInfo([],"int32",m),v=x4({inputs:{a:g,b:f},backend:n}),b=Ri({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),$=k0({inputs:{a:b,b:o},backend:n}),y=tp({inputs:{x:$},backend:n,attrs:{axis:0,keepDims:!1}});u.push(y),c.push(g),c.push(v),c.push(b),c.push($),c.push(y)}const h=EL({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const cLe={kernelName:qv,backendName:"cpu",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe=[fOe,o3e,pOe,gOe,c3e,bOe,wOe,COe,SOe,IOe,TOe,AOe,ROe,MOe,POe,zOe,WOe,UOe,KOe,cOe,qOe,YOe,JOe,eMe,l3e,f3e,nMe,r3e,oMe,aMe,iMe,uMe,dMe,hMe,mMe,vMe,yMe,$Me,kMe,xMe,EMe,NMe,AMe,RMe,OMe,FMe,PMe,LMe,BMe,WMe,sOe,UMe,h3e,JMe,p3e,QMe,g3e,rFe,aFe,lFe,b3e,dFe,hFe,mFe,vFe,yFe,w3e,C3e,a3e,$Fe,rMe,kFe,xFe,EFe,oOe,S3e,I3e,NFe,T3e,DFe,OFe,FFe,BFe,VFe,HFe,UFe,A3e,KFe,qFe,YFe,JFe,ePe,nPe,oPe,R3e,aPe,uPe,yPe,O3e,F3e,CPe,xPe,TPe,L3e,APe,RPe,_Pe,TL,PPe,aOe,V3e,BPe,i3e,J1,VPe,iOe,lOe,uOe,HPe,GPe,jPe,XPe,ZPe,JPe,e4e,H3e,n4e,o4e,l4e,G3e,c4e,f4e,p4e,K3e,vPe,v4e,y4e,$4e,k4e,x4e,E4e,N4e,D4e,X3e,R4e,Z3e,O4e,F4e,L4e,z4e,W4e,tOe,zMe,U4e,K4e,q4e,Y4e,J4e,B3e,aLe,lLe,cLe,DPe];for(const e of dLe)pO(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wl={},Yb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function fLe(e,t){wl[e]=t}function na(e,t){if(!(e in wl)){const s=pLe(e,t);if(s!==null)wl[e]=s;else return console.log("Could not get context for WebGL version",e),null}const n=wl[e];return n==null||n.isContextLost()?(delete wl[e],na(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),wl[e])}function hLe(e){if(typeof OffscreenCanvas!="undefined"&&e===2)return new OffscreenCanvas(300,150);if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function pLe(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t==null?hLe(e):t;return n.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete wl[e]},!1),e===1?n.getContext("webgl",Yb)||n.getContext("experimental-webgl",Yb):n.getContext("webgl2",Yb)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var xf;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(xf||(xf={}));var Zo;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Zo||(Zo={}));var Ws;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Ws||(Ws={}));function np(e,t){return[t,e]}function mLe(e,t){return e*t}function Vp(e){const t=Ue(e),n=Math.ceil(t/4);return m1(n)}function Jc(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function gLe(e,t){const[n,s]=Jc(e,t);return n*s*4}function hk(e,t){const n=e;let s,o,r,a,i,l,u,c,d,f;return Ge().getNumber("WEBGL_VERSION")===2?(s=n.R32F,o=n.R16F,r=n.RGBA16F,a=n.RGBA32F,i=n.RED,u=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(s=e.RGBA,o=e.RGBA,r=e.RGBA,a=n.RGBA,i=e.RGBA,u=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,f=e.FLOAT,l=e.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xt(e,t){const n=t();return Ge().getBool("DEBUG")&&vLe(e),n}function vLe(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+$Le(e,t))}const bLe=596e-10,yLe=65504;function wLe(e){return!!(Ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||bLe<Math.abs(e)&&Math.abs(e)<yLe)}function $Le(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function Wp(e,t){return ei(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function CLe(e,t){const n=ei(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(xt(e,()=>e.shaderSource(n,t)),xt(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function kLe(e,t){const n=ei(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(xt(e,()=>e.shaderSource(n,t)),xt(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw xLe(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const SLe=/ERROR: [0-9]+:([0-9]+):/g;function xLe(e,t){const n=SLe.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const s=+n[1],o=e.split(`
`),r=o.length.toString().length+2,a=o.map((d,f)=>Ju((f+1).toString(),r)+d);let i=0;for(let d=0;d<a.length;d++)i=Math.max(a[d].length,i);const l=a.slice(0,s-1),u=a.slice(s-1,s),c=a.slice(s);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${Ju(u[0],i)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function ILe(e){return ei(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function ELe(e,t){if(xt(e,()=>e.linkProgram(t)),e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Zb(e,t){if(xt(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function TLe(e,t){const n=ei(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return xt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),xt(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function NLe(e,t){const n=ei(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return xt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),xt(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function ALe(e){return ei(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function DLe(e,t){const n=Ge().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const s=`[${e}x${t}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(e>n||t>n){const s=`[${e}x${t}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+o+".")}}function RLe(e){return ei(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function rN(e,t,n,s,o,r,a){const i=e.getAttribLocation(t,n);return i===-1?!1:(xt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,s)),xt(e,()=>e.vertexAttribPointer(i,o,e.FLOAT,!1,r,a)),xt(e,()=>e.enableVertexAttribArray(i)),!0)}function _Le(e,t,n){LLe(e,n),xt(e,()=>e.activeTexture(e.TEXTURE0+n)),xt(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function OLe(e,t,n){return ei(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function MLe(e,t,n){return e.getUniformLocation(t,n)}function FLe(e,t,n,s){xt(e,()=>_Le(e,t,s)),xt(e,()=>e.uniform1i(n,s))}function Jb(e,t,n){xt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),xt(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function aN(e,t){xt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),xt(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function Hp(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+PLe(e,t))}function PLe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function ei(e,t,n){const s=xt(e,()=>t());if(s==null)throw new Error(n);return s}function LLe(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=t+e.TEXTURE0;if(s<e.TEXTURE0||s>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Tc(e,t=2){return Ue(e.slice(0,e.length-t))}function Nc(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Qb(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Tc(e),...Nc(e)]),t}function BLe(e,t=!1){let n=Ge().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(n=n*2,e=e.map((o,r)=>r>=e.length-2?K3(e[r]):e[r]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=Vi(e).newShape);let s=Ue(e);if(e.length<=1&&s<=n)return[1,s];if(e.length===2&&e[0]<=n&&e[1]<=n)return e;if(e.length===3&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const o=Tc(e);let r=2,a=2;return e.length&&([r,a]=Nc(e)),s=o*(r/2)*(a/2),m1(s).map(i=>i*2)}return m1(s)}function Up(e){return e%2===0}function gg(e,t){if(e=e.slice(-2),t=t.slice(-2),Dn(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const n=e.slice(-1)[0],s=t.slice(-1)[0];if(n===s||Up(n)&&Up(s)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Up(e[0])&&Up(t[0])}let ey,ty;function zLe(e){if(ey==null){const t=na(e);ey=t.getParameter(t.MAX_TEXTURE_SIZE)}return ey}function VLe(e){if(ty==null){const t=na(e);ty=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ty)}function WLe(e){if(e===0)return 0;let t;const n=na(e);return br(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:br(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function br(e,t){return e.getExtension(t)!=null}function iN(e){try{if(na(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function HLe(e){if(e===0)return!1;const t=na(e);if(e===1){if(!br(t,"OES_texture_float"))return!1}else if(!br(t,"EXT_color_buffer_float"))return!1;return ew(t)}function ULe(e){if(e===0)return!1;const t=na(e);if(e===1){if(!br(t,"OES_texture_float")||!br(t,"WEBGL_color_buffer_float"))return!1}else{if(br(t,"EXT_color_buffer_float"))return ew(t);const s="EXT_color_buffer_half_float";if(br(t,s)){const o=t.getExtension(s);return GLe(t,o)}return!1}return ew(t)}function ew(e){const t=hk(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const s=1,o=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,s,o,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function GLe(e,t){const n=hk(e,t),s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=1,r=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,r,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(s),e.deleteFramebuffer(a),i}function KLe(e){return e!==2?!1:na(e).fenceSync!=null}function sp(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&j(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ot=Ge();Ot.registerFlag("HAS_WEBGL",()=>Ot.getNumber("WEBGL_VERSION")>0);Ot.registerFlag("WEBGL_VERSION",()=>iN(2)?2:iN(1)?1:0);Ot.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ot.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ot.get("WEBGL_VERSION")===2);Ot.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ot.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ot.registerFlag("WEBGL_PACK",()=>Ot.getBool("HAS_WEBGL"));Ot.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_PACK_CLIP",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_PACK_REDUCE",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_CONV_IM2COL",()=>Ot.getBool("WEBGL_PACK"));Ot.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>zLe(Ot.getNumber("WEBGL_VERSION")));Ot.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>VLe(Ot.getNumber("WEBGL_VERSION")));Ot.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=Ot.getNumber("WEBGL_VERSION");return e===0?0:WLe(e)});Ot.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ot.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!IO());Ot.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>HLe(Ot.getNumber("WEBGL_VERSION")));Ot.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ot.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ot.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ot.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>ULe(Ot.getNumber("WEBGL_VERSION")));Ot.registerFlag("WEBGL_FENCE_API_ENABLED",()=>KLe(Ot.getNumber("WEBGL_VERSION")));Ot.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ot.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ot.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});Ot.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>IO()?1:-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});Ot.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ot.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ot.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ot.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ho(){let e,t,n,s,o,r,a,i,l,u;return Ge().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",s="in",o="texture",r="outputColor",a="out vec4 outputColor;",i=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",s="varying",o="texture2D",r="gl_FragColor",a="",i=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:s,texture2D:o,output:r,defineOutput:a,defineSpecialNaN:i,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fu(e,t,n="index"){const s=Rt(t);return s.map((o,r)=>{const a=`int ${e[r]} = ${n} / ${o}`,i=r===s.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${o}`:`index -= ${e[r]} * ${o}`;return`${a}; ${i};`}).join("")}function S0(e,t,n="index"){const s=Rt(t);return s.map((o,r)=>{const a=`int ${e[r]} = ${n} / outShapeStrides[${r}]`,i=r===s.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * outShapeStrides[${r}]`:`index -= ${e[r]} * outShapeStrides[${r}]`;return`${a}; ${i};`}).join("")}function jLe(e,t){const n=e.length,s=e.map(r=>`${t}[${r}]`),o=new Array(n-1);o[n-2]=s[n-1];for(let r=n-3;r>=0;--r)o[r]=`(${o[r+1]} * ${s[r+1]})`;return o}function qLe(e,t,n="index"){const s=e.map((r,a)=>a),o=jLe(s,t);return o.map((r,a)=>{const i=`int ${e[a]} = ${n} / ${o[a]}`,l=a===o.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${o[a]}`:`index -= ${e[a]} * ${o[a]}`;return`${i}; ${l};`}).join("")}function pk(e){const t=Rt(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function mk(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const AL=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:DL}=iAe;function XLe(e,t,n){const s=[];if(e.forEach(h=>{const p=Ue(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?s.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(s.push(`uniform sampler2D ${h.name};`),s.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=gk(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:s.push(`uniform int ${h.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${h.name}Shape;`);break}s.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{s.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const o=s.join(`
`),r=e.map(h=>YLe(h,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=t.texShape,i=ho(),l=QLe(i);let u,c,d=nBe(i);return t.isPacked?(u=ZLe(t.logicalShape,a,n.enableShapeUniforms),c=tBe(i)):(u=JLe(t.logicalShape,a,n.enableShapeUniforms),c=eBe(i)),n.packedInputs&&(d+=aBe),[d,l,c,o,u,r,n.userCode].join(`
`)}function Qc(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return bBe(e,t);case 1:return wBe(e,t);case 2:return CBe(e,t);case 3:return SBe(e,t);case 4:return IBe(e,t);case 5:return EBe(e);case 6:return TBe(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function RL(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return vBe(e);case 1:return yBe(e,t);case 2:return $Be(e,t);case 3:return kBe(e,t);default:return xBe(e,t)}}function YLe(e,t,n=!1,s){let o="";n?o+=RL(e,s):o+=Qc(e,s);const r=e.shapeInfo.logicalShape,a=t.logicalShape;return r.length<=a.length&&(n?o+=NBe(e,t):o+=ABe(e,t)),o}function ZLe(e,t,n){switch(e.length){case 0:return _L();case 1:return iBe(e,t,n);case 2:return mBe(e,t,n);case 3:return uBe(e,t,n);default:return dBe(e,t,n)}}function JLe(e,t,n){switch(e.length){case 0:return _L();case 1:return lBe(e,t,n);case 2:return gBe(e,t,n);case 3:return cBe(e,t,n);case 4:return fBe(e,t,n);case 5:return hBe(e,t);case 6:return pBe(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function QLe(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function eBe(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function tBe(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function nBe(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${sBe}
    ${oBe}
    ${rBe}
  `}const sBe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,oBe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,rBe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,aBe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function _L(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function iBe(e,t,n){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return s[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function lBe(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function uBe(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),r=o*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function cBe(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${S0(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const s=fu(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function dBe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),r=o*Math.ceil(e[e.length-2]/2);let a=r,i="",l="b, r, c";for(let u=2;u<e.length-1;u++)a*=e[e.length-u-1],i=`
      int b${u} = index / ${a};
      index -= b${u} * ${a};
    `+i,l=`b${u}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${i}

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${e.length}(${l});
    }
  `}function fBe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${S0(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const s=fu(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function hBe(e,t){const n=fu(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function pBe(e,t){const n=fu(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function mBe(e,t,n){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Dn(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const o=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function gBe(e,t,n){return Dn(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function hu(e){return`offset${e}`}function vBe(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),s=ho();return`
    vec4 ${n}() {
      return ${s.texture2D}(${t}, halfCR);
    }
  `}function bBe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${s}() {return ${n};}`;const[o,r]=e.shapeInfo.texShape;if(o===1&&r===1)return`
      float ${s}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=hu(n);if(t)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[i,l]=e.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${i}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function yBe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,r=ho();if(t)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${r.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${r.texture2D}(${n}, uv);
    }
  `}function wBe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${ed(e)}
      }
    `;const o=e.shapeInfo.texShape,r=o[0],a=o[1];if(a===1&&r===1)return`
      float ${s}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=hu(n);return a===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / ${r}.0);
        return sampleTexture(${n}, uv);
      }
    `:r===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${i}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${i}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${i});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${r}, ${a}, index + ${i});
      return sampleTexture(${n}, uv);
    }
  `}function $Be(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape,a=r[0],i=r[1],l=ho();if(r!=null&&Dn(n,r))return t?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${l.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${a}.0);

        return ${l.texture2D}(${s}, uv);
      }
    `;if(t)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const u=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function CBe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape;if(r!=null&&Dn(n,r)){if(t)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const f=r[0],h=r[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:a,keptDims:i}=Vi(n),l=a;if(l.length<n.length){const f=td(e,l),h=["row","col"];return`
      ${Qc(f,t)}
      float ${o}(int row, int col) {
        return ${o}(${nd(h,i)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${ed(e)}
      }
    `;const u=r[0],c=r[1],d=hu(s);return c===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${s}, uv);
    }
  `:u===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:t?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${s}, uv);
  }
`}function kBe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=td(e,f),m=["b","row","col"];return`
        ${RL(p,t)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${nd(m,h)});
        }
      `}const i=ho();if(t)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${i.texture2D}(${s}, uv);
    }
  `;const l=a[0],u=a[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${i.texture2D}(${s}, uv);
    }
  `}function SBe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[1]*n[2],a=n[2],{newShape:i,keptDims:l}=Vi(n),u=i;if(u.length<n.length){const m=td(e,u),g=["row","col","depth"];return`
        ${Qc(m,t)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${nd(g,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${r}, ${a}, 1)));
        ${ed(e)}
      }
    `;const c=e.shapeInfo.texShape,d=c[0],f=c[1],h=e.shapeInfo.flatOffset;if(f===r&&h==null)return t?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(f===a&&h==null)return t?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${s}, uv);
    }
  `;const p=hu(s);return t?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * ${r} + col * ${a} + depth + ${p};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r} + col * ${a} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${s}, uv);
      }
  `}function xBe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=ho();if(t)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const r=e.shapeInfo.logicalShape,a=r.length,i=e.shapeInfo.texShape,l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=l[0],c=l[1],d=Math.ceil(r[a-1]/2);let f=d*Math.ceil(r[a-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<a-1;m++)h=`int b${m}, `+h,f*=r[a-m-1],p=`b${m} * ${f} + `+p;return`
    vec4 ${s}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${o.texture2D}(${n}, uv);
    }
  `}function IBe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[3],a=n[2]*r,i=n[1]*a,{newShape:l,keptDims:u}=Vi(n);if(l.length<n.length){const b=td(e,l),$=["row","col","depth","depth2"];return`
      ${Qc(b,t)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${nd($,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${i}, ${a}, ${r}, 1)));
        ${ed(e)}
      }
    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${s}Shape[3];`,m=`int stride1 = ${s}Shape[2] * stride2;`,g=`int stride0 = ${s}Shape[1] * stride1;`;if(h===i&&c==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(h===r&&c==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${s}, uv);
      }
    `;const v=hu(s);return t?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${v});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${i} + col * ${a} +
          depth * ${r} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${v});
      return sampleTexture(${s}, uv);
    }
  `}function EBe(e){const t=e.shapeInfo.logicalShape,n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],r=t[3]*o,a=t[2]*r,i=t[1]*a,{newShape:l,keptDims:u}=Vi(t);if(l.length<t.length){const m=td(e,l),g=["row","col","depth","depth2","depth3"];return`
      ${Qc(m)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${nd(g,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${i}, ${a}, ${r}, ${o})) +
          depth3;
        ${ed(e)}
      }
    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1];if(h===i&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${r}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=hu(n);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${i} + col * ${a} + depth * ${r} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function TBe(e){const t=e.shapeInfo.logicalShape,n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:r}=Vi(t);if(o.length<t.length){const g=td(e,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${Qc(g)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${nd(v,r)});
      }
    `}const a=t[5],i=t[4]*a,l=t[3]*i,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${i})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${ed(e)}
      }
    `;const d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],p=f[1];if(p===c&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${i}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===a&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=hu(n);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${i} + depth3 * ${a} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ed(e){const t=e.name,n=Ue(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function NBe(e,t){const n=e.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,i=DL(e.shapeInfo.logicalShape,t.logicalShape),l=Wn(a),u=a-r;let c;const d=["x","y","z","w","u","v"];r===0?c="":a<2&&i.length>=1?c="coords = 0;":c=i.map(b=>`coords.${d[b+u]} = 0;`).join(`
`);let f="";a<2&&r>0?f="coords":f=e.shapeInfo.logicalShape.map((b,$)=>`coords.${d[$+u]}`).join(", ");let h="return outputValue;";const m=Ue(e.shapeInfo.logicalShape)===1,v=Ue(t.logicalShape)===1;if(r===1&&!m&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!v)a===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(i.length){const b=r-2,$=r-1;i.indexOf(b)>-1&&i.indexOf($)>-1?h="return vec4(outputValue.x);":i.indexOf(b)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":i.indexOf($)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${s}(${f});
      ${h}
    }
  `}function ABe(e,t){const n=e.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=t.texShape,a=e.shapeInfo.texShape,i=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&i===l&&e.shapeInfo.flatOffset==null&&Dn(a,r))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Wn(l),c=DL(e.shapeInfo.logicalShape,t.logicalShape),d=l-i;let f;const h=["x","y","z","w","u","v"];i===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let p="";return l<2&&i>0?p="coords":p=e.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${s}(${p});
    }
  `}function Wn(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function gk(e,t,n){const{newShape:s,keptDims:o}=Vi(t),r=t.length,a=e&&r===3&&t[0]===1,i=a?t.slice(1):s,l=!e&&r>1&&!Dn(t,n)&&s.length<r||a;return{useSqueezeShape:l,uniformShape:l?i:t,keptDims:o}}function td(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function nd(e,t){return t.map(n=>e[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(e,t,n,s){const o=n.map((y,w)=>{const C={logicalShape:y.shape,texShape:y.isUniform?null:y.texData.texShape,isUniform:y.isUniform,isPacked:y.isUniform?!1:y.texData.isPacked,flatOffset:null};return y.texData!=null&&y.texData.slice!=null&&y.texData.slice.flatOffset>0&&(C.flatOffset=y.texData.slice.flatOffset),{name:t.variableNames[w],shapeInfo:C}}),r=o.map(y=>y.shapeInfo),a={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},i=XLe(o,a,t),l=kLe(e.gl,i),u=e.createProgram(l);let c=null;const d=e.getUniformLocation(u,"NAN",!1);Ge().getNumber("WEBGL_VERSION")===1&&(c=e.getUniformLocation(u,"INFINITY",!1));const f=!1,h={},p={},m={};for(let y=0;y<t.variableNames.length;y++){const w=t.variableNames[y];h[w]=e.getUniformLocation(u,w,f),h[`offset${w}`]=e.getUniformLocation(u,`offset${w}`,f),t.enableShapeUniforms&&(p[`${w}Shape`]=e.getUniformLocation(u,`${w}Shape`,f),m[`${w}TexShape`]=e.getUniformLocation(u,`${w}TexShape`,f))}let g,v,b;t.enableShapeUniforms&&(g=e.getUniformLocation(u,"outShape",f),b=e.getUniformLocation(u,"outShapeStrides",f),v=e.getUniformLocation(u,"outTexShape",f));const $=[];return t.customUniforms&&t.customUniforms.forEach((y,w)=>{$[w]=e.getUniformLocation(u,y.name,f)}),{program:t,fragmentShader:l,source:i,webGLProgram:u,uniformLocations:h,customUniformLocations:$,inShapeInfos:r,outShapeInfo:a,infLoc:c,nanLoc:d,inShapesLocations:p,inTexShapesLocations:m,outShapeLocation:g,outShapeStridesLocation:b,outTexShapeLocation:v}}function lN(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,s)=>{const o=n.logicalShape,r=t[s],a=r.shape;if(!Dn(o,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${a} must match`);if(n.isUniform&&r.isUniform)return;const i=n.texShape,l=r.isUniform?null:r.texData.texShape;if(!Dn(i,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${l} must match`)})}function RBe(e,t,n,s,o){t.program.enableShapeUniforms||(lN(t.inShapeInfos,n),lN([t.outShapeInfo],[s]));const r=s.texData.texture,a=s.texData.texShape;s.texData.isPacked?e.setOutputPackedMatrixTexture(r.texture,a[0],a[1]):e.setOutputMatrixTexture(r.texture,a[0],a[1]),e.setProgram(t.webGLProgram),Ge().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((l,u)=>{const c=t.program.variableNames[u],d=t.uniformLocations[c],f=t.uniformLocations[`offset${c}`],h=t.inShapesLocations[`${c}Shape`],p=t.inTexShapesLocations[`${c}TexShape`];if(h){const{uniformShape:m}=gk(t.program.packedInputs,l.shape,l.texData.texShape);switch(m.length){case 1:e.gl.uniform1iv(h,new Int32Array(m));break;case 2:e.gl.uniform2iv(h,new Int32Array(m));break;case 3:e.gl.uniform3iv(h,new Int32Array(m));break;case 4:e.gl.uniform4iv(h,new Int32Array(m));break}}if(p&&e.gl.uniform2i(p,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(Ue(l.shape)<2)e.gl.uniform1f(d,l.uniformValues[0]);else{let m=l.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),e.gl.uniform1fv(d,m)}return}l.texData.slice!=null&&f!=null&&e.gl.uniform1i(f,l.texData.slice.flatOffset),e.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const i=t.outShapeLocation;if(i)switch(s.shape.length){case 1:e.gl.uniform1iv(i,new Int32Array(s.shape));break;case 2:e.gl.uniform2iv(i,new Int32Array(s.shape));break;case 3:e.gl.uniform3iv(i,new Int32Array(s.shape));break;case 4:e.gl.uniform4iv(i,new Int32Array(s.shape));break}if(t.outShapeStridesLocation){const l=Rt(s.shape);switch(s.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),t.program.customUniforms&&o&&t.program.customUniforms.forEach((l,u)=>{const c=t.customUniformLocations[u],d=o[u];if(l.type==="float")e.gl.uniform1fv(c,d);else if(l.type==="vec2")e.gl.uniform2fv(c,d);else if(l.type==="vec3")e.gl.uniform3fv(c,d);else if(l.type==="vec4")e.gl.uniform4fv(c,d);else if(l.type==="int")e.gl.uniform1iv(c,d);else if(l.type==="ivec2")e.gl.uniform2iv(c,d);else if(l.type==="ivec3")e.gl.uniform3iv(c,d);else if(l.type==="ivec4")e.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),e.executeProgram()}function _Be(e,t,n){let s="";t.concat(n).forEach(a=>{const i=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=gk(e.packedInputs,a.shape,l);let f="",h="",p="";if(c.length===1&&e.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!e.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!e.packedInputs){const w=Rt(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=a.shape.length,g=c.length===2&&Dn(a.shape,l),v=Ue(a.shape)===1,b=Cc(a.shape,n.shape),$=!e.packedInputs&&m===n.shape.length&&Dn(l,n.texData.texShape),y=e.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;s+=`${m}_${$}_${u?d:""}_${c.length}_${v}_${b}_${g}_${f}_${h}_${p}_${y}_${i}`}else{const l=a.isUniform?"uniform":a.texData.texShape;s+=`${a.shape}_${l}_${i}`}});const o=e.userCode;let r=e.constructor.name;return r+="_"+s+"_"+o+`${Ge().getNumber("WEBGL_VERSION")}`,r}function ko(e){return Ge().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OBe{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=xf.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ho();this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?S0(["r","c","d"],t):fu(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MBe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=xf.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ho();this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?S0(["r","c","d"],t):fu(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FBe{constructor(t){this.variableNames=["A"],this.outTexUsage=Zo.DOWNLOAD;const n=ho();this.outputShape=t,this.userCode=`
      ${AL}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PBe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Zo.DOWNLOAD;const n=ho();this.outputShape=t,this.userCode=`
      ${AL}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LBe{constructor(t,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=ho();this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?mk():pk(t)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${s.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${s.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BBe{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=ho();this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length);let o="",r="result";n&&(r="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let i=0;i<=1;i++){const l=a*2+i;o+=`
          localCoords = coords;
          if(localCoords[2] + ${i} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${i};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?mk():pk(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${s.output} = ${r};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zBe(e){const t=ho(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return CLe(e,n)}function VBe(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return TLe(e,t)}function WBe(e){const t=new Uint16Array([0,1,2,2,1,3]);return NLe(e,t)}function op(e,t,n,s,o,r){DLe(t,n);const a=ALe(e),i=e.TEXTURE_2D;return xt(e,()=>e.bindTexture(i,a)),xt(e,()=>e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),xt(e,()=>e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),xt(e,()=>e.texParameteri(i,e.TEXTURE_MIN_FILTER,e.NEAREST)),xt(e,()=>e.texParameteri(i,e.TEXTURE_MAG_FILTER,e.NEAREST)),Ge().getNumber("WEBGL_VERSION")===1?xt(e,()=>e.texImage2D(i,0,s,t,n,0,o,r,null)):xt(e,()=>e.texStorage2D(i,1,s,t,n)),xt(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:a,texShape:[n,t]}}function OL(e){return e.internalFormatFloat}function HBe(e,t,n,s){const[o,r]=np(t,n);return op(e,o,r,OL(s),s.textureFormatFloat,e.FLOAT)}function ML(e){return e.internalFormatHalfFloat}function UBe(e,t,n,s){const[o,r]=np(t,n);return op(e,o,r,ML(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function FL(e){return e.downloadTextureFormat}function GBe(e,t,n,s){const[o,r]=np(t,n);return op(e,o,r,FL(s),e.RGBA,e.UNSIGNED_BYTE)}function PL(e){return e.internalFormatPackedFloat}function KBe(e,t,n,s){const[o,r]=Jc(t,n);return op(e,o,r,PL(s),e.RGBA,e.FLOAT)}function LL(e){return e.internalFormatPackedHalfFloat}function jBe(e,t,n,s){const[o,r]=Jc(t,n);return op(e,o,r,LL(s),e.RGBA,s.textureTypeHalfFloat)}function qBe(e,t,n){return xt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),rN(e,t,"clipSpacePos",n,3,20,0)&&rN(e,t,"uv",n,2,20,12)}function XBe(e,t,n,s,o,r){xt(e,()=>e.bindTexture(e.TEXTURE_2D,t));let a,i,l;o instanceof Uint8Array?(a=new Uint8Array(n*s*4),i=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*s*4),i=e.FLOAT,l=r.internalFormatPackedFloat),a.set(o),Ge().getNumber("WEBGL_VERSION")===2?xt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,s,e.RGBA,i,a)):xt(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,s,0,e.RGBA,i,a)),xt(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function YBe(e,t,n){xt(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?Ge().getNumber("WEBGL_VERSION")===2?xt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):xt(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):Ge().getNumber("WEBGL_VERSION")===2?xt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):xt(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),xt(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function ZBe(e,t,n,s){const o=e.createBuffer();xt(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const i=4*4*t*n;return xt(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),xt(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),xt(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function JBe(e,t,n){const s=e,o=new Float32Array(n);return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,o),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),o}function QBe(e,t,n,s){const[o,r]=np(t,n),a=4,i=new Uint8Array(mLe(t*n,a));return xt(e,()=>e.readPixels(0,0,o,r,s.downloadTextureFormat,e.UNSIGNED_BYTE,i)),new Float32Array(i.buffer)}function eze(e,t,n,s,o,r,a,i){const l=e,u=new Float32Array(gLe(r,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function tze(e,t,n){const s=new Float32Array(t*n*4);return xt(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ny{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=Ge().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,fLe(n,t)):this.gl=na(n);let s="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(Ge().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=Wp(this.gl,r),br(this.gl,a))this.textureHalfFloatExtension=Wp(this.gl,a);else if(Ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),br(this.gl,o))this.colorBufferHalfFloatExtension=Wp(this.gl,o);else if(Ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",br(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(br(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=VBe(this.gl),this.indexBuffer=WBe(this.gl),this.framebuffer=RLe(this.gl),this.textureConfig=hk(this.gl,this.textureHalfFloatExtension)}get debug(){return Ge().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;xt(t,()=>t.finish()),xt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),xt(t,()=>t.deleteFramebuffer(this.framebuffer)),xt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),xt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),xt(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),HBe(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),UBe(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),GBe(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),YBe(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,s,o){this.throwIfDisposed(),XBe(this.gl,t,n,s,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),jBe(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),KBe(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(aN(this.gl,this.framebuffer),this.outputTexture=null),xt(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,s){return this.downloadMatrixDriver(t,()=>QBe(this.gl,n,s,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,s,o,r,a){return eze(this.gl,t,n,s,o,r,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return JBe(this.gl,t,n)}createBufferFromTexture(t,n,s){this.bindTextureToFrameBuffer(t);const o=ZBe(this.gl,n,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,s;if(Ge().getBool("WEBGL_FENCE_API_ENABLED")){const o=t,r=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),s=()=>{const a=o.clientWaitSync(r,0,0);return a===o.ALREADY_SIGNALED||a===o.CONDITION_SATISFIED},n=r}else Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(n,Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:n,isFencePassed:s}}downloadMatrixFromPackedTexture(t,n,s){return this.downloadMatrixDriver(t,()=>tze(this.gl,n,s))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=zBe(n));const s=ILe(n);return xt(n,()=>n.attachShader(s,this.vertexShader)),xt(n,()=>n.attachShader(s,t)),ELe(n,s),this.debug&&Zb(n,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=qBe(n,this.program,this.vertexBuffer)),s}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&xt(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Zb(this.gl,this.program),xt(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,s=!0){return this.throwIfDisposed(),s?OLe(this.gl,t,n):MLe(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),xt(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,s){this.throwIfDisposed(),this.throwIfNoProgram(),FLe(this.gl,t,n,s)}setOutputMatrixTexture(t,n,s){this.setOutputMatrixTextureDriver(t,s,n)}setOutputPackedMatrixTexture(t,n,s){this.throwIfDisposed();const[o,r]=Jc(n,s);this.setOutputMatrixTextureDriver(t,o,r)}setOutputMatrixWriteRegion(t,n,s,o){this.setOutputMatrixWriteRegionDriver(s,t,o,n)}setOutputPackedMatrixWriteRegion(t,n,s,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Zb(this.gl,this.program),Hp(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),xt(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),xt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Wp(this.gl,Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.createQuery();return s.beginQuery(o.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,s=this.getQueryTimerExtensionWebGL2();n.endQuery(s.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await QE(()=>this.disposed||this.isQueryAvailable(t,Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const s=this.gl;return s.getQueryParameter(t,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.getQueryParameter(t,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),o=s.getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=nze(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:s}=this.itemsToPoll[n];s()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),!(this.itemsToPoll.length>1)&&QE(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),Jb(this.gl,t,this.framebuffer),this.debug&&Hp(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Jb(this.gl,this.outputTexture,this.framebuffer),this.debug&&Hp(this.gl)):aN(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const s=n();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(t,n,s){this.throwIfDisposed();const o=this.gl;Jb(o,t,this.framebuffer),this.debug&&Hp(o),this.outputTexture=t,xt(o,()=>o.viewport(0,0,n,s)),xt(o,()=>o.scissor(0,0,n,s))}setOutputMatrixWriteRegionDriver(t,n,s,o){this.throwIfDisposed(),xt(this.gl,()=>this.gl.scissor(t,n,s,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function nze(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:sze,bincountImpl:BL,bincountReduceImpl:oze,ceilImpl:rze,concatImpl:aze,equalImpl:ize,expImpl:lze,expm1Impl:uze,floorImpl:cze,gatherNdImpl:dze,gatherV2Impl:fze,greaterImpl:hze,greaterEqualImpl:pze,lessImpl:mze,lessEqualImpl:gze,linSpaceImpl:vze,logImpl:bze,maxImpl:yze,maximumImpl:wze,minimumImpl:$ze,multiplyImpl:Cze,negImpl:kze,notEqualImpl:Sze,prodImpl:xze,rangeImpl:Ize,rsqrtImpl:Eze,sigmoidImpl:Tze,simpleAbsImpl:zL,sliceImpl:Nze,sparseFillEmptyRowsImpl:Aze,sparseReshapeImpl:Dze,sparseSegmentReductionImpl:VL,sqrtImpl:Rze,stridedSliceImpl:_ze,stringNGramsImpl:Oze,stringSplitImpl:Mze,stringToHashBucketFastImpl:Fze,subImpl:Pze,tileImpl:Lze,topKImpl:Bze,transposeImpl:vk,uniqueImpl:zze}=nOe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WL(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function lo(e,t){return t===1?[e]:WL(e,t)}function Vze(e,t){if(e===1)return"rc";let n="";for(let s=0;s<e;s++)n+=t[s],s<e-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wze{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=ko(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=lo("rc",this.rank),s=Wn(this.rank),o=this.getOutOfBoundsCondition(n),r=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){let r=`${s===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)r=`${t[t.length-1-a]},`+r;n.push(r)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let s=this.rank-2;s<this.rank;s++)n+=`${t[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${o};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HL{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length);let s="";for(let o=0;o<4;o++){let r="thisRC = rc;";o%2===1&&(r+="thisRC.z += 1;"),o>1&&(r+="thisRC.y += 1;"),s+=`
        ${r}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${Hze(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?mk():pk(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${s}

        setOutput(result);
      }
    `}}function Hze(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?qLe(["r","c","d"],"inputShape"):fu(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uze{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,n,s){const o=cN(n,s),r=dN(t,o,s);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const a=uN(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[r].shift();return this.usedTextures[r].push(l),l}let i;return o===Ws.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===Ws.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===Ws.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===Ws.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===Ws.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[r].push(i),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),i}releaseTexture(t,n,s,o){if(this.freeTextures==null)return;const r=cN(s,o),a=dN(n,r,o);a in this.freeTextures||(this.freeTextures[a]=[]);const i=uN(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=Ge().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=i):(this.freeTextures[a].push(t),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const u=this.usedTextures[a],c=u.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Gze(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function uN(e,t,n,s,o){const r=Kze(t,s);let a;if(o){const[l,u]=Jc(e[0],e[1]);a=l*u}else{const[l,u]=np(e[0],e[1]);a=l*u}const i=Gze(n,r);return a*i}function Kze(e,t){switch(e){case Ws.PACKED_2X2_FLOAT32:return PL(t);case Ws.PACKED_2X2_FLOAT16:return LL(t);case Ws.UNPACKED_FLOAT32:return OL(t);case Ws.UNPACKED_FLOAT16:return ML(t);case Ws.PACKED_4X1_UNSIGNED_BYTE:return FL(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function jze(e){return Ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Ws.PACKED_2X2_FLOAT32:Ws.UNPACKED_FLOAT32:e?Ws.PACKED_2X2_FLOAT16:Ws.UNPACKED_FLOAT16}function cN(e,t){if(e===Zo.UPLOAD)return Ws.PACKED_2X2_FLOAT32;if(e===Zo.RENDER||e==null)return jze(t);if(e===Zo.DOWNLOAD||e===Zo.PIXELS)return Ws.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function dN(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pa{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const _r="if (isnan(x)) return x;",qze="return x;",fN="return abs(x);",Xze="return (x >= 0.0) ? x : (exp(x) - 1.0);",Yze=_r+`
  return (x < 0.0) ? 0.0 : x;
`,Zze=_r+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ru="return x;",Jze="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qze="return x;",eVe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,tVe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,nVe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sVe="return 1.0 / (1.0 + exp(-1.0 * x));";class Tl{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oVe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length);const n=t.length,s=lo("rc",n),o=Wn(n),r=Vze(n,s),a=s.slice(-2),i=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${r});

        setOutput(getChannel(packedInput, ${i}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rVe=RM,aVe=1e-7,iVe=1e-4,Gp={};function lVe(e){return e in Gp||(Gp[e]={}),Gp[e]}const uVe=Ge().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),cVe=600;function dVe(){return Ge().global.screen==null?1024:Ge().global.screen.height*Ge().global.screen.width*window.devicePixelRatio*cVe/1024/1024}class x0 extends D${constructor(t){super();if(this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ge().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof ny)n=t;else{const s=na(Ge().getNumber("WEBGL_VERSION"),t);n=new ny(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=na(Ge().getNumber("WEBGL_VERSION"));n=new ny(s),this.binaryCache=lVe(Ge().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Uze(this.gpgpu),this.numMBBeforeWarning=dVe(),this.texData=new G3(this,di())}nextDataId(){return x0.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(t,n,s){if((Ge().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ge().getBool("DEBUG"))&&this.checkNumericalProblems(t),s==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:s,values:t,usage:Zo.UPLOAD,refCount:1}),o}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,s,o,r){if(Ge().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:s,dtype:o,values:n,usage:Zo.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:s,dtype:o,complexTensorInfos:r,slice:a,shape:i,isPacked:l}=n;if(a!=null){let f;l?f=new Tl(i,Ru):f=new Pa(i,Ru);const h=this.runWebGLProgram(f,[{dataId:t,shape:i,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(s!=null)return this.convertAndCacheOnCPU(t);if(o==="string")return s;const u=this.activeTimers!=null;let c;u&&(c=go());let d;if(o==="complex64"){const f=this.readSync(r.real.dataId),h=this.readSync(r.imag.dataId);d=ja(f,h)}else d=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=go()-c),this.convertAndCacheOnCPU(t,d)}async read(t){if(this.pendingRead.has(t)){const p=this.pendingRead.get(t);return new Promise(m=>p.push(m))}const n=this.texData.get(t),{values:s,shape:o,slice:r,dtype:a,complexTensorInfos:i,isPacked:l}=n;if(r!=null){let p;l?p=new Tl(o,Ru):p=new Pa(o,Ru);const m=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:a}],a),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(s!=null)return this.convertAndCacheOnCPU(t);if(Ge().getBool("DEBUG")&&!Ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ge().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(a!=="complex64"&&Ge().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(t);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...Vp(o))}this.pendingRead.set(t,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(a==="complex64"){const p=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]),m=p[0],g=p[1];d=ja(m,g)}else if(u==null)d=this.getValuesFromTexture(t);else{const p=Ue(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;xt(p,()=>p.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(t,d),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(p=>p(f)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&di().removeDataId(t,this),this.pendingDeletes--),f}readToGPU(t,n={}){const s=this.texData.get(t),{values:o,shape:r,slice:a,dtype:i,isPacked:l,texture:u}=s;if(i==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let h;l?h=new Tl(r,Ru):h=new Pa(r,Ru);const p=this.runWebGLProgram(h,[{dataId:t,shape:r,dtype:i}],i),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(t,n.customTexShape),d=di().makeTensorFromDataId(c.dataId,c.shape,c.dtype),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(t){const n=this.readSync(t.dataId);let s=n;if(t.dtype==="string")try{s=n.map(o=>wc(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return hn(t.shape,t.dtype,s)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const s=t[n];if(!wLe(s))throw Ge().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:s,isPacked:o}=this.texData.get(t),r=Ue(n);if(Ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(t),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...Vp(n)).subarray(0,r);return this.disposeIntermediateTensorInfo(f),p}const a=Ge().getBool("WEBGL_PACK")&&o===!0,i=a?Qb(n):n,l=a?new PBe(i):new FBe(i),u=this.runWebGLProgram(l,[{shape:i,dtype:s,dataId:t}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,s=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=s,o=!0):this.activeTimers.push(s),this.activeTimers=s,t();const r=vc(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=vc(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(r);i.kernelMs=vke(l),i.getExtraProfileInfo=()=>l.map((u,c)=>({name:a[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:go(),endMs:null}}endTimer(t){return Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=go(),t)}async getQueryTime(t){if(Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:s}=this.texData.get(t);return s!=null&&(this.disposeData(s.real.dataId,n),this.disposeData(s.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:s,texShape:o,usage:r,isPacked:a,slice:i}=this.texData.get(t),l=i&&i.origDataId||t,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,s),this.textureManager.releaseTexture(n,o,r,a)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=uVe){return Ge().getBool("WEBGL_CPU_FORWARD")&&t.every(s=>this.texData.get(s.dataId).texture==null&&Ue(s.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){qo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return rVe(t.shape,n)}packedUnaryOp(t,n,s){const o=new Tl(t.shape,n),r=this.compileAndRun(o,[t],s);return di().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const o=zL(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,o)}if(Ge().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,fN,t.dtype);const n=new Pa(t.shape,fN),s=this.compileAndRun(n,[t]);return di().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}makeTensorInfo(t,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&zf(s[0])){const r=s.map(a=>Ci(a));o=this.write(r,t,n)}else o=this.write(s,t,n);return this.texData.get(o).usage=null,{dataId:o,shape:t,dtype:n}}makeOutput(t,n,s){const{dataId:o}=this.makeTensorInfo(t,n,s);return di().makeTensorFromDataId(o,t,n,this)}unpackTensor(t){const n=new oVe(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new Wze(t.shape),s=!0;return this.runWebGLProgram(n,[t],t.dtype,null,s)}packedReshape(t,n){const s=[Tc(t.shape),...Nc(t.shape)],o={dtype:t.dtype,shape:s,dataId:t.dataId},r=[Tc(n),...Nc(n)],a=new HL(r,s),i=!0,l=[s],u=this.runWebGLProgram(a,[o],t.dtype,l,i);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(t,n){const s=this.texData.get(t),{isPacked:o,shape:r,dtype:a}=s;if(n!=null){const f=Ue(r),h=n[0]*n[1]*4;j(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const i=Qb(r);let l;o?l=new MBe(i):l=new OBe(i);const u=!0,c=[n!=null?n:Vp(i)],d=this.runWebGLProgram(l,[{shape:i,dtype:a,dataId:t}],a,c,u,n);return{dtype:a,shape:r,dataId:d.dataId}}runWebGLProgram(t,n,s,o,r=!1,a){const i=this.makeTensorInfo(t.outputShape,s),l=this.texData.get(i.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===xf.DENSE){const v=a!=null?a:Vp(t.outputShape);l.texShape=v.map(b=>b*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),Ue(i.shape)===0)return l.values=Gs(i.dtype,0),i;const u=[],c=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(v.dataId);if(b.texture==null){if(!t.packedInputs&&Ue(v.shape)<=Ge().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:b.values};t.packedInputs&&(b.isPacked=!0,b.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!b.isPacked!=!!t.packedInputs)v=b.isPacked?this.unpackTensor(v):this.packTensor(v),u.push(v),b=this.texData.get(v.dataId);else if(b.isPacked&&!gg(b.shape,v.shape)){const $=v,y=v.shape;v.shape=b.shape,v=this.packedReshape(v,y),u.push(v),b=this.texData.get(v.dataId),$.shape=y}return{shape:v.shape,texData:b,isUniform:!1}});this.uploadToGPU(i.dataId);const d={shape:i.shape,texData:l,isUniform:!1},f=_Be(t,c,d),h=this.getAndSaveBinary(f,()=>DBe(this.gpgpu,t,c,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),RBe(this.gpgpu,h,c,d,o),u.forEach(v=>this.disposeIntermediateTensorInfo(v)),p&&(m=this.endTimer(m),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(m)}));const g=Ge().get("WEBGL_FLUSH_THRESHOLD");if(g>0){const v=go();v-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!Ge().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&r===!1){const v=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),v}return i}compileAndRun(t,n,s,o,r=!1){return s=s||n[0].dtype,this.runWebGLProgram(t,n,s,o,r)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ge().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement!="undefined"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Me(()=>{if(!Ge().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=Ge().getBool("DEBUG");Ge().set("DEBUG",!1);const n=this.abs(Gt(1e-8)).dataSync()[0];if(Ge().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?aVe:iVe}uploadToGPU(t){const n=this.texData.get(t),{shape:s,dtype:o,values:r,texture:a,usage:i,isPacked:l}=n;if(a!=null)return;const u=this.activeTimers!=null;let c;u&&(c=go());let d=n.texShape;if(d==null&&(d=BLe(s,l),n.texShape=d),r!=null){const f=Qb(s);let h,p=d[1],m=d[0];const g=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(l||!g)&&([p,m]=Jc(d[0],d[1])),l?h=new BBe(f,g):h=new LBe(f,g);const v=g?[m,p]:d,b=this.makeTensorInfo(v,o),$=this.texData.get(b.dataId);g?$.usage=Zo.PIXELS:$.usage=Zo.UPLOAD,$.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,m,r);const y=[[m,p]],w=!0,C=this.runWebGLProgram(h,[b],o,y,w),k=this.texData.get(C.dataId);n.texture=k.texture,n.texShape=k.texShape,n.isPacked=k.isPacked,n.usage=k.usage,this.disposeIntermediateTensorInfo(b),this.texData.delete(C.dataId),n.values=null,u&&(this.uploadWaitMs+=go()-c)}else{const f=this.acquireTexture(d,i,o,l);n.texture=f}}convertAndCacheOnCPU(t,n){const s=this.texData.get(t),{dtype:o}=s;return this.releaseGPUData(t),n!=null&&(s.values=fVe(n,o)),s.values}acquireTexture(t,n,s,o){if(this.numBytesInGPU+=this.computeBytes(t,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${r} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,o)}computeBytes(t,n){return t[0]*t[1]*g1(n)}}x0.nextDataId=0;function fVe(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let s=0;s<n.length;++s)n[s]=Math.round(e[s]);return n}else throw new Error(`Unknown dtype ${t}`)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */EO()&&XO("webgl",()=>new x0,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UL=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Ac{constructor(t,n,s){this.variableNames=["A","B"],this.outputShape=tn(n,s),this.enableShapeUniforms=ko(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class rp{constructor(t,n,s,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=tn(n,s);const r=this.outputShape.length;this.enableShapeUniforms=ko(r);let a="";if(o)if(r===0||Ue(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Wn(r)} coords = getOutputCoords();
        `,r===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=lo("coords",r);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= outShape[${r} - 2];
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= outShape[${r} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Po(e){const{inputs:t,backend:n}=e,{x:s}=t;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const hVe={kernelName:uh,backendName:"webgl",kernelFunc:Po};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yi(e){const{inputs:t,backend:n}=e,{real:s,imag:o}=t,r=n.makeTensorInfo(s.shape,"complex64"),a=n.texData.get(r.dataId),i=Po({inputs:{x:s},backend:n}),l=Po({inputs:{x:o},backend:n});return a.complexTensorInfos={real:i,imag:l},r}const pVe={kernelName:B$,backendName:"webgl",kernelFunc:Yi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GL="return (a < 0.) ? b * a : a;",KL=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function mVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{alpha:r}=s,a=n.makeTensorInfo([],"float32",Wi(r,"float32")),i=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rp(KL,o.shape,a.shape):new Ac(GL,o.shape,a.shape),l=n.runWebGLProgram(i,[o,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const gVe={kernelName:gv,backendName:"webgl",kernelFunc:mVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jL="return (a < 0.) ? b * a : a;",qL=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function vVe(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t,r=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rp(qL,s.shape,o.shape):new Ac(jL,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],"float32")}const bVe={kernelName:Mv,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sd="if (isnan(x)) return x;",yVe=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,wVe=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function xn({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:s}){return({inputs:o,backend:r})=>{const{x:a}=o,i=r,l=s||a.dtype;if(i.shouldExecuteOnCPU([a])&&n!=null){const d=i.texData.get(a.dataId),f=n(d.values,l);return i.makeTensorInfo(a.shape,l,f)}const u=Ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let c;return u?c=new Tl(a.shape,t):c=new Pa(a.shape,e),i.runWebGLProgram(c,[a],l)}}function qs({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:s=!1,cpuKernelImpl:o,dtype:r}){return({inputs:a,backend:i})=>{const{a:l,b:u}=a,c=i;if(s&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,v]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map($=>{const[y,w]=$,C={dataId:y.dataId,dtype:y.dtype,shape:l.shape},k={dataId:w.dataId,dtype:w.dtype,shape:u.shape},S=new Ac(e,l.shape,u.shape);return c.runWebGLProgram(S,[C,k],tr(y.dtype,w.dtype))}),b=Yi({inputs:{real:g,imag:v},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(v),b}const d=r||tr(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&o!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?Zl(p):p,v=l.dtype==="string"?Zl(m):m,[b,$]=o(l.shape,u.shape,g,v,d),y=c.makeTensorInfo($,d),w=c.texData.get(y.dataId);return w.values=b,y}const f=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let h;return f?h=new rp(t,l.shape,u.shape,n):h=new Ac(e,l.shape,u.shape),c.runWebGLProgram(h,[l,u],d)}}function E0(e,t=!1){if(e==="linear")return t?Qze:qze;if(e==="relu")return t?tVe:Yze;if(e==="elu")return t?eVe:Xze;if(e==="relu6")return t?nVe:Zze;if(e==="prelu")return t?qL:jL;if(e==="leakyrelu")return t?KL:GL;if(e==="sigmoid")return t?sVe:Jze;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XL{constructor(t,n,s,o=!1,r=!1,a=!1,i=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=ko(this.outputShape.length);const c=o?t[1]:t[2],d=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",v="";i&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:g=`vec4 activation(vec4 x) {
          ${i}
        }`,v="result = activation(result);");const b=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let $="rc.x",y="rc.x";t[0]<n[0]?$=`int(min(float(rc.x), ${t[0]-1}.))`:n[0]<t[0]&&(y=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${$};
          int batchB = ${y};
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hN={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class pN{constructor(t,n,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=tn(n,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mN="return a * b;";function bk(e){const{inputs:t,backend:n}=e,{a:s,b:o}=t,r=tr(s.dtype,o.dtype);if(s.dtype==="complex64"){const i=n.texData.get(s.dataId),l=n.texData.get(o.dataId),u=new pN(hN.REAL,s.shape,o.shape),c=new pN(hN.IMAG,s.shape,o.shape),d=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:s.shape},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=Yi({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([s,o])){const i=n.texData.get(s.dataId),l=n.texData.get(o.dataId),[u,c]=Cze(s.shape,o.shape,i.values,l.values,r),d=n.makeTensorInfo(c,r),f=n.texData.get(d.dataId);return f.values=u,d}let a;return Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new rp(mN,s.shape,o.shape):a=new Ac(mN,s.shape,o.shape),n.runWebGLProgram(a,[s,o],r)}const $Ve={kernelName:bh,backendName:"webgl",kernelFunc:bk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CVe(e,t,n){const s=[Tc(e.shape),...Nc(e.shape)],o={dtype:e.dtype,shape:s,dataId:e.dataId},r=[Tc(t),...Nc(t)],a=new HL(r,s),i=!0,l=[s],u=n.runWebGLProgram(a,[o],e.dtype,l,i);return{dataId:u.dataId,shape:t,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yt(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{shape:r}=s,a=n,i=Ue(o.shape),l=q3(r,i),u=Ue(l);j(i===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`);const c=a.texData.get(o.dataId);return c.isPacked&&!gg(o.shape,l)&&!(c.texture!==null&&gg(c.shape,l))?CVe(o,l,a):(a.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const kVe={kernelName:Fv,backendName:"webgl",kernelFunc:yt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gN{constructor(t,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:a}=t;this.outputShape=[o,a];const i=Math.floor(s/4)*4,l=s%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${bc(d)?d.toPrecision(2):d}, ones);`}let c="";r%s>0&&(c=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${i}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${i};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SVe{constructor(t,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:a}=t;this.outputShape=[o,a];let i="0.0",l="";n==="prod"?i="1.0":n==="min"?(i="1.0 / 1e-20",l="min"):n==="max"&&(i="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(s/4)*4,d=s%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(i="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(i="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${i};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${i});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xVe(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:e[1],s=l0(n);t.push({inSize:n,windowSize:s,outSize:Math.ceil(n/s)})}return t}function pu(e,t,n,s){const o=xVe(e.shape);let r=e;for(let a=0;a<o.length;a++){const{inSize:i,windowSize:l,outSize:u}=o[a];let c,d;n==="mean"?c=a===0?new gN({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u},i):new gN({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u}):c=new SVe({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u},n),d=r,r=s.runWebGLProgram(c,[r],t),d.dataId!==e.dataId&&s.disposeIntermediateTensorInfo(d)}return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IVe{constructor(t,n){this.variableNames=["A"];const s=new Array(t.length);for(let a=0;a<s.length;a++)s[a]=t[n[a]];this.outputShape=s,this.rank=s.length;const o=Wn(this.rank),r=EVe(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${r}));
    }
    `}}function EVe(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(t);for(let o=0;o<e.length;o++)s[e[o]]=n[o];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TVe{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(t.length);for(let c=0;c<s.length;c++)s[c]=t[n[c]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=Wn(this.rank),r=WL("rc",this.rank),a=new Array(this.rank);for(let c=0;c<n.length;c++)a[n[c]]=r[c];const i=`vec2(${a.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${s[this.rank-1]}`,u=`getChannel(getA(${a.join()}), ${i})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${r[this.rank-1]};
      if(++${r[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0(e,t,n){const s=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TVe(e.shape,t):new IVe(e.shape,t);return n.runWebGLProgram(s,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NVe(e,t,n,s){const o=t,r=e.shape.length,a=an(o,e.shape);let i=a;const l=ps(i,r),u=l!=null;let c=e;u&&(c=T0(e,l,s),i=ys(i.length,r)),js("sum",i,r);const[d,f]=Ps(c.shape,i);let h=d;n&&(h=hs(d,a));const p=Ue(f),g=Ue(e.shape)/p,v=yt({inputs:{x:c},attrs:{shape:[g,p]},backend:s}),b=SC(e.dtype),$=pu(v,b,"sum",s),y=yt({inputs:{x:$},attrs:{shape:h},backend:s});return s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo($),u&&s.disposeIntermediateTensorInfo(c),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s;return NVe(o,r,a,n)}const AVe={kernelName:Wv,backendName:"webgl",kernelFunc:N0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fo(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{perm:r}=s,a=n,i=o.shape.length,l=new Array(i);for(let c=0;c<l.length;c++)l[c]=o.shape[r[c]];let u;if(a.shouldExecuteOnCPU([o])){const d=a.texData.get(o.dataId).values,f=vk(d,o.shape,o.dtype,r,l);u=a.makeTensorInfo(l,o.dtype);const h=a.texData.get(u.dataId);h.values=f}else u=T0(o,r,a);return u}const DVe={kernelName:Kv,backendName:"webgl",kernelFunc:fo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YL=1e3;function vg({a:e,b:t,transposeA:n,transposeB:s,backend:o,bias:r=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:l=null}){const u=e.shape.length,c=t.shape.length,d=n?e.shape[u-2]:e.shape[u-1],f=s?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],p=s?t.shape[c-2]:t.shape[c-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),v=Ue(m),b=Ue(g),y=tn(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,p]);j(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${s} must match.`);const w=n?[v,d,h]:[v,h,d],C=s?[b,p,f]:[b,f,p],k=yt({inputs:{x:e},backend:o,attrs:{shape:w}}),S=yt({inputs:{x:t},backend:o,attrs:{shape:C}}),E=[k,S],x=Math.max(v,b),N=n?k.shape[1]:k.shape[2],A=r!=null,D=a!=null,M=l==="leakyrelu",F=l!=null?E0(l,!0):null,R=A||D||M||F!=null;let P;if((h===1||p===1)&&N>YL&&R===!1){let G=k,se=S;n&&(G=fo({inputs:{x:k},backend:o,attrs:{perm:[0,2,1]}}),E.push(G)),s&&(se=fo({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),E.push(se));const ke=p!==1,te=p===1;let pe=G;ke&&(pe=yt({inputs:{x:G},backend:o,attrs:{shape:[x,N,1]}}),E.push(pe));const ae=p===1?2:1;let K=se;te&&(K=yt({inputs:{x:se},backend:o,attrs:{shape:[x,1,N]}}),E.push(K));const X=bk({inputs:{a:pe,b:K},backend:o});P=N0({inputs:{x:X},backend:o,attrs:{axis:ae,keepDims:!0}}),E.push(X)}else{const G=tr(e.dtype,t.dtype),se=new XL(w,C,[x,h,p],n,s,A,F,D,M),ke=[k,S];if(r!=null&&ke.push(r),D&&ke.push(a),M){const te=o.makeTensorInfo([],"float32",Wi(i,"float32"));ke.push(te),E.push(te)}P=o.runWebGLProgram(se,ke,G)}const V=yt({inputs:{x:P},backend:o,attrs:{shape:y}});E.push(P);for(const G of E)o.disposeIntermediateTensorInfo(G);return V}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RVe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r,bias:a,preluActivationWeights:i}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;return vg({a:o,b:r,transposeA:l,transposeB:u,backend:n,bias:a,preluActivationWeights:i,leakyreluAlpha:d,activation:c})}const _Ve={kernelName:Jm,backendName:"webgl",kernelFunc:RVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vN="return abs(x);";function OVe(e){const{inputs:t,backend:n}=e,{x:s}=t;if(n.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const r=n.texData.get(s.dataId),a=zL(r.values);return n.makeTensorInfo(s.shape,s.dtype,a)}let o;return Ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Tl(s.shape,vN):o=new Pa(s.shape,vN),n.runWebGLProgram(o,[s],s.dtype)}const MVe={kernelName:Yg,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FVe=_r+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,PVe=xn({opSnippet:FVe}),LVe={kernelName:Hf,backendName:"webgl",kernelFunc:PVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BVe=_r+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,zVe=xn({opSnippet:BVe}),VVe={kernelName:Uf,backendName:"webgl",kernelFunc:zVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bN="return a + b;",WVe=qs({opSnippet:bN,packedOpSnippet:bN,supportsComplex:!0,cpuKernelImpl:sze}),HVe={kernelName:Wc,backendName:"webgl",kernelFunc:WVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UVe{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((r,a)=>`T${a}`);const s=[];this.variableNames.forEach(r=>{s.push(`float v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GVe{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((r,a)=>`T${a}`);const s=[];this.variableNames.forEach(r=>{s.push(`vec4 v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nm(e){const{inputs:t,backend:n}=e,s=t;if(s.length===1)return Po({inputs:{x:s[0]},backend:n});if(s.length>Ge().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),u=Nm({inputs:s.slice(0,l),backend:n}),c=Nm({inputs:s.slice(l),backend:n});return Nm({inputs:[u,c],backend:n})}const o=s.map(l=>l.dtype).reduce((l,u)=>tr(l,u)),r=s.map(l=>l.shape),i=Ge().getBool("WEBGL_PACK")?new GVe(s[0].shape,r):new UVe(s[0].shape,r);return n.runWebGLProgram(i,s,o)}const KVe={kernelName:_$,backendName:"webgl",kernelFunc:Nm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s,i=o.shape.length,l=an(r,o.shape);let u=l;const c=ps(u,i);let d=o;c!=null&&(d=fo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=ys(u.length,i)),js("all",u,i);const[f,h]=Ps(d.shape,u),p=Ue(h),m=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=pu(m,m.dtype,"all",n);let v;if(a){const b=hs(f,l);v=yt({inputs:{x:g},backend:n,attrs:{shape:b}})}else v=yt({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const qVe={kernelName:O$,backendName:"webgl",kernelFunc:jVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s,i=o.shape.length,l=an(r,o.shape);let u=l;const c=ps(u,i);let d=o;c!=null&&(d=fo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=ys(u.length,i)),js("any",u,i);const[f,h]=Ps(d.shape,u),p=Ue(h),m=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=pu(m,m.dtype,"any",n);let v;if(a){const b=hs(f,l);v=yt({inputs:{x:g},backend:n,attrs:{shape:b}})}else v=yt({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const YVe={kernelName:M$,backendName:"webgl",kernelFunc:XVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZVe{constructor(t,n,s){this.variableNames=["A"];const{windowSize:o,batchSize:r,outSize:a}=t;s||this.variableNames.push("bestIndicesA"),this.outputShape=[r,a];const i=n==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${i} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JVe{constructor(t,n,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,j(t.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const r=t[t.length-1],a=Math.ceil(r/n);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),o||this.variableNames.push("bestIndicesA");const i=this.outputShape,l=i.length,u=Wn(l),c=lo("coords",l);let d,f;if(a===1){f=l+1;const S=Wn(f);d=`
        ${S} sourceLocR = ${S}(${c.join()}, 0);
        ++${c[l-1]};
        ${S} sourceLocG = ${S}(${c.join()}, 0);
        ++${c[l-2]};
        ${S} sourceLocA = ${S}(${c.join()}, 0);
        --${c[l-1]};
        ${S} sourceLocB = ${S}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],m=h.map(S=>"int "+S),g=lo("sourceLocR",f-1).concat("inIdx.r"),v=lo("sourceLocG",f-1).concat("inIdx.g"),b=lo("sourceLocB",f-1).concat("inIdx.b"),$=lo("sourceLocA",f-1).concat("inIdx.a"),y=s==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${$.join()})));`,C=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${$.join()}) : 0.)`,k=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${k}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${i[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${i[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZL(e,t,n,s=null){let o=t.shape[0],r=t.shape[1];s!=null&&(o=s.shape[0],r=s.shape[1]);const a=l0(r),i={windowSize:a,inSize:r,batchSize:o,outSize:Math.ceil(r/a)},l=new ZVe(i,n,s==null),u=[t];s!=null&&u.push(s);const c=e.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=ZL(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function JL(e,t,n,s=null){const o=s!=null?s.shape:t.shape,r=o[o.length-1],a=l0(r),i=new JVe(o,a,n,s==null),l=s==null?[t]:[t,s],u=e.runWebGLProgram(i,l,"int32");if(u.shape.length===t.shape.length){const c=JL(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function QL(e,t,n,s){const o=[n];if(js("arg"+s.charAt(0).toUpperCase()+s.slice(1),o,t.shape.length),!Ge().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const r=[],a=e.texData.get(t.dataId),i=a!==null&&a.isPacked;let l=t;i&&(l=e.unpackTensor(t),r.push(l));const[u,c]=Ps(l.shape,o),d=Ue(c),f=yt({inputs:{x:l},backend:e,attrs:{shape:[-1,d]}});r.push(f);const h=ZL(e,f,s);r.push(h);const p=yt({inputs:{x:h},backend:e,attrs:{shape:u}});return r.forEach(m=>e.disposeIntermediateTensorInfo(m)),p}return JL(e,t,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;let a=an(r,o.shape);const i=ps(a,o.shape.length);let l=o;const u=[];i!=null&&(l=fo({inputs:{x:o},backend:n,attrs:{perm:i}}),u.push(l),a=ys(a.length,l.shape.length)),js("argMax",[a[0]],l.shape.length);const c=QL(n,l,a[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const e6e={kernelName:Zg,backendName:"webgl",kernelFunc:QVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;let a=an(r,o.shape);const i=ps(a,o.shape.length);let l=o;const u=[];i!=null&&(l=fo({inputs:{x:o},backend:n,attrs:{perm:i}}),u.push(l),a=ys(a.length,l.shape.length)),js("argMin",[a[0]],l.shape.length);const c=QL(n,l,a[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const n6e={kernelName:Jg,backendName:"webgl",kernelFunc:t6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s6e=_r+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,o6e=xn({opSnippet:s6e}),r6e={kernelName:Gf,backendName:"webgl",kernelFunc:o6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6e=_r+"return log(x + sqrt(x * x + 1.0));",i6e=xn({opSnippet:a6e}),l6e={kernelName:Kf,backendName:"webgl",kernelFunc:i6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6e=_r+`
  return atan(x);
`,c6e=xn({opSnippet:u6e}),d6e={kernelName:jf,backendName:"webgl",kernelFunc:c6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f6e=yVe+`
  return atan(a, b);
`,h6e=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+wVe+`
  return result;
`,p6e=qs({opSnippet:f6e,packedOpSnippet:h6e}),m6e={kernelName:Xf,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6e=_r+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,v6e=xn({opSnippet:g6e}),b6e={kernelName:qf,backendName:"webgl",kernelFunc:v6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class If{constructor(t,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,i=t.strideHeight,l=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const m=n==="avg",g=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,v=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let b="0.0";if(m||(b="-1.0 / 1e-20"),s){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${i}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?r?g:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const $="max";let y=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(y="avgValue / count");const w=Math.floor(a/4)*4,C=a%4,k=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${$}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${k}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${k}
          }
        }
        setOutput(${y});
      }
    `}}class yk{constructor(t,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,i=t.strideDepth,l=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,v=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const $=n==="avg";let y="0.0";if($||(y="-1.0 / 1e-20"),s){const x=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${i}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${v}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${x} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?r?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / count");const k=Math.floor(a/4)*4,S=a%4,E=`
      if (${$}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${i}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${v}, ${b});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${k}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${E}
            }

            int xC = xCCorner + ${k};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${E}
            }
          }
          setOutput(${C});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;sp(o,"avgPool");const{filterSize:r,strides:a,pad:i,dimRoundingMode:l}=s,u=1;j(ao(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ar(o.shape,r,a,u,i,l);if(c.filterWidth===1&&c.filterHeight===1&&Dn(c.inShape,c.outShape))return Po({inputs:{x:o},backend:n});const d=new If(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const w6e={kernelName:Qg,backendName:"webgl",kernelFunc:y6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:a,pad:i,dimRoundingMode:l,dataFormat:u}=s,c=[1,1,1],d=Za(o.shape,r,a,c,i,l,u),f=new yk(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const C6e={kernelName:ev,backendName:"webgl",kernelFunc:$6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k6e{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=l-1-t.padInfo.top,d=u-1-t.padInfo.left,f=1/(n*s);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${i}) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class S6e{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,s=t.filterHeight,o=t.filterWidth,r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=d-1-t.padInfo.front,m=f-1-t.padInfo.top,g=h-1-t.padInfo.left,v=1/(n*s*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,a=r,{filterSize:i,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],f=Za(a.shape,i,l,d,u,c),h=new S6e(f);return n.runWebGLProgram(h,[o],a.dtype)}const I6e={kernelName:P$,backendName:"webgl",kernelFunc:x6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,a=r;sp([o,r],"avgPoolGrad");const{filterSize:i,strides:l,pad:u}=s,c=Ar(a.shape,i,l,1,u),d=new k6e(c);return n.runWebGLProgram(d,[o],a.dtype)}const T6e={kernelName:F$,backendName:"webgl",kernelFunc:E6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6e(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r}=t,{transposeA:a,transposeB:i}=s;return vg({a:o,b:r,transposeA:a,transposeB:i,backend:n})}const A6e={kernelName:tv,backendName:"webgl",kernelFunc:N6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D6e{constructor(t,n,s,o,r,a){this.outputShape=[],this.variableNames=["x","mean","variance"],tn(t,n),tn(t,s);let i="0.0";o!=null&&(tn(t,o),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let l="1.0";r!=null&&(tn(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${i};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R6e{constructor(t,n,s,o,r,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],tn(t,n),tn(t,s);let i="vec4(0.0)";o!=null&&(tn(t,o),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let l="vec4(1.0)";r!=null&&(tn(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${i};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6e=({inputs:e,backend:t,attrs:n})=>{const{x:s,mean:o,variance:r,offset:a,scale:i}=e;j(o.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[s,o,r];let c=null;a!=null&&(c=a.shape,u.push(a));let d=null;i!=null&&(d=i.shape,u.push(i));const f=Ge().getBool("WEBGL_PACK_NORMALIZATION")?new R6e(s.shape,o.shape,r.shape,c,d,l):new D6e(s.shape,o.shape,r.shape,c,d,l);return t.runWebGLProgram(f,u,u[0].dtype)},O6e={kernelName:hv,backendName:"webgl",kernelFunc:_6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M6e{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=Wn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=F6e(this.rank);let o;const r=t.map((a,i)=>`sourceLoc.${tw[i]} = start[${i}] + coords.${tw[i]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${r.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${s}));
      }
    `}}const tw=["x","y","z","w","u","v"];function F6e(e){if(e===1)return"sourceLoc";if(e<=6)return tw.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P6e{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Wn(this.rank),s=lo("coords",this.rank),o=lo("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,a=`getChannel(getSource(${o.join()}), ${r})`,i=`
      result.x = ${a};
      if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${a};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${a};
        if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${a};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((c,d)=>`start[${d}]`).join()});`:t.map((c,d)=>`${o[d]} = ${s[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${i}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L6e(e,t,n,s){const o=s.texData.get(e.dataId),r=s.makeTensorInfo(n,e.dtype),a=s.texData.get(r.dataId);Object.assign(a,o),a.refCount=1,a.shape=n,a.dtype=e.dtype;let i=DC(t,Rt(e.shape));o.slice&&(i+=o.slice.flatOffset),a.slice={flatOffset:i,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=s.dataRefCount.get(a.slice.origDataId)||1;return s.dataRefCount.set(a.slice.origDataId,l+1),r}function od(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,size:a}=s,[i,l]=e0(o,r,a);if(TC(o,i,l),Ue(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=Nze(d.values,i,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,f)}const{isPacked:u}=n.texData.get(o.dataId),c=AC(o.shape,i,l);if(u||!c){const d=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new P6e(l):new M6e(l),f=[i];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),L6e(o,i,l,n)}const B6e={kernelName:Vv,backendName:"webgl",kernelFunc:od};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z6e=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,crops:a}=s;j(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const i=r.reduce((b,$)=>b*$),l=Hh(o.shape,r,i),u=Uh(l.length,r.length),c=Gh(o.shape,r,i),d=b2(a,r.length),f=y2(c,a,r.length),h=[],p=yt({inputs:{x:o},backend:n,attrs:{shape:l}}),m=fo({inputs:{x:p},backend:n,attrs:{perm:u}}),g=yt({inputs:{x:m},backend:n,attrs:{shape:c}}),v=od({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(m),h.push(g),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},V6e={kernelName:nv,backendName:"webgl",kernelFunc:z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:a}=s,i=n.readSync(o.dataId),l=n.readSync(r.dataId),u=BL(i,l,r.dtype,r.shape,a);return n.makeTensorInfo([a],r.dtype,u)}const H6e={kernelName:L$,backendName:"webgl",kernelFunc:W6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(e){const{inputs:t,backend:n}=e,{s0:s,s1:o}=t,r=n.readSync(s.dataId),a=n.readSync(o.dataId),i=tn(Array.from(r),Array.from(a));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}const G6e={kernelName:sO,backendName:"webgl",kernelFunc:U6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6e="return float(a != b);",eB=qs({opSnippet:K6e,cpuKernelImpl:Sze,dtype:"bool"}),j6e={kernelName:Av,backendName:"webgl",kernelFunc:eB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ap(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.texData.get(s.dataId);return Po({inputs:{x:o.complexTensorInfos.real},backend:n})}const q6e={kernelName:iC,backendName:"webgl",kernelFunc:ap};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6e="return float(int(x));";function Y6e(e,t){const n=new Pa(e.shape,X6e),s=t.runWebGLProgram(n,[e],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nw(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return Po({inputs:{x:o},backend:n});const a=_s(o.shape),i=nw({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Yi({inputs:{real:i,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(i),l}if(o.dtype==="complex64"){const a=ap({inputs:{input:o},backend:n}),i=nw({inputs:{x:a},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(a),i}if(!X3(o.dtype,r)){const a=Po({inputs:{x:o},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:r}}if(r==="int32")return Y6e(o,n);if(r==="bool"){const a=n.makeTensorInfo([],"bool",Gs("bool",1)),l=eB({inputs:{a:o,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const Z6e={kernelName:Yf,backendName:"webgl",kernelFunc:nw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yN="return ceil(x);",J6e=xn({opSnippet:yN,packedOpSnippet:yN,cpuKernelImpl:rze}),Q6e={kernelName:Zf,backendName:"webgl",kernelFunc:J6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e5e{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t5e{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{clipValueMin:r,clipValueMax:a}=s;let i;Ge().getBool("WEBGL_PACK_CLIP")?i=new t5e(o.shape):i=new e5e(o.shape);const l=[[r],[a]];return n.runWebGLProgram(i,[o],o.dtype,l)}const s5e={kernelName:Jf,backendName:"webgl",kernelFunc:n5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o5e{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wN(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function r5e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=n.texData.get(s.dataId),r=new o5e(s.shape),a=[wN(s,o.complexTensorInfos.real),wN(s,o.complexTensorInfos.imag)];return n.runWebGLProgram(r,a,a[0].dtype)}const a5e={kernelName:sv,backendName:"webgl",kernelFunc:r5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i5e{constructor(t){this.outputShape=[],this.outputShape=ya(t,1),this.variableNames=t.map((a,i)=>`T${i}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+t[a][1];const s=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const i=n[a-1];s.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${i}));`)}const o=n.length,r=n[n.length-1];s.push(`else setOutput(getT${o}(yR, yC-${r}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l5e{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ya(t,n);const s=this.outputShape,o=s.length,r=Wn(o),a=lo("coords",o),i=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((m,g)=>`T${g}`);const l=new Array(t.length-1);l[0]=t[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+t[m][n];const u=i[n],c=i.slice(-2),d=i.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];f+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${Kp(i,u,g)}),
            vec2(${Kp(c,u,g)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${Kp(i,u,p)}),
          vec2(${Kp(c,u,p)}));`,this.userCode=`
      float getValue(${i.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${r} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[o-1]} = ${a[o-1]} + 1;
        if (${a[o-1]} < ${s[o-1]}) {
          result.g = getValue(${a});
        }

        ${a[o-2]} = ${a[o-2]} + 1;
        if (${a[o-2]} < ${s[o-2]}) {
          result.a = getValue(${a});
        }

        ${a[o-1]} = ${a[o-1]} - 1;
        if (${a[o-2]} < ${s[o-2]} &&
            ${a[o-1]} < ${s[o-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function Kp(e,t,n){const s=e.indexOf(t);return e.map((r,a)=>a===s?`${r} - ${n}`:r).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.texData.get(s.dataId);return Po({inputs:{x:o.complexTensorInfos.imag},backend:n})}const u5e={kernelName:J$,backendName:"webgl",kernelFunc:A0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vu(e,t,n){const s=e[0].dtype;if(s==="complex64"){const c=e.map(m=>ap({inputs:{input:m},backend:n})),d=e.map(m=>A0({inputs:{input:m},backend:n})),f=Vu(c,t,n),h=Vu(d,t,n),p=Yi({inputs:{real:f,imag:h},backend:n});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),d.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}let o=n.shouldExecuteOnCPU(e);if(s==="string"&&(o=!0),o){const c=e.map(v=>{const b=Ue(v.shape.slice(t));return yt({inputs:{x:v},backend:n,attrs:{shape:[-1,b]}})}),d=c.map(v=>({vals:n.readSync(v.dataId),shape:v.shape})),f=ya(c.map(v=>v.shape),1),h=c[0].shape[0]===1,p=aze(d,f,s,h),m=ya(e.map(v=>v.shape),t),g=n.makeTensorInfo(m,s,p);return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}if(e.length>Ge().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(e.length/2),d=Vu(e.slice(0,c),t,n),f=Vu(e.slice(c),t,n),h=Vu([d,f],t,n);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}if(Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const c=new l5e(e.map(d=>d.shape),t);return n.runWebGLProgram(c,e,s)}const{tensors2D:r,outShape:a}=c5e(e,t,n),i=new i5e(r.map(c=>c.shape)),l=n.runWebGLProgram(i,r,s);r.forEach(c=>n.disposeIntermediateTensorInfo(c));const u=yt({inputs:{x:l},attrs:{shape:a},backend:n});return n.disposeIntermediateTensorInfo(l),u}function c5e(e,t,n){const s=ya(e.map(r=>r.shape),t);return{tensors2D:e.map(r=>yt({inputs:{x:r},attrs:{shape:[-1,Ue(r.shape.slice(t))]},backend:n})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tB(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s,r=an(o,t[0].shape)[0],a=ya(t.map(u=>u.shape),r);if(Ue(a)===0)return n.makeTensorInfo(a,t[0].dtype,[]);const i=t.filter(u=>Ue(u.shape)>0);if(i.length===1)return Po({inputs:{x:i[0]},backend:n});const l=i.map(u=>u.shape);return m2(l,r),Vu(i,r,n)}const d5e={kernelName:ov,backendName:"webgl",kernelFunc:tB};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nB{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const a=t.padInfo.top,i=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,m=t.inChannels%4,g=t.dataFormat==="channelsLast",v=g?1:2,b=g?2:3,$=g?3:1;let y="",w="";s&&(o?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:y=`
          float activation(float x) {
            ${s}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${a}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${$}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class f5e{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,s=t.padInfo.top,o=t.padInfo.left,r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,m=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${r}, ${a}, ${i});
      const ivec3 pads = ivec3(${n}, ${s}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h5e{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=ko(this.outputShape.length);const{dataFormat:s}=n,o=ho(),r=s==="channelsLast",a=r?0:1,i=r?1:2,l=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${t[1]} && pos < ${t[0]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.y + ${d};
          pos = rc.x + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${i}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${r}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sB({x:e,filter:t,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:a=0,activation:i=null}){const l=e.shape,u=s.texData.get(e.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const v=[];if(!((d===1||f===1)&&c>YL)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&Dn(u.shape.slice(-3),l.slice(-3))){const y=l[0]*l[1]*(l[2]+1),w={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},C=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,j(gg(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const k=yt({inputs:{x:t},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(k);const S=vg({a:w,b:k,backend:s,transposeA:p,transposeB:m,bias:o,activation:i,preluActivationWeights:r,leakyreluAlpha:a}),E=s.texData.get(S.dataId);j(E.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=C,E.shape=n.outShape,g=Po({inputs:{x:S},backend:s}),g.shape=n.outShape,v.push(S)}else{const y=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],w=yt({inputs:{x:e},backend:s,attrs:{shape:[1,y,n.inChannels]}}),C=yt({inputs:{x:t},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),k=vg({a:w,b:C,transposeA:p,transposeB:m,backend:s,bias:o,activation:i,preluActivationWeights:r,leakyreluAlpha:a});g=yt({inputs:{x:k},backend:s,attrs:{shape:n.outShape}}),v.push(w),v.push(C),v.push(k)}for(const y of v)s.disposeIntermediateTensorInfo(y);return g}function oB({x:e,filter:t,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:a=0,activation:i=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",m=l*u*c,g=f*d,v=[m,g],b=!0,$=!1,y=[],w=yt({inputs:{x:e},backend:s,attrs:{shape:e.shape.slice(1)}}),C=yt({inputs:{x:t},backend:s,attrs:{shape:[1,m,Ue(t.shape)/m]}});y.push(w),y.push(C);const k=new h5e(v,n),S=[w.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=s.runWebGLProgram(k,[w],"float32",S),x=yt({inputs:{x:E},backend:s,attrs:{shape:[1,v[0],v[1]]}});y.push(E),y.push(x);const N=o!=null,A=r!=null,D=i==="leakyrelu",M=i?E0(i,!0):null,F=new XL(x.shape,C.shape,[1,g,n.outChannels],b,$,N,M,A,D),R=[x,C];if(o&&R.push(o),A&&R.push(r),D){const se=s.makeTensorInfo([],"float32",Wi(a,"float32"));R.push(se),y.push(se)}const P=s.runWebGLProgram(F,R,"float32"),V=p?[1,f,d,n.outChannels]:[1,n.outChannels,f,d],G=yt({inputs:{x:P},backend:s,attrs:{shape:V}});y.push(P);for(const se of y)s.disposeIntermediateTensorInfo(se);return G}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:a,pad:i,dataFormat:l,dilations:u,dimRoundingMode:c}=s,d=Ja(l),f=Ks(o.shape,r.shape,a,u,i,c,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=sB({x:o,filter:r,convInfo:f,backend:n});else if(Ge().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)h=oB({x:o,filter:r,convInfo:f,backend:n});else{const m=new nB(f);h=n.runWebGLProgram(m,[o,r],"float32")}const p=yt({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const m5e={kernelName:rv,backendName:"webgl",kernelFunc:p5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g5e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,r=t.padInfo.left,a=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              if (${a}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class v5e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,a=t.dataFormat==="channelsLast",i=n-1-t.padInfo.top,l=s-1-t.padInfo.left,u=a?1:2,c=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class b5e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,s=t.strideHeight,o=t.strideWidth,r=t.padInfo.front,a=t.padInfo.top,i=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${r};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${a};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${i};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class y5e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,s=t.filterHeight,o=t.filterWidth,r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,l=n-1-t.padInfo.front,u=s-1-t.padInfo.top,c=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${r}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:a,pad:i,dataFormat:l,dimRoundingMode:u,filterShape:c}=s,d=Ja(l),f=Ks(o.shape,c,a,1,i,u,!1,d),h=new g5e(f);return n.runWebGLProgram(h,[o,r],"float32")}const $5e={kernelName:z$,backendName:"webgl",kernelFunc:w5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{inputShape:a,strides:i,pad:l,dataFormat:u,dimRoundingMode:c}=s,d=Ja(u),f=Ks(a,r.shape,i,1,l,c,!1,d),h=new v5e(f);return n.runWebGLProgram(h,[o,r],"float32")}const k5e={kernelName:av,backendName:"webgl",kernelFunc:C5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:a,pad:i,dilations:l}=s,u=Hi(o.shape,r.shape,a,l,i),c=new f5e(u);return n.runWebGLProgram(c,[o,r],"float32")}const x5e={kernelName:iv,backendName:"webgl",kernelFunc:S5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:a,pad:i,filterShape:l}=s,u=Hi(o.shape,l,a,1,i),c=new b5e(u);return n.runWebGLProgram(c,[o,r],"float32")}const E5e={kernelName:V$,backendName:"webgl",kernelFunc:I5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{pad:a,strides:i,inputShape:l}=s,u=Hi(l,r.shape,i,1,a),c=new y5e(u);return n.runWebGLProgram(c,[o,r],"float32")}const N5e={kernelName:W$,backendName:"webgl",kernelFunc:T5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5e=sd+`
  return cos(x);
`,D5e=xn({opSnippet:A5e}),R5e={kernelName:Qf,backendName:"webgl",kernelFunc:D5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,O5e=xn({opSnippet:_5e}),M5e={kernelName:eh,backendName:"webgl",kernelFunc:O5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F5e{constructor(t,n,s,o,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,l,u]=t,[c]=n,[d,f]=s;this.outputShape=[c,d,f,u];const h=o==="bilinear"?1:0,[p,m]=[`${i-1}.0`,`${l-1}.0`],[g,v,b]=d>1?[`${(i-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[$,y,w]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${$});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${y};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${r}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${r}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5e=e=>{const{inputs:t,backend:n,attrs:s}=e,{image:o,boxes:r,boxInd:a}=t,{cropSize:i,method:l,extrapolationValue:u}=s,c=new F5e(o.shape,r.shape,i,l,u);return n.runWebGLProgram(c,[o,r,a],"float32")},L5e={kernelName:H$,backendName:"webgl",kernelFunc:P5e};class $N{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;const o=t.length,r=n?"0.0":`getX(${CN(o,"coords")})`,a=t[t.length-1];let i="",l="";n?(i=s?`end != ${a-1}`:"end != 0",l=s?"end + 1":"end - 1"):(i=s?`end + pow2 < ${a}`:"end >= pow2",l=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Wn(o)} coords = getOutputCoords();
        int end = ${kN(o,"coords")};
        float val = ${r};
        int pow2 = int(pow(2.0, index));
        if (${i}) {
          int idx = ${l};
          ${kN(o,"coords")} = idx;
          val += getX(${CN(o,"coords")});
        }
        setOutput(val);
      }
    `}}function CN(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function kN(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:a,reverse:i}=s,l=o.shape.length,u=ps([r],l);let c=o;u!=null&&(c=fo({inputs:{x:o},backend:n,attrs:{perm:u}}));const d=ys(1,l)[0];if(d!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${o.shape.length-1} but got axis=${r}`);const f=c.shape[d];let h=Po({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const m=new $N(c.shape,!1,i),g=[[p]],v=h;h=n.runWebGLProgram(m,[h],h.dtype,g),n.disposeIntermediateTensorInfo(v)}if(a){const p=new $N(c.shape,a,i),m=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(m)}if(u!=null){const p=jc(u),m=fo({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),m}return h}const z5e={kernelName:lv,backendName:"webgl",kernelFunc:B5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:a,binaryOutput:i}=s;if(o.shape.length===1){const l=n.readSync(o.dataId),u=n.readSync(r.dataId),c=BL(l,u,r.dtype,r.shape,a);return n.makeTensorInfo([a],r.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(r),c=oze(l,u,a,i);return n.makeTensorInfo(c.shape,r.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const W5e={kernelName:oO,backendName:"webgl",kernelFunc:V5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H5e{constructor(t,n,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockSize:r,dataFormat:a}=s,i=o.shape[0],l=a==="NHWC"?o.shape[1]:o.shape[2],u=a==="NHWC"?o.shape[2]:o.shape[3],c=a==="NHWC"?o.shape[3]:o.shape[1],d=l*r,f=u*r,h=c/(r*r),p=a==="NHWC"?[i,d,f,h]:[i,h,d,f],m=new H5e(p,r,a);return n.runWebGLProgram(m,[o],o.dtype)}const G5e={kernelName:U$,backendName:"webgl",kernelFunc:U5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rB{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=ko(this.outputShape.length);const a=t.filterHeight,i=t.filterWidth,l=t.outChannels/t.inChannels;let u="",c="";s&&(o?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:u=`
          float activation(float x) {
            ${s}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${i}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aB{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=ko(this.outputShape.length);const a=t.outChannels/t.inChannels,i=t.padInfo.left,l=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const b=v*2;if(h+=`
          xC = xCCorner + ${b*u};
          `,l===1){if(b<d&&(i%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,u===1&&b>0?h+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const $=i%2===0?K3(u):u;u%2===0&&i%2===1||u%2!==0&&i%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${$};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,u>1&&(h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                      xTexelC${b} = getX(batch, xR, xCOffset, d1);
                      xTexelC${b}Ready = 1;
                    }
                    `),h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                  `):$===1?h+=`
                    xC${b+1} = xTexelC${b};
                    `:h+=`
                    xCOffset = xC + ${$};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(i%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(h+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(h+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";s&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:p=`vec4 activation(vec4 x) {
          ${s}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:a,pad:i,dilations:l,dimRoundingMode:u}=s;let c=l;c==null&&(c=[1,1]),j(ao(a,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const d=Ks(o.shape,r.shape,a,c,i,u,!0);let f;Ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new aB(d):f=new rB(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,r],"float32",h)}const j5e={kernelName:uv,backendName:"webgl",kernelFunc:K5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q5e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,r=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class X5e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,a=n-1-t.padInfo.top,i=s-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:a,dilations:i,pad:l,dimRoundingMode:u,filterShape:c}=s,d=Ks(o.shape,c,a,i,l,u,!0),f=new q5e(d);return n.runWebGLProgram(f,[o,r],"float32")}const Z5e={kernelName:G$,backendName:"webgl",kernelFunc:Y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{strides:a,dilations:i,pad:l,dimRoundingMode:u,inputShape:c}=s,d=Ks(c,r.shape,a,i,l,u,!0),f=new X5e(d);return n.runWebGLProgram(f,[o,r],"float32")}const Q5e={kernelName:K$,backendName:"webgl",kernelFunc:J5e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e8e{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t8e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=[...s.shape,...s.shape],r=Ue(s.shape),a=yt({inputs:{x:s},backend:n,attrs:{shape:[r]}}),i=new e8e(r),l=n.runWebGLProgram(i,[a],a.dtype),u=yt({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const n8e={kernelName:rO,backendName:"webgl",kernelFunc:t8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s8e{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:s,padInfo:o,strideHeight:r,strideWidth:a,filterHeight:i,filterWidth:l,dilationHeight:u,dilationWidth:c}=t,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${a});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${i}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:a,pad:i,dilations:l}=s,u=Bh(o.shape,r.shape,a,i,"NHWC",l);let c;const d=new s8e(u);c=n.runWebGLProgram(d,[o,r],"float32");const f=yt({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const r8e={kernelName:cv,backendName:"webgl",kernelFunc:o8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8e(e){const{inputs:t,backend:n,attrs:s}=e,{equation:o}=s,r=t,{allDims:a,summedDims:i,idDims:l}=E2(o,r.length);N2(a.length,l,r);const{path:u,steps:c}=A2(i,l),d=c.length;let f=null,h=a.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:v,expandDims:b}=T2(h,l[g]);let $;D2(v)?$=r[g]:($=fo({inputs:{x:r[g]},backend:n,attrs:{perm:v}}),p.push($));const y=$.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);Dn($.shape,y)||($=yt({inputs:{x:$},backend:n,attrs:{shape:y}}),p.push($)),f===null?f=$:(f=bk({inputs:{a:$,b:f},backend:n}),p.push(f))}m<d-1&&(u[m]>=0&&(f=N0({inputs:{x:f},backend:n,attrs:{axis:u[m]-(a.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const i8e={kernelName:aO,backendName:"webgl",kernelFunc:a8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8e="return (x >= 0.0) ? x : (exp(x) - 1.0);",u8e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,c8e=xn({opSnippet:l8e,packedOpSnippet:u8e}),d8e={kernelName:nh,backendName:"webgl",kernelFunc:c8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f8e="return (b >= 1.0) ? a : a * (b + 1.0);",h8e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,p8e=e=>{const{inputs:t,backend:n}=e,{dy:s,y:o}=t,r=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rp(h8e,s.shape,o.shape):new Ac(f8e,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],s.dtype)},m8e={kernelName:j$,backendName:"webgl",kernelFunc:p8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8e=`
  return vec4(equal(a, b));
`,v8e="return float(a == b);",b8e=qs({opSnippet:v8e,packedOpSnippet:g8e,dtype:"bool",cpuKernelImpl:ize}),y8e={kernelName:dv,backendName:"webgl",kernelFunc:b8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w8e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${w2};
  float a1 = ${$2};
  float a2 = ${C2};
  float a3 = ${k2};
  float a4 = ${S2};
  float a5 = ${x2};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,$8e=xn({opSnippet:w8e}),C8e={kernelName:sh,backendName:"webgl",kernelFunc:$8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k8e=sd+`
  return exp(x);
`,S8e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,iB=xn({opSnippet:k8e,packedOpSnippet:S8e,cpuKernelImpl:lze,dtype:"float32"}),x8e={kernelName:oh,backendName:"webgl",kernelFunc:iB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sw(e){const{inputs:t,attrs:n,backend:s}=e,{dim:o}=n,{input:r}=t,a=r.shape.length,i=r.shape.slice();let l=o;return o<0&&(j(-(a+1)<=o,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+o+1),i.splice(l,0,1),yt({inputs:{x:r},backend:s,attrs:{shape:i}})}const I8e={kernelName:fv,backendName:"webgl",kernelFunc:sw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SN="return exp(x) - 1.0;",E8e=xn({opSnippet:SN,packedOpSnippet:SN,cpuKernelImpl:uze}),T8e={kernelName:rh,backendName:"webgl",kernelFunc:E8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xN{constructor(t,n,s){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const r=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=s?`${o}.0`:"1.0";let i;if(t==="real")i="return real * expR - imag * expI;";else if(t==="imag")i="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${r};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${i}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lB(e,t,n){const s=n.texData.get(e.dataId),o=Ue(e.shape),r=e.shape[e.shape.length-1],a=o/r,i=yt({inputs:{x:e},backend:n,attrs:{shape:[a,r]}}),l=i.shape,u=new xN("real",l,t),c=new xN("imag",l,t),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=Yi({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const m=yt({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(e){const{inputs:t,backend:n}=e,{input:s}=t;return lB(s,!1,n)}const A8e={kernelName:q$,backendName:"webgl",kernelFunc:N8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D8e{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ip(e){const{backend:t,attrs:n}=e,{shape:s,value:o}=n;let{dtype:r}=n;if(r=r||Vf(o),r==="string"){const a=yo(r,Ue(s));return a.fill(o),t.makeTensorInfo(s,r,a)}else{const a=new D8e(s,o),i=[[o]];return t.runWebGLProgram(a,[],r,i)}}const R8e={kernelName:X$,backendName:"webgl",kernelFunc:ip};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _8e{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8e={kernelName:Y$,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,s=t,o=new _8e(n.shape);return s.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IN="return floor(x);",M8e=xn({opSnippet:IN,packedOpSnippet:IN,cpuKernelImpl:cze}),F8e={kernelName:ah,backendName:"webgl",kernelFunc:M8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P8e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,L8e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,B8e=qs({opSnippet:P8e,packedOpSnippet:L8e,dtype:"int32"}),z8e={kernelName:ih,backendName:"webgl",kernelFunc:B8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V8e{constructor(t){this.variableNames=["A"];const n=ho(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${s}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W8e{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=ho(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${s}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H8e={kernelName:Ake,backendName:"webgl",kernelFunc:U8e};let _u;function U8e(e){const{inputs:t,backend:n,attrs:s}=e;let{pixels:o}=t;const{numChannels:r}=s,a=typeof HTMLVideoElement!="undefined"&&o instanceof HTMLVideoElement,i=typeof HTMLImageElement!="undefined"&&o instanceof HTMLImageElement,[l,u]=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[u,l],d=[u,l,r];(i||a)&&(_u==null&&(_u=document.createElement("canvas").getContext("2d")),_u.canvas.width=l,_u.canvas.height=u,_u.drawImage(o,0,0,l,u),o=_u.canvas);const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=Zo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const h=Ge().getBool("WEBGL_PACK")?new W8e(d):new V8e(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:a,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s,m=Ja(c),g=Ks(o.shape,r.shape,l,d,u,f,!1,m);let v;const b=[];if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))v=sB({x:o,filter:r,convInfo:g,backend:n,bias:a,activation:h,preluActivationWeights:i,leakyreluAlpha:p});else if(Ge().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)v=oB({x:o,filter:r,convInfo:g,backend:n,bias:a,activation:h,preluActivationWeights:i,leakyreluAlpha:p});else{const y=a!=null,w=i!=null,C=h==="leakyrelu",k=h?E0(h,!1):null,S=new nB(g,y,k,w,C),E=[o,r];if(a&&E.push(a),i&&E.push(i),C){const x=n.makeTensorInfo([],"float32",Wi(p,"float32"));E.push(x),b.push(x)}v=n.runWebGLProgram(S,E,"float32")}const $=yt({inputs:{x:v},backend:n,attrs:{shape:g.outShape}});return b.push(v),b.forEach(y=>n.disposeIntermediateTensorInfo(y)),$}const K8e={kernelName:Qm,backendName:"webgl",kernelFunc:G8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:a,preluActivationWeights:i}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=s,p=[];let m=c;m==null&&(m=[1,1]),j(ao(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Ks(o.shape,r.shape,l,m,u,d,!0),v=Ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=f?E0(f,v):null,$=[o,r],y=a!=null,w=i!=null,C=f==="leakyrelu";if(y&&$.push(a),w&&$.push(i),C){const x=n.makeTensorInfo([],"float32",Wi(h,"float32"));$.push(x),p.push(x)}let k;v?k=new aB(g,y,b,w,C):k=new rB(g,y,b,w,C);const S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(k,$,"float32",S);return p.forEach(x=>n.disposeIntermediateTensorInfo(x)),E}const q8e={kernelName:hO,backendName:"webgl",kernelFunc:j8e};class X8e{constructor(t,n,s){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=s;const o=Wn(n.length),r=Wn(s.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${o} strides = ${o}(${this.strides});
         void main() {
          ${r} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${a};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8e(e){const{inputs:t,backend:n}=e,{params:s,indices:o}=t,r=o.shape,a=r[r.length-1],i=Ue(s.shape),[l,u,c,d]=EC(s,o),f=yt({inputs:{x:o},backend:n,attrs:{shape:[u,a]}}),h=yt({inputs:{x:s},backend:n,attrs:{shape:[Ue(s.shape)/c,c]}});if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const v=n.readSync(o.dataId),b=n.bufferSync(s),$=dze(v,b,s.dtype,u,a,c,d,s.shape,i);return n.makeTensorInfo(l,s.dtype,$.values)}const p=new X8e(a,d,[u,c]),m=n.runWebGLProgram(p,[h,f],h.dtype),g=yt({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const Z8e={kernelName:iO,backendName:"webgl",kernelFunc:Y8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J8e{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const s=Wn(this.rank),o=Q8e(t);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function Q8e(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<e.length;o++)o===2?s.push("index"):s.push(`${n[o]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uB(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,indices:r}=t,{axis:a,batchDims:i}=s,l=an(a,o.shape)[0];if(Ge().get("DEBUG")){const b=n.readSync(r.dataId),$=o.shape[l];for(let y=0;y<b.length;++y){const w=b[y];j(w<=$-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${$-1}]`)}}const u=_2(o,r,l,i),c=Ue(r.shape),d=[],f=yt({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=yt({inputs:{x:r},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(f),d.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,r])||o.dtype==="string"){const b=n.bufferSync(h),$=n.bufferSync(f),y=fze($,b,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,y.dtype,y.values)}const m=new J8e(f.shape,p),g=n.runWebGLProgram(m,[f,h],f.dtype);d.push(g);const v=yt({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const eWe={kernelName:pv,backendName:"webgl",kernelFunc:uB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tWe="return float(a > b);",nWe=`
  return vec4(greaterThan(a, b));
`,sWe=qs({opSnippet:tWe,packedOpSnippet:nWe,cpuKernelImpl:hze,dtype:"bool"}),oWe={kernelName:mv,backendName:"webgl",kernelFunc:sWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rWe="return float(a >= b);",aWe=`
  return vec4(greaterThanEqual(a, b));
`,iWe=qs({opSnippet:rWe,packedOpSnippet:aWe,dtype:"bool",cpuKernelImpl:pze}),lWe={kernelName:lh,backendName:"webgl",kernelFunc:iWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uWe(e){const{inputs:t,backend:n}=e,{input:s}=t;return lB(s,!0,n)}const cWe={kernelName:Z$,backendName:"webgl",kernelFunc:uWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dWe="return float(!isnan(x) && !isinf(x));",fWe=xn({opSnippet:dWe,dtype:"bool"}),hWe={kernelName:ch,backendName:"webgl",kernelFunc:fWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pWe="return float(isinf(x));",mWe=xn({opSnippet:pWe,dtype:"bool"}),gWe={kernelName:dh,backendName:"webgl",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vWe="return float(isnan(x));",bWe=xn({opSnippet:vWe,dtype:"bool"}),yWe={kernelName:fh,backendName:"webgl",kernelFunc:bWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wWe="return float(a < b);",$We=`
  return vec4(lessThan(a, b));
`,CWe=qs({opSnippet:wWe,packedOpSnippet:$We,cpuKernelImpl:mze,dtype:"bool"}),kWe={kernelName:vv,backendName:"webgl",kernelFunc:CWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SWe="return float(a <= b);",xWe=`
  return vec4(lessThanEqual(a, b));
`,IWe=qs({opSnippet:SWe,packedOpSnippet:xWe,cpuKernelImpl:gze,dtype:"bool"}),EWe={kernelName:bv,backendName:"webgl",kernelFunc:IWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TWe(e){const{backend:t,attrs:n}=e,{start:s,stop:o,num:r}=n,a=vze(s,o,r);return t.makeTensorInfo([a.length],"float32",a)}const NWe={kernelName:lO,backendName:"webgl",kernelFunc:TWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AWe=sd+`
  return x < 0.0 ? 0./0. : log(x);
`,DWe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,RWe=xn({opSnippet:AWe,packedOpSnippet:DWe,cpuKernelImpl:bze}),_We={kernelName:hh,backendName:"webgl",kernelFunc:RWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OWe=sd+`
  return log(1.0 + x);
`,MWe=xn({opSnippet:OWe}),FWe={kernelName:ph,backendName:"webgl",kernelFunc:MWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PWe="return float(a >= 1.0 && b >= 1.0);",LWe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,BWe=qs({opSnippet:PWe,packedOpSnippet:LWe,dtype:"bool"}),zWe={kernelName:yv,backendName:"webgl",kernelFunc:BWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VWe="return float(!(x >= 1.0));",WWe=xn({opSnippet:VWe}),HWe={kernelName:wv,backendName:"webgl",kernelFunc:WWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UWe="return float(a >= 1.0 || b >= 1.0);",GWe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,KWe=qs({opSnippet:UWe,packedOpSnippet:GWe,dtype:"bool"}),jWe={kernelName:$v,backendName:"webgl",kernelFunc:KWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qWe{constructor(t,n,s,o,r){this.variableNames=["x"],this.outputShape=[];const a=n,i=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${i}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XWe{constructor(t,n,s,o,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,i=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${i}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YWe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{depthRadius:r,bias:a,alpha:i,beta:l}=s,u=Ge().getBool("WEBGL_PACK_NORMALIZATION")?new XWe(o.shape,r,a,i,l):new qWe(o.shape,r,a,i,l);return n.runWebGLProgram(u,[o],o.dtype)},ZWe={kernelName:Cv,backendName:"webgl",kernelFunc:YWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JWe{constructor(t,n,s,o,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=s,this.alpha=o,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${r})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${r});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QWe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o,y:r,dy:a}=t,{depthRadius:i,bias:l,alpha:u,beta:c}=s,d=new JWe(o.shape,i,l,u,c);return n.runWebGLProgram(d,[o,r,a],o.dtype)},eHe={kernelName:Q$,backendName:"webgl",kernelFunc:QWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tHe(e,t,n,s){const o=Ue(t),a=Ue(e.shape)/o,i=yt({inputs:{x:e},attrs:{shape:[a,o]},backend:s}),l=pu(i,e.dtype,"max",s),u=yt({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(i),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cB(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reductionIndices:r,keepDims:a}=s,i=o.shape.length,l=an(r,o.shape);let u=l;const c=ps(u,i),d=c!=null,f=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const $=n.texData.get(h.dataId).values,y=new Array(i);for(let k=0;k<y.length;k++)y[k]=o.shape[c[k]];const w=vk($,o.shape,o.dtype,c,y);h=n.makeTensorInfo(y,o.dtype);const C=n.texData.get(h.dataId);C.values=w}else h=T0(o,c,n);u=ys(u.length,i)}js("max",u,i);const[p,m]=Ps(h.shape,u);let g=p;a&&(g=hs(p,l));let v;if(f){const $=n.texData.get(h.dataId).values,y=yze($,Ue(m),g,o.dtype);v=n.makeTensorInfo(g,o.dtype);const w=n.texData.get(v.dataId);w.values=y}else v=tHe(h,m,g,n);return d&&n.disposeIntermediateTensorInfo(h),v}const nHe={kernelName:kv,backendName:"webgl",kernelFunc:cB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sHe=UL+`
  return max(a, b);
`,oHe=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+I0+`
  return result;
`,rHe=qs({opSnippet:sHe,packedOpSnippet:oHe,cpuKernelImpl:wze}),aHe={kernelName:mh,backendName:"webgl",kernelFunc:rHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;sp(o,"maxPool");const{filterSize:r,strides:a,pad:i,dimRoundingMode:l}=s,u=1;j(ao(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ar(o.shape,r,a,u,i,l);if(c.filterWidth===1&&c.filterHeight===1&&Dn(c.inShape,c.outShape))return Po({inputs:{x:o},backend:n});const d=new If(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const lHe={kernelName:Sv,backendName:"webgl",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:a,pad:i,dataFormat:l,dimRoundingMode:u}=s,c=[1,1,1],d=Za(o.shape,r,a,c,i,u,l),f=new yk(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const cHe={kernelName:xv,backendName:"webgl",kernelFunc:uHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dHe{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,s=t.strideWidth,o=t.dilationHeight,r=t.effectiveFilterHeight,a=t.effectiveFilterWidth,i=r-1-t.padInfo.top,l=a-1-t.padInfo.left,u=r*a-1;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class fHe{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,s=t.strideHeight,o=t.strideWidth,r=t.dilationDepth,a=t.dilationHeight,i=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=l-1-t.padInfo.front,f=u-1-t.padInfo.top,h=c-1-t.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${r}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${i}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hHe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,a=r,{filterSize:i,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],f=Za(a.shape,i,l,d,u,c),h=new yk(f,"max",!0),p=n.runWebGLProgram(h,[a],a.dtype),m=new fHe(f),g=n.runWebGLProgram(m,[o,p],a.dtype);return n.disposeIntermediateTensorInfo(p),g}const pHe={kernelName:tC,backendName:"webgl",kernelFunc:hHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mHe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r,output:a}=t,i=r;sp([r,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,f=Ar(i.shape,l,u,1,c,d),h=!0,p=new If(f,"max",h),m=n.runWebGLProgram(p,[i],i.dtype),g=new dHe(f),v=n.runWebGLProgram(g,[o,m],i.dtype);return n.disposeIntermediateTensorInfo(m),v}const gHe={kernelName:eC,backendName:"webgl",kernelFunc:mHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vHe(e,t,n,s){let o=new If(n,"max",!1);const r=s.runWebGLProgram(o,[e],"float32");o=new If(n,"max",!0,!0,t);const a=s.runWebGLProgram(o,[e],"float32");return[r,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bHe={kernelName:uO,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{filterSize:o,strides:r,pad:a,includeBatchInIndex:i}=t,l=n;j(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const u=[1,1];j(ao(r,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${u}'`);const c=Ar(s.shape,o,r,u,a),[d,f]=vHe(s,i,c,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yHe(e,t,n,s){const o=Ue(t),a=Ue(e.shape)/o,i=yt({inputs:{x:e},attrs:{shape:[a,o]},backend:s}),l=pu(i,"float32","mean",s),u=yt({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(i),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wHe={kernelName:Iv,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{keepDims:o,axis:r}=t,a=n,i=s.shape.length,l=an(r,s.shape);let u=l;const c=ps(u,i),d=c!=null,f=a.shouldExecuteOnCPU([s]),h=[];let p=s;if(d){if(f){const y=a.texData.get(p.dataId).values,w=new Array(i);for(let S=0;S<w.length;S++)w[S]=s.shape[c[S]];const C=vk(y,s.shape,s.dtype,c,w);p=a.makeTensorInfo(w,s.dtype);const k=a.texData.get(p.dataId);k.values=C}else p=T0(s,c,a);h.push(p),u=ys(u.length,i)}js("sum",u,i);const[m,g]=Ps(p.shape,u);let v=m;o&&(v=hs(m,l));const b=yHe(p,g,v,a);for(const $ of h)a.disposeIntermediateTensorInfo($);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $He(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s,i=o.shape.length,l=an(r,o.shape);let u=l;const c=ps(u,i);let d=o;c!=null&&(d=fo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=ys(u.length,o.shape.length)),js("min",u,i);const[f,h]=Ps(d.shape,u),p=Ue(h),m=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=pu(m,m.dtype,"min",n);let v;if(a){const b=hs(f,l);v=yt({inputs:{x:g},backend:n,attrs:{shape:b}})}else v=yt({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const CHe={kernelName:Ev,backendName:"webgl",kernelFunc:$He};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kHe=UL+`
  return min(a, b);
`,SHe=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+I0+`
  return result;
`,xHe=qs({opSnippet:kHe,packedOpSnippet:SHe,cpuKernelImpl:$ze}),IHe={kernelName:gh,backendName:"webgl",kernelFunc:xHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EHe{constructor(t,n,s){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+t[d]+c[1]);const o=t.length,r=Wn(o),a=n.map(c=>c[0]).join(","),i=n.map((c,d)=>c[0]+t[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),u=s==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${a};
        int end = ${i};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${a});
      ${r} end = ${r}(${i});

      void main() {
        ${r} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${r} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class THe{constructor(t,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+t[m]+p[1]);const o=t.length,r=Wn(o),a=n.map(p=>p[0]).join(","),i=n.map((p,m)=>p[0]+t[m]).join(","),l=lo("rc",o),u=lo("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=s==="reflect"?0:1;let h="";if(o===1){const p=`
        ${r} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const p=`
        ${r} source = rc;
        ${r} lt = ${r}(lessThan(source, start));
        ${r} gte = ${r}(greaterThanEqual(source, end));
        ${r} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[o-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${r} start = ${r}(${a});
      const ${r} end = ${r}(${i});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NHe=({inputs:e,backend:t,attrs:n})=>{const{x:s}=e,{paddings:o,mode:r}=n,a=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new THe(s.shape,o,r):new EHe(s.shape,o,r);return t.runWebGLProgram(a,[s],s.dtype)},AHe={kernelName:Tv,backendName:"webgl",kernelFunc:NHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DHe=`if (b == 0.0) return NAN;
  return mod(a, b);`,RHe=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+I0+`
  return result;
`,_He=qs({opSnippet:DHe,packedOpSnippet:RHe}),OHe={kernelName:vh,backendName:"webgl",kernelFunc:_He};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MHe{constructor(t,n,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FHe=`
if (a == b) {
  return 1.0;
};
return a / b;`,PHe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,dB=qs({opSnippet:FHe,packedOpSnippet:PHe,checkOutOfBounds:!0}),LHe={kernelName:th,backendName:"webgl",kernelFunc:dB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EN="return a - b;",fB=qs({opSnippet:EN,packedOpSnippet:EN,supportsComplex:!0,cpuKernelImpl:Pze}),BHe={kernelName:_h,backendName:"webgl",kernelFunc:fB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hB(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{dim:r}=s,a=an([r],o.shape),i=cB({inputs:{x:o},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=hs(i.shape,a),u=yt({inputs:{x:i},backend:n,attrs:{shape:l}}),c=fB({inputs:{a:o,b:u},backend:n}),d=iB({inputs:{x:c},backend:n}),f=N0({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),h=yt({inputs:{x:f},backend:n,attrs:{shape:l}}),p=dB({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const zHe={kernelName:Gv,backendName:"webgl",kernelFunc:hB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{numSamples:r,seed:a,normalized:i}=s,l=i?o:hB({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new MHe(u,c,r),f=[[a]],h=n.runWebGLProgram(d,[l],"int32",f);return i||n.disposeIntermediateTensorInfo(l),h}const WHe={kernelName:cO,backendName:"webgl",kernelFunc:VHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HHe=_r+`
  return -x;
`,UHe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function GHe(e){const{inputs:t,backend:n}=e,{x:s}=t;if(n.shouldExecuteOnCPU([s])){const r=n.texData.get(s.dataId),[a,i]=kze(r.values,s.shape,s.dtype);return n.makeTensorInfo(i,s.dtype,a)}let o;return Ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Tl(s.shape,UHe):o=new Pa(s.shape,HHe),n.runWebGLProgram(o,[s],s.dtype)}const KHe={kernelName:Nv,backendName:"webgl",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jHe=r2;function qHe(e){qo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l}=s,u=n.readSync(o.dataId),c=n.readSync(r.dataId),{selectedIndices:d}=jHe(u,c,a,i,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const XHe={kernelName:nC,backendName:"webgl",kernelFunc:qHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YHe=a2;function ZHe(e){qo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l,padToMaxOutputSize:u}=s,c=n.readSync(o.dataId),d=n.readSync(r.dataId),{selectedIndices:f,validOutputs:h}=YHe(c,d,a,i,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const JHe={kernelName:sC,backendName:"webgl",kernelFunc:ZHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QHe=i2;function eUe(e){qo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l,softNmsSigma:u}=s,c=n.readSync(o.dataId),d=n.readSync(r.dataId),f=a,h=i,p=l,m=u,{selectedIndices:g,selectedScores:v}=QHe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const tUe={kernelName:oC,backendName:"webgl",kernelFunc:eUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nUe{constructor(t,n,s,o){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sUe=e=>{const{inputs:t,backend:n,attrs:s}=e,{indices:o}=t,{depth:r,onValue:a,offValue:i}=s,l=Ue(o.shape),u=new nUe(l,r,a,i),c=yt({inputs:{x:o},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(u,[c],o.dtype);n.disposeIntermediateTensorInfo(c);const f=[...o.shape,r],h=yt({inputs:{x:d},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(d),h},oUe={kernelName:Rv,backendName:"webgl",kernelFunc:sUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bg(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="complex64"){const o=ap({inputs:{input:s},backend:n}),r=bg({inputs:{x:o},backend:n}),a=A0({inputs:{input:s},backend:n}),i=bg({inputs:{x:a},backend:n}),l=Yi({inputs:{real:r,imag:i},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),l}else return ip({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:n})}const rUe={kernelName:Xv,backendName:"webgl",kernelFunc:bg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pB(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const o=ap({inputs:{input:s},backend:n}),r=pB({inputs:{x:o},backend:n}),a=A0({inputs:{input:s},backend:n}),i=bg({inputs:{x:a},backend:n}),l=Yi({inputs:{real:r,imag:i},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),l}else return ip({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:n})}const aUe={kernelName:Dv,backendName:"webgl",kernelFunc:pB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iUe(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s;if(t.length===1)return sw({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const r=t[0].shape,a=t[0].dtype;t.forEach(c=>{Nr(r,c.shape,"All tensors passed to stack must have matching shapes"),j(a===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const i=[],l=t.map(c=>{const d=sw({inputs:{input:c},backend:n,attrs:{dim:o}});return i.push(d),d}),u=tB({inputs:l,backend:n,attrs:{axis:o}});return i.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const lUe={kernelName:_v,backendName:"webgl",kernelFunc:iUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uUe{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+t[c]+u[1]);const o=t.length,r=Wn(o),a=n.map(u=>u[0]).join(","),i=n.map((u,c)=>u[0]+t[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${a};
        int end = ${i};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${a});
      ${r} end = ${r}(${i});

      void main() {
        ${r} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${r} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cUe{constructor(t,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+t[g]+m[1]);const o=t.length,r=Wn(o),a=n.map(m=>m[0]).join(","),i=n.map((m,g)=>m[0]+t[g]).join(","),l=lo("rc",o),u=lo("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${r} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${c}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=o===1?2:4;m<g;m++)p+=`
        ${f[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${r} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${r} start = ${r}(${a});
      const ${r} end = ${r}(${i});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mB=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,constantValue:a}=s;if(Ue(o.shape)===0){const u=r.map((c,d)=>c[0]+o.shape[d]+c[1]);return ip({backend:n,attrs:{shape:u,value:a,dtype:o.dtype}})}const i=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cUe(o.shape,r,a):new uUe(o.shape,r,a),l=[[a]];return n.runWebGLProgram(i,[o],o.dtype,l)},dUe={kernelName:Ov,backendName:"webgl",kernelFunc:mB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fUe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,hUe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+I0+`
  return result;
`,pUe=qs({opSnippet:fUe,packedOpSnippet:hUe}),mUe={kernelName:yh,backendName:"webgl",kernelFunc:pUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gUe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:a}=s,i=o.shape.length,l=[],u=an(r,o.shape);let c=u;const d=ps(c,i);let f=o;d!=null&&(f=fo({inputs:{x:o},backend:n,attrs:{perm:d}}),c=ys(c.length,i),l.push(f)),js("prod",c,i);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:v}=xze(f.shape,f.dtype,p,c);h=n.makeTensorInfo(g,v,m)}else{const[p,m]=Ps(f.shape,c),g=Ue(m),v=yt({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),b=SC(o.dtype),$=pu(v,b,"prod",n);h=yt({inputs:{x:$},backend:n,attrs:{shape:p}}),l.push(v),l.push($)}if(a){l.push(h);const p=hs(h.shape,u);h=yt({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const vUe={kernelName:rC,backendName:"webgl",kernelFunc:gUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gB=e=>{const{backend:t,attrs:n}=e,{start:s,stop:o,step:r,dtype:a}=n,i=Ize(s,o,r,a);return t.makeTensorInfo([i.length],a,i)},bUe={kernelName:aC,backendName:"webgl",kernelFunc:gB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yUe="return 1.0 / x;",wUe=xn({opSnippet:yUe}),$Ue={kernelName:wh,backendName:"webgl",kernelFunc:wUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CUe=_r+`
  return (x < 0.0) ? 0.0 : x;
`,kUe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SUe=xn({opSnippet:CUe,packedOpSnippet:kUe}),xUe={kernelName:$h,backendName:"webgl",kernelFunc:SUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IUe=_r+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,EUe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,TUe=xn({opSnippet:IUe,packedOpSnippet:EUe}),NUe={kernelName:Ch,backendName:"webgl",kernelFunc:TUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AUe{constructor(t,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[a,i,l,u]=t;this.outputShape=[a,n,s,u];const c=[o&&n>1?i-1:i,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let f;r?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${i}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DUe{constructor(t,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,l,u]=t;this.outputShape=[a,n,s,u];const c=[o&&n>1?i-1:i,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let f;r?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${i}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RUe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:a,size:i}=s,[l,u]=i,c=Ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new DUe(o.shape,l,u,r,a):new AUe(o.shape,l,u,r,a);return n.runWebGLProgram(c,[o],"float32")}const _Ue={kernelName:Lv,backendName:"webgl",kernelFunc:RUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OUe{constructor(t,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,a,i]=t,l=[s&&a>1?o-1:o,s&&i>1?r-1:r],u=[s&&a>1?a-1:a,s&&i>1?i-1:i],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${i}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MUe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:a}=s,i=new OUe(r.shape,o.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const FUe={kernelName:uC,backendName:"webgl",kernelFunc:MUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PUe{constructor(t,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[a,i,l,u]=t;this.outputShape=[a,n,s,u];const c=[o&&n>1?i-1:i,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;r?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${i}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LUe{constructor(t,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,l,u]=t;this.outputShape=[a,n,s,u];const c=[o&&n>1?i-1:i,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;r?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${i}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BUe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:a,size:i}=s,[l,u]=i,c=Ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new LUe(o.shape,l,u,r,a):new PUe(o.shape,l,u,r,a);return n.runWebGLProgram(c,[o],o.dtype)}const zUe={kernelName:Pv,backendName:"webgl",kernelFunc:BUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VUe{constructor(t,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,a,i]=t,l=[s&&a>1?o-1:o,s&&i>1?r-1:r],u=[s&&a>1?a-1:a,s&&i>1?i-1:i],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${i}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WUe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:a}=s,i=new VUe(r.shape,o.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const HUe={kernelName:lC,backendName:"webgl",kernelFunc:WUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UUe{constructor(t,n){this.variableNames=["x"];const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=t,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const o=i=>n.indexOf(i)!==-1&&t[i]!==1?`${t[i]} - coords[${i}] - 1`:`coords[${i}]`,r=t.map((i,l)=>o(l)).join(","),a=Wn(s);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GUe{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=t;const o=lo("rc",s),r=`${o[s-1]} + 1 < ${this.outputShape[s-1]}`,a=`${o[s-2]} + 1 < ${this.outputShape[s-2]}`,i=Wn(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${r}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${i} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${r}){
            result.g = ${u(o.slice())};
          }
          if(${a}) {
            result.b = ${c(o.slice())};
            if(${r}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function u(p){return p[s-1]="("+p[s-1]+" + 1)",f(p)}function c(p){return p[s-2]="("+p[s-2]+" + 1)",f(p)}function d(p){return p[s-1]="("+p[s-1]+" + 1)",p[s-2]="("+p[s-2]+" + 1)",f(p)}function f(p){const m=t.map((b,$)=>h($,p)),g=m.join(","),v=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${v}))`}function h(p,m){return n.indexOf(p)!==-1&&t[p]!==1?`${t[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KUe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dims:r}=s,a=o.shape.length,i=an(r,o.shape);if(a===0)return Po({inputs:{x:o},backend:n});const l=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GUe(o.shape,i):new UUe(o.shape,i);return n.runWebGLProgram(l,[o],o.dtype)}const jUe={kernelName:Bv,backendName:"webgl",kernelFunc:KUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qUe{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=t[1],o=t[2];this.outputShape=t;let r="";typeof n=="number"?r=`float outputValue = ${n.toFixed(2)};`:r=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${r}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XUe={kernelName:CC,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,{radians:o,fillValue:r,center:a}=t,i=n,l=new qUe(s.shape,r),[u,c]=v2(a,s.shape[1],s.shape[2]),d=[[u,c,Math.sin(o),Math.cos(o)]];return i.runWebGLProgram(l,[s],s.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YUe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,ZUe=xn({opSnippet:YUe}),JUe={kernelName:kh,backendName:"webgl",kernelFunc:ZUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QUe="return inversesqrt(x);",eGe=xn({opSnippet:QUe,cpuKernelImpl:Eze}),tGe={kernelName:Sh,backendName:"webgl",kernelFunc:eGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vB{constructor(t,n,s,o,r,a,i=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const l=Wn(r.length),u=Wn(a.length);let c="";s===1?c="i":s===2&&(c="i, j");const d=`getIndices(${c})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const h=`getUpdates(${f})`,p=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${p};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nGe(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o,updates:r}=t,{shape:a}=s,{sliceRank:i,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Lh(r,o,a),f=[d/u,u];if(d===0)return n.makeTensorInfo(a,o.dtype);const h=yt({inputs:{x:o},backend:n,attrs:{shape:[l,i]}}),p=yt({inputs:{x:r},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new vB(l,i,h.shape.length,p.shape.length,c,f),v=n.runWebGLProgram(g,[p,h,m],p.dtype),b=yt({inputs:{x:v},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),b}const sGe={kernelName:dO,backendName:"webgl",kernelFunc:nGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oGe{constructor(t,n,s){this.variableNames=["c","a","b"],this.outputShape=n;let o,r;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)r="resRC",o="resRC";else{const i=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${i[c]}`),c<t&&l.push(`${i[c]}`);o=l.join(),r=u.join()}const a=Wn(s);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${r}));
        } else {
          setOutput(getB(${r}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rGe(e){const{inputs:t,backend:n}=e,{condition:s,t:o,e:r}=t,a=new oGe(s.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(a,[s,o,r],tr(o.dtype,r.dtype))}const aGe={kernelName:zv,backendName:"webgl",kernelFunc:rGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iGe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${u0};
  float scale = ${c0};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,lGe=xn({opSnippet:iGe}),uGe={kernelName:xh,backendName:"webgl",kernelFunc:lGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cGe=sd+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,dGe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fGe=xn({opSnippet:cGe,packedOpSnippet:dGe,cpuKernelImpl:Tze}),hGe={kernelName:Nh,backendName:"webgl",kernelFunc:fGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pGe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,mGe=xn({opSnippet:pGe}),gGe={kernelName:Th,backendName:"webgl",kernelFunc:mGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vGe=sd+`
  return sin(x);
`,bGe=xn({opSnippet:vGe}),yGe={kernelName:Ih,backendName:"webgl",kernelFunc:bGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wGe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,$Ge=xn({opSnippet:wGe}),CGe={kernelName:Eh,backendName:"webgl",kernelFunc:$Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kGe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,SGe=xn({opSnippet:kGe}),xGe={kernelName:Ah,backendName:"webgl",kernelFunc:SGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IGe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,paddings:a}=s;j(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const i=r.reduce((v,b)=>v*b),l=[[0,0]];l.push(...a);for(let v=1+r.length;v<o.shape.length;++v)l.push([0,0]);const u=[],c=mB({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=Hh(c.shape,r,i,!1),f=Uh(d.length,r.length,!1),h=Gh(c.shape,r,i,!1),p=yt({inputs:{x:c},backend:n,attrs:{shape:d}}),m=fo({inputs:{x:p},backend:n,attrs:{perm:f}}),g=yt({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(m),u.forEach(v=>n.disposeIntermediateTensorInfo(v)),g},EGe={kernelName:Hv,backendName:"webgl",kernelFunc:IGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TGe(e){const{inputs:t,backend:n}=e,{indices:s,values:o,denseShape:r,defaultValue:a}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const i=n.readSync(s.dataId),l=n.readSync(o.dataId),u=n.readSync(r.dataId),c=n.readSync(a.dataId)[0],[d,f,h,p,m]=Aze(i,s.shape,s.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,s.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const NGe={kernelName:cC,backendName:"webgl",kernelFunc:TGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AGe(e){const{inputs:t,backend:n}=e,{inputIndices:s,inputShape:o,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const a=Array.from(n.readSync(o.dataId)),i=n.readSync(s.dataId),l=Array.from(n.readSync(r.dataId)),[u,c,d]=Dze(i,s.shape,s.dtype,a,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const DGe={kernelName:dC,backendName:"webgl",kernelFunc:AGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RGe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${r.shape}`);const a=n.readSync(s.dataId),i=n.readSync(o.dataId),l=n.readSync(r.dataId),[u,c]=VL(a,s.shape,s.dtype,i,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const _Ge={kernelName:fC,backendName:"webgl",kernelFunc:RGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OGe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${r.shape}`);const a=n.readSync(s.dataId),i=n.readSync(o.dataId),l=n.readSync(r.dataId),[u,c]=VL(a,s.shape,s.dtype,i,l);return n.makeTensorInfo(c,s.dtype,u)}const MGe={kernelName:hC,backendName:"webgl",kernelFunc:OGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FGe(e){const{inputs:t,backend:n,attrs:s}=e,{sparseIndices:o,sparseValues:r,defaultValue:a}=t,{outputShape:i}=s,{sliceRank:l,numUpdates:u,strides:c,outputSize:d}=Lh(r,o,i),f=!1,h=new vB(u,l,o.shape.length,r.shape.length,c,[d,1],f),p=n.runWebGLProgram(h,[r,o,a],r.dtype),m=yt({inputs:{x:p},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(p),m}const PGe={kernelName:fO,backendName:"webgl",kernelFunc:FGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LGe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{numOrSizeSplits:r,axis:a}=s,i=an(a,o.shape)[0],l=R2(o,r,i),u=o.shape.length,c=new Array(u).fill(0),d=o.shape.slice();return l.map(f=>{const h=[...d];h[i]=f;const p=od({inputs:{x:o},backend:n,attrs:{begin:c,size:h}});return c[i]+=f,p})}const BGe={kernelName:Uv,backendName:"webgl",kernelFunc:LGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TN="return sqrt(x);",zGe=xn({opSnippet:TN,packedOpSnippet:TN,cpuKernelImpl:Rze}),VGe={kernelName:Dh,backendName:"webgl",kernelFunc:zGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WGe="return x * x;",HGe=xn({opSnippet:WGe}),UGe={kernelName:pC,backendName:"webgl",kernelFunc:HGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NN="return (a - b) * (a - b);",GGe=qs({opSnippet:NN,packedOpSnippet:NN}),KGe={kernelName:Rh,backendName:"webgl",kernelFunc:GGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jGe({inputs:e,attrs:t,backend:n}){const{x:s}=e,o=_r+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,r=new Pa(s.shape,o);return n.runWebGLProgram(r,[s],s.dtype)}const qGe={kernelName:Ph,backendName:"webgl",kernelFunc:jGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XGe{constructor(t,n,s){this.variableNames=["x"],this.outputShape=s;const o=s.length,r=Wn(s.length),a=Wn(s.length);let i="";if(o===1)i="coords * strides + begin";else{let l=0;i=s.map((u,c)=>(l++,s.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${r} begin = ${r}(${t});
      ${r} strides = ${r}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YGe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,end:a,strides:i,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=s,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:$,strides:y}=RC(o.shape,r,a,i,l,u,c,d,f);let w;if(m)w=yt({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||v){j(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const k=NC(b,$,y),S=od({inputs:{x:o},backend:n,attrs:{begin:b,size:k}});w=yt({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([o])){const S=n.readSync(o.dataId),E=hn(o.shape,o.dtype,S),x=_ze(h,E,y,b);w=n.makeTensorInfo(p,o.dtype,x.values)}else{const S=new XGe(b,y,h);w=n.runWebGLProgram(S,[o],o.dtype)}const C=yt({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),C}const ZGe={kernelName:mC,backendName:"webgl",kernelFunc:YGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JGe(e){const{inputs:t,backend:n,attrs:s}=e,{separator:o,nGramWidths:r,leftPad:a,rightPad:i,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=t,f=n.readSync(c.dataId),h=n.readSync(d.dataId),[p,m]=Oze(f,h,o,r,a,i,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const QGe={kernelName:gC,backendName:"webgl",kernelFunc:JGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eKe(e){const{inputs:t,backend:n,attrs:s}=e,{skipEmpty:o}=s,{input:r,delimiter:a}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const i=n.readSync(r.dataId),l=n.readSync(a.dataId)[0],[u,c,d]=Mze(i,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const tKe={kernelName:vC,backendName:"webgl",kernelFunc:eKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nKe(e){const{inputs:t,backend:n,attrs:s}=e,{numBuckets:o}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(r.dataId),i=Fze(a,o);return n.makeTensorInfo(r.shape,"int32",i)}const sKe={kernelName:bC,backendName:"webgl",kernelFunc:nKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oKe="return tan(x);",rKe=xn({opSnippet:oKe}),aKe={kernelName:Oh,backendName:"webgl",kernelFunc:rKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iKe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,lKe=xn({opSnippet:iKe}),uKe={kernelName:Mh,backendName:"webgl",kernelFunc:lKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cKe{constructor(t,n){this.variableNames=["A"];const s=new Array(t.length);for(let a=0;a<s.length;a++)s[a]=t[a]*n[a];this.outputShape=s,this.rank=s.length;const o=Wn(this.rank),r=dKe(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${r}));
      }
    `}}function dKe(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${n[o]}, ${e[o]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bB(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reps:r}=s;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),u=o.dtype==="string"?l.map(f=>wc(f)):l,c=hn(o.shape,o.dtype,u),d=Lze(c,r);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const a=new cKe(o.shape,r);return n.runWebGLProgram(a,[o],o.dtype)}const fKe={kernelName:Fh,backendName:"webgl",kernelFunc:bB};class hKe{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class pKe{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function il(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function AN(e){let t=1;for(;t<e;)t*=2;return t}function mKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{k:r,sorted:a}=s,i=Ge().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Ge().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([o])||c<i||r>l){const x=n.readSync(o.dataId),[N,A]=Bze(x,u,o.dtype,r,a);return[n.makeTensorInfo(N.shape,N.dtype,N.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(r===0)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[o,ip({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(o):o,m=Ue(u)/c,g=yt({inputs:{x:h},attrs:{shape:[m,c]},backend:n});f&&il(n,h);const v=AN(r),b=AN(c);let $=null;const y=()=>$===null?[g,g]:[g,$],w=(x,N,A)=>{const D=y(),M=new hKe(A),R=[[c],[$===null?1:0],[Number.NEGATIVE_INFINITY],[x],[N]],P=$;$=n.runWebGLProgram(M,D,"int32",R),il(n,P)};for(let x=1;x<v;x*=2){const N=x*2;for(let A=x;A>=1;A/=2)w(N,A,[m,b])}for(let x=b;x>v;x/=2){const N=y(),A=new pKe([m,x/2]),M=[[c],[$===null?1:0],[v]],F=$;$=n.runWebGLProgram(A,N,"int32",M),il(n,F);const R=v/2,P=R*2;for(let V=R;V>=1;V/=2)w(P,V,$.shape)}let C=$;$=od({inputs:{x:$},backend:n,attrs:{begin:0,size:[m,r]}}),il(n,C);let k=uB({inputs:{x:g,indices:$},backend:n,attrs:{axis:1,batchDims:1}});il(n,g);const S=u.slice(0,-1);S.push(r),C=$,$=yt({inputs:{x:$},attrs:{shape:S},backend:n}),il(n,C);const E=k;return k=yt({inputs:{x:k},attrs:{shape:S},backend:n}),il(n,E),[k,$]}const gKe={kernelName:yC,backendName:"webgl",kernelFunc:mKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vKe{constructor(t,n,s,o,r,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const i=s==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${r});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${r});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${i} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bKe(e){const{inputs:t,backend:n,attrs:s}=e,{image:o,transforms:r}=t,{interpolation:a,fillMode:i,fillValue:l,outputShape:u}=s,[c,d,f,h]=o.shape,[p,m]=u!=null?u:[d,f],g=[c,p,m,h],v=new vKe(d,f,a,i,l,g);return n.runWebGLProgram(v,[o,r],"float32")}const yKe={kernelName:wC,backendName:"webgl",kernelFunc:bKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wKe(e){const{inputs:t,attrs:n,backend:s}=e,{axis:o}=n,{x:r}=t;sp(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=s.readSync(r.dataId),{outputValues:i,outputShape:l,indices:u}=zze(a,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,i),s.makeTensorInfo([u.length],"int32",u)]}const $Ke={kernelName:$C,backendName:"webgl",kernelFunc:wKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CKe(e){const{inputs:t,backend:n,attrs:s}=e,{value:o}=t;let{axis:r}=s;r<0&&(r+=o.shape.length);const a=o,i=a.shape.length,l=o.shape[r],u=new Array(i-1);let c=0;for(let m=0;m<i;m++)m!==r&&(u[c++]=a.shape[m]);const d=[],f=new Array(i).fill(0),h=a.shape.slice();h[r]=1;const p=new Array(l);for(let m=0;m<p.length;m++){f[r]=m;const g=od({inputs:{x:a},backend:n,attrs:{begin:f,size:h}}),v=yt({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=v,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const kKe={kernelName:jv,backendName:"webgl",kernelFunc:CKe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SKe{constructor(t,n){this.variableNames=["x","segmentIds"];const s=t.windowSize,o=t.batchSize,r=t.inSize,a=t.numSegments,i=a*Math.ceil(r/s);this.outputShape=[o,i];const l="0.0",u="sumValue",c=Math.floor(s/4)*4,d=s%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";r%s>0&&(h=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `);let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,segmentIds:r}=t,{numSegments:a}=s,i=o.shape.length,l=[];let u=0;const c=ps([u],i);let d=o;c!=null&&(d=fo({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(d),u=ys(1,i)[0]);const f=sF(d.shape,u,a),h=Ue([d.shape[u]]),p=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const m=SC(o.dtype),g=(y,w,C,k,S)=>{const E=y.shape[0],x=y.shape[1],N=nF(x,S),A={windowSize:N,inSize:x,batchSize:E,numSegments:S},D=new SKe(A,w),M=n.compileAndRun(D,[y,C],k);if(l.push(M),M.shape[1]===S)return M;const F=gB({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),R=bB({inputs:{x:F},backend:n,attrs:{reps:[x/N]}});return l.push(F),l.push(R),g(M,w,R,k,S)},v=g(p,"unsortedSegmentSum",r,m,a),b=yt({inputs:{x:v},backend:n,attrs:{shape:f}});let $=b;if(c!=null){l.push(b);const y=jc(c);$=fo({inputs:{x:$},backend:n,attrs:{perm:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),$}const IKe={kernelName:qv,backendName:"webgl",kernelFunc:xKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EKe=[_Ve,MVe,LVe,VVe,HVe,KVe,qVe,YVe,e6e,n6e,r6e,l6e,d6e,m6e,b6e,w6e,C6e,I6e,T6e,A6e,O6e,V6e,H6e,G6e,Z6e,Q6e,s5e,pVe,a5e,d5e,m5e,$5e,k5e,x5e,E5e,N5e,R5e,M5e,L5e,z5e,W5e,G5e,j5e,Z5e,Q5e,n8e,r8e,i8e,d8e,m8e,y8e,C8e,x8e,I8e,T8e,A8e,R8e,O8e,F8e,z8e,H8e,K8e,q8e,Z8e,eWe,oWe,lWe,hVe,cWe,u5e,hWe,gWe,yWe,gVe,kWe,EWe,NWe,_We,FWe,zWe,HWe,jWe,ZWe,eHe,nHe,aHe,lHe,cHe,pHe,gHe,bHe,wHe,CHe,IHe,AHe,OHe,WHe,$Ve,KHe,XHe,JHe,tUe,j6e,oUe,aUe,lUe,dUe,mUe,bVe,vUe,bUe,q6e,LHe,$Ue,xUe,NUe,kVe,_Ue,FUe,zUe,HUe,jUe,XUe,JUe,tGe,sGe,aGe,uGe,hGe,gGe,yGe,CGe,B6e,zHe,xGe,EGe,NGe,DGe,_Ge,MGe,PGe,BGe,VGe,UGe,KGe,qGe,ZGe,QGe,tKe,sKe,BHe,AVe,aKe,uKe,fKe,gKe,yKe,DVe,$Ke,kKe,IKe,rUe];for(const e of EKe)pO(e);/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var yB={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,t){(function(n,s){e.exports=s()})(An,function(){for(var n=function(I,O,z){return O===void 0&&(O=0),z===void 0&&(z=1),I<O?O:I>z?z:I},s=n,o=function(I){I._clipped=!1,I._unclipped=I.slice(0);for(var O=0;O<=3;O++)O<3?((I[O]<0||I[O]>255)&&(I._clipped=!0),I[O]=s(I[O],0,255)):O===3&&(I[O]=s(I[O],0,1));return I},r={},a=0,i=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];a<i.length;a+=1){var l=i[a];r["[object "+l+"]"]=l.toLowerCase()}var u=function(I){return r[Object.prototype.toString.call(I)]||"object"},c=u,d=function(I,O){return O===void 0&&(O=null),I.length>=3?Array.prototype.slice.call(I):c(I[0])=="object"&&O?O.split("").filter(function(z){return I[0][z]!==void 0}).map(function(z){return I[0][z]}):I[0]},f=u,h=function(I){if(I.length<2)return null;var O=I.length-1;return f(I[O])=="string"?I[O].toLowerCase():null},p=Math.PI,m={clip_rgb:o,limit:n,type:u,unpack:d,last:h,PI:p,TWOPI:p*2,PITHIRD:p/3,DEG2RAD:p/180,RAD2DEG:180/p},g={format:{},autodetect:[]},v=m.last,b=m.clip_rgb,$=m.type,y=g,w=function(){for(var O=[],z=arguments.length;z--;)O[z]=arguments[z];var ee=this;if($(O[0])==="object"&&O[0].constructor&&O[0].constructor===this.constructor)return O[0];var he=v(O),we=!1;if(!he){we=!0,y.sorted||(y.autodetect=y.autodetect.sort(function(tt,bt){return bt.p-tt.p}),y.sorted=!0);for(var ue=0,Te=y.autodetect;ue<Te.length;ue+=1){var De=Te[ue];if(he=De.test.apply(De,O),he)break}}if(y.format[he]){var qe=y.format[he].apply(null,we?O:O.slice(0,-1));ee._rgb=b(qe)}else throw new Error("unknown format: "+O);ee._rgb.length===3&&ee._rgb.push(1)};w.prototype.toString=function(){return $(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var C=w,k=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(k.Color,[null].concat(I)))};k.Color=C,k.version="2.4.2";var S=k,E=m.unpack,x=Math.max,N=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=E(I,"rgb"),ee=z[0],he=z[1],we=z[2];ee=ee/255,he=he/255,we=we/255;var ue=1-x(ee,x(he,we)),Te=ue<1?1/(1-ue):0,De=(1-ee-ue)*Te,qe=(1-he-ue)*Te,tt=(1-we-ue)*Te;return[De,qe,tt,ue]},A=N,D=m.unpack,M=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];I=D(I,"cmyk");var z=I[0],ee=I[1],he=I[2],we=I[3],ue=I.length>4?I[4]:1;return we===1?[0,0,0,ue]:[z>=1?0:255*(1-z)*(1-we),ee>=1?0:255*(1-ee)*(1-we),he>=1?0:255*(1-he)*(1-we),ue]},F=M,R=S,P=C,V=g,G=m.unpack,se=m.type,ke=A;P.prototype.cmyk=function(){return ke(this._rgb)},R.cmyk=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(P,[null].concat(I,["cmyk"])))},V.format.cmyk=F,V.autodetect.push({p:2,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=G(I,"cmyk"),se(I)==="array"&&I.length===4)return"cmyk"}});var te=m.unpack,pe=m.last,ae=function(I){return Math.round(I*100)/100},K=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=te(I,"hsla"),ee=pe(I)||"lsa";return z[0]=ae(z[0]||0),z[1]=ae(z[1]*100)+"%",z[2]=ae(z[2]*100)+"%",ee==="hsla"||z.length>3&&z[3]<1?(z[3]=z.length>3?z[3]:1,ee="hsla"):z.length=3,ee+"("+z.join(",")+")"},X=K,Y=m.unpack,ie=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];I=Y(I,"rgba");var z=I[0],ee=I[1],he=I[2];z/=255,ee/=255,he/=255;var we=Math.min(z,ee,he),ue=Math.max(z,ee,he),Te=(ue+we)/2,De,qe;return ue===we?(De=0,qe=Number.NaN):De=Te<.5?(ue-we)/(ue+we):(ue-we)/(2-ue-we),z==ue?qe=(ee-he)/(ue-we):ee==ue?qe=2+(he-z)/(ue-we):he==ue&&(qe=4+(z-ee)/(ue-we)),qe*=60,qe<0&&(qe+=360),I.length>3&&I[3]!==void 0?[qe,De,Te,I[3]]:[qe,De,Te]},xe=ie,Le=m.unpack,Be=m.last,Pe=X,U=xe,Q=Math.round,H=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=Le(I,"rgba"),ee=Be(I)||"rgb";return ee.substr(0,3)=="hsl"?Pe(U(z),ee):(z[0]=Q(z[0]),z[1]=Q(z[1]),z[2]=Q(z[2]),(ee==="rgba"||z.length>3&&z[3]<1)&&(z[3]=z.length>3?z[3]:1,ee="rgba"),ee+"("+z.slice(0,ee==="rgb"?3:4).join(",")+")")},ne=H,ye=m.unpack,J=Math.round,Ne=function(){for(var I,O=[],z=arguments.length;z--;)O[z]=arguments[z];O=ye(O,"hsl");var ee=O[0],he=O[1],we=O[2],ue,Te,De;if(he===0)ue=Te=De=we*255;else{var qe=[0,0,0],tt=[0,0,0],bt=we<.5?we*(1+he):we+he-we*he,ot=2*we-bt,St=ee/360;qe[0]=St+1/3,qe[1]=St,qe[2]=St-1/3;for(var kt=0;kt<3;kt++)qe[kt]<0&&(qe[kt]+=1),qe[kt]>1&&(qe[kt]-=1),6*qe[kt]<1?tt[kt]=ot+(bt-ot)*6*qe[kt]:2*qe[kt]<1?tt[kt]=bt:3*qe[kt]<2?tt[kt]=ot+(bt-ot)*(2/3-qe[kt])*6:tt[kt]=ot;I=[J(tt[0]*255),J(tt[1]*255),J(tt[2]*255)],ue=I[0],Te=I[1],De=I[2]}return O.length>3?[ue,Te,De,O[3]]:[ue,Te,De,1]},Ie=Ne,fe=Ie,Ee=g,rt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Ye=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,lt=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,vt=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Xe=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,de=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Re=Math.round,Ke=function(I){I=I.toLowerCase().trim();var O;if(Ee.format.named)try{return Ee.format.named(I)}catch{}if(O=I.match(rt)){for(var z=O.slice(1,4),ee=0;ee<3;ee++)z[ee]=+z[ee];return z[3]=1,z}if(O=I.match(Ye)){for(var he=O.slice(1,5),we=0;we<4;we++)he[we]=+he[we];return he}if(O=I.match(lt)){for(var ue=O.slice(1,4),Te=0;Te<3;Te++)ue[Te]=Re(ue[Te]*2.55);return ue[3]=1,ue}if(O=I.match(vt)){for(var De=O.slice(1,5),qe=0;qe<3;qe++)De[qe]=Re(De[qe]*2.55);return De[3]=+De[3],De}if(O=I.match(Xe)){var tt=O.slice(1,4);tt[1]*=.01,tt[2]*=.01;var bt=fe(tt);return bt[3]=1,bt}if(O=I.match(de)){var ot=O.slice(1,4);ot[1]*=.01,ot[2]*=.01;var St=fe(ot);return St[3]=+O[4],St}};Ke.test=function(I){return rt.test(I)||Ye.test(I)||lt.test(I)||vt.test(I)||Xe.test(I)||de.test(I)};var Ae=Ke,ct=S,wt=C,sn=g,ln=m.type,Kt=ne,_n=Ae;wt.prototype.css=function(I){return Kt(this._rgb,I)},ct.css=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(wt,[null].concat(I,["css"])))},sn.format.css=_n,sn.autodetect.push({p:5,test:function(I){for(var O=[],z=arguments.length-1;z-- >0;)O[z]=arguments[z+1];if(!O.length&&ln(I)==="string"&&_n.test(I))return"css"}});var Vo=C,Or=S,ze=g,pt=m.unpack;ze.format.gl=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=pt(I,"rgba");return z[0]*=255,z[1]*=255,z[2]*=255,z},Or.gl=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(Vo,[null].concat(I,["gl"])))},Vo.prototype.gl=function(){var I=this._rgb;return[I[0]/255,I[1]/255,I[2]/255,I[3]]};var Zt=m.unpack,Qn=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=Zt(I,"rgb"),ee=z[0],he=z[1],we=z[2],ue=Math.min(ee,he,we),Te=Math.max(ee,he,we),De=Te-ue,qe=De*100/255,tt=ue/(255-De)*100,bt;return De===0?bt=Number.NaN:(ee===Te&&(bt=(he-we)/De),he===Te&&(bt=2+(we-ee)/De),we===Te&&(bt=4+(ee-he)/De),bt*=60,bt<0&&(bt+=360)),[bt,qe,tt]},Ta=Qn,rr=m.unpack,mu=Math.floor,DB=function(){for(var I,O,z,ee,he,we,ue=[],Te=arguments.length;Te--;)ue[Te]=arguments[Te];ue=rr(ue,"hcg");var De=ue[0],qe=ue[1],tt=ue[2],bt,ot,St;tt=tt*255;var kt=qe*255;if(qe===0)bt=ot=St=tt;else{De===360&&(De=0),De>360&&(De-=360),De<0&&(De+=360),De/=60;var un=mu(De),mn=De-un,In=tt*(1-qe),Rn=In+kt*(1-mn),Xs=In+kt*mn,zs=In+kt;switch(un){case 0:I=[zs,Xs,In],bt=I[0],ot=I[1],St=I[2];break;case 1:O=[Rn,zs,In],bt=O[0],ot=O[1],St=O[2];break;case 2:z=[In,zs,Xs],bt=z[0],ot=z[1],St=z[2];break;case 3:ee=[In,Rn,zs],bt=ee[0],ot=ee[1],St=ee[2];break;case 4:he=[Xs,In,zs],bt=he[0],ot=he[1],St=he[2];break;case 5:we=[zs,In,Rn],bt=we[0],ot=we[1],St=we[2];break}}return[bt,ot,St,ue.length>3?ue[3]:1]},RB=DB,_B=m.unpack,OB=m.type,MB=S,Ck=C,kk=g,FB=Ta;Ck.prototype.hcg=function(){return FB(this._rgb)},MB.hcg=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(Ck,[null].concat(I,["hcg"])))},kk.format.hcg=RB,kk.autodetect.push({p:1,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=_B(I,"hcg"),OB(I)==="array"&&I.length===3)return"hcg"}});var PB=m.unpack,LB=m.last,lp=Math.round,BB=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=PB(I,"rgba"),ee=z[0],he=z[1],we=z[2],ue=z[3],Te=LB(I)||"auto";ue===void 0&&(ue=1),Te==="auto"&&(Te=ue<1?"rgba":"rgb"),ee=lp(ee),he=lp(he),we=lp(we);var De=ee<<16|he<<8|we,qe="000000"+De.toString(16);qe=qe.substr(qe.length-6);var tt="0"+lp(ue*255).toString(16);switch(tt=tt.substr(tt.length-2),Te.toLowerCase()){case"rgba":return"#"+qe+tt;case"argb":return"#"+tt+qe;default:return"#"+qe}},Sk=BB,zB=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,VB=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,WB=function(I){if(I.match(zB)){(I.length===4||I.length===7)&&(I=I.substr(1)),I.length===3&&(I=I.split(""),I=I[0]+I[0]+I[1]+I[1]+I[2]+I[2]);var O=parseInt(I,16),z=O>>16,ee=O>>8&255,he=O&255;return[z,ee,he,1]}if(I.match(VB)){(I.length===5||I.length===9)&&(I=I.substr(1)),I.length===4&&(I=I.split(""),I=I[0]+I[0]+I[1]+I[1]+I[2]+I[2]+I[3]+I[3]);var we=parseInt(I,16),ue=we>>24&255,Te=we>>16&255,De=we>>8&255,qe=Math.round((we&255)/255*100)/100;return[ue,Te,De,qe]}throw new Error("unknown hex color: "+I)},xk=WB,HB=S,Ik=C,UB=m.type,Ek=g,GB=Sk;Ik.prototype.hex=function(I){return GB(this._rgb,I)},HB.hex=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(Ik,[null].concat(I,["hex"])))},Ek.format.hex=xk,Ek.autodetect.push({p:4,test:function(I){for(var O=[],z=arguments.length-1;z-- >0;)O[z]=arguments[z+1];if(!O.length&&UB(I)==="string"&&[3,4,5,6,7,8,9].indexOf(I.length)>=0)return"hex"}});var KB=m.unpack,Tk=m.TWOPI,jB=Math.min,qB=Math.sqrt,XB=Math.acos,YB=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=KB(I,"rgb"),ee=z[0],he=z[1],we=z[2];ee/=255,he/=255,we/=255;var ue,Te=jB(ee,he,we),De=(ee+he+we)/3,qe=De>0?1-Te/De:0;return qe===0?ue=NaN:(ue=(ee-he+(ee-we))/2,ue/=qB((ee-he)*(ee-he)+(ee-we)*(he-we)),ue=XB(ue),we>he&&(ue=Tk-ue),ue/=Tk),[ue*360,qe,De]},ZB=YB,JB=m.unpack,R0=m.limit,gu=m.TWOPI,_0=m.PITHIRD,vu=Math.cos,QB=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];I=JB(I,"hsi");var z=I[0],ee=I[1],he=I[2],we,ue,Te;return isNaN(z)&&(z=0),isNaN(ee)&&(ee=0),z>360&&(z-=360),z<0&&(z+=360),z/=360,z<1/3?(Te=(1-ee)/3,we=(1+ee*vu(gu*z)/vu(_0-gu*z))/3,ue=1-(Te+we)):z<2/3?(z-=1/3,we=(1-ee)/3,ue=(1+ee*vu(gu*z)/vu(_0-gu*z))/3,Te=1-(we+ue)):(z-=2/3,ue=(1-ee)/3,Te=(1+ee*vu(gu*z)/vu(_0-gu*z))/3,we=1-(ue+Te)),we=R0(he*we*3),ue=R0(he*ue*3),Te=R0(he*Te*3),[we*255,ue*255,Te*255,I.length>3?I[3]:1]},ez=QB,tz=m.unpack,nz=m.type,sz=S,Nk=C,Ak=g,oz=ZB;Nk.prototype.hsi=function(){return oz(this._rgb)},sz.hsi=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(Nk,[null].concat(I,["hsi"])))},Ak.format.hsi=ez,Ak.autodetect.push({p:2,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=tz(I,"hsi"),nz(I)==="array"&&I.length===3)return"hsi"}});var rz=m.unpack,az=m.type,iz=S,Dk=C,Rk=g,lz=xe;Dk.prototype.hsl=function(){return lz(this._rgb)},iz.hsl=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(Dk,[null].concat(I,["hsl"])))},Rk.format.hsl=Ie,Rk.autodetect.push({p:2,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=rz(I,"hsl"),az(I)==="array"&&I.length===3)return"hsl"}});var uz=m.unpack,cz=Math.min,dz=Math.max,fz=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];I=uz(I,"rgb");var z=I[0],ee=I[1],he=I[2],we=cz(z,ee,he),ue=dz(z,ee,he),Te=ue-we,De,qe,tt;return tt=ue/255,ue===0?(De=Number.NaN,qe=0):(qe=Te/ue,z===ue&&(De=(ee-he)/Te),ee===ue&&(De=2+(he-z)/Te),he===ue&&(De=4+(z-ee)/Te),De*=60,De<0&&(De+=360)),[De,qe,tt]},hz=fz,pz=m.unpack,mz=Math.floor,gz=function(){for(var I,O,z,ee,he,we,ue=[],Te=arguments.length;Te--;)ue[Te]=arguments[Te];ue=pz(ue,"hsv");var De=ue[0],qe=ue[1],tt=ue[2],bt,ot,St;if(tt*=255,qe===0)bt=ot=St=tt;else{De===360&&(De=0),De>360&&(De-=360),De<0&&(De+=360),De/=60;var kt=mz(De),un=De-kt,mn=tt*(1-qe),In=tt*(1-qe*un),Rn=tt*(1-qe*(1-un));switch(kt){case 0:I=[tt,Rn,mn],bt=I[0],ot=I[1],St=I[2];break;case 1:O=[In,tt,mn],bt=O[0],ot=O[1],St=O[2];break;case 2:z=[mn,tt,Rn],bt=z[0],ot=z[1],St=z[2];break;case 3:ee=[mn,In,tt],bt=ee[0],ot=ee[1],St=ee[2];break;case 4:he=[Rn,mn,tt],bt=he[0],ot=he[1],St=he[2];break;case 5:we=[tt,mn,In],bt=we[0],ot=we[1],St=we[2];break}}return[bt,ot,St,ue.length>3?ue[3]:1]},vz=gz,bz=m.unpack,yz=m.type,wz=S,_k=C,Ok=g,$z=hz;_k.prototype.hsv=function(){return $z(this._rgb)},wz.hsv=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(_k,[null].concat(I,["hsv"])))},Ok.format.hsv=vz,Ok.autodetect.push({p:2,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=bz(I,"hsv"),yz(I)==="array"&&I.length===3)return"hsv"}});var up={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},bu=up,Cz=m.unpack,Mk=Math.pow,kz=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=Cz(I,"rgb"),ee=z[0],he=z[1],we=z[2],ue=Sz(ee,he,we),Te=ue[0],De=ue[1],qe=ue[2],tt=116*De-16;return[tt<0?0:tt,500*(Te-De),200*(De-qe)]},O0=function(I){return(I/=255)<=.04045?I/12.92:Mk((I+.055)/1.055,2.4)},M0=function(I){return I>bu.t3?Mk(I,1/3):I/bu.t2+bu.t0},Sz=function(I,O,z){I=O0(I),O=O0(O),z=O0(z);var ee=M0((.4124564*I+.3575761*O+.1804375*z)/bu.Xn),he=M0((.2126729*I+.7151522*O+.072175*z)/bu.Yn),we=M0((.0193339*I+.119192*O+.9503041*z)/bu.Zn);return[ee,he,we]},Fk=kz,yu=up,xz=m.unpack,Iz=Math.pow,Ez=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];I=xz(I,"lab");var z=I[0],ee=I[1],he=I[2],we,ue,Te,De,qe,tt;return ue=(z+16)/116,we=isNaN(ee)?ue:ue+ee/500,Te=isNaN(he)?ue:ue-he/200,ue=yu.Yn*P0(ue),we=yu.Xn*P0(we),Te=yu.Zn*P0(Te),De=F0(3.2404542*we-1.5371385*ue-.4985314*Te),qe=F0(-.969266*we+1.8760108*ue+.041556*Te),tt=F0(.0556434*we-.2040259*ue+1.0572252*Te),[De,qe,tt,I.length>3?I[3]:1]},F0=function(I){return 255*(I<=.00304?12.92*I:1.055*Iz(I,1/2.4)-.055)},P0=function(I){return I>yu.t1?I*I*I:yu.t2*(I-yu.t0)},Pk=Ez,Tz=m.unpack,Nz=m.type,Az=S,Lk=C,Bk=g,Dz=Fk;Lk.prototype.lab=function(){return Dz(this._rgb)},Az.lab=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(Lk,[null].concat(I,["lab"])))},Bk.format.lab=Pk,Bk.autodetect.push({p:2,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=Tz(I,"lab"),Nz(I)==="array"&&I.length===3)return"lab"}});var Rz=m.unpack,_z=m.RAD2DEG,Oz=Math.sqrt,Mz=Math.atan2,Fz=Math.round,Pz=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=Rz(I,"lab"),ee=z[0],he=z[1],we=z[2],ue=Oz(he*he+we*we),Te=(Mz(we,he)*_z+360)%360;return Fz(ue*1e4)===0&&(Te=Number.NaN),[ee,ue,Te]},zk=Pz,Lz=m.unpack,Bz=Fk,zz=zk,Vz=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=Lz(I,"rgb"),ee=z[0],he=z[1],we=z[2],ue=Bz(ee,he,we),Te=ue[0],De=ue[1],qe=ue[2];return zz(Te,De,qe)},Wz=Vz,Hz=m.unpack,Uz=m.DEG2RAD,Gz=Math.sin,Kz=Math.cos,jz=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=Hz(I,"lch"),ee=z[0],he=z[1],we=z[2];return isNaN(we)&&(we=0),we=we*Uz,[ee,Kz(we)*he,Gz(we)*he]},Vk=jz,qz=m.unpack,Xz=Vk,Yz=Pk,Zz=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];I=qz(I,"lch");var z=I[0],ee=I[1],he=I[2],we=Xz(z,ee,he),ue=we[0],Te=we[1],De=we[2],qe=Yz(ue,Te,De),tt=qe[0],bt=qe[1],ot=qe[2];return[tt,bt,ot,I.length>3?I[3]:1]},Wk=Zz,Jz=m.unpack,Qz=Wk,eV=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=Jz(I,"hcl").reverse();return Qz.apply(void 0,z)},tV=eV,nV=m.unpack,sV=m.type,Hk=S,cp=C,L0=g,Uk=Wz;cp.prototype.lch=function(){return Uk(this._rgb)},cp.prototype.hcl=function(){return Uk(this._rgb).reverse()},Hk.lch=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(cp,[null].concat(I,["lch"])))},Hk.hcl=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(cp,[null].concat(I,["hcl"])))},L0.format.lch=Wk,L0.format.hcl=tV,["lch","hcl"].forEach(function(I){return L0.autodetect.push({p:2,test:function(){for(var O=[],z=arguments.length;z--;)O[z]=arguments[z];if(O=nV(O,I),sV(O)==="array"&&O.length===3)return I}})});var oV={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Gk=oV,rV=C,Kk=g,aV=m.type,ad=Gk,iV=xk,lV=Sk;rV.prototype.name=function(){for(var I=lV(this._rgb,"rgb"),O=0,z=Object.keys(ad);O<z.length;O+=1){var ee=z[O];if(ad[ee]===I)return ee.toLowerCase()}return I},Kk.format.named=function(I){if(I=I.toLowerCase(),ad[I])return iV(ad[I]);throw new Error("unknown color name: "+I)},Kk.autodetect.push({p:5,test:function(I){for(var O=[],z=arguments.length-1;z-- >0;)O[z]=arguments[z+1];if(!O.length&&aV(I)==="string"&&ad[I.toLowerCase()])return"named"}});var uV=m.unpack,cV=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=uV(I,"rgb"),ee=z[0],he=z[1],we=z[2];return(ee<<16)+(he<<8)+we},dV=cV,fV=m.type,hV=function(I){if(fV(I)=="number"&&I>=0&&I<=16777215){var O=I>>16,z=I>>8&255,ee=I&255;return[O,z,ee,1]}throw new Error("unknown num color: "+I)},pV=hV,mV=S,jk=C,qk=g,gV=m.type,vV=dV;jk.prototype.num=function(){return vV(this._rgb)},mV.num=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(jk,[null].concat(I,["num"])))},qk.format.num=pV,qk.autodetect.push({p:5,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I.length===1&&gV(I[0])==="number"&&I[0]>=0&&I[0]<=16777215)return"num"}});var bV=S,B0=C,Xk=g,Yk=m.unpack,Zk=m.type,Jk=Math.round;B0.prototype.rgb=function(I){return I===void 0&&(I=!0),I===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Jk)},B0.prototype.rgba=function(I){return I===void 0&&(I=!0),this._rgb.slice(0,4).map(function(O,z){return z<3?I===!1?O:Jk(O):O})},bV.rgb=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(B0,[null].concat(I,["rgb"])))},Xk.format.rgb=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=Yk(I,"rgba");return z[3]===void 0&&(z[3]=1),z},Xk.autodetect.push({p:3,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=Yk(I,"rgba"),Zk(I)==="array"&&(I.length===3||I.length===4&&Zk(I[3])=="number"&&I[3]>=0&&I[3]<=1))return"rgb"}});var dp=Math.log,yV=function(I){var O=I/100,z,ee,he;return O<66?(z=255,ee=O<6?0:-155.25485562709179-.44596950469579133*(ee=O-2)+104.49216199393888*dp(ee),he=O<20?0:-254.76935184120902+.8274096064007395*(he=O-10)+115.67994401066147*dp(he)):(z=351.97690566805693+.114206453784165*(z=O-55)-40.25366309332127*dp(z),ee=325.4494125711974+.07943456536662342*(ee=O-50)-28.0852963507957*dp(ee),he=255),[z,ee,he,1]},Qk=yV,wV=Qk,$V=m.unpack,CV=Math.round,kV=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];for(var z=$V(I,"rgb"),ee=z[0],he=z[2],we=1e3,ue=4e4,Te=.4,De;ue-we>Te;){De=(ue+we)*.5;var qe=wV(De);qe[2]/qe[0]>=he/ee?ue=De:we=De}return CV(De)},SV=kV,z0=S,fp=C,V0=g,xV=SV;fp.prototype.temp=fp.prototype.kelvin=fp.prototype.temperature=function(){return xV(this._rgb)},z0.temp=z0.kelvin=z0.temperature=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(fp,[null].concat(I,["temp"])))},V0.format.temp=V0.format.kelvin=V0.format.temperature=Qk;var IV=m.unpack,W0=Math.cbrt,EV=Math.pow,TV=Math.sign,NV=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=IV(I,"rgb"),ee=z[0],he=z[1],we=z[2],ue=[H0(ee/255),H0(he/255),H0(we/255)],Te=ue[0],De=ue[1],qe=ue[2],tt=W0(.4122214708*Te+.5363325363*De+.0514459929*qe),bt=W0(.2119034982*Te+.6806995451*De+.1073969566*qe),ot=W0(.0883024619*Te+.2817188376*De+.6299787005*qe);return[.2104542553*tt+.793617785*bt-.0040720468*ot,1.9779984951*tt-2.428592205*bt+.4505937099*ot,.0259040371*tt+.7827717662*bt-.808675766*ot]},eS=NV;function H0(I){var O=Math.abs(I);return O<.04045?I/12.92:(TV(I)||1)*EV((O+.055)/1.055,2.4)}var AV=m.unpack,hp=Math.pow,DV=Math.sign,RV=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];I=AV(I,"lab");var z=I[0],ee=I[1],he=I[2],we=hp(z+.3963377774*ee+.2158037573*he,3),ue=hp(z-.1055613458*ee-.0638541728*he,3),Te=hp(z-.0894841775*ee-1.291485548*he,3);return[255*U0(4.0767416621*we-3.3077115913*ue+.2309699292*Te),255*U0(-1.2684380046*we+2.6097574011*ue-.3413193965*Te),255*U0(-.0041960863*we-.7034186147*ue+1.707614701*Te),I.length>3?I[3]:1]},tS=RV;function U0(I){var O=Math.abs(I);return O>.0031308?(DV(I)||1)*(1.055*hp(O,1/2.4)-.055):I*12.92}var _V=m.unpack,OV=m.type,MV=S,nS=C,sS=g,FV=eS;nS.prototype.oklab=function(){return FV(this._rgb)},MV.oklab=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(nS,[null].concat(I,["oklab"])))},sS.format.oklab=tS,sS.autodetect.push({p:3,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=_V(I,"oklab"),OV(I)==="array"&&I.length===3)return"oklab"}});var PV=m.unpack,LV=eS,BV=zk,zV=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];var z=PV(I,"rgb"),ee=z[0],he=z[1],we=z[2],ue=LV(ee,he,we),Te=ue[0],De=ue[1],qe=ue[2];return BV(Te,De,qe)},VV=zV,WV=m.unpack,HV=Vk,UV=tS,GV=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];I=WV(I,"lch");var z=I[0],ee=I[1],he=I[2],we=HV(z,ee,he),ue=we[0],Te=we[1],De=we[2],qe=UV(ue,Te,De),tt=qe[0],bt=qe[1],ot=qe[2];return[tt,bt,ot,I.length>3?I[3]:1]},KV=GV,jV=m.unpack,qV=m.type,XV=S,oS=C,rS=g,YV=VV;oS.prototype.oklch=function(){return YV(this._rgb)},XV.oklch=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];return new(Function.prototype.bind.apply(oS,[null].concat(I,["oklch"])))},rS.format.oklch=KV,rS.autodetect.push({p:3,test:function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];if(I=jV(I,"oklch"),qV(I)==="array"&&I.length===3)return"oklch"}});var aS=C,ZV=m.type;aS.prototype.alpha=function(I,O){return O===void 0&&(O=!1),I!==void 0&&ZV(I)==="number"?O?(this._rgb[3]=I,this):new aS([this._rgb[0],this._rgb[1],this._rgb[2],I],"rgb"):this._rgb[3]};var JV=C;JV.prototype.clipped=function(){return this._rgb._clipped||!1};var Zi=C,QV=up;Zi.prototype.darken=function(I){I===void 0&&(I=1);var O=this,z=O.lab();return z[0]-=QV.Kn*I,new Zi(z,"lab").alpha(O.alpha(),!0)},Zi.prototype.brighten=function(I){return I===void 0&&(I=1),this.darken(-I)},Zi.prototype.darker=Zi.prototype.darken,Zi.prototype.brighter=Zi.prototype.brighten;var e6=C;e6.prototype.get=function(I){var O=I.split("."),z=O[0],ee=O[1],he=this[z]();if(ee){var we=z.indexOf(ee)-(z.substr(0,2)==="ok"?2:0);if(we>-1)return he[we];throw new Error("unknown channel "+ee+" in mode "+z)}else return he};var wu=C,t6=m.type,n6=Math.pow,s6=1e-7,o6=20;wu.prototype.luminance=function(I){if(I!==void 0&&t6(I)==="number"){if(I===0)return new wu([0,0,0,this._rgb[3]],"rgb");if(I===1)return new wu([255,255,255,this._rgb[3]],"rgb");var O=this.luminance(),z="rgb",ee=o6,he=function(ue,Te){var De=ue.interpolate(Te,.5,z),qe=De.luminance();return Math.abs(I-qe)<s6||!ee--?De:qe>I?he(ue,De):he(De,Te)},we=(O>I?he(new wu([0,0,0]),this):he(this,new wu([255,255,255]))).rgb();return new wu(we.concat([this._rgb[3]]))}return r6.apply(void 0,this._rgb.slice(0,3))};var r6=function(I,O,z){return I=G0(I),O=G0(O),z=G0(z),.2126*I+.7152*O+.0722*z},G0=function(I){return I/=255,I<=.03928?I/12.92:n6((I+.055)/1.055,2.4)},Wo={},iS=C,lS=m.type,pp=Wo,uS=function(I,O,z){z===void 0&&(z=.5);for(var ee=[],he=arguments.length-3;he-- >0;)ee[he]=arguments[he+3];var we=ee[0]||"lrgb";if(!pp[we]&&!ee.length&&(we=Object.keys(pp)[0]),!pp[we])throw new Error("interpolation mode "+we+" is not defined");return lS(I)!=="object"&&(I=new iS(I)),lS(O)!=="object"&&(O=new iS(O)),pp[we](I,O,z).alpha(I.alpha()+z*(O.alpha()-I.alpha()))},cS=C,a6=uS;cS.prototype.mix=cS.prototype.interpolate=function(I,O){O===void 0&&(O=.5);for(var z=[],ee=arguments.length-2;ee-- >0;)z[ee]=arguments[ee+2];return a6.apply(void 0,[this,I,O].concat(z))};var dS=C;dS.prototype.premultiply=function(I){I===void 0&&(I=!1);var O=this._rgb,z=O[3];return I?(this._rgb=[O[0]*z,O[1]*z,O[2]*z,z],this):new dS([O[0]*z,O[1]*z,O[2]*z,z],"rgb")};var K0=C,i6=up;K0.prototype.saturate=function(I){I===void 0&&(I=1);var O=this,z=O.lch();return z[1]+=i6.Kn*I,z[1]<0&&(z[1]=0),new K0(z,"lch").alpha(O.alpha(),!0)},K0.prototype.desaturate=function(I){return I===void 0&&(I=1),this.saturate(-I)};var fS=C,hS=m.type;fS.prototype.set=function(I,O,z){z===void 0&&(z=!1);var ee=I.split("."),he=ee[0],we=ee[1],ue=this[he]();if(we){var Te=he.indexOf(we)-(he.substr(0,2)==="ok"?2:0);if(Te>-1){if(hS(O)=="string")switch(O.charAt(0)){case"+":ue[Te]+=+O;break;case"-":ue[Te]+=+O;break;case"*":ue[Te]*=+O.substr(1);break;case"/":ue[Te]/=+O.substr(1);break;default:ue[Te]=+O}else if(hS(O)==="number")ue[Te]=O;else throw new Error("unsupported value for Color.set");var De=new fS(ue,he);return z?(this._rgb=De._rgb,this):De}throw new Error("unknown channel "+we+" in mode "+he)}else return ue};var l6=C,u6=function(I,O,z){var ee=I._rgb,he=O._rgb;return new l6(ee[0]+z*(he[0]-ee[0]),ee[1]+z*(he[1]-ee[1]),ee[2]+z*(he[2]-ee[2]),"rgb")};Wo.rgb=u6;var c6=C,j0=Math.sqrt,$u=Math.pow,d6=function(I,O,z){var ee=I._rgb,he=ee[0],we=ee[1],ue=ee[2],Te=O._rgb,De=Te[0],qe=Te[1],tt=Te[2];return new c6(j0($u(he,2)*(1-z)+$u(De,2)*z),j0($u(we,2)*(1-z)+$u(qe,2)*z),j0($u(ue,2)*(1-z)+$u(tt,2)*z),"rgb")};Wo.lrgb=d6;var f6=C,h6=function(I,O,z){var ee=I.lab(),he=O.lab();return new f6(ee[0]+z*(he[0]-ee[0]),ee[1]+z*(he[1]-ee[1]),ee[2]+z*(he[2]-ee[2]),"lab")};Wo.lab=h6;var pS=C,Cu=function(I,O,z,ee){var he,we,ue,Te;ee==="hsl"?(ue=I.hsl(),Te=O.hsl()):ee==="hsv"?(ue=I.hsv(),Te=O.hsv()):ee==="hcg"?(ue=I.hcg(),Te=O.hcg()):ee==="hsi"?(ue=I.hsi(),Te=O.hsi()):ee==="lch"||ee==="hcl"?(ee="hcl",ue=I.hcl(),Te=O.hcl()):ee==="oklch"&&(ue=I.oklch().reverse(),Te=O.oklch().reverse());var De,qe,tt,bt,ot,St;(ee.substr(0,1)==="h"||ee==="oklch")&&(he=ue,De=he[0],tt=he[1],ot=he[2],we=Te,qe=we[0],bt=we[1],St=we[2]);var kt,un,mn,In;return!isNaN(De)&&!isNaN(qe)?(qe>De&&qe-De>180?In=qe-(De+360):qe<De&&De-qe>180?In=qe+360-De:In=qe-De,un=De+z*In):isNaN(De)?isNaN(qe)?un=Number.NaN:(un=qe,(ot==1||ot==0)&&ee!="hsv"&&(kt=bt)):(un=De,(St==1||St==0)&&ee!="hsv"&&(kt=tt)),kt===void 0&&(kt=tt+z*(bt-tt)),mn=ot+z*(St-ot),ee==="oklch"?new pS([mn,kt,un],ee):new pS([un,kt,mn],ee)},p6=Cu,mS=function(I,O,z){return p6(I,O,z,"lch")};Wo.lch=mS,Wo.hcl=mS;var m6=C,g6=function(I,O,z){var ee=I.num(),he=O.num();return new m6(ee+z*(he-ee),"num")};Wo.num=g6;var v6=Cu,b6=function(I,O,z){return v6(I,O,z,"hcg")};Wo.hcg=b6;var y6=Cu,w6=function(I,O,z){return y6(I,O,z,"hsi")};Wo.hsi=w6;var $6=Cu,C6=function(I,O,z){return $6(I,O,z,"hsl")};Wo.hsl=C6;var k6=Cu,S6=function(I,O,z){return k6(I,O,z,"hsv")};Wo.hsv=S6;var x6=C,I6=function(I,O,z){var ee=I.oklab(),he=O.oklab();return new x6(ee[0]+z*(he[0]-ee[0]),ee[1]+z*(he[1]-ee[1]),ee[2]+z*(he[2]-ee[2]),"oklab")};Wo.oklab=I6;var E6=Cu,T6=function(I,O,z){return E6(I,O,z,"oklch")};Wo.oklch=T6;var q0=C,N6=m.clip_rgb,X0=Math.pow,Y0=Math.sqrt,Z0=Math.PI,gS=Math.cos,vS=Math.sin,A6=Math.atan2,D6=function(I,O,z){O===void 0&&(O="lrgb"),z===void 0&&(z=null);var ee=I.length;z||(z=Array.from(new Array(ee)).map(function(){return 1}));var he=ee/z.reduce(function(un,mn){return un+mn});if(z.forEach(function(un,mn){z[mn]*=he}),I=I.map(function(un){return new q0(un)}),O==="lrgb")return R6(I,z);for(var we=I.shift(),ue=we.get(O),Te=[],De=0,qe=0,tt=0;tt<ue.length;tt++)if(ue[tt]=(ue[tt]||0)*z[0],Te.push(isNaN(ue[tt])?0:z[0]),O.charAt(tt)==="h"&&!isNaN(ue[tt])){var bt=ue[tt]/180*Z0;De+=gS(bt)*z[0],qe+=vS(bt)*z[0]}var ot=we.alpha()*z[0];I.forEach(function(un,mn){var In=un.get(O);ot+=un.alpha()*z[mn+1];for(var Rn=0;Rn<ue.length;Rn++)if(!isNaN(In[Rn]))if(Te[Rn]+=z[mn+1],O.charAt(Rn)==="h"){var Xs=In[Rn]/180*Z0;De+=gS(Xs)*z[mn+1],qe+=vS(Xs)*z[mn+1]}else ue[Rn]+=In[Rn]*z[mn+1]});for(var St=0;St<ue.length;St++)if(O.charAt(St)==="h"){for(var kt=A6(qe/Te[St],De/Te[St])/Z0*180;kt<0;)kt+=360;for(;kt>=360;)kt-=360;ue[St]=kt}else ue[St]=ue[St]/Te[St];return ot/=ee,new q0(ue,O).alpha(ot>.99999?1:ot,!0)},R6=function(I,O){for(var z=I.length,ee=[0,0,0,0],he=0;he<I.length;he++){var we=I[he],ue=O[he]/z,Te=we._rgb;ee[0]+=X0(Te[0],2)*ue,ee[1]+=X0(Te[1],2)*ue,ee[2]+=X0(Te[2],2)*ue,ee[3]+=Te[3]*ue}return ee[0]=Y0(ee[0]),ee[1]=Y0(ee[1]),ee[2]=Y0(ee[2]),ee[3]>.9999999&&(ee[3]=1),new q0(N6(ee))},Mr=S,ku=m.type,_6=Math.pow,J0=function(I){var O="rgb",z=Mr("#ccc"),ee=0,he=[0,1],we=[],ue=[0,0],Te=!1,De=[],qe=!1,tt=0,bt=1,ot=!1,St={},kt=!0,un=1,mn=function(at){if(at=at||["#fff","#000"],at&&ku(at)==="string"&&Mr.brewer&&Mr.brewer[at.toLowerCase()]&&(at=Mr.brewer[at.toLowerCase()]),ku(at)==="array"){at.length===1&&(at=[at[0],at[0]]),at=at.slice(0);for(var Bt=0;Bt<at.length;Bt++)at[Bt]=Mr(at[Bt]);we.length=0;for(var fn=0;fn<at.length;fn++)we.push(fn/(at.length-1))}return So(),De=at},In=function(at){if(Te!=null){for(var Bt=Te.length-1,fn=0;fn<Bt&&at>=Te[fn];)fn++;return fn-1}return 0},Rn=function(at){return at},Xs=function(at){return at},zs=function(at,Bt){var fn,cn;if(Bt==null&&(Bt=!1),isNaN(at)||at===null)return z;if(Bt)cn=at;else if(Te&&Te.length>2){var Ys=In(at);cn=Ys/(Te.length-2)}else bt!==tt?cn=(at-tt)/(bt-tt):cn=1;cn=Xs(cn),Bt||(cn=Rn(cn)),un!==1&&(cn=_6(cn,un)),cn=ue[0]+cn*(1-ue[0]-ue[1]),cn=Math.min(1,Math.max(0,cn));var jn=Math.floor(cn*1e4);if(kt&&St[jn])fn=St[jn];else{if(ku(De)==="array")for(var En=0;En<we.length;En++){var On=we[En];if(cn<=On){fn=De[En];break}if(cn>=On&&En===we.length-1){fn=De[En];break}if(cn>On&&cn<we[En+1]){cn=(cn-On)/(we[En+1]-On),fn=Mr.interpolate(De[En],De[En+1],cn,O);break}}else ku(De)==="function"&&(fn=De(cn));kt&&(St[jn]=fn)}return fn},So=function(){return St={}};mn(I);var yn=function(at){var Bt=Mr(zs(at));return qe&&Bt[qe]?Bt[qe]():Bt};return yn.classes=function(at){if(at!=null){if(ku(at)==="array")Te=at,he=[at[0],at[at.length-1]];else{var Bt=Mr.analyze(he);at===0?Te=[Bt.min,Bt.max]:Te=Mr.limits(Bt,"e",at)}return yn}return Te},yn.domain=function(at){if(!arguments.length)return he;tt=at[0],bt=at[at.length-1],we=[];var Bt=De.length;if(at.length===Bt&&tt!==bt)for(var fn=0,cn=Array.from(at);fn<cn.length;fn+=1){var Ys=cn[fn];we.push((Ys-tt)/(bt-tt))}else{for(var jn=0;jn<Bt;jn++)we.push(jn/(Bt-1));if(at.length>2){var En=at.map(function(Mn,Ln){return Ln/(at.length-1)}),On=at.map(function(Mn){return(Mn-tt)/(bt-tt)});On.every(function(Mn,Ln){return En[Ln]===Mn})||(Xs=function(Mn){if(Mn<=0||Mn>=1)return Mn;for(var Ln=0;Mn>=On[Ln+1];)Ln++;var Pr=(Mn-On[Ln])/(On[Ln+1]-On[Ln]),si=En[Ln]+Pr*(En[Ln+1]-En[Ln]);return si})}}return he=[tt,bt],yn},yn.mode=function(at){return arguments.length?(O=at,So(),yn):O},yn.range=function(at,Bt){return mn(at),yn},yn.out=function(at){return qe=at,yn},yn.spread=function(at){return arguments.length?(ee=at,yn):ee},yn.correctLightness=function(at){return at==null&&(at=!0),ot=at,So(),ot?Rn=function(Bt){for(var fn=zs(0,!0).lab()[0],cn=zs(1,!0).lab()[0],Ys=fn>cn,jn=zs(Bt,!0).lab()[0],En=fn+(cn-fn)*Bt,On=jn-En,Mn=0,Ln=1,Pr=20;Math.abs(On)>.01&&Pr-- >0;)(function(){return Ys&&(On*=-1),On<0?(Mn=Bt,Bt+=(Ln-Bt)*.5):(Ln=Bt,Bt+=(Mn-Bt)*.5),jn=zs(Bt,!0).lab()[0],On=jn-En})();return Bt}:Rn=function(Bt){return Bt},yn},yn.padding=function(at){return at!=null?(ku(at)==="number"&&(at=[at,at]),ue=at,yn):ue},yn.colors=function(at,Bt){arguments.length<2&&(Bt="hex");var fn=[];if(arguments.length===0)fn=De.slice(0);else if(at===1)fn=[yn(.5)];else if(at>1){var cn=he[0],Ys=he[1]-cn;fn=O6(0,at,!1).map(function(Ln){return yn(cn+Ln/(at-1)*Ys)})}else{I=[];var jn=[];if(Te&&Te.length>2)for(var En=1,On=Te.length,Mn=1<=On;Mn?En<On:En>On;Mn?En++:En--)jn.push((Te[En-1]+Te[En])*.5);else jn=he;fn=jn.map(function(Ln){return yn(Ln)})}return Mr[Bt]&&(fn=fn.map(function(Ln){return Ln[Bt]()})),fn},yn.cache=function(at){return at!=null?(kt=at,yn):kt},yn.gamma=function(at){return at!=null?(un=at,yn):un},yn.nodata=function(at){return at!=null?(z=Mr(at),yn):z},yn};function O6(I,O,z){for(var ee=[],he=I<O,we=z?he?O+1:O-1:O,ue=I;he?ue<we:ue>we;he?ue++:ue--)ee.push(ue);return ee}var id=C,M6=J0,F6=function(I){for(var O=[1,1],z=1;z<I;z++){for(var ee=[1],he=1;he<=O.length;he++)ee[he]=(O[he]||0)+O[he-1];O=ee}return O},P6=function(I){var O,z,ee,he,we,ue,Te;if(I=I.map(function(ot){return new id(ot)}),I.length===2)O=I.map(function(ot){return ot.lab()}),we=O[0],ue=O[1],he=function(ot){var St=[0,1,2].map(function(kt){return we[kt]+ot*(ue[kt]-we[kt])});return new id(St,"lab")};else if(I.length===3)z=I.map(function(ot){return ot.lab()}),we=z[0],ue=z[1],Te=z[2],he=function(ot){var St=[0,1,2].map(function(kt){return(1-ot)*(1-ot)*we[kt]+2*(1-ot)*ot*ue[kt]+ot*ot*Te[kt]});return new id(St,"lab")};else if(I.length===4){var De;ee=I.map(function(ot){return ot.lab()}),we=ee[0],ue=ee[1],Te=ee[2],De=ee[3],he=function(ot){var St=[0,1,2].map(function(kt){return(1-ot)*(1-ot)*(1-ot)*we[kt]+3*(1-ot)*(1-ot)*ot*ue[kt]+3*(1-ot)*ot*ot*Te[kt]+ot*ot*ot*De[kt]});return new id(St,"lab")}}else if(I.length>=5){var qe,tt,bt;qe=I.map(function(ot){return ot.lab()}),bt=I.length-1,tt=F6(bt),he=function(ot){var St=1-ot,kt=[0,1,2].map(function(un){return qe.reduce(function(mn,In,Rn){return mn+tt[Rn]*Math.pow(St,bt-Rn)*Math.pow(ot,Rn)*In[un]},0)});return new id(kt,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return he},L6=function(I){var O=P6(I);return O.scale=function(){return M6(O)},O},Q0=S,Fr=function(I,O,z){if(!Fr[z])throw new Error("unknown blend mode "+z);return Fr[z](I,O)},ti=function(I){return function(O,z){var ee=Q0(z).rgb(),he=Q0(O).rgb();return Q0.rgb(I(ee,he))}},ni=function(I){return function(O,z){var ee=[];return ee[0]=I(O[0],z[0]),ee[1]=I(O[1],z[1]),ee[2]=I(O[2],z[2]),ee}},B6=function(I){return I},z6=function(I,O){return I*O/255},V6=function(I,O){return I>O?O:I},W6=function(I,O){return I>O?I:O},H6=function(I,O){return 255*(1-(1-I/255)*(1-O/255))},U6=function(I,O){return O<128?2*I*O/255:255*(1-2*(1-I/255)*(1-O/255))},G6=function(I,O){return 255*(1-(1-O/255)/(I/255))},K6=function(I,O){return I===255?255:(I=255*(O/255)/(1-I/255),I>255?255:I)};Fr.normal=ti(ni(B6)),Fr.multiply=ti(ni(z6)),Fr.screen=ti(ni(H6)),Fr.overlay=ti(ni(U6)),Fr.darken=ti(ni(V6)),Fr.lighten=ti(ni(W6)),Fr.dodge=ti(ni(K6)),Fr.burn=ti(ni(G6));for(var j6=Fr,eb=m.type,q6=m.clip_rgb,X6=m.TWOPI,Y6=Math.pow,Z6=Math.sin,J6=Math.cos,bS=S,Q6=function(I,O,z,ee,he){I===void 0&&(I=300),O===void 0&&(O=-1.5),z===void 0&&(z=1),ee===void 0&&(ee=1),he===void 0&&(he=[0,1]);var we=0,ue;eb(he)==="array"?ue=he[1]-he[0]:(ue=0,he=[he,he]);var Te=function(De){var qe=X6*((I+120)/360+O*De),tt=Y6(he[0]+ue*De,ee),bt=we!==0?z[0]+De*we:z,ot=bt*tt*(1-tt)/2,St=J6(qe),kt=Z6(qe),un=tt+ot*(-.14861*St+1.78277*kt),mn=tt+ot*(-.29227*St-.90649*kt),In=tt+ot*(1.97294*St);return bS(q6([un*255,mn*255,In*255,1]))};return Te.start=function(De){return De==null?I:(I=De,Te)},Te.rotations=function(De){return De==null?O:(O=De,Te)},Te.gamma=function(De){return De==null?ee:(ee=De,Te)},Te.hue=function(De){return De==null?z:(z=De,eb(z)==="array"?(we=z[1]-z[0],we===0&&(z=z[1])):we=0,Te)},Te.lightness=function(De){return De==null?he:(eb(De)==="array"?(he=De,ue=De[1]-De[0]):(he=[De,De],ue=0),Te)},Te.scale=function(){return bS.scale(Te)},Te.hue(z),Te},e5=C,t5="0123456789abcdef",n5=Math.floor,s5=Math.random,o5=function(){for(var I="#",O=0;O<6;O++)I+=t5.charAt(n5(s5()*16));return new e5(I,"hex")},tb=u,yS=Math.log,r5=Math.pow,a5=Math.floor,i5=Math.abs,wS=function(I,O){O===void 0&&(O=null);var z={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return tb(I)==="object"&&(I=Object.values(I)),I.forEach(function(ee){O&&tb(ee)==="object"&&(ee=ee[O]),ee!=null&&!isNaN(ee)&&(z.values.push(ee),z.sum+=ee,ee<z.min&&(z.min=ee),ee>z.max&&(z.max=ee),z.count+=1)}),z.domain=[z.min,z.max],z.limits=function(ee,he){return $S(z,ee,he)},z},$S=function(I,O,z){O===void 0&&(O="equal"),z===void 0&&(z=7),tb(I)=="array"&&(I=wS(I));var ee=I.min,he=I.max,we=I.values.sort(function(sb,ob){return sb-ob});if(z===1)return[ee,he];var ue=[];if(O.substr(0,1)==="c"&&(ue.push(ee),ue.push(he)),O.substr(0,1)==="e"){ue.push(ee);for(var Te=1;Te<z;Te++)ue.push(ee+Te/z*(he-ee));ue.push(he)}else if(O.substr(0,1)==="l"){if(ee<=0)throw new Error("Logarithmic scales are only possible for values > 0");var De=Math.LOG10E*yS(ee),qe=Math.LOG10E*yS(he);ue.push(ee);for(var tt=1;tt<z;tt++)ue.push(r5(10,De+tt/z*(qe-De)));ue.push(he)}else if(O.substr(0,1)==="q"){ue.push(ee);for(var bt=1;bt<z;bt++){var ot=(we.length-1)*bt/z,St=a5(ot);if(St===ot)ue.push(we[St]);else{var kt=ot-St;ue.push(we[St]*(1-kt)+we[St+1]*kt)}}ue.push(he)}else if(O.substr(0,1)==="k"){var un,mn=we.length,In=new Array(mn),Rn=new Array(z),Xs=!0,zs=0,So=null;So=[],So.push(ee);for(var yn=1;yn<z;yn++)So.push(ee+yn/z*(he-ee));for(So.push(he);Xs;){for(var at=0;at<z;at++)Rn[at]=0;for(var Bt=0;Bt<mn;Bt++)for(var fn=we[Bt],cn=Number.MAX_VALUE,Ys=void 0,jn=0;jn<z;jn++){var En=i5(So[jn]-fn);En<cn&&(cn=En,Ys=jn),Rn[Ys]++,In[Bt]=Ys}for(var On=new Array(z),Mn=0;Mn<z;Mn++)On[Mn]=null;for(var Ln=0;Ln<mn;Ln++)un=In[Ln],On[un]===null?On[un]=we[Ln]:On[un]+=we[Ln];for(var Pr=0;Pr<z;Pr++)On[Pr]*=1/Rn[Pr];Xs=!1;for(var si=0;si<z;si++)if(On[si]!==So[si]){Xs=!0;break}So=On,zs++,zs>200&&(Xs=!1)}for(var oi={},Su=0;Su<z;Su++)oi[Su]=[];for(var xu=0;xu<mn;xu++)un=In[xu],oi[un].push(we[xu]);for(var Aa=[],Ji=0;Ji<z;Ji++)Aa.push(oi[Ji][0]),Aa.push(oi[Ji][oi[Ji].length-1]);Aa=Aa.sort(function(sb,ob){return sb-ob}),ue.push(Aa[0]);for(var ld=1;ld<Aa.length;ld+=2){var Qi=Aa[ld];!isNaN(Qi)&&ue.indexOf(Qi)===-1&&ue.push(Qi)}}return ue},CS={analyze:wS,limits:$S},kS=C,l5=function(I,O){I=new kS(I),O=new kS(O);var z=I.luminance(),ee=O.luminance();return z>ee?(z+.05)/(ee+.05):(ee+.05)/(z+.05)},SS=C,Na=Math.sqrt,$s=Math.pow,u5=Math.min,c5=Math.max,xS=Math.atan2,IS=Math.abs,mp=Math.cos,ES=Math.sin,d5=Math.exp,TS=Math.PI,f5=function(I,O,z,ee,he){z===void 0&&(z=1),ee===void 0&&(ee=1),he===void 0&&(he=1);var we=function(Qi){return 360*Qi/(2*TS)},ue=function(Qi){return 2*TS*Qi/360};I=new SS(I),O=new SS(O);var Te=Array.from(I.lab()),De=Te[0],qe=Te[1],tt=Te[2],bt=Array.from(O.lab()),ot=bt[0],St=bt[1],kt=bt[2],un=(De+ot)/2,mn=Na($s(qe,2)+$s(tt,2)),In=Na($s(St,2)+$s(kt,2)),Rn=(mn+In)/2,Xs=.5*(1-Na($s(Rn,7)/($s(Rn,7)+$s(25,7)))),zs=qe*(1+Xs),So=St*(1+Xs),yn=Na($s(zs,2)+$s(tt,2)),at=Na($s(So,2)+$s(kt,2)),Bt=(yn+at)/2,fn=we(xS(tt,zs)),cn=we(xS(kt,So)),Ys=fn>=0?fn:fn+360,jn=cn>=0?cn:cn+360,En=IS(Ys-jn)>180?(Ys+jn+360)/2:(Ys+jn)/2,On=1-.17*mp(ue(En-30))+.24*mp(ue(2*En))+.32*mp(ue(3*En+6))-.2*mp(ue(4*En-63)),Mn=jn-Ys;Mn=IS(Mn)<=180?Mn:jn<=Ys?Mn+360:Mn-360,Mn=2*Na(yn*at)*ES(ue(Mn)/2);var Ln=ot-De,Pr=at-yn,si=1+.015*$s(un-50,2)/Na(20+$s(un-50,2)),oi=1+.045*Bt,Su=1+.015*Bt*On,xu=30*d5(-$s((En-275)/25,2)),Aa=2*Na($s(Bt,7)/($s(Bt,7)+$s(25,7))),Ji=-Aa*ES(2*ue(xu)),ld=Na($s(Ln/(z*si),2)+$s(Pr/(ee*oi),2)+$s(Mn/(he*Su),2)+Ji*(Pr/(ee*oi))*(Mn/(he*Su)));return c5(0,u5(100,ld))},NS=C,h5=function(I,O,z){z===void 0&&(z="lab"),I=new NS(I),O=new NS(O);var ee=I.get(z),he=O.get(z),we=0;for(var ue in ee){var Te=(ee[ue]||0)-(he[ue]||0);we+=Te*Te}return Math.sqrt(we)},p5=C,m5=function(){for(var I=[],O=arguments.length;O--;)I[O]=arguments[O];try{return new(Function.prototype.bind.apply(p5,[null].concat(I))),!0}catch{return!1}},AS=S,DS=J0,g5={cool:function(){return DS([AS.hsl(180,1,.9),AS.hsl(250,.7,.4)])},hot:function(){return DS(["#000","#f00","#ff0","#fff"]).mode("rgb")}},gp={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},nb=0,RS=Object.keys(gp);nb<RS.length;nb+=1){var _S=RS[nb];gp[_S.toLowerCase()]=gp[_S]}var v5=gp,Bs=S;Bs.average=D6,Bs.bezier=L6,Bs.blend=j6,Bs.cubehelix=Q6,Bs.mix=Bs.interpolate=uS,Bs.random=o5,Bs.scale=J0,Bs.analyze=CS.analyze,Bs.contrast=l5,Bs.deltaE=f5,Bs.distance=h5,Bs.limits=CS.limits,Bs.valid=m5,Bs.scales=g5,Bs.colors=Gk,Bs.brewer=v5;var b5=Bs;return b5})})(yB);var Jje=yB.exports;/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const wB=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",rd=e=>wB?Symbol(e):"_vr_"+e,TKe=rd("rvlm"),DN=rd("rvd"),wk=rd("r"),$B=rd("rl"),ow=rd("rvl"),Wu=typeof window!="undefined";function NKe(e){return e.__esModule||wB&&e[Symbol.toStringTag]==="Module"}const Hn=Object.assign;function sy(e,t){const n={};for(const s in t){const o=t[s];n[s]=Array.isArray(o)?o.map(e):e(o)}return n}const Kd=()=>{},AKe=/\/$/,DKe=e=>e.replace(AKe,"");function oy(e,t,n="/"){let s,o={},r="",a="";const i=t.indexOf("?"),l=t.indexOf("#",i>-1?i:0);return i>-1&&(s=t.slice(0,i),r=t.slice(i+1,l>-1?l:t.length),o=e(r)),l>-1&&(s=s||t.slice(0,l),a=t.slice(l,t.length)),s=MKe(s!=null?s:t,n),{fullPath:s+(r&&"?")+r+a,path:s,query:o,hash:a}}function RKe(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function RN(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function _Ke(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&Dc(t.matched[s],n.matched[o])&&CB(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Dc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function CB(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!OKe(e[n],t[n]))return!1;return!0}function OKe(e,t){return Array.isArray(e)?_N(e,t):Array.isArray(t)?_N(t,e):e===t}function _N(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function MKe(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/");let o=n.length-1,r,a;for(r=0;r<s.length;r++)if(a=s[r],!(o===1||a==="."))if(a==="..")o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(r-(r===s.length?1:0)).join("/")}var Ef;(function(e){e.pop="pop",e.push="push"})(Ef||(Ef={}));var jd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(jd||(jd={}));function FKe(e){if(!e)if(Wu){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),DKe(e)}const PKe=/^[^#]+#/;function LKe(e,t){return e.replace(PKe,"#")+t}function BKe(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const D0=()=>({left:window.pageXOffset,top:window.pageYOffset});function zKe(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=BKe(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function ON(e,t){return(history.state?history.state.position-t:-1)+e}const rw=new Map;function VKe(e,t){rw.set(e,t)}function WKe(e){const t=rw.get(e);return rw.delete(e),t}let HKe=()=>location.protocol+"//"+location.host;function kB(e,t){const{pathname:n,search:s,hash:o}=t,r=e.indexOf("#");if(r>-1){let i=o.includes(e.slice(r))?e.slice(r).length:1,l=o.slice(i);return l[0]!=="/"&&(l="/"+l),RN(l,"")}return RN(n,e)+s+o}function UKe(e,t,n,s){let o=[],r=[],a=null;const i=({state:f})=>{const h=kB(e,location),p=n.value,m=t.value;let g=0;if(f){if(n.value=h,t.value=f,a&&a===p){a=null;return}g=m?f.position-m.position:0}else s(h);o.forEach(v=>{v(n.value,p,{delta:g,type:Ef.pop,direction:g?g>0?jd.forward:jd.back:jd.unknown})})};function l(){a=n.value}function u(f){o.push(f);const h=()=>{const p=o.indexOf(f);p>-1&&o.splice(p,1)};return r.push(h),h}function c(){const{history:f}=window;!f.state||f.replaceState(Hn({},f.state,{scroll:D0()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:d}}function MN(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?D0():null}}function GKe(e){const{history:t,location:n}=window,s={value:kB(e,n)},o={value:t.state};o.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:HKe()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),o.value=u}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function a(l,u){const c=Hn({},t.state,MN(o.value.back,l,o.value.forward,!0),u,{position:o.value.position});r(l,c,!0),s.value=l}function i(l,u){const c=Hn({},o.value,t.state,{forward:l,scroll:D0()});r(c.current,c,!0);const d=Hn({},MN(s.value,l,null),{position:c.position+1},u);r(l,d,!1),s.value=l}return{location:s,state:o,push:i,replace:a}}function Qje(e){e=FKe(e);const t=GKe(e),n=UKe(e,t.state,t.location,t.replace);function s(r,a=!0){a||n.pauseListeners(),history.go(r)}const o=Hn({location:"",base:e,go:s,createHref:LKe.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function KKe(e){return typeof e=="string"||e&&typeof e=="object"}function SB(e){return typeof e=="string"||typeof e=="symbol"}const ii={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},xB=rd("nf");var FN;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(FN||(FN={}));function Rc(e,t){return Hn(new Error,{type:e,[xB]:!0},t)}function ll(e,t){return e instanceof Error&&xB in e&&(t==null||!!(e.type&t))}const PN="[^/]+?",jKe={sensitive:!1,strict:!1,start:!0,end:!0},qKe=/[.+*?^${}()[\]/\\]/g;function XKe(e,t){const n=Hn({},jKe,t),s=[];let o=n.start?"^":"";const r=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(o+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(o+="/"),o+=f.value.replace(qKe,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:m,optional:g,regexp:v}=f;r.push({name:p,repeatable:m,optional:g});const b=v||PN;if(b!==PN){h+=10;try{new RegExp(`(${b})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+y.message)}}let $=m?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||($=g&&u.length<2?`(?:/${$})`:"/"+$),g&&($+="?"),o+=$,h+=20,g&&(h+=-8),m&&(h+=-20),b===".*"&&(h+=-50)}c.push(h)}s.push(c)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const a=new RegExp(o,n.sensitive?"":"i");function i(u){const c=u.match(a),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",p=r[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:p,repeatable:m,optional:g}=h,v=p in u?u[p]:"";if(Array.isArray(v)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Array.isArray(v)?v.join("/"):v;if(!b)if(g)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c}return{re:a,score:s,keys:r,parse:i,stringify:l}}function YKe(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function ZKe(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const r=YKe(s[n],o[n]);if(r)return r;n++}return o.length-s.length}const JKe={type:0,value:""},QKe=/[a-zA-Z0-9_]/;function eje(e){if(!e)return[[]];if(e==="/")return[[JKe]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,s=n;const o=[];let r;function a(){r&&o.push(r),r=[]}let i=0,l,u="",c="";function d(){!u||(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;i<e.length;){if(l=e[i++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),a()):l===":"?(d(),n=1):f();break;case 4:f(),n=s;break;case 1:l==="("?n=2:QKe.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&i--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&i--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),a(),o}function tje(e,t,n){const s=XKe(eje(e.path),n),o=Hn(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function nje(e,t){const n=[],s=new Map;t=BN({strict:!1,end:!0,sensitive:!1},t);function o(c){return s.get(c)}function r(c,d,f){const h=!f,p=oje(c);p.aliasOf=f&&f.record;const m=BN(t,c),g=[p];if("alias"in c){const $=typeof c.alias=="string"?[c.alias]:c.alias;for(const y of $)g.push(Hn({},p,{components:f?f.record.components:p.components,path:y,aliasOf:f?f.record:p}))}let v,b;for(const $ of g){const{path:y}=$;if(d&&y[0]!=="/"){const w=d.record.path,C=w[w.length-1]==="/"?"":"/";$.path=d.record.path+(y&&C+y)}if(v=tje($,d,m),f?f.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),h&&c.name&&!LN(v)&&a(c.name)),"children"in p){const w=p.children;for(let C=0;C<w.length;C++)r(w[C],v,f&&f.children[C])}f=f||v,l(v)}return b?()=>{a(b)}:Kd}function a(c){if(SB(c)){const d=s.get(c);d&&(s.delete(c),n.splice(n.indexOf(d),1),d.children.forEach(a),d.alias.forEach(a))}else{const d=n.indexOf(c);d>-1&&(n.splice(d,1),c.record.name&&s.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function i(){return n}function l(c){let d=0;for(;d<n.length&&ZKe(c,n[d])>=0;)d++;n.splice(d,0,c),c.record.name&&!LN(c)&&s.set(c.record.name,c)}function u(c,d){let f,h={},p,m;if("name"in c&&c.name){if(f=s.get(c.name),!f)throw Rc(1,{location:c});m=f.record.name,h=Hn(sje(d.params,f.keys.filter(b=>!b.optional).map(b=>b.name)),c.params),p=f.stringify(h)}else if("path"in c)p=c.path,f=n.find(b=>b.re.test(p)),f&&(h=f.parse(p),m=f.record.name);else{if(f=d.name?s.get(d.name):n.find(b=>b.re.test(d.path)),!f)throw Rc(1,{location:c,currentLocation:d});m=f.record.name,h=Hn({},d.params,c.params),p=f.stringify(h)}const g=[];let v=f;for(;v;)g.unshift(v.record),v=v.parent;return{name:m,path:p,params:h,matched:g,meta:aje(g)}}return e.forEach(c=>r(c)),{addRoute:r,resolve:u,removeRoute:a,getRoutes:i,getRecordMatcher:o}}function sje(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function oje(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:rje(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function rje(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="boolean"?n:n[s];return t}function LN(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function aje(e){return e.reduce((t,n)=>Hn(t,n.meta),{})}function BN(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const IB=/#/g,ije=/&/g,lje=/\//g,uje=/=/g,cje=/\?/g,EB=/\+/g,dje=/%5B/g,fje=/%5D/g,TB=/%5E/g,hje=/%60/g,NB=/%7B/g,pje=/%7C/g,AB=/%7D/g,mje=/%20/g;function $k(e){return encodeURI(""+e).replace(pje,"|").replace(dje,"[").replace(fje,"]")}function gje(e){return $k(e).replace(NB,"{").replace(AB,"}").replace(TB,"^")}function aw(e){return $k(e).replace(EB,"%2B").replace(mje,"+").replace(IB,"%23").replace(ije,"%26").replace(hje,"`").replace(NB,"{").replace(AB,"}").replace(TB,"^")}function vje(e){return aw(e).replace(uje,"%3D")}function bje(e){return $k(e).replace(IB,"%23").replace(cje,"%3F")}function yje(e){return e==null?"":bje(e).replace(lje,"%2F")}function yg(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function wje(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<s.length;++o){const r=s[o].replace(EB," "),a=r.indexOf("="),i=yg(a<0?r:r.slice(0,a)),l=a<0?null:yg(r.slice(a+1));if(i in t){let u=t[i];Array.isArray(u)||(u=t[i]=[u]),u.push(l)}else t[i]=l}return t}function zN(e){let t="";for(let n in e){const s=e[n];if(n=vje(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(s)?s.map(r=>r&&aw(r)):[s&&aw(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function $je(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Array.isArray(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}function yd(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function fi(e,t,n,s,o){const r=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((a,i)=>{const l=d=>{d===!1?i(Rc(4,{from:n,to:t})):d instanceof Error?i(d):KKe(d)?i(Rc(2,{from:t,to:d})):(r&&s.enterCallbacks[o]===r&&typeof d=="function"&&r.push(d),a())},u=e.call(s&&s.instances[o],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(d=>i(d))})}function ry(e,t,n,s){const o=[];for(const r of e)for(const a in r.components){let i=r.components[a];if(!(t!=="beforeRouteEnter"&&!r.instances[a]))if(Cje(i)){const u=(i.__vccOpts||i)[t];u&&o.push(fi(u,n,s,r,a))}else{let l=i();o.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${r.path}"`));const c=NKe(u)?u.default:u;r.components[a]=c;const f=(c.__vccOpts||c)[t];return f&&fi(f,n,s,r,a)()}))}}return o}function Cje(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function VN(e){const t=Ze(wk),n=Ze($B),s=_(()=>t.resolve(je(e.to))),o=_(()=>{const{matched:l}=s.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(Dc.bind(null,c));if(f>-1)return f;const h=WN(l[u-2]);return u>1&&WN(c)===h&&d[d.length-1].path!==h?d.findIndex(Dc.bind(null,l[u-2])):f}),r=_(()=>o.value>-1&&Ije(n.params,s.value.params)),a=_(()=>o.value>-1&&o.value===n.matched.length-1&&CB(n.params,s.value.params));function i(l={}){return xje(l)?t[je(e.replace)?"replace":"push"](je(e.to)).catch(Kd):Promise.resolve()}return{route:s,href:_(()=>s.value.href),isActive:r,isExactActive:a,navigate:i}}const kje=me({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:VN,setup(e,{slots:t}){const n=Cn(VN(e)),{options:s}=Ze(wk),o=_(()=>({[HN(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[HN(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:He("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),Sje=kje;function xje(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ije(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!Array.isArray(o)||o.length!==s.length||s.some((r,a)=>r!==o[a]))return!1}return!0}function WN(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const HN=(e,t,n)=>e!=null?e:t!=null?t:n,Eje=me({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const s=Ze(ow),o=_(()=>e.route||s.value),r=Ze(DN,0),a=_(()=>o.value.matched[r]);zt(DN,r+1),zt(TKe,a),zt(ow,o);const i=L();return Oe(()=>[i.value,a.value,e.name],([l,u,c],[d,f,h])=>{u&&(u.instances[c]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Dc(u,f)||!d)&&(u.enterCallbacks[c]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=o.value,u=a.value,c=u&&u.components[e.name],d=e.name;if(!c)return UN(n.default,{Component:c,route:l});const f=u.props[e.name],h=f?f===!0?l.params:typeof f=="function"?f(l):f:null,m=He(c,Hn({},h,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(u.instances[d]=null)},ref:i}));return UN(n.default,{Component:m,route:l})||m}}});function UN(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Tje=Eje;function e9e(e){const t=nje(e.routes,e),n=e.parseQuery||wje,s=e.stringifyQuery||zN,o=e.history,r=yd(),a=yd(),i=yd(),l=uo(ii);let u=ii;Wu&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=sy.bind(null,K=>""+K),d=sy.bind(null,yje),f=sy.bind(null,yg);function h(K,X){let Y,ie;return SB(K)?(Y=t.getRecordMatcher(K),ie=X):ie=K,t.addRoute(ie,Y)}function p(K){const X=t.getRecordMatcher(K);X&&t.removeRoute(X)}function m(){return t.getRoutes().map(K=>K.record)}function g(K){return!!t.getRecordMatcher(K)}function v(K,X){if(X=Hn({},X||l.value),typeof K=="string"){const Pe=oy(n,K,X.path),U=t.resolve({path:Pe.path},X),Q=o.createHref(Pe.fullPath);return Hn(Pe,U,{params:f(U.params),hash:yg(Pe.hash),redirectedFrom:void 0,href:Q})}let Y;if("path"in K)Y=Hn({},K,{path:oy(n,K.path,X.path).path});else{const Pe=Hn({},K.params);for(const U in Pe)Pe[U]==null&&delete Pe[U];Y=Hn({},K,{params:d(K.params)}),X.params=d(X.params)}const ie=t.resolve(Y,X),xe=K.hash||"";ie.params=c(f(ie.params));const Le=RKe(s,Hn({},K,{hash:gje(xe),path:ie.path})),Be=o.createHref(Le);return Hn({fullPath:Le,hash:xe,query:s===zN?$je(K.query):K.query||{}},ie,{redirectedFrom:void 0,href:Be})}function b(K){return typeof K=="string"?oy(n,K,l.value.path):Hn({},K)}function $(K,X){if(u!==K)return Rc(8,{from:X,to:K})}function y(K){return k(K)}function w(K){return y(Hn(b(K),{replace:!0}))}function C(K){const X=K.matched[K.matched.length-1];if(X&&X.redirect){const{redirect:Y}=X;let ie=typeof Y=="function"?Y(K):Y;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=b(ie):{path:ie},ie.params={}),Hn({query:K.query,hash:K.hash,params:K.params},ie)}}function k(K,X){const Y=u=v(K),ie=l.value,xe=K.state,Le=K.force,Be=K.replace===!0,Pe=C(Y);if(Pe)return k(Hn(b(Pe),{state:xe,force:Le,replace:Be}),X||Y);const U=Y;U.redirectedFrom=X;let Q;return!Le&&_Ke(s,ie,Y)&&(Q=Rc(16,{to:U,from:ie}),se(ie,ie,!0,!1)),(Q?Promise.resolve(Q):E(U,ie)).catch(H=>ll(H)?H:P(H,U,ie)).then(H=>{if(H){if(ll(H,2))return k(Hn(b(H.to),{state:xe,force:Le,replace:Be}),X||U)}else H=N(U,ie,!0,Be,xe);return x(U,ie,H),H})}function S(K,X){const Y=$(K,X);return Y?Promise.reject(Y):Promise.resolve()}function E(K,X){let Y;const[ie,xe,Le]=Nje(K,X);Y=ry(ie.reverse(),"beforeRouteLeave",K,X);for(const Pe of ie)Pe.leaveGuards.forEach(U=>{Y.push(fi(U,K,X))});const Be=S.bind(null,K,X);return Y.push(Be),Ou(Y).then(()=>{Y=[];for(const Pe of r.list())Y.push(fi(Pe,K,X));return Y.push(Be),Ou(Y)}).then(()=>{Y=ry(xe,"beforeRouteUpdate",K,X);for(const Pe of xe)Pe.updateGuards.forEach(U=>{Y.push(fi(U,K,X))});return Y.push(Be),Ou(Y)}).then(()=>{Y=[];for(const Pe of K.matched)if(Pe.beforeEnter&&!X.matched.includes(Pe))if(Array.isArray(Pe.beforeEnter))for(const U of Pe.beforeEnter)Y.push(fi(U,K,X));else Y.push(fi(Pe.beforeEnter,K,X));return Y.push(Be),Ou(Y)}).then(()=>(K.matched.forEach(Pe=>Pe.enterCallbacks={}),Y=ry(Le,"beforeRouteEnter",K,X),Y.push(Be),Ou(Y))).then(()=>{Y=[];for(const Pe of a.list())Y.push(fi(Pe,K,X));return Y.push(Be),Ou(Y)}).catch(Pe=>ll(Pe,8)?Pe:Promise.reject(Pe))}function x(K,X,Y){for(const ie of i.list())ie(K,X,Y)}function N(K,X,Y,ie,xe){const Le=$(K,X);if(Le)return Le;const Be=X===ii,Pe=Wu?history.state:{};Y&&(ie||Be?o.replace(K.fullPath,Hn({scroll:Be&&Pe&&Pe.scroll},xe)):o.push(K.fullPath,xe)),l.value=K,se(K,X,Y,Be),G()}let A;function D(){A=o.listen((K,X,Y)=>{const ie=v(K),xe=C(ie);if(xe){k(Hn(xe,{replace:!0}),ie).catch(Kd);return}u=ie;const Le=l.value;Wu&&VKe(ON(Le.fullPath,Y.delta),D0()),E(ie,Le).catch(Be=>ll(Be,12)?Be:ll(Be,2)?(k(Be.to,ie).then(Pe=>{ll(Pe,20)&&!Y.delta&&Y.type===Ef.pop&&o.go(-1,!1)}).catch(Kd),Promise.reject()):(Y.delta&&o.go(-Y.delta,!1),P(Be,ie,Le))).then(Be=>{Be=Be||N(ie,Le,!1),Be&&(Y.delta?o.go(-Y.delta,!1):Y.type===Ef.pop&&ll(Be,20)&&o.go(-1,!1)),x(ie,Le,Be)}).catch(Kd)})}let M=yd(),F=yd(),R;function P(K,X,Y){G(K);const ie=F.list();return ie.length?ie.forEach(xe=>xe(K,X,Y)):console.error(K),Promise.reject(K)}function V(){return R&&l.value!==ii?Promise.resolve():new Promise((K,X)=>{M.add([K,X])})}function G(K){R||(R=!0,D(),M.list().forEach(([X,Y])=>K?Y(K):X()),M.reset())}function se(K,X,Y,ie){const{scrollBehavior:xe}=e;if(!Wu||!xe)return Promise.resolve();const Le=!Y&&WKe(ON(K.fullPath,0))||(ie||!Y)&&history.state&&history.state.scroll||null;return dt().then(()=>xe(K,X,Le)).then(Be=>Be&&zKe(Be)).catch(Be=>P(Be,K,X))}const ke=K=>o.go(K);let te;const pe=new Set;return{currentRoute:l,addRoute:h,removeRoute:p,hasRoute:g,getRoutes:m,resolve:v,options:e,push:y,replace:w,go:ke,back:()=>ke(-1),forward:()=>ke(1),beforeEach:r.add,beforeResolve:a.add,afterEach:i.add,onError:F.add,isReady:V,install(K){const X=this;K.component("RouterLink",Sje),K.component("RouterView",Tje),K.config.globalProperties.$router=X,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>je(l)}),Wu&&!te&&l.value===ii&&(te=!0,y(o.location).catch(xe=>{}));const Y={};for(const xe in ii)Y[xe]=_(()=>l.value[xe]);K.provide(wk,X),K.provide($B,Cn(Y)),K.provide(ow,l);const ie=K.unmount;pe.add(K),K.unmount=function(){pe.delete(K),pe.size<1&&(u=ii,A&&A(),l.value=ii,te=!1,R=!1),ie()}}}}function Ou(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function Nje(e,t){const n=[],s=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const i=t.matched[a];i&&(e.matched.find(u=>Dc(u,i))?s.push(i):n.push(i));const l=e.matched[a];l&&(t.matched.find(u=>Dc(u,l))||o.push(l))}return[n,s,o]}export{w2e as E,it as F,hke as V,W as a,le as b,B as c,me as d,jt as e,Jje as f,Rje as g,e9e as h,Qje as i,tH as j,_je as k,nt as n,T as o,Dje as p,re as r,Xje as s,Ao as t,oe as w};
