var k9=Object.defineProperty,S9=Object.defineProperties;var I9=Object.getOwnPropertyDescriptors;var l_=Object.getOwnPropertySymbols;var T9=Object.prototype.hasOwnProperty,E9=Object.prototype.propertyIsEnumerable;var u_=(e,t,n)=>t in e?k9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ut=(e,t)=>{for(var n in t||(t={}))T9.call(t,n)&&u_(e,n,t[n]);if(l_)for(var n of l_(t))E9.call(t,n)&&u_(e,n,t[n]);return e},zt=(e,t)=>S9(e,I9(t));function _9(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(s){if(s!=="default"&&!(s in e)){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:function(){return n[s]}})}})}),Object.freeze(e)}function Zx(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const N9="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",A9=Zx(N9);function b3(e){return!!e||e===""}function nt(e){if(_t(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Xt(s)?O9(s):nt(s);if(o)for(const r in o)t[r]=o[r]}return t}else{if(Xt(e))return e;if(an(e))return e}}const D9=/;(?![^(]*\))/g,R9=/:(.+)/;function O9(e){const t={};return e.split(D9).forEach(n=>{if(n){const s=n.split(R9);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function q(e){let t="";if(Xt(e))t=e;else if(_t(e))for(let n=0;n<e.length;n++){const s=q(e[n]);s&&(t+=s+" ")}else if(an(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function zu(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Xt(t)&&(e.class=q(t)),n&&(e.style=nt(n)),e}function M9(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=md(e[s],t[s]);return n}function md(e,t){if(e===t)return!0;let n=c_(e),s=c_(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=_t(e),s=_t(t),n||s)return n&&s?M9(e,t):!1;if(n=an(e),s=an(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const i in e){const a=e.hasOwnProperty(i),l=t.hasOwnProperty(i);if(a&&!l||!a&&l||!md(e[i],t[i]))return!1}}return String(e)===String(t)}function y3(e,t){return e.findIndex(n=>md(n,t))}const Pe=e=>Xt(e)?e:e==null?"":_t(e)||an(e)&&(e.toString===$3||!Ft(e.toString))?JSON.stringify(e,w3,2):String(e),w3=(e,t)=>t&&t.__v_isRef?w3(e,t.value):id(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o])=>(n[`${s} =>`]=o,n),{})}:c0(t)?{[`Set(${t.size})`]:[...t.values()]}:an(t)&&!_t(t)&&!C3(t)?String(t):t,Qn={},rd=[],rn=()=>{},P9=()=>!1,F9=/^on[^a-z]/,u0=e=>F9.test(e),Jx=e=>e.startsWith("onUpdate:"),ao=Object.assign,Qx=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},L9=Object.prototype.hasOwnProperty,Ht=(e,t)=>L9.call(e,t),_t=Array.isArray,id=e=>_p(e)==="[object Map]",c0=e=>_p(e)==="[object Set]",c_=e=>e instanceof Date,Ft=e=>typeof e=="function",Xt=e=>typeof e=="string",e2=e=>typeof e=="symbol",an=e=>e!==null&&typeof e=="object",vd=e=>an(e)&&Ft(e.then)&&Ft(e.catch),$3=Object.prototype.toString,_p=e=>$3.call(e),$v=e=>_p(e).slice(8,-1),C3=e=>_p(e)==="[object Object]",t2=e=>Xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cv=Zx(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),d0=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},B9=/-(\w)/g,Kr=d0(e=>e.replace(B9,(t,n)=>n?n.toUpperCase():"")),z9=/\B([A-Z])/g,kl=d0(e=>e.replace(z9,"-$1").toLowerCase()),gr=d0(e=>e.charAt(0).toUpperCase()+e.slice(1)),xv=d0(e=>e?`on${gr(e)}`:""),Lh=(e,t)=>!Object.is(e,t),kv=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ib=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ab=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let d_;const V9=()=>d_||(d_=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Or;class x3{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Or&&(this.parent=Or,this.index=(Or.scopes||(Or.scopes=[])).push(this)-1)}run(t){if(this.active)try{return Or=this,t()}finally{Or=this.parent}}on(){Or=this}off(){Or=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function W9(e){return new x3(e)}function H9(e,t=Or){t&&t.active&&t.effects.push(e)}function U9(){return Or}function k3(e){Or&&Or.cleanups.push(e)}const n2=e=>{const t=new Set(e);return t.w=0,t.n=0,t},S3=e=>(e.w&pl)>0,I3=e=>(e.n&pl)>0,j9=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=pl},G9=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];S3(o)&&!I3(o)?o.delete(e):t[n++]=o,o.w&=~pl,o.n&=~pl}t.length=n}},D$=new WeakMap;let Qf=0,pl=1;const R$=30;let Wi;const Eu=Symbol(""),O$=Symbol("");class s2{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,H9(this,s)}run(){if(!this.active)return this.fn();let t=Wi,n=al;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Wi,Wi=this,al=!0,pl=1<<++Qf,Qf<=R$?j9(this):f_(this),this.fn()}finally{Qf<=R$&&G9(this),pl=1<<--Qf,Wi=this.parent,al=n,this.parent=void 0}}stop(){this.active&&(f_(this),this.onStop&&this.onStop(),this.active=!1)}}function f_(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let al=!0;const T3=[];function lc(){T3.push(al),al=!1}function uc(){const e=T3.pop();al=e===void 0?!0:e}function Cr(e,t,n){if(al&&Wi){let s=D$.get(e);s||D$.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=n2()),E3(o)}}function E3(e,t){let n=!1;Qf<=R$?I3(e)||(e.n|=pl,n=!S3(e)):n=!e.has(Wi),n&&(e.add(Wi),Wi.deps.push(e))}function Sa(e,t,n,s,o,r){const i=D$.get(e);if(!i)return;let a=[];if(t==="clear")a=[...i.values()];else if(n==="length"&&_t(e))i.forEach((l,u)=>{(u==="length"||u>=s)&&a.push(l)});else switch(n!==void 0&&a.push(i.get(n)),t){case"add":_t(e)?t2(n)&&a.push(i.get("length")):(a.push(i.get(Eu)),id(e)&&a.push(i.get(O$)));break;case"delete":_t(e)||(a.push(i.get(Eu)),id(e)&&a.push(i.get(O$)));break;case"set":id(e)&&a.push(i.get(Eu));break}if(a.length===1)a[0]&&M$(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);M$(n2(l))}}function M$(e,t){for(const n of _t(e)?e:[...e])(n!==Wi||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const K9=Zx("__proto__,__v_isRef,__isVue"),_3=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(e2)),q9=o2(),Y9=o2(!1,!0),X9=o2(!0),h_=Z9();function Z9(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=$n(this);for(let r=0,i=this.length;r<i;r++)Cr(s,"get",r+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map($n)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){lc();const s=$n(this)[t].apply(this,n);return uc(),s}}),e}function o2(e=!1,t=!1){return function(s,o,r){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&r===(e?t?h7:O3:t?R3:D3).get(s))return s;const i=_t(s);if(!e&&i&&Ht(h_,o))return Reflect.get(h_,o,r);const a=Reflect.get(s,o,r);return(e2(o)?_3.has(o):K9(o))||(e||Cr(s,"get",o),t)?a:ms(a)?!i||!t2(o)?a.value:a:an(a)?e?Np(a):Sn(a):a}}const J9=N3(),Q9=N3(!0);function N3(e=!1){return function(n,s,o,r){let i=n[s];if(Bh(i)&&ms(i)&&!ms(o))return!1;if(!e&&!Bh(o)&&(M3(o)||(o=$n(o),i=$n(i)),!_t(n)&&ms(i)&&!ms(o)))return i.value=o,!0;const a=_t(n)&&t2(s)?Number(s)<n.length:Ht(n,s),l=Reflect.set(n,s,o,r);return n===$n(r)&&(a?Lh(o,i)&&Sa(n,"set",s,o):Sa(n,"add",s,o)),l}}function e7(e,t){const n=Ht(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&Sa(e,"delete",t,void 0),s}function t7(e,t){const n=Reflect.has(e,t);return(!e2(t)||!_3.has(t))&&Cr(e,"has",t),n}function n7(e){return Cr(e,"iterate",_t(e)?"length":Eu),Reflect.ownKeys(e)}const A3={get:q9,set:J9,deleteProperty:e7,has:t7,ownKeys:n7},s7={get:X9,set(e,t){return!0},deleteProperty(e,t){return!0}},o7=ao({},A3,{get:Y9,set:Q9}),r2=e=>e,f0=e=>Reflect.getPrototypeOf(e);function Nm(e,t,n=!1,s=!1){e=e.__v_raw;const o=$n(e),r=$n(t);t!==r&&!n&&Cr(o,"get",t),!n&&Cr(o,"get",r);const{has:i}=f0(o),a=s?r2:n?l2:Vh;if(i.call(o,t))return a(e.get(t));if(i.call(o,r))return a(e.get(r));e!==o&&e.get(t)}function Am(e,t=!1){const n=this.__v_raw,s=$n(n),o=$n(e);return e!==o&&!t&&Cr(s,"has",e),!t&&Cr(s,"has",o),e===o?n.has(e):n.has(e)||n.has(o)}function Dm(e,t=!1){return e=e.__v_raw,!t&&Cr($n(e),"iterate",Eu),Reflect.get(e,"size",e)}function p_(e){e=$n(e);const t=$n(this);return f0(t).has.call(t,e)||(t.add(e),Sa(t,"add",e,e)),this}function g_(e,t){t=$n(t);const n=$n(this),{has:s,get:o}=f0(n);let r=s.call(n,e);r||(e=$n(e),r=s.call(n,e));const i=o.call(n,e);return n.set(e,t),r?Lh(t,i)&&Sa(n,"set",e,t):Sa(n,"add",e,t),this}function m_(e){const t=$n(this),{has:n,get:s}=f0(t);let o=n.call(t,e);o||(e=$n(e),o=n.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return o&&Sa(t,"delete",e,void 0),r}function v_(){const e=$n(this),t=e.size!==0,n=e.clear();return t&&Sa(e,"clear",void 0,void 0),n}function Rm(e,t){return function(s,o){const r=this,i=r.__v_raw,a=$n(i),l=t?r2:e?l2:Vh;return!e&&Cr(a,"iterate",Eu),i.forEach((u,c)=>s.call(o,l(u),l(c),r))}}function Om(e,t,n){return function(...s){const o=this.__v_raw,r=$n(o),i=id(r),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,u=o[e](...s),c=n?r2:t?l2:Vh;return!t&&Cr(r,"iterate",l?O$:Eu),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Ua(e){return function(...t){return e==="delete"?!1:this}}function r7(){const e={get(r){return Nm(this,r)},get size(){return Dm(this)},has:Am,add:p_,set:g_,delete:m_,clear:v_,forEach:Rm(!1,!1)},t={get(r){return Nm(this,r,!1,!0)},get size(){return Dm(this)},has:Am,add:p_,set:g_,delete:m_,clear:v_,forEach:Rm(!1,!0)},n={get(r){return Nm(this,r,!0)},get size(){return Dm(this,!0)},has(r){return Am.call(this,r,!0)},add:Ua("add"),set:Ua("set"),delete:Ua("delete"),clear:Ua("clear"),forEach:Rm(!0,!1)},s={get(r){return Nm(this,r,!0,!0)},get size(){return Dm(this,!0)},has(r){return Am.call(this,r,!0)},add:Ua("add"),set:Ua("set"),delete:Ua("delete"),clear:Ua("clear"),forEach:Rm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Om(r,!1,!1),n[r]=Om(r,!0,!1),t[r]=Om(r,!1,!0),s[r]=Om(r,!0,!0)}),[e,n,t,s]}const[i7,a7,l7,u7]=r7();function i2(e,t){const n=t?e?u7:l7:e?a7:i7;return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(Ht(n,o)&&o in s?n:s,o,r)}const c7={get:i2(!1,!1)},d7={get:i2(!1,!0)},f7={get:i2(!0,!1)},D3=new WeakMap,R3=new WeakMap,O3=new WeakMap,h7=new WeakMap;function p7(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function g7(e){return e.__v_skip||!Object.isExtensible(e)?0:p7($v(e))}function Sn(e){return Bh(e)?e:a2(e,!1,A3,c7,D3)}function m7(e){return a2(e,!1,o7,d7,R3)}function Np(e){return a2(e,!0,s7,f7,O3)}function a2(e,t,n,s,o){if(!an(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const i=g7(e);if(i===0)return e;const a=new Proxy(e,i===2?s:n);return o.set(e,a),a}function ad(e){return Bh(e)?ad(e.__v_raw):!!(e&&e.__v_isReactive)}function Bh(e){return!!(e&&e.__v_isReadonly)}function M3(e){return!!(e&&e.__v_isShallow)}function P3(e){return ad(e)||Bh(e)}function $n(e){const t=e&&e.__v_raw;return t?$n(t):e}function zh(e){return ib(e,"__v_skip",!0),e}const Vh=e=>an(e)?Sn(e):e,l2=e=>an(e)?Np(e):e;function F3(e){al&&Wi&&(e=$n(e),E3(e.dep||(e.dep=n2())))}function u2(e,t){e=$n(e),e.dep&&M$(e.dep)}function ms(e){return!!(e&&e.__v_isRef===!0)}function L(e){return L3(e,!1)}function vo(e){return L3(e,!0)}function L3(e,t){return ms(e)?e:new v7(e,t)}class v7{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:$n(t),this._value=n?t:Vh(t)}get value(){return F3(this),this._value}set value(t){t=this.__v_isShallow?t:$n(t),Lh(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Vh(t),u2(this))}}function Df(e){u2(e)}function Ke(e){return ms(e)?e.value:e}const b7={get:(e,t,n)=>Ke(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return ms(o)&&!ms(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function lb(e){return ad(e)?e:new Proxy(e,b7)}function xo(e){const t=_t(e)?new Array(e.length):{};for(const n in e)t[n]=bo(e,n);return t}class y7{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function bo(e,t,n){const s=e[t];return ms(s)?s:new y7(e,t,n)}class w7{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new s2(t,()=>{this._dirty||(this._dirty=!0,u2(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=$n(this);return F3(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function $7(e,t,n=!1){let s,o;const r=Ft(e);return r?(s=e,o=rn):(s=e.get,o=e.set),new w7(s,o,r||!o,n)}Promise.resolve();const mh=[];function C7(e,...t){lc();const n=mh.length?mh[mh.length-1].component:null,s=n&&n.appContext.config.warnHandler,o=x7();if(s)$a(s,n,11,[e+t.join(""),n&&n.proxy,o.map(({vnode:r})=>`at <${pP(n,r.type)}>`).join(`
`),o]);else{const r=[`[Vue warn]: ${e}`,...t];o.length&&r.push(`
`,...k7(o)),console.warn(...r)}uc()}function x7(){let e=mh[mh.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function k7(e){const t=[];return e.forEach((n,s)=>{t.push(...s===0?[]:[`
`],...S7(n))}),t}function S7({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,o=` at <${pP(e.component,e.type,s)}`,r=">"+n;return e.props?[o,...I7(e.props),r]:[o+r]}function I7(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(s=>{t.push(...B3(s,e[s]))}),n.length>3&&t.push(" ..."),t}function B3(e,t,n){return Xt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:ms(t)?(t=B3(e,$n(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):Ft(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=$n(t),n?t:[`${e}=`,t])}function $a(e,t,n,s){let o;try{o=s?e(...s):e()}catch(r){h0(r,t,n)}return o}function jr(e,t,n,s){if(Ft(e)){const r=$a(e,t,n,s);return r&&vd(r)&&r.catch(i=>{h0(i,t,n)}),r}const o=[];for(let r=0;r<e.length;r++)o.push(jr(e[r],t,n,s));return o}function h0(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,a=n;for(;r;){const u=r.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,i,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){$a(l,null,10,[e,i,a]);return}}T7(e,n,o,s)}function T7(e,t,n,s=!0){console.error(e)}let ub=!1,P$=!1;const mr=[];let pa=0;const vh=[];let eh=null,qc=0;const bh=[];let qa=null,Yc=0;const z3=Promise.resolve();let c2=null,F$=null;function dt(e){const t=c2||z3;return e?t.then(this?e.bind(this):e):t}function E7(e){let t=pa+1,n=mr.length;for(;t<n;){const s=t+n>>>1;Wh(mr[s])<e?t=s+1:n=s}return t}function V3(e){(!mr.length||!mr.includes(e,ub&&e.allowRecurse?pa+1:pa))&&e!==F$&&(e.id==null?mr.push(e):mr.splice(E7(e.id),0,e),W3())}function W3(){!ub&&!P$&&(P$=!0,c2=z3.then(j3))}function _7(e){const t=mr.indexOf(e);t>pa&&mr.splice(t,1)}function H3(e,t,n,s){_t(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&n.push(e),W3()}function N7(e){H3(e,eh,vh,qc)}function A7(e){H3(e,qa,bh,Yc)}function d2(e,t=null){if(vh.length){for(F$=t,eh=[...new Set(vh)],vh.length=0,qc=0;qc<eh.length;qc++)eh[qc]();eh=null,qc=0,F$=null,d2(e,t)}}function U3(e){if(bh.length){const t=[...new Set(bh)];if(bh.length=0,qa){qa.push(...t);return}for(qa=t,qa.sort((n,s)=>Wh(n)-Wh(s)),Yc=0;Yc<qa.length;Yc++)qa[Yc]();qa=null,Yc=0}}const Wh=e=>e.id==null?1/0:e.id;function j3(e){P$=!1,ub=!0,d2(e),mr.sort((n,s)=>Wh(n)-Wh(s));const t=rn;try{for(pa=0;pa<mr.length;pa++){const n=mr[pa];n&&n.active!==!1&&$a(n,null,14)}}finally{pa=0,mr.length=0,U3(),ub=!1,c2=null,(mr.length||vh.length||bh.length)&&j3(e)}}function D7(e,t,...n){const s=e.vnode.props||Qn;let o=n;const r=t.startsWith("update:"),i=r&&t.slice(7);if(i&&i in s){const c=`${i==="modelValue"?"model":i}Modifiers`,{number:d,trim:f}=s[c]||Qn;f?o=n.map(h=>h.trim()):d&&(o=n.map(ab))}let a,l=s[a=xv(t)]||s[a=xv(Kr(t))];!l&&r&&(l=s[a=xv(kl(t))]),l&&jr(l,e,6,o);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,jr(u,e,6,o)}}function G3(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let i={},a=!1;if(!Ft(e)){const l=u=>{const c=G3(u,t,!0);c&&(a=!0,ao(i,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(s.set(e,null),null):(_t(r)?r.forEach(l=>i[l]=null):ao(i,r),s.set(e,i),i)}function f2(e,t){return!e||!u0(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ht(e,t[0].toLowerCase()+t.slice(1))||Ht(e,kl(t))||Ht(e,t))}let br=null,p0=null;function cb(e){const t=br;return br=e,p0=e&&e.type.__scopeId||null,t}function nct(e){p0=e}function sct(){p0=null}function re(e,t=br,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&__(-1);const r=cb(t),i=e(...o);return cb(r),s._d&&__(1),i};return s._n=!0,s._c=!0,s._d=!0,s}function gw(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:r,propsOptions:[i],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:g}=e;let m,v;const b=cb(e);try{if(n.shapeFlag&4){const y=o||s;m=Fi(c.call(y,y,d,r,h,f,p)),v=l}else{const y=t;m=Fi(y.length>1?y(r,{attrs:l,slots:a,emit:u}):y(r,null)),v=t.props?l:R7(l)}}catch(y){wh.length=0,h0(y,e,1),m=le(xr)}let $=m;if(v&&g!==!1){const y=Object.keys(v),{shapeFlag:w}=$;y.length&&w&7&&(i&&y.some(Jx)&&(v=O7(v,i)),$=Wu($,v))}return n.dirs&&($.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),m=$,cb(b),m}const R7=e=>{let t;for(const n in e)(n==="class"||n==="style"||u0(n))&&((t||(t={}))[n]=e[n]);return t},O7=(e,t)=>{const n={};for(const s in e)(!Jx(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function M7(e,t,n){const{props:s,children:o,component:r}=e,{props:i,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?b_(s,i,u):!!i;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(i[f]!==s[f]&&!f2(u,f))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?b_(s,i,u):!0:!!i;return!1}function b_(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!f2(n,r))return!0}return!1}function P7({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const F7=e=>e.__isSuspense;function L7(e,t){t&&t.pendingBranch?_t(e)?t.effects.push(...e):t.effects.push(e):A7(e)}function Vt(e,t){if(so){let n=so.provides;const s=so.parent&&so.parent.provides;s===n&&(n=so.provides=Object.create(s)),n[e]=t}}function Ze(e,t,n=!1){const s=so||br;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Ft(t)?t.call(s.proxy):t}}function Ca(e,t){return h2(e,null,t)}const y_={};function Oe(e,t,n){return h2(e,t,n)}function h2(e,t,{immediate:n,deep:s,flush:o,onTrack:r,onTrigger:i}=Qn){const a=so;let l,u=!1,c=!1;if(ms(e)?(l=()=>e.value,u=M3(e)):ad(e)?(l=()=>e,s=!0):_t(e)?(c=!0,u=e.some(ad),l=()=>e.map(v=>{if(ms(v))return v.value;if(ad(v))return yu(v);if(Ft(v))return $a(v,a,2)})):Ft(e)?t?l=()=>$a(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),jr(e,a,3,[f])}:l=rn,t&&s){const v=l;l=()=>yu(v())}let d,f=v=>{d=m.onStop=()=>{$a(v,a,4)}};if(Gh)return f=rn,t?n&&jr(t,a,3,[l(),c?[]:void 0,f]):l(),rn;let h=c?[]:y_;const p=()=>{if(!!m.active)if(t){const v=m.run();(s||u||(c?v.some((b,$)=>Lh(b,h[$])):Lh(v,h)))&&(d&&d(),jr(t,a,3,[v,h===y_?void 0:h,f]),h=v)}else m.run()};p.allowRecurse=!!t;let g;o==="sync"?g=p:o==="post"?g=()=>Ko(p,a&&a.suspense):g=()=>{!a||a.isMounted?N7(p):p()};const m=new s2(l,g);return t?n?p():h=m.run():o==="post"?Ko(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&Qx(a.scope.effects,m)}}function B7(e,t,n){const s=this.proxy,o=Xt(e)?e.includes(".")?K3(s,e):()=>s[e]:e.bind(s,s);let r;Ft(t)?r=t:(r=t.handler,n=t);const i=so;bd(this);const a=h2(o,r.bind(s),n);return i?bd(i):Nu(),a}function K3(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function yu(e,t){if(!an(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ms(e))yu(e.value,t);else if(_t(e))for(let n=0;n<e.length;n++)yu(e[n],t);else if(c0(e)||id(e))e.forEach(n=>{yu(n,t)});else if(C3(e))for(const n in e)yu(e[n],t);return e}function q3(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Rt(()=>{e.isMounted=!0}),ls(()=>{e.isUnmounting=!0}),e}const _r=[Function,Array],z7={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_r,onEnter:_r,onAfterEnter:_r,onEnterCancelled:_r,onBeforeLeave:_r,onLeave:_r,onAfterLeave:_r,onLeaveCancelled:_r,onBeforeAppear:_r,onAppear:_r,onAfterAppear:_r,onAppearCancelled:_r},setup(e,{slots:t}){const n=Lt(),s=q3();let o;return()=>{const r=t.default&&p2(t.default(),!0);if(!r||!r.length)return;const i=$n(e),{mode:a}=i,l=r[0];if(s.isLeaving)return mw(l);const u=w_(l);if(!u)return mw(l);const c=Hh(u,i,s,n);Uh(u,c);const d=n.subTree,f=d&&w_(d);let h=!1;const{getTransitionKey:p}=u.type;if(p){const g=p();o===void 0?o=g:g!==o&&(o=g,h=!0)}if(f&&f.type!==xr&&(!hu(u,f)||h)){const g=Hh(f,i,s,n);if(Uh(f,g),a==="out-in")return s.isLeaving=!0,g.afterLeave=()=>{s.isLeaving=!1,n.update()},mw(l);a==="in-out"&&u.type!==xr&&(g.delayLeave=(m,v,b)=>{const $=X3(s,f);$[String(f.key)]=f,m._leaveCb=()=>{v(),m._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=b})}return l}}},Y3=z7;function X3(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Hh(e,t,n,s){const{appear:o,mode:r,persisted:i=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:v,onAppearCancelled:b}=t,$=String(e.key),y=X3(n,e),w=(x,k)=>{x&&jr(x,s,9,k)},C={mode:r,persisted:i,beforeEnter(x){let k=a;if(!n.isMounted)if(o)k=g||a;else return;x._leaveCb&&x._leaveCb(!0);const I=y[$];I&&hu(e,I)&&I.el._leaveCb&&I.el._leaveCb(),w(k,[x])},enter(x){let k=l,I=u,S=c;if(!n.isMounted)if(o)k=m||l,I=v||u,S=b||c;else return;let T=!1;const _=x._enterCb=N=>{T||(T=!0,N?w(S,[x]):w(I,[x]),C.delayedLeave&&C.delayedLeave(),x._enterCb=void 0)};k?(k(x,_),k.length<=1&&_()):_()},leave(x,k){const I=String(e.key);if(x._enterCb&&x._enterCb(!0),n.isUnmounting)return k();w(d,[x]);let S=!1;const T=x._leaveCb=_=>{S||(S=!0,k(),_?w(p,[x]):w(h,[x]),x._leaveCb=void 0,y[I]===e&&delete y[I])};y[I]=e,f?(f(x,T),f.length<=1&&T()):T()},clone(x){return Hh(x,t,n,s)}};return C}function mw(e){if(g0(e))return e=Wu(e),e.children=null,e}function w_(e){return g0(e)?e.children?e.children[0]:void 0:e}function Uh(e,t){e.shapeFlag&6&&e.component?Uh(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function p2(e,t=!1){let n=[],s=0;for(let o=0;o<e.length;o++){const r=e[o];r.type===at?(r.patchFlag&128&&s++,n=n.concat(p2(r.children,t))):(t||r.type!==xr)&&n.push(r)}if(s>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function ge(e){return Ft(e)?{setup:e,name:e.name}:e}const L$=e=>!!e.type.__asyncLoader,g0=e=>e.type.__isKeepAlive;function V7(e,t){Z3(e,"a",t)}function W7(e,t){Z3(e,"da",t)}function Z3(e,t,n=so){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(m0(t,s,n),n){let o=n.parent;for(;o&&o.parent;)g0(o.parent.vnode)&&H7(s,t,n,o),o=o.parent}}function H7(e,t,n,s){const o=m0(t,e,s,!0);Dp(()=>{Qx(s[t],o)},n)}function m0(e,t,n=so,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;lc(),bd(n);const a=jr(t,n,e,i);return Nu(),uc(),a});return s?o.unshift(r):o.push(r),r}}const Da=e=>(t,n=so)=>(!Gh||e==="sp")&&m0(e,t,n),Ap=Da("bm"),Rt=Da("m"),J3=Da("bu"),_i=Da("u"),ls=Da("bum"),Dp=Da("um"),U7=Da("sp"),j7=Da("rtg"),G7=Da("rtc");function K7(e,t=so){m0("ec",e,t)}let B$=!0;function q7(e){const t=eP(e),n=e.proxy,s=e.ctx;B$=!1,t.beforeCreate&&$_(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:i,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:b,destroyed:$,unmounted:y,render:w,renderTracked:C,renderTriggered:x,errorCaptured:k,serverPrefetch:I,expose:S,inheritAttrs:T,components:_,directives:N,filters:O}=t;if(u&&Y7(u,s,null,e.appContext.config.unwrapInjectedRef),i)for(const F in i){const V=i[F];Ft(V)&&(s[F]=V.bind(n))}if(o){const F=o.call(n,n);an(F)&&(e.data=Sn(F))}if(B$=!0,r)for(const F in r){const V=r[F],U=Ft(V)?V.bind(n,n):Ft(V.get)?V.get.bind(n,n):rn,ne=!Ft(V)&&Ft(V.set)?V.set.bind(n):rn,be=R({get:U,set:ne});Object.defineProperty(s,F,{enumerable:!0,configurable:!0,get:()=>be.value,set:te=>be.value=te})}if(a)for(const F in a)Q3(a[F],s,n,F);if(l){const F=Ft(l)?l.call(n):l;Reflect.ownKeys(F).forEach(V=>{Vt(V,F[V])})}c&&$_(c,e,"c");function D(F,V){_t(V)?V.forEach(U=>F(U.bind(n))):V&&F(V.bind(n))}if(D(Ap,d),D(Rt,f),D(J3,h),D(_i,p),D(V7,g),D(W7,m),D(K7,k),D(G7,C),D(j7,x),D(ls,b),D(Dp,y),D(U7,I),_t(S))if(S.length){const F=e.exposed||(e.exposed={});S.forEach(V=>{Object.defineProperty(F,V,{get:()=>n[V],set:U=>n[V]=U})})}else e.exposed||(e.exposed={});w&&e.render===rn&&(e.render=w),T!=null&&(e.inheritAttrs=T),_&&(e.components=_),N&&(e.directives=N)}function Y7(e,t,n=rn,s=!1){_t(e)&&(e=z$(e));for(const o in e){const r=e[o];let i;an(r)?"default"in r?i=Ze(r.from||o,r.default,!0):i=Ze(r.from||o):i=Ze(r),ms(i)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[o]=i}}function $_(e,t,n){jr(_t(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Q3(e,t,n,s){const o=s.includes(".")?K3(n,s):()=>n[s];if(Xt(e)){const r=t[e];Ft(r)&&Oe(o,r)}else if(Ft(e))Oe(o,e.bind(n));else if(an(e))if(_t(e))e.forEach(r=>Q3(r,t,n,s));else{const r=Ft(e.handler)?e.handler.bind(n):t[e.handler];Ft(r)&&Oe(o,r,e)}}function eP(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,a=r.get(t);let l;return a?l=a:!o.length&&!n&&!s?l=t:(l={},o.length&&o.forEach(u=>db(l,u,i,!0)),db(l,t,i)),r.set(t,l),l}function db(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&db(e,r,n,!0),o&&o.forEach(i=>db(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const a=X7[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const X7={data:C_,props:ru,emits:ru,methods:ru,computed:ru,beforeCreate:Po,created:Po,beforeMount:Po,mounted:Po,beforeUpdate:Po,updated:Po,beforeDestroy:Po,beforeUnmount:Po,destroyed:Po,unmounted:Po,activated:Po,deactivated:Po,errorCaptured:Po,serverPrefetch:Po,components:ru,directives:ru,watch:J7,provide:C_,inject:Z7};function C_(e,t){return t?e?function(){return ao(Ft(e)?e.call(this,this):e,Ft(t)?t.call(this,this):t)}:t:e}function Z7(e,t){return ru(z$(e),z$(t))}function z$(e){if(_t(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Po(e,t){return e?[...new Set([].concat(e,t))]:t}function ru(e,t){return e?ao(ao(Object.create(null),e),t):t}function J7(e,t){if(!e)return t;if(!t)return e;const n=ao(Object.create(null),e);for(const s in t)n[s]=Po(e[s],t[s]);return n}function Q7(e,t,n,s=!1){const o={},r={};ib(r,b0,1),e.propsDefaults=Object.create(null),tP(e,t,o,r);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);n?e.props=s?o:m7(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function eq(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=e,a=$n(o),[l]=e.propsOptions;let u=!1;if((s||i>0)&&!(i&16)){if(i&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];const h=t[f];if(l)if(Ht(r,f))h!==r[f]&&(r[f]=h,u=!0);else{const p=Kr(f);o[p]=V$(l,a,p,h,e,!1)}else h!==r[f]&&(r[f]=h,u=!0)}}}else{tP(e,t,o,r)&&(u=!0);let c;for(const d in a)(!t||!Ht(t,d)&&((c=kl(d))===d||!Ht(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(o[d]=V$(l,a,d,void 0,e,!0)):delete o[d]);if(r!==a)for(const d in r)(!t||!Ht(t,d)&&!0)&&(delete r[d],u=!0)}u&&Sa(e,"set","$attrs")}function tP(e,t,n,s){const[o,r]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(Cv(l))continue;const u=t[l];let c;o&&Ht(o,c=Kr(l))?!r||!r.includes(c)?n[c]=u:(a||(a={}))[c]=u:f2(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,i=!0)}if(r){const l=$n(n),u=a||Qn;for(let c=0;c<r.length;c++){const d=r[c];n[d]=V$(o,l,d,u[d],e,!Ht(u,d))}}return i}function V$(e,t,n,s,o,r){const i=e[n];if(i!=null){const a=Ht(i,"default");if(a&&s===void 0){const l=i.default;if(i.type!==Function&&Ft(l)){const{propsDefaults:u}=o;n in u?s=u[n]:(bd(o),s=u[n]=l.call(null,t),Nu())}else s=l}i[0]&&(r&&!a?s=!1:i[1]&&(s===""||s===kl(n))&&(s=!0))}return s}function nP(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const r=e.props,i={},a=[];let l=!1;if(!Ft(e)){const c=d=>{l=!0;const[f,h]=nP(d,t,!0);ao(i,f),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return s.set(e,rd),rd;if(_t(r))for(let c=0;c<r.length;c++){const d=Kr(r[c]);x_(d)&&(i[d]=Qn)}else if(r)for(const c in r){const d=Kr(c);if(x_(d)){const f=r[c],h=i[d]=_t(f)||Ft(f)?{type:f}:f;if(h){const p=I_(Boolean,h.type),g=I_(String,h.type);h[0]=p>-1,h[1]=g<0||p<g,(p>-1||Ht(h,"default"))&&a.push(d)}}}const u=[i,a];return s.set(e,u),u}function x_(e){return e[0]!=="$"}function k_(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function S_(e,t){return k_(e)===k_(t)}function I_(e,t){return _t(t)?t.findIndex(n=>S_(n,e)):Ft(t)&&S_(t,e)?0:-1}const sP=e=>e[0]==="_"||e==="$stable",g2=e=>_t(e)?e.map(Fi):[Fi(e)],tq=(e,t,n)=>{const s=re((...o)=>g2(t(...o)),n);return s._c=!1,s},oP=(e,t,n)=>{const s=e._ctx;for(const o in e){if(sP(o))continue;const r=e[o];if(Ft(r))t[o]=tq(o,r,s);else if(r!=null){const i=g2(r);t[o]=()=>i}}},rP=(e,t)=>{const n=g2(t);e.slots.default=()=>n},nq=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=$n(t),ib(t,"_",n)):oP(t,e.slots={})}else e.slots={},t&&rP(e,t);ib(e.slots,b0,1)},sq=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,i=Qn;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:(ao(o,t),!n&&a===1&&delete o._):(r=!t.$stable,oP(t,o)),i=t}else t&&(rP(e,t),i={default:1});if(r)for(const a in o)!sP(a)&&!(a in i)&&delete o[a]};function $t(e,t){const n=br;if(n===null)return e;const s=n.proxy,o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,l,u=Qn]=t[r];Ft(i)&&(i={mounted:i,updated:i}),i.deep&&yu(a),o.push({dir:i,instance:s,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function ql(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let i=0;i<o.length;i++){const a=o[i];r&&(a.oldValue=r[i].value);let l=a.dir[s];l&&(lc(),jr(l,n,8,[e.el,a,e,t]),uc())}}function iP(){return{app:null,config:{isNativeTag:P9,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oq=0;function rq(e,t){return function(s,o=null){o!=null&&!an(o)&&(o=null);const r=iP(),i=new Set;let a=!1;const l=r.app={_uid:oq++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:Tq,get config(){return r.config},set config(u){},use(u,...c){return i.has(u)||(u&&Ft(u.install)?(i.add(u),u.install(l,...c)):Ft(u)&&(i.add(u),u(l,...c))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,c){return c?(r.components[u]=c,l):r.components[u]},directive(u,c){return c?(r.directives[u]=c,l):r.directives[u]},mount(u,c,d){if(!a){const f=le(s,o);return f.appContext=r,c&&t?t(f,u):e(f,u,d),a=!0,l._container=u,u.__vue_app__=l,w2(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return r.provides[u]=c,l}};return l}}function W$(e,t,n,s,o=!1){if(_t(e)){e.forEach((f,h)=>W$(f,t&&(_t(t)?t[h]:t),n,s,o));return}if(L$(s)&&!o)return;const r=s.shapeFlag&4?w2(s.component)||s.component.proxy:s.el,i=o?null:r,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Qn?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Xt(u)?(c[u]=null,Ht(d,u)&&(d[u]=null)):ms(u)&&(u.value=null)),Ft(l))$a(l,a,12,[i,c]);else{const f=Xt(l),h=ms(l);if(f||h){const p=()=>{if(e.f){const g=f?c[l]:l.value;o?_t(g)&&Qx(g,r):_t(g)?g.includes(r)||g.push(r):f?c[l]=[r]:(l.value=[r],e.k&&(c[e.k]=l.value))}else f?(c[l]=i,Ht(d,l)&&(d[l]=i)):ms(l)&&(l.value=i,e.k&&(c[e.k]=i))};i?(p.id=-1,Ko(p,n)):p()}}}const Ko=L7;function iq(e){return aq(e)}function aq(e,t){const n=V9();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:i,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=rn,cloneNode:p,insertStaticContent:g}=e,m=(j,Q,H,se=null,we=null,J=null,_e=!1,Ie=null,fe=!!Q.dynamicChildren)=>{if(j===Q)return;j&&!hu(j,Q)&&(se=ae(j),he(j,we,J,!0),j=null),Q.patchFlag===-2&&(fe=!1,Q.dynamicChildren=null);const{type:Te,ref:rt,shapeFlag:Xe}=Q;switch(Te){case Rp:v(j,Q,H,se);break;case xr:b(j,Q,H,se);break;case vw:j==null&&$(Q,H,se,_e);break;case at:N(j,Q,H,se,we,J,_e,Ie,fe);break;default:Xe&1?C(j,Q,H,se,we,J,_e,Ie,fe):Xe&6?O(j,Q,H,se,we,J,_e,Ie,fe):(Xe&64||Xe&128)&&Te.process(j,Q,H,se,we,J,_e,Ie,fe,Le)}rt!=null&&we&&W$(rt,j&&j.ref,J,Q||j,!Q)},v=(j,Q,H,se)=>{if(j==null)s(Q.el=a(Q.children),H,se);else{const we=Q.el=j.el;Q.children!==j.children&&u(we,Q.children)}},b=(j,Q,H,se)=>{j==null?s(Q.el=l(Q.children||""),H,se):Q.el=j.el},$=(j,Q,H,se)=>{[j.el,j.anchor]=g(j.children,Q,H,se,j.el,j.anchor)},y=({el:j,anchor:Q},H,se)=>{let we;for(;j&&j!==Q;)we=f(j),s(j,H,se),j=we;s(Q,H,se)},w=({el:j,anchor:Q})=>{let H;for(;j&&j!==Q;)H=f(j),o(j),j=H;o(Q)},C=(j,Q,H,se,we,J,_e,Ie,fe)=>{_e=_e||Q.type==="svg",j==null?x(Q,H,se,we,J,_e,Ie,fe):S(j,Q,we,J,_e,Ie,fe)},x=(j,Q,H,se,we,J,_e,Ie)=>{let fe,Te;const{type:rt,props:Xe,shapeFlag:lt,transition:vt,patchFlag:Ye,dirs:de}=j;if(j.el&&p!==void 0&&Ye===-1)fe=j.el=p(j.el);else{if(fe=j.el=i(j.type,J,Xe&&Xe.is,Xe),lt&8?c(fe,j.children):lt&16&&I(j.children,fe,null,se,we,J&&rt!=="foreignObject",_e,Ie),de&&ql(j,null,se,"created"),Xe){for(const Ge in Xe)Ge!=="value"&&!Cv(Ge)&&r(fe,Ge,null,Xe[Ge],J,j.children,se,we,X);"value"in Xe&&r(fe,"value",null,Xe.value),(Te=Xe.onVnodeBeforeMount)&&Mi(Te,se,j)}k(fe,j,j.scopeId,_e,se)}de&&ql(j,null,se,"beforeMount");const De=(!we||we&&!we.pendingBranch)&&vt&&!vt.persisted;De&&vt.beforeEnter(fe),s(fe,Q,H),((Te=Xe&&Xe.onVnodeMounted)||De||de)&&Ko(()=>{Te&&Mi(Te,se,j),De&&vt.enter(fe),de&&ql(j,null,se,"mounted")},we)},k=(j,Q,H,se,we)=>{if(H&&h(j,H),se)for(let J=0;J<se.length;J++)h(j,se[J]);if(we){let J=we.subTree;if(Q===J){const _e=we.vnode;k(j,_e,_e.scopeId,_e.slotScopeIds,we.parent)}}},I=(j,Q,H,se,we,J,_e,Ie,fe=0)=>{for(let Te=fe;Te<j.length;Te++){const rt=j[Te]=Ie?Za(j[Te]):Fi(j[Te]);m(null,rt,Q,H,se,we,J,_e,Ie)}},S=(j,Q,H,se,we,J,_e)=>{const Ie=Q.el=j.el;let{patchFlag:fe,dynamicChildren:Te,dirs:rt}=Q;fe|=j.patchFlag&16;const Xe=j.props||Qn,lt=Q.props||Qn;let vt;H&&Yl(H,!1),(vt=lt.onVnodeBeforeUpdate)&&Mi(vt,H,Q,j),rt&&ql(Q,j,H,"beforeUpdate"),H&&Yl(H,!0);const Ye=we&&Q.type!=="foreignObject";if(Te?T(j.dynamicChildren,Te,Ie,H,se,Ye,J):_e||U(j,Q,Ie,null,H,se,Ye,J,!1),fe>0){if(fe&16)_(Ie,Q,Xe,lt,H,se,we);else if(fe&2&&Xe.class!==lt.class&&r(Ie,"class",null,lt.class,we),fe&4&&r(Ie,"style",Xe.style,lt.style,we),fe&8){const de=Q.dynamicProps;for(let De=0;De<de.length;De++){const Ge=de[De],Ne=Xe[Ge],ct=lt[Ge];(ct!==Ne||Ge==="value")&&r(Ie,Ge,Ne,ct,we,j.children,H,se,X)}}fe&1&&j.children!==Q.children&&c(Ie,Q.children)}else!_e&&Te==null&&_(Ie,Q,Xe,lt,H,se,we);((vt=lt.onVnodeUpdated)||rt)&&Ko(()=>{vt&&Mi(vt,H,Q,j),rt&&ql(Q,j,H,"updated")},se)},T=(j,Q,H,se,we,J,_e)=>{for(let Ie=0;Ie<Q.length;Ie++){const fe=j[Ie],Te=Q[Ie],rt=fe.el&&(fe.type===at||!hu(fe,Te)||fe.shapeFlag&70)?d(fe.el):H;m(fe,Te,rt,null,se,we,J,_e,!0)}},_=(j,Q,H,se,we,J,_e)=>{if(H!==se){for(const Ie in se){if(Cv(Ie))continue;const fe=se[Ie],Te=H[Ie];fe!==Te&&Ie!=="value"&&r(j,Ie,Te,fe,_e,Q.children,we,J,X)}if(H!==Qn)for(const Ie in H)!Cv(Ie)&&!(Ie in se)&&r(j,Ie,H[Ie],null,_e,Q.children,we,J,X);"value"in se&&r(j,"value",H.value,se.value)}},N=(j,Q,H,se,we,J,_e,Ie,fe)=>{const Te=Q.el=j?j.el:a(""),rt=Q.anchor=j?j.anchor:a("");let{patchFlag:Xe,dynamicChildren:lt,slotScopeIds:vt}=Q;vt&&(Ie=Ie?Ie.concat(vt):vt),j==null?(s(Te,H,se),s(rt,H,se),I(Q.children,H,rt,we,J,_e,Ie,fe)):Xe>0&&Xe&64&&lt&&j.dynamicChildren?(T(j.dynamicChildren,lt,H,we,J,_e,Ie),(Q.key!=null||we&&Q===we.subTree)&&m2(j,Q,!0)):U(j,Q,H,rt,we,J,_e,Ie,fe)},O=(j,Q,H,se,we,J,_e,Ie,fe)=>{Q.slotScopeIds=Ie,j==null?Q.shapeFlag&512?we.ctx.activate(Q,H,se,_e,fe):M(Q,H,se,we,J,_e,fe):D(j,Q,fe)},M=(j,Q,H,se,we,J,_e)=>{const Ie=j.component=yq(j,se,we);if(g0(j)&&(Ie.ctx.renderer=Le),wq(Ie),Ie.asyncDep){if(we&&we.registerDep(Ie,F),!j.el){const fe=Ie.subTree=le(xr);b(null,fe,Q,H)}return}F(Ie,j,Q,H,we,J,_e)},D=(j,Q,H)=>{const se=Q.component=j.component;if(M7(j,Q,H))if(se.asyncDep&&!se.asyncResolved){V(se,Q,H);return}else se.next=Q,_7(se.update),se.update();else Q.component=j.component,Q.el=j.el,se.vnode=Q},F=(j,Q,H,se,we,J,_e)=>{const Ie=()=>{if(j.isMounted){let{next:rt,bu:Xe,u:lt,parent:vt,vnode:Ye}=j,de=rt,De;Yl(j,!1),rt?(rt.el=Ye.el,V(j,rt,_e)):rt=Ye,Xe&&kv(Xe),(De=rt.props&&rt.props.onVnodeBeforeUpdate)&&Mi(De,vt,rt,Ye),Yl(j,!0);const Ge=gw(j),Ne=j.subTree;j.subTree=Ge,m(Ne,Ge,d(Ne.el),ae(Ne),j,we,J),rt.el=Ge.el,de===null&&P7(j,Ge.el),lt&&Ko(lt,we),(De=rt.props&&rt.props.onVnodeUpdated)&&Ko(()=>Mi(De,vt,rt,Ye),we)}else{let rt;const{el:Xe,props:lt}=Q,{bm:vt,m:Ye,parent:de}=j,De=L$(Q);if(Yl(j,!1),vt&&kv(vt),!De&&(rt=lt&&lt.onVnodeBeforeMount)&&Mi(rt,de,Q),Yl(j,!0),Xe&&Fe){const Ge=()=>{j.subTree=gw(j),Fe(Xe,j.subTree,j,we,null)};De?Q.type.__asyncLoader().then(()=>!j.isUnmounted&&Ge()):Ge()}else{const Ge=j.subTree=gw(j);m(null,Ge,H,se,j,we,J),Q.el=Ge.el}if(Ye&&Ko(Ye,we),!De&&(rt=lt&&lt.onVnodeMounted)){const Ge=Q;Ko(()=>Mi(rt,de,Ge),we)}Q.shapeFlag&256&&j.a&&Ko(j.a,we),j.isMounted=!0,Q=H=se=null}},fe=j.effect=new s2(Ie,()=>V3(j.update),j.scope),Te=j.update=fe.run.bind(fe);Te.id=j.uid,Yl(j,!0),Te()},V=(j,Q,H)=>{Q.component=j;const se=j.vnode.props;j.vnode=Q,j.next=null,eq(j,Q.props,se,H),sq(j,Q.children,H),lc(),d2(void 0,j.update),uc()},U=(j,Q,H,se,we,J,_e,Ie,fe=!1)=>{const Te=j&&j.children,rt=j?j.shapeFlag:0,Xe=Q.children,{patchFlag:lt,shapeFlag:vt}=Q;if(lt>0){if(lt&128){be(Te,Xe,H,se,we,J,_e,Ie,fe);return}else if(lt&256){ne(Te,Xe,H,se,we,J,_e,Ie,fe);return}}vt&8?(rt&16&&X(Te,we,J),Xe!==Te&&c(H,Xe)):rt&16?vt&16?be(Te,Xe,H,se,we,J,_e,Ie,fe):X(Te,we,J,!0):(rt&8&&c(H,""),vt&16&&I(Xe,H,se,we,J,_e,Ie,fe))},ne=(j,Q,H,se,we,J,_e,Ie,fe)=>{j=j||rd,Q=Q||rd;const Te=j.length,rt=Q.length,Xe=Math.min(Te,rt);let lt;for(lt=0;lt<Xe;lt++){const vt=Q[lt]=fe?Za(Q[lt]):Fi(Q[lt]);m(j[lt],vt,H,null,we,J,_e,Ie,fe)}Te>rt?X(j,we,J,!0,!1,Xe):I(Q,H,se,we,J,_e,Ie,fe,Xe)},be=(j,Q,H,se,we,J,_e,Ie,fe)=>{let Te=0;const rt=Q.length;let Xe=j.length-1,lt=rt-1;for(;Te<=Xe&&Te<=lt;){const vt=j[Te],Ye=Q[Te]=fe?Za(Q[Te]):Fi(Q[Te]);if(hu(vt,Ye))m(vt,Ye,H,null,we,J,_e,Ie,fe);else break;Te++}for(;Te<=Xe&&Te<=lt;){const vt=j[Xe],Ye=Q[lt]=fe?Za(Q[lt]):Fi(Q[lt]);if(hu(vt,Ye))m(vt,Ye,H,null,we,J,_e,Ie,fe);else break;Xe--,lt--}if(Te>Xe){if(Te<=lt){const vt=lt+1,Ye=vt<rt?Q[vt].el:se;for(;Te<=lt;)m(null,Q[Te]=fe?Za(Q[Te]):Fi(Q[Te]),H,Ye,we,J,_e,Ie,fe),Te++}}else if(Te>lt)for(;Te<=Xe;)he(j[Te],we,J,!0),Te++;else{const vt=Te,Ye=Te,de=new Map;for(Te=Ye;Te<=lt;Te++){const Kt=Q[Te]=fe?Za(Q[Te]):Fi(Q[Te]);Kt.key!=null&&de.set(Kt.key,Te)}let De,Ge=0;const Ne=lt-Ye+1;let ct=!1,wt=0;const on=new Array(Ne);for(Te=0;Te<Ne;Te++)on[Te]=0;for(Te=vt;Te<=Xe;Te++){const Kt=j[Te];if(Ge>=Ne){he(Kt,we,J,!0);continue}let Ln;if(Kt.key!=null)Ln=de.get(Kt.key);else for(De=Ye;De<=lt;De++)if(on[De-Ye]===0&&hu(Kt,Q[De])){Ln=De;break}Ln===void 0?he(Kt,we,J,!0):(on[Ln-Ye]=Te+1,Ln>=wt?wt=Ln:ct=!0,m(Kt,Q[Ln],H,null,we,J,_e,Ie,fe),Ge++)}const cn=ct?lq(on):rd;for(De=cn.length-1,Te=Ne-1;Te>=0;Te--){const Kt=Ye+Te,Ln=Q[Kt],ur=Kt+1<rt?Q[Kt+1].el:se;on[Te]===0?m(null,Ln,H,ur,we,J,_e,Ie,fe):ct&&(De<0||Te!==cn[De]?te(Ln,H,ur,2):De--)}}},te=(j,Q,H,se,we=null)=>{const{el:J,type:_e,transition:Ie,children:fe,shapeFlag:Te}=j;if(Te&6){te(j.component.subTree,Q,H,se);return}if(Te&128){j.suspense.move(Q,H,se);return}if(Te&64){_e.move(j,Q,H,Le);return}if(_e===at){s(J,Q,H);for(let Xe=0;Xe<fe.length;Xe++)te(fe[Xe],Q,H,se);s(j.anchor,Q,H);return}if(_e===vw){y(j,Q,H);return}if(se!==2&&Te&1&&Ie)if(se===0)Ie.beforeEnter(J),s(J,Q,H),Ko(()=>Ie.enter(J),we);else{const{leave:Xe,delayLeave:lt,afterLeave:vt}=Ie,Ye=()=>s(J,Q,H),de=()=>{Xe(J,()=>{Ye(),vt&&vt()})};lt?lt(J,Ye,de):de()}else s(J,Q,H)},he=(j,Q,H,se=!1,we=!1)=>{const{type:J,props:_e,ref:Ie,children:fe,dynamicChildren:Te,shapeFlag:rt,patchFlag:Xe,dirs:lt}=j;if(Ie!=null&&W$(Ie,null,H,j,!0),rt&256){Q.ctx.deactivate(j);return}const vt=rt&1&&lt,Ye=!L$(j);let de;if(Ye&&(de=_e&&_e.onVnodeBeforeUnmount)&&Mi(de,Q,j),rt&6)Y(j.component,H,se);else{if(rt&128){j.suspense.unmount(H,se);return}vt&&ql(j,null,Q,"beforeUnmount"),rt&64?j.type.remove(j,Q,H,we,Le,se):Te&&(J!==at||Xe>0&&Xe&64)?X(Te,Q,H,!1,!0):(J===at&&Xe&384||!we&&rt&16)&&X(fe,Q,H),se&&oe(j)}(Ye&&(de=_e&&_e.onVnodeUnmounted)||vt)&&Ko(()=>{de&&Mi(de,Q,j),vt&&ql(j,null,Q,"unmounted")},H)},oe=j=>{const{type:Q,el:H,anchor:se,transition:we}=j;if(Q===at){G(H,se);return}if(Q===vw){w(j);return}const J=()=>{o(H),we&&!we.persisted&&we.afterLeave&&we.afterLeave()};if(j.shapeFlag&1&&we&&!we.persisted){const{leave:_e,delayLeave:Ie}=we,fe=()=>_e(H,J);Ie?Ie(j.el,J,fe):fe()}else J()},G=(j,Q)=>{let H;for(;j!==Q;)H=f(j),o(j),j=H;o(Q)},Y=(j,Q,H)=>{const{bum:se,scope:we,update:J,subTree:_e,um:Ie}=j;se&&kv(se),we.stop(),J&&(J.active=!1,he(_e,j,Q,H)),Ie&&Ko(Ie,Q),Ko(()=>{j.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},X=(j,Q,H,se=!1,we=!1,J=0)=>{for(let _e=J;_e<j.length;_e++)he(j[_e],Q,H,se,we)},ae=j=>j.shapeFlag&6?ae(j.component.subTree):j.shapeFlag&128?j.suspense.next():f(j.anchor||j.el),Se=(j,Q,H)=>{j==null?Q._vnode&&he(Q._vnode,null,null,!0):m(Q._vnode||null,j,Q,null,null,null,H),U3(),Q._vnode=j},Le={p:m,um:he,m:te,r:oe,mt:M,mc:I,pc:U,pbc:T,n:ae,o:e};let Be,Fe;return t&&([Be,Fe]=t(Le)),{render:Se,hydrate:Be,createApp:rq(Se,Be)}}function Yl({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function m2(e,t,n=!1){const s=e.children,o=t.children;if(_t(s)&&_t(o))for(let r=0;r<s.length;r++){const i=s[r];let a=o[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[r]=Za(o[r]),a.el=i.el),n||m2(i,a))}}function lq(e){const t=e.slice(),n=[0];let s,o,r,i,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,e[n[a]]<u?r=a+1:i=a;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}const uq=e=>e.__isTeleport,yh=e=>e&&(e.disabled||e.disabled===""),T_=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,H$=(e,t)=>{const n=e&&e.to;return Xt(n)?t?t(n):null:n},cq={__isTeleport:!0,process(e,t,n,s,o,r,i,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:g,createComment:m}}=u,v=yh(t.props);let{shapeFlag:b,children:$,dynamicChildren:y}=t;if(e==null){const w=t.el=g(""),C=t.anchor=g("");h(w,n,s),h(C,n,s);const x=t.target=H$(t.props,p),k=t.targetAnchor=g("");x&&(h(k,x),i=i||T_(x));const I=(S,T)=>{b&16&&c($,S,T,o,r,i,a,l)};v?I(n,C):x&&I(x,k)}else{t.el=e.el;const w=t.anchor=e.anchor,C=t.target=e.target,x=t.targetAnchor=e.targetAnchor,k=yh(e.props),I=k?n:C,S=k?w:x;if(i=i||T_(C),y?(f(e.dynamicChildren,y,I,o,r,i,a),m2(e,t,!0)):l||d(e,t,I,S,o,r,i,a,!1),v)k||Mm(t,n,w,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const T=t.target=H$(t.props,p);T&&Mm(t,T,null,u,0)}else k&&Mm(t,C,x,u,1)}},remove(e,t,n,s,{um:o,o:{remove:r}},i){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:d,props:f}=e;if(d&&r(c),(i||!yh(f))&&(r(u),a&16))for(let h=0;h<l.length;h++){const p=l[h];o(p,t,n,!0,!!p.dynamicChildren)}},move:Mm,hydrate:dq};function Mm(e,t,n,{o:{insert:s},m:o},r=2){r===0&&s(e.targetAnchor,t,n);const{el:i,anchor:a,shapeFlag:l,children:u,props:c}=e,d=r===2;if(d&&s(i,t,n),(!d||yh(c))&&l&16)for(let f=0;f<u.length;f++)o(u[f],t,n,2);d&&s(a,t,n)}function dq(e,t,n,s,o,r,{o:{nextSibling:i,parentNode:a,querySelector:l}},u){const c=t.target=H$(t.props,l);if(c){const d=c._lpa||c.firstChild;t.shapeFlag&16&&(yh(t.props)?(t.anchor=u(i(e),t,a(e),n,s,o,r),t.targetAnchor=d):(t.anchor=i(e),t.targetAnchor=u(d,t,c,n,s,o,r)),c._lpa=t.targetAnchor&&i(t.targetAnchor))}return t.anchor&&i(t.anchor)}const v0=cq,v2="components",fq="directives";function ie(e,t){return b2(v2,e,!0,t)||e}const aP=Symbol();function tn(e){return Xt(e)?b2(v2,e,!1)||e:e||aP}function Vo(e){return b2(fq,e)}function b2(e,t,n=!0,s=!1){const o=br||so;if(o){const r=o.type;if(e===v2){const a=hP(r);if(a&&(a===t||a===Kr(t)||a===gr(Kr(t))))return r}const i=E_(o[e]||r[e],t)||E_(o.appContext[e],t);return!i&&s?r:i}}function E_(e,t){return e&&(e[t]||e[Kr(t)]||e[gr(Kr(t))])}const at=Symbol(void 0),Rp=Symbol(void 0),xr=Symbol(void 0),vw=Symbol(void 0),wh=[];let _u=null;function A(e=!1){wh.push(_u=e?null:[])}function hq(){wh.pop(),_u=wh[wh.length-1]||null}let fb=1;function __(e){fb+=e}function lP(e){return e.dynamicChildren=fb>0?_u||rd:null,hq(),fb>0&&_u&&_u.push(e),e}function B(e,t,n,s,o,r){return lP(W(e,t,n,s,o,r,!0))}function ve(e,t,n,s,o){return lP(le(e,t,n,s,o,!0))}function As(e){return e?e.__v_isVNode===!0:!1}function hu(e,t){return e.type===t.type&&e.key===t.key}const b0="__vInternal",uP=({key:e})=>e!=null?e:null,Sv=({ref:e,ref_key:t,ref_for:n})=>e!=null?Xt(e)||ms(e)||Ft(e)?{i:br,r:e,k:t,f:!!n}:e:null;function W(e,t=null,n=null,s=0,o=null,r=e===at?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&uP(t),ref:t&&Sv(t),scopeId:p0,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return a?(y2(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Xt(n)?8:16),fb>0&&!i&&_u&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&_u.push(l),l}const le=pq;function pq(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===aP)&&(e=xr),As(e)){const a=Wu(e,t,!0);return n&&y2(a,n),a}if(Iq(e)&&(e=e.__vccOpts),t){t=Vu(t);let{class:a,style:l}=t;a&&!Xt(a)&&(t.class=q(a)),an(l)&&(P3(l)&&!_t(l)&&(l=ao({},l)),t.style=nt(l))}const i=Xt(e)?1:F7(e)?128:uq(e)?64:an(e)?4:Ft(e)?2:0;return W(e,t,n,s,o,i,r,!0)}function Vu(e){return e?P3(e)||b0 in e?ao({},e):e:null}function Wu(e,t,n=!1){const{props:s,ref:o,patchFlag:r,children:i}=e,a=t?lo(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&uP(a),ref:t&&t.ref?n&&o?_t(o)?o.concat(Sv(t)):[o,Sv(t)]:Sv(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==at?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Wu(e.ssContent),ssFallback:e.ssFallback&&Wu(e.ssFallback),el:e.el,anchor:e.anchor}}function qt(e=" ",t=0){return le(Rp,null,e,t)}function ce(e="",t=!1){return t?(A(),ve(xr,null,e)):le(xr,null,e)}function Fi(e){return e==null||typeof e=="boolean"?le(xr):_t(e)?le(at,null,e.slice()):typeof e=="object"?Za(e):le(Rp,null,String(e))}function Za(e){return e.el===null||e.memo?e:Wu(e)}function y2(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(_t(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),y2(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(b0 in t)?t._ctx=br:o===3&&br&&(br.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ft(t)?(t={default:t,_ctx:br},n=32):(t=String(t),s&64?(n=16,t=[qt(t)]):n=8);e.children=t,e.shapeFlag|=n}function lo(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=q([t.class,s.class]));else if(o==="style")t.style=nt([t.style,s.style]);else if(u0(o)){const r=t[o],i=s[o];i&&r!==i&&!(_t(r)&&r.includes(i))&&(t[o]=r?[].concat(r,i):i)}else o!==""&&(t[o]=s[o])}return t}function Mi(e,t,n,s=null){jr(e,t,7,[n,s])}function Zt(e,t,n,s){let o;const r=n&&n[s];if(_t(e)||Xt(e)){o=new Array(e.length);for(let i=0,a=e.length;i<a;i++)o[i]=t(e[i],i,void 0,r&&r[i])}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,r&&r[i])}else if(an(e))if(e[Symbol.iterator])o=Array.from(e,(i,a)=>t(i,a,void 0,r&&r[a]));else{const i=Object.keys(e);o=new Array(i.length);for(let a=0,l=i.length;a<l;a++){const u=i[a];o[a]=t(e[u],u,a,r&&r[a])}}else o=[];return n&&(n[s]=o),o}function jh(e,t){for(let n=0;n<t.length;n++){const s=t[n];if(_t(s))for(let o=0;o<s.length;o++)e[s[o].name]=s[o].fn;else s&&(e[s.name]=s.fn)}return e}function Re(e,t,n={},s,o){if(br.isCE)return le("slot",t==="default"?null:{name:t},s&&s());let r=e[t];r&&r._c&&(r._d=!1),A();const i=r&&cP(r(n)),a=ve(at,{key:n.key||`_${t}`},i||(s?s():[]),i&&e._===1?64:-2);return!o&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function cP(e){return e.some(t=>As(t)?!(t.type===xr||t.type===at&&!cP(t.children)):!0)?e:null}function gq(e){const t={};for(const n in e)t[xv(n)]=e[n];return t}const U$=e=>e?dP(e)?w2(e)||e.proxy:U$(e.parent):null,hb=ao(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>U$(e.parent),$root:e=>U$(e.root),$emit:e=>e.emit,$options:e=>eP(e),$forceUpdate:e=>()=>V3(e.update),$nextTick:e=>dt.bind(e.proxy),$watch:e=>B7.bind(e)}),mq={get({_:e},t){const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(s!==Qn&&Ht(s,t))return i[t]=1,s[t];if(o!==Qn&&Ht(o,t))return i[t]=2,o[t];if((u=e.propsOptions[0])&&Ht(u,t))return i[t]=3,r[t];if(n!==Qn&&Ht(n,t))return i[t]=4,n[t];B$&&(i[t]=0)}}const c=hb[t];let d,f;if(c)return t==="$attrs"&&Cr(e,"get",t),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==Qn&&Ht(n,t))return i[t]=4,n[t];if(f=l.config.globalProperties,Ht(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return o!==Qn&&Ht(o,t)?(o[t]=n,!0):s!==Qn&&Ht(s,t)?(s[t]=n,!0):Ht(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r}},i){let a;return!!n[i]||e!==Qn&&Ht(e,i)||t!==Qn&&Ht(t,i)||(a=r[0])&&Ht(a,i)||Ht(s,i)||Ht(hb,i)||Ht(o.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?this.set(e,t,n.get(),null):n.value!=null&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},vq=iP();let bq=0;function yq(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||vq,r={uid:bq++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new x3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nP(s,o),emitsOptions:G3(s,o),emit:null,emitted:null,propsDefaults:Qn,inheritAttrs:s.inheritAttrs,ctx:Qn,data:Qn,props:Qn,attrs:Qn,slots:Qn,refs:Qn,setupState:Qn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=D7.bind(null,r),e.ce&&e.ce(r),r}let so=null;const Lt=()=>so||br,bd=e=>{so=e,e.scope.on()},Nu=()=>{so&&so.scope.off(),so=null};function dP(e){return e.vnode.shapeFlag&4}let Gh=!1;function wq(e,t=!1){Gh=t;const{props:n,children:s}=e.vnode,o=dP(e);Q7(e,n,o,t),nq(e,s);const r=o?$q(e,t):void 0;return Gh=!1,r}function $q(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=zh(new Proxy(e.ctx,mq));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?xq(e):null;bd(e),lc();const r=$a(s,e,0,[e.props,o]);if(uc(),Nu(),vd(r)){if(r.then(Nu,Nu),t)return r.then(i=>{N_(e,i,t)}).catch(i=>{h0(i,e,0)});e.asyncDep=r}else N_(e,r,t)}else fP(e,t)}function N_(e,t,n){Ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:an(t)&&(e.setupState=lb(t)),fP(e,n)}let A_;function fP(e,t,n){const s=e.type;if(!e.render){if(!t&&A_&&!s.render){const o=s.template;if(o){const{isCustomElement:r,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:l}=s,u=ao(ao({isCustomElement:r,delimiters:a},i),l);s.render=A_(o,u)}}e.render=s.render||rn}bd(e),lc(),q7(e),uc(),Nu()}function Cq(e){return new Proxy(e.attrs,{get(t,n){return Cr(e,"get","$attrs"),t[n]}})}function xq(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=Cq(e))},slots:e.slots,emit:e.emit,expose:t}}function w2(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(lb(zh(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in hb)return hb[n](e)}}))}const kq=/(?:^|[-_])(\w)/g,Sq=e=>e.replace(kq,t=>t.toUpperCase()).replace(/[-_]/g,"");function hP(e){return Ft(e)&&e.displayName||e.name}function pP(e,t,n=!1){let s=hP(t);if(!s&&t.__file){const o=t.__file.match(/([^/\\]+)\.\w+$/);o&&(s=o[1])}if(!s&&e&&e.parent){const o=r=>{for(const i in r)if(r[i]===t)return i};s=o(e.components||e.parent.type.components)||o(e.appContext.components)}return s?Sq(s):n?"App":"Anonymous"}function Iq(e){return Ft(e)&&"__vccOpts"in e}const R=(e,t)=>$7(e,t,Gh);function He(e,t,n){const s=arguments.length;return s===2?an(t)&&!_t(t)?As(t)?le(e,null,[t]):le(e,t):le(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&As(n)&&(n=[n]),le(e,t,n))}const Tq="3.2.31",Eq="http://www.w3.org/2000/svg",pu=typeof document!="undefined"?document:null,D_=pu&&pu.createElement("template"),_q={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t?pu.createElementNS(Eq,e):pu.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>pu.createTextNode(e),createComment:e=>pu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>pu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,s,o,r){const i=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{D_.innerHTML=s?`<svg>${e}</svg>`:e;const a=D_.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Nq(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Aq(e,t,n){const s=e.style,o=Xt(n);if(n&&!o){for(const r in n)j$(s,r,n[r]);if(t&&!Xt(t))for(const r in t)n[r]==null&&j$(s,r,"")}else{const r=s.display;o?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=r)}}const R_=/\s*!important$/;function j$(e,t,n){if(_t(n))n.forEach(s=>j$(e,t,s));else if(t.startsWith("--"))e.setProperty(t,n);else{const s=Dq(e,t);R_.test(n)?e.setProperty(kl(s),n.replace(R_,""),"important"):e[s]=n}}const O_=["Webkit","Moz","ms"],bw={};function Dq(e,t){const n=bw[t];if(n)return n;let s=Kr(t);if(s!=="filter"&&s in e)return bw[t]=s;s=gr(s);for(let o=0;o<O_.length;o++){const r=O_[o]+s;if(r in e)return bw[t]=r}return t}const M_="http://www.w3.org/1999/xlink";function Rq(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(M_,t.slice(6,t.length)):e.setAttributeNS(M_,t,n);else{const r=A9(t);n==null||r&&!b3(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function Oq(e,t,n,s,o,r,i){if(t==="innerHTML"||t==="textContent"){s&&i(s,o,r),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const a=n==null?"":n;(e.value!==a||e.tagName==="OPTION")&&(e.value=a),n==null&&e.removeAttribute(t);return}if(n===""||n==null){const a=typeof e[t];if(a==="boolean"){e[t]=b3(n);return}else if(n==null&&a==="string"){e[t]="",e.removeAttribute(t);return}else if(a==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=n}catch{}}let pb=Date.now,gP=!1;if(typeof window!="undefined"){pb()>document.createEvent("Event").timeStamp&&(pb=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);gP=!!(e&&Number(e[1])<=53)}let G$=0;const Mq=Promise.resolve(),Pq=()=>{G$=0},Fq=()=>G$||(Mq.then(Pq),G$=pb());function el(e,t,n,s){e.addEventListener(t,n,s)}function Lq(e,t,n,s){e.removeEventListener(t,n,s)}function Bq(e,t,n,s,o=null){const r=e._vei||(e._vei={}),i=r[t];if(s&&i)i.value=s;else{const[a,l]=zq(t);if(s){const u=r[t]=Vq(s,o);el(e,a,u,l)}else i&&(Lq(e,a,i,l),r[t]=void 0)}}const P_=/(?:Once|Passive|Capture)$/;function zq(e){let t;if(P_.test(e)){t={};let n;for(;n=e.match(P_);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[kl(e.slice(2)),t]}function Vq(e,t){const n=s=>{const o=s.timeStamp||pb();(gP||o>=n.attached-1)&&jr(Wq(s,n.value),t,5,[s])};return n.value=e,n.attached=Fq(),n}function Wq(e,t){if(_t(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const F_=/^on[a-z]/,Hq=(e,t,n,s,o=!1,r,i,a,l)=>{t==="class"?Nq(e,s,o):t==="style"?Aq(e,n,s):u0(t)?Jx(t)||Bq(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Uq(e,t,s,o))?Oq(e,t,s,r,i,a,l):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Rq(e,t,s,o))};function Uq(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&F_.test(t)&&Ft(n)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||F_.test(t)&&Xt(n)?!1:t in e}const ja="transition",Rf="animation",xs=(e,{slots:t})=>He(Y3,vP(e),t);xs.displayName="Transition";const mP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},jq=xs.props=ao({},Y3.props,mP),Xl=(e,t=[])=>{_t(e)?e.forEach(n=>n(...t)):e&&e(...t)},L_=e=>e?_t(e)?e.some(t=>t.length>1):e.length>1:!1;function vP(e){const t={};for(const _ in e)_ in mP||(t[_]=e[_]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:u=i,appearToClass:c=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,p=Gq(o),g=p&&p[0],m=p&&p[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:$,onLeave:y,onLeaveCancelled:w,onBeforeAppear:C=v,onAppear:x=b,onAppearCancelled:k=$}=t,I=(_,N,O)=>{iu(_,N?c:a),iu(_,N?u:i),O&&O()},S=(_,N)=>{iu(_,h),iu(_,f),N&&N()},T=_=>(N,O)=>{const M=_?x:b,D=()=>I(N,_,O);Xl(M,[N,D]),B_(()=>{iu(N,_?l:r),ca(N,_?c:a),L_(M)||z_(N,s,g,D)})};return ao(t,{onBeforeEnter(_){Xl(v,[_]),ca(_,r),ca(_,i)},onBeforeAppear(_){Xl(C,[_]),ca(_,l),ca(_,u)},onEnter:T(!1),onAppear:T(!0),onLeave(_,N){const O=()=>S(_,N);ca(_,d),yP(),ca(_,f),B_(()=>{iu(_,d),ca(_,h),L_(y)||z_(_,s,m,O)}),Xl(y,[_,O])},onEnterCancelled(_){I(_,!1),Xl($,[_])},onAppearCancelled(_){I(_,!0),Xl(k,[_])},onLeaveCancelled(_){S(_),Xl(w,[_])}})}function Gq(e){if(e==null)return null;if(an(e))return[yw(e.enter),yw(e.leave)];{const t=yw(e);return[t,t]}}function yw(e){return ab(e)}function ca(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function iu(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function B_(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Kq=0;function z_(e,t,n,s){const o=e._endId=++Kq,r=()=>{o===e._endId&&s()};if(n)return setTimeout(r,n);const{type:i,timeout:a,propCount:l}=bP(e,t);if(!i)return s();const u=i+"end";let c=0;const d=()=>{e.removeEventListener(u,f),r()},f=h=>{h.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),e.addEventListener(u,f)}function bP(e,t){const n=window.getComputedStyle(e),s=p=>(n[p]||"").split(", "),o=s(ja+"Delay"),r=s(ja+"Duration"),i=V_(o,r),a=s(Rf+"Delay"),l=s(Rf+"Duration"),u=V_(a,l);let c=null,d=0,f=0;t===ja?i>0&&(c=ja,d=i,f=r.length):t===Rf?u>0&&(c=Rf,d=u,f=l.length):(d=Math.max(i,u),c=d>0?i>u?ja:Rf:null,f=c?c===ja?r.length:l.length:0);const h=c===ja&&/\b(transform|all)(,|$)/.test(n[ja+"Property"]);return{type:c,timeout:d,propCount:f,hasTransform:h}}function V_(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>W_(n)+W_(e[s])))}function W_(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function yP(){return document.body.offsetHeight}const wP=new WeakMap,$P=new WeakMap,qq={name:"TransitionGroup",props:ao({},jq,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Lt(),s=q3();let o,r;return _i(()=>{if(!o.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!Qq(o[0].el,n.vnode.el,i))return;o.forEach(Xq),o.forEach(Zq);const a=o.filter(Jq);yP(),a.forEach(l=>{const u=l.el,c=u.style;ca(u,i),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,iu(u,i))};u.addEventListener("transitionend",d)})}),()=>{const i=$n(e),a=vP(i);let l=i.tag||at;o=r,r=t.default?p2(t.default()):[];for(let u=0;u<r.length;u++){const c=r[u];c.key!=null&&Uh(c,Hh(c,a,s,n))}if(o)for(let u=0;u<o.length;u++){const c=o[u];Uh(c,Hh(c,a,s,n)),wP.set(c,c.el.getBoundingClientRect())}return le(l,null,r)}}},Yq=qq;function Xq(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Zq(e){$P.set(e,e.el.getBoundingClientRect())}function Jq(e){const t=wP.get(e),n=$P.get(e),s=t.left-n.left,o=t.top-n.top;if(s||o){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${o}px)`,r.transitionDuration="0s",e}}function Qq(e,t,n){const s=e.cloneNode();e._vtc&&e._vtc.forEach(i=>{i.split(/\s+/).forEach(a=>a&&s.classList.remove(a))}),n.split(/\s+/).forEach(i=>i&&s.classList.add(i)),s.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(s);const{hasTransform:r}=bP(s);return o.removeChild(s),r}const yd=e=>{const t=e.props["onUpdate:modelValue"];return _t(t)?n=>kv(t,n):t};function eY(e){e.target.composing=!0}function H_(e){const t=e.target;t.composing&&(t.composing=!1,tY(t,"input"))}function tY(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const $2={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e._assign=yd(o);const r=s||o.props&&o.props.type==="number";el(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;n?a=a.trim():r&&(a=ab(a)),e._assign(a)}),n&&el(e,"change",()=>{e.value=e.value.trim()}),t||(el(e,"compositionstart",eY),el(e,"compositionend",H_),el(e,"change",H_))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:o}},r){if(e._assign=yd(r),e.composing||document.activeElement===e&&(n||s&&e.value.trim()===t||(o||e.type==="number")&&ab(e.value)===t))return;const i=t==null?"":t;e.value!==i&&(e.value=i)}},gb={deep:!0,created(e,t,n){e._assign=yd(n),el(e,"change",()=>{const s=e._modelValue,o=xP(e),r=e.checked,i=e._assign;if(_t(s)){const a=y3(s,o),l=a!==-1;if(r&&!l)i(s.concat(o));else if(!r&&l){const u=[...s];u.splice(a,1),i(u)}}else if(c0(s)){const a=new Set(s);r?a.add(o):a.delete(o),i(a)}else i(kP(e,r))})},mounted:U_,beforeUpdate(e,t,n){e._assign=yd(n),U_(e,t,n)}};function U_(e,{value:t,oldValue:n},s){e._modelValue=t,_t(t)?e.checked=y3(t,s.props.value)>-1:c0(t)?e.checked=t.has(s.props.value):t!==n&&(e.checked=md(t,kP(e,!0)))}const CP={created(e,{value:t},n){e.checked=md(t,n.props.value),e._assign=yd(n),el(e,"change",()=>{e._assign(xP(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e._assign=yd(s),t!==n&&(e.checked=md(t,s.props.value))}};function xP(e){return"_value"in e?e._value:e.value}function kP(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const nY=["ctrl","shift","alt","meta"],sY={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>nY.some(n=>e[`${n}Key`]&&!t.includes(n))},ht=(e,t)=>(n,...s)=>{for(let o=0;o<t.length;o++){const r=sY[t[o]];if(r&&r(n,t))return}return e(n,...s)},oY={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ut=(e,t)=>n=>{if(!("key"in n))return;const s=kl(n.key);if(t.some(o=>o===s||oY[o]===s))return e(n)},en={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Of(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Of(e,!0),s.enter(e)):s.leave(e,()=>{Of(e,!1)}):Of(e,t))},beforeUnmount(e,{value:t}){Of(e,t)}};function Of(e,t){e.style.display=t?e._vod:"none"}const rY=ao({patchProp:Hq},_q);let j_;function SP(){return j_||(j_=iq(rY))}const wd=(...e)=>{SP().render(...e)},iY=(...e)=>{const t=SP().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=aY(s);if(!o)return;const r=t._component;!Ft(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function aY(e){return Xt(e)?document.querySelector(e):e}var On=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function lY(e){for(var t=-1,n=e==null?0:e.length,s={};++t<n;){var o=e[t];s[o[0]]=o[1]}return s}var IP=lY;class uY extends Error{constructor(t){super(t);this.name="ElementPlusError"}}function ko(e,t){throw new uY(`[${e}] ${t}`)}const cY=["class","style"],dY=/^on[A-Z]/,C2=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n=[]}=e,s=n.concat(cY),o=Lt();return R(o?()=>{var r;return IP(Object.entries((r=o.proxy)==null?void 0:r.$attrs).filter(([i])=>!s.includes(i)&&!(t&&dY.test(i))))}:()=>({}))},ir=Symbol("elForm"),Ni=Symbol("elFormItem"),TP=Symbol("buttonGroupContextKey"),EP=Symbol("elBreadcrumbKey"),_P=Symbol("elPaginationKey"),NP=Symbol(),AP=Symbol("radioGroupKey"),y0=Symbol("tabsRootContextKey"),DP=Symbol("scrollbarContextKey"),K$=Symbol(),G_="__elPropsReservedKey";function Ci(e,t){if(!an(e)||!!e[G_])return e;const{values:n,required:s,default:o,type:r,validator:i}=e,a=n||i?l=>{let u=!1,c=[];if(n&&(c=[...n,o],u||(u=c.includes(l))),i&&(u||(u=i(l))),!u&&c.length>0){const d=[...new Set(c)].map(f=>JSON.stringify(f)).join(", ");C7(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${d}], got value ${JSON.stringify(l)}.`)}return u}:void 0;return{type:typeof r=="object"&&Object.getOwnPropertySymbols(r).includes(K$)?r[K$]:r,required:!!s,default:o,validator:a,[G_]:!0}}const mt=e=>IP(Object.entries(e).map(([t,n])=>[t,Ci(n,t)])),Je=e=>({[K$]:e}),fY=e=>Object.keys(e),Ns=e=>e,x2=["large","default","small"],RP=e=>{const t=Lt();return R(()=>{var n,s;return(s=(n=t.proxy)==null?void 0:n.$props[e])!=null?s:void 0})};function hY(){this.__data__=[],this.size=0}var pY=hY;function gY(e,t){return e===t||e!==e&&t!==t}var k2=gY,mY=k2;function vY(e,t){for(var n=e.length;n--;)if(mY(e[n][0],t))return n;return-1}var w0=vY,bY=w0,yY=Array.prototype,wY=yY.splice;function $Y(e){var t=this.__data__,n=bY(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():wY.call(t,n,1),--this.size,!0}var CY=$Y,xY=w0;function kY(e){var t=this.__data__,n=xY(t,e);return n<0?void 0:t[n][1]}var SY=kY,IY=w0;function TY(e){return IY(this.__data__,e)>-1}var EY=TY,_Y=w0;function NY(e,t){var n=this.__data__,s=_Y(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var AY=NY,DY=pY,RY=CY,OY=SY,MY=EY,PY=AY;function Qd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Qd.prototype.clear=DY;Qd.prototype.delete=RY;Qd.prototype.get=OY;Qd.prototype.has=MY;Qd.prototype.set=PY;var $0=Qd,FY=$0;function LY(){this.__data__=new FY,this.size=0}var BY=LY;function zY(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var VY=zY;function WY(e){return this.__data__.get(e)}var HY=WY;function UY(e){return this.__data__.has(e)}var jY=UY,GY=typeof On=="object"&&On&&On.Object===Object&&On,OP=GY,KY=OP,qY=typeof self=="object"&&self&&self.Object===Object&&self,YY=KY||qY||Function("return this")(),Ai=YY,XY=Ai,ZY=XY.Symbol,ef=ZY,K_=ef,MP=Object.prototype,JY=MP.hasOwnProperty,QY=MP.toString,Mf=K_?K_.toStringTag:void 0;function eX(e){var t=JY.call(e,Mf),n=e[Mf];try{e[Mf]=void 0;var s=!0}catch{}var o=QY.call(e);return s&&(t?e[Mf]=n:delete e[Mf]),o}var tX=eX,nX=Object.prototype,sX=nX.toString;function oX(e){return sX.call(e)}var rX=oX,q_=ef,iX=tX,aX=rX,lX="[object Null]",uX="[object Undefined]",Y_=q_?q_.toStringTag:void 0;function cX(e){return e==null?e===void 0?uX:lX:Y_&&Y_ in Object(e)?iX(e):aX(e)}var Op=cX;function dX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Sl=dX,fX=Op,hX=Sl,pX="[object AsyncFunction]",gX="[object Function]",mX="[object GeneratorFunction]",vX="[object Proxy]";function bX(e){if(!hX(e))return!1;var t=fX(e);return t==gX||t==mX||t==pX||t==vX}var PP=bX,yX=Ai,wX=yX["__core-js_shared__"],$X=wX,ww=$X,X_=function(){var e=/[^.]+$/.exec(ww&&ww.keys&&ww.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function CX(e){return!!X_&&X_ in e}var xX=CX,kX=Function.prototype,SX=kX.toString;function IX(e){if(e!=null){try{return SX.call(e)}catch{}try{return e+""}catch{}}return""}var FP=IX,TX=PP,EX=xX,_X=Sl,NX=FP,AX=/[\\^$.*+?()[\]{}|]/g,DX=/^\[object .+?Constructor\]$/,RX=Function.prototype,OX=Object.prototype,MX=RX.toString,PX=OX.hasOwnProperty,FX=RegExp("^"+MX.call(PX).replace(AX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function LX(e){if(!_X(e)||EX(e))return!1;var t=TX(e)?FX:DX;return t.test(NX(e))}var BX=LX;function zX(e,t){return e==null?void 0:e[t]}var VX=zX,WX=BX,HX=VX;function UX(e,t){var n=HX(e,t);return WX(n)?n:void 0}var cc=UX,jX=cc,GX=Ai,KX=jX(GX,"Map"),S2=KX,qX=cc,YX=qX(Object,"create"),C0=YX,Z_=C0;function XX(){this.__data__=Z_?Z_(null):{},this.size=0}var ZX=XX;function JX(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var QX=JX,eZ=C0,tZ="__lodash_hash_undefined__",nZ=Object.prototype,sZ=nZ.hasOwnProperty;function oZ(e){var t=this.__data__;if(eZ){var n=t[e];return n===tZ?void 0:n}return sZ.call(t,e)?t[e]:void 0}var rZ=oZ,iZ=C0,aZ=Object.prototype,lZ=aZ.hasOwnProperty;function uZ(e){var t=this.__data__;return iZ?t[e]!==void 0:lZ.call(t,e)}var cZ=uZ,dZ=C0,fZ="__lodash_hash_undefined__";function hZ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=dZ&&t===void 0?fZ:t,this}var pZ=hZ,gZ=ZX,mZ=QX,vZ=rZ,bZ=cZ,yZ=pZ;function tf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}tf.prototype.clear=gZ;tf.prototype.delete=mZ;tf.prototype.get=vZ;tf.prototype.has=bZ;tf.prototype.set=yZ;var wZ=tf,J_=wZ,$Z=$0,CZ=S2;function xZ(){this.size=0,this.__data__={hash:new J_,map:new(CZ||$Z),string:new J_}}var kZ=xZ;function SZ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var IZ=SZ,TZ=IZ;function EZ(e,t){var n=e.__data__;return TZ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var x0=EZ,_Z=x0;function NZ(e){var t=_Z(this,e).delete(e);return this.size-=t?1:0,t}var AZ=NZ,DZ=x0;function RZ(e){return DZ(this,e).get(e)}var OZ=RZ,MZ=x0;function PZ(e){return MZ(this,e).has(e)}var FZ=PZ,LZ=x0;function BZ(e,t){var n=LZ(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var zZ=BZ,VZ=kZ,WZ=AZ,HZ=OZ,UZ=FZ,jZ=zZ;function nf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}nf.prototype.clear=VZ;nf.prototype.delete=WZ;nf.prototype.get=HZ;nf.prototype.has=UZ;nf.prototype.set=jZ;var I2=nf,GZ=$0,KZ=S2,qZ=I2,YZ=200;function XZ(e,t){var n=this.__data__;if(n instanceof GZ){var s=n.__data__;if(!KZ||s.length<YZ-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new qZ(s)}return n.set(e,t),this.size=n.size,this}var ZZ=XZ,JZ=$0,QZ=BY,eJ=VY,tJ=HY,nJ=jY,sJ=ZZ;function sf(e){var t=this.__data__=new JZ(e);this.size=t.size}sf.prototype.clear=QZ;sf.prototype.delete=eJ;sf.prototype.get=tJ;sf.prototype.has=nJ;sf.prototype.set=sJ;var LP=sf,oJ="__lodash_hash_undefined__";function rJ(e){return this.__data__.set(e,oJ),this}var iJ=rJ;function aJ(e){return this.__data__.has(e)}var lJ=aJ,uJ=I2,cJ=iJ,dJ=lJ;function mb(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new uJ;++t<n;)this.add(e[t])}mb.prototype.add=mb.prototype.push=cJ;mb.prototype.has=dJ;var BP=mb;function fJ(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var hJ=fJ;function pJ(e,t){return e.has(t)}var zP=pJ,gJ=BP,mJ=hJ,vJ=zP,bJ=1,yJ=2;function wJ(e,t,n,s,o,r){var i=n&bJ,a=e.length,l=t.length;if(a!=l&&!(i&&l>a))return!1;var u=r.get(e),c=r.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=n&yJ?new gJ:void 0;for(r.set(e,t),r.set(t,e);++d<a;){var p=e[d],g=t[d];if(s)var m=i?s(g,p,d,t,e,r):s(p,g,d,e,t,r);if(m!==void 0){if(m)continue;f=!1;break}if(h){if(!mJ(t,function(v,b){if(!vJ(h,b)&&(p===v||o(p,v,n,s,r)))return h.push(b)})){f=!1;break}}else if(!(p===g||o(p,g,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}var VP=wJ,$J=Ai,CJ=$J.Uint8Array,WP=CJ;function xJ(e){var t=-1,n=Array(e.size);return e.forEach(function(s,o){n[++t]=[o,s]}),n}var kJ=xJ;function SJ(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var T2=SJ,Q_=ef,eN=WP,IJ=k2,TJ=VP,EJ=kJ,_J=T2,NJ=1,AJ=2,DJ="[object Boolean]",RJ="[object Date]",OJ="[object Error]",MJ="[object Map]",PJ="[object Number]",FJ="[object RegExp]",LJ="[object Set]",BJ="[object String]",zJ="[object Symbol]",VJ="[object ArrayBuffer]",WJ="[object DataView]",tN=Q_?Q_.prototype:void 0,$w=tN?tN.valueOf:void 0;function HJ(e,t,n,s,o,r,i){switch(n){case WJ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case VJ:return!(e.byteLength!=t.byteLength||!r(new eN(e),new eN(t)));case DJ:case RJ:case PJ:return IJ(+e,+t);case OJ:return e.name==t.name&&e.message==t.message;case FJ:case BJ:return e==t+"";case MJ:var a=EJ;case LJ:var l=s&NJ;if(a||(a=_J),e.size!=t.size&&!l)return!1;var u=i.get(e);if(u)return u==t;s|=AJ,i.set(e,t);var c=TJ(a(e),a(t),s,o,r,i);return i.delete(e),c;case zJ:if($w)return $w.call(e)==$w.call(t)}return!1}var UJ=HJ;function jJ(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}var E2=jJ,GJ=Array.isArray,Il=GJ,KJ=E2,qJ=Il;function YJ(e,t,n){var s=t(e);return qJ(e)?s:KJ(s,n(e))}var HP=YJ;function XJ(e,t){for(var n=-1,s=e==null?0:e.length,o=0,r=[];++n<s;){var i=e[n];t(i,n,e)&&(r[o++]=i)}return r}var ZJ=XJ;function JJ(){return[]}var UP=JJ,QJ=ZJ,eQ=UP,tQ=Object.prototype,nQ=tQ.propertyIsEnumerable,nN=Object.getOwnPropertySymbols,sQ=nN?function(e){return e==null?[]:(e=Object(e),QJ(nN(e),function(t){return nQ.call(e,t)}))}:eQ,_2=sQ;function oQ(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var rQ=oQ;function iQ(e){return e!=null&&typeof e=="object"}var Tl=iQ,aQ=Op,lQ=Tl,uQ="[object Arguments]";function cQ(e){return lQ(e)&&aQ(e)==uQ}var dQ=cQ,sN=dQ,fQ=Tl,jP=Object.prototype,hQ=jP.hasOwnProperty,pQ=jP.propertyIsEnumerable,gQ=sN(function(){return arguments}())?sN:function(e){return fQ(e)&&hQ.call(e,"callee")&&!pQ.call(e,"callee")},GP=gQ,Kh={exports:{}};function mQ(){return!1}var vQ=mQ;(function(e,t){var n=Ai,s=vQ,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===o,a=i?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||s;e.exports=u})(Kh,Kh.exports);var bQ=9007199254740991,yQ=/^(?:0|[1-9]\d*)$/;function wQ(e,t){var n=typeof e;return t=t==null?bQ:t,!!t&&(n=="number"||n!="symbol"&&yQ.test(e))&&e>-1&&e%1==0&&e<t}var $Q=wQ,CQ=9007199254740991;function xQ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=CQ}var KP=xQ,kQ=Op,SQ=KP,IQ=Tl,TQ="[object Arguments]",EQ="[object Array]",_Q="[object Boolean]",NQ="[object Date]",AQ="[object Error]",DQ="[object Function]",RQ="[object Map]",OQ="[object Number]",MQ="[object Object]",PQ="[object RegExp]",FQ="[object Set]",LQ="[object String]",BQ="[object WeakMap]",zQ="[object ArrayBuffer]",VQ="[object DataView]",WQ="[object Float32Array]",HQ="[object Float64Array]",UQ="[object Int8Array]",jQ="[object Int16Array]",GQ="[object Int32Array]",KQ="[object Uint8Array]",qQ="[object Uint8ClampedArray]",YQ="[object Uint16Array]",XQ="[object Uint32Array]",ds={};ds[WQ]=ds[HQ]=ds[UQ]=ds[jQ]=ds[GQ]=ds[KQ]=ds[qQ]=ds[YQ]=ds[XQ]=!0;ds[TQ]=ds[EQ]=ds[zQ]=ds[_Q]=ds[VQ]=ds[NQ]=ds[AQ]=ds[DQ]=ds[RQ]=ds[OQ]=ds[MQ]=ds[PQ]=ds[FQ]=ds[LQ]=ds[BQ]=!1;function ZQ(e){return IQ(e)&&SQ(e.length)&&!!ds[kQ(e)]}var JQ=ZQ;function QQ(e){return function(t){return e(t)}}var N2=QQ,qh={exports:{}};(function(e,t){var n=OP,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===s,i=r&&n.process,a=function(){try{var l=o&&o.require&&o.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();e.exports=a})(qh,qh.exports);var eee=JQ,tee=N2,oN=qh.exports,rN=oN&&oN.isTypedArray,nee=rN?tee(rN):eee,qP=nee,see=rQ,oee=GP,ree=Il,iee=Kh.exports,aee=$Q,lee=qP,uee=Object.prototype,cee=uee.hasOwnProperty;function dee(e,t){var n=ree(e),s=!n&&oee(e),o=!n&&!s&&iee(e),r=!n&&!s&&!o&&lee(e),i=n||s||o||r,a=i?see(e.length,String):[],l=a.length;for(var u in e)(t||cee.call(e,u))&&!(i&&(u=="length"||o&&(u=="offset"||u=="parent")||r&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||aee(u,l)))&&a.push(u);return a}var YP=dee,fee=Object.prototype;function hee(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||fee;return e===n}var A2=hee;function pee(e,t){return function(n){return e(t(n))}}var XP=pee,gee=XP,mee=gee(Object.keys,Object),vee=mee,bee=A2,yee=vee,wee=Object.prototype,$ee=wee.hasOwnProperty;function Cee(e){if(!bee(e))return yee(e);var t=[];for(var n in Object(e))$ee.call(e,n)&&n!="constructor"&&t.push(n);return t}var xee=Cee,kee=PP,See=KP;function Iee(e){return e!=null&&See(e.length)&&!kee(e)}var D2=Iee,Tee=YP,Eee=xee,_ee=D2;function Nee(e){return _ee(e)?Tee(e):Eee(e)}var R2=Nee,Aee=HP,Dee=_2,Ree=R2;function Oee(e){return Aee(e,Ree,Dee)}var ZP=Oee,iN=ZP,Mee=1,Pee=Object.prototype,Fee=Pee.hasOwnProperty;function Lee(e,t,n,s,o,r){var i=n&Mee,a=iN(e),l=a.length,u=iN(t),c=u.length;if(l!=c&&!i)return!1;for(var d=l;d--;){var f=a[d];if(!(i?f in t:Fee.call(t,f)))return!1}var h=r.get(e),p=r.get(t);if(h&&p)return h==t&&p==e;var g=!0;r.set(e,t),r.set(t,e);for(var m=i;++d<l;){f=a[d];var v=e[f],b=t[f];if(s)var $=i?s(b,v,f,t,e,r):s(v,b,f,e,t,r);if(!($===void 0?v===b||o(v,b,n,s,r):$)){g=!1;break}m||(m=f=="constructor")}if(g&&!m){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w)&&(g=!1)}return r.delete(e),r.delete(t),g}var Bee=Lee,zee=cc,Vee=Ai,Wee=zee(Vee,"DataView"),Hee=Wee,Uee=cc,jee=Ai,Gee=Uee(jee,"Promise"),Kee=Gee,qee=cc,Yee=Ai,Xee=qee(Yee,"Set"),JP=Xee,Zee=cc,Jee=Ai,Qee=Zee(Jee,"WeakMap"),ete=Qee,q$=Hee,Y$=S2,X$=Kee,Z$=JP,J$=ete,QP=Op,of=FP,aN="[object Map]",tte="[object Object]",lN="[object Promise]",uN="[object Set]",cN="[object WeakMap]",dN="[object DataView]",nte=of(q$),ste=of(Y$),ote=of(X$),rte=of(Z$),ite=of(J$),au=QP;(q$&&au(new q$(new ArrayBuffer(1)))!=dN||Y$&&au(new Y$)!=aN||X$&&au(X$.resolve())!=lN||Z$&&au(new Z$)!=uN||J$&&au(new J$)!=cN)&&(au=function(e){var t=QP(e),n=t==tte?e.constructor:void 0,s=n?of(n):"";if(s)switch(s){case nte:return dN;case ste:return aN;case ote:return lN;case rte:return uN;case ite:return cN}return t});var k0=au,Cw=LP,ate=VP,lte=UJ,ute=Bee,fN=k0,hN=Il,pN=Kh.exports,cte=qP,dte=1,gN="[object Arguments]",mN="[object Array]",Pm="[object Object]",fte=Object.prototype,vN=fte.hasOwnProperty;function hte(e,t,n,s,o,r){var i=hN(e),a=hN(t),l=i?mN:fN(e),u=a?mN:fN(t);l=l==gN?Pm:l,u=u==gN?Pm:u;var c=l==Pm,d=u==Pm,f=l==u;if(f&&pN(e)){if(!pN(t))return!1;i=!0,c=!1}if(f&&!c)return r||(r=new Cw),i||cte(e)?ate(e,t,n,s,o,r):lte(e,t,l,n,s,o,r);if(!(n&dte)){var h=c&&vN.call(e,"__wrapped__"),p=d&&vN.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return r||(r=new Cw),o(g,m,n,s,r)}}return f?(r||(r=new Cw),ute(e,t,n,s,o,r)):!1}var pte=hte,gte=pte,bN=Tl;function eF(e,t,n,s,o){return e===t?!0:e==null||t==null||!bN(e)&&!bN(t)?e!==e&&t!==t:gte(e,t,n,s,eF,o)}var mte=eF;function S0(e){return U9()?(k3(e),!0):!1}const Yt=typeof window!="undefined",vte=e=>typeof e=="string",xw=()=>{};function bte(e,t){function n(...s){e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})}return n}function yte(e,t=!0,n=!0){let s=0,o,r=!n;const i=()=>{o&&(clearTimeout(o),o=void 0)};return l=>{const u=Ke(e),c=Date.now()-s;if(i(),u<=0)return s=Date.now(),l();c>u&&(s=Date.now(),r?r=!1:l()),t&&(o=setTimeout(()=>{s=Date.now(),n||(r=!0),i(),l()},u)),!n&&!o&&(o=setTimeout(()=>r=!0,u))}}var wte=Object.defineProperty,$te=Object.defineProperties,Cte=Object.getOwnPropertyDescriptors,yN=Object.getOwnPropertySymbols,xte=Object.prototype.hasOwnProperty,kte=Object.prototype.propertyIsEnumerable,wN=(e,t,n)=>t in e?wte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ste=(e,t)=>{for(var n in t||(t={}))xte.call(t,n)&&wN(e,n,t[n]);if(yN)for(var n of yN(t))kte.call(t,n)&&wN(e,n,t[n]);return e},Ite=(e,t)=>$te(e,Cte(t));function $N(e,t){var n;const s=vo();return Ca(()=>{s.value=e()},Ite(Ste({},t),{flush:(n=t==null?void 0:t.flush)!=null?n:"sync"})),Np(s)}function tF(e,t=200,n=!0,s=!0){return bte(yte(t,n,s),e)}function $d(e,t,n={}){const{immediate:s=!0}=n,o=L(!1);let r=null;function i(){r&&(clearTimeout(r),r=null)}function a(){o.value=!1,i()}function l(...u){i(),o.value=!0,r=setTimeout(()=>{o.value=!1,r=null,e(...u)},Ke(t))}return s&&(o.value=!0,Yt&&l()),S0(a),{isPending:o,start:l,stop:a}}function $h(e){var t;const n=Ke(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Mp=Yt?window:void 0,Tte=Yt?window.document:void 0;function Ls(...e){let t,n,s,o;if(vte(e[0])?([n,s,o]=e,t=Mp):[t,n,s,o]=e,!t)return xw;let r=xw;const i=Oe(()=>Ke(t),l=>{r(),!!l&&(l.addEventListener(n,s,o),r=()=>{l.removeEventListener(n,s,o),r=xw})},{immediate:!0,flush:"post"}),a=()=>{i(),r()};return S0(a),a}function Q$(e,t,n={}){const{window:s=Mp,ignore:o}=n;if(!s)return;const r=L(!0),a=[Ls(s,"click",u=>{const c=$h(e),d=u.composedPath();!c||c===u.target||d.includes(c)||!r.value||o&&o.length>0&&o.some(f=>{const h=$h(f);return h&&(u.target===h||d.includes(h))})||t(u)},{passive:!0,capture:!0}),Ls(s,"pointerdown",u=>{const c=$h(e);r.value=!!c&&!u.composedPath().includes(c)},{passive:!0})];return()=>a.forEach(u=>u())}const eC=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},tC="__vueuse_ssr_handlers__";eC[tC]=eC[tC]||{};eC[tC];function Ete(e,t,{window:n=Mp}={}){const s=L(""),o=R(()=>{var r;return $h(t)||((r=n==null?void 0:n.document)==null?void 0:r.documentElement)});return Oe([o,()=>Ke(e)],([r,i])=>{r&&n&&(s.value=n.getComputedStyle(r).getPropertyValue(i))},{immediate:!0}),Oe(s,r=>{var i;((i=o.value)==null?void 0:i.style)&&o.value.style.setProperty(Ke(e),r)}),s}function _te({document:e=Tte}={}){if(!e)return L("visible");const t=L(e.visibilityState);return Ls(e,"visibilitychange",()=>{t.value=e.visibilityState}),t}var CN=Object.getOwnPropertySymbols,Nte=Object.prototype.hasOwnProperty,Ate=Object.prototype.propertyIsEnumerable,Dte=(e,t)=>{var n={};for(var s in e)Nte.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&CN)for(var s of CN(e))t.indexOf(s)<0&&Ate.call(e,s)&&(n[s]=e[s]);return n};function Yh(e,t,n={}){const s=n,{window:o=Mp}=s,r=Dte(s,["window"]);let i;const a=o&&"ResizeObserver"in o,l=()=>{i&&(i.disconnect(),i=void 0)},u=Oe(()=>$h(e),d=>{l(),a&&o&&d&&(i=new o.ResizeObserver(t),i.observe(d,r))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return S0(c),{isSupported:a,stop:c}}var xN,kN;Yt&&(window==null?void 0:window.navigator)&&((xN=window==null?void 0:window.navigator)==null?void 0:xN.platform)&&/iP(ad|hone|od)/.test((kN=window==null?void 0:window.navigator)==null?void 0:kN.platform);var Rte=Object.defineProperty,SN=Object.getOwnPropertySymbols,Ote=Object.prototype.hasOwnProperty,Mte=Object.prototype.propertyIsEnumerable,IN=(e,t,n)=>t in e?Rte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pte=(e,t)=>{for(var n in t||(t={}))Ote.call(t,n)&&IN(e,n,t[n]);if(SN)for(var n of SN(t))Mte.call(t,n)&&IN(e,n,t[n]);return e};const Fte={top:0,left:0,bottom:0,right:0,height:0,width:0};Pte({text:""},Fte);function Lte({window:e=Mp}={}){if(!e)return L(!1);const t=L(e.document.hasFocus());return Ls(e,"blur",()=>{t.value=!1}),Ls(e,"focus",()=>{t.value=!0}),t}const Bte="Util",Ps=(e,t="")=>{let n=e;return t.split(".").map(s=>{n=n==null?void 0:n[s]}),n};function Iv(e,t,n){let s=e,o,r;if(e&&Ht(e,t))o=t,r=s==null?void 0:s[t];else{t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");const i=t.split(".");let a=0;for(a;a<i.length-1&&!(!s&&!n);a++){const l=i[a];if(l in s)s=s[l];else{n&&ko(Bte,"Please transfer a valid prop path to form item!");break}}o=i[a],r=s==null?void 0:s[i[a]]}return{o:s,k:o,v:r}}const Xh=()=>Math.floor(Math.random()*1e4),zte=(e="")=>String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),Au=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],nF=function(){return Yt&&!!window.navigator.userAgent.match(/firefox/i)},Vte=function(e){const t=["transform","transition","animation"],n=["ms-","webkit-"];return t.forEach(s=>{const o=e[s];s&&o&&n.forEach(r=>{e[r+s]=o})}),e},vi=e=>typeof e=="boolean",xn=e=>typeof e=="number";function kw(e){let t=!1;return function(...n){t||(t=!0,window.requestAnimationFrame(()=>{Reflect.apply(e,this,n),t=!1}))}}function Zh(e){return e===void 0}function Jh(e){return!!(!e&&e!==0||_t(e)&&!e.length||an(e)&&!Object.keys(e).length)}function sF(e){return e.reduce((t,n)=>{const s=Array.isArray(n)?sF(n):n;return t.concat(s)},[])}function TN(e){return Array.from(new Set(e))}function Ia(e){return Xt(e)?e:xn(e)?`${e}px`:""}const Wte=(e,t)=>{var n;const s=[...new Set([...Object.keys(e),...Object.keys(t)])],o={};for(const r of s)o[r]=(n=t[r])!=null?n:e[r];return o},oF=L({});function rf(e){const t=Ze(NP,oF);return e?an(t.value)&&Ht(t.value,e)?R(()=>t.value[e]):L(void 0):t}const rF=(e,t)=>{var n;const s=!!Lt(),o=s?rf():void 0,r=(n=t==null?void 0:t.provide)!=null?n:s?Vt:void 0;if(!r)return;const i=R(()=>{const a=Ke(e);return o?Wte(o.value,a):a});return r(NP,i),oF.value=i.value,i},I0=Ci({type:String,values:x2,required:!1}),ks=(e,t={})=>{const n=L(void 0),s=t.prop?n:RP("size"),o=t.global?n:rf("size"),r=t.form?{size:void 0}:Ze(ir,void 0),i=t.formItem?{size:void 0}:Ze(Ni,void 0);return R(()=>s.value||Ke(e)||(i==null?void 0:i.size)||(r==null?void 0:r.size)||o.value||"default")},Pp=e=>{const t=RP("disabled"),n=Ze(ir,void 0);return R(()=>t.value||Ke(e)||(n==null?void 0:n.disabled)||!1)},Hte=e=>({focus:()=>{var t,n;(n=(t=e.value)==null?void 0:t.focus)==null||n.call(t)}}),af=()=>{const e=Ze(ir,void 0),t=Ze(Ni,void 0);return{form:e,formItem:t}};var Ute=Op,jte=Tl,Gte="[object Symbol]";function Kte(e){return typeof e=="symbol"||jte(e)&&Ute(e)==Gte}var T0=Kte,qte=Il,Yte=T0,Xte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zte=/^\w*$/;function Jte(e,t){if(qte(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Yte(e)?!0:Zte.test(e)||!Xte.test(e)||t!=null&&e in Object(t)}var Qte=Jte,iF=I2,ene="Expected a function";function O2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ene);var n=function(){var s=arguments,o=t?t.apply(this,s):s[0],r=n.cache;if(r.has(o))return r.get(o);var i=e.apply(this,s);return n.cache=r.set(o,i)||r,i};return n.cache=new(O2.Cache||iF),n}O2.Cache=iF;var aF=O2,tne=aF,nne=500;function sne(e){var t=tne(e,function(s){return n.size===nne&&n.clear(),s}),n=t.cache;return t}var one=sne,rne=one,ine=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ane=/\\(\\)?/g,lne=rne(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ine,function(n,s,o,r){t.push(o?r.replace(ane,"$1"):s||n)}),t}),une=lne;function cne(e,t){for(var n=-1,s=e==null?0:e.length,o=Array(s);++n<s;)o[n]=t(e[n],n,e);return o}var dne=cne,EN=ef,fne=dne,hne=Il,pne=T0,gne=1/0,_N=EN?EN.prototype:void 0,NN=_N?_N.toString:void 0;function lF(e){if(typeof e=="string")return e;if(hne(e))return fne(e,lF)+"";if(pne(e))return NN?NN.call(e):"";var t=e+"";return t=="0"&&1/e==-gne?"-0":t}var mne=lF,vne=mne;function bne(e){return e==null?"":vne(e)}var yne=bne,wne=Il,$ne=Qte,Cne=une,xne=yne;function kne(e,t){return wne(e)?e:$ne(e,t)?[e]:Cne(xne(e))}var Sne=kne,Ine=T0,Tne=1/0;function Ene(e){if(typeof e=="string"||Ine(e))return e;var t=e+"";return t=="0"&&1/e==-Tne?"-0":t}var _ne=Ene,Nne=Sne,Ane=_ne;function Dne(e,t){t=Nne(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[Ane(t[n++])];return n&&n==s?e:void 0}var Rne=Dne,One=Rne;function Mne(e,t,n){var s=e==null?void 0:One(e,t);return s===void 0?n:s}var Pne=Mne,Fne={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const Lne=e=>(t,n)=>Bne(t,n,Ke(e)),Bne=(e,t,n)=>Pne(n,e,e).replace(/\{(\w+)\}/g,(s,o)=>{var r;return`${(r=t==null?void 0:t[o])!=null?r:`{${o}}`}`}),zne=e=>{const t=R(()=>Ke(e).name),n=ms(e)?e:L(e);return{lang:t,locale:n,t:Lne(e)}},In=()=>{const e=rf("locale");return zne(R(()=>e.value||Fne))};let Fm;function Vne(){var e;if(!Yt)return 0;if(Fm!==void 0)return Fm;const t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const o=s.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),Fm=n-o,Fm}const nC=function(e){return(e||"").split(" ").filter(t=>!!t.trim())},bn=function(e,t,n,s=!1){e&&t&&n&&(e==null||e.addEventListener(t,n,s))},Kn=function(e,t,n,s=!1){e&&t&&n&&(e==null||e.removeEventListener(t,n,s))},Wne=function(e,t,n){const s=function(...o){n&&n.apply(this,o),Kn(e,t,s)};bn(e,t,s)};function bi(e,t){if(!e||!t)return!1;if(t.indexOf(" ")!==-1)throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(e.getAttribute("class")||"").split(" ").includes(t)}function Xo(e,t){if(!e)return;let n=e.getAttribute("class")||"";const s=nC(n),o=(t||"").split(" ").filter(r=>!s.includes(r)&&!!r.trim());e.classList?e.classList.add(...o):(n+=` ${o.join(" ")}`,e.setAttribute("class",n))}function yo(e,t){if(!e||!t)return;const n=nC(t);let s=e.getAttribute("class")||"";if(e.classList){e.classList.remove(...n);return}n.forEach(r=>{s=s.replace(` ${r} `," ")});const o=nC(s).join(" ");e.setAttribute("class",o)}const Fr=function(e,t){var n;if(!Yt||!e||!t)return"";t=Kr(t),t==="float"&&(t="cssFloat");try{const s=e.style[t];if(s)return s;const o=(n=document.defaultView)==null?void 0:n.getComputedStyle(e,"");return o?o[t]:""}catch{return e.style[t]}},Hne=(e,t)=>Yt?(t==null?Fr(e,"overflow"):t?Fr(e,"overflow-y"):Fr(e,"overflow-x")).match(/(scroll|auto|overlay)/):null,M2=(e,t)=>{if(!Yt)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Hne(n,t))return n;n=n.parentNode}return n},Une=(e,t)=>{if(!Yt||!e||!t)return!1;const n=e.getBoundingClientRect();let s;return t instanceof Element?s=t.getBoundingClientRect():s={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<s.bottom&&n.bottom>s.top&&n.right>s.left&&n.left<s.right},AN=e=>{let t=0,n=e;for(;n;)t+=n.offsetTop,n=n.offsetParent;return t},jne=(e,t)=>Math.abs(AN(e)-AN(t)),P2=e=>{let t,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}},Fs=(e,t,{checkForDefaultPrevented:n=!0}={})=>o=>{const r=e==null?void 0:e(o);if(n===!1||!r)return t==null?void 0:t(o)},DN=e=>t=>t.pointerType==="mouse"?e(t):void 0,uF=(...e)=>t=>{e.forEach(n=>{n.value=t})},cF=e=>{if(ms(e)||ko("[useLockscreen]","You need to pass a ref param to this function"),!Yt||bi(document.body,"el-popup-parent--hidden"))return;let t=0,n=!1,s="0",o=0;const r=()=>{yo(document.body,"el-popup-parent--hidden"),n&&(document.body.style.paddingRight=s)};Oe(e,i=>{if(!i){r();return}n=!bi(document.body,"el-popup-parent--hidden"),n&&(s=document.body.style.paddingRight,o=parseInt(Fr(document.body,"paddingRight"),10)),t=Vne();const a=document.documentElement.clientHeight<document.body.scrollHeight,l=Fr(document.body,"overflowY");t>0&&(a||l==="scroll")&&n&&(document.body.style.paddingRight=`${o+t}px`),Xo(document.body,"el-popup-parent--hidden")}),k3(()=>r())},Qe={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Gne='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Kne=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,RN=e=>Array.from(e.querySelectorAll(Gne)).filter(t=>qne(t)&&Kne(t)),qne=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Tv=function(e,t,...n){let s;t.includes("mouse")||t.includes("click")?s="MouseEvents":t.includes("key")?s="KeyboardEvent":s="HTMLEvents";const o=document.createEvent(s);return o.initEvent(t,...n),e.dispatchEvent(o),e},dF=e=>!e.getAttribute("aria-owns"),fF=(e,t,n)=>{const{parentNode:s}=e;if(!s)return null;const o=s.querySelectorAll(n),r=Array.prototype.indexOf.call(o,e);return o[r+t]||null},Ev=e=>{!e||(e.focus(),!dF(e)&&e.click())},ld=[],Yne=e=>{ld.length!==0&&e.code===Qe.esc&&(e.stopPropagation(),ld[ld.length-1].handleClose())},hF=(e,t)=>{Oe(t,n=>{n?ld.push(e):ld.splice(ld.findIndex(s=>s===e),1)})};Yt&&Ls(document,"keydown",Yne);const pF=e=>{const t={[e]:Ci({type:Je(Boolean),default:null}),[`onUpdate:${e}`]:Ci({type:Je(Function)})},n=[`update:${e}`];return{useModelToggle:({indicator:o,shouldHideWhenRouteChanges:r,shouldProceed:i,onShow:a,onHide:l})=>{const u=Lt(),c=u.props,{emit:d}=u,f=`update:${e}`,h=R(()=>Ft(c[`onUpdate:${e}`])),p=R(()=>c[e]===null),g=()=>{o.value!==!0&&(o.value=!0,Ft(a)&&a())},m=()=>{o.value!==!1&&(o.value=!1,Ft(l)&&l())},v=()=>{if(c.disabled===!0||Ft(i)&&!i())return;const w=h.value&&Yt;w&&d(f,!0),(p.value||!w)&&g()},b=()=>{if(c.disabled===!0||!Yt)return;const w=h.value&&Yt;w&&d(f,!1),(p.value||!w)&&m()},$=w=>{!vi(w)||(c.disabled&&w?h.value&&d(f,!1):o.value!==w&&(w?g():m()))},y=()=>{o.value?b():v()};return Oe(()=>c[e],$),r&&u.appContext.config.globalProperties.$route!==void 0&&Oe(()=>ut({},u.proxy.$route),()=>{r.value&&o.value&&b()}),Rt(()=>{$(c[e])}),{hide:b,show:v,toggle:y}},useModelToggleProps:t,useModelToggleEmits:n}};pF("modelValue");const Xne=(e,t,n)=>{const s=r=>{n(r)&&r.stopImmediatePropagation()};let o;Oe(()=>e.value,r=>{r?o=Ls(document,t,s,!0):o==null||o()},{immediate:!0})},gF=(e,t)=>{let n;Oe(()=>e.value,s=>{var o,r;s?(n=document.activeElement,ms(t)&&((r=(o=t.value).focus)==null||r.call(o))):n.focus()})},mF=e=>{if(!e)return{onClick:rn,onMousedown:rn,onMouseup:rn};let t=!1,n=!1;return{onClick:i=>{t&&n&&e(i),t=n=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},Zne=(e,t=0)=>{if(t===0)return e;const n=L(!1);let s=0;const o=()=>{s&&clearTimeout(s),s=window.setTimeout(()=>{n.value=e.value},t)};return Rt(o),Oe(()=>e.value,r=>{r?o():n.value=r}),n};function Jne(){let e;const t=(s,o)=>{n(),e=window.setTimeout(s,o)},n=()=>window.clearTimeout(e);return S0(()=>n()),{registerTimeout:t,cancelTimeout:n}}const Qne={prefix:Math.floor(Math.random()*1e4),current:0},ese=Symbol("elIdInjection"),vF=e=>{const t=Ze(ese,Qne);return R(()=>Ke(e)||`el-id-${t.prefix}-${t.current++}`)},tse=e=>{const t=n=>{const s=n;s.key===Qe.esc&&(e==null||e(s))};Rt(()=>{bn(document,"keydown",t)}),ls(()=>{Kn(document,"keydown",t)})};let ON;const bF=`el-popper-container-${Xh()}`,nse=`#${bF}`,sse=()=>{Ap(()=>{if(!!Yt&&!ON){const e=document.createElement("div");e.id=bF,document.body.appendChild(e),ON=e}})},ose=mt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200}}),rse=({showAfter:e,hideAfter:t,open:n,close:s})=>{const{registerTimeout:o}=Jne();return{onOpen:()=>{o(()=>{n()},Ke(e))},onClose:()=>{o(()=>{s()},Ke(t))}}},yF=Symbol("elForwardRef"),ise=e=>{Vt(yF,{setForwardRef:n=>{e.value=n}})},ase=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}}),lse="el",use="is-",Zl=(e,t,n,s,o)=>{let r=`${e}-${t}`;return n&&(r+=`-${n}`),s&&(r+=`__${s}`),o&&(r+=`--${o}`),r},At=e=>{const t=R(()=>rf("namespace").value||lse);return{namespace:t,b:(c="")=>Zl(Ke(t),e,c,"",""),e:c=>c?Zl(Ke(t),e,"",c,""):"",m:c=>c?Zl(Ke(t),e,"","",c):"",be:(c,d)=>c&&d?Zl(Ke(t),e,c,d,""):"",em:(c,d)=>c&&d?Zl(Ke(t),e,"",c,d):"",bm:(c,d)=>c&&d?Zl(Ke(t),e,c,"",d):"",bem:(c,d,f)=>c&&d&&f?Zl(Ke(t),e,c,d,f):"",is:(c,d=!0)=>d?`${use}${c}`:""}},cse=e=>{e.preventDefault(),e.stopPropagation()},dse=()=>{bs==null||bs.doOnModalClick()};let sC=!1;const MN=function(){if(!Yt)return;let e=bs.modalDom;return e?sC=!0:(sC=!1,e=document.createElement("div"),bs.modalDom=e,bn(e,"touchmove",cse),bn(e,"click",dse)),e},Lm={},bs={modalFade:!0,modalDom:void 0,globalInitialZIndex:2e3,zIndex:0,getInitialZIndex(){var e;return Lt()?(e=rf("zIndex").value)!=null?e:this.globalInitialZIndex:this.globalInitialZIndex},getInstance(e){return Lm[e]},register(e,t){e&&t&&(Lm[e]=t)},deregister(e){e&&(Lm[e]=null,delete Lm[e])},nextZIndex(){return this.getInitialZIndex()+ ++this.zIndex},modalStack:[],doOnModalClick(){const e=bs.modalStack[bs.modalStack.length-1];if(!e)return;const t=bs.getInstance(e.id);t&&t.closeOnClickModal.value&&t.close()},openModal(e,t,n,s,o){if(!Yt||!e||t===void 0)return;this.modalFade=o;const r=this.modalStack;for(let a=0,l=r.length;a<l;a++)if(r[a].id===e)return;const i=MN();Xo(i,"v-modal"),this.modalFade&&!sC&&Xo(i,"v-modal-enter"),s&&s.trim().split(/\s+/).forEach(l=>Xo(i,l)),setTimeout(()=>{yo(i,"v-modal-enter")},200),n&&n.parentNode&&n.parentNode.nodeType!==11?n.parentNode.appendChild(i):document.body.appendChild(i),t&&(i.style.zIndex=String(t)),i.tabIndex=0,i.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:s})},closeModal(e){const t=this.modalStack,n=MN();if(t.length>0){const s=t[t.length-1];if(s.id===e)s.modalClass&&s.modalClass.trim().split(/\s+/).forEach(r=>yo(n,r)),t.pop(),t.length>0&&(n.style.zIndex=`${t[t.length-1].zIndex}`);else for(let o=t.length-1;o>=0;o--)if(t[o].id===e){t.splice(o,1);break}}t.length===0&&(this.modalFade&&Xo(n,"v-modal-leave"),setTimeout(()=>{t.length===0&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",bs.modalDom=void 0),yo(n,"v-modal-leave")},200))}},fse=function(){if(!!Yt&&bs.modalStack.length>0){const e=bs.modalStack[bs.modalStack.length-1];return e?bs.getInstance(e.id):void 0}};Yt&&window.addEventListener("keydown",function(e){if(e.code===Qe.esc){const t=fse();t&&t.closeOnPressEscape.value&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}});const hse="1.3.0-beta.10",PN=Symbol("INSTALLED_KEY"),pse=(e=[])=>({version:hse,install:(n,s={})=>{n[PN]||(n[PN]=!0,e.forEach(o=>n.use(o)),rF(s,n),Oe(()=>Ke(s).zIndex,()=>{const o=Ke(s).zIndex;xn(o)&&(bs.globalInitialZIndex=o)},{immediate:!0}))}}),Wt=(e,t)=>{if(e.install=n=>{for(const s of[e,...Object.values(t!=null?t:{})])n.component(s.name,s)},t)for(const[n,s]of Object.entries(t))e[n]=s;return e},wF=(e,t)=>(e.install=n=>{n.config.globalProperties[t]=e},e),us=e=>(e.install=rn,e),gse=mt({zIndex:{type:Je([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),mse={scroll:({scrollTop:e,fixed:t})=>typeof e=="number"&&typeof t=="boolean",change:e=>typeof e=="boolean"};var We=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const vse=ge({name:"ElAffix",props:gse,emits:mse,setup(e,{emit:t}){const n=At("affix"),s=vo(),o=vo(),r=vo(),i=Sn({fixed:!1,height:0,width:0,scrollTop:0,clientHeight:0,transform:0}),a=R(()=>({height:i.fixed?`${i.height}px`:"",width:i.fixed?`${i.width}px`:""})),l=R(()=>{if(!i.fixed)return;const d=e.offset?`${e.offset}px`:0,f=i.transform?`translateY(${i.transform}px)`:"";return{height:`${i.height}px`,width:`${i.width}px`,top:e.position==="top"?d:"",bottom:e.position==="bottom"?d:"",transform:f,zIndex:e.zIndex}}),u=()=>{if(!o.value||!s.value||!r.value)return;const d=o.value.getBoundingClientRect(),f=s.value.getBoundingClientRect();if(i.height=d.height,i.width=d.width,i.scrollTop=r.value instanceof Window?document.documentElement.scrollTop:r.value.scrollTop||0,i.clientHeight=document.documentElement.clientHeight,e.position==="top")if(e.target){const h=f.bottom-e.offset-i.height;i.fixed=e.offset>d.top&&f.bottom>0,i.transform=h<0?h:0}else i.fixed=e.offset>d.top;else if(e.target){const h=i.clientHeight-f.top-e.offset-i.height;i.fixed=i.clientHeight-e.offset<d.bottom&&i.clientHeight>f.top,i.transform=h<0?-h:0}else i.fixed=i.clientHeight-e.offset<d.bottom},c=()=>{u(),t("scroll",{scrollTop:i.scrollTop,fixed:i.fixed})};return Oe(()=>i.fixed,()=>{t("change",i.fixed)}),Rt(()=>{var d;if(e.target){if(s.value=(d=document.querySelector(e.target))!=null?d:void 0,!s.value)throw new Error(`Target is not existed: ${e.target}`)}else s.value=document.documentElement;r.value=M2(o.value,!0)}),Ls(r,"scroll",c),Yh(o,()=>u()),Yh(s,()=>u()),{ns:n,root:o,state:i,rootStyle:a,affixStyle:l,update:u}}});function bse(e,t,n,s,o,r){return A(),B("div",{ref:"root",class:q(e.ns.b()),style:nt(e.rootStyle)},[W("div",{class:q({[e.ns.m("fixed")]:e.state.fixed}),style:nt(e.affixStyle)},[Re(e.$slots,"default")],6)],6)}var yse=We(vse,[["render",bse]]);const wse=Wt(yse),$se=mt({size:{type:Je([Number,String])},color:{type:String}}),Cse=ge({name:"ElIcon",inheritAttrs:!1,props:$se,setup(e){const t=At("icon"),n=R(()=>!e.size&&!e.color?{}:{fontSize:Zh(e.size)?void 0:Ia(e.size),"--color":e.color});return{ns:t,style:n}}});function xse(e,t,n,s,o,r){return A(),B("i",lo({class:e.ns.b(),style:e.style},e.$attrs),[Re(e.$slots,"default")],16)}var kse=We(Cse,[["render",xse]]);const Ot=Wt(kse);var mn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const Sse=ge({name:"ArrowDown"}),Ise={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Tse=W("path",{fill:"currentColor",d:"M831.872 340.864L512 652.672 192.128 340.864a30.592 30.592 0 00-42.752 0 29.12 29.12 0 000 41.6L489.664 714.24a32 32 0 0044.672 0l340.288-331.712a29.12 29.12 0 000-41.728 30.592 30.592 0 00-42.752 0z"},null,-1),Ese=[Tse];function _se(e,t,n,s,o,r){return A(),B("svg",Ise,Ese)}var dc=mn(Sse,[["render",_se]]);const Nse=ge({name:"ArrowLeft"}),Ase={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Dse=W("path",{fill:"currentColor",d:"M609.408 149.376L277.76 489.6a32 32 0 000 44.672l331.648 340.352a29.12 29.12 0 0041.728 0 30.592 30.592 0 000-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 000-42.688 29.12 29.12 0 00-41.728 0z"},null,-1),Rse=[Dse];function Ose(e,t,n,s,o,r){return A(),B("svg",Ase,Rse)}var fc=mn(Nse,[["render",Ose]]);const Mse=ge({name:"ArrowRight"}),Pse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Fse=W("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 000 42.752L652.736 512 340.864 831.872a30.592 30.592 0 000 42.752 29.12 29.12 0 0041.728 0L714.24 534.336a32 32 0 000-44.672L382.592 149.376a29.12 29.12 0 00-41.728 0z"},null,-1),Lse=[Fse];function Bse(e,t,n,s,o,r){return A(),B("svg",Pse,Lse)}var Qr=mn(Mse,[["render",Bse]]);const zse=ge({name:"ArrowUp"}),Vse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Wse=W("path",{fill:"currentColor",d:"M488.832 344.32l-339.84 356.672a32 32 0 000 44.16l.384.384a29.44 29.44 0 0042.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0042.688 0l.384-.384a32 32 0 000-44.16L535.168 344.32a32 32 0 00-46.336 0z"},null,-1),Hse=[Wse];function Use(e,t,n,s,o,r){return A(),B("svg",Vse,Hse)}var Fp=mn(zse,[["render",Use]]);const jse=ge({name:"Back"}),Gse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Kse=W("path",{fill:"currentColor",d:"M224 480h640a32 32 0 110 64H224a32 32 0 010-64z"},null,-1),qse=W("path",{fill:"currentColor",d:"M237.248 512l265.408 265.344a32 32 0 01-45.312 45.312l-288-288a32 32 0 010-45.312l288-288a32 32 0 1145.312 45.312L237.248 512z"},null,-1),Yse=[Kse,qse];function Xse(e,t,n,s,o,r){return A(),B("svg",Gse,Yse)}var Zse=mn(jse,[["render",Xse]]);const Jse=ge({name:"Calendar"}),Qse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},eoe=W("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 11-64 0v-32H320v32a32 32 0 01-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1164 0v32h160a32 32 0 0132 32v768a32 32 0 01-32 32H96a32 32 0 01-32-32V160a32 32 0 0132-32h160V96a32 32 0 0164 0v32zm-32 384h64a32 32 0 010 64h-64a32 32 0 010-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64zm192-192h64a32 32 0 010 64h-64a32 32 0 010-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64zm192-192h64a32 32 0 110 64h-64a32 32 0 110-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64z"},null,-1),toe=[eoe];function noe(e,t,n,s,o,r){return A(),B("svg",Qse,toe)}var soe=mn(Jse,[["render",noe]]);const ooe=ge({name:"CaretRight"}),roe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ioe=W("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),aoe=[ioe];function loe(e,t,n,s,o,r){return A(),B("svg",roe,aoe)}var $F=mn(ooe,[["render",loe]]);const uoe=ge({name:"CaretTop"}),coe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},doe=W("path",{fill:"currentColor",d:"M512 320L192 704h639.936z"},null,-1),foe=[doe];function hoe(e,t,n,s,o,r){return A(),B("svg",coe,foe)}var poe=mn(uoe,[["render",hoe]]);const goe=ge({name:"Check"}),moe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},voe=W("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z"},null,-1),boe=[voe];function yoe(e,t,n,s,o,r){return A(),B("svg",moe,boe)}var Cd=mn(goe,[["render",yoe]]);const woe=ge({name:"CircleCheckFilled"}),$oe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Coe=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm-55.808 536.384l-99.52-99.584a38.4 38.4 0 10-54.336 54.336l126.72 126.72a38.272 38.272 0 0054.336 0l262.4-262.464a38.4 38.4 0 10-54.272-54.336L456.192 600.384z"},null,-1),xoe=[Coe];function koe(e,t,n,s,o,r){return A(),B("svg",$oe,xoe)}var Soe=mn(woe,[["render",koe]]);const Ioe=ge({name:"CircleCheck"}),Toe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Eoe=W("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),_oe=W("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0145.312 45.312l-288 288a32 32 0 01-45.312 0l-160-160a32 32 0 1145.312-45.312L480 626.752l265.344-265.408z"},null,-1),Noe=[Eoe,_oe];function Aoe(e,t,n,s,o,r){return A(),B("svg",Toe,Noe)}var vb=mn(Ioe,[["render",Aoe]]);const Doe=ge({name:"CircleCloseFilled"}),Roe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ooe=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 393.664L407.936 353.6a38.4 38.4 0 10-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1054.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1054.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 10-54.336-54.336L512 457.664z"},null,-1),Moe=[Ooe];function Poe(e,t,n,s,o,r){return A(),B("svg",Roe,Moe)}var F2=mn(Doe,[["render",Poe]]);const Foe=ge({name:"CircleClose"}),Loe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Boe=W("path",{fill:"currentColor",d:"M466.752 512l-90.496-90.496a32 32 0 0145.248-45.248L512 466.752l90.496-90.496a32 32 0 1145.248 45.248L557.248 512l90.496 90.496a32 32 0 11-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 01-45.248-45.248L466.752 512z"},null,-1),zoe=W("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),Voe=[Boe,zoe];function Woe(e,t,n,s,o,r){return A(),B("svg",Loe,Voe)}var Ta=mn(Foe,[["render",Woe]]);const Hoe=ge({name:"Clock"}),Uoe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},joe=W("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),Goe=W("path",{fill:"currentColor",d:"M480 256a32 32 0 0132 32v256a32 32 0 01-64 0V288a32 32 0 0132-32z"},null,-1),Koe=W("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),qoe=[joe,Goe,Koe];function Yoe(e,t,n,s,o,r){return A(),B("svg",Uoe,qoe)}var CF=mn(Hoe,[["render",Yoe]]);const Xoe=ge({name:"Close"}),Zoe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Joe=W("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88 259.712 214.592a31.936 31.936 0 00-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1045.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0045.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 10-45.12-45.184z"},null,-1),Qoe=[Joe];function ere(e,t,n,s,o,r){return A(),B("svg",Zoe,Qoe)}var xi=mn(Xoe,[["render",ere]]);const tre=ge({name:"DArrowLeft"}),nre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},sre=W("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0141.728 0 30.592 30.592 0 010 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 01-.512 43.264 29.12 29.12 0 01-41.216-.512L197.76 534.272a32 32 0 010-44.672l331.648-340.224zm256 0a29.12 29.12 0 0141.728 0 30.592 30.592 0 010 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 01-.512 43.264 29.12 29.12 0 01-41.216-.512L453.76 534.272a32 32 0 010-44.672l331.648-340.224z"},null,-1),ore=[sre];function rre(e,t,n,s,o,r){return A(),B("svg",nre,ore)}var E0=mn(tre,[["render",rre]]);const ire=ge({name:"DArrowRight"}),are={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},lre=W("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0141.728.064L826.24 489.664a32 32 0 010 44.672L494.592 874.624a29.12 29.12 0 01-41.728 0 30.592 30.592 0 010-42.752L764.736 512 452.864 192a30.592 30.592 0 010-42.688zm-256 0a29.12 29.12 0 0141.728.064L570.24 489.664a32 32 0 010 44.672L238.592 874.624a29.12 29.12 0 01-41.728 0 30.592 30.592 0 010-42.752L508.736 512 196.864 192a30.592 30.592 0 010-42.688z"},null,-1),ure=[lre];function cre(e,t,n,s,o,r){return A(),B("svg",are,ure)}var _0=mn(ire,[["render",cre]]);const dre=ge({name:"Delete"}),fre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},hre=W("path",{fill:"currentColor",d:"M160 256H96a32 32 0 010-64h256V95.936a32 32 0 0132-32h256a32 32 0 0132 32V192h256a32 32 0 110 64h-64v672a32 32 0 01-32 32H192a32 32 0 01-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 01-32-32V416a32 32 0 0164 0v320a32 32 0 01-32 32zm192 0a32 32 0 01-32-32V416a32 32 0 0164 0v320a32 32 0 01-32 32z"},null,-1),pre=[hre];function gre(e,t,n,s,o,r){return A(),B("svg",fre,pre)}var mre=mn(dre,[["render",gre]]);const vre=ge({name:"Document"}),bre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},yre=W("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 01-32 32H160a32 32 0 01-32-32V96a32 32 0 0132-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),wre=[yre];function $re(e,t,n,s,o,r){return A(),B("svg",bre,wre)}var Cre=mn(vre,[["render",$re]]);const xre=ge({name:"FullScreen"}),kre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Sre=W("path",{fill:"currentColor",d:"M160 96.064l192 .192a32 32 0 010 64l-192-.192V352a32 32 0 01-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1164 0v191.936l192-.192a32 32 0 110 64l-192 .192zM864 96.064V96h64v256a32 32 0 11-64 0V160.064l-192 .192a32 32 0 110-64l192-.192zm0 831.872l-192-.192a32 32 0 010-64l192 .192V672a32 32 0 1164 0v256h-64v-.064z"},null,-1),Ire=[Sre];function Tre(e,t,n,s,o,r){return A(),B("svg",kre,Ire)}var Ere=mn(xre,[["render",Tre]]);const _re=ge({name:"InfoFilled"}),Nre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Are=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896.064A448 448 0 01512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 01-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 017.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),Dre=[Are];function Rre(e,t,n,s,o,r){return A(),B("svg",Nre,Dre)}var L2=mn(_re,[["render",Rre]]);const Ore=ge({name:"Loading"}),Mre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Pre=W("path",{fill:"currentColor",d:"M512 64a32 32 0 0132 32v192a32 32 0 01-64 0V96a32 32 0 0132-32zm0 640a32 32 0 0132 32v192a32 32 0 11-64 0V736a32 32 0 0132-32zm448-192a32 32 0 01-32 32H736a32 32 0 110-64h192a32 32 0 0132 32zm-640 0a32 32 0 01-32 32H96a32 32 0 010-64h192a32 32 0 0132 32zM195.2 195.2a32 32 0 0145.248 0L376.32 331.008a32 32 0 01-45.248 45.248L195.2 240.448a32 32 0 010-45.248zm452.544 452.544a32 32 0 0145.248 0L828.8 783.552a32 32 0 01-45.248 45.248L647.744 692.992a32 32 0 010-45.248zM828.8 195.264a32 32 0 010 45.184L692.992 376.32a32 32 0 01-45.248-45.248l135.808-135.808a32 32 0 0145.248 0zm-452.544 452.48a32 32 0 010 45.248L240.448 828.8a32 32 0 01-45.248-45.248l135.808-135.808a32 32 0 0145.248 0z"},null,-1),Fre=[Pre];function Lre(e,t,n,s,o,r){return A(),B("svg",Mre,Fre)}var Ra=mn(Ore,[["render",Lre]]);const Bre=ge({name:"Minus"}),zre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Vre=W("path",{fill:"currentColor",d:"M128 544h768a32 32 0 100-64H128a32 32 0 000 64z"},null,-1),Wre=[Vre];function Hre(e,t,n,s,o,r){return A(),B("svg",zre,Wre)}var Ure=mn(Bre,[["render",Hre]]);const jre=ge({name:"MoreFilled"}),Gre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Kre=W("path",{fill:"currentColor",d:"M176 416a112 112 0 110 224 112 112 0 010-224zm336 0a112 112 0 110 224 112 112 0 010-224zm336 0a112 112 0 110 224 112 112 0 010-224z"},null,-1),qre=[Kre];function Yre(e,t,n,s,o,r){return A(),B("svg",Gre,qre)}var Xre=mn(jre,[["render",Yre]]);const Zre=ge({name:"More"}),Jre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Qre=W("path",{fill:"currentColor",d:"M176 416a112 112 0 100 224 112 112 0 000-224m0 64a48 48 0 110 96 48 48 0 010-96zm336-64a112 112 0 110 224 112 112 0 010-224zm0 64a48 48 0 100 96 48 48 0 000-96zm336-64a112 112 0 110 224 112 112 0 010-224zm0 64a48 48 0 100 96 48 48 0 000-96z"},null,-1),eie=[Qre];function tie(e,t,n,s,o,r){return A(),B("svg",Jre,eie)}var nie=mn(Zre,[["render",tie]]);const sie=ge({name:"Plus"}),oie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},rie=W("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0164 0v352h352a32 32 0 110 64H544v352a32 32 0 11-64 0V544H128a32 32 0 010-64h352z"},null,-1),iie=[rie];function aie(e,t,n,s,o,r){return A(),B("svg",oie,iie)}var xF=mn(sie,[["render",aie]]);const lie=ge({name:"QuestionFilled"}),uie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},cie=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 00-38.72 14.784 49.408 49.408 0 00-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 00523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0016.192-38.72 51.968 51.968 0 00-15.488-38.016 55.936 55.936 0 00-39.424-14.784z"},null,-1),die=[cie];function fie(e,t,n,s,o,r){return A(),B("svg",uie,die)}var hie=mn(lie,[["render",fie]]);const pie=ge({name:"RefreshLeft"}),gie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},mie=W("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 010 64H232.96a32 32 0 01-32-32V179.712a32 32 0 0164 0v50.56a384 384 0 01643.84 282.88 384 384 0 01-383.936 384 384 384 0 01-384-384h64a320 320 0 10640 0 320 320 0 00-555.712-216.448z"},null,-1),vie=[mie];function bie(e,t,n,s,o,r){return A(),B("svg",gie,vie)}var yie=mn(pie,[["render",bie]]);const wie=ge({name:"RefreshRight"}),$ie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Cie=W("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1164 0v149.056a32 32 0 01-32 32H667.52a32 32 0 110-64h92.992A320 320 0 10524.8 833.152a320 320 0 00320-320h64a384 384 0 01-384 384 384 384 0 01-384-384 384 384 0 01643.712-282.88z"},null,-1),xie=[Cie];function kie(e,t,n,s,o,r){return A(),B("svg",$ie,xie)}var Sie=mn(wie,[["render",kie]]);const Iie=ge({name:"ScaleToOriginal"}),Tie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Eie=W("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0160.236 60.235v481.883a60.235 60.235 0 01-60.236 60.235H210.824a60.235 60.235 0 01-60.236-60.235V240.94a60.235 60.235 0 0160.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0090.353 240.94v481.883a120.47 120.47 0 00120.47 120.47h602.353a120.47 120.47 0 00120.471-120.47V240.94a120.47 120.47 0 00-120.47-120.47zm-120.47 180.705a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 0060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zm-361.412 0a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 1060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zM512 361.412a30.118 30.118 0 00-30.118 30.117v30.118a30.118 30.118 0 0060.236 0V391.53A30.118 30.118 0 00512 361.412zM512 512a30.118 30.118 0 00-30.118 30.118v30.117a30.118 30.118 0 0060.236 0v-30.117A30.118 30.118 0 00512 512z"},null,-1),_ie=[Eie];function Nie(e,t,n,s,o,r){return A(),B("svg",Tie,_ie)}var Aie=mn(Iie,[["render",Nie]]);const Die=ge({name:"Search"}),Rie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Oie=W("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704z"},null,-1),Mie=[Oie];function Pie(e,t,n,s,o,r){return A(),B("svg",Rie,Mie)}var Fie=mn(Die,[["render",Pie]]);const Lie=ge({name:"StarFilled"}),Bie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zie=W("path",{fill:"currentColor",d:"M283.84 867.84L512 747.776l228.16 119.936a6.4 6.4 0 009.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 00-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 00-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 00-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 009.28 6.72z"},null,-1),Vie=[zie];function Wie(e,t,n,s,o,r){return A(),B("svg",Bie,Vie)}var th=mn(Lie,[["render",Wie]]);const Hie=ge({name:"Star"}),Uie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},jie=W("path",{fill:"currentColor",d:"M512 747.84l228.16 119.936a6.4 6.4 0 009.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 00-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 00-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 00-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 009.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 01-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 01128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 01126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0139.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 01-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),Gie=[jie];function Kie(e,t,n,s,o,r){return A(),B("svg",Uie,Gie)}var kF=mn(Hie,[["render",Kie]]);const qie=ge({name:"SuccessFilled"}),Yie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Xie=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm-55.808 536.384l-99.52-99.584a38.4 38.4 0 10-54.336 54.336l126.72 126.72a38.272 38.272 0 0054.336 0l262.4-262.464a38.4 38.4 0 10-54.272-54.336L456.192 600.384z"},null,-1),Zie=[Xie];function Jie(e,t,n,s,o,r){return A(),B("svg",Yie,Zie)}var SF=mn(qie,[["render",Jie]]);const Qie=ge({name:"View"}),eae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},tae=W("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 110 448 224 224 0 010-448zm0 64a160.192 160.192 0 00-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),nae=[tae];function sae(e,t,n,s,o,r){return A(),B("svg",eae,nae)}var oae=mn(Qie,[["render",sae]]);const rae=ge({name:"WarningFilled"}),iae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},aae=W("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 192a58.432 58.432 0 00-58.24 63.744l23.36 256.384a35.072 35.072 0 0069.76 0l23.296-256.384A58.432 58.432 0 00512 256zm0 512a51.2 51.2 0 100-102.4 51.2 51.2 0 000 102.4z"},null,-1),lae=[aae];function uae(e,t,n,s,o,r){return A(),B("svg",iae,lae)}var Qh=mn(rae,[["render",uae]]);const cae=ge({name:"ZoomIn"}),dae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fae=W("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704zm-32-384v-96a32 32 0 0164 0v96h96a32 32 0 010 64h-96v96a32 32 0 01-64 0v-96h-96a32 32 0 010-64h96z"},null,-1),hae=[fae];function pae(e,t,n,s,o,r){return A(),B("svg",dae,hae)}var IF=mn(cae,[["render",pae]]);const gae=ge({name:"ZoomOut"}),mae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},vae=W("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704zM352 448h256a32 32 0 010 64H352a32 32 0 010-64z"},null,-1),bae=[vae];function yae(e,t,n,s,o,r){return A(),B("svg",mae,bae)}var wae=mn(gae,[["render",yae]]);const $ae={Close:xi},N0={Close:xi,SuccessFilled:SF,InfoFilled:L2,WarningFilled:Qh,CircleCloseFilled:F2},Ea={success:SF,warning:Qh,error:F2,info:L2},TF={validating:Ra,success:vb,error:Ta},Cae=["light","dark"],xae=mt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:fY(Ea),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:Cae,default:"light"}}),kae={close:e=>e instanceof MouseEvent},Sae=ge({name:"ElAlert",components:ut({ElIcon:Ot},N0),props:xae,emits:kae,setup(e,{emit:t,slots:n}){const s=At("alert"),o=L(!0),r=R(()=>Ea[e.type]||Ea.info),i=R(()=>e.description||n.default?s.is("big"):""),a=R(()=>e.description||n.default?s.is("bold"):"");return{ns:s,visible:o,iconComponent:r,isBigIcon:i,isBoldTitle:a,close:u=>{o.value=!1,t("close",u)}}}});function Iae(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("close");return A(),ve(xs,{name:"el-alert-fade"},{default:re(()=>[$t(W("div",{class:q([e.ns.b(),e.ns.m(e.type),e.ns.is("center",e.center),e.ns.is(e.effect)]),role:"alert"},[e.showIcon&&e.iconComponent?(A(),ve(i,{key:0,class:q([e.ns.e("icon"),e.isBigIcon])},{default:re(()=>[(A(),ve(tn(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),W("div",{class:q(e.ns.e("content"))},[e.title||e.$slots.title?(A(),B("span",{key:0,class:q([e.ns.e("title"),e.isBoldTitle])},[Re(e.$slots,"title",{},()=>[qt(Pe(e.title),1)])],2)):ce("v-if",!0),e.$slots.default||e.description?(A(),B("p",{key:1,class:q(e.ns.e("description"))},[Re(e.$slots,"default",{},()=>[qt(Pe(e.description),1)])],2)):ce("v-if",!0),e.closable?(A(),B(at,{key:2},[e.closeText?(A(),B("div",{key:0,class:q([e.ns.e("closebtn"),e.ns.is("customed")]),onClick:t[0]||(t[0]=(...l)=>e.close&&e.close(...l))},Pe(e.closeText),3)):(A(),ve(i,{key:1,class:q(e.ns.e("closebtn")),onClick:e.close},{default:re(()=>[le(a)]),_:1},8,["class","onClick"]))],2112)):ce("v-if",!0)],2)],2),[[en,e.visible]])]),_:3})}var Tae=We(Sae,[["render",Iae]]);const Eae=Wt(Tae);var _ae=Ai,Nae=function(){return _ae.Date.now()},Aae=Nae,Dae=/\s/;function Rae(e){for(var t=e.length;t--&&Dae.test(e.charAt(t)););return t}var Oae=Rae,Mae=Oae,Pae=/^\s+/;function Fae(e){return e&&e.slice(0,Mae(e)+1).replace(Pae,"")}var Lae=Fae,Bae=Lae,FN=Sl,zae=T0,LN=0/0,Vae=/^[-+]0x[0-9a-f]+$/i,Wae=/^0b[01]+$/i,Hae=/^0o[0-7]+$/i,Uae=parseInt;function jae(e){if(typeof e=="number")return e;if(zae(e))return LN;if(FN(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=FN(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Bae(e);var n=Wae.test(e);return n||Hae.test(e)?Uae(e.slice(2),n?2:8):Vae.test(e)?LN:+e}var Gae=jae,Kae=Sl,Sw=Aae,BN=Gae,qae="Expected a function",Yae=Math.max,Xae=Math.min;function Zae(e,t,n){var s,o,r,i,a,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(qae);t=BN(t)||0,Kae(n)&&(c=!!n.leading,d="maxWait"in n,r=d?Yae(BN(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f);function h(C){var x=s,k=o;return s=o=void 0,u=C,i=e.apply(k,x),i}function p(C){return u=C,a=setTimeout(v,t),c?h(C):i}function g(C){var x=C-l,k=C-u,I=t-x;return d?Xae(I,r-k):I}function m(C){var x=C-l,k=C-u;return l===void 0||x>=t||x<0||d&&k>=r}function v(){var C=Sw();if(m(C))return b(C);a=setTimeout(v,g(C))}function b(C){return a=void 0,f&&s?h(C):(s=o=void 0,i)}function $(){a!==void 0&&clearTimeout(a),u=0,s=l=o=a=void 0}function y(){return a===void 0?i:b(Sw())}function w(){var C=Sw(),x=m(C);if(s=arguments,o=this,l=C,x){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(v,t),h(l)}return a===void 0&&(a=setTimeout(v,t)),i}return w.cancel=$,w.flush=y,w}var tr=Zae;const Ya=new Map;let zN;Yt&&(bn(document,"mousedown",e=>zN=e),bn(document,"mouseup",e=>{for(const t of Ya.values())for(const{documentHandler:n}of t)n(e,zN)}));function VN(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:t.arg instanceof HTMLElement&&n.push(t.arg),function(s,o){const r=t.instance.popperRef,i=s.target,a=o==null?void 0:o.target,l=!t||!t.instance,u=!i||!a,c=e.contains(i)||e.contains(a),d=e===i,f=n.length&&n.some(p=>p==null?void 0:p.contains(i))||n.length&&n.includes(a),h=r&&(r.contains(i)||r.contains(a));l||u||c||d||f||h||t.value(s,o)}}const El={beforeMount(e,t){Ya.has(e)||Ya.set(e,[]),Ya.get(e).push({documentHandler:VN(e,t),bindingFn:t.value})},updated(e,t){Ya.has(e)||Ya.set(e,[]);const n=Ya.get(e),s=n.findIndex(r=>r.bindingFn===t.oldValue),o={documentHandler:VN(e,t),bindingFn:t.value};s>=0?n.splice(s,1,o):n.push(o)},unmounted(e){Ya.delete(e)}};var EF={beforeMount(e,t){let n=null,s;const o=()=>t.value&&t.value(),r=()=>{Date.now()-s<100&&o(),clearInterval(n),n=null};bn(e,"mousedown",i=>{i.button===0&&(s=Date.now(),Wne(document,"mouseup",r),clearInterval(n),n=setInterval(o,100))})}};const oC="_trap-focus-children",wu=[],WN=e=>{if(wu.length===0)return;const t=wu[wu.length-1][oC];if(t.length>0&&e.code===Qe.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const n=e.shiftKey,s=e.target===t[0],o=e.target===t[t.length-1];s&&n&&(e.preventDefault(),t[t.length-1].focus()),o&&!n&&(e.preventDefault(),t[0].focus())}},B2={beforeMount(e){e[oC]=RN(e),wu.push(e),wu.length<=1&&bn(document,"keydown",WN)},updated(e){dt(()=>{e[oC]=RN(e)})},unmounted(){wu.shift(),wu.length===0&&Kn(document,"keydown",WN)}};var HN=!1,gu,rC,iC,_v,Nv,_F,Av,aC,lC,uC,NF,cC,dC,AF,DF;function Go(){if(!HN){HN=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(cC=/\b(iPhone|iP[ao]d)/.exec(e),dC=/\b(iP[ao]d)/.exec(e),uC=/Android/i.exec(e),AF=/FBAN\/\w+;/i.exec(e),DF=/Mobile/i.exec(e),NF=!!/Win64/.exec(e),t){gu=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,gu&&document&&document.documentMode&&(gu=document.documentMode);var s=/(?:Trident\/(\d+.\d+))/.exec(e);_F=s?parseFloat(s[1])+4:gu,rC=t[2]?parseFloat(t[2]):NaN,iC=t[3]?parseFloat(t[3]):NaN,_v=t[4]?parseFloat(t[4]):NaN,_v?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),Nv=t&&t[1]?parseFloat(t[1]):NaN):Nv=NaN}else gu=rC=iC=Nv=_v=NaN;if(n){if(n[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Av=o?parseFloat(o[1].replace("_",".")):!0}else Av=!1;aC=!!n[2],lC=!!n[3]}else Av=aC=lC=!1}}var fC={ie:function(){return Go()||gu},ieCompatibilityMode:function(){return Go()||_F>gu},ie64:function(){return fC.ie()&&NF},firefox:function(){return Go()||rC},opera:function(){return Go()||iC},webkit:function(){return Go()||_v},safari:function(){return fC.webkit()},chrome:function(){return Go()||Nv},windows:function(){return Go()||aC},osx:function(){return Go()||Av},linux:function(){return Go()||lC},iphone:function(){return Go()||cC},mobile:function(){return Go()||cC||dC||uC||DF},nativeApp:function(){return Go()||AF},android:function(){return Go()||uC},ipad:function(){return Go()||dC}},Jae=fC,Bm=!!(typeof window!="undefined"&&window.document&&window.document.createElement),Qae={canUseDOM:Bm,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:Bm&&!!(window.addEventListener||window.attachEvent),canUseViewport:Bm&&!!window.screen,isInWorker:!Bm},RF=Qae,OF;RF.canUseDOM&&(OF=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function ele(e,t){if(!RF.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var o=document.createElement("div");o.setAttribute(n,"return;"),s=typeof o[n]=="function"}return!s&&OF&&e==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var tle=ele,UN=10,jN=40,GN=800;function MF(e){var t=0,n=0,s=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),s=t*UN,o=n*UN,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(s=e.deltaX),(s||o)&&e.deltaMode&&(e.deltaMode==1?(s*=jN,o*=jN):(s*=GN,o*=GN)),s&&!t&&(t=s<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:s,pixelY:o}}MF.getEventType=function(){return Jae.firefox()?"DOMMouseScroll":tle("wheel")?"wheel":"mousewheel"};var nle=MF;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const sle=function(e,t){if(e&&e.addEventListener){const n=function(s){const o=nle(s);t&&t.apply(this,[s,o])};nF()?e.addEventListener("DOMMouseScroll",n):e.onmousewheel=n}},ole={beforeMount(e,t){sle(e,t.value)}},rle=function(e){for(const t of e){const n=t.target.__resizeListeners__||[];n.length&&n.forEach(s=>{s()})}},_l=function(e,t){!Yt||!e||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new ResizeObserver(rle),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},Nl=function(e,t){var n;!e||!e.__resizeListeners__||(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(n=e.__ro__)==null||n.disconnect())},ile={beforeMount(e,t){e._handleResize=()=>{var n;e&&((n=t.value)==null||n.call(t,e))},_l(e,e._handleResize)},beforeUnmount(e){Nl(e,e._handleResize)}},Pt="update:modelValue",Xs="change",gl="input";function A0(e){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e)}let ci;const ale=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,lle=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function ule(e){const t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),s=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),o=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:lle.map(i=>`${i}:${t.getPropertyValue(i)}`).join(";"),paddingSize:s,borderSize:o,boxSizing:n}}function KN(e,t=1,n){var s;ci||(ci=document.createElement("textarea"),document.body.appendChild(ci));const{paddingSize:o,borderSize:r,boxSizing:i,contextStyle:a}=ule(e);ci.setAttribute("style",`${a};${ale}`),ci.value=e.value||e.placeholder||"";let l=ci.scrollHeight;const u={};i==="border-box"?l=l+r:i==="content-box"&&(l=l-o),ci.value="";const c=ci.scrollHeight-o;if(xn(t)){let d=c*t;i==="border-box"&&(d=d+o+r),l=Math.max(d,l),u.minHeight=`${d}px`}if(xn(n)){let d=c*n;i==="border-box"&&(d=d+o+r),l=Math.min(d,l)}return u.height=`${l}px`,(s=ci.parentNode)==null||s.removeChild(ci),ci=void 0,u}const cle=mt({size:I0,disabled:Boolean,modelValue:{type:Je(void 0),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Je([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Je([String,Object]),default:""},prefixIcon:{type:Je([String,Object]),default:""},label:{type:String},tabindex:{type:[Number,String]},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Je([Object,Array,String]),default:()=>Ns({})}}),dle={[Pt]:e=>Xt(e),input:e=>Xt(e),change:e=>Xt(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof KeyboardEvent,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},fle={suffix:"append",prefix:"prepend"},hle=ge({name:"ElInput",components:{ElIcon:Ot,CircleClose:Ta,IconView:oae},inheritAttrs:!1,props:cle,emits:dle,setup(e,{slots:t,emit:n,attrs:s}){const o=Lt(),r=C2(),{form:i,formItem:a}=af(),l=ks(),u=Pp(),c=At("input"),d=At("textarea"),f=L(),h=L(),p=L(!1),g=L(!1),m=L(!1),v=L(!1),b=vo(e.inputStyle),$=R(()=>f.value||h.value),y=R(()=>{var H;return(H=i==null?void 0:i.statusIcon)!=null?H:!1}),w=R(()=>(a==null?void 0:a.validateState)||""),C=R(()=>TF[w.value]),x=R(()=>s.style),k=R(()=>[e.inputStyle,b.value,{resize:e.resize}]),I=R(()=>e.modelValue===null||e.modelValue===void 0?"":String(e.modelValue)),S=R(()=>e.clearable&&!u.value&&!e.readonly&&!!I.value&&(p.value||g.value)),T=R(()=>e.showPassword&&!u.value&&!e.readonly&&(!!I.value||p.value)),_=R(()=>e.showWordLimit&&!!r.value.maxlength&&(e.type==="text"||e.type==="textarea")&&!u.value&&!e.readonly&&!e.showPassword),N=R(()=>Array.from(I.value).length),O=R(()=>!!_.value&&N.value>Number(r.value.maxlength)),M=()=>{const{type:H,autosize:se}=e;if(!(!Yt||H!=="textarea"))if(se){const we=an(se)?se.minRows:void 0,J=an(se)?se.maxRows:void 0;b.value=ut({},KN(h.value,we,J))}else b.value={minHeight:KN(h.value).minHeight}},D=()=>{const H=$.value;!H||H.value===I.value||(H.value=I.value)},F=H=>{const{el:se}=o.vnode;if(!se)return;const J=Array.from(se.querySelectorAll(`.${c.e(H)}`)).find(Ie=>Ie.parentNode===se);if(!J)return;const _e=fle[H];t[_e]?J.style.transform=`translateX(${H==="suffix"?"-":""}${se.querySelector(`.${c.be("group",_e)}`).offsetWidth}px)`:J.removeAttribute("style")},V=()=>{F("prefix"),F("suffix")},U=H=>{const{value:se}=H.target;m.value||se!==I.value&&(n(Pt,se),n("input",se),dt(D))},ne=H=>{n("change",H.target.value)},be=()=>{dt(()=>{var H;(H=$.value)==null||H.focus()})},te=()=>{var H;(H=$.value)==null||H.blur()},he=H=>{p.value=!0,n("focus",H)},oe=H=>{var se;p.value=!1,n("blur",H),e.validateEvent&&((se=a==null?void 0:a.validate)==null||se.call(a,"blur"))},G=()=>{var H;(H=$.value)==null||H.select()},Y=H=>{n("compositionstart",H),m.value=!0},X=H=>{var se;n("compositionupdate",H);const we=(se=H.target)==null?void 0:se.value,J=we[we.length-1]||"";m.value=!A0(J)},ae=H=>{n("compositionend",H),m.value&&(m.value=!1,U(H))},Se=()=>{n(Pt,""),n("change",""),n("clear"),n("input","")},Le=()=>{v.value=!v.value,be()},Be=R(()=>!!t.suffix||!!e.suffixIcon||S.value||e.showPassword||_.value||!!w.value&&y.value);return Oe(()=>e.modelValue,()=>{var H;dt(M),e.validateEvent&&((H=a==null?void 0:a.validate)==null||H.call(a,"change"))}),Oe(I,()=>D()),Oe(()=>e.type,()=>{dt(()=>{D(),M(),V()})}),Rt(()=>{D(),V(),dt(M)}),_i(()=>{dt(V)}),{input:f,textarea:h,attrs:r,inputSize:l,validateState:w,validateIcon:C,containerStyle:x,computedTextareaStyle:k,inputDisabled:u,showClear:S,showPwdVisible:T,isWordLimitVisible:_,textLength:N,hovering:g,inputExceed:O,passwordVisible:v,inputOrTextarea:$,suffixVisible:Be,needStatusIcon:y,resizeTextarea:M,handleInput:U,handleChange:ne,handleFocus:he,handleBlur:oe,handleCompositionStart:Y,handleCompositionUpdate:X,handleCompositionEnd:ae,handlePasswordVisible:Le,clear:Se,select:G,focus:be,blur:te,onMouseLeave:H=>{g.value=!1,n("mouseleave",H)},onMouseEnter:H=>{g.value=!0,n("mouseenter",H)},handleKeydown:H=>{n("keydown",H)},nsInput:c,nsTextarea:d}}}),ple=["type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder"],gle=["tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];function mle(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("circle-close"),l=ie("icon-view");return $t((A(),B("div",{class:q([e.type==="textarea"?e.nsTextarea.b():e.nsInput.b(),e.nsInput.m(e.inputSize),e.nsInput.is("disabled",e.inputDisabled),e.nsInput.is("exceed",e.inputExceed),{[e.nsInput.b("group")]:e.$slots.prepend||e.$slots.append,[e.nsInput.bm("group","append")]:e.$slots.append,[e.nsInput.bm("group","prepend")]:e.$slots.prepend,[e.nsInput.m("prefix")]:e.$slots.prefix||e.prefixIcon,[e.nsInput.m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[e.nsInput.m("suffix--password-clear")]:e.clearable&&e.showPassword},e.$attrs.class]),style:nt(e.containerStyle),onMouseenter:t[17]||(t[17]=(...u)=>e.onMouseEnter&&e.onMouseEnter(...u)),onMouseleave:t[18]||(t[18]=(...u)=>e.onMouseLeave&&e.onMouseLeave(...u))},[ce(" input "),e.type!=="textarea"?(A(),B(at,{key:0},[ce(" prepend slot "),e.$slots.prepend?(A(),B("div",{key:0,class:q(e.nsInput.be("group","prepend"))},[Re(e.$slots,"prepend")],2)):ce("v-if",!0),W("input",lo({ref:"input",class:e.nsInput.e("inner")},e.attrs,{type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:t[0]||(t[0]=(...u)=>e.handleCompositionStart&&e.handleCompositionStart(...u)),onCompositionupdate:t[1]||(t[1]=(...u)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...u)),onCompositionend:t[2]||(t[2]=(...u)=>e.handleCompositionEnd&&e.handleCompositionEnd(...u)),onInput:t[3]||(t[3]=(...u)=>e.handleInput&&e.handleInput(...u)),onFocus:t[4]||(t[4]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[5]||(t[5]=(...u)=>e.handleBlur&&e.handleBlur(...u)),onChange:t[6]||(t[6]=(...u)=>e.handleChange&&e.handleChange(...u)),onKeydown:t[7]||(t[7]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))}),null,16,ple),ce(" prefix slot "),e.$slots.prefix||e.prefixIcon?(A(),B("span",{key:1,class:q(e.nsInput.e("prefix"))},[W("span",{class:q(e.nsInput.e("prefix-inner"))},[Re(e.$slots,"prefix"),e.prefixIcon?(A(),ve(i,{key:0,class:q(e.nsInput.e("icon"))},{default:re(()=>[(A(),ve(tn(e.prefixIcon)))]),_:1},8,["class"])):ce("v-if",!0)],2)],2)):ce("v-if",!0),ce(" suffix slot "),e.suffixVisible?(A(),B("span",{key:2,class:q(e.nsInput.e("suffix"))},[W("span",{class:q(e.nsInput.e("suffix-inner"))},[!e.showClear||!e.showPwdVisible||!e.isWordLimitVisible?(A(),B(at,{key:0},[Re(e.$slots,"suffix"),e.suffixIcon?(A(),ve(i,{key:0,class:q(e.nsInput.e("icon"))},{default:re(()=>[(A(),ve(tn(e.suffixIcon)))]),_:1},8,["class"])):ce("v-if",!0)],64)):ce("v-if",!0),e.showClear?(A(),ve(i,{key:1,class:q([e.nsInput.e("icon"),e.nsInput.e("clear")]),onMousedown:t[8]||(t[8]=ht(()=>{},["prevent"])),onClick:e.clear},{default:re(()=>[le(a)]),_:1},8,["class","onClick"])):ce("v-if",!0),e.showPwdVisible?(A(),ve(i,{key:2,class:q([e.nsInput.e("icon"),e.nsInput.e("clear")]),onClick:e.handlePasswordVisible},{default:re(()=>[le(l)]),_:1},8,["class","onClick"])):ce("v-if",!0),e.isWordLimitVisible?(A(),B("span",{key:3,class:q(e.nsInput.e("count"))},[W("span",{class:q(e.nsInput.e("count-inner"))},Pe(e.textLength)+" / "+Pe(e.attrs.maxlength),3)],2)):ce("v-if",!0)],2),e.validateState&&e.validateIcon&&e.needStatusIcon?(A(),ve(i,{key:0,class:q([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:re(()=>[(A(),ve(tn(e.validateIcon)))]),_:1},8,["class"])):ce("v-if",!0)],2)):ce("v-if",!0),ce(" append slot "),e.$slots.append?(A(),B("div",{key:3,class:q(e.nsInput.be("group","append"))},[Re(e.$slots,"append")],2)):ce("v-if",!0)],64)):(A(),B(at,{key:1},[ce(" textarea "),W("textarea",lo({ref:"textarea",class:e.nsTextarea.e("inner")},e.attrs,{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autocomplete,style:e.computedTextareaStyle,"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:t[9]||(t[9]=(...u)=>e.handleCompositionStart&&e.handleCompositionStart(...u)),onCompositionupdate:t[10]||(t[10]=(...u)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...u)),onCompositionend:t[11]||(t[11]=(...u)=>e.handleCompositionEnd&&e.handleCompositionEnd(...u)),onInput:t[12]||(t[12]=(...u)=>e.handleInput&&e.handleInput(...u)),onFocus:t[13]||(t[13]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[14]||(t[14]=(...u)=>e.handleBlur&&e.handleBlur(...u)),onChange:t[15]||(t[15]=(...u)=>e.handleChange&&e.handleChange(...u)),onKeydown:t[16]||(t[16]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))}),null,16,gle),e.isWordLimitVisible?(A(),B("span",{key:0,class:q(e.nsInput.e("count"))},Pe(e.textLength)+" / "+Pe(e.attrs.maxlength),3)):ce("v-if",!0)],64))],38)),[[en,e.type!=="hidden"]])}var vle=We(hle,[["render",mle]]);const ei=Wt(vle),PF={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},ble=({move:e,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${e}%)`}),yle=mt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),qN="Thumb",wle=ge({name:qN,props:yle,setup(e){const t=Ze(DP),n=At("scrollbar");t||ko(qN,"can not inject scrollbar context");const s=L(),o=L(),r=L({}),i=L(!1);let a=!1,l=!1,u=Yt?document.onselectstart:null;const c=R(()=>PF[e.vertical?"vertical":"horizontal"]),d=R(()=>ble({size:e.size,move:e.move,bar:c.value})),f=R(()=>s.value[c.value.offset]**2/t.wrapElement[c.value.scrollSize]/e.ratio/o.value[c.value.offset]),h=w=>{var C;if(w.stopPropagation(),w.ctrlKey||[1,2].includes(w.button))return;(C=window.getSelection())==null||C.removeAllRanges(),g(w);const x=w.currentTarget;!x||(r.value[c.value.axis]=x[c.value.offset]-(w[c.value.client]-x.getBoundingClientRect()[c.value.direction]))},p=w=>{if(!o.value||!s.value||!t.wrapElement)return;const C=Math.abs(w.target.getBoundingClientRect()[c.value.direction]-w[c.value.client]),x=o.value[c.value.offset]/2,k=(C-x)*100*f.value/s.value[c.value.offset];t.wrapElement[c.value.scroll]=k*t.wrapElement[c.value.scrollSize]/100},g=w=>{w.stopImmediatePropagation(),a=!0,document.addEventListener("mousemove",m),document.addEventListener("mouseup",v),u=document.onselectstart,document.onselectstart=()=>!1},m=w=>{if(!s.value||!o.value||a===!1)return;const C=r.value[c.value.axis];if(!C)return;const x=(s.value.getBoundingClientRect()[c.value.direction]-w[c.value.client])*-1,k=o.value[c.value.offset]-C,I=(x-k)*100*f.value/s.value[c.value.offset];t.wrapElement[c.value.scroll]=I*t.wrapElement[c.value.scrollSize]/100},v=()=>{a=!1,r.value[c.value.axis]=0,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",v),y(),l&&(i.value=!1)},b=()=>{l=!1,i.value=!!e.size},$=()=>{l=!0,i.value=a};ls(()=>{y(),document.removeEventListener("mouseup",v)});const y=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Ls(bo(t,"scrollbarElement"),"mousemove",b),Ls(bo(t,"scrollbarElement"),"mouseleave",$),{ns:n,instance:s,thumb:o,bar:c,thumbStyle:d,visible:i,clickTrackHandler:p,clickThumbHandler:h}}});function $le(e,t,n,s,o,r){return A(),ve(xs,{name:e.ns.b("fade")},{default:re(()=>[$t(W("div",{ref:"instance",class:q([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:t[1]||(t[1]=(...i)=>e.clickTrackHandler&&e.clickTrackHandler(...i))},[W("div",{ref:"thumb",class:q(e.ns.e("thumb")),style:nt(e.thumbStyle),onMousedown:t[0]||(t[0]=(...i)=>e.clickThumbHandler&&e.clickThumbHandler(...i))},null,38)],34),[[en,e.always||e.visible]])]),_:1},8,["name"])}var Cle=We(wle,[["render",$le]]);const xle=mt({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),kle=ge({components:{Thumb:Cle},props:xle,setup(e){const t=L(0),n=L(0),s=4;return{handleScroll:r=>{if(r){const i=r.offsetHeight-s,a=r.offsetWidth-s;n.value=r.scrollTop*100/i*e.ratioY,t.value=r.scrollLeft*100/a*e.ratioX}},moveX:t,moveY:n}}});function Sle(e,t,n,s,o,r){const i=ie("thumb");return A(),B(at,null,[le(i,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),le(i,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}var Ile=We(kle,[["render",Sle]]);const Tle=mt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Je([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),Ele={scroll:({scrollTop:e,scrollLeft:t})=>xn(e)&&xn(t)},_le=ge({name:"ElScrollbar",components:{Bar:Ile},props:Tle,emits:Ele,setup(e,{emit:t}){const n=At("scrollbar");let s,o;const r=L(),i=L(),a=L(),l=L("0"),u=L("0"),c=L(),d=L(0),f=L(0),h=L(1),p=L(1),g=4,m=R(()=>{const w={};return e.height&&(w.height=Ia(e.height)),e.maxHeight&&(w.maxHeight=Ia(e.maxHeight)),[e.wrapStyle,w]}),v=()=>{var w;i.value&&((w=c.value)==null||w.handleScroll(i.value),t("scroll",{scrollTop:i.value.scrollTop,scrollLeft:i.value.scrollLeft}))},b=w=>{!xn(w)||(i.value.scrollTop=w)},$=w=>{!xn(w)||(i.value.scrollLeft=w)},y=()=>{if(!i.value)return;const w=i.value.offsetHeight-g,C=i.value.offsetWidth-g,x=w**2/i.value.scrollHeight,k=C**2/i.value.scrollWidth,I=Math.max(x,e.minSize),S=Math.max(k,e.minSize);h.value=x/(w-x)/(I/(w-I)),p.value=k/(C-k)/(S/(C-S)),u.value=I+g<w?`${I}px`:"",l.value=S+g<C?`${S}px`:""};return Oe(()=>e.noresize,w=>{w?(s==null||s(),o==null||o()):({stop:s}=Yh(a,y),o=Ls("resize",y))},{immediate:!0}),Vt(DP,Sn({scrollbarElement:r,wrapElement:i})),Rt(()=>{e.native||dt(()=>y())}),{ns:n,scrollbar$:r,wrap$:i,resize$:a,barRef:c,moveX:d,moveY:f,ratioX:p,ratioY:h,sizeWidth:l,sizeHeight:u,style:m,update:y,handleScroll:v,setScrollTop:b,setScrollLeft:$}}});function Nle(e,t,n,s,o,r){const i=ie("bar");return A(),B("div",{ref:"scrollbar$",class:q(e.ns.b())},[W("div",{ref:"wrap$",class:q([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:nt(e.style),onScroll:t[0]||(t[0]=(...a)=>e.handleScroll&&e.handleScroll(...a))},[(A(),ve(tn(e.tag),{ref:"resize$",class:q([e.ns.e("view"),e.viewClass]),style:nt(e.viewStyle)},{default:re(()=>[Re(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?ce("v-if",!0):(A(),ve(i,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var Ale=We(_le,[["render",Nle]]);const Oa=Wt(Ale),z2=Symbol("elPopper"),FF=Symbol("elPopperContent"),Dle=ge({name:"ElPopperProvider",inheritAttrs:!1,setup(){const e={triggerRef:L(null),popperInstanceRef:L(null),contentRef:L(null)};return Vt(z2,e),e}});function Rle(e,t,n,s,o,r){return Re(e.$slots,"default")}var Ole=We(Dle,[["render",Rle]]),Qo="top",qr="bottom",Yr="right",er="left",V2="auto",Lp=[Qo,qr,Yr,er],xd="start",ep="end",Mle="clippingParents",LF="viewport",Pf="popper",Ple="reference",YN=Lp.reduce(function(e,t){return e.concat([t+"-"+xd,t+"-"+ep])},[]),W2=[].concat(Lp,[V2]).reduce(function(e,t){return e.concat([t,t+"-"+xd,t+"-"+ep])},[]),Fle="beforeRead",Lle="read",Ble="afterRead",zle="beforeMain",Vle="main",Wle="afterMain",Hle="beforeWrite",Ule="write",jle="afterWrite",Gle=[Fle,Lle,Ble,zle,Vle,Wle,Hle,Ule,jle];function Xi(e){return e?(e.nodeName||"").toLowerCase():null}function Di(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function kd(e){var t=Di(e).Element;return e instanceof t||e instanceof Element}function Gr(e){var t=Di(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function BF(e){if(typeof ShadowRoot=="undefined")return!1;var t=Di(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Kle(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},o=t.attributes[n]||{},r=t.elements[n];!Gr(r)||!Xi(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(i){var a=o[i];a===!1?r.removeAttribute(i):r.setAttribute(i,a===!0?"":a)}))})}function qle(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var o=t.elements[s],r=t.attributes[s]||{},i=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),a=i.reduce(function(l,u){return l[u]="",l},{});!Gr(o)||!Xi(o)||(Object.assign(o.style,a),Object.keys(r).forEach(function(l){o.removeAttribute(l)}))})}}var Yle={name:"applyStyles",enabled:!0,phase:"write",fn:Kle,effect:qle,requires:["computeStyles"]};function Ui(e){return e.split("-")[0]}var Du=Math.max,bb=Math.min,Sd=Math.round;function Id(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),s=1,o=1;if(Gr(e)&&t){var r=e.offsetHeight,i=e.offsetWidth;i>0&&(s=Sd(n.width)/i||1),r>0&&(o=Sd(n.height)/r||1)}return{width:n.width/s,height:n.height/o,top:n.top/o,right:n.right/s,bottom:n.bottom/o,left:n.left/s,x:n.left/s,y:n.top/o}}function H2(e){var t=Id(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function zF(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&BF(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function _a(e){return Di(e).getComputedStyle(e)}function Xle(e){return["table","td","th"].indexOf(Xi(e))>=0}function Al(e){return((kd(e)?e.ownerDocument:e.document)||window.document).documentElement}function D0(e){return Xi(e)==="html"?e:e.assignedSlot||e.parentNode||(BF(e)?e.host:null)||Al(e)}function XN(e){return!Gr(e)||_a(e).position==="fixed"?null:e.offsetParent}function Zle(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Gr(e)){var s=_a(e);if(s.position==="fixed")return null}for(var o=D0(e);Gr(o)&&["html","body"].indexOf(Xi(o))<0;){var r=_a(o);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return o;o=o.parentNode}return null}function Bp(e){for(var t=Di(e),n=XN(e);n&&Xle(n)&&_a(n).position==="static";)n=XN(n);return n&&(Xi(n)==="html"||Xi(n)==="body"&&_a(n).position==="static")?t:n||Zle(e)||t}function U2(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ch(e,t,n){return Du(e,bb(t,n))}function Jle(e,t,n){var s=Ch(e,t,n);return s>n?n:s}function VF(){return{top:0,right:0,bottom:0,left:0}}function WF(e){return Object.assign({},VF(),e)}function HF(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var Qle=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,WF(typeof t!="number"?t:HF(t,Lp))};function eue(e){var t,n=e.state,s=e.name,o=e.options,r=n.elements.arrow,i=n.modifiersData.popperOffsets,a=Ui(n.placement),l=U2(a),u=[er,Yr].indexOf(a)>=0,c=u?"height":"width";if(!(!r||!i)){var d=Qle(o.padding,n),f=H2(r),h=l==="y"?Qo:er,p=l==="y"?qr:Yr,g=n.rects.reference[c]+n.rects.reference[l]-i[l]-n.rects.popper[c],m=i[l]-n.rects.reference[l],v=Bp(r),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,$=g/2-m/2,y=d[h],w=b-f[c]-d[p],C=b/2-f[c]/2+$,x=Ch(y,C,w),k=l;n.modifiersData[s]=(t={},t[k]=x,t.centerOffset=x-C,t)}}function tue(e){var t=e.state,n=e.options,s=n.element,o=s===void 0?"[data-popper-arrow]":s;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||!zF(t.elements.popper,o)||(t.elements.arrow=o))}var nue={name:"arrow",enabled:!0,phase:"main",fn:eue,effect:tue,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Td(e){return e.split("-")[1]}var sue={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oue(e){var t=e.x,n=e.y,s=window,o=s.devicePixelRatio||1;return{x:Sd(t*o)/o||0,y:Sd(n*o)/o||0}}function ZN(e){var t,n=e.popper,s=e.popperRect,o=e.placement,r=e.variation,i=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=i.x,h=f===void 0?0:f,p=i.y,g=p===void 0?0:p,m=typeof c=="function"?c({x:h,y:g}):{x:h,y:g};h=m.x,g=m.y;var v=i.hasOwnProperty("x"),b=i.hasOwnProperty("y"),$=er,y=Qo,w=window;if(u){var C=Bp(n),x="clientHeight",k="clientWidth";if(C===Di(n)&&(C=Al(n),_a(C).position!=="static"&&a==="absolute"&&(x="scrollHeight",k="scrollWidth")),C=C,o===Qo||(o===er||o===Yr)&&r===ep){y=qr;var I=d&&w.visualViewport?w.visualViewport.height:C[x];g-=I-s.height,g*=l?1:-1}if(o===er||(o===Qo||o===qr)&&r===ep){$=Yr;var S=d&&w.visualViewport?w.visualViewport.width:C[k];h-=S-s.width,h*=l?1:-1}}var T=Object.assign({position:a},u&&sue),_=c===!0?oue({x:h,y:g}):{x:h,y:g};if(h=_.x,g=_.y,l){var N;return Object.assign({},T,(N={},N[y]=b?"0":"",N[$]=v?"0":"",N.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",N))}return Object.assign({},T,(t={},t[y]=b?g+"px":"",t[$]=v?h+"px":"",t.transform="",t))}function rue(e){var t=e.state,n=e.options,s=n.gpuAcceleration,o=s===void 0?!0:s,r=n.adaptive,i=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Ui(t.placement),variation:Td(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ZN(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ZN(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var iue={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rue,data:{}},zm={passive:!0};function aue(e){var t=e.state,n=e.instance,s=e.options,o=s.scroll,r=o===void 0?!0:o,i=s.resize,a=i===void 0?!0:i,l=Di(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&u.forEach(function(c){c.addEventListener("scroll",n.update,zm)}),a&&l.addEventListener("resize",n.update,zm),function(){r&&u.forEach(function(c){c.removeEventListener("scroll",n.update,zm)}),a&&l.removeEventListener("resize",n.update,zm)}}var lue={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:aue,data:{}},uue={left:"right",right:"left",bottom:"top",top:"bottom"};function Dv(e){return e.replace(/left|right|bottom|top/g,function(t){return uue[t]})}var cue={start:"end",end:"start"};function JN(e){return e.replace(/start|end/g,function(t){return cue[t]})}function j2(e){var t=Di(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function G2(e){return Id(Al(e)).left+j2(e).scrollLeft}function due(e){var t=Di(e),n=Al(e),s=t.visualViewport,o=n.clientWidth,r=n.clientHeight,i=0,a=0;return s&&(o=s.width,r=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=s.offsetLeft,a=s.offsetTop)),{width:o,height:r,x:i+G2(e),y:a}}function fue(e){var t,n=Al(e),s=j2(e),o=(t=e.ownerDocument)==null?void 0:t.body,r=Du(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=Du(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-s.scrollLeft+G2(e),l=-s.scrollTop;return _a(o||n).direction==="rtl"&&(a+=Du(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:i,x:a,y:l}}function K2(e){var t=_a(e),n=t.overflow,s=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+s)}function UF(e){return["html","body","#document"].indexOf(Xi(e))>=0?e.ownerDocument.body:Gr(e)&&K2(e)?e:UF(D0(e))}function xh(e,t){var n;t===void 0&&(t=[]);var s=UF(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),r=Di(s),i=o?[r].concat(r.visualViewport||[],K2(s)?s:[]):s,a=t.concat(i);return o?a:a.concat(xh(D0(i)))}function hC(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function hue(e){var t=Id(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function QN(e,t){return t===LF?hC(due(e)):kd(t)?hue(t):hC(fue(Al(e)))}function pue(e){var t=xh(D0(e)),n=["absolute","fixed"].indexOf(_a(e).position)>=0,s=n&&Gr(e)?Bp(e):e;return kd(s)?t.filter(function(o){return kd(o)&&zF(o,s)&&Xi(o)!=="body"}):[]}function gue(e,t,n){var s=t==="clippingParents"?pue(e):[].concat(t),o=[].concat(s,[n]),r=o[0],i=o.reduce(function(a,l){var u=QN(e,l);return a.top=Du(u.top,a.top),a.right=bb(u.right,a.right),a.bottom=bb(u.bottom,a.bottom),a.left=Du(u.left,a.left),a},QN(e,r));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function jF(e){var t=e.reference,n=e.element,s=e.placement,o=s?Ui(s):null,r=s?Td(s):null,i=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(o){case Qo:l={x:i,y:t.y-n.height};break;case qr:l={x:i,y:t.y+t.height};break;case Yr:l={x:t.x+t.width,y:a};break;case er:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var u=o?U2(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(r){case xd:l[u]=l[u]-(t[c]/2-n[c]/2);break;case ep:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function tp(e,t){t===void 0&&(t={});var n=t,s=n.placement,o=s===void 0?e.placement:s,r=n.boundary,i=r===void 0?Mle:r,a=n.rootBoundary,l=a===void 0?LF:a,u=n.elementContext,c=u===void 0?Pf:u,d=n.altBoundary,f=d===void 0?!1:d,h=n.padding,p=h===void 0?0:h,g=WF(typeof p!="number"?p:HF(p,Lp)),m=c===Pf?Ple:Pf,v=e.rects.popper,b=e.elements[f?m:c],$=gue(kd(b)?b:b.contextElement||Al(e.elements.popper),i,l),y=Id(e.elements.reference),w=jF({reference:y,element:v,strategy:"absolute",placement:o}),C=hC(Object.assign({},v,w)),x=c===Pf?C:y,k={top:$.top-x.top+g.top,bottom:x.bottom-$.bottom+g.bottom,left:$.left-x.left+g.left,right:x.right-$.right+g.right},I=e.modifiersData.offset;if(c===Pf&&I){var S=I[o];Object.keys(k).forEach(function(T){var _=[Yr,qr].indexOf(T)>=0?1:-1,N=[Qo,qr].indexOf(T)>=0?"y":"x";k[T]+=S[N]*_})}return k}function mue(e,t){t===void 0&&(t={});var n=t,s=n.placement,o=n.boundary,r=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?W2:l,c=Td(s),d=c?a?YN:YN.filter(function(p){return Td(p)===c}):Lp,f=d.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,g){return p[g]=tp(e,{placement:g,boundary:o,rootBoundary:r,padding:i})[Ui(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function vue(e){if(Ui(e)===V2)return[];var t=Dv(e);return[JN(e),t,JN(t)]}function bue(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,m=t.options.placement,v=Ui(m),b=v===m,$=l||(b||!p?[Dv(m)]:vue(m)),y=[m].concat($).reduce(function(oe,G){return oe.concat(Ui(G)===V2?mue(t,{placement:G,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:g}):G)},[]),w=t.rects.reference,C=t.rects.popper,x=new Map,k=!0,I=y[0],S=0;S<y.length;S++){var T=y[S],_=Ui(T),N=Td(T)===xd,O=[Qo,qr].indexOf(_)>=0,M=O?"width":"height",D=tp(t,{placement:T,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),F=O?N?Yr:er:N?qr:Qo;w[M]>C[M]&&(F=Dv(F));var V=Dv(F),U=[];if(r&&U.push(D[_]<=0),a&&U.push(D[F]<=0,D[V]<=0),U.every(function(oe){return oe})){I=T,k=!1;break}x.set(T,U)}if(k)for(var ne=p?3:1,be=function(G){var Y=y.find(function(X){var ae=x.get(X);if(ae)return ae.slice(0,G).every(function(Se){return Se})});if(Y)return I=Y,"break"},te=ne;te>0;te--){var he=be(te);if(he==="break")break}t.placement!==I&&(t.modifiersData[s]._skip=!0,t.placement=I,t.reset=!0)}}var yue={name:"flip",enabled:!0,phase:"main",fn:bue,requiresIfExists:["offset"],data:{_skip:!1}};function eA(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function tA(e){return[Qo,Yr,qr,er].some(function(t){return e[t]>=0})}function wue(e){var t=e.state,n=e.name,s=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,i=tp(t,{elementContext:"reference"}),a=tp(t,{altBoundary:!0}),l=eA(i,s),u=eA(a,o,r),c=tA(l),d=tA(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var $ue={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wue};function Cue(e,t,n){var s=Ui(e),o=[er,Qo].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,i=r[0],a=r[1];return i=i||0,a=(a||0)*o,[er,Yr].indexOf(s)>=0?{x:a,y:i}:{x:i,y:a}}function xue(e){var t=e.state,n=e.options,s=e.name,o=n.offset,r=o===void 0?[0,0]:o,i=W2.reduce(function(c,d){return c[d]=Cue(d,t.rects,r),c},{}),a=i[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=i}var kue={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:xue};function Sue(e){var t=e.state,n=e.name;t.modifiersData[n]=jF({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Iue={name:"popperOffsets",enabled:!0,phase:"read",fn:Sue,data:{}};function Tue(e){return e==="x"?"y":"x"}function Eue(e){var t=e.state,n=e.options,s=e.name,o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,g=p===void 0?0:p,m=tp(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),v=Ui(t.placement),b=Td(t.placement),$=!b,y=U2(v),w=Tue(y),C=t.modifiersData.popperOffsets,x=t.rects.reference,k=t.rects.popper,I=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,S=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,_={x:0,y:0};if(!!C){if(r){var N,O=y==="y"?Qo:er,M=y==="y"?qr:Yr,D=y==="y"?"height":"width",F=C[y],V=F+m[O],U=F-m[M],ne=h?-k[D]/2:0,be=b===xd?x[D]:k[D],te=b===xd?-k[D]:-x[D],he=t.elements.arrow,oe=h&&he?H2(he):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:VF(),Y=G[O],X=G[M],ae=Ch(0,x[D],oe[D]),Se=$?x[D]/2-ne-ae-Y-S.mainAxis:be-ae-Y-S.mainAxis,Le=$?-x[D]/2+ne+ae+X+S.mainAxis:te+ae+X+S.mainAxis,Be=t.elements.arrow&&Bp(t.elements.arrow),Fe=Be?y==="y"?Be.clientTop||0:Be.clientLeft||0:0,j=(N=T==null?void 0:T[y])!=null?N:0,Q=F+Se-j-Fe,H=F+Le-j,se=Ch(h?bb(V,Q):V,F,h?Du(U,H):U);C[y]=se,_[y]=se-F}if(a){var we,J=y==="x"?Qo:er,_e=y==="x"?qr:Yr,Ie=C[w],fe=w==="y"?"height":"width",Te=Ie+m[J],rt=Ie-m[_e],Xe=[Qo,er].indexOf(v)!==-1,lt=(we=T==null?void 0:T[w])!=null?we:0,vt=Xe?Te:Ie-x[fe]-k[fe]-lt+S.altAxis,Ye=Xe?Ie+x[fe]+k[fe]-lt-S.altAxis:rt,de=h&&Xe?Jle(vt,Ie,Ye):Ch(h?vt:Te,Ie,h?Ye:rt);C[w]=de,_[w]=de-Ie}t.modifiersData[s]=_}}var _ue={name:"preventOverflow",enabled:!0,phase:"main",fn:Eue,requiresIfExists:["offset"]};function Nue(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Aue(e){return e===Di(e)||!Gr(e)?j2(e):Nue(e)}function Due(e){var t=e.getBoundingClientRect(),n=Sd(t.width)/e.offsetWidth||1,s=Sd(t.height)/e.offsetHeight||1;return n!==1||s!==1}function Rue(e,t,n){n===void 0&&(n=!1);var s=Gr(t),o=Gr(t)&&Due(t),r=Al(t),i=Id(e,o),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((Xi(t)!=="body"||K2(r))&&(a=Aue(t)),Gr(t)?(l=Id(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=G2(r))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function Oue(e){var t=new Map,n=new Set,s=[];e.forEach(function(r){t.set(r.name,r)});function o(r){n.add(r.name);var i=[].concat(r.requires||[],r.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&o(l)}}),s.push(r)}return e.forEach(function(r){n.has(r.name)||o(r)}),s}function Mue(e){var t=Oue(e);return Gle.reduce(function(n,s){return n.concat(t.filter(function(o){return o.phase===s}))},[])}function Pue(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Fue(e){var t=e.reduce(function(n,s){var o=n[s.name];return n[s.name]=o?Object.assign({},o,s,{options:Object.assign({},o.options,s.options),data:Object.assign({},o.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var nA={placement:"bottom",modifiers:[],strategy:"absolute"};function sA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Lue(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,o=t.defaultOptions,r=o===void 0?nA:o;return function(a,l,u){u===void 0&&(u=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},nA,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(v){var b=typeof v=="function"?v(c.options):v;g(),c.options=Object.assign({},r,c.options,b),c.scrollParents={reference:kd(a)?xh(a):a.contextElement?xh(a.contextElement):[],popper:xh(l)};var $=Mue(Fue([].concat(s,c.options.modifiers)));return c.orderedModifiers=$.filter(function(y){return y.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var v=c.elements,b=v.reference,$=v.popper;if(!!sA(b,$)){c.rects={reference:Rue(b,Bp($),c.options.strategy==="fixed"),popper:H2($)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(S){return c.modifiersData[S.name]=Object.assign({},S.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var w=c.orderedModifiers[y],C=w.fn,x=w.options,k=x===void 0?{}:x,I=w.name;typeof C=="function"&&(c=C({state:c,options:k,name:I,instance:h})||c)}}}},update:Pue(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){g(),f=!0}};if(!sA(a,l))return h;h.setOptions(u).then(function(m){!f&&u.onFirstUpdate&&u.onFirstUpdate(m)});function p(){c.orderedModifiers.forEach(function(m){var v=m.name,b=m.options,$=b===void 0?{}:b,y=m.effect;if(typeof y=="function"){var w=y({state:c,name:v,instance:h,options:$}),C=function(){};d.push(w||C)}})}function g(){d.forEach(function(m){return m()}),d=[]}return h}}var Bue=[lue,Iue,iue,Yle,kue,yue,_ue,nue,$ue],GF=Lue({defaultModifiers:Bue});const KF={LIGHT:"light",DARK:"dark"},qF=mt({arrowOffset:{type:Number,default:5}}),zue=mt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Je(Array),default:()=>[]},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:W2,default:"bottom"},popperOptions:{type:Je(Object),default:()=>({})},strategy:{type:String,values:["fixed","absolute"],default:"absolute"}});mt({autoClose:{type:Number,default:0},cutoff:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}});const YF=mt(zt(ut({},zue),{style:{type:Je([String,Array,Object])},className:{type:Je([String,Array,Object])},effect:{type:String,default:"dark"},enterable:{type:Boolean,default:!0},pure:{type:Boolean},popperClass:{type:Je([String,Array,Object])},popperStyle:{type:Je([String,Array,Object])},referenceEl:{type:Je(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},zIndex:Number})),XF=mt({virtualRef:{type:Je(Object)},virtualTriggering:{type:Boolean}}),Vue=ge({name:"ElPopperArrow",props:qF,setup(e){const t=L(null),n=Ze(FF,void 0);return Oe(()=>e.arrowOffset,s=>{n.arrowOffset.value=s}),Rt(()=>{n.arrowRef.value=Ke(t)}),ls(()=>{n.arrowRef.value=null}),{arrowRef:t}}}),Wue={ref:"arrowRef",class:"el-popper__arrow","data-popper-arrow":""};function Hue(e,t,n,s,o,r){return A(),B("span",Wue,null,512)}var Uue=We(Vue,[["render",Hue]]);const jue="ElOnlyChild",Gue=ge({name:jue,setup(e,{slots:t,attrs:n}){var s;const o=Ze(yF,void 0),r=ase((s=o.setForwardRef)!=null?s:rn);return()=>{var i;const a=(i=t.default)==null?void 0:i.call(t,n);if(!a||a.length>1)return null;const l=ZF(a);return l?$t(Wu(l,n),[[r]]):null}}});function ZF(e){if(!e)return null;const t=e;for(let n=0;n<t.length;n++){const s=t[n];if(an(s))switch(s.type){case xr:continue;case Rp:return oA(s);case at:return ZF(s.children);default:return s}return oA(s)}return null}function oA(e){return He("span",{class:"el-only-child__content"},[e])}const Kue=(e,t)=>{const{placement:n,strategy:s,popperOptions:o}=e,r=zt(ut({placement:n,strategy:s},o),{modifiers:que(e)});return Yue(r,t),Xue(r,o==null?void 0:o.modifiers),r},JF=e=>{let t=null;return e?("getBoundingClientRect"in e||e instanceof HTMLElement?t=e:t=e.$el,t):null};function que(e){const{offset:t,gpuAcceleration:n,fallbackPlacements:s}=e;return[{name:"offset",options:{offset:[0,t!=null?t:12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:s!=null?s:[]}},{name:"computeStyles",options:{gpuAcceleration:n,adaptive:n}}]}function Yue(e,{arrowEl:t,arrowOffset:n}){e.modifiers.push({name:"arrow",options:{element:t,padding:n!=null?n:5}})}function Xue(e,t){t&&(e.modifiers=[...e.modifiers,...t!=null?t:[]])}const Zue=ge({name:"ElPopperTrigger",components:{ElOnlyChild:Gue},inheritAttrs:!1,props:zt(ut({},XF),{onMouseenter:Function,onMouseleave:Function,onClick:Function,onKeydown:Function,onFocus:Function,onBlur:Function,onContextmenu:Function,id:String,open:Boolean}),setup(e){const{triggerRef:t}=Ze(z2,void 0);return ise(t),Oe(()=>e.virtualRef,n=>{n&&(t.value=JF(n))},{immediate:!0}),Oe(()=>t.value,(n,s)=>{n&&n instanceof HTMLElement&&["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(o=>{const r=e[o];r&&(n.addEventListener(o.slice(2).toLowerCase(),r),s==null||s.removeEventListener(o.slice(2).toLowerCase(),r))})},{immediate:!0}),{triggerRef:t}}});function Jue(e,t,n,s,o,r){const i=ie("el-only-child");return e.virtualTriggering?ce("v-if",!0):(A(),ve(i,lo({key:0},e.$attrs,{"aria-describedby":e.open?e.id:void 0}),{default:re(()=>[Re(e.$slots,"default")]),_:3},16,["aria-describedby"]))}var Que=We(Zue,[["render",Jue]]);const ece=ge({name:"ElPopperContent",props:YF,emits:["mouseenter","mouseleave"],setup(e){const{triggerRef:t,popperInstanceRef:n,contentRef:s}=Ze(z2,void 0),o=L(null),r=L(null),i=L();Vt(FF,{arrowRef:r,arrowOffset:i});const a=L(e.zIndex||bs.nextZIndex()),l=R(()=>[{zIndex:Ke(a)},e.popperStyle]),u=R(()=>[{"el-popper":!0,"is-pure":e.pure,[`is-${e.effect}`]:!!e.effect},e.popperClass]),c=({referenceEl:f,popperContentEl:h,arrowEl:p})=>{const g=Kue(e,{arrowEl:p,arrowOffset:Ke(i)});return GF(f,h,g)},d=()=>{var f;(f=Ke(n))==null||f.update(),a.value=e.zIndex||bs.nextZIndex()};return Rt(()=>{let f;Oe(()=>JF(e.referenceEl)||Ke(t),h=>{var p;if(f==null||f(),h){(p=n.value)==null||p.destroy();const g=Ke(o);s.value=g;const m=Ke(r),v=c({referenceEl:h,popperContentEl:Ke(o),arrowEl:m});n.value=v,f=Oe(()=>h.getBoundingClientRect(),()=>{d()},{immediate:!0})}else n.value=null},{immediate:!0})}),{popperContentRef:o,popperInstanceRef:n,contentStyle:l,contentClass:u,updatePopper:d}}});function tce(e,t,n,s,o,r){return A(),B("div",{ref:"popperContentRef",style:nt(e.contentStyle),class:q(e.contentClass),role:"tooltip",onMouseenter:t[0]||(t[0]=i=>e.$emit("mouseenter",i)),onMouseleave:t[1]||(t[1]=i=>e.$emit("mouseleave",i))},[Re(e.$slots,"default")],38)}var nce=We(ece,[["render",tce]]);const QF=Wt(Ole),sce=ge({name:"ElVisuallyHidden",props:{style:{type:[String,Object,Array]}},setup(e){return{computedStyle:R(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}])}}});function oce(e,t,n,s,o,r){return A(),B("span",lo(e.$attrs,{style:e.computedStyle}),null,16)}var rce=We(sce,[["render",oce]]);const tl=ut(ut(ut({},ose),YF),mt({appendTo:{type:Je([String,Object]),default:nse},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Je(Boolean),default:null},transition:{type:String,default:"el-fade-in-linear"},teleported:{type:Boolean,default:!0},disabled:{type:Boolean}})),q2=zt(ut({},XF),{disabled:Boolean,trigger:{type:[String,Array],default:"hover"}}),ice=mt({openDelay:{type:Number},visibleArrow:{type:Boolean,default:void 0},hideAfter:{type:Number,default:200},showArrow:{type:Boolean,default:!0}}),R0=Symbol("elTooltip"),ace=ge({name:"ElTooltipContent",components:{ElPopperContent:nce,ElVisuallyHidden:rce},inheritAttrs:!1,props:tl,setup(e){const t=L(null),n=L(!1),s=L(!1),o=L(!1),{controlled:r,id:i,open:a,trigger:l,onClose:u,onOpen:c,onShow:d,onHide:f}=Ze(R0,void 0),h=R(()=>e.persistent),p=R(()=>Ke(h)?!0:Ke(a)),g=R(()=>e.disabled?!1:Ke(a)),m=R(()=>{var I;return(I=e.style)!=null?I:{}}),v=R(()=>!Ke(a));tse(u);const b=()=>{f()},$=()=>{if(Ke(r))return!0},y=Fs($,()=>{e.enterable&&Ke(l)==="hover"&&c()}),w=Fs($,()=>{Ke(l)==="hover"&&u()}),C=()=>{var I,S;(S=(I=t.value)==null?void 0:I.updatePopper)==null||S.call(I)},x=()=>{d()};let k;return Oe(()=>Ke(a),I=>{I?k=Q$(R(()=>{var S;return(S=t.value)==null?void 0:S.popperContentRef}),()=>{if(Ke(r))return;Ke(l)!=="hover"&&u()}):k==null||k()},{flush:"post"}),{ariaHidden:v,entering:s,leaving:o,id:i,intermediateOpen:n,contentStyle:m,contentRef:t,shouldRender:p,shouldShow:g,open:a,onAfterShow:x,onBeforeEnter:C,onContentEnter:y,onContentLeave:w,onTransitionLeave:b}}});function lce(e,t,n,s,o,r){const i=ie("el-visually-hidden"),a=ie("el-popper-content");return A(),ve(v0,{disabled:!e.teleported,to:e.appendTo},[le(xs,{name:e.transition,onAfterLeave:e.onTransitionLeave,onBeforeEnter:e.onBeforeEnter,onAfterEnter:e.onAfterShow},{default:re(()=>[e.shouldRender?$t((A(),ve(a,lo({key:0,ref:"contentRef"},e.$attrs,{"aria-hidden":e.ariaHidden,"boundaries-padding":e.boundariesPadding,"fallback-placements":e.fallbackPlacements,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,placement:e.placement,"popper-options":e.popperOptions,strategy:e.strategy,effect:e.effect,enterable:e.enterable,pure:e.pure,"popper-class":e.popperClass,"popper-style":[e.popperStyle,e.contentStyle],"reference-el":e.referenceEl,"z-index":e.zIndex,onMouseenter:e.onContentEnter,onMouseleave:e.onContentLeave}),{default:re(()=>[Re(e.$slots,"default"),le(i,{id:e.id,role:"tooltip"},{default:re(()=>[qt(Pe(e.ariaLabel),1)]),_:1},8,["id"])]),_:3},16,["aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","z-index","onMouseenter","onMouseleave"])),[[en,e.shouldShow]]):ce("v-if",!0)]),_:3},8,["name","onAfterLeave","onBeforeEnter","onAfterEnter"])],8,["disabled","to"])}var uce=We(ace,[["render",lce]]);const cce=(e,t)=>_t(e)?e.includes(t):e===t,Lc=(e,t,n)=>s=>{cce(Ke(e),t)&&n(s)},dce=ge({name:"ElTooltipTrigger",components:{ElPopperTrigger:Que},props:q2,setup(e){const{controlled:t,id:n,open:s,onOpen:o,onClose:r,onToggle:i}=Ze(R0,void 0),a=L(null),l=()=>{if(Ke(t)||e.disabled)return!0},u=bo(e,"trigger"),c=Fs(l,Lc(u,"hover",o)),d=Fs(l,Lc(u,"hover",r)),f=Fs(l,Lc(u,"click",v=>{v.button===0&&i(v)})),h=Fs(l,Lc(u,"focus",o)),p=Fs(l,Lc(u,"focus",r)),g=Fs(l,Lc(u,"contextmenu",v=>{v.preventDefault(),i(v)})),m=Fs(l,v=>{const{code:b}=v;(b===Qe.enter||b===Qe.space)&&i(v)});return{onBlur:p,onContextMenu:g,onFocus:h,onMouseenter:c,onMouseleave:d,onClick:f,onKeydown:m,open:s,id:n,triggerRef:a}}});function fce(e,t,n,s,o,r){const i=ie("el-popper-trigger");return A(),ve(i,{id:e.id,"virtual-ref":e.virtualRef,open:e.open,"virtual-triggering":e.virtualTriggering,class:"el-tooltip__trigger",onBlur:e.onBlur,onClick:e.onClick,onContextmenu:e.onContextMenu,onFocus:e.onFocus,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave,onKeydown:e.onKeydown},{default:re(()=>[Re(e.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"])}var hce=We(dce,[["render",fce]]);const{useModelToggleProps:pce,useModelToggle:gce,useModelToggleEmits:mce}=pF("visible"),vce=ge({name:"ElTooltip",components:{ElPopper:QF,ElPopperArrow:Uue,ElTooltipContent:uce,ElTooltipTrigger:hce},props:ut(ut(ut(ut(ut({},pce),tl),q2),qF),ice),emits:[...mce,"show","hide"],setup(e,{emit:t}){sse();const n=R(()=>(!Zh(e.openDelay),e.openDelay||e.showAfter)),s=R(()=>(!Zh(e.visibleArrow),vi(e.visibleArrow)?e.visibleArrow:e.showArrow)),o=vF(),r=L(null),i=()=>{var h;const p=Ke(r);p&&((h=p.popperInstanceRef)==null||h.update())},a=L(!1),{show:l,hide:u}=gce({indicator:a}),{onOpen:c,onClose:d}=rse({showAfter:n,hideAfter:bo(e,"hideAfter"),open:l,close:u}),f=R(()=>vi(e.visible));return Vt(R0,{controlled:f,id:o,open:Np(a),trigger:bo(e,"trigger"),onOpen:c,onClose:d,onToggle:()=>{Ke(a)?d():c()},onShow:()=>{t("show")},onHide:()=>{t("hide")},updatePopper:i}),{compatShowAfter:n,compatShowArrow:s,popperRef:r,open:a,hide:u,updatePopper:i,onOpen:c,onClose:d}}}),bce=["innerHTML"],yce={key:1};function wce(e,t,n,s,o,r){const i=ie("el-tooltip-trigger"),a=ie("el-popper-arrow"),l=ie("el-tooltip-content"),u=ie("el-popper");return A(),ve(u,{ref:"popperRef"},{default:re(()=>[le(i,{disabled:e.disabled,trigger:e.trigger,"virtual-ref":e.virtualRef,"virtual-triggering":e.virtualTriggering},{default:re(()=>[e.$slots.default?Re(e.$slots,"default",{key:0}):ce("v-if",!0)]),_:3},8,["disabled","trigger","virtual-ref","virtual-triggering"]),le(l,{"aria-label":e.ariaLabel,"boundaries-padding":e.boundariesPadding,content:e.content,disabled:e.disabled,effect:e.effect,enterable:e.enterable,"fallback-placements":e.fallbackPlacements,"hide-after":e.hideAfter,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,persistent:e.persistent,"popper-class":e.popperClass,"popper-style":e.popperStyle,placement:e.placement,"popper-options":e.popperOptions,pure:e.pure,"raw-content":e.rawContent,"reference-el":e.referenceEl,"show-after":e.compatShowAfter,strategy:e.strategy,teleported:e.teleported,transition:e.transition,"z-index":e.zIndex},{default:re(()=>[Re(e.$slots,"content",{},()=>[e.rawContent?(A(),B("span",{key:0,innerHTML:e.content},null,8,bce)):(A(),B("span",yce,Pe(e.content),1))]),e.compatShowArrow?(A(),ve(a,{key:0,"arrow-offset":e.arrowOffset},null,8,["arrow-offset"])):ce("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","show-after","strategy","teleported","transition","z-index"])]),_:3},512)}var $ce=We(vce,[["render",wce]]);const ar=Wt($ce),Cce=ge({name:"ElAutocomplete",components:{ElTooltip:ar,ElInput:ei,ElScrollbar:Oa,ElIcon:Ot,Loading:Ra},directives:{clickoutside:El},inheritAttrs:!1,props:{valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:String,validator:e=>["top","top-start","top-end","bottom","bottom-start","bottom-end"].includes(e),default:"bottom-start"},fetchSuggestions:{type:Function,default:rn},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},emits:[Pt,"input","change","focus","blur","clear","select"],setup(e,t){const n=At("autocomplete"),s=C2(),o=L([]),r=L(-1),i=L(""),a=L(!1),l=L(!1),u=L(!1),c=L(null),d=L(null),f=L(null),h=R(()=>n.b(String(Xh()))),p=R(()=>(_t(o.value)&&o.value.length>0||u.value)&&a.value),g=R(()=>!e.hideLoading&&u.value),m=()=>{dt(()=>{p.value&&(i.value=`${c.value.$el.offsetWidth}px`)})};Rt(()=>{c.value.inputOrTextarea.setAttribute("role","textbox"),c.value.inputOrTextarea.setAttribute("aria-autocomplete","list"),c.value.inputOrTextarea.setAttribute("aria-controls","id"),c.value.inputOrTextarea.setAttribute("aria-activedescendant",`${h.value}-item-${r.value}`)});const v=N=>{l.value||(u.value=!0,e.fetchSuggestions(N,O=>{u.value=!1,!l.value&&(_t(O)?(o.value=O,r.value=e.highlightFirstItem?0:-1):ko("ElAutocomplete","autocomplete suggestions must be an array"))}))},b=tr(v,e.debounce),$=N=>{if(t.emit("input",N),t.emit(Pt,N),l.value=!1,!e.triggerOnFocus&&!N){l.value=!0,o.value=[];return}b(N)},y=N=>{t.emit("change",N)},w=N=>{a.value=!0,t.emit("focus",N),e.triggerOnFocus&&b(String(e.modelValue))},C=N=>{t.emit("blur",N)},x=()=>{a.value=!1,t.emit(Pt,""),t.emit("clear")},k=()=>{p.value&&r.value>=0&&r.value<o.value.length?T(o.value[r.value]):e.selectWhenUnmatched&&(t.emit("select",{value:e.modelValue}),dt(()=>{o.value=[],r.value=-1}))},I=()=>{a.value=!1},S=()=>{var N;(N=c.value)==null||N.focus()},T=N=>{t.emit("input",N[e.valueKey]),t.emit(Pt,N[e.valueKey]),t.emit("select",N),dt(()=>{o.value=[],r.value=-1})};return{attrs:s,suggestions:o,highlightedIndex:r,dropdownWidth:i,activated:a,suggestionDisabled:l,loading:u,inputRef:c,regionRef:d,popper:f,id:h,suggestionVisible:p,suggestionLoading:g,getData:v,handleInput:$,handleChange:y,handleFocus:w,handleBlur:C,handleClear:x,handleKeyEnter:k,close:I,focus:S,select:T,highlight:N=>{if(!p.value||u.value)return;if(N<0){r.value=-1;return}N>=o.value.length&&(N=o.value.length-1);const O=d.value.querySelector(`.${n.be("suggestion","wrap")}`),D=O.querySelectorAll(`.${n.be("suggestion","list")} li`)[N],F=O.scrollTop,{offsetTop:V,scrollHeight:U}=D;V+U>F+O.clientHeight&&(O.scrollTop+=U),V<F&&(O.scrollTop-=U),r.value=N,c.value.inputOrTextarea.setAttribute("aria-activedescendant",`${h.value}-item-${r.value}`)},onSuggestionShow:m,ns:n}}}),xce=["aria-expanded","aria-owns"],kce={key:0},Sce=["id","aria-selected","onClick"];function Ice(e,t,n,s,o,r){const i=ie("el-input"),a=ie("loading"),l=ie("el-icon"),u=ie("el-scrollbar"),c=ie("el-tooltip"),d=Vo("clickoutside");return A(),ve(c,{ref:"popper",visible:e.suggestionVisible,"onUpdate:visible":t[2]||(t[2]=f=>e.suggestionVisible=f),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":`${e.ns.e("popper")} ${e.popperClass}`,"append-to-body":e.popperAppendToBody,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${e.ns.namespace.value}-zoom-in-top`,persistent:"",onShow:e.onSuggestionShow},{content:re(()=>[W("div",{ref:"regionRef",class:q([e.ns.b("suggestion"),e.ns.is("loading",e.suggestionLoading)]),style:nt({minWidth:e.dropdownWidth,outline:"none"}),role:"region"},[le(u,{id:e.id,tag:"ul","wrap-class":e.ns.be("suggestion","wrap"),"view-class":e.ns.be("suggestion","list"),role:"listbox"},{default:re(()=>[e.suggestionLoading?(A(),B("li",kce,[le(l,{class:"is-loading"},{default:re(()=>[le(a)]),_:1})])):(A(!0),B(at,{key:1},Zt(e.suggestions,(f,h)=>(A(),B("li",{id:`${e.id}-item-${h}`,key:h,class:q({highlighted:e.highlightedIndex===h}),role:"option","aria-selected":e.highlightedIndex===h,onClick:p=>e.select(f)},[Re(e.$slots,"default",{item:f},()=>[qt(Pe(f[e.valueKey]),1)])],10,Sce))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:re(()=>[$t((A(),B("div",{class:q([e.ns.b(),e.$attrs.class]),style:nt(e.$attrs.style),role:"combobox","aria-haspopup":"listbox","aria-expanded":e.suggestionVisible,"aria-owns":e.id},[le(i,lo({ref:"inputRef"},e.attrs,{"model-value":e.modelValue,onInput:e.handleInput,onChange:e.handleChange,onFocus:e.handleFocus,onBlur:e.handleBlur,onClear:e.handleClear,onKeydown:[t[0]||(t[0]=Ut(ht(f=>e.highlight(e.highlightedIndex-1),["prevent"]),["up"])),t[1]||(t[1]=Ut(ht(f=>e.highlight(e.highlightedIndex+1),["prevent"]),["down"])),Ut(e.handleKeyEnter,["enter"]),Ut(e.close,["tab"])]}),jh({_:2},[e.$slots.prepend?{name:"prepend",fn:re(()=>[Re(e.$slots,"prepend")])}:void 0,e.$slots.append?{name:"append",fn:re(()=>[Re(e.$slots,"append")])}:void 0,e.$slots.prefix?{name:"prefix",fn:re(()=>[Re(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:re(()=>[Re(e.$slots,"suffix")])}:void 0]),1040,["model-value","onInput","onChange","onFocus","onBlur","onClear","onKeydown"])],14,xce)),[[d,e.close]])]),_:3},8,["visible","placement","popper-class","append-to-body","transition","onShow"])}var Rv=We(Cce,[["render",Ice]]);Rv.install=e=>{e.component(Rv.name,Rv)};const Tce=Rv,Ece=Tce,_ce=mt({size:{type:[Number,String],values:["large","default","small"],default:"default",validator:e=>typeof e=="number"},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Je([String,Object])},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Je(String),default:"cover"}}),Nce={error:e=>e instanceof Event},Ace=ge({name:"ElAvatar",components:{ElIcon:Ot},props:_ce,emits:Nce,setup(e,{emit:t}){const n=At("avatar"),s=L(!1),o=R(()=>{const{size:l,icon:u,shape:c}=e,d=[n.b()];return Xt(l)&&d.push(n.m(l)),u&&d.push(n.m("icon")),c&&d.push(n.m(c)),d}),r=R(()=>{const{size:l}=e;return xn(l)?{"--el-avatar-size":Ia(l)}:void 0}),i=R(()=>({objectFit:e.fit}));Oe(()=>e.src,()=>s.value=!1);function a(l){s.value=!0,t("error",l)}return{hasLoadError:s,avatarClass:o,sizeStyle:r,fitStyle:i,handleError:a}}}),Dce=["src","alt","srcset"];function Rce(e,t,n,s,o,r){const i=ie("el-icon");return A(),B("span",{class:q(e.avatarClass),style:nt(e.sizeStyle)},[(e.src||e.srcSet)&&!e.hasLoadError?(A(),B("img",{key:0,src:e.src,alt:e.alt,srcset:e.srcSet,style:nt(e.fitStyle),onError:t[0]||(t[0]=(...a)=>e.handleError&&e.handleError(...a))},null,44,Dce)):e.icon?(A(),ve(i,{key:1},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1})):Re(e.$slots,"default",{key:2})],6)}var Oce=We(Ace,[["render",Rce]]);const Mce=Wt(Oce),rA=e=>Math.pow(e,3),Pce=e=>e<.5?rA(e*2)/2:1-rA((1-e)*2)/2,Fce={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},Lce={click:e=>e instanceof MouseEvent},iA="ElBacktop",Bce=ge({name:iA,components:{ElIcon:Ot,CaretTop:poe},props:Fce,emits:Lce,setup(e,{emit:t}){const n=At("backtop"),s=vo(document.documentElement),o=vo(document),r=L(!1),i=R(()=>`${e.bottom}px`),a=R(()=>`${e.right}px`),l=()=>{if(!s.value)return;const f=Date.now(),h=s.value.scrollTop,p=()=>{if(!s.value)return;const g=(Date.now()-f)/500;g<1?(s.value.scrollTop=h*(1-Pce(g)),requestAnimationFrame(p)):s.value.scrollTop=0};requestAnimationFrame(p)},u=()=>{s.value&&(r.value=s.value.scrollTop>=e.visibilityHeight)},c=f=>{l(),t("click",f)},d=tF(u,300);return Rt(()=>{var f;e.target&&(s.value=(f=document.querySelector(e.target))!=null?f:void 0,s.value||ko(iA,`target is not existed: ${e.target}`),o.value=s.value),Ls(o,"scroll",d)}),{visible:r,styleBottom:i,styleRight:a,handleClick:c,ns:n}}});function zce(e,t,n,s,o,r){const i=ie("caret-top"),a=ie("el-icon");return A(),ve(xs,{name:`${e.ns.namespace.value}-fade-in`},{default:re(()=>[e.visible?(A(),B("div",{key:0,style:nt({right:e.styleRight,bottom:e.styleBottom}),class:q(e.ns.b()),onClick:t[0]||(t[0]=ht((...l)=>e.handleClick&&e.handleClick(...l),["stop"]))},[Re(e.$slots,"default",{},()=>[le(a,{class:q(e.ns.e("icon"))},{default:re(()=>[le(i)]),_:1},8,["class"])])],6)):ce("v-if",!0)]),_:3},8,["name"])}var Vce=We(Bce,[["render",zce]]);const Wce=Wt(Vce),Hce=mt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Uce=ge({name:"ElBadge",props:Hce,setup(e){const t=At("badge"),n=R(()=>e.isDot?"":typeof e.value=="number"&&typeof e.max=="number"?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return{ns:t,content:n}}}),jce=["textContent"];function Gce(e,t,n,s,o,r){return A(),B("div",{class:q(e.ns.b())},[Re(e.$slots,"default"),le(xs,{name:"el-zoom-in-center"},{default:re(()=>[$t(W("sup",{class:q([e.ns.e("content"),e.ns.em("content",e.type),e.ns.is("fixed",!!e.$slots.default),e.ns.is("dot",e.isDot)]),textContent:Pe(e.content)},null,10,jce),[[en,!e.hidden&&(e.content||e.content==="0"||e.isDot)]])]),_:1})],2)}var Kce=We(Uce,[["render",Gce]]);const eL=Wt(Kce),qce=mt({separator:{type:String,default:"/"},separatorIcon:{type:Je([String,Object]),default:""}}),Yce=ge({name:"ElBreadcrumb",props:qce,setup(e){const t=At("breadcrumb"),n=L();return Vt(EP,e),Rt(()=>{const s=n.value.querySelectorAll(`.${t.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),{ns:t,breadcrumb:n}}});function Xce(e,t,n,s,o,r){return A(),B("div",{ref:"breadcrumb",class:q(e.ns.b()),"aria-label":"Breadcrumb",role:"navigation"},[Re(e.$slots,"default")],2)}var Zce=We(Yce,[["render",Xce]]);const Jce=mt({to:{type:Je([String,Object]),default:""},replace:{type:Boolean,default:!1}}),Qce="ElBreadcrumbItem",ede=ge({name:Qce,components:{ElIcon:Ot},props:Jce,setup(e){const n=Lt().appContext.config.globalProperties.$router,s=Ze(EP,void 0),o=At("breadcrumb"),r=L();return Rt(()=>{r.value.setAttribute("role","link"),r.value.addEventListener("click",()=>{!e.to||!n||(e.replace?n.replace(e.to):n.push(e.to))})}),{ns:o,link:r,separator:s==null?void 0:s.separator,separatorIcon:s==null?void 0:s.separatorIcon}}});function tde(e,t,n,s,o,r){const i=ie("el-icon");return A(),B("span",{class:q(e.ns.e("item"))},[W("span",{ref:"link",class:q([e.ns.e("inner"),e.ns.is("link",!!e.to)]),role:"link"},[Re(e.$slots,"default")],2),e.separatorIcon?(A(),ve(i,{key:0,class:q(e.ns.e("separator"))},{default:re(()=>[(A(),ve(tn(e.separatorIcon)))]),_:1},8,["class"])):(A(),B("span",{key:1,class:q(e.ns.e("separator")),role:"presentation"},Pe(e.separator),3))],2)}var tL=We(ede,[["render",tde]]);const nde=Wt(Zce,{BreadcrumbItem:tL}),sde=us(tL);function wo(e,t){ode(e)&&(e="100%");var n=rde(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Vm(e){return Math.min(1,Math.max(0,e))}function ode(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function rde(e){return typeof e=="string"&&e.indexOf("%")!==-1}function nL(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Wm(e){return e<=1?Number(e)*100+"%":e}function $u(e){return e.length===1?"0"+e:String(e)}function ide(e,t,n){return{r:wo(e,255)*255,g:wo(t,255)*255,b:wo(n,255)*255}}function aA(e,t,n){e=wo(e,255),t=wo(t,255),n=wo(n,255);var s=Math.max(e,t,n),o=Math.min(e,t,n),r=0,i=0,a=(s+o)/2;if(s===o)i=0,r=0;else{var l=s-o;switch(i=a>.5?l/(2-s-o):l/(s+o),s){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4;break}r/=6}return{h:r,s:i,l:a}}function Iw(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ade(e,t,n){var s,o,r;if(e=wo(e,360),t=wo(t,100),n=wo(n,100),t===0)o=n,r=n,s=n;else{var i=n<.5?n*(1+t):n+t-n*t,a=2*n-i;s=Iw(a,i,e+1/3),o=Iw(a,i,e),r=Iw(a,i,e-1/3)}return{r:s*255,g:o*255,b:r*255}}function lA(e,t,n){e=wo(e,255),t=wo(t,255),n=wo(n,255);var s=Math.max(e,t,n),o=Math.min(e,t,n),r=0,i=s,a=s-o,l=s===0?0:a/s;if(s===o)r=0;else{switch(s){case e:r=(t-n)/a+(t<n?6:0);break;case t:r=(n-e)/a+2;break;case n:r=(e-t)/a+4;break}r/=6}return{h:r,s:l,v:i}}function lde(e,t,n){e=wo(e,360)*6,t=wo(t,100),n=wo(n,100);var s=Math.floor(e),o=e-s,r=n*(1-t),i=n*(1-o*t),a=n*(1-(1-o)*t),l=s%6,u=[n,i,r,r,a,n][l],c=[a,n,n,i,r,r][l],d=[r,r,a,n,n,i][l];return{r:u*255,g:c*255,b:d*255}}function uA(e,t,n,s){var o=[$u(Math.round(e).toString(16)),$u(Math.round(t).toString(16)),$u(Math.round(n).toString(16))];return s&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function ude(e,t,n,s,o){var r=[$u(Math.round(e).toString(16)),$u(Math.round(t).toString(16)),$u(Math.round(n).toString(16)),$u(cde(s))];return o&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function cde(e){return Math.round(parseFloat(e)*255).toString(16)}function cA(e){return fr(e)/255}function fr(e){return parseInt(e,16)}function dde(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var pC={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function fde(e){var t={r:0,g:0,b:0},n=1,s=null,o=null,r=null,i=!1,a=!1;return typeof e=="string"&&(e=gde(e)),typeof e=="object"&&(la(e.r)&&la(e.g)&&la(e.b)?(t=ide(e.r,e.g,e.b),i=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):la(e.h)&&la(e.s)&&la(e.v)?(s=Wm(e.s),o=Wm(e.v),t=lde(e.h,s,o),i=!0,a="hsv"):la(e.h)&&la(e.s)&&la(e.l)&&(s=Wm(e.s),r=Wm(e.l),t=ade(e.h,s,r),i=!0,a="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=nL(n),{ok:i,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var hde="[-\\+]?\\d+%?",pde="[-\\+]?\\d*\\.\\d+%?",sl="(?:"+pde+")|(?:"+hde+")",Tw="[\\s|\\(]+("+sl+")[,|\\s]+("+sl+")[,|\\s]+("+sl+")\\s*\\)?",Ew="[\\s|\\(]+("+sl+")[,|\\s]+("+sl+")[,|\\s]+("+sl+")[,|\\s]+("+sl+")\\s*\\)?",di={CSS_UNIT:new RegExp(sl),rgb:new RegExp("rgb"+Tw),rgba:new RegExp("rgba"+Ew),hsl:new RegExp("hsl"+Tw),hsla:new RegExp("hsla"+Ew),hsv:new RegExp("hsv"+Tw),hsva:new RegExp("hsva"+Ew),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function gde(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(pC[e])e=pC[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=di.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=di.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=di.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=di.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=di.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=di.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=di.hex8.exec(e),n?{r:fr(n[1]),g:fr(n[2]),b:fr(n[3]),a:cA(n[4]),format:t?"name":"hex8"}:(n=di.hex6.exec(e),n?{r:fr(n[1]),g:fr(n[2]),b:fr(n[3]),format:t?"name":"hex"}:(n=di.hex4.exec(e),n?{r:fr(n[1]+n[1]),g:fr(n[2]+n[2]),b:fr(n[3]+n[3]),a:cA(n[4]+n[4]),format:t?"name":"hex8"}:(n=di.hex3.exec(e),n?{r:fr(n[1]+n[1]),g:fr(n[2]+n[2]),b:fr(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function la(e){return Boolean(di.CSS_UNIT.exec(String(e)))}var nh=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var s;if(t instanceof e)return t;typeof t=="number"&&(t=dde(t)),this.originalInput=t;var o=fde(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=n.format)!==null&&s!==void 0?s:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,s,o,r=t.r/255,i=t.g/255,a=t.b/255;return r<=.03928?n=r/12.92:n=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),a<=.03928?o=a/12.92:o=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*s+.0722*o},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=nL(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var t=lA(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=lA(this.r,this.g,this.b),n=Math.round(t.h*360),s=Math.round(t.s*100),o=Math.round(t.v*100);return this.a===1?"hsv("+n+", "+s+"%, "+o+"%)":"hsva("+n+", "+s+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHsl=function(){var t=aA(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=aA(this.r,this.g,this.b),n=Math.round(t.h*360),s=Math.round(t.s*100),o=Math.round(t.l*100);return this.a===1?"hsl("+n+", "+s+"%, "+o+"%)":"hsla("+n+", "+s+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHex=function(t){return t===void 0&&(t=!1),uA(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),ude(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb("+t+", "+n+", "+s+")":"rgba("+t+", "+n+", "+s+", "+this.roundA+")"},e.prototype.toPercentageRgb=function(){var t=function(n){return Math.round(wo(n,255)*100)+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(wo(n,255)*100)};return this.a===1?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+uA(this.r,this.g,this.b,!1),n=0,s=Object.entries(pC);n<s.length;n++){var o=s[n],r=o[0],i=o[1];if(t===i)return r}return!1},e.prototype.toString=function(t){var n=Boolean(t);t=t!=null?t:this.format;var s=!1,o=this.a<1&&this.a>=0,r=!n&&o&&(t.startsWith("hex")||t==="name");return r?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(s=this.toRgbString()),t==="prgb"&&(s=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(s=this.toHexString()),t==="hex3"&&(s=this.toHexString(!0)),t==="hex4"&&(s=this.toHex8String(!0)),t==="hex8"&&(s=this.toHex8String()),t==="name"&&(s=this.toName()),t==="hsl"&&(s=this.toHslString()),t==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Vm(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Vm(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Vm(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Vm(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),s=(n.h+t)%360;return n.h=s<0?360+s:s,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var s=this.toRgb(),o=new e(t).toRgb(),r=n/100,i={r:(o.r-s.r)*r+s.r,g:(o.g-s.g)*r+s.g,b:(o.b-s.b)*r+s.b,a:(o.a-s.a)*r+s.a};return new e(i)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var s=this.toHsl(),o=360/n,r=[this];for(s.h=(s.h-(o*t>>1)+720)%360;--t;)s.h=(s.h+o)%360,r.push(new e(s));return r},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),s=n.h,o=n.s,r=n.v,i=[],a=1/t;t--;)i.push(new e({h:s,s:o,v:r})),r=(r+a)%1;return i},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),s=new e(t).toRgb();return new e({r:s.r+(n.r-s.r)*n.a,g:s.g+(n.g-s.g)*n.a,b:s.b+(n.b-s.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),s=n.h,o=[this],r=360/t,i=1;i<t;i++)o.push(new e({h:(s+i*r)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();const gC=["default","primary","success","warning","info","danger","text",""],mde=["button","submit","reset"],mC=mt({size:I0,disabled:Boolean,type:{type:String,values:gC,default:""},icon:{type:Je([String,Object]),default:""},nativeType:{type:String,values:mde,default:"button"},loading:Boolean,loadingIcon:{type:Je([String,Object]),default:()=>Ra},plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,autoInsertSpace:{type:Boolean,default:void 0}}),vde={click:e=>e instanceof MouseEvent},bde=ge({name:"ElButton",components:{ElIcon:Ot,Loading:Ra},props:mC,emits:vde,setup(e,{emit:t,slots:n}){const s=L(),o=Ze(TP,void 0),r=rf("button"),i=At("button"),a=R(()=>{var m,v,b;return(b=(v=e.autoInsertSpace)!=null?v:(m=r.value)==null?void 0:m.autoInsertSpace)!=null?b:!1}),l=R(()=>{var m;const v=(m=n.default)==null?void 0:m.call(n);if(a.value&&(v==null?void 0:v.length)===1){const b=v[0];if((b==null?void 0:b.type)===Rp){const $=b.children;return/^\p{Unified_Ideograph}{2}$/u.test($)}}return!1}),{form:u}=af(),c=ks(R(()=>o==null?void 0:o.size)),d=Pp(),f=R(()=>e.type||(o==null?void 0:o.type)||""),h=R(()=>Ete(`--el-color-${e.type}`).value),p=R(()=>{let m={};const v=e.color||h.value;if(v){const b=new nh(v).shade(10).toString();if(e.plain)m={"--el-button-bg-color":new nh(v).tint(90).toString(),"--el-button-text-color":v,"--el-button-hover-text-color":"var(--el-color-white)","--el-button-hover-bg-color":v,"--el-button-hover-border-color":v,"--el-button-active-bg-color":b,"--el-button-active-text-color":"var(--el-color-white)","--el-button-active-border-color":b};else{const $=new nh(v).tint(20).toString();m={"--el-button-bg-color":v,"--el-button-border-color":v,"--el-button-hover-bg-color":$,"--el-button-hover-border-color":$,"--el-button-active-bg-color":b,"--el-button-active-border-color":b}}if(d.value){const $=new nh(v).tint(50).toString();m["--el-button-disabled-bg-color"]=$,m["--el-button-disabled-border-color"]=$}}return m});return{buttonRef:s,buttonStyle:p,buttonSize:c,buttonType:f,buttonDisabled:d,shouldAddSpace:l,handleClick:m=>{e.nativeType==="reset"&&(u==null||u.resetFields()),t("click",m)},ns:i}}}),yde=["disabled","autofocus","type"];function wde(e,t,n,s,o,r){const i=ie("el-icon");return A(),B("button",{ref:"buttonRef",class:q([e.ns.b(),e.ns.m(e.buttonType),e.ns.m(e.buttonSize),e.ns.is("disabled",e.buttonDisabled),e.ns.is("loading",e.loading),e.ns.is("plain",e.plain),e.ns.is("round",e.round),e.ns.is("circle",e.circle)]),disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType,style:nt(e.buttonStyle),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.loading?(A(),B(at,{key:0},[e.$slots.loading?Re(e.$slots,"loading",{key:0}):(A(),ve(i,{key:1,class:q(e.ns.is("loading"))},{default:re(()=>[(A(),ve(tn(e.loadingIcon)))]),_:1},8,["class"]))],2112)):e.icon?(A(),ve(i,{key:1},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1})):ce("v-if",!0),e.$slots.default?(A(),B("span",{key:2,class:q({[e.ns.em("text","expand")]:e.shouldAddSpace})},[Re(e.$slots,"default")],2)):ce("v-if",!0)],14,yde)}var $de=We(bde,[["render",wde]]);const Cde={size:mC.size,type:mC.type},xde=ge({name:"ElButtonGroup",props:Cde,setup(e){return Vt(TP,Sn({size:bo(e,"size"),type:bo(e,"type")})),{ns:At("button")}}});function kde(e,t,n,s,o,r){return A(),B("div",{class:q(`${e.ns.b("group")}`)},[Re(e.$slots,"default")],2)}var sL=We(xde,[["render",kde]]);const ta=Wt($de,{ButtonGroup:sL}),oL=us(sL);var rL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){var n=1e3,s=6e4,o=36e5,r="millisecond",i="second",a="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},$=function(N,O,M){var D=String(N);return!D||D.length>=O?N:""+Array(O+1-D.length).join(M)+N},y={s:$,z:function(N){var O=-N.utcOffset(),M=Math.abs(O),D=Math.floor(M/60),F=M%60;return(O<=0?"+":"-")+$(D,2,"0")+":"+$(F,2,"0")},m:function N(O,M){if(O.date()<M.date())return-N(M,O);var D=12*(M.year()-O.year())+(M.month()-O.month()),F=O.clone().add(D,d),V=M-F<0,U=O.clone().add(D+(V?-1:1),d);return+(-(D+(M-F)/(V?F-U:U-F))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:d,y:h,w:c,d:u,D:p,h:l,m:a,s:i,ms:r,Q:f}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},w="en",C={};C[w]=b;var x=function(N){return N instanceof T},k=function(N,O,M){var D;if(!N)return w;if(typeof N=="string")C[N]&&(D=N),O&&(C[N]=O,D=N);else{var F=N.name;C[F]=N,D=F}return!M&&D&&(w=D),D||!M&&w},I=function(N,O){if(x(N))return N.clone();var M=typeof O=="object"?O:{};return M.date=N,M.args=arguments,new T(M)},S=y;S.l=k,S.i=x,S.w=function(N,O){return I(N,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var T=function(){function N(M){this.$L=k(M.locale,null,!0),this.parse(M)}var O=N.prototype;return O.parse=function(M){this.$d=function(D){var F=D.date,V=D.utc;if(F===null)return new Date(NaN);if(S.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var U=F.match(m);if(U){var ne=U[2]-1||0,be=(U[7]||"0").substring(0,3);return V?new Date(Date.UTC(U[1],ne,U[3]||1,U[4]||0,U[5]||0,U[6]||0,be)):new Date(U[1],ne,U[3]||1,U[4]||0,U[5]||0,U[6]||0,be)}}return new Date(F)}(M),this.$x=M.x||{},this.init()},O.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},O.$utils=function(){return S},O.isValid=function(){return this.$d.toString()!==g},O.isSame=function(M,D){var F=I(M);return this.startOf(D)<=F&&F<=this.endOf(D)},O.isAfter=function(M,D){return I(M)<this.startOf(D)},O.isBefore=function(M,D){return this.endOf(D)<I(M)},O.$g=function(M,D,F){return S.u(M)?this[D]:this.set(F,M)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(M,D){var F=this,V=!!S.u(D)||D,U=S.p(M),ne=function(ae,Se){var Le=S.w(F.$u?Date.UTC(F.$y,Se,ae):new Date(F.$y,Se,ae),F);return V?Le:Le.endOf(u)},be=function(ae,Se){return S.w(F.toDate()[ae].apply(F.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(Se)),F)},te=this.$W,he=this.$M,oe=this.$D,G="set"+(this.$u?"UTC":"");switch(U){case h:return V?ne(1,0):ne(31,11);case d:return V?ne(1,he):ne(0,he+1);case c:var Y=this.$locale().weekStart||0,X=(te<Y?te+7:te)-Y;return ne(V?oe-X:oe+(6-X),he);case u:case p:return be(G+"Hours",0);case l:return be(G+"Minutes",1);case a:return be(G+"Seconds",2);case i:return be(G+"Milliseconds",3);default:return this.clone()}},O.endOf=function(M){return this.startOf(M,!1)},O.$set=function(M,D){var F,V=S.p(M),U="set"+(this.$u?"UTC":""),ne=(F={},F[u]=U+"Date",F[p]=U+"Date",F[d]=U+"Month",F[h]=U+"FullYear",F[l]=U+"Hours",F[a]=U+"Minutes",F[i]=U+"Seconds",F[r]=U+"Milliseconds",F)[V],be=V===u?this.$D+(D-this.$W):D;if(V===d||V===h){var te=this.clone().set(p,1);te.$d[ne](be),te.init(),this.$d=te.set(p,Math.min(this.$D,te.daysInMonth())).$d}else ne&&this.$d[ne](be);return this.init(),this},O.set=function(M,D){return this.clone().$set(M,D)},O.get=function(M){return this[S.p(M)]()},O.add=function(M,D){var F,V=this;M=Number(M);var U=S.p(D),ne=function(he){var oe=I(V);return S.w(oe.date(oe.date()+Math.round(he*M)),V)};if(U===d)return this.set(d,this.$M+M);if(U===h)return this.set(h,this.$y+M);if(U===u)return ne(1);if(U===c)return ne(7);var be=(F={},F[a]=s,F[l]=o,F[i]=n,F)[U]||1,te=this.$d.getTime()+M*be;return S.w(te,this)},O.subtract=function(M,D){return this.add(-1*M,D)},O.format=function(M){var D=this,F=this.$locale();if(!this.isValid())return F.invalidDate||g;var V=M||"YYYY-MM-DDTHH:mm:ssZ",U=S.z(this),ne=this.$H,be=this.$m,te=this.$M,he=F.weekdays,oe=F.months,G=function(Se,Le,Be,Fe){return Se&&(Se[Le]||Se(D,V))||Be[Le].substr(0,Fe)},Y=function(Se){return S.s(ne%12||12,Se,"0")},X=F.meridiem||function(Se,Le,Be){var Fe=Se<12?"AM":"PM";return Be?Fe.toLowerCase():Fe},ae={YY:String(this.$y).slice(-2),YYYY:this.$y,M:te+1,MM:S.s(te+1,2,"0"),MMM:G(F.monthsShort,te,oe,3),MMMM:G(oe,te),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:G(F.weekdaysMin,this.$W,he,2),ddd:G(F.weekdaysShort,this.$W,he,3),dddd:he[this.$W],H:String(ne),HH:S.s(ne,2,"0"),h:Y(1),hh:Y(2),a:X(ne,be,!0),A:X(ne,be,!1),m:String(be),mm:S.s(be,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:U};return V.replace(v,function(Se,Le){return Le||ae[Se]||U.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(M,D,F){var V,U=S.p(D),ne=I(M),be=(ne.utcOffset()-this.utcOffset())*s,te=this-ne,he=S.m(this,ne);return he=(V={},V[h]=he/12,V[d]=he,V[f]=he/3,V[c]=(te-be)/6048e5,V[u]=(te-be)/864e5,V[l]=te/o,V[a]=te/s,V[i]=te/n,V)[U]||te,F?he:S.a(he)},O.daysInMonth=function(){return this.endOf(d).$D},O.$locale=function(){return C[this.$L]},O.locale=function(M,D){if(!M)return this.$L;var F=this.clone(),V=k(M,D,!0);return V&&(F.$L=V),F},O.clone=function(){return S.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},N}(),_=T.prototype;return I.prototype=_,[["$ms",r],["$s",i],["$m",a],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function(N){_[N[1]]=function(O){return this.$g(O,N[0],N[1])}}),I.extend=function(N,O){return N.$i||(N(O,T,I),N.$i=!0),I},I.locale=k,I.isDayjs=x,I.unix=function(N){return I(1e3*N)},I.en=C[w],I.Ls=C,I.p={},I})})(rL);var Ct=rL.exports,iL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){return function(n,s,o){var r=s.prototype,i=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,f,h,p,g){var m=d.name?d:d.$locale(),v=i(m[f]),b=i(m[h]),$=v||b.map(function(w){return w.substr(0,p)});if(!g)return $;var y=m.weekStart;return $.map(function(w,C){return $[(C+(y||0))%7]})},l=function(){return o.Ls[o.locale()]},u=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,g,m){return g||m.slice(1)})}(d.formats[f.toUpperCase()])},c=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):a(d,"months")},monthsShort:function(f){return f?f.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):a(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return u(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return c.bind(this)()},o.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return o.weekdays()},weekdaysShort:function(){return o.weekdaysShort()},weekdaysMin:function(){return o.weekdaysMin()},months:function(){return o.months()},monthsShort:function(){return o.monthsShort()},longDateFormat:function(f){return u(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},o.months=function(){return a(l(),"months")},o.monthsShort=function(){return a(l(),"monthsShort","months",3)},o.weekdays=function(d){return a(l(),"weekdays",null,null,d)},o.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},o.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(iL);var aL=iL.exports,lL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,r=/\d\d?/,i=/\d*[^\s\d-_:/()]+/,a={},l=function(g){return(g=+g)+(g>68?1900:2e3)},u=function(g){return function(m){this[g]=+m}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var v=m.match(/([+-]|\d\d)/g),b=60*v[1]+(+v[2]||0);return b===0?0:v[0]==="+"?-b:b}(g)}],d=function(g){var m=a[g];return m&&(m.indexOf?m:m.s.concat(m.f))},f=function(g,m){var v,b=a.meridiem;if(b){for(var $=1;$<=24;$+=1)if(g.indexOf(b($,0,m))>-1){v=$>12;break}}else v=g===(m?"pm":"PM");return v},h={A:[i,function(g){this.afternoon=f(g,!1)}],a:[i,function(g){this.afternoon=f(g,!0)}],S:[/\d/,function(g){this.milliseconds=100*+g}],SS:[o,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[r,u("seconds")],ss:[r,u("seconds")],m:[r,u("minutes")],mm:[r,u("minutes")],H:[r,u("hours")],h:[r,u("hours")],HH:[r,u("hours")],hh:[r,u("hours")],D:[r,u("day")],DD:[o,u("day")],Do:[i,function(g){var m=a.ordinal,v=g.match(/\d+/);if(this.day=v[0],m)for(var b=1;b<=31;b+=1)m(b).replace(/\[|\]/g,"")===g&&(this.day=b)}],M:[r,u("month")],MM:[o,u("month")],MMM:[i,function(g){var m=d("months"),v=(d("monthsShort")||m.map(function(b){return b.substr(0,3)})).indexOf(g)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[i,function(g){var m=d("months").indexOf(g)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,u("year")],YY:[o,function(g){this.year=l(g)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function p(g){var m,v;m=g,v=a&&a.formats;for(var b=(g=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(I,S,T){var _=T&&T.toUpperCase();return S||v[T]||n[T]||v[_].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,O,M){return O||M.slice(1)})})).match(s),$=b.length,y=0;y<$;y+=1){var w=b[y],C=h[w],x=C&&C[0],k=C&&C[1];b[y]=k?{regex:x,parser:k}:w.replace(/^\[|\]$/g,"")}return function(I){for(var S={},T=0,_=0;T<$;T+=1){var N=b[T];if(typeof N=="string")_+=N.length;else{var O=N.regex,M=N.parser,D=I.substr(_),F=O.exec(D)[0];M.call(S,F),I=I.replace(F,"")}}return function(V){var U=V.afternoon;if(U!==void 0){var ne=V.hours;U?ne<12&&(V.hours+=12):ne===12&&(V.hours=0),delete V.afternoon}}(S),S}}return function(g,m,v){v.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(l=g.parseTwoDigitYear);var b=m.prototype,$=b.parse;b.parse=function(y){var w=y.date,C=y.utc,x=y.args;this.$u=C;var k=x[1];if(typeof k=="string"){var I=x[2]===!0,S=x[3]===!0,T=I||S,_=x[2];S&&(_=x[2]),a=this.$locale(),!I&&_&&(a=v.Ls[_]),this.$d=function(D,F,V){try{if(["x","X"].indexOf(F)>-1)return new Date((F==="X"?1e3:1)*D);var U=p(F)(D),ne=U.year,be=U.month,te=U.day,he=U.hours,oe=U.minutes,G=U.seconds,Y=U.milliseconds,X=U.zone,ae=new Date,Se=te||(ne||be?1:ae.getDate()),Le=ne||ae.getFullYear(),Be=0;ne&&!be||(Be=be>0?be-1:ae.getMonth());var Fe=he||0,j=oe||0,Q=G||0,H=Y||0;return X?new Date(Date.UTC(Le,Be,Se,Fe,j,Q,H+60*X.offset*1e3)):V?new Date(Date.UTC(Le,Be,Se,Fe,j,Q,H)):new Date(Le,Be,Se,Fe,j,Q,H)}catch{return new Date("")}}(w,k,C),this.init(),_&&_!==!0&&(this.$L=this.locale(_).$L),T&&w!=this.format(k)&&(this.$d=new Date("")),a={}}else if(k instanceof Array)for(var N=k.length,O=1;O<=N;O+=1){x[1]=k[O-1];var M=v.apply(this,x);if(M.isValid()){this.$d=M.$d,this.$L=M.$L,this.init();break}O===N&&(this.$d=new Date(""))}else $.call(this,y)}}})})(lL);var Y2=lL.exports;const vC="HH:mm:ss",sh="YYYY-MM-DD",Sde={date:sh,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${sh} ${vC}`,monthrange:"YYYY-MM",daterange:sh,datetimerange:`${sh} ${vC}`};var Ide=mte;function Tde(e,t){return Ide(e,t)}var yi=Tde;const nr=e=>["","large","default","small"].includes(e),uL=e=>["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"].includes(e),X2={id:{type:[Array,String]},name:{type:[Array,String],default:""},popperClass:{type:String,default:""},format:{type:String},valueFormat:{type:String},type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Ta},editable:{type:Boolean,default:!0},prefixIcon:{type:[String,Object],default:""},size:{type:String,validator:nr},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},modelValue:{type:[Date,Array,String,Number],default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:[Date,Array]},defaultTime:{type:[Date,Array]},isRange:{type:Boolean,default:!1},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean},dA=function(e,t){const n=e instanceof Date,s=t instanceof Date;return n&&s?e.getTime()===t.getTime():!n&&!s?e===t:!1},fA=function(e,t){const n=e instanceof Array,s=t instanceof Array;return n&&s?e.length!==t.length?!1:e.every((o,r)=>dA(o,t[r])):!n&&!s?dA(e,t):!1},hA=function(e,t,n){const s=Jh(t)||t==="x"?Ct(e).locale(n):Ct(e,t).locale(n);return s.isValid()?s:void 0},pA=function(e,t,n){return Jh(t)?e:t==="x"?+e:Ct(e).locale(n).format(t)},Ede=ge({name:"Picker",components:{ElInput:ei,ElTooltip:ar,ElIcon:Ot},props:X2,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change"],setup(e,t){const{lang:n}=In(),s=Ze(ir,{}),o=Ze(Ni,{}),r=Ze("ElPopperOptions",{}),i=L(),a=L(),l=L(!1),u=L(!1),c=L(null);Oe(l,J=>{var _e;J?c.value=e.modelValue:(te.value=null,dt(()=>{d(e.modelValue)}),t.emit("blur"),oe(),e.validateEvent&&((_e=o.validate)==null||_e.call(o,"blur")))});const d=(J,_e)=>{var Ie;(_e||!fA(J,c.value))&&(t.emit("change",J),e.validateEvent&&((Ie=o.validate)==null||Ie.call(o,"change")))},f=J=>{if(!fA(e.modelValue,J)){let _e;Array.isArray(J)?_e=J.map(Ie=>pA(Ie,e.valueFormat,n.value)):J&&(_e=pA(J,e.valueFormat,n.value)),t.emit("update:modelValue",J&&_e,n.value)}},h=R(()=>{if(a.value){const J=F.value?a.value:a.value.$el;return Array.from(J.querySelectorAll("input"))}return[]}),p=R(()=>h==null?void 0:h.value[0]),g=R(()=>h==null?void 0:h.value[1]),m=(J,_e,Ie)=>{const fe=h.value;!fe.length||(!Ie||Ie==="min"?(fe[0].setSelectionRange(J,_e),fe[0].focus()):Ie==="max"&&(fe[1].setSelectionRange(J,_e),fe[1].focus()))},v=(J="",_e=!1)=>{l.value=_e;let Ie;Array.isArray(J)?Ie=J.map(fe=>fe.toDate()):Ie=J&&J.toDate(),te.value=null,f(Ie)},b=(J=!0)=>{let _e=p.value;!J&&F.value&&(_e=g.value),_e&&_e.focus()},$=J=>{e.readonly||w.value||l.value||(l.value=!0,t.emit("focus",J))},y=()=>{var J;(J=i.value)==null||J.onClose(),oe()},w=R(()=>e.disabled||s.disabled),C=R(()=>{let J;if(O.value?Q.value.getDefaultValue&&(J=Q.value.getDefaultValue()):Array.isArray(e.modelValue)?J=e.modelValue.map(_e=>hA(_e,e.valueFormat,n.value)):J=hA(e.modelValue,e.valueFormat,n.value),Q.value.getRangeAvailableTime){const _e=Q.value.getRangeAvailableTime(J);yi(_e,J)||(J=_e,f(Array.isArray(J)?J.map(Ie=>Ie.toDate()):J.toDate()))}return Array.isArray(J)&&J.some(_e=>!_e)&&(J=[]),J}),x=R(()=>{if(!Q.value.panelReady)return;const J=Y(C.value);if(Array.isArray(te.value))return[te.value[0]||J&&J[0]||"",te.value[1]||J&&J[1]||""];if(te.value!==null)return te.value;if(!(!I.value&&O.value)&&!(!l.value&&O.value))return J?S.value?J.join(", "):J:""}),k=R(()=>e.type.includes("time")),I=R(()=>e.type.startsWith("time")),S=R(()=>e.type==="dates"),T=R(()=>e.prefixIcon||(k.value?CF:soe)),_=L(!1),N=J=>{e.readonly||w.value||_.value&&(J.stopPropagation(),f(null),d(null,!0),_.value=!1,l.value=!1,Q.value.handleClear&&Q.value.handleClear())},O=R(()=>!e.modelValue||Array.isArray(e.modelValue)&&!e.modelValue.length),M=()=>{e.readonly||w.value||!O.value&&e.clearable&&(_.value=!0)},D=()=>{_.value=!1},F=R(()=>e.type.indexOf("range")>-1),V=ks(),U=R(()=>{var J,_e;return(_e=(J=i.value)==null?void 0:J.popperRef)==null?void 0:_e.contentRef}),ne=R(()=>{var J,_e;return(_e=(J=Ke(i))==null?void 0:J.popperRef)==null?void 0:_e.contentRef}),be=R(()=>{var J;return Ke(F)?Ke(a):(J=Ke(a))==null?void 0:J.$el});Q$(be,J=>{const _e=Ke(ne),Ie=Ke(be);_e&&(J.target===_e||J.composedPath().includes(_e))||J.target===Ie||J.composedPath().includes(Ie)||(l.value=!1)});const te=L(null),he=()=>{if(te.value){const J=G(x.value);J&&X(J)&&(f(Array.isArray(J)?J.map(_e=>_e.toDate()):J.toDate()),te.value=null)}te.value===""&&(f(null),d(null),te.value=null)},oe=()=>{h.value.forEach(J=>J.blur())},G=J=>J?Q.value.parseUserInput(J):null,Y=J=>J?Q.value.formatToString(J):null,X=J=>Q.value.isValidValue(J),ae=J=>{const _e=J.code;if(_e===Qe.esc){l.value=!1,J.stopPropagation();return}if(_e===Qe.tab){F.value?setTimeout(()=>{h.value.indexOf(document.activeElement)===-1&&(l.value=!1,oe())},0):(he(),l.value=!1,J.stopPropagation());return}if(_e===Qe.enter||_e===Qe.numpadEnter){(te.value===null||te.value===""||X(G(x.value)))&&(he(),l.value=!1),J.stopPropagation();return}if(te.value){J.stopPropagation();return}Q.value.handleKeydown&&Q.value.handleKeydown(J)},Se=J=>{te.value=J},Le=J=>{te.value?te.value=[J.target.value,te.value[1]]:te.value=[J.target.value,null]},Be=J=>{te.value?te.value=[te.value[0],J.target.value]:te.value=[null,J.target.value]},Fe=()=>{const J=G(te.value&&te.value[0]);if(J&&J.isValid()){te.value=[Y(J),x.value[1]];const _e=[J,C.value&&C.value[1]];X(_e)&&(f(_e),te.value=null)}},j=()=>{const J=G(te.value&&te.value[1]);if(J&&J.isValid()){te.value=[x.value[0],Y(J)];const _e=[C.value&&C.value[0],J];X(_e)&&(f(_e),te.value=null)}},Q=L({}),H=J=>{Q.value[J[0]]=J[1],Q.value.panelReady=!0},se=J=>{t.emit("calendar-change",J)},we=(J,_e,Ie)=>{t.emit("panel-change",J,_e,Ie)};return Vt("EP_PICKER_BASE",{props:e}),{elPopperOptions:r,isDatesPicker:S,handleEndChange:j,handleStartChange:Fe,handleStartInput:Le,handleEndInput:Be,onUserInput:Se,handleChange:he,handleKeydown:ae,popperPaneRef:U,onClickOutside:Q$,pickerSize:V,isRangeInput:F,onMouseLeave:D,onMouseEnter:M,onClearIconClick:N,showClose:_,triggerIcon:T,onPick:v,handleFocus:$,handleBlur:y,pickerVisible:l,pickerActualVisible:u,displayValue:x,parsedValue:C,setSelectionRange:m,refPopper:i,inputRef:a,pickerDisabled:w,onSetPickerOption:H,onCalendarChange:se,onPanelChange:we,focus:b}}}),_de=["id","name","placeholder","value","disabled","readonly"],Nde={class:"el-range-separator"},Ade=["id","name","placeholder","value","disabled","readonly"];function Dde(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("el-input"),l=ie("el-tooltip");return A(),ve(l,lo({ref:"refPopper",visible:e.pickerVisible,"onUpdate:visible":t[17]||(t[17]=u=>e.pickerVisible=u),effect:"light",pure:"",trigger:"click"},e.$attrs,{"append-to-body":"",transition:"el-zoom-in-top","popper-class":`el-picker__popper ${e.popperClass}`,"popper-options":e.elPopperOptions,"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onShow:t[18]||(t[18]=u=>e.pickerActualVisible=!0),onHide:t[19]||(t[19]=u=>e.pickerActualVisible=!1)}),{default:re(()=>[e.isRangeInput?(A(),B("div",{key:1,ref:"inputRef",class:q(["el-date-editor el-range-editor el-input__inner",["el-date-editor--"+e.type,e.pickerSize?`el-range-editor--${e.pickerSize}`:"",e.pickerDisabled?"is-disabled":"",e.pickerVisible?"is-active":"",e.$attrs.class||void 0]]),style:nt(e.$attrs.style||void 0),onClick:t[7]||(t[7]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onMouseenter:t[8]||(t[8]=(...u)=>e.onMouseEnter&&e.onMouseEnter(...u)),onMouseleave:t[9]||(t[9]=(...u)=>e.onMouseLeave&&e.onMouseLeave(...u)),onKeydown:t[10]||(t[10]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))},[e.triggerIcon?(A(),ve(i,{key:0,class:"el-input__icon el-range__icon",onClick:e.handleFocus},{default:re(()=>[(A(),ve(tn(e.triggerIcon)))]),_:1},8,["onClick"])):ce("v-if",!0),W("input",{id:e.id&&e.id[0],autocomplete:"off",name:e.name&&e.name[0],placeholder:e.startPlaceholder,value:e.displayValue&&e.displayValue[0],disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,class:"el-range-input",onInput:t[1]||(t[1]=(...u)=>e.handleStartInput&&e.handleStartInput(...u)),onChange:t[2]||(t[2]=(...u)=>e.handleStartChange&&e.handleStartChange(...u)),onFocus:t[3]||(t[3]=(...u)=>e.handleFocus&&e.handleFocus(...u))},null,40,_de),Re(e.$slots,"range-separator",{},()=>[W("span",Nde,Pe(e.rangeSeparator),1)]),W("input",{id:e.id&&e.id[1],autocomplete:"off",name:e.name&&e.name[1],placeholder:e.endPlaceholder,value:e.displayValue&&e.displayValue[1],disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,class:"el-range-input",onFocus:t[4]||(t[4]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onInput:t[5]||(t[5]=(...u)=>e.handleEndInput&&e.handleEndInput(...u)),onChange:t[6]||(t[6]=(...u)=>e.handleEndChange&&e.handleEndChange(...u))},null,40,Ade),e.clearIcon?(A(),ve(i,{key:1,class:q(["el-input__icon el-range__close-icon",{"el-range__close-icon--hidden":!e.showClose}]),onClick:e.onClearIconClick},{default:re(()=>[(A(),ve(tn(e.clearIcon)))]),_:1},8,["class","onClick"])):ce("v-if",!0)],38)):(A(),ve(a,{key:0,id:e.id,ref:"inputRef","model-value":e.displayValue,name:e.name,size:e.pickerSize,disabled:e.pickerDisabled,placeholder:e.placeholder,class:q(["el-date-editor",["el-date-editor--"+e.type,e.$attrs.class||void 0]]),style:nt(e.$attrs.style||void 0),readonly:!e.editable||e.readonly||e.isDatesPicker||e.type==="week",onInput:e.onUserInput,onFocus:e.handleFocus,onKeydown:e.handleKeydown,onChange:e.handleChange,onMouseenter:e.onMouseEnter,onMouseleave:e.onMouseLeave,onClick:t[0]||(t[0]=ht(()=>{},["stop"]))},{prefix:re(()=>[e.triggerIcon?(A(),ve(i,{key:0,class:"el-input__icon",onClick:e.handleFocus},{default:re(()=>[(A(),ve(tn(e.triggerIcon)))]),_:1},8,["onClick"])):ce("v-if",!0)]),suffix:re(()=>[e.showClose&&e.clearIcon?(A(),ve(i,{key:0,class:"el-input__icon clear-icon",onClick:e.onClearIconClick},{default:re(()=>[(A(),ve(tn(e.clearIcon)))]),_:1},8,["onClick"])):ce("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","onInput","onFocus","onKeydown","onChange","onMouseenter","onMouseleave"]))]),content:re(()=>[Re(e.$slots,"default",{visible:e.pickerVisible,actualVisible:e.pickerActualVisible,parsedValue:e.parsedValue,format:e.format,unlinkPanels:e.unlinkPanels,type:e.type,defaultValue:e.defaultValue,onPick:t[11]||(t[11]=(...u)=>e.onPick&&e.onPick(...u)),onSelectRange:t[12]||(t[12]=(...u)=>e.setSelectionRange&&e.setSelectionRange(...u)),onSetPickerOption:t[13]||(t[13]=(...u)=>e.onSetPickerOption&&e.onSetPickerOption(...u)),onCalendarChange:t[14]||(t[14]=(...u)=>e.onCalendarChange&&e.onCalendarChange(...u)),onPanelChange:t[15]||(t[15]=(...u)=>e.onPanelChange&&e.onPanelChange(...u)),onMousedown:t[16]||(t[16]=ht(()=>{},["stop"]))})]),_:3},16,["visible","popper-class","popper-options"])}var cL=We(Ede,[["render",Dde]]);const _w=(e,t,n)=>{const s=[],o=t&&n();for(let r=0;r<e;r++)s[r]=o?o.includes(r):!1;return s},Nw=e=>e.map((t,n)=>t||n).filter(t=>t!==!0),dL=(e,t,n)=>({getHoursList:(i,a)=>_w(24,e,()=>e(i,a)),getMinutesList:(i,a,l)=>_w(60,t,()=>t(i,a,l)),getSecondsList:(i,a,l,u)=>_w(60,n,()=>n(i,a,l,u))}),fL=(e,t,n)=>{const{getHoursList:s,getMinutesList:o,getSecondsList:r}=dL(e,t,n);return{getAvailableHours:(u,c)=>Nw(s(u,c)),getAvailableMinutes:(u,c,d)=>Nw(o(u,c,d)),getAvailableSeconds:(u,c,d,f)=>Nw(r(u,c,d,f))}},hL=e=>{const t=L(e.parsedValue);return Oe(()=>e.visible,n=>{n||(t.value=e.parsedValue)}),t},Rde=ge({directives:{repeatClick:EF},components:{ElScrollbar:Oa,ElIcon:Ot,ArrowUp:Fp,ArrowDown:dc},props:{role:{type:String,required:!0},spinnerDate:{type:Object,required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function}},emits:["change","select-range","set-option"],setup(e,t){let n=!1;const s=tr(oe=>{n=!1,k(oe)},200),o=L(null),r=L(null),i=L(null),a=L(null),l={hours:r,minutes:i,seconds:a},u=R(()=>{const oe=["hours","minutes","seconds"];return e.showSeconds?oe:oe.slice(0,2)}),c=R(()=>e.spinnerDate.hour()),d=R(()=>e.spinnerDate.minute()),f=R(()=>e.spinnerDate.second()),h=R(()=>({hours:c,minutes:d,seconds:f})),p=R(()=>be(e.role)),g=R(()=>te(c.value,e.role)),m=R(()=>he(c.value,d.value,e.role)),v=R(()=>({hours:p,minutes:g,seconds:m})),b=R(()=>{const oe=c.value;return[oe>0?oe-1:void 0,oe,oe<23?oe+1:void 0]}),$=R(()=>{const oe=d.value;return[oe>0?oe-1:void 0,oe,oe<59?oe+1:void 0]}),y=R(()=>{const oe=f.value;return[oe>0?oe-1:void 0,oe,oe<59?oe+1:void 0]}),w=R(()=>({hours:b,minutes:$,seconds:y})),C=oe=>{if(!!!e.amPmMode)return"";const Y=e.amPmMode==="A";let X=oe<12?" am":" pm";return Y&&(X=X.toUpperCase()),X},x=oe=>{oe==="hours"?t.emit("select-range",0,2):oe==="minutes"?t.emit("select-range",3,5):oe==="seconds"&&t.emit("select-range",6,8),o.value=oe},k=oe=>{S(oe,h.value[oe].value)},I=()=>{k("hours"),k("minutes"),k("seconds")},S=(oe,G)=>{if(e.arrowControl)return;const Y=l[oe];Y&&Y.$el&&(Y.$el.querySelector(".el-scrollbar__wrap").scrollTop=Math.max(0,G*T(oe)))},T=oe=>l[oe].$el.querySelector("li").offsetHeight,_=()=>{O(1)},N=()=>{O(-1)},O=oe=>{o.value||x("hours");const G=o.value;let Y=h.value[G].value;const X=o.value==="hours"?24:60;Y=(Y+oe+X)%X,M(G,Y),S(G,Y),dt(()=>x(o.value))},M=(oe,G)=>{if(!v.value[oe].value[G])switch(oe){case"hours":t.emit("change",e.spinnerDate.hour(G).minute(d.value).second(f.value));break;case"minutes":t.emit("change",e.spinnerDate.hour(c.value).minute(G).second(f.value));break;case"seconds":t.emit("change",e.spinnerDate.hour(c.value).minute(d.value).second(G));break}},D=(oe,{value:G,disabled:Y})=>{Y||(M(oe,G),x(oe),S(oe,G))},F=oe=>{n=!0,s(oe);const G=Math.min(Math.round((l[oe].$el.querySelector(".el-scrollbar__wrap").scrollTop-(V(oe)*.5-10)/T(oe)+3)/T(oe)),oe==="hours"?23:59);M(oe,G)},V=oe=>l[oe].$el.offsetHeight,U=()=>{const oe=G=>{l[G]&&l[G].$el&&(l[G].$el.querySelector(".el-scrollbar__wrap").onscroll=()=>{F(G)})};oe("hours"),oe("minutes"),oe("seconds")};Rt(()=>{dt(()=>{!e.arrowControl&&U(),I(),e.role==="start"&&x("hours")})});const ne=(oe,G)=>{l[G]=oe};t.emit("set-option",[`${e.role}_scrollDown`,O]),t.emit("set-option",[`${e.role}_emitSelectRange`,x]);const{getHoursList:be,getMinutesList:te,getSecondsList:he}=dL(e.disabledHours,e.disabledMinutes,e.disabledSeconds);return Oe(()=>e.spinnerDate,()=>{n||I()}),{setRef:ne,spinnerItems:u,currentScrollbar:o,hours:c,minutes:d,seconds:f,hoursList:p,minutesList:g,arrowHourList:b,arrowMinuteList:$,arrowSecondList:y,getAmPmFlag:C,emitSelectRange:x,adjustCurrentSpinner:k,typeItemHeight:T,listHoursRef:r,listMinutesRef:i,listSecondsRef:a,onIncreaseClick:_,onDecreaseClick:N,handleClick:D,secondsList:m,timePartsMap:h,arrowListMap:w,listMap:v}}}),Ode=["onClick"],Mde=["onMouseenter"],Pde={class:"el-time-spinner__list"};function Fde(e,t,n,s,o,r){const i=ie("el-scrollbar"),a=ie("arrow-up"),l=ie("el-icon"),u=ie("arrow-down"),c=Vo("repeat-click");return A(),B("div",{class:q(["el-time-spinner",{"has-seconds":e.showSeconds}])},[e.arrowControl?ce("v-if",!0):(A(!0),B(at,{key:0},Zt(e.spinnerItems,d=>(A(),ve(i,{key:d,ref_for:!0,ref:f=>e.setRef(f,d),class:"el-time-spinner__wrapper","wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul",onMouseenter:f=>e.emitSelectRange(d),onMousemove:f=>e.adjustCurrentSpinner(d)},{default:re(()=>[(A(!0),B(at,null,Zt(e.listMap[d].value,(f,h)=>(A(),B("li",{key:h,class:q(["el-time-spinner__item",{active:h===e.timePartsMap[d].value,disabled:f}]),onClick:p=>e.handleClick(d,{value:h,disabled:f})},[d==="hours"?(A(),B(at,{key:0},[qt(Pe(("0"+(e.amPmMode?h%12||12:h)).slice(-2))+Pe(e.getAmPmFlag(h)),1)],2112)):(A(),B(at,{key:1},[qt(Pe(("0"+h).slice(-2)),1)],2112))],10,Ode))),128))]),_:2},1032,["onMouseenter","onMousemove"]))),128)),e.arrowControl?(A(!0),B(at,{key:1},Zt(e.spinnerItems,d=>(A(),B("div",{key:d,class:"el-time-spinner__wrapper is-arrow",onMouseenter:f=>e.emitSelectRange(d)},[$t((A(),ve(l,{class:"el-time-spinner__arrow arrow-up"},{default:re(()=>[le(a)]),_:1})),[[c,e.onDecreaseClick]]),$t((A(),ve(l,{class:"el-time-spinner__arrow arrow-down"},{default:re(()=>[le(u)]),_:1})),[[c,e.onIncreaseClick]]),W("ul",Pde,[(A(!0),B(at,null,Zt(e.arrowListMap[d].value,(f,h)=>(A(),B("li",{key:h,class:q(["el-time-spinner__item",{active:f===e.timePartsMap[d].value,disabled:e.listMap[d].value[f]}])},[typeof f=="number"?(A(),B(at,{key:0},[d==="hours"?(A(),B(at,{key:0},[qt(Pe(("0"+(e.amPmMode?f%12||12:f)).slice(-2))+Pe(e.getAmPmFlag(f)),1)],2112)):(A(),B(at,{key:1},[qt(Pe(("0"+f).slice(-2)),1)],2112))],2112)):ce("v-if",!0)],2))),128))])],40,Mde))),128)):ce("v-if",!0)],2)}var pL=We(Rde,[["render",Fde]]);const Lde=ge({components:{TimeSpinner:pL},props:{visible:Boolean,actualVisible:{type:Boolean,default:void 0},datetimeRole:{type:String},parsedValue:{type:[Object,String]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,t){const{t:n,lang:s}=In(),o=L([0,2]),r=hL(e),i=R(()=>e.actualVisible===void 0?"el-zoom-in-top":""),a=R(()=>e.format.includes("ss")),l=R(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),u=M=>{const D=Ct(M).locale(s.value),F=m(D);return D.isSame(F)},c=()=>{t.emit("pick",r.value,!1)},d=(M=!1,D=!1)=>{D||t.emit("pick",e.parsedValue,M)},f=M=>{if(!e.visible)return;const D=m(M).millisecond(0);t.emit("pick",D,!0)},h=(M,D)=>{t.emit("select-range",M,D),o.value=[M,D]},p=M=>{const D=[0,3].concat(a.value?[6]:[]),F=["hours","minutes"].concat(a.value?["seconds"]:[]),U=(D.indexOf(o.value[0])+M+D.length)%D.length;y.start_emitSelectRange(F[U])},g=M=>{const D=M.code;if(D===Qe.left||D===Qe.right){const F=D===Qe.left?-1:1;p(F),M.preventDefault();return}if(D===Qe.up||D===Qe.down){const F=D===Qe.up?-1:1;y.start_scrollDown(F),M.preventDefault();return}},m=M=>{const D={hour:_,minute:N,second:O};let F=M;return["hour","minute","second"].forEach(V=>{if(D[V]){let U;const ne=D[V];V==="minute"?U=ne(F.hour(),e.datetimeRole):V==="second"?U=ne(F.hour(),F.minute(),e.datetimeRole):U=ne(e.datetimeRole),U&&U.length&&!U.includes(F[V]())&&(F=F[V](U[0]))}}),F},v=M=>M?Ct(M,e.format).locale(s.value):null,b=M=>M?M.format(e.format):null,$=()=>Ct(T).locale(s.value);t.emit("set-picker-option",["isValidValue",u]),t.emit("set-picker-option",["formatToString",b]),t.emit("set-picker-option",["parseUserInput",v]),t.emit("set-picker-option",["handleKeydown",g]),t.emit("set-picker-option",["getRangeAvailableTime",m]),t.emit("set-picker-option",["getDefaultValue",$]);const y={},w=M=>{y[M[0]]=M[1]},C=Ze("EP_PICKER_BASE"),{arrowControl:x,disabledHours:k,disabledMinutes:I,disabledSeconds:S,defaultValue:T}=C.props,{getAvailableHours:_,getAvailableMinutes:N,getAvailableSeconds:O}=fL(k,I,S);return{transitionName:i,arrowControl:x,onSetOption:w,t:n,handleConfirm:d,handleChange:f,setSelectionRange:h,amPmMode:l,showSeconds:a,handleCancel:c,disabledHours:k,disabledMinutes:I,disabledSeconds:S}}}),Bde={key:0,class:"el-time-panel"},zde={class:"el-time-panel__footer"};function Vde(e,t,n,s,o,r){const i=ie("time-spinner");return A(),ve(xs,{name:e.transitionName},{default:re(()=>[e.actualVisible||e.visible?(A(),B("div",Bde,[W("div",{class:q(["el-time-panel__content",{"has-seconds":e.showSeconds}])},[le(i,{ref:"spinner",role:e.datetimeRole||"start","arrow-control":e.arrowControl,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"spinner-date":e.parsedValue,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,onChange:e.handleChange,onSetOption:e.onSetOption,onSelectRange:e.setSelectionRange},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2),W("div",zde,[W("button",{type:"button",class:"el-time-panel__btn cancel",onClick:t[0]||(t[0]=(...a)=>e.handleCancel&&e.handleCancel(...a))},Pe(e.t("el.datepicker.cancel")),1),W("button",{type:"button",class:"el-time-panel__btn confirm",onClick:t[1]||(t[1]=a=>e.handleConfirm())},Pe(e.t("el.datepicker.confirm")),1)])])):ce("v-if",!0)]),_:1},8,["name"])}var Z2=We(Lde,[["render",Vde]]),gA=ef,Wde=GP,Hde=Il,mA=gA?gA.isConcatSpreadable:void 0;function Ude(e){return Hde(e)||Wde(e)||!!(mA&&e&&e[mA])}var jde=Ude,Gde=E2,Kde=jde;function gL(e,t,n,s,o){var r=-1,i=e.length;for(n||(n=Kde),o||(o=[]);++r<i;){var a=e[r];t>0&&n(a)?t>1?gL(a,t-1,n,s,o):Gde(o,a):s||(o[o.length]=a)}return o}var qde=gL;function Yde(e){return e}var mL=Yde;function Xde(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Zde=Xde,Jde=Zde,vA=Math.max;function Qde(e,t,n){return t=vA(t===void 0?e.length-1:t,0),function(){for(var s=arguments,o=-1,r=vA(s.length-t,0),i=Array(r);++o<r;)i[o]=s[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=s[o];return a[t]=n(i),Jde(e,this,a)}}var efe=Qde;function tfe(e){return function(){return e}}var nfe=tfe,sfe=cc,ofe=function(){try{var e=sfe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),vL=ofe,rfe=nfe,bA=vL,ife=mL,afe=bA?function(e,t){return bA(e,"toString",{configurable:!0,enumerable:!1,value:rfe(t),writable:!0})}:ife,lfe=afe,ufe=800,cfe=16,dfe=Date.now;function ffe(e){var t=0,n=0;return function(){var s=dfe(),o=cfe-(s-n);if(n=s,o>0){if(++t>=ufe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var hfe=ffe,pfe=lfe,gfe=hfe,mfe=gfe(pfe),vfe=mfe,bfe=mL,yfe=efe,wfe=vfe;function $fe(e,t){return wfe(yfe(e,t,bfe),e+"")}var Cfe=$fe;function xfe(e,t,n,s){for(var o=e.length,r=n+(s?1:-1);s?r--:++r<o;)if(t(e[r],r,e))return r;return-1}var kfe=xfe;function Sfe(e){return e!==e}var Ife=Sfe;function Tfe(e,t,n){for(var s=n-1,o=e.length;++s<o;)if(e[s]===t)return s;return-1}var Efe=Tfe,_fe=kfe,Nfe=Ife,Afe=Efe;function Dfe(e,t,n){return t===t?Afe(e,t,n):_fe(e,Nfe,n)}var Rfe=Dfe,Ofe=Rfe;function Mfe(e,t){var n=e==null?0:e.length;return!!n&&Ofe(e,t,0)>-1}var Pfe=Mfe;function Ffe(e,t,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(n(t,e[s]))return!0;return!1}var Lfe=Ffe;function Bfe(){}var zfe=Bfe,Aw=JP,Vfe=zfe,Wfe=T2,Hfe=1/0,Ufe=Aw&&1/Wfe(new Aw([,-0]))[1]==Hfe?function(e){return new Aw(e)}:Vfe,jfe=Ufe,Gfe=BP,Kfe=Pfe,qfe=Lfe,Yfe=zP,Xfe=jfe,Zfe=T2,Jfe=200;function Qfe(e,t,n){var s=-1,o=Kfe,r=e.length,i=!0,a=[],l=a;if(n)i=!1,o=qfe;else if(r>=Jfe){var u=t?null:Xfe(e);if(u)return Zfe(u);i=!1,o=Yfe,l=new Gfe}else l=t?[]:a;e:for(;++s<r;){var c=e[s],d=t?t(c):c;if(c=n||c!==0?c:0,i&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),a.push(c)}else o(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}var ehe=Qfe,the=D2,nhe=Tl;function she(e){return nhe(e)&&the(e)}var ohe=she,rhe=qde,ihe=Cfe,ahe=ehe,lhe=ohe,uhe=ihe(function(e){return ahe(rhe(e,1,lhe,!0))}),Dw=uhe;const Bc=(e,t)=>{const n=[];for(let s=e;s<=t;s++)n.push(s);return n},che=ge({components:{TimeSpinner:pL},props:{visible:Boolean,actualVisible:Boolean,parsedValue:{type:[Array]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,t){const{t:n,lang:s}=In(),o=R(()=>e.parsedValue[0]),r=R(()=>e.parsedValue[1]),i=hL(e),a=()=>{t.emit("pick",i.value,null)},l=R(()=>e.format.includes("ss")),u=R(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),c=L([]),d=L([]),f=(X=!1)=>{t.emit("pick",[o.value,r.value],X)},h=X=>{m(X.millisecond(0),r.value)},p=X=>{m(o.value,X.millisecond(0))},g=X=>{const ae=X.map(Le=>Ct(Le).locale(s.value)),Se=T(ae);return ae[0].isSame(Se[0])&&ae[1].isSame(Se[1])},m=(X,ae)=>{t.emit("pick",[X,ae],!0)},v=R(()=>o.value>r.value),b=L([0,2]),$=(X,ae)=>{t.emit("select-range",X,ae,"min"),b.value=[X,ae]},y=R(()=>l.value?11:8),w=(X,ae)=>{t.emit("select-range",X,ae,"max"),b.value=[X+y.value,ae+y.value]},C=X=>{const ae=l.value?[0,3,6,11,14,17]:[0,3,8,11],Se=["hours","minutes"].concat(l.value?["seconds"]:[]),Be=(ae.indexOf(b.value[0])+X+ae.length)%ae.length,Fe=ae.length/2;Be<Fe?U.start_emitSelectRange(Se[Be]):U.end_emitSelectRange(Se[Be-Fe])},x=X=>{const ae=X.code;if(ae===Qe.left||ae===Qe.right){const Se=ae===Qe.left?-1:1;C(Se),X.preventDefault();return}if(ae===Qe.up||ae===Qe.down){const Se=ae===Qe.up?-1:1,Le=b.value[0]<y.value?"start":"end";U[`${Le}_scrollDown`](Se),X.preventDefault();return}},k=(X,ae)=>{const Se=he?he(X):[],Le=X==="start",Fe=(ae||(Le?r.value:o.value)).hour(),j=Le?Bc(Fe+1,23):Bc(0,Fe-1);return Dw(Se,j)},I=(X,ae,Se)=>{const Le=oe?oe(X,ae):[],Be=ae==="start",Fe=Se||(Be?r.value:o.value),j=Fe.hour();if(X!==j)return Le;const Q=Fe.minute(),H=Be?Bc(Q+1,59):Bc(0,Q-1);return Dw(Le,H)},S=(X,ae,Se,Le)=>{const Be=G?G(X,ae,Se):[],Fe=Se==="start",j=Le||(Fe?r.value:o.value),Q=j.hour(),H=j.minute();if(X!==Q||ae!==H)return Be;const se=j.second(),we=Fe?Bc(se+1,59):Bc(0,se-1);return Dw(Be,we)},T=X=>X.map((ae,Se)=>M(X[0],X[1],Se===0?"start":"end")),{getAvailableHours:_,getAvailableMinutes:N,getAvailableSeconds:O}=fL(k,I,S),M=(X,ae,Se)=>{const Le={hour:_,minute:N,second:O},Be=Se==="start";let Fe=Be?X:ae;const j=Be?ae:X;return["hour","minute","second"].forEach(Q=>{if(Le[Q]){let H;const se=Le[Q];if(Q==="minute"?H=se(Fe.hour(),Se,j):Q==="second"?H=se(Fe.hour(),Fe.minute(),Se,j):H=se(Se,j),H&&H.length&&!H.includes(Fe[Q]())){const we=Be?0:H.length-1;Fe=Fe[Q](H[we])}}}),Fe},D=X=>X?Array.isArray(X)?X.map(ae=>Ct(ae,e.format).locale(s.value)):Ct(X,e.format).locale(s.value):null,F=X=>X?Array.isArray(X)?X.map(ae=>ae.format(e.format)):X.format(e.format):null,V=()=>{if(Array.isArray(Y))return Y.map(ae=>Ct(ae).locale(s.value));const X=Ct(Y).locale(s.value);return[X,X.add(60,"m")]};t.emit("set-picker-option",["formatToString",F]),t.emit("set-picker-option",["parseUserInput",D]),t.emit("set-picker-option",["isValidValue",g]),t.emit("set-picker-option",["handleKeydown",x]),t.emit("set-picker-option",["getDefaultValue",V]),t.emit("set-picker-option",["getRangeAvailableTime",T]);const U={},ne=X=>{U[X[0]]=X[1]},be=Ze("EP_PICKER_BASE"),{arrowControl:te,disabledHours:he,disabledMinutes:oe,disabledSeconds:G,defaultValue:Y}=be.props;return{arrowControl:te,onSetOption:ne,setMaxSelectionRange:w,setMinSelectionRange:$,btnConfirmDisabled:v,handleCancel:a,handleConfirm:f,t:n,showSeconds:l,minDate:o,maxDate:r,amPmMode:u,handleMinChange:h,handleMaxChange:p,minSelectableRange:c,maxSelectableRange:d,disabledHours_:k,disabledMinutes_:I,disabledSeconds_:S}}}),dhe={key:0,class:"el-time-range-picker el-picker-panel"},fhe={class:"el-time-range-picker__content"},hhe={class:"el-time-range-picker__cell"},phe={class:"el-time-range-picker__header"},ghe={class:"el-time-range-picker__cell"},mhe={class:"el-time-range-picker__header"},vhe={class:"el-time-panel__footer"},bhe=["disabled"];function yhe(e,t,n,s,o,r){const i=ie("time-spinner");return e.actualVisible?(A(),B("div",dhe,[W("div",fhe,[W("div",hhe,[W("div",phe,Pe(e.t("el.datepicker.startTime")),1),W("div",{class:q([{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl},"el-time-range-picker__body el-time-panel__content"])},[le(i,{ref:"minSpinner",role:"start","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.minDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMinChange,onSetOption:e.onSetOption,onSelectRange:e.setMinSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)]),W("div",ghe,[W("div",mhe,Pe(e.t("el.datepicker.endTime")),1),W("div",{class:q([{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl},"el-time-range-picker__body el-time-panel__content"])},[le(i,{ref:"maxSpinner",role:"end","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.maxDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMaxChange,onSetOption:e.onSetOption,onSelectRange:e.setMaxSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)])]),W("div",vhe,[W("button",{type:"button",class:"el-time-panel__btn cancel",onClick:t[0]||(t[0]=a=>e.handleCancel())},Pe(e.t("el.datepicker.cancel")),1),W("button",{type:"button",class:"el-time-panel__btn confirm",disabled:e.btnConfirmDisabled,onClick:t[1]||(t[1]=a=>e.handleConfirm())},Pe(e.t("el.datepicker.confirm")),9,bhe)])])):ce("v-if",!0)}var whe=We(che,[["render",yhe]]);Ct.extend(Y2);var $he=ge({name:"ElTimePicker",install:null,props:zt(ut({},X2),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(e,t){const n=L(null),s=e.isRange?"timerange":"time",o=e.isRange?whe:Z2,r=zt(ut({},e),{focus:()=>{var i;(i=n.value)==null||i.handleFocus()},blur:()=>{var i;(i=n.value)==null||i.handleBlur()}});return Vt("ElPopperOptions",e.popperOptions),t.expose(r),()=>{var i;const a=(i=e.format)!=null?i:vC;return He(cL,zt(ut({},e),{format:a,type:s,ref:n,"onUpdate:modelValue":l=>t.emit("update:modelValue",l)}),{default:l=>He(o,l)})}}});const ll=e=>Array.from(Array(e).keys()),bL=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),yL=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),Ov=$he;Ov.install=e=>{e.component(Ov.name,Ov)};const Che=Ov,xhe=mt({selectedDay:{type:Je(Object)},range:{type:Je(Array)},date:{type:Je(Object),required:!0},hideHeader:{type:Boolean}}),khe={pick:e=>an(e)};Ct.extend(aL);const Rw=["sun","mon","tue","wed","thu","fri","sat"],She=(e,t)=>{const n=e.subtract(1,"month").endOf("month").date();return ll(t).map((s,o)=>n-(t-o-1))},Ihe=e=>{const t=e.daysInMonth();return ll(t).map((n,s)=>s+1)},The=e=>ll(e.length/7).map(t=>{const n=t*7;return e.slice(n,n+7)}),Ehe=ge({props:xhe,emits:khe,setup(e,{emit:t}){const{t:n,lang:s}=In(),o=At("calendar-table"),r=At("calendar-day"),i=Ct().locale(s.value),a=i.$locale().weekStart||0,l=R(()=>!!e.range&&!!e.range.length),u=R(()=>{let g=[];if(l.value){const[m,v]=e.range,b=ll(v.date()-m.date()+1).map(w=>({text:m.date()+w,type:"current"}));let $=b.length%7;$=$===0?0:7-$;const y=ll($).map((w,C)=>({text:C+1,type:"next"}));g=b.concat(y)}else{const m=e.date.startOf("month").day()||7,v=She(e.date,m-a).map(y=>({text:y,type:"prev"})),b=Ihe(e.date).map(y=>({text:y,type:"current"}));g=[...v,...b];const $=ll(42-g.length).map((y,w)=>({text:w+1,type:"next"}));g=g.concat($)}return The(g)}),c=R(()=>{const g=a;return g===0?Rw.map(m=>n(`el.datepicker.weeks.${m}`)):Rw.slice(g).concat(Rw.slice(0,g)).map(m=>n(`el.datepicker.weeks.${m}`))}),d=(g,m)=>{switch(m){case"prev":return e.date.startOf("month").subtract(1,"month").date(g);case"next":return e.date.startOf("month").add(1,"month").date(g);case"current":return e.date.date(g)}};return{isInRange:l,weekDays:c,rows:u,getCellClass:({text:g,type:m})=>{const v=[m];if(m==="current"){const b=d(g,m);b.isSame(e.selectedDay,"day")&&v.push("is-selected"),b.isSame(i,"day")&&v.push("is-today")}return v},handlePickDay:({text:g,type:m})=>{const v=d(g,m);t("pick",v)},getSlotData:({text:g,type:m})=>{const v=d(g,m);return{isSelected:v.isSame(e.selectedDay),type:`${m}-month`,day:v.format("YYYY-MM-DD"),date:v.toDate()}},nsTable:o,nsDay:r}}}),_he={key:0},Nhe=["onClick"];function Ahe(e,t,n,s,o,r){return A(),B("table",{class:q([e.nsTable.b(),e.nsTable.is("range",e.isInRange)]),cellspacing:"0",cellpadding:"0"},[e.hideHeader?ce("v-if",!0):(A(),B("thead",_he,[(A(!0),B(at,null,Zt(e.weekDays,i=>(A(),B("th",{key:i},Pe(i),1))),128))])),W("tbody",null,[(A(!0),B(at,null,Zt(e.rows,(i,a)=>(A(),B("tr",{key:a,class:q({[e.nsTable.e("row")]:!0,[e.nsTable.em("row","hide-border")]:a===0&&e.hideHeader})},[(A(!0),B(at,null,Zt(i,(l,u)=>(A(),B("td",{key:u,class:q(e.getCellClass(l)),onClick:c=>e.handlePickDay(l)},[W("div",{class:q(e.nsDay.b())},[Re(e.$slots,"dateCell",{data:e.getSlotData(l)},()=>[W("span",null,Pe(l.text),1)])],2)],10,Nhe))),128))],2))),128))])],2)}var Dhe=We(Ehe,[["render",Ahe]]);const Rhe=mt({modelValue:{type:Date},range:{type:Je(Array),validator:e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date)}}),Ohe={[Pt]:e=>e instanceof Date,input:e=>e instanceof Date},Mhe=ge({name:"ElCalendar",components:{DateTable:Dhe,ElButton:ta,ElButtonGroup:oL},props:Rhe,emits:Ohe,setup(e,{emit:t}){const n=At("calendar"),{t:s,lang:o}=In(),r=L(),i=Ct().locale(o.value),a=R(()=>p.value.subtract(1,"month").date(1)),l=R(()=>Ct(p.value).locale(o.value).format("YYYY-MM")),u=R(()=>p.value.add(1,"month").date(1)),c=R(()=>p.value.subtract(1,"year").date(1)),d=R(()=>p.value.add(1,"year").date(1)),f=R(()=>{const $=`el.datepicker.month${p.value.format("M")}`;return`${p.value.year()} ${s("el.datepicker.year")} ${s($)}`}),h=R({get(){return e.modelValue?p.value:r.value},set($){if(!$)return;r.value=$;const y=$.toDate();t("input",y),t("update:modelValue",y)}}),p=R(()=>e.modelValue?Ct(e.modelValue).locale(o.value):h.value?h.value:m.value.length?m.value[0][0]:i),g=($,y)=>{const w=$.startOf("week"),C=y.endOf("week"),x=w.get("month"),k=C.get("month");if(x===k)return[[w,C]];if(x+1===k){const I=w.endOf("month"),S=C.startOf("month"),_=I.isSame(S,"week")?S.add(1,"week"):S;return[[w,I],[_.startOf("week"),C]]}else if(x+2===k){const I=w.endOf("month"),S=w.add(1,"month").startOf("month"),T=I.isSame(S,"week")?S.add(1,"week"):S,_=T.endOf("month"),N=C.startOf("month"),O=_.isSame(N,"week")?N.add(1,"week"):N;return[[w,I],[T.startOf("week"),_],[O.startOf("week"),C]]}else return[]},m=R(()=>{if(!e.range)return[];const $=e.range.map(C=>Ct(C).locale(o.value)),[y,w]=$;return y.isAfter(w)?[]:y.isSame(w,"month")?g(y,w):y.add(1,"month").month()!==w.month()?[]:g(y,w)}),v=$=>{h.value=$};return{selectedDay:r,curMonthDatePrefix:l,i18nDate:f,realSelectedDay:h,date:p,validatedRange:m,pickDay:v,selectDate:$=>{let y;$==="prev-month"?y=a.value:$==="next-month"?y=u.value:$==="prev-year"?y=c.value:$==="next-year"?y=d.value:y=i,!y.isSame(p.value,"day")&&v(y)},t:s,ns:n}}});function Phe(e,t,n,s,o,r){const i=ie("el-button"),a=ie("el-button-group"),l=ie("date-table");return A(),B("div",{class:q(e.ns.b())},[W("div",{class:q(e.ns.e("header"))},[Re(e.$slots,"header",{date:e.i18nDate},()=>[W("div",{class:q(e.ns.e("title"))},Pe(e.i18nDate),3),e.validatedRange.length===0?(A(),B("div",{key:0,class:q(e.ns.e("button-group"))},[le(a,null,{default:re(()=>[le(i,{size:"small",onClick:t[0]||(t[0]=u=>e.selectDate("prev-month"))},{default:re(()=>[qt(Pe(e.t("el.datepicker.prevMonth")),1)]),_:1}),le(i,{size:"small",onClick:t[1]||(t[1]=u=>e.selectDate("today"))},{default:re(()=>[qt(Pe(e.t("el.datepicker.today")),1)]),_:1}),le(i,{size:"small",onClick:t[2]||(t[2]=u=>e.selectDate("next-month"))},{default:re(()=>[qt(Pe(e.t("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):ce("v-if",!0)])],2),e.validatedRange.length===0?(A(),B("div",{key:0,class:q(e.ns.e("body"))},[le(l,{date:e.date,"selected-day":e.realSelectedDay,onPick:e.pickDay},jh({_:2},[e.$slots.dateCell?{name:"dateCell",fn:re(u=>[Re(e.$slots,"dateCell",zu(Vu(u)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(A(),B("div",{key:1,class:q(e.ns.e("body"))},[(A(!0),B(at,null,Zt(e.validatedRange,(u,c)=>(A(),ve(l,{key:c,date:u[0],"selected-day":e.realSelectedDay,range:u,"hide-header":c!==0,onPick:e.pickDay},jh({_:2},[e.$slots.dateCell?{name:"dateCell",fn:re(d=>[Re(e.$slots,"dateCell",zu(Vu(d)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2)}var Fhe=We(Mhe,[["render",Phe]]);const Lhe=Wt(Fhe),Bhe=mt({header:{type:String,default:""},bodyStyle:{type:Je([String,Object,Array]),default:""},shadow:{type:String,default:"always"}}),zhe=ge({name:"ElCard",props:Bhe,setup(){return{ns:At("card")}}});function Vhe(e,t,n,s,o,r){return A(),B("div",{class:q([e.ns.b(),e.ns.is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?(A(),B("div",{key:0,class:q(e.ns.e("header"))},[Re(e.$slots,"header",{},()=>[qt(Pe(e.header),1)])],2)):ce("v-if",!0),W("div",{class:q(e.ns.e("body")),style:nt(e.bodyStyle)},[Re(e.$slots,"default")],6)],2)}var Whe=We(zhe,[["render",Vhe]]);const Hhe=Wt(Whe);var Uhe=tr,jhe=Sl,Ghe="Expected a function";function Khe(e,t,n){var s=!0,o=!0;if(typeof e!="function")throw new TypeError(Ghe);return jhe(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),Uhe(e,t,{leading:s,maxWait:t,trailing:o})}var yb=Khe;const qhe=ge({name:"ElCarousel",components:{ElIcon:Ot,ArrowLeft:fc,ArrowRight:Qr},props:{initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:{type:String,default:""},loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator(e){return["horizontal","vertical"].includes(e)}},pauseOnHover:{type:Boolean,default:!0}},emits:["change"],setup(e,{emit:t}){const n=At("carousel"),s=Sn({activeIndex:-1,containerWidth:0,timer:null,hover:!1}),o=L(null),r=L([]),i=R(()=>e.arrow!=="never"&&e.direction!=="vertical"),a=R(()=>r.value.some(_=>_.label.toString().length>0)),l=R(()=>{const _=[n.b(),n.m(e.direction)];return e.type==="card"&&_.push(n.m("card")),_}),u=R(()=>{const _=[n.e("indicators"),n.em("indicators",e.direction)];return a.value&&_.push(n.em("indicators","labels")),(e.indicatorPosition==="outside"||e.type==="card")&&_.push(n.em("indicators","outside")),_}),c=yb(_=>{g(_)},300,{trailing:!0}),d=yb(_=>{I(_)},300);function f(){s.timer&&(clearInterval(s.timer),s.timer=null)}function h(){e.interval<=0||!e.autoplay||s.timer||(s.timer=setInterval(()=>p(),e.interval))}const p=()=>{s.activeIndex<r.value.length-1?s.activeIndex=s.activeIndex+1:e.loop&&(s.activeIndex=0)};function g(_){if(typeof _=="string"){const M=r.value.filter(D=>D.name===_);M.length>0&&(_=r.value.indexOf(M[0]))}if(_=Number(_),isNaN(_)||_!==Math.floor(_))return;const N=r.value.length,O=s.activeIndex;_<0?s.activeIndex=e.loop?N-1:0:_>=N?s.activeIndex=e.loop?0:N-1:s.activeIndex=_,O===s.activeIndex&&m(O)}function m(_){r.value.forEach((N,O)=>{N.translateItem(O,s.activeIndex,_)})}function v(_){r.value.push(_)}function b(_){const N=r.value.findIndex(O=>O.uid===_);N!==-1&&(r.value.splice(N,1),s.activeIndex===N&&T())}function $(_,N){const O=r.value.length;return N===O-1&&_.inStage&&r.value[0].active||_.inStage&&r.value[N+1]&&r.value[N+1].active?"left":N===0&&_.inStage&&r.value[O-1].active||_.inStage&&r.value[N-1]&&r.value[N-1].active?"right":!1}function y(){s.hover=!0,e.pauseOnHover&&f()}function w(){s.hover=!1,h()}function C(_){e.direction!=="vertical"&&r.value.forEach((N,O)=>{_===$(N,O)&&(N.hover=!0)})}function x(){e.direction!=="vertical"&&r.value.forEach(_=>{_.hover=!1})}function k(_){s.activeIndex=_}function I(_){e.trigger==="hover"&&_!==s.activeIndex&&(s.activeIndex=_)}function S(){g(s.activeIndex-1)}function T(){g(s.activeIndex+1)}return Oe(()=>s.activeIndex,(_,N)=>{m(N),N>-1&&t("change",_,N)}),Oe(()=>e.autoplay,_=>{_?h():f()}),Oe(()=>e.loop,()=>{g(s.activeIndex)}),Rt(()=>{dt(()=>{_l(o.value,m),e.initialIndex<r.value.length&&e.initialIndex>=0&&(s.activeIndex=e.initialIndex),h()})}),ls(()=>{o.value&&Nl(o.value,m),f()}),Vt("injectCarouselScope",{root:o,direction:e.direction,type:e.type,items:r,loop:e.loop,addItem:v,removeItem:b,setActiveItem:g}),{data:s,props:e,items:r,arrowDisplay:i,carouselClasses:l,indicatorsClasses:u,hasLabel:a,handleMouseEnter:y,handleMouseLeave:w,handleIndicatorClick:k,throttledArrowClick:c,throttledIndicatorHover:d,handleButtonEnter:C,handleButtonLeave:x,prev:S,next:T,setActiveItem:g,root:o,ns:n}}}),Yhe=["onMouseenter","onClick"],Xhe={key:0};function Zhe(e,t,n,s,o,r){const i=ie("arrow-left"),a=ie("el-icon"),l=ie("arrow-right");return A(),B("div",{ref:"root",class:q(e.carouselClasses),onMouseenter:t[6]||(t[6]=ht((...u)=>e.handleMouseEnter&&e.handleMouseEnter(...u),["stop"])),onMouseleave:t[7]||(t[7]=ht((...u)=>e.handleMouseLeave&&e.handleMouseLeave(...u),["stop"]))},[W("div",{class:q(e.ns.e("container")),style:nt({height:e.height})},[e.arrowDisplay?(A(),ve(xs,{key:0,name:"carousel-arrow-left"},{default:re(()=>[$t(W("button",{type:"button",class:q([e.ns.e("arrow"),e.ns.em("arrow","left")]),onMouseenter:t[0]||(t[0]=u=>e.handleButtonEnter("left")),onMouseleave:t[1]||(t[1]=(...u)=>e.handleButtonLeave&&e.handleButtonLeave(...u)),onClick:t[2]||(t[2]=ht(u=>e.throttledArrowClick(e.data.activeIndex-1),["stop"]))},[le(a,null,{default:re(()=>[le(i)]),_:1})],34),[[en,(e.arrow==="always"||e.data.hover)&&(e.props.loop||e.data.activeIndex>0)]])]),_:1})):ce("v-if",!0),e.arrowDisplay?(A(),ve(xs,{key:1,name:"carousel-arrow-right"},{default:re(()=>[$t(W("button",{type:"button",class:q([e.ns.e("arrow"),e.ns.em("arrow","right")]),onMouseenter:t[3]||(t[3]=u=>e.handleButtonEnter("right")),onMouseleave:t[4]||(t[4]=(...u)=>e.handleButtonLeave&&e.handleButtonLeave(...u)),onClick:t[5]||(t[5]=ht(u=>e.throttledArrowClick(e.data.activeIndex+1),["stop"]))},[le(a,null,{default:re(()=>[le(l)]),_:1})],34),[[en,(e.arrow==="always"||e.data.hover)&&(e.props.loop||e.data.activeIndex<e.items.length-1)]])]),_:1})):ce("v-if",!0),Re(e.$slots,"default")],6),e.indicatorPosition!=="none"?(A(),B("ul",{key:0,class:q(e.indicatorsClasses)},[(A(!0),B(at,null,Zt(e.items,(u,c)=>(A(),B("li",{key:c,class:q([e.ns.e("indicator"),e.ns.em("indicator",e.direction),e.ns.is("active",c===e.data.activeIndex)]),onMouseenter:d=>e.throttledIndicatorHover(c),onClick:ht(d=>e.handleIndicatorClick(c),["stop"])},[W("button",{class:q(e.ns.e("button"))},[e.hasLabel?(A(),B("span",Xhe,Pe(u.label),1)):ce("v-if",!0)],2)],42,Yhe))),128))],2)):ce("v-if",!0)],34)}var Jhe=We(qhe,[["render",Zhe]]);const Hm=.83,Qhe=ge({name:"ElCarouselItem",props:{name:{type:String,default:""},label:{type:[String,Number],default:""}},setup(e){const t=At("carousel"),n=Lt(),s=Sn({hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}),o=Ze("injectCarouselScope"),r=R(()=>o.direction),i=R(()=>{const p={transform:`${r.value==="vertical"?"translateY":"translateX"}(${s.translate}px) scale(${s.scale})`};return Vte(p)});function a(f,h,p){return h===0&&f===p-1?-1:h===p-1&&f===0?p:f<h-1&&h-f>=p/2?p+1:f>h+1&&f-h>=p/2?-2:f}function l(f,h){var p;const g=((p=o.root.value)==null?void 0:p.offsetWidth)||0;return s.inStage?g*((2-Hm)*(f-h)+1)/4:f<h?-(1+Hm)*g/4:(3+Hm)*g/4}function u(f,h,p){var g,m;return((p?(g=o.root.value)==null?void 0:g.offsetHeight:(m=o.root.value)==null?void 0:m.offsetWidth)||0)*(f-h)}const c=(f,h,p)=>{const g=o.type,m=o.items.value.length;if(g!=="card"&&p!==void 0&&(s.animating=f===h||f===p),f!==h&&m>2&&o.loop&&(f=a(f,h,m)),g==="card")r.value==="vertical",s.inStage=Math.round(Math.abs(f-h))<=1,s.active=f===h,s.translate=l(f,h),s.scale=s.active?1:Hm;else{s.active=f===h;const v=r.value==="vertical";s.translate=u(f,h,v)}s.ready=!0};function d(){if(o&&o.type==="card"){const f=o.items.value.map(h=>h.uid).indexOf(n.uid);o.setActiveItem(f)}}return Rt(()=>{o.addItem&&o.addItem(zt(ut(ut({uid:n.uid},e),xo(s)),{translateItem:c}))}),Dp(()=>{o.removeItem&&o.removeItem(n.uid)}),{data:s,itemStyle:i,translateItem:c,type:o.type,handleItemClick:d,ns:t}}});function epe(e,t,n,s,o,r){return $t((A(),B("div",{class:q([e.ns.e("item"),e.ns.is("active",e.data.active),e.ns.is("in-stage",e.data.inStage),e.ns.is("hover",e.data.hover),e.ns.is("animating",e.data.animating),{[e.ns.em("item","card")]:e.type==="card"}]),style:nt(e.itemStyle),onClick:t[0]||(t[0]=(...i)=>e.handleItemClick&&e.handleItemClick(...i))},[e.type==="card"?$t((A(),B("div",{key:0,class:q(e.ns.e("mask"))},null,2)),[[en,!e.data.active]]):ce("v-if",!0),Re(e.$slots,"default")],6)),[[en,e.data.ready]])}var wL=We(Qhe,[["render",epe]]);const tpe=Wt(Jhe,{CarouselItem:wL}),npe=us(wL);function $L(e,t){if(!Yt)return;if(!t){e.scrollTop=0;return}const n=[];let s=t.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)n.push(s),s=s.offsetParent;const o=t.offsetTop+n.reduce((l,u)=>l+u.offsetTop,0),r=o+t.offsetHeight,i=e.scrollTop,a=i+e.clientHeight;o<i?e.scrollTop=o:r>a&&(e.scrollTop=r-e.clientHeight)}const spe={modelValue:{type:[Boolean,Number,String],default:()=>{}},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},tabindex:[String,Number],size:String},lf=()=>{const e=Ze(ir,{}),t=Ze(Ni,{}),n=Ze("CheckboxGroup",{}),s=R(()=>n&&(n==null?void 0:n.name)==="ElCheckboxGroup"),o=R(()=>t.size);return{isGroup:s,checkboxGroup:n,elForm:e,elFormItemSize:o,elFormItem:t}},ope=e=>{const t=L(!1),{emit:n}=Lt(),{isGroup:s,checkboxGroup:o}=lf(),r=L(!1);return{model:R({get(){var a,l;return s.value?(a=o.modelValue)==null?void 0:a.value:(l=e.modelValue)!=null?l:t.value},set(a){var l;s.value&&Array.isArray(a)?(r.value=o.max!==void 0&&a.length>o.max.value,r.value===!1&&((l=o==null?void 0:o.changeEvent)==null||l.call(o,a))):(n(Pt,a),t.value=a)}}),isLimitExceeded:r}},rpe=(e,{model:t})=>{const{isGroup:n,checkboxGroup:s}=lf(),o=L(!1),r=ks(s==null?void 0:s.checkboxGroupSize,{prop:!0}),i=R(()=>{const l=t.value;return _p(l)==="[object Boolean]"?l:Array.isArray(l)?l.includes(e.label):l!=null?l===e.trueLabel:!!l}),a=ks(R(()=>{var l;return n.value?(l=s==null?void 0:s.checkboxGroupSize)==null?void 0:l.value:void 0}));return{isChecked:i,focus:o,size:r,checkboxSize:a}},ipe=(e,{model:t,isChecked:n})=>{const{elForm:s,isGroup:o,checkboxGroup:r}=lf(),i=R(()=>{var l,u;const c=(l=r.max)==null?void 0:l.value,d=(u=r.min)==null?void 0:u.value;return!!(c||d)&&t.value.length>=c&&!n.value||t.value.length<=d&&n.value});return{isDisabled:R(()=>{var l,u;const c=e.disabled||s.disabled;return(u=o.value?((l=r.disabled)==null?void 0:l.value)||c||i.value:e.disabled||s.disabled)!=null?u:!1}),isLimitDisabled:i}},ape=(e,{model:t})=>{function n(){Array.isArray(t.value)&&!t.value.includes(e.label)?t.value.push(e.label):t.value=e.trueLabel||!0}e.checked&&n()},lpe=(e,{isLimitExceeded:t})=>{const{elFormItem:n}=lf(),{emit:s}=Lt();function o(r){var i,a;if(t.value)return;const u=r.target.checked?(i=e.trueLabel)!=null?i:!0:(a=e.falseLabel)!=null?a:!1;s("change",u,r)}return Oe(()=>e.modelValue,()=>{var r;(r=n.validate)==null||r.call(n,"change")}),{handleChange:o}},CL=e=>{const{model:t,isLimitExceeded:n}=ope(e),{focus:s,size:o,isChecked:r,checkboxSize:i}=rpe(e,{model:t}),{isDisabled:a}=ipe(e,{model:t,isChecked:r}),{handleChange:l}=lpe(e,{isLimitExceeded:n});return ape(e,{model:t}),{isChecked:r,isDisabled:a,checkboxSize:i,model:t,handleChange:l,focus:s,size:o}},upe=ge({name:"ElCheckbox",props:{modelValue:{type:[Boolean,Number,String],default:()=>{}},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:{type:String,validator:nr},tabindex:[String,Number]},emits:[Pt,"change"],setup(e){const t=At("checkbox");return ut({ns:t},CL(e))}}),cpe=["id","aria-controls"],dpe=["tabindex","role","aria-checked"],fpe=["aria-hidden","name","tabindex","disabled","true-value","false-value"],hpe=["aria-hidden","disabled","value","name","tabindex"];function ppe(e,t,n,s,o,r){return A(),B("label",{id:e.id,class:q([e.ns.b(),e.ns.m(e.checkboxSize),e.ns.is("disabled",e.isDisabled),e.ns.is("bordered",e.border),e.ns.is("checked",e.isChecked)]),"aria-controls":e.indeterminate?e.controls:null},[W("span",{class:q([e.ns.e("input"),e.ns.is("disabled",e.isDisabled),e.ns.is("checked",e.isChecked),e.ns.is("indeterminate",e.indeterminate),e.ns.is("focus",e.focus)]),tabindex:e.indeterminate?0:void 0,role:e.indeterminate?"checkbox":void 0,"aria-checked":e.indeterminate?"mixed":!1},[W("span",{class:q(e.ns.e("inner"))},null,2),e.trueLabel||e.falseLabel?$t((A(),B("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=i=>e.model=i),class:q(e.ns.e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[2]||(t[2]=i=>e.focus=!0),onBlur:t[3]||(t[3]=i=>e.focus=!1)},null,42,fpe)),[[gb,e.model]]):$t((A(),B("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=i=>e.model=i),class:q(e.ns.e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,value:e.label,name:e.name,tabindex:e.tabindex,onChange:t[5]||(t[5]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[6]||(t[6]=i=>e.focus=!0),onBlur:t[7]||(t[7]=i=>e.focus=!1)},null,42,hpe)),[[gb,e.model]])],10,dpe),e.$slots.default||e.label?(A(),B("span",{key:0,class:q(e.ns.e("label"))},[Re(e.$slots,"default"),e.$slots.default?ce("v-if",!0):(A(),B(at,{key:0},[qt(Pe(e.label),1)],2112))],2)):ce("v-if",!0)],10,cpe)}var gpe=We(upe,[["render",ppe]]);const mpe=ge({name:"ElCheckboxButton",props:spe,emits:[Pt,"change"],setup(e){const{focus:t,isChecked:n,isDisabled:s,size:o,model:r,handleChange:i}=CL(e),{checkboxGroup:a}=lf(),l=At("checkbox"),u=R(()=>{var c,d,f,h;const p=(d=(c=a==null?void 0:a.fill)==null?void 0:c.value)!=null?d:"";return{backgroundColor:p,borderColor:p,color:(h=(f=a==null?void 0:a.textColor)==null?void 0:f.value)!=null?h:"",boxShadow:p?`-1px 0 0 0 ${p}`:null}});return{focus:t,isChecked:n,isDisabled:s,model:r,handleChange:i,activeStyle:u,size:o,ns:l}}}),vpe=["aria-checked","aria-disabled"],bpe=["name","tabindex","disabled","true-value","false-value"],ype=["name","tabindex","disabled","value"];function wpe(e,t,n,s,o,r){return A(),B("label",{class:q([e.ns.b("button"),e.ns.bm("button",e.size),e.ns.is("disabled",e.isDisabled),e.ns.is("checked",e.isChecked),e.ns.is("focus",e.focus)]),role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled},[e.trueLabel||e.falseLabel?$t((A(),B("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=i=>e.model=i),class:q(e.ns.be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[2]||(t[2]=i=>e.focus=!0),onBlur:t[3]||(t[3]=i=>e.focus=!1)},null,42,bpe)),[[gb,e.model]]):$t((A(),B("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=i=>e.model=i),class:q(e.ns.be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,value:e.label,onChange:t[5]||(t[5]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[6]||(t[6]=i=>e.focus=!0),onBlur:t[7]||(t[7]=i=>e.focus=!1)},null,42,ype)),[[gb,e.model]]),e.$slots.default||e.label?(A(),B("span",{key:2,class:q(e.ns.be("button","inner")),style:nt(e.isChecked?e.activeStyle:null)},[Re(e.$slots,"default",{},()=>[qt(Pe(e.label),1)])],6)):ce("v-if",!0)],10,vpe)}var xL=We(mpe,[["render",wpe]]);const kL=ge({name:"ElCheckboxGroup",props:{modelValue:{type:Array,default:()=>[]},disabled:Boolean,min:{type:Number,default:void 0},max:{type:Number,default:void 0},size:{type:String,validator:nr},fill:{type:String,default:void 0},textColor:{type:String,default:void 0},tag:{type:String,default:"div"}},emits:[Pt,"change"],setup(e,{emit:t,slots:n}){const{elFormItem:s}=lf(),o=ks(),r=At("checkbox"),i=l=>{t(Pt,l),dt(()=>{t("change",l)})},a=R({get(){return e.modelValue},set(l){i(l)}});return Vt("CheckboxGroup",zt(ut({name:"ElCheckboxGroup",modelValue:a},xo(e)),{checkboxGroupSize:o,changeEvent:i})),Oe(()=>e.modelValue,()=>{var l;(l=s.validate)==null||l.call(s,"change")}),()=>He(e.tag,{class:r.b("group"),role:"group","aria-label":"checkbox-group"},[Re(n,"default")])}}),ki=Wt(gpe,{CheckboxButton:xL,CheckboxGroup:kL}),$pe=us(xL),SL=us(kL),IL=mt({size:I0,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),Cpe=mt(zt(ut({},IL),{modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean})),TL={[Pt]:e=>Xt(e)||xn(e)||vi(e),change:e=>Xt(e)||xn(e)||vi(e)},EL=(e,t)=>{const n=L(),s=Ze(AP,void 0),o=R(()=>!!s),r=R({get(){return o.value?s.modelValue:e.modelValue},set(c){o.value?s.changeEvent(c):t(Pt,c),n.value.checked=e.modelValue===e.label}}),i=ks(R(()=>s==null?void 0:s.size)),a=Pp(R(()=>s==null?void 0:s.disabled)),l=L(!1),u=R(()=>a.value||o.value&&r.value!==e.label?-1:0);return{radioRef:n,isGroup:o,radioGroup:s,focus:l,size:i,disabled:a,tabIndex:u,modelValue:r}},xpe=ge({name:"ElRadio",props:Cpe,emits:TL,setup(e,{emit:t}){const{radioRef:n,isGroup:s,focus:o,size:r,disabled:i,tabIndex:a,modelValue:l}=EL(e,t);function u(){dt(()=>t("change",l.value))}return{focus:o,isGroup:s,modelValue:l,tabIndex:a,size:r,disabled:i,radioRef:n,handleChange:u}}}),kpe=["aria-checked","aria-disabled","tabindex"],Spe=W("span",{class:"el-radio__inner"},null,-1),Ipe=["value","name","disabled"];function Tpe(e,t,n,s,o,r){return A(),B("label",{class:q(["el-radio",{[`el-radio--${e.size||""}`]:e.size,"is-disabled":e.disabled,"is-focus":e.focus,"is-bordered":e.border,"is-checked":e.modelValue===e.label}]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[5]||(t[5]=Ut(ht(i=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[W("span",{class:q(["el-radio__input",{"is-disabled":e.disabled,"is-checked":e.modelValue===e.label}])},[Spe,$t(W("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=i=>e.modelValue=i),class:"el-radio__original",value:e.label,type:"radio","aria-hidden":"true",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=i=>e.focus=!0),onBlur:t[2]||(t[2]=i=>e.focus=!1),onChange:t[3]||(t[3]=(...i)=>e.handleChange&&e.handleChange(...i))},null,40,Ipe),[[CP,e.modelValue]])],2),W("span",{class:"el-radio__label",onKeydown:t[4]||(t[4]=ht(()=>{},["stop"]))},[Re(e.$slots,"default",{},()=>[qt(Pe(e.label),1)])],32)],42,kpe)}var Epe=We(xpe,[["render",Tpe]]);const _pe=mt(zt(ut({},IL),{name:{type:String,default:""}})),Npe=ge({name:"ElRadioButton",props:_pe,setup(e,{emit:t}){const{radioRef:n,isGroup:s,focus:o,size:r,disabled:i,tabIndex:a,modelValue:l,radioGroup:u}=EL(e,t),c=R(()=>({backgroundColor:(u==null?void 0:u.fill)||"",borderColor:(u==null?void 0:u.fill)||"",boxShadow:(u==null?void 0:u.fill)?`-1px 0 0 0 ${u.fill}`:"",color:(u==null?void 0:u.textColor)||""}));return{isGroup:s,size:r,disabled:i,tabIndex:a,modelValue:l,focus:o,activeStyle:c,radioRef:n}}}),Ape=["aria-checked","aria-disabled","tabindex"],Dpe=["value","name","disabled"];function Rpe(e,t,n,s,o,r){return A(),B("label",{class:q(["el-radio-button",[e.size?"el-radio-button--"+e.size:"",{"is-active":e.modelValue===e.label,"is-disabled":e.disabled,"is-focus":e.focus}]]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[4]||(t[4]=Ut(ht(i=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[$t(W("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=i=>e.modelValue=i),class:"el-radio-button__original-radio",value:e.label,type:"radio",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=i=>e.focus=!0),onBlur:t[2]||(t[2]=i=>e.focus=!1)},null,40,Dpe),[[CP,e.modelValue]]),W("span",{class:"el-radio-button__inner",style:nt(e.modelValue===e.label?e.activeStyle:{}),onKeydown:t[3]||(t[3]=ht(()=>{},["stop"]))},[Re(e.$slots,"default",{},()=>[qt(Pe(e.label),1)])],36)],42,Ape)}var _L=We(Npe,[["render",Rpe]]);const Ope=mt({size:I0,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},textColor:{type:String,default:""}}),Mpe=TL,Ppe=ge({name:"ElRadioGroup",props:Ope,emits:Mpe,setup(e,t){const n=L(),{formItem:s}=af(),o=i=>{t.emit(Pt,i),dt(()=>t.emit("change",i))},r=i=>{if(!n.value)return;const a=i.target,l=a.nodeName==="INPUT"?"[type=radio]":"[role=radio]",u=n.value.querySelectorAll(l),c=u.length,d=Array.from(u).indexOf(a),f=n.value.querySelectorAll("[role=radio]");let h=null;switch(i.code){case Qe.left:case Qe.up:i.stopPropagation(),i.preventDefault(),h=d===0?c-1:d-1;break;case Qe.right:case Qe.down:i.stopPropagation(),i.preventDefault(),h=d===c-1?0:d+1;break}h!==null&&(f[h].click(),f[h].focus())};return Rt(()=>{const i=n.value.querySelectorAll("[type=radio]"),a=i[0];!Array.from(i).some(l=>l.checked)&&a&&(a.tabIndex=0)}),Vt(AP,Sn(zt(ut({},xo(e)),{changeEvent:o}))),Oe(()=>e.modelValue,()=>s==null?void 0:s.validate("change")),{radioGroupRef:n,handleKeydown:r}}});function Fpe(e,t,n,s,o,r){return A(),B("div",{ref:"radioGroupRef",class:"el-radio-group",role:"radiogroup",onKeydown:t[0]||(t[0]=(...i)=>e.handleKeydown&&e.handleKeydown(...i))},[Re(e.$slots,"default")],544)}var NL=We(Ppe,[["render",Fpe]]);const AL=Wt(Epe,{RadioButton:_L,RadioGroup:NL}),Lpe=us(NL),Bpe=us(_L);var zpe=ge({name:"NodeContent",render(){const{node:e,panel:t}=this.$parent,{data:n,label:s}=e,{renderLabelFn:o}=t;return He("span",{class:"el-cascader-node__label"},o?o({node:e,data:n}):s)}});const J2=Symbol(),Vpe=ge({name:"ElCascaderNode",components:{ElCheckbox:ki,ElRadio:AL,NodeContent:zpe,ElIcon:Ot,Check:Cd,Loading:Ra,ArrowRight:Qr},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=Ze(J2),s=R(()=>n.isHoverMenu),o=R(()=>n.config.multiple),r=R(()=>n.config.checkStrictly),i=R(()=>{var w;return(w=n.checkedNodes[0])==null?void 0:w.uid}),a=R(()=>e.node.isDisabled),l=R(()=>e.node.isLeaf),u=R(()=>r.value&&!l.value||!a.value),c=R(()=>f(n.expandingNode)),d=R(()=>r.value&&n.checkedNodes.some(f)),f=w=>{var C;const{level:x,uid:k}=e.node;return((C=w==null?void 0:w.pathNodes[x-1])==null?void 0:C.uid)===k},h=()=>{c.value||n.expandNode(e.node)},p=w=>{const{node:C}=e;w!==C.checked&&n.handleCheckChange(C,w)},g=()=>{n.lazyLoad(e.node,()=>{l.value||h()})},m=w=>{!s.value||(v(),!l.value&&t("expand",w))},v=()=>{const{node:w}=e;!u.value||w.loading||(w.loaded?h():g())},b=()=>{s.value&&!l.value||(l.value&&!a.value&&!r.value&&!o.value?y(!0):v())},$=w=>{r.value?(p(w),e.node.loaded&&h()):y(w)},y=w=>{e.node.loaded?(p(w),!r.value&&h()):g()};return{panel:n,isHoverMenu:s,multiple:o,checkStrictly:r,checkedNodeId:i,isDisabled:a,isLeaf:l,expandable:u,inExpandingPath:c,inCheckedPath:d,handleHoverExpand:m,handleExpand:v,handleClick:b,handleCheck:y,handleSelectCheck:$}}}),Wpe=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Hpe=W("span",null,null,-1);function Upe(e,t,n,s,o,r){const i=ie("el-checkbox"),a=ie("el-radio"),l=ie("check"),u=ie("el-icon"),c=ie("node-content"),d=ie("loading"),f=ie("arrow-right");return A(),B("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:q(["el-cascader-node",e.checkStrictly&&"is-selectable",e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path",e.node.checked&&"is-active",!e.expandable&&"is-disabled"]),onMouseenter:t[2]||(t[2]=(...h)=>e.handleHoverExpand&&e.handleHoverExpand(...h)),onFocus:t[3]||(t[3]=(...h)=>e.handleHoverExpand&&e.handleHoverExpand(...h)),onClick:t[4]||(t[4]=(...h)=>e.handleClick&&e.handleClick(...h))},[ce(" prefix "),e.multiple?(A(),ve(i,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ht(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(A(),ve(a,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ht(()=>{},["stop"]))},{default:re(()=>[ce(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Hpe]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(A(),ve(u,{key:2,class:"el-cascader-node__prefix"},{default:re(()=>[le(l)]),_:1})):ce("v-if",!0),ce(" content "),le(c),ce(" postfix "),e.isLeaf?ce("v-if",!0):(A(),B(at,{key:3},[e.node.loading?(A(),ve(u,{key:0,class:"is-loading el-cascader-node__postfix"},{default:re(()=>[le(d)]),_:1})):(A(),ve(u,{key:1,class:"arrow-right el-cascader-node__postfix"},{default:re(()=>[le(f)]),_:1}))],2112))],42,Wpe)}var jpe=We(Vpe,[["render",Upe]]);const Gpe=ge({name:"ElCascaderMenu",components:{Loading:Ra,ElIcon:Ot,ElScrollbar:Oa,ElCascaderNode:jpe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Lt(),{t:n}=In(),s=Xh();let o=null,r=null;const i=Ze(J2),a=L(null),l=R(()=>!e.nodes.length),u=R(()=>!i.initialLoaded),c=R(()=>`cascader-menu-${s}-${e.index}`),d=g=>{o=g.target},f=g=>{if(!(!i.isHoverMenu||!o||!a.value))if(o.contains(g.target)){h();const m=t.vnode.el,{left:v}=m.getBoundingClientRect(),{offsetWidth:b,offsetHeight:$}=m,y=g.clientX-v,w=o.offsetTop,C=w+o.offsetHeight;a.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${y} ${w} L${b} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${y} ${C} L${b} ${$} V${C} Z" />
        `}else r||(r=window.setTimeout(p,i.config.hoverThreshold))},h=()=>{!r||(clearTimeout(r),r=null)},p=()=>{!a.value||(a.value.innerHTML="",h())};return{panel:i,hoverZone:a,isEmpty:l,isLoading:u,menuId:c,t:n,handleExpand:d,handleMouseMove:f,clearHoverZone:p}}}),Kpe={key:0,class:"el-cascader-menu__empty-text"},qpe={key:1,class:"el-cascader-menu__empty-text"},Ype={key:2,ref:"hoverZone",class:"el-cascader-menu__hover-zone"};function Xpe(e,t,n,s,o,r){const i=ie("el-cascader-node"),a=ie("loading"),l=ie("el-icon"),u=ie("el-scrollbar");return A(),ve(u,{key:e.menuId,tag:"ul",role:"menu",class:"el-cascader-menu","wrap-class":"el-cascader-menu__wrap","view-class":["el-cascader-menu__list",e.isEmpty&&"is-empty"],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:re(()=>{var c;return[(A(!0),B(at,null,Zt(e.nodes,d=>(A(),ve(i,{key:d.uid,node:d,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(A(),B("div",Kpe,[le(l,{size:"14",class:"is-loading"},{default:re(()=>[le(a)]),_:1}),qt(" "+Pe(e.t("el.cascader.loading")),1)])):e.isEmpty?(A(),B("div",qpe,Pe(e.t("el.cascader.noData")),1)):((c=e.panel)==null?void 0:c.isHoverMenu)?(A(),B("svg",Ype,null,512)):ce("v-if",!0)]}),_:1},8,["view-class","onMousemove","onMouseleave"])}var Zpe=We(Gpe,[["render",Xpe]]),Q2=(e=>(e.CLICK="click",e.HOVER="hover",e))(Q2||{});let Jpe=0;const Qpe=e=>{const t=[e];let{parent:n}=e;for(;n;)t.unshift(n),n=n.parent;return t};class Ed{constructor(t,n,s,o=!1){this.data=t,this.config=n,this.parent=s,this.root=o,this.uid=Jpe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:r,label:i,children:a}=n,l=t[a],u=Qpe(this);this.level=o?0:s?s.level+1:1,this.value=t[r],this.label=t[i],this.pathNodes=u,this.pathValues=u.map(c=>c.value),this.pathLabels=u.map(c=>c.label),this.childrenData=l,this.children=(l||[]).map(c=>new Ed(c,n,this)),this.loaded=!n.lazy||this.isLeaf||!Jh(l)}get isDisabled(){const{data:t,parent:n,config:s}=this,{disabled:o,checkStrictly:r}=s;return(Ft(o)?o(t,this):!!t[o])||!r&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:t,config:n,childrenData:s,loaded:o}=this,{lazy:r,leaf:i}=n,a=Ft(i)?i(t,this):t[i];return Zh(a)?r&&!o?!1:!(Array.isArray(s)&&s.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:n,children:s}=this,o=new Ed(t,this.config,this);return Array.isArray(n)?n.push(t):this.childrenData=[t],s.push(o),o}calcText(t,n){const s=t?this.pathLabels.join(n):this.label;return this.text=s,s}broadcast(t,...n){const s=`onParent${gr(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...n),o[s]&&o[s](...n))})}emit(t,...n){const{parent:s}=this,o=`onChild${gr(t)}`;s&&(s[o]&&s[o](...n),s.emit(t,...n))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,n=t.filter(o=>!o.isDisabled),s=n.length?n.every(o=>o.checked):!1;this.setCheckState(s)}setCheckState(t){const n=this.children.length,s=this.children.reduce((o,r)=>{const i=r.checked?1:r.indeterminate?.5:0;return o+i},0);this.checked=this.loaded&&this.children.every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&s!==n&&s>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:n,multiple:s}=this.config;n||!s?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const bC=(e,t)=>e.reduce((n,s)=>(s.isLeaf?n.push(s):(!t&&n.push(s),n=n.concat(bC(s.children,t))),n),[]);class yA{constructor(t,n){this.config=n;const s=(t||[]).map(o=>new Ed(o,this.config));this.nodes=s,this.allNodes=bC(s,!1),this.leafNodes=bC(s,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,n){const s=n?n.appendChild(t):new Ed(t,this.config);n||this.nodes.push(s),this.allNodes.push(s),s.isLeaf&&this.leafNodes.push(s)}appendNodes(t,n){t.forEach(s=>this.appendNode(s,n))}getNodeByValue(t,n=!1){return!t&&t!==0?null:this.getFlattedNodes(n).filter(o=>yi(o.value,t)||yi(o.pathValues,t))[0]||null}getSameNode(t){return t&&this.getFlattedNodes(!1).filter(({value:s,level:o})=>yi(t.value,s)&&t.level===o)[0]||null}}const DL={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},ege={expandTrigger:Q2.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:rn,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},tge=e=>R(()=>ut(ut({},ege),e.props)),wA=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},nge=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():dF(e)&&e.click()},sge=(e,t)=>{const n=t.slice(0),s=n.map(r=>r.uid),o=e.reduce((r,i)=>{const a=s.indexOf(i.uid);return a>-1&&(r.push(i),n.splice(a,1),s.splice(a,1)),r},[]);return o.push(...n),o},oge=ge({name:"ElCascaderPanel",components:{ElCascaderMenu:Zpe},props:zt(ut({},DL),{border:{type:Boolean,default:!0},renderLabel:Function}),emits:[Pt,Xs,"close","expand-change"],setup(e,{emit:t,slots:n}){let s=!1;const o=tge(e);let r=null;const i=L(!0),a=L([]),l=L(null),u=L([]),c=L(null),d=L([]),f=R(()=>o.value.expandTrigger===Q2.HOVER),h=R(()=>e.renderLabel||n.default),p=()=>{const{options:T}=e,_=o.value;s=!1,r=new yA(T,_),u.value=[r.getNodes()],_.lazy&&Jh(e.options)?(i.value=!1,g(void 0,N=>{N&&(r=new yA(N,_),u.value=[r.getNodes()]),i.value=!0,x(!1,!0)})):x(!1,!0)},g=(T,_)=>{const N=o.value;T=T||new Ed({},N,void 0,!0),T.loading=!0;const O=M=>{const D=T,F=D.root?null:D;M&&(r==null||r.appendNodes(M,F)),D.loading=!1,D.loaded=!0,D.childrenData=D.childrenData||[],_&&_(M)};N.lazyLoad(T,O)},m=(T,_)=>{var N;const{level:O}=T,M=u.value.slice(0,O);let D;T.isLeaf?D=T.pathNodes[O-2]:(D=T,M.push(T.children)),((N=c.value)==null?void 0:N.uid)!==(D==null?void 0:D.uid)&&(c.value=T,u.value=M,!_&&t("expand-change",(T==null?void 0:T.pathValues)||[]))},v=(T,_,N=!0)=>{const{checkStrictly:O,multiple:M}=o.value,D=d.value[0];s=!0,!M&&(D==null||D.doCheck(!1)),T.doCheck(_),C(),N&&!M&&!O&&t("close"),!N&&!M&&!O&&b(T)},b=T=>{!T||(T=T.parent,b(T),T&&m(T))},$=T=>r==null?void 0:r.getFlattedNodes(T),y=T=>{var _;return(_=$(T))==null?void 0:_.filter(N=>N.checked!==!1)},w=()=>{d.value.forEach(T=>T.doCheck(!1)),C()},C=()=>{var T;const{checkStrictly:_,multiple:N}=o.value,O=d.value,M=y(!_),D=sge(O,M),F=D.map(V=>V.valueByOption);d.value=D,l.value=N?F:(T=F[0])!=null?T:null},x=(T=!1,_=!1)=>{const{modelValue:N}=e,{lazy:O,multiple:M,checkStrictly:D}=o.value,F=!D;if(!(!i.value||s||!_&&yi(N,l.value)))if(O&&!T){const U=TN(sF(Au(N))).map(ne=>r==null?void 0:r.getNodeByValue(ne)).filter(ne=>!!ne&&!ne.loaded&&!ne.loading);U.length?U.forEach(ne=>{g(ne,()=>x(!1,_))}):x(!0,_)}else{const V=M?Au(N):[N],U=TN(V.map(ne=>r==null?void 0:r.getNodeByValue(ne,F)));k(U,!1),l.value=N}},k=(T,_=!0)=>{const{checkStrictly:N}=o.value,O=d.value,M=T.filter(V=>!!V&&(N||V.isLeaf)),D=r==null?void 0:r.getSameNode(c.value),F=_&&D||M[0];F?F.pathNodes.forEach(V=>m(V,!0)):c.value=null,O.forEach(V=>V.doCheck(!1)),M.forEach(V=>V.doCheck(!0)),d.value=M,dt(I)},I=()=>{!Yt||a.value.forEach(T=>{const _=T==null?void 0:T.$el;if(_){const N=_.querySelector(".el-scrollbar__wrap"),O=_.querySelector(".el-cascader-node.is-active")||_.querySelector(".el-cascader-node.in-active-path");$L(N,O)}})},S=T=>{const _=T.target,{code:N}=T;switch(N){case Qe.up:case Qe.down:{T.preventDefault();const O=N===Qe.up?-1:1;Ev(fF(_,O,'.el-cascader-node[tabindex="-1"]'));break}case Qe.left:{T.preventDefault();const O=a.value[wA(_)-1],M=O==null?void 0:O.$el.querySelector('.el-cascader-node[aria-expanded="true"]');Ev(M);break}case Qe.right:{T.preventDefault();const O=a.value[wA(_)+1],M=O==null?void 0:O.$el.querySelector('.el-cascader-node[tabindex="-1"]');Ev(M);break}case Qe.enter:nge(_);break;case Qe.esc:case Qe.tab:t("close");break}};return Vt(J2,Sn({config:o,expandingNode:c,checkedNodes:d,isHoverMenu:f,initialLoaded:i,renderLabelFn:h,lazyLoad:g,expandNode:m,handleCheckChange:v})),Oe([o,()=>e.options],p,{deep:!0,immediate:!0}),Oe(()=>e.modelValue,()=>{s=!1,x()}),Oe(l,T=>{yi(T,e.modelValue)||(t(Pt,T),t(Xs,T))}),J3(()=>a.value=[]),Rt(()=>!Jh(e.modelValue)&&x()),{menuList:a,menus:u,checkedNodes:d,handleKeyDown:S,handleCheckChange:v,getFlattedNodes:$,getCheckedNodes:y,clearCheckedNodes:w,calculateCheckedValue:C,scrollToExpandingNode:I}}});function rge(e,t,n,s,o,r){const i=ie("el-cascader-menu");return A(),B("div",{class:q(["el-cascader-panel",e.border&&"is-bordered"]),onKeydown:t[0]||(t[0]=(...a)=>e.handleKeyDown&&e.handleKeyDown(...a))},[(A(!0),B(at,null,Zt(e.menus,(a,l)=>(A(),ve(i,{key:l,ref_for:!0,ref:u=>e.menuList[l]=u,index:l,nodes:a},null,8,["index","nodes"]))),128))],34)}var Mv=We(oge,[["render",rge]]);Mv.install=e=>{e.component(Mv.name,Mv)};const RL=Mv,ige=RL,age=mt({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:["large","default","small"]},effect:{type:String,values:["dark","light","plain"],default:"light"}}),lge={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},uge=ge({name:"ElTag",components:{ElIcon:Ot,Close:xi},props:age,emits:lge,setup(e,{emit:t}){const n=ks(),s=At("tag"),o=R(()=>{const{type:a,hit:l,effect:u,closable:c}=e;return[s.b(),s.is("closable",c),s.m(a),s.m(n.value),s.m(u),s.is("hit",l)]});return{ns:s,classes:o,handleClose:a=>{a.stopPropagation(),t("close",a)},handleClick:a=>{t("click",a)}}}});function cge(e,t,n,s,o,r){const i=ie("close"),a=ie("el-icon");return e.disableTransitions?(A(),ve(xs,{key:1,name:`${e.ns.namespace.value}-zoom-in-center`},{default:re(()=>[W("span",{class:q(e.classes),style:nt({backgroundColor:e.color}),onClick:t[1]||(t[1]=(...l)=>e.handleClick&&e.handleClick(...l))},[W("span",{class:q(e.ns.e("content"))},[Re(e.$slots,"default")],2),e.closable?(A(),ve(a,{key:0,class:q(e.ns.e("close")),onClick:e.handleClose},{default:re(()=>[le(i)]),_:1},8,["class","onClick"])):ce("v-if",!0)],6)]),_:3},8,["name"])):(A(),B("span",{key:0,class:q(e.classes),style:nt({backgroundColor:e.color}),onClick:t[0]||(t[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[W("span",{class:q(e.ns.e("content"))},[Re(e.$slots,"default")],2),e.closable?(A(),ve(a,{key:0,class:q(e.ns.e("close")),onClick:e.handleClose},{default:re(()=>[le(i)]),_:1},8,["class","onClick"])):ce("v-if",!0)],6))}var dge=We(uge,[["render",cge]]);const O0=Wt(dge),fge=40,hge={large:36,default:32,small:28},pge={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:t,placement:n}=e;["right","left","bottom","top"].includes(n)||(t.arrow.x=35)},requires:["arrow"]}]},gge=ge({name:"ElCascader",components:{ElCascaderPanel:RL,ElInput:ei,ElTooltip:ar,ElScrollbar:Oa,ElTag:O0,ElIcon:Ot,CircleClose:Ta,Check:Cd,ArrowDown:dc},directives:{Clickoutside:El},props:zt(ut({},DL),{size:{type:String,validator:nr},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},popperAppendToBody:{type:Boolean,default:!0}}),emits:[Pt,Xs,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:t}){let n=0,s=0;const{t:o}=In(),r=Ze(ir,{}),i=Ze(Ni,{}),a=L(null),l=L(null),u=L(null),c=L(null),d=L(null),f=L(!1),h=L(!1),p=L(!1),g=L(""),m=L(""),v=L([]),b=L([]),$=L(!1),y=R(()=>e.disabled||r.disabled),w=R(()=>e.placeholder||o("el.cascader.placeholder")),C=ks(),x=R(()=>["small"].includes(C.value)?"small":"default"),k=R(()=>!!e.props.multiple),I=R(()=>!e.filterable||k.value),S=R(()=>k.value?m.value:g.value),T=R(()=>{var H;return((H=c.value)==null?void 0:H.checkedNodes)||[]}),_=R(()=>!e.clearable||y.value||p.value||!h.value?!1:!!T.value.length),N=R(()=>{const{showAllLevels:H,separator:se}=e,we=T.value;return we.length?k.value?" ":we[0].calcText(H,se):""}),O=R({get(){return e.modelValue},set(H){var se;t(Pt,H),t(Xs,H),(se=i.validate)==null||se.call(i,"change")}}),M=R(()=>{var H,se;return(se=(H=a.value)==null?void 0:H.popperRef)==null?void 0:se.contentRef}),D=H=>{var se,we,J;if(!y.value&&(H=H!=null?H:!f.value,H!==f.value)){if(f.value=H,(we=(se=l.value)==null?void 0:se.input)==null||we.setAttribute("aria-expanded",`${H}`),H)F(),dt((J=c.value)==null?void 0:J.scrollToExpandingNode);else if(e.filterable){const{value:_e}=N;g.value=_e,m.value=_e}t("visible-change",H)}},F=()=>{dt(()=>{var H;(H=a.value)==null||H.updatePopper()})},V=()=>{p.value=!1},U=H=>{const{showAllLevels:se,separator:we}=e;return{node:H,key:H.uid,text:H.calcText(se,we),hitState:!1,closable:!y.value&&!H.isDisabled}},ne=H=>{var se;const we=H.node;we.doCheck(!1),(se=c.value)==null||se.calculateCheckedValue(),t("remove-tag",we.valueByOption)},be=()=>{if(!k.value)return;const H=T.value,se=[];if(H.length){const[we,...J]=H,_e=J.length;se.push(U(we)),_e&&(e.collapseTags?se.push({key:-1,text:`+ ${_e}`,closable:!1}):J.forEach(Ie=>se.push(U(Ie))))}v.value=se},te=()=>{var H,se;const{filterMethod:we,showAllLevels:J,separator:_e}=e,Ie=(se=(H=c.value)==null?void 0:H.getFlattedNodes(!e.props.checkStrictly))==null?void 0:se.filter(fe=>fe.isDisabled?!1:(fe.calcText(J,_e),we(fe,S.value)));k.value&&v.value.forEach(fe=>{fe.hitState=!1}),p.value=!0,b.value=Ie,F()},he=()=>{var H;let se;p.value&&d.value?se=d.value.$el.querySelector(".el-cascader__suggestion-item"):se=(H=c.value)==null?void 0:H.$el.querySelector('.el-cascader-node[tabindex="-1"]'),se&&(se.focus(),!p.value&&se.click())},oe=()=>{var H,se;const we=(H=l.value)==null?void 0:H.input,J=u.value,_e=(se=d.value)==null?void 0:se.$el;if(!(!Yt||!we)){if(_e){const Ie=_e.querySelector(".el-cascader__suggestion-list");Ie.style.minWidth=`${we.offsetWidth}px`}if(J){const{offsetHeight:Ie}=J,fe=v.value.length>0?`${Math.max(Ie+6,n)}px`:`${n}px`;we.style.height=fe,F()}}},G=H=>{var se;return(se=c.value)==null?void 0:se.getCheckedNodes(H)},Y=H=>{F(),t("expand-change",H)},X=H=>{var se;const we=(se=H.target)==null?void 0:se.value;if(H.type==="compositionend")$.value=!1,dt(()=>Q(we));else{const J=we[we.length-1]||"";$.value=!A0(J)}},ae=H=>{if(!$.value)switch(H.code){case Qe.enter:D();break;case Qe.down:D(!0),dt(he),H.preventDefault();break;case Qe.esc:case Qe.tab:D(!1);break}},Se=()=>{var H;(H=c.value)==null||H.clearCheckedNodes(),D(!1)},Le=H=>{var se,we;const{checked:J}=H;k.value?(se=c.value)==null||se.handleCheckChange(H,!J,!1):(!J&&((we=c.value)==null||we.handleCheckChange(H,!0,!1)),D(!1))},Be=H=>{const se=H.target,{code:we}=H;switch(we){case Qe.up:case Qe.down:{const J=we===Qe.up?-1:1;Ev(fF(se,J,'.el-cascader__suggestion-item[tabindex="-1"]'));break}case Qe.enter:se.click();break;case Qe.esc:case Qe.tab:D(!1);break}},Fe=()=>{const H=v.value,se=H[H.length-1];s=m.value?0:s+1,!(!se||!s)&&(se.hitState?ne(se):se.hitState=!0)},j=tr(()=>{const{value:H}=S;if(!H)return;const se=e.beforeFilter(H);vd(se)?se.then(te).catch(()=>{}):se!==!1?te():V()},e.debounce),Q=(H,se)=>{!f.value&&D(!0),!(se==null?void 0:se.isComposing)&&(H?j():V())};return Oe(p,F),Oe([T,y],be),Oe(v,()=>{dt(()=>oe())}),Oe(N,H=>g.value=H,{immediate:!0}),Rt(()=>{var H;const se=(H=l.value)==null?void 0:H.$el;n=(se==null?void 0:se.offsetHeight)||hge[C.value]||fge,_l(se,oe)}),ls(()=>{var H;Nl((H=l.value)==null?void 0:H.$el,oe)}),{popperOptions:pge,tooltipRef:a,popperPaneRef:M,input:l,tagWrapper:u,panel:c,suggestionPanel:d,popperVisible:f,inputHover:h,inputPlaceholder:w,filtering:p,presentText:N,checkedValue:O,inputValue:g,searchInputValue:m,presentTags:v,suggestions:b,isDisabled:y,isOnComposition:$,realSize:C,tagSize:x,multiple:k,readonly:I,clearBtnVisible:_,t:o,togglePopperVisible:D,hideSuggestionPanel:V,deleteTag:ne,focusFirstNode:he,getCheckedNodes:G,handleExpandChange:Y,handleKeyDown:ae,handleComposition:X,handleClear:Se,handleSuggestionClick:Le,handleSuggestionKeyDown:Be,handleDelete:Fe,handleInput:Q}}}),mge={key:0,ref:"tagWrapper",class:"el-cascader__tags"},vge=["placeholder"],bge=["onClick"],yge={class:"el-cascader__empty-text"};function wge(e,t,n,s,o,r){const i=ie("circle-close"),a=ie("el-icon"),l=ie("arrow-down"),u=ie("el-input"),c=ie("el-tag"),d=ie("el-cascader-panel"),f=ie("check"),h=ie("el-scrollbar"),p=ie("el-tooltip"),g=Vo("clickoutside");return A(),ve(p,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":t[17]||(t[17]=m=>e.popperVisible=m),"append-to-body":e.popperAppendToBody,"popper-class":`el-cascader__dropdown ${e.popperClass}`,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:"el-zoom-in-top",effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:re(()=>[$t((A(),B("div",{class:q(["el-cascader",e.realSize&&`el-cascader--${e.realSize}`,{"is-disabled":e.isDisabled},e.$attrs.class]),style:nt(e.$attrs.style),onClick:t[11]||(t[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:t[12]||(t[12]=(...m)=>e.handleKeyDown&&e.handleKeyDown(...m)),onMouseenter:t[13]||(t[13]=m=>e.inputHover=!0),onMouseleave:t[14]||(t[14]=m=>e.inputHover=!1)},[le(u,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":t[1]||(t[1]=m=>e.inputValue=m),placeholder:e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:q({"is-focus":e.popperVisible}),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:t[2]||(t[2]=m=>e.$emit("focus",m)),onBlur:t[3]||(t[3]=m=>e.$emit("blur",m)),onInput:e.handleInput},{suffix:re(()=>[e.clearBtnVisible?(A(),ve(a,{key:"clear",class:"el-input__icon icon-circle-close",onClick:ht(e.handleClear,["stop"])},{default:re(()=>[le(i)]),_:1},8,["onClick"])):(A(),ve(a,{key:"arrow-down",class:q(["el-input__icon","icon-arrow-down",e.popperVisible&&"is-reverse"]),onClick:t[0]||(t[0]=ht(m=>e.togglePopperVisible(),["stop"]))},{default:re(()=>[le(l)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(A(),B("div",mge,[(A(!0),B(at,null,Zt(e.presentTags,m=>(A(),ve(c,{key:m.key,type:"info",size:e.tagSize,hit:m.hitState,closable:m.closable,"disable-transitions":"",onClose:v=>e.deleteTag(m)},{default:re(()=>[W("span",null,Pe(m.text),1)]),_:2},1032,["size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?$t((A(),B("input",{key:0,"onUpdate:modelValue":t[4]||(t[4]=m=>e.searchInputValue=m),type:"text",class:"el-cascader__search-input",placeholder:e.presentText?"":e.inputPlaceholder,onInput:t[5]||(t[5]=m=>e.handleInput(e.searchInputValue,m)),onClick:t[6]||(t[6]=ht(m=>e.togglePopperVisible(!0),["stop"])),onKeydown:t[7]||(t[7]=Ut((...m)=>e.handleDelete&&e.handleDelete(...m),["delete"])),onCompositionstart:t[8]||(t[8]=(...m)=>e.handleComposition&&e.handleComposition(...m)),onCompositionupdate:t[9]||(t[9]=(...m)=>e.handleComposition&&e.handleComposition(...m)),onCompositionend:t[10]||(t[10]=(...m)=>e.handleComposition&&e.handleComposition(...m))},null,40,vge)),[[$2,e.searchInputValue]]):ce("v-if",!0)],512)):ce("v-if",!0)],38)),[[g,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:re(()=>[$t(le(d,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":t[15]||(t[15]=m=>e.checkedValue=m),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:t[16]||(t[16]=m=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[en,!e.filtering]]),e.filterable?$t((A(),ve(h,{key:0,ref:"suggestionPanel",tag:"ul",class:"el-cascader__suggestion-panel","view-class":"el-cascader__suggestion-list",onKeydown:e.handleSuggestionKeyDown},{default:re(()=>[e.suggestions.length?(A(!0),B(at,{key:0},Zt(e.suggestions,m=>(A(),B("li",{key:m.uid,class:q(["el-cascader__suggestion-item",m.checked&&"is-checked"]),tabindex:-1,onClick:v=>e.handleSuggestionClick(m)},[W("span",null,Pe(m.text),1),m.checked?(A(),ve(a,{key:0},{default:re(()=>[le(f)]),_:1})):ce("v-if",!0)],10,bge))),128)):Re(e.$slots,"empty",{key:1},()=>[W("li",yge,Pe(e.t("el.cascader.noMatch")),1)])]),_:3},8,["onKeydown"])),[[en,e.filtering]]):ce("v-if",!0)]),_:3},8,["visible","append-to-body","popper-class","popper-options","onHide"])}var Pv=We(gge,[["render",wge]]);Pv.install=e=>{e.component(Pv.name,Pv)};const $ge=Pv,Cge=$ge,xge=mt({checked:{type:Boolean,default:!1}}),kge={"update:checked":e=>vi(e),change:e=>vi(e)},Sge=ge({name:"ElCheckTag",props:xge,emits:kge,setup(e,{emit:t}){return{ns:At("check-tag"),onChange:()=>{const o=!e.checked;t("change",o),t("update:checked",o)}}}});function Ige(e,t,n,s,o,r){return A(),B("span",{class:q([e.ns.b(),e.ns.is("checked",e.checked)]),onClick:t[0]||(t[0]=(...i)=>e.onChange&&e.onChange(...i))},[Re(e.$slots,"default")],2)}var Tge=We(Sge,[["render",Ige]]);const Ege=Wt(Tge),_ge=mt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Je([Number,Object]),default:()=>Ns({})},sm:{type:Je([Number,Object]),default:()=>Ns({})},md:{type:Je([Number,Object]),default:()=>Ns({})},lg:{type:Je([Number,Object]),default:()=>Ns({})},xl:{type:Je([Number,Object]),default:()=>Ns({})}});var Nge=ge({name:"ElCol",props:_ge,setup(e,{slots:t}){const{gutter:n}=Ze("ElRow",{gutter:{value:0}}),s=R(()=>n.value?{paddingLeft:`${n.value/2}px`,paddingRight:`${n.value/2}px`}:{}),o=R(()=>{const r=[];return["span","offset","pull","push"].forEach(l=>{const u=e[l];typeof u=="number"&&(l==="span"?r.push(`el-col-${e[l]}`):u>0&&r.push(`el-col-${l}-${e[l]}`))}),["xs","sm","md","lg","xl"].forEach(l=>{if(typeof e[l]=="number")r.push(`el-col-${l}-${e[l]}`);else if(typeof e[l]=="object"){const u=e[l];Object.keys(u).forEach(c=>{r.push(c!=="span"?`el-col-${l}-${c}-${u[c]}`:`el-col-${l}-${u[c]}`)})}}),n.value&&r.push("is-guttered"),r});return()=>He(e.tag,{class:["el-col",o.value],style:s.value},[Re(t,"default")])}});const Age=Wt(Nge),Dge=ge({name:"ElCollapse",props:{accordion:Boolean,modelValue:{type:[Array,String,Number],default:()=>[]}},emits:[Pt,Xs],setup(e,{emit:t}){const n=L([].concat(e.modelValue)),s=r=>{n.value=[].concat(r);const i=e.accordion?n.value[0]:n.value;t(Pt,i),t(Xs,i)},o=r=>{if(e.accordion)s((n.value[0]||n.value[0]===0)&&n.value[0]===r?"":r);else{const i=n.value.slice(0),a=i.indexOf(r);a>-1?i.splice(a,1):i.push(r),s(i)}};return Oe(()=>e.modelValue,()=>{n.value=[].concat(e.modelValue)},{deep:!0}),Vt("collapse",{activeNames:n,handleItemClick:o}),{activeNames:n,setActiveNames:s,handleItemClick:o}}}),Rge={class:"el-collapse",role:"tablist","aria-multiselectable":"true"};function Oge(e,t,n,s,o,r){return A(),B("div",Rge,[Re(e.$slots,"default")])}var Mge=We(Dge,[["render",Oge]]);const Pge=ge({name:"ElCollapseTransition",setup(){return{on:{beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){e.dataset.oldOverflow=e.style.overflow,e.scrollHeight!==0?(e.style.maxHeight=`${e.scrollHeight}px`,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow="hidden"},leave(e){e.scrollHeight!==0&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}}}}});function Fge(e,t,n,s,o,r){return A(),ve(xs,lo({name:"el-collapse-transition"},gq(e.on)),{default:re(()=>[Re(e.$slots,"default")]),_:3},16)}var Fv=We(Pge,[["render",Fge]]);Fv.install=e=>{e.component(Fv.name,Fv)};const M0=Fv,Lge=M0,Bge=ge({name:"ElCollapseItem",components:{ElCollapseTransition:M0,ElIcon:Ot,ArrowRight:Qr},props:{title:{type:String,default:""},name:{type:[String,Number],default:()=>Xh()},disabled:Boolean},setup(e){const t=Ze("collapse"),n=L({height:"auto",display:"block"}),s=L(0),o=L(!1),r=L(!1),i=L(Xh());return{isActive:R(()=>(t==null?void 0:t.activeNames.value.indexOf(e.name))>-1),contentWrapStyle:n,contentHeight:s,focusing:o,isClick:r,id:i,handleFocus:()=>{setTimeout(()=>{r.value?r.value=!1:o.value=!0},50)},handleHeaderClick:()=>{e.disabled||(t==null||t.handleItemClick(e.name),o.value=!1,r.value=!0)},handleEnterClick:()=>{t==null||t.handleItemClick(e.name)},collapse:t}}}),zge=["aria-expanded","aria-controls","aria-describedby"],Vge=["id","tabindex"],Wge=["id","aria-hidden","aria-labelledby"],Hge={class:"el-collapse-item__content"};function Uge(e,t,n,s,o,r){const i=ie("arrow-right"),a=ie("el-icon"),l=ie("el-collapse-transition");return A(),B("div",{class:q(["el-collapse-item",{"is-active":e.isActive,"is-disabled":e.disabled}])},[W("div",{role:"tab","aria-expanded":e.isActive,"aria-controls":`el-collapse-content-${e.id}`,"aria-describedby":`el-collapse-content-${e.id}`},[W("div",{id:`el-collapse-head-${e.id}`,class:q(["el-collapse-item__header",{focusing:e.focusing,"is-active":e.isActive}]),role:"button",tabindex:e.disabled?-1:0,onClick:t[0]||(t[0]=(...u)=>e.handleHeaderClick&&e.handleHeaderClick(...u)),onKeyup:t[1]||(t[1]=Ut(ht((...u)=>e.handleEnterClick&&e.handleEnterClick(...u),["stop"]),["space","enter"])),onFocus:t[2]||(t[2]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[3]||(t[3]=u=>e.focusing=!1)},[Re(e.$slots,"title",{},()=>[qt(Pe(e.title),1)]),le(a,{class:q(["el-collapse-item__arrow",{"is-active":e.isActive}])},{default:re(()=>[le(i)]),_:1},8,["class"])],42,Vge)],8,zge),le(l,null,{default:re(()=>[$t(W("div",{id:`el-collapse-content-${e.id}`,class:"el-collapse-item__wrap",role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":`el-collapse-head-${e.id}`},[W("div",Hge,[Re(e.$slots,"default")])],8,Wge),[[en,e.isActive]])]),_:3})],2)}var OL=We(Bge,[["render",Uge]]);const jge=Wt(Mge,{CollapseItem:OL}),Gge=us(OL);let Ow=!1;function np(e,t){if(!Yt)return;const n=function(r){var i;(i=t.drag)==null||i.call(t,r)},s=function(r){var i;Kn(document,"mousemove",n),Kn(document,"mouseup",s),Kn(document,"touchmove",n),Kn(document,"touchend",s),document.onselectstart=null,document.ondragstart=null,Ow=!1,(i=t.end)==null||i.call(t,r)},o=function(r){var i;Ow||(r.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,bn(document,"mousemove",n),bn(document,"mouseup",s),bn(document,"touchmove",n),bn(document,"touchend",s),Ow=!0,(i=t.start)==null||i.call(t,r))};bn(e,"mousedown",o),bn(e,"touchstart",o)}const Kge=ge({name:"ElColorAlphaSlider",props:{color:{type:Object,required:!0},vertical:{type:Boolean,default:!1}},setup(e){const t=Lt(),n=vo(null),s=vo(null),o=L(0),r=L(0),i=L(null);Oe(()=>e.color.get("alpha"),()=>{f()}),Oe(()=>e.color.value,()=>{f()});function a(){if(e.vertical)return 0;const h=t.vnode.el,p=e.color.get("alpha");return h?Math.round(p*(h.offsetWidth-n.value.offsetWidth/2)/100):0}function l(){const h=t.vnode.el;if(!e.vertical)return 0;const p=e.color.get("alpha");return h?Math.round(p*(h.offsetHeight-n.value.offsetHeight/2)/100):0}function u(){if(e.color&&e.color.value){const{r:h,g:p,b:g}=e.color.toRgb();return`linear-gradient(to right, rgba(${h}, ${p}, ${g}, 0) 0%, rgba(${h}, ${p}, ${g}, 1) 100%)`}return null}function c(h){h.target!==n.value&&d(h)}function d(h){const g=t.vnode.el.getBoundingClientRect(),{clientX:m,clientY:v}=P2(h);if(e.vertical){let b=v-g.top;b=Math.max(n.value.offsetHeight/2,b),b=Math.min(b,g.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((b-n.value.offsetHeight/2)/(g.height-n.value.offsetHeight)*100))}else{let b=m-g.left;b=Math.max(n.value.offsetWidth/2,b),b=Math.min(b,g.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((b-n.value.offsetWidth/2)/(g.width-n.value.offsetWidth)*100))}}function f(){o.value=a(),r.value=l(),i.value=u()}return Rt(()=>{const h={drag:p=>{d(p)},end:p=>{d(p)}};np(s.value,h),np(n.value,h),f()}),{thumb:n,bar:s,thumbLeft:o,thumbTop:r,background:i,handleClick:c,update:f}}});function qge(e,t,n,s,o,r){return A(),B("div",{class:q(["el-color-alpha-slider",{"is-vertical":e.vertical}])},[W("div",{ref:"bar",class:"el-color-alpha-slider__bar",style:nt({background:e.background}),onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},null,4),W("div",{ref:"thumb",class:"el-color-alpha-slider__thumb",style:nt({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,4)],2)}var Yge=We(Kge,[["render",qge]]);const Xge=ge({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=Lt(),n=L(null),s=L(null),o=L(0),r=L(0),i=R(()=>e.color.get("hue"));Oe(()=>i.value,()=>{d()});function a(f){f.target!==n.value&&l(f)}function l(f){const p=t.vnode.el.getBoundingClientRect(),{clientX:g,clientY:m}=P2(f);let v;if(e.vertical){let b=m-p.top;b=Math.min(b,p.height-n.value.offsetHeight/2),b=Math.max(n.value.offsetHeight/2,b),v=Math.round((b-n.value.offsetHeight/2)/(p.height-n.value.offsetHeight)*360)}else{let b=g-p.left;b=Math.min(b,p.width-n.value.offsetWidth/2),b=Math.max(n.value.offsetWidth/2,b),v=Math.round((b-n.value.offsetWidth/2)/(p.width-n.value.offsetWidth)*360)}e.color.set("hue",v)}function u(){const f=t.vnode.el;if(e.vertical)return 0;const h=e.color.get("hue");return f?Math.round(h*(f.offsetWidth-n.value.offsetWidth/2)/360):0}function c(){const f=t.vnode.el;if(!e.vertical)return 0;const h=e.color.get("hue");return f?Math.round(h*(f.offsetHeight-n.value.offsetHeight/2)/360):0}function d(){o.value=u(),r.value=c()}return Rt(()=>{const f={drag:h=>{l(h)},end:h=>{l(h)}};np(s.value,f),np(n.value,f),d()}),{bar:s,thumb:n,thumbLeft:o,thumbTop:r,hueValue:i,handleClick:a,update:d}}});function Zge(e,t,n,s,o,r){return A(),B("div",{class:q(["el-color-hue-slider",{"is-vertical":e.vertical}])},[W("div",{ref:"bar",class:"el-color-hue-slider__bar",onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},null,512),W("div",{ref:"thumb",class:"el-color-hue-slider__thumb",style:nt({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,4)],2)}var Jge=We(Xge,[["render",Zge]]);const ML=Symbol(),Qge=()=>Ze(ML),$A=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},eme=function(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1},tme=function(e){return typeof e=="string"&&e.indexOf("%")!==-1},ud=function(e,t){eme(e)&&(e="100%");const n=tme(e);return e=Math.min(t,Math.max(0,parseFloat(`${e}`))),n&&(e=parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)},CA={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Lv=function(e){e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${CA[t]||t}${CA[n]||n}`},xA=function({r:e,g:t,b:n}){return isNaN(e)||isNaN(t)||isNaN(n)?"":`#${Lv(e)}${Lv(t)}${Lv(n)}`},Mw={A:10,B:11,C:12,D:13,E:14,F:15},Jl=function(e){return e.length===2?(Mw[e[0].toUpperCase()]||+e[0])*16+(Mw[e[1].toUpperCase()]||+e[1]):Mw[e[1].toUpperCase()]||+e[1]},nme=function(e,t,n){t=t/100,n=n/100;let s=t;const o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,s*=o<=1?o:2-o;const r=(n+t)/2,i=n===0?2*s/(o+s):2*t/(n+t);return{h:e,s:i*100,v:r*100}},kA=function(e,t,n){e=ud(e,255),t=ud(t,255),n=ud(n,255);const s=Math.max(e,t,n),o=Math.min(e,t,n);let r;const i=s,a=s-o,l=s===0?0:a/s;if(s===o)r=0;else{switch(s){case e:{r=(t-n)/a+(t<n?6:0);break}case t:{r=(n-e)/a+2;break}case n:{r=(e-t)/a+4;break}}r/=6}return{h:r*360,s:l*100,v:i*100}},Ff=function(e,t,n){e=ud(e,360)*6,t=ud(t,100),n=ud(n,100);const s=Math.floor(e),o=e-s,r=n*(1-t),i=n*(1-o*t),a=n*(1-(1-o)*t),l=s%6,u=[n,i,r,r,a,n][l],c=[a,n,n,i,r,r][l],d=[r,r,a,n,n,i][l];return{r:Math.round(u*255),g:Math.round(c*255),b:Math.round(d*255)}};class kh{constructor(t){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",t=t||{};for(const n in t)Ht(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const s in t)Ht(t,s)&&this.set(s,t[s]);return}this[`_${t}`]=n,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return Ff(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(s,o,r)=>{this._hue=Math.max(0,Math.min(360,s)),this._saturation=Math.max(0,Math.min(100,o)),this._value=Math.max(0,Math.min(100,r)),this.doOnChange()};if(t.indexOf("hsl")!==-1){const s=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));if(s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:o,s:r,v:i}=nme(s[0],s[1],s[2]);n(o,r,i)}}else if(t.indexOf("hsv")!==-1){const s=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3&&n(s[0],s[1],s[2])}else if(t.indexOf("rgb")!==-1){const s=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));if(s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:o,s:r,v:i}=kA(s[0],s[1],s[2]);n(o,r,i)}}else if(t.indexOf("#")!==-1){const s=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(s))return;let o,r,i;s.length===3?(o=Jl(s[0]+s[0]),r=Jl(s[1]+s[1]),i=Jl(s[2]+s[2])):(s.length===6||s.length===8)&&(o=Jl(s.substring(0,2)),r=Jl(s.substring(2,4)),i=Jl(s.substring(4,6))),s.length===8?this._alpha=Jl(s.substring(6))/255*100:(s.length===3||s.length===6)&&(this._alpha=100);const{h:a,s:l,v:u}=kA(o,r,i);n(a,l,u)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:n,_value:s,_alpha:o,format:r}=this;if(this.enableAlpha)switch(r){case"hsl":{const i=$A(t,n/100,s/100);this.value=`hsla(${t}, ${Math.round(i[1]*100)}%, ${Math.round(i[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(n)}%, ${Math.round(s)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${xA(Ff(t,n,s))}${Lv(o*255/100)}`;break}default:{const{r:i,g:a,b:l}=Ff(t,n,s);this.value=`rgba(${i}, ${a}, ${l}, ${this.get("alpha")/100})`}}else switch(r){case"hsl":{const i=$A(t,n/100,s/100);this.value=`hsl(${t}, ${Math.round(i[1]*100)}%, ${Math.round(i[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(n)}%, ${Math.round(s)}%)`;break}case"rgb":{const{r:i,g:a,b:l}=Ff(t,n,s);this.value=`rgb(${i}, ${a}, ${l})`;break}default:this.value=xA(Ff(t,n,s))}}}const sme=ge({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const{currentColor:t}=Qge(),n=L(o(e.colors,e.color));Oe(()=>t.value,r=>{const i=new kh;i.fromString(r),n.value.forEach(a=>{a.selected=i.compare(a)})}),Ca(()=>{n.value=o(e.colors,e.color)});function s(r){e.color.fromString(e.colors[r])}function o(r,i){return r.map(a=>{const l=new kh;return l.enableAlpha=!0,l.format="rgba",l.fromString(a),l.selected=l.value===i.value,l})}return{rgbaColors:n,handleSelect:s}}}),ome={class:"el-color-predefine"},rme={class:"el-color-predefine__colors"},ime=["onClick"];function ame(e,t,n,s,o,r){return A(),B("div",ome,[W("div",rme,[(A(!0),B(at,null,Zt(e.rgbaColors,(i,a)=>(A(),B("div",{key:e.colors[a],class:q(["el-color-predefine__color-selector",{selected:i.selected,"is-alpha":i._alpha<100}]),onClick:l=>e.handleSelect(a)},[W("div",{style:nt({backgroundColor:i.value})},null,4)],10,ime))),128))])])}var lme=We(sme,[["render",ame]]);const ume=ge({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=Lt(),n=L(0),s=L(0),o=L("hsl(0, 100%, 50%)"),r=R(()=>{const l=e.color.get("hue"),u=e.color.get("value");return{hue:l,value:u}});function i(){const l=e.color.get("saturation"),u=e.color.get("value"),c=t.vnode.el,{clientWidth:d,clientHeight:f}=c;s.value=l*d/100,n.value=(100-u)*f/100,o.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function a(l){const c=t.vnode.el.getBoundingClientRect(),{clientX:d,clientY:f}=P2(l);let h=d-c.left,p=f-c.top;h=Math.max(0,h),h=Math.min(h,c.width),p=Math.max(0,p),p=Math.min(p,c.height),s.value=h,n.value=p,e.color.set({saturation:h/c.width*100,value:100-p/c.height*100})}return Oe(()=>r.value,()=>{i()}),Rt(()=>{np(t.vnode.el,{drag:l=>{a(l)},end:l=>{a(l)}}),i()}),{cursorTop:n,cursorLeft:s,background:o,colorValue:r,handleDrag:a,update:i}}}),cme=W("div",{class:"el-color-svpanel__white"},null,-1),dme=W("div",{class:"el-color-svpanel__black"},null,-1),fme=W("div",null,null,-1),hme=[fme];function pme(e,t,n,s,o,r){return A(),B("div",{class:"el-color-svpanel",style:nt({backgroundColor:e.background})},[cme,dme,W("div",{class:"el-color-svpanel__cursor",style:nt({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},hme,4)],4)}var gme=We(ume,[["render",pme]]);const mme=ge({name:"ElColorPicker",components:{ElButton:ta,ElTooltip:ar,ElInput:ei,ElIcon:Ot,Close:xi,ArrowDown:dc,SvPanel:gme,HueSlider:Jge,AlphaSlider:Yge,Predefine:lme},directives:{ClickOutside:El},props:{modelValue:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:{type:String,validator:nr},popperClass:String,predefine:Array},emits:["change","active-change",Pt],setup(e,{emit:t}){const{t:n}=In(),s=Ze(ir,{}),o=Ze(Ni,{}),r=L(null),i=L(null),a=L(null),l=L(null),u=Sn(new kh({enableAlpha:e.showAlpha,format:e.colorFormat,value:e.modelValue})),c=L(!1),d=L(!1),f=L(""),h=R(()=>!e.modelValue&&!d.value?"transparent":v(u,e.showAlpha)),p=ks(),g=R(()=>e.disabled||s.disabled),m=R(()=>!e.modelValue&&!d.value?"":u.value);Oe(()=>e.modelValue,S=>{S?S&&S!==u.value&&u.fromString(S):d.value=!1}),Oe(()=>m.value,S=>{f.value=S,t("active-change",S)}),Oe(()=>u.value,()=>{!e.modelValue&&!d.value&&(d.value=!0)});function v(S,T){if(!(S instanceof kh))throw Error("color should be instance of _color Class");const{r:_,g:N,b:O}=S.toRgb();return T?`rgba(${_}, ${N}, ${O}, ${S.get("alpha")/100})`:`rgb(${_}, ${N}, ${O})`}function b(S){c.value=S}const $=tr(b,100);function y(){$(!1),w()}function w(){dt(()=>{e.modelValue?u.fromString(e.modelValue):d.value=!1})}function C(){g.value||$(!c.value)}function x(){u.fromString(f.value)}function k(){var S;const T=u.value;t(Pt,T),t("change",T),(S=o.validate)==null||S.call(o,"change"),$(!1),dt(()=>{const _=new kh({enableAlpha:e.showAlpha,format:e.colorFormat,value:e.modelValue});u.compare(_)||w()})}function I(){var S;$(!1),t(Pt,null),t("change",null),e.modelValue!==null&&((S=o.validate)==null||S.call(o,"change")),w()}return Rt(()=>{e.modelValue&&(f.value=m.value)}),Oe(()=>c.value,()=>{dt(()=>{var S,T,_;(S=r.value)==null||S.update(),(T=i.value)==null||T.update(),(_=a.value)==null||_.update()})}),Vt(ML,{currentColor:m}),{color:u,colorDisabled:g,colorSize:p,displayedColor:h,showPanelColor:d,showPicker:c,customInput:f,handleConfirm:x,hide:y,handleTrigger:C,clear:I,confirmValue:k,t:n,hue:r,svPanel:i,alpha:a,popper:l}}}),vme={class:"el-color-dropdown__main-wrapper"},bme={class:"el-color-dropdown__btns"},yme={class:"el-color-dropdown__value"},wme={key:0,class:"el-color-picker__mask"};function $me(e,t,n,s,o,r){const i=ie("hue-slider"),a=ie("sv-panel"),l=ie("alpha-slider"),u=ie("predefine"),c=ie("el-input"),d=ie("el-button"),f=ie("arrow-down"),h=ie("el-icon"),p=ie("close"),g=ie("el-tooltip"),m=Vo("click-outside");return A(),ve(g,{ref:"popper",visible:e.showPicker,"onUpdate:visible":t[2]||(t[2]=v=>e.showPicker=v),"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":`el-color-picker__panel el-color-dropdown ${e.popperClass}`,"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:"el-zoom-in-top",persistent:""},{content:re(()=>[$t((A(),B("div",null,[W("div",vme,[le(i,{ref:"hue",class:"hue-slider",color:e.color,vertical:""},null,8,["color"]),le(a,{ref:"svPanel",color:e.color},null,8,["color"])]),e.showAlpha?(A(),ve(l,{key:0,ref:"alpha",color:e.color},null,8,["color"])):ce("v-if",!0),e.predefine?(A(),ve(u,{key:1,ref:"predefine",color:e.color,colors:e.predefine},null,8,["color","colors"])):ce("v-if",!0),W("div",bme,[W("span",yme,[le(c,{modelValue:e.customInput,"onUpdate:modelValue":t[0]||(t[0]=v=>e.customInput=v),"validate-event":!1,size:"small",onKeyup:Ut(e.handleConfirm,["enter"]),onBlur:e.handleConfirm},null,8,["modelValue","onKeyup","onBlur"])]),le(d,{size:"small",type:"text",class:"el-color-dropdown__link-btn",onClick:e.clear},{default:re(()=>[qt(Pe(e.t("el.colorpicker.clear")),1)]),_:1},8,["onClick"]),le(d,{plain:"",size:"small",class:"el-color-dropdown__btn",onClick:e.confirmValue},{default:re(()=>[qt(Pe(e.t("el.colorpicker.confirm")),1)]),_:1},8,["onClick"])])])),[[m,e.hide]])]),default:re(()=>[W("div",{class:q(["el-color-picker",e.colorDisabled?"is-disabled":"",e.colorSize?`el-color-picker--${e.colorSize}`:""])},[e.colorDisabled?(A(),B("div",wme)):ce("v-if",!0),W("div",{class:"el-color-picker__trigger",onClick:t[1]||(t[1]=(...v)=>e.handleTrigger&&e.handleTrigger(...v))},[W("span",{class:q(["el-color-picker__color",{"is-alpha":e.showAlpha}])},[W("span",{class:"el-color-picker__color-inner",style:nt({backgroundColor:e.displayedColor})},[$t(le(h,{class:"el-color-picker__icon is-icon-arrow-down"},{default:re(()=>[le(f)]),_:1},512),[[en,e.modelValue||e.showPanelColor]]),!e.modelValue&&!e.showPanelColor?(A(),ve(h,{key:0,class:"el-color-picker__empty is-icon-close"},{default:re(()=>[le(p)]),_:1})):ce("v-if",!0)],4)],2)])],2)]),_:1},8,["visible","popper-class"])}var Bv=We(mme,[["render",$me]]);Bv.install=e=>{e.component(Bv.name,Bv)};const Cme=Bv,xme=Cme,yC={},kme=mt({locale:{type:Je(Object)},size:{type:String,values:["large","default","small"]},button:{type:Je(Object)},message:{type:Je(Object)},zIndex:{type:Number},namespace:{type:String,default:"el"}});var Sme=ge({name:"ElConfigProvider",props:kme,setup(e,{slots:t}){Oe(()=>e.message,s=>{Object.assign(yC,s!=null?s:{})},{immediate:!0,deep:!0});const n=rF(e);return()=>Re(t,"default",{config:n==null?void 0:n.value})}});const Ime=Wt(Sme),Tme=ge({name:"ElContainer",props:{direction:{type:String,default:""}},setup(e,{slots:t}){const n=At("container");return{isVertical:R(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(r=>{const i=r.type.name;return i==="ElHeader"||i==="ElFooter"}):!1),ns:n}}});function Eme(e,t,n,s,o,r){return A(),B("section",{class:q([e.ns.b(),e.ns.is("vertical",e.isVertical)])},[Re(e.$slots,"default")],2)}var _me=We(Tme,[["render",Eme]]);const Nme=ge({name:"ElAside",props:{width:{type:String,default:null}},setup(e){const t=At("aside");return{style:R(()=>e.width?{"--el-aside-width":e.width}:{}),ns:t}}});function Ame(e,t,n,s,o,r){return A(),B("aside",{class:q(e.ns.b()),style:nt(e.style)},[Re(e.$slots,"default")],6)}var PL=We(Nme,[["render",Ame]]);const Dme=ge({name:"ElFooter",props:{height:{type:String,default:null}},setup(e){const t=At("footer");return{style:R(()=>e.height?{"--el-footer-height":e.height}:{}),ns:t}}});function Rme(e,t,n,s,o,r){return A(),B("footer",{class:q(e.ns.b()),style:nt(e.style)},[Re(e.$slots,"default")],6)}var FL=We(Dme,[["render",Rme]]);const Ome=ge({name:"ElHeader",props:{height:{type:String,default:null}},setup(e){const t=At("header");return{style:R(()=>e.height?{"--el-header-height":e.height}:{}),ns:t}}});function Mme(e,t,n,s,o,r){return A(),B("header",{class:q(e.ns.b()),style:nt(e.style)},[Re(e.$slots,"default")],6)}var LL=We(Ome,[["render",Mme]]);const Pme=ge({name:"ElMain",setup(){return{ns:At("main")}}});function Fme(e,t,n,s,o,r){return A(),B("main",{class:q(e.ns.b())},[Re(e.$slots,"default")],2)}var BL=We(Pme,[["render",Fme]]);const Lme=Wt(_me,{Aside:PL,Footer:FL,Header:LL,Main:BL}),Bme=us(PL),zme=us(FL),Vme=us(LL),Wme=us(BL);var zL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){return function(n,s,o){var r=s.prototype,i=r.format;o.en.ordinal=function(a){var l=["th","st","nd","rd"],u=a%100;return"["+a+(l[(u-20)%10]||l[u]||l[0])+"]"},r.format=function(a){var l=this,u=this.$locale();if(!this.isValid())return i.bind(this)(a);var c=this.$utils(),d=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((l.$M+1)/3);case"Do":return u.ordinal(l.$D);case"gggg":return l.weekYear();case"GGGG":return l.isoWeekYear();case"wo":return u.ordinal(l.week(),"W");case"w":case"ww":return c.s(l.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(l.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(l.$H===0?24:l.$H),f==="k"?1:2,"0");case"X":return Math.floor(l.$d.getTime()/1e3);case"x":return l.$d.getTime();case"z":return"["+l.offsetName()+"]";case"zzz":return"["+l.offsetName("long")+"]";default:return f}});return i.bind(this)(d)}}})})(zL);var Hme=zL.exports,VL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){var n="week",s="year";return function(o,r,i){var a=r.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=i(this).startOf(s).add(1,s).date(u),d=i(this).endOf(n);if(c.isBefore(d))return 1}var f=i(this).startOf(s).date(u).startOf(n).subtract(1,"millisecond"),h=this.diff(f,n,!0);return h<0?i(this).startOf("week").week():Math.ceil(h)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(VL);var Ume=VL.exports,WL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){return function(n,s){s.prototype.weekYear=function(){var o=this.month(),r=this.week(),i=this.year();return r===1&&o===11?i+1:o===0&&r>=52?i-1:i}}})})(WL);var jme=WL.exports,HL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){return function(n,s,o){s.prototype.dayOfYear=function(r){var i=Math.round((o(this).startOf("day")-o(this).startOf("year"))/864e5)+1;return r==null?i:this.add(r-i,"day")}}})})(HL);var Gme=HL.exports,UL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){return function(n,s){s.prototype.isSameOrAfter=function(o,r){return this.isSame(o,r)||this.isAfter(o,r)}}})})(UL);var Kme=UL.exports,jL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(On,function(){return function(n,s){s.prototype.isSameOrBefore=function(o,r){return this.isSame(o,r)||this.isBefore(o,r)}}})})(jL);var qme=jL.exports;const GL=Symbol();var Yme=ge({name:"ElDatePickerCell",props:mt({cell:{type:Je(Object)}}),setup(e){const t=Ze(GL);return()=>{const n=e.cell;if(t==null?void 0:t.ctx.slots.default){const s=t.ctx.slots.default(n).filter(o=>o.patchFlag!==-2&&o.type.toString()!=="Symbol(Comment)");if(s.length)return s}return He("div",{class:"el-date-table-cell"},[He("span",{class:"el-date-table-cell__text"},[n==null?void 0:n.text])])}}});const Xme=ge({components:{ElDatePickerCell:Yme},props:{date:{type:Object},minDate:{type:Object},maxDate:{type:Object},parsedValue:{type:[Object,Array]},selectionMode:{type:String,default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{type:Function},cellClassName:{type:Function},rangeState:{type:Object,default:()=>({endDate:null,selecting:!1})}},emits:["changerange","pick","select"],setup(e,t){const{t:n,lang:s}=In(),o=L(null),r=L(null),i=L([[],[],[],[],[],[]]),a=e.date.$locale().weekStart||7,l=e.date.locale("en").localeData().weekdaysShort().map(y=>y.toLowerCase()),u=R(()=>a>3?7-a:-a),c=R(()=>{const y=e.date.startOf("month");return y.subtract(y.day()||7,"day")}),d=R(()=>l.concat(l).slice(a,a+7)),f=R(()=>{var y;const w=e.date.startOf("month"),C=w.day()||7,x=w.daysInMonth(),k=w.subtract(1,"month").daysInMonth(),I=u.value,S=i.value;let T=1;const _=e.selectionMode==="dates"?Au(e.parsedValue):[],N=Ct().locale(s.value).startOf("day");for(let O=0;O<6;O++){const M=S[O];e.showWeekNumber&&(M[0]||(M[0]={type:"week",text:c.value.add(O*7+1,"day").week()}));for(let D=0;D<7;D++){let F=M[e.showWeekNumber?D+1:D];F||(F={row:O,column:D,type:"normal",inRange:!1,start:!1,end:!1});const V=O*7+D,U=c.value.add(V-I,"day");F.dayjs=U,F.date=U.toDate(),F.timestamp=U.valueOf(),F.type="normal";const ne=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate;if(F.inRange=e.minDate&&U.isSameOrAfter(e.minDate,"day")&&ne&&U.isSameOrBefore(ne,"day")||e.minDate&&U.isSameOrBefore(e.minDate,"day")&&ne&&U.isSameOrAfter(ne,"day"),((y=e.minDate)==null?void 0:y.isSameOrAfter(ne))?(F.start=ne&&U.isSame(ne,"day"),F.end=e.minDate&&U.isSame(e.minDate,"day")):(F.start=e.minDate&&U.isSame(e.minDate,"day"),F.end=ne&&U.isSame(ne,"day")),U.isSame(N,"day")&&(F.type="today"),O>=0&&O<=1){const he=C+I<0?7+C+I:C+I;D+O*7>=he?F.text=T++:(F.text=k-(he-D%7)+1+O*7,F.type="prev-month")}else T<=x?F.text=T++:(F.text=T++-x,F.type="next-month");const te=U.toDate();F.selected=_.find(he=>he.valueOf()===U.valueOf()),F.isSelected=!!F.selected,F.isCurrent=h(F),F.disabled=e.disabledDate&&e.disabledDate(te),F.customClass=e.cellClassName&&e.cellClassName(te),M[e.showWeekNumber?D+1:D]=F}if(e.selectionMode==="week"){const D=e.showWeekNumber?1:0,F=e.showWeekNumber?7:6,V=$(M[D+1]);M[D].inRange=V,M[D].start=V,M[F].inRange=V,M[F].end=V}}return S}),h=y=>e.selectionMode==="day"&&(y.type==="normal"||y.type==="today")&&p(y,e.parsedValue),p=(y,w)=>w?Ct(w).locale(s.value).isSame(e.date.date(Number(y.text)),"day"):!1,g=y=>{const w=[];return(y.type==="normal"||y.type==="today")&&!y.disabled?(w.push("available"),y.type==="today"&&w.push("today")):w.push(y.type),h(y)&&w.push("current"),y.inRange&&(y.type==="normal"||y.type==="today"||e.selectionMode==="week")&&(w.push("in-range"),y.start&&w.push("start-date"),y.end&&w.push("end-date")),y.disabled&&w.push("disabled"),y.selected&&w.push("selected"),y.customClass&&w.push(y.customClass),w.join(" ")},m=(y,w)=>{const C=y*7+(w-(e.showWeekNumber?1:0))-u.value;return c.value.add(C,"day")},v=y=>{if(!e.rangeState.selecting)return;let w=y.target;if(w.tagName==="SPAN"&&(w=w.parentNode.parentNode),w.tagName==="DIV"&&(w=w.parentNode),w.tagName!=="TD")return;const C=w.parentNode.rowIndex-1,x=w.cellIndex;f.value[C][x].disabled||(C!==o.value||x!==r.value)&&(o.value=C,r.value=x,t.emit("changerange",{selecting:!0,endDate:m(C,x)}))},b=y=>{let w=y.target;for(;w&&w.tagName!=="TD";)w=w.parentNode;if(!w||w.tagName!=="TD")return;const C=w.parentNode.rowIndex-1,x=w.cellIndex,k=f.value[C][x];if(k.disabled||k.type==="week")return;const I=m(C,x);if(e.selectionMode==="range")e.rangeState.selecting?(I>=e.minDate?t.emit("pick",{minDate:e.minDate,maxDate:I}):t.emit("pick",{minDate:I,maxDate:e.minDate}),t.emit("select",!1)):(t.emit("pick",{minDate:I,maxDate:null}),t.emit("select",!0));else if(e.selectionMode==="day")t.emit("pick",I);else if(e.selectionMode==="week"){const S=I.week(),T=`${I.year()}w${S}`;t.emit("pick",{year:I.year(),week:S,value:T,date:I.startOf("week")})}else if(e.selectionMode==="dates"){const S=k.selected?Au(e.parsedValue).filter(T=>T.valueOf()!==I.valueOf()):Au(e.parsedValue).concat([I]);t.emit("pick",S)}},$=y=>{if(e.selectionMode!=="week")return!1;let w=e.date.startOf("day");if(y.type==="prev-month"&&(w=w.subtract(1,"month")),y.type==="next-month"&&(w=w.add(1,"month")),w=w.date(parseInt(y.text,10)),e.parsedValue&&!Array.isArray(e.parsedValue)){const C=(e.parsedValue.day()-a+7)%7-1;return e.parsedValue.subtract(C,"day").isSame(w,"day")}return!1};return{handleMouseMove:v,t:n,rows:f,isWeekActive:$,getCellClasses:g,WEEKS:d,handleClick:b}}}),Zme={key:0};function Jme(e,t,n,s,o,r){const i=ie("el-date-picker-cell");return A(),B("table",{cellspacing:"0",cellpadding:"0",class:q(["el-date-table",{"is-week-mode":e.selectionMode==="week"}]),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a)),onMousemove:t[1]||(t[1]=(...a)=>e.handleMouseMove&&e.handleMouseMove(...a))},[W("tbody",null,[W("tr",null,[e.showWeekNumber?(A(),B("th",Zme,Pe(e.t("el.datepicker.week")),1)):ce("v-if",!0),(A(!0),B(at,null,Zt(e.WEEKS,(a,l)=>(A(),B("th",{key:l},Pe(e.t("el.datepicker.weeks."+a)),1))),128))]),(A(!0),B(at,null,Zt(e.rows,(a,l)=>(A(),B("tr",{key:l,class:q(["el-date-table__row",{current:e.isWeekActive(a[1])}])},[(A(!0),B(at,null,Zt(a,(u,c)=>(A(),B("td",{key:c,class:q(e.getCellClasses(u))},[le(i,{cell:u},null,8,["cell"])],2))),128))],2))),128))])],34)}var KL=We(Xme,[["render",Jme]]);const Qme=(e,t,n)=>{const s=Ct().locale(n).startOf("month").month(t).year(e),o=s.daysInMonth();return ll(o).map(r=>s.add(r,"day").toDate())},eve=ge({props:{disabledDate:{type:Function},selectionMode:{type:String,default:"month"},minDate:{type:Object},maxDate:{type:Object},date:{type:Object},parsedValue:{type:Object},rangeState:{type:Object,default:()=>({endDate:null,selecting:!1})}},emits:["changerange","pick","select"],setup(e,t){const{t:n,lang:s}=In(),o=L(e.date.locale("en").localeData().monthsShort().map(f=>f.toLowerCase())),r=L([[],[],[]]),i=L(null),a=L(null),l=R(()=>{var f;const h=r.value,p=Ct().locale(s.value).startOf("month");for(let g=0;g<3;g++){const m=h[g];for(let v=0;v<4;v++){let b=m[v];b||(b={row:g,column:v,type:"normal",inRange:!1,start:!1,end:!1}),b.type="normal";const $=g*4+v,y=e.date.startOf("year").month($),w=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate;b.inRange=e.minDate&&y.isSameOrAfter(e.minDate,"month")&&w&&y.isSameOrBefore(w,"month")||e.minDate&&y.isSameOrBefore(e.minDate,"month")&&w&&y.isSameOrAfter(w,"month"),((f=e.minDate)==null?void 0:f.isSameOrAfter(w))?(b.start=w&&y.isSame(w,"month"),b.end=e.minDate&&y.isSame(e.minDate,"month")):(b.start=e.minDate&&y.isSame(e.minDate,"month"),b.end=w&&y.isSame(w,"month")),p.isSame(y)&&(b.type="today"),b.text=$;const x=y.toDate();b.disabled=e.disabledDate&&e.disabledDate(x),m[v]=b}}return h});return{handleMouseMove:f=>{if(!e.rangeState.selecting)return;let h=f.target;if(h.tagName==="A"&&(h=h.parentNode.parentNode),h.tagName==="DIV"&&(h=h.parentNode),h.tagName!=="TD")return;const p=h.parentNode.rowIndex,g=h.cellIndex;l.value[p][g].disabled||(p!==i.value||g!==a.value)&&(i.value=p,a.value=g,t.emit("changerange",{selecting:!0,endDate:e.date.startOf("year").month(p*4+g)}))},handleMonthTableClick:f=>{let h=f.target;if(h.tagName==="A"&&(h=h.parentNode.parentNode),h.tagName==="DIV"&&(h=h.parentNode),h.tagName!=="TD"||bi(h,"disabled"))return;const p=h.cellIndex,m=h.parentNode.rowIndex*4+p,v=e.date.startOf("year").month(m);e.selectionMode==="range"?e.rangeState.selecting?(v>=e.minDate?t.emit("pick",{minDate:e.minDate,maxDate:v}):t.emit("pick",{minDate:v,maxDate:e.minDate}),t.emit("select",!1)):(t.emit("pick",{minDate:v,maxDate:null}),t.emit("select",!0)):t.emit("pick",m)},rows:l,getCellStyle:f=>{const h={},p=e.date.year(),g=new Date,m=f.text;return h.disabled=e.disabledDate?Qme(p,m,s.value).every(e.disabledDate):!1,h.current=Au(e.parsedValue).findIndex(v=>v.year()===p&&v.month()===m)>=0,h.today=g.getFullYear()===p&&g.getMonth()===m,f.inRange&&(h["in-range"]=!0,f.start&&(h["start-date"]=!0),f.end&&(h["end-date"]=!0)),h},t:n,months:o}}}),tve={class:"cell"};function nve(e,t,n,s,o,r){return A(),B("table",{class:"el-month-table",onClick:t[0]||(t[0]=(...i)=>e.handleMonthTableClick&&e.handleMonthTableClick(...i)),onMousemove:t[1]||(t[1]=(...i)=>e.handleMouseMove&&e.handleMouseMove(...i))},[W("tbody",null,[(A(!0),B(at,null,Zt(e.rows,(i,a)=>(A(),B("tr",{key:a},[(A(!0),B(at,null,Zt(i,(l,u)=>(A(),B("td",{key:u,class:q(e.getCellStyle(l))},[W("div",null,[W("a",tve,Pe(e.t("el.datepicker.months."+e.months[l.text])),1)])],2))),128))]))),128))])],32)}var qL=We(eve,[["render",nve]]);const sve=(e,t)=>{const n=Ct(String(e)).locale(t).startOf("year"),o=n.endOf("year").dayOfYear();return ll(o).map(r=>n.add(r,"day").toDate())},ove=ge({props:{disabledDate:{type:Function},parsedValue:{type:Object},date:{type:Object}},emits:["pick"],setup(e,t){const{lang:n}=In();return{startYear:R(()=>Math.floor(e.date.year()/10)*10),getCellStyle:i=>{const a={},l=Ct().locale(n.value);return a.disabled=e.disabledDate?sve(i,n.value).every(e.disabledDate):!1,a.current=Au(e.parsedValue).findIndex(u=>u.year()===i)>=0,a.today=l.year()===i,a},handleYearTableClick:i=>{const a=i.target;if(a.tagName==="A"){if(bi(a.parentNode,"disabled"))return;const l=a.textContent||a.innerText;t.emit("pick",Number(l))}}}}}),rve={class:"cell"},ive={class:"cell"},ave={class:"cell"},lve={class:"cell"},uve={class:"cell"},cve={class:"cell"},dve={class:"cell"},fve={class:"cell"},hve={class:"cell"},pve={class:"cell"},gve=W("td",null,null,-1),mve=W("td",null,null,-1);function vve(e,t,n,s,o,r){return A(),B("table",{class:"el-year-table",onClick:t[0]||(t[0]=(...i)=>e.handleYearTableClick&&e.handleYearTableClick(...i))},[W("tbody",null,[W("tr",null,[W("td",{class:q(["available",e.getCellStyle(e.startYear+0)])},[W("a",rve,Pe(e.startYear),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+1)])},[W("a",ive,Pe(e.startYear+1),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+2)])},[W("a",ave,Pe(e.startYear+2),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+3)])},[W("a",lve,Pe(e.startYear+3),1)],2)]),W("tr",null,[W("td",{class:q(["available",e.getCellStyle(e.startYear+4)])},[W("a",uve,Pe(e.startYear+4),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+5)])},[W("a",cve,Pe(e.startYear+5),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+6)])},[W("a",dve,Pe(e.startYear+6),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+7)])},[W("a",fve,Pe(e.startYear+7),1)],2)]),W("tr",null,[W("td",{class:q(["available",e.getCellStyle(e.startYear+8)])},[W("a",hve,Pe(e.startYear+8),1)],2),W("td",{class:q(["available",e.getCellStyle(e.startYear+9)])},[W("a",pve,Pe(e.startYear+9),1)],2),gve,mve])])])}var bve=We(ove,[["render",vve]]);const yve=(e,t,n)=>!0,wve=ge({components:{DateTable:KL,ElInput:ei,ElButton:ta,ElIcon:Ot,TimePickPanel:Z2,MonthTable:qL,YearTable:bve,DArrowLeft:E0,ArrowLeft:fc,DArrowRight:_0,ArrowRight:Qr},directives:{clickoutside:El},props:{visible:{type:Boolean,default:!1},parsedValue:{type:[Object,Array]},format:{type:String,default:""},type:{type:String,required:!0,validator:uL}},emits:["pick","set-picker-option","panel-change"],setup(e,t){const{t:n,lang:s}=In(),o=Ze("EP_PICKER_BASE"),r=Ze(R0),{shortcuts:i,disabledDate:a,cellClassName:l,defaultTime:u,arrowControl:c}=o.props,d=bo(o.props,"defaultValue"),f=L(Ct().locale(s.value)),h=R(()=>Ct(u).locale(s.value)),p=R(()=>f.value.month()),g=R(()=>f.value.year()),m=L([]),v=L(null),b=L(null),$=fe=>m.value.length>0?yve(fe,m.value,e.format||"HH:mm:ss"):!0,y=fe=>u&&!Y.value?h.value.year(fe.year()).month(fe.month()).date(fe.date()):ne.value?fe.millisecond(0):fe.startOf("day"),w=(fe,...Te)=>{if(!fe)t.emit("pick",fe,...Te);else if(Array.isArray(fe)){const rt=fe.map(y);t.emit("pick",rt,...Te)}else t.emit("pick",y(fe),...Te);v.value=null,b.value=null},C=fe=>{if(O.value==="day"){let Te=e.parsedValue?e.parsedValue.year(fe.year()).month(fe.month()).date(fe.date()):fe;$(Te)||(Te=m.value[0][0].year(fe.year()).month(fe.month()).date(fe.date())),f.value=Te,w(Te,ne.value)}else O.value==="week"?w(fe.date):O.value==="dates"&&w(fe,!0)},x=()=>{f.value=f.value.subtract(1,"month"),Ie("month")},k=()=>{f.value=f.value.add(1,"month"),Ie("month")},I=()=>{T.value==="year"?f.value=f.value.subtract(10,"year"):f.value=f.value.subtract(1,"year"),Ie("year")},S=()=>{T.value==="year"?f.value=f.value.add(10,"year"):f.value=f.value.add(1,"year"),Ie("year")},T=L("date"),_=R(()=>{const fe=n("el.datepicker.year");if(T.value==="year"){const Te=Math.floor(g.value/10)*10;return fe?`${Te} ${fe} - ${Te+9} ${fe}`:`${Te} - ${Te+9}`}return`${g.value} ${fe}`}),N=fe=>{const Te=typeof fe.value=="function"?fe.value():fe.value;if(Te){w(Ct(Te).locale(s.value));return}fe.onClick&&fe.onClick(t)},O=R(()=>["week","month","year","dates"].includes(e.type)?e.type:"day");Oe(()=>O.value,fe=>{if(["month","year"].includes(fe)){T.value=fe;return}T.value="date"},{immediate:!0}),Oe(()=>T.value,()=>{r==null||r.updatePopper()});const M=R(()=>!!i.length),D=fe=>{f.value=f.value.startOf("month").month(fe),O.value==="month"?w(f.value):T.value="date",Ie("month")},F=fe=>{O.value==="year"?(f.value=f.value.startOf("year").year(fe),w(f.value)):(f.value=f.value.year(fe),T.value="month"),Ie("year")},V=()=>{T.value="month"},U=()=>{T.value="year"},ne=R(()=>e.type==="datetime"||e.type==="datetimerange"),be=R(()=>ne.value||O.value==="dates"),te=()=>{if(O.value==="dates")w(e.parsedValue);else{let fe=e.parsedValue;if(!fe){const Te=Ct(u).locale(s.value),rt=we();fe=Te.year(rt.year()).month(rt.month()).date(rt.date())}f.value=fe,w(fe)}},he=()=>{const Te=Ct().locale(s.value).toDate();(!a||!a(Te))&&$(Te)&&(f.value=Ct().locale(s.value),w(f.value))},oe=R(()=>yL(e.format)),G=R(()=>bL(e.format)),Y=R(()=>{if(b.value)return b.value;if(!(!e.parsedValue&&!d.value))return(e.parsedValue||f.value).format(oe.value)}),X=R(()=>{if(v.value)return v.value;if(!(!e.parsedValue&&!d.value))return(e.parsedValue||f.value).format(G.value)}),ae=L(!1),Se=()=>{ae.value=!0},Le=()=>{ae.value=!1},Be=(fe,Te,rt)=>{const Xe=e.parsedValue?e.parsedValue.hour(fe.hour()).minute(fe.minute()).second(fe.second()):fe;f.value=Xe,w(f.value,!0),rt||(ae.value=Te)},Fe=fe=>{const Te=Ct(fe,oe.value).locale(s.value);Te.isValid()&&$(Te)&&(f.value=Te.year(f.value.year()).month(f.value.month()).date(f.value.date()),b.value=null,ae.value=!1,w(f.value,!0))},j=fe=>{const Te=Ct(fe,G.value).locale(s.value);if(Te.isValid()){if(a&&a(Te.toDate()))return;f.value=Te.hour(f.value.hour()).minute(f.value.minute()).second(f.value.second()),v.value=null,w(f.value,!0)}},Q=fe=>Ct.isDayjs(fe)&&fe.isValid()&&(a?!a(fe.toDate()):!0),H=fe=>O.value==="dates"?fe.map(Te=>Te.format(e.format)):fe.format(e.format),se=fe=>Ct(fe,e.format).locale(s.value),we=()=>{const fe=Ct(d.value).locale(s.value);if(!d.value){const Te=h.value;return Ct().hour(Te.hour()).minute(Te.minute()).second(Te.second()).locale(s.value)}return fe},J=fe=>{const{code:Te,keyCode:rt}=fe,Xe=[Qe.up,Qe.down,Qe.left,Qe.right];e.visible&&!ae.value&&(Xe.includes(Te)&&(_e(rt),fe.stopPropagation(),fe.preventDefault()),Te===Qe.enter&&v.value===null&&b.value===null&&w(f,!1))},_e=fe=>{const Te={year:{38:-4,40:4,37:-1,39:1,offset:(Xe,lt)=>Xe.setFullYear(Xe.getFullYear()+lt)},month:{38:-4,40:4,37:-1,39:1,offset:(Xe,lt)=>Xe.setMonth(Xe.getMonth()+lt)},week:{38:-1,40:1,37:-1,39:1,offset:(Xe,lt)=>Xe.setDate(Xe.getDate()+lt*7)},day:{38:-7,40:7,37:-1,39:1,offset:(Xe,lt)=>Xe.setDate(Xe.getDate()+lt)}},rt=f.value.toDate();for(;Math.abs(f.value.diff(rt,"year",!0))<1;){const Xe=Te[O.value];if(Xe.offset(rt,Xe[fe]),a&&a(rt))continue;const lt=Ct(rt).locale(s.value);f.value=lt,t.emit("pick",lt,!0);break}},Ie=fe=>{t.emit("panel-change",f.value.toDate(),fe,T.value)};return t.emit("set-picker-option",["isValidValue",Q]),t.emit("set-picker-option",["formatToString",H]),t.emit("set-picker-option",["parseUserInput",se]),t.emit("set-picker-option",["handleKeydown",J]),Oe(()=>d.value,fe=>{fe&&(f.value=we())},{immediate:!0}),Oe(()=>e.parsedValue,fe=>{if(fe){if(O.value==="dates"||Array.isArray(fe))return;f.value=fe}else f.value=we()},{immediate:!0}),{handleTimePick:Be,handleTimePickClose:Le,onTimePickerInputFocus:Se,timePickerVisible:ae,visibleTime:Y,visibleDate:X,showTime:ne,changeToNow:he,onConfirm:te,footerVisible:be,handleYearPick:F,showMonthPicker:V,showYearPicker:U,handleMonthPick:D,hasShortcuts:M,shortcuts:i,arrowControl:c,disabledDate:a,cellClassName:l,selectionMode:O,handleShortcutClick:N,prevYear_:I,nextYear_:S,prevMonth_:x,nextMonth_:k,innerDate:f,t:n,yearLabel:_,currentView:T,month:p,handleDatePick:C,handleVisibleTimeChange:Fe,handleVisibleDateChange:j,timeFormat:oe,userInputTime:b,userInputDate:v}}}),$ve={class:"el-picker-panel__body-wrapper"},Cve={key:0,class:"el-picker-panel__sidebar"},xve=["onClick"],kve={class:"el-picker-panel__body"},Sve={key:0,class:"el-date-picker__time-header"},Ive={class:"el-date-picker__editor-wrap"},Tve={class:"el-date-picker__editor-wrap"},Eve=["aria-label"],_ve=["aria-label"],Nve=["aria-label"],Ave=["aria-label"],Dve={class:"el-picker-panel__content"},Rve={class:"el-picker-panel__footer"};function Ove(e,t,n,s,o,r){const i=ie("el-input"),a=ie("time-pick-panel"),l=ie("d-arrow-left"),u=ie("el-icon"),c=ie("arrow-left"),d=ie("d-arrow-right"),f=ie("arrow-right"),h=ie("date-table"),p=ie("year-table"),g=ie("month-table"),m=ie("el-button"),v=Vo("clickoutside");return A(),B("div",{class:q(["el-picker-panel el-date-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts,"has-time":e.showTime}]])},[W("div",$ve,[Re(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(A(),B("div",Cve,[(A(!0),B(at,null,Zt(e.shortcuts,(b,$)=>(A(),B("button",{key:$,type:"button",class:"el-picker-panel__shortcut",onClick:y=>e.handleShortcutClick(b)},Pe(b.text),9,xve))),128))])):ce("v-if",!0),W("div",kve,[e.showTime?(A(),B("div",Sve,[W("span",Ive,[le(i,{placeholder:e.t("el.datepicker.selectDate"),"model-value":e.visibleDate,size:"small",onInput:t[0]||(t[0]=b=>e.userInputDate=b),onChange:e.handleVisibleDateChange},null,8,["placeholder","model-value","onChange"])]),$t((A(),B("span",Tve,[le(i,{placeholder:e.t("el.datepicker.selectTime"),"model-value":e.visibleTime,size:"small",onFocus:e.onTimePickerInputFocus,onInput:t[1]||(t[1]=b=>e.userInputTime=b),onChange:e.handleVisibleTimeChange},null,8,["placeholder","model-value","onFocus","onChange"]),le(a,{visible:e.timePickerVisible,format:e.timeFormat,"time-arrow-control":e.arrowControl,"parsed-value":e.innerDate,onPick:e.handleTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[v,e.handleTimePickClose]])])):ce("v-if",!0),$t(W("div",{class:q(["el-date-picker__header",{"el-date-picker__header--bordered":e.currentView==="year"||e.currentView==="month"}])},[W("button",{type:"button","aria-label":e.t("el.datepicker.prevYear"),class:"el-picker-panel__icon-btn el-date-picker__prev-btn d-arrow-left",onClick:t[2]||(t[2]=(...b)=>e.prevYear_&&e.prevYear_(...b))},[le(u,null,{default:re(()=>[le(l)]),_:1})],8,Eve),$t(W("button",{type:"button","aria-label":e.t("el.datepicker.prevMonth"),class:"el-picker-panel__icon-btn el-date-picker__prev-btn arrow-left",onClick:t[3]||(t[3]=(...b)=>e.prevMonth_&&e.prevMonth_(...b))},[le(u,null,{default:re(()=>[le(c)]),_:1})],8,_ve),[[en,e.currentView==="date"]]),W("span",{role:"button",class:"el-date-picker__header-label",onClick:t[4]||(t[4]=(...b)=>e.showYearPicker&&e.showYearPicker(...b))},Pe(e.yearLabel),1),$t(W("span",{role:"button",class:q(["el-date-picker__header-label",{active:e.currentView==="month"}]),onClick:t[5]||(t[5]=(...b)=>e.showMonthPicker&&e.showMonthPicker(...b))},Pe(e.t(`el.datepicker.month${e.month+1}`)),3),[[en,e.currentView==="date"]]),W("button",{type:"button","aria-label":e.t("el.datepicker.nextYear"),class:"el-picker-panel__icon-btn el-date-picker__next-btn d-arrow-right",onClick:t[6]||(t[6]=(...b)=>e.nextYear_&&e.nextYear_(...b))},[le(u,null,{default:re(()=>[le(d)]),_:1})],8,Nve),$t(W("button",{type:"button","aria-label":e.t("el.datepicker.nextMonth"),class:"el-picker-panel__icon-btn el-date-picker__next-btn arrow-right",onClick:t[7]||(t[7]=(...b)=>e.nextMonth_&&e.nextMonth_(...b))},[le(u,null,{default:re(()=>[le(f)]),_:1})],8,Ave),[[en,e.currentView==="date"]])],2),[[en,e.currentView!=="time"]]),W("div",Dve,[e.currentView==="date"?(A(),ve(h,{key:0,"selection-mode":e.selectionMode,date:e.innerDate,"parsed-value":e.parsedValue,"disabled-date":e.disabledDate,onPick:e.handleDatePick},null,8,["selection-mode","date","parsed-value","disabled-date","onPick"])):ce("v-if",!0),e.currentView==="year"?(A(),ve(p,{key:1,date:e.innerDate,"disabled-date":e.disabledDate,"parsed-value":e.parsedValue,onPick:e.handleYearPick},null,8,["date","disabled-date","parsed-value","onPick"])):ce("v-if",!0),e.currentView==="month"?(A(),ve(g,{key:2,date:e.innerDate,"parsed-value":e.parsedValue,"disabled-date":e.disabledDate,onPick:e.handleMonthPick},null,8,["date","parsed-value","disabled-date","onPick"])):ce("v-if",!0)])])]),$t(W("div",Rve,[$t(le(m,{size:"small",type:"text",class:"el-picker-panel__link-btn",onClick:e.changeToNow},{default:re(()=>[qt(Pe(e.t("el.datepicker.now")),1)]),_:1},8,["onClick"]),[[en,e.selectionMode!=="dates"]]),le(m,{plain:"",size:"small",class:"el-picker-panel__link-btn",onClick:e.onConfirm},{default:re(()=>[qt(Pe(e.t("el.datepicker.confirm")),1)]),_:1},8,["onClick"])],512),[[en,e.footerVisible&&e.currentView==="date"]])],2)}var Mve=We(wve,[["render",Ove]]);const Pve=ge({directives:{clickoutside:El},components:{TimePickPanel:Z2,DateTable:KL,ElInput:ei,ElButton:ta,ElIcon:Ot,DArrowLeft:E0,ArrowLeft:fc,DArrowRight:_0,ArrowRight:Qr},props:{unlinkPanels:Boolean,parsedValue:{type:Array},type:{type:String,required:!0,validator:uL}},emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,t){const{t:n,lang:s}=In(),o=L(Ct().locale(s.value)),r=L(Ct().locale(s.value).add(1,"month")),i=L(null),a=L(null),l=L({min:null,max:null}),u=L({min:null,max:null}),c=R(()=>`${o.value.year()} ${n("el.datepicker.year")} ${n(`el.datepicker.month${o.value.month()+1}`)}`),d=R(()=>`${r.value.year()} ${n("el.datepicker.year")} ${n(`el.datepicker.month${r.value.month()+1}`)}`),f=R(()=>o.value.year()),h=R(()=>o.value.month()),p=R(()=>r.value.year()),g=R(()=>r.value.month()),m=R(()=>!!rt.length),v=R(()=>l.value.min!==null?l.value.min:i.value?i.value.format(C.value):""),b=R(()=>l.value.max!==null?l.value.max:a.value||i.value?(a.value||i.value).format(C.value):""),$=R(()=>u.value.min!==null?u.value.min:i.value?i.value.format(w.value):""),y=R(()=>u.value.max!==null?u.value.max:a.value||i.value?(a.value||i.value).format(w.value):""),w=R(()=>yL(vt)),C=R(()=>bL(vt)),x=()=>{o.value=o.value.subtract(1,"year"),e.unlinkPanels||(r.value=o.value.add(1,"month")),M("year")},k=()=>{o.value=o.value.subtract(1,"month"),e.unlinkPanels||(r.value=o.value.add(1,"month")),M("month")},I=()=>{e.unlinkPanels?r.value=r.value.add(1,"year"):(o.value=o.value.add(1,"year"),r.value=o.value.add(1,"month")),M("year")},S=()=>{e.unlinkPanels?r.value=r.value.add(1,"month"):(o.value=o.value.add(1,"month"),r.value=o.value.add(1,"month")),M("month")},T=()=>{o.value=o.value.add(1,"year"),M("year")},_=()=>{o.value=o.value.add(1,"month"),M("month")},N=()=>{r.value=r.value.subtract(1,"year"),M("year")},O=()=>{r.value=r.value.subtract(1,"month"),M("month")},M=Ne=>{t.emit("panel-change",[o.value.toDate(),r.value.toDate()],Ne)},D=R(()=>{const Ne=(h.value+1)%12,ct=h.value+1>=12?1:0;return e.unlinkPanels&&new Date(f.value+ct,Ne)<new Date(p.value,g.value)}),F=R(()=>e.unlinkPanels&&p.value*12+g.value-(f.value*12+h.value+1)>=12),V=Ne=>Array.isArray(Ne)&&Ne[0]&&Ne[1]&&Ne[0].valueOf()<=Ne[1].valueOf(),U=L({endDate:null,selecting:!1}),ne=R(()=>!(i.value&&a.value&&!U.value.selecting&&V([i.value,a.value]))),be=Ne=>{U.value=Ne},te=Ne=>{U.value.selecting=Ne,Ne||(U.value.endDate=null)},he=R(()=>e.type==="datetime"||e.type==="datetimerange"),oe=(Ne=!1)=>{V([i.value,a.value])&&t.emit("pick",[i.value,a.value],Ne)},G=(Ne,ct)=>{if(!!Ne)return Ye?Ct(Ye[ct]||Ye).locale(s.value).year(Ne.year()).month(Ne.month()).date(Ne.date()):Ne},Y=(Ne,ct=!0)=>{const wt=Ne.minDate,on=Ne.maxDate,cn=G(wt,0),Kt=G(on,1);a.value===Kt&&i.value===cn||(t.emit("calendar-change",[wt.toDate(),on&&on.toDate()]),a.value=Kt,i.value=cn,!(!ct||he.value)&&oe())},X=Ne=>{const ct=typeof Ne.value=="function"?Ne.value():Ne.value;if(ct){t.emit("pick",[Ct(ct[0]).locale(s.value),Ct(ct[1]).locale(s.value)]);return}Ne.onClick&&Ne.onClick(t)},ae=L(!1),Se=L(!1),Le=()=>{ae.value=!1},Be=()=>{Se.value=!1},Fe=(Ne,ct)=>{l.value[ct]=Ne;const wt=Ct(Ne,C.value).locale(s.value);if(wt.isValid()){if(Xe&&Xe(wt.toDate()))return;ct==="min"?(o.value=wt,i.value=(i.value||o.value).year(wt.year()).month(wt.month()).date(wt.date()),e.unlinkPanels||(r.value=wt.add(1,"month"),a.value=i.value.add(1,"month"))):(r.value=wt,a.value=(a.value||r.value).year(wt.year()).month(wt.month()).date(wt.date()),e.unlinkPanels||(o.value=wt.subtract(1,"month"),i.value=a.value.subtract(1,"month")))}},j=(Ne,ct)=>{l.value[ct]=null},Q=(Ne,ct)=>{u.value[ct]=Ne;const wt=Ct(Ne,w.value).locale(s.value);wt.isValid()&&(ct==="min"?(ae.value=!0,i.value=(i.value||o.value).hour(wt.hour()).minute(wt.minute()).second(wt.second()),(!a.value||a.value.isBefore(i.value))&&(a.value=i.value)):(Se.value=!0,a.value=(a.value||r.value).hour(wt.hour()).minute(wt.minute()).second(wt.second()),r.value=a.value,a.value&&a.value.isBefore(i.value)&&(i.value=a.value)))},H=(Ne,ct)=>{u.value[ct]=null,ct==="min"?(o.value=i.value,ae.value=!1):(r.value=a.value,Se.value=!1)},se=(Ne,ct,wt)=>{u.value.min||(Ne&&(o.value=Ne,i.value=(i.value||o.value).hour(Ne.hour()).minute(Ne.minute()).second(Ne.second())),wt||(ae.value=ct),(!a.value||a.value.isBefore(i.value))&&(a.value=i.value,r.value=Ne))},we=(Ne,ct,wt)=>{u.value.max||(Ne&&(r.value=Ne,a.value=(a.value||r.value).hour(Ne.hour()).minute(Ne.minute()).second(Ne.second())),wt||(Se.value=ct),a.value&&a.value.isBefore(i.value)&&(i.value=a.value))},J=()=>{o.value=fe()[0],r.value=o.value.add(1,"month"),t.emit("pick",null)},_e=Ne=>Array.isArray(Ne)?Ne.map(ct=>ct.format(vt)):Ne.format(vt),Ie=Ne=>Array.isArray(Ne)?Ne.map(ct=>Ct(ct,vt).locale(s.value)):Ct(Ne,vt).locale(s.value),fe=()=>{let Ne;if(Array.isArray(Ge.value)){const ct=Ct(Ge.value[0]);let wt=Ct(Ge.value[1]);return e.unlinkPanels||(wt=ct.add(1,"month")),[ct,wt]}else Ge.value?Ne=Ct(Ge.value):Ne=Ct();return Ne=Ne.locale(s.value),[Ne,Ne.add(1,"month")]};t.emit("set-picker-option",["isValidValue",V]),t.emit("set-picker-option",["parseUserInput",Ie]),t.emit("set-picker-option",["formatToString",_e]),t.emit("set-picker-option",["handleClear",J]);const Te=Ze("EP_PICKER_BASE"),{shortcuts:rt,disabledDate:Xe,cellClassName:lt,format:vt,defaultTime:Ye,arrowControl:de,clearable:De}=Te.props,Ge=bo(Te.props,"defaultValue");return Oe(()=>Ge.value,Ne=>{if(Ne){const ct=fe();i.value=null,a.value=null,o.value=ct[0],r.value=ct[1]}},{immediate:!0}),Oe(()=>e.parsedValue,Ne=>{if(Ne&&Ne.length===2)if(i.value=Ne[0],a.value=Ne[1],o.value=i.value,e.unlinkPanels&&a.value){const ct=i.value.year(),wt=i.value.month(),on=a.value.year(),cn=a.value.month();r.value=ct===on&&wt===cn?a.value.add(1,"month"):a.value}else r.value=o.value.add(1,"month"),a.value&&(r.value=r.value.hour(a.value.hour()).minute(a.value.minute()).second(a.value.second()));else{const ct=fe();i.value=null,a.value=null,o.value=ct[0],r.value=ct[1]}},{immediate:!0}),{shortcuts:rt,disabledDate:Xe,cellClassName:lt,minTimePickerVisible:ae,maxTimePickerVisible:Se,handleMinTimeClose:Le,handleMaxTimeClose:Be,handleShortcutClick:X,rangeState:U,minDate:i,maxDate:a,handleRangePick:Y,onSelect:te,handleChangeRange:be,btnDisabled:ne,enableYearArrow:F,enableMonthArrow:D,rightPrevMonth:O,rightPrevYear:N,rightNextMonth:S,rightNextYear:I,leftPrevMonth:k,leftPrevYear:x,leftNextMonth:_,leftNextYear:T,hasShortcuts:m,leftLabel:c,rightLabel:d,leftDate:o,rightDate:r,showTime:he,t:n,minVisibleDate:v,maxVisibleDate:b,minVisibleTime:$,maxVisibleTime:y,arrowControl:de,handleDateInput:Fe,handleDateChange:j,handleTimeInput:Q,handleTimeChange:H,handleMinTimePick:se,handleMaxTimePick:we,handleClear:J,handleConfirm:oe,timeFormat:w,clearable:De}}}),Fve={class:"el-picker-panel__body-wrapper"},Lve={key:0,class:"el-picker-panel__sidebar"},Bve=["onClick"],zve={class:"el-picker-panel__body"},Vve={key:0,class:"el-date-range-picker__time-header"},Wve={class:"el-date-range-picker__editors-wrap"},Hve={class:"el-date-range-picker__time-picker-wrap"},Uve={class:"el-date-range-picker__time-picker-wrap"},jve={class:"el-date-range-picker__editors-wrap is-right"},Gve={class:"el-date-range-picker__time-picker-wrap"},Kve={class:"el-date-range-picker__time-picker-wrap"},qve={class:"el-picker-panel__content el-date-range-picker__content is-left"},Yve={class:"el-date-range-picker__header"},Xve=["disabled"],Zve=["disabled"],Jve={class:"el-picker-panel__content el-date-range-picker__content is-right"},Qve={class:"el-date-range-picker__header"},ebe=["disabled"],tbe=["disabled"],nbe={key:0,class:"el-picker-panel__footer"};function sbe(e,t,n,s,o,r){const i=ie("el-input"),a=ie("time-pick-panel"),l=ie("arrow-right"),u=ie("el-icon"),c=ie("d-arrow-left"),d=ie("arrow-left"),f=ie("d-arrow-right"),h=ie("date-table"),p=ie("el-button"),g=Vo("clickoutside");return A(),B("div",{class:q(["el-picker-panel el-date-range-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts,"has-time":e.showTime}]])},[W("div",Fve,[Re(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(A(),B("div",Lve,[(A(!0),B(at,null,Zt(e.shortcuts,(m,v)=>(A(),B("button",{key:v,type:"button",class:"el-picker-panel__shortcut",onClick:b=>e.handleShortcutClick(m)},Pe(m.text),9,Bve))),128))])):ce("v-if",!0),W("div",zve,[e.showTime?(A(),B("div",Vve,[W("span",Wve,[W("span",Hve,[le(i,{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),class:"el-date-range-picker__editor","model-value":e.minVisibleDate,onInput:t[0]||(t[0]=m=>e.handleDateInput(m,"min")),onChange:t[1]||(t[1]=m=>e.handleDateChange(m,"min"))},null,8,["disabled","placeholder","model-value"])]),$t((A(),B("span",Uve,[le(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),"model-value":e.minVisibleTime,onFocus:t[2]||(t[2]=m=>e.minTimePickerVisible=!0),onInput:t[3]||(t[3]=m=>e.handleTimeInput(m,"min")),onChange:t[4]||(t[4]=m=>e.handleTimeChange(m,"min"))},null,8,["disabled","placeholder","model-value"]),le(a,{visible:e.minTimePickerVisible,format:e.timeFormat,"datetime-role":"start","time-arrow-control":e.arrowControl,"parsed-value":e.leftDate,onPick:e.handleMinTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[g,e.handleMinTimeClose]])]),W("span",null,[le(u,null,{default:re(()=>[le(l)]),_:1})]),W("span",jve,[W("span",Gve,[le(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),"model-value":e.maxVisibleDate,readonly:!e.minDate,onInput:t[5]||(t[5]=m=>e.handleDateInput(m,"max")),onChange:t[6]||(t[6]=m=>e.handleDateChange(m,"max"))},null,8,["disabled","placeholder","model-value","readonly"])]),$t((A(),B("span",Kve,[le(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),"model-value":e.maxVisibleTime,readonly:!e.minDate,onFocus:t[7]||(t[7]=m=>e.minDate&&(e.maxTimePickerVisible=!0)),onInput:t[8]||(t[8]=m=>e.handleTimeInput(m,"max")),onChange:t[9]||(t[9]=m=>e.handleTimeChange(m,"max"))},null,8,["disabled","placeholder","model-value","readonly"]),le(a,{"datetime-role":"end",visible:e.maxTimePickerVisible,format:e.timeFormat,"time-arrow-control":e.arrowControl,"parsed-value":e.rightDate,onPick:e.handleMaxTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[g,e.handleMaxTimeClose]])])])):ce("v-if",!0),W("div",qve,[W("div",Yve,[W("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-left",onClick:t[10]||(t[10]=(...m)=>e.leftPrevYear&&e.leftPrevYear(...m))},[le(u,null,{default:re(()=>[le(c)]),_:1})]),W("button",{type:"button",class:"el-picker-panel__icon-btn arrow-left",onClick:t[11]||(t[11]=(...m)=>e.leftPrevMonth&&e.leftPrevMonth(...m))},[le(u,null,{default:re(()=>[le(d)]),_:1})]),e.unlinkPanels?(A(),B("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-right"]),onClick:t[12]||(t[12]=(...m)=>e.leftNextYear&&e.leftNextYear(...m))},[le(u,null,{default:re(()=>[le(f)]),_:1})],10,Xve)):ce("v-if",!0),e.unlinkPanels?(A(),B("button",{key:1,type:"button",disabled:!e.enableMonthArrow,class:q([{"is-disabled":!e.enableMonthArrow},"el-picker-panel__icon-btn arrow-right"]),onClick:t[13]||(t[13]=(...m)=>e.leftNextMonth&&e.leftNextMonth(...m))},[le(u,null,{default:re(()=>[le(l)]),_:1})],10,Zve)):ce("v-if",!0),W("div",null,Pe(e.leftLabel),1)]),le(h,{"selection-mode":"range",date:e.leftDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onPick","onSelect"])]),W("div",Jve,[W("div",Qve,[e.unlinkPanels?(A(),B("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-left"]),onClick:t[14]||(t[14]=(...m)=>e.rightPrevYear&&e.rightPrevYear(...m))},[le(u,null,{default:re(()=>[le(c)]),_:1})],10,ebe)):ce("v-if",!0),e.unlinkPanels?(A(),B("button",{key:1,type:"button",disabled:!e.enableMonthArrow,class:q([{"is-disabled":!e.enableMonthArrow},"el-picker-panel__icon-btn arrow-left"]),onClick:t[15]||(t[15]=(...m)=>e.rightPrevMonth&&e.rightPrevMonth(...m))},[le(u,null,{default:re(()=>[le(d)]),_:1})],10,tbe)):ce("v-if",!0),W("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-right",onClick:t[16]||(t[16]=(...m)=>e.rightNextYear&&e.rightNextYear(...m))},[le(u,null,{default:re(()=>[le(f)]),_:1})]),W("button",{type:"button",class:"el-picker-panel__icon-btn arrow-right",onClick:t[17]||(t[17]=(...m)=>e.rightNextMonth&&e.rightNextMonth(...m))},[le(u,null,{default:re(()=>[le(l)]),_:1})]),W("div",null,Pe(e.rightLabel),1)]),le(h,{"selection-mode":"range",date:e.rightDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onPick","onSelect"])])])]),e.showTime?(A(),B("div",nbe,[e.clearable?(A(),ve(p,{key:0,size:"small",type:"text",class:"el-picker-panel__link-btn",onClick:e.handleClear},{default:re(()=>[qt(Pe(e.t("el.datepicker.clear")),1)]),_:1},8,["onClick"])):ce("v-if",!0),le(p,{plain:"",size:"small",class:"el-picker-panel__link-btn",disabled:e.btnDisabled,onClick:t[18]||(t[18]=m=>e.handleConfirm(!1))},{default:re(()=>[qt(Pe(e.t("el.datepicker.confirm")),1)]),_:1},8,["disabled"])])):ce("v-if",!0)],2)}var obe=We(Pve,[["render",sbe]]);const rbe=ge({components:{MonthTable:qL,ElIcon:Ot,DArrowLeft:E0,DArrowRight:_0},props:{unlinkPanels:Boolean,parsedValue:{type:Array}},emits:["pick","set-picker-option"],setup(e,t){const{t:n,lang:s}=In(),o=L(Ct().locale(s.value)),r=L(Ct().locale(s.value).add(1,"year")),i=R(()=>!!_.length),a=D=>{const F=typeof D.value=="function"?D.value():D.value;if(F){t.emit("pick",[Ct(F[0]).locale(s.value),Ct(F[1]).locale(s.value)]);return}D.onClick&&D.onClick(t)},l=()=>{o.value=o.value.subtract(1,"year"),e.unlinkPanels||(r.value=r.value.subtract(1,"year"))},u=()=>{e.unlinkPanels||(o.value=o.value.add(1,"year")),r.value=r.value.add(1,"year")},c=()=>{o.value=o.value.add(1,"year")},d=()=>{r.value=r.value.subtract(1,"year")},f=R(()=>`${o.value.year()} ${n("el.datepicker.year")}`),h=R(()=>`${r.value.year()} ${n("el.datepicker.year")}`),p=R(()=>o.value.year()),g=R(()=>r.value.year()===o.value.year()?o.value.year()+1:r.value.year()),m=R(()=>e.unlinkPanels&&g.value>p.value+1),v=L(null),b=L(null),$=L({endDate:null,selecting:!1}),y=D=>{$.value=D},w=(D,F=!0)=>{const V=D.minDate,U=D.maxDate;b.value===U&&v.value===V||(b.value=U,v.value=V,!!F&&x())},C=D=>Array.isArray(D)&&D&&D[0]&&D[1]&&D[0].valueOf()<=D[1].valueOf(),x=(D=!1)=>{C([v.value,b.value])&&t.emit("pick",[v.value,b.value],D)},k=D=>{$.value.selecting=D,D||($.value.endDate=null)},I=D=>D.map(F=>F.format(O)),S=()=>{let D;if(Array.isArray(M.value)){const F=Ct(M.value[0]);let V=Ct(M.value[1]);return e.unlinkPanels||(V=F.add(1,"year")),[F,V]}else M.value?D=Ct(M.value):D=Ct();return D=D.locale(s.value),[D,D.add(1,"year")]};t.emit("set-picker-option",["formatToString",I]);const T=Ze("EP_PICKER_BASE"),{shortcuts:_,disabledDate:N,format:O}=T.props,M=bo(T.props,"defaultValue");return Oe(()=>M.value,D=>{if(D){const F=S();o.value=F[0],r.value=F[1]}},{immediate:!0}),Oe(()=>e.parsedValue,D=>{if(D&&D.length===2)if(v.value=D[0],b.value=D[1],o.value=v.value,e.unlinkPanels&&b.value){const F=v.value.year(),V=b.value.year();r.value=F===V?b.value.add(1,"year"):b.value}else r.value=o.value.add(1,"year");else{const F=S();v.value=null,b.value=null,o.value=F[0],r.value=F[1]}},{immediate:!0}),{shortcuts:_,disabledDate:N,onSelect:k,handleRangePick:w,rangeState:$,handleChangeRange:y,minDate:v,maxDate:b,enableYearArrow:m,leftLabel:f,rightLabel:h,leftNextYear:c,leftPrevYear:l,rightNextYear:u,rightPrevYear:d,t:n,leftDate:o,rightDate:r,hasShortcuts:i,handleShortcutClick:a}}}),ibe={class:"el-picker-panel__body-wrapper"},abe={key:0,class:"el-picker-panel__sidebar"},lbe=["onClick"],ube={class:"el-picker-panel__body"},cbe={class:"el-picker-panel__content el-date-range-picker__content is-left"},dbe={class:"el-date-range-picker__header"},fbe=["disabled"],hbe={class:"el-picker-panel__content el-date-range-picker__content is-right"},pbe={class:"el-date-range-picker__header"},gbe=["disabled"];function mbe(e,t,n,s,o,r){const i=ie("d-arrow-left"),a=ie("el-icon"),l=ie("d-arrow-right"),u=ie("month-table");return A(),B("div",{class:q(["el-picker-panel el-date-range-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts}]])},[W("div",ibe,[Re(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(A(),B("div",abe,[(A(!0),B(at,null,Zt(e.shortcuts,(c,d)=>(A(),B("button",{key:d,type:"button",class:"el-picker-panel__shortcut",onClick:f=>e.handleShortcutClick(c)},Pe(c.text),9,lbe))),128))])):ce("v-if",!0),W("div",ube,[W("div",cbe,[W("div",dbe,[W("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-left",onClick:t[0]||(t[0]=(...c)=>e.leftPrevYear&&e.leftPrevYear(...c))},[le(a,null,{default:re(()=>[le(i)]),_:1})]),e.unlinkPanels?(A(),B("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-right"]),onClick:t[1]||(t[1]=(...c)=>e.leftNextYear&&e.leftNextYear(...c))},[le(a,null,{default:re(()=>[le(l)]),_:1})],10,fbe)):ce("v-if",!0),W("div",null,Pe(e.leftLabel),1)]),le(u,{"selection-mode":"range",date:e.leftDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onPick","onSelect"])]),W("div",hbe,[W("div",pbe,[e.unlinkPanels?(A(),B("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-left"]),onClick:t[2]||(t[2]=(...c)=>e.rightPrevYear&&e.rightPrevYear(...c))},[le(a,null,{default:re(()=>[le(i)]),_:1})],10,gbe)):ce("v-if",!0),W("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-right",onClick:t[3]||(t[3]=(...c)=>e.rightNextYear&&e.rightNextYear(...c))},[le(a,null,{default:re(()=>[le(l)]),_:1})]),W("div",null,Pe(e.rightLabel),1)]),le(u,{"selection-mode":"range",date:e.rightDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onPick","onSelect"])])])])],2)}var vbe=We(rbe,[["render",mbe]]);Ct.extend(aL);Ct.extend(Hme);Ct.extend(Y2);Ct.extend(Ume);Ct.extend(jme);Ct.extend(Gme);Ct.extend(Kme);Ct.extend(qme);const bbe=function(e){return e==="daterange"||e==="datetimerange"?obe:e==="monthrange"?vbe:Mve};var ybe=ge({name:"ElDatePicker",install:null,props:zt(ut({},X2),{type:{type:String,default:"date"}}),emits:["update:modelValue"],setup(e,t){Vt("ElPopperOptions",e.popperOptions),Vt(GL,{ctx:t});const n=L(null),s=zt(ut({},e),{focus:(o=!0)=>{var r;(r=n.value)==null||r.focus(o)}});return t.expose(s),()=>{var o;const r=(o=e.format)!=null?o:Sde[e.type]||sh;return He(cL,zt(ut({},e),{format:r,type:e.type,ref:n,"onUpdate:modelValue":i=>t.emit("update:modelValue",i)}),{default:i=>He(bbe(e.type),i),"range-separator":()=>Re(t.slots,"range-separator")})}}});const zv=ybe;zv.install=e=>{e.component(zv.name,zv)};const wbe=zv;var Mr=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Mr||{});const YL=e=>As(e)&&e.type===at,$be=e=>e.type===xr,Cbe=e=>As(e)&&!YL(e)&&!$be(e),xbe=e=>{if(!As(e))return;const t=e.props||{},n=e.type.props||{},s={};return Object.keys(n).forEach(o=>{Ht(n[o],"default")&&(s[o]=n[o].default)}),Object.keys(t).forEach(o=>{s[Kr(o)]=t[o]}),s},ek="elDescriptions";var SA=ge({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:Ze(ek,{})}},render(){var e,t,n,s,o,r;const i=xbe(this.cell),{border:a,direction:l}=this.descriptions,u=l==="vertical",c=((n=(t=(e=this.cell)==null?void 0:e.children)==null?void 0:t.label)==null?void 0:n.call(t))||i.label,d=(r=(o=(s=this.cell)==null?void 0:s.children)==null?void 0:o.default)==null?void 0:r.call(o),f=i.span,h=i.align?`is-${i.align}`:"",p=i.labelAlign?`is-${i.labelAlign}`:h,g=i.className,m=i.labelClassName,v={width:Ia(i.width),minWidth:Ia(i.minWidth)},b=At("descriptions");switch(this.type){case"label":return He(this.tag,{style:v,class:[b.e("cell"),b.e("label"),b.is("bordered-label",a),b.is("vertical-label",u),p,m],colSpan:u?f:1},c);case"content":return He(this.tag,{style:v,class:[b.e("cell"),b.e("content"),b.is("bordered-content",a),b.is("vertical-content",u),h,g],colSpan:u?f:f*2-1},d);default:return He("td",{style:v,class:[b.e("cell"),h],colSpan:f},[He("span",{class:[b.e("label"),m]},c),He("span",{class:[b.e("content"),g]},d)])}}});const kbe=ge({name:"ElDescriptionsRow",components:{[SA.name]:SA},props:{row:{type:Array}},setup(){return{descriptions:Ze(ek,{})}}}),Sbe={key:1};function Ibe(e,t,n,s,o,r){const i=ie("el-descriptions-cell");return e.descriptions.direction==="vertical"?(A(),B(at,{key:0},[W("tr",null,[(A(!0),B(at,null,Zt(e.row,(a,l)=>(A(),ve(i,{key:`tr1-${l}`,cell:a,tag:"th",type:"label"},null,8,["cell"]))),128))]),W("tr",null,[(A(!0),B(at,null,Zt(e.row,(a,l)=>(A(),ve(i,{key:`tr2-${l}`,cell:a,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(A(),B("tr",Sbe,[(A(!0),B(at,null,Zt(e.row,(a,l)=>(A(),B(at,{key:`tr3-${l}`},[e.descriptions.border?(A(),B(at,{key:0},[le(i,{cell:a,tag:"td",type:"label"},null,8,["cell"]),le(i,{cell:a,tag:"td",type:"content"},null,8,["cell"])],64)):(A(),ve(i,{key:1,cell:a,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}var IA=We(kbe,[["render",Ibe]]);const Tbe=ge({name:"ElDescriptions",components:{[IA.name]:IA},props:{border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,default:"horizontal"},size:{type:String,validator:nr},title:{type:String,default:""},extra:{type:String,default:""}},setup(e,{slots:t}){Vt(ek,e);const n=ks(),s=At("descriptions"),o=R(()=>[s.b(),s.is(s.m(n.value),!!n.value)]),r=l=>{const u=Array.isArray(l)?l:[l],c=[];return u.forEach(d=>{Array.isArray(d.children)?c.push(...r(d.children)):c.push(d)}),c},i=(l,u,c,d=!1)=>(l.props||(l.props={}),u>c&&(l.props.span=c),d&&(l.props.span=u),l);return{descriptionKls:o,getRows:()=>{var l;const u=r((l=t.default)==null?void 0:l.call(t)).filter(p=>{var g;return((g=p==null?void 0:p.type)==null?void 0:g.name)==="ElDescriptionsItem"}),c=[];let d=[],f=e.column,h=0;return u.forEach((p,g)=>{var m;const v=((m=p.props)==null?void 0:m.span)||1;if(g<u.length-1&&(h+=v>f?f:v),g===u.length-1){const b=e.column-h%e.column;d.push(i(p,b,f,!0)),c.push(d);return}v<f?(f-=v,d.push(p)):(d.push(i(p,v,f)),c.push(d),f=e.column,d=[])}),c},ns:s}}});function Ebe(e,t,n,s,o,r){const i=ie("el-descriptions-row");return A(),B("div",{class:q(e.descriptionKls)},[e.title||e.extra||e.$slots.title||e.$slots.extra?(A(),B("div",{key:0,class:q(e.ns.e("header"))},[W("div",{class:q(e.ns.e("title"))},[Re(e.$slots,"title",{},()=>[qt(Pe(e.title),1)])],2),W("div",{class:q(e.ns.e("extra"))},[Re(e.$slots,"extra",{},()=>[qt(Pe(e.extra),1)])],2)],2)):ce("v-if",!0),W("div",{class:q(e.ns.e("body"))},[W("table",{class:q([e.ns.e("table"),e.ns.is("bordered",e.border)])},[W("tbody",null,[(A(!0),B(at,null,Zt(e.getRows(),(a,l)=>(A(),ve(i,{key:l,row:a},null,8,["row"]))),128))])],2)],2)],2)}var _be=We(Tbe,[["render",Ebe]]),XL=ge({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const Nbe=Wt(_be,{DescriptionsItem:XL}),Abe=us(XL),Dbe=mt({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Je([String,Array,Object])},zIndex:{type:Je([String,Number])}}),Rbe={click:e=>e instanceof MouseEvent};var Obe=ge({name:"ElOverlay",props:Dbe,emits:Rbe,setup(e,{slots:t,emit:n}){const s=a=>{n("click",a)},{onClick:o,onMousedown:r,onMouseup:i}=mF(e.customMaskEvent?void 0:s);return()=>e.mask?le("div",{class:["el-overlay",e.overlayClass],style:{zIndex:e.zIndex},onClick:o,onMousedown:r,onMouseup:i},[Re(t,"default")],Mr.STYLE|Mr.CLASS|Mr.PROPS,["onClick","onMouseup","onMousedown"]):He("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Re(t,"default")])}});const tk=Obe,ZL=mt({appendToBody:{type:Boolean,default:!1},beforeClose:{type:Je(Function)},destroyOnClose:{type:Boolean,default:!1},center:{type:Boolean,default:!1},customClass:{type:String,default:""},closeIcon:{type:Je([String,Object]),default:""},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},title:{type:String,default:""},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number}}),JL={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Pt]:e=>typeof e=="boolean"},QL=(e,{emit:t},n)=>{const s=L(!1),o=L(!1),r=L(!1),i=L(e.zIndex||bs.nextZIndex());let a,l;const u=R(()=>xn(e.width)?`${e.width}px`:e.width),c=R(()=>{const w={},C="--el-dialog";return e.fullscreen||(e.top&&(w[`${C}-margin-top`]=e.top),e.width&&(w[`${C}-width`]=u.value)),w});function d(){t("opened")}function f(){t("closed"),t(Pt,!1),e.destroyOnClose&&(r.value=!1)}function h(){t("close")}function p(){l==null||l(),a==null||a(),e.openDelay&&e.openDelay>0?{stop:a}=$d(()=>$(),e.openDelay):$()}function g(){a==null||a(),l==null||l(),e.closeDelay&&e.closeDelay>0?{stop:l}=$d(()=>y(),e.closeDelay):y()}function m(w){w||(o.value=!0,s.value=!1)}function v(){e.beforeClose?e.beforeClose(m):g()}function b(){e.closeOnClickModal&&v()}function $(){!Yt||(s.value=!0)}function y(){s.value=!1}return e.lockScroll&&cF(s),e.closeOnPressEscape&&hF({handleClose:v},s),gF(s),Oe(()=>e.modelValue,w=>{w?(o.value=!1,p(),r.value=!0,t("open"),i.value=e.zIndex?i.value++:bs.nextZIndex(),dt(()=>{n.value&&(n.value.scrollTop=0)})):s.value&&g()}),Rt(()=>{e.modelValue&&(s.value=!0,r.value=!0,p())}),{afterEnter:d,afterLeave:f,beforeLeave:h,handleClose:v,onModalClick:b,close:g,doClose:y,closed:o,style:c,rendered:r,visible:s,zIndex:i}},Mbe=ge({name:"ElDialog",components:ut({ElOverlay:tk,ElIcon:Ot},$ae),directives:{TrapFocus:B2},props:ZL,emits:JL,setup(e,t){const n=L(),s=QL(e,t,n),o=mF(s.onModalClick);return ut({dialogRef:n,overlayEvent:o},s)}}),Pbe=["aria-label"],Fbe={class:"el-dialog__header"},Lbe={class:"el-dialog__title"},Bbe={key:0,class:"el-dialog__body"},zbe={key:1,class:"el-dialog__footer"};function Vbe(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("el-overlay"),l=Vo("trap-focus");return A(),ve(v0,{to:"body",disabled:!e.appendToBody},[le(xs,{name:"dialog-fade",onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave},{default:re(()=>[$t(le(a,{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex},{default:re(()=>[W("div",{class:"el-overlay-dialog",onClick:t[2]||(t[2]=(...u)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...u)),onMousedown:t[3]||(t[3]=(...u)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...u)),onMouseup:t[4]||(t[4]=(...u)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...u))},[$t((A(),B("div",{ref:"dialogRef",class:q(["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass]),"aria-modal":"true",role:"dialog","aria-label":e.title||"dialog",style:nt(e.style),onClick:t[1]||(t[1]=ht(()=>{},["stop"]))},[W("div",Fbe,[Re(e.$slots,"title",{},()=>[W("span",Lbe,Pe(e.title),1)]),e.showClose?(A(),B("button",{key:0,"aria-label":"close",class:"el-dialog__headerbtn",type:"button",onClick:t[0]||(t[0]=(...u)=>e.handleClose&&e.handleClose(...u))},[le(i,{class:"el-dialog__close"},{default:re(()=>[(A(),ve(tn(e.closeIcon||"close")))]),_:1})])):ce("v-if",!0)]),e.rendered?(A(),B("div",Bbe,[Re(e.$slots,"default")])):ce("v-if",!0),e.$slots.footer?(A(),B("div",zbe,[Re(e.$slots,"footer")])):ce("v-if",!0)],14,Pbe)),[[l]])],32)]),_:3},8,["mask","overlay-class","z-index"]),[[en,e.visible]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Wbe=We(Mbe,[["render",Vbe]]);const Hbe=Wt(Wbe),Ube=mt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Je(String),default:"solid"}}),jbe=ge({name:"ElDivider",props:Ube,setup(e){const t=At("divider"),n=R(()=>({"--el-border-style":e.borderStyle}));return{ns:t,dividerStyle:n}}});function Gbe(e,t,n,s,o,r){return A(),B("div",{class:q([e.ns.b(),e.ns.m(e.direction)]),style:nt(e.dividerStyle)},[e.$slots.default&&e.direction!=="vertical"?(A(),B("div",{key:0,class:q([e.ns.e("text"),e.ns.is(e.contentPosition)])},[Re(e.$slots,"default")],2)):ce("v-if",!0)],6)}var Kbe=We(jbe,[["render",Gbe]]);const qbe=Wt(Kbe),Ybe=mt(zt(ut({},ZL),{direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}})),Xbe=JL,Zbe=ge({name:"ElDrawer",components:{ElOverlay:tk,ElIcon:Ot,Close:xi},directives:{TrapFocus:B2},props:Ybe,emits:Xbe,setup(e,t){const n=L(),s=At("drawer"),o=R(()=>e.direction==="rtl"||e.direction==="ltr"),r=R(()=>typeof e.size=="number"?`${e.size}px`:e.size);return zt(ut({},QL(e,t,n)),{drawerRef:n,isHorizontal:o,drawerSize:r,ns:s})}}),Jbe=["aria-labelledby","aria-label"],Qbe=["id"],e0e=["title"],t0e=["aria-label"];function n0e(e,t,n,s,o,r){const i=ie("close"),a=ie("el-icon"),l=ie("el-overlay"),u=Vo("trap-focus");return A(),ve(v0,{to:"body",disabled:!e.appendToBody},[le(xs,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave},{default:re(()=>[$t(le(l,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:re(()=>[$t((A(),B("div",{ref:"drawerRef","aria-modal":"true","aria-labelledby":e.ns.e("title"),"aria-label":e.title,class:q([e.ns.b(),e.direction,e.visible&&"open",e.customClass]),style:nt(e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize),role:"dialog",onClick:t[1]||(t[1]=ht(()=>{},["stop"]))},[e.withHeader?(A(),B("header",{key:0,id:e.ns.e("title"),class:q(e.ns.e("header"))},[Re(e.$slots,"title",{},()=>[W("span",{role:"heading",title:e.title},Pe(e.title),9,e0e)]),e.showClose?(A(),B("button",{key:0,"aria-label":"close "+(e.title||"drawer"),class:q(e.ns.e("close-btn")),type:"button",onClick:t[0]||(t[0]=(...c)=>e.handleClose&&e.handleClose(...c))},[le(a,{class:q(e.ns.e("close"))},{default:re(()=>[le(i)]),_:1},8,["class"])],10,t0e)):ce("v-if",!0)],10,Qbe)):ce("v-if",!0),e.rendered?(A(),B("section",{key:1,class:q(e.ns.e("body"))},[Re(e.$slots,"default")],2)):ce("v-if",!0),e.$slots.footer?(A(),B("div",{key:2,class:q(e.ns.e("footer"))},[Re(e.$slots,"footer")],2)):ce("v-if",!0)],14,Jbe)),[[u]])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[en,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var s0e=We(Zbe,[["render",n0e]]);const o0e=Wt(s0e),e4=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},TA=(e,t)=>{for(const n of e)if(!r0e(n,t))return n},r0e=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},i0e=e=>{const t=e4(e),n=TA(t,e),s=TA(t.reverse(),e);return[n,s]},a0e=e=>e instanceof HTMLInputElement&&"select"in e,lu=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&a0e(e)&&t&&e.select()}};function EA(e,t){const n=[...e],s=e.indexOf(t);return s!==-1&&n.splice(s,1),n}const l0e=()=>{let e=[];return{push:s=>{const o=e[0];o&&s!==o&&o.pause(),e=EA(e,s),e.unshift(s)},remove:s=>{var o,r;e=EA(e,s),(r=(o=e[0])==null?void 0:o.resume)==null||r.call(o)}}},u0e=(e,t=!1)=>{const n=document.activeElement;for(const s of e)if(lu(s,t),document.activeElement!==n)return},_A=l0e(),Pw="focus-trap.focus-on-mount",Fw="focus-trap.focus-on-unmount",NA={cancelable:!0,bubbles:!1},AA="mountOnFocus",DA="unmountOnFocus",t4=Symbol("elFocusTrap"),c0e=ge({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean},emits:[AA,DA],setup(e,{emit:t}){const n=L(),s=L(null);let o,r;const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=f=>{if(!e.loop&&!e.trapped||i.paused)return;const{key:h,altKey:p,ctrlKey:g,metaKey:m,currentTarget:v,shiftKey:b}=f,{loop:$}=e,y=h===Qe.tab&&!p&&!g&&!m,w=document.activeElement;if(y&&w){const C=v,[x,k]=i0e(C);x&&k?!b&&w===k?(f.preventDefault(),$&&lu(x,!0)):b&&w===x&&(f.preventDefault(),$&&lu(k,!0)):w===C&&f.preventDefault()}};Vt(t4,{focusTrapRef:s,onKeydown:a});const l=f=>{t(AA,f)},u=f=>t(DA,f),c=f=>{const h=Ke(s);if(i.paused||!h)return;const p=f.target;p&&h.contains(p)?r=p:lu(r,!0)},d=f=>{const h=Ke(s);i.paused||!h||h.contains(f.relatedTarget)||lu(r,!0)};return Rt(()=>{const f=Ke(s);if(f){_A.push(i);const h=document.activeElement;if(o=h,!f.contains(h)){const g=new Event(Pw,NA);bn(f,Pw,l),f.dispatchEvent(g),g.defaultPrevented||(u0e(e4(f),!0),document.activeElement===h&&lu(f))}}Oe(()=>e.trapped,h=>{h?(bn(document,"focusin",c),bn(document,"focusout",d)):(Kn(document,"focusin",c),Kn(document,"focusout",d))},{immediate:!0})}),ls(()=>{const f=Ke(s);if(f){Kn(f,Pw,l);const h=new Event(Fw,NA);bn(f,Fw,u),f.dispatchEvent(h),h.defaultPrevented||lu(o!=null?o:document.body,!0),Kn(f,Fw,u),_A.remove(i)}}),{focusTrapRef:n,forwardRef:s,onKeydown:a}}});function d0e(e,t,n,s,o,r){return Re(e.$slots,"default")}var f0e=We(c0e,[["render",d0e]]);const h0e=ge({inheritAttrs:!1});function p0e(e,t,n,s,o,r){return Re(e.$slots,"default")}var g0e=We(h0e,[["render",p0e]]);const m0e=ge({name:"ElCollectionItem",inheritAttrs:!1});function v0e(e,t,n,s,o,r){return Re(e.$slots,"default")}var b0e=We(m0e,[["render",v0e]]);const n4="data-el-collection-item",s4=e=>{const t=`El${e}Collection`,n=`${t}Item`,s=Symbol(t),o=Symbol(n),r=zt(ut({},g0e),{name:t,setup(){const a=L(null),l=new Map;Vt(s,{itemMap:l,getItems:()=>{const c=Ke(a);if(!c)return[];const d=Array.from(c.querySelectorAll(`[${n4}]`));return[...l.values()].sort((p,g)=>d.indexOf(p.ref)-d.indexOf(g.ref))},collectionRef:a})}}),i=zt(ut({},b0e),{name:n,setup(a,{attrs:l}){const u=L(null),c=Ze(s,void 0);Vt(o,{collectionItemRef:u}),Rt(()=>{const d=Ke(u);d&&c.itemMap.set(d,ut({ref:d},l))}),ls(()=>{const d=Ke(u);c.itemMap.delete(d)})}});return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:r,ElCollectionItem:i}},y0e=mt({style:{type:Je([String,Array,Object])},currentTabId:{type:Je(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Je(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:w0e,ElCollectionItem:$0e,COLLECTION_INJECTION_KEY:nk,COLLECTION_ITEM_INJECTION_KEY:C0e}=s4("RovingFocusGroup"),sk=Symbol("elRovingFocusGroup"),o4=Symbol("elRovingFocusGroupItem"),x0e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},k0e=(e,t)=>{if(t!=="rtl")return e;switch(e){case Qe.right:return Qe.left;case Qe.left:return Qe.right;default:return e}},S0e=(e,t,n)=>{const s=k0e(e.key,n);if(!(t==="vertical"&&[Qe.left,Qe.right].includes(s))&&!(t==="horizontal"&&[Qe.up,Qe.down].includes(s)))return x0e[s]},I0e=(e,t)=>e.map((n,s)=>e[(s+t)%e.length]),ok=e=>{const{activeElement:t}=document;for(const n of e)if(n===t||(n.focus(),t!==document.activeElement))return},RA="currentTabIdChange",Lw="rovingFocusGroup.entryFocus",T0e={bubbles:!1,cancelable:!0},E0e=ge({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:y0e,emits:[RA,"entryFocus"],setup(e,{emit:t}){var n;const s=L((n=e.currentTabId||e.defaultCurrentTabId)!=null?n:null),o=L(!1),r=L(!1),i=L(null),{getItems:a}=Ze(nk,void 0),l=R(()=>[{outline:"none"},e.style]),u=g=>{t(RA,g)},c=()=>{o.value=!0},d=Fs(g=>{var m;(m=e.onMousedown)==null||m.call(e,g)},()=>{r.value=!0}),f=Fs(g=>{var m;(m=e.onFocus)==null||m.call(e,g)},g=>{const m=!Ke(r),{target:v,currentTarget:b}=g;if(v===b&&m&&!Ke(o)){const $=new Event(Lw,T0e);if(b==null||b.dispatchEvent($),!$.defaultPrevented){const y=a().filter(I=>I.focusable),w=y.find(I=>I.active),C=y.find(I=>I.id===Ke(s)),k=[w,C,...y].filter(Boolean).map(I=>I.ref);ok(k)}}r.value=!1}),h=Fs(g=>{var m;(m=e.onBlur)==null||m.call(e,g)},()=>{o.value=!1}),p=(...g)=>{t("entryFocus",...g)};Vt(sk,{currentTabbedId:Np(s),loop:bo(e,"loop"),tabIndex:R(()=>Ke(o)?-1:0),rovingFocusGroupRef:i,rovingFocusGroupRootStyle:l,orientation:bo(e,"orientation"),dir:bo(e,"dir"),onItemFocus:u,onItemShiftTab:c,onBlur:h,onFocus:f,onMousedown:d}),Oe(()=>e.currentTabId,g=>{s.value=g!=null?g:null}),Rt(()=>{const g=Ke(i);bn(g,Lw,p)}),ls(()=>{const g=Ke(i);Kn(g,Lw,p)})}});function _0e(e,t,n,s,o,r){return Re(e.$slots,"default")}var N0e=We(E0e,[["render",_0e]]);const A0e=ge({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:w0e,ElRovingFocusGroupImpl:N0e}});function D0e(e,t,n,s,o,r){const i=ie("el-roving-focus-group-impl"),a=ie("el-focus-group-collection");return A(),ve(a,null,{default:re(()=>[le(i,zu(Vu(e.$attrs)),{default:re(()=>[Re(e.$slots,"default")]),_:3},16)]),_:3})}var R0e=We(A0e,[["render",D0e]]);const O0e=ge({components:{ElRovingFocusCollectionItem:$0e},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:t}){const{currentTabbedId:n,loop:s,onItemFocus:o,onItemShiftTab:r}=Ze(sk,void 0),{getItems:i}=Ze(nk,void 0),a=vF(),l=L(null),u=Fs(h=>{t("mousedown",h)},h=>{e.focusable?o(Ke(a)):h.preventDefault()}),c=Fs(h=>{t("focus",h)},()=>{o(Ke(a))}),d=Fs(h=>{t("keydown",h)},h=>{const{key:p,shiftKey:g,target:m,currentTarget:v}=h;if(p===Qe.tab&&g){r();return}if(m!==v)return;const b=S0e(h);if(b){h.preventDefault();let y=i().filter(w=>w.focusable).map(w=>w.ref);switch(b){case"last":{y.reverse();break}case"prev":case"next":{b==="prev"&&y.reverse();const w=y.indexOf(v);y=s.value?I0e(y,w+1):y.slice(w+1);break}}dt(()=>{ok(y)})}}),f=R(()=>n.value===Ke(a));return Vt(o4,{rovingFocusGroupItemRef:l,tabIndex:R(()=>Ke(f)?0:-1),handleMousedown:u,handleFocus:c,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:c,handleMousedown:u}}});function M0e(e,t,n,s,o,r){const i=ie("el-roving-focus-collection-item");return A(),ve(i,{id:e.id,focusable:e.focusable,active:e.active},{default:re(()=>[Re(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var P0e=We(O0e,[["render",M0e]]);const F0e=ut({trigger:q2.trigger,effect:zt(ut({},tl.effect),{default:"light"})},mt({type:{type:Je(String)},placement:{type:Je(String),default:"bottom"},popperOptions:{type:Je(Object),default:()=>({})},size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Je([Number,String]),default:0},maxHeight:{type:Je([Number,String]),default:""},popperClass:{type:String,default:""}})),r4=mt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Je([String,Object])}}),L0e=mt({onKeydown:{type:Je(Function)}}),B0e=[Qe.down,Qe.pageDown,Qe.home],i4=[Qe.up,Qe.pageUp,Qe.end],z0e=[...B0e,...i4],{ElCollection:V0e,ElCollectionItem:W0e,COLLECTION_INJECTION_KEY:H0e,COLLECTION_ITEM_INJECTION_KEY:U0e}=s4("Dropdown"),rk=Symbol("elDropdown"),{ButtonGroup:j0e}=ta,G0e=ge({name:"ElDropdown",components:{ElButton:ta,ElFocusTrap:f0e,ElButtonGroup:j0e,ElScrollbar:Oa,ElDropdownCollection:V0e,ElTooltip:ar,ElRovingFocusGroup:R0e,ElIcon:Ot,ArrowDown:dc},props:F0e,emits:["visible-change","click","command"],setup(e,{emit:t}){const n=Lt(),s=L(),o=L(),r=L(null),i=L(null),a=L(null),l=L(null),u=L(!1),c=R(()=>({maxHeight:Ia(e.maxHeight)})),d=R(()=>[[g.value?`el-dropdown--${g.value}`:""]]);function f(){h()}function h(){var x;(x=r.value)==null||x.onClose()}function p(){var x;(x=r.value)==null||x.onOpen()}const g=ks();function m(...x){t("command",...x)}function v(){}function b(){const x=Ke(i);x==null||x.focus(),l.value=null}function $(x){l.value=x}function y(x){u.value||(x.preventDefault(),x.stopImmediatePropagation())}return Vt(rk,{contentRef:i,isUsingKeyboard:u,onItemEnter:v,onItemLeave:b}),Vt("elDropdown",{instance:n,dropdownSize:g,handleClick:f,commandHandler:m,trigger:bo(e,"trigger"),hideOnClick:bo(e,"hideOnClick")}),{scrollbar:a,wrapStyle:c,dropdownTriggerKls:d,dropdownSize:g,currentTabId:l,handleCurrentTabIdChange:$,handlerMainButtonClick:x=>{t("click",x)},handleEntryFocus:y,handleClose:h,handleOpen:p,onMountOnFocus:x=>{var k,I;x.preventDefault(),(I=(k=i.value)==null?void 0:k.focus)==null||I.call(k,{preventScroll:!0})},popperRef:r,triggeringElementRef:s,referenceElementRef:o}}}),K0e={class:"el-dropdown"};function q0e(e,t,n,s,o,r){var i;const a=ie("el-dropdown-collection"),l=ie("el-roving-focus-group"),u=ie("el-focus-trap"),c=ie("el-scrollbar"),d=ie("el-tooltip"),f=ie("el-button"),h=ie("arrow-down"),p=ie("el-icon"),g=ie("el-button-group");return A(),B("div",K0e,[le(d,{ref:"popperRef",effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.hideTimeout,"manual-mode":!0,placement:e.placement,"popper-class":`el-dropdown__popper ${e.popperClass}`,"reference-element":(i=e.referenceElementRef)==null?void 0:i.$el,trigger:e.trigger,"show-after":e.showTimeout,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,"append-to-body":"",pure:"",transition:"el-zoom-in-top",persistent:"",onShow:t[0]||(t[0]=m=>e.$emit("visible-change",!0)),onHide:t[1]||(t[1]=m=>e.$emit("visible-change",!1))},jh({content:re(()=>[le(c,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"ul","view-class":"el-dropdown__list"},{default:re(()=>[le(u,{trapped:"",onMountOnFocus:e.onMountOnFocus},{default:re(()=>[le(l,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:re(()=>[le(a,null,{default:re(()=>[Re(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["onMountOnFocus"])]),_:3},8,["wrap-style"])]),_:2},[e.splitButton?void 0:{name:"default",fn:re(()=>[W("div",{class:q(e.dropdownTriggerKls)},[Re(e.$slots,"default")],2)])}]),1032,["effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","show-after","virtual-ref","virtual-triggering"]),e.splitButton?(A(),ve(g,{key:0},{default:re(()=>[le(f,{ref:"referenceElementRef",size:e.dropdownSize,type:e.type,onClick:e.handlerMainButtonClick},{default:re(()=>[Re(e.$slots,"default")]),_:3},8,["size","type","onClick"]),le(f,{ref:"triggeringElementRef",size:e.dropdownSize,type:e.type,class:"el-dropdown__caret-button"},{default:re(()=>[le(p,{class:"el-dropdown__icon"},{default:re(()=>[le(h)]),_:1})]),_:1},8,["size","type"])]),_:3})):ce("v-if",!0)])}var Y0e=We(G0e,[["render",q0e]]);const X0e=ge({name:"DropdownItemImpl",components:{ElIcon:Ot},props:r4,emits:["pointermove","pointerleave","click"],setup(e,{emit:t}){const{collectionItemRef:n}=Ze(U0e,void 0),{collectionItemRef:s}=Ze(C0e,void 0),{rovingFocusGroupItemRef:o,tabIndex:r,handleFocus:i,handleKeydown:a,handleMousedown:l}=Ze(o4,void 0),u=uF(n,s,o),c=Fs(d=>{const{code:f}=d;if(f===Qe.enter||f===Qe.space)return d.preventDefault(),d.stopImmediatePropagation(),t("click",d),!0},a);return{itemRef:u,dataset:{[n4]:""},tabIndex:r,handleFocus:i,handleKeydown:c,handleMousedown:l}}}),Z0e={key:0,class:"el-dropdown-menu__item--divided"},J0e=["aria-disabled","tabindex"];function Q0e(e,t,n,s,o,r){const i=ie("el-icon");return A(),B(at,null,[e.divided?(A(),B("div",Z0e)):ce("v-if",!0),W("div",lo({ref:e.itemRef},e.dataset,{"aria-disabled":e.disabled,class:{"el-dropdown-menu__item":!0,"is-disabled":e.disabled},tabindex:e.tabIndex,role:"menuitem",onClick:t[0]||(t[0]=a=>e.$emit("click",a)),onFocus:t[1]||(t[1]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onKeydown:t[2]||(t[2]=(...a)=>e.handleKeydown&&e.handleKeydown(...a)),onMousedown:t[3]||(t[3]=(...a)=>e.handleMousedown&&e.handleMousedown(...a)),onPointermove:t[4]||(t[4]=a=>e.$emit("pointermove",a)),onPointerleave:t[5]||(t[5]=a=>e.$emit("pointerleave",a))}),[e.icon?(A(),ve(i,{key:0},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1})):ce("v-if",!0),Re(e.$slots,"default")],16,J0e)],64)}var eye=We(X0e,[["render",Q0e]]);const a4=()=>{const e=Ze("elDropdown",{}),t=R(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:t}},tye=ge({name:"ElDropdownItem",components:{ElDropdownCollectionItem:W0e,ElRovingFocusItem:P0e,ElDropdownItemImpl:eye},props:r4,emits:["pointermove","pointerleave","click"],setup(e,{emit:t}){const{elDropdown:n}=a4(),s=Lt(),o=L(null),r=R(()=>{var d,f;return(f=(d=Ke(o))==null?void 0:d.textContent)!=null?f:""}),{onItemEnter:i,onItemLeave:a}=Ze(rk,void 0),l=Fs(d=>(t("pointermove",d),d.defaultPrevented),DN(d=>{var f;e.disabled?a(d):(i(d),d.defaultPrevented||(f=d.currentTarget)==null||f.focus())})),u=Fs(d=>(t("pointerleave",d),d.defaultPrevented),DN(d=>{a(d)}));return{handleClick:Fs(d=>(t("click",d),d.defaultPrevented),d=>{var f,h,p;if(e.disabled){d.stopImmediatePropagation();return}((f=n==null?void 0:n.hideOnClick)==null?void 0:f.value)&&((h=n.handleClick)==null||h.call(n)),(p=n.commandHandler)==null||p.call(n,e.command,s,d)}),handlePointerMove:l,handlePointerLeave:u,textContent:r}}});function nye(e,t,n,s,o,r){var i;const a=ie("el-dropdown-item-impl"),l=ie("el-roving-focus-item"),u=ie("el-dropdown-collection-item");return A(),ve(u,{disabled:e.disabled,"text-value":(i=e.textValue)!=null?i:e.textContent},{default:re(()=>[le(l,{focusable:!e.disabled},{default:re(()=>[le(a,lo(e.$props,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClick:e.handleClick}),{default:re(()=>[Re(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClick"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var l4=We(tye,[["render",nye]]);const sye=ge({name:"ElDropdownMenu",props:L0e,setup(e){const{_elDropdownSize:t}=a4(),n=t.value,{focusTrapRef:s,onKeydown:o}=Ze(t4,void 0),{contentRef:r}=Ze(rk,void 0),{collectionRef:i,getItems:a}=Ze(H0e,void 0),{rovingFocusGroupRef:l,rovingFocusGroupRootStyle:u,tabIndex:c,onBlur:d,onFocus:f,onMousedown:h}=Ze(sk,void 0),{collectionRef:p}=Ze(nk,void 0),g=R(()=>["el-dropdown-menu",n.value&&`el-dropdown-menu--${n.value}`]),m=uF(r,i,s,l,p),v=Fs($=>{var y;(y=e.onKeydown)==null||y.call(e,$)},$=>{const{currentTarget:y,code:w,target:C}=$;if(y.contains(C),Qe.tab===w&&$.stopImmediatePropagation(),$.preventDefault(),C!==Ke(r)||!z0e.includes(w))return;const k=a().filter(I=>!I.disabled).map(I=>I.ref);i4.includes(w)&&k.reverse(),ok(k)});return{size:n,rovingFocusGroupRootStyle:u,tabIndex:c,dropdownKls:g,dropdownListWrapperRef:m,handleKeydown:$=>{v($),o($)},onBlur:d,onFocus:f,onMousedown:h}}});function oye(e,t,n,s,o,r){return A(),B("ul",{ref:e.dropdownListWrapperRef,class:q(e.dropdownKls),style:nt(e.rovingFocusGroupRootStyle),tabindex:-1,role:"menu",onBlur:t[0]||(t[0]=(...i)=>e.onBlur&&e.onBlur(...i)),onFocus:t[1]||(t[1]=(...i)=>e.onFocus&&e.onFocus(...i)),onKeydown:t[2]||(t[2]=(...i)=>e.handleKeydown&&e.handleKeydown(...i)),onMousedown:t[3]||(t[3]=(...i)=>e.onMousedown&&e.onMousedown(...i))},[Re(e.$slots,"default")],38)}var u4=We(sye,[["render",oye]]);const rye=Wt(Y0e,{DropdownItem:l4,DropdownMenu:u4}),iye=us(l4),aye=us(u4);let lye=0;const uye=ge({name:"ImgEmpty",setup(){return{id:++lye}}}),cye={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},dye=["id"],fye=W("stop",{"stop-color":"var(--el-empty-fill-color-1)",offset:"0%"},null,-1),hye=W("stop",{"stop-color":"var(--el-empty-fill-color-4)",offset:"100%"},null,-1),pye=[fye,hye],gye=["id"],mye=W("stop",{"stop-color":"var(--el-empty-fill-color-1)",offset:"0%"},null,-1),vye=W("stop",{"stop-color":"var(--el-empty-fill-color-6)",offset:"100%"},null,-1),bye=[mye,vye],yye=["id"],wye={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},$ye={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},Cye={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},xye=W("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:"var(--el-empty-fill-color-3)"},null,-1),kye=W("polygon",{id:"Rectangle-Copy-14",fill:"var(--el-empty-fill-color-7)",transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,-1),Sye={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},Iye=W("polygon",{id:"Rectangle-Copy-10",fill:"var(--el-empty-fill-color-7)",transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,-1),Tye=W("polygon",{id:"Rectangle-Copy-11",fill:"var(--el-empty-fill-color-5)",points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,-1),Eye=["fill"],_ye=W("polygon",{id:"Rectangle-Copy-13",fill:"var(--el-empty-fill-color-2)",transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,-1),Nye=["fill"],Aye={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},Dye=["id"],Rye=["xlink:href"],Oye=["xlink:href"],Mye=["mask"],Pye=W("polygon",{id:"Rectangle-Copy-18",fill:"var(--el-empty-fill-color-2)",transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,-1);function Fye(e,t,n,s,o,r){return A(),B("svg",cye,[W("defs",null,[W("linearGradient",{id:`linearGradient-1-${e.id}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},pye,8,dye),W("linearGradient",{id:`linearGradient-2-${e.id}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},bye,8,gye),W("rect",{id:`path-3-${e.id}`,x:"0",y:"0",width:"17",height:"36"},null,8,yye)]),W("g",wye,[W("g",$ye,[W("g",Cye,[xye,kye,W("g",Sye,[Iye,Tye,W("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${e.id})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,Eye),_ye]),W("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${e.id})`,x:"13",y:"45",width:"40",height:"36"},null,8,Nye),W("g",Aye,[W("mask",{id:`mask-4-${e.id}`,fill:"var(--el-empty-fill-color-0)"},[W("use",{"xlink:href":`#path-3-${e.id}`},null,8,Rye)],8,Dye),W("use",{id:"Mask",fill:"var(--el-empty-fill-color-8)",transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${e.id}`},null,8,Oye),W("polygon",{id:"Rectangle-Copy",fill:"var(--el-empty-fill-color-9)",mask:`url(#mask-4-${e.id})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 -1.70530257e-13 16"},null,8,Mye)]),Pye])])])])}var Lye=We(uye,[["render",Fye]]);const Bye={image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},zye=ge({name:"ElEmpty",components:{ImgEmpty:Lye},props:Bye,setup(e){const{t}=In(),n=At("empty"),s=R(()=>e.description||t("el.table.emptyText")),o=R(()=>({width:e.imageSize?`${e.imageSize}px`:""}));return{ns:n,emptyDescription:s,imageStyle:o}}}),Vye=["src"],Wye={key:1};function Hye(e,t,n,s,o,r){const i=ie("img-empty");return A(),B("div",{class:q(e.ns.b())},[W("div",{class:q(e.ns.e("image")),style:nt(e.imageStyle)},[e.image?(A(),B("img",{key:0,src:e.image,ondragstart:"return false"},null,8,Vye)):Re(e.$slots,"image",{key:1},()=>[le(i)])],6),W("div",{class:q(e.ns.e("description"))},[e.$slots.description?Re(e.$slots,"description",{key:0}):(A(),B("p",Wye,Pe(e.emptyDescription),1))],2),e.$slots.default?(A(),B("div",{key:0,class:q(e.ns.e("bottom"))},[Re(e.$slots,"default")],2)):ce("v-if",!0)],2)}var Uye=We(zye,[["render",Hye]]);const jye=Wt(Uye);function Gye(){const e=L([]),t=R(()=>{if(!e.value.length)return"0";const r=Math.max(...e.value);return r?`${r}px`:""});function n(r){return e.value.indexOf(r)}function s(r,i){if(r&&i){const a=n(i);e.value.splice(a,1,r)}else r&&e.value.push(r)}function o(r){const i=n(r);i>-1&&e.value.splice(i,1)}return{autoLabelWidth:t,registerLabelWidth:s,deregisterLabelWidth:o}}const Kye=ge({name:"ElForm",props:{model:Object,rules:Object,labelPosition:String,labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean},emits:["validate"],setup(e,{emit:t}){const n=[];Oe(()=>e.rules,()=>{n.forEach(p=>{p.evaluateValidationEnabled()}),e.validateOnRuleChange&&c(()=>({}))});const s=ks(),o="el-form",r=R(()=>{const{labelPosition:p,inline:g}=e;return[o,`${o}--${s.value}`,p?`${o}--label-${p}`:"",g?`${o}--inline`:""]}),i=p=>{p&&n.push(p)},a=p=>{p.prop&&n.splice(n.indexOf(p),1)},l=()=>{!e.model||n.forEach(p=>{p.resetField()})},u=(p=[])=>{(p.length?typeof p=="string"?n.filter(m=>p===m.prop):n.filter(m=>p.indexOf(m.prop)>-1):n).forEach(m=>{m.clearValidate()})},c=p=>{if(!e.model)return;let g;typeof p!="function"&&(g=new Promise((y,w)=>{p=function(C,x){C?y(!0):w(x)}})),n.length===0&&p(!0);let m=!0,v=0,b={},$;for(const y of n)y.validate("",(w,C)=>{w&&(m=!1,$||($=C)),b=ut(ut({},b),C),++v===n.length&&p(m,b)});return!m&&e.scrollToError&&f(Object.keys($)[0]),g},d=(p,g)=>{p=[].concat(p);const m=n.filter(v=>p.indexOf(v.prop)!==-1);!n.length||m.forEach(v=>{v.validate("",g)})},f=p=>{n.forEach(g=>{g.prop===p&&g.$el.scrollIntoView()})},h=Sn(ut(zt(ut({},xo(e)),{resetFields:l,clearValidate:u,validateField:d,emit:t,addField:i,removeField:a}),Gye()));return Vt(ir,h),{formKls:r,validate:c,resetFields:l,clearValidate:u,validateField:d,scrollToField:f}}});function qye(e,t,n,s,o,r){return A(),B("form",{class:q(e.formKls)},[Re(e.$slots,"default")],2)}var Yye=We(Kye,[["render",qye]]);function Cu(){return Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cu.apply(this,arguments)}function Xye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,sp(e,t)}function wC(e){return wC=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},wC(e)}function sp(e,t){return sp=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},sp(e,t)}function Zye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vv(e,t,n){return Zye()?Vv=Reflect.construct:Vv=function(o,r,i){var a=[null];a.push.apply(a,r);var l=Function.bind.apply(o,a),u=new l;return i&&sp(u,i.prototype),u},Vv.apply(null,arguments)}function Jye(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function $C(e){var t=typeof Map=="function"?new Map:void 0;return $C=function(s){if(s===null||!Jye(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(s))return t.get(s);t.set(s,o)}function o(){return Vv(s,arguments,wC(this).constructor)}return o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),sp(o,s)},$C(e)}var Qye=/%[sdj%]/g,e1e=function(){};typeof process!="undefined"&&process.env;function CC(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var s=n.field;t[s]=t[s]||[],t[s].push(n)}),t}function yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var o=0,r=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var i=e.replace(Qye,function(a){if(a==="%%")return"%";if(o>=r)return a;switch(a){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch{return"[Circular]"}break;default:return a}});return i}return e}function t1e(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Zs(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||t1e(t)&&typeof e=="string"&&!e)}function n1e(e,t,n){var s=[],o=0,r=e.length;function i(a){s.push.apply(s,a||[]),o++,o===r&&n(s)}e.forEach(function(a){t(a,i)})}function OA(e,t,n){var s=0,o=e.length;function r(i){if(i&&i.length){n(i);return}var a=s;s=s+1,a<o?t(e[a],r):n([])}r([])}function s1e(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n]||[])}),t}var MA=function(e){Xye(t,e);function t(n,s){var o;return o=e.call(this,"Async Validation Error")||this,o.errors=n,o.fields=s,o}return t}($C(Error));function o1e(e,t,n,s,o){if(t.first){var r=new Promise(function(f,h){var p=function(v){return s(v),v.length?h(new MA(v,CC(v))):f(o)},g=s1e(e);OA(g,n,p)});return r.catch(function(f){return f}),r}var i=t.firstFields===!0?Object.keys(e):t.firstFields||[],a=Object.keys(e),l=a.length,u=0,c=[],d=new Promise(function(f,h){var p=function(m){if(c.push.apply(c,m),u++,u===l)return s(c),c.length?h(new MA(c,CC(c))):f(o)};a.length||(s(c),f(o)),a.forEach(function(g){var m=e[g];i.indexOf(g)!==-1?OA(m,n,p):n1e(m,n,p)})});return d.catch(function(f){return f}),d}function r1e(e){return!!(e&&e.message!==void 0)}function i1e(e,t){for(var n=e,s=0;s<t.length;s++){if(n==null)return n;n=n[t[s]]}return n}function PA(e,t){return function(n){var s;return e.fullFields?s=i1e(t,e.fullFields):s=t[n.field||e.fullField],r1e(n)?(n.field=n.field||e.fullField,n.fieldValue=s,n):{message:typeof n=="function"?n():n,fieldValue:s,field:n.field||e.fullField}}}function FA(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];typeof s=="object"&&typeof e[n]=="object"?e[n]=Cu({},e[n],s):e[n]=s}}return e}var c4=function(t,n,s,o,r,i){t.required&&(!s.hasOwnProperty(t.field)||Zs(n,i||t.type))&&o.push(yr(r.messages.required,t.fullField))},a1e=function(t,n,s,o,r){(/^\s+$/.test(n)||n==="")&&o.push(yr(r.messages.whitespace,t.fullField))},Bw={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},oh={integer:function(t){return oh.number(t)&&parseInt(t,10)===t},float:function(t){return oh.number(t)&&!oh.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!oh.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(Bw.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(Bw.url)},hex:function(t){return typeof t=="string"&&!!t.match(Bw.hex)}},l1e=function(t,n,s,o,r){if(t.required&&n===void 0){c4(t,n,s,o,r);return}var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=t.type;i.indexOf(a)>-1?oh[a](n)||o.push(yr(r.messages.types[a],t.fullField,t.type)):a&&typeof n!==t.type&&o.push(yr(r.messages.types[a],t.fullField,t.type))},u1e=function(t,n,s,o,r){var i=typeof t.len=="number",a=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,d=null,f=typeof n=="number",h=typeof n=="string",p=Array.isArray(n);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(c=n.length),h&&(c=n.replace(u,"_").length),i?c!==t.len&&o.push(yr(r.messages[d].len,t.fullField,t.len)):a&&!l&&c<t.min?o.push(yr(r.messages[d].min,t.fullField,t.min)):l&&!a&&c>t.max?o.push(yr(r.messages[d].max,t.fullField,t.max)):a&&l&&(c<t.min||c>t.max)&&o.push(yr(r.messages[d].range,t.fullField,t.min,t.max))},zc="enum",c1e=function(t,n,s,o,r){t[zc]=Array.isArray(t[zc])?t[zc]:[],t[zc].indexOf(n)===-1&&o.push(yr(r.messages[zc],t.fullField,t[zc].join(", ")))},d1e=function(t,n,s,o,r){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||o.push(yr(r.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var i=new RegExp(t.pattern);i.test(n)||o.push(yr(r.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},yn={required:c4,whitespace:a1e,type:l1e,range:u1e,enum:c1e,pattern:d1e},f1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n,"string")&&!t.required)return s();yn.required(t,n,o,i,r,"string"),Zs(n,"string")||(yn.type(t,n,o,i,r),yn.range(t,n,o,i,r),yn.pattern(t,n,o,i,r),t.whitespace===!0&&yn.whitespace(t,n,o,i,r))}s(i)},h1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r),n!==void 0&&yn.type(t,n,o,i,r)}s(i)},p1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(n===""&&(n=void 0),Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r),n!==void 0&&(yn.type(t,n,o,i,r),yn.range(t,n,o,i,r))}s(i)},g1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r),n!==void 0&&yn.type(t,n,o,i,r)}s(i)},m1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r),Zs(n)||yn.type(t,n,o,i,r)}s(i)},v1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r),n!==void 0&&(yn.type(t,n,o,i,r),yn.range(t,n,o,i,r))}s(i)},b1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r),n!==void 0&&(yn.type(t,n,o,i,r),yn.range(t,n,o,i,r))}s(i)},y1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(n==null&&!t.required)return s();yn.required(t,n,o,i,r,"array"),n!=null&&(yn.type(t,n,o,i,r),yn.range(t,n,o,i,r))}s(i)},w1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r),n!==void 0&&yn.type(t,n,o,i,r)}s(i)},$1e="enum",C1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r),n!==void 0&&yn[$1e](t,n,o,i,r)}s(i)},x1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n,"string")&&!t.required)return s();yn.required(t,n,o,i,r),Zs(n,"string")||yn.pattern(t,n,o,i,r)}s(i)},k1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n,"date")&&!t.required)return s();if(yn.required(t,n,o,i,r),!Zs(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),yn.type(t,l,o,i,r),l&&yn.range(t,l.getTime(),o,i,r)}}s(i)},S1e=function(t,n,s,o,r){var i=[],a=Array.isArray(n)?"array":typeof n;yn.required(t,n,o,i,r,a),s(i)},zw=function(t,n,s,o,r){var i=t.type,a=[],l=t.required||!t.required&&o.hasOwnProperty(t.field);if(l){if(Zs(n,i)&&!t.required)return s();yn.required(t,n,o,a,r,i),Zs(n,i)||yn.type(t,n,o,a,r)}s(a)},I1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Zs(n)&&!t.required)return s();yn.required(t,n,o,i,r)}s(i)},Sh={string:f1e,method:h1e,number:p1e,boolean:g1e,regexp:m1e,integer:v1e,float:b1e,array:y1e,object:w1e,enum:C1e,pattern:x1e,date:k1e,url:zw,hex:zw,email:zw,required:S1e,any:I1e};function xC(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var kC=xC(),zp=function(){function e(n){this.rules=null,this._messages=kC,this.define(n)}var t=e.prototype;return t.define=function(s){var o=this;if(!s)throw new Error("Cannot configure a schema with no rules");if(typeof s!="object"||Array.isArray(s))throw new Error("Rules must be an object");this.rules={},Object.keys(s).forEach(function(r){var i=s[r];o.rules[r]=Array.isArray(i)?i:[i]})},t.messages=function(s){return s&&(this._messages=FA(xC(),s)),this._messages},t.validate=function(s,o,r){var i=this;o===void 0&&(o={}),r===void 0&&(r=function(){});var a=s,l=o,u=r;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,a),Promise.resolve(a);function c(g){var m=[],v={};function b(y){if(Array.isArray(y)){var w;m=(w=m).concat.apply(w,y)}else m.push(y)}for(var $=0;$<g.length;$++)b(g[$]);m.length?(v=CC(m),u(m,v)):u(null,a)}if(l.messages){var d=this.messages();d===kC&&(d=xC()),FA(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(g){var m=i.rules[g],v=a[g];m.forEach(function(b){var $=b;typeof $.transform=="function"&&(a===s&&(a=Cu({},a)),v=a[g]=$.transform(v)),typeof $=="function"?$={validator:$}:$=Cu({},$),$.validator=i.getValidationMethod($),!!$.validator&&($.field=g,$.fullField=$.fullField||g,$.type=i.getType($),f[g]=f[g]||[],f[g].push({rule:$,value:v,source:a,field:g}))})});var p={};return o1e(f,l,function(g,m){var v=g.rule,b=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");b=b&&(v.required||!v.required&&g.value),v.field=g.field;function $(C,x){return Cu({},x,{fullField:v.fullField+"."+C,fullFields:v.fullFields?[].concat(v.fullFields,[C]):[C]})}function y(C){C===void 0&&(C=[]);var x=Array.isArray(C)?C:[C];!l.suppressWarning&&x.length&&e.warning("async-validator:",x),x.length&&v.message!==void 0&&(x=[].concat(v.message));var k=x.map(PA(v,a));if(l.first&&k.length)return p[v.field]=1,m(k);if(!b)m(k);else{if(v.required&&!g.value)return v.message!==void 0?k=[].concat(v.message).map(PA(v,a)):l.error&&(k=[l.error(v,yr(l.messages.required,v.field))]),m(k);var I={};v.defaultField&&Object.keys(g.value).map(function(_){I[_]=v.defaultField}),I=Cu({},I,g.rule.fields);var S={};Object.keys(I).forEach(function(_){var N=I[_],O=Array.isArray(N)?N:[N];S[_]=O.map($.bind(null,_))});var T=new e(S);T.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),T.validate(g.value,g.rule.options||l,function(_){var N=[];k&&k.length&&N.push.apply(N,k),_&&_.length&&N.push.apply(N,_),m(N.length?N:null)})}}var w;v.asyncValidator?w=v.asyncValidator(v,g.value,y,g.source,l):v.validator&&(w=v.validator(v,g.value,y,g.source,l),w===!0?y():w===!1?y(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):w instanceof Array?y(w):w instanceof Error&&y(w.message)),w&&w.then&&w.then(function(){return y()},function(C){return y(C)})},function(g){c(g)},a)},t.getType=function(s){if(s.type===void 0&&s.pattern instanceof RegExp&&(s.type="pattern"),typeof s.validator!="function"&&s.type&&!Sh.hasOwnProperty(s.type))throw new Error(yr("Unknown rule type %s",s.type));return s.type||"string"},t.getValidationMethod=function(s){if(typeof s.validator=="function")return s.validator;var o=Object.keys(s),r=o.indexOf("message");return r!==-1&&o.splice(r,1),o.length===1&&o[0]==="required"?Sh.required:Sh[this.getType(s)]||void 0},e}();zp.register=function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Sh[t]=n};zp.warning=e1e;zp.messages=kC;zp.validators=Sh;var T1e=ge({name:"ElLabelWrap",props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:t}){const n=L(null),s=Ze(ir),o=Ze(Ni),r=L(0);Oe(r,(c,d)=>{e.updateAll&&(s.registerLabelWidth(c,d),o.updateComputedLabelWidth(c))});const i=()=>{var c;if((c=n.value)==null?void 0:c.firstElementChild){const d=window.getComputedStyle(n.value.firstElementChild).width;return Math.ceil(parseFloat(d))}else return 0},a=(c="update")=>{dt(()=>{t.default&&e.isAutoWidth&&(c==="update"?r.value=i():c==="remove"&&s.deregisterLabelWidth(r.value))})},l=()=>a("update");Rt(()=>{_l(n.value.firstElementChild,l),l()}),_i(l),ls(()=>{var c;a("remove"),Nl((c=n.value)==null?void 0:c.firstElementChild,l)});function u(){var c,d;if(!t)return null;if(e.isAutoWidth){const f=s.autoLabelWidth,h={};if(f&&f!=="auto"){const p=Math.max(0,parseInt(f,10)-r.value),g=s.labelPosition==="left"?"marginRight":"marginLeft";p&&(h[g]=`${p}px`)}return He("div",{ref:n,class:["el-form-item__label-wrap"],style:h},(c=t.default)==null?void 0:c.call(t))}else return He(at,{ref:n},(d=t.default)==null?void 0:d.call(t))}return u}});const E1e=ge({name:"ElFormItem",componentName:"ElFormItem",components:{LabelWrap:T1e},props:{label:String,labelWidth:{type:[String,Number],default:""},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,validator:nr}},setup(e,{slots:t}){const n=Ze(ir,{}),s=L(""),o=L(""),r=L(!1),i=L(""),a=L(),l=Lt(),u=R(()=>{let _=l.parent;for(;_&&_.type.name!=="ElForm";){if(_.type.name==="ElFormItem")return!0;_=_.parent}return!1});let c;Oe(()=>e.error,_=>{o.value=_,s.value=_?"error":""},{immediate:!0}),Oe(()=>e.validateStatus,_=>{s.value=_});const d=R(()=>e.for||e.prop),f=R(()=>{const _={};if(n.labelPosition==="top")return _;const N=Ia(e.labelWidth||n.labelWidth);return N&&(_.width=N),_}),h=R(()=>{const _={};if(n.labelPosition==="top"||n.inline||!e.label&&!e.labelWidth&&u.value)return _;const N=Ia(e.labelWidth||n.labelWidth);return!e.label&&!t.label&&(_.marginLeft=N),_}),p=R(()=>{const _=n.model;if(!_||!e.prop)return;let N=e.prop;return N.indexOf(":")!==-1&&(N=N.replace(/:/,".")),Iv(_,N,!0).v}),g=R(()=>{const _=y();let N=!1;return _&&_.length&&_.every(O=>O.required?(N=!0,!1):!0),N}),m=ks(void 0,{formItem:!1}),v=(_,N=rn)=>{if(!r.value){N();return}const O=w(_);if((!O||O.length===0)&&e.required===void 0){N();return}s.value="validating";const M={};O&&O.length>0&&O.forEach(V=>{delete V.trigger}),M[e.prop]=O;const D=new zp(M),F={};F[e.prop]=p.value,D.validate(F,{firstFields:!0},(V,U)=>{var ne;s.value=V?"error":"success",o.value=V?V[0].message||`${e.prop} is required`:"",N(o.value,V?U:{}),(ne=n.emit)==null||ne.call(n,"validate",e.prop,!V,o.value||null)})},b=()=>{s.value="",o.value=""},$=()=>{const _=n.model,N=p.value;let O=e.prop;O.indexOf(":")!==-1&&(O=O.replace(/:/,"."));const M=Iv(_,O,!0);Array.isArray(N)?M.o[M.k]=[].concat(c):M.o[M.k]=c,dt(()=>{b()})},y=()=>{const _=n.rules,N=e.rules,O=e.required!==void 0?{required:!!e.required}:[],M=Iv(_,e.prop||"",!1),D=_?M.o[e.prop||""]||M.v:[];return[].concat(N||D||[]).concat(O)},w=_=>y().filter(O=>!O.trigger||_===""?!0:Array.isArray(O.trigger)?O.trigger.indexOf(_)>-1:O.trigger===_).map(O=>ut({},O)),C=()=>{var _;r.value=!!((_=y())==null?void 0:_.length)},x=_=>{i.value=_?`${_}px`:""},k=Sn(zt(ut({},xo(e)),{size:m,validateState:s,$el:a,evaluateValidationEnabled:C,resetField:$,clearValidate:b,validate:v,updateComputedLabelWidth:x}));Rt(()=>{if(e.prop){n==null||n.addField(k);const _=p.value;c=Array.isArray(_)?[..._]:_,C()}}),ls(()=>{n==null||n.removeField(k)}),Vt(Ni,k);const I=R(()=>[{"el-form-item--feedback":n.statusIcon,"is-error":s.value==="error","is-validating":s.value==="validating","is-success":s.value==="success","is-required":g.value||e.required,"is-no-asterisk":n.hideRequiredAsterisk},m.value?`el-form-item--${m.value}`:""]),S=R(()=>s.value==="error"&&e.showMessage&&n.showMessage),T=R(()=>(e.label||"")+(n.labelSuffix||""));return{formItemRef:a,formItemClass:I,shouldShowError:S,elForm:n,labelStyle:f,contentStyle:h,validateMessage:o,labelFor:d,resetField:$,clearValidate:b,currentLabel:T}}}),_1e=["for"];function N1e(e,t,n,s,o,r){const i=ie("LabelWrap");return A(),B("div",{ref:"formItemRef",class:q(["el-form-item",e.formItemClass])},[le(i,{"is-auto-width":e.labelStyle.width==="auto","update-all":e.elForm.labelWidth==="auto"},{default:re(()=>[e.label||e.$slots.label?(A(),B("label",{key:0,for:e.labelFor,class:"el-form-item__label",style:nt(e.labelStyle)},[Re(e.$slots,"label",{label:e.currentLabel},()=>[qt(Pe(e.currentLabel),1)])],12,_1e)):ce("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),W("div",{class:"el-form-item__content",style:nt(e.contentStyle)},[Re(e.$slots,"default"),le(xs,{name:"el-zoom-in-top"},{default:re(()=>[e.shouldShowError?Re(e.$slots,"error",{key:0,error:e.validateMessage},()=>[W("div",{class:q(["el-form-item__error",{"el-form-item__error--inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:e.elForm.inlineMessage||!1}])},Pe(e.validateMessage),3)]):ce("v-if",!0)]),_:3})],4)],2)}var d4=We(E1e,[["render",N1e]]);const A1e=Wt(Yye,{FormItem:d4}),D1e=us(d4),R1e=mt({urlList:{type:Je(Array),default:()=>Ns([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1}}),O1e={close:()=>!0,switch:e=>typeof e=="number"},Lf={CONTAIN:{name:"contain",icon:zh(Ere)},ORIGINAL:{name:"original",icon:zh(Aie)}},M1e=nF()?"DOMMouseScroll":"mousewheel",P1e=ge({name:"ElImageViewer",components:{ElIcon:Ot,Close:xi,ArrowLeft:fc,ArrowRight:Qr,ZoomOut:wae,ZoomIn:IF,RefreshLeft:yie,RefreshRight:Sie},props:R1e,emits:O1e,setup(e,{emit:t}){const{t:n}=In(),s=At("image-viewer"),o=L(),r=L([]),i=W9(),a=L(!0),l=L(e.initialIndex),u=L(Lf.CONTAIN),c=L({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),d=R(()=>{const{urlList:T}=e;return T.length<=1}),f=R(()=>l.value===0),h=R(()=>l.value===e.urlList.length-1),p=R(()=>e.urlList[l.value]),g=R(()=>{const{scale:T,deg:_,offsetX:N,offsetY:O,enableTransition:M}=c.value;let D=N/T,F=O/T;switch(_%360){case 90:case-270:[D,F]=[F,-D];break;case 180:case-180:[D,F]=[-D,-F];break;case 270:case-90:[D,F]=[-F,D];break}const V={transform:`scale(${T}) rotate(${_}deg) translate(${D}px, ${F}px)`,transition:M?"transform .3s":""};return u.value.name===Lf.CONTAIN.name&&(V.maxWidth=V.maxHeight="100%"),V});function m(){b(),t("close")}function v(){const T=kw(N=>{switch(N.code){case Qe.esc:m();break;case Qe.space:x();break;case Qe.left:k();break;case Qe.up:S("zoomIn");break;case Qe.right:I();break;case Qe.down:S("zoomOut");break}}),_=kw(N=>{(N.wheelDelta?N.wheelDelta:-N.detail)>0?S("zoomIn",{zoomRate:1.2,enableTransition:!1}):S("zoomOut",{zoomRate:1.2,enableTransition:!1})});i.run(()=>{Ls(document,"keydown",T),Ls(document,M1e,_)})}function b(){i.stop()}function $(){a.value=!1}function y(T){a.value=!1,T.target.alt=n("el.image.error")}function w(T){if(a.value||T.button!==0||!o.value)return;c.value.enableTransition=!1;const{offsetX:_,offsetY:N}=c.value,O=T.pageX,M=T.pageY,D=kw(V=>{c.value=zt(ut({},c.value),{offsetX:_+V.pageX-O,offsetY:N+V.pageY-M})}),F=Ls(document,"mousemove",D);Ls(document,"mouseup",()=>{F()}),T.preventDefault()}function C(){c.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function x(){if(a.value)return;const T=Object.keys(Lf),_=Object.values(Lf),N=u.value.name,M=(_.findIndex(D=>D.name===N)+1)%T.length;u.value=Lf[T[M]],C()}function k(){if(f.value&&!e.infinite)return;const T=e.urlList.length;l.value=(l.value-1+T)%T}function I(){if(h.value&&!e.infinite)return;const T=e.urlList.length;l.value=(l.value+1)%T}function S(T,_={}){if(a.value)return;const{zoomRate:N,rotateDeg:O,enableTransition:M}=ut({zoomRate:1.4,rotateDeg:90,enableTransition:!0},_);switch(T){case"zoomOut":c.value.scale>.2&&(c.value.scale=parseFloat((c.value.scale/N).toFixed(3)));break;case"zoomIn":c.value.scale<7&&(c.value.scale=parseFloat((c.value.scale*N).toFixed(3)));break;case"clockwise":c.value.deg+=O;break;case"anticlockwise":c.value.deg-=O;break}c.value.enableTransition=M}return Oe(p,()=>{dt(()=>{const T=r.value[0];(T==null?void 0:T.complete)||(a.value=!0)})}),Oe(l,T=>{C(),t("switch",T)}),Rt(()=>{var T,_;v(),(_=(T=o.value)==null?void 0:T.focus)==null||_.call(T)}),{index:l,wrapper:o,imgRefs:r,isSingle:d,isFirst:f,isLast:h,currentImg:p,imgStyle:g,mode:u,handleActions:S,prev:k,next:I,hide:m,toggleMode:x,handleImgLoad:$,handleImgError:y,handleMouseDown:w,ns:s}}}),F1e=["src"];function L1e(e,t,n,s,o,r){const i=ie("close"),a=ie("el-icon"),l=ie("arrow-left"),u=ie("arrow-right"),c=ie("zoom-out"),d=ie("zoom-in"),f=ie("refresh-left"),h=ie("refresh-right");return A(),ve(xs,{name:"viewer-fade"},{default:re(()=>[W("div",{ref:"wrapper",tabindex:-1,class:q(e.ns.e("wrapper")),style:nt({zIndex:e.zIndex})},[W("div",{class:q(e.ns.e("mask")),onClick:t[0]||(t[0]=ht(p=>e.hideOnClickModal&&e.hide(),["self"]))},null,2),ce(" CLOSE "),W("span",{class:q([e.ns.e("btn"),e.ns.e("close")]),onClick:t[1]||(t[1]=(...p)=>e.hide&&e.hide(...p))},[le(a,null,{default:re(()=>[le(i)]),_:1})],2),ce(" ARROW "),e.isSingle?ce("v-if",!0):(A(),B(at,{key:0},[W("span",{class:q([e.ns.e("btn"),e.ns.e("prev"),e.ns.is("disabled",!e.infinite&&e.isFirst)]),onClick:t[2]||(t[2]=(...p)=>e.prev&&e.prev(...p))},[le(a,null,{default:re(()=>[le(l)]),_:1})],2),W("span",{class:q([e.ns.e("btn"),e.ns.e("next"),e.ns.is("disabled",!e.infinite&&e.isLast)]),onClick:t[3]||(t[3]=(...p)=>e.next&&e.next(...p))},[le(a,null,{default:re(()=>[le(u)]),_:1})],2)],64)),ce(" ACTIONS "),W("div",{class:q([e.ns.e("btn"),e.ns.e("actions")])},[W("div",{class:q(e.ns.e("actions__inner"))},[le(a,{onClick:t[4]||(t[4]=p=>e.handleActions("zoomOut"))},{default:re(()=>[le(c)]),_:1}),le(a,{onClick:t[5]||(t[5]=p=>e.handleActions("zoomIn"))},{default:re(()=>[le(d)]),_:1}),W("i",{class:q(e.ns.e("actions__divider"))},null,2),le(a,{onClick:e.toggleMode},{default:re(()=>[(A(),ve(tn(e.mode.icon)))]),_:1},8,["onClick"]),W("i",{class:q(e.ns.e("actions__divider"))},null,2),le(a,{onClick:t[6]||(t[6]=p=>e.handleActions("anticlockwise"))},{default:re(()=>[le(f)]),_:1}),le(a,{onClick:t[7]||(t[7]=p=>e.handleActions("clockwise"))},{default:re(()=>[le(h)]),_:1})],2)],2),ce(" CANVAS "),W("div",{class:q(e.ns.e("canvas"))},[(A(!0),B(at,null,Zt(e.urlList,(p,g)=>$t((A(),B("img",{ref_for:!0,ref:m=>e.imgRefs[g]=m,key:p,src:p,style:nt(e.imgStyle),class:q(e.ns.e("img")),onLoad:t[8]||(t[8]=(...m)=>e.handleImgLoad&&e.handleImgLoad(...m)),onError:t[9]||(t[9]=(...m)=>e.handleImgError&&e.handleImgError(...m)),onMousedown:t[10]||(t[10]=(...m)=>e.handleMouseDown&&e.handleMouseDown(...m))},null,46,F1e)),[[en,g===e.index]])),128))],2),Re(e.$slots,"default")],6)]),_:3})}var B1e=We(P1e,[["render",L1e]]);const f4=Wt(B1e),z1e=mt({appendToBody:{type:Boolean,default:!1},hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:Je([String,Object])},previewSrcList:{type:Je(Array),default:()=>Ns([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0}}),V1e={error:e=>e instanceof Event,switch:e=>xn(e),close:()=>!0},W1e=e=>e&&e.nodeType===Node.ELEMENT_NODE;let LA="";const H1e=ge({name:"ElImage",components:{ImageViewer:f4},inheritAttrs:!1,props:z1e,emits:V1e,setup(e,{emit:t,attrs:n}){const{t:s}=In(),o=At("image"),r=C2(),i=L(!1),a=L(!0),l=L(0),u=L(0),c=L(!1),d=L(),f=L();let h,p;const g=R(()=>n.style),m=R(()=>{const{fit:O}=e;return Yt&&O?{objectFit:O}:{}}),v=R(()=>{const{previewSrcList:O}=e;return Array.isArray(O)&&O.length>0}),b=R(()=>{const{previewSrcList:O,initialIndex:M}=e;let D=M;return M>O.length-1&&(D=0),D}),$=()=>{if(!Yt)return;a.value=!0,i.value=!1;const O=new Image,M=e.src;O.addEventListener("load",D=>{M===e.src&&y(D,O)}),O.addEventListener("error",D=>{M===e.src&&w(D)}),Object.entries(r.value).forEach(([D,F])=>{D.toLowerCase()!=="onload"&&O.setAttribute(D,F)}),O.src=M};function y(O,M){l.value=M.width,u.value=M.height,a.value=!1,i.value=!1}function w(O){a.value=!1,i.value=!0,t("error",O)}function C(){Une(d.value,f.value)&&($(),I())}const x=tF(C,200);async function k(){var O;if(!Yt)return;await dt();const{scrollContainer:M}=e;W1e(M)?f.value=M:Xt(M)&&M!==""?f.value=(O=document.querySelector(M))!=null?O:void 0:d.value&&(f.value=M2(d.value)),f.value&&(h=Ls(f,"scroll",x),setTimeout(()=>C(),100))}function I(){!Yt||!f.value||!x||(h(),f.value=void 0)}function S(O){if(!!O.ctrlKey){if(O.deltaY<0)return O.preventDefault(),!1;if(O.deltaY>0)return O.preventDefault(),!1}}function T(){!v.value||(p=Ls("wheel",S,{passive:!1}),LA=document.body.style.overflow,document.body.style.overflow="hidden",c.value=!0)}function _(){p==null||p(),document.body.style.overflow=LA,c.value=!1,t("close")}function N(O){t("switch",O)}return Oe(()=>e.src,()=>{e.lazy?(a.value=!0,i.value=!1,I(),k()):$()}),Rt(()=>{e.lazy?k():$()}),{attrs:r,loading:a,hasLoadError:i,showViewer:c,containerStyle:g,imageStyle:m,preview:v,imageIndex:b,container:d,ns:o,clickHandler:T,closeViewer:_,switchViewer:N,t:s}}}),U1e=["src"],j1e={key:0};function G1e(e,t,n,s,o,r){const i=ie("image-viewer");return A(),B("div",{ref:"container",class:q([e.ns.b(),e.$attrs.class]),style:nt(e.containerStyle)},[e.loading?Re(e.$slots,"placeholder",{key:0},()=>[W("div",{class:q(e.ns.e("placeholder"))},null,2)]):e.hasLoadError?Re(e.$slots,"error",{key:1},()=>[W("div",{class:q(e.ns.e("error"))},Pe(e.t("el.image.error")),3)]):(A(),B("img",lo({key:2},e.attrs,{src:e.src,style:e.imageStyle,class:[e.ns.e("inner"),e.preview?e.ns.e("preview"):""],onClick:t[0]||(t[0]=(...a)=>e.clickHandler&&e.clickHandler(...a))}),null,16,U1e)),(A(),ve(v0,{to:"body",disabled:!e.appendToBody},[e.preview?(A(),B(at,{key:0},[e.showViewer?(A(),ve(i,{key:0,"z-index":e.zIndex,"initial-index":e.imageIndex,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,onClose:e.closeViewer,onSwitch:e.switchViewer},{default:re(()=>[e.$slots.viewer?(A(),B("div",j1e,[Re(e.$slots,"viewer")])):ce("v-if",!0)]),_:3},8,["z-index","initial-index","url-list","hide-on-click-modal","onClose","onSwitch"])):ce("v-if",!0)],2112)):ce("v-if",!0)],8,["disabled"]))],6)}var K1e=We(H1e,[["render",G1e]]);const q1e=Wt(K1e),Y1e=mt({step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:x2},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===parseInt(`${e}`,10)}}),X1e={change:(e,t)=>e!==t,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>xn(e),"update:modelValue":e=>xn(e)||e===void 0},Z1e=ge({name:"ElInputNumber",components:{ElInput:ei,ElIcon:Ot,ArrowUp:Fp,ArrowDown:dc,Plus:xF,Minus:Ure},directives:{RepeatClick:EF},props:Y1e,emits:X1e,setup(e,{emit:t}){const n=L(),s=Sn({currentValue:e.modelValue,userInput:null}),{formItem:o}=af(),r=At("input-number"),i=R(()=>m(e.modelValue)<e.min),a=R(()=>g(e.modelValue)>e.max),l=R(()=>{const S=p(e.step);return e.precision!==void 0?(S>e.precision,e.precision):Math.max(p(e.modelValue),S)}),u=R(()=>e.controls&&e.controlsPosition==="right"),c=ks(),d=Pp(),f=R(()=>{if(s.userInput!==null)return s.userInput;let S=s.currentValue;if(xn(S)){if(Number.isNaN(S))return"";e.precision!==void 0&&(S=S.toFixed(e.precision))}return S}),h=(S,T)=>(T===void 0&&(T=l.value),parseFloat(`${Math.round(S*Math.pow(10,T))/Math.pow(10,T)}`)),p=S=>{if(S===void 0)return 0;const T=S.toString(),_=T.indexOf(".");let N=0;return _!==-1&&(N=T.length-_-1),N},g=S=>{if(!xn(S))return s.currentValue;const T=Math.pow(10,l.value);return S=xn(S)?S:NaN,h((T*S+T*e.step)/T)},m=S=>{if(!xn(S))return s.currentValue;const T=Math.pow(10,l.value);return S=xn(S)?S:NaN,h((T*S-T*e.step)/T)},v=()=>{if(d.value||a.value)return;const S=e.modelValue||0,T=g(S);$(T)},b=()=>{if(d.value||i.value)return;const S=e.modelValue||0,T=m(S);$(T)},$=S=>{var T;const _=s.currentValue;typeof S=="number"&&e.precision!==void 0&&(S=h(S,e.precision)),S!==void 0&&S>=e.max&&(S=e.max),S!==void 0&&S<=e.min&&(S=e.min),_!==S&&(xn(S)||(S=void 0),s.userInput=null,t("update:modelValue",S),t("input",S),t("change",S,_),(T=o==null?void 0:o.validate)==null||T.call(o,"change"),s.currentValue=S)},y=S=>s.userInput=S,w=S=>{const T=S!==""?Number(S):"";(xn(T)&&!Number.isNaN(T)||S==="")&&$(T),s.userInput=null},C=()=>{var S,T;(T=(S=n.value)==null?void 0:S.focus)==null||T.call(S)},x=()=>{var S,T;(T=(S=n.value)==null?void 0:S.blur)==null||T.call(S)},k=S=>{t("focus",S)},I=S=>{var T;t("blur",S),(T=o==null?void 0:o.validate)==null||T.call(o,"blur")};return Oe(()=>e.modelValue,S=>{let T=Number(S);if(S===null&&(T=Number.NaN),!isNaN(T)){if(e.stepStrictly){const _=p(e.step),N=Math.pow(10,_);T=Math.round(T/e.step)*N*e.step/N}e.precision!==void 0&&(T=h(T,e.precision)),T>e.max&&(T=e.max,t("update:modelValue",T)),T<e.min&&(T=e.min,t("update:modelValue",T))}s.currentValue=T,s.userInput=null},{immediate:!0}),Rt(()=>{var S;const T=(S=n.value)==null?void 0:S.input;if(T.setAttribute("role","spinbutton"),T.setAttribute("aria-valuemax",String(e.max)),T.setAttribute("aria-valuemin",String(e.min)),T.setAttribute("aria-valuenow",String(s.currentValue)),T.setAttribute("aria-disabled",String(d.value)),!xn(e.modelValue)){let _=Number(e.modelValue);isNaN(_)&&(_=void 0),t("update:modelValue",_)}}),_i(()=>{var S;((S=n.value)==null?void 0:S.input).setAttribute("aria-valuenow",s.currentValue)}),{input:n,displayValue:f,handleInput:y,handleInputChange:w,controlsAtRight:u,decrease:b,increase:v,inputNumberSize:c,inputNumberDisabled:d,maxDisabled:a,minDisabled:i,focus:C,blur:x,handleFocus:k,handleBlur:I,ns:r}}});function J1e(e,t,n,s,o,r){const i=ie("arrow-down"),a=ie("minus"),l=ie("el-icon"),u=ie("arrow-up"),c=ie("plus"),d=ie("el-input"),f=Vo("repeat-click");return A(),B("div",{class:q([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:t[2]||(t[2]=ht(()=>{},["prevent"]))},[e.controls?$t((A(),B("span",{key:0,role:"button",class:q([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:t[0]||(t[0]=Ut((...h)=>e.decrease&&e.decrease(...h),["enter"]))},[le(l,null,{default:re(()=>[e.controlsAtRight?(A(),ve(i,{key:0})):(A(),ve(a,{key:1}))]),_:1})],34)),[[f,e.decrease]]):ce("v-if",!0),e.controls?$t((A(),B("span",{key:1,role:"button",class:q([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:t[1]||(t[1]=Ut((...h)=>e.increase&&e.increase(...h),["enter"]))},[le(l,null,{default:re(()=>[e.controlsAtRight?(A(),ve(u,{key:0})):(A(),ve(c,{key:1}))]),_:1})],34)),[[f,e.increase]]):ce("v-if",!0),le(d,{ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[Ut(ht(e.increase,["prevent"]),["up"]),Ut(ht(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}var Q1e=We(Z1e,[["render",J1e]]);const h4=Wt(Q1e),ewe=mt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Je([String,Object]),default:""}}),twe={click:e=>e instanceof MouseEvent},nwe=ge({name:"ElLink",components:{ElIcon:Ot},props:ewe,emits:twe,setup(e,{emit:t}){const n=At("link");function s(o){e.disabled||t("click",o)}return{ns:n,handleClick:s}}}),swe=["href"];function owe(e,t,n,s,o,r){const i=ie("el-icon");return A(),B("a",{class:q([e.ns.b(),e.type?e.ns.m(e.type):"",e.ns.is("disabled",e.disabled),e.ns.is("underline",e.underline&&!e.disabled)]),href:e.disabled||!e.href?void 0:e.href,onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.icon?(A(),ve(i,{key:0},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1})):ce("v-if",!0),e.$slots.default?(A(),B("span",{key:1,class:q(e.ns.m("inner"))},[Re(e.$slots,"default")],2)):ce("v-if",!0),e.$slots.icon?Re(e.$slots,"icon",{key:2}):ce("v-if",!0)],10,swe)}var rwe=We(nwe,[["render",owe]]);const iwe=Wt(rwe);class awe{constructor(t,n){this.parent=t,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",s=>{let o=!1;switch(s.code){case Qe.down:{this.gotoSubIndex(this.subIndex+1),o=!0;break}case Qe.up:{this.gotoSubIndex(this.subIndex-1),o=!0;break}case Qe.tab:{Tv(t,"mouseleave");break}case Qe.enter:case Qe.space:{o=!0,s.currentTarget.click();break}}return o&&(s.preventDefault(),s.stopPropagation()),!1})})}}class lwe{constructor(t){this.domNode=t,this.submenu=null,this.submenu=null,this.init()}init(){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(".el-menu");t&&(this.submenu=new awe(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let n=!1;switch(t.code){case Qe.down:{Tv(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case Qe.up:{Tv(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case Qe.tab:{Tv(t.currentTarget,"mouseleave");break}case Qe.enter:case Qe.space:{n=!0,t.currentTarget.click();break}}n&&t.preventDefault()})}}class uwe{constructor(t){this.domNode=t,this.init()}init(){const t=this.domNode.childNodes;Array.from(t,n=>{n.nodeType===1&&new lwe(n)})}}const cwe=ge({name:"ElMenuCollapseTransition",setup(){return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,n){Xo(t,"el-opacity-transition"),t.style.opacity="1",n()},onAfterEnter(t){yo(t,"el-opacity-transition"),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),bi(t,"el-menu--collapse")?(yo(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),Xo(t,"el-menu--collapse")):(Xo(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),yo(t,"el-menu--collapse")),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){Xo(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function dwe(e,t,n,s,o,r){return A(),ve(xs,lo({mode:"out-in"},e.listeners),{default:re(()=>[Re(e.$slots,"default")]),_:3},16)}var fwe=We(cwe,[["render",dwe]]);function p4(e,t){const n=Ze("rootMenu");n||ko("useMenu","can not inject root menu");const s=R(()=>{let i=e.parent;const a=[t.value];for(;i.type.name!=="ElMenu";)i.props.index&&a.unshift(i.props.index),i=i.parent;return a}),o=R(()=>{let i=e.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),r=R(()=>{let i=e.parent;if(n.props.mode!=="vertical")return{};let a=20;if(n.props.collapse)a=20;else for(;i&&i.type.name!=="ElMenu";)i.type.name==="ElSubMenu"&&(a+=20),i=i.parent;return{paddingLeft:`${a}px`}});return{parentMenu:o,paddingStyle:r,indexPath:s}}function hwe(e){return R(()=>{const n=e.backgroundColor;return n?new nh(n).shade(20).toString():""})}const g4=e=>R(()=>({"--el-menu-text-color":e.textColor||"","--el-menu-hover-text-color":e.textColor||"","--el-menu-bg-color":e.backgroundColor||"","--el-menu-hover-bg-color":hwe(e).value||"","--el-menu-active-color":e.activeTextColor||""})),pwe=mt({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}}),Vw="ElSubMenu";var ik=ge({name:Vw,props:pwe,setup(e,{slots:t,expose:n}){const s=Lt(),{paddingStyle:o,indexPath:r,parentMenu:i}=p4(s,R(()=>e.index)),a=Ze("rootMenu");a||ko(Vw,"can not inject root menu");const l=Ze(`subMenu:${i.value.uid}`);l||ko(Vw,"can not inject sub menu");const u=L({}),c=L({});let d;const f=L(!1),h=L(),p=L(null),g=R(()=>S.value==="horizontal"&&v.value?"bottom-start":"right-start"),m=R(()=>S.value==="horizontal"&&v.value||S.value==="vertical"&&!a.props.collapse?dc:Qr),v=R(()=>{let V=!0,U=s.parent;for(;U&&U.type.name!=="ElMenu";)if(["ElSubMenu","ElMenuItemGroup"].includes(U.type.name)){V=!1;break}else U=U.parent;return V}),b=R(()=>e.popperAppendToBody===void 0?v.value:Boolean(e.popperAppendToBody)),$=R(()=>a.props.collapse?"el-zoom-in-left":"el-zoom-in-top"),y=R(()=>S.value==="horizontal"&&v.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),w=R(()=>a.openedMenus.includes(e.index)),C=R(()=>{let V=!1;return Object.values(u.value).forEach(U=>{U.active&&(V=!0)}),Object.values(c.value).forEach(U=>{U.active&&(V=!0)}),V}),x=R(()=>a.props.backgroundColor||""),k=R(()=>a.props.activeTextColor||""),I=R(()=>a.props.textColor||""),S=R(()=>a.props.mode),T=Sn({index:e.index,indexPath:r,active:C}),_=R(()=>S.value!=="horizontal"?{color:I.value}:{borderBottomColor:C.value?a.props.activeTextColor?k.value:"":"transparent",color:C.value?k.value:I.value}),N=()=>{var V,U,ne;return(ne=(U=(V=p.value)==null?void 0:V.popperRef)==null?void 0:U.popperInstanceRef)==null?void 0:ne.destroy()},O=V=>{V||N()},M=()=>{a.props.menuTrigger==="hover"&&a.props.mode==="horizontal"||a.props.collapse&&a.props.mode==="vertical"||e.disabled||a.handleSubMenuClick({index:e.index,indexPath:r.value,active:C.value})},D=(V,U=e.showTimeout)=>{var ne;V.type==="focus"&&!V.relatedTarget||a.props.menuTrigger==="click"&&a.props.mode==="horizontal"||!a.props.collapse&&a.props.mode==="vertical"||e.disabled||(l.mouseInChild.value=!0,d==null||d(),{stop:d}=$d(()=>{a.openMenu(e.index,r.value)},U),b.value&&((ne=i.value.vnode.el)==null||ne.dispatchEvent(new MouseEvent("mouseenter"))))},F=(V=!1)=>{var U,ne;a.props.menuTrigger==="click"&&a.props.mode==="horizontal"||!a.props.collapse&&a.props.mode==="vertical"||(d==null||d(),l.mouseInChild.value=!1,{stop:d}=$d(()=>!f.value&&a.closeMenu(e.index,r.value),e.hideTimeout),b.value&&V&&((U=s.parent)==null?void 0:U.type.name)==="ElSubMenu"&&((ne=l.handleMouseleave)==null||ne.call(l,!0)))};Oe(()=>a.props.collapse,V=>O(Boolean(V)));{const V=ne=>{c.value[ne.index]=ne},U=ne=>{delete c.value[ne.index]};Vt(`subMenu:${s.uid}`,{addSubMenu:V,removeSubMenu:U,handleMouseleave:F,mouseInChild:f})}return n({opened:w}),Rt(()=>{a.addSubMenu(T),l.addSubMenu(T)}),ls(()=>{l.removeSubMenu(T),a.removeSubMenu(T)}),()=>{var V;const U=[(V=t.title)==null?void 0:V.call(t),He(Ot,{class:["el-sub-menu__icon-arrow"]},{default:()=>He(m.value)})],ne=g4(a.props),be=a.isMenuPopup?He(ar,{ref:p,visible:w.value,effect:"light",pure:!0,offset:6,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:g.value,teleported:b.value,fallbackPlacements:y.value,transition:$.value,gpuAcceleration:!1},{content:()=>{var te;return He("div",{class:[`el-menu--${S.value}`,e.popperClass],onMouseenter:he=>D(he,100),onMouseleave:()=>F(!0),onFocus:he=>D(he,100)},[He("ul",{class:["el-menu el-menu--popup",`el-menu--popup-${g.value}`],style:ne.value},[(te=t.default)==null?void 0:te.call(t)])])},default:()=>He("div",{class:"el-sub-menu__title",style:[o.value,_.value,{backgroundColor:x.value}],onClick:M},U)}):He(at,{},[He("div",{class:"el-sub-menu__title",style:[o.value,_.value,{backgroundColor:x.value}],ref:h,onClick:M},U),He(M0,{},{default:()=>{var te;return $t(He("ul",{role:"menu",class:"el-menu el-menu--inline",style:ne.value},[(te=t.default)==null?void 0:te.call(t)]),[[en,w.value]])}})]);return He("li",{class:["el-sub-menu",{"is-active":C.value,"is-opened":w.value,"is-disabled":e.disabled}],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:D,onMouseleave:()=>F(!0),onFocus:D},[be])}}});const gwe=mt({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Je(Array),default:()=>Ns([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0}}),Ww=e=>Array.isArray(e)&&e.every(t=>Xt(t)),mwe={close:(e,t)=>Xt(e)&&Ww(t),open:(e,t)=>Xt(e)&&Ww(t),select:(e,t,n,s)=>Xt(e)&&Ww(t)&&an(n)&&(s===void 0||s instanceof Promise)};var vwe=ge({name:"ElMenu",props:gwe,emits:mwe,setup(e,{emit:t,slots:n,expose:s}){const o=Lt(),r=o.appContext.config.globalProperties.$router,i=L(),a=L(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),l=L(e.defaultActive),u=L({}),c=L({}),d=L(!1),f=R(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),h=()=>{const C=l.value&&u.value[l.value];if(!C||e.mode==="horizontal"||e.collapse)return;C.indexPath.forEach(k=>{const I=c.value[k];I&&p(k,I.indexPath)})},p=(C,x)=>{a.value.includes(C)||(e.uniqueOpened&&(a.value=a.value.filter(k=>x.includes(k))),a.value.push(C),t("open",C,x))},g=(C,x)=>{const k=a.value.indexOf(C);k!==-1&&a.value.splice(k,1),t("close",C,x)},m=({index:C,indexPath:x})=>{a.value.includes(C)?g(C,x):p(C,x)},v=C=>{(e.mode==="horizontal"||e.collapse)&&(a.value=[]);const{index:x,indexPath:k}=C;if(!(x===void 0||k===void 0))if(e.router&&r){const I=C.route||x,S=r.push(I).then(T=>(T||(l.value=x),T));t("select",x,k,{index:x,indexPath:k,route:I},S)}else l.value=x,t("select",x,k,{index:x,indexPath:k})},b=C=>{const x=u.value,k=x[C]||l.value&&x[l.value]||x[e.defaultActive];k?(l.value=k.index,h()):d.value?d.value=!1:l.value=void 0},$=()=>{dt(()=>o.proxy.$forceUpdate())};Oe(()=>e.defaultActive,C=>{u.value[C]||(l.value=""),b(C)}),Oe(u.value,()=>h()),Oe(()=>e.collapse,(C,x)=>{C!==x&&(d.value=!0),C&&(a.value=[])});{const C=S=>{c.value[S.index]=S},x=S=>{delete c.value[S.index]};Vt("rootMenu",Sn({props:e,openedMenus:a,items:u,subMenus:c,activeIndex:l,isMenuPopup:f,addMenuItem:S=>{u.value[S.index]=S},removeMenuItem:S=>{delete u.value[S.index]},addSubMenu:C,removeSubMenu:x,openMenu:p,closeMenu:g,handleMenuItemClick:v,handleSubMenuClick:m})),Vt(`subMenu:${o.uid}`,{addSubMenu:C,removeSubMenu:x,mouseInChild:L(!1)})}Rt(()=>{h(),e.mode==="horizontal"&&new uwe(o.vnode.el)}),s({open:x=>{const{indexPath:k}=c.value[x];k.forEach(I=>p(I,k))},close:g,handleResize:$});const y=C=>{const x=Array.isArray(C)?C:[C],k=[];return x.forEach(I=>{Array.isArray(I.children)?k.push(...y(I.children)):k.push(I)}),k},w=C=>e.mode==="horizontal"?$t(C,[[ile,$]]):C;return()=>{var C,x,k,I;let S=(x=(C=n.default)==null?void 0:C.call(n))!=null?x:[];const T=[];if(e.mode==="horizontal"&&i.value){const M=Array.from((I=(k=i.value)==null?void 0:k.childNodes)!=null?I:[]).filter(G=>G.nodeName!=="#text"||G.nodeValue),D=y(S),F=64,V=parseInt(getComputedStyle(i.value).paddingLeft,10),U=parseInt(getComputedStyle(i.value).paddingRight,10),ne=i.value.clientWidth-V-U;let be=0,te=0;M.forEach((G,Y)=>{be+=G.offsetWidth||0,be<=ne-F&&(te=Y+1)});const he=D.slice(0,te),oe=D.slice(te);(oe==null?void 0:oe.length)&&e.ellipsis&&(S=he,T.push(He(ik,{index:"sub-menu-more",class:"el-sub-menu__hide-arrow"},{title:()=>He(Ot,{class:["el-sub-menu__icon-more"]},{default:()=>He(nie)}),default:()=>oe})))}const _=g4(e),N=M=>e.ellipsis?w(M):M,O=N(He("ul",{key:String(e.collapse),role:"menubar",ref:i,style:_.value,class:{"el-menu":!0,"el-menu--horizontal":e.mode==="horizontal","el-menu--collapse":e.collapse}},[...S.map(M=>N(M)),...T]));return e.collapseTransition&&e.mode==="vertical"?He(fwe,()=>O):O}}});const bwe=mt({index:{type:Je([String,null]),default:null},route:{type:Je([String,Object])},disabled:Boolean}),ywe={click:e=>Xt(e.index)&&Array.isArray(e.indexPath)},Hw="ElMenuItem",wwe=ge({name:Hw,components:{ElTooltip:ar},props:bwe,emits:ywe,setup(e,{emit:t}){const n=Lt(),s=Ze("rootMenu");s||ko(Hw,"can not inject root menu");const{parentMenu:o,paddingStyle:r,indexPath:i}=p4(n,bo(e,"index")),a=Ze(`subMenu:${o.value.uid}`);a||ko(Hw,"can not inject sub menu");const l=R(()=>e.index===s.activeIndex),u=Sn({index:e.index,indexPath:i,active:l}),c=()=>{e.disabled||(s.handleMenuItemClick({index:e.index,indexPath:i.value,route:e.route}),t("click",u))};return Rt(()=>{a.addSubMenu(u),s.addMenuItem(u)}),ls(()=>{a.removeSubMenu(u),s.removeMenuItem(u)}),{Effect:KF,parentMenu:o,rootMenu:s,paddingStyle:r,active:l,handleClick:c}}}),$we={style:{position:"absolute",left:0,top:0,height:"100%",width:"100%",display:"inline-block",boxSizing:"border-box",padding:"0 20px"}};function Cwe(e,t,n,s,o,r){const i=ie("el-tooltip");return A(),B("li",{class:q(["el-menu-item",{"is-active":e.active,"is-disabled":e.disabled}]),role:"menuitem",tabindex:"-1",style:nt(e.paddingStyle),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(A(),ve(i,{key:0,effect:e.Effect.DARK,placement:"right",persistent:""},{content:re(()=>[Re(e.$slots,"title")]),default:re(()=>[W("div",$we,[Re(e.$slots,"default")])]),_:3},8,["effect"])):(A(),B(at,{key:1},[Re(e.$slots,"default"),Re(e.$slots,"title")],64))],6)}var m4=We(wwe,[["render",Cwe]]);const xwe={title:String},BA="ElMenuItemGroup",kwe=ge({name:BA,props:xwe,setup(){const e=Lt(),t=Ze("rootMenu");return t||ko(BA,"can not inject root menu"),{levelPadding:R(()=>{if(t.props.collapse)return 20;let s=20,o=e.parent;for(;o&&o.type.name!=="ElMenu";)o.type.name==="ElSubMenu"&&(s+=20),o=o.parent;return s})}}}),Swe={class:"el-menu-item-group"};function Iwe(e,t,n,s,o,r){return A(),B("li",Swe,[W("div",{class:"el-menu-item-group__title",style:nt({paddingLeft:`${e.levelPadding}px`})},[e.$slots.title?Re(e.$slots,"title",{key:1}):(A(),B(at,{key:0},[qt(Pe(e.title),1)],2112))],4),W("ul",null,[Re(e.$slots,"default")])])}var v4=We(kwe,[["render",Iwe]]);const Twe=Wt(vwe,{MenuItem:m4,MenuItemGroup:v4,SubMenu:ik}),Ewe=us(m4),_we=us(v4);us(ik);const Nwe={icon:{type:[String,Object],default:Zse},title:String,content:{type:String,default:""}},Awe={back:()=>!0},Dwe=ge({name:"ElPageHeader",components:{ElIcon:Ot},props:Nwe,emits:Awe,setup(e,{emit:t}){const{t:n}=In();function s(){t("back")}return{handleClick:s,t:n}}}),Rwe={class:"el-page-header"},Owe={key:0,class:"el-page-header__icon"},Mwe={class:"el-page-header__title"},Pwe={class:"el-page-header__content"};function Fwe(e,t,n,s,o,r){const i=ie("el-icon");return A(),B("div",Rwe,[W("div",{class:"el-page-header__left",onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.icon||e.$slots.icon?(A(),B("div",Owe,[Re(e.$slots,"icon",{},()=>[e.icon?(A(),ve(i,{key:0},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1})):ce("v-if",!0)])])):ce("v-if",!0),W("div",Mwe,[Re(e.$slots,"title",{},()=>[qt(Pe(e.title||e.t("el.pageHeader.title")),1)])])]),W("div",Pwe,[Re(e.$slots,"content",{},()=>[qt(Pe(e.content),1)])])])}var Lwe=We(Dwe,[["render",Fwe]]);const Bwe=Wt(Lwe),zwe={disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String,default:""}},Vwe=ge({name:"ElPaginationPrev",components:{ElIcon:Ot,ArrowLeft:fc},props:zwe,emits:["click"],setup(e){return{internalDisabled:R(()=>e.disabled||e.currentPage<=1)}}}),Wwe=["disabled","aria-disabled"],Hwe={key:0};function Uwe(e,t,n,s,o,r){const i=ie("arrow-left"),a=ie("el-icon");return A(),B("button",{type:"button",class:"btn-prev",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:t[0]||(t[0]=l=>e.$emit("click",l))},[e.prevText?(A(),B("span",Hwe,Pe(e.prevText),1)):(A(),ve(a,{key:1},{default:re(()=>[le(i)]),_:1}))],8,Wwe)}var jwe=We(Vwe,[["render",Uwe]]);const Gwe={disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String,default:""}},Kwe=ge({name:"ElPaginationNext",components:{ElIcon:Ot,ArrowRight:Qr},props:Gwe,emits:["click"],setup(e){return{internalDisabled:R(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0)}}}),qwe=["disabled","aria-disabled"],Ywe={key:0};function Xwe(e,t,n,s,o,r){const i=ie("arrow-right"),a=ie("el-icon");return A(),B("button",{type:"button",class:"btn-next",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:t[0]||(t[0]=l=>e.$emit("click",l))},[e.nextText?(A(),B("span",Ywe,Pe(e.nextText),1)):(A(),ve(a,{key:1},{default:re(()=>[le(i)]),_:1}))],8,qwe)}var Zwe=We(Kwe,[["render",Xwe]]);const b4="ElSelectGroup",P0="ElSelect";function Jwe(e,t){const n=Ze(P0),s=Ze(b4,{disabled:!1}),o=R(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),r=R(()=>n.props.multiple?d(n.props.modelValue,e.value):f(e.value,n.props.modelValue)),i=R(()=>{if(n.props.multiple){const g=n.props.modelValue||[];return!r.value&&g.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),a=R(()=>e.label||(o.value?"":e.value)),l=R(()=>e.value||e.label||""),u=R(()=>e.disabled||t.groupDisabled||i.value),c=Lt(),d=(g=[],m)=>{if(o.value){const v=n.props.valueKey;return g&&g.some(b=>Ps(b,v)===Ps(m,v))}else return g&&g.indexOf(m)>-1},f=(g,m)=>{if(o.value){const{valueKey:v}=n.props;return Ps(g,v)===Ps(m,v)}else return g===m},h=()=>{!e.disabled&&!s.disabled&&(n.hoverIndex=n.optionsArray.indexOf(c.proxy))};Oe(()=>a.value,()=>{!e.created&&!n.props.remote&&n.setSelected()}),Oe(()=>e.value,(g,m)=>{const{remote:v,valueKey:b}=n.props;if(!e.created&&!v){if(b&&typeof g=="object"&&typeof m=="object"&&g[b]===m[b])return;n.setSelected()}}),Oe(()=>s.disabled,()=>{t.groupDisabled=s.disabled},{immediate:!0});const{queryChange:p}=$n(n);return Oe(p,g=>{const{query:m}=Ke(g),v=new RegExp(zte(m),"i");t.visible=v.test(a.value)||e.created,t.visible||n.filteredOptionsCount--}),{select:n,currentLabel:a,currentValue:l,itemSelected:r,isDisabled:u,hoverItem:h}}const Qwe=ge({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(e){const t=Sn({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:n,itemSelected:s,isDisabled:o,select:r,hoverItem:i}=Jwe(e,t),{visible:a,hover:l}=xo(t),u=Lt().proxy,c=u.value;r.onOptionCreate(u),ls(()=>{const{selected:f}=r,h=r.props.multiple?f:[f],p=r.cachedOptions.has(c),g=h.some(m=>m.value===u.value);p&&!g&&r.cachedOptions.delete(c),r.onOptionDestroy(c)});function d(){e.disabled!==!0&&t.groupDisabled!==!0&&r.handleOptionSelect(u,!0)}return{currentLabel:n,itemSelected:s,isDisabled:o,select:r,hoverItem:i,visible:a,hover:l,selectOptionClick:d,states:t}}});function e$e(e,t,n,s,o,r){return $t((A(),B("li",{class:q(["el-select-dropdown__item",{selected:e.itemSelected,"is-disabled":e.isDisabled,hover:e.hover}]),onMouseenter:t[0]||(t[0]=(...i)=>e.hoverItem&&e.hoverItem(...i)),onClick:t[1]||(t[1]=ht((...i)=>e.selectOptionClick&&e.selectOptionClick(...i),["stop"]))},[Re(e.$slots,"default",{},()=>[W("span",null,Pe(e.currentLabel),1)])],34)),[[en,e.visible]])}var ak=We(Qwe,[["render",e$e]]);const t$e=ge({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=Ze(P0),t=R(()=>e.props.popperClass),n=R(()=>e.props.multiple),s=R(()=>e.props.fitInputWidth),o=L("");function r(){var i;o.value=`${(i=e.selectWrapper)==null?void 0:i.getBoundingClientRect().width}px`}return Rt(()=>{r(),_l(e.selectWrapper,r)}),ls(()=>{Nl(e.selectWrapper,r)}),{minWidth:o,popperClass:t,isMultiple:n,isFitInputWidth:s}}});function n$e(e,t,n,s,o,r){return A(),B("div",{class:q(["el-select-dropdown",[{"is-multiple":e.isMultiple},e.popperClass]]),style:nt({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[Re(e.$slots,"default")],6)}var s$e=We(t$e,[["render",n$e]]);function o$e(e){const{t}=In();return Sn({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:t("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:0,tagInMultiLine:!1})}const r$e=(e,t,n)=>{const{t:s}=In(),o=L(null),r=L(null),i=L(null),a=L(null),l=L(null),u=L(null),c=L(-1),d=vo({query:""}),f=vo(""),h=Ze(ir,{}),p=Ze(Ni,{}),g=R(()=>!e.filterable||e.multiple||!t.visible),m=R(()=>e.disabled||h.disabled),v=R(()=>{const de=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!m.value&&t.inputHovering&&de}),b=R(()=>e.remote&&e.filterable?"":e.suffixIcon),$=R(()=>b.value&&t.visible?"is-reverse":""),y=R(()=>e.remote?300:0),w=R(()=>e.loading?e.loadingText||s("el.select.loading"):e.remote&&t.query===""&&t.options.size===0?!1:e.filterable&&t.query&&t.options.size>0&&t.filteredOptionsCount===0?e.noMatchText||s("el.select.noMatch"):t.options.size===0?e.noDataText||s("el.select.noData"):null),C=R(()=>Array.from(t.options.values())),x=R(()=>Array.from(t.cachedOptions.values())),k=R(()=>{const de=C.value.filter(De=>!De.created).some(De=>De.currentLabel===t.query);return e.filterable&&e.allowCreate&&t.query!==""&&!de}),I=ks(),S=R(()=>["small"].indexOf(I.value)>-1?"small":"default"),T=R({get(){return t.visible&&w.value!==!1},set(de){t.visible=de}});Oe(()=>m.value,()=>{dt(()=>{_()})}),Oe(()=>e.placeholder,de=>{t.cachedPlaceHolder=t.currentPlaceholder=de}),Oe(()=>e.modelValue,(de,De)=>{var Ge;e.multiple&&(_(),de&&de.length>0||r.value&&t.query!==""?t.currentPlaceholder="":t.currentPlaceholder=t.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(t.query="",N(t.query))),D(),e.filterable&&!e.multiple&&(t.inputLength=20),yi(de,De)||(Ge=p.validate)==null||Ge.call(p,"change")},{flush:"post",deep:!0}),Oe(()=>t.visible,de=>{var De,Ge,Ne;de?((Ge=(De=i.value)==null?void 0:De.updatePopper)==null||Ge.call(De),e.filterable&&(t.filteredOptionsCount=t.optionsCount,t.query=e.remote?"":t.selectedLabel,e.multiple?(Ne=r.value)==null||Ne.focus():t.selectedLabel&&(t.currentPlaceholder=t.selectedLabel,t.selectedLabel=""),N(t.query),!e.multiple&&!e.remote&&(d.value.query="",Df(d),Df(f)))):(r.value&&r.value.blur(),t.query="",t.previousQuery=null,t.selectedLabel="",t.inputLength=20,t.menuVisibleOnFocus=!1,V(),dt(()=>{r.value&&r.value.value===""&&t.selected.length===0&&(t.currentPlaceholder=t.cachedPlaceHolder)}),e.multiple||(t.selected&&(e.filterable&&e.allowCreate&&t.createdSelected&&t.createdLabel?t.selectedLabel=t.createdLabel:t.selectedLabel=t.selected.currentLabel,e.filterable&&(t.query=t.selectedLabel)),e.filterable&&(t.currentPlaceholder=t.cachedPlaceHolder))),n.emit("visible-change",de)}),Oe(()=>t.options.entries(),()=>{var de,De,Ge;if(!Yt)return;(De=(de=i.value)==null?void 0:de.updatePopper)==null||De.call(de),e.multiple&&_();const Ne=((Ge=l.value)==null?void 0:Ge.querySelectorAll("input"))||[];Array.from(Ne).indexOf(document.activeElement)===-1&&D(),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&M()},{flush:"post"}),Oe(()=>t.hoverIndex,de=>{typeof de=="number"&&de>-1&&(c.value=C.value[de]||{}),C.value.forEach(De=>{De.hover=c.value===De})});const _=()=>{e.collapseTags&&!e.filterable||dt(()=>{var de,De;if(!o.value)return;const Ge=o.value.$el.childNodes,Ne=Array.from(Ge).filter(on=>on.tagName==="INPUT")[0],ct=a.value,wt=t.initialInputHeight||40;Ne.style.height=t.selected.length===0?`${wt}px`:`${Math.max(ct?ct.clientHeight+(ct.clientHeight>wt?6:0):0,wt)}px`,t.tagInMultiLine=parseFloat(Ne.style.height)>wt,t.visible&&w.value!==!1&&((De=(de=i.value)==null?void 0:de.updatePopper)==null||De.call(de))})},N=de=>{if(!(t.previousQuery===de||t.isOnComposition)){if(t.previousQuery===null&&(typeof e.filterMethod=="function"||typeof e.remoteMethod=="function")){t.previousQuery=de;return}t.previousQuery=de,dt(()=>{var De,Ge;t.visible&&((Ge=(De=i.value)==null?void 0:De.updatePopper)==null||Ge.call(De))}),t.hoverIndex=-1,e.multiple&&e.filterable&&dt(()=>{const De=r.value.value.length*15+20;t.inputLength=e.collapseTags?Math.min(50,De):De,O(),_()}),e.remote&&typeof e.remoteMethod=="function"?(t.hoverIndex=-1,e.remoteMethod(de)):typeof e.filterMethod=="function"?(e.filterMethod(de),Df(f)):(t.filteredOptionsCount=t.optionsCount,d.value.query=de,Df(d),Df(f)),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&M()}},O=()=>{t.currentPlaceholder!==""&&(t.currentPlaceholder=r.value.value?"":t.cachedPlaceHolder)},M=()=>{const de=C.value.filter(Ne=>Ne.visible&&!Ne.disabled&&!Ne.states.groupDisabled),De=de.filter(Ne=>Ne.created)[0],Ge=de[0];t.hoverIndex=Se(C.value,De||Ge)},D=()=>{var de;if(!e.multiple){const Ge=F(e.modelValue);((de=Ge.props)==null?void 0:de.created)?(t.createdLabel=Ge.props.value,t.createdSelected=!0):t.createdSelected=!1,t.selectedLabel=Ge.currentLabel,t.selected=Ge,e.filterable&&(t.query=t.selectedLabel);return}const De=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(Ge=>{De.push(F(Ge))}),t.selected=De,dt(()=>{_()})},F=de=>{let De;const Ge=$v(de).toLowerCase()==="object",Ne=$v(de).toLowerCase()==="null",ct=$v(de).toLowerCase()==="undefined";for(let cn=t.cachedOptions.size-1;cn>=0;cn--){const Kt=x.value[cn];if(Ge?Ps(Kt.value,e.valueKey)===Ps(de,e.valueKey):Kt.value===de){De={value:de,currentLabel:Kt.currentLabel,isDisabled:Kt.isDisabled};break}}if(De)return De;const on={value:de,currentLabel:!Ge&&!Ne&&!ct?de:""};return e.multiple&&(on.hitState=!1),on},V=()=>{setTimeout(()=>{const de=e.valueKey;e.multiple?t.selected.length>0?t.hoverIndex=Math.min.apply(null,t.selected.map(De=>C.value.findIndex(Ge=>Ps(Ge,de)===Ps(De,de)))):t.hoverIndex=-1:t.hoverIndex=C.value.findIndex(De=>lt(De)===lt(t.selected))},300)},U=()=>{var de,De;ne(),(De=(de=i.value)==null?void 0:de.updatePopper)==null||De.call(de),e.multiple&&_()},ne=()=>{var de;t.inputWidth=(de=o.value)==null?void 0:de.$el.getBoundingClientRect().width},be=()=>{e.filterable&&t.query!==t.selectedLabel&&(t.query=t.selectedLabel,N(t.query))},te=tr(()=>{be()},y.value),he=tr(de=>{N(de.target.value)},y.value),oe=de=>{yi(e.modelValue,de)||n.emit(Xs,de)},G=de=>{if(de.target.value.length<=0&&!H()){const De=e.modelValue.slice();De.pop(),n.emit(Pt,De),oe(De)}de.target.value.length===1&&e.modelValue.length===0&&(t.currentPlaceholder=t.cachedPlaceHolder)},Y=(de,De)=>{const Ge=t.selected.indexOf(De);if(Ge>-1&&!m.value){const Ne=e.modelValue.slice();Ne.splice(Ge,1),n.emit(Pt,Ne),oe(Ne),n.emit("remove-tag",De.value)}de.stopPropagation()},X=de=>{de.stopPropagation();const De=e.multiple?[]:"";if(typeof De!="string")for(const Ge of t.selected)Ge.isDisabled&&De.push(Ge.value);n.emit(Pt,De),oe(De),t.visible=!1,n.emit("clear")},ae=(de,De)=>{var Ge;if(e.multiple){const Ne=(e.modelValue||[]).slice(),ct=Se(Ne,de.value);ct>-1?Ne.splice(ct,1):(e.multipleLimit<=0||Ne.length<e.multipleLimit)&&Ne.push(de.value),n.emit(Pt,Ne),oe(Ne),de.created&&(t.query="",N(""),t.inputLength=20),e.filterable&&((Ge=r.value)==null||Ge.focus())}else n.emit(Pt,de.value),oe(de.value),t.visible=!1;t.isSilentBlur=De,Le(),!t.visible&&dt(()=>{Be(de)})},Se=(de=[],De)=>{if(!an(De))return de.indexOf(De);const Ge=e.valueKey;let Ne=-1;return de.some((ct,wt)=>Ps(ct,Ge)===Ps(De,Ge)?(Ne=wt,!0):!1),Ne},Le=()=>{t.softFocus=!0;const de=r.value||o.value;de&&(de==null||de.focus())},Be=de=>{var De,Ge,Ne,ct,wt;const on=Array.isArray(de)?de[0]:de;let cn=null;if(on==null?void 0:on.value){const Kt=C.value.filter(Ln=>Ln.value===on.value);Kt.length>0&&(cn=Kt[0].$el)}if(i.value&&cn){const Kt=(ct=(Ne=(Ge=(De=i.value)==null?void 0:De.popperRef)==null?void 0:Ge.contentRef)==null?void 0:Ne.querySelector)==null?void 0:ct.call(Ne,".el-select-dropdown__wrap");Kt&&$L(Kt,cn)}(wt=u.value)==null||wt.handleScroll()},Fe=de=>{t.optionsCount++,t.filteredOptionsCount++,t.options.set(de.value,de),t.cachedOptions.set(de.value,de)},j=de=>{t.optionsCount--,t.filteredOptionsCount--,t.options.delete(de)},Q=de=>{de.code!==Qe.backspace&&H(!1),t.inputLength=r.value.value.length*15+20,_()},H=de=>{if(!Array.isArray(t.selected))return;const De=t.selected[t.selected.length-1];if(!!De)return de===!0||de===!1?(De.hitState=de,de):(De.hitState=!De.hitState,De.hitState)},se=de=>{const De=de.target.value;if(de.type==="compositionend")t.isOnComposition=!1,dt(()=>N(De));else{const Ge=De[De.length-1]||"";t.isOnComposition=!A0(Ge)}},we=()=>{dt(()=>Be(t.selected))},J=de=>{t.softFocus?t.softFocus=!1:((e.automaticDropdown||e.filterable)&&(t.visible=!0,e.filterable&&(t.menuVisibleOnFocus=!0)),n.emit("focus",de))},_e=()=>{var de;t.visible=!1,(de=o.value)==null||de.blur()},Ie=de=>{dt(()=>{t.isSilentBlur?t.isSilentBlur=!1:n.emit("blur",de)}),t.softFocus=!1},fe=de=>{X(de)},Te=()=>{t.visible=!1},rt=()=>{var de;e.automaticDropdown||m.value||(t.menuVisibleOnFocus?t.menuVisibleOnFocus=!1:t.visible=!t.visible,t.visible&&((de=r.value||o.value)==null||de.focus()))},Xe=()=>{t.visible?C.value[t.hoverIndex]&&ae(C.value[t.hoverIndex],void 0):rt()},lt=de=>an(de.value)?Ps(de.value,e.valueKey):de.value,vt=R(()=>C.value.filter(de=>de.visible).every(de=>de.disabled)),Ye=de=>{if(!t.visible){t.visible=!0;return}if(!(t.options.size===0||t.filteredOptionsCount===0)&&!t.isOnComposition&&!vt.value){de==="next"?(t.hoverIndex++,t.hoverIndex===t.options.size&&(t.hoverIndex=0)):de==="prev"&&(t.hoverIndex--,t.hoverIndex<0&&(t.hoverIndex=t.options.size-1));const De=C.value[t.hoverIndex];(De.disabled===!0||De.states.groupDisabled===!0||!De.visible)&&Ye(de),dt(()=>Be(c.value))}};return{optionsArray:C,selectSize:I,handleResize:U,debouncedOnInputChange:te,debouncedQueryChange:he,deletePrevTag:G,deleteTag:Y,deleteSelected:X,handleOptionSelect:ae,scrollToOption:Be,readonly:g,resetInputHeight:_,showClose:v,iconComponent:b,iconReverse:$,showNewOption:k,collapseTagSize:S,setSelected:D,managePlaceholder:O,selectDisabled:m,emptyText:w,toggleLastOptionHitState:H,resetInputState:Q,handleComposition:se,onOptionCreate:Fe,onOptionDestroy:j,handleMenuEnter:we,handleFocus:J,blur:_e,handleBlur:Ie,handleClearClick:fe,handleClose:Te,toggleMenu:rt,selectOption:Xe,getValueKey:lt,navigateOptions:Ye,dropMenuVisible:T,queryChange:d,groupQueryChange:f,reference:o,input:r,tooltipRef:i,tags:a,selectWrapper:l,scrollbar:u}},i$e=ge({name:"ElSelect",componentName:"ElSelect",components:{ElInput:ei,ElSelectMenu:s$e,ElOption:ak,ElTag:O0,ElScrollbar:Oa,ElTooltip:ar,ElIcon:Ot},directives:{ClickOutside:El},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:nr},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Ta},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:[String,Object],default:Fp},tagType:{type:String,default:"info"}},emits:[Pt,Xs,"remove-tag","clear","visible-change","focus","blur"],setup(e,t){const{t:n}=In(),s=o$e(e),{optionsArray:o,selectSize:r,readonly:i,handleResize:a,collapseTagSize:l,debouncedOnInputChange:u,debouncedQueryChange:c,deletePrevTag:d,deleteTag:f,deleteSelected:h,handleOptionSelect:p,scrollToOption:g,setSelected:m,resetInputHeight:v,managePlaceholder:b,showClose:$,selectDisabled:y,iconComponent:w,iconReverse:C,showNewOption:x,emptyText:k,toggleLastOptionHitState:I,resetInputState:S,handleComposition:T,onOptionCreate:_,onOptionDestroy:N,handleMenuEnter:O,handleFocus:M,blur:D,handleBlur:F,handleClearClick:V,handleClose:U,toggleMenu:ne,selectOption:be,getValueKey:te,navigateOptions:he,dropMenuVisible:oe,reference:G,input:Y,tooltipRef:X,tags:ae,selectWrapper:Se,scrollbar:Le,queryChange:Be,groupQueryChange:Fe}=r$e(e,s,t),{focus:j}=Hte(G),{inputWidth:Q,selected:H,inputLength:se,filteredOptionsCount:we,visible:J,softFocus:_e,selectedLabel:Ie,hoverIndex:fe,query:Te,inputHovering:rt,currentPlaceholder:Xe,menuVisibleOnFocus:lt,isOnComposition:vt,isSilentBlur:Ye,options:de,cachedOptions:De,optionsCount:Ge,prefixWidth:Ne,tagInMultiLine:ct}=xo(s),wt=R(()=>{const Kt=["el-select"],Ln=Ke(r);return Ln&&Kt.push(`el-select--${Ln}`),e.disabled&&Kt.push("el-select--disabled"),Kt}),on=R(()=>({maxWidth:`${Ke(Q)-32}px`,width:"100%"}));Vt(P0,Sn({props:e,options:de,optionsArray:o,cachedOptions:De,optionsCount:Ge,filteredOptionsCount:we,hoverIndex:fe,handleOptionSelect:p,onOptionCreate:_,onOptionDestroy:N,selectWrapper:Se,selected:H,setSelected:m,queryChange:Be,groupQueryChange:Fe})),Rt(()=>{if(s.cachedPlaceHolder=Xe.value=e.placeholder||n("el.select.placeholder"),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(Xe.value=""),_l(Se.value,a),G.value&&G.value.$el){const Kt={large:36,default:32,small:28},Ln=G.value.input;s.initialInputHeight=Ln.getBoundingClientRect().height||Kt[r.value]}e.remote&&e.multiple&&v(),dt(()=>{if(!!G.value&&(G.value.$el&&(Q.value=G.value.$el.getBoundingClientRect().width),t.slots.prefix)){const Kt=G.value.$el.childNodes,Ln=Array.from(Kt).filter(ii=>ii.tagName==="INPUT")[0],ur=G.value.$el.querySelector(".el-input__prefix");Ne.value=Math.max(ur.getBoundingClientRect().width+5,30),s.prefixWidth&&(Ln.style.paddingLeft=`${Math.max(s.prefixWidth,30)}px`)}}),m()}),ls(()=>{Nl(Se.value,a)}),e.multiple&&!Array.isArray(e.modelValue)&&t.emit(Pt,[]),!e.multiple&&Array.isArray(e.modelValue)&&t.emit(Pt,"");const cn=R(()=>{var Kt,Ln;return(Ln=(Kt=X.value)==null?void 0:Kt.popperRef)==null?void 0:Ln.contentRef});return{tagInMultiLine:ct,prefixWidth:Ne,selectSize:r,readonly:i,handleResize:a,collapseTagSize:l,debouncedOnInputChange:u,debouncedQueryChange:c,deletePrevTag:d,deleteTag:f,deleteSelected:h,handleOptionSelect:p,scrollToOption:g,inputWidth:Q,selected:H,inputLength:se,filteredOptionsCount:we,visible:J,softFocus:_e,selectedLabel:Ie,hoverIndex:fe,query:Te,inputHovering:rt,currentPlaceholder:Xe,menuVisibleOnFocus:lt,isOnComposition:vt,isSilentBlur:Ye,options:de,resetInputHeight:v,managePlaceholder:b,showClose:$,selectDisabled:y,iconComponent:w,iconReverse:C,showNewOption:x,emptyText:k,toggleLastOptionHitState:I,resetInputState:S,handleComposition:T,handleMenuEnter:O,handleFocus:M,blur:D,handleBlur:F,handleClearClick:V,handleClose:U,toggleMenu:ne,selectOption:be,getValueKey:te,navigateOptions:he,dropMenuVisible:oe,focus:j,reference:G,input:Y,tooltipRef:X,popperPaneRef:cn,tags:ae,selectWrapper:Se,scrollbar:Le,wrapperKls:wt,selectTagsStyle:on}}}),a$e={class:"select-trigger"},l$e={key:0},u$e={class:"el-select__tags-text"},c$e=["disabled","autocomplete"],d$e={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},f$e={key:1,class:"el-select-dropdown__empty"};function h$e(e,t,n,s,o,r){const i=ie("el-tag"),a=ie("el-icon"),l=ie("el-input"),u=ie("el-option"),c=ie("el-scrollbar"),d=ie("el-select-menu"),f=ie("el-tooltip"),h=Vo("click-outside");return $t((A(),B("div",{ref:"selectWrapper",class:q(e.wrapperKls),onClick:t[24]||(t[24]=ht((...p)=>e.toggleMenu&&e.toggleMenu(...p),["stop"]))},[le(f,{ref:"tooltipRef",visible:e.dropMenuVisible,"onUpdate:visible":t[23]||(t[23]=p=>e.dropMenuVisible=p),placement:"bottom-start","append-to-body":e.popperAppendToBody,"popper-class":`el-select__popper ${e.popperClass}`,"fallback-placements":["bottom-start","top-start","right","left"],effect:"light",pure:"",trigger:"click",transition:"el-zoom-in-top","stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:"",onShow:e.handleMenuEnter},{default:re(()=>[W("div",a$e,[e.multiple?(A(),B("div",{key:0,ref:"tags",class:"el-select__tags",style:nt(e.selectTagsStyle)},[e.collapseTags&&e.selected.length?(A(),B("span",l$e,[le(i,{closable:!e.selectDisabled&&!e.selected[0].isDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:e.tagType,"disable-transitions":"",onClose:t[0]||(t[0]=p=>e.deleteTag(p,e.selected[0]))},{default:re(()=>[W("span",{class:"el-select__tags-text",style:nt({maxWidth:e.inputWidth-123+"px"})},Pe(e.selected[0].currentLabel),5)]),_:1},8,["closable","size","hit","type"]),e.selected.length>1?(A(),ve(i,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:re(()=>[W("span",u$e,"+ "+Pe(e.selected.length-1),1)]),_:1},8,["size","type"])):ce("v-if",!0)])):ce("v-if",!0),ce(" <div> "),e.collapseTags?ce("v-if",!0):(A(),ve(xs,{key:1,onAfterLeave:e.resetInputHeight},{default:re(()=>[W("span",{style:nt({marginLeft:e.prefixWidth&&e.selected.length?`${e.prefixWidth}px`:null})},[(A(!0),B(at,null,Zt(e.selected,p=>(A(),ve(i,{key:e.getValueKey(p),closable:!e.selectDisabled&&!p.isDisabled,size:e.collapseTagSize,hit:p.hitState,type:e.tagType,"disable-transitions":"",onClose:g=>e.deleteTag(g,p)},{default:re(()=>[W("span",{class:"el-select__tags-text",style:nt({maxWidth:e.inputWidth-75+"px"})},Pe(p.currentLabel),5)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],4)]),_:1},8,["onAfterLeave"])),ce(" </div> "),e.filterable?$t((A(),B("input",{key:2,ref:"input","onUpdate:modelValue":t[1]||(t[1]=p=>e.query=p),type:"text",class:q(["el-select__input",[e.selectSize?`is-${e.selectSize}`:""]]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:nt({marginLeft:e.prefixWidth&&!e.selected.length||e.tagInMultiLine?`${e.prefixWidth}px`:null,flexGrow:"1",width:`${e.inputLength/(e.inputWidth-32)}%`,maxWidth:`${e.inputWidth-42}px`}),onFocus:t[2]||(t[2]=(...p)=>e.handleFocus&&e.handleFocus(...p)),onBlur:t[3]||(t[3]=(...p)=>e.handleBlur&&e.handleBlur(...p)),onKeyup:t[4]||(t[4]=(...p)=>e.managePlaceholder&&e.managePlaceholder(...p)),onKeydown:[t[5]||(t[5]=(...p)=>e.resetInputState&&e.resetInputState(...p)),t[6]||(t[6]=Ut(ht(p=>e.navigateOptions("next"),["prevent"]),["down"])),t[7]||(t[7]=Ut(ht(p=>e.navigateOptions("prev"),["prevent"]),["up"])),t[8]||(t[8]=Ut(ht(p=>e.visible=!1,["stop","prevent"]),["esc"])),t[9]||(t[9]=Ut(ht((...p)=>e.selectOption&&e.selectOption(...p),["stop","prevent"]),["enter"])),t[10]||(t[10]=Ut((...p)=>e.deletePrevTag&&e.deletePrevTag(...p),["delete"])),t[11]||(t[11]=Ut(p=>e.visible=!1,["tab"]))],onCompositionstart:t[12]||(t[12]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onCompositionupdate:t[13]||(t[13]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onCompositionend:t[14]||(t[14]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onInput:t[15]||(t[15]=(...p)=>e.debouncedQueryChange&&e.debouncedQueryChange(...p))},null,46,c$e)),[[$2,e.query]]):ce("v-if",!0)],4)):ce("v-if",!0),le(l,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":t[16]||(t[16]=p=>e.selectedLabel=p),type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:q({"is-focus":e.visible}),tabindex:e.multiple&&e.filterable?-1:void 0,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[t[17]||(t[17]=Ut(ht(p=>e.navigateOptions("next"),["stop","prevent"]),["down"])),t[18]||(t[18]=Ut(ht(p=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),Ut(ht(e.selectOption,["stop","prevent"]),["enter"]),t[19]||(t[19]=Ut(ht(p=>e.visible=!1,["stop","prevent"]),["esc"])),t[20]||(t[20]=Ut(p=>e.visible=!1,["tab"]))],onMouseenter:t[21]||(t[21]=p=>e.inputHovering=!0),onMouseleave:t[22]||(t[22]=p=>e.inputHovering=!1)},jh({suffix:re(()=>[e.iconComponent?$t((A(),ve(a,{key:0,class:q(["el-select__caret","el-input__icon",e.iconReverse])},{default:re(()=>[(A(),ve(tn(e.iconComponent)))]),_:1},8,["class"])),[[en,!e.showClose]]):ce("v-if",!0),e.showClose&&e.clearIcon?(A(),ve(a,{key:1,class:"el-select__caret el-input__icon",onClick:e.handleClearClick},{default:re(()=>[(A(),ve(tn(e.clearIcon)))]),_:1},8,["onClick"])):ce("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:re(()=>[W("div",d$e,[Re(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])])]),content:re(()=>[le(d,null,{default:re(()=>[$t(le(c,{ref:"scrollbar",tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list",class:q({"is-empty":!e.allowCreate&&e.query&&e.filteredOptionsCount===0})},{default:re(()=>[e.showNewOption?(A(),ve(u,{key:0,value:e.query,created:!0},null,8,["value"])):ce("v-if",!0),Re(e.$slots,"default")]),_:3},8,["class"]),[[en,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(A(),B(at,{key:0},[e.$slots.empty?Re(e.$slots,"empty",{key:0}):(A(),B("p",f$e,Pe(e.emptyText),1))],2112)):ce("v-if",!0)]),_:3})]),_:3},8,["visible","append-to-body","popper-class","onShow"])],2)),[[h,e.handleClose,e.popperPaneRef]])}var p$e=We(i$e,[["render",h$e]]);const g$e=ge({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(e){const t=L(!0),n=Lt(),s=L([]);Vt(b4,Sn(ut({},xo(e))));const o=Ze(P0);Rt(()=>{s.value=r(n.subTree)});const r=a=>{const l=[];return Array.isArray(a.children)&&a.children.forEach(u=>{var c;u.type&&u.type.name==="ElOption"&&u.component&&u.component.proxy?l.push(u.component.proxy):((c=u.children)==null?void 0:c.length)&&l.push(...r(u))}),l},{groupQueryChange:i}=$n(o);return Oe(i,()=>{t.value=s.value.some(a=>a.visible===!0)}),{visible:t}}}),m$e={class:"el-select-group__wrap"},v$e={class:"el-select-group__title"},b$e={class:"el-select-group"};function y$e(e,t,n,s,o,r){return $t((A(),B("ul",m$e,[W("li",v$e,Pe(e.label),1),W("li",null,[W("ul",b$e,[Re(e.$slots,"default")])])],512)),[[en,e.visible]])}var y4=We(g$e,[["render",y$e]]);const F0=Wt(p$e,{Option:ak,OptionGroup:y4}),w4=us(ak),w$e=us(y4),lk=()=>Ze(_P,{}),$$e=mt({pageSize:{type:Number,required:!0},pageSizes:{type:Je(Array),default:()=>Ns([10,20,30,40,50,100])},popperClass:{type:String,default:""},disabled:Boolean,size:{type:String,default:"default"}}),C$e=ge({name:"ElPaginationSizes",components:{ElSelect:F0,ElOption:w4},props:$$e,emits:["page-size-change"],setup(e,{emit:t}){const{t:n}=In(),s=lk(),o=L(e.pageSize);Oe(()=>e.pageSizes,(a,l)=>{if(!yi(a,l)&&Array.isArray(a)){const u=a.indexOf(e.pageSize)>-1?e.pageSize:e.pageSizes[0];t("page-size-change",u)}}),Oe(()=>e.pageSize,a=>{o.value=a});const r=R(()=>e.pageSizes);function i(a){var l;a!==o.value&&(o.value=a,(l=s.handleSizeChange)==null||l.call(s,Number(a)))}return{innerPagesizes:r,innerPageSize:o,t:n,handleChange:i}}}),x$e={class:"el-pagination__sizes"};function k$e(e,t,n,s,o,r){const i=ie("el-option"),a=ie("el-select");return A(),B("span",x$e,[le(a,{"model-value":e.innerPageSize,disabled:e.disabled,"popper-class":e.popperClass,size:e.size,onChange:e.handleChange},{default:re(()=>[(A(!0),B(at,null,Zt(e.innerPagesizes,l=>(A(),ve(i,{key:l,value:l,label:l+e.t("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","onChange"])])}var S$e=We(C$e,[["render",k$e]]);const I$e=ge({name:"ElPaginationJumper",components:{ElInput:ei},setup(){const{t:e}=In(),{pageCount:t,disabled:n,currentPage:s,changeEvent:o}=lk(),r=L(),i=R(()=>{var u;return(u=r.value)!=null?u:s==null?void 0:s.value});function a(u){r.value=+u}function l(u){u=Math.trunc(+u),o==null||o(+u),r.value=void 0}return{pageCount:t,disabled:n,innerValue:i,t:e,handleInput:a,handleChange:l}}}),T$e=["disabled"];function E$e(e,t,n,s,o,r){const i=ie("el-input");return A(),B("span",{class:"el-pagination__jump",disabled:e.disabled},[qt(Pe(e.t("el.pagination.goto"))+" ",1),le(i,{size:"small",class:"el-pagination__editor is-in-pagination",min:1,max:e.pageCount,disabled:e.disabled,"model-value":e.innerValue,type:"number","onUpdate:modelValue":e.handleInput,onChange:e.handleChange},null,8,["max","disabled","model-value","onUpdate:modelValue","onChange"]),qt(" "+Pe(e.t("el.pagination.pageClassifier")),1)],8,T$e)}var _$e=We(I$e,[["render",E$e]]);const N$e={total:{type:Number,default:1e3}},A$e=ge({name:"ElPaginationTotal",props:N$e,setup(){const{t:e}=In(),{disabled:t}=lk();return{t:e,disabled:t}}}),D$e=["disabled"];function R$e(e,t,n,s,o,r){return A(),B("span",{class:"el-pagination__total",disabled:e.disabled},Pe(e.t("el.pagination.total",{total:e.total})),9,D$e)}var O$e=We(A$e,[["render",R$e]]);const M$e={currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean},P$e=ge({name:"ElPaginationPager",components:{DArrowLeft:E0,DArrowRight:_0,MoreFilled:Xre},props:M$e,emits:["change"],setup(e,{emit:t}){const n=L(!1),s=L(!1),o=L(!1),r=L(!1),i=R(()=>{const c=e.pagerCount,d=(c-1)/2,f=Number(e.currentPage),h=Number(e.pageCount);let p=!1,g=!1;h>c&&(f>c-d&&(p=!0),f<h-d&&(g=!0));const m=[];if(p&&!g){const v=h-(c-2);for(let b=v;b<h;b++)m.push(b)}else if(!p&&g)for(let v=2;v<c;v++)m.push(v);else if(p&&g){const v=Math.floor(c/2)-1;for(let b=f-v;b<=f+v;b++)m.push(b)}else for(let v=2;v<h;v++)m.push(v);return m});Ca(()=>{const c=(e.pagerCount-1)/2;n.value=!1,s.value=!1,e.pageCount>e.pagerCount&&(e.currentPage>e.pagerCount-c&&(n.value=!0),e.currentPage<e.pageCount-c&&(s.value=!0))});function a(c){e.disabled||(c==="left"?o.value=!0:r.value=!0)}function l(c){const d=c.target;if(d.tagName.toLowerCase()==="li"&&Array.from(d.classList).includes("number")){const f=Number(d.textContent);f!==e.currentPage&&t("change",f)}}function u(c){const d=c.target;if(d.tagName.toLowerCase()==="ul"||e.disabled)return;let f=Number(d.textContent);const h=e.pageCount,p=e.currentPage,g=e.pagerCount-2;d.className.includes("more")&&(d.className.includes("quickprev")?f=p-g:d.className.includes("quicknext")&&(f=p+g)),isNaN(f)||(f<1&&(f=1),f>h&&(f=h)),f!==p&&t("change",f)}return{showPrevMore:n,showNextMore:s,quickPrevHover:o,quickNextHover:r,pagers:i,onMouseenter:a,onPagerClick:u,onEnter:l}}}),F$e=["aria-current"],L$e=["aria-current"],B$e=["aria-current"];function z$e(e,t,n,s,o,r){const i=ie("d-arrow-left"),a=ie("more-filled"),l=ie("d-arrow-right");return A(),B("ul",{class:"el-pager",onClick:t[4]||(t[4]=(...u)=>e.onPagerClick&&e.onPagerClick(...u)),onKeyup:t[5]||(t[5]=Ut((...u)=>e.onEnter&&e.onEnter(...u),["enter"]))},[e.pageCount>0?(A(),B("li",{key:0,class:q([{active:e.currentPage===1,disabled:e.disabled},"number"]),"aria-current":e.currentPage===1,tabindex:"0"}," 1 ",10,F$e)):ce("v-if",!0),e.showPrevMore?(A(),B("li",{key:1,class:q(["el-icon more btn-quickprev",{disabled:e.disabled}]),onMouseenter:t[0]||(t[0]=u=>e.onMouseenter("left")),onMouseleave:t[1]||(t[1]=u=>e.quickPrevHover=!1)},[e.quickPrevHover?(A(),ve(i,{key:0})):(A(),ve(a,{key:1}))],34)):ce("v-if",!0),(A(!0),B(at,null,Zt(e.pagers,u=>(A(),B("li",{key:u,class:q([{active:e.currentPage===u,disabled:e.disabled},"number"]),"aria-current":e.currentPage===u,tabindex:"0"},Pe(u),11,L$e))),128)),e.showNextMore?(A(),B("li",{key:2,class:q(["el-icon more btn-quicknext",{disabled:e.disabled}]),onMouseenter:t[2]||(t[2]=u=>e.onMouseenter("right")),onMouseleave:t[3]||(t[3]=u=>e.quickNextHover=!1)},[e.quickNextHover?(A(),ve(l,{key:0})):(A(),ve(a,{key:1}))],34)):ce("v-if",!0),e.pageCount>1?(A(),B("li",{key:3,class:q([{active:e.currentPage===e.pageCount,disabled:e.disabled},"number"]),"aria-current":e.currentPage===e.pageCount,tabindex:"0"},Pe(e.pageCount),11,B$e)):ce("v-if",!0)],32)}var V$e=We(P$e,[["render",z$e]]);const Mo=e=>typeof e!="number",W$e=mt({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>typeof e=="number"&&(e|0)===e&&e>4&&e<22&&e%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Je(Array),default:()=>Ns([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},nextText:{type:String,default:""},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),H$e={"update:current-page":e=>typeof e=="number","update:page-size":e=>typeof e=="number","size-change":e=>typeof e=="number","current-change":e=>typeof e=="number","prev-click":e=>typeof e=="number","next-click":e=>typeof e=="number"},zA="ElPagination";var U$e=ge({name:zA,props:W$e,emits:H$e,setup(e,{emit:t,slots:n}){const{t:s}=In(),o=Lt().vnode.props||{},r="onUpdate:currentPage"in o||"onUpdate:current-page"in o||"onCurrentChange"in o,i="onUpdate:pageSize"in o||"onUpdate:page-size"in o||"onSizeChange"in o,a=R(()=>{if(Mo(e.total)&&Mo(e.pageCount)||!Mo(e.currentPage)&&!r)return!1;if(e.layout.includes("sizes")){if(Mo(e.pageCount)){if(!Mo(e.total)&&!Mo(e.pageSize)&&!i)return!1}else if(!i)return!1}return!0}),l=L(Mo(e.defaultPageSize)?10:e.defaultPageSize),u=L(Mo(e.defaultCurrentPage)?1:e.defaultCurrentPage),c=R({get(){return Mo(e.pageSize)?l.value:e.pageSize},set(b){Mo(e.pageSize)&&(l.value=b),i&&(t("update:page-size",b),t("size-change",b))}}),d=R(()=>{let b=0;return Mo(e.pageCount)?Mo(e.total)||(b=Math.max(1,Math.ceil(e.total/c.value))):b=e.pageCount,b}),f=R({get(){return Mo(e.currentPage)?u.value:e.currentPage},set(b){let $=b;b<1?$=1:b>d.value&&($=d.value),Mo(e.currentPage)&&(u.value=$),r&&(t("update:current-page",$),t("current-change",$))}});Oe(d,b=>{f.value>b&&(f.value=b)});function h(b){f.value=b}function p(b){c.value=b;const $=d.value;f.value>$&&(f.value=$)}function g(){e.disabled||(f.value-=1,t("prev-click",f.value))}function m(){e.disabled||(f.value+=1,t("next-click",f.value))}function v(b,$){b&&(b.props||(b.props={}),b.props.class=[b.props.class,$].join(" "))}return Vt(_P,{pageCount:d,disabled:R(()=>e.disabled),currentPage:f,changeEvent:h,handleSizeChange:p}),()=>{var b,$;if(!a.value)return s("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&d.value<=1)return null;const y=[],w=[],C=He("div",{class:"el-pagination__rightwrapper"},w),x={prev:He(jwe,{disabled:e.disabled,currentPage:f.value,prevText:e.prevText,onClick:g}),jumper:He(_$e),pager:He(V$e,{currentPage:f.value,pageCount:d.value,pagerCount:e.pagerCount,onChange:h,disabled:e.disabled}),next:He(Zwe,{disabled:e.disabled,currentPage:f.value,pageCount:d.value,nextText:e.nextText,onClick:m}),sizes:He(S$e,{pageSize:c.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:($=(b=n==null?void 0:n.default)==null?void 0:b.call(n))!=null?$:null,total:He(O$e,{total:Mo(e.total)?0:e.total})},k=e.layout.split(",").map(S=>S.trim());let I=!1;return k.forEach(S=>{if(S==="->"){I=!0;return}I?w.push(x[S]):y.push(x[S])}),I&&w.length>0&&y.unshift(C),v(y[0],"is-first"),v(y[y.length-1],"is-last"),He("div",{role:"pagination","aria-label":"pagination",class:["el-pagination",{"is-background":e.background,"el-pagination--small":e.small}]},y)}}});const j$e=Wt(U$e),G$e=mt({title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,values:gC,default:"primary"},cancelButtonType:{type:String,values:gC,default:"text"},icon:{type:Je([String,Object]),default:hie},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},onConfirm:{type:Je(Function)},onCancel:{type:Je(Function)}}),K$e=ge({name:"ElPopconfirm",components:{ElButton:ta,ElTooltip:ar,ElIcon:Ot},props:G$e,setup(e){const{t}=In(),n=L(),s=()=>{var u,c;(c=(u=Ke(n))==null?void 0:u.onClose)==null||c.call(u)},o=()=>{s()},r=u=>{var c;(c=e.onConfirm)==null||c.call(e,u),o()},i=u=>{var c;(c=e.onCancel)==null||c.call(e,u),o()},a=R(()=>e.confirmButtonText||t("el.popconfirm.confirmButtonText")),l=R(()=>e.cancelButtonText||t("el.popconfirm.cancelButtonText"));return{finalConfirmButtonText:a,finalCancelButtonText:l,tooltipRef:n,confirm:r,cancel:i}}}),q$e={class:"el-popconfirm"},Y$e={class:"el-popconfirm__main"},X$e={class:"el-popconfirm__action"};function Z$e(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("el-button"),l=ie("el-tooltip");return A(),ve(l,lo({ref:"tooltipRef"},e.$attrs,{trigger:"click",effect:"light","popper-class":"el-popover","append-to-body":"","fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:""}),{content:re(()=>[W("div",q$e,[W("div",Y$e,[!e.hideIcon&&e.icon?(A(),ve(i,{key:0,class:"el-popconfirm__icon",style:nt({color:e.iconColor})},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1},8,["style"])):ce("v-if",!0),qt(" "+Pe(e.title),1)]),W("div",X$e,[le(a,{size:"small",type:e.cancelButtonType,onClick:e.cancel},{default:re(()=>[qt(Pe(e.finalCancelButtonText),1)]),_:1},8,["type","onClick"]),le(a,{size:"small",type:e.confirmButtonType,onClick:e.confirm},{default:re(()=>[qt(Pe(e.finalConfirmButtonText),1)]),_:1},8,["type","onClick"])])])]),default:re(()=>[e.$slots.reference?Re(e.$slots,"reference",{key:0}):ce("v-if",!0)]),_:3},16,["hide-after"])}var J$e=We(K$e,[["render",Z$e]]);const Q$e=Wt(J$e),eCe=ut({content:tl.content,popperStyle:tl.popperStyle,popperClass:tl.popperClass,enterable:zt(ut({},tl.enterable),{default:!0}),effect:zt(ut({},tl.effect),{default:"light"})},mt({title:String,width:{type:[String,Number],default:150}})),tCe=["update:visible","after-enter","after-leave"],nCe="ElPopover",sCe=ge({name:nCe,components:{ElTooltip:ar},props:eCe,emits:tCe,setup(e,{emit:t}){const n=L(null),s=R(()=>{var c;return(c=Ke(n))==null?void 0:c.popperRef}),o=R(()=>Xt(e.width)?e.width:`${e.width}px`),r=R(()=>[{width:o.value},e.popperStyle]);return{kls:R(()=>[{"el-popover--plain":!!e.content},"el-popover",e.popperClass]),style:r,tooltipRef:n,popperRef:s,hide:()=>{var c;(c=n.value)==null||c.hide()},afterEnter:()=>{t("after-enter")},afterLeave:()=>{t("after-leave")}}}}),oCe={key:0,class:"el-popover__title",role:"title"};function rCe(e,t,n,s,o,r){const i=ie("el-tooltip");return A(),ve(i,lo({ref:"tooltipRef"},e.$attrs,{"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":e.kls,"popper-style":e.style,persistent:"",onShow:e.afterEnter,onHide:e.afterLeave}),{content:re(()=>[e.title?(A(),B("div",oCe,Pe(e.title),1)):ce("v-if",!0),Re(e.$slots,"default",{},()=>[qt(Pe(e.content),1)])]),default:re(()=>[e.$slots.reference?Re(e.$slots,"reference",{key:0}):ce("v-if",!0)]),_:3},16,["aria-label","effect","enterable","popper-class","popper-style","onShow","onHide"])}var Ih=We(sCe,[["render",rCe]]);const VA=(e,t)=>{const n=t.arg||t.value,s=n==null?void 0:n.popperRef;s&&(s.triggerRef=e)};var SC={mounted(e,t){VA(e,t)},updated(e,t){VA(e,t)}};const iCe="popover";Ih.install=e=>{e.component(Ih.name,Ih)};SC.install=e=>{e.directive(iCe,SC)};const $4=SC;Ih.directive=$4;const aCe=Ih,lCe=aCe,uCe=$4,cCe=mt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Je(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Je([String,Array,Function]),default:""},format:{type:Je(Function),default:e=>`${e}%`}}),dCe=ge({name:"ElProgress",components:{ElIcon:Ot,CircleCheck:vb,CircleClose:Ta,Check:Cd,Close:xi,WarningFilled:Qh},props:cCe,setup(e){const t=R(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:p(e.percentage)})),n=R(()=>(e.strokeWidth/e.width*100).toFixed(1)),s=R(()=>e.type==="circle"||e.type==="dashboard"?parseInt(`${50-parseFloat(n.value)/2}`,10):0),o=R(()=>{const m=s.value,v=e.type==="dashboard";return`
          M 50 50
          m 0 ${v?"":"-"}${m}
          a ${m} ${m} 0 1 1 0 ${v?"-":""}${m*2}
          a ${m} ${m} 0 1 1 0 ${v?"":"-"}${m*2}
          `}),r=R(()=>2*Math.PI*s.value),i=R(()=>e.type==="dashboard"?.75:1),a=R(()=>`${-1*r.value*(1-i.value)/2}px`),l=R(()=>({strokeDasharray:`${r.value*i.value}px, ${r.value}px`,strokeDashoffset:a.value})),u=R(()=>({strokeDasharray:`${r.value*i.value*(e.percentage/100)}px, ${r.value}px`,strokeDashoffset:a.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"})),c=R(()=>{let m;if(e.color)m=p(e.percentage);else switch(e.status){case"success":m="#13ce66";break;case"exception":m="#ff4949";break;case"warning":m="#e6a23c";break;default:m="#20a0ff"}return m}),d=R(()=>e.status==="warning"?Qh:e.type==="line"?e.status==="success"?vb:Ta:e.status==="success"?Cd:xi),f=R(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),h=R(()=>e.format(e.percentage)),p=m=>{var v;const{color:b}=e;if(typeof b=="function")return b(m);if(typeof b=="string")return b;{const $=100/b.length,w=b.map((C,x)=>typeof C=="string"?{color:C,percentage:(x+1)*$}:C).sort((C,x)=>C.percentage-x.percentage);for(const C of w)if(C.percentage>m)return C.color;return(v=w[w.length-1])==null?void 0:v.color}},g=R(()=>({percentage:e.percentage}));return{barStyle:t,relativeStrokeWidth:n,radius:s,trackPath:o,perimeter:r,rate:i,strokeDashoffset:a,trailPathStyle:l,circlePathStyle:u,stroke:c,statusIcon:d,progressTextSize:f,content:h,slotData:g}}}),fCe=["aria-valuenow"],hCe={key:0,class:"el-progress-bar"},pCe={key:0,class:"el-progress-bar__innerText"},gCe={viewBox:"0 0 100 100"},mCe=["d","stroke-width"],vCe=["d","stroke","stroke-linecap","stroke-width"],bCe={key:0};function yCe(e,t,n,s,o,r){const i=ie("el-icon");return A(),B("div",{class:q(["el-progress",[`el-progress--${e.type}`,e.status?`is-${e.status}`:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}]]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[e.type==="line"?(A(),B("div",hCe,[W("div",{class:"el-progress-bar__outer",style:nt({height:`${e.strokeWidth}px`})},[W("div",{class:q(["el-progress-bar__inner",{"el-progress-bar__inner--indeterminate":e.indeterminate}]),style:nt(e.barStyle)},[(e.showText||e.$slots.default)&&e.textInside?(A(),B("div",pCe,[Re(e.$slots,"default",zu(Vu(e.slotData)),()=>[W("span",null,Pe(e.content),1)])])):ce("v-if",!0)],6)],4)])):(A(),B("div",{key:1,class:"el-progress-circle",style:nt({height:`${e.width}px`,width:`${e.width}px`})},[(A(),B("svg",gCe,[W("path",{class:"el-progress-circle__track",d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none",style:nt(e.trailPathStyle)},null,12,mCe),W("path",{class:"el-progress-circle__path",d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0,style:nt(e.circlePathStyle)},null,12,vCe)]))],4)),(e.showText||e.$slots.default)&&!e.textInside?(A(),B("div",{key:2,class:"el-progress__text",style:nt({fontSize:`${e.progressTextSize}px`})},[Re(e.$slots,"default",zu(Vu(e.slotData)),()=>[e.status?(A(),ve(i,{key:1},{default:re(()=>[(A(),ve(tn(e.statusIcon)))]),_:1})):(A(),B("span",bCe,Pe(e.content),1))])],4)):ce("v-if",!0)],10,fCe)}var wCe=We(dCe,[["render",yCe]]);const C4=Wt(wCe),$Ce=mt({modelValue:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Je([Array,Object]),default:()=>Ns(["var(--el-rate-star-color)","var(--el-rate-star-color)","var(--el-rate-star-color)"])},voidColor:{type:String,default:"var(--el-rate-void-color)"},disabledVoidColor:{type:String,default:"var(--el-rate-disable-void-color)"},icons:{type:Je([Array,Object]),default:()=>[th,th,th]},voidIcon:{type:Je([String,Object]),default:()=>kF},disabledvoidIcon:{type:Je([String,Object]),default:()=>th},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"var(--el-rate-text-color)"},texts:{type:Je(Array),default:()=>Ns(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:nr}}),CCe={change:e=>typeof e=="number",[Pt]:e=>typeof e=="number"};function Uw(e,t){const n=r=>an(r),s=Object.keys(t).map(r=>+r).filter(r=>{const i=t[r];return(n(i)?i.excluded:!1)?e<r:e<=r}).sort((r,i)=>r-i),o=t[s[0]];return n(o)&&o.value||o}const xCe=ge({name:"ElRate",components:{ElIcon:Ot,StarFilled:th,Star:kF},props:$Ce,emits:CCe,setup(e,{emit:t}){const n=Ze(ir,{}),s=ks(),o=At("rate"),r=L(e.modelValue),i=L(-1),a=L(!0),l=R(()=>[o.b(),o.m(s.value)]),u=R(()=>e.disabled||n.disabled),c=R(()=>{let S="";return e.showScore?S=e.scoreTemplate.replace(/\{\s*value\s*\}/,u.value?`${e.modelValue}`:`${r.value}`):e.showText&&(S=e.texts[Math.ceil(r.value)-1]),S}),d=R(()=>e.modelValue*100-Math.floor(e.modelValue)*100),f=R(()=>_t(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),h=R(()=>Uw(r.value,f.value)),p=R(()=>{let S="";return u.value?S=`${d.value}%`:e.allowHalf&&(S="50%"),{color:h.value,width:S}}),g=R(()=>_t(e.icons)?{[e.lowThreshold]:e.icons[0],[e.highThreshold]:{value:e.icons[1],excluded:!0},[e.max]:e.icons[2]}:e.icons),m=R(()=>Uw(e.modelValue,g.value)),v=R(()=>u.value?e.disabledvoidIcon:e.voidIcon),b=R(()=>Uw(r.value,g.value)),$=R(()=>{const S=Array(e.max),T=r.value;return S.fill(b.value,0,T),S.fill(v.value,T,e.max),S});function y(S){const T=u.value&&d.value>0&&S-1<e.modelValue&&S>e.modelValue,_=e.allowHalf&&a.value&&S-.5<=r.value&&S>r.value;return T||_}function w(S){const T=u.value?e.disabledVoidColor:e.voidColor;return{color:S<=r.value?h.value:T}}function C(S){u.value||(e.allowHalf&&a.value?(t(Pt,r.value),e.modelValue!==r.value&&t("change",r.value)):(t(Pt,S),e.modelValue!==S&&t("change",S)))}function x(S){if(u.value)return;let T=r.value;const _=S.code;return _===Qe.up||_===Qe.right?(e.allowHalf?T+=.5:T+=1,S.stopPropagation(),S.preventDefault()):(_===Qe.left||_===Qe.down)&&(e.allowHalf?T-=.5:T-=1,S.stopPropagation(),S.preventDefault()),T=T<0?0:T,T=T>e.max?e.max:T,t(Pt,T),t("change",T),T}function k(S,T){if(!u.value){if(e.allowHalf){let _=T.target;bi(_,o.e("item"))&&(_=_.querySelector(`.${o.e("icon")}`)),(_.clientWidth===0||bi(_,o.e("decimal")))&&(_=_.parentNode),a.value=T.offsetX*2<=_.clientWidth,r.value=a.value?S-.5:S}else r.value=S;i.value=S}}function I(){u.value||(e.allowHalf&&(a.value=e.modelValue!==Math.floor(e.modelValue)),r.value=e.modelValue,i.value=-1)}return Oe(()=>e.modelValue,S=>{r.value=S,a.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||t(Pt,0),{ns:o,hoverIndex:i,currentValue:r,rateDisabled:u,text:c,decimalStyle:p,decimalIconComponent:m,iconComponents:$,rateKls:l,showDecimalIcon:y,getIconStyle:w,selectValue:C,handleKey:x,setCurrentValue:k,resetCurrentValue:I}}}),kCe=["aria-valuenow","aria-valuetext","aria-valuemax"],SCe=["onMousemove","onClick"];function ICe(e,t,n,s,o,r){const i=ie("el-icon");return A(),B("div",{class:q(e.rateKls),role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",onKeydown:t[1]||(t[1]=(...a)=>e.handleKey&&e.handleKey(...a))},[(A(!0),B(at,null,Zt(e.max,(a,l)=>(A(),B("span",{key:l,class:q(e.ns.e("item")),style:nt({cursor:e.rateDisabled?"auto":"pointer"}),onMousemove:u=>e.setCurrentValue(a,u),onMouseleave:t[0]||(t[0]=(...u)=>e.resetCurrentValue&&e.resetCurrentValue(...u)),onClick:u=>e.selectValue(a)},[le(i,{class:q([e.ns.e("icon"),{hover:e.hoverIndex===a}]),style:nt(e.getIconStyle(a))},{default:re(()=>[(A(),ve(tn(e.iconComponents[a-1]))),e.showDecimalIcon(a)?(A(),ve(i,{key:0,style:nt(e.decimalStyle),class:q([e.ns.e("icon"),e.ns.e("decimal")])},{default:re(()=>[(A(),ve(tn(e.decimalIconComponent)))]),_:1},8,["style","class"])):ce("v-if",!0)]),_:2},1032,["class","style"])],46,SCe))),128)),e.showText||e.showScore?(A(),B("span",{key:0,class:q(e.ns.e("text")),style:nt({color:e.textColor})},Pe(e.text),7)):ce("v-if",!0)],42,kCe)}var TCe=We(xCe,[["render",ICe]]);const ECe=Wt(TCe),nd={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},WA={[nd.success]:Soe,[nd.warning]:Qh,[nd.error]:F2,[nd.info]:L2},_Ce=mt({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{values:["success","warning","info","error"],default:"info"}}),NCe=ge({name:"ElResult",props:_Ce,setup(e){const t=At("result"),n=R(()=>{const s=e.icon,o=s&&nd[s]?nd[s]:"icon-info",r=WA[o]||WA["icon-info"];return{class:o,component:r}});return{ns:t,resultIcon:n}}});function ACe(e,t,n,s,o,r){return A(),B("div",{class:q(e.ns.b())},[W("div",{class:q(e.ns.e("icon"))},[Re(e.$slots,"icon",{},()=>[e.resultIcon.component?(A(),ve(tn(e.resultIcon.component),{key:0,class:q(e.resultIcon.class)},null,8,["class"])):ce("v-if",!0)])],2),e.title||e.$slots.title?(A(),B("div",{key:0,class:q(e.ns.e("title"))},[Re(e.$slots,"title",{},()=>[W("p",null,Pe(e.title),1)])],2)):ce("v-if",!0),e.subTitle||e.$slots.subTitle?(A(),B("div",{key:1,class:q(e.ns.e("subtitle"))},[Re(e.$slots,"subTitle",{},()=>[W("p",null,Pe(e.subTitle),1)])],2)):ce("v-if",!0),e.$slots.extra?(A(),B("div",{key:2,class:q(e.ns.e("extra"))},[Re(e.$slots,"extra")],2)):ce("v-if",!0)],2)}var DCe=We(NCe,[["render",ACe]]);const RCe=Wt(DCe),OCe=mt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between"],default:"start"},align:{type:String,values:["top","middle","bottom"],default:"top"}}),MCe=ge({name:"ElRow",props:OCe,setup(e,{slots:t}){const n=At("row"),s=R(()=>e.gutter);Vt("ElRow",{gutter:s});const o=R(()=>{const r={marginLeft:"",marginRight:""};return e.gutter&&(r.marginLeft=`-${e.gutter/2}px`,r.marginRight=r.marginLeft),r});return()=>{var r;return He(e.tag,{class:[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,e.align!=="top")],style:o.value},(r=t.default)==null?void 0:r.call(t))}}}),PCe=Wt(MCe);var HA=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function FCe(e,t){return!!(e===t||HA(e)&&HA(t))}function LCe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!FCe(e[n],t[n]))return!1;return!0}function BCe(e,t){t===void 0&&(t=LCe);var n=null;function s(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;var i=e.apply(this,o);return n={lastResult:i,lastArgs:o,lastThis:this},i}return s.clear=function(){n=null},s}const zCe=()=>{const t=Lt().proxy.$props;return R(()=>{const n=(s,o,r)=>({});return t.perfMode?aF(n):BCe(n)})};let uk=e=>setTimeout(e,16),ck=e=>clearTimeout(e);Yt&&(uk=e=>window.requestAnimationFrame(e),ck=e=>window.cancelAnimationFrame(e));const VCe=50,UA="item-rendered",jA="scroll",x4="forward",k4="backward",op="auto",S4="smart",I4="start",wb="center",T4="end",_d="horizontal",dk="vertical",WCe="ltr",Wv="rtl",E4="negative",HCe="positive-ascending",_4="positive-descending",UCe={[_d]:"left",[dk]:"top"},jCe=20,jw=(e,t)=>e<t?x4:k4,rp=e=>e===WCe||e===Wv||e===_d;let Vc=null;function GA(e=!1){if(Vc===null||e){const t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const s=document.createElement("div"),o=s.style;return o.width="100px",o.height="100px",t.appendChild(s),document.body.appendChild(t),t.scrollLeft>0?Vc=_4:(t.scrollLeft=1,t.scrollLeft===0?Vc=E4:Vc=HCe),document.body.removeChild(t),Vc}return Vc}function GCe({move:e,size:t,bar:n},s){const o={},r=`translate${n.axis}(${e}px)`;return o[n.size]=t,o.transform=r,o.msTransform=r,o.webkitTransform=r,s==="horizontal"?o.height="100%":o.width="100%",o}const KCe=typeof navigator!="undefined"&&an(navigator)&&/Firefox/i.test(navigator.userAgent),qCe={[_d]:"deltaX",[dk]:"deltaY"},YCe=({atEndEdge:e,atStartEdge:t,layout:n},s)=>{let o,r=0;const i=l=>l<0&&t.value||l>0&&e.value;return{hasReachedEdge:i,onWheel:l=>{ck(o);const u=l[qCe[n.value]];i(r)&&i(r+u)||(r+=u,KCe||l.preventDefault(),o=uk(()=>{s(r),r=0}))}}},IC=Ci({type:Je([Number,Function]),required:!0}),TC=Ci({type:Number}),EC=Ci({type:Number,default:2}),XCe=Ci({type:String,values:["ltr","rtl"],default:"ltr"}),_C=Ci({type:Number,default:0}),$b=Ci({type:Number,required:!0}),N4=Ci({type:String,values:["horizontal","vertical"],default:dk}),A4=mt({className:{type:String,default:""},containerElement:{type:Je([String,Object]),default:"div"},data:{type:Je(Array),default:()=>Ns([])},direction:XCe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Je([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),ZCe=mt(ut({cache:EC,estimatedItemSize:TC,layout:N4,initScrollOffset:_C,total:$b,itemSize:IC},A4));mt(ut({columnCache:EC,columnWidth:IC,estimatedColumnWidth:TC,estimatedRowHeight:TC,initScrollLeft:_C,initScrollTop:_C,rowCache:EC,rowHeight:IC,totalColumn:$b,totalRow:$b},A4));const JCe=mt({layout:N4,total:$b,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},visible:Boolean}),QCe=ge({name:"ElVirtualScrollBar",props:JCe,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const s=L(),o=L();let r=null,i=null;const a=Sn({isDragging:!1,traveled:0}),l=R(()=>PF[e.layout]),u=R(()=>e.clientSize-4),c=R(()=>({position:"absolute",width:_d===e.layout?`${u.value}px`:"6px",height:_d===e.layout?"6px":`${u.value}px`,[UCe[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),d=R(()=>{const w=e.ratio,C=e.clientSize;if(w>=100)return Number.POSITIVE_INFINITY;if(w>=50)return w*C/100;const x=C/3;return Math.floor(Math.min(Math.max(w*C,jCe),x))}),f=R(()=>{if(!Number.isFinite(d.value))return{display:"none"};const w=`${d.value}px`;return GCe({bar:l.value,size:w,move:a.traveled},e.layout)}),h=R(()=>Math.floor(e.clientSize-d.value-4)),p=()=>{bn(window,"mousemove",b),bn(window,"mouseup",v);const w=Ke(o);!w||(i=document.onselectstart,document.onselectstart=()=>!1,bn(w,"touchmove",b),bn(w,"touchend",v))},g=()=>{Kn(window,"mousemove",b),Kn(window,"mouseup",v),document.onselectstart=i,i=null;const w=Ke(o);!w||(Kn(w,"touchmove",b),Kn(w,"touchend",v))},m=w=>{w.stopImmediatePropagation(),!(w.ctrlKey||[1,2].includes(w.button))&&(a.isDragging=!0,a[l.value.axis]=w.currentTarget[l.value.offset]-(w[l.value.client]-w.currentTarget.getBoundingClientRect()[l.value.direction]),t("start-move"),p())},v=()=>{a.isDragging=!1,a[l.value.axis]=0,t("stop-move"),g()},b=w=>{const{isDragging:C}=a;if(!C||!o.value||!s.value)return;const x=a[l.value.axis];if(!x)return;ck(r);const k=(s.value.getBoundingClientRect()[l.value.direction]-w[l.value.client])*-1,I=o.value[l.value.offset]-x,S=k-I;r=uk(()=>{a.traveled=Math.max(0,Math.min(S,h.value)),t("scroll",S,h.value)})},$=w=>{const C=Math.abs(w.target.getBoundingClientRect()[l.value.direction]-w[l.value.client]),x=o.value[l.value.offset]/2,k=C-x;a.traveled=Math.max(0,Math.min(k,h.value)),t("scroll",k,h.value)},y=w=>w.preventDefault();return Oe(()=>e.scrollFrom,w=>{a.isDragging||(a.traveled=Math.ceil(w*h.value))}),Rt(()=>{!Yt||(bn(s.value,"touchstart",y),bn(o.value,"touchstart",m))}),ls(()=>{Kn(s.value,"touchstart",y),g()}),()=>He("div",{role:"presentation",ref:s,class:"el-virtual-scrollbar",style:c.value,onMousedown:ht($,["stop","prevent"])},He("div",{ref:o,class:"el-scrollbar__thumb",style:f.value,onMousedown:m},[]))}}),D4=({name:e,getOffset:t,getItemSize:n,getItemOffset:s,getEstimatedTotalSize:o,getStartIndexForOffset:r,getStopIndexForStartIndex:i,initCache:a,clearCache:l,validateProps:u})=>ge({name:e!=null?e:"ElVirtualList",props:ZCe,emits:[UA,jA],setup(c,{emit:d,expose:f}){u(c);const h=Lt(),p=L(a(c,h)),g=zCe(),m=L(),v=L(),b=L(),$=L({isScrolling:!1,scrollDir:"forward",scrollOffset:xn(c.initScrollOffset)?c.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:c.scrollbarAlwaysOn}),y=R(()=>{const{total:te,cache:he}=c,{isScrolling:oe,scrollDir:G,scrollOffset:Y}=Ke($);if(te===0)return[0,0,0,0];const X=r(c,Y,Ke(p)),ae=i(c,X,Y,Ke(p)),Se=!oe||G===k4?Math.max(1,he):1,Le=!oe||G===x4?Math.max(1,he):1;return[Math.max(0,X-Se),Math.max(0,Math.min(te-1,ae+Le)),X,ae]}),w=R(()=>o(c,Ke(p))),C=R(()=>rp(c.layout)),x=R(()=>[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:c.direction,height:xn(c.height)?`${c.height}px`:c.height,width:xn(c.width)?`${c.width}px`:c.width},c.style]),k=R(()=>{const te=Ke(w),he=Ke(C);return{height:he?"100%":`${te}px`,pointerEvents:Ke($).isScrolling?"none":void 0,width:he?`${te}px`:"100%"}}),I=R(()=>C.value?c.width:c.height),{onWheel:S}=YCe({atStartEdge:R(()=>$.value.scrollOffset<=0),atEndEdge:R(()=>$.value.scrollOffset>=w.value),layout:R(()=>c.layout)},te=>{var he,oe;(oe=(he=b.value).onMouseUp)==null||oe.call(he),D(Math.min($.value.scrollOffset+te,w.value-I.value))}),T=()=>{const{total:te}=c;if(te>0){const[Y,X,ae,Se]=Ke(y);d(UA,Y,X,ae,Se)}const{scrollDir:he,scrollOffset:oe,updateRequested:G}=Ke($);d(jA,he,oe,G)},_=te=>{const{clientHeight:he,scrollHeight:oe,scrollTop:G}=te.currentTarget,Y=Ke($);if(Y.scrollOffset===G)return;const X=Math.max(0,Math.min(G,oe-he));$.value=zt(ut({},Y),{isScrolling:!0,scrollDir:jw(Y.scrollOffset,X),scrollOffset:X,updateRequested:!1}),dt(U)},N=te=>{const{clientWidth:he,scrollLeft:oe,scrollWidth:G}=te.currentTarget,Y=Ke($);if(Y.scrollOffset===oe)return;const{direction:X}=c;let ae=oe;if(X===Wv)switch(GA()){case E4:{ae=-oe;break}case _4:{ae=G-he-oe;break}}ae=Math.max(0,Math.min(ae,G-he)),$.value=zt(ut({},Y),{isScrolling:!0,scrollDir:jw(Y.scrollOffset,ae),scrollOffset:ae,updateRequested:!1}),dt(U)},O=te=>{Ke(C)?N(te):_(te),T()},M=(te,he)=>{const oe=(w.value-I.value)/he*te;D(Math.min(w.value-I.value,oe))},D=te=>{te=Math.max(te,0),te!==Ke($).scrollOffset&&($.value=zt(ut({},Ke($)),{scrollOffset:te,scrollDir:jw(Ke($).scrollOffset,te),updateRequested:!0}),dt(U))},F=(te,he=op)=>{const{scrollOffset:oe}=Ke($);te=Math.max(0,Math.min(te,c.total-1)),D(t(c,te,he,oe,Ke(p)))},V=te=>{const{direction:he,itemSize:oe,layout:G}=c,Y=g.value(l&&oe,l&&G,l&&he);let X;if(Ht(Y,String(te)))X=Y[te];else{const ae=s(c,te,Ke(p)),Se=n(c,te,Ke(p)),Le=Ke(C),Be=he===Wv,Fe=Le?ae:0;Y[te]=X={position:"absolute",left:Be?void 0:`${Fe}px`,right:Be?`${Fe}px`:void 0,top:Le?0:`${ae}px`,height:Le?"100%":`${Se}px`,width:Le?`${Se}px`:"100%"}}return X},U=()=>{$.value.isScrolling=!1,dt(()=>{g.value(-1,null,null)})},ne=()=>{const te=m.value;te&&(te.scrollTop=0)};Rt(()=>{if(!Yt)return;const{initScrollOffset:te}=c,he=Ke(m);xn(te)&&he&&(Ke(C)?he.scrollLeft=te:he.scrollTop=te),T()}),_i(()=>{const{direction:te,layout:he}=c,{scrollOffset:oe,updateRequested:G}=Ke($),Y=Ke(m);if(G&&Y)if(he===_d)if(te===Wv)switch(GA()){case"negative":{Y.scrollLeft=-oe;break}case"positive-ascending":{Y.scrollLeft=oe;break}default:{const{clientWidth:X,scrollWidth:ae}=Y;Y.scrollLeft=ae-X-oe;break}}else Y.scrollLeft=oe;else Y.scrollTop=oe});const be={clientSize:I,estimatedTotalSize:w,windowStyle:x,windowRef:m,innerRef:v,innerStyle:k,itemsToRender:y,scrollbarRef:b,states:$,getItemStyle:V,onScroll:O,onScrollbarScroll:M,onWheel:S,scrollTo:D,scrollToItem:F,resetScrollTop:ne};return f({windowRef:m,innerRef:v,getItemStyleCache:g,scrollTo:D,scrollToItem:F,resetScrollTop:ne,states:$}),be},render(c){var d;const{$slots:f,className:h,clientSize:p,containerElement:g,data:m,getItemStyle:v,innerElement:b,itemsToRender:$,innerStyle:y,layout:w,total:C,onScroll:x,onScrollbarScroll:k,onWheel:I,states:S,useIsScrolling:T,windowStyle:_}=c,[N,O]=$,M=tn(g),D=tn(b),F=[];if(C>0)for(let be=N;be<=O;be++)F.push((d=f.default)==null?void 0:d.call(f,{data:m,key:be,index:be,isScrolling:T?S.isScrolling:void 0,style:v(be)}));const V=[He(D,{style:y,ref:"innerRef"},Xt(D)?F:{default:()=>F})],U=He(QCe,{ref:"scrollbarRef",clientSize:p,layout:w,onScroll:k,ratio:p*100/this.estimatedTotalSize,scrollFrom:S.scrollOffset/(this.estimatedTotalSize-p),total:C}),ne=He(M,{class:h,style:_,onScroll:x,onWheel:I,ref:"windowRef",key:0},Xt(M)?[V]:{default:()=>[V]});return He("div",{key:0,class:["el-vl__wrapper",S.scrollbarAlwaysOn?"always-on":""]},[ne,U])}}),R4=D4({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:n,layout:s,width:o},r,i,a)=>{const l=rp(s)?o:e,u=Math.max(0,t*n-l),c=Math.min(u,r*n),d=Math.max(0,(r+1)*n-l);switch(i===S4&&(a>=d-l&&a<=c+l?i=op:i=wb),i){case I4:return c;case T4:return d;case wb:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(l/2)?0:f>u+Math.floor(l/2)?u:f}case op:default:return a>=d&&a<=c?a:a<d?d:c}},getStartIndexForOffset:({total:e,itemSize:t},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:n,layout:s,width:o},r,i)=>{const a=r*n,l=rp(s)?o:e,u=Math.ceil((l+i-a)/n);return Math.max(0,Math.min(t-1,r+u-1))},initCache(){},clearCache:!0,validateProps(){}}),sd=(e,t,n)=>{const{itemSize:s}=e,{items:o,lastVisitedIndex:r}=n;if(t>r){let i=0;if(r>=0){const a=o[r];i=a.offset+a.size}for(let a=r+1;a<=t;a++){const l=s(a);o[a]={offset:i,size:l},i+=l}n.lastVisitedIndex=t}return o[t]},exe=(e,t,n)=>{const{items:s,lastVisitedIndex:o}=t;return(o>0?s[o].offset:0)>=n?O4(e,t,0,o,n):txe(e,t,Math.max(0,o),n)},O4=(e,t,n,s,o)=>{for(;n<=s;){const r=n+Math.floor((s-n)/2),i=sd(e,r,t).offset;if(i===o)return r;i<o?n=r+1:i>o&&(s=r-1)}return Math.max(0,n-1)},txe=(e,t,n,s)=>{const{total:o}=e;let r=1;for(;n<o&&sd(e,n,t).offset<s;)n+=r,r*=2;return O4(e,t,Math.floor(n/2),Math.min(n,o-1),s)},KA=({total:e},{items:t,estimatedItemSize:n,lastVisitedIndex:s})=>{let o=0;if(s>=e&&(s=e-1),s>=0){const a=t[s];o=a.offset+a.size}const i=(e-s-1)*n;return o+i},nxe=D4({name:"ElDynamicSizeList",getItemOffset:(e,t,n)=>sd(e,t,n).offset,getItemSize:(e,t,{items:n})=>n[t].size,getEstimatedTotalSize:KA,getOffset:(e,t,n,s,o)=>{const{height:r,layout:i,width:a}=e,l=rp(i)?a:r,u=sd(e,t,o),c=KA(e,o),d=Math.max(0,Math.min(c-l,u.offset)),f=Math.max(0,u.offset-l+u.size);switch(n===S4&&(s>=f-l&&s<=d+l?n=op:n=wb),n){case I4:return d;case T4:return f;case wb:return Math.round(f+(d-f)/2);case op:default:return s>=f&&s<=d?s:s<f?f:d}},getStartIndexForOffset:(e,t,n)=>exe(e,n,t),getStopIndexForStartIndex:(e,t,n,s)=>{const{height:o,total:r,layout:i,width:a}=e,l=rp(i)?a:o,u=sd(e,t,s),c=n+l;let d=u.offset+u.size,f=t;for(;f<r-1&&d<c;)f++,d+=sd(e,f,s).size;return f},initCache({estimatedItemSize:e=VCe},t){const n={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(s,o=!0)=>{var r,i;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,s-1),(r=t.exposed)==null||r.getItemStyleCache(-1),o&&((i=t.proxy)==null||i.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:e})=>{}}),sxe=ge({props:{item:{type:Object,required:!0},style:Object,height:Number}});function oxe(e,t,n,s,o,r){return e.item.isTitle?(A(),B("div",{key:0,class:"el-select-group__title",style:nt([e.style,{lineHeight:`${e.height}px`}])},Pe(e.item.label),5)):(A(),B("div",{key:1,class:"el-select-group__split",style:nt(e.style)},[W("span",{class:"el-select-group__split-dash",style:nt({top:`${e.height/2}px`})},null,4)],4))}var rxe=We(sxe,[["render",oxe]]);function ixe(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}const axe={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:Ta},collapseTags:Boolean,defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},popperAppendToBody:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:nr},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1}},lxe={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},uxe=ge({props:lxe,emits:["select","hover"],setup(e,{emit:t}){const{hoverItem:n,selectOptionClick:s}=ixe(e,{emit:t});return{hoverItem:n,selectOptionClick:s}}}),cxe=["aria-selected"];function dxe(e,t,n,s,o,r){return A(),B("li",{"aria-selected":e.selected,style:nt(e.style),class:q({"el-select-dropdown__option-item":!0,"is-selected":e.selected,"is-disabled":e.disabled,"is-created":e.created,hover:e.hovering}),onMouseenter:t[0]||(t[0]=(...i)=>e.hoverItem&&e.hoverItem(...i)),onClick:t[1]||(t[1]=ht((...i)=>e.selectOptionClick&&e.selectOptionClick(...i),["stop"]))},[Re(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[W("span",null,Pe(e.item.label),1)])],46,cxe)}var fxe=We(uxe,[["render",dxe]]);const M4="ElSelectV2Injection",hxe=ge({name:"ElSelectDropdown",props:{data:Array,hoveringIndex:Number,width:Number},setup(e){const t=Ze(M4),n=L([]),s=L(null),o=R(()=>Zh(t.props.estimatedOptionHeight)),r=R(()=>o.value?{itemSize:t.props.itemHeight}:{estimatedSize:t.props.estimatedOptionHeight,itemSize:h=>n.value[h]}),i=(h=[],p)=>{const{props:{valueKey:g}}=t;return an(p)?h&&h.some(m=>Ps(m,g)===Ps(p,g)):h.includes(p)},a=(h,p)=>{if(an(p)){const{valueKey:g}=t.props;return Ps(h,g)===Ps(p,g)}else return h===p};return{select:t,listProps:r,listRef:s,isSized:o,isItemDisabled:(h,p)=>{const{disabled:g,multiple:m,multipleLimit:v}=t.props;return g||!p&&(m?v>0&&h.length>=v:!1)},isItemHovering:h=>e.hoveringIndex===h,isItemSelected:(h,p)=>t.props.multiple?i(h,p.value):a(h,p.value),scrollToItem:h=>{const p=s.value;p&&p.scrollToItem(h)},resetScrollTop:()=>{const h=s.value;h&&h.resetScrollTop()}}},render(e,t){var n;const{$slots:s,data:o,listProps:r,select:i,isSized:a,width:l,isItemDisabled:u,isItemHovering:c,isItemSelected:d}=e,f=a?R4:nxe,{props:h,onSelect:p,onHover:g,onKeyboardNavigate:m,onKeyboardSelect:v}=i,{height:b,modelValue:$,multiple:y}=h;if(o.length===0)return He("div",{class:"el-select-dropdown",style:{width:`${l}px`}},(n=s.empty)==null?void 0:n.call(s));const w=re(x=>{const{index:k,data:I}=x,S=I[k];if(I[k].type==="Group")return He(rxe,{item:S,style:x.style,height:a?r.itemSize:r.estimatedSize});const T=d($,S),_=u($,T);return He(fxe,zt(ut({},x),{selected:T,disabled:S.disabled||_,created:!!S.created,hovering:c(k),item:S,onSelect:p,onHover:g}),{default:re(N=>Re(s,"default",N,()=>[He("span",S.label)]))})}),C=He(f,ut({ref:"listRef",className:"el-select-dropdown__list",data:o,height:b,width:l,total:o.length,scrollbarAlwaysOn:h.scrollbarAlwaysOn,onKeydown:[t[1]||(t[1]=Ut(ht(()=>m("forward"),["stop","prevent"]),["down"])),t[2]||(t[2]=Ut(ht(()=>m("backward"),["stop","prevent"]),["up"])),t[3]||(t[3]=Ut(ht(v,["stop","prevent"]),["enter"])),t[4]||(t[4]=Ut(ht(()=>i.expanded=!1,["stop","prevent"]),["esc"])),t[5]||(t[5]=Ut(()=>i.expanded=!1,["tab"]))]},r),{default:w});return He("div",{class:{"is-multiple":y,"el-select-dropdown":!0}},[C])}});function pxe(e,t){const n=L(0),s=L(null),o=R(()=>e.allowCreate&&e.filterable);function r(c){const d=f=>f.value===c;return e.options&&e.options.some(d)||t.createdOptions.some(d)}function i(c){!o.value||(e.multiple&&c.created?n.value++:s.value=c)}function a(c){if(o.value)if(c&&c.length>0&&!r(c)){const d={value:c,label:c,created:!0,disabled:!1};t.createdOptions.length>=n.value?t.createdOptions[n.value]=d:t.createdOptions.push(d)}else if(e.multiple)t.createdOptions.length=n.value;else{const d=s.value;t.createdOptions.length=0,d&&d.created&&t.createdOptions.push(d)}}function l(c){if(!o.value||!c||!c.created)return;const d=t.createdOptions.findIndex(f=>f.value===c.value);~d&&(t.createdOptions.splice(d,1),n.value--)}function u(){o.value&&(t.createdOptions.length=0,n.value=0)}return{createNewOption:a,removeNewOption:l,selectNewOption:i,clearAllNewOption:u}}const gxe=e=>{const t=[];return e.map(n=>{_t(n.options)?(t.push({label:n.label,isTitle:!0,type:"Group"}),n.options.forEach(s=>{t.push(s)}),t.push({type:"Group"})):t.push(n)}),t};function mxe(e){const t=L(!1);return{handleCompositionStart:()=>{t.value=!0},handleCompositionUpdate:r=>{const i=r.target.value,a=i[i.length-1]||"";t.value=!A0(a)},handleCompositionEnd:r=>{t.value&&(t.value=!1,Ft(e)&&e(r))}}}const qA="",YA=11,vxe={larget:51,default:42,small:33},bxe=(e,t)=>{const{t:n}=In(),{form:s,formItem:o}=af(),r=Sn({inputValue:qA,displayInputValue:qA,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:"",query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),i=L(-1),a=L(-1),l=L(null),u=L(null),c=L(null),d=L(null),f=L(null),h=L(null),p=L(null),g=L(!1),m=R(()=>e.disabled||(s==null?void 0:s.disabled)),v=R(()=>{const ze=S.value.length*34;return ze>e.height?e.height:ze}),b=R(()=>e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!==""),$=R(()=>{const ze=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:b.value;return e.clearable&&!m.value&&r.comboBoxHovering&&ze}),y=R(()=>e.remote&&e.filterable?"":Fp),w=R(()=>y.value&&g.value?"is-reverse":""),C=R(()=>(o==null?void 0:o.validateState)||""),x=R(()=>TF[C.value]),k=R(()=>e.remote?300:0),I=R(()=>{const ze=S.value;return e.loading?e.loadingText||n("el.select.loading"):e.remote&&r.inputValue===""&&ze.length===0?!1:e.filterable&&r.inputValue&&ze.length>0?e.noMatchText||n("el.select.noMatch"):ze.length===0?e.noDataText||n("el.select.noData"):null}),S=R(()=>{const ze=pt=>{const Jt=r.inputValue;return Jt?pt.label.includes(Jt):!0};return e.loading?[]:gxe(e.options.concat(r.createdOptions).map(pt=>{if(_t(pt.options)){const Jt=pt.options.filter(ze);if(Jt.length>0)return zt(ut({},pt),{options:Jt})}else if(e.remote||ze(pt))return pt;return null}).filter(pt=>pt!==null))}),T=R(()=>S.value.every(ze=>ze.disabled)),_=ks(),N=R(()=>_.value==="small"?"small":"default"),O=R(()=>{const ze=h.value,pt=N.value||"default",Jt=ze?parseInt(getComputedStyle(ze).paddingLeft):0,cs=ze?parseInt(getComputedStyle(ze).paddingRight):0;return r.selectWidth-cs-Jt-vxe[pt]}),M=()=>{var ze,pt,Jt;a.value=((Jt=(pt=(ze=f.value)==null?void 0:ze.getBoundingClientRect)==null?void 0:pt.call(ze))==null?void 0:Jt.width)||200},D=R(()=>({width:`${r.calculatedWidth===0?YA:Math.ceil(r.calculatedWidth)+YA}px`})),F=R(()=>_t(e.modelValue)?e.modelValue.length===0&&!r.displayInputValue:e.filterable?r.displayInputValue.length===0:!0),V=R(()=>{const ze=e.placeholder||n("el.select.placeholder");return e.multiple?ze:r.selectedLabel||ze}),U=R(()=>{var ze,pt;return(pt=(ze=d.value)==null?void 0:ze.popperRef)==null?void 0:pt.contentRef}),ne=R(()=>{if(e.multiple){const ze=e.modelValue.length;if(e.modelValue.length>0)return S.value.findIndex(pt=>pt.value===e.modelValue[ze-1])}else if(e.modelValue)return S.value.findIndex(ze=>ze.value===e.modelValue);return-1}),be=R(()=>g.value&&I.value!==!1),{createNewOption:te,removeNewOption:he,selectNewOption:oe,clearAllNewOption:G}=pxe(e,r),{handleCompositionStart:Y,handleCompositionUpdate:X,handleCompositionEnd:ae}=mxe(ze=>cn(ze)),Se=()=>{var ze,pt,Jt;(pt=(ze=u.value).focus)==null||pt.call(ze),(Jt=d.value)==null||Jt.updatePopper()},Le=()=>{if(!e.automaticDropdown&&!m.value)return r.isComposing&&(r.softFocus=!0),dt(()=>{var ze,pt;g.value=!g.value,(pt=(ze=u.value)==null?void 0:ze.focus)==null||pt.call(ze)})},Be=()=>(e.filterable&&r.inputValue!==r.selectedLabel&&(r.query=r.selectedLabel),j(r.inputValue),dt(()=>{te(r.inputValue)})),Fe=tr(Be,k.value),j=ze=>{r.previousQuery!==ze&&(r.previousQuery=ze,e.filterable&&Ft(e.filterMethod)?e.filterMethod(ze):e.filterable&&e.remote&&Ft(e.remoteMethod)&&e.remoteMethod(ze))},Q=ze=>{yi(e.modelValue,ze)||t(Xs,ze)},H=ze=>{t(Pt,ze),Q(ze),r.previousValue=ze.toString()},se=(ze=[],pt)=>{if(!an(pt))return ze.indexOf(pt);const Jt=e.valueKey;let cs=-1;return ze.some((ra,Er)=>Ps(ra,Jt)===Ps(pt,Jt)?(cs=Er,!0):!1),cs},we=ze=>an(ze)?Ps(ze,e.valueKey):ze,J=ze=>an(ze)?ze.label:ze,_e=()=>{if(!(e.collapseTags&&!e.filterable))return dt(()=>{var ze,pt;if(!u.value)return;const Jt=h.value;f.value.height=Jt.offsetHeight,g.value&&I.value!==!1&&((pt=(ze=d.value)==null?void 0:ze.updatePopper)==null||pt.call(ze))})},Ie=()=>{var ze,pt;if(fe(),M(),(pt=(ze=d.value)==null?void 0:ze.updatePopper)==null||pt.call(ze),e.multiple)return _e()},fe=()=>{const ze=h.value;ze&&(r.selectWidth=ze.getBoundingClientRect().width)},Te=(ze,pt,Jt=!0)=>{var cs,ra;if(e.multiple){let Er=e.modelValue.slice();const Tc=se(Er,we(ze));Tc>-1?(Er=[...Er.slice(0,Tc),...Er.slice(Tc+1)],r.cachedOptions.splice(Tc,1),he(ze)):(e.multipleLimit<=0||Er.length<e.multipleLimit)&&(Er=[...Er,we(ze)],r.cachedOptions.push(ze),oe(ze),ct(pt)),H(Er),ze.created&&(r.query="",j(""),r.inputLength=20),e.filterable&&!e.reserveKeyword&&((ra=(cs=u.value).focus)==null||ra.call(cs),De("")),e.filterable&&(r.calculatedWidth=p.value.getBoundingClientRect().width),_e(),on()}else i.value=pt,r.selectedLabel=ze.label,H(we(ze)),g.value=!1,r.isComposing=!1,r.isSilentBlur=Jt,oe(ze),ze.created||G(),ct(pt)},rt=(ze,pt)=>{const Jt=e.modelValue.indexOf(pt.value);if(Jt>-1&&!m.value){const cs=[...e.modelValue.slice(0,Jt),...e.modelValue.slice(Jt+1)];return r.cachedOptions.splice(Jt,1),H(cs),t("remove-tag",pt.value),r.softFocus=!0,he(pt),dt(Se)}ze.stopPropagation()},Xe=ze=>{const pt=r.isComposing;r.isComposing=!0,r.softFocus?r.softFocus=!1:pt||t("focus",ze)},lt=()=>(r.softFocus=!1,dt(()=>{var ze,pt;(pt=(ze=u.value)==null?void 0:ze.blur)==null||pt.call(ze),p.value&&(r.calculatedWidth=p.value.getBoundingClientRect().width),r.isSilentBlur?r.isSilentBlur=!1:r.isComposing&&t("blur"),r.isComposing=!1})),vt=()=>{r.displayInputValue.length>0?De(""):g.value=!1},Ye=ze=>{if(r.displayInputValue.length===0){ze.preventDefault();const pt=e.modelValue.slice();pt.pop(),he(r.cachedOptions.pop()),H(pt)}},de=()=>{let ze;return _t(e.modelValue)?ze=[]:ze="",r.softFocus=!0,e.multiple?r.cachedOptions=[]:r.selectedLabel="",g.value=!1,H(ze),t("clear"),G(),dt(Se)},De=ze=>{r.displayInputValue=ze,r.inputValue=ze},Ge=(ze,pt=void 0)=>{const Jt=S.value;if(!["forward","backward"].includes(ze)||m.value||Jt.length<=0||T.value)return;if(!g.value)return Le();pt===void 0&&(pt=r.hoveringIndex);let cs=-1;ze==="forward"?(cs=pt+1,cs>=Jt.length&&(cs=0)):ze==="backward"&&(cs=pt-1,cs<0&&(cs=Jt.length-1));const ra=Jt[cs];if(ra.disabled||ra.type==="Group")return Ge(ze,cs);ct(cs),ur(cs)},Ne=()=>{if(g.value)~r.hoveringIndex&&Te(S.value[r.hoveringIndex],r.hoveringIndex,!1);else return Le()},ct=ze=>{r.hoveringIndex=ze},wt=()=>{r.hoveringIndex=-1},on=()=>{var ze;const pt=u.value;pt&&((ze=pt.focus)==null||ze.call(pt))},cn=ze=>{const pt=ze.target.value;if(De(pt),r.displayInputValue.length>0&&!g.value&&(g.value=!0),r.calculatedWidth=p.value.getBoundingClientRect().width,e.multiple&&_e(),e.remote)Fe();else return Be()},Kt=()=>(g.value=!1,lt()),Ln=()=>(r.inputValue=r.displayInputValue,dt(()=>{~ne.value&&(ct(ne.value),ur(r.hoveringIndex))})),ur=ze=>{c.value.scrollToItem(ze)},ii=()=>{if(wt(),e.multiple)if(e.modelValue.length>0){let ze=!1;r.cachedOptions.length=0,r.previousValue=e.modelValue.toString(),e.modelValue.map(pt=>{const Jt=S.value.findIndex(cs=>we(cs)===pt);~Jt&&(r.cachedOptions.push(S.value[Jt]),ze||ct(Jt),ze=!0)})}else r.cachedOptions=[],r.previousValue="";else if(b.value){r.previousValue=e.modelValue;const ze=S.value,pt=ze.findIndex(Jt=>we(Jt)===e.modelValue);~pt?(r.selectedLabel=ze[pt].label,ct(pt)):r.selectedLabel=`${e.modelValue}`}else r.selectedLabel="",r.previousValue="";M()};return Oe(g,ze=>{var pt,Jt;t("visible-change",ze),ze?(Jt=(pt=d.value).update)==null||Jt.call(pt):(r.displayInputValue="",te(""))}),Oe(()=>e.modelValue,(ze,pt)=>{var Jt;(!ze||ze.toString()!==r.previousValue)&&ii(),yi(ze,pt)||(Jt=o==null?void 0:o.validate)==null||Jt.call(o,"change")},{deep:!0}),Oe(()=>e.options,()=>{const ze=u.value;(!ze||ze&&document.activeElement!==ze)&&ii()},{deep:!0}),Oe(S,()=>dt(c.value.resetScrollTop)),Rt(()=>{ii(),_l(f.value,Ie)}),Ap(()=>{Nl(f.value,Ie)}),{collapseTagSize:N,currentPlaceholder:V,expanded:g,emptyText:I,popupHeight:v,debounce:k,filteredOptions:S,iconComponent:y,iconReverse:w,inputWrapperStyle:D,popperSize:a,dropdownMenuVisible:be,hasModelValue:b,shouldShowPlaceholder:F,selectDisabled:m,selectSize:_,showClearBtn:$,states:r,tagMaxWidth:O,calculatorRef:p,controlRef:l,inputRef:u,menuRef:c,popper:d,selectRef:f,selectionRef:h,popperRef:U,validateState:C,validateIcon:x,Effect:KF,debouncedOnInputChange:Fe,deleteTag:rt,getLabel:J,getValueKey:we,handleBlur:lt,handleClear:de,handleClickOutside:Kt,handleDel:Ye,handleEsc:vt,handleFocus:Xe,handleMenuEnter:Ln,handleResize:Ie,toggleMenu:Le,scrollTo:ur,onInput:cn,onKeyboardNavigate:Ge,onKeyboardSelect:Ne,onSelect:Te,onHover:ct,onUpdateInputValue:De,handleCompositionStart:Y,handleCompositionEnd:ae,handleCompositionUpdate:X}},yxe=ge({name:"ElSelectV2",components:{ElSelectMenu:hxe,ElTag:O0,ElTooltip:ar,ElIcon:Ot},directives:{ClickOutside:El,ModelText:$2},props:axe,emits:[Pt,Xs,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const n=bxe(e,t);return Vt(M4,{props:Sn(zt(ut({},xo(e)),{height:n.popupHeight})),onSelect:n.onSelect,onHover:n.onHover,onKeyboardNavigate:n.onKeyboardNavigate,onKeyboardSelect:n.onKeyboardSelect}),n}}),wxe={key:0},$xe={key:1,class:"el-select-v2__selection"},Cxe={key:0,class:"el-select-v2__selected-item"},xxe=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],kxe=["textContent"],Sxe={class:"el-select-v2__selected-item el-select-v2__input-wrapper"},Ixe=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],Txe=["textContent"],Exe={class:"el-select-v2__suffix"},_xe={class:"el-select-v2__empty"};function Nxe(e,t,n,s,o,r){const i=ie("el-tag"),a=ie("el-icon"),l=ie("el-select-menu"),u=ie("el-tooltip"),c=Vo("model-text"),d=Vo("click-outside");return $t((A(),B("div",{ref:"selectRef",class:q([[e.selectSize?"el-select-v2--"+e.selectSize:""],"el-select-v2"]),onClick:t[24]||(t[24]=ht((...f)=>e.toggleMenu&&e.toggleMenu(...f),["stop"])),onMouseenter:t[25]||(t[25]=f=>e.states.comboBoxHovering=!0),onMouseleave:t[26]||(t[26]=f=>e.states.comboBoxHovering=!1)},[le(u,{ref:"popper",visible:e.dropdownMenuVisible,"onUpdate:visible":t[22]||(t[22]=f=>e.dropdownMenuVisible=f),"append-to-body":e.popperAppendToBody,"popper-class":`el-select-v2__popper ${e.popperClass}`,"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:"light",placement:"bottom-start",pure:"",transition:"el-zoom-in-top",trigger:"click",persistent:"",onShow:e.handleMenuEnter,onHide:t[23]||(t[23]=f=>e.states.inputValue=e.states.displayInputValue)},{default:re(()=>{var f;return[W("div",{ref:"selectionRef",class:q(["el-select-v2__wrapper",{"is-focused":e.states.isComposing,"is-hovering":e.states.comboBoxHovering,"is-filterable":e.filterable,"is-disabled":e.disabled}])},[e.$slots.prefix?(A(),B("div",wxe,[Re(e.$slots,"prefix")])):ce("v-if",!0),e.multiple?(A(),B("div",$xe,[e.collapseTags&&e.modelValue.length>0?(A(),B("div",Cxe,[le(i,{closable:!e.selectDisabled&&!((f=e.states.cachedOptions[0])==null?void 0:f.disable),size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:t[0]||(t[0]=h=>e.deleteTag(h,e.states.cachedOptions[0]))},{default:re(()=>{var h;return[W("span",{class:"el-select-v2__tags-text",style:nt({maxWidth:`${e.tagMaxWidth}px`})},Pe((h=e.states.cachedOptions[0])==null?void 0:h.label),5)]}),_:1},8,["closable","size"]),e.modelValue.length>1?(A(),ve(i,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:re(()=>[W("span",{class:"el-select-v2__tags-text",style:nt({maxWidth:`${e.tagMaxWidth}px`})},"+ "+Pe(e.modelValue.length-1),5)]),_:1},8,["size"])):ce("v-if",!0)])):(A(!0),B(at,{key:1},Zt(e.states.cachedOptions,(h,p)=>(A(),B("div",{key:p,class:"el-select-v2__selected-item"},[(A(),ve(i,{key:e.getValueKey(h),closable:!e.selectDisabled&&!h.disabled,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:g=>e.deleteTag(g,h)},{default:re(()=>[W("span",{class:"el-select-v2__tags-text",style:nt({maxWidth:`${e.tagMaxWidth}px`})},Pe(e.getLabel(h)),5)]),_:2},1032,["closable","size","onClose"]))]))),128)),W("div",{class:"el-select-v2__selected-item el-select-v2__input-wrapper",style:nt(e.inputWrapperStyle)},[$t(W("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:q(["el-select-v2__combobox-input",[e.selectSize?`is-${e.selectSize}`:""]]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":t[1]||(t[1]=(...h)=>e.onUpdateInputValue&&e.onUpdateInputValue(...h)),onFocus:t[2]||(t[2]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onInput:t[3]||(t[3]=(...h)=>e.onInput&&e.onInput(...h)),onCompositionstart:t[4]||(t[4]=(...h)=>e.handleCompositionStart&&e.handleCompositionStart(...h)),onCompositionupdate:t[5]||(t[5]=(...h)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...h)),onCompositionend:t[6]||(t[6]=(...h)=>e.handleCompositionEnd&&e.handleCompositionEnd(...h)),onKeydown:[t[7]||(t[7]=Ut(ht(h=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[8]||(t[8]=Ut(ht(h=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[9]||(t[9]=Ut(ht((...h)=>e.onKeyboardSelect&&e.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),t[10]||(t[10]=Ut(ht((...h)=>e.handleEsc&&e.handleEsc(...h),["stop","prevent"]),["esc"])),t[11]||(t[11]=Ut(ht((...h)=>e.handleDel&&e.handleDel(...h),["stop"]),["delete"]))]},null,42,xxe),[[c,e.states.displayInputValue]]),e.filterable?(A(),B("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:"el-select-v2__input-calculator",textContent:Pe(e.states.displayInputValue)},null,8,kxe)):ce("v-if",!0)],4)])):(A(),B(at,{key:2},[W("div",Sxe,[$t(W("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:"el-select-v2__combobox-input",disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",unselectable:e.expanded?"on":void 0,onCompositionstart:t[12]||(t[12]=(...h)=>e.handleCompositionStart&&e.handleCompositionStart(...h)),onCompositionupdate:t[13]||(t[13]=(...h)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...h)),onCompositionend:t[14]||(t[14]=(...h)=>e.handleCompositionEnd&&e.handleCompositionEnd(...h)),onFocus:t[15]||(t[15]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onInput:t[16]||(t[16]=(...h)=>e.onInput&&e.onInput(...h)),onKeydown:[t[17]||(t[17]=Ut(ht(h=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[18]||(t[18]=Ut(ht(h=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[19]||(t[19]=Ut(ht((...h)=>e.onKeyboardSelect&&e.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),t[20]||(t[20]=Ut(ht((...h)=>e.handleEsc&&e.handleEsc(...h),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":t[21]||(t[21]=(...h)=>e.onUpdateInputValue&&e.onUpdateInputValue(...h))},null,40,Ixe),[[c,e.states.displayInputValue]])]),e.filterable?(A(),B("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:"el-select-v2__selected-item el-select-v2__input-calculator",textContent:Pe(e.states.displayInputValue)},null,8,Txe)):ce("v-if",!0)],64)),e.shouldShowPlaceholder?(A(),B("span",{key:3,class:q({"el-select-v2__placeholder":!0,"is-transparent":e.states.isComposing||(e.placeholder&&e.multiple?e.modelValue.length===0:!e.hasModelValue)})},Pe(e.currentPlaceholder),3)):ce("v-if",!0),W("span",Exe,[e.iconComponent?$t((A(),ve(a,{key:0,class:q(["el-select-v2__caret","el-input__icon",e.iconReverse])},{default:re(()=>[(A(),ve(tn(e.iconComponent)))]),_:1},8,["class"])),[[en,!e.showClearBtn]]):ce("v-if",!0),e.showClearBtn&&e.clearIcon?(A(),ve(a,{key:1,class:"el-select-v2__caret el-input__icon",onClick:ht(e.handleClear,["prevent","stop"])},{default:re(()=>[(A(),ve(tn(e.clearIcon)))]),_:1},8,["onClick"])):ce("v-if",!0),e.validateState&&e.validateIcon?(A(),ve(a,{key:2,class:"el-input__icon el-input__validateIcon"},{default:re(()=>[(A(),ve(tn(e.validateIcon)))]),_:1})):ce("v-if",!0)])],2)]}),content:re(()=>[le(l,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:re(f=>[Re(e.$slots,"default",zu(Vu(f)))]),empty:re(()=>[Re(e.$slots,"empty",{},()=>[W("p",_xe,Pe(e.emptyText?e.emptyText:""),1)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","append-to-body","popper-class","popper-options","onShow"])],34)),[[d,e.handleClickOutside,e.popperRef]])}var Hv=We(yxe,[["render",Nxe]]);Hv.install=e=>{e.component(Hv.name,Hv)};const Axe=Hv,Dxe=Axe,Rxe=ge({name:"ImgPlaceholder"}),Oxe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Mxe=W("path",{d:"M64 896V128h896v768H64z m64-128l192-192 116.352 116.352L640 448l256 307.2V192H128v576z m224-480a96 96 0 1 1-0.064 192.064A96 96 0 0 1 352 288z"},null,-1),Pxe=[Mxe];function Fxe(e,t,n,s,o,r){return A(),B("svg",Oxe,Pxe)}var Lxe=We(Rxe,[["render",Fxe]]);const Bxe=mt({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),zxe=ge({name:"ElSkeletonItem",components:{ImgPlaceholder:Lxe},props:Bxe,setup(){return{ns:At("skeleton")}}});function Vxe(e,t,n,s,o,r){const i=ie("img-placeholder");return A(),B("div",{class:q([e.ns.e("item"),e.ns.e(e.variant)])},[e.variant==="image"?(A(),ve(i,{key:0})):ce("v-if",!0)],2)}var Cb=We(zxe,[["render",Vxe]]);const Wxe=mt({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),Hxe=ge({name:"ElSkeleton",components:{[Cb.name]:Cb},props:Wxe,setup(e){const t=At("skeleton"),n=R(()=>e.loading),s=Zne(n,e.throttle);return{ns:t,uiLoading:s}}});function Uxe(e,t,n,s,o,r){const i=ie("el-skeleton-item");return e.uiLoading?(A(),B("div",lo({key:0,class:[e.ns.b(),e.ns.is("animated",e.animated)]},e.$attrs),[(A(!0),B(at,null,Zt(e.count,a=>(A(),B(at,{key:a},[e.loading?Re(e.$slots,"template",{key:a},()=>[le(i,{class:q(e.ns.is("first")),variant:"p"},null,8,["class"]),(A(!0),B(at,null,Zt(e.rows,l=>(A(),ve(i,{key:l,class:q([e.ns.e("paragraph"),e.ns.is("last",l===e.rows&&e.rows>1)]),variant:"p"},null,8,["class"]))),128))]):ce("v-if",!0)],64))),128))],16)):Re(e.$slots,"default",zu(lo({key:1},e.$attrs)))}var jxe=We(Hxe,[["render",Uxe]]);const Gxe=Wt(jxe,{SkeletonItem:Cb}),Kxe=us(Cb),qxe=(e,t,n)=>{const s=L(null),o=L(!1),r=R(()=>t.value instanceof Function),i=R(()=>r.value&&t.value(e.modelValue)||e.modelValue),a=tr(()=>{n.value&&(o.value=!0)},50),l=tr(()=>{n.value&&(o.value=!1)},50);return{tooltip:s,tooltipVisible:o,formatValue:i,displayTooltip:a,hideTooltip:l}},Yxe=(e,t,n)=>{const{disabled:s,min:o,max:r,step:i,showTooltip:a,precision:l,sliderSize:u,formatTooltip:c,emitChange:d,resetSize:f,updateDragging:h}=Ze("SliderProvider"),{tooltip:p,tooltipVisible:g,formatValue:m,displayTooltip:v,hideTooltip:b}=qxe(e,c,a),$=R(()=>`${(e.modelValue-o.value)/(r.value-o.value)*100}%`),y=R(()=>e.vertical?{bottom:$.value}:{left:$.value}),w=()=>{t.hovering=!0,v()},C=()=>{t.hovering=!1,t.dragging||b()},x=M=>{s.value||(M.preventDefault(),T(M),bn(window,"mousemove",_),bn(window,"touchmove",_),bn(window,"mouseup",N),bn(window,"touchend",N),bn(window,"contextmenu",N))},k=()=>{s.value||(t.newPosition=parseFloat($.value)-i.value/(r.value-o.value)*100,O(t.newPosition),d())},I=()=>{s.value||(t.newPosition=parseFloat($.value)+i.value/(r.value-o.value)*100,O(t.newPosition),d())},S=M=>{let D,F;return M.type.startsWith("touch")?(F=M.touches[0].clientY,D=M.touches[0].clientX):(F=M.clientY,D=M.clientX),{clientX:D,clientY:F}},T=M=>{t.dragging=!0,t.isClick=!0;const{clientX:D,clientY:F}=S(M);e.vertical?t.startY=F:t.startX=D,t.startPosition=parseFloat($.value),t.newPosition=t.startPosition},_=M=>{if(t.dragging){t.isClick=!1,v(),f();let D;const{clientX:F,clientY:V}=S(M);e.vertical?(t.currentY=V,D=(t.startY-t.currentY)/u.value*100):(t.currentX=F,D=(t.currentX-t.startX)/u.value*100),t.newPosition=t.startPosition+D,O(t.newPosition)}},N=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||b(),t.isClick||(O(t.newPosition),d())},0),Kn(window,"mousemove",_),Kn(window,"touchmove",_),Kn(window,"mouseup",N),Kn(window,"touchend",N),Kn(window,"contextmenu",N))},O=async M=>{if(M===null||isNaN(M))return;M<0?M=0:M>100&&(M=100);const D=100/((r.value-o.value)/i.value);let V=Math.round(M/D)*D*(r.value-o.value)*.01+o.value;V=parseFloat(V.toFixed(l.value)),n(Pt,V),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await dt(),t.dragging&&v(),p.value.updatePopper()};return Oe(()=>t.dragging,M=>{h(M)}),{tooltip:p,tooltipVisible:g,showTooltip:a,wrapperStyle:y,formatValue:m,handleMouseEnter:w,handleMouseLeave:C,onButtonDown:x,onLeftKeyDown:k,onRightKeyDown:I,setPosition:O}},Xxe=ge({name:"ElSliderButton",components:{ElTooltip:ar},props:{modelValue:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:{type:String,default:""}},emits:[Pt],setup(e,{emit:t}){const n=Sn({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:e.modelValue}),{tooltip:s,showTooltip:o,tooltipVisible:r,wrapperStyle:i,formatValue:a,handleMouseEnter:l,handleMouseLeave:u,onButtonDown:c,onLeftKeyDown:d,onRightKeyDown:f,setPosition:h}=Yxe(e,n,t),{hovering:p,dragging:g}=xo(n);return{tooltip:s,tooltipVisible:r,showTooltip:o,wrapperStyle:i,formatValue:a,handleMouseEnter:l,handleMouseLeave:u,onButtonDown:c,onLeftKeyDown:d,onRightKeyDown:f,setPosition:h,hovering:p,dragging:g}}});function Zxe(e,t,n,s,o,r){const i=ie("el-tooltip");return A(),B("div",{ref:"button",class:q(["el-slider__button-wrapper",{hover:e.hovering,dragging:e.dragging}]),style:nt(e.wrapperStyle),tabindex:"0",onMouseenter:t[1]||(t[1]=(...a)=>e.handleMouseEnter&&e.handleMouseEnter(...a)),onMouseleave:t[2]||(t[2]=(...a)=>e.handleMouseLeave&&e.handleMouseLeave(...a)),onMousedown:t[3]||(t[3]=(...a)=>e.onButtonDown&&e.onButtonDown(...a)),onTouchstart:t[4]||(t[4]=(...a)=>e.onButtonDown&&e.onButtonDown(...a)),onFocus:t[5]||(t[5]=(...a)=>e.handleMouseEnter&&e.handleMouseEnter(...a)),onBlur:t[6]||(t[6]=(...a)=>e.handleMouseLeave&&e.handleMouseLeave(...a)),onKeydown:[t[7]||(t[7]=Ut((...a)=>e.onLeftKeyDown&&e.onLeftKeyDown(...a),["left"])),t[8]||(t[8]=Ut((...a)=>e.onRightKeyDown&&e.onRightKeyDown(...a),["right"])),t[9]||(t[9]=Ut(ht((...a)=>e.onLeftKeyDown&&e.onLeftKeyDown(...a),["prevent"]),["down"])),t[10]||(t[10]=Ut(ht((...a)=>e.onRightKeyDown&&e.onRightKeyDown(...a),["prevent"]),["up"]))]},[le(i,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[0]||(t[0]=a=>e.tooltipVisible=a),placement:"top","stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!e.showTooltip,persistent:""},{content:re(()=>[W("span",null,Pe(e.formatValue),1)]),default:re(()=>[W("div",{class:q(["el-slider__button",{hover:e.hovering,dragging:e.dragging}])},null,2)]),_:1},8,["visible","popper-class","disabled"])],38)}var Jxe=We(Xxe,[["render",Zxe]]);const Qxe=ge({name:"ElMarker",props:{mark:{type:[String,Object],default:()=>{}}},setup(e){return{label:R(()=>typeof e.mark=="string"?e.mark:e.mark.label)}},render(){var e;return He("div",{class:"el-slider__marks-text",style:(e=this.mark)==null?void 0:e.style},this.label)}}),e2e=e=>R(()=>e.marks?Object.keys(e.marks).map(parseFloat).sort((n,s)=>n-s).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),t2e=(e,t,n)=>{const s=Ze(ir,{}),o=Ze(Ni,{}),r=vo(null),i=L(null),a=L(null),l={firstButton:i,secondButton:a},u=R(()=>e.disabled||s.disabled||!1),c=R(()=>Math.min(t.firstValue,t.secondValue)),d=R(()=>Math.max(t.firstValue,t.secondValue)),f=R(()=>e.range?`${100*(d.value-c.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),h=R(()=>e.range?`${100*(c.value-e.min)/(e.max-e.min)}%`:"0%"),p=R(()=>e.vertical?{height:e.height}:{}),g=R(()=>e.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),m=()=>{r.value&&(t.sliderSize=r.value[`client${e.vertical?"Height":"Width"}`])},v=x=>{const k=e.min+x*(e.max-e.min)/100;if(!e.range){i.value.setPosition(x);return}let I;Math.abs(c.value-k)<Math.abs(d.value-k)?I=t.firstValue<t.secondValue?"firstButton":"secondButton":I=t.firstValue>t.secondValue?"firstButton":"secondButton",l[I].value.setPosition(x)},b=x=>{t.firstValue=x,y(e.range?[c.value,d.value]:x)},$=x=>{t.secondValue=x,e.range&&y([c.value,d.value])},y=x=>{n(Pt,x),n(gl,x)},w=async()=>{await dt(),n(Xs,e.range?[c.value,d.value]:e.modelValue)};return{elFormItem:o,slider:r,firstButton:i,secondButton:a,sliderDisabled:u,minValue:c,maxValue:d,runwayStyle:p,barStyle:g,resetSize:m,setPosition:v,emitChange:w,onSliderClick:x=>{if(!(u.value||t.dragging)){if(m(),e.vertical){const k=r.value.getBoundingClientRect().bottom;v((k-x.clientY)/t.sliderSize*100)}else{const k=r.value.getBoundingClientRect().left;v((x.clientX-k)/t.sliderSize*100)}w()}},setFirstValue:b,setSecondValue:$}},n2e=(e,t,n,s)=>({stops:R(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,a=100*e.step/(e.max-e.min),l=Array.from({length:i-1}).map((u,c)=>(c+1)*a);return e.range?l.filter(u=>u<100*(n.value-e.min)/(e.max-e.min)||u>100*(s.value-e.min)/(e.max-e.min)):l.filter(u=>u>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),s2e=ge({name:"ElSlider",components:{ElInputNumber:h4,SliderButton:Jxe,SliderMarker:Qxe},props:{modelValue:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},size:{type:String,validator:nr},inputSize:{type:String,validator:nr},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Function,default:void 0},disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String,default:""},debounce:{type:Number,default:300},label:{type:String,default:void 0},tooltipClass:{type:String,default:void 0},marks:Object},emits:[Pt,Xs,gl],setup(e,{emit:t}){const n=Sn({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:s,slider:o,firstButton:r,secondButton:i,sliderDisabled:a,minValue:l,maxValue:u,runwayStyle:c,barStyle:d,resetSize:f,emitChange:h,onSliderClick:p,setFirstValue:g,setSecondValue:m}=t2e(e,n,t),{stops:v,getStopStyle:b}=n2e(e,n,l,u),$=ks(),y=R(()=>e.inputSize||$.value),w="el-slider",C=R(()=>[w,`${w}--${$.value}`,e.vertical?"is-vertical":"",e.showInput?"el-slider--with-input":""]),x=e2e(e);o2e(e,n,l,u,t,s);const k=R(()=>{const D=[e.min,e.max,e.step].map(F=>{const V=`${F}`.split(".")[1];return V?V.length:0});return Math.max.apply(null,D)}),{sliderWrapper:I}=r2e(e,n,f),{firstValue:S,secondValue:T,oldValue:_,dragging:N,sliderSize:O}=xo(n),M=D=>{n.dragging=D};return Vt("SliderProvider",zt(ut({},xo(e)),{sliderSize:O,disabled:a,precision:k,emitChange:h,resetSize:f,updateDragging:M})),{firstValue:S,secondValue:T,oldValue:_,dragging:N,sliderSize:O,slider:o,firstButton:r,secondButton:i,sliderDisabled:a,runwayStyle:c,barStyle:d,emitChange:h,onSliderClick:p,getStopStyle:b,setFirstValue:g,setSecondValue:m,stops:v,markList:x,sliderWrapper:I,sliderWrapperSize:$,sliderInputSize:y,sliderKls:C}}}),o2e=(e,t,n,s,o,r)=>{const i=u=>{o(Pt,u),o(gl,u)},a=()=>e.range?![n.value,s.value].every((u,c)=>u===t.oldValue[c]):e.modelValue!==t.oldValue,l=()=>{var u,c;if(e.min>e.max){ko("Slider","min should not be greater than max.");return}const d=e.modelValue;e.range&&Array.isArray(d)?d[1]<e.min?i([e.min,e.min]):d[0]>e.max?i([e.max,e.max]):d[0]<e.min?i([e.min,d[1]]):d[1]>e.max?i([d[0],e.max]):(t.firstValue=d[0],t.secondValue=d[1],a()&&((u=r.validate)==null||u.call(r,"change"),t.oldValue=d.slice())):!e.range&&typeof d=="number"&&!isNaN(d)&&(d<e.min?i(e.min):d>e.max?i(e.max):(t.firstValue=d,a()&&((c=r.validate)==null||c.call(r,"change"),t.oldValue=d)))};l(),Oe(()=>t.dragging,u=>{u||l()}),Oe(()=>e.modelValue,(u,c)=>{t.dragging||Array.isArray(u)&&Array.isArray(c)&&u.every((d,f)=>d===c[f])||l()}),Oe(()=>[e.min,e.max],()=>{l()})},r2e=(e,t,n)=>{const s=L(null);return Rt(async()=>{let o;e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue],o=`${t.firstValue}-${t.secondValue}`):(typeof e.modelValue!="number"||isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue,o=t.firstValue),s.value.setAttribute("aria-valuetext",o),s.value.setAttribute("aria-label",e.label?e.label:`slider between ${e.min} and ${e.max}`),bn(window,"resize",n),await dt(),n()}),ls(()=>{Kn(window,"resize",n)}),{sliderWrapper:s}},i2e=["aria-valuemin","aria-valuemax","aria-orientation","aria-disabled"],a2e={key:1},l2e={class:"el-slider__marks"};function u2e(e,t,n,s,o,r){const i=ie("slider-button"),a=ie("slider-marker"),l=ie("el-input-number");return A(),B("div",{ref:"sliderWrapper",class:q(e.sliderKls),role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled},[W("div",{ref:"slider",class:q(["el-slider__runway",{"show-input":e.showInput&&!e.range,disabled:e.sliderDisabled}]),style:nt(e.runwayStyle),onClick:t[0]||(t[0]=(...u)=>e.onSliderClick&&e.onSliderClick(...u))},[W("div",{class:"el-slider__bar",style:nt(e.barStyle)},null,4),le(i,{ref:"firstButton","model-value":e.firstValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setFirstValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"]),e.range?(A(),ve(i,{key:0,ref:"secondButton","model-value":e.secondValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setSecondValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"])):ce("v-if",!0),e.showStops?(A(),B("div",a2e,[(A(!0),B(at,null,Zt(e.stops,(u,c)=>(A(),B("div",{key:c,class:"el-slider__stop",style:nt(e.getStopStyle(u))},null,4))),128))])):ce("v-if",!0),e.markList.length>0?(A(),B(at,{key:2},[W("div",null,[(A(!0),B(at,null,Zt(e.markList,(u,c)=>(A(),B("div",{key:c,style:nt(e.getStopStyle(u.position)),class:"el-slider__stop el-slider__marks-stop"},null,4))),128))]),W("div",l2e,[(A(!0),B(at,null,Zt(e.markList,(u,c)=>(A(),ve(a,{key:c,mark:u.mark,style:nt(e.getStopStyle(u.position))},null,8,["mark","style"]))),128))])],64)):ce("v-if",!0)],6),e.showInput&&!e.range?(A(),ve(l,{key:0,ref:"input","model-value":e.firstValue,class:"el-slider__input",step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.sliderInputSize,"onUpdate:modelValue":e.setFirstValue,onChange:e.emitChange},null,8,["model-value","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):ce("v-if",!0)],10,i2e)}var Uv=We(s2e,[["render",u2e]]);Uv.install=e=>{e.component(Uv.name,Uv)};const c2e=Uv,d2e=c2e,f2e=mt({prefixCls:{type:String,default:"el-space"}}),h2e=ge({props:f2e,setup(e){return{classes:R(()=>[`${e.prefixCls}__item`])}}});function p2e(e,t,n,s,o,r){return A(),B("div",{class:q(e.classes)},[Re(e.$slots,"default")],2)}var XA=We(h2e,[["render",p2e]]);const ZA={small:8,default:12,large:16};function g2e(e){const t=R(()=>["el-space",`el-space--${e.direction}`,e.class]),n=L(0),s=L(0),o=R(()=>{const i=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${s.value}px`}:{},a={alignItems:e.alignment};return[i,a,e.style]}),r=R(()=>{const i={paddingBottom:`${s.value}px`,marginRight:`${n.value}px`},a=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[i,a]});return Ca(()=>{const{size:i="small",wrap:a,direction:l,fill:u}=e;if(Array.isArray(i)){const[c=0,d=0]=i;n.value=c,s.value=d}else{let c;xn(i)?c=i:c=ZA[i]||ZA.small,(a||u)&&l==="horizontal"?n.value=s.value=c:l==="horizontal"?(n.value=c,s.value=0):(s.value=c,n.value=0)}}),{classes:t,containerStyle:o,itemStyle:r}}const m2e=mt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Je([String,Object,Array]),default:""},style:{type:Je([String,Array,Object]),default:""},alignment:{type:Je(String),default:"center"},prefixCls:{type:String},spacer:{type:Je([Object,String,Number,Array]),default:null,validator:e=>As(e)||xn(e)||Xt(e)},wrap:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:x2,validator:e=>xn(e)||_t(e)&&e.length===2&&e.every(t=>xn(t))}});var v2e=ge({name:"ElSpace",props:m2e,setup(e,{slots:t}){const{classes:n,containerStyle:s,itemStyle:o}=g2e(e);return()=>{var r;const{spacer:i,prefixCls:a,direction:l}=e,u=Re(t,"default",{key:0},()=>[]);if(((r=u.children)!=null?r:[]).length===0)return null;if(_t(u.children)){let c=[];if(u.children.forEach((d,f)=>{YL(d)?_t(d.children)&&d.children.forEach((h,p)=>{c.push(le(XA,{style:o.value,prefixCls:a,key:`nested-${p}`},{default:()=>[h]},Mr.PROPS|Mr.STYLE,["style","prefixCls"]))}):Cbe(d)&&c.push(le(XA,{style:o.value,prefixCls:a,key:`LoopKey${f}`},{default:()=>[d]},Mr.PROPS|Mr.STYLE,["style","prefixCls"]))}),i){const d=c.length-1;c=c.reduce((f,h,p)=>{const g=[...f,h];return p!==d&&g.push(le("span",{style:[o.value,l==="vertical"?"width: 100%":null],key:p},[As(i)?i:qt(i,Mr.TEXT)],Mr.STYLE)),g},[])}return le("div",{class:n.value,style:s.value},c,Mr.STYLE|Mr.CLASS)}return u.children}}});const b2e=Wt(v2e),y2e=ge({name:"ElSteps",props:{space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},alignCenter:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},finishStatus:{type:String,default:"finish",validator:e=>["wait","process","finish","error","success"].includes(e)},processStatus:{type:String,default:"process",validator:e=>["wait","process","finish","error","success"].includes(e)}},emits:[Xs],setup(e,{emit:t}){const n=L([]);return Oe(n,()=>{n.value.forEach((s,o)=>{s.setIndex(o)})}),Vt("ElSteps",{props:e,steps:n}),Oe(()=>e.active,(s,o)=>{t(Xs,s,o)}),{steps:n}}});function w2e(e,t,n,s,o,r){return A(),B("div",{class:q(["el-steps",e.simple?"el-steps--simple":`el-steps--${e.direction}`])},[Re(e.$slots,"default")],2)}var $2e=We(y2e,[["render",w2e]]);const C2e=ge({name:"ElStep",components:{ElIcon:Ot,Close:xi,Check:Cd},props:{title:{type:String,default:""},icon:{type:[String,Object],default:""},description:{type:String,default:""},status:{type:String,default:"",validator:e=>["","wait","process","finish","error","success"].includes(e)}},setup(e){const t=L(-1),n=L({}),s=L(""),o=Ze("ElSteps"),r=Lt();Rt(()=>{Oe([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([$])=>{v($)},{immediate:!0})}),ls(()=>{o.steps.value=o.steps.value.filter($=>$.uid!==r.uid)});const i=R(()=>e.status||s.value),a=R(()=>{const $=o.steps.value[t.value-1];return $?$.currentStatus:"wait"}),l=R(()=>o.props.alignCenter),u=R(()=>o.props.direction==="vertical"),c=R(()=>o.props.simple),d=R(()=>o.steps.value.length),f=R(()=>{var $;return(($=o.steps.value[d.value-1])==null?void 0:$.uid)===r.uid}),h=R(()=>c.value?"":o.props.space),p=R(()=>{const $={flexBasis:typeof h.value=="number"?`${h.value}px`:h.value?h.value:`${100/(d.value-(l.value?0:1))}%`};return u.value||f.value&&($.maxWidth=`${100/d.value}%`),$}),g=$=>{t.value=$},m=$=>{let y=100;const w={};w.transitionDelay=`${150*t.value}ms`,$===o.props.processStatus?y=0:$==="wait"&&(y=0,w.transitionDelay=`${-150*t.value}ms`),w.borderWidth=y&&!c.value?"1px":0,w[o.props.direction==="vertical"?"height":"width"]=`${y}%`,n.value=w},v=$=>{$>t.value?s.value=o.props.finishStatus:$===t.value&&a.value!=="error"?s.value=o.props.processStatus:s.value="wait";const y=o.steps.value[d.value-1];y&&y.calcProgress(s.value)},b=Sn({uid:R(()=>r.uid),currentStatus:i,setIndex:g,calcProgress:m});return o.steps.value=[...o.steps.value,b],{index:t,lineStyle:n,currentStatus:i,isCenter:l,isVertical:u,isSimple:c,isLast:f,space:h,style:p,parent:o,setIndex:g,calcProgress:m,updateStatus:v}}}),x2e={key:0,class:"el-step__line"},k2e={key:1,class:"el-step__icon-inner"},S2e={class:"el-step__main"},I2e={key:0,class:"el-step__arrow"};function T2e(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("check"),l=ie("close");return A(),B("div",{style:nt(e.style),class:q(["el-step",e.isSimple?"is-simple":`is-${e.parent.props.direction}`,e.isLast&&!e.space&&!e.isCenter&&"is-flex",e.isCenter&&!e.isVertical&&!e.isSimple&&"is-center"])},[ce(" icon & line "),W("div",{class:q(["el-step__head",`is-${e.currentStatus}`])},[e.isSimple?ce("v-if",!0):(A(),B("div",x2e,[W("i",{class:"el-step__line-inner",style:nt(e.lineStyle)},null,4)])),W("div",{class:q(["el-step__icon",`is-${e.icon?"icon":"text"}`])},[e.currentStatus!=="success"&&e.currentStatus!=="error"?Re(e.$slots,"icon",{key:0},()=>[e.icon?(A(),ve(i,{key:0,class:"el-step__icon-inner"},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1})):ce("v-if",!0),!e.icon&&!e.isSimple?(A(),B("div",k2e,Pe(e.index+1),1)):ce("v-if",!0)]):(A(),ve(i,{key:1,class:"el-step__icon-inner is-status"},{default:re(()=>[e.currentStatus==="success"?(A(),ve(a,{key:0})):(A(),ve(l,{key:1}))]),_:1}))],2)],2),ce(" title & description "),W("div",S2e,[W("div",{class:q(["el-step__title",`is-${e.currentStatus}`])},[Re(e.$slots,"title",{},()=>[qt(Pe(e.title),1)])],2),e.isSimple?(A(),B("div",I2e)):(A(),B("div",{key:1,class:q(["el-step__description",`is-${e.currentStatus}`])},[Re(e.$slots,"description",{},()=>[qt(Pe(e.description),1)])],2))])],6)}var P4=We(C2e,[["render",T2e]]);const E2e=Wt($2e,{Step:P4}),_2e=us(P4),N2e=mt({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:Je([String,Object,Function]),default:""},inactiveIcon:{type:Je([String,Object,Function]),default:""},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:Je(Function)},size:{type:String,validator:nr}}),A2e={[Pt]:e=>vi(e)||Xt(e)||xn(e),[Xs]:e=>vi(e)||Xt(e)||xn(e),[gl]:e=>vi(e)||Xt(e)||xn(e)},JA="ElSwitch",D2e=ge({name:JA,components:{ElIcon:Ot,Loading:Ra},props:N2e,emits:A2e,setup(e,{emit:t}){const{formItem:n}=af(),s=Pp(R(()=>e.loading)),o=At("switch"),r=ks(),i=L(e.modelValue!==!1),a=L(),l=L(),u=R(()=>[o.b(),o.m(r.value),o.is("disabled",s.value),o.is("checked",d.value)]);Oe(()=>e.modelValue,()=>{i.value=!0}),Oe(()=>e.value,()=>{i.value=!1});const c=R(()=>i.value?e.modelValue:e.value),d=R(()=>c.value===e.activeValue);[e.activeValue,e.inactiveValue].includes(c.value)||(t(Pt,e.inactiveValue),t(Xs,e.inactiveValue),t(gl,e.inactiveValue)),Oe(d,()=>{var m;a.value.checked=d.value,(e.activeColor||e.inactiveColor)&&p(),e.validateEvent&&((m=n==null?void 0:n.validate)==null||m.call(n,"change"))});const f=()=>{const m=d.value?e.inactiveValue:e.activeValue;t(Pt,m),t(Xs,m),t(gl,m),dt(()=>{a.value.checked=d.value})},h=()=>{if(s.value)return;const{beforeChange:m}=e;if(!m){f();return}const v=m();[vd(v),vi(v)].some($=>$)||ko(JA,"beforeChange must return type `Promise<boolean>` or `boolean`"),vd(v)?v.then($=>{$&&f()}).catch($=>{}):v&&f()},p=()=>{const m=d.value?e.activeColor:e.inactiveColor,v=l.value;e.borderColor?v.style.borderColor=e.borderColor:e.borderColor||(v.style.borderColor=m),v.style.backgroundColor=m,v.children[0].style.color=m},g=()=>{var m,v;(v=(m=a.value)==null?void 0:m.focus)==null||v.call(m)};return Rt(()=>{(e.activeColor||e.inactiveColor||e.borderColor)&&p(),a.value.checked=d.value}),{ns:o,input:a,core:l,switchDisabled:s,checked:d,switchKls:u,handleChange:f,switchValue:h,focus:g}}}),R2e=["aria-checked","aria-disabled"],O2e=["id","name","true-value","false-value","disabled"],M2e=["aria-hidden"],P2e=["aria-hidden"],F2e=["aria-hidden"],L2e=["aria-hidden"];function B2e(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("loading");return A(),B("div",{class:q(e.switchKls),role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled,onClick:t[2]||(t[2]=ht((...l)=>e.switchValue&&e.switchValue(...l),["prevent"]))},[W("input",{id:e.id,ref:"input",class:q(e.ns.e("input")),type:"checkbox",name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled,onChange:t[0]||(t[0]=(...l)=>e.handleChange&&e.handleChange(...l)),onKeydown:t[1]||(t[1]=Ut((...l)=>e.switchValue&&e.switchValue(...l),["enter"]))},null,42,O2e),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(A(),B("span",{key:0,class:q([e.ns.e("label"),e.ns.em("label","left"),e.ns.is("active",!e.checked)])},[e.inactiveIcon?(A(),ve(i,{key:0},{default:re(()=>[(A(),ve(tn(e.inactiveIcon)))]),_:1})):ce("v-if",!0),!e.inactiveIcon&&e.inactiveText?(A(),B("span",{key:1,"aria-hidden":e.checked},Pe(e.inactiveText),9,M2e)):ce("v-if",!0)],2)):ce("v-if",!0),W("span",{ref:"core",class:q(e.ns.e("core")),style:nt({width:(e.width||40)+"px"})},[e.inlinePrompt?(A(),B("div",{key:0,class:q(e.ns.e("inner"))},[e.activeIcon||e.inactiveIcon?(A(),B(at,{key:0},[e.activeIcon?(A(),ve(i,{key:0,class:q([e.ns.is("icon"),e.checked?e.ns.is("show"):e.ns.is("hide")])},{default:re(()=>[(A(),ve(tn(e.activeIcon)))]),_:1},8,["class"])):ce("v-if",!0),e.inactiveIcon?(A(),ve(i,{key:1,class:q([e.ns.is("icon"),e.checked?e.ns.is("hide"):e.ns.is("show")])},{default:re(()=>[(A(),ve(tn(e.inactiveIcon)))]),_:1},8,["class"])):ce("v-if",!0)],64)):e.activeText||e.inactiveIcon?(A(),B(at,{key:1},[e.activeText?(A(),B("span",{key:0,class:q([e.ns.is("text"),e.checked?e.ns.is("show"):e.ns.is("hide")]),"aria-hidden":!e.checked},Pe(e.activeText.substr(0,1)),11,P2e)):ce("v-if",!0),e.inactiveText?(A(),B("span",{key:1,class:q([e.ns.is("text"),e.checked?e.ns.is("hide"):e.ns.is("show")]),"aria-hidden":e.checked},Pe(e.inactiveText.substr(0,1)),11,F2e)):ce("v-if",!0)],64)):ce("v-if",!0)],2)):ce("v-if",!0),W("div",{class:q(e.ns.e("action"))},[e.loading?(A(),ve(i,{key:0,class:q(e.ns.is("loading"))},{default:re(()=>[le(a)]),_:1},8,["class"])):ce("v-if",!0)],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(A(),B("span",{key:1,class:q([e.ns.e("label"),e.ns.em("label","right"),e.ns.is("active",e.checked)])},[e.activeIcon?(A(),ve(i,{key:0},{default:re(()=>[(A(),ve(tn(e.activeIcon)))]),_:1})):ce("v-if",!0),!e.activeIcon&&e.activeText?(A(),B("span",{key:1,"aria-hidden":!e.checked},Pe(e.activeText),9,L2e)):ce("v-if",!0)],2)):ce("v-if",!0)],10,R2e)}var z2e=We(D2e,[["render",B2e]]);const V2e=Wt(z2e),Gw=function(e){let t=e.target;for(;t&&t.tagName.toUpperCase()!=="HTML";){if(t.tagName.toUpperCase()==="TD")return t;t=t.parentNode}return null},QA=function(e){return e!==null&&typeof e=="object"},W2e=function(e,t,n,s,o){if(!t&&!s&&(!o||Array.isArray(o)&&!o.length))return e;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const r=s?null:function(a,l){return o?(Array.isArray(o)||(o=[o]),o.map(function(u){return typeof u=="string"?Ps(a,u):u(a,l,e)})):(t!=="$key"&&QA(a)&&"$value"in a&&(a=a.$value),[QA(a)?Ps(a,t):a])},i=function(a,l){if(s)return s(a.value,l.value);for(let u=0,c=a.key.length;u<c;u++){if(a.key[u]<l.key[u])return-1;if(a.key[u]>l.key[u])return 1}return 0};return e.map(function(a,l){return{value:a,index:l,key:r?r(a,l):null}}).sort(function(a,l){let u=i(a,l);return u||(u=a.index-l.index),u*+n}).map(a=>a.value)},F4=function(e,t){let n=null;return e.columns.forEach(function(s){s.id===t&&(n=s)}),n},H2e=function(e,t){let n=null;for(let s=0;s<e.columns.length;s++){const o=e.columns[s];if(o.columnKey===t){n=o;break}}return n},eD=function(e,t,n){const s=(t.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return s?F4(e,s[0]):null},mo=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof t=="string"){if(t.indexOf(".")<0)return`${e[t]}`;const n=t.split(".");let s=e;for(let o=0;o<n.length;o++)s=s[n[o]];return`${s}`}else if(typeof t=="function")return t.call(null,e)},xu=function(e,t){const n={};return(e||[]).forEach((s,o)=>{n[mo(s,t)]={row:s,index:o}}),n};function U2e(e,t){const n={};let s;for(s in e)n[s]=e[s];for(s in t)if(Ht(t,s)){const o=t[s];typeof o!="undefined"&&(n[s]=o)}return n}function fk(e){return e===""||e!==void 0&&(e=parseInt(e,10),Number.isNaN(e)&&(e="")),e}function L4(e){return e===""||e!==void 0&&(e=fk(e),Number.isNaN(e)&&(e=80)),e}function jv(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?parseInt(e,10):e:null}function j2e(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function Gv(e,t,n){let s=!1;const o=e.indexOf(t),r=o!==-1,i=()=>{e.push(t),s=!0},a=()=>{e.splice(o,1),s=!0};return typeof n=="boolean"?n&&!r?i():!n&&r&&a():r?a():i(),s}function G2e(e,t,n="children",s="hasChildren"){const o=i=>!(Array.isArray(i)&&i.length);function r(i,a,l){t(i,a,l),a.forEach(u=>{if(u[s]){t(u,null,l+1);return}const c=u[n];o(c)||r(u,c,l+1)})}e.forEach(i=>{if(i[s]){t(i,null,0);return}const a=i[n];o(a)||r(i,a,0)})}let xb;function K2e(e,t,n,s){function o(){const c=s==="light",d=document.createElement("div");return d.className=`el-popper ${c?"is-light":"is-dark"}`,d.innerHTML=t,d.style.zIndex=String(bs.nextZIndex()),document.body.appendChild(d),d}function r(){const c=document.createElement("div");return c.className="el-popper__arrow",c}function i(){a&&a.update()}xb=function c(){try{a&&a.destroy(),l&&document.body.removeChild(l),Kn(e,"mouseenter",i),Kn(e,"mouseleave",c)}catch{}};let a=null;const l=o(),u=r();return l.appendChild(u),a=GF(e,l,ut({modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"arrow",options:{element:u,padding:10}}]},n)),bn(e,"mouseenter",i),bn(e,"mouseleave",xb),a}const B4=(e,t,n,s)=>{let o=0,r=e;if(s){for(let l=0;l<e;l++)o+=s[l].colSpan;r=o+s[e].colSpan-1}else o=e;let i;const a=n.states.columns;switch(t){case"left":r<n.states.fixedLeafColumnsLength.value&&(i="left");break;case"right":o>=a.value.length-n.states.rightFixedLeafColumnsLength.value&&(i="right");break;default:r<n.states.fixedLeafColumnsLength.value?i="left":o>=a.value.length-n.states.rightFixedLeafColumnsLength.value&&(i="right")}return i?{direction:i,start:o,after:r}:{}},hk=(e,t,n,s,o)=>{const r=[],{direction:i,start:a}=B4(t,n,s,o);if(i){const l=i==="left";r.push(`${e}-fixed-column--${i}`),l&&a===s.states.fixedLeafColumnsLength.value-1?r.push("is-last-column"):!l&&a===s.states.columns.value.length-s.states.rightFixedLeafColumnsLength.value&&r.push("is-first-column")}return r};function tD(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const pk=(e,t,n,s)=>{const{direction:o,start:r=0}=B4(e,t,n,s);if(!o)return;const i={},a=o==="left",l=n.states.columns.value;return a?i.left=l.slice(0,e).reduce(tD,0):i.right=l.slice(r+1).reverse().reduce(tD,0),i},Nd=(e,t)=>{!e||Number.isNaN(e[t])||(e[t]=`${e[t]}px`)};function q2e(e){const t=Lt(),n=L(!1),s=L([]);return{updateExpandRows:()=>{const l=e.data.value||[],u=e.rowKey.value;if(n.value)s.value=l.slice();else if(u){const c=xu(s.value,u);s.value=l.reduce((d,f)=>{const h=mo(f,u);return c[h]&&d.push(f),d},[])}else s.value=[]},toggleRowExpansion:(l,u)=>{Gv(s.value,l,u)&&(t.emit("expand-change",l,s.value.slice()),t.store.scheduleLayout())},setExpandRowKeys:l=>{t.store.assertRowKey();const u=e.data.value||[],c=e.rowKey.value,d=xu(u,c);s.value=l.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:l=>{const u=e.rowKey.value;return u?!!xu(s.value,u)[mo(l,u)]:s.value.indexOf(l)!==-1},states:{expandRows:s,defaultExpandAll:n}}}function Y2e(e){const t=Lt(),n=L(null),s=L(null),o=u=>{t.store.assertRowKey(),n.value=u,i(u)},r=()=>{n.value=null},i=u=>{const{data:c,rowKey:d}=e;let f=null;d.value&&(f=(Ke(c)||[]).find(h=>mo(h,d.value)===u)),s.value=f};return{setCurrentRowKey:o,restoreCurrentRowKey:r,setCurrentRowByKey:i,updateCurrentRow:u=>{const c=s.value;if(u&&u!==c){s.value=u,t.emit("current-change",s.value,c);return}!u&&c&&(s.value=null,t.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=e.rowKey.value,c=e.data.value||[],d=s.value;if(c.indexOf(d)===-1&&d){if(u){const f=mo(d,u);i(f)}else s.value=null;s.value===null&&t.emit("current-change",null,d)}else n.value&&(i(n.value),r())},states:{_currentRowKey:n,currentRow:s}}}function X2e(e){const t=L([]),n=L({}),s=L(16),o=L(!1),r=L({}),i=L("hasChildren"),a=L("children"),l=Lt(),u=R(()=>{if(!e.rowKey.value)return{};const v=e.data.value||[];return d(v)}),c=R(()=>{const v=e.rowKey.value,b=Object.keys(r.value),$={};return b.length&&b.forEach(y=>{if(r.value[y].length){const w={children:[]};r.value[y].forEach(C=>{const x=mo(C,v);w.children.push(x),C[i.value]&&!$[x]&&($[x]={children:[]})}),$[y]=w}}),$}),d=v=>{const b=e.rowKey.value,$={};return G2e(v,(y,w,C)=>{const x=mo(y,b);Array.isArray(w)?$[x]={children:w.map(k=>mo(k,b)),level:C}:o.value&&($[x]={children:[],lazy:!0,level:C})},a.value,i.value),$},f=(v=!1,b=($=>($=l.store)==null?void 0:$.states.defaultExpandAll.value)())=>{var $;const y=u.value,w=c.value,C=Object.keys(y),x={};if(C.length){const k=Ke(n),I=[],S=(_,N)=>{if(v)return t.value?b||t.value.includes(N):!!(b||(_==null?void 0:_.expanded));{const O=b||t.value&&t.value.includes(N);return!!((_==null?void 0:_.expanded)||O)}};C.forEach(_=>{const N=k[_],O=ut({},y[_]);if(O.expanded=S(N,_),O.lazy){const{loaded:M=!1,loading:D=!1}=N||{};O.loaded=!!M,O.loading=!!D,I.push(_)}x[_]=O});const T=Object.keys(w);o.value&&T.length&&I.length&&T.forEach(_=>{const N=k[_],O=w[_].children;if(I.indexOf(_)!==-1){if(x[_].children.length!==0)throw new Error("[ElTable]children must be an empty array.");x[_].children=O}else{const{loaded:M=!1,loading:D=!1}=N||{};x[_]={lazy:!0,loaded:!!M,loading:!!D,expanded:S(N,_),children:O,level:""}}})}n.value=x,($=l.store)==null||$.updateTableScrollY()};Oe(()=>t.value,()=>{f(!0)}),Oe(()=>u.value,()=>{f()}),Oe(()=>c.value,()=>{f()});const h=v=>{t.value=v,f()},p=(v,b)=>{l.store.assertRowKey();const $=e.rowKey.value,y=mo(v,$),w=y&&n.value[y];if(y&&w&&"expanded"in w){const C=w.expanded;b=typeof b=="undefined"?!w.expanded:b,n.value[y].expanded=b,C!==b&&l.emit("expand-change",v,b),l.store.updateTableScrollY()}},g=v=>{l.store.assertRowKey();const b=e.rowKey.value,$=mo(v,b),y=n.value[$];o.value&&y&&"loaded"in y&&!y.loaded?m(v,$,y):p(v,void 0)},m=(v,b,$)=>{const{load:y}=l.props;y&&!n.value[b].loaded&&(n.value[b].loading=!0,y(v,$,w=>{if(!Array.isArray(w))throw new Error("[ElTable] data must be an array");n.value[b].loading=!1,n.value[b].loaded=!0,n.value[b].expanded=!0,w.length&&(r.value[b]=w),l.emit("expand-change",v,!0)}))};return{loadData:m,loadOrToggle:g,toggleTreeExpansion:p,updateTreeExpandKeys:h,updateTreeData:f,normalize:d,states:{expandRowKeys:t,treeData:n,indent:s,lazy:o,lazyTreeNodeMap:r,lazyColumnIdentifier:i,childrenColumnName:a}}}const Z2e=(e,t)=>{const n=t.sortingColumn;return!n||typeof n.sortable=="string"?e:W2e(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy)},Kv=e=>{const t=[];return e.forEach(n=>{n.children?t.push.apply(t,Kv(n.children)):t.push(n)}),t};function J2e(){var e;const t=Lt(),{size:n}=xo((e=t.proxy)==null?void 0:e.$props),s=L(null),o=L([]),r=L([]),i=L(!1),a=L([]),l=L([]),u=L([]),c=L([]),d=L([]),f=L([]),h=L([]),p=L([]),g=L(0),m=L(0),v=L(0),b=L(!1),$=L([]),y=L(!1),w=L(!1),C=L(null),x=L({}),k=L(null),I=L(null),S=L(null),T=L(null),_=L(null);Oe(o,()=>t.state&&M(!1),{deep:!0});const N=()=>{if(!s.value)throw new Error("[ElTable] prop row-key is required")},O=()=>{c.value=a.value.filter(Ne=>Ne.fixed===!0||Ne.fixed==="left"),d.value=a.value.filter(Ne=>Ne.fixed==="right"),c.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,c.value.unshift(a.value[0]));const Ye=a.value.filter(Ne=>!Ne.fixed);l.value=[].concat(c.value).concat(Ye).concat(d.value);const de=Kv(Ye),De=Kv(c.value),Ge=Kv(d.value);g.value=de.length,m.value=De.length,v.value=Ge.length,u.value=[].concat(De).concat(de).concat(Ge),i.value=c.value.length>0||d.value.length>0},M=(Ye,de=!1)=>{Ye&&O(),de?t.state.doLayout():t.state.debouncedUpdateLayout()},D=Ye=>$.value.indexOf(Ye)>-1,F=()=>{b.value=!1,$.value.length&&($.value=[],t.emit("selection-change",[]))},V=()=>{let Ye;if(s.value){Ye=[];const de=xu($.value,s.value),De=xu(o.value,s.value);for(const Ge in de)Ht(de,Ge)&&!De[Ge]&&Ye.push(de[Ge].row)}else Ye=$.value.filter(de=>o.value.indexOf(de)===-1);if(Ye.length){const de=$.value.filter(De=>Ye.indexOf(De)===-1);$.value=de,t.emit("selection-change",de.slice())}},U=(Ye,de=void 0,De=!0)=>{if(Gv($.value,Ye,de)){const Ne=($.value||[]).slice();De&&t.emit("select",Ne,Ye),t.emit("selection-change",Ne)}},ne=()=>{var Ye,de;const De=w.value?!b.value:!(b.value||$.value.length);b.value=De;let Ge=!1,Ne=0;const ct=(de=(Ye=t==null?void 0:t.store)==null?void 0:Ye.states)==null?void 0:de.rowKey.value;o.value.forEach((wt,on)=>{const cn=on+Ne;C.value?C.value.call(null,wt,cn)&&Gv($.value,wt,De)&&(Ge=!0):Gv($.value,wt,De)&&(Ge=!0),Ne+=he(mo(wt,ct))}),Ge&&t.emit("selection-change",$.value?$.value.slice():[]),t.emit("select-all",$.value)},be=()=>{const Ye=xu($.value,s.value);o.value.forEach(de=>{const De=mo(de,s.value),Ge=Ye[De];Ge&&($.value[Ge.index]=de)})},te=()=>{var Ye,de,De;if(((Ye=o.value)==null?void 0:Ye.length)===0){b.value=!1;return}let Ge;s.value&&(Ge=xu($.value,s.value));const Ne=function(cn){return Ge?!!Ge[mo(cn,s.value)]:$.value.indexOf(cn)!==-1};let ct=!0,wt=0,on=0;for(let cn=0,Kt=(o.value||[]).length;cn<Kt;cn++){const Ln=(De=(de=t==null?void 0:t.store)==null?void 0:de.states)==null?void 0:De.rowKey.value,ur=cn+on,ii=o.value[cn],ze=C.value&&C.value.call(null,ii,ur);if(Ne(ii))wt++;else if(!C.value||ze){ct=!1;break}on+=he(mo(ii,Ln))}wt===0&&(ct=!1),b.value=ct},he=Ye=>{var de;if(!t||!t.store)return 0;const{treeData:De}=t.store.states;let Ge=0;const Ne=(de=De.value[Ye])==null?void 0:de.children;return Ne&&(Ge+=Ne.length,Ne.forEach(ct=>{Ge+=he(ct)})),Ge},oe=(Ye,de)=>{Array.isArray(Ye)||(Ye=[Ye]);const De={};return Ye.forEach(Ge=>{x.value[Ge.id]=de,De[Ge.columnKey||Ge.id]=de}),De},G=(Ye,de,De)=>{I.value&&I.value!==Ye&&(I.value.order=null),I.value=Ye,S.value=de,T.value=De},Y=()=>{let Ye=Ke(r);Object.keys(x.value).forEach(de=>{const De=x.value[de];if(!De||De.length===0)return;const Ge=F4({columns:u.value},de);Ge&&Ge.filterMethod&&(Ye=Ye.filter(Ne=>De.some(ct=>Ge.filterMethod.call(null,ct,Ne,Ge))))}),k.value=Ye},X=()=>{o.value=Z2e(k.value,{sortingColumn:I.value,sortProp:S.value,sortOrder:T.value})},ae=(Ye=void 0)=>{Ye&&Ye.filter||Y(),X()},Se=Ye=>{const{tableHeader:de,fixedTableHeader:De,rightFixedTableHeader:Ge}=t.refs;let Ne={};de&&(Ne=Object.assign(Ne,de.filterPanels)),De&&(Ne=Object.assign(Ne,De.filterPanels)),Ge&&(Ne=Object.assign(Ne,Ge.filterPanels));const ct=Object.keys(Ne);if(!!ct.length)if(typeof Ye=="string"&&(Ye=[Ye]),Array.isArray(Ye)){const wt=Ye.map(on=>H2e({columns:u.value},on));ct.forEach(on=>{const cn=wt.find(Kt=>Kt.id===on);cn&&(cn.filteredValue=[])}),t.store.commit("filterChange",{column:wt,values:[],silent:!0,multi:!0})}else ct.forEach(wt=>{const on=u.value.find(cn=>cn.id===wt);on&&(on.filteredValue=[])}),x.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},Le=()=>{!I.value||(G(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Be,toggleRowExpansion:Fe,updateExpandRows:j,states:Q,isRowExpanded:H}=q2e({data:o,rowKey:s}),{updateTreeExpandKeys:se,toggleTreeExpansion:we,updateTreeData:J,loadOrToggle:_e,states:Ie}=X2e({data:o,rowKey:s}),{updateCurrentRowData:fe,updateCurrentRow:Te,setCurrentRowKey:rt,states:Xe}=Y2e({data:o,rowKey:s});return{assertRowKey:N,updateColumns:O,scheduleLayout:M,isSelected:D,clearSelection:F,cleanSelection:V,toggleRowSelection:U,_toggleAllSelection:ne,toggleAllSelection:null,updateSelectionByRowKey:be,updateAllSelected:te,updateFilters:oe,updateCurrentRow:Te,updateSort:G,execFilter:Y,execSort:X,execQuery:ae,clearFilter:Se,clearSort:Le,toggleRowExpansion:Fe,setExpandRowKeysAdapter:Ye=>{Be(Ye),se(Ye)},setCurrentRowKey:rt,toggleRowExpansionAdapter:(Ye,de)=>{u.value.some(({type:Ge})=>Ge==="expand")?Fe(Ye,de):we(Ye,de)},isRowExpanded:H,updateExpandRows:j,updateCurrentRowData:fe,loadOrToggle:_e,updateTreeData:J,states:ut(ut(ut({tableSize:n,rowKey:s,data:o,_data:r,isComplex:i,_columns:a,originColumns:l,columns:u,fixedColumns:c,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,leafColumnsLength:g,fixedLeafColumnsLength:m,rightFixedLeafColumnsLength:v,isAllSelected:b,selection:$,reserveSelection:y,selectOnIndeterminate:w,selectable:C,filters:x,filteredData:k,sortingColumn:I,sortProp:S,sortOrder:T,hoverRow:_},Q),Ie),Xe)}}function NC(e,t){return e.map(n=>{var s;return n.id===t.id?t:(((s=n.children)==null?void 0:s.length)&&(n.children=NC(n.children,t)),n)})}function z4(e){e.forEach(t=>{var n,s;t.no=(n=t.getColumnIndex)==null?void 0:n.call(t),((s=t.children)==null?void 0:s.length)&&z4(t.children)}),e.sort((t,n)=>t.no-n.no)}function Q2e(){const e=Lt(),t=J2e(),n=At("table"),s={setData(i,a){const l=Ke(i._data)!==a;i.data.value=a,i._data.value=a,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),Ke(i.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):l?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(i,a,l){const u=Ke(i._columns);let c=[];l?(l&&!l.children&&(l.children=[]),l.children.push(a),c=NC(u,l)):(u.push(a),c=u),z4(c),i._columns.value=c,a.type==="selection"&&(i.selectable.value=a.selectable,i.reserveSelection.value=a.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},removeColumn(i,a,l){const u=Ke(i._columns)||[];if(l)l.children.splice(l.children.findIndex(c=>c.id===a.id),1),l.children.length===0&&delete l.children,i._columns.value=NC(u,l);else{const c=u.indexOf(a);c>-1&&(u.splice(c,1),i._columns.value=u)}e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(i,a){const{prop:l,order:u,init:c}=a;if(l){const d=Ke(i.columns).find(f=>f.property===l);d&&(d.order=u,e.store.updateSort(d,l,u),e.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(i,a){const{sortingColumn:l,sortProp:u,sortOrder:c}=i;Ke(c)===null&&(i.sortingColumn.value=null,i.sortProp.value=null);const d={filter:!0};e.store.execQuery(d),(!a||!(a.silent||a.init))&&e.emit("sort-change",{column:Ke(l),prop:Ke(u),order:Ke(c)}),e.store.updateTableScrollY()},filterChange(i,a){const{column:l,values:u,silent:c}=a,d=e.store.updateFilters(l,u);e.store.execQuery(),c||e.emit("filter-change",d),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(i,a){e.store.toggleRowSelection(a),e.store.updateAllSelected()},setHoverRow(i,a){i.hoverRow.value=a},setCurrentRow(i,a){e.store.updateCurrentRow(a)}},o=function(i,...a){const l=e.store.mutations;if(l[i])l[i].apply(e,[e.store.states].concat(a));else throw new Error(`Action not found: ${i}`)},r=function(){dt(()=>e.layout.updateScrollY.apply(e.layout))};return zt(ut({ns:n},t),{mutations:s,commit:o,updateTableScrollY:r})}const Th={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data",["treeProps.hasChildren"]:{key:"lazyColumnIdentifier",default:"hasChildren"},["treeProps.children"]:{key:"childrenColumnName",default:"children"}};function eke(e,t){if(!e)throw new Error("Table is required.");const n=Q2e();return n.toggleAllSelection=tr(n._toggleAllSelection,10),Object.keys(Th).forEach(s=>{V4(W4(t,s),s,n)}),tke(n,t),n}function tke(e,t){Object.keys(Th).forEach(n=>{Oe(()=>W4(t,n),s=>{V4(s,n,e)})})}function V4(e,t,n){let s=e,o=Th[t];typeof Th[t]=="object"&&(o=o.key,s=s||Th[t].default),n.states[o].value=s}function W4(e,t){if(t.includes(".")){const n=t.split(".");let s=e;return n.forEach(o=>{s=s[o]}),s}else return e[t]}class nke{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=L(null),this.scrollX=L(!1),this.scrollY=L(!1),this.bodyWidth=L(null),this.fixedWidth=L(null),this.rightFixedWidth=L(null),this.tableHeight=L(null),this.headerHeight=L(44),this.appendHeight=L(0),this.footerHeight=L(44),this.viewportHeight=L(null),this.bodyHeight=L(null),this.bodyScrollHeight=L(0),this.fixedBodyHeight=L(null),this.gutterWidth=0;for(const n in t)Ht(t,n)&&(ms(this[n])?this[n].value=t[n]:this[n]=t[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.bodyWrapper;if(this.table.vnode.el&&n){let s=!0;const o=this.scrollY.value;return this.bodyHeight.value===null?s=!1:s=n.scrollHeight>this.bodyHeight.value,this.scrollY.value=s,o!==s}return!1}setHeight(t,n="height"){if(!Yt)return;const s=this.table.vnode.el;if(t=jv(t),this.height.value=Number(t),!s&&(t||t===0))return dt(()=>this.setHeight(t,n));typeof t=="number"?(s.style[n]=`${t}px`,this.updateElsHeight()):typeof t=="string"&&(s.style[n]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(s=>{s.isColumnGroup?t.push.apply(t,s.columns):t.push(s)}),t}updateElsHeight(){var t,n;if(!this.table.$ready)return dt(()=>this.updateElsHeight());const{headerWrapper:s,appendWrapper:o,footerWrapper:r,tableHeader:i,tableBody:a}=this.table.refs;if(this.appendHeight.value=o?o.offsetHeight:0,this.showHeader&&!s)return;const l=i?i.$el:null,u=this.headerDisplayNone(l),c=this.headerHeight.value=this.showHeader?s.offsetHeight:0;if(this.showHeader&&!u&&s.offsetWidth>0&&(this.table.store.states.columns.value||[]).length>0&&c<2)return dt(()=>this.updateElsHeight());const d=this.tableHeight.value=(n=(t=this.table)==null?void 0:t.vnode.el)==null?void 0:n.clientHeight,f=this.footerHeight.value=r?r.offsetHeight:0;this.height.value!==null&&(this.bodyHeight.value===null&&requestAnimationFrame(()=>this.updateElsHeight()),this.bodyHeight.value=d-c-f+(r?1:0),this.bodyScrollHeight.value=a==null?void 0:a.$el.scrollHeight),this.fixedBodyHeight.value=this.scrollX.value?this.bodyHeight.value-this.gutterWidth:this.bodyHeight.value,this.viewportHeight.value=this.scrollX.value?d-this.gutterWidth:d,this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let n=t;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!Yt)return;const t=this.fit,n=this.table.vnode.el.clientWidth;let s=0;const o=this.getFlattenColumns(),r=o.filter(l=>typeof l.width!="number");if(o.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),r.length>0&&t){o.forEach(u=>{s+=Number(u.width||u.minWidth||80)});const l=this.scrollY.value?this.gutterWidth:0;if(s<=n-l){this.scrollX.value=!1;const u=n-l-s;if(r.length===1)r[0].realWidth=Number(r[0].minWidth||80)+u;else{const c=r.reduce((h,p)=>h+Number(p.minWidth||80),0),d=u/c;let f=0;r.forEach((h,p)=>{if(p===0)return;const g=Math.floor(Number(h.minWidth||80)*d);f+=g,h.realWidth=Number(h.minWidth||80)+g}),r[0].realWidth=Number(r[0].minWidth||80)+u-f}}else this.scrollX.value=!0,r.forEach(function(u){u.realWidth=Number(u.minWidth)});this.bodyWidth.value=Math.max(s,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else o.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),s+=l.realWidth}),this.scrollX.value=s>n,this.bodyWidth.value=s;const i=this.store.states.fixedColumns.value;if(i.length>0){let l=0;i.forEach(function(u){l+=Number(u.realWidth||u.width)}),this.fixedWidth.value=l}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let l=0;a.forEach(function(u){l+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const n=this.observers.indexOf(t);n!==-1&&this.observers.splice(n,1)}notifyObservers(t){this.observers.forEach(s=>{var o,r;switch(t){case"columns":(o=s.state)==null||o.onColumnsChange(this);break;case"scrollable":(r=s.state)==null||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:ske}=ki,oke=ge({name:"ElTableFilterPanel",components:{ElCheckbox:ki,ElCheckboxGroup:ske,ElScrollbar:Oa,ElTooltip:ar,ElIcon:Ot,ArrowDown:dc,ArrowUp:Fp},directives:{ClickOutside:El},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const t=Lt(),{t:n}=In(),s=At("table-filter"),o=t==null?void 0:t.parent;o.filterPanels.value[e.column.id]||(o.filterPanels.value[e.column.id]=t);const r=L(!1),i=L(null),a=R(()=>e.column&&e.column.filters),l=R({get:()=>{var y;return(((y=e.column)==null?void 0:y.filteredValue)||[])[0]},set:y=>{u.value&&(typeof y!="undefined"&&y!==null?u.value.splice(0,1,y):u.value.splice(0,1))}}),u=R({get(){return e.column?e.column.filteredValue||[]:[]},set(y){e.column&&e.upDataColumn("filteredValue",y)}}),c=R(()=>e.column?e.column.filterMultiple:!0),d=y=>y.value===l.value,f=()=>{r.value=!1},h=y=>{y.stopPropagation(),r.value=!r.value},p=()=>{r.value=!1},g=()=>{b(u.value),f()},m=()=>{u.value=[],b(u.value),f()},v=y=>{l.value=y,b(typeof y!="undefined"&&y!==null?u.value:[]),f()},b=y=>{e.store.commit("filterChange",{column:e.column,values:y}),e.store.updateAllSelected()};Oe(r,y=>{e.column&&e.upDataColumn("filterOpened",y)},{immediate:!0});const $=R(()=>{var y,w;return(w=(y=i.value)==null?void 0:y.popperRef)==null?void 0:w.contentRef});return{tooltipVisible:r,multiple:c,filteredValue:u,filterValue:l,filters:a,handleConfirm:g,handleReset:m,handleSelect:v,isActive:d,t:n,ns:s,showFilterPanel:h,hideFilterPanel:p,popperPaneRef:$,tooltip:i}}}),rke={key:0},ike=["disabled"],ake=["label","onClick"];function lke(e,t,n,s,o,r){const i=ie("el-checkbox"),a=ie("el-checkbox-group"),l=ie("el-scrollbar"),u=ie("arrow-up"),c=ie("arrow-down"),d=ie("el-icon"),f=ie("el-tooltip"),h=Vo("click-outside");return A(),ve(f,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[5]||(t[5]=p=>e.tooltipVisible=p),offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,"append-to-body":"",effect:"light",pure:"","popper-class":e.ns.b(),persistent:""},{content:re(()=>[e.multiple?(A(),B("div",rke,[W("div",{class:q(e.ns.e("content"))},[le(l,{"wrap-class":e.ns.e("wrap")},{default:re(()=>[le(a,{modelValue:e.filteredValue,"onUpdate:modelValue":t[0]||(t[0]=p=>e.filteredValue=p),class:q(e.ns.e("checkbox-group"))},{default:re(()=>[(A(!0),B(at,null,Zt(e.filters,p=>(A(),ve(i,{key:p.value,label:p.value},{default:re(()=>[qt(Pe(p.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),W("div",{class:q(e.ns.e("bottom"))},[W("button",{class:q({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:t[1]||(t[1]=(...p)=>e.handleConfirm&&e.handleConfirm(...p))},Pe(e.t("el.table.confirmFilter")),11,ike),W("button",{type:"button",onClick:t[2]||(t[2]=(...p)=>e.handleReset&&e.handleReset(...p))},Pe(e.t("el.table.resetFilter")),1)],2)])):(A(),B("ul",{key:1,class:q(e.ns.e("list"))},[W("li",{class:q([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:t[3]||(t[3]=p=>e.handleSelect(null))},Pe(e.t("el.table.clearFilter")),3),(A(!0),B(at,null,Zt(e.filters,p=>(A(),B("li",{key:p.value,class:q([e.ns.e("list-item"),e.ns.is("active",e.isActive(p))]),label:p.value,onClick:g=>e.handleSelect(p.value)},Pe(p.text),11,ake))),128))],2))]),default:re(()=>[$t((A(),B("span",{class:q([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:t[4]||(t[4]=(...p)=>e.showFilterPanel&&e.showFilterPanel(...p))},[le(d,null,{default:re(()=>[e.column.filterOpened?(A(),ve(u,{key:0})):(A(),ve(c,{key:1}))]),_:1})],2)),[[h,e.hideFilterPanel,e.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var uke=We(oke,[["render",lke]]);function H4(e){const t=Lt();Ap(()=>{n.value.addObserver(t)}),Rt(()=>{s(n.value),o(n.value)}),_i(()=>{s(n.value),o(n.value)}),Dp(()=>{n.value.removeObserver(t)});const n=R(()=>{const r=e.layout;if(!r)throw new Error("Can not find table layout.");return r}),s=r=>{var i;const a=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=r.getFlattenColumns(),u={};l.forEach(c=>{u[c.id]=c});for(let c=0,d=a.length;c<d;c++){const f=a[c],h=f.getAttribute("name"),p=u[h];p&&f.setAttribute("width",p.realWidth||p.width)}},o=r=>{var i,a;const l=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,d=l.length;c<d;c++)l[c].setAttribute("width",r.scrollY.value?r.gutterWidth:"0");const u=((a=e.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let c=0,d=u.length;c<d;c++){const f=u[c];f.style.width=r.scrollY.value?`${r.gutterWidth}px`:"0",f.style.display=r.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:s,onScrollableChange:o}}function gk(e){return He("colgroup",{},[...e.map(t=>He("col",{name:t.id,key:t.id}))])}const na=Symbol("ElTable");function cke(e,t){const n=Lt(),s=Ze(na),o=g=>{g.stopPropagation()},r=(g,m)=>{!m.filters&&m.sortable?p(g,m,!1):m.filterable&&!m.sortable&&o(g),s==null||s.emit("header-click",m,g)},i=(g,m)=>{s==null||s.emit("header-contextmenu",m,g)},a=L(null),l=L(!1),u=L({}),c=(g,m)=>{if(!!Yt&&!(m.children&&m.children.length>0)&&a.value&&e.border){l.value=!0;const v=s;t("set-drag-visible",!0);const $=(v==null?void 0:v.vnode.el).getBoundingClientRect().left,y=n.vnode.el.querySelector(`th.${m.id}`),w=y.getBoundingClientRect(),C=w.left-$+30;Xo(y,"noclick"),u.value={startMouseLeft:g.clientX,startLeft:w.right-$,startColumnLeft:w.left-$,tableLeft:$};const x=v==null?void 0:v.refs.resizeProxy;x.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const k=S=>{const T=S.clientX-u.value.startMouseLeft,_=u.value.startLeft+T;x.style.left=`${Math.max(C,_)}px`},I=()=>{if(l.value){const{startColumnLeft:S,startLeft:T}=u.value,N=parseInt(x.style.left,10)-S;m.width=m.realWidth=N,v==null||v.emit("header-dragend",m.width,T-S,m,g),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,u.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",I),document.onselectstart=null,document.ondragstart=null,setTimeout(function(){yo(y,"noclick")},0)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",I)}},d=(g,m)=>{if(m.children&&m.children.length>0)return;let v=g.target;for(;v&&v.tagName!=="TH";)v=v.parentNode;if(!(!m||!m.resizable)&&!l.value&&e.border){const b=v.getBoundingClientRect(),$=document.body.style;b.width>12&&b.right-g.pageX<8?($.cursor="col-resize",bi(v,"is-sortable")&&(v.style.cursor="col-resize"),a.value=m):l.value||($.cursor="",bi(v,"is-sortable")&&(v.style.cursor="pointer"),a.value=null)}},f=()=>{!Yt||(document.body.style.cursor="")},h=({order:g,sortOrders:m})=>{if(g==="")return m[0];const v=m.indexOf(g||null);return m[v>m.length-2?0:v+1]},p=(g,m,v)=>{g.stopPropagation();const b=m.order===v?null:v||h(m);let $=g.target;for(;$&&$.tagName!=="TH";)$=$.parentNode;if($&&$.tagName==="TH"&&bi($,"noclick")){yo($,"noclick");return}if(!m.sortable)return;const y=e.store.states;let w=y.sortProp.value,C;const x=y.sortingColumn.value;(x!==m||x===m&&x.order===null)&&(x&&(x.order=null),y.sortingColumn.value=m,w=m.property),b?C=m.order=b:C=m.order=null,y.sortProp.value=w,y.sortOrder.value=C,s==null||s.store.commit("changeSortCondition")};return{handleHeaderClick:r,handleHeaderContextMenu:i,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:o}}function dke(e){const t=Ze(na),n=At("table");return{getHeaderRowStyle:a=>{const l=t==null?void 0:t.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:a}):l},getHeaderRowClass:a=>{const l=[],u=t==null?void 0:t.props.headerRowClassName;return typeof u=="string"?l.push(u):typeof u=="function"&&l.push(u.call(null,{rowIndex:a})),l.join(" ")},getHeaderCellStyle:(a,l,u,c)=>{var d;let f=(d=t==null?void 0:t.props.headerCellStyle)!=null?d:{};typeof f=="function"&&(f=f.call(null,{rowIndex:a,columnIndex:l,row:u,column:c}));const h=pk(l,c.fixed,e.store,u);return Nd(h,"left"),Nd(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(a,l,u,c)=>{const d=c.isSubColumn?[]:hk(n.b(),l,c.fixed,e.store,u),f=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...d];c.children||f.push("is-leaf"),c.sortable&&f.push("is-sortable");const h=t==null?void 0:t.props.headerCellClassName;return typeof h=="string"?f.push(h):typeof h=="function"&&f.push(h.call(null,{rowIndex:a,columnIndex:l,row:u,column:c})),f.push(n.e("cell")),f.join(" ")}}}const U4=e=>{const t=[];return e.forEach(n=>{n.children?(t.push(n),t.push.apply(t,U4(n.children))):t.push(n)}),t},fke=e=>{let t=1;const n=(r,i)=>{if(i&&(r.level=i.level+1,t<r.level&&(t=r.level)),r.children){let a=0;r.children.forEach(l=>{n(l,r),a+=l.colSpan}),r.colSpan=a}else r.colSpan=1};e.forEach(r=>{r.level=1,n(r,void 0)});const s=[];for(let r=0;r<t;r++)s.push([]);return U4(e).forEach(r=>{r.children?(r.rowSpan=1,r.children.forEach(i=>i.isSubColumn=!0)):r.rowSpan=t-r.level+1,s[r.level-1].push(r)}),s};function hke(e){const t=Ze(na),n=R(()=>fke(e.store.states.originColumns.value));return{isGroup:R(()=>{const r=n.value.length>1;return r&&t&&(t.state.isGroup.value=!0),r}),toggleAllSelection:r=>{r.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:n}}var pke=ge({name:"ElTableHeader",components:{ElCheckbox:ki},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:t}){const n=Lt(),s=Ze(na),o=At("table"),r=s==null?void 0:s.store.states,i=L({}),{onColumnsChange:a,onScrollableChange:l}=H4(s);Rt(()=>{dt(()=>{const{prop:x,order:k}=e.defaultSort,I=!0;s==null||s.store.commit("sort",{prop:x,order:k,init:I})})});const{handleHeaderClick:u,handleHeaderContextMenu:c,handleMouseDown:d,handleMouseMove:f,handleMouseOut:h,handleSortClick:p,handleFilterClick:g}=cke(e,t),{getHeaderRowStyle:m,getHeaderRowClass:v,getHeaderCellStyle:b,getHeaderCellClass:$}=dke(e),{isGroup:y,toggleAllSelection:w,columnRows:C}=hke(e);return n.state={onColumnsChange:a,onScrollableChange:l},n.filterPanels=i,{ns:o,columns:r.columns,filterPanels:i,onColumnsChange:a,onScrollableChange:l,columnRows:C,getHeaderRowClass:v,getHeaderRowStyle:m,getHeaderCellClass:$,getHeaderCellStyle:b,handleHeaderClick:u,handleHeaderContextMenu:c,handleMouseDown:d,handleMouseMove:f,handleMouseOut:h,handleSortClick:p,handleFilterClick:g,isGroup:y,toggleAllSelection:w}},render(){const{ns:e,columns:t,isGroup:n,columnRows:s,getHeaderCellStyle:o,getHeaderCellClass:r,getHeaderRowClass:i,getHeaderRowStyle:a,handleHeaderClick:l,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:d,handleSortClick:f,handleMouseOut:h,store:p,$parent:g}=this;let m=1;return He("table",{border:"0",cellpadding:"0",cellspacing:"0",class:e.e("header")},[gk(t),He("thead",{class:{[e.is("group")]:n}},s.map((v,b)=>He("tr",{class:i(b),key:b,style:a(b)},v.map(($,y)=>($.rowSpan>m&&(m=$.rowSpan),He("th",{class:r(b,y,v,$),colspan:$.colSpan,key:`${$.id}-thead`,rowSpan:$.rowSpan,style:o(b,y,v,$),onClick:w=>l(w,$),onContextmenu:w=>u(w,$),onMousedown:w=>c(w,$),onMousemove:w=>d(w,$),onMouseout:h},[He("div",{class:["cell",$.filteredValue&&$.filteredValue.length>0?"highlight":"",$.labelClassName]},[$.renderHeader?$.renderHeader({column:$,$index:y,store:p,_self:g}):$.label,$.sortable&&He("span",{onClick:w=>f(w,$),class:"caret-wrapper"},[He("i",{onClick:w=>f(w,$,"ascending"),class:"sort-caret ascending"}),He("i",{onClick:w=>f(w,$,"descending"),class:"sort-caret descending"})]),$.filterable&&He(uke,{store:g.store,placement:$.filterPlacement||"bottom-start",column:$,upDataColumn:(w,C)=>{$[w]=C}})])]))))))])}});function gke(e){const t=Ze(na),n=L(""),s=L(He("div")),o=(f,h,p)=>{var g;const m=t,v=Gw(f);let b;const $=(g=m==null?void 0:m.vnode.el)==null?void 0:g.dataset.prefix;v&&(b=eD({columns:e.store.states.columns.value},v,$),b&&(m==null||m.emit(`cell-${p}`,h,b,v,f))),m==null||m.emit(`row-${p}`,h,b,f)},r=(f,h)=>{o(f,h,"dblclick")},i=(f,h)=>{e.store.commit("setCurrentRow",h),o(f,h,"click")},a=(f,h)=>{o(f,h,"contextmenu")},l=tr(function(f){e.store.commit("setHoverRow",f)},30),u=tr(function(){e.store.commit("setHoverRow",null)},30);return{handleDoubleClick:r,handleClick:i,handleContextMenu:a,handleMouseEnter:l,handleMouseLeave:u,handleCellMouseEnter:(f,h)=>{var p;const g=t,m=Gw(f),v=(p=g==null?void 0:g.vnode.el)==null?void 0:p.dataset.prefix;if(m){const C=eD({columns:e.store.states.columns.value},m,v),x=g.hoverState={cell:m,column:C,row:h};g==null||g.emit("cell-mouse-enter",x.row,x.column,x.cell,f)}const b=f.target.querySelector(".cell");if(!(bi(b,`${v}-tooltip`)&&b.childNodes.length))return;const $=document.createRange();$.setStart(b,0),$.setEnd(b,b.childNodes.length);const y=$.getBoundingClientRect().width,w=(parseInt(Fr(b,"paddingLeft"),10)||0)+(parseInt(Fr(b,"paddingRight"),10)||0);(y+w>b.offsetWidth||b.scrollWidth>b.offsetWidth)&&K2e(m,m.innerText||m.textContent,{placement:"top",strategy:"fixed"},h.tooltipEffect)},handleCellMouseLeave:f=>{if(!Gw(f))return;const p=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",p==null?void 0:p.row,p==null?void 0:p.column,p==null?void 0:p.cell,f)},tooltipContent:n,tooltipTrigger:s}}function mke(e){const t=Ze(na),n=At("table");return{getRowStyle:(u,c)=>{const d=t==null?void 0:t.props.rowStyle;return typeof d=="function"?d.call(null,{row:u,rowIndex:c}):d||null},getRowClass:(u,c)=>{const d=[n.e("row")];(t==null?void 0:t.props.highlightCurrentRow)&&u===e.store.states.currentRow.value&&d.push("current-row"),e.stripe&&c%2===1&&d.push(n.em("row","striped"));const f=t==null?void 0:t.props.rowClassName;return typeof f=="string"?d.push(f):typeof f=="function"&&d.push(f.call(null,{row:u,rowIndex:c})),e.store.states.expandRows.value.indexOf(u)>-1&&d.push("expanded"),d},getCellStyle:(u,c,d,f)=>{const h=t==null?void 0:t.props.cellStyle;let p=h!=null?h:{};typeof h=="function"&&(p=h.call(null,{rowIndex:u,columnIndex:c,row:d,column:f}));const g=pk(c,e==null?void 0:e.fixed,e.store);return Nd(g,"left"),Nd(g,"right"),Object.assign({},p,g)},getCellClass:(u,c,d,f)=>{const h=f.isSubColumn?[]:hk(n.b(),c,e==null?void 0:e.fixed,e.store),p=[f.id,f.align,f.className,...h],g=t==null?void 0:t.props.cellClassName;return typeof g=="string"?p.push(g):typeof g=="function"&&p.push(g.call(null,{rowIndex:u,columnIndex:c,row:d,column:f})),p.push(n.e("cell")),p.join(" ")},getSpan:(u,c,d,f)=>{let h=1,p=1;const g=t==null?void 0:t.props.spanMethod;if(typeof g=="function"){const m=g({row:u,column:c,rowIndex:d,columnIndex:f});Array.isArray(m)?(h=m[0],p=m[1]):typeof m=="object"&&(h=m.rowspan,p=m.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(u,c,d)=>{if(c<1)return u[d].realWidth;const f=u.map(({realWidth:h,width:p})=>h||p).slice(d,d+c);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}function vke(e){const t=Ze(na),{handleDoubleClick:n,handleClick:s,handleContextMenu:o,handleMouseEnter:r,handleMouseLeave:i,handleCellMouseEnter:a,handleCellMouseLeave:l,tooltipContent:u,tooltipTrigger:c}=gke(e),{getRowStyle:d,getRowClass:f,getCellStyle:h,getCellClass:p,getSpan:g,getColspanRealWidth:m}=mke(e),v=R(()=>e.store.states.columns.value.findIndex(({type:C})=>C==="default")),b=(C,x)=>{const k=t.props.rowKey;return k?mo(C,k):x},$=(C,x,k)=>{const{tooltipEffect:I,store:S}=e,{indent:T,columns:_}=S.states,N=f(C,x);let O=!0;return k&&(N.push(`el-table__row--level-${k.level}`),O=k.display),He("tr",{style:[O?null:{display:"none"},d(C,x)],class:N,key:b(C,x),onDblclick:D=>n(D,C),onClick:D=>s(D,C),onContextmenu:D=>o(D,C),onMouseenter:()=>r(x),onMouseleave:i},_.value.map((D,F)=>{const{rowspan:V,colspan:U}=g(C,D,x,F);if(!V||!U)return null;const ne=ut({},D);ne.realWidth=m(_.value,U,F);const be={store:e.store,_self:e.context||t,column:ne,row:C,$index:x};F===v.value&&k&&(be.treeNode={indent:k.level*T.value,level:k.level},typeof k.expanded=="boolean"&&(be.treeNode.expanded=k.expanded,"loading"in k&&(be.treeNode.loading=k.loading),"noLazyChildren"in k&&(be.treeNode.noLazyChildren=k.noLazyChildren)));const te=`${x},${F}`,he=ne.columnKey||ne.rawColumnKey||"",oe=y(F,D,be);return He("td",{style:h(x,F,C,D),class:p(x,F,C,D),key:`${he}${te}`,rowspan:V,colspan:U,onMouseenter:G=>a(G,zt(ut({},C),{tooltipEffect:I})),onMouseleave:l},[oe])}))},y=(C,x,k)=>x.renderCell(k);return{wrappedRowRender:(C,x)=>{const k=e.store,{isRowExpanded:I,assertRowKey:S}=k,{treeData:T,lazyTreeNodeMap:_,childrenColumnName:N,rowKey:O}=k.states;if(k.states.columns.value.some(({type:D})=>D==="expand")&&I(C)){const D=t.renderExpanded,F=$(C,x,void 0);return D?[[F,He("tr",{key:`expanded-row__${F.key}`},[He("td",{colspan:k.states.columns.value.length,class:"el-table__cell el-table__expanded-cell"},[D({row:C,$index:x,store:k})])])]]:(console.error("[Element Error]renderExpanded is required."),F)}else if(Object.keys(T.value).length){S();const D=mo(C,O.value);let F=T.value[D],V=null;F&&(V={expanded:F.expanded,level:F.level,display:!0},typeof F.lazy=="boolean"&&(typeof F.loaded=="boolean"&&F.loaded&&(V.noLazyChildren=!(F.children&&F.children.length)),V.loading=F.loading));const U=[$(C,x,V)];if(F){let ne=0;const be=(he,oe)=>{!(he&&he.length&&oe)||he.forEach(G=>{const Y={display:oe.display&&oe.expanded,level:oe.level+1,expanded:!1,noLazyChildren:!1,loading:!1},X=mo(G,O.value);if(X==null)throw new Error("For nested data item, row-key is required.");if(F=ut({},T.value[X]),F&&(Y.expanded=F.expanded,F.level=F.level||Y.level,F.display=!!(F.expanded&&Y.display),typeof F.lazy=="boolean"&&(typeof F.loaded=="boolean"&&F.loaded&&(Y.noLazyChildren=!(F.children&&F.children.length)),Y.loading=F.loading)),ne++,U.push($(G,x+ne,Y)),F){const ae=_.value[X]||G[N.value];be(ae,F)}})};F.display=!0;const te=_.value[D]||C[N.value];be(te,F)}return U}else return $(C,x,void 0)},tooltipContent:u,tooltipTrigger:c}}const bke={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var yke=ge({name:"ElTableBody",props:bke,setup(e){const t=Lt(),n=Ze(na),s=At("table"),{wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}=vke(e),{onColumnsChange:a,onScrollableChange:l}=H4(n);return Oe(e.store.states.hoverRow,(u,c)=>{if(!e.store.states.isComplex.value||!Yt)return;let d=window.requestAnimationFrame;d||(d=f=>window.setTimeout(f,16)),d(()=>{var f;const h=(f=t==null?void 0:t.vnode.el)==null?void 0:f.querySelectorAll(`.${s.e("row")}`),p=h[c],g=h[u];p&&yo(p,"hover-row"),g&&Xo(g,"hover-row")})}),Dp(()=>{var u;(u=xb)==null||u()}),_i(()=>{var u;(u=xb)==null||u()}),{ns:s,onColumnsChange:a,onScrollableChange:l,wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}},render(){const{ns:e,wrappedRowRender:t,store:n}=this,s=n.states.data.value||[],o=n.states.columns.value;return He("table",{class:e.e("body"),cellspacing:"0",cellpadding:"0",border:"0"},[gk(o),He("tbody",{},[s.reduce((r,i)=>r.concat(t(i,r.length)),[])])])}});function wke(){const e=Ze(na),t=e==null?void 0:e.store,n=R(()=>t.states.fixedLeafColumnsLength.value),s=R(()=>t.states.rightFixedColumns.value.length),o=R(()=>t.states.columns.value.length),r=R(()=>t.states.fixedColumns.value.length),i=R(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:s,columnsCount:o,leftFixedCount:r,rightFixedCount:i,columns:t.states.columns}}function $ke(e){const{columns:t}=wke(),n=At("table");return{getCellClasses:(r,i)=>{const a=r[i],l=[n.e("cell"),a.id,a.align,a.labelClassName,...hk(n.b(),i,a.fixed,e.store)];return a.className&&l.push(a.className),a.children||l.push(n.is("leaf")),l},getCellStyles:(r,i)=>{const a=pk(i,r.fixed,e.store);return Nd(a,"left"),Nd(a,"right"),a},columns:t}}var Cke=ge({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:n,columns:s}=$ke(e);return{ns:At("table"),getCellClasses:t,getCellStyles:n,columns:s}},render(){const{columns:e,getCellStyles:t,getCellClasses:n,summaryMethod:s,sumText:o,ns:r}=this,i=this.store.states.data.value;let a=[];return s?a=s({columns:e,data:i}):e.forEach((l,u)=>{if(u===0){a[u]=o;return}const c=i.map(p=>Number(p[l.property])),d=[];let f=!0;c.forEach(p=>{if(!isNaN(p)){f=!1;const g=`${p}`.split(".")[1];d.push(g?g.length:0)}});const h=Math.max.apply(null,d);f?a[u]="":a[u]=c.reduce((p,g)=>{const m=Number(g);return isNaN(m)?p:parseFloat((p+g).toFixed(Math.min(h,20)))},0)}),He("table",{class:r.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[gk(e),He("tbody",[He("tr",{},[...e.map((l,u)=>He("td",{key:u,colspan:l.colSpan,rowspan:l.rowSpan,class:n(e,u),style:t(l,u)},[He("div",{class:["cell",l.labelClassName]},[a[u]])]))])])])}});function xke(e){return{setCurrentRow:u=>{e.commit("setCurrentRow",u)},toggleRowSelection:(u,c)=>{e.toggleRowSelection(u,c,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:u=>{e.clearFilter(u)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(u,c)=>{e.toggleRowExpansionAdapter(u,c)},clearSort:()=>{e.clearSort()},sort:(u,c)=>{e.commit("sort",{prop:u,order:c})}}}function kke(e,t,n,s){const o=L(!1),r=L(null),i=L(!1),a=N=>{i.value=N},l=L({width:null,height:null}),u=L(!1);Ca(()=>{t.setHeight(e.height)}),Ca(()=>{t.setMaxHeight(e.maxHeight)}),Oe(()=>[e.currentRowKey,n.states.rowKey],([N,O])=>{!Ke(O)||n.setCurrentRowKey(`${N}`)},{immediate:!0}),Oe(()=>e.data,N=>{s.store.commit("setData",N)},{immediate:!0,deep:!0}),Ca(()=>{e.expandRowKeys&&n.setExpandRowKeysAdapter(e.expandRowKeys)});const c=()=>{s.store.commit("setHoverRow",null),s.hoverState&&(s.hoverState=null)},d=(N,O)=>{const{pixelX:M,pixelY:D}=O;Math.abs(M)>=Math.abs(D)&&(s.refs.bodyWrapper.scrollLeft+=O.pixelX/5)},f=R(()=>e.height||e.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),h=R(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),p=()=>{f.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(v)};Rt(async()=>{m("is-scrolling-left"),n.updateColumns(),await dt(),b(),requestAnimationFrame(p),l.value={width:s.vnode.el.offsetWidth,height:s.vnode.el.offsetHeight},n.states.columns.value.forEach(N=>{N.filteredValue&&N.filteredValue.length&&s.store.commit("filterChange",{column:N,values:N.filteredValue,silent:!0})}),s.$ready=!0});const g=(N,O)=>{if(!N)return;const M=Array.from(N.classList).filter(D=>!D.startsWith("is-scrolling-"));M.push(t.scrollX.value?O:"is-scrolling-none"),N.className=M.join(" ")},m=N=>{const{tableWrapper:O}=s.refs;g(O,N)},v=function(){if(!s.refs.scrollWrapper)return;const N=s.refs.scrollWrapper.wrap$;if(!N)return;const{scrollLeft:O,offsetWidth:M,scrollWidth:D}=N,{headerWrapper:F,footerWrapper:V}=s.refs;F&&(F.scrollLeft=O),V&&(V.scrollLeft=O);const U=D-M-1;O>=U?m("is-scrolling-right"):m(O===0?"is-scrolling-left":"is-scrolling-middle")},b=()=>{var N;(N=s.refs.scrollWrapper.wrap$)==null||N.addEventListener("scroll",v,{passive:!0}),e.fit?_l(s.vnode.el,y):bn(window,"resize",p)};ls(()=>{$()});const $=()=>{var N;(N=s.refs.scrollWrapper.wrap$)==null||N.removeEventListener("scroll",v,!0),e.fit?Nl(s.vnode.el,y):Kn(window,"resize",p)},y=()=>{if(!s.$ready)return;let N=!1;const O=s.vnode.el,{width:M,height:D}=l.value,F=O.offsetWidth;M!==F&&(N=!0);const V=O.offsetHeight;(e.height||f.value)&&D!==V&&(N=!0),N&&(l.value={width:F,height:V},p())},w=ks(),C=R(()=>{const{bodyWidth:N,scrollY:O,gutterWidth:M}=t;return N.value?`${N.value-(O.value?M:0)}px`:""}),x=R(()=>{const N=t.headerHeight.value||0,O=t.bodyHeight.value,M=t.footerHeight.value||0;if(e.height)return O||void 0;if(e.maxHeight)return jv(e.maxHeight)-M-(e.showHeader?N:0)}),k=R(()=>{const N=t.headerHeight.value||0,O=t.bodyHeight.value,M=t.footerHeight.value||0;if(e.height)return{height:O?`${O}px`:""};if(e.maxHeight){const D=jv(e.maxHeight);if(typeof D=="number")return{"max-height":`${D-M-(e.showHeader?N:0)}px`}}return{}}),I=R(()=>{if(e.data&&e.data.length)return null;let N="100%";return t.appendHeight.value&&(N=`calc(100% - ${t.appendHeight.value}px)`),{width:C.value,height:N}}),S=(N,O)=>{const M=s.refs.bodyWrapper;if(Math.abs(O.spinY)>0){const D=M.scrollTop;O.pixelY<0&&D!==0&&N.preventDefault(),O.pixelY>0&&M.scrollHeight-M.clientHeight>D&&N.preventDefault(),M.scrollTop+=Math.ceil(O.pixelY/5)}else M.scrollLeft+=Math.ceil(O.pixelX/5)},T=R(()=>e.maxHeight?e.showSummary?{bottom:0}:{bottom:t.scrollX.value&&e.data.length?`${t.gutterWidth}px`:""}:e.showSummary?{height:t.tableHeight.value?`${t.tableHeight.value}px`:""}:{height:t.viewportHeight.value?`${t.viewportHeight.value}px`:""}),_=R(()=>{if(e.height)return{height:t.fixedBodyHeight.value?`${t.fixedBodyHeight.value}px`:""};if(e.maxHeight){let N=jv(e.maxHeight);if(typeof N=="number")return N=t.scrollX.value?N-t.gutterWidth:N,e.showHeader&&(N-=t.headerHeight.value),N-=t.footerHeight.value,{"max-height":`${N}px`}}return{}});return{isHidden:o,renderExpanded:r,setDragVisible:a,isGroup:u,handleMouseLeave:c,handleHeaderFooterMousewheel:d,tableSize:w,bodyHeight:k,height:x,emptyBlockStyle:I,handleFixedMousewheel:S,fixedHeight:T,fixedBodyHeight:_,resizeProxyVisible:i,bodyWidth:C,resizeState:l,doLayout:p,tableBodyStyles:h}}var Ske={data:{type:Array,default:()=>[]},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""}};let Ike=1;const Tke=ge({name:"ElTable",directives:{Mousewheel:ole},components:{TableHeader:pke,TableBody:yke,TableFooter:Cke,ElScrollbar:Oa},props:Ske,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=In(),n=At("table"),s=Lt();Vt(na,s);const o=eke(s,e);s.store=o;const r=new nke({store:s.store,table:s,fit:e.fit,showHeader:e.showHeader});s.layout=r;const i=R(()=>(o.states.data.value||[]).length===0),{setCurrentRow:a,toggleRowSelection:l,clearSelection:u,clearFilter:c,toggleAllSelection:d,toggleRowExpansion:f,clearSort:h,sort:p}=xke(o),{isHidden:g,renderExpanded:m,setDragVisible:v,isGroup:b,handleMouseLeave:$,handleHeaderFooterMousewheel:y,tableSize:w,bodyHeight:C,height:x,emptyBlockStyle:k,handleFixedMousewheel:I,fixedHeight:S,fixedBodyHeight:T,resizeProxyVisible:_,bodyWidth:N,resizeState:O,doLayout:M,tableBodyStyles:D}=kke(e,r,o,s),F=tr(M,50),V=`el-table_${Ike++}`;s.tableId=V,s.state={isGroup:b,resizeState:O,doLayout:M,debouncedUpdateLayout:F};const U=R(()=>e.sumText||t("el.table.sumText")),ne=R(()=>e.emptyText||t("el.table.emptyText"));return{ns:n,layout:r,store:o,handleHeaderFooterMousewheel:y,handleMouseLeave:$,tableId:V,tableSize:w,isHidden:g,isEmpty:i,renderExpanded:m,resizeProxyVisible:_,resizeState:O,isGroup:b,bodyWidth:N,bodyHeight:C,height:x,tableBodyStyles:D,emptyBlockStyle:k,debouncedUpdateLayout:F,handleFixedMousewheel:I,fixedHeight:S,fixedBodyHeight:T,setCurrentRow:a,toggleRowSelection:l,clearSelection:u,clearFilter:c,toggleAllSelection:d,toggleRowExpansion:f,clearSort:h,doLayout:M,sort:p,t,setDragVisible:v,context:s,computedSumText:U,computedEmptyText:ne}}}),Eke=["data-prefix"],_ke={ref:"hiddenColumns",class:"hidden-columns"};function Nke(e,t,n,s,o,r){const i=ie("table-header"),a=ie("table-body"),l=ie("el-scrollbar"),u=ie("table-footer"),c=Vo("mousewheel");return A(),B("div",{ref:"tableWrapper",class:q([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b()]),style:nt(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:t[0]||(t[0]=d=>e.handleMouseLeave())},[W("div",{class:q(e.ns.e("inner-wrapper"))},[W("div",_ke,[Re(e.$slots,"default")],512),e.showHeader?$t((A(),B("div",{key:0,ref:"headerWrapper",class:q(e.ns.e("header-wrapper"))},[le(i,{ref:"tableHeader",border:e.border,"default-sort":e.defaultSort,store:e.store,style:nt(e.tableBodyStyles),onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","style","onSetDragVisible"])],2)),[[c,e.handleHeaderFooterMousewheel]]):ce("v-if",!0),W("div",{ref:"bodyWrapper",style:nt(e.bodyHeight),class:q(e.ns.e("body-wrapper"))},[le(l,{ref:"scrollWrapper",height:e.maxHeight?void 0:e.height,"max-height":e.maxHeight?e.height:void 0},{default:re(()=>[le(a,{ref:"tableBody",context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"row-style":e.rowStyle,store:e.store,stripe:e.stripe,style:nt({width:e.bodyWidth})},null,8,["context","highlight","row-class-name","tooltip-effect","row-style","store","stripe","style"]),e.isEmpty?(A(),B("div",{key:0,ref:"emptyBlock",style:nt(e.emptyBlockStyle),class:q(e.ns.e("empty-block"))},[W("span",{class:q(e.ns.e("empty-text"))},[Re(e.$slots,"empty",{},()=>[qt(Pe(e.computedEmptyText),1)])],2)],6)):ce("v-if",!0),e.$slots.append?(A(),B("div",{key:1,ref:"appendWrapper",class:q(e.ns.e("append-wrapper"))},[Re(e.$slots,"append")],2)):ce("v-if",!0)]),_:3},8,["height","max-height"])],6),e.border||e.isGroup?(A(),B("div",{key:1,class:q(e.ns.e("border-left-patch"))},null,2)):ce("v-if",!0)],2),e.showSummary?$t((A(),B("div",{key:0,ref:"footerWrapper",class:q(e.ns.e("footer-wrapper"))},[le(u,{border:e.border,"default-sort":e.defaultSort,store:e.store,style:nt(e.tableBodyStyles),"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[en,!e.isEmpty],[c,e.handleHeaderFooterMousewheel]]):ce("v-if",!0),$t(W("div",{ref:"resizeProxy",class:q(e.ns.e("column-resize-proxy"))},null,2),[[en,e.resizeProxyVisible]])],46,Eke)}var Ake=We(Tke,[["render",Nke]]);const Dke={selection:"table-column--selection",expand:"table__expand-column"},Rke={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Oke=e=>Dke[e]||"",Mke={selection:{renderHeader({store:e}){function t(){return e.states.data.value&&e.states.data.value.length===0}return He(ki,{disabled:t(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value})},renderCell({row:e,column:t,store:n,$index:s}){return He(ki,{disabled:t.selectable?!t.selectable.call(null,e,s):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",e)},onClick:o=>o.stopPropagation(),modelValue:n.isSelected(e)})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let n=t+1;const s=e.index;return typeof s=="number"?n=t+s:typeof s=="function"&&(n=s(t)),He("div",{},[n])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t}){const{ns:n}=t,s=[n.e("expand-icon")];return t.states.expandRows.value.indexOf(e)>-1&&s.push(n.em("expand-icon","expanded")),He("div",{class:s,onClick:function(r){r.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[He(Ot,null,{default:()=>[He(Qr)]})]})},sortable:!1,resizable:!1}};function Pke({row:e,column:t,$index:n}){var s;const o=t.property,r=o&&Iv(e,o,!1).v;return t&&t.formatter?t.formatter(e,t,r,n):((s=r==null?void 0:r.toString)==null?void 0:s.call(r))||""}function Fke({row:e,treeNode:t,store:n}){if(!t)return null;const s=[],o=function(i){i.stopPropagation(),n.loadOrToggle(e)},{ns:r}=n;if(t.indent&&s.push(He("span",{class:r.e("indent"),style:{"padding-left":`${t.indent}px`}})),typeof t.expanded=="boolean"&&!t.noLazyChildren){const i=[r.e("expand-icon"),t.expanded?r.em("expand-icon","expanded"):""];let a=Qr;t.loading&&(a=Ra),s.push(He("div",{class:i,onClick:o},{default:()=>[He(Ot,{class:{[r.is("loading")]:t.loading}},{default:()=>[He(a)]})]}))}else s.push(He("span",{class:r.e("placeholder")}));return s}function Lke(e,t){const n=Lt();return{registerComplexWatchers:()=>{const r=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},a=r.reduce((l,u)=>(l[u]=u,l),i);Object.keys(a).forEach(l=>{const u=i[l];Ht(t,u)&&Oe(()=>t[u],c=>{let d=c;u==="width"&&l==="realWidth"&&(d=fk(c)),u==="minWidth"&&l==="realMinWidth"&&(d=L4(c)),n.columnConfig.value[u]=d,n.columnConfig.value[l]=d;const f=u==="fixed";e.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const r=["label","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=r.reduce((l,u)=>(l[u]=u,l),i);Object.keys(a).forEach(l=>{const u=i[l];Ht(t,u)&&Oe(()=>t[u],c=>{n.columnConfig.value[l]=c})})}}}function Bke(e,t,n){const s=Lt(),o=L(""),r=L(!1),i=L(),a=L(),l=At("table");Ca(()=>{i.value=e.align?`is-${e.align}`:null,i.value}),Ca(()=>{a.value=e.headerAlign?`is-${e.headerAlign}`:i.value,a.value});const u=R(()=>{let b=s.vnode.vParent||s.parent;for(;b&&!b.tableId&&!b.columnId;)b=b.vnode.vParent||b.parent;return b}),c=L(fk(e.width)),d=L(L4(e.minWidth)),f=b=>(c.value&&(b.width=c.value),d.value&&(b.minWidth=d.value),b.minWidth||(b.minWidth=80),b.realWidth=Number(b.width===void 0?b.minWidth:b.width),b),h=b=>{const $=b.type,y=Mke[$]||{};Object.keys(y).forEach(C=>{const x=y[C];C!=="className"&&x!==void 0&&(b[C]=x)});const w=Oke($);if(w){const C=`${Ke(l.namespace)}-${w}`;b.className=b.className?`${b.className} ${C}`:C}return b},p=b=>{b instanceof Array?b.forEach(y=>$(y)):$(b);function $(y){var w;((w=y==null?void 0:y.type)==null?void 0:w.name)==="ElTableColumn"&&(y.vParent=s)}};return{columnId:o,realAlign:i,isSubColumn:r,realHeaderAlign:a,columnOrTableParent:u,setColumnWidth:f,setColumnForcedProps:h,setColumnRenders:b=>{e.renderHeader||b.type!=="selection"&&(b.renderHeader=y=>{s.columnConfig.value.label;const w=t.header;return w?w(y):b.label});let $=b.renderCell;return b.type==="expand"?(b.renderCell=y=>He("div",{class:"cell"},[$(y)]),n.value.renderExpanded=y=>t.default?t.default(y):t.default):($=$||Pke,b.renderCell=y=>{let w=null;t.default?w=t.default(y):w=$(y);const C=Fke(y),x={class:"cell",style:{}};return b.showOverflowTooltip&&(x.class=`${x.class} ${Ke(l.namespace)}-tooltip`,x.style={width:`${(y.column.realWidth||Number(y.column.width))-1}px`}),p(w),He("div",x,[C,w])}),b},getPropsData:(...b)=>b.reduce(($,y)=>(Array.isArray(y)&&y.forEach(w=>{$[w]=e[w]}),$),{}),getColumnElIndex:(b,$)=>[].indexOf.call(b,$)}}var zke={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].indexOf(t)>-1)}};let Vke=1;var j4=ge({name:"ElTableColumn",components:{ElCheckbox:ki},props:zke,setup(e,{slots:t}){const n=Lt(),s=L({}),o=R(()=>{let b=n.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:r,registerComplexWatchers:i}=Lke(o,e),{columnId:a,isSubColumn:l,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:g,realAlign:m}=Bke(e,t,o),v=c.value;a.value=`${v.tableId||v.columnId}_column_${Vke++}`,Ap(()=>{l.value=o.value!==v;const b=e.type||"default",$=e.sortable===""?!0:e.sortable,y=zt(ut({},Rke[b]),{id:a.value,type:b,property:e.prop||e.property,align:m,headerAlign:u,showOverflowTooltip:e.showOverflowTooltip||e.showTooltipWhenOverflow,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:$,index:e.index,rawColumnKey:n.vnode.key});let I=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);I=U2e(y,I),I=j2e(h,d,f)(I),s.value=I,r(),i()}),Rt(()=>{var b;const $=c.value,y=l.value?$.vnode.el.children:(b=$.refs.hiddenColumns)==null?void 0:b.children,w=()=>g(y||[],n.vnode.el);s.value.getColumnIndex=w,w()>-1&&o.value.store.commit("insertColumn",s.value,l.value?$.columnConfig.value:null)}),ls(()=>{o.value.store.commit("removeColumn",s.value,l.value?v.columnConfig.value:null)}),n.columnId=a.value,n.columnConfig=s},render(){var e,t,n;let s=[];try{const o=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1});if(o instanceof Array)for(const r of o)((n=r.type)==null?void 0:n.name)==="ElTableColumn"||r.shapeFlag&2?s.push(r):r.type===at&&r.children instanceof Array&&s.push(...r.children)}catch{s=[]}return He("div",s)}});const Wke=Wt(Ake,{TableColumn:j4}),Hke=us(j4),Uke=mt({tabs:{type:Je(Array),default:()=>Ns([])}}),nD="ElTabBar",jke=ge({name:nD,props:Uke,setup(e){const t=Lt(),n=Ze(y0);n||ko(nD,"must use with ElTabs");const s=L(),o=L(),r=()=>{let a=0,l=0;const u=["top","bottom"].includes(n.props.tabPosition)?"width":"height",c=u==="width"?"x":"y";return e.tabs.every(d=>{var f,h,p,g;const m=(h=(f=t.parent)==null?void 0:f.refs)==null?void 0:h[`tab-${d.paneName}`];if(!m)return!1;if(!d.active)return!0;l=m[`client${gr(u)}`];const v=c==="x"?"left":"top";a=m.getBoundingClientRect()[v]-((g=(p=m.parentElement)==null?void 0:p.getBoundingClientRect()[v])!=null?g:0);const b=window.getComputedStyle(m);return u==="width"&&(e.tabs.length>1&&(l-=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight)),a+=parseFloat(b.paddingLeft)),!1}),{[u]:`${l}px`,transform:`translate${gr(c)}(${a}px)`}},i=()=>o.value=r();return Oe(()=>e.tabs,async()=>{await dt(),i()},{immediate:!0}),Yh(s,()=>i()),{bar$:s,rootTabs:n,barStyle:o,update:i}}});function Gke(e,t,n,s,o,r){return A(),B("div",{ref:"bar$",class:q(["el-tabs__active-bar",`is-${e.rootTabs.props.tabPosition}`]),style:nt(e.barStyle)},null,6)}var Kke=We(jke,[["render",Gke]]);const qke=mt({panes:{type:Je(Array),default:()=>Ns([])},currentName:{type:String,default:""},editable:Boolean,onTabClick:{type:Je(Function),default:rn},onTabRemove:{type:Je(Function),default:rn},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),sD="ElTabNav";var Yke=ge({name:sD,props:qke,setup(e,{expose:t}){const n=_te(),s=Lte(),o=Ze(y0);o||ko(sD,"ElTabNav must be nested inside ElTabs");const r=L(!1),i=L(0),a=L(!1),l=L(!0),u=L(),c=L(),d=L(),f=R(()=>["top","bottom"].includes(o.props.tabPosition)?"width":"height"),h=R(()=>({transform:`translate${f.value==="width"?"X":"Y"}(-${i.value}px)`})),p=()=>{if(!u.value)return;const w=u.value[`offset${gr(f.value)}`],C=i.value;if(!C)return;const x=C>w?C-w:0;i.value=x},g=()=>{if(!u.value||!c.value)return;const w=c.value[`offset${gr(f.value)}`],C=u.value[`offset${gr(f.value)}`],x=i.value;if(w-x<=C)return;const k=w-x>C*2?x+C:w-C;i.value=k},m=()=>{const w=c.value;if(!r.value||!d.value||!u.value||!w)return;const C=d.value.querySelector(".is-active");if(!C)return;const x=u.value,k=["top","bottom"].includes(o.props.tabPosition),I=C.getBoundingClientRect(),S=x.getBoundingClientRect(),T=k?w.offsetWidth-S.width:w.offsetHeight-S.height,_=i.value;let N=_;k?(I.left<S.left&&(N=_-(S.left-I.left)),I.right>S.right&&(N=_+I.right-S.right)):(I.top<S.top&&(N=_-(S.top-I.top)),I.bottom>S.bottom&&(N=_+(I.bottom-S.bottom))),N=Math.max(N,0),i.value=Math.min(N,T)},v=()=>{if(!c.value||!u.value)return;const w=c.value[`offset${gr(f.value)}`],C=u.value[`offset${gr(f.value)}`],x=i.value;if(C<w){const k=i.value;r.value=r.value||{},r.value.prev=k,r.value.next=k+C<w,w-k<C&&(i.value=w-C)}else r.value=!1,x>0&&(i.value=0)},b=w=>{const C=w.code,{up:x,down:k,left:I,right:S}=Qe;if(![x,k,I,S].includes(C))return;const T=Array.from(w.currentTarget.querySelectorAll("[role=tab]")),_=T.indexOf(w.target);let N;C===I||C===x?_===0?N=T.length-1:N=_-1:_<T.length-1?N=_+1:N=0,T[N].focus(),T[N].click(),$()},$=()=>{l.value&&(a.value=!0)},y=()=>a.value=!1;return Oe(n,w=>{w==="hidden"?l.value=!1:w==="visible"&&setTimeout(()=>l.value=!0,50)}),Oe(s,w=>{w?setTimeout(()=>l.value=!0,50):l.value=!1}),Yh(d,v),Rt(()=>setTimeout(()=>m(),0)),_i(()=>v()),t({scrollToActiveTab:m,removeFocus:y}),()=>{const w=r.value?[He("span",{class:["el-tabs__nav-prev",r.value.prev?"":"is-disabled"],onClick:p},[He(Ot,{},{default:()=>He(fc)})]),He("span",{class:["el-tabs__nav-next",r.value.next?"":"is-disabled"],onClick:g},[He(Ot,{},{default:()=>He(Qr)})])]:null,C=e.panes.map((x,k)=>{var I,S;const T=x.props.name||x.index||`${k}`,_=x.isClosable||e.editable;x.index=`${k}`;const N=_?He(Ot,{class:"is-icon-close",onClick:D=>e.onTabRemove(x,D)},{default:()=>He(xi)}):null,O=((S=(I=x.instance.slots).label)==null?void 0:S.call(I))||x.props.label,M=x.active?0:-1;return He("div",{class:{"el-tabs__item":!0,[`is-${o.props.tabPosition}`]:!0,"is-active":x.active,"is-disabled":x.props.disabled,"is-closable":_,"is-focus":a},id:`tab-${T}`,key:`tab-${T}`,"aria-controls":`pane-${T}`,role:"tab","aria-selected":x.active,ref:`tab-${T}`,tabindex:M,onFocus:()=>$(),onBlur:()=>y(),onClick:D=>{y(),e.onTabClick(x,T,D)},onKeydown:D=>{_&&(D.code===Qe.delete||D.code===Qe.backspace)&&e.onTabRemove(x,D)}},[O,N])});return He("div",{ref:d,class:["el-tabs__nav-wrap",r.value?"is-scrollable":"",`is-${o.props.tabPosition}`]},[w,He("div",{class:"el-tabs__nav-scroll",ref:u},[He("div",{class:["el-tabs__nav",`is-${o.props.tabPosition}`,e.stretch&&["top","bottom"].includes(o.props.tabPosition)?"is-stretch":""],ref:c,style:h.value,role:"tablist",onKeydown:b},[e.type?null:He(Kke,{tabs:[...e.panes]}),C])])])}}});const Xke=mt({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:String,default:""},closable:Boolean,addable:Boolean,modelValue:{type:String,default:""},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Je(Function),default:()=>!0},stretch:Boolean}),Zke={[Pt]:e=>typeof e=="string",[gl]:e=>typeof e=="string","tab-click":(e,t)=>t instanceof Event,edit:(e,t)=>t==="remove"||t==="add","tab-remove":e=>typeof e=="string","tab-add":()=>!0},G4=(e,t=[])=>{const n=e.children||[];return Array.from(n).forEach(s=>{let o=s.type;o=o.name||o,o==="ElTabPane"&&s.component?t.push(s.component):(o===at||o==="template")&&G4(s,t)}),t};var Jke=ge({name:"ElTabs",props:Xke,emits:Zke,setup(e,{emit:t,slots:n,expose:s}){const o=Lt(),r=L(),i=L([]),a=L(e.modelValue||e.activeName||"0"),l={},u=(g=!1)=>{if(n.default){const m=o.subTree.children,v=Array.from(m).find(({props:y})=>(y==null?void 0:y.class)==="el-tabs__content");if(!v)return;const b=G4(v).map(y=>l[y.uid]),$=!(b.length===i.value.length&&b.every((y,w)=>y.uid===i.value[w].uid));(g||$)&&(i.value=b)}else i.value.length!==0&&(i.value=[])},c=g=>{a.value=g,t(gl,g),t(Pt,g)},d=g=>{var m;if(a.value===g)return;const v=(m=e.beforeLeave)==null?void 0:m.call(e,g,a.value);vd(v)?v.then(()=>{var b,$;c(g),($=(b=r.value)==null?void 0:b.removeFocus)==null||$.call(b)},rn):v!==!1&&c(g)},f=(g,m,v)=>{g.props.disabled||(d(m),t("tab-click",g,v))},h=(g,m)=>{g.props.disabled||(m.stopPropagation(),t("edit",g.props.name,"remove"),t("tab-remove",g.props.name))},p=()=>{t("edit",null,"add"),t("tab-add")};return _i(()=>u()),Rt(()=>u()),Oe(()=>e.activeName,g=>d(g)),Oe(()=>e.modelValue,g=>d(g)),Oe(a,async()=>{var g,m;u(!0),await dt(),await((g=r.value)==null?void 0:g.$nextTick()),(m=r.value)==null||m.scrollToActiveTab()}),Vt(y0,{props:e,currentName:a,updatePaneState:g=>l[g.uid]=g}),s({currentName:a}),()=>{const g=e.editable||e.addable?He("span",{class:"el-tabs__new-tab",tabindex:"0",onClick:p,onKeydown:b=>{b.code===Qe.enter&&p()}},[He(Ot,{class:"is-icon-plus"},{default:()=>He(xF)})]):null,m=He("div",{class:["el-tabs__header",`is-${e.tabPosition}`]},[g,He(Yke,{currentName:a.value,editable:e.editable,type:e.type,panes:i.value,stretch:e.stretch,ref:r,onTabClick:f,onTabRemove:h})]),v=He("div",{class:"el-tabs__content"},[Re(n,"default")]);return He("div",{class:{"el-tabs":!0,"el-tabs--card":e.type==="card",[`el-tabs--${e.tabPosition}`]:!0,"el-tabs--border-card":e.type==="border-card"}},e.tabPosition!=="bottom"?[m,v]:[v,m])}}});const Qke=mt({label:{type:String,default:""},name:{type:String,default:""},closable:Boolean,disabled:Boolean,lazy:Boolean}),oD="ElTabPane",eSe=ge({name:oD,props:Qke,setup(e){const t=Lt(),n=Ze(y0);n||ko(oD,"must use with ElTabs");const s=L(),o=L(!1),r=R(()=>e.closable||n.props.closable),i=$N(()=>n.currentName.value===(e.name||s.value)),a=R(()=>e.name||s.value),l=$N(()=>!e.lazy||o.value||i.value);return Oe(i,u=>{u&&(o.value=!0)}),n.updatePaneState(Sn({uid:t.uid,instance:zh(t),props:e,paneName:a,active:i,index:s,isClosable:r})),{active:i,paneName:a,shouldBeRender:l}}}),tSe=["id","aria-hidden","aria-labelledby"];function nSe(e,t,n,s,o,r){return e.shouldBeRender?$t((A(),B("div",{key:0,id:`pane-${e.paneName}`,class:"el-tab-pane",role:"tabpanel","aria-hidden":!e.active,"aria-labelledby":`tab-${e.paneName}`},[Re(e.$slots,"default")],8,tSe)),[[en,e.active]]):ce("v-if",!0)}var K4=We(eSe,[["render",nSe]]);const sSe=Wt(Jke,{TabPane:K4}),oSe=us(K4);Ct.extend(Y2);const{Option:rSe}=F0,ga=e=>{const t=(e||"").split(":");if(t.length>=2){let n=parseInt(t[0],10);const s=parseInt(t[1],10),o=e.toUpperCase();return o.includes("AM")&&n===12?n=0:o.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:s}}return null},Kw=(e,t)=>{const n=ga(e),s=ga(t),o=n.minutes+n.hours*60,r=s.minutes+s.hours*60;return o===r?0:o>r?1:-1},rD=e=>`${e}`.padStart(2,"0"),Xc=e=>`${rD(e.hours)}:${rD(e.minutes)}`,iSe=(e,t)=>{const n=ga(e),s=ga(t),o={hours:n.hours,minutes:n.minutes};return o.minutes+=s.minutes,o.hours+=s.hours,o.hours+=Math.floor(o.minutes/60),o.minutes=o.minutes%60,Xc(o)},aSe=ge({name:"ElTimeSelect",components:{ElSelect:F0,ElOption:rSe,ElIcon:Ot},model:{prop:"value",event:"change"},props:{format:{type:String,default:"HH:mm"},modelValue:String,disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},size:{type:String,default:"default",validator:e=>!e||["large","default","small"].indexOf(e)!==-1},placeholder:{type:String,default:""},start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:{type:String,default:""},maxTime:{type:String,default:""},name:{type:String,default:""},prefixIcon:{type:[String,Object],default:CF},clearIcon:{type:[String,Object],default:Ta}},emits:["change","blur","focus","update:modelValue"],setup(e){const t=L(null),n=R(()=>e.modelValue),s=R(()=>{const d=ga(e.start);return Xc(d)}),o=R(()=>{const d=ga(e.end);return Xc(d)}),r=R(()=>{const d=ga(e.step);return Xc(d)}),i=R(()=>{const d=ga(e.minTime);return d?Xc(d):null}),a=R(()=>{const d=ga(e.maxTime);return d?Xc(d):null}),l=R(()=>{const d=[];if(e.start&&e.end&&e.step){let f=s.value,h;for(;Kw(f,o.value)<=0;)h=Ct(f,"HH:mm").format(e.format),d.push({value:h,disabled:Kw(f,i.value||"-1:-1")<=0||Kw(f,a.value||"100:100")>=0}),f=iSe(f,r.value)}return d});return{select:t,value:n,items:l,blur:()=>{var d,f;(f=(d=t.value)==null?void 0:d.blur)==null||f.call(d)},focus:()=>{var d,f;(f=(d=t.value)==null?void 0:d.focus)==null||f.call(d)}}}});function lSe(e,t,n,s,o,r){const i=ie("el-option"),a=ie("el-icon"),l=ie("el-select");return A(),ve(l,{ref:"select","model-value":e.value,disabled:e.disabled,clearable:e.clearable,"clear-icon":e.clearIcon,size:e.size,placeholder:e.placeholder,"default-first-option":"",filterable:e.editable,"onUpdate:modelValue":t[0]||(t[0]=u=>e.$emit("update:modelValue",u)),onChange:t[1]||(t[1]=u=>e.$emit("change",u)),onBlur:t[2]||(t[2]=u=>e.$emit("blur",u)),onFocus:t[3]||(t[3]=u=>e.$emit("focus",u))},{prefix:re(()=>[e.prefixIcon?(A(),ve(a,{key:0,class:"el-input__prefix-icon"},{default:re(()=>[(A(),ve(tn(e.prefixIcon)))]),_:1})):ce("v-if",!0)]),default:re(()=>[(A(!0),B(at,null,Zt(e.items,u=>(A(),ve(i,{key:u.value,label:u.value,value:u.value,disabled:u.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","placeholder","filterable"])}var qv=We(aSe,[["render",lSe]]);qv.install=e=>{e.component(qv.name,qv)};const uSe=qv,cSe=uSe,dSe=ge({name:"ElTimeline",setup(e,{slots:t}){const n=At("timeline");return Vt("timeline",t),()=>He("ul",{class:[n.b()]},[Re(t,"default")])}}),fSe=mt({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:{type:String,default:""},color:{type:String,default:""},size:{type:String,default:"normal"},icon:{type:Je([String,Object]),default:""},hollow:{type:Boolean,default:!1}}),hSe=ge({name:"ElTimelineItem",components:{ElIcon:Ot},props:fSe,setup(){return{ns:At("timeline-item")}}});function pSe(e,t,n,s,o,r){const i=ie("el-icon");return A(),B("li",{class:q([e.ns.b(),{[e.ns.e("center")]:e.center}])},[W("div",{class:q(e.ns.e("tail"))},null,2),e.$slots.dot?ce("v-if",!0):(A(),B("div",{key:0,class:q([e.ns.e("node"),e.ns.em("node",e.size||""),e.ns.em("node",e.type||""),e.ns.is("hollow",e.hollow)]),style:nt({backgroundColor:e.color})},[e.icon?(A(),ve(i,{key:0,class:q(e.ns.e("icon"))},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1},8,["class"])):ce("v-if",!0)],6)),e.$slots.dot?(A(),B("div",{key:1,class:q(e.ns.e("dot"))},[Re(e.$slots,"dot")],2)):ce("v-if",!0),W("div",{class:q(e.ns.e("wrapper"))},[!e.hideTimestamp&&e.placement==="top"?(A(),B("div",{key:0,class:q([e.ns.e("timestamp"),e.ns.is("top")])},Pe(e.timestamp),3)):ce("v-if",!0),W("div",{class:q(e.ns.e("content"))},[Re(e.$slots,"default")],2),!e.hideTimestamp&&e.placement==="bottom"?(A(),B("div",{key:1,class:q([e.ns.e("timestamp"),e.ns.is("bottom")])},Pe(e.timestamp),3)):ce("v-if",!0)],2)],2)}var q4=We(hSe,[["render",pSe]]);const gSe=Wt(dSe,{TimelineItem:q4}),mSe=us(q4),AC="checked-change",vSe={data:{type:Array,default(){return[]}},optionRender:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},bSe=(e,t)=>{const{emit:n}=Lt(),s=R(()=>e.props.label||"label"),o=R(()=>e.props.key||"key"),r=R(()=>e.props.disabled||"disabled"),i=R(()=>e.data.filter(f=>typeof e.filterMethod=="function"?e.filterMethod(t.query,f):(f[s.value]||f[o.value].toString()).toLowerCase().includes(t.query.toLowerCase()))),a=R(()=>i.value.filter(f=>!f[r.value])),l=R(()=>{const f=t.checked.length,h=e.data.length,{noChecked:p,hasChecked:g}=e.format;return p&&g?f>0?g.replace(/\${checked}/g,f.toString()).replace(/\${total}/g,h.toString()):p.replace(/\${total}/g,h.toString()):`${f}/${h}`}),u=R(()=>{const f=t.checked.length;return f>0&&f<a.value.length}),c=()=>{const f=a.value.map(h=>h[o.value]);t.allChecked=f.length>0&&f.every(h=>t.checked.includes(h))},d=f=>{t.checked=f?a.value.map(h=>h[o.value]):[]};return Oe(()=>t.checked,(f,h)=>{if(c(),t.checkChangeByUser){const p=f.concat(h).filter(g=>!f.includes(g)||!h.includes(g));n(AC,f,p)}else n(AC,f),t.checkChangeByUser=!0}),Oe(a,()=>{c()}),Oe(()=>e.data,()=>{const f=[],h=i.value.map(p=>p[o.value]);t.checked.forEach(p=>{h.includes(p)&&f.push(p)}),t.checkChangeByUser=!1,t.checked=f}),Oe(()=>e.defaultChecked,(f,h)=>{if(h&&f.length===h.length&&f.every(m=>h.includes(m)))return;const p=[],g=a.value.map(m=>m[o.value]);f.forEach(m=>{g.includes(m)&&p.push(m)}),t.checkChangeByUser=!1,t.checked=p},{immediate:!0}),{labelProp:s,keyProp:o,disabledProp:r,filteredData:i,checkableData:a,checkedSummary:l,isIndeterminate:u,updateAllChecked:c,handleAllCheckedChange:d}},ySe=ge({name:"ElTransferPanel",components:{ElCheckboxGroup:SL,ElCheckbox:ki,ElInput:ei,OptionContent:({option:e})=>e},props:vSe,emits:[AC],setup(e,{slots:t}){const{t:n}=In(),s=Sn({checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}),{labelProp:o,keyProp:r,disabledProp:i,filteredData:a,checkedSummary:l,isIndeterminate:u,handleAllCheckedChange:c}=bSe(e,s),d=R(()=>s.query.length>0&&a.value.length===0),f=R(()=>!!t.default()[0].children.length),{checked:h,allChecked:p,query:g,inputHover:m,checkChangeByUser:v}=xo(s);return{labelProp:o,keyProp:r,disabledProp:i,filteredData:a,checkedSummary:l,isIndeterminate:u,handleAllCheckedChange:c,checked:h,allChecked:p,query:g,inputHover:m,checkChangeByUser:v,hasNoMatch:d,SearchIcon:Fie,hasFooter:f,t:n}}}),wSe={class:"el-transfer-panel"},$Se={class:"el-transfer-panel__header"},CSe={key:0,class:"el-transfer-panel__footer"};function xSe(e,t,n,s,o,r){const i=ie("el-checkbox"),a=ie("el-input"),l=ie("option-content"),u=ie("el-checkbox-group");return A(),B("div",wSe,[W("p",$Se,[le(i,{modelValue:e.allChecked,"onUpdate:modelValue":t[0]||(t[0]=c=>e.allChecked=c),indeterminate:e.isIndeterminate,onChange:e.handleAllCheckedChange},{default:re(()=>[qt(Pe(e.title)+" ",1),W("span",null,Pe(e.checkedSummary),1)]),_:1},8,["modelValue","indeterminate","onChange"])]),W("div",{class:q(["el-transfer-panel__body",e.hasFooter?"is-with-footer":""])},[e.filterable?(A(),ve(a,{key:0,modelValue:e.query,"onUpdate:modelValue":t[1]||(t[1]=c=>e.query=c),class:"el-transfer-panel__filter",size:"default",placeholder:e.placeholder,"prefix-icon":e.SearchIcon,clearable:"",onMouseenter:t[2]||(t[2]=c=>e.inputHover=!0),onMouseleave:t[3]||(t[3]=c=>e.inputHover=!1)},null,8,["modelValue","placeholder","prefix-icon"])):ce("v-if",!0),$t(le(u,{modelValue:e.checked,"onUpdate:modelValue":t[4]||(t[4]=c=>e.checked=c),class:q([{"is-filterable":e.filterable},"el-transfer-panel__list"])},{default:re(()=>[(A(!0),B(at,null,Zt(e.filteredData,c=>(A(),ve(i,{key:c[e.keyProp],class:"el-transfer-panel__item",label:c[e.keyProp],disabled:c[e.disabledProp]},{default:re(()=>[le(l,{option:e.optionRender(c)},null,8,["option"])]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[en,!e.hasNoMatch&&e.data.length>0]]),$t(W("p",{class:"el-transfer-panel__empty"},Pe(e.hasNoMatch?e.t("el.transfer.noMatch"):e.t("el.transfer.noData")),513),[[en,e.hasNoMatch||e.data.length===0]])],2),e.hasFooter?(A(),B("p",CSe,[Re(e.$slots,"default")])):ce("v-if",!0)])}var kSe=We(ySe,[["render",xSe]]);const SSe=e=>{const t=R(()=>e.props.key),n=R(()=>e.data.reduce((r,i)=>(r[i[t.value]]=i)&&r,{})),s=R(()=>e.data.filter(r=>!e.modelValue.includes(r[t.value]))),o=R(()=>e.targetOrder==="original"?e.data.filter(r=>e.modelValue.includes(r[t.value])):e.modelValue.reduce((r,i)=>{const a=n.value[i];return a&&r.push(a),r},[]));return{propsKey:t,sourceData:s,targetData:o}},Y4="left-check-change",X4="right-check-change",ISe=(e,t)=>({onSourceCheckedChange:(o,r)=>{e.leftChecked=o,r!==void 0&&t(Y4,o,r)},onTargetCheckedChange:(o,r)=>{e.rightChecked=o,r!==void 0&&t(X4,o,r)}}),TSe=(e,t,n,s)=>{const o=(a,l,u)=>{s(Pt,a),s(Xs,a,l,u)};return{addToLeft:()=>{const a=e.modelValue.slice();t.rightChecked.forEach(l=>{const u=a.indexOf(l);u>-1&&a.splice(u,1)}),o(a,"left",t.rightChecked)},addToRight:()=>{let a=e.modelValue.slice();const l=e.data.filter(u=>{const c=u[n.value];return t.leftChecked.includes(c)&&!e.modelValue.includes(c)}).map(u=>u[n.value]);a=e.targetOrder==="unshift"?l.concat(a):a.concat(l),e.targetOrder==="original"&&(a=e.data.filter(u=>a.includes(u[n.value])).map(u=>u[n.value])),o(a,"right",t.leftChecked)}}},ESe=ge({name:"ElTransfer",components:{TransferPanel:kSe,ElButton:ta,ElIcon:Ot,ArrowLeft:fc,ArrowRight:Qr},props:{data:{type:Array,default:()=>[]},titles:{type:Array,default:()=>[]},buttonTexts:{type:Array,default:()=>[]},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:()=>[]},rightDefaultChecked:{type:Array,default:()=>[]},renderContent:Function,modelValue:{type:Array,default:()=>[]},format:{type:Object,default:()=>({})},filterable:{type:Boolean,default:!1},props:{type:Object,default:()=>({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,default:"original",validator:e=>["original","push","unshift"].includes(e)}},emits:[Pt,Xs,Y4,X4],setup(e,{emit:t,slots:n}){const{t:s}=In(),o=Ze(Ni,{}),r=Sn({leftChecked:[],rightChecked:[]}),{propsKey:i,sourceData:a,targetData:l}=SSe(e),{onSourceCheckedChange:u,onTargetCheckedChange:c}=ISe(r,t),{addToLeft:d,addToRight:f}=TSe(e,r,i,t),h=L(),p=L(),g=w=>{switch(w){case"left":h.value.query="";break;case"right":p.value.query="";break}},m=R(()=>e.buttonTexts.length===2),v=R(()=>e.titles[0]||s("el.transfer.titles.0")),b=R(()=>e.titles[1]||s("el.transfer.titles.1")),$=R(()=>e.filterPlaceholder||s("el.transfer.filterPlaceholder"));Oe(()=>e.modelValue,()=>{var w;(w=o.validate)==null||w.call(o,"change")});const y=R(()=>w=>e.renderContent?e.renderContent(He,w):n.default?n.default({option:w}):He("span",w[e.props.label]||w[e.props.key]));return zt(ut({sourceData:a,targetData:l,onSourceCheckedChange:u,onTargetCheckedChange:c,addToLeft:d,addToRight:f},xo(r)),{hasButtonTexts:m,leftPanelTitle:v,rightPanelTitle:b,panelFilterPlaceholder:$,clearQuery:g,leftPanel:h,rightPanel:p,optionRender:y})}}),_Se={class:"el-transfer"},NSe={class:"el-transfer__buttons"},ASe={key:0},DSe={key:0};function RSe(e,t,n,s,o,r){const i=ie("transfer-panel"),a=ie("arrow-left"),l=ie("el-icon"),u=ie("el-button"),c=ie("arrow-right");return A(),B("div",_Se,[le(i,{ref:"leftPanel",data:e.sourceData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,title:e.leftPanelTitle,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,"default-checked":e.leftDefaultChecked,props:e.props,onCheckedChange:e.onSourceCheckedChange},{default:re(()=>[Re(e.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),W("div",NSe,[le(u,{type:"primary",class:q(["el-transfer__button",e.hasButtonTexts?"is-with-texts":""]),disabled:e.rightChecked.length===0,onClick:e.addToLeft},{default:re(()=>[le(l,null,{default:re(()=>[le(a)]),_:1}),e.buttonTexts[0]!==void 0?(A(),B("span",ASe,Pe(e.buttonTexts[0]),1)):ce("v-if",!0)]),_:1},8,["class","disabled","onClick"]),le(u,{type:"primary",class:q(["el-transfer__button",e.hasButtonTexts?"is-with-texts":""]),disabled:e.leftChecked.length===0,onClick:e.addToRight},{default:re(()=>[e.buttonTexts[1]!==void 0?(A(),B("span",DSe,Pe(e.buttonTexts[1]),1)):ce("v-if",!0),le(l,null,{default:re(()=>[le(c)]),_:1})]),_:1},8,["class","disabled","onClick"])]),le(i,{ref:"rightPanel",data:e.targetData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,title:e.rightPanelTitle,"default-checked":e.rightDefaultChecked,props:e.props,onCheckedChange:e.onTargetCheckedChange},{default:re(()=>[Re(e.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])])}var Yv=We(ESe,[["render",RSe]]);Yv.install=e=>{e.component(Yv.name,Yv)};const OSe=Yv,MSe=OSe,cd="$treeNodeId",iD=function(e,t){!t||t[cd]||Object.defineProperty(t,cd,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},mk=function(e,t){return e?t[e]:t[cd]},DC=e=>{let t=!0,n=!0,s=!0;for(let o=0,r=e.length;o<r;o++){const i=e[o];(i.checked!==!0||i.indeterminate)&&(t=!1,i.disabled||(s=!1)),(i.checked!==!1||i.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:s,half:!t&&!n}},Xv=function(e){if(e.childNodes.length===0)return;const{all:t,none:n,half:s}=DC(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):s?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const o=e.parent;!o||o.level===0||e.store.checkStrictly||Xv(o)},Um=function(e,t){const n=e.store.props,s=e.data||{},o=n[t];if(typeof o=="function")return o(s,e);if(typeof o=="string")return s[o];if(typeof o=="undefined"){const r=s[t];return r===void 0?"":r}};let PSe=0;class Ru{constructor(t){this.id=PSe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)Ht(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const n=t.props;if(n&&typeof n.isLeaf!="undefined"){const r=Um(this,"isLeaf");typeof r=="boolean"&&(this.isLeafByUser=r)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&this.expand(),Array.isArray(this.data)||iD(this,this.data),!this.data)return;const s=t.defaultExpandedKeys,o=t.key;o&&s&&s.indexOf(this.key)!==-1&&this.expand(null,t.autoExpandParent),o&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Array.isArray(t)||iD(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&this.data instanceof Array?n=this.data:n=Um(this,"children")||[];for(let s=0,o=n.length;s<o;s++)this.insertChild({data:n[s]})}get label(){return Um(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return Um(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(s=>s===t||n&&s.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,s){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof Ru)){if(!s){const o=this.getChildren(!0);o.indexOf(t.data)===-1&&(typeof n=="undefined"||n<0?o.push(t.data):o.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=Sn(new Ru(t)),t instanceof Ru&&t.initialize()}t.level=this.level+1,typeof n=="undefined"||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let s;n&&(s=this.childNodes.indexOf(n)),this.insertChild(t,s)}insertAfter(t,n){let s;n&&(s=this.childNodes.indexOf(n),s!==-1&&(s+=1)),this.insertChild(t,s)}removeChild(t){const n=this.getChildren()||[],s=n.indexOf(t.data);s>-1&&n.splice(s,1);const o=this.childNodes.indexOf(t);o>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let s=0;s<this.childNodes.length;s++)if(this.childNodes[s].data===t){n=this.childNodes[s];break}n&&this.removeChild(n)}expand(t,n){const s=()=>{if(n){let o=this.parent;for(;o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(o=>{o.canFocus=!0})};this.shouldLoadData()?this.loadData(o=>{Array.isArray(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Xv(this),s())}):s()}doCreateChildren(t,n={}){t.forEach(s=>{this.insertChild(Object.assign({data:s},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser!="undefined"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,s,o){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:i,allWithoutDisable:a}=DC(this.childNodes);!this.isLeaf&&!i&&a&&(this.checked=!1,t=!1);const l=()=>{if(n){const u=this.childNodes;for(let f=0,h=u.length;f<h;f++){const p=u[f];o=o||t!==!1;const g=p.disabled?p.checked:o;p.setChecked(g,n,!0,o)}const{half:c,all:d}=DC(u);d||(this.checked=d,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Xv(this)},{checked:t!==!1});return}else l()}const r=this.parent;!r||r.level===0||s||Xv(r)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const s=this.store.props;let o="children";return s&&(o=s.children||"children"),n[o]===void 0&&(n[o]=null),t&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(r=>r.data),s={},o=[];t.forEach((r,i)=>{const a=r[cd];!!a&&n.findIndex(u=>u[cd]===a)>=0?s[a]={index:i,data:r}:o.push({index:i,data:r})}),this.store.lazy||n.forEach(r=>{s[r[cd]]||this.removeChildByData(r)}),o.forEach(({index:r,data:i})=>{this.insertChild({data:i},r)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const s=o=>{this.loaded=!0,this.loading=!1,this.childNodes=[],this.doCreateChildren(o,n),this.updateLeafState(),t&&t.call(this,o)};this.store.load(this,s)}else t&&t.call(this)}}class FSe{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const n in t)Ht(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){this.root=new Ru({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load?this.load(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()}):this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,s=this.lazy,o=function(r){const i=r.root?r.root.childNodes:r.childNodes;if(i.forEach(a=>{a.visible=n.call(a,t,a.data,a),o(a)}),!r.visible&&i.length){let a=!0;a=!i.some(l=>l.visible),r.root?r.root.visible=a===!1:r.visible=a===!1}!t||r.visible&&!r.isLeaf&&!s&&r.expand()};o(this)}setData(t){t!==this.root.data?(this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(t){if(t instanceof Ru)return t;const n=typeof t!="object"?t:mk(this.key,t);return this.nodesMap[n]||null}insertBefore(t,n){const s=this.getNode(n);s.parent.insertBefore({data:t},s)}insertAfter(t,n){const s=this.getNode(n);s.parent.insertAfter({data:t},s)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const s=n?this.getNode(n):this.root;s&&s.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(s=>{const o=n[s];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).indexOf(t.key)!==-1&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;!t||!t.data||(n?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(s=>{this.deregisterNode(s)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const s=[],o=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(a=>{(a.checked||n&&a.indeterminate)&&(!t||t&&a.isLeaf)&&s.push(a.data),o(a)})};return o(this),s}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(r=>{r.indeterminate&&t.push(r.data),n(r)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const s in n)Ht(n,s)&&t.push(n[s]);return t}updateChildren(t,n){const s=this.nodesMap[t];if(!s)return;const o=s.childNodes;for(let r=o.length-1;r>=0;r--){const i=o[r];this.remove(i.data)}for(let r=0,i=n.length;r<i;r++){const a=n[r];this.append(a,s.data)}}_setCheckedKeys(t,n=!1,s){const o=this._getAllNodes().sort((a,l)=>l.level-a.level),r=Object.create(null),i=Object.keys(s);o.forEach(a=>a.setChecked(!1,!1));for(let a=0,l=o.length;a<l;a++){const u=o[a],c=u.data[t].toString();if(!(i.indexOf(c)>-1)){u.checked&&!r[c]&&u.setChecked(!1,!1);continue}let f=u.parent;for(;f&&f.level>0;)r[f.data[t]]=!0,f=f.parent;if(u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),n){u.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(m=>{m.isLeaf||m.setChecked(!1,!1),h(m)})};h(u)}}}setCheckedNodes(t,n=!1){const s=this.key,o={};t.forEach(r=>{o[(r||{})[s]]=!0}),this._setCheckedKeys(s,n,o)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const s=this.key,o={};t.forEach(r=>{o[r]=!0}),this._setCheckedKeys(s,n,o)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const s=this.getNode(n);s&&s.expand(null,this.autoExpandParent)})}setChecked(t,n,s){const o=this.getNode(t);o&&o.setChecked(!!n,s)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){const s=t[this.key],o=this.nodesMap[s];this.setCurrentNode(o),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,n=!0){if(t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const s=this.getNode(t);s&&(this.setCurrentNode(s),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const LSe=ge({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=Ze("NodeInstance"),n=Ze("RootTree");return()=>{const s=e.node,{data:o,store:r}=s;return e.renderContent?e.renderContent(He,{_self:t,node:s,data:o,store:r}):n.ctx.slots.default?n.ctx.slots.default({node:s,data:o}):He("span",{class:"el-tree-node__label"},[s.label])}}});function Z4(e){const t=Ze("TreeNodeMap",null),n={treeNodeExpand:s=>{e.node!==s&&e.node.collapse()},children:[]};return t&&t.children.push(n),Vt("TreeNodeMap",n),{broadcastExpanded:s=>{if(!!e.accordion)for(const o of n.children)o.treeNodeExpand(s)}}}const J4=Symbol("dragEvents");function BSe({props:e,ctx:t,el$:n,dropIndicator$:s,store:o}){const r=L({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Vt(J4,{treeNodeDragStart:({event:u,treeNode:c})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(c.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}r.value.draggingNode=c,t.emit("node-drag-start",c.node,u)},treeNodeDragOver:({event:u,treeNode:c})=>{const d=c,f=r.value.dropNode;f&&f!==d&&yo(f.$el,"is-drop-inner");const h=r.value.draggingNode;if(!h||!d)return;let p=!0,g=!0,m=!0,v=!0;typeof e.allowDrop=="function"&&(p=e.allowDrop(h.node,d.node,"prev"),v=g=e.allowDrop(h.node,d.node,"inner"),m=e.allowDrop(h.node,d.node,"next")),u.dataTransfer.dropEffect=g||p||m?"move":"none",(p||g||m)&&f!==d&&(f&&t.emit("node-drag-leave",h.node,f.node,u),t.emit("node-drag-enter",h.node,d.node,u)),(p||g||m)&&(r.value.dropNode=d),d.node.nextSibling===h.node&&(m=!1),d.node.previousSibling===h.node&&(p=!1),d.node.contains(h.node,!1)&&(g=!1),(h.node===d.node||h.node.contains(d.node))&&(p=!1,g=!1,m=!1);const b=d.$el.getBoundingClientRect(),$=n.value.getBoundingClientRect();let y;const w=p?g?.25:m?.45:1:-1,C=m?g?.75:p?.55:0:1;let x=-9999;const k=u.clientY-b.top;k<b.height*w?y="before":k>b.height*C?y="after":g?y="inner":y="none";const I=d.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),S=s.value;y==="before"?x=I.top-$.top:y==="after"&&(x=I.bottom-$.top),S.style.top=`${x}px`,S.style.left=`${I.right-$.left}px`,y==="inner"?Xo(d.$el,"is-drop-inner"):yo(d.$el,"is-drop-inner"),r.value.showDropIndicator=y==="before"||y==="after",r.value.allowDrop=r.value.showDropIndicator||v,r.value.dropType=y,t.emit("node-drag-over",h.node,d.node,u)},treeNodeDragEnd:u=>{const{draggingNode:c,dropType:d,dropNode:f}=r.value;if(u.preventDefault(),u.dataTransfer.dropEffect="move",c&&f){const h={data:c.node.data};d!=="none"&&c.node.remove(),d==="before"?f.node.parent.insertBefore(h,f.node):d==="after"?f.node.parent.insertAfter(h,f.node):d==="inner"&&f.node.insertChild(h),d!=="none"&&o.value.registerNode(h),yo(f.$el,"is-drop-inner"),t.emit("node-drag-end",c.node,f.node,d,u),d!=="none"&&t.emit("node-drop",c.node,f.node,d,u)}c&&!f&&t.emit("node-drag-end",c.node,null,d,u),r.value.showDropIndicator=!1,r.value.draggingNode=null,r.value.dropNode=null,r.value.allowDrop=!0}}),{dragState:r}}const zSe=ge({name:"ElTreeNode",components:{ElCollapseTransition:M0,ElCheckbox:ki,NodeContent:LSe,ElIcon:Ot,Loading:Ra},props:{node:{type:Ru,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const{broadcastExpanded:n}=Z4(e),s=Ze("RootTree"),o=L(!1),r=L(!1),i=L(null),a=L(null),l=L(null),u=Ze(J4),c=Lt();Vt("NodeInstance",c),e.node.expanded&&(o.value=!0,r.value=!0);const d=s.props.children||"children";Oe(()=>{const k=e.node.data[d];return k&&[...k]},()=>{e.node.updateChildren()}),Oe(()=>e.node.indeterminate,k=>{p(e.node.checked,k)}),Oe(()=>e.node.checked,k=>{p(k,e.node.indeterminate)}),Oe(()=>e.node.expanded,k=>{dt(()=>o.value=k),k&&(r.value=!0)});const f=k=>mk(s.props.nodeKey,k.data),h=k=>{const I=e.props.class;if(!I)return{};let S;if(Ft(I)){const{data:T}=k;S=I(T,k)}else S=I;return Xt(S)?{[S]:!0}:S},p=(k,I)=>{(i.value!==k||a.value!==I)&&s.ctx.emit("check-change",e.node.data,k,I),i.value=k,a.value=I},g=k=>{const I=s.store.value;I.setCurrentNode(e.node),s.ctx.emit("current-change",I.currentNode?I.currentNode.data:null,I.currentNode),s.currentNode.value=e.node,s.props.expandOnClickNode&&v(),s.props.checkOnClickNode&&!e.node.disabled&&b(null,{target:{checked:!e.node.checked}}),s.ctx.emit("node-click",e.node.data,e.node,c,k)},m=k=>{s.instance.vnode.props.onNodeContextmenu&&(k.stopPropagation(),k.preventDefault()),s.ctx.emit("node-contextmenu",k,e.node.data,e.node,c)},v=()=>{e.node.isLeaf||(o.value?(s.ctx.emit("node-collapse",e.node.data,e.node,c),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,c)))},b=(k,I)=>{e.node.setChecked(I.target.checked,!s.props.checkStrictly),dt(()=>{const S=s.store.value;s.ctx.emit("check",e.node.data,{checkedNodes:S.getCheckedNodes(),checkedKeys:S.getCheckedKeys(),halfCheckedNodes:S.getHalfCheckedNodes(),halfCheckedKeys:S.getHalfCheckedKeys()})})};return{node$:l,tree:s,expanded:o,childNodeRendered:r,oldChecked:i,oldIndeterminate:a,getNodeKey:f,getNodeClass:h,handleSelectChange:p,handleClick:g,handleContextMenu:m,handleExpandIconClick:v,handleCheckChange:b,handleChildNodeExpand:(k,I,S)=>{n(I),s.ctx.emit("node-expand",k,I,S)},handleDragStart:k=>{!s.props.draggable||u.treeNodeDragStart({event:k,treeNode:e})},handleDragOver:k=>{k.preventDefault(),!!s.props.draggable&&u.treeNodeDragOver({event:k,treeNode:{$el:l.value,node:e.node}})},handleDrop:k=>{k.preventDefault()},handleDragEnd:k=>{!s.props.draggable||u.treeNodeDragEnd(k)},CaretRight:$F}}}),VSe=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],WSe=["aria-expanded"];function HSe(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("el-checkbox"),l=ie("loading"),u=ie("node-content"),c=ie("el-tree-node"),d=ie("el-collapse-transition");return $t((A(),B("div",{ref:"node$",class:q(["el-tree-node",ut({"is-expanded":e.expanded,"is-current":e.node.isCurrent,"is-hidden":!e.node.visible,"is-focusable":!e.node.disabled,"is-checked":!e.node.disabled&&e.node.checked},e.getNodeClass(e.node))]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=ht((...f)=>e.handleClick&&e.handleClick(...f),["stop"])),onContextmenu:t[2]||(t[2]=(...f)=>e.handleContextMenu&&e.handleContextMenu(...f)),onDragstart:t[3]||(t[3]=ht((...f)=>e.handleDragStart&&e.handleDragStart(...f),["stop"])),onDragover:t[4]||(t[4]=ht((...f)=>e.handleDragOver&&e.handleDragOver(...f),["stop"])),onDragend:t[5]||(t[5]=ht((...f)=>e.handleDragEnd&&e.handleDragEnd(...f),["stop"])),onDrop:t[6]||(t[6]=ht((...f)=>e.handleDrop&&e.handleDrop(...f),["stop"]))},[W("div",{class:"el-tree-node__content",style:nt({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(A(),ve(i,{key:0,class:q([{"is-leaf":e.node.isLeaf,expanded:!e.node.isLeaf&&e.expanded},"el-tree-node__expand-icon"]),onClick:ht(e.handleExpandIconClick,["stop"])},{default:re(()=>[(A(),ve(tn(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):ce("v-if",!0),e.showCheckbox?(A(),ve(a,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=ht(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):ce("v-if",!0),e.node.loading?(A(),ve(i,{key:2,class:"el-tree-node__loading-icon is-loading"},{default:re(()=>[le(l)]),_:1})):ce("v-if",!0),le(u,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],4),le(d,null,{default:re(()=>[!e.renderAfterExpand||e.childNodeRendered?$t((A(),B("div",{key:0,class:"el-tree-node__children",role:"group","aria-expanded":e.expanded},[(A(!0),B(at,null,Zt(e.node.childNodes,f=>(A(),ve(c,{key:e.getNodeKey(f),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:f,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],8,WSe)),[[en,e.expanded]]):ce("v-if",!0)]),_:1})],42,VSe)),[[en,e.node.visible]])}var USe=We(zSe,[["render",HSe]]);function jSe({el$:e},t){const n=vo([]),s=vo([]);Rt(()=>{r(),bn(e.value,"keydown",o)}),ls(()=>{Kn(e.value,"keydown",o)}),_i(()=>{n.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),s.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),Oe(s,i=>{i.forEach(a=>{a.setAttribute("tabindex","-1")})});const o=i=>{const a=i.target;if(a.className.indexOf("el-tree-node")===-1)return;const l=i.code;n.value=Array.from(e.value.querySelectorAll(".is-focusable[role=treeitem]"));const u=n.value.indexOf(a);let c;if([Qe.up,Qe.down].indexOf(l)>-1){if(i.preventDefault(),l===Qe.up){c=u===-1?0:u!==0?u-1:n.value.length-1;const f=c;for(;!t.value.getNode(n.value[c].dataset.key).canFocus;){if(c--,c===f){c=-1;break}c<0&&(c=n.value.length-1)}}else{c=u===-1?0:u<n.value.length-1?u+1:0;const f=c;for(;!t.value.getNode(n.value[c].dataset.key).canFocus;){if(c++,c===f){c=-1;break}c>=n.value.length&&(c=0)}}c!==-1&&n.value[c].focus()}[Qe.left,Qe.right].indexOf(l)>-1&&(i.preventDefault(),a.click());const d=a.querySelector('[type="checkbox"]');[Qe.enter,Qe.space].indexOf(l)>-1&&d&&(i.preventDefault(),d.click())},r=()=>{var i;n.value=Array.from(e.value.querySelectorAll(".is-focusable[role=treeitem]")),s.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const a=e.value.querySelectorAll(".is-checked[role=treeitem]");if(a.length){a[0].setAttribute("tabindex","0");return}(i=n.value[0])==null||i.setAttribute("tabindex","0")}}const GSe=ge({name:"ElTree",components:{ElTreeNode:USe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:[String,Object]},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=In(),s=L(new FSe({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));s.value.initialize();const o=L(s.value.root),r=L(null),i=L(null),a=L(null),{broadcastExpanded:l}=Z4(e),{dragState:u}=BSe({props:e,ctx:t,el$:i,dropIndicator$:a,store:s});jSe({el$:i},s);const c=R(()=>{const{childNodes:D}=o.value;return!D||D.length===0||D.every(({visible:F})=>!F)});Oe(()=>e.defaultCheckedKeys,D=>{s.value.setDefaultCheckedKey(D)}),Oe(()=>e.defaultExpandedKeys,D=>{s.value.defaultExpandedKeys=D,s.value.setDefaultExpandedKeys(D)}),Oe(()=>e.data,D=>{s.value.setData(D)},{deep:!0}),Oe(()=>e.checkStrictly,D=>{s.value.checkStrictly=D});const d=D=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(D)},f=D=>mk(e.nodeKey,D.data),h=D=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const F=s.value.getNode(D);if(!F)return[];const V=[F.data];let U=F.parent;for(;U&&U!==o.value;)V.push(U.data),U=U.parent;return V.reverse()},p=(D,F)=>s.value.getCheckedNodes(D,F),g=D=>s.value.getCheckedKeys(D),m=()=>{const D=s.value.getCurrentNode();return D?D.data:null},v=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const D=m();return D?D[e.nodeKey]:null},b=(D,F)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(D,F)},$=(D,F)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(D,F)},y=(D,F,V)=>{s.value.setChecked(D,F,V)},w=()=>s.value.getHalfCheckedNodes(),C=()=>s.value.getHalfCheckedKeys(),x=(D,F=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");s.value.setUserCurrentNode(D,F)},k=(D,F=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");s.value.setCurrentNodeKey(D,F)},I=D=>s.value.getNode(D),S=D=>{s.value.remove(D)},T=(D,F)=>{s.value.append(D,F)},_=(D,F)=>{s.value.insertBefore(D,F)},N=(D,F)=>{s.value.insertAfter(D,F)},O=(D,F,V)=>{l(F),t.emit("node-expand",D,F,V)},M=(D,F)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(D,F)};return Vt("RootTree",{ctx:t,props:e,store:s,root:o,currentNode:r,instance:Lt()}),{store:s,root:o,currentNode:r,dragState:u,el$:i,dropIndicator$:a,isEmpty:c,filter:d,getNodeKey:f,getNodePath:h,getCheckedNodes:p,getCheckedKeys:g,getCurrentNode:m,getCurrentKey:v,setCheckedNodes:b,setCheckedKeys:$,setChecked:y,getHalfCheckedNodes:w,getHalfCheckedKeys:C,setCurrentNode:x,setCurrentKey:k,t:n,getNode:I,remove:S,append:T,insertBefore:_,insertAfter:N,handleNodeExpand:O,updateKeyChildren:M}}}),KSe={key:0,class:"el-tree__empty-block"},qSe={class:"el-tree__empty-text"},YSe={ref:"dropIndicator$",class:"el-tree__drop-indicator"};function XSe(e,t,n,s,o,r){var i;const a=ie("el-tree-node");return A(),B("div",{ref:"el$",class:q(["el-tree",{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":e.dragState.dropType==="inner"}]),role:"tree"},[(A(!0),B(at,null,Zt(e.root.childNodes,l=>(A(),ve(a,{key:e.getNodeKey(l),node:l,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(A(),B("div",KSe,[W("span",qSe,Pe((i=e.emptyText)!=null?i:e.t("el.tree.emptyText")),1)])):ce("v-if",!0),$t(W("div",YSe,null,512),[[en,e.dragState.showDropIndicator]])],2)}var Zv=We(GSe,[["render",XSe]]);Zv.install=e=>{e.component(Zv.name,Zv)};const ZSe=Zv,JSe=ZSe,vk=Symbol(),QSe={key:-1,level:-1,data:{}};var rh=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(rh||{}),RC=(e=>(e.ADD="add",e.DELETE="delete",e))(RC||{});const eIe=mt({data:{type:Je(Array),default:()=>Ns([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Je(Object),default:()=>Ns({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Je(Array),default:()=>Ns([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Je(Array),default:()=>Ns([])},indent:{type:Number,default:16},icon:{type:String},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Je([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Je(Function)},perfMode:{type:Boolean,default:!0}}),tIe=mt({node:{type:Je(Object),default:()=>Ns(QSe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1}}),nIe=mt({node:{type:Je(Object),required:!0}}),Q4="node-click",eB="node-expand",tB="node-collapse",nB="current-change",sB="check",oB="check-change",rB="node-contextmenu",sIe={[Q4]:(e,t,n)=>e&&t&&n,[eB]:(e,t)=>e&&t,[tB]:(e,t)=>e&&t,[nB]:(e,t)=>e&&t,[sB]:(e,t)=>e&&t,[oB]:(e,t)=>e&&typeof t=="boolean",[rB]:(e,t,n)=>e&&t&&n},oIe={click:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&typeof t=="boolean"};function rIe(e,t){const n=L(new Set),s=L(new Set),{emit:o}=Lt();Oe(()=>t.value,()=>dt(()=>{b(e.defaultCheckedKeys)}),{immediate:!0});const r=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:$,maxLevel:y}=t.value,w=n.value,C=new Set;for(let x=y-1;x>=1;--x){const k=$.get(x);!k||k.forEach(I=>{const S=I.children;if(S){let T=!0,_=!1;for(let N=0;N<S.length;++N){const M=S[N].key;if(w.has(M))_=!0;else if(C.has(M)){T=!1,_=!0;break}else T=!1}T?w.add(I.key):_?(C.add(I.key),w.delete(I.key)):(w.delete(I.key),C.delete(I.key))}})}s.value=C},i=$=>n.value.has($.key),a=$=>s.value.has($.key),l=($,y,w=!0)=>{const C=n.value,x=(k,I)=>{C[I?RC.ADD:RC.DELETE](k.key);const S=k.children;!e.checkStrictly&&S&&S.forEach(T=>{T.disabled||x(T,I)})};x($,y),r(),w&&u($,y)},u=($,y)=>{const{checkedNodes:w,checkedKeys:C}=p(),{halfCheckedNodes:x,halfCheckedKeys:k}=g();o(sB,$.data,{checkedKeys:C,checkedNodes:w,halfCheckedKeys:k,halfCheckedNodes:x}),o(oB,$.data,y)};function c($=!1){return p($).checkedKeys}function d($=!1){return p($).checkedNodes}function f(){return g().halfCheckedKeys}function h(){return g().halfCheckedNodes}function p($=!1){const y=[],w=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:C}=t.value;n.value.forEach(x=>{const k=C.get(x);k&&(!$||$&&k.isLeaf)&&(w.push(x),y.push(k.data))})}return{checkedKeys:w,checkedNodes:y}}function g(){const $=[],y=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:w}=t.value;s.value.forEach(C=>{const x=w.get(C);x&&(y.push(C),$.push(x.data))})}return{halfCheckedNodes:$,halfCheckedKeys:y}}function m($){n.value.clear(),b($)}function v($,y){if((t==null?void 0:t.value)&&e.showCheckbox){const w=t.value.treeNodeMap.get($);w&&l(w,y,!1)}}function b($){if(t==null?void 0:t.value){const{treeNodeMap:y}=t.value;if(e.showCheckbox&&y&&$)for(let w=0;w<$.length;++w){const C=$[w],x=y.get(C);x&&!i(x)&&l(x,!0,!1)}}}return{updateCheckedKeys:r,toggleCheckbox:l,isChecked:i,isIndeterminate:a,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:v,setCheckedKeys:m}}function iIe(e,t){const n=L(new Set([])),s=L(new Set([])),o=R(()=>Ft(e.filterMethod));function r(a){var l;if(!o.value)return;const u=new Set,c=s.value,d=n.value,f=[],h=((l=t.value)==null?void 0:l.treeNodes)||[],p=e.filterMethod;d.clear();function g(m){m.forEach(v=>{f.push(v),(p==null?void 0:p(a,v.data))?f.forEach($=>{u.add($.key)}):v.isLeaf&&d.add(v.key);const b=v.children;if(b&&g(b),!v.isLeaf){if(!u.has(v.key))d.add(v.key);else if(b){let $=!0;for(let y=0;y<b.length;++y){const w=b[y];if(!d.has(w.key)){$=!1;break}}$?c.add(v.key):c.delete(v.key)}}f.pop()})}return g(h),u}function i(a){return s.value.has(a.key)}return{hiddenExpandIconKeySet:s,hiddenNodeKeySet:n,doFilter:r,isForceHiddenExpandIcon:i}}function aIe(e,t){const n=L(new Set(e.defaultExpandedKeys)),s=L(),o=vo();Oe(()=>e.currentNodeKey,Y=>{s.value=Y},{immediate:!0}),Oe(()=>e.data,Y=>{G(Y)},{immediate:!0});const{isIndeterminate:r,isChecked:i,toggleCheckbox:a,getCheckedKeys:l,getCheckedNodes:u,getHalfCheckedKeys:c,getHalfCheckedNodes:d,setChecked:f,setCheckedKeys:h}=rIe(e,o),{doFilter:p,hiddenNodeKeySet:g,isForceHiddenExpandIcon:m}=iIe(e,o),v=R(()=>{var Y;return((Y=e.props)==null?void 0:Y.value)||rh.KEY}),b=R(()=>{var Y;return((Y=e.props)==null?void 0:Y.children)||rh.CHILDREN}),$=R(()=>{var Y;return((Y=e.props)==null?void 0:Y.disabled)||rh.DISABLED}),y=R(()=>{var Y;return((Y=e.props)==null?void 0:Y.label)||rh.LABEL}),w=R(()=>{const Y=n.value,X=g.value,ae=[],Se=o.value&&o.value.treeNodes||[];function Le(){const Be=[];for(let Fe=Se.length-1;Fe>=0;--Fe)Be.push(Se[Fe]);for(;Be.length;){const Fe=Be.pop();if(!!Fe&&(X.has(Fe.key)||ae.push(Fe),Y.has(Fe.key))){const j=Fe.children;if(j){const Q=j.length;for(let H=Q-1;H>=0;--H)Be.push(j[H])}}}}return Le(),ae}),C=R(()=>w.value.length>0);function x(Y){const X=new Map,ae=new Map;let Se=1;function Le(Fe,j=1,Q=void 0){var H;const se=[];for(let we=0;we<Fe.length;++we){const J=Fe[we],_e=S(J),Ie={level:j,key:_e,data:J};Ie.label=_(J),Ie.parent=Q;const fe=I(J);Ie.disabled=T(J),Ie.isLeaf=!fe||fe.length===0,fe&&fe.length&&(Ie.children=Le(fe,j+1,Ie)),se.push(Ie),X.set(_e,Ie),ae.has(j)||ae.set(j,[]),(H=ae.get(j))==null||H.push(Ie)}return j>Se&&(Se=j),se}const Be=Le(Y);return{treeNodeMap:X,levelTreeNodeMap:ae,maxLevel:Se,treeNodes:Be}}function k(Y){const X=p(Y);X&&(n.value=X)}function I(Y){return Y[b.value]}function S(Y){return Y?Y[v.value]:""}function T(Y){return Y[$.value]}function _(Y){return Y[y.value]}function N(Y){n.value.has(Y.key)?V(Y):F(Y)}function O(Y,X){t(Q4,Y.data,Y,X),M(Y),e.expandOnClickNode&&N(Y),e.showCheckbox&&e.checkOnClickNode&&!Y.disabled&&a(Y,!i(Y),!0)}function M(Y){be(Y)||(s.value=Y.key,t(nB,Y.data,Y))}function D(Y,X){a(Y,X)}function F(Y){const X=n.value;if((o==null?void 0:o.value)&&e.accordion){const{treeNodeMap:ae}=o.value;X.forEach(Se=>{const Le=ae.get(Se);Le&&Le.level===Le.level&&X.delete(Se)})}X.add(Y.key),t(eB,Y.data,Y)}function V(Y){n.value.delete(Y.key),t(tB,Y.data,Y)}function U(Y){return n.value.has(Y.key)}function ne(Y){return!!Y.disabled}function be(Y){const X=s.value;return!!X&&X===Y.key}function te(){var Y,X;if(!!s.value)return(X=(Y=o==null?void 0:o.value)==null?void 0:Y.treeNodeMap.get(s.value))==null?void 0:X.data}function he(){return s.value}function oe(Y){s.value=Y}function G(Y){dt(()=>o.value=x(Y))}return{tree:o,flattenTree:w,isNotEmpty:C,getKey:S,getChildren:I,toggleExpand:N,toggleCheckbox:a,isExpanded:U,isChecked:i,isIndeterminate:r,isDisabled:ne,isCurrent:be,isForceHiddenExpandIcon:m,handleNodeClick:O,handleNodeCheck:D,getCurrentNode:te,getCurrentKey:he,setCurrentKey:oe,getCheckedKeys:l,getCheckedNodes:u,getHalfCheckedKeys:c,getHalfCheckedNodes:d,setChecked:f,setCheckedKeys:h,filter:k,setData:G}}var lIe=ge({name:"ElTreeNodeContent",props:nIe,setup(e){const t=Ze(vk);return()=>{const n=e.node,{data:s}=n;return(t==null?void 0:t.ctx.slots.default)?t.ctx.slots.default({node:n,data:s}):He("span",{class:"el-tree-node__label"},[n==null?void 0:n.label])}}});const uIe="caret-right",cIe=ge({name:"ElTreeNode",components:{ElIcon:Ot,CaretRight:$F,ElCheckbox:ki,ElNodeContent:lIe},props:tIe,emits:oIe,setup(e,{emit:t}){const n=Ze(vk),s=R(()=>{var u;return(u=n==null?void 0:n.props.indent)!=null?u:16}),o=R(()=>{var u;return(u=n==null?void 0:n.props.icon)!=null?u:uIe});return{indent:s,icon:o,handleClick:u=>{t("click",e.node,u)},handleExpandIconClick:()=>{t("toggle",e.node)},handleCheckChange:u=>{t("check",e.node,u)},handleContextMenu:u=>{var c,d,f,h;((f=(d=(c=n==null?void 0:n.instance)==null?void 0:c.vnode)==null?void 0:d.props)==null?void 0:f.onNodeContextmenu)&&(u.stopPropagation(),u.preventDefault()),n==null||n.ctx.emit(rB,u,(h=e.node)==null?void 0:h.data,e.node)}}}}),dIe=["aria-expanded","aria-disabled","aria-checked","data-key"];function fIe(e,t,n,s,o,r){var i,a,l;const u=ie("el-icon"),c=ie("el-checkbox"),d=ie("el-node-content");return A(),B("div",{ref:"node$",class:q(["el-tree-node",{"is-expanded":e.expanded,"is-current":e.current,"is-focusable":!e.disabled,"is-checked":!e.disabled&&e.checked}]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.disabled,"aria-checked":e.checked,"data-key":(i=e.node)==null?void 0:i.key,onClick:t[1]||(t[1]=ht((...f)=>e.handleClick&&e.handleClick(...f),["stop"])),onContextmenu:t[2]||(t[2]=(...f)=>e.handleContextMenu&&e.handleContextMenu(...f))},[W("div",{class:"el-tree-node__content",style:nt({paddingLeft:`${(e.node.level-1)*e.indent}px`})},[e.icon?(A(),ve(u,{key:0,class:q([{"is-leaf":(a=e.node)==null?void 0:a.isLeaf,"is-hidden":e.hiddenExpandIcon,expanded:!((l=e.node)==null?void 0:l.isLeaf)&&e.expanded},"el-tree-node__expand-icon"]),onClick:ht(e.handleExpandIconClick,["stop"])},{default:re(()=>[(A(),ve(tn(e.icon)))]),_:1},8,["class","onClick"])):ce("v-if",!0),e.showCheckbox?(A(),ve(c,{key:1,"model-value":e.checked,indeterminate:e.indeterminate,disabled:e.disabled,onChange:e.handleCheckChange,onClick:t[0]||(t[0]=ht(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled","onChange"])):ce("v-if",!0),le(d,{node:e.node},null,8,["node"])],4)],42,dIe)}var hIe=We(cIe,[["render",fIe]]);const pIe=ge({name:"ElTreeV2",components:{ElTreeNode:hIe,FixedSizeList:R4},props:eIe,emits:sIe,setup(e,t){Vt(vk,{ctx:t,props:e,instance:Lt()});const{t:n}=In(),{flattenTree:s,isNotEmpty:o,toggleExpand:r,isExpanded:i,isIndeterminate:a,isChecked:l,isDisabled:u,isCurrent:c,isForceHiddenExpandIcon:d,toggleCheckbox:f,handleNodeClick:h,handleNodeCheck:p,getCurrentNode:g,getCurrentKey:m,setCurrentKey:v,getCheckedKeys:b,getCheckedNodes:$,getHalfCheckedKeys:y,getHalfCheckedNodes:w,setChecked:C,setCheckedKeys:x,filter:k,setData:I}=aIe(e,t.emit);return t.expose({getCurrentNode:g,getCurrentKey:m,setCurrentKey:v,getCheckedKeys:b,getCheckedNodes:$,getHalfCheckedKeys:y,getHalfCheckedNodes:w,setChecked:C,setCheckedKeys:x,filter:k,setData:I}),{t:n,flattenTree:s,itemSize:26,isNotEmpty:o,toggleExpand:r,toggleCheckbox:f,isExpanded:i,isIndeterminate:a,isChecked:l,isDisabled:u,isCurrent:c,isForceHiddenExpandIcon:d,handleNodeClick:h,handleNodeCheck:p}}}),gIe={key:1,class:"el-tree__empty-block"},mIe={class:"el-tree__empty-text"};function vIe(e,t,n,s,o,r){var i;const a=ie("el-tree-node"),l=ie("fixed-size-list");return A(),B("div",{class:q(["el-tree",{"el-tree--highlight-current":e.highlightCurrent}]),role:"tree"},[e.isNotEmpty?(A(),ve(l,{key:0,"class-name":"el-tree-virtual-list",data:e.flattenTree,total:e.flattenTree.length,height:e.height,"item-size":e.itemSize,"perf-mode":e.perfMode},{default:re(({data:u,index:c,style:d})=>[(A(),ve(a,{key:u[c].key,style:nt(d),node:u[c],expanded:e.isExpanded(u[c]),"show-checkbox":e.showCheckbox,checked:e.isChecked(u[c]),indeterminate:e.isIndeterminate(u[c]),disabled:e.isDisabled(u[c]),current:e.isCurrent(u[c]),"hidden-expand-icon":e.isForceHiddenExpandIcon(u[c]),onClick:e.handleNodeClick,onToggle:e.toggleExpand,onCheck:e.handleNodeCheck},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["data","total","height","item-size","perf-mode"])):(A(),B("div",gIe,[W("span",mIe,Pe((i=e.emptyText)!=null?i:e.t("el.tree.emptyText")),1)]))],2)}var bIe=We(pIe,[["render",vIe]]);const yIe=Wt(bIe);function aD(e,t,n){let s;n.response?s=`${n.response.error||n.response}`:n.responseText?s=`${n.responseText}`:s=`fail to ${t.method} ${e} ${n.status}`;const o=new Error(s);return o.status=n.status,o.method=t.method,o.url=e,o}function wIe(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}function iB(e){if(typeof XMLHttpRequest=="undefined")return;const t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(i){i.total>0&&(i.percent=i.loaded/i.total*100),e.onProgress(i)});const s=new FormData;e.data&&Object.keys(e.data).forEach(r=>{s.append(r,e.data[r])}),s.append(e.filename,e.file,e.file.name),t.onerror=function(){e.onError(aD(n,e,t))},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(aD(n,e,t));e.onSuccess(wIe(t))},t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const o=e.headers||{};for(const r in o)Ht(o,r)&&o[r]!==null&&t.setRequestHeader(r,o[r]);return o instanceof Headers&&o.forEach((r,i)=>{t.setRequestHeader(i,r)}),t.send(s),t}const $Ie=ge({name:"ElUploadList",components:{ElProgress:C4,ElIcon:Ot,Document:Cre,Delete:mre,Close:xi,ZoomIn:IF,Check:Cd,CircleCheck:vb},props:{files:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},handlePreview:{type:Function,default:()=>rn},listType:{type:String,default:"text"}},emits:["remove"],setup(e,{emit:t}){const{t:n}=In(),s=i=>{e.handlePreview(i)},o=i=>{i.target.focus()},r=i=>{t("remove",i)};return{focusing:L(!1),handleClick:s,handleRemove:r,onFileClicked:o,t:n}}}),CIe=["onKeydown"],xIe=["src"],kIe=["onClick"],SIe={class:"el-upload-list__item-status-label"},IIe={key:2,class:"el-icon--close-tip"},TIe={key:4,class:"el-upload-list__item-actions"},EIe=["onClick"],_Ie=["onClick"];function NIe(e,t,n,s,o,r){const i=ie("document"),a=ie("el-icon"),l=ie("circle-check"),u=ie("check"),c=ie("close"),d=ie("el-progress"),f=ie("zoom-in"),h=ie("delete");return A(),ve(Yq,{tag:"ul",class:q(["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}]),name:"el-list"},{default:re(()=>[(A(!0),B(at,null,Zt(e.files,p=>(A(),B("li",{key:p.uid||p,class:q(["el-upload-list__item","is-"+p.status,e.focusing?"focusing":""]),tabindex:"0",onKeydown:Ut(g=>!e.disabled&&e.handleRemove(p),["delete"]),onFocus:t[0]||(t[0]=g=>e.focusing=!0),onBlur:t[1]||(t[1]=g=>e.focusing=!1),onClick:t[2]||(t[2]=(...g)=>e.onFileClicked&&e.onFileClicked(...g))},[Re(e.$slots,"default",{file:p},()=>[p.status!=="uploading"&&["picture-card","picture"].includes(e.listType)?(A(),B("img",{key:0,class:"el-upload-list__item-thumbnail",src:p.url,alt:""},null,8,xIe)):ce("v-if",!0),W("a",{class:"el-upload-list__item-name",onClick:g=>e.handleClick(p)},[le(a,{class:"el-icon--document"},{default:re(()=>[le(i)]),_:1}),qt(" "+Pe(p.name),1)],8,kIe),W("label",SIe,[e.listType==="text"?(A(),ve(a,{key:0,class:"el-icon--upload-success el-icon--circle-check"},{default:re(()=>[le(l)]),_:1})):["picture-card","picture"].includes(e.listType)?(A(),ve(a,{key:1,class:"el-icon--upload-success el-icon--check"},{default:re(()=>[le(u)]),_:1})):ce("v-if",!0)]),e.disabled?ce("v-if",!0):(A(),ve(a,{key:1,class:"el-icon--close",onClick:g=>e.handleRemove(p)},{default:re(()=>[le(c)]),_:2},1032,["onClick"])),ce(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),ce(" This is a bug which needs to be fixed "),ce(" TODO: Fix the incorrect navigation interaction "),e.disabled?ce("v-if",!0):(A(),B("i",IIe,Pe(e.t("el.upload.deleteTip")),1)),p.status==="uploading"?(A(),ve(d,{key:3,type:e.listType==="picture-card"?"circle":"line","stroke-width":e.listType==="picture-card"?6:2,percentage:+p.percentage,style:{"margin-top":"0.5rem"}},null,8,["type","stroke-width","percentage"])):ce("v-if",!0),e.listType==="picture-card"?(A(),B("span",TIe,[W("span",{class:"el-upload-list__item-preview",onClick:g=>e.handlePreview(p)},[le(a,{class:"el-icon--zoom-in"},{default:re(()=>[le(f)]),_:1})],8,EIe),e.disabled?ce("v-if",!0):(A(),B("span",{key:0,class:"el-upload-list__item-delete",onClick:g=>e.handleRemove(p)},[le(a,{class:"el-icon--delete"},{default:re(()=>[le(h)]),_:1})],8,_Ie))])):ce("v-if",!0)])],42,CIe))),128))]),_:3},8,["class"])}var lD=We($Ie,[["render",NIe]]);const AIe=ge({name:"ElUploadDrag",props:{disabled:{type:Boolean,default:!1}},emits:["file"],setup(e,{emit:t}){const n=Ze("uploader",{}),s=L(!1);function o(i){var a;if(e.disabled||!n)return;const l=((a=n.props)==null?void 0:a.accept)||n.accept;if(s.value=!1,!l){t("file",i.dataTransfer.files);return}t("file",Array.from(i.dataTransfer.files).filter(u=>{const{type:c,name:d}=u,f=d.indexOf(".")>-1?`.${d.split(".").pop()}`:"",h=c.replace(/\/.*$/,"");return l.split(",").map(p=>p.trim()).filter(p=>p).some(p=>p.startsWith(".")?f===p:/\/\*$/.test(p)?h===p.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(p)?c===p:!1)}))}function r(){e.disabled||(s.value=!0)}return{dragover:s,onDrop:o,onDragover:r}}});function DIe(e,t,n,s,o,r){return A(),B("div",{class:q({"el-upload-dragger":!0,"is-dragover":e.dragover}),onDrop:t[0]||(t[0]=ht((...i)=>e.onDrop&&e.onDrop(...i),["prevent"])),onDragover:t[1]||(t[1]=ht((...i)=>e.onDragover&&e.onDragover(...i),["prevent"])),onDragleave:t[2]||(t[2]=ht(i=>e.dragover=!1,["prevent"]))},[Re(e.$slots,"default")],34)}var RIe=We(AIe,[["render",DIe]]);const OIe=ge({components:{UploadDragger:RIe},props:{type:{type:String,default:""},action:{type:String,required:!0},name:{type:String,default:"file"},data:{type:Object,default:()=>null},headers:{type:Object,default:()=>null},method:{type:String,default:"post"},withCredentials:{type:Boolean,default:!1},multiple:{type:Boolean,default:null},accept:{type:String,default:""},onStart:{type:Function,default:rn},onProgress:{type:Function,default:rn},onSuccess:{type:Function,default:rn},onError:{type:Function,default:rn},beforeUpload:{type:Function,default:rn},drag:{type:Boolean,default:!1},onPreview:{type:Function,default:rn},onRemove:{type:Function,default:rn},fileList:{type:Array,default:()=>[]},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:{type:Function,default:()=>iB},disabled:Boolean,limit:{type:Number,default:null},onExceed:{type:Function,default:rn}},setup(e){const t=L({}),n=L(!1),s=L(null);function o(d){if(e.limit&&e.fileList.length+d.length>e.limit){e.onExceed(d,e.fileList);return}let f=Array.from(d);e.multiple||(f=f.slice(0,1)),f.length!==0&&f.forEach(h=>{e.onStart(h),e.autoUpload&&r(h)})}function r(d){if(s.value.value=null,!e.beforeUpload)return a(d);const f=e.beforeUpload(d);f instanceof Promise?f.then(h=>{const p=Object.prototype.toString.call(h);if(p==="[object File]"||p==="[object Blob]"){p==="[object Blob]"&&(h=new File([h],d.name,{type:d.type}));for(const g in d)Ht(d,g)&&(h[g]=d[g]);a(h)}else a(d)}).catch(()=>{e.onRemove(null,d)}):f!==!1?a(d):e.onRemove(null,d)}function i(d){const f=t.value;if(d){let h=d;d.uid&&(h=d.uid),f[h]&&f[h].abort()}else Object.keys(f).forEach(h=>{f[h]&&f[h].abort(),delete f[h]})}function a(d){const{uid:f}=d,h={headers:e.headers,withCredentials:e.withCredentials,file:d,data:e.data,method:e.method,filename:e.name,action:e.action,onProgress:g=>{e.onProgress(g,d)},onSuccess:g=>{e.onSuccess(g,d),delete t.value[f]},onError:g=>{e.onError(g,d),delete t.value[f]}},p=e.httpRequest(h);t.value[f]=p,p instanceof Promise&&p.then(h.onSuccess,h.onError)}function l(d){const f=d.target.files;!f||o(f)}function u(){e.disabled||(s.value.value=null,s.value.click())}function c(){u()}return{reqs:t,mouseover:n,inputRef:s,abort:i,post:a,handleChange:l,handleClick:u,handleKeydown:c,upload:r,uploadFiles:o}}}),MIe=["name","multiple","accept"];function PIe(e,t,n,s,o,r){const i=ie("upload-dragger");return A(),B("div",{class:q(["el-upload",`el-upload--${e.listType}`]),tabindex:"0",onClick:t[1]||(t[1]=(...a)=>e.handleClick&&e.handleClick(...a)),onKeydown:t[2]||(t[2]=Ut(ht((...a)=>e.handleKeydown&&e.handleKeydown(...a),["self"]),["enter","space"]))},[e.drag?(A(),ve(i,{key:0,disabled:e.disabled,onFile:e.uploadFiles},{default:re(()=>[Re(e.$slots,"default")]),_:3},8,["disabled","onFile"])):Re(e.$slots,"default",{key:1}),W("input",{ref:"inputRef",class:"el-upload__input",type:"file",name:e.name,multiple:e.multiple,accept:e.accept,onChange:t[0]||(t[0]=(...a)=>e.handleChange&&e.handleChange(...a))},null,40,MIe)],34)}var uD=We(OIe,[["render",PIe]]);function FIe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s&&t(e[n],n,e)!==!1;);return e}var LIe=FIe,cD=vL;function BIe(e,t,n){t=="__proto__"&&cD?cD(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var aB=BIe,zIe=aB,VIe=k2,WIe=Object.prototype,HIe=WIe.hasOwnProperty;function UIe(e,t,n){var s=e[t];(!(HIe.call(e,t)&&VIe(s,n))||n===void 0&&!(t in e))&&zIe(e,t,n)}var lB=UIe,jIe=lB,GIe=aB;function KIe(e,t,n,s){var o=!n;n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),o?GIe(n,a,l):jIe(n,a,l)}return n}var L0=KIe,qIe=L0,YIe=R2;function XIe(e,t){return e&&qIe(t,YIe(t),e)}var ZIe=XIe;function JIe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var QIe=JIe,eTe=Sl,tTe=A2,nTe=QIe,sTe=Object.prototype,oTe=sTe.hasOwnProperty;function rTe(e){if(!eTe(e))return nTe(e);var t=tTe(e),n=[];for(var s in e)s=="constructor"&&(t||!oTe.call(e,s))||n.push(s);return n}var iTe=rTe,aTe=YP,lTe=iTe,uTe=D2;function cTe(e){return uTe(e)?aTe(e,!0):lTe(e)}var bk=cTe,dTe=L0,fTe=bk;function hTe(e,t){return e&&dTe(t,fTe(t),e)}var pTe=hTe,OC={exports:{}};(function(e,t){var n=Ai,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===s,i=r?n.Buffer:void 0,a=i?i.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=a?a(d):new u.constructor(d);return u.copy(f),f}e.exports=l})(OC,OC.exports);function gTe(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var mTe=gTe,vTe=L0,bTe=_2;function yTe(e,t){return vTe(e,bTe(e),t)}var wTe=yTe,$Te=XP,CTe=$Te(Object.getPrototypeOf,Object),uB=CTe,xTe=E2,kTe=uB,STe=_2,ITe=UP,TTe=Object.getOwnPropertySymbols,ETe=TTe?function(e){for(var t=[];e;)xTe(t,STe(e)),e=kTe(e);return t}:ITe,cB=ETe,_Te=L0,NTe=cB;function ATe(e,t){return _Te(e,NTe(e),t)}var DTe=ATe,RTe=HP,OTe=cB,MTe=bk;function PTe(e){return RTe(e,MTe,OTe)}var FTe=PTe,LTe=Object.prototype,BTe=LTe.hasOwnProperty;function zTe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&BTe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var VTe=zTe,dD=WP;function WTe(e){var t=new e.constructor(e.byteLength);return new dD(t).set(new dD(e)),t}var yk=WTe,HTe=yk;function UTe(e,t){var n=t?HTe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var jTe=UTe,GTe=/\w*$/;function KTe(e){var t=new e.constructor(e.source,GTe.exec(e));return t.lastIndex=e.lastIndex,t}var qTe=KTe,fD=ef,hD=fD?fD.prototype:void 0,pD=hD?hD.valueOf:void 0;function YTe(e){return pD?Object(pD.call(e)):{}}var XTe=YTe,ZTe=yk;function JTe(e,t){var n=t?ZTe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var QTe=JTe,eEe=yk,tEe=jTe,nEe=qTe,sEe=XTe,oEe=QTe,rEe="[object Boolean]",iEe="[object Date]",aEe="[object Map]",lEe="[object Number]",uEe="[object RegExp]",cEe="[object Set]",dEe="[object String]",fEe="[object Symbol]",hEe="[object ArrayBuffer]",pEe="[object DataView]",gEe="[object Float32Array]",mEe="[object Float64Array]",vEe="[object Int8Array]",bEe="[object Int16Array]",yEe="[object Int32Array]",wEe="[object Uint8Array]",$Ee="[object Uint8ClampedArray]",CEe="[object Uint16Array]",xEe="[object Uint32Array]";function kEe(e,t,n){var s=e.constructor;switch(t){case hEe:return eEe(e);case rEe:case iEe:return new s(+e);case pEe:return tEe(e,n);case gEe:case mEe:case vEe:case bEe:case yEe:case wEe:case $Ee:case CEe:case xEe:return oEe(e,n);case aEe:return new s;case lEe:case dEe:return new s(e);case uEe:return nEe(e);case cEe:return new s;case fEe:return sEe(e)}}var SEe=kEe,IEe=Sl,gD=Object.create,TEe=function(){function e(){}return function(t){if(!IEe(t))return{};if(gD)return gD(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),EEe=TEe,_Ee=EEe,NEe=uB,AEe=A2;function DEe(e){return typeof e.constructor=="function"&&!AEe(e)?_Ee(NEe(e)):{}}var REe=DEe,OEe=k0,MEe=Tl,PEe="[object Map]";function FEe(e){return MEe(e)&&OEe(e)==PEe}var LEe=FEe,BEe=LEe,zEe=N2,mD=qh.exports,vD=mD&&mD.isMap,VEe=vD?zEe(vD):BEe,WEe=VEe,HEe=k0,UEe=Tl,jEe="[object Set]";function GEe(e){return UEe(e)&&HEe(e)==jEe}var KEe=GEe,qEe=KEe,YEe=N2,bD=qh.exports,yD=bD&&bD.isSet,XEe=yD?YEe(yD):qEe,ZEe=XEe,JEe=LP,QEe=LIe,e_e=lB,t_e=ZIe,n_e=pTe,s_e=OC.exports,o_e=mTe,r_e=wTe,i_e=DTe,a_e=ZP,l_e=FTe,u_e=k0,c_e=VTe,d_e=SEe,f_e=REe,h_e=Il,p_e=Kh.exports,g_e=WEe,m_e=Sl,v_e=ZEe,b_e=R2,y_e=bk,w_e=1,$_e=2,C_e=4,dB="[object Arguments]",x_e="[object Array]",k_e="[object Boolean]",S_e="[object Date]",I_e="[object Error]",fB="[object Function]",T_e="[object GeneratorFunction]",E_e="[object Map]",__e="[object Number]",hB="[object Object]",N_e="[object RegExp]",A_e="[object Set]",D_e="[object String]",R_e="[object Symbol]",O_e="[object WeakMap]",M_e="[object ArrayBuffer]",P_e="[object DataView]",F_e="[object Float32Array]",L_e="[object Float64Array]",B_e="[object Int8Array]",z_e="[object Int16Array]",V_e="[object Int32Array]",W_e="[object Uint8Array]",H_e="[object Uint8ClampedArray]",U_e="[object Uint16Array]",j_e="[object Uint32Array]",ss={};ss[dB]=ss[x_e]=ss[M_e]=ss[P_e]=ss[k_e]=ss[S_e]=ss[F_e]=ss[L_e]=ss[B_e]=ss[z_e]=ss[V_e]=ss[E_e]=ss[__e]=ss[hB]=ss[N_e]=ss[A_e]=ss[D_e]=ss[R_e]=ss[W_e]=ss[H_e]=ss[U_e]=ss[j_e]=!0;ss[I_e]=ss[fB]=ss[O_e]=!1;function Jv(e,t,n,s,o,r){var i,a=t&w_e,l=t&$_e,u=t&C_e;if(n&&(i=o?n(e,s,o,r):n(e)),i!==void 0)return i;if(!m_e(e))return e;var c=h_e(e);if(c){if(i=c_e(e),!a)return o_e(e,i)}else{var d=u_e(e),f=d==fB||d==T_e;if(p_e(e))return s_e(e,a);if(d==hB||d==dB||f&&!o){if(i=l||f?{}:f_e(e),!a)return l?i_e(e,n_e(i,e)):r_e(e,t_e(i,e))}else{if(!ss[d])return o?e:{};i=d_e(e,d,a)}}r||(r=new JEe);var h=r.get(e);if(h)return h;r.set(e,i),v_e(e)?e.forEach(function(m){i.add(Jv(m,t,n,m,e,r))}):g_e(e)&&e.forEach(function(m,v){i.set(v,Jv(m,t,n,v,e,r))});var p=u?l?l_e:a_e:l?y_e:b_e,g=c?void 0:p(e);return QEe(g||e,function(m,v){g&&(v=m,m=e[v]),e_e(i,v,Jv(m,t,n,v,e,r))}),i}var G_e=Jv,K_e=G_e,q_e=1,Y_e=4;function X_e(e){return K_e(e,q_e|Y_e)}var Z_e=X_e;function jm(e,t){return t.find(n=>n.uid===e.uid)}function wD(e){return Date.now()+e}var J_e=e=>{const t=L([]),n=L(null);let s=1;function o(f){n.value.abort(f)}function r(f=["ready","uploading","success","fail"]){t.value=t.value.filter(h=>!f.includes(h.status))}function i(f,h){const p=jm(h,t.value);p.status="fail",t.value.splice(t.value.indexOf(p),1),e.onError(f,p,t.value),e.onChange(p,t.value)}function a(f,h){const p=jm(h,t.value);e.onProgress(f,p,t.value),p.status="uploading",p.percentage=f.percent||0}function l(f,h){const p=jm(h,t.value);p&&(p.status="success",p.response=f,e.onSuccess(f,p,t.value),e.onChange(p,t.value))}function u(f){const h=wD(s++);f.uid=h;const p={name:f.name,percentage:0,status:"ready",size:f.size,raw:f,uid:h};if(e.listType==="picture-card"||e.listType==="picture")try{p.url=URL.createObjectURL(f)}catch(g){console.error("[Element Error][Upload]",g),e.onError(g,p,t.value)}t.value.push(p),e.onChange(p,t.value)}function c(f,h){h&&(f=jm(h,t.value));const p=()=>{f.url&&f.url.indexOf("blob:")===0&&URL.revokeObjectURL(f.url)},g=()=>{o(f);const m=t.value;m.splice(m.indexOf(f),1),e.onRemove(f,m),p()};if(!e.beforeRemove)g();else if(typeof e.beforeRemove=="function"){const m=e.beforeRemove(f,t.value);m instanceof Promise?m.then(()=>{g()}).catch(rn):m!==!1&&g()}}function d(){t.value.filter(f=>f.status==="ready").forEach(f=>{n.value.upload(f.raw)})}return Oe(()=>e.listType,f=>{(f==="picture-card"||f==="picture")&&(t.value=t.value.map(h=>{if(!h.url&&h.raw)try{h.url=URL.createObjectURL(h.raw)}catch(p){e.onError(p,h,t.value)}return h}))}),Oe(()=>e.fileList,f=>{t.value=f.map(h=>{const p=Z_e(h);return zt(ut({},p),{uid:h.uid||wD(s++),status:h.status||"success"})})},{immediate:!0,deep:!0}),{abort:o,clearFiles:r,handleError:i,handleProgress:a,handleStart:u,handleSuccess:l,handleRemove:c,submit:d,uploadFiles:t,uploadRef:n}};const Qv=ge({name:"ElUpload",components:{Upload:uD,UploadList:lD},props:{action:{type:String,required:!0},headers:{type:Object,default:()=>({})},method:{type:String,default:"post"},data:{type:Object,default:()=>({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},beforeUpload:{type:Function,default:rn},beforeRemove:{type:Function,default:rn},onRemove:{type:Function,default:rn},onChange:{type:Function,default:rn},onPreview:{type:Function,default:rn},onSuccess:{type:Function,default:rn},onProgress:{type:Function,default:rn},onError:{type:Function,default:rn},fileList:{type:Array,default:()=>[]},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:{type:Function,default:iB},disabled:Boolean,limit:{type:Number,default:null},onExceed:{type:Function,default:()=>rn}},setup(e){const t=Ze(ir,{}),n=R(()=>e.disabled||t.disabled),{abort:s,clearFiles:o,handleError:r,handleProgress:i,handleStart:a,handleSuccess:l,handleRemove:u,submit:c,uploadRef:d,uploadFiles:f}=J_e(e);return Vt("uploader",Lt()),ls(()=>{f.value.forEach(h=>{h.url&&h.url.indexOf("blob:")===0&&URL.revokeObjectURL(h.url)})}),{abort:s,dragOver:L(!1),draging:L(!1),handleError:r,handleProgress:i,handleRemove:u,handleStart:a,handleSuccess:l,uploadDisabled:n,uploadFiles:f,uploadRef:d,submit:c,clearFiles:o}},render(){var e,t;let n;this.showFileList?n=He(lD,{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,onRemove:this.handleRemove,handlePreview:this.onPreview},this.$slots.file?{default:i=>this.$slots.file({file:i.file})}:null):n=null;const s={type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,method:this.method,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest,ref:"uploadRef"},o=this.$slots.trigger||this.$slots.default,r=He(uD,s,{default:()=>o==null?void 0:o()});return He("div",[this.listType==="picture-card"?n:null,this.$slots.trigger?[r,this.$slots.default()]:r,(t=(e=this.$slots).tip)==null?void 0:t.call(e),this.listType!=="picture-card"?n:null])}});Qv.install=e=>{e.component(Qv.name,Qv)};const Q_e=Qv,eNe=Q_e;var tNe=[wse,Eae,Ece,Mce,Wce,eL,nde,sde,ta,oL,Lhe,Hhe,tpe,npe,Cge,ige,Ege,ki,$pe,SL,Age,jge,Gge,Lge,xme,Ime,Lme,Bme,zme,Vme,Wme,wbe,Nbe,Abe,Hbe,qbe,o0e,rye,iye,aye,jye,A1e,D1e,Ot,q1e,f4,ei,h4,iwe,Twe,Ewe,_we,Bwe,j$e,Q$e,lCe,QF,C4,AL,Bpe,Lpe,ECe,RCe,PCe,Oa,F0,w4,w$e,Dxe,Gxe,Kxe,d2e,b2e,E2e,_2e,V2e,Wke,Hke,sSe,oSe,O0,Che,cSe,gSe,mSe,ar,MSe,JSe,yIe,eNe];const hi="ElInfiniteScroll",nNe=50,sNe=200,oNe=0,rNe={delay:{type:Number,default:sNe},distance:{type:Number,default:oNe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},wk=(e,t)=>Object.entries(rNe).reduce((n,[s,o])=>{var r,i;const{type:a,default:l}=o,u=e.getAttribute(`infinite-scroll-${s}`);let c=(i=(r=t[u])!=null?r:u)!=null?i:l;return c=c==="false"?!1:c,c=a(c),n[s]=Number.isNaN(c)?l:c,n},{}),pB=e=>{const{observer:t}=e[hi];t&&(t.disconnect(),delete e[hi].observer)},iNe=(e,t)=>{const{container:n,containerEl:s,instance:o,observer:r,lastScrollTop:i}=e[hi],{disabled:a,distance:l}=wk(e,o),{clientHeight:u,scrollHeight:c,scrollTop:d}=s,f=d-i;if(e[hi].lastScrollTop=d,r||a||f<0)return;let h=!1;if(n===e)h=c-(u+d)<=l;else{const{clientTop:p,scrollHeight:g}=e,m=jne(e,s);h=d+u>=m+p+g-l}h&&t.call(o)};function qw(e,t){const{containerEl:n,instance:s}=e[hi],{disabled:o}=wk(e,s);o||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?t.call(s):pB(e))}const aNe={async mounted(e,t){const{instance:n,value:s}=t;Ft(s)||ko(hi,"'v-infinite-scroll' binding value must be a function"),await dt();const{delay:o,immediate:r}=wk(e,n),i=M2(e,!0),a=i===window?document.documentElement:i,l=yb(iNe.bind(null,e,s),o);if(!!i){if(e[hi]={instance:n,container:i,containerEl:a,delay:o,cb:s,onScroll:l,lastScrollTop:a.scrollTop},r){const u=new MutationObserver(yb(qw.bind(null,e,s),nNe));e[hi].observer=u,u.observe(e,{childList:!0,subtree:!0}),qw(e,s)}i.addEventListener("scroll",l)}},unmounted(e){const{container:t,onScroll:n}=e[hi];t==null||t.removeEventListener("scroll",n),pB(e)},async updated(e){e[hi]||await dt();const{containerEl:t,cb:n,observer:s}=e[hi];t.clientHeight&&s&&qw(e,n)}},MC=aNe;MC.install=e=>{e.directive("InfiniteScroll",MC)};const lNe=MC;function uNe(e){let t;const n=L(!1),s=Sn(zt(ut({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function o(d){s.text=d}function r(){const d=s.parent;if(!d.vLoadingAddClassList){let f=d.getAttribute("loading-number");f=Number.parseInt(f)-1,f?d.setAttribute("loading-number",f.toString()):(yo(d,"el-loading-parent--relative"),d.removeAttribute("loading-number")),yo(d,"el-loading-parent--hidden")}i()}function i(){var d,f;(f=(d=c.$el)==null?void 0:d.parentNode)==null||f.removeChild(c.$el)}function a(){var d;if(e.beforeClose&&!e.beforeClose())return;const f=s.parent;f.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(t),t=window.setTimeout(()=>{n.value&&(n.value=!1,r())},400),s.visible=!1,(d=e.closed)==null||d.call(e)}function l(){!n.value||(n.value=!1,r())}const c=iY({name:"ElLoading",setup(){return()=>{const d=s.spinner||s.svg,f=He("svg",ut({class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"25 25 50 50"},d?{innerHTML:d}:{}),[He("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),h=s.text?He("p",{class:"el-loading-text"},[s.text]):void 0;return He(xs,{name:"el-loading-fade",onAfterLeave:l},{default:re(()=>[$t(le("div",{style:{backgroundColor:s.background||""},class:["el-loading-mask",s.customClass,s.fullscreen?"is-fullscreen":""]},[He("div",{class:"el-loading-spinner"},[f,h])]),[[en,s.visible]])])})}}}).mount(document.createElement("div"));return zt(ut({},xo(s)),{setText:o,remvoeElLoadingChild:i,close:a,handleAfterLeave:l,vm:c,get $el(){return c.$el}})}let Bf;const PC=function(e={}){if(!Yt)return;const t=cNe(e);t.fullscreen&&Bf&&(Bf.remvoeElLoadingChild(),Bf.close());const n=uNe(zt(ut({},t),{closed:()=>{var o;(o=t.closed)==null||o.call(t),t.fullscreen&&(Bf=void 0)}}));dNe(t,t.parent,n),$D(t,t.parent,n),t.parent.vLoadingAddClassList=()=>$D(t,t.parent,n);let s=t.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",t.parent.setAttribute("loading-number",s),t.parent.appendChild(n.$el),dt(()=>n.visible.value=t.visible),t.fullscreen&&(Bf=n),n},cNe=e=>{var t,n,s,o;let r;return Xt(e.target)?r=(t=document.querySelector(e.target))!=null?t:document.body:r=e.target||document.body,{parent:r===document.body||e.body?document.body:r,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:r===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(s=e.lock)!=null?s:!1,customClass:e.customClass||"",visible:(o=e.visible)!=null?o:!0,target:r}},dNe=async(e,t,n)=>{const s={};if(e.fullscreen)n.originalPosition.value=Fr(document.body,"position"),n.originalOverflow.value=Fr(document.body,"overflow"),s.zIndex=bs.nextZIndex();else if(e.parent===document.body){n.originalPosition.value=Fr(document.body,"position"),await dt();for(const o of["top","left"]){const r=o==="top"?"scrollTop":"scrollLeft";s[o]=`${e.target.getBoundingClientRect()[o]+document.body[r]+document.documentElement[r]-parseInt(Fr(document.body,`margin-${o}`),10)}px`}for(const o of["height","width"])s[o]=`${e.target.getBoundingClientRect()[o]}px`}else n.originalPosition.value=Fr(t,"position");for(const[o,r]of Object.entries(s))n.$el.style[o]=r},$D=(e,t,n)=>{n.originalPosition.value!=="absolute"&&n.originalPosition.value!=="fixed"?Xo(t,"el-loading-parent--relative"):yo(t,"el-loading-parent--relative"),e.fullscreen&&e.lock?Xo(t,"el-loading-parent--hidden"):yo(t,"el-loading-parent--hidden")},FC=Symbol("ElLoading"),CD=(e,t)=>{var n,s,o,r;const i=t.instance,a=f=>an(t.value)?t.value[f]:void 0,l=f=>{const h=Xt(f)&&(i==null?void 0:i[f])||f;return h&&L(h)},u=f=>l(a(f)||e.getAttribute(`element-loading-${kl(f)}`)),c=(n=a("fullscreen"))!=null?n:t.modifiers.fullscreen,d={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:c,target:(s=a("target"))!=null?s:c?void 0:e,body:(o=a("body"))!=null?o:t.modifiers.body,lock:(r=a("lock"))!=null?r:t.modifiers.lock};e[FC]={options:d,instance:PC(d)}},fNe=(e,t)=>{for(const n of Object.keys(t))ms(t[n])&&(t[n].value=e[n])},xD={mounted(e,t){t.value&&CD(e,t)},updated(e,t){const n=e[FC];t.oldValue!==t.value&&(t.value&&!t.oldValue?CD(e,t):t.value&&t.oldValue?an(t.value)&&fNe(t.value,n.options):n==null||n.instance.close())},unmounted(e){var t;(t=e[FC])==null||t.instance.close()}},hNe={install(e){e.directive("loading",xD),e.config.globalProperties.$loading=PC},directive:xD,service:PC},gB=["success","info","warning","error"],pNe=mt({customClass:{type:String,default:""},center:{type:Boolean,default:!1},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:3e3},icon:{type:Je([String,Object]),default:""},id:{type:String,default:""},message:{type:Je([String,Object]),default:""},onClose:{type:Je(Function),required:!1},showClose:{type:Boolean,default:!1},type:{type:String,values:gB,default:"info"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1}}),gNe={destroy:()=>!0},mNe=ge({name:"ElMessage",components:ut({ElBadge:eL,ElIcon:Ot},N0),props:pNe,emits:gNe,setup(e){const t=L(!1),n=L(e.type?e.type==="error"?"danger":e.type:"info");let s;const o=R(()=>{const d=e.type;return d&&Ea[d]?`el-message-icon--${d}`:""}),r=R(()=>e.icon||Ea[e.type]||""),i=R(()=>({top:`${e.offset}px`,zIndex:e.zIndex}));function a(){e.duration>0&&({stop:s}=$d(()=>{t.value&&u()},e.duration))}function l(){s==null||s()}function u(){t.value=!1}function c({code:d}){d===Qe.esc?t.value&&u():a()}return Rt(()=>{a(),t.value=!0}),Oe(()=>e.repeatNum,()=>{l(),a()}),Ls(document,"keydown",c),{typeClass:o,iconComponent:r,customStyle:i,visible:t,badgeType:n,close:u,clearTimer:l,startTimer:a}}}),vNe=["id"],bNe={key:0,class:"el-message__content"},yNe=["innerHTML"];function wNe(e,t,n,s,o,r){const i=ie("el-badge"),a=ie("el-icon"),l=ie("close");return A(),ve(xs,{name:"el-message-fade",onBeforeLeave:e.onClose,onAfterLeave:t[2]||(t[2]=u=>e.$emit("destroy"))},{default:re(()=>[$t(W("div",{id:e.id,class:q(["el-message",e.type&&!e.icon?`el-message--${e.type}`:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass]),style:nt(e.customStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...u)=>e.clearTimer&&e.clearTimer(...u)),onMouseleave:t[1]||(t[1]=(...u)=>e.startTimer&&e.startTimer(...u))},[e.repeatNum>1?(A(),ve(i,{key:0,value:e.repeatNum,type:e.badgeType,class:"el-message__badge"},null,8,["value","type"])):ce("v-if",!0),e.iconComponent?(A(),ve(a,{key:1,class:q(["el-message__icon",e.typeClass])},{default:re(()=>[(A(),ve(tn(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),Re(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(A(),B(at,{key:1},[ce(" Caution here, message could've been compromised, never use user's input as message "),W("p",{class:"el-message__content",innerHTML:e.message},null,8,yNe)],2112)):(A(),B("p",bNe,Pe(e.message),1))]),e.showClose?(A(),ve(a,{key:2,class:"el-message__closeBtn",onClick:ht(e.close,["stop"])},{default:re(()=>[le(l)]),_:1},8,["onClick"])):ce("v-if",!0)],46,vNe),[[en,e.visible]])]),_:3},8,["onBeforeLeave"])}var $Ne=We(mNe,[["render",wNe]]);const pr=[];let CNe=1;const kb=function(e={}){if(!Yt)return{close:()=>{}};if(xn(yC.max)&&pr.length>=yC.max)return{close:()=>{}};if(!As(e)&&typeof e=="object"&&e.grouping&&!As(e.message)&&pr.length){const u=pr.find(c=>{var d,f,h;return`${(f=(d=c.vm.props)==null?void 0:d.message)!=null?f:""}`==`${(h=e.message)!=null?h:""}`});if(u)return u.vm.component.props.repeatNum+=1,u.vm.component.props.type=e==null?void 0:e.type,{close:()=>l.component.proxy.visible=!1}}(typeof e=="string"||As(e))&&(e={message:e});let t=e.offset||20;pr.forEach(({vm:u})=>{var c;t+=(((c=u.el)==null?void 0:c.offsetHeight)||0)+16}),t+=16;const n=`message_${CNe++}`,s=e.onClose,o=zt(ut({zIndex:bs.nextZIndex(),offset:t},e),{id:n,onClose:()=>{xNe(n,s)}});let r=document.body;e.appendTo instanceof HTMLElement?r=e.appendTo:typeof e.appendTo=="string"&&(r=document.querySelector(e.appendTo)),r instanceof HTMLElement||(r=document.body);const i=document.createElement("div");i.className=`container_${n}`;const a=o.message,l=le($Ne,o,As(o.message)?{default:()=>a}:null);return l.props.onDestroy=()=>{wd(null,i)},wd(l,i),pr.push({vm:l}),r.appendChild(i.firstElementChild),{close:()=>l.component.proxy.visible=!1}};gB.forEach(e=>{kb[e]=(t={})=>((typeof t=="string"||As(t))&&(t={message:t}),kb(zt(ut({},t),{type:e})))});function xNe(e,t){const n=pr.findIndex(({vm:i})=>e===i.component.props.id);if(n===-1)return;const{vm:s}=pr[n];if(!s)return;t==null||t(s);const o=s.el.offsetHeight;pr.splice(n,1);const r=pr.length;if(!(r<1))for(let i=n;i<r;i++){const a=parseInt(pr[i].vm.el.style.top,10)-o-16;pr[i].vm.component.props.offset=a}}function kNe(){var e;for(let t=pr.length-1;t>=0;t--){const n=pr[t].vm.component;(e=n==null?void 0:n.proxy)==null||e.close()}}kb.closeAll=kNe;const SNe=wF(kb,"$message"),INe=ge({name:"ElMessageBox",directives:{TrapFocus:B2},components:ut({ElButton:ta,ElInput:ei,ElOverlay:tk,ElIcon:Ot},N0),inheritAttrs:!1,props:{buttonSize:{type:String,validator:nr},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{t:n}=In(),s=L(!1),o=Sn({beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:bs.nextZIndex()}),r=R(()=>{const $=o.type;return $&&Ea[$]?`el-message-box-icon--${$}`:""}),i=ks(R(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),a=R(()=>o.icon||Ea[o.type]||""),l=R(()=>!!o.message),u=L(null),c=L(null),d=R(()=>o.confirmButtonClass);Oe(()=>o.inputValue,async $=>{await dt(),e.boxType==="prompt"&&$!==null&&m()},{immediate:!0}),Oe(()=>s.value,$=>{$&&((e.boxType==="alert"||e.boxType==="confirm")&&dt().then(()=>{var y,w,C;(C=(w=(y=c.value)==null?void 0:y.$el)==null?void 0:w.focus)==null||C.call(w)}),o.zIndex=bs.nextZIndex()),e.boxType==="prompt"&&($?dt().then(()=>{u.value&&u.value.$el&&v().focus()}):(o.editorErrorMessage="",o.validateError=!1))}),Rt(async()=>{await dt(),e.closeOnHashChange&&bn(window,"hashchange",f)}),ls(()=>{e.closeOnHashChange&&Kn(window,"hashchange",f)});function f(){!s.value||(s.value=!1,dt(()=>{o.action&&t("action",o.action)}))}const h=()=>{e.closeOnClickModal&&g(o.distinguishCancelAndClose?"close":"cancel")},p=()=>{if(o.inputType!=="textarea")return g("confirm")},g=$=>{var y;e.boxType==="prompt"&&$==="confirm"&&!m()||(o.action=$,o.beforeClose?(y=o.beforeClose)==null||y.call(o,$,o,f):f())},m=()=>{if(e.boxType==="prompt"){const $=o.inputPattern;if($&&!$.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||n("el.messagebox.error"),o.validateError=!0,!1;const y=o.inputValidator;if(typeof y=="function"){const w=y(o.inputValue);if(w===!1)return o.editorErrorMessage=o.inputErrorMessage||n("el.messagebox.error"),o.validateError=!0,!1;if(typeof w=="string")return o.editorErrorMessage=w,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},v=()=>{const $=u.value.$refs;return $.input||$.textarea},b=()=>{g("close")};return e.closeOnPressEscape?hF({handleClose:b},s):Xne(s,"keydown",$=>$.code===Qe.esc),e.lockScroll&&cF(s),gF(s),zt(ut({},xo(o)),{visible:s,hasMessage:l,typeClass:r,btnSize:i,iconComponent:a,confirmButtonClasses:d,inputRef:u,confirmRef:c,doClose:f,handleClose:b,handleWrapperClick:h,handleInputEnter:p,handleAction:g,t:n})}}),TNe=["aria-label"],ENe={key:0,class:"el-message-box__header"},_Ne={class:"el-message-box__title"},NNe={class:"el-message-box__content"},ANe={class:"el-message-box__container"},DNe={key:1,class:"el-message-box__message"},RNe={key:0},ONe=["innerHTML"],MNe={class:"el-message-box__input"},PNe={class:"el-message-box__btns"};function FNe(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("close"),l=ie("el-input"),u=ie("el-button"),c=ie("el-overlay"),d=Vo("trap-focus");return A(),ve(xs,{name:"fade-in-linear",onAfterLeave:t[7]||(t[7]=f=>e.$emit("vanish"))},{default:re(()=>[$t(le(c,{"z-index":e.zIndex,"overlay-class":["is-message-box",e.modalClass],mask:e.modal,onClick:ht(e.handleWrapperClick,["self"])},{default:re(()=>[$t((A(),B("div",{ref:"root",role:"dialog","aria-label":e.title||"dialog","aria-modal":"true",class:q(["el-message-box",e.customClass,{"el-message-box--center":e.center}]),style:nt(e.customStyle)},[e.title!==null&&e.title!==void 0?(A(),B("div",ENe,[W("div",_Ne,[e.iconComponent&&e.center?(A(),ve(i,{key:0,class:q(["el-message-box__status",e.typeClass])},{default:re(()=>[(A(),ve(tn(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),W("span",null,Pe(e.title),1)]),e.showClose?(A(),B("button",{key:0,type:"button",class:"el-message-box__headerbtn","aria-label":"Close",onClick:t[0]||(t[0]=f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=Ut(ht(f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[le(i,{class:"el-message-box__close"},{default:re(()=>[le(a)]),_:1})],32)):ce("v-if",!0)])):ce("v-if",!0),W("div",NNe,[W("div",ANe,[e.iconComponent&&!e.center&&e.hasMessage?(A(),ve(i,{key:0,class:q(["el-message-box__status",e.typeClass])},{default:re(()=>[(A(),ve(tn(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),e.hasMessage?(A(),B("div",DNe,[Re(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(A(),B("p",{key:1,innerHTML:e.message},null,8,ONe)):(A(),B("p",RNe,Pe(e.message),1))])])):ce("v-if",!0)]),$t(W("div",MNe,[le(l,{ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=f=>e.inputValue=f),type:e.inputType,placeholder:e.inputPlaceholder,class:q({invalid:e.validateError}),onKeydown:Ut(ht(e.handleInputEnter,["prevent"]),["enter"])},null,8,["modelValue","type","placeholder","class","onKeydown"]),W("div",{class:"el-message-box__errormsg",style:nt({visibility:e.editorErrorMessage?"visible":"hidden"})},Pe(e.editorErrorMessage),5)],512),[[en,e.showInput]])]),W("div",PNe,[e.showCancelButton?(A(),ve(u,{key:0,loading:e.cancelButtonLoading,class:q([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=f=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=Ut(ht(f=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:re(()=>[qt(Pe(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):ce("v-if",!0),$t(le(u,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:q([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=f=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=Ut(ht(f=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:re(()=>[qt(Pe(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[en,e.showConfirmButton]])])],14,TNe)),[[d]])]),_:3},8,["z-index","overlay-class","mask","onClick"]),[[en,e.visible]])]),_:3})}var LNe=We(INe,[["render",FNe]]);const ip=new Map,BNe=(e,t)=>{const n=He(LNe,e);return wd(n,t),document.body.appendChild(t.firstElementChild),n.component},zNe=()=>document.createElement("div"),VNe=e=>{const t=zNe();e.onVanish=()=>{wd(null,t),ip.delete(s)},e.onAction=o=>{const r=ip.get(s);let i;e.showInput?i={value:s.inputValue,action:o}:i=o,e.callback?e.callback(i,n.proxy):o==="cancel"||o==="close"?e.distinguishCancelAndClose&&o!=="cancel"?r.reject("close"):r.reject("cancel"):r.resolve(i)};const n=BNe(e,t),s=n.proxy;for(const o in e)Ht(e,o)&&!Ht(s.$props,o)&&(s[o]=e[o]);return Oe(()=>s.message,(o,r)=>{As(o)?n.slots.default=()=>[o]:As(r)&&!As(o)&&delete n.slots.default},{immediate:!0}),s.visible=!0,s};function ml(e){if(!Yt)return;let t;return Xt(e)||As(e)?e={message:e}:t=e.callback,new Promise((n,s)=>{const o=VNe(e);ip.set(o,{options:e,callback:t,resolve:n,reject:s})})}ml.alert=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),ml(Object.assign({title:t,message:e,type:"",closeOnPressEscape:!1,closeOnClickModal:!1},n,{boxType:"alert"})));ml.confirm=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),ml(Object.assign({title:t,message:e,type:"",showCancelButton:!0},n,{boxType:"confirm"})));ml.prompt=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),ml(Object.assign({title:t,message:e,showCancelButton:!0,showInput:!0,type:""},n,{boxType:"prompt"})));ml.close=()=>{ip.forEach((e,t)=>{t.doClose()}),ip.clear()};const uu=ml;uu.install=e=>{e.config.globalProperties.$msgbox=uu,e.config.globalProperties.$messageBox=uu,e.config.globalProperties.$alert=uu.alert,e.config.globalProperties.$confirm=uu.confirm,e.config.globalProperties.$prompt=uu.prompt};const WNe=uu,mB=["success","info","warning","error"],HNe=mt({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Je([String,Object]),default:""},id:{type:String,default:""},message:{type:Je([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Je(Function),default:()=>{}},onClose:{type:Je(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...mB,""],default:""},zIndex:{type:Number,default:0}}),UNe={destroy:()=>!0},jNe=ge({name:"ElNotification",components:ut({ElIcon:Ot},N0),props:HNe,emits:UNe,setup(e){const t=L(!1);let n;const s=R(()=>{const f=e.type;return f&&Ea[e.type]?`el-notification--${f}`:""}),o=R(()=>Ea[e.type]||e.icon||""),r=R(()=>e.position.endsWith("right")?"right":"left"),i=R(()=>e.position.startsWith("top")?"top":"bottom"),a=R(()=>({[i.value]:`${e.offset}px`,zIndex:e.zIndex}));function l(){e.duration>0&&({stop:n}=$d(()=>{t.value&&c()},e.duration))}function u(){n==null||n()}function c(){t.value=!1}function d({code:f}){f===Qe.delete||f===Qe.backspace?u():f===Qe.esc?t.value&&c():l()}return Rt(()=>{l(),t.value=!0}),Ls(document,"keydown",d),{horizontalClass:r,typeClass:s,iconComponent:o,positionStyle:a,visible:t,close:c,clearTimer:u,startTimer:l}}}),GNe=["id"],KNe={class:"el-notification__group"},qNe=["textContent"],YNe={key:0},XNe=["innerHTML"];function ZNe(e,t,n,s,o,r){const i=ie("el-icon"),a=ie("close");return A(),ve(xs,{name:"el-notification-fade",onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=l=>e.$emit("destroy"))},{default:re(()=>[$t(W("div",{id:e.id,class:q(["el-notification",e.customClass,e.horizontalClass]),style:nt(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...l)=>e.clearTimer&&e.clearTimer(...l)),onMouseleave:t[1]||(t[1]=(...l)=>e.startTimer&&e.startTimer(...l)),onClick:t[2]||(t[2]=(...l)=>e.onClick&&e.onClick(...l))},[e.iconComponent?(A(),ve(i,{key:0,class:q(["el-notification__icon",e.typeClass])},{default:re(()=>[(A(),ve(tn(e.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),W("div",KNe,[W("h2",{class:"el-notification__title",textContent:Pe(e.title)},null,8,qNe),$t(W("div",{class:"el-notification__content",style:nt(e.title?void 0:{margin:0})},[Re(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(A(),B(at,{key:1},[ce(" Caution here, message could've been compromized, nerver use user's input as message "),ce(" eslint-disable-next-line "),W("p",{innerHTML:e.message},null,8,XNe)],2112)):(A(),B("p",YNe,Pe(e.message),1))])],4),[[en,e.message]]),e.showClose?(A(),ve(i,{key:0,class:"el-notification__closeBtn",onClick:ht(e.close,["stop"])},{default:re(()=>[le(a)]),_:1},8,["onClick"])):ce("v-if",!0)])],46,GNe),[[en,e.visible]])]),_:3},8,["onBeforeLeave"])}var JNe=We(jNe,[["render",ZNe]]);const Sb={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},LC=16;let QNe=1;const Ib=function(e={}){if(!Yt)return{close:()=>{}};(typeof e=="string"||As(e))&&(e={message:e});const t=e.position||"top-right";let n=e.offset||0;Sb[t].forEach(({vm:u})=>{var c;n+=(((c=u.el)==null?void 0:c.offsetHeight)||0)+LC}),n+=LC;const s=`notification_${QNe++}`,o=e.onClose,r=zt(ut({zIndex:bs.nextZIndex(),offset:n},e),{id:s,onClose:()=>{eAe(s,t,o)}});let i=document.body;e.appendTo instanceof HTMLElement?i=e.appendTo:typeof e.appendTo=="string"&&(i=document.querySelector(e.appendTo)),i instanceof HTMLElement||(i=document.body);const a=document.createElement("div"),l=le(JNe,r,As(r.message)?{default:()=>r.message}:null);return l.props.onDestroy=()=>{wd(null,a)},wd(l,a),Sb[t].push({vm:l}),i.appendChild(a.firstElementChild),{close:()=>{l.component.proxy.visible=!1}}};mB.forEach(e=>{Ib[e]=(t={})=>((typeof t=="string"||As(t))&&(t={message:t}),Ib(zt(ut({},t),{type:e})))});function eAe(e,t,n){const s=Sb[t],o=s.findIndex(({vm:u})=>{var c;return((c=u.component)==null?void 0:c.props.id)===e});if(o===-1)return;const{vm:r}=s[o];if(!r)return;n==null||n(r);const i=r.el.offsetHeight,a=t.split("-")[0];s.splice(o,1);const l=s.length;if(!(l<1))for(let u=o;u<l;u++){const{el:c,component:d}=s[u].vm,f=parseInt(c.style[a],10)-i-LC;d.props.offset=f}}function tAe(){for(const e of Object.values(Sb))e.forEach(({vm:t})=>{t.component.proxy.visible=!1})}Ib.closeAll=tAe;const nAe=wF(Ib,"$notify");var sAe=[lNe,hNe,SNe,WNe,nAe,uCe],oct=pse([...tNe,...sAe]);/**
  * vue-class-component v8.0.0-rc.1
  * (c) 2015-present Evan You
  * @license MIT
  */function kD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SD(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function oAe(e,t,n){return t&&SD(e.prototype,t),n&&SD(e,n),e}function rAe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ID(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function Yw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ID(Object(n),!0).forEach(function(s){rAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function iAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BC(e,t)}function Tb(e){return Tb=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Tb(e)}function BC(e,t){return BC=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},BC(e,t)}function aAe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function lAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uAe(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:lAe(e)}function cAe(e){var t=aAe();return function(){var s=Tb(e),o;if(t){var r=Tb(this).constructor;o=Reflect.construct(s,arguments,r)}else o=s.apply(this,arguments);return uAe(this,o)}}function dAe(e){return fAe(e)||hAe(e)||pAe(e)||gAe()}function fAe(e){if(Array.isArray(e))return zC(e)}function hAe(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function pAe(e,t){if(!!e){if(typeof e=="string")return zC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zC(e,t)}}function zC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function gAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gm(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!1,configurable:!0})}function mAe(e,t,n){Object.defineProperty(e,t,{get:function(){return n[t].value},set:function(o){n[t].value=o},enumerable:!0,configurable:!0})}function vAe(e){var t=Object.getPrototypeOf(e.prototype);if(!!t)return t.constructor}function Km(e,t){return e.hasOwnProperty(t)?e[t]:void 0}var vB=function(){function e(t,n){var s=this;kD(this,e),Gm(this,"$props",function(){return t}),Gm(this,"$attrs",function(){return n.attrs}),Gm(this,"$slots",function(){return n.slots}),Gm(this,"$emit",function(){return n.emit}),Object.keys(t).forEach(function(o){Object.defineProperty(s,o,{enumerable:!1,configurable:!0,writable:!0,value:t[o]})})}return oAe(e,null,[{key:"registerHooks",value:function(n){var s;(s=this.__h).push.apply(s,dAe(n))}},{key:"with",value:function(n){var s=new n,o={};Object.keys(s).forEach(function(i){var a=s[i];o[i]=a!=null?a:null});var r=function(i){iAe(l,i);var a=cAe(l);function l(){return kD(this,l),a.apply(this,arguments)}return l}(this);return r.__b={props:o},r}},{key:"__vccOpts",get:function(){if(this===bAe)return{};var n=this,s=Km(n,"__c");if(s)return s;var o=Yw({},Km(n,"__o"));n.__c=o;var r=vAe(n);r&&(o.extends=r.__vccOpts);var i=Km(n,"__b");i&&(o.mixins=o.mixins||[],o.mixins.unshift(i)),o.methods=Yw({},o.methods),o.computed=Yw({},o.computed);var a=n.prototype;Object.getOwnPropertyNames(a).forEach(function(c){if(c!=="constructor"){if(n.__h.indexOf(c)>-1){o[c]=a[c];return}var d=Object.getOwnPropertyDescriptor(a,c);if(typeof d.value=="function"){o.methods[c]=d.value;return}if(d.get||d.set){o.computed[c]={get:d.get,set:d.set};return}}}),o.setup=function(c,d){var f,h=new n(c,d),p=Object.keys(h),g={},m=null;return p.forEach(function(v){h[v]===void 0||h[v]&&h[v].__s||(g[v]=L(h[v]),mAe(h,v,g))}),p.forEach(function(v){if(h[v]&&h[v].__s){var b=h[v].__s();b instanceof Promise?(m||(m=Promise.resolve(g)),m=m.then(function(){return b.then(function($){return g[v]=lb($),g})})):g[v]=lb(b)}}),(f=m)!==null&&f!==void 0?f:g};var l=Km(n,"__d");l&&l.forEach(function(c){return c(o)});var u=["render","ssrRender","__file","__cssModules","__scopeId","__hmrId"];return u.forEach(function(c){n[c]&&(o[c]=n[c])}),o}}]),e}();vB.__h=["data","beforeCreate","created","beforeMount","mounted","beforeUnmount","unmounted","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];var bAe=vB;function rct(e){return function(t){return t.__o=e,t}}function yAe(e){return function(t,n,s){var o=typeof t=="function"?t:t.constructor;o.__d||(o.__d=[]),typeof s!="number"&&(s=void 0),o.__d.push(function(r){return e(r,n,s)})}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wAe=1e-7,$Ae=1e-4;class bB{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class $k{refCount(t){return dr("refCount")}incRef(t){return dr("incRef")}timerAvailable(){return!0}time(t){return dr("time")}read(t){return dr("read")}readSync(t){return dr("readSync")}readToGPU(t,n){return dr("readToGPU")}numDataIds(){return dr("numDataIds")}disposeData(t,n){return dr("disposeData")}write(t,n,s){return dr("write")}move(t,n,s,o,r){return dr("move")}memory(){return dr("memory")}floatPrecision(){return dr("floatPrecision")}epsilon(){return this.floatPrecision()===32?wAe:$Ae}dispose(){return dr("dispose")}}function dr(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Zc(e,t,n)}function Hu(e,t,n){return Math.max(e,Math.min(t,n))}function yB(e){return e%2===0?e:e+1}function Zc(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function xAe(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function K(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function ti(e,t,n=""){K(Mn(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function wB(e){K(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ad(e,t=[],n=!1){if(t==null&&(t=[]),Array.isArray(e)||Zi(e)&&!n)for(let s=0;s<e.length;++s)Ad(e[s],t,n);else t.push(e);return t}function Ue(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Mn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Dd(e){return e%1===0}function VC(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function dd(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function TD(e,t=s=>0,n){return new Promise((s,o)=>{let r=0;const i=()=>{if(e()){s();return}r++;const a=t(r);if(n!=null&&r>=n){o();return}setTimeout(i,a)};i()})}function $B(e,t){let n=1,s=-1;for(let r=0;r<e.length;++r)if(e[r]>=0)n*=e[r];else if(e[r]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${r}`);s=r}else if(e[r]<0)throw Error(`Shapes can not be < 0. Found ${e[r]} at dim ${r}`);if(s===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const o=e.slice();return o[s]=t/n,o}function un(e,t){const n=t.length;return e=e==null?t.map((s,o)=>o):[].concat(e),K(e.every(s=>s>=-n&&s<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),K(e.every(s=>Dd(s)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(s=>s<0?n+s:s)}function Dl(e,t){const n=[],s=[],o=t!=null&&Array.isArray(t)&&t.length===0,r=t==null||o?null:un(t,e).sort();let i=0;for(let a=0;a<e.length;++a){if(r!=null){if(r[i]===a&&e[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${e[a]}' is not 1`);(r[i]==null||r[i]>a)&&e[a]===1&&(n.push(e[a]),s.push(a)),r[i]<=a&&i++}e[a]!==1&&(n.push(e[a]),s.push(a))}return{newShape:n,keptDims:s}}function uo(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else throw new Error(`Unknown data type ${e}`);return n}function zo(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function kAe(e,t){for(let n=0;n<e.length;n++){const s=e[n];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${t} being uploaded contains ${s}.`)}}function SAe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function CB(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function Zi(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function WC(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function IAe(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function Vp(e){return typeof e=="string"||e instanceof String}function TAe(e){return typeof e=="boolean"}function HC(e){return typeof e=="number"}function Wp(e){return Array.isArray(e)?Wp(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":HC(e)?"float32":Vp(e)?"string":TAe(e)?"bool":"float32"}function UC(e){return!!(e&&e.constructor&&e.call&&e.apply)}function jC(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Dt(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let s=t-3;s>=0;--s)n[s]=n[s+1]*e[s+1];return n}function xB(e,t,n,s=!1){const o=new Array;if(t.length===1){const r=t[0]*(s?2:1);for(let i=0;i<r;i++)o[i]=n[e+i]}else{const r=t[0],i=t.slice(1),a=i.reduce((l,u)=>l*u)*(s?2:1);for(let l=0;l<r;l++)o[l]=xB(e+l*a,i,n,s)}return o}function wi(e,t,n=!1){if(e.length===0)return t[0];const s=e.reduce((o,r)=>o*r)*(n?2:1);if(s===0)return[];if(s!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return xB(0,e,t,n)}function kB(e,t){const n=So(e,t);for(let s=0;s<n.length;s++)n[s]=1;return n}function So(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function SB(e,t){const n=e.reduce((s,o)=>s*o,1);if(t==null||t==="float32")return wi(e,new Float32Array(n));if(t==="int32")return wi(e,new Int32Array(n));if(t==="bool")return wi(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function IB(e){e.forEach(t=>{K(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function ji(e,t,n){if(t===0)return 0;if(t===1)return e[0];let s=e[e.length-1];for(let o=0;o<e.length-1;++o)s+=n[o]*e[o];return s}function Hp(e,t,n){if(t===0)return[];if(t===1)return[e];const s=new Array(t);for(let o=0;o<s.length-1;++o)s[o]=Math.floor(e/n[o]),e-=s[o]*n[o];return s[s.length-1]=e,s}function TB(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ED="tfjsflags";class EAe{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=_Ae,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(je().getBool("IS_TEST")||je().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,s){if(this.flagRegistry[t]={evaluationFn:n,setHook:s},this.urlFlags[t]!=null){const o=this.urlFlags[t];je().getBool("IS_TEST")||je().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(TB(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global=="undefined"||typeof this.global.location=="undefined"||typeof this.global.location.search=="undefined")return;const t=this.getQueryParams(this.global.location.search);ED in t&&t[ED].split(",").forEach(s=>{const[o,r]=s.split(":");this.urlFlags[o]=AAe(o,r)})}}function _Ae(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...s)=>(NAe(t,s[0],s[1]),s.join("="))),t}function NAe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function AAe(e,t){if(t=t.toLowerCase(),t==="true"||t==="false")return t==="true";if(`${+t}`===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}function je(){return EB}let EB=null;function DAe(e){EB=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Xw;function _B(){if(Xw==null){let e;if(typeof window!="undefined")e=window;else if(typeof global!="undefined")e=global;else if(typeof process!="undefined")e=process;else if(typeof self!="undefined")e=self;else throw new Error("Could not find a global object");Xw=e}return Xw}function RAe(){const e=_B();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Ck(e,t){const n=RAe();if(n.has(e))return n.get(e);{const s=t();return n.set(e,s),n.get(e)}}const B0="Abs",Up="Acos",jp="Acosh",uf="Add",xk="AddN",kk="All",Sk="Any",z0="ArgMax",V0="ArgMin",Gp="Asin",Kp="Asinh",qp="Atan",Yp="Atanh",Xp="Atan2",W0="AvgPool",Ik="AvgPoolGrad",H0="AvgPool3D",Tk="AvgPool3DGrad",U0="BatchMatMul",j0="BatchToSpaceND",Ek="Bincount",OAe="BroadcastTo",NB="BroadcastArgs",Zp="Cast",Jp="Ceil",Qp="ClipByValue",_k="Complex",G0="ComplexAbs",K0="Concat",q0="Conv2D",Nk="Conv2DBackpropFilter",Y0="Conv2DBackpropInput",X0="Conv3D",Ak="Conv3DBackpropFilterV2",Dk="Conv3DBackpropInputV2",eg="Cos",tg="Cosh",Z0="Cumsum",Rk="CropAndResize",AB="DenseBincount",Ok="DepthToSpace",J0="DepthwiseConv2dNative",Mk="DepthwiseConv2dNativeBackpropFilter",Pk="DepthwiseConv2dNativeBackpropInput",DB="Diag",Q0="Dilation2D",GC="Dilation2DBackpropInput",KC="Dilation2DBackpropFilter",ng="RealDiv",RB="Einsum",sg="Elu",Fk="EluGrad",og="Erf",ey="Equal",rg="Exp",ty="ExpandDims",ig="Expm1",Lk="FFT",Bk="Fill",zk="FlipLeftRight",ag="Floor",lg="FloorDiv",ny="FusedBatchNorm",sy="GatherV2",OB="GatherNd",oy="Greater",ug="GreaterEqual",cg="Identity",Vk="IFFT",Wk="Imag",dg="IsFinite",fg="IsInf",hg="IsNan",ry="LeakyRelu",iy="Less",ay="LessEqual",MB="LinSpace",pg="Log",gg="Log1p",ly="LogicalAnd",uy="LogicalNot",cy="LogicalOr",MAe="LogSoftmax",dy="LRN",Hk="LRNGrad",fy="Max",mg="Maximum",hy="MaxPool",Uk="MaxPoolGrad",py="MaxPool3D",jk="MaxPool3DGrad",PB="MaxPoolWithArgmax",gy="Mean",my="Min",vg="Minimum",vy="MirrorPad",bg="Mod",FB="Multinomial",yg="Multiply",by="Neg",yy="NotEqual",Gk="NonMaxSuppressionV3",Kk="NonMaxSuppressionV4",qk="NonMaxSuppressionV5",wy="OnesLike",$y="OneHot",Cy="Pack",xy="PadV2",wg="Pow",ky="Prelu",Yk="Prod",Xk="Range",Zk="Real",$g="Reciprocal",Cg="Relu",Sy="Reshape",Iy="ResizeNearestNeighbor",Jk="ResizeNearestNeighborGrad",Ty="ResizeBilinear",Qk="ResizeBilinearGrad",xg="Relu6",Ey="Reverse",kg="Round",Sg="Rsqrt",LB="ScatterNd",_y="Select",Ig="Selu",Ny="Slice",Tg="Sin",Eg="Sinh",_g="Sign",Ng="Sigmoid",Ag="Softplus",Dg="Sqrt",Ay="Sum",Dy="SpaceToBatchND",Ry="SplitV",Oy="Softmax",eS="SparseFillEmptyRows",tS="SparseReshape",nS="SparseSegmentMean",sS="SparseSegmentSum",BB="SparseToDense",Rg="SquaredDifference",oS="Square",rS="StridedSlice",iS="StringNGrams",aS="StringSplit",lS="StringToHashBucketFast",Og="Sub",Mg="Tan",Pg="Tanh",Fg="Tile",uS="TopK",cS="Transform",My="Transpose",dS="Unique",Py="Unpack",Fy="UnsortedSegmentSum",Ly="ZerosLike",Lg="Step",PAe="FromPixels",fS="RotateWithOffset",Eb="_FusedMatMul",_b="FusedConv2D",zB="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vr(...e){je().getBool("IS_TEST")||je().getBool("PROD")||console.warn(...e)}function FAe(...e){je().getBool("IS_TEST")||je().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nb=Ck("kernelRegistry",()=>new Map),qC=Ck("gradRegistry",()=>new Map);function _D(e,t){const n=WB(e,t);return Nb.get(n)}function ND(e){return qC.get(e)}function AD(e){const t=Nb.entries(),n=[];for(;;){const{done:s,value:o}=t.next();if(s)break;const[r,i]=o,[a]=r.split("_");a===e&&n.push(i)}return n}function VB(e){const{kernelName:t,backendName:n}=e,s=WB(t,n);Nb.has(s)&&vr(`The kernel '${t}' for backend '${n}' is already registered`),Nb.set(s,e)}function LAe(e){const{kernelName:t}=e;qC.has(t)&&je().getBool("DEBUG")&&vr(`Overriding the gradient for '${t}'`),qC.set(t,e)}function WB(e,t){return`${t}_${e}`}var YC=is,zr=null;try{zr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function is(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}is.prototype.__isLong__;Object.defineProperty(is.prototype,"__isLong__",{value:!0});function lr(e){return(e&&e.__isLong__)===!0}is.isLong=lr;var DD={},RD={};function hc(e,t){var n,s,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(s=RD[e],s)?s:(n=as(e,(e|0)<0?-1:0,!0),o&&(RD[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(s=DD[e],s)?s:(n=as(e,e<0?-1:0,!1),o&&(DD[e]=n),n))}is.fromInt=hc;function Vr(e,t){if(isNaN(e))return t?ku:Wr;if(t){if(e<0)return ku;if(e>=HB)return GB}else{if(e<=-MD)return Zo;if(e+1>=MD)return jB}return e<0?Vr(-e,t).neg():as(e%Rd|0,e/Rd|0,t)}is.fromNumber=Vr;function as(e,t,n){return new is(e,t,n)}is.fromBits=as;var Ab=Math.pow;function hS(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return Wr;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var s;if((s=e.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return hS(e.substring(1),t,n).neg();for(var o=Vr(Ab(n,8)),r=Wr,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),l=parseInt(e.substring(i,i+a),n);if(a<8){var u=Vr(Ab(n,a));r=r.mul(u).add(Vr(l))}else r=r.mul(o),r=r.add(Vr(l))}return r.unsigned=t,r}is.fromString=hS;function Ri(e,t){return typeof e=="number"?Vr(e,t):typeof e=="string"?hS(e,t):as(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}is.fromValue=Ri;var OD=1<<16,BAe=1<<24,Rd=OD*OD,HB=Rd*Rd,MD=HB/2,PD=hc(BAe),Wr=hc(0);is.ZERO=Wr;var ku=hc(0,!0);is.UZERO=ku;var od=hc(1);is.ONE=od;var UB=hc(1,!0);is.UONE=UB;var XC=hc(-1);is.NEG_ONE=XC;var jB=as(-1,2147483647,!1);is.MAX_VALUE=jB;var GB=as(-1,-1,!0);is.MAX_UNSIGNED_VALUE=GB;var Zo=as(0,-2147483648,!1);is.MIN_VALUE=Zo;var ft=is.prototype;ft.toInt=function(){return this.unsigned?this.low>>>0:this.low};ft.toNumber=function(){return this.unsigned?(this.high>>>0)*Rd+(this.low>>>0):this.high*Rd+(this.low>>>0)};ft.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Zo)){var n=Vr(t),s=this.div(n),o=s.mul(n).sub(this);return s.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var r=Vr(Ab(t,6),this.unsigned),i=this,a="";;){var l=i.div(r),u=i.sub(l.mul(r)).toInt()>>>0,c=u.toString(t);if(i=l,i.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};ft.getHighBits=function(){return this.high};ft.getHighBitsUnsigned=function(){return this.high>>>0};ft.getLowBits=function(){return this.low};ft.getLowBitsUnsigned=function(){return this.low>>>0};ft.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Zo)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&(t&1<<n)==0;n--);return this.high!=0?n+33:n+1};ft.isZero=function(){return this.high===0&&this.low===0};ft.eqz=ft.isZero;ft.isNegative=function(){return!this.unsigned&&this.high<0};ft.isPositive=function(){return this.unsigned||this.high>=0};ft.isOdd=function(){return(this.low&1)===1};ft.isEven=function(){return(this.low&1)===0};ft.equals=function(t){return lr(t)||(t=Ri(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};ft.eq=ft.equals;ft.notEquals=function(t){return!this.eq(t)};ft.neq=ft.notEquals;ft.ne=ft.notEquals;ft.lessThan=function(t){return this.comp(t)<0};ft.lt=ft.lessThan;ft.lessThanOrEqual=function(t){return this.comp(t)<=0};ft.lte=ft.lessThanOrEqual;ft.le=ft.lessThanOrEqual;ft.greaterThan=function(t){return this.comp(t)>0};ft.gt=ft.greaterThan;ft.greaterThanOrEqual=function(t){return this.comp(t)>=0};ft.gte=ft.greaterThanOrEqual;ft.ge=ft.greaterThanOrEqual;ft.compare=function(t){if(lr(t)||(t=Ri(t)),this.eq(t))return 0;var n=this.isNegative(),s=t.isNegative();return n&&!s?-1:!n&&s?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};ft.comp=ft.compare;ft.negate=function(){return!this.unsigned&&this.eq(Zo)?Zo:this.not().add(od)};ft.neg=ft.negate;ft.add=function(t){lr(t)||(t=Ri(t));var n=this.high>>>16,s=this.high&65535,o=this.low>>>16,r=this.low&65535,i=t.high>>>16,a=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,f=0,h=0;return h+=r+u,f+=h>>>16,h&=65535,f+=o+l,d+=f>>>16,f&=65535,d+=s+a,c+=d>>>16,d&=65535,c+=n+i,c&=65535,as(f<<16|h,c<<16|d,this.unsigned)};ft.subtract=function(t){return lr(t)||(t=Ri(t)),this.add(t.neg())};ft.sub=ft.subtract;ft.multiply=function(t){if(this.isZero())return Wr;if(lr(t)||(t=Ri(t)),zr){var n=zr.mul(this.low,this.high,t.low,t.high);return as(n,zr.get_high(),this.unsigned)}if(t.isZero())return Wr;if(this.eq(Zo))return t.isOdd()?Zo:Wr;if(t.eq(Zo))return this.isOdd()?Zo:Wr;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(PD)&&t.lt(PD))return Vr(this.toNumber()*t.toNumber(),this.unsigned);var s=this.high>>>16,o=this.high&65535,r=this.low>>>16,i=this.low&65535,a=t.high>>>16,l=t.high&65535,u=t.low>>>16,c=t.low&65535,d=0,f=0,h=0,p=0;return p+=i*c,h+=p>>>16,p&=65535,h+=r*c,f+=h>>>16,h&=65535,h+=i*u,f+=h>>>16,h&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=r*u,d+=f>>>16,f&=65535,f+=i*l,d+=f>>>16,f&=65535,d+=s*c+o*u+r*l+i*a,d&=65535,as(h<<16|p,d<<16|f,this.unsigned)};ft.mul=ft.multiply;ft.divide=function(t){if(lr(t)||(t=Ri(t)),t.isZero())throw Error("division by zero");if(zr){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?zr.div_u:zr.div_s)(this.low,this.high,t.low,t.high);return as(n,zr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ku:Wr;var s,o,r;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ku;if(t.gt(this.shru(1)))return UB;r=ku}else{if(this.eq(Zo)){if(t.eq(od)||t.eq(XC))return Zo;if(t.eq(Zo))return od;var i=this.shr(1);return s=i.div(t).shl(1),s.eq(Wr)?t.isNegative()?od:XC:(o=this.sub(t.mul(s)),r=s.add(o.div(t)),r)}else if(t.eq(Zo))return this.unsigned?ku:Wr;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=Wr}for(o=this;o.gte(t);){s=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(s)/Math.LN2),l=a<=48?1:Ab(2,a-48),u=Vr(s),c=u.mul(t);c.isNegative()||c.gt(o);)s-=l,u=Vr(s,this.unsigned),c=u.mul(t);u.isZero()&&(u=od),r=r.add(u),o=o.sub(c)}return r};ft.div=ft.divide;ft.modulo=function(t){if(lr(t)||(t=Ri(t)),zr){var n=(this.unsigned?zr.rem_u:zr.rem_s)(this.low,this.high,t.low,t.high);return as(n,zr.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};ft.mod=ft.modulo;ft.rem=ft.modulo;ft.not=function(){return as(~this.low,~this.high,this.unsigned)};ft.and=function(t){return lr(t)||(t=Ri(t)),as(this.low&t.low,this.high&t.high,this.unsigned)};ft.or=function(t){return lr(t)||(t=Ri(t)),as(this.low|t.low,this.high|t.high,this.unsigned)};ft.xor=function(t){return lr(t)||(t=Ri(t)),as(this.low^t.low,this.high^t.high,this.unsigned)};ft.shiftLeft=function(t){return lr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?as(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):as(0,this.low<<t-32,this.unsigned)};ft.shl=ft.shiftLeft;ft.shiftRight=function(t){return lr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?as(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):as(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};ft.shr=ft.shiftRight;ft.shiftRightUnsigned=function(t){if(lr(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var s=this.low;return as(s>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?as(n,0,this.unsigned):as(n>>>t-32,0,this.unsigned)};ft.shru=ft.shiftRightUnsigned;ft.shr_u=ft.shiftRightUnsigned;ft.toSigned=function(){return this.unsigned?as(this.low,this.high,!1):this};ft.toUnsigned=function(){return this.unsigned?this:as(this.low,this.high,!0)};ft.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};ft.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};ft.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};is.fromBytes=function(t,n,s){return s?is.fromBytesLE(t,n):is.fromBytesBE(t,n)};is.fromBytesLE=function(t,n){return new is(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};is.fromBytesBE=function(t,n){return new is(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var zAe=Object.freeze(_9({__proto__:null,[Symbol.toStringTag]:"Module",default:YC},[YC]));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mu=YC||zAe;function By(e){return mu.fromString(e,!0,16)}const KB=By("c3a5c85c97cb3127"),cu=By("b492b66fbe98f273"),_o=By("9ae16a3b2f90404f");function ZC(e){return e.xor(e.shru(47))}function qB(e,t,n){const s=e.slice(t,t+n);return mu.fromBytes(Array.from(s),!0,!0)}function Jn(e,t){return qB(e,t,8)}function FD(e,t){return qB(e,t,4)}function Ks(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function ul(e,t,n=By("9ddfea08eb382d69")){let s=e.xor(t).mul(n);s=s.xor(s.shru(47));let o=t.xor(s).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function VAe(e,t,n,s,o,r){o=o.add(e),r=Ks(r.add(o).add(s),21);const i=o;return o=o.add(t),o=o.add(n),r=r.add(Ks(o,44)),[o.add(s),r.add(i)]}function qm(e,t,n,s){return VAe(Jn(e,t),Jn(e,t+8),Jn(e,t+16),Jn(e,t+24),n,s)}function WAe(e,t=e.length){if(t>=8){const n=_o.add(t*2),s=Jn(e,0).add(_o),o=Jn(e,t-8),r=Ks(o,37).mul(n).add(s),i=Ks(s,25).add(o).mul(n);return ul(r,i,n)}if(t>=4){const n=_o.add(t*2),s=FD(e,0);return ul(s.shl(3).add(t),FD(e,t-4),n)}if(t>0){const n=e[0],s=e[t>>1],o=e[t-1],r=n+(s<<8),i=t+(o<<2);return ZC(_o.mul(r).xor(KB.mul(i))).mul(_o)}return _o}function HAe(e,t=e.length){const n=_o.add(t*2),s=Jn(e,0).mul(cu),o=Jn(e,8),r=Jn(e,t-8).mul(n),i=Jn(e,t-16).mul(_o);return ul(Ks(s.add(o),43).add(Ks(r,30)).add(i),s.add(Ks(o.add(_o),18)).add(r),n)}function UAe(e,t=e.length){const n=_o.add(t*2),s=Jn(e,0).mul(_o),o=Jn(e,8),r=Jn(e,t-8).mul(n),i=Jn(e,t-16).mul(_o),a=Ks(s.add(o),43).add(Ks(r,30)).add(i),l=ul(a,s.add(Ks(o.add(_o),18)).add(r),n),u=Jn(e,16).mul(n),c=Jn(e,24),d=a.add(Jn(e,t-32)).mul(n),f=l.add(Jn(e,t-24)).mul(n);return ul(Ks(u.add(c),43).add(Ks(d,30)).add(f),u.add(Ks(c.add(s),18)).add(d),n)}function jAe(e,t=e.length){const n=mu.fromNumber(81,!0);if(t<=32)return t<=16?WAe(e,t):HAe(e,t);if(t<=64)return UAe(e,t);let s=n,o=n.mul(cu).add(113),r=ZC(o.mul(_o).add(113)).mul(_o),i=[mu.UZERO,mu.UZERO],a=[mu.UZERO,mu.UZERO];s=s.mul(_o).add(Jn(e,0));let l=0;const u=(t-1>>6)*64,c=u+(t-1&63)-63;do s=Ks(s.add(o).add(i[0]).add(Jn(e,l+8)),37).mul(cu),o=Ks(o.add(i[1]).add(Jn(e,l+48)),42).mul(cu),s=s.xor(a[1]),o=o.add(i[0]).add(Jn(e,l+40)),r=Ks(r.add(a[0]),33).mul(cu),i=qm(e,l,i[1].mul(cu),s.add(a[0])),a=qm(e,l+32,r.add(a[1]),o.add(Jn(e,l+16))),[r,s]=[s,r],l+=64;while(l!==u);const d=cu.add(r.and(255).shl(1));return l=c,a[0]=a[0].add(t-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),s=Ks(s.add(o).add(i[0]).add(Jn(e,l+8)),37).mul(d),o=Ks(o.add(i[1]).add(Jn(e,l+48)),42).mul(d),s=s.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(Jn(e,l+40))),r=Ks(r.add(a[0]),33).mul(d),i=qm(e,l,i[1].mul(d),s.add(a[0])),a=qm(e,l+32,r.add(a[1]),o.add(Jn(e,l+16))),[r,s]=[s,r],ul(ul(i[0],a[0],d).add(ZC(o).mul(KB)).add(r),ul(i[1],a[1],d).add(s),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rl(e,t){return t==="string"?cl(e):pc([e],t)}function GAe(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function pc(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Ad(e)),je().getBool("DEBUG")&&kAe(e,t),GAe(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let s=0;s<n.length;++s)Math.round(e[s])!==0&&(n[s]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Fo(){return je().platform.now()}function cl(e,t="utf-8"){return t=t||"utf-8",je().platform.encode(e,t)}function Od(e,t="utf-8"){return t=t||"utf-8",je().platform.decode(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KAe{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new YAe)}profileKernel(t,n,s){let o;const r=()=>{o=s()};let i;const a=Fo();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(r);else{r();for(const u of o)u.dataSync();i=Promise.resolve({kernelMs:Fo()-a})}if(je().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<o.length;u++){const c=o[u];c.data().then(d=>{qAe(d,c.dtype,t)})}return{kernelName:t,outputs:o,inputs:n,timeMs:i.then(u=>u.kernelMs),extraInfo:i.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:s,timeMs:o,inputs:r,extraInfo:i}=t;s.forEach(a=>{Promise.all([a.data(),o,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],r,l[2])})})}}function qAe(e,t,n){if(t!=="float32")return!1;for(let s=0;s<e.length;s++){const o=e[s];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class YAe{logKernelProfile(t,n,s,o,r,i){const a=typeof o=="number"?dd(`${o}ms`,9):o.error,l=dd(t,25),u=n.rank,c=n.size,d=dd(n.shape.toString(),14);let f="";for(const h in r){const p=r[h];if(p!=null){const g=p.shape||n.shape,m=g.length;f+=`${h}: ${m}D ${m>0?g:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${c}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XAe(e,t,n){const s={},o={};for(let l=0;l<t.length;l++)s[t[l].id]=!0;for(let l=0;l<e.length;l++){const u=e[l],c=u.inputs;for(const d in c){const f=c[d];let h=!1;for(let p=0;p<t.length;p++)if(s[f.id]){u.outputs.forEach(g=>s[g.id]=!0),h=!0,o[u.id]=!0;break}if(h)break}}const r={};r[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const u=e[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(r[u.outputs[d].id]){for(const f in c)r[c[f].id]=!0,i[u.id]=!0;break}}const a=[];for(let l=0;l<e.length;l++){const u=e[l];if(o[u.id]&&i[u.id]){const c={};for(const f in u.inputs){const h=u.inputs[f];s[h.id]&&(c[f]=h)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,a.push(d)}}return a}function ZAe(e,t,n,s){for(let o=t.length-1;o>=0;o--){const r=t[o],i=[];if(r.outputs.forEach(l=>{const u=e[l.id];u!=null?i.push(u):i.push(null)}),r.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(i);for(const l in r.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=r.inputs[l];if(!Mn(u.shape,c.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=u;else{const d=e[c.id];e[c.id]=s(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LD=20,zf=3,Zw=7;function JAe(e,t,n,s){const o=Dt(t),r=QAe(e,t,n,o),i=t.length,a=eb(e,t,n,o,r),l=["Tensor"];return s&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function QAe(e,t,n,s){const o=Ue(t),r=s[s.length-1],i=new Array(r).fill(0),a=t.length,l=n==="complex64"?ah(e):e;if(a>1)for(let u=0;u<o/r;u++){const c=u*r;for(let d=0;d<r;d++)i[d]=Math.max(i[d],ih(l[c+d],0,n).length)}return i}function ih(e,t,n){let s;return Array.isArray(e)?s=`${parseFloat(e[0].toFixed(Zw))} + ${parseFloat(e[1].toFixed(Zw))}j`:Vp(e)?s=`'${e}'`:n==="bool"?s=YB(e):s=parseFloat(e.toFixed(Zw)).toString(),dd(s,t)}function YB(e){return e===0?"false":"true"}function eb(e,t,n,s,o,r=!0){const i=n==="complex64"?2:1,a=t[0],l=t.length;if(l===0){if(n==="complex64"){const g=ah(e);return[ih(g[0],0,n)]}return n==="bool"?[YB(e[0])]:[e[0].toString()]}if(l===1){if(a>LD){const m=zf*i;let v=Array.from(e.slice(0,m)),b=Array.from(e.slice((a-zf)*i,a*i));return n==="complex64"&&(v=ah(v),b=ah(b)),["["+v.map(($,y)=>ih($,o[y],n)).join(", ")+", ..., "+b.map(($,y)=>ih($,o[a-zf+y],n)).join(", ")+"]"]}const g=n==="complex64"?ah(e):Array.from(e);return["["+g.map((m,v)=>ih(m,o[v],n)).join(", ")+"]"]}const u=t.slice(1),c=s.slice(1),d=s[0]*i,f=[];if(a>LD){for(let g=0;g<zf;g++){const m=g*d,v=m+d;f.push(...eb(e.slice(m,v),u,n,c,o,!1))}f.push("...");for(let g=a-zf;g<a;g++){const m=g*d,v=m+d;f.push(...eb(e.slice(m,v),u,n,c,o,g===a-1))}}else for(let g=0;g<a;g++){const m=g*d,v=m+d;f.push(...eb(e.slice(m,v),u,n,c,o,g===a-1))}const h=l===2?",":"";f[0]="["+f[0]+h;for(let g=1;g<f.length-1;g++)f[g]=" "+f[g]+h;let p=`,
`;for(let g=2;g<l;g++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(r?"":p),f}function ah(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $o{constructor(t,n,s){if(this.dtype=n,this.shape=t.slice(),this.size=Ue(t),s!=null){const o=s.length;K(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||zo(n,this.size),this.strides=Dt(t)}set(t,...n){n.length===0&&(n=[0]),K(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const s=this.locToIndex(n);this.values[s]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const o of t){if(o<0||o>=this.shape[n]){const r=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(r)}n++}let s=t[t.length-1];for(let o=0;o<t.length-1;++o)s+=this.strides[o]*t[o];return this.values[s]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let s=0;s<t.length-1;++s)n+=this.strides[s]*t[s];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let s=0;s<n.length-1;++s)n[s]=Math.floor(t/this.strides[s]),t-=n[s]*this.strides[s];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return pi().makeTensor(this.values,this.shape,this.dtype)}}let pi=null,Jc=null;function eDe(e){pi=e}function tDe(e){Jc=e}class _s{constructor(t,n,s,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Ue(t),this.strides=Dt(t),this.dataId=s,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return Jc.buffer(this.shape,this.dtype,t)}bufferSync(){return Jc.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return wi(this.shape,t,this.dtype==="complex64")}arraySync(){return wi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=pi().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(s=>Od(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),pi().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=pi().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>Od(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await pi().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(pi().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Jc.print(this,t)}clone(){return this.throwIfDisposed(),Jc.clone(this)}toString(t=!1){const n=this.dataSync();return JAe(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Jc.cast(this,t)}variable(t=!0,n,s){return this.throwIfDisposed(),pi().makeVariable(this,t,n,s)}}Object.defineProperty(_s,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function Ve(){return Ck("Tensor",()=>_s)}Ve();class Db extends _s{constructor(t,n,s,o){super(t.shape,t.dtype,t.dataId,o);this.trainable=n,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Mn(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);pi().disposeTensor(this),this.dataId=t.dataId,pi().incRef(this,null)}dispose(){pi().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Db,Symbol.hasInstance,{value:e=>e instanceof _s&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var BD;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(BD||(BD={}));var JC;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(JC||(JC={}));var QC;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(QC||(QC={}));var ex;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(ex||(ex={}));var tx;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(tx||(tx={}));const nDe={float32:ex,int32:JC,bool:QC,complex64:tx};function kr(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return nDe[e][t]}function pS(e){return kr(e,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ss(e,t){if(e.dtype===t.dtype)return[e,t];const n=kr(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function XB(e){const t=[];return ZB(e,t,new Set),t}function ZB(e,t,n){if(e==null)return;if(e instanceof _s){t.push(e);return}if(!sDe(e))return;const s=e;for(const o in s){const r=s[o];n.has(r)||(n.add(r),ZB(r,t,n))}}function sDe(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jw(e){return e.kernelName!=null}class zD{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class Md{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new zD}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const s=t[n];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,s=1){return t in this.registryFactory?(vr(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:s},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:s}=this.initializeBackend(t);if(!(s?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new KAe(this.backendInstance),!0}setupRegisteredKernels(){AD(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){AD(t).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const s=n.factory();if(s&&!(s instanceof $k)&&typeof s.then=="function"){const o=++this.pendingBackendInitId,r=s.then(i=>o<this.pendingBackendInitId?!1:(this.registry[t]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,vr(`Initialization of backend ${t} failed`),vr(i.stack||i.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(s){return vr(`Initialization of backend ${t} failed`),vr(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const s=t[n],{success:o,asyncInit:r}=this.initializeBackend(s);if(r||o)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const s=this.state.tensorInfo.get(n),o=s.backend,r=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),s.backend=t,t.move(n,r,s.shape,s.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let s=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=t}let o;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(t,n,s){t();try{const o=s();return n(),o}catch(o){throw n(),o}}nextTensorId(){return Md.nextTensorId++}nextVariableId(){return Md.nextVariableId++}clone(t){const n=xe.runKernel(cg,{x:t}),s={x:t},o=i=>({x:()=>{const a="float32",l={x:i},u={dtype:a};return xe.runKernel(Zp,l,u)}}),r=[];return this.addTapeNode(this.state.activeScope.name,s,[n],o,r,{}),n}runKernel(t,n,s){if(this.backendName==null&&this.backend,!(_D(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,s){const o=this.backend.numDataIds();let r=0;s.forEach(l=>{r+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-r-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${t}'`)}runKernelFunc(t){let n,s=[];const o=this.isTapeOn(),r=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=Jw(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Jw(t)){const{kernelName:p,inputs:g,attrs:m}=t;this.backendName==null&&this.backend;const v=_D(p,this.backendName);K(v!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();l=v.kernelFunc({inputs:g,attrs:m,backend:this.backend});const $=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,$);const y=$.map(w=>{if(w.rank!=null)return w;const{dataId:C,shape:x,dtype:k}=w;return this.makeTensorFromDataId(C,x,k)});if(o){const w=this.getTensorsForGradient(p,g,y);s=this.saveTensorsForBackwardMode(w)}return y}}else{const{forwardFunc:p}=t,g=m=>{!o||(s=m.map(v=>this.keep(this.clone(v))))};a=()=>{const m=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,g));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,m,v),v}}const{inputs:c,attrs:d}=t,f=Jw(t)?null:t.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),o&&this.addTapeNode(u,c,n,f,s,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(t,n,s){const o=ND(t);if(o!=null){const r=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?(K(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=r.map(u=>n[u]);const l=s.filter((u,c)=>i[c]);return a.concat(l)}return[]}makeTensor(t,n,s,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",o=o||this.backend;let r=t;s==="string"&&Vp(t[0])&&(r=t.map(l=>cl(l)));const i=o.write(r,n,s),a=new _s(n,s,i,this.nextTensorId());if(this.trackTensor(a,o),s==="string"){const l=this.state.tensorInfo.get(i),u=IAe(r);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(t,n,s,o){s=s||"float32";const r=new _s(n,s,t,this.nextTensorId());return this.trackTensor(r,o),r}makeVariable(t,n=!0,s,o){s=s||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.cast(o));const r=new Db(t,n,s,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*WC(t.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:s})),t instanceof Db||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const s=t.size*WC(t.dtype);this.state.numBytes-=s}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,s,o,r,i){const a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:s,saved:r},l=ND(t);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=u=>(u=u.map((c,d)=>{if(c==null){const f=s[d],h=So(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],r,i))),this.state.activeTape.push(a)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=XB(t),s=new Set(n.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const i=this.state.activeScope.track[r];!i.kept&&!s.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(r=>{!r.kept&&r.scopeId===o.id&&this.track(r)})}gradients(t,n,s,o=!1){if(K(n.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));K(r instanceof _s,()=>"The result y returned by f() must be a tensor.");const i=XAe(this.state.activeTape,n,r);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[r.id]=s==null?oDe(r.shape):s,ZAe(a,i,u=>this.tidy(u),rDe);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:r,grads:l}})}customGrad(t){return K(UC(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{K(n.every(a=>a instanceof _s),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const o={};n.forEach((a,l)=>{o[l]=a});const r=(a,l)=>(s=t(...n,l),K(s.value instanceof _s,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),K(UC(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),i=(a,l)=>{const u=s.gradFunc(a,l),c=Array.isArray(u)?u:[u];K(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),K(c.every(f=>f instanceof _s),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:r,backwardsFunc:i,inputs:o})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=Fo(),s=await this.backend.time(t);return s.wallMs=Fo()-n,s}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new zD;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Md.nextTensorId=0;Md.nextVariableId=0;function oDe(e){const t=kB(Ue(e),"float32");return xe.makeTensor(t,e,"float32")}function JB(){const e=_B();if(e._tfengine==null){const t=new EAe(e);e._tfengine=new Md(t)}return DAe(e._tfengine.ENV),eDe(()=>e._tfengine),e._tfengine}const xe=JB();function rDe(e,t){const n={a:e,b:t};return xe.runKernel(uf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(){return typeof navigator!="undefined"&&navigator!=null}function QB(e){if(e||iDe()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window!="undefined"?window.opera:"");if(!t){const n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function ez(){return typeof window!="undefined"&&window.document!=null||typeof WorkerGlobalScope!="undefined"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Si=je();Si.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Si.registerFlag("IS_BROWSER",()=>ez());Si.registerFlag("IS_NODE",()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined");Si.registerFlag("IS_CHROME",()=>typeof navigator!="undefined"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Si.registerFlag("PROD",()=>!1);Si.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Si.getBool("DEBUG"));Si.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Si.registerFlag("IS_TEST",()=>!1);Si.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);Si.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zy(e,t){let n=e;if(Zi(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];const s=[];for(;Array.isArray(n)||Zi(n)&&t!=="string";)s.push(n.length),n=n[0];return Array.isArray(e)&&je().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&tz(e,s,[]),s}function tz(e,t,n){if(n=n||[],!Array.isArray(e)&&!Zi(e)){K(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}K(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),K(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const s=t.slice(1);for(let o=0;o<e.length;++o)tz(e[o],s,n.concat(o))}function VD(e,t,n,s){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${s}' must be ${e} tensor, but got ${t} tensor`)}}function Z(e,t,n,s="numeric"){if(e instanceof _s)return VD(s,e.dtype,t,n),e;let o=Wp(e);if(o!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(o=s),VD(s,o,t,n),e==null||!Zi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const r=zy(e,o);!Zi(e)&&!Array.isArray(e)&&(e=[e]);const a=o!=="string"?pc(e,o):Ad(e,[],!0);return xe.makeTensor(a,r,o)}function nz(e,t,n,s="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((r,i)=>Z(r,`${t}[${i}]`,n,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe="__op";function Ce(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const s=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+aDe;const o=(...r)=>{xe.startScope(n);try{const i=s(...r);return TB(i)&&console.error("Cannot return a Promise inside of tidy."),xe.endScope(i),i}catch(i){throw xe.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(e,t){const n=Z(e,"real","complex"),s=Z(t,"imag","complex");ti(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const o={real:n,imag:s};return xe.runKernel(_k,o)}const ap=Ce({complex_:lDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vy(e,t,n,s){if(s==null&&(s=Wp(e)),s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Zi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){IB(t);const o=Ue(t),r=Ue(n);K(o===r,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${r}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==Ue(t.slice(i)):!0;K(n[i]===t[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Zi(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=s!=="string"?pc(e,s):Ad(e,[],!0),xe.makeTensor(e,t,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(e,t,n){const s=zy(e,n);return Vy(e,t,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WD=4;async function HD(e,t){const n=[],s=[],o=Array.isArray(e)?e.map(i=>i.name):Object.keys(e);for(let i=0;i<o.length;++i){const a=o[i],l=Array.isArray(e)?e[i].tensor:e[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((m,v)=>m+v.length,0)+WD*f.length,p=new Uint8Array(h);let g=0;for(let m=0;m<f.length;m++){const v=f[m],b=new Uint8Array(new Uint32Array([v.length]).buffer);p.set(b,g),g+=WD,p.set(v,g),g+=v.length}d(p)});s.push(c)}else s.push(l.data());t!=null&&(u.group=t),n.push(u)}const r=await Promise.all(s);return{data:cDe(r),specs:n}}function cDe(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(r=>{if(t+=r.byteLength,n.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const s=new Uint8Array(t);let o=0;return n.forEach(r=>{s.set(new Uint8Array(r.buffer),o),o+=r.byteLength}),s.buffer}const gS=typeof Buffer!="undefined"&&(typeof Blob=="undefined"||typeof atob=="undefined"||typeof btoa=="undefined");function UD(e){return gS?Buffer.byteLength(e):new Blob([e]).size}function dDe(e){if(gS)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let s=0,o=t.length;s<o;s++)n+=String.fromCharCode(t[s]);return btoa(n)}function fDe(e){if(gS){const s=Buffer.from(e,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;++s)n.set([t.charCodeAt(s)],s);return n.buffer}function sz(e){if(e.length===1)return e[0];let t=0;e.forEach(o=>{t+=o.byteLength});const n=new Uint8Array(t);let s=0;return e.forEach(o=>{n.set(new Uint8Array(o),s),s+=o.byteLength}),n.buffer}function oz(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}async function hDe(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),e.weightsManifest!=null){const[s,o]=await t(e.weightsManifest);n.weightSpecs=s,n.weightData=o}return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),n}function Wy(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:UD(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:UD(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class js{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return js.instance==null&&(js.instance=new js),js.instance}static registerSaveRouter(t){js.getInstance().saveRouters.push(t)}static registerLoadRouter(t){js.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return js.getHandlers(t,"save")}static getLoadHandlers(t,n){return js.getHandlers(t,"load",n)}static getHandlers(t,n,s){const o=[];return(n==="load"?js.getInstance().loadRouters:js.getInstance().saveRouters).forEach(i=>{const a=i(t,s);a!==null&&o.push(a)}),o}}const pDe=e=>js.getSaveHandlers(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nx="tensorflowjs",sx=1,Su="models_store",ol="model_info_store";function rz(){if(!je().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window=="undefined"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function ox(e){const t=e.result;t.createObjectStore(Su,{keyPath:"modelPath"}),t.createObjectStore(ol,{keyPath:"modelPath"})}class Uu{constructor(t){if(this.indexedDB=rz(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((s,o)=>{const r=this.indexedDB.open(nx,sx);r.onupgradeneeded=()=>ox(r),r.onsuccess=()=>{const i=r.result;if(n==null){const a=i.transaction(Su,"readonly"),u=a.objectStore(Su).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=c=>(i.close(),o(u.error)),a.oncomplete=()=>i.close()}else{const a=Wy(n),l=i.transaction(ol,"readwrite");let u=l.objectStore(ol);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a});let d;c.onsuccess=()=>{d=i.transaction(Su,"readwrite");const h=d.objectStore(Su).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a});h.onsuccess=()=>s({modelArtifactsInfo:a}),h.onerror=p=>{u=l.objectStore(ol);const g=u.delete(this.modelPath);g.onsuccess=()=>(i.close(),o(h.error)),g.onerror=m=>(i.close(),o(h.error))}},c.onerror=f=>(i.close(),o(c.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},r.onerror=i=>o(r.error)})}}Uu.URL_SCHEME="indexeddb://";const iz=e=>je().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Uu.URL_SCHEME)?gDe(e.slice(Uu.URL_SCHEME.length)):null;js.registerSaveRouter(iz);js.registerLoadRouter(iz);function gDe(e){return new Uu(e)}function mDe(e){return e.startsWith(Uu.URL_SCHEME)?e.slice(Uu.URL_SCHEME.length):e}class vDe{constructor(){this.indexedDB=rz()}async listModels(){return new Promise((t,n)=>{const s=this.indexedDB.open(nx,sx);s.onupgradeneeded=()=>ox(s),s.onsuccess=()=>{const o=s.result,r=o.transaction(ol,"readonly"),a=r.objectStore(ol).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;t(l)},a.onerror=l=>(o.close(),n(a.error)),r.oncomplete=()=>o.close()},s.onerror=o=>n(s.error)})}async removeModel(t){return t=mDe(t),new Promise((n,s)=>{const o=this.indexedDB.open(nx,sx);o.onupgradeneeded=()=>ox(o),o.onsuccess=()=>{const r=o.result,i=r.transaction(ol,"readwrite"),a=i.objectStore(ol),l=a.get(t);let u;l.onsuccess=()=>{if(l.result==null)return r.close(),s(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const c=a.delete(t),d=()=>{u=r.transaction(Su,"readwrite");const h=u.objectStore(Su).delete(t);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>s(l.error)};c.onsuccess=d,c.onerror=f=>(d(),r.close(),s(l.error))}},l.onerror=c=>(r.close(),s(l.error)),i.oncomplete=()=>{u==null?r.close():u.oncomplete=()=>r.close()}},o.onerror=r=>s(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ma="/",Qc="tensorflowjs_models",az="info",bDe="model_topology",yDe="weight_specs",wDe="weight_data",$De="model_metadata";function lz(e){return{info:[Qc,e,az].join(ma),topology:[Qc,e,bDe].join(ma),weightSpecs:[Qc,e,yDe].join(ma),weightData:[Qc,e,wDe].join(ma),modelMetadata:[Qc,e,$De].join(ma)}}function uz(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function CDe(e){const t=e.split(ma);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(ma)}function xDe(e){return e.startsWith(ju.URL_SCHEME)?e.slice(ju.URL_SCHEME.length):e}class ju{constructor(t){if(!je().getBool("IS_BROWSER")||typeof window=="undefined"||typeof window.localStorage=="undefined")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=lz(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),s=JSON.stringify(t.weightSpecs),o=Wy(t);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,dDe(t.weightData));const r={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(r)),{modelArtifactsInfo:o}}catch{throw uz(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=s;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const a=JSON.parse(r);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=fDe(i),n}}ju.URL_SCHEME="localstorage://";const cz=e=>je().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ju.URL_SCHEME)?kDe(e.slice(ju.URL_SCHEME.length)):null;js.registerSaveRouter(cz);js.registerLoadRouter(cz);function kDe(e){return new ju(e)}class SDe{constructor(){K(je().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),K(typeof window=="undefined"||typeof window.localStorage!="undefined",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=Qc+ma,s=ma+az;for(let o=0;o<this.LS.length;++o){const r=this.LS.key(o);if(r.startsWith(n)&&r.endsWith(s)){const i=CDe(r);t[i]=JSON.parse(this.LS.getItem(r))}}return t}async removeModel(t){t=xDe(t);const n=lz(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const s=JSON.parse(this.LS.getItem(n.info));return uz(n),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jD="://";class nl{constructor(){this.managers={}}static getInstance(){return nl.instance==null&&(nl.instance=new nl),nl.instance}static registerManager(t,n){K(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(jD)&&(t=t.slice(0,t.indexOf(jD))),K(t.length>0,()=>"scheme must not be an empty string.");const s=nl.getInstance();K(s.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),s.managers[t]=n}static getManager(t){const n=this.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IDe{fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}}if(je().get("IS_BROWSER")){je().setPlatform("browser",new IDe);try{nl.registerManager(ju.URL_SCHEME,new SDe)}catch{}try{nl.registerManager(Uu.URL_SCHEME,new vDe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TDe={importFetch:()=>require("node-fetch")};let Qw;class EDe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return je().global.fetch!=null?je().global.fetch(t,n):(Qw==null&&(Qw=TDe.importFetch()),Qw(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}}je().get("IS_NODE")&&je().setPlatform("node",new EDe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gn(e,t="float32",n){return t=t||"float32",IB(e),new $o(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(e,t){const n=Z(e,"x","cast");if(!SAe(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:n},o={dtype:t};return xe.runKernel(Zp,s,o)}const gt=Ce({cast_:_De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(e){const n={x:Z(e,"x","clone","string_or_numeric")};return xe.runKernel(cg,n)}const Ou=Ce({clone_:NDe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */JB();const DDe={buffer:gn,cast:gt,clone:Ou,print:ADe};tDe(DDe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RDe="model",ODe=".json",MDe=".weights.bin";function GD(e){return new Promise(t=>setTimeout(t)).then(e)}class Gu{constructor(t){if(!je().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(Gu.URL_SCHEME)&&(t=t.slice(Gu.URL_SCHEME.length)),(t==null||t.length===0)&&(t=RDe),this.modelJsonFileName=t+ODe,this.weightDataFileName=t+MDe}async save(t){if(typeof document=="undefined")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o=oz(t,s),r=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),i=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await GD(()=>i.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;a.download=this.weightDataFileName,a.href=n,await GD(()=>a.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Wy(t)}}}}Gu.URL_SCHEME="downloads://";const PDe=e=>je().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gu.URL_SCHEME)?FDe(e.slice(Gu.URL_SCHEME.length)):null;js.registerSaveRouter(PDe);function FDe(e="model"){return new Gu(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KD(e,t,n,s){i(e),n=n==null?0:n,s=s==null?1:s,a(n,s);let o=0;const r=l=>(l.then(u=>{const c=n+ ++o/e.length*(s-n);return t(c),u}),l);function i(l){K(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){K(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),K(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),K(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(e.map(r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function LDe(e,t){t==null&&(t={});const n=t.fetchFunc==null?je().platform.fetch:t.fetchFunc,s=e.map(d=>n(d,t.requestInit,{isBinary:!0})),o=0,r=.5,a=(t.onProgress==null?await Promise.all(s):await KD(s,t.onProgress,o,r)).map(d=>d.arrayBuffer()),l=.5,u=1;return t.onProgress==null?await Promise.all(a):await KD(a,t.onProgress,l,u)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BDe="application/octet-stream",zDe="application/json";class mS{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(K(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=je().platform.fetch,K(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&K(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o=oz(t,s);n.body.append("model.json",new Blob([JSON.stringify(o)],{type:zDe}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:BDe}),"model.weights.bin");const r=await this.fetch(this.path,n);if(r.ok)return{modelArtifactsInfo:Wy(t),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const s=n.modelTopology,o=n.weightsManifest;if(s==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return hDe(n,r=>this.loadWeights(r))}async loadWeights(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[s,o]=VDe(n),r=this.weightPathPrefix||s,i=[];for(const c of t)i.push(...c.weights);const a=[],l=[];for(const c of t)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):a.push(r+d+o);this.weightUrlConverter&&a.push(...await Promise.all(l));const u=await LDe(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,sz(u)]}}mS.URL_SCHEME_REGEX=/^https?:\/\//;function VDe(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),s=e.substring(0,t),o=n>t?e.substring(n):"";return[s+"/",o]}function qD(e){return e.match(mS.URL_SCHEME_REGEX)!=null}const dz=(e,t)=>{if(typeof fetch=="undefined"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(s=>qD(s)):n=qD(e),n)return WDe(e,t)}return null};js.registerSaveRouter(dz);js.registerLoadRouter(dz);function WDe(e,t){return new mS(e,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDe(e,t,n=!1,s=!1){let o=Z(e,"a","matMul"),r=Z(t,"b","matMul");[o,r]=Ss(o,r);const i={a:o,b:r},a={transposeA:n,transposeB:s};return xe.runKernel(U0,i,a)}const Dn=Ce({matMul_:HDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UDe(e,t,n=1,s=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const r={indices:Z(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:s};return xe.runKernel($y,r,i)}const fz=Ce({oneHot_:UDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(e,t){const n=Z(e,"x","transpose");if(t==null&&(t=n.shape.map((r,i)=>i).reverse()),K(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(r=>{K(r>=0&&r<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1)return n.clone();const s={x:n},o={perm:t};return xe.runKernel(My,s,o)}const An=Ce({transpose_:jDe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pd(e,t){const n=e.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,i=e[r]||1;(t[t.length-1-o]||1)>1&&i===1&&s.unshift(r)}return s}function Hs(e,t){const n=[];for(let s=0;s<t.length;s++){const o=e[e.length-s-1],r=t.length-s-1,i=t[r];(o==null||o===1&&i>1)&&n.unshift(r)}return n}function nn(e,t){const n=[],s=Math.max(e.length,t.length);for(let o=0;o<s;o++){let r=e[e.length-o-1];r==null&&(r=1);let i=t[t.length-o-1];if(i==null&&(i=1),r===1)n.unshift(i);else if(i===1)n.unshift(r);else if(r!==i){const a=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(a)}else n.unshift(r)}return n}function vS(e,t){const n=e.shape.length,s=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[s-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[s-1]} vs. ${n}`);if(Ue(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,r=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=e.shape,l=o.slice();l.pop();let u=1;for(let d=r;d<n;++d)u*=a[d],l.push(a[d]);const c=[...Dt(e.shape).map(d=>d/u),1].slice(0,r);return[l,i,u,c]}function hz(e,t,n){const s=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${s}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(r+` update.rank < ${o}. `);if(e.length<s+(n.rank-o))throw new Error(r+` Output shape length < ${s+(n.rank-o)}`);if(n.rank!==o+e.length-s)throw new Error(r+` update.rank != ${o+e.length-s}`);for(let i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(r+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+s])throw new Error(r+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${e[i+o]})`)}function GDe(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}hz(n,t,e)}function Bg(e,t,n){const s=t.shape.length,o=s>1?t.shape[s-1]:1,r=n.length;let i=1;for(let d=o;d<r;++d)i*=n[d];const a=o<1?1:o,l=Ue(t.shape)/a,u=[...Dt(n.slice(0,o)),1],c=Ue(n);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rx=-2,KDe=-1;function bS(e,t,n){const s=e.shape.length;K(s===t.length,()=>`Error in slice${s}D: Length of begin ${t} must match the rank of the array (${s}).`),K(s===n.length,()=>`Error in slice${s}D: Length of size ${n} must match the rank of the array (${s}).`);for(let o=0;o<s;++o)K(t[o]+n[o]<=e.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function qDe(e){const t=[];let n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function yS(e,t,n){const s=[];for(let o=0;o<e.length;o++)s[o]=Math.ceil((t[o]-e[o])/n[o]);return s}function pz(e,t,n,s){const o=[...e];for(let r=o.length;r<s.length;r++)o.push(1);for(let r=0;r<n;r++)r===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function gz(e,t,n){return n<=e?n:n-(t-1)}function mz(e,t){const n=[];for(let s=0;s<e;s++)n.push(t+s);return n}function YDe(e,t,n,s,o,r,i,a,l){const u=e.length;let c=new Array(u),d=new Array(u),f=new Array(u);if(t.length&&n>0){const h=t[0],p=n+1;c=vz(i,h,p,s,e),d=bz(a,h,p,o,e),f=pz(r,h,p,e)}else for(let h=0;h<u;h++)c[h]=wz(i,s,r,e,h,l),d[h]=$z(a,o,r,e,h,l),f[h]=yz(r,h,l);return{begin:c,end:d,strides:f}}function vz(e,t,n,s,o){const r=[...o],i=mz(n,t);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=0;else{const l=gz(t,n,a);let u=s[l];e&1<<l&&(u=0),r[a]=u}return r}function bz(e,t,n,s,o){const r=[...o],i=mz(n,t);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const l=gz(t,n,a);let u=s[l];e&1<<l&&(u=Number.MAX_SAFE_INTEGER),r[a]=u}for(let a=0;a<r.length;a++){const l=o[a];r[a]<0&&(r[a]+=l),r[a]=Hu(0,r[a],o[a])}return r}function yz(e,t,n){let s=e[t];return(n&1<<t||s==null)&&(s=1),s}function wz(e,t,n,s,o,r){let i=t[o];const a=n[o]||1;(e&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),i=Hu(0,i,l-1),i}function $z(e,t,n,s,o,r){let i=t[o];const a=n[o]||1;(e&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),a>0?i=Hu(0,i,l):i=Hu(-1,i,l-1),i}function wS(e,t,n){let s=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){s=o;break}for(let o=s+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function $S(e,t){let n=e.length>0?e[e.length-1]:1;for(let s=0;s<e.length-1;s++)n+=e[s]*t[s];return n}function Hy(e,t,n){let s;const o=e.shape.length;typeof t=="number"?s=[t,...new Array(o-1).fill(0)]:t.length<o?s=t.concat(new Array(o-t.length).fill(0)):s=t.slice(),s.forEach(i=>{K(i!==-1,()=>"slice() does not support negative begin indexing.")});let r;return n==null?r=new Array(o).fill(-1):typeof n=="number"?r=[n,...new Array(o-1).fill(-1)]:n.length<o?r=n.concat(new Array(o-n.length).fill(-1)):r=n,r=r.map((i,a)=>i>=0?i:(K(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),e.shape[a]-s[a])),[s,r]}function CS(e,t,n,s,o,r,i,a,l){let u;if(s==null?(u=new Array(t.length),u.fill(1)):u=s,i!=null&&(i&i-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let $=0;$<d.dims;$++)c&&(1<<$&a)!==0&&d.numAddAxisAfterEllipsis++,1<<$&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};XDe(d,f);let h=!0,p=!0,g=!0;const m=[],v=[];for(let $=0;$<e.length;++$){if(f.strides[$]===0)throw Error(`strides[${$}] must be non-zero`);const y=!!(f.shrinkAxisMask&1<<$),w=e[$];if(w===-1){m.push(y?1:-1);continue}const C=[f.beginMask&1<<$,f.endMask&1<<$],x=[f.strides[$]>0?0:-1,f.strides[$]>0?w:w-1];if(y&&f.strides[$]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&f.strides[$]===1;const k=!!(f.beginMask&1<<$&&f.endMask&1<<$);if(f.beginValid&&f.endValid){if(y){const _=f.begin[$]<0?w+f.begin[$]:f.begin[$];if(f.begin[$]=_,f.end[$]=f.begin[$]+1,_<0||_>=w)throw Error(`slice index ${f.begin[$]} of dimension ${$} out of bounds.`)}else f.begin[$]=YD(f.begin[$],0,f.strides[$],w,C,x),f.end[$]=YD(f.end[$],1,f.strides[$],w,C,x);const T=f.strides[$]===1&&f.begin[$]===0&&f.end[$]===w;h=h&&T,p=p&&($===0&&f.strides[$]===1||T)}else h=h&&f.strides[$]===1&&k,p=p&&($===0&&f.strides[$]===1||k);let I,S=!1;if(f.beginValid&&f.endValid?(I=f.end[$]-f.begin[$],S=!0):y?(I=1,S=!0):k&&w>=0&&(f.strides[$]<0?I=-w:I=w,S=!0),S){let T;I===0||I<0!=f.strides[$]<0?T=0:T=Math.trunc(I/f.strides[$])+(I%f.strides[$]!==0?1:0),m.push(T)}else m.push(-1)}for(let $=0;$<f.finalShapeGatherIndices.length;++$){const y=f.finalShapeGatherIndices[$];y>=0?v.push(m[y]):y===rx&&v.push(1)}return{finalShapeSparse:v.filter(($,y)=>f.finalShapeGatherIndices[y]!==rx),finalShape:v,isIdentity:h,sliceDim0:p,isSimpleSlice:g,begin:f.begin,end:f.end,strides:f.strides}}function XDe(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let s=0;s<e.dims;s++)if(1<<s&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-s)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=s}else if(1<<s&e.newAxisMask)t.finalShapeGatherIndices.push(rx),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[s]),e.end!=null&&(t.end[n]=e.end[s]),t.strides[n]=e.strides[s],e.beginMask&1<<s&&(t.beginMask|=1<<n),e.endMask&1<<s&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<s?(t.finalShapeGatherIndices.push(KDe),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(s)),t.inputShapeGatherIndicesSparse[n]=s,n++}}function YD(e,t,n,s,o,r){if(o[t])return n>0?r[t]:r[t+1&1];{const i=e<0?s+e:e;return i<r[0]?r[0]:i>r[1]?r[1]:i}}var ZDe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",assertParamsValid:bS,maskToAxes:qDe,computeOutShape:yS,stridesWithElidedDims:pz,getNormalizedAxes:YDe,startIndicesWithElidedDims:vz,stopIndicesWithElidedDims:bz,stridesForAxis:yz,startForAxis:wz,stopForAxis:$z,isSliceContinous:wS,computeFlatOffset:$S,parseSliceParams:Hy,sliceInfo:CS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cf{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class Lr{constructor(){this.classNameMap={}}static getMap(){return Lr.instance==null&&(Lr.instance=new Lr),Lr.instance}static register(t){Lr.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function et(e){K(e.className!=null,()=>"Class being registered does not have the static className property defined."),K(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),K(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Lr.register(e)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ja(){return xe}function ix(){return xe.memory()}function Me(e,t){return xe.tidy(e,t)}function hn(e){XB(e).forEach(n=>n.dispose())}function Ji(e){return xe.keep(e)}function Cz(e,t,n=1){return xe.registerBackend(e,t,n)}function JDe(){return xe.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QDe(e,t){let n=Z(e,"a","add"),s=Z(t,"b","add");[n,s]=Ss(n,s);const o={a:n,b:s};return xe.runKernel(uf,o)}const st=Ce({add_:QDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(e,t){let n=Z(e,"a","floorDiv"),s=Z(t,"b","floorDiv");[n,s]=Ss(n,s);const o={a:n,b:s};return xe.runKernel(lg,o)}const xz=Ce({floorDiv_:eRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tRe(e,t){let n=Z(e,"a","div"),s=Z(t,"b","div");if([n,s]=Ss(n,s),n.dtype==="int32"&&s.dtype==="int32")return xz(n,s);const o={a:n,b:s},r={};return xe.runKernel(ng,o,r)}const Nt=Ce({div_:tRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nRe(e,t){let n=Z(e,"a","mul"),s=Z(t,"b","mul");[n,s]=Ss(n,s);const o={a:n,b:s};return xe.runKernel(yg,o)}const me=Ce({mul_:nRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sRe(e){const t=Z(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return xe.runKernel(G0,n)}else{const n={x:t};return xe.runKernel(B0,n)}}const Gs=Ce({abs_:sRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(e){const n={x:Z(e,"x","acos")};return xe.runKernel(Up,n)}const rRe=Ce({acos_:oRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(e){const n={x:Z(e,"x","acosh")};return xe.runKernel(jp,n)}const aRe=Ce({acosh_:iRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRe(e,t=null,n=!1){const o={x:Z(e,"x","all","bool")},r={axis:t,keepDims:n};return xe.runKernel(kk,o,r)}const kz=Ce({all_:lRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(e,t=null,n=!1){const o={x:Z(e,"x","any","bool")},r={axis:t,keepDims:n};return xe.runKernel(Sk,o,r)}const ax=Ce({any_:uRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(e,t=0){const s={x:Z(e,"x","argMax")},o={axis:t};return xe.runKernel(z0,s,o)}const lp=Ce({argMax_:cRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(e,t=0){const s={x:Z(e,"x","argMin")},o={axis:t};return xe.runKernel(V0,s,o)}const fRe=Ce({argMin_:dRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(e){const n={x:Z(e,"x","asin")};return xe.runKernel(Gp,n)}const pRe=Ce({asin_:hRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gRe(e){const n={x:Z(e,"x","asinh")};return xe.runKernel(Kp,n)}const mRe=Ce({asinh_:gRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(e){const n={x:Z(e,"x","atan")};return xe.runKernel(qp,n)}const bRe=Ce({atan_:vRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(e,t){let n=Z(e,"a","atan2"),s=Z(t,"b","atan2");[n,s]=Ss(n,s);const o={a:n,b:s};return xe.runKernel(Xp,o)}const wRe=Ce({atan2_:yRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Re(e){const n={x:Z(e,"x","atanh")};return xe.runKernel(Yp,n)}const CRe=Ce({atanh_:$Re});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zg(e,t,n,s,o="NHWC",r){const i=e[3],a=[...t,i],l=Pa(o);return co(e,a,n,r,s,null,null,l)}function ni(e,t,n,s,o,r,i="channelsLast"){const[a,l]=Rb(t);let u;if(i==="channelsLast")u=[a,l,e[3],e[3]];else if(i==="channelsFirst")u=[a,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${i}`);return co(e,u,n,s,o,r,!1,i)}function Ma(e,t,n,s,o,r,i="NDHWC"){const[a,l,u]=lx(t);let c,d;if(i==="NDHWC")d="channelsLast",c=[a,l,u,e[4],e[4]];else if(i==="NCDHW")d="channelsFirst",c=[a,l,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${i}`);return Ol(e,c,n,s,o,!1,d,r)}function co(e,t,n,s,o,r,i=!1,a="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d]=e;else if(a==="channelsFirst")[l,d,u,c]=e;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=t,[g,m]=Rb(n),[v,b]=Rb(s),$=fd(f,v),y=fd(h,b),{padInfo:w,outHeight:C,outWidth:x}=SRe(o,u,c,g,m,$,y,r,a),k=i?p*d:p;let I;return a==="channelsFirst"?I=[l,k,C,x]:a==="channelsLast"&&(I=[l,C,x,k]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:d,outHeight:C,outWidth:x,outChannels:k,padInfo:w,strideHeight:g,strideWidth:m,filterHeight:f,filterWidth:h,effectiveFilterHeight:$,effectiveFilterWidth:y,dilationHeight:v,dilationWidth:b,inShape:e,outShape:I,filterShape:t}}function Ol(e,t,n,s,o,r=!1,i="channelsLast",a){let[l,u,c,d,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,u,c,d,f]=e;else if(i==="channelsFirst")[l,f,u,c,d]=e;else throw new Error(`Unknown dataFormat ${i}`);const[h,p,g,,m]=t,[v,b,$]=lx(n),[y,w,C]=lx(s),x=fd(h,y),k=fd(p,w),I=fd(g,C),{padInfo:S,outDepth:T,outHeight:_,outWidth:N}=IRe(o,u,c,d,v,b,$,x,k,I,a),O=r?m*f:m;let M;return i==="channelsFirst"?M=[l,O,T,_,N]:i==="channelsLast"&&(M=[l,T,_,N,O]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:c,inWidth:d,inChannels:f,outDepth:T,outHeight:_,outWidth:N,outChannels:O,padInfo:S,strideDepth:v,strideHeight:b,strideWidth:$,filterDepth:h,filterHeight:p,filterWidth:g,effectiveFilterDepth:x,effectiveFilterHeight:k,effectiveFilterWidth:I,dilationDepth:y,dilationHeight:w,dilationWidth:C,inShape:e,outShape:M,filterShape:t}}function xRe(e,t,n,s,o){s==null&&(s=xS(e,t,n));const r=e[0],i=e[1],a=Mu((r-t+2*s)/n+1,o),l=Mu((i-t+2*s)/n+1,o);return[a,l]}function kRe(e,t,n,s,o,r){o==null&&(o=xS(e,t,s));const i=e[0],a=e[1],l=e[2],u=Mu((i-t+2*o)/s+1,r),c=Mu((a-t+2*o)/s+1,r),d=Mu((l-t+2*o)/s+1,r);return[u,c,d,n]}function xS(e,t,n,s=1){const o=fd(t,s);return Math.floor((e[0]*(n-1)-n+o)/2)}function Rb(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function lx(e){return typeof e=="number"?[e,e,e]:e}function fd(e,t){return t<=1?e:e+(e-1)*(t-1)}function SRe(e,t,n,s,o,r,i,a,l){let u,c,d;if(typeof e=="number"){u={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const h=xRe([t,n],r,s,e,a);c=h[0],d=h[1]}else if(e==="same"){c=Math.ceil(t/s),d=Math.ceil(n/o);const f=Math.max(0,(c-1)*s+r-t),h=Math.max(0,(d-1)*o+i-n),p=Math.floor(f/2),g=f-p,m=Math.floor(h/2),v=h-m;u={top:p,bottom:g,left:m,right:v,type:"SAME"}}else if(e==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-r+1)/s),d=Math.ceil((n-i+1)/o);else if(typeof e=="object"){const f=l==="channelsLast"?e[1][0]:e[2][0],h=l==="channelsLast"?e[1][1]:e[2][1],p=l==="channelsLast"?e[2][0]:e[3][0],g=l==="channelsLast"?e[2][1]:e[3][1];u={top:f,bottom:h,left:p,right:g,type:f===0&&h===0&&p===0&&g===0?"VALID":"EXPLICIT"},c=Mu((t-r+f+h)/s+1,a),d=Mu((n-i+p+g)/o+1,a)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outHeight:c,outWidth:d}}function IRe(e,t,n,s,o,r,i,a,l,u,c){let d,f,h,p;if(typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const m=kRe([t,n,s,1],a,1,o,e,c);f=m[0],h=m[1],p=m[2]}else if(e==="same"){f=Math.ceil(t/o),h=Math.ceil(n/r),p=Math.ceil(s/i);const g=(f-1)*o+a-t,m=(h-1)*r+l-n,v=(p-1)*i+u-s,b=Math.floor(g/2),$=g-b,y=Math.floor(m/2),w=m-y,C=Math.floor(v/2),x=v-C;d={top:y,bottom:w,left:C,right:x,front:b,back:$,type:"SAME"}}else if(e==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-a+1)/o),h=Math.ceil((n-l+1)/r),p=Math.ceil((s-u+1)/i);else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function Mu(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Ku(e){const[t,n,s]=Rb(e);return t===1&&n===1&&s===1}function Io(e,t){return Ku(e)||Ku(t)}function Pa(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Wo(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")K(Dd(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(s=>{s.forEach(o=>{K(Dd(o),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TRe(e,t){const s={x:Z(e,"x","reshape","string_or_numeric")},o={shape:t};return xe.runKernel(Sy,s,o)}const ke=Ce({reshape_:TRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(e,t,n,s,o){const r=Z(e,"x","avgPool","float32"),i=1;K(Io(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=r,l=!1;r.rank===3&&(l=!0,a=ke(r,[1,r.shape[0],r.shape[1],r.shape[2]])),K(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Wo("avgPool",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o};let d=xe.runKernel(W0,u,c);return d=gt(d,r.dtype),l?ke(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const kS=Ce({avgPool_:ERe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Re(e,t,n,s,o,r="NDHWC"){const i=Z(e,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=ke(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),K(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),K(r==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),Wo("avgPool3d",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o,dataFormat:r};let d=xe.runKernel(H0,u,c);return d=gt(d,a.dtype),l?ke(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const NRe=Ce({avgPool3d_:_Re});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe(e,t=0){K(e.length>=1,()=>"Pass at least one tensor to concat");const n=nz(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(r=>{if(r.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${r.dtype}. `)}),n.length===1)return Ou(n[0]);const s=n,o={axis:t};return xe.runKernel(K0,s,o)}const Co=Ce({concat_:ARe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DRe(e){const n={x:Z(e,"x","sigmoid","float32")};return xe.runKernel(Ng,n)}const df=Ce({sigmoid_:DRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(e,t,n){const s=Z(e,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const o={x:s},r={begin:t,size:n};return xe.runKernel(Ny,o,r)}const Gn=Ce({slice_:RRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ORe(e){const n={x:Z(e,"x","tanh","float32")};return xe.runKernel(Pg,n)}const SS=Ce({tanh_:ORe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MRe(e,t,n){const s=Z(e,"x","batchToSpaceND"),o=t.reduce((a,l)=>a*l);K(s.rank>=1+t.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`),K(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),K(s.shape[0]%o===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);const r={x:s},i={blockShape:t,crops:n};return xe.runKernel(j0,r,i)}const IS=Ce({batchToSpaceND_:MRe});function PRe(e){let t;return e.rank===0||e.rank===1?t=ke(e,[1,1,1,e.size]):e.rank===2?t=ke(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=ke(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FRe(e,t,n,s,o,r){r==null&&(r=.001);const i=Z(e,"x","batchNorm"),a=Z(t,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let u;o!=null&&(u=Z(o,"scale","batchNorm"));let c;s!=null&&(c=Z(s,"offset","batchNorm")),K(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),K(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),K(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:PRe(i),scale:u,offset:c,mean:a,variance:l},h={varianceEpsilon:r},p=xe.runKernel(ny,f,h);return ke(p,i.shape)}const Uy=Ce({batchNorm_:FRe});function LRe(e,t,n,s,o,r){const i=Z(e,"x","batchNorm"),a=Z(t,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let u;o!=null&&(u=Z(o,"scale","batchNorm"));let c;return s!=null&&(c=Z(s,"offset","batchNorm")),K(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),K(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),K(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&K(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&K(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Uy(i,a,l,c,u,r)}const BRe=Ce({batchNorm2d_:LRe});function zRe(e,t,n,s,o,r){const i=Z(e,"x","batchNorm"),a=Z(t,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let u;o!=null&&(u=Z(o,"scale","batchNorm"));let c;return s!=null&&(c=Z(s,"offset","batchNorm")),K(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),K(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),K(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&K(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&K(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Uy(i,a,l,c,u,r)}const VRe=Ce({batchNorm3d_:zRe});function WRe(e,t,n,s,o,r){const i=Z(e,"x","batchNorm"),a=Z(t,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let u;o!=null&&(u=Z(o,"scale","batchNorm"));let c;return s!=null&&(c=Z(s,"offset","batchNorm")),K(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),K(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),K(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&K(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&K(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Uy(i,a,l,c,u,r)}const HRe=Ce({batchNorm4d_:WRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function URe(e,t,n){const s=Z(e,"x","bincount"),o=Z(t,"weights","bincount");K(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),K(n>=0,()=>`size must be non-negative, but got ${n}.`),K(o.size===s.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${o.shape}.`);const r={x:s,weights:o},i={size:n};return xe.runKernel(Ek,r,i)}const jRe=Ce({bincount_:URe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GRe(e,t){let n=Z(e,"broadcastTo","x");const s=n.shape;if(t.some(u=>!(u>0)||u%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const u=n.shape.slice();for(;u.length<t.length;)u.unshift(1);n=ke(n,u)}const o=n.shape,r=Array.from(t);for(let u=t.length-1;u>=0;u--)if(o[u]===t[u])r[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${t}].`);if(r.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return Ou(n);const a={x:n},l={reps:r};return xe.runKernel(Fg,a,l)}const tb=Ce({broadcastTo_:GRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KRe(e){const n={x:Z(e,"x","ceil","float32")};return xe.runKernel(Jp,n)}const qRe=Ce({ceil_:KRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YRe(e,t,n){const s=Z(e,"x","clipByValue");K(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`);const o={x:s},r={clipValueMin:t,clipValueMax:n};return xe.runKernel(Qp,o,r)}const Sr=Ce({clipByValue_:YRe});function XRe(e){return Co(e,0)}const ZRe=Ce({concat1d_:XRe});function JRe(e,t){return Co(e,t)}const QRe=Ce({concat2d_:JRe});function eOe(e,t){return Co(e,t)}const tOe=Ce({concat3d_:eOe});function nOe(e,t){return Co(e,t)}const sOe=Ce({concat4d_:nOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(e,t,n,s,o="NHWC",r=[1,1],i){const a=Z(e,"x","conv2d","float32"),l=Z(t,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=ke(a,[1,a.shape[0],a.shape[1],a.shape[2]])),K(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),K(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Wo("conv2d",s,i);const d=o==="NHWC"?u.shape[3]:u.shape[1];K(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),K(Io(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`);const f={x:u,filter:l},h={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},p=xe.runKernel(q0,f,h);return c?ke(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const qu=Ce({conv2d_:oOe});function rOe(e,t,n,s,o="NWC",r=1,i){const a=Z(e,"x","conv1d"),l=Z(t,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=ke(a,[1,a.shape[0],a.shape[1]])),K(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),K(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Wo("conv1d",s,i),K(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),K(Io(n,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${r}'`),K(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=ke(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=ke(u,[u.shape[0],1,u.shape[1],u.shape[2]]),m=qu(f,d,[1,n],s,"NHWC",[1,r],i);return c?ke(m,[m.shape[2],m.shape[3]]):ke(m,[m.shape[0],m.shape[2],m.shape[3]])}const Sz=Ce({conv1d_:rOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(e,t,n,s,o,r="NHWC",i){K(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,l=t,u=!1;t.rank===3&&(u=!0,l=ke(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),K(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),K(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),K(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=r==="NHWC"?a[3]:a[1],d=r==="NHWC"?l.shape[3]:l.shape[1];K(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),K(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Wo("conv2dDerInput",o,i);const f={dy:l,filter:n},h={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,inputShape:a},p=xe.runKernel(Y0,f,h);return u?ke(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const TS=Ce({conv2DBackpropInput_:iOe});function aOe(e,t,n,s,o,r){const i=Z(e,"x","conv2dTranspose"),a=Z(t,"filter","conv2dTranspose");return TS(n,i,a,s,o,"NHWC",r)}const Iz=Ce({conv2dTranspose_:aOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lOe(e,t,n,s,o="NDHWC",r=[1,1,1]){const i=Z(e,"x","conv3d"),a=Z(t,"filter","conv3d");let l=i,u=!1;i.rank===4&&(u=!0,l=ke(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),K(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),K(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),K(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),K(Io(n,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),K(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`);const c={x:l,filter:a},d={strides:n,pad:s,dataFormat:o,dilations:r},f=xe.runKernel(X0,c,d);return u?ke(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const uOe=Ce({conv3d_:lOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(e,t,n,s,o){K(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let r=e,i=t,a=!1;t.rank===4&&(a=!0,i=ke(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),r=[1,e[0],e[1],e[2],e[3]]);const l=r[4],u=i.shape[4];K(r.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),K(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),K(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),K(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),K(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:o,strides:s,inputShape:r},f=xe.runKernel(Dk,c,d);return a?ke(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Tz=Ce({conv3DBackpropInput_:cOe});function dOe(e,t,n,s,o){const r=Z(e,"x","conv3dTranspose"),i=Z(t,"filter","conv3dTranspose");return Tz(n,r,i,s,o)}const fOe=Ce({conv3dTranspose_:dOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hOe(e){const n={x:Z(e,"x","cos","float32")};return xe.runKernel(eg,n)}const ES=Ce({cos_:hOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(e){const n={x:Z(e,"x","cosh","float32")};return xe.runKernel(tg,n)}const Ez=Ce({cosh_:pOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(e,t=0,n=!1,s=!1){const r={x:Z(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:s};return xe.runKernel(Z0,r,i)}const _z=Ce({cumsum_:gOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mOe(e,t,n="NHWC"){const s=Z(e,"x","depthToSpace","float32"),o=n==="NHWC"?s.shape[1]:s.shape[2],r=n==="NHWC"?s.shape[2]:s.shape[3],i=n==="NHWC"?s.shape[3]:s.shape[1];K(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),K(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${s.shape}`),K(r*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${t} for depthToSpace with input shape
        ${s.shape}`),K(i%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${s.shape}`);const a={x:s},l={blockSize:t,dataFormat:n};return xe.runKernel(Ok,a,l)}const vOe=Ce({depthToSpace_:mOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bOe(e,t,n,s,o="NHWC",r=[1,1],i){const a=Z(e,"x","depthwiseConv2d","float32"),l=Z(t,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=ke(a,[1,a.shape[0],a.shape[1],a.shape[2]])),K(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),K(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),K(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),Wo("depthwiseConv2d",s,i);const d={x:u,filter:l},f={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},h=xe.runKernel(J0,d,f);return c?ke(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const _S=Ce({depthwiseConv2d_:bOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(e,t,n,s,o=[1,1],r="NHWC"){const i=Z(e,"x","dilation2d"),a=Z(t,"filter","dilation2d");K(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),K(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),K(r==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=i,u=!1;i.rank===3&&(l=ke(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0);const c={x:l,filter:a},d={strides:n,pad:s,dilations:o},f=xe.runKernel(Q0,c,d);return u?ke(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const wOe=Ce({dilation2d_:yOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(e,t){let n=Z(e,"a","equal","string_or_numeric"),s=Z(t,"b","equal","string_or_numeric");[n,s]=Ss(n,s),nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(ey,o)}const Qi=Ce({equal_:$Oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function COe(e,t,n){const s=Z(t,"a","where"),o=Z(n,"b","where"),r=Z(e,"condition","where","bool"),i=nn(nn(r.shape,s.shape),o.shape),a=tb(r,i),l=tb(s,i),u=tb(o,i),c={condition:a,t:l,e:u};return xe.runKernel(_y,c)}const sr=Ce({where_:COe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(e){const n={x:Z(e,"x","zerosLike")};return xe.runKernel(Ly,n)}const kn=Ce({zerosLike_:xOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kOe(e,t){let n=Z(e,"a","div"),s=Z(t,"b","div");[n,s]=Ss(n,s);const o=Nt(n,s),r=kn(o),i=Qi(s,r);return sr(i,r,o)}const SOe=Ce({divNoNan_:kOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOe(e,t){const n=Z(e,"t1","dot"),s=Z(t,"t2","dot");K((n.rank===1||n.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const o=n.rank===1?n.size:n.shape[1],r=s.rank===1?s.size:s.shape[0];if(K(o===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${r}.`),n.rank===1&&s.rank===1){const i=ke(n,[1,-1]),a=ke(s,[-1,1]),l=Dn(i,a);return ke(l,[])}else if(n.rank===1&&s.rank===2){const i=ke(n,[1,-1]),a=ke(s,[s.shape[0],s.shape[1]]),l=Dn(i,a);return ke(l,[l.size])}else if(n.rank===2&&s.rank===1){const i=ke(s,[-1,1]),a=Dn(n,i);return ke(a,[a.size])}else{const i=ke(s,[s.shape[0],s.shape[1]]);return Dn(n,i)}}const TOe=Ce({dot_:IOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(e){const n={x:Z(e,"x","elu","float32")};return xe.runKernel(sg,n)}const jy=Ce({elu_:EOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Oe(e){let t=Z(e,"x","erf");K(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=gt(t,"float32"));const n={x:t};return xe.runKernel(og,n)}const NOe=Ce({erf_:_Oe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(e){const n={x:Z(e,"x","exp")};return xe.runKernel(rg,n)}const Xr=Ce({exp_:AOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DOe(e,t=0){const n=Z(e,"x","expandDims","string_or_numeric");K(t<=n.rank,()=>"Axis must be <= rank of the tensor");const s={input:n},o={dim:t};return xe.runKernel(ty,s,o)}const Pr=Ce({expandDims_:DOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(e){const n={x:Z(e,"x","expm1")};return xe.runKernel(ig,n)}const OOe=Ce({expm1_:ROe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOe(e,t){const n=Z(e,"x","tile","string_or_numeric");K(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const s={x:n},o={reps:t};return xe.runKernel(Fg,s,o)}const mi=Ce({tile_:MOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function POe(e,t,n,s="float32"){t==null&&(t=e);const o=gn([e,t],s),r=e<=t?e:t;for(let a=0;a<r;++a)o.set(1,a,a);const i=ke(o.toTensor(),[e,t]);if(n==null)return i;if(n.length===1)return mi(Pr(i,0),[n[0],1,1]);if(n.length===2)return mi(Pr(Pr(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return mi(Pr(Pr(Pr(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Nz=Ce({eye_:POe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gy(e,t,n){const s={shape:e,value:t,dtype:n};return xe.runKernel(Bk,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(e){const n={x:Z(e,"x","floor","float32")};return xe.runKernel(ag,n)}const Ky=Ce({floor_:FOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(e,t,n=0,s=0){const o=Z(e,"x","gather"),r=Z(t,"indices","gather","int32"),i={x:o,indices:r},a={axis:n,batchDims:s};return xe.runKernel(sy,i,a)}const NS=Ce({gather_:LOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(e,t){let n=Z(e,"a","greater","string_or_numeric"),s=Z(t,"b","greater","string_or_numeric");[n,s]=Ss(n,s),nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(oy,o)}const si=Ce({greater_:BOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(e,t){let n=Z(e,"a","greaterEqual","string_or_numeric"),s=Z(t,"b","greaterEqual","string_or_numeric");[n,s]=Ss(n,s),nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(ug,o)}const ff=Ce({greaterEqual_:zOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(e){const n={input:Z(e,"input","imag")};return xe.runKernel(Wk,n)}const Az=Ce({imag_:VOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(e){const n={x:Z(e,"x","isFinite")};return xe.runKernel(dg,n)}const HOe=Ce({isFinite_:WOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(e){const n={x:Z(e,"x","isInf")};return xe.runKernel(fg,n)}const jOe=Ce({isInf_:UOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GOe(e){const n={x:Z(e,"x","isNaN")};return xe.runKernel(hg,n)}const KOe=Ce({isNaN_:GOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qOe(e,t=.2){const s={x:Z(e,"x","leakyRelu")},o={alpha:t};return xe.runKernel(ry,s,o)}const AS=Ce({leakyRelu_:qOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YOe(e,t){let n=Z(e,"a","less","string_or_numeric"),s=Z(t,"b","less","string_or_numeric");[n,s]=Ss(n,s),nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(iy,o)}const Dz=Ce({less_:YOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(e,t){let n=Z(e,"a","lessEqual","string_or_numeric"),s=Z(t,"b","lessEqual","string_or_numeric");[n,s]=Ss(n,s),nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(ay,o)}const hf=Ce({lessEqual_:XOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(e,t=5,n=1,s=1,o=.5){const r=Z(e,"x","localResponseNormalization");K(r.rank===4||r.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${r.rank}.`),K(Dd(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=r,a=!1;r.rank===3&&(a=!0,i=ke(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={x:i},u={depthRadius:t,bias:n,alpha:s,beta:o},c=xe.runKernel(dy,l,u);return a?ke(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const JOe=Ce({localResponseNormalization_:ZOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(e){const n={x:Z(e,"x","log","float32")};return xe.runKernel(pg,n)}const Zr=Ce({log_:QOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eMe(e){const n={x:Z(e,"x","log1p")};return xe.runKernel(gg,n)}const DS=Ce({log1p_:eMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMe(e,t){K(UC(e),()=>"The f passed in variableGrads(f) must be a function"),K(t==null||Array.isArray(t)&&t.every(u=>u instanceof Db),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const u in xe.registeredVariables)t.push(xe.registeredVariables[u])}const s=n?t.filter(u=>!u.trainable):null,o=t.length;t=t.filter(u=>u.trainable),K(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const r=!0,{value:i,grads:a}=xe.gradients(e,t,null,r);K(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),K(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return t.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),s!=null&&s.forEach(u=>l[u.name]=null),{value:i,grads:l}}function Yu(e){return xe.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(e){const n={x:Z(e,"x","neg")};return xe.runKernel(by,n)}const ys=Ce({neg_:nMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(e){const n={x:Z(e,"x","softplus")};return xe.runKernel(Ag,n)}const Vg=Ce({softplus_:sMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oMe(e){const t=Z(e,"x","logSigmoid");return Yu(s=>({value:ys(Vg(ys(s))),gradFunc:i=>me(i,df(ys(s)))}))(t)}const rMe=Ce({logSigmoid_:oMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iMe(e,t=null,n=!1){const o={x:Z(e,"x","max")},r={reductionIndices:t,keepDims:n};return xe.runKernel(fy,o,r)}const Gi=Ce({max_:iMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMe(e,t){let n=Z(e,"a","sub"),s=Z(t,"b","sub");[n,s]=Ss(n,s);const o={a:n,b:s};return xe.runKernel(Og,o)}const Et=Ce({sub_:aMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMe(e,t=null,n=!1){let s=Z(e,"x","sum");s.dtype==="bool"&&(s=gt(s,"int32"));const o={x:s},r={axis:t,keepDims:n};return xe.runKernel(Ay,o,r)}const Tt=Ce({sum_:lMe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMe(e,t=-1){const n=Z(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Yu((o,r)=>{const a=Gi(o,t,!0),l=Et(o,a),u=Et(gt(l,"float32"),Zr(Tt(Xr(l),t,!0)));return r([u]),{value:u,gradFunc:(d,f)=>{const[h]=f,p=!0,g=Xr(h);return Et(d,me(Tt(d,t,p),g))}}})(n)}const Rz=Ce({logSoftmax_:uMe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RS(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Oz(e,t,n){const s=e.length+t.length,o=[];let r=0,i=0;for(let a=0;a<s;a++)n.indexOf(a)===-1?o.push(e[r++]):o.push(t[i++]);return o}function Qs(e,t){const n=[],s=e.length;for(let r=0;r<s;r++)t.indexOf(r)===-1&&n.push(e[r]);const o=t.map(r=>e[r]);return[n,o]}function Is(e,t){const n=t.map(s=>1);return Oz(e,n,t)}function fo(e,t,n){K(RS(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function Ts(e,t){if(RS(e,t))return null;const n=[];for(let s=0;s<t;++s)e.indexOf(s)===-1&&n.push(s);return e.forEach(s=>n.push(s)),n}function pf(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function Rs(e,t){const n=[];for(let s=t-e;s<t;++s)n.push(s);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cMe(e,t=null,n=!1){const s=Z(e,"x","logSumExp"),o=un(t,s.shape),r=Gi(s,o,!0),i=Et(s,r),a=Xr(i),l=Tt(a,o),u=Zr(l),c=st(ke(r,u.shape),u);if(n){const d=Is(c.shape,o);return ke(c,d)}return c}const Mz=Ce({logSumExp_:cMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(e,t){const n=Z(e,"a","logicalAnd","bool"),s=Z(t,"b","logicalAnd","bool");nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(ly,o)}const Na=Ce({logicalAnd_:dMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(e){const n={x:Z(e,"x","logicalNot","bool")};return xe.runKernel(uy,n)}const OS=Ce({logicalNot_:fMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hMe(e,t){const n=Z(e,"a","logicalOr","bool"),s=Z(t,"b","logicalOr","bool");nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(cy,o)}const Pz=Ce({logicalOr_:hMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(e,t){const n=Z(e,"a","logicalXor","bool"),s=Z(t,"b","logicalXor","bool");return nn(n.shape,s.shape),Na(Pz(e,t),OS(Na(e,t)))}const gMe=Ce({logicalXor_:pMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMe(e,t,n,s,o){const r=Z(e,"x","maxPool"),i=1;let a=r,l=!1;r.rank===3&&(l=!0,a=ke(r,[1,r.shape[0],r.shape[1],r.shape[2]])),K(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),K(Io(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Wo("maxPool",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o},d=xe.runKernel(hy,u,c);return l?ke(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const MS=Ce({maxPool_:mMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(e,t=[1,1,1],n,s,o,r="NDHWC"){const i=Z(e,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=ke(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),K(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),K(r==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),Wo("maxPool3d",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o,dataFormat:r},d=xe.runKernel(py,u,c);return l?ke(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const bMe=Ce({maxPool3d_:vMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(e,t){let n=Z(e,"a","maximum"),s=Z(t,"b","maximum");[n,s]=Ss(n,s),n.dtype==="bool"&&(n=gt(n,"int32"),s=gt(s,"int32")),nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(mg,o)}const Ml=Ce({maximum_:yMe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(e,t=null,n=!1){const o={x:Z(e,"x","mean")},r={axis:t,keepDims:n};return xe.runKernel(gy,o,r)}const $s=Ce({mean_:wMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qs(e,t="float32"){if(t==="complex64"){const s=qs(e,"float32"),o=qs(e,"float32");return ap(s,o)}const n=So(Ue(e),t);return xe.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pl(e,t="float32"){if(t==="complex64"){const s=Pl(e,"float32"),o=qs(e,"float32");return ap(s,o)}const n=kB(Ue(e),t);return xe.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(e,t=null,n=!1){const o={x:Z(e,"x","min")},r={axis:t,keepDims:n};return xe.runKernel(my,o,r)}const ux=Ce({min_:$Me});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(e,t){let n=Z(e,"a","minimum"),s=Z(t,"b","minimum");[n,s]=Ss(n,s),n.dtype==="bool"&&(n=gt(n,"int32"),s=gt(s,"int32")),nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(vg,o)}const qy=Ce({minimum_:CMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(e,t,n){K(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const s=Z(e,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");K(t.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<s.rank;a++)K(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),K(t[a][0]>=0&&t[a][0]<=s.shape[a]-o&&t[a][1]>=0&&t[a][1]<=s.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${s.shape[a]-o} or less than 0 for input of shape ${s.shape}`);const r={paddings:t,mode:n},i={x:s};return xe.runKernel(vy,i,r)}const kMe=Ce({mirrorPad_:xMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(e,t){let n=Z(e,"a","mod"),s=Z(t,"b","mod");[n,s]=Ss(n,s);const o={a:n,b:s};return xe.runKernel(bg,o)}const IMe=Ce({mod_:SMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(e){const t=Z(e,"x","square"),n={};return xe.runKernel("Square",{x:t},n)}const es=Ce({square_:TMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EMe(e,t=null,n=!1){e=Z(e,"x","moments");const s=un(t,e.shape),o=$s(e,s,n);let r=o.shape;n||(r=Is(o.shape,s));const i=es(Et(gt(e,"float32"),ke(o,r))),a=$s(i,s,n);return{mean:o,variance:a}}const PS=Ce({moments_:EMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Me(e,t){let n=Z(e,"a","notEqual","string_or_numeric"),s=Z(t,"b","notEqual","string_or_numeric");[n,s]=Ss(n,s),nn(n.shape,s.shape);const o={a:n,b:s};return xe.runKernel(yy,o)}const up=Ce({notEqual_:_Me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe(e){const n={x:Z(e,"x","onesLike")};return xe.runKernel(wy,n)}const Jr=Ce({onesLike_:NMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(e,t,n=0){const s=Z(e,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},r={x:s};return xe.runKernel(xy,r,o)}const FS=Ce({pad_:AMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DMe(e,t,n){const s=Z(e,"x","spaceToBatchND");K(s.rank>=1+t.length,()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`),K(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),K(s.shape.reduce((i,a,l)=>l>0&&l<=t.length?i&&(a+n[l-1][0]+n[l-1][1])%t[l-1]===0:i,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const o={x:s},r={blockShape:t,paddings:n};return xe.runKernel(Dy,o,r)}const LS=Ce({spaceToBatchND_:DMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMe(e,t,n,s,o,r,i){o==null&&(o=[1,1]),r==null&&(r=1),s===0&&(s="valid");const a=Z(e,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=ke(a,[1,a.shape[0],a.shape[1],a.shape[2]])),K(Io(r,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`);const c=ni(l.shape,t,r,o,s),d=[c.dilationHeight,c.dilationWidth];let f;s==="same"?f=MMe([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,g]=OMe([c.inHeight,c.inWidth],d,f),m=h?s:"valid",v=h?l:LS(l,d,p),$=(n==="avg"?()=>kS(v,t,r,m,i):()=>MS(v,t,r,m,i))(),y=h?$:IS($,d,g);return u?ke(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function OMe(e,t,n){const s=n.map(c=>c[0]),o=n.map(c=>c[1]),r=e.concat(s,o),i=t.map((c,d)=>(c-r[d]%c)%c),a=o.map((c,d)=>c+i[d]),l=t.map((c,d)=>[s[d],a[d]]),u=t.map((c,d)=>[0,i[d]]);return[l,u]}function MMe(e,t){const s=e.map((i,a)=>i+(i-1)*(t[a]-1)).map(i=>i-1),o=s.map(i=>Math.floor(i/2)),r=s.map((i,a)=>i-o[a]);return s.map((i,a)=>[o[a],r[a]])}const PMe=Ce({pool_:RMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMe(e,t){let n=Z(e,"base","pow"),s=Z(t,"exp","pow");[n,s]=Ss(n,s);const o={a:n,b:s};return xe.runKernel(wg,o)}const Fd=Ce({pow_:FMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LMe(e,t){const n=Z(e,"x","prelu"),s=Z(t,"alpha","prelu"),o={x:n,alpha:s};return xe.runKernel(ky,o)}const BS=Ce({prelu_:LMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(e,t=null,n=!1){let s=Z(e,"x","prod");s.dtype==="bool"&&(s=gt(s,"int32"));const o={x:s},r={axis:t,keepDims:n};return xe.runKernel(Yk,o,r)}const zMe=Ce({prod_:BMe});var Fz={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(On,e,!1)})(Fz);var Lz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(On,e,!1)})(Lz);var Bz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(On,e,!1)})(Bz);var zz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(On,e,!1)})(zz);var Vz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,g,m,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,g=-32;g<b;++g)d&&(h^=d.charCodeAt((g+32)%d.length)),g===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(m=m+1640531527|0,f=v[g&127]^=h+m,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,g=4*128;g>0;--g)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=m,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(On,e,!1)})(Vz);var Wz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(On,e,!1)})(Wz);var Hz={exports:{}};(function(e){(function(t,n){var s=this,o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,w,C){var x=[];w=w==!0?{entropy:!0}:w||{};var k=v(m(w.entropy?[y,$(t)]:y==null?b():y,3),x),I=new p(x),S=function(){for(var T=I.g(r),_=l,N=0;T<u;)T=(T+N)*o,_*=o,N=I.g(1);for(;T>=c;)T/=2,_/=2,N>>>=1;return(T+N)/_};return S.int32=function(){return I.g(4)|0},S.quick=function(){return I.g(4)/4294967296},S.double=S,v($(I.S),t),(w.pass||C||function(T,_,N,O){return O&&(O.S&&g(O,I),T.state=function(){return g(I,{})}),N?(n[a]=T,_):T})(S,k,"global"in w?w.global:this==n,w.state)}n["seed"+a]=h;function p(y){var w,C=y.length,x=this,k=0,I=x.i=x.j=0,S=x.S=[];for(C||(y=[C++]);k<o;)S[k]=k++;for(k=0;k<o;k++)S[k]=S[I=d&I+y[k%C]+(w=S[k])],S[I]=w;(x.g=function(T){for(var _,N=0,O=x.i,M=x.j,D=x.S;T--;)_=D[O=d&O+1],N=N*o+D[d&(D[O]=D[M=d&M+_])+(D[M]=_)];return x.i=O,x.j=M,N})(o)}function g(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function m(y,w){var C=[],x=typeof y,k;if(w&&x=="object")for(k in y)try{C.push(m(y[k],w-1))}catch{}return C.length?C:x=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",x,k=0;k<C.length;)w[d&k]=d&(x^=w[d&k]*19)+C.charCodeAt(k++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(Hz);var VMe=Fz.exports,WMe=Lz.exports,HMe=Bz.exports,UMe=zz.exports,jMe=Vz.exports,GMe=Wz.exports,gc=Hz.exports;gc.alea=VMe;gc.xor128=WMe;gc.xorwow=HMe;gc.xorshift7=UMe;gc.xor4096=jMe;gc.tychei=GMe;var Uz=gc;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jz{constructor(t,n,s,o,r){this.mean=t,this.stdDev=n,this.dtype=s,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=r||Math.random();this.random=Uz.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let t,n,s=!1;for(;!s;){let o,r,i;do o=2*this.random()-1,r=2*this.random()-1,i=o*o+r*r;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(t))&&(s=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class KMe{constructor(t=0,n=1,s,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=s,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=Uz.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(e,t=0,n=1,s,o){if(s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const r=new jz(t,n,s,!1,o),i=gn(e,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const YMe=Ce({randomNormal_:qMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XMe(e,t=0,n=1,s="float32",o){const r=gn(e,s),i=new KMe(t,n,null,o);for(let a=0;a<r.values.length;a++)r.values[a]=i.nextValue();return r.toTensor()}const Yy=Ce({randomUniform_:XMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ob(e,t,n=1,s="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:s};return xe.runKernel(Xk,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(e){const n={input:Z(e,"input","real")};return xe.runKernel(Zk,n)}const cx=Ce({real_:ZMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMe(e){const n={x:Z(e,"x","reciprocal")};return xe.runKernel($g,n)}const QMe=Ce({reciprocal_:JMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(e){const n={x:Z(e,"x","relu")};return xe.runKernel(Cg,n)}const Fa=Ce({relu_:e3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(e){const n={x:Z(e,"x","relu6")};return xe.runKernel(xg,n)}const Gz=Ce({relu6_:t3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(e,t){const s={x:Z(e,"x","reverse")},o={dims:t};return xe.runKernel(Ey,s,o)}const Xu=Ce({reverse_:n3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(e){const n={x:Z(e,"x","round")};return xe.runKernel(kg,n)}const Kz=Ce({round_:s3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(e){const n={x:Z(e,"x","rsqrt","float32")};return xe.runKernel(Sg,n)}const qz=Ce({rsqrt_:o3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jt(e,t){if((Zi(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Zi(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Vy(e,[],[],t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(e){const n={x:Z(e,"x","selu")};return xe.runKernel(Ig,n)}const Yz=Ce({selu_:r3e});function i3e(e,t,n,s,o,r=[1,1],i="NHWC"){const a=Z(e,"x","separableConv2d"),l=Z(t,"depthwiseFilter","separableConv2d"),u=Z(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=ke(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");K(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),K(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),K(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),K(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),K(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],h=l.shape[3];K(u.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${u.shape[2]}.`);const p=_S(c,l,s,o,i,r),m=qu(p,u,1,"valid",i);return d?ke(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Xz=Ce({separableConv2d_:i3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3e(e){const n={x:Z(e,"x","sign")};return xe.runKernel(_g,n)}const l3e=Ce({sign_:a3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3e(e){const n={x:Z(e,"x","sin","float32")};return xe.runKernel(Tg,n)}const Zz=Ce({sin_:u3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(e){const n={x:Z(e,"x","sinh")};return xe.runKernel(Eg,n)}const Jz=Ce({sinh_:c3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e(e,t,n){const s=Z(e,"x","slice1d");return K(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),Gn(s,[t],[n])}const zS=Ce({slice1d_:d3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(e,t,n){const s=Z(e,"x","slice2d");return K(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),Gn(s,t,n)}const Qz=Ce({slice2d_:f3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3e(e,t,n){const s=Z(e,"x","slice3d");return K(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),Gn(s,t,n)}const VS=Ce({slice3d_:h3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(e,t,n){const s=Z(e,"x","slice4d");return K(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),Gn(s,t,n)}const Mb=Ce({slice4d_:p3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(e,t=-1){const n=Z(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const s={logits:n},o={dim:t};return xe.runKernel(Oy,s,o)}const WS=Ce({softmax_:g3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m3e(e){K(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return xe.runKernel(Lk,t)}const eV=Ce({fft_:m3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3e(e){K(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return xe.runKernel(Vk,t)}const dx=Ce({ifft_:v3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(e){const t=e.shape[e.shape.length-1],n=e.size/t;let s;if(t<=2){const o=ke(e,[n,t]);s=dx(o)}else{const o=[n,2*(t-1)],r=ke(cx(e),[n,t]),i=ke(Az(e),[n,t]),a=Xu(Gn(r,[0,1],[n,t-2]),1),l=me(Xu(Gn(i,[0,1],[n,t-2]),1),jt(-1)),u=Co([r,a],1),c=Co([i,l],1),d=ke(ap(u,c),[o[0],o[1]]);s=dx(d)}if(s=cx(s),e.rank===3&&e.shape[0]!==0){const o=s,r=e.shape[0];s=ke(s,[r,s.shape[0]/r,s.shape[1]]),o.dispose()}return s}const y3e=Ce({irfft_:b3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(e,t,n=0){const o={x:Z(e,"x","split")},r={numOrSizeSplits:t,axis:n};return xe.runKernel(Ry,o,r)}const $r=Ce({split_:w3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3e(e,t){K(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const s=e.size/n;let o;if(t!=null&&t<n){const p=e.shape.map(m=>0),g=e.shape.map(m=>m);g[e.shape.length-1]=t,o=Gn(e,p,g),n=t}else if(t!=null&&t>n){const p=e.shape.map(g=>g);p[e.shape.length-1]=t-n,o=Co([e,qs(p)],e.shape.length-1),n=t}else o=e;const r=kn(o),i=ke(ap(o,r),[s,n]),a=eV(i),l=Math.floor(n/2)+1,u=cx(a),c=Az(a),d=$r(u,[l,n-l],u.shape.length-1),f=$r(c,[l,n-l],c.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,ke(ap(d[0],f[0]),h)}const tV=Ce({rfft_:$3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3e(e){const n={x:Z(e,"x","sqrt","float32")};return xe.runKernel(Dg,n)}const Do=Ce({sqrt_:C3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(e,t){let n=Z(e,"a","squaredDifference"),s=Z(t,"b","squaredDifference");[n,s]=Ss(n,s),nn(n.shape,s.shape);const o={a:n,b:s},r={};return xe.runKernel(Rg,o,r)}const nV=Ce({squaredDifference_:x3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3e(e,t){const n=Z(e,"x","squeeze");return ke(n,Dl(n.shape,t).newShape)}const Wg=Ce({squeeze_:k3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(e,t=0){const n=nz(e,"tensors","stack","string_or_numeric");K(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&K(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const s=n,o={axis:t};return xe.runKernel(Cy,s,o)}const Zu=Ce({stack_:S3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(e,t=0){const s={x:Z(e,"x","step")},o={alpha:t};return xe.runKernel(Lg,s,o)}const Hg=Ce({step_:I3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(e,t,n,s,o=0,r=0,i=0,a=0,l=0){const c={x:Z(e,"x","stridedSlice","string_or_numeric")},d={begin:t,end:n,strides:s,beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return xe.runKernel(rS,c,d)}const E3e=Ce({stridedSlice_:T3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3e(e){const n={x:Z(e,"x","tan","float32")};return xe.runKernel(Mg,n)}const N3e=Ce({tan_:_3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jo(e,t){wB(e);const n=zy(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Vy(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nb(e,t,n){if(wB(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=zy(e,n);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Vy(e,t,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(e,t=1,n=!0){const s=Z(e,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=s.shape[s.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const r={x:s},i={k:t,sorted:n},[a,l]=xe.runKernel(uS,r,i);return{values:a,indices:l}}const D3e=Ce({topk_:A3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3e(e,t=0,n=1,s,o){if(s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new jz(t,n,s,!0,o),i=gn(e,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const sV=Ce({truncatedNormal_:R3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3e(e,t=0){const n=Z(e,"x","unique","string_or_numeric");K(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},o={axis:t},[r,i]=xe.runKernel(dS,s,o);return{values:r,indices:i}}const M3e=Ce({unique_:O3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(e,t,n){const s=Z(e,"x","unsortedSegmentSum"),o=Z(t,"segmentIds","unsortedSegmentSum","int32");K(Dd(n),()=>"numSegments must be of dtype int");const r={x:s,segmentIds:o},i={numSegments:n};return xe.runKernel(Fy,r,i)}const oV=Ce({unsortedSegmentSum_:P3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3e(e,t=0){const n=Z(e,"x","unstack","string_or_numeric");K(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const s={value:n},o={axis:t};return xe.runKernel(Py,s,o)}const Ld=Ce({unstack_:F3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(e,t=!0,n,s){return xe.makeVariable(e,t,n,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rV(e,t){const n=[];for(let r=0;r<t.length;r++)t[r]&&n.push(r);const s=gn(e,"int32"),o=gn([n.length,e.length],"int32");for(let r=0;r<n.length;r++){const i=s.indexToLoc(n[r]),a=r*e.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3e(e,t="euclidean",n=null,s=!1){e=Z(e,"x","norm");const o=iV(e,t,n);let r=o.shape;if(s){const i=un(n,e.shape);r=Is(o.shape,i)}return ke(o,r)}function iV(e,t,n=null){if(e.rank===0)return Gs(e);if(e.rank!==1&&n===null)return iV(ke(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Tt(Gs(e),n);if(t===1/0)return Gi(Gs(e),n);if(t===-1/0)return ux(Gs(e),n);if(t==="euclidean"||t===2)return Do(Tt(Fd(Gs(e),jt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return Gi(Tt(Gs(e),n[0]),n[1]-1);if(t===1/0)return Gi(Tt(Gs(e),n[1]),n[0]);if(t===-1/0)return ux(Tt(Gs(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Do(Tt(es(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const HS=Ce({norm_:B3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3e(e,t){if(t==null)return e.shape.slice();if(Mn(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let s=0;s<e.shape.length;s++)t[s]==null&&e.shape[s]!=null?n.push(e.shape[s]):n.push(t[s]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(e,t,n,s){const o=Z(e,"x","dropout");if(K(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),K(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof _s?o.clone():o;const r=z3e(o,n),i=1-t,a=Nt(Ky(st(Yy(r,0,1,"float32",s),i)),i);return me(o,a)}const W3e=Ce({dropout_:V3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3e(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function aV(e,t,n){const s=1-e%2,o=new Float32Array(e);for(let r=0;r<e;++r){const i=2*Math.PI*r/(e+s-1);o[r]=t-n*Math.cos(i)}return Jo(o,"float32")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3e(e,t,n,s,o,r="NHWC",i){let a=e;e.rank===3&&(a=ke(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=ke(t,[1,t.shape[0],t.shape[1],t.shape[2]])),K(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),K(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),K(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=r==="NHWC"?a.shape[3]:a.shape[1],c=r==="NHWC"?l.shape[3]:l.shape[1];K(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),K(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Wo("conv2dDerFilter",o,i);const d={x:a,dy:l},f={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,filterShape:n};return xe.runKernel(Nk,d,f)}const US=Ce({conv2DBackpropFilter_:U3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jS(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return me(e,Hg(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function GS(e,t){let n=t;const s=Hs(e.shape,t.shape);return s.length>0&&(n=Tt(n,s)),ke(n,e.shape)}function KS(e,t,n,s){if(t==="linear")return e;if(t==="relu")return Fa(e);if(t==="elu")return jy(e);if(t==="relu6")return Gz(e);if(t==="prelu")return BS(e,n);if(t==="leakyrelu")return AS(e,s);if(t==="sigmoid")return df(e);throw new Error(`Unknown fused activation ${t}.`)}const qS=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e({x:e,filter:t,strides:n,pad:s,dataFormat:o="NHWC",dilations:r=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",qS(xe.state.gradientDepth,l)===!1){let w=qu(e,t,n,s,o,r,i);return a!=null&&(w=st(w,a)),KS(w,l,u,c)}const d=Z(e,"x","conv2d","float32"),f=Z(t,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=ke(d,[1,d.shape[0],d.shape[1],d.shape[2]])),K(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),K(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Wo("fused conv2d",s,i),K(h.shape[3]===f.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${f.shape[2]}.`),K(Io(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),K(o==="NHWC",()=>`Error in conv2d: got dataFormat of ${o} but only NHWC is currently supported.`);const g=co(h.shape,f.shape,n,r,s,i);let m;a!=null&&(m=Z(a,"bias","fused conv2d"),[m]=Ss(m,d),nn(g.outShape,m.shape));let v;u!=null&&(v=Z(u,"prelu weights","fused conv2d"));const b=(w,C)=>{const[x,k,I,S]=C,T=jS(w,I,l);K(Ku(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const _=TS(k.shape,T,x,n,s),N=US(k,T,x.shape,n,s),O=[_,N];if(S!=null){const M=GS(S,T);O.push(M)}return O},$={x:h,filter:f,bias:m,preluActivationWeights:v},y={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return a==null?Yu((C,x,k)=>{let I=xe.runKernel(_b,$,y);return k([x,C,I]),p&&(I=ke(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:b}})(h,f):Yu((C,x,k,I)=>{let S=xe.runKernel(_b,$,y);return I([x,C,S,k]),p&&(S=ke(S,[S.shape[1],S.shape[2],S.shape[3]])),{value:S,gradFunc:b}})(h,f,m)}const G3e=Ce({fusedConv2d_:j3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3e(e,t,n,s,o,r=[1,1],i){let a=e;e.rank===3&&(a=ke(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=ke(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:a,dy:l},c={strides:s,pad:o,dimRoundingMode:i,dilations:r,filterShape:n};return xe.runKernel(Mk,u,c)}const q3e=Ce({depthwiseConv2dNativeBackpropFilter_:K3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3e(e,t,n,s,o,r=[1,1],i){let a=t,l=!1;t.rank===3&&(l=!0,a=ke(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:a,filter:n},c={strides:s,pad:o,dimRoundingMode:i,dilations:r,inputShape:e},d=xe.runKernel(Pk,u,c);return l?ke(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const X3e=Ce({depthwiseConv2dNativeBackpropInput_:Y3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e({a:e,b:t,transposeA:n=!1,transposeB:s=!1,bias:o,activation:r="linear",preluActivationWeights:i,leakyreluAlpha:a}){if(qS(xe.state.gradientDepth,r)===!1){let T=Dn(e,t,n,s);return o!=null&&(T=st(T,o)),KS(T,r,i,a)}let l=Z(e,"a","fused matMul"),u=Z(t,"b","fused matMul");[l,u]=Ss(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=s?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=s?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),g=u.shape.slice(0,-2),m=Ue(p),v=Ue(g);K(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${s} must match.`);const $=nn(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,h]),y=n?ke(l,[m,c,f]):ke(l,[m,f,c]),w=s?ke(u,[v,h,d]):ke(u,[v,d,h]);let C;o!=null&&(C=Z(o,"bias","fused matMul"),[C]=Ss(C,l),nn($,C.shape));let x;i!=null&&(x=Z(i,"prelu weights","fused matMul"));const k=(T,_)=>{const[N,O,M,D]=_,F=jS(ke(T,M.shape),M,r);let V,U;if(!n&&!s?(V=Dn(F,O,!1,!0),U=Dn(N,F,!0,!1)):!n&&s?(V=Dn(F,O,!1,!1),U=Dn(F,N,!0,!1)):n&&!s?(V=Dn(O,F,!1,!0),U=Dn(N,F,!1,!1)):(V=Dn(O,F,!0,!0),U=Dn(F,N,!0,!0)),o!=null){const ne=GS(D,F);return[V,U,ne]}else return[V,U]},I={a:y,b:w,bias:C,preluActivationWeights:x},S={transposeA:n,transposeB:s,activation:r,leakyreluAlpha:a};return o==null?Yu((_,N,O)=>{const M=xe.runKernel(Eb,I,S);return O([_,N,M]),{value:ke(M,$),gradFunc:k}})(y,w):Yu((_,N,O,M)=>{const D=xe.runKernel(Eb,I,S);return M([_,N,D,O]),{value:ke(D,$),gradFunc:k}})(y,w,C)}const XD=Ce({fusedMatMul_:Z3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(e){return aV(e,.54,.46)}const Q3e=Ce({hammingWindow_:J3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(e){return aV(e,.5,.5)}const lV=Ce({hannWindow_:ePe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(e,t,n,s=!1,o=0){let r=0;const i=[];for(;r+t<=e.size;)i.push(Gn(e,r,t)),r+=n;if(s)for(;r<e.size;){const a=r+t-e.size,l=Co([Gn(e,r,t-a),Gy([a],o)]);i.push(l),r+=n}return i.length===0?nb([],[0,t]):ke(Co(i),[i.length,t])}const uV=Ce({frame_:tPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(e,t,n,s,o=lV){s==null&&(s=H3e(t));const r=uV(e,t,n),i=me(r,o(t));return tV(i,s)}const sPe=Ce({stft_:nPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(e,t,n,s,o="bilinear",r=0){const i=Z(e,"image","cropAndResize"),a=Z(t,"boxes","cropAndResize","float32"),l=Z(n,"boxInd","cropAndResize","int32"),u=a.shape[0];K(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),K(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),K(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),K(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),K(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),K(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const c={image:i,boxes:a,boxInd:l},d={method:o,extrapolationValue:r,cropSize:s};return xe.runKernel(Rk,c,d)}const rPe=Ce({cropAndResize_:oPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iPe(e){const t=Z(e,"image","flipLeftRight","float32");K(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return xe.runKernel(zk,n,{})}const aPe=Ce({flipLeftRight_:iPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(e){const t=Z(e,"image","grayscaleToRGB"),n=t.rank-1,s=t.shape[n];K(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),K(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,mi(t,o)}const uPe=Ce({grayscaleToRGB_:lPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPe(e,t,n=0,s=.5){const o=Z(e,"image","rotateWithOffset","float32");K(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const r={image:o},i={radians:t,fillValue:n,center:s};return xe.runKernel(fS,r,i)}const dPe=Ce({rotateWithOffset_:cPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gf(e,t,n,s,o,r){s==null&&(s=.5),o==null&&(o=Number.NEGATIVE_INFINITY),r==null&&(r=0);const i=e.shape[0];return n=Math.min(n,i),K(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),K(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),K(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),K(t.rank===1,()=>"scores must be a 1D tensor"),K(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),K(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=Z(e,"boxes","nonMaxSuppression","float32"),i=Z(t,"scores","nonMaxSuppression","float32"),a=gf(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:s,scoreThreshold:o};return xe.runKernel(Gk,{boxes:r,scores:i},l)}const hPe=Ce({nonMaxSuppression_:fPe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pPe(e,t,n){const s=gPe(e,t,n),o=s<0?-(s+1):s;e.splice(o,0,t)}function gPe(e,t,n){return vPe(e,t,n||mPe)}function mPe(e,t){return e>t?1:e<t?-1:0}function vPe(e,t,n){let s=0,o=e.length,r=0,i=!1;for(;s<o;){r=s+(o-s>>>1);const a=n(t,e[r]);a>0?s=r+1:(o=r,i=!a)}return i?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YS(e,t,n,s,o){return JS(e,t,n,s,o,0)}function XS(e,t,n,s,o,r){return JS(e,t,n,s,o,0,!1,r,!0)}function ZS(e,t,n,s,o,r){return JS(e,t,n,s,o,r,!0)}function JS(e,t,n,s,o,r,i=!1,a=!1,l=!1){const u=[];for(let m=0;m<t.length;m++)t[m]>o&&u.push({score:t[m],boxIndex:m,suppressBeginIndex:0});u.sort(ZD);const c=r>0?-.5/r:0,d=[],f=[];for(;d.length<n&&u.length>0;){const m=u.pop(),{score:v,boxIndex:b,suppressBeginIndex:$}=m;if(v<o)break;let y=!1;for(let w=d.length-1;w>=$;--w){const C=bPe(e,b,d[w]);if(C>=s){y=!0;break}if(m.score=m.score*yPe(s,c,C),m.score<=o)break}m.suppressBeginIndex=d.length,y||(m.score===v?(d.push(b),f.push(m.score)):m.score>o&&pPe(u,m,ZD))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const g={selectedIndices:d};return i&&(g.selectedScores=f),l&&(g.validOutputs=h),g}function bPe(e,t,n){const s=e.subarray(t*4,t*4+4),o=e.subarray(n*4,n*4+4),r=Math.min(s[0],s[2]),i=Math.min(s[1],s[3]),a=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-r)*(l-i),p=(d-u)*(f-c);if(h<=0||p<=0)return 0;const g=Math.max(r,u),m=Math.max(i,c),v=Math.min(a,d),b=Math.min(l,f),$=Math.max(v-g,0)*Math.max(b-m,0);return $/(h+p-$)}function yPe(e,t,n){const s=Math.exp(t*n*n);return n<=e?s:0}function ZD(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function wPe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=Z(e,"boxes","nonMaxSuppressionAsync"),i=Z(t,"scores","nonMaxSuppressionAsync"),a=gf(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const l=await Promise.all([r.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=YS(u,c,n,s,o);return r!==e&&r.dispose(),i!==t&&i.dispose(),Jo(d,"int32")}const $Pe=wPe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=Z(e,"boxes","nonMaxSuppression"),a=Z(t,"scores","nonMaxSuppression"),l=gf(i,a,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const u={boxes:i,scores:a},c={maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r},d=xe.runKernel(qk,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const xPe=Ce({nonMaxSuppressionWithScore_:CPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kPe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=Z(e,"boxes","nonMaxSuppressionAsync"),a=Z(t,"scores","nonMaxSuppressionAsync"),l=gf(i,a,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const u=await Promise.all([i.data(),a.data()]),c=u[0],d=u[1],{selectedIndices:f,selectedScores:h}=ZS(c,d,n,s,o,r);return i!==e&&i.dispose(),a!==t&&a.dispose(),{selectedIndices:Jo(f,"int32"),selectedScores:Jo(h)}}const SPe=kPe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IPe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=Z(e,"boxes","nonMaxSuppression"),a=Z(t,"scores","nonMaxSuppression"),l=gf(i,a,n,s,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,f={boxes:i,scores:a},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:r},p=xe.runKernel(Kk,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const TPe=Ce({nonMaxSuppressionPadded_:IPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function EPe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=Z(e,"boxes","nonMaxSuppressionAsync"),a=Z(t,"scores","nonMaxSuppressionAsync"),l=gf(i,a,n,s,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:g}=XS(f,h,u,c,d,r);return i!==e&&i.dispose(),a!==t&&a.dispose(),{selectedIndices:Jo(p,"int32"),validOutputs:jt(g,"int32")}}const _Pe=EPe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(e,t,n=!1,s=!1){const o=Z(e,"images","resizeBilinear");K(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),K(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),K(s===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=ke(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:s,size:t},u=xe.runKernel(Ty,a,l);return i?ke(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const cV=Ce({resizeBilinear_:NPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function APe(e,t,n=!1,s=!1){const o=Z(e,"images","resizeNearestNeighbor");K(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),K(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),K(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),K(s===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=ke(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:s,size:t},u=xe.runKernel(Iy,a,l);return i?ke(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const dV=Ce({resizeNearestNeighbor_:APe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(e,t="binary",n=!1,s=.5){const o=Z(e,"image","threshold"),r=.2989,i=.587,a=.114,l=o.shape[0]*o.shape[1];let u=me(Jo([s]),255),c,d,f,h;if(K(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),K(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),K(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),K(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[c,d,f]=$r(o,[1,1,1],-1);const m=me(c,r),v=me(d,i),b=me(f,a);h=st(st(m,v),b)}else h=e;if(t==="otsu"){const m=jRe(gt(Kz(h),"int32"),uDe([]),256);u=RPe(m,l)}const p=n?hf(h,u):si(h,u);return gt(me(p,255),"int32")}function RPe(e,t){let n=Jo([-1]),s=Jo([0]),o=Jo([0]),r,i,a,l,u,c;for(let d=0;d<e.size-1;d++){r=Gn(e,0,d+1),i=Gn(e,d+1),u=Nt(Tt(r),t),c=Nt(Tt(i),t);const f=Tt(me(r,Ob(0,r.size)));a=Nt(f,Tt(r));const h=Gy(i.shape,r.size),p=st(Ob(0,i.size),h),g=me(i,p);l=Nt(Tt(g),Tt(i));const m=Et(a,l),v=Et(a,l),b=me(u,c);o=me(me(b,m),v);const $=si(o,s);s=sr($,o,s),n=sr($,Jo([d]),n)}return n}const OPe=Ce({threshold_:DPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(e,t,n="nearest",s="constant",o=0,r){const i=Z(e,"image","transform","float32"),a=Z(t,"transforms","transform","float32");K(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),K(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),K(r==null||r.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`);const l={image:i,transforms:a},u={interpolation:n,fillMode:s,fillValue:o,outputShape:r};return xe.runKernel(cS,l,u)}const PPe=Ce({transform_:MPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(e,t,n){K(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),K(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const s=Z(e,"a","bandPart");K(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const o=s.shape,[r,i]=s.shape.slice(-2);if(!(t<=r))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${r}).`);if(!(n<=i))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`);t<0&&(t=r),n<0&&(n=i);const a=ke(Ob(0,r,1,"int32"),[-1,1]),l=Ob(0,i,1,"int32"),u=Et(a,l),c=Na(hf(u,jt(+t,"int32")),ff(u,jt(-n,"int32"))),d=qs([r,i],s.dtype);return ke(Zu(Ld(ke(s,[-1,r,i])).map(f=>sr(c,f,d))),o)}const LPe=Ce({bandPart_:FPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(e){let t;if(Array.isArray(e)){t=!1,K(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=e[0].shape[0];for(let r=1;r<e.length;++r)K(e[r].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[r].shape[0]} vs. ${o})`)}else t=!0,e=$r(e,e.shape[0],0).map(o=>Wg(o,[0]));K(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],s=e;for(let o=0;o<e.length;++o)n.push(xe.tidy(()=>{let r=s[o];if(o>0)for(let i=0;i<o;++i){const a=me(Tt(me(n[i],r)),n[i]);r=Et(r,a)}return Nt(r,HS(r,"euclidean"))}));return t?Zu(n,0):n}const zPe=Ce({gramSchmidt_:BPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VPe(e,t=!1){if(K(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return JD(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((l,u)=>l*u),s=Ld(ke(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],r=[];s.forEach(l=>{const[u,c]=JD(l,t);o.push(u),r.push(c)});const i=ke(Zu(o,0),e.shape),a=ke(Zu(r,0),e.shape);return[i,a]}}function JD(e,t=!1){return xe.tidy(()=>{K(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],s=e.shape[1];let o=Nz(n),r=Ou(e);const i=nb([[1]],[1,1]);let a=Ou(i);const l=n>=s?s:n;for(let u=0;u<l;++u){const c=r,d=a,f=o;[a,r,o]=xe.tidy(()=>{const h=Gn(r,[u,u],[n-u,1]),p=HS(h),g=Gn(r,[u,u],[1,1]),m=sr(si(g,0),nb([[-1]]),nb([[1]])),v=Et(g,me(m,p)),b=Nt(h,v);b.shape[0]===1?a=Ou(i):a=Co([i,Gn(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const $=ys(Nt(Dn(m,v),p)),y=Gn(r,[u,0],[n-u,s]),w=me($,a),C=An(a);if(u===0)r=Et(y,Dn(w,Dn(C,y)));else{const I=Et(y,Dn(w,Dn(C,y)));r=Co([Gn(r,[0,0],[u,s]),I],0)}const x=An(w),k=Gn(o,[0,u],[n,o.shape[1]-u]);if(u===0)o=Et(k,Dn(Dn(k,a),x));else{const I=Et(k,Dn(Dn(k,a),x));o=Co([Gn(o,[0,0],[n,u]),I],1)}return[a,r,o]}),hn([c,d,f])}return!t&&n>s&&(o=Gn(o,[0,0],[n,s]),r=Gn(r,[0,0],[s,s])),[o,r]})}const WPe=Ce({qr_:VPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Bo;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Bo||(Bo={}));function HPe(e,t,n=Bo.SUM_BY_NONZERO_WEIGHTS){const s=Z(e,"losses","computeWeightedLoss");let o=null;t!=null&&(o=Z(t,"weights","computeWeightedLoss"));const r=o==null?s:me(s,o);if(n===Bo.NONE)return r;if(n===Bo.SUM)return Tt(r);if(n===Bo.MEAN){if(o==null)return $s(r);{const i=s.size/o.size,a=Nt(Tt(r),Tt(o));return i>1?Nt(a,jt(i)):a}}if(n===Bo.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Nt(Tt(r),jt(s.size));{const i=me(o,Pl(s.shape)),a=gt(Tt(up(i,jt(0))),"float32");return Nt(Tt(r),a)}}throw Error(`Unknown reduction: ${n}`)}const Fl=Ce({computeWeightedLoss_:HPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(e,t,n,s=Bo.SUM_BY_NONZERO_WEIGHTS){const o=Z(e,"labels","absoluteDifference"),r=Z(t,"predictions","absoluteDifference");let i=null;n!=null&&(i=Z(n,"weights","absoluteDifference")),ti(o.shape,r.shape,"Error in absoluteDifference: ");const a=Gs(Et(o,r));return Fl(a,i,s)}const ict=Ce({absoluteDifference_:UPe});function jPe(e,t,n,s,o=Bo.SUM_BY_NONZERO_WEIGHTS){const r=Z(e,"labels","cosineDistance"),i=Z(t,"predictions","cosineDistance");let a=null;s!=null&&(a=Z(s,"weights","cosineDistance")),ti(r.shape,i.shape,"Error in cosineDistance: ");const l=jt(1),u=Et(l,Tt(me(r,i),n,!0));return Fl(u,a,o)}const act=Ce({cosineDistance_:jPe});function GPe(e,t,n,s=Bo.SUM_BY_NONZERO_WEIGHTS){let o=Z(e,"labels","hingeLoss");const r=Z(t,"predictions","hingeLoss");let i=null;n!=null&&(i=Z(n,"weights","hingeLoss")),ti(o.shape,r.shape,"Error in hingeLoss: ");const a=jt(1);o=Et(me(jt(2),o),a);const l=Fa(Et(a,me(o,r)));return Fl(l,i,s)}const lct=Ce({hingeLoss_:GPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(e,t,n,s=1,o=Bo.SUM_BY_NONZERO_WEIGHTS){const r=Z(e,"labels","huberLoss"),i=Z(t,"predictions","huberLoss");let a=null;n!=null&&(a=Z(n,"weights","huberLoss")),ti(r.shape,i.shape,"Error in huberLoss: ");const l=jt(s),u=Gs(Et(i,r)),c=qy(u,l),d=Et(u,c),f=st(me(jt(.5),es(c)),me(l,d));return Fl(f,a,o)}const uct=Ce({huberLoss_:KPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(e,t,n,s=1e-7,o=Bo.SUM_BY_NONZERO_WEIGHTS){const r=Z(e,"labels","logLoss"),i=Z(t,"predictions","logLoss");let a=null;n!=null&&(a=Z(n,"weights","logLoss")),ti(r.shape,i.shape,"Error in logLoss: ");const l=jt(1),u=jt(s),c=ys(me(r,Zr(st(i,u)))),d=me(Et(l,r),Zr(st(Et(l,i),u))),f=Et(c,d);return Fl(f,a,o)}const cct=Ce({logLoss_:qPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(e,t,n,s=Bo.SUM_BY_NONZERO_WEIGHTS){const o=Z(e,"labels","meanSquaredError"),r=Z(t,"predictions","meanSquaredError");let i=null;n!=null&&(i=Z(n,"weights","meanSquaredError")),ti(o.shape,r.shape,"Error in meanSquaredError: ");const a=nV(o,r);return Fl(a,i,s)}const dct=Ce({meanSquaredError_:YPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(e,t){const n=Z(e,"labels","sigmoidCrossEntropyWithLogits"),s=Z(t,"logits","sigmoidCrossEntropyWithLogits");ti(n.shape,s.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=Fa(s),r=me(s,n),i=DS(Xr(ys(Gs(s))));return st(Et(o,r),i)}function ZPe(e,t,n,s=0,o=Bo.SUM_BY_NONZERO_WEIGHTS){let r=Z(e,"multiClassLabels","sigmoidCrossEntropy");const i=Z(t,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=Z(n,"weights","sigmoidCrossEntropy")),ti(r.shape,i.shape,"Error in sigmoidCrossEntropy: "),s>0){const u=jt(s),c=jt(1),d=jt(.5);r=st(me(r,Et(c,u)),me(d,u))}const l=XPe(r,i);return Fl(l,a,o)}const fct=Ce({sigmoidCrossEntropy_:ZPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JPe(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Yu((o,r,i)=>{const l=Mz(r,[n],!0),u=Et(gt(r,"float32"),l);i([o,u]);const c=ys(me(u,o));return{value:Tt(c,[n]),gradFunc:(h,p)=>{const[g,m]=p,v=Is(h.shape,[n]);return[me(ke(h,v),Et(gt(g,"float32"),Xr(m))),me(ke(h,v),Et(Xr(m),gt(g,"float32")))]}}})(e,t)}function QPe(e,t,n,s=0,o=Bo.SUM_BY_NONZERO_WEIGHTS){let r=Z(e,"onehotLabels","softmaxCrossEntropy");const i=Z(t,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=Z(n,"weights","softmaxCrossEntropy")),ti(r.shape,i.shape,"Error in softmaxCrossEntropy: "),s>0){const u=jt(s),c=jt(1),d=jt(r.shape[1]);r=st(me(r,Et(c,u)),Nt(u,d))}const l=JPe(r,i);return Fl(l,a,o)}const hct=Ce({softmaxCrossEntropy_:QPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(e,t,n,s){const o=Z(e,"indices","sparseFillEmptyRows","int32"),r=Z(t,"values","sparseFillEmptyRows"),i=Z(n,"denseShape","sparseFillEmptyRows","int32"),a=Z(s,"defaultValue","sparseFillEmptyRows",r.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(r.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${r.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:o,values:r,denseShape:i,defaultValue:a},u=xe.runKernel(eS,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const pct=Ce({sparseFillEmptyRows_:eFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(e,t,n){const s=Z(e,"inputIndices","sparseReshape","int32"),o=Z(t,"inputShape","sparseReshape","int32"),r=Z(n,"newShape","sparseReshape","int32");if(s.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${s.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(r.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${r.shape}`);const i={inputIndices:s,inputShape:o,newShape:r},a=xe.runKernel(tS,i);return{outputIndices:a[0],outputShape:a[1]}}const gct=Ce({sparseReshape_:tFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(e,t,n){const s=Z(e,"data","sparseSegmentMean"),o=Z(t,"indices","sparseSegmentMean","int32"),r=Z(n,"segmentIds","sparseSegmentMean","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(r.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${r.shape}`);const i={data:s,indices:o,segmentIds:r};return xe.runKernel(nS,i)}const mct=Ce({sparseSegmentMean_:nFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(e,t,n){const s=Z(e,"data","sparseSegmentSum"),o=Z(t,"indices","sparseSegmentSum","int32"),r=Z(n,"segmentIds","sparseSegmentSum","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(r.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${r.shape}`);const i={data:s,indices:o,segmentIds:r};return xe.runKernel(sS,i)}const vct=Ce({sparseSegmentSum_:sFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(e,t,n,s,o,r,i,a){const l=Z(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=Z(t,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:s,leftPad:o,rightPad:r,padWidth:i,preserveShortSequences:a},d={data:l,dataSplits:u},f=xe.runKernel(iS,d,c);return{nGrams:f[0],nGramsSplits:f[1]}}const bct=Ce({stringNGrams_:oFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(e,t,n=!0){const s=Z(e,"input","stringSplit","string"),o=Z(t,"delimiter","stringSplit","string");if(s.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${s.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const r={skipEmpty:n},i={input:s,delimiter:o},a=xe.runKernel(aS,i,r);return{indices:a[0],values:a[1],shape:a[2]}}const yct=Ce({stringSplit_:rFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(e,t){const n=Z(e,"input","stringToHashBucketFast","string"),s={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return xe.runKernel(lS,o,s)}const wct=Ce({stringToHashBucketFast_:iFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ct={hammingWindow:Q3e,hannWindow:lV,frame:uV,stft:sPe},Ym={flipLeftRight:aPe,grayscaleToRGB:uPe,resizeNearestNeighbor:dV,resizeBilinear:cV,rotateWithOffset:dPe,cropAndResize:rPe,nonMaxSuppression:hPe,nonMaxSuppressionAsync:$Pe,nonMaxSuppressionWithScore:xPe,nonMaxSuppressionWithScoreAsync:SPe,nonMaxSuppressionPadded:TPe,nonMaxSuppressionPaddedAsync:_Pe,threshold:OPe,transform:PPe},aFe={bandPart:LPe,gramSchmidt:zPe,qr:WPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ll extends cf{minimize(t,n=!1,s){const{value:o,grads:r}=this.computeGradients(t,s);if(s!=null){const i=s.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(i)}else this.applyGradients(r);return hn(r),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return tMe(t,n)}dispose(){this.iterations_!=null&&hn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:jt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(Ll,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QS extends Ll{constructor(t,n,s=null){super();this.learningRate=t,this.rho=n,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=xe.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=xe.registeredVariables[s],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accum_grad`,variable:Me(()=>kn(r).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${s}/accum_var`,variable:Me(()=>kn(r).variable(i))});const a=Array.isArray(t)?t[o].tensor:t[s];if(a==null)return;const l=this.accumulatedGrads[o].variable,u=this.accumulatedUpdates[o].variable;Me(()=>{const c=st(me(l,this.rho),me(es(a),1-this.rho)),d=me(Nt(Do(st(u,this.epsilon)),Do(st(l,this.epsilon))),a),f=st(me(u,this.rho),me(es(d),1-this.rho));l.assign(c),u.assign(f);const h=st(me(d,-this.learningRate),r);r.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(hn(this.accumulatedGrads.map(t=>t.variable)),hn(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,s=!1;this.accumulatedGrads=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedUpdates=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}QS.className="Adadelta";et(QS);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eI extends Ll{constructor(t,n=.1){super();this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=xe.registeredVariables[s];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accumulator`,variable:Me(()=>Gy(r.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(t)?t[o].tensor:t[s];if(i==null)return;const a=this.accumulatedGrads[o].variable;Me(()=>{const l=st(a,es(i));a.assign(l);const u=st(me(Nt(i,Do(st(l,xe.backend.epsilon()))),-this.learningRate),r);r.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&hn(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}eI.className="Adagrad";et(eI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tI extends Ll{constructor(t,n,s,o=null){super();this.learningRate=t,this.beta1=n,this.beta2=s,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Me(()=>{this.accBeta1=jt(n).variable(),this.accBeta2=jt(s).variable()}),o==null&&(this.epsilon=xe.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);Me(()=>{const s=Et(1,this.accBeta1),o=Et(1,this.accBeta2);n.forEach((r,i)=>{const a=xe.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:Me(()=>kn(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${r}/v`,variable:Me(()=>kn(a).variable(l))});const u=Array.isArray(t)?t[i].tensor:t[r];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,f=st(me(c,this.beta1),me(u,1-this.beta1)),h=st(me(d,this.beta2),me(es(u),1-this.beta2)),p=Nt(f,s),g=Nt(h,o);c.assign(f),d.assign(h);const m=st(me(Nt(p,st(Do(g),this.epsilon)),-this.learningRate),a);a.assign(m)}),this.accBeta1.assign(me(this.accBeta1,this.beta1)),this.accBeta2.assign(me(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&hn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&hn(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),Me(()=>{this.accBeta1.assign(Fd(this.beta1,this.iterations_+1)),this.accBeta2.assign(Fd(this.beta2,this.iterations_+1))});const n=t.length/2,s=!1;this.accumulatedFirstMoment=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}tI.className="Adam";et(tI);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nI extends Ll{constructor(t,n,s,o=null,r=0){super();this.learningRate=t,this.beta1=n,this.beta2=s,this.epsilon=o,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Me(()=>{this.iteration=jt(0).variable(),this.accBeta1=jt(n).variable()}),o==null&&(this.epsilon=xe.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);Me(()=>{const s=Et(1,this.accBeta1),o=Nt(-this.learningRate,st(me(this.iteration,this.decay),1));n.forEach((r,i)=>{const a=xe.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:kn(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${r}/v`,variable:kn(a).variable(l)});const u=Array.isArray(t)?t[i].tensor:t[r];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,f=st(me(c,this.beta1),me(u,1-this.beta1)),h=me(d,this.beta2),p=Gs(u),g=Ml(h,p);c.assign(f),d.assign(g);const m=st(me(Nt(o,s),Nt(f,st(g,this.epsilon))),a);a.assign(m)}),this.iteration.assign(st(this.iteration,1)),this.accBeta1.assign(me(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&hn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&hn(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}nI.className="Adamax";et(nI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xy extends Ll{constructor(t){super();this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Array.isArray(t)?t[o].tensor:t[s];if(r==null)return;const i=xe.registeredVariables[s];Me(()=>{const a=st(me(this.c,r),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=Ji(jt(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}Xy.className="SGD";et(Xy);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sI extends Xy{constructor(t,n,s=!1){super(t);this.learningRate=t,this.momentum=n,this.useNesterov=s,this.accumulations=[],this.m=jt(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=xe.registeredVariables[s];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${s}/momentum`,variable:Me(()=>kn(r).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(t)?t[o].tensor:t[s];a!=null&&Me(()=>{let l;const u=st(me(this.m,i),a);this.useNesterov?l=st(me(this.c,st(a,me(u,this.m))),r):l=st(me(this.c,u),r),i.assign(u),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&hn(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}sI.className="Momentum";et(sI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oI extends Ll{constructor(t,n=.9,s=0,o=null,r=!1){super();if(this.learningRate=t,this.decay=n,this.momentum=s,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,o==null&&(this.epsilon=xe.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=xe.registeredVariables[s],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${s}/rms`,variable:Me(()=>kn(r).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${s}/momentum`,variable:Me(()=>kn(r).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${s}/mg`,variable:Me(()=>kn(r).variable(i))});const a=Array.isArray(t)?t[o].tensor:t[s];if(a==null)return;const l=this.accumulatedMeanSquares[o].variable,u=this.accumulatedMoments[o].variable;Me(()=>{const c=st(me(l,this.decay),me(es(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=st(me(d,this.decay),me(a,1-this.decay)),h=Nt(me(a,this.learningRate),Do(Et(c,st(es(f),this.epsilon)))),p=st(me(u,this.momentum),h);l.assign(c),d.assign(f),u.assign(p);const g=Et(r,p);r.assign(g)}else{const d=st(me(l,this.decay),me(es(a),1-this.decay)),f=st(me(u,this.momentum),Nt(me(a,this.learningRate),Do(st(d,this.epsilon))));l.assign(d),u.assign(f);const h=Et(r,f);r.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&hn(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&hn(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&hn(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,s=!1;this.accumulatedMeanSquares=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedMoments=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}oI.className="RMSProp";et(oI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ql{static sgd(t){return new Xy(t)}static momentum(t,n,s=!1){return new sI(t,n,s)}static rmsprop(t,n=.9,s=0,o=null,r=!1){return new oI(t,n,s,o,r)}static adam(t=.001,n=.9,s=.999,o=null){return new tI(t,n,s,o)}static adadelta(t=.001,n=.95,s=null){return new QS(t,n,s)}static adamax(t=.002,n=.9,s=.999,o=null,r=0){return new nI(t,n,s,o,r)}static adagrad(t,n=.1){return new eI(t,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wc={sgd:Ql.sgd,momentum:Ql.momentum,adadelta:Ql.adadelta,adagrad:Ql.adagrad,rmsprop:Ql.rmsprop,adamax:Ql.adamax,adam:Ql.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lFe=(()=>typeof requestAnimationFrame!="undefined"?requestAnimationFrame:typeof setImmediate!="undefined"?setImmediate:e=>e())();function uFe(){return new Promise(e=>lFe(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rI(e,t){const n=e[0].length;e.forEach((o,r)=>{K(o.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same as the rank of the rest (${n})`)}),K(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const s=e[0];e.forEach((o,r)=>{for(let i=0;i<n;i++)K(i===t||o[i]===s[i],()=>`Error in concat${n}D: Shape of tensors[${r}] (${o}) does not match the shape of the rest (${s}) along the non-concatenated axis ${r}.`)})}function Ki(e,t){const n=e[0].slice();for(let s=1;s<e.length;s++)n[t]+=e[s][t];return n}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iI=30;function Zy(e){return e<=iI?e:jC(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aI(e,t,n){const s=n*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[s,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ug(e,t,n,s=!0){let o=[];if(s)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const r=t.length;for(let i=0;i<r;++i)o=o.concat([e[i+1]/t[i],t[i]]);o=o.concat(e.slice(r+1))}return o}function jg(e,t,n=!0){const s=[];if(n){s.push(t);for(let o=t+1;o<e;++o)o<=2*t?(s.push(o),s.push(o-(t+1))):s.push(o)}else{const o=[],r=[];for(let i=1;i<e;++i)i>=t*2+1||i%2===1?r.push(i):o.push(i);s.push(...o),s.push(0),s.push(...r)}return s}function Gg(e,t,n,s=!0){const o=[];s?o.push(e[0]/n):o.push(e[0]*n);for(let r=1;r<e.length;++r)r<=t.length?s?o.push(t[r-1]*e[r]):o.push(e[r]/t[r-1]):o.push(e[r]);return o}function lI(e,t){const n=[0];for(let s=0;s<t;++s)n.push(e[s][0]);return n}function uI(e,t,n){const s=e.slice(0,1);for(let o=0;o<n;++o)s.push(e[o+1]-t[o][0]-t[o][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jy=1.7580993408473768,Qy=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cI=.3275911,dI=.254829592,fI=-.284496736,hI=1.421413741,pI=-1.453152027,gI=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aa(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let s=0;s<n.length;s+=2)n[s]=e[s/2],n[s+1]=t[s/2];return n}function fV(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let s=0;s<e.length;s+=2)t[s/2]=e[s],n[s/2]=e[s+1];return{real:t,imag:n}}function hV(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),s=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:n,imag:s}}function pV(e){const t=Math.floor(e.length/4),n=new Float32Array(t),s=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:n,imag:s}}function mI(e,t){const n=e[t*2],s=e[t*2+1];return{real:n,imag:s}}function gV(e,t,n,s){e[s*2]=t,e[s*2+1]=n}function mV(e,t){const n=new Float32Array(e/2),s=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const r=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(r),s[o]=Math.sin(r)}return{real:n,imag:s}}function vV(e,t,n){const s=(n?2:-2)*Math.PI*(e/t),o=Math.cos(s),r=Math.sin(s);return{real:o,imag:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e$="->",cFe=/->/g,QD=",",eR="...";function vI(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(cFe,"").length)/e$.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${e$}").`);const[s,o]=e.split(e$);K(s.indexOf(eR)===-1,()=>`The ellipsis notation ("${eR}") is not supported yet.`);const r=s.split(QD),i=r.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<o.length;++f){const h=o[f];if(!r.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<s.length;++f){const h=s[f];a.indexOf(h)===-1&&h!==QD&&a.push(h)}const l=new Array(r.length);for(let f=0;f<i;++f){if(new Set(r[f].split("")).size!==r[f].length)throw new Error(`Found duplicate axes in input component ${r[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<r[f].length;++h)l[f].push(a.indexOf(r[f][h]))}const u=a.length,c=o.length,d=[];for(let f=c;f<u;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function bI(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;const s=[];for(let o=0;o<e;++o)n[o]===-1&&s.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:s}}function yI(e,t,n){const s=new Array(e);for(let o=0;o<n.length;++o){const r=n[o].shape;for(let i=0;i<t[o].length;++i)s[t[o][i]]===void 0?s[t[o][i]]=r[i]:K(s[t[o][i]]===r[i],()=>`Expected dimension ${s[t[o][i]]} at axis ${i} of input shaped ${JSON.stringify(r)}, but got dimension ${r[i]}`)}}function wI(e,t){const n=e,s=[];let o=0;e.length===0&&n.push(-1),o=e.length+1;for(let i=0;i<o;++i)s.push([]);const r=[];for(let i=0;i<n.length;++i){const a=n[i],l=dFe(t,a);for(const u of l)r.indexOf(u)===-1&&(s[i].push(u),r.push(u))}return{path:n,steps:s}}function $I(e){return e.every((t,n)=>t===n)}function dFe(e,t){const n=[];for(let s=0;s<e.length;++s)(e[s].length===0||e[s].indexOf(t)!==-1||t===-1)&&n.push(s);return n}function CI(e,t,n=0){let s=[];if(typeof t=="number")K(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),s=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce((i,a)=>(a===-1&&(i+=1),i),0);K(o<=1,()=>"There should be only one negative value in split array.");const r=t.indexOf(-1);if(r!==-1){const i=t.reduce((a,l)=>l>0?a+l:a);t[r]=e.shape[n]-i}K(e.shape[n]===t.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),s=t}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bV(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function yV(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function wV(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $V(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function CV(e,t){return`size ${e} must be non-negative, not ${t}`}function xV(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function kV(e,t){const n=Ue(e),s=Ue(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${e} outputShape= ${t}`}function SV(e,t){const n=Ue(e),s=Ue(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${s}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fx(){return"segment ids must be >= 0"}function IV(){return"segment ids are not increasing"}function TV(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function EV(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _V(e,t){let n=!1,s;for(e<=iI?(s=e,n=!0):s=jC(e,Math.floor(Math.sqrt(e)));!n;)s>t||s===e?n=!0:s=jC(e,s+1);return s}function NV(e,t,n){const s=[],o=e.length;for(let r=0;r<o;r++)r!==t?s.push(e[r]):s.push(n);return s}function xI(e,t,n,s){const o=t.shape.length,r=e.shape.length;if(s!==0&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>r)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${r}).`);if(n<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${n}).`);for(let d=0;d<s;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const i=e.shape[n],a=[];let l=1,u=1,c=1;for(let d=0;d<s;++d)a.push(e.shape[d]),l*=e.shape[d];for(let d=s;d<n;d++)a.push(e.shape[d]),u*=e.shape[d];for(let d=s;d<o;d++)a.push(t.shape[d]);for(let d=n+1;d<r;d++)a.push(e.shape[d]),c*=e.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:a}}var fFe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",segOpComputeOptimalWindowSize:_V,computeOutShape:NV,collectGatherOpShapeInfo:xI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ju(e){try{return e.map(t=>Od(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function AV(e){return e.map(t=>cl(t))}var hFe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",slice_util:ZDe,segment_util:fFe,fromUint8ToStringArray:Ju,fromStringArrayToUint8:AV,upcastType:kr,axesAreInnerMostDims:RS,combineLocations:Oz,computeOutAndReduceShapes:Qs,expandShapeToKeepDim:Is,assertAxesAreInnerMostDims:fo,getAxesPermutation:Ts,getUndoAxesPermutation:pf,getInnerMostAxes:Rs,getBroadcastDims:Pd,getReductionAxes:Hs,assertAndGetBroadcastShape:nn,assertParamsConsistent:rI,computeOutShape:Ki,computeDilation2DInfo:zg,computePool2DInfo:ni,computePool3DInfo:Ma,computeConv2DInfo:co,computeConv3DInfo:Ol,computeDefaultPad:xS,tupleValuesAreOne:Ku,eitherStridesOrDilationsAreOne:Io,convertConv2DDataFormat:Pa,checkPadOnDimRoundingMode:Wo,getFusedDyActivation:jS,getFusedBiasGradient:GS,applyActivation:KS,shouldFuse:qS,PARALLELIZE_THRESHOLD:iI,computeOptimalWindowSize:Zy,getImageCenter:aI,getReshaped:Ug,getPermuted:jg,getReshapedPermuted:Gg,getSliceBeginCoords:lI,getSliceSize:uI,prepareAndValidate:vS,validateUpdateShape:hz,validateInput:GDe,calculateShapes:Bg,SELU_SCALEALPHA:Jy,SELU_SCALE:Qy,ERF_P:cI,ERF_A1:dI,ERF_A2:fI,ERF_A3:hI,ERF_A4:pI,ERF_A5:gI,warn:vr,log:FAe,mergeRealAndImagArrays:Aa,splitRealAndImagArrays:fV,complexWithEvenIndex:hV,complexWithOddIndex:pV,getComplexWithIndex:mI,assignToTypedArray:gV,exponents:mV,exponent:vV,decodeEinsumEquation:vI,getEinsumPermutation:bI,checkEinsumDimSizes:yI,getEinsumComputePath:wI,isIdentityPermutation:$I,prepareSplitSize:CI,getSparseFillEmptyRowsIndicesDenseShapeMismatch:bV,getSparseFillEmptyRowsNegativeIndexErrorMessage:yV,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:wV,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:$V,getSparseReshapeNegativeOutputDimErrorMessage:CV,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:xV,getSparseReshapeInputOutputMultipleErrorMessage:kV,getSparseReshapeInputOutputMismatchErrorMessage:SV,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:fx,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:IV,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:TV,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:EV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DV={kernelName:B0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(e,Hg(gt(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pFe={kernelName:Up,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=es(gt(n,"float32")),o=Do(Et(jt(1),s));return ys(Nt(e,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gFe={kernelName:jp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=Do(Et(es(gt(n,"float32")),1));return Nt(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mFe={kernelName:uf,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=nn(n.shape,s.shape);return{a:()=>{let a=e;const l=Hs(n.shape,o);return l.length>0&&(a=Tt(a,l)),ke(a,n.shape)},b:()=>{let a=e;const l=Hs(s.shape,o);return l.length>0&&(a=Tt(a,l)),ke(a,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vFe={kernelName:xk,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((s,o)=>{n[o]=()=>e.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bFe={kernelName:z0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>kn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yFe={kernelName:V0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>kn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wFe={kernelName:Gp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nt(e,Do(Et(jt(1),es(gt(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Fe={kernelName:Kp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=Do(st(jt(1),es(gt(n,"float32"))));return Nt(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CFe={kernelName:Xp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=nn(n.shape,s.shape);return{a:()=>{const a=st(es(n),es(s));let l=me(e,Nt(s,a));const u=Hs(n.shape,o);return u.length>0&&(l=Tt(l,u)),ke(l,n.shape)},b:()=>{const a=st(es(n),es(s));let l=ys(me(e,Nt(n,a)));const u=Hs(s.shape,o);return u.length>0&&(l=Tt(l,u)),ke(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xFe={kernelName:qp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nt(e,st(es(gt(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kFe={kernelName:Yp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nt(e,Et(jt(1),es(gt(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(e,t,n,s,o,r){const i=Z(e,"dy","avgPool3dGrad"),a=Z(t,"input","avgPool3dGrad");let l=i,u=a,c=!1;a.rank===4&&(c=!0,l=ke(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=ke(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),K(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),K(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Wo("avgPool3dGrad",o,r);const d={dy:l,input:u},f={filterSize:n,strides:s,pad:o,dimRoundingMode:r},h=xe.runKernel(Tk,d,f);return c?ke(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const IFe=Ce({avgPool3dGrad_:SFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFe={kernelName:H0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{filterSize:o,strides:r,pad:i,dimRoundingMode:a}=n;return{x:()=>IFe(e,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EFe(e,t,n,s,o){const r=Z(e,"dy","avgPoolGrad"),i=Z(t,"input","avgPoolGrad");K(i.rank===r.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${r.rank})`);let a=i,l=r,u=!1;i.rank===3&&(u=!0,a=ke(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=ke(r,[1,r.shape[0],r.shape[1],r.shape[2]])),K(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),K(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},d={filterSize:n,strides:s,pad:o},f=xe.runKernel(Ik,c,d);return u?ke(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const _Fe=Ce({avgPoolGrad_:EFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NFe={kernelName:W0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{filterSize:o,strides:r,pad:i}=n;return{x:()=>_Fe(e,s,o,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AFe={kernelName:U0,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[s,o]=t,{transposeA:r,transposeB:i}=n;return!r&&!i?{a:()=>Dn(e,o,!1,!0),b:()=>Dn(s,e,!0,!1)}:!r&&i?{a:()=>Dn(e,o,!1,!1),b:()=>Dn(e,s,!0,!1)}:r&&!i?{a:()=>Dn(o,e,!1,!0),b:()=>Dn(s,e,!1,!1)}:{a:()=>Dn(o,e,!0,!0),b:()=>Dn(e,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DFe={kernelName:j0,gradFunc:(e,t,n)=>{const{blockShape:s,crops:o}=n;return{x:()=>LS(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RFe={kernelName:OAe,gradFunc:(e,t,n)=>{const s=n,o=s.inputShape,r=s.shape,i=Array.from(r);for(let l=o.length-1;l>=0;l--)if(o[l]===r[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>Tt(e,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OFe={kernelName:Zp,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MFe={kernelName:Jp,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PFe={kernelName:Qp,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{clipValueMin:o,clipValueMax:r}=n;return{x:()=>sr(Na(ff(s,o),hf(s,r)),e,kn(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FFe={kernelName:G0,inputsToSave:["x"],gradFunc:DV.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LFe={kernelName:K0,saveAllInputs:!0,gradFunc:(e,t,n)=>{const s=t.map(l=>l.shape),{axis:o}=n,r=un(o,t[0].shape)[0],i=s.map(l=>l[r]);return $r(e,i,r).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BFe={kernelName:q0,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,{dilations:r,strides:i,pad:a,dataFormat:l}=n;return K(Ku(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>TS(s.shape,e,o,i,a,l),filter:()=>US(s,e,o.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zFe={kernelName:Y0,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,{strides:r,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>qu(e,o,r,i,a,1,l),filter:()=>US(e,s,o.shape,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(e,t,n,s,o){let r=e;e.rank===4&&(r=ke(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;i.rank===4&&(i=ke(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),K(r.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),K(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),K(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),K(r.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${n[3]}.`),K(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:r,dy:i},l={strides:s,pad:o,filterShape:n};return xe.runKernel(Ak,a,l)}const WFe=Ce({conv3DBackpropFilter_:VFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HFe={kernelName:X0,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:s,strides:o,pad:r}=n;K(Ku(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[i,a]=t;return{x:()=>Tz(i.shape,e,a,o,r),filter:()=>WFe(i,e,a.shape,o,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UFe={kernelName:eg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(ys(Zz(gt(n,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jFe={kernelName:tg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(Jz(gt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GFe={kernelName:Z0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{axis:o,exclusive:r,reverse:i}=n;return{x:()=>{const a=Ts([o],s.rank);let l=_z(e,o,r,!i);return a!=null&&(l=An(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KFe={kernelName:J0,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:s,strides:o,pad:r,dimRoundingMode:i}=n,a=s==null?[1,1]:s;K(Ku(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=t;return K(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),K(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),K(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),K(Io(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Wo("depthwiseConv2d",r,i),{x:()=>X3e(l.shape,e,u,o,r,a,i),filter:()=>q3e(l,e,u.shape,o,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qFe={kernelName:Q0,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,r={x:s,filter:o,dy:e},i={x:s,filter:o,dy:e};return{x:()=>xe.runKernel(GC,r,n),filter:()=>xe.runKernel(KC,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YFe={kernelName:sg,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,s={dy:e,y:n};return{x:()=>xe.runKernel(Fk,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XFe={kernelName:og,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,s=me(Xr(ys(es(n))),2/Math.sqrt(Math.PI));return{x:()=>me(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZFe={kernelName:rg,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(e,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JFe={kernelName:ty,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>ke(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QFe={kernelName:ig,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(e,Xr(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eLe={kernelName:ag,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tLe={kernelName:lg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=nn(n.shape,s.shape);return{a:()=>{const a=Nt(e,gt(s,"float32")),l=Hs(n.shape,o);return l.length>0?ke(Tt(a,l),n.shape):a},b:()=>{let a=me(e,gt(n,"float32"));const l=Hs(s.shape,o);l.length>0&&(a=ke(Tt(a,l),s.shape));const u=es(s);return ys(Nt(a,gt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nLe={kernelName:ny,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:s}=n,[o,r,i,a]=t,l=a==null?jt(1):a,u=Hs(r.shape,o.shape),c=[];if(r.rank===1){for(let y=0;y<o.shape.length-1;++y)c.push(o.shape[y]);c.push(1)}const d=Et(o,r),f=me(e,l),h=qz(st(i,jt(s))),p=me(me(me(h,h),h),jt(-.5));return{x:()=>r.rank===1?ke(me(me(e,mi(ke(h,[1,1,1,r.shape[0]]),c)),l),o.shape):ke(me(me(e,h),l),o.shape),mean:()=>{let y=me(me(h,jt(-1)),f);return r.rank===1&&(y=Tt(y,u)),ke(y,r.shape)},variance:()=>{let y=me(me(p,d),f);return r.rank===1&&(y=Tt(y,u)),ke(y,r.shape)},scale:()=>{const y=me(d,h);let w=me(e,y);return r.rank===1&&(w=Tt(w,u)),ke(w,r.shape)},offset:()=>{let y=e;return r.rank===1&&(y=Tt(y,u)),ke(y,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sLe={kernelName:sy,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[s,o]=t,{axis:r}=n,i=un(r,s.shape)[0];return{x:()=>{const l=s.shape,u=o.size,c=l.slice(0,i),d=c.length,f=l.slice(r,l.length).slice(1),h=f.length,p=tR(0,d),g=tR(d+1,d+1+h),m=nR([c,[u],f]),v=ke(e,m),b=ke(o,[u]),$=nR([[d],p,g]),y=An(v,$);let w=oV(y,b,s.shape[i]);const C=pf($);return w=An(w,C),w},indices:()=>o}}};function tR(e,t){const n=[];for(let s=e;s<t;++s)n.push(s);return n}function nR(e){const t=[];for(let n=0;n<e.length;++n)for(let s=0;s<e[n].length;++s)t.push(e[n][s]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oLe={kernelName:ug,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>kn(n),b:()=>kn(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rLe={kernelName:cg,gradFunc:e=>({x:()=>gt(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iLe={kernelName:dg,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aLe={kernelName:fg,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lLe={kernelName:hg,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uLe={kernelName:ry,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{alpha:o}=n,r=si(s,0);return{x:()=>sr(r,e,me(e,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cLe={kernelName:gg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nt(e,st(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe={kernelName:pg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nt(e,gt(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fLe={kernelName:MAe,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s]=t,{axis:o}=n;return{logits:()=>{const i=Xr(s);return Et(e,me(Tt(e,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(e,t,n,s=5,o=1,r=1,i=.5){const a={x:e,y:t,dy:n},l={depthRadius:s,bias:o,alpha:r,beta:i};return xe.runKernel(Hk,a,l)}const pLe=Ce({localResponseNormalizationBackprop_:hLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLe={kernelName:dy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{depthRadius:r,bias:i,alpha:a,beta:l}=n;return{x:()=>pLe(s,o,e,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RV(e,t,n,s){return t.rank<n.rank&&(t=ke(t,Is(t.shape,s))),e.rank<n.rank&&(e=ke(e,Is(e.shape,s))),{x:()=>me(e,gt(Qi(n,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sR={kernelName:fy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const s=n,{reductionIndices:o}=s,r=t[0],i=t[1],a=un(o,r.shape),l=RV(e,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mLe={kernelName:mg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>me(e,gt(ff(n,s),"float32")),b:()=>me(e,gt(Dz(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(e,t,n,s,o,r,i){const a=Z(e,"dy","maxPool3dGrad"),l=Z(t,"input","maxPool3dGrad"),u=Z(n,"output","maxPool3dGrad");let c=a,d=l,f=u,h=!1;l.rank===4&&(h=!0,c=ke(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=ke(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=ke(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),K(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),K(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),K(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),Wo("maxPool3dGrad",r,i);const p={dy:c,input:d,output:f},g={filterSize:s,strides:o,pad:r,dimRoundingMode:i},m=xe.runKernel(jk,p,g);return h?ke(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const bLe=Ce({maxPool3dGrad_:vLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yLe={kernelName:py,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>bLe(e,s,o,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wLe(e,t,n,s,o,r,i){const a=Z(e,"dy","maxPoolGrad"),l=Z(t,"input","maxPoolGrad"),u=Z(n,"output","maxPoolGrad");K(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),K(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),K(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Wo("maxPoolGrad",r,i);const c={dy:a,input:l,output:u},d={filterSize:s,strides:o,pad:r,dimRoundingMode:i};return xe.runKernel(Uk,c,d)}const $Le=Ce({maxPoolGrad_:wLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CLe={kernelName:hy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{filterSize:r,strides:i,pad:a}=n;return{x:()=>$Le(e,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xLe={kernelName:gy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{axis:o}=n,r=un(o,s.shape),a=Qs(s.shape,r)[1],l=Ue(a);return{x:()=>{const c=s.shape.slice();r.forEach(h=>{c[h]=1});const d=ke(e,c);return Nt(me(d,Pl(s.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kLe={kernelName:my,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const s=n,{axis:o}=s,[r,i]=t,a=un(o,r.shape),l=RV(e,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SLe={kernelName:vg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>me(e,gt(hf(n,s),"float32")),b:()=>me(e,gt(si(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ILe={kernelName:vy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const s=t[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>Gn(e,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TLe={kernelName:bg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=nn(n.shape,s.shape);return{a:()=>{const a=Hs(n.shape,o);return a.length>0?ke(Tt(e,a),n.shape):e},b:()=>{const a=me(e,ys(Ky(Nt(n,s)))),l=Hs(s.shape,o);return l.length>0?ke(Tt(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELe={kernelName:yg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=nn(n.shape,s.shape);return{a:()=>{const a=me(e,gt(s,"float32")),l=Hs(n.shape,o);return l.length>0?ke(Tt(a,l),n.shape):a},b:()=>{const a=me(e,gt(n,"float32")),l=Hs(s.shape,o);return l.length>0?ke(Tt(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Le={kernelName:by,gradFunc:e=>({x:()=>ys(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe={kernelName:$y,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>qs(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ALe={kernelName:wy,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DLe={kernelName:Cy,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:s}=n;return Ld(e,s).map(r=>()=>r)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oR={kernelName:xy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const s=t[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>Gn(e,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RLe={kernelName:wg,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,s,o]=t,r=n,i=s,a=nn(r.shape,i.shape);return{a:()=>{const c=gt(i,"float32");let d=me(e,me(c,Fd(r,Et(c,jt(1)))));const f=Hs(r.shape,a);return f.length>0&&(d=Tt(d,f)),ke(d,r.shape)},b:()=>{const c=si(r,0),d=sr(c,Zr(r),kn(r));let f=me(e,me(o,d));const h=Hs(i.shape,a);return h.length>0&&(f=Tt(f,h)),ke(f,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OLe={kernelName:ky,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,s]=t,o=si(n,0);return{x:()=>sr(o,e,me(e,s)),alpha:()=>{let r=sr(o,kn(e),me(e,n));const i=Hs(s.shape,e.shape);return i.length>0&&(r=Tt(r,i)),ke(r,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MLe={kernelName:ng,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=nn(n.shape,s.shape);return{a:()=>{const a=Nt(e,gt(s,"float32")),l=Hs(n.shape,o);return l.length>0?ke(Tt(a,l),n.shape):a},b:()=>{let a=me(e,gt(n,"float32"));const l=Hs(s.shape,o);l.length>0&&(a=ke(Tt(a,l),s.shape));const u=es(s);return ys(Nt(a,gt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PLe={kernelName:$g,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nt(e,ys(es(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FLe={kernelName:xg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,s=me(hf(n,6),Hg(n));return{x:()=>me(e,gt(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LLe={kernelName:Cg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(e,gt(Hg(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BLe={kernelName:Sy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ke(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zLe={kernelName:Ty,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[s]=t,o={dy:e,images:s};return{images:()=>xe.runKernel(Qk,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VLe={kernelName:Iy,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[s]=t,o={dy:e,images:s};return{images:()=>xe.runKernel(Jk,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WLe={kernelName:Ey,gradFunc:(e,t,n)=>{const{dims:s}=n,o=un(s,e.shape);return{x:()=>Xu(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HLe={kernelName:kg,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ULe={kernelName:Sg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ys(Nt(e,me(Fd(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jLe={kernelName:_y,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>gt(kn(n),"float32"),t:()=>me(e,gt(n,e.dtype)),e:()=>me(e,gt(OS(n),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GLe={kernelName:Ig,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=si(n,jt(0)),o=jt(Jy),r=jt(Qy),i=me(e,r),a=me(me(e,o),Xr(gt(n,"float32")));return sr(s,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KLe={kernelName:Ng,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(e,me(n,Et(jt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qLe={kernelName:_g,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YLe={kernelName:Tg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(ES(gt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe={kernelName:Eg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(Ez(gt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZLe={kernelName:Ny,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{begin:o,size:r}=n,i=s.shape,[a,l]=Hy(s,o,r),u=[];for(let c=0;c<e.rank;c++)u.push([a[c],i[c]-a[c]-l[c]]);return{x:()=>FS(e,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JLe={kernelName:Oy,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s]=t,{dim:o}=n,r=!0,i=me(e,s);return{logits:()=>Et(i,me(Tt(i,[o],r),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QLe={kernelName:Ag,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(e,df(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rR={kernelName:Dy,gradFunc:(e,t,n)=>{const{blockShape:s,paddings:o}=n;return{x:()=>IS(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iR={kernelName:Ry,gradFunc:(e,t,n)=>{const{axis:s}=n;return{x:()=>Co(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e={kernelName:Dg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nt(e,me(Do(gt(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t4e={kernelName:oS,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(e,me(gt(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e={kernelName:Rg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=jt(2);return{a:()=>me(e,me(o,Et(n,s))),b:()=>me(e,me(o,Et(s,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e={kernelName:Lg,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e={kernelName:Og,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=nn(n.shape,s.shape);return{a:()=>{let a=e;const l=Hs(n.shape,o);return l.length>0&&(a=Tt(a,l)),ke(a,n.shape)},b:()=>{let a=e;const l=Hs(s.shape,o);return l.length>0&&(a=Tt(a,l)),ke(ys(a),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4e={kernelName:Ay,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,o=s.shape.slice(),{axis:r}=n;un(r,s.shape).forEach(u=>{o[u]=1});const a=ke(e,o),l=me(a,Pl(s.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i4e={kernelName:Mg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Nt(e,es(ES(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a4e={kernelName:Pg,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(Et(jt(1),es(n)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4e={kernelName:Fg,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{reps:o}=n;return{x:()=>{let i=kn(s);if(s.rank===1)for(let a=0;a<o[0];++a)i=st(i,Gn(e,[a*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)i=st(i,Gn(e,[a*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)i=st(i,Gn(e,[a*s.shape[0],l*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)for(let c=0;c<o[3];++c)i=st(i,Gn(e,[a*s.shape[0],l*s.shape[1],u*s.shape[2],c*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e={kernelName:My,gradFunc:(e,t,n)=>{const s=n,{perm:o}=s,r=pf(o);return{x:()=>An(e,r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4e={kernelName:Py,gradFunc:(e,t,n)=>{const s=n,{axis:o}=s;return{value:()=>Zu(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e={kernelName:Fy,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>f4e(e,n)}}};function f4e(e,t){const n=Ml(t,kn(t)),s=NS(e,n);let o=ff(t,jt(0,"int32"));const r=s.rank-o.rank;for(let a=0;a<r;++a)o=Pr(o,a+1);o=Na(o,Pl(s.shape,"bool"));const i=kn(s);return sr(o,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e={kernelName:Ly,gradFunc:e=>({x:()=>kn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4e=[DV,pFe,gFe,mFe,vFe,bFe,yFe,wFe,$Fe,CFe,xFe,kFe,TFe,NFe,AFe,DFe,RFe,OFe,MFe,PFe,FFe,LFe,zFe,BFe,HFe,UFe,jFe,GFe,KFe,qFe,MLe,YFe,XFe,ZFe,JFe,QFe,tLe,eLe,nLe,sLe,oLe,rLe,iLe,aLe,lLe,uLe,cLe,dLe,fLe,gLe,sR,sR,mLe,yLe,CLe,xLe,kLe,SLe,ILe,TLe,ELe,_Le,NLe,ALe,DLe,oR,oR,RLe,OLe,PLe,FLe,LLe,BLe,zLe,VLe,WLe,HLe,ULe,jLe,GLe,KLe,qLe,YLe,XLe,ZLe,JLe,QLe,rR,rR,iR,iR,e4e,n4e,t4e,s4e,o4e,r4e,i4e,a4e,l4e,u4e,c4e,d4e,h4e];for(const e of p4e)LAe(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.abs=function(){return this.throwIfDisposed(),Gs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.acos=function(){return this.throwIfDisposed(),rRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.acosh=function(){return this.throwIfDisposed(),aRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.add=function(e){return this.throwIfDisposed(),st(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.all=function(e,t){return this.throwIfDisposed(),kz(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.any=function(e,t){return this.throwIfDisposed(),ax(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.argMax=function(e){return this.throwIfDisposed(),lp(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.argMin=function(e){return this.throwIfDisposed(),fRe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asScalar=function(){return this.throwIfDisposed(),K(this.size===1,()=>"The array must have only 1 element."),ke(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asType=function(e){return this.throwIfDisposed(),gt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as1D=function(){return this.throwIfDisposed(),ke(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as2D=function(e,t){return this.throwIfDisposed(),ke(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),ke(this,[e,t,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as4D=function(e,t,n,s){return this.throwIfDisposed(),ke(this,[e,t,n,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.as5D=function(e,t,n,s,o){return this.throwIfDisposed(),ke(this,[e,t,n,s,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asin=function(){return this.throwIfDisposed(),pRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.asinh=function(){return this.throwIfDisposed(),mRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atan=function(){return this.throwIfDisposed(),bRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atan2=function(e){return this.throwIfDisposed(),wRe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.atanh=function(){return this.throwIfDisposed(),CRe(this)};Ve().prototype.avgPool=function(e,t,n,s){return this.throwIfDisposed(),kS(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),IS(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.batchNorm=function(e,t,n,s,o){return this.throwIfDisposed(),Uy(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.broadcastTo=function(e){return this.throwIfDisposed(),tb(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cast=function(e){return this.throwIfDisposed(),gt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.ceil=function(){return this.throwIfDisposed(),qRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Sr(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof _s&&(e=[e]),Co([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv1d=function(e,t,n,s,o,r){return this.throwIfDisposed(),Sz(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv2dTranspose=function(e,t,n,s,o){return this.throwIfDisposed(),Iz(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.conv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),qu(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cos=function(){return this.throwIfDisposed(),ES(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cosh=function(){return this.throwIfDisposed(),Ez(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),_z(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),vOe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.depthwiseConv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),_S(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.dilation2d=function(e,t,n,s,o){return this.throwIfDisposed(),wOe(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.divNoNan=function(e){return this.throwIfDisposed(),SOe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.div=function(e){return this.throwIfDisposed(),Nt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.dot=function(e){return this.throwIfDisposed(),TOe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.elu=function(){return this.throwIfDisposed(),jy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.equal=function(e){return this.throwIfDisposed(),Qi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.erf=function(){return this.throwIfDisposed(),NOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.exp=function(){return this.throwIfDisposed(),Xr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.expandDims=function(e){return this.throwIfDisposed(),Pr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.expm1=function(){return this.throwIfDisposed(),OOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.fft=function(){return this.throwIfDisposed(),eV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.flatten=function(){return this.throwIfDisposed(),ke(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.floor=function(){return this.throwIfDisposed(),Ky(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.floorDiv=function(e){return this.throwIfDisposed(),xz(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.gather=function(e,t){return this.throwIfDisposed(),NS(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.greaterEqual=function(e){return this.throwIfDisposed(),ff(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.greater=function(e){return this.throwIfDisposed(),si(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.ifft=function(){return this.throwIfDisposed(),dx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.irfft=function(){return this.throwIfDisposed(),y3e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isFinite=function(){return this.throwIfDisposed(),HOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isInf=function(){return this.throwIfDisposed(),jOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.isNaN=function(){return this.throwIfDisposed(),KOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.leakyRelu=function(e){return this.throwIfDisposed(),AS(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.lessEqual=function(e){return this.throwIfDisposed(),hf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.less=function(e){return this.throwIfDisposed(),Dz(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.localResponseNormalization=function(e,t,n,s){return this.throwIfDisposed(),JOe(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSigmoid=function(){return this.throwIfDisposed(),rMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Rz(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Mz(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.log=function(){return this.throwIfDisposed(),Zr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.log1p=function(){return this.throwIfDisposed(),DS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Na(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalNot=function(){return this.throwIfDisposed(),OS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalOr=function(e){return this.throwIfDisposed(),Pz(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.logicalXor=function(e){return this.throwIfDisposed(),gMe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Dn(this,e,t,n)};Ve().prototype.maxPool=function(e,t,n,s){return this.throwIfDisposed(),MS(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.max=function(e,t){return this.throwIfDisposed(),Gi(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.maximum=function(e){return this.throwIfDisposed(),Ml(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mean=function(e,t){return this.throwIfDisposed(),$s(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.min=function(e,t){return this.throwIfDisposed(),ux(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.minimum=function(e){return this.throwIfDisposed(),qy(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),kMe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mod=function(e){return this.throwIfDisposed(),IMe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.mul=function(e){return this.throwIfDisposed(),me(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.neg=function(){return this.throwIfDisposed(),ys(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.norm=function(e,t,n){return this.throwIfDisposed(),HS(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.notEqual=function(e){return this.throwIfDisposed(),up(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),fz(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.onesLike=function(){return this.throwIfDisposed(),Jr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.pad=function(e,t){return this.throwIfDisposed(),FS(this,e,t)};Ve().prototype.pool=function(e,t,n,s,o,r){return this.throwIfDisposed(),PMe(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.pow=function(e){return this.throwIfDisposed(),Fd(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.prelu=function(e){return this.throwIfDisposed(),BS(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.prod=function(e,t){return this.throwIfDisposed(),zMe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reciprocal=function(){return this.throwIfDisposed(),QMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.relu=function(){return this.throwIfDisposed(),Fa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.relu6=function(){return this.throwIfDisposed(),Gz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reshapeAs=function(e){return this.throwIfDisposed(),ke(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reshape=function(e){return this.throwIfDisposed(),ke(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),cV(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),dV(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.reverse=function(e){return this.throwIfDisposed(),Xu(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.rfft=function(){return this.throwIfDisposed(),tV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.round=function(){return this.throwIfDisposed(),Kz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.rsqrt=function(){return this.throwIfDisposed(),qz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.selu=function(){return this.throwIfDisposed(),Yz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.separableConv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),Xz(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sigmoid=function(){return this.throwIfDisposed(),df(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sign=function(){return this.throwIfDisposed(),l3e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sin=function(){return this.throwIfDisposed(),Zz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sinh=function(){return this.throwIfDisposed(),Jz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.slice=function(e,t){return this.throwIfDisposed(),Gn(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.softmax=function(e){return this.throwIfDisposed(),WS(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.softplus=function(){return this.throwIfDisposed(),Vg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),LS(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.split=function(e,t){return this.throwIfDisposed(),$r(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sqrt=function(){return this.throwIfDisposed(),Do(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.square=function(){return this.throwIfDisposed(),es(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.squaredDifference=function(e){return this.throwIfDisposed(),nV(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.squeeze=function(e){return this.throwIfDisposed(),Wg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof _s?[this,e]:[this,...e];return Zu(n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.step=function(e){return this.throwIfDisposed(),Hg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.stridedSlice=function(e,t,n,s,o,r,i,a){return this.throwIfDisposed(),E3e(this,e,t,n,s,o,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sub=function(e){return this.throwIfDisposed(),Et(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.sum=function(e,t){return this.throwIfDisposed(),Tt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tan=function(){return this.throwIfDisposed(),N3e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tanh=function(){return this.throwIfDisposed(),SS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.tile=function(e){return this.throwIfDisposed(),mi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toBool=function(){return this.throwIfDisposed(),gt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toFloat=function(){return this.throwIfDisposed(),gt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.toInt=function(){return this.throwIfDisposed(),gt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.topk=function(e,t){return this.throwIfDisposed(),D3e(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.transpose=function(e){return this.throwIfDisposed(),An(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unique=function(e){return this.throwIfDisposed(),M3e(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),oV(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.unstack=function(e){return this.throwIfDisposed(),Ld(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.where=function(e,t){return this.throwIfDisposed(),sr(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ve().prototype.zerosLike=function(){return this.throwIfDisposed(),kn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let t$;function Bs(){return t$==null&&(t$=JDe().epsilon()),t$}function Ii(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Li extends Error{constructor(t){super(t);Object.setPrototypeOf(this,Li.prototype)}}class Hr extends Error{constructor(t){super(t);Object.setPrototypeOf(this,Hr.prototype)}}class ye extends Error{constructor(t){super(t);Object.setPrototypeOf(this,ye.prototype)}}class Qt extends Error{constructor(t){super(t);Object.setPrototypeOf(this,Qt.prototype)}}class kI extends Error{constructor(t){super(t);Object.setPrototypeOf(this,kI.prototype)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qu(e,t){if(Array.isArray(e)){let n=[];for(let s=0;s<t;s++)n=n.concat(e);return n}else{const n=new Array(t);return n.fill(e),n}}function Bi(e,t){if(!e)throw new kI(t)}function aR(e,t){let n=0;for(const s of e)s===t&&n++;return n}function Lo(e){return e.length===1?e[0]:e}function rs(e){return Array.isArray(e)?e:[e]}function ha(e){const n=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function vu(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}let Nr={};function SI(e){if(e==null)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function hx(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>hx(t));else{const t=Object.keys(e);for(const n of t){const s=e[n];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?e[n]=s.value:hx(s))}}}function Kg(e,t={},n={},s="object",o=!1){if(typeof e=="string"){const r=e;let i;if(r in n)i=n[r];else if(r in Nr)i=Nr[r];else if(i=t[r],i==null)throw new ye(`Unknown ${s}: ${e}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const r=e;if(r.className==null||r.config==null)throw new ye(`${s}: Improper config format: ${JSON.stringify(r)}.
'className' and 'config' must set.`);const i=r.className;let a,l;if(i in n?[a,l]=n[i]:i in Nr?[a,l]=Nr.className:i in t&&([a,l]=t[i]),a==null)throw new ye(`Unknown ${s}: ${i}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(Nr))u[h]=Nr[h];for(const h of Object.keys(n))u[h]=n[h];const c=r.config;c.customObjects=u;const d=Object.assign({},Nr);for(const h of Object.keys(n))Nr[h]=n[h];hx(r.config);const f=l(a,r.config,n,o);return Nr=Object.assign({},d),f}else{const u=Object.assign({},Nr);for(const d of Object.keys(n))Nr[d]=n[d];const c=new a(r.config);return Nr=Object.assign({},u),c}}}function g4e(e,t){return e<t?-1:e>t?1:0}function Xm(e,t){return-1*g4e(e,t)}function dl(e){if(e==null)return e;const t=[];for(const n of e)t.indexOf(n)===-1&&t.push(n);return t}function m4e(e){if(e==null)throw new ye(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function mc(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new ye(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function II(e,t,n=0,s=1/0){return Bi(n>=0),Bi(s>=n),Array.isArray(e)&&e.length>=n&&e.length<=s&&e.every(o=>typeof o===t)}function Ys(e,t){Array.isArray(e)?(K(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((n,s)=>Ys(n,`element ${s+1} of ${t}`))):K(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${OV(e)}.`)}function OV(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>OV(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function v4e(e,t,n){let s=n!=null?n():Fo(),o;return(...i)=>{const a=n!=null?n():Fo();return a-s<t||(s=a,o=e(...i)),o}}function MV(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TI(e,t){return Me(()=>Do(Tt(me(e,e),t,!0)))}class qg extends cf{getConfig(){return{}}}class PV extends qg{constructor(t){super();this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Me(()=>{const n=TI(t,this.axis),s=Sr(n,0,this.maxValue);return me(t,Nt(s,st(Bs(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}PV.className="MaxNorm";et(PV);class FV extends qg{constructor(t){super();this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Me(()=>Nt(t,st(Bs(),TI(t,this.axis))))}getConfig(){return{axis:this.axis}}}FV.className="UnitNorm";et(FV);class LV extends qg{apply(t){return Fa(t)}}LV.className="NonNeg";et(LV);class BV extends qg{constructor(t){super();this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Me(()=>{const n=TI(t,this.axis),s=st(me(this.rate,Sr(n,this.minValue,this.maxValue)),me(1-this.rate,n));return me(t,Nt(s,st(Bs(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}BV.className="MinMaxNorm";et(BV);const lR={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Vs(e){return SI(e)}function uR(e,t={}){return Kg(e,Lr.getMap().classNameMap,t,"constraint")}function Ws(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in lR?lR[e]:e,config:{}};return uR(n)}else return e instanceof qg?e:uR(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const b4e=["channelsFirst","channelsLast"],y4e=["nearest","bilinear"],w4e=["valid","same","causal"],$4e=["max","avg"],C4e=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Hc=new Map;function Es(e){mc(b4e,"DataFormat",e)}function x4e(e){mc(y4e,"InterpolationFormat",e)}function Tr(e){mc(w4e,"PaddingMode",e)}function zV(e){mc($4e,"PoolMode",e)}const Eh=[],cR="/";function Pu(e,t){Eh.push(e);try{const n=t();return Eh.pop(),n}catch(n){throw Eh.pop(),n}}function k4e(){return Eh.length===0?"":Eh.join(cR)+cR}function VV(e){if(!HV(e))throw new Error("Not a valid tensor name: '"+e+"'");return k4e()+e}function WV(e){if(!HV(e))throw new Error("Not a valid tensor name: '"+e+"'");Hc.has(e)||Hc.set(e,0);const t=Hc.get(e);if(Hc.set(e,Hc.get(e)+1),t>0){const n=`${e}_${t}`;return Hc.set(n,1),n}else return e}const S4e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function HV(e){return!!e.match(S4e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function I4e(e){return e===parseInt(e.toString(),10)}function fl(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let s=1;for(let o=t;o<n;++o)s*=e[o];return s}function Bd(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const s=e[n];s<t&&(t=s)}return t}function vl(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const s=e[n];s>t&&(t=s)}return t}function Ti(e,t){if(t<e)throw new ye(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let s=e;s<t;++s)n.push(s);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e1(e,t){return gt(e,t)}function Yg(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),ke(e,n)}function T4e(e,t){return Me(()=>{if(e.shape.length!==2)throw new ye(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const n=Yg(e,1);return px(n,[1,t,1])})}function E4e(e){const t=[fl(e.shape)];return ke(e,t)}function _4e(e){if(e.rank<=1)throw new ye(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],fl(e.shape,1)];return ke(e,t)}function Fu(e,t,n){return Me(()=>{switch(e.rank){case 1:return zS(e,t,n);case 2:return Qz(e,[t,0],[n,e.shape[1]]);case 3:return VS(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Mb(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Gn(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Gn(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new ye(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function n$(e,t,n){return Me(()=>{switch(e.rank){case 1:return zS(e,t,n);case 2:return Qz(e,[0,t],[e.shape[0],n]);case 3:return VS(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Mb(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new ye(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function Zm(e,t,n,s){return Me(()=>{switch(e.rank){case 1:return zS(e,t,n);case 2:switch(s){case 1:return Fu(e,t,n);case 2:return n$(e,t,n);default:throw new ye(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return Fu(e,t,n);case 2:return VS(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return n$(e,t,n);default:throw new ye(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return Fu(e,t,n);case 2:return Mb(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Mb(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return n$(e,t,n);default:throw new ye(`The axis is not within the rank of the tensor ${s}`)}default:throw new ye(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function EI(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),Co(e,t)}function dR(e,t){switch(e.rank){case 1:return ZRe([e,t]);case 2:return QRe([e,t],0);case 3:return tOe([e,t],0);case 4:return sOe([e,t],0);default:throw new ye(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function px(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new ye(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return mi(e,t)}function t1(e,t=0,n=1,s,o){return YMe(e,t,n,s,o)}function qi(e,t,n,s){if(e.rank<2||t.rank<2)throw new Qt(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const o=e.shape.slice(-1)[0],r=t.shape.slice(-2)[0];if(o!==r)throw new Qt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return XD({a:e,b:t,transposeA:!1,transposeB:!1,bias:s?gx(e.rank,s,Ii()):null,activation:n});{const o=e.shape.slice(),r=o.pop();e=ke(e,[-1,r]);const i=t.shape.slice(),a=i.pop(),l=i.pop(),u=[...i,a],c=Array.from({length:t.rank},(p,g)=>g===0?t.rank-2:g<=t.rank-2?g-1:g);t=ke(An(t,c),[l,-1]);const d=[...o,...u];return ke(XD({a:e,b:t,transposeA:!1,transposeB:!1,bias:s?gx(e.rank,s,Ii()):null,activation:n}),d)}}function UV(e,t,n){return Me(()=>(Array.isArray(t)?t=Jo(t,"int32"):t=gt(t,"int32"),NS(e,t,n)))}function Xg(e){return me(e,e)}function gx(e,t,n){const s=t.shape;if(t.rank!==1&&t.rank!==e)throw new ye(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(n==="channelsFirst")return s.length===1?ke(t,[1,s[0],1,1,1]):ke(t,[1,s[3],s[0],s[1],s[2]]);if(n==="channelsLast")return s.length===1?ke(t,[1,1,1,1,s[0]]):ke(t,[1].concat(s))}else if(e===4){if(n==="channelsFirst")return s.length===1?ke(t,[1,s[0],1,1]):ke(t,[1,s[2],s[0],s[1]]);if(n==="channelsLast")return s.length===1?ke(t,[1,1,1,s[0]]):ke(t,[1].concat(s))}else if(e===3){if(n==="channelsFirst")return s.length===1?ke(t,[1,s[0],1]):ke(t,[1,s[1],s[0]]);if(n==="channelsLast")return s.length===1?ke(t,[1,1,s[0]]):ke(t,[1].concat(s))}else if(e<3)return t;throw new ye(`Unsupported input rank by biasAdd: ${t.rank}`)}function Oi(e,t,n){return Me(()=>(n==null&&(n=Ii()),Es(n),st(e,gx(e.rank,t,n))))}function N4e(e,t=1){if(t!==1)throw new Qt(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return jy(e)}function A4e(e){return Me(()=>Nt(e,st(Gs(e),1)))}function jV(e,t,n,s){return Me(()=>W3e(e,t,n,s))}function D4e(e){return Me(()=>{const t=st(.5,me(.2,e));return Sr(t,0,1)})}function Zg(e,t,n=!1){return n?e():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const R4e=["fanIn","fanOut","fanAvg"],O4e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function M4e(e){mc(R4e,"FanMode",e)}function P4e(e){mc(O4e,"Distribution",e)}class oi extends cf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class GV extends oi{apply(t,n){return qs(t,n)}}GV.className="Zeros";et(GV);class _I extends oi{apply(t,n){return Pl(t,n)}}_I.className="Ones";et(_I);class KV extends oi{constructor(t){super();if(typeof t!="object")throw new ye(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new ye(`config must have value set but got ${t}`);this.value=t.value}apply(t,n){return Me(()=>me(jt(this.value),Pl(t,n)))}getConfig(){return{value:this.value}}}KV.className="Constant";et(KV);class qV extends oi{constructor(t){super();this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,n){return Yy(t,this.minval,this.maxval,n)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}qV.className="RandomUniform";et(qV);class YV extends oi{constructor(t){super();this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qt(`randomNormal does not support dType ${n}.`);return t1(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}YV.className="RandomNormal";et(YV);class XV extends oi{constructor(t){super();this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qt(`truncatedNormal does not support dType ${n}.`);return sV(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}XV.className="TruncatedNormal";et(XV);class ZV extends oi{constructor(t){super();this.gain=t.gain!=null?t.gain:1}apply(t,n){return Me(()=>{if(t.length!==2||t[0]!==t[1])throw new ye("Identity matrix initializer can only be used for 2D square matrices.");return me(this.gain,Nz(t[0]))})}getConfig(){return{gain:this.gain}}}ZV.className="Identity";et(ZV);function F4e(e,t="channelsLast"){let n,s;if(Es(t),e.length===2)n=e[0],s=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){const o=fl(e,2);n=e[1]*o,s=e[0]*o}else if(t==="channelsLast"){const o=fl(e,0,e.length-2);n=e[e.length-2]*o,s=e[e.length-1]*o}}else{const o=fl(e);n=Math.sqrt(o),s=Math.sqrt(o)}return[n,s]}class or extends oi{constructor(t){super();if(t.scale<0)throw new ye(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,M4e(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,P4e(this.distribution),this.seed=t.seed}apply(t,n){const s=F4e(t),o=s[0],r=s[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,r):i/=Math.max(1,(o+r)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qt(`${this.getClassName()} does not support dType ${n}.`);return sV(t,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return Yy(t,-a,a,n)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}or.className="VarianceScaling";et(or);class NI extends or{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return or.className}}NI.className="GlorotUniform";et(NI);class AI extends or{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return or.className}}AI.className="GlorotNormal";et(AI);class DI extends or{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return or.className}}DI.className="HeNormal";et(DI);class RI extends or{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return or.className}}RI.className="HeUniform";et(RI);class OI extends or{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return or.className}}OI.className="LeCunNormal";et(OI);class MI extends or{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return or.className}}MI.className="LeCunNormal";et(MI);class JV extends oi{constructor(t){super();if(this.DEFAULT_GAIN=1,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,this.seed!=null)throw new Qt("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,n){return Me(()=>{if(t.length<2)throw new Qt("Shape must be at least 2D.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const s=t[0]>t[1]?[t[1],t[0]]:t,o=t1(s,0,1,"float32");let r=aFe.gramSchmidt(o);return t[0]>t[1]&&(r=An(r)),me(this.gain,r)})}getConfig(){return{gain:this.gain,seed:this.seed}}}JV.className="Orthogonal";et(JV);const fR={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function hR(e,t={}){return Kg(e,Lr.getMap().classNameMap,t,"initializer")}function vs(e){return SI(e)}function hs(e){if(typeof e=="string"){const t=e in fR?fR[e]:e;if(t==="GlorotNormal")return new AI;if(t==="GlorotUniform")return new NI;if(t==="HeNormal")return new DI;if(t==="HeUniform")return new RI;if(t==="LeCunNormal")return new OI;if(t==="LeCunUniform")return new MI;{const n={};return n.className=t,n.config={},hR(n)}}else return e instanceof oi?e:hR(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let L4e=0;function QV(){return L4e++}const Jm={};function n1(e=""){return e in Jm||(Jm[e]=0),Jm[e]+=1,e+Jm[e].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mx(e){return Array.isArray(e)&&Array.isArray(e[0])}function Pb(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function sn(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new ye(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function Wn(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new ye(`Expected exactly 1 Shape; got ${e.length}`)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fb(e){let t=0;for(const n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((s,o)=>s*o);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const pR="Variable";class B4e{constructor(t,n="float32",s=pR,o=!0,r=null){this.dtype=n==null?"float32":n,this.shape=t.shape,this.id=QV(),s=s==null?pR:s,this.originalName=VV(s),this.name=WV(this.originalName),this.trainable_=o,this.constraint=r,this.val=L3e(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),z4e(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function z4e(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function vx(e){return e.map(t=>t.read())}function PI(e){e.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zs{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Hi{constructor(t,n,s,o,r,i,a){this.dtype=t,this.shape=n,this.sourceLayer=s,this.inputs=o,this.callArgs=r,this.outputTensorIndex=a,this.id=QV(),i!=null&&(this.originalName=VV(i),this.name=WV(this.originalName)),this.rank=n.length}}let V4e=0;class s1{constructor(t,n){this.callArgs=n,this.id=V4e++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const s of t.inboundLayers)s!=null&&s.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const n of this.inboundLayers)n!=null?t.push(n.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let W4e=0;class Tn extends cf{constructor(t={}){super();this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=W4e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const s=this.getClassName();n=ha(s)+"_"+n1(s)}if(this.name=n,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let s;if(t.batchInputShape!=null)s=t.batchInputShape;else if(t.inputShape!=null){let r=null;t.batchSize!=null&&(r=t.batchSize),s=[r].concat(t.inputShape)}this.batchInputShape=s;let o=t.dtype;o==null&&(o=t.inputDType),o==null&&(o="float32"),this.dtype=o}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,n){return t.name+"_ib-"+n.toString()}getNodeAtIndex(t,n){if(this.inboundNodes.length===0)throw new Hr(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=t)throw new ye(`Asked to get ${n} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return Lo(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return Lo(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Li(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Li(`Layer ${this.name} is not connected, no input to return.`);return Lo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Li(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Li(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Lo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(n=>n.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=rs(t),this.inputSpec==null||this.inputSpec.length===0)return;const n=rs(this.inputSpec);if(t.length!==n.length)throw new ye(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${t}`);for(let s=0;s<t.length;s++){const o=t[s],r=n[s];if(r==null)continue;const i=o.rank;if(r.ndim!=null&&i!==r.ndim)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${r.ndim}, found ndim=${i}`);if(r.maxNDim!=null&&i>r.maxNDim)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${r.maxNDim}, found ndim=${i}`);if(r.minNDim!=null&&i<r.minNDim)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${r.minNDim}, found ndim=${i}.`);if(r.dtype!=null&&o.dtype!==r.dtype)throw new ye(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${r.dtype}, found dtype=${o.dtype}.`);if(r.axes){const a=o.shape;for(const l in r.axes){const u=Number(l),c=r.axes[l],d=u>=0?a[u]:a[a.length+u];if(c!=null&&[c,null].indexOf(d)===-1)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${a}.`)}}if(r.shape!=null)for(let a=0;a<r.shape.length;++a){const l=r.shape[a],u=o.shape[a];if(l!=null&&u!=null&&l!==u)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected shape=${r.shape}, found shape=${o.shape}.`)}}}call(t,n){return t}invokeCallHook(t,n){this._callHook!=null&&this._callHook(t,n)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,n){n=n||{},this.assertNotDisposed();const s=rs(t);let o=!0;for(const i of s)if(!(i instanceof Hi)){o=!1;break}let r=!0;for(const i of s)if(i instanceof Hi){r=!1;break}if(o===r)throw new ye("Arguments to apply() must be all SymbolicTensors or all Tensors");return Pu(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const i=[];for(const a of rs(t))i.push(a.shape);this.build(Lo(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(t),r){let i=this.call(t,n);const a=rs(i),l=[];for(let u of a)s.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(i=Lo(l),this.activityRegularizer!=null)throw new Qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=H4e(t),a=this.computeOutputShape(i);let l;const u=U4e(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,d)=>new Hi(u,c,this,rs(t),n,this.name,d)):l=new Hi(u,a,this,rs(t),n,this.name),this.addInboundNode(t,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new Qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((s,o)=>{s!=null&&t[o]!=null&&t[o]!==s&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Li(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const n of this.inboundNodes){const s=JSON.stringify(n.outputShapes);t.indexOf(s)===-1&&t.push(s)}if(t.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Li(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Hr(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Fb(this.weights)}build(t){this.built=!0}getWeights(t=!1){return vx(t?this.trainableWeights:this.weights)}setWeights(t){Me(()=>{const n=this.weights;if(n.length!==t.length)throw new ye(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${n.length} weights. Provided weights: ${t}...`);if(n.length===0)return;const s=[],o=vx(n);for(let r=0;r<o.length;++r){const i=o[r],a=n[r],l=t[r];if(!Mn(i.shape,l.shape))throw new ye(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);s.push([a,l])}PI(s)})}addWeight(t,n,s,o,r,i,a,l){if(this._addedWeightNames.indexOf(t)!==-1)throw new ye(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():hs("zeros"));const u=o.apply(n,s),c=new B4e(u,s,t,i,a);return u.dispose(),r!=null&&this.addLoss(()=>r.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=rs(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}addInboundNode(t,n,s,o,r,i,a=null){const l=rs(t);n=rs(n),s=rs(s),o=rs(o),r=Pb(r),i=Pb(i);const u=[],c=[],d=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex);new s1({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:s,outputMasks:o,inputShapes:r,outputShapes:i},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function H4e(e){e=rs(e);const t=[];for(const n of e)t.push(n.shape);return Lo(t)}function U4e(e){return"float32"}function e6(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{const s=t.inboundNodes[n];if(s.inboundLayers.length===0)return s.inputTensors;{const o=[];for(let r=0;r<s.inboundLayers.length;r++){const i=s.inputTensors[r],a=s.inboundLayers[r],l=s.nodeIndices[r],u=e6(i,a,l);for(const c of u)o.indexOf(c)===-1&&o.push(c)}return o}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Jg extends Tn{constructor(t){super({dtype:t.dtype,name:t.name!=null?t.name:n1("input").toString()});if(t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new ye("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=t.batchInputShape;if(n==null){if(t.inputShape==null)throw new ye("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new ye("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=t.dtype||"float32";this.batchInputShape=n,this.dtype=s,this.inputSpec=[{shape:n}];const o=new Hi(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new s1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(t,n){throw new ye(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Jg.className="InputLayer";et(Jg);function j4e(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new ye("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new Jg({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function eu(e){if(e==null)return;const t=[],n=[],s=[];for(const o in e){const r=e[o];if(typeof r!="number"){const i=r;t.push(i.data()),n.push(o),s.push(i)}}if(t.length>0){const o=await Promise.all(t);for(let r=0;r<o.length;++r)e[n[r]]=o[r][0];hn(s)}}function t6(e){if(e!=null)for(const t in e){const n=e[t];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var gR;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(gR||(gR={}));const G4e=125;class cp{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class K4e{constructor(t,n=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochBegin(t,n)}async onEpochEnd(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochEnd(t,n)}async onBatchBegin(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchBegin(t,n)}async onBatchEnd(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchEnd(t,n)}async onTrainBegin(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class q4e extends cp{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){n==null&&(n={});const s=n.size==null?0:n.size;this.seen+=s;for(const o in n){const r=n[o];if(typeof r=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+r*s;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=Me(()=>st(this.totals[o],me(r,s)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(t,n){if(n!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?n[s]=this.totals[s]/this.seen:Me(()=>{const o=me(Nt(1,this.seen),this.totals[s]);n[s]=o,this.totals[s].dispose(),Ji(n[s])}))}}class Y4e extends cp{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){n==null&&(n={}),this.epoch.push(t);for(const s in n)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(n[s])}async syncData(){const t=[],n=[],s=[];for(const r in this.history){const i=this.history[r];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];t.push(l.data()),n.push(r),s.push(a)}}const o=await Promise.all(t);for(let r=0;r<o.length;++r)this.history[n[r]][s[r]].dispose(),this.history[n[r]][s[r]]=o[r][0]}}class X4e extends cp{constructor(t,n){super();if(this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||uFe,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=G4e),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");HC(this.yieldEvery)&&(this.maybeWait=v4e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,s){const o=[];this.yield!=null&&(await eu(s),o.push(this.yield(t,n,s))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(t,n){this.currentEpoch=t,this.epochBegin!=null&&(await eu(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const s=[];this.epochEnd!=null&&(await eu(n),s.push(this.epochEnd(t,n))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(t,n){this.batchBegin!=null&&(await eu(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const s=[];this.batchEnd!=null&&(await eu(n),s.push(this.batchEnd(t,n))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):HC(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(s)}async onTrainBegin(t){this.trainBegin!=null&&(await eu(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await eu(t),await this.trainEnd(t))}}function n6(e,t){return e==null&&(e={}),e instanceof cp?[e]:Array.isArray(e)&&e[0]instanceof cp?e:rs(e).map(s=>new X4e(s,t))}class Rr{constructor(){}static registerCallbackConstructor(t,n){K(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),Rr.checkForDuplicate(n),Rr.constructors[t]==null&&(Rr.constructors[t]=[]),Rr.constructors[t].push(n)}static checkForDuplicate(t){for(const n in Rr.constructors)Rr.constructors[+n].forEach(o=>{if(o===t)throw new ye("Duplicate callback constructor.")})}static clear(){Rr.constructors={}}static createCallbacks(t){const n=[];for(const s in Rr.constructors){const o=+s;t>=o&&n.push(...Rr.constructors[o])}return n.map(s=>new s)}}Rr.constructors={};function s6(e,t,n,s,o,r,i,a,l){const u=new Y4e,c=[new q4e,...Rr.createCallbacks(t)];e!=null&&c.push(...e),c.push(u);const d=new K4e(c);return d.setParams({epochs:n,initialEpoch:s,samples:o,steps:r,batchSize:i,verbose:t,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xa(e,t={},n=!1){return Kg(e,Lr.getMap().classNameMap,t,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lb(e,t){return Me(()=>{e.dtype!=="float32"&&(e=gt(e,"float32"));const n=Tt(Xg(e),t,!0),s=Gy(n.shape,Bs()),o=Do(Ml(n,s));return Nt(e,o)})}function o1(e,t){return Me(()=>$s(Xg(Et(t,e)),-1))}function FI(e,t){return Me(()=>$s(Gs(Et(t,e)),-1))}function LI(e,t){return Me(()=>{const n=Et(e,t),s=Sr(Gs(e),Bs(),Number.MAX_VALUE),o=Gs(Nt(n,s));return me(100,$s(o,-1))})}function Z4e(e,t){return Me(()=>{const n=Sr(t,Bs(),Number.MAX_VALUE),s=Zr(st(1,n)),o=Sr(e,Bs(),Number.MAX_VALUE),r=Zr(st(1,o));return $s(Xg(Et(s,r)),-1)})}function J4e(e,t){return Me(()=>{const n=Ml(0,Et(1,me(e,t)));return $s(Xg(n),-1)})}function Q4e(e,t){return Me(()=>{const n=Ml(0,Et(1,me(e,t)));return $s(n,-1)})}function eBe(e,t){return Me(()=>{const n=Tt(me(e,t),-1),s=Gi(me(Et(1,e),t),-1);return Ml(0,st(1,Et(s,n)))})}function tBe(e,t){return Me(()=>{const n=Math.log(2),s=Et(t,e),o=Et(st(s,Vg(me(-2,s))),n);return $s(o,-1)})}function dp(e,t,n=!1){return Me(()=>{if(n)t=WS(t);else{const s=Tt(t,t.shape.length-1,!0);t=Nt(t,s)}return t=Sr(t,Bs(),1-Bs()),ys(Tt(me(gt(e,"float32"),Zr(t)),t.shape.length-1))})}function Bb(e,t,n=!1){return Me(()=>{const s=gt(Ky(E4e(e)),"int32");t=Sr(t,Bs(),1-Bs());const o=t.shape,r=ke(fz(s,o[o.length-1]),o);return dp(r,t,n)})}function nBe(e,t){if(!Mn(e.shape,t.shape))throw new ye(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return Me(()=>{const n=Fa(t),s=ys(Gs(t));return st(Et(n,me(t,e)),DS(Xr(s)))})}function r1(e,t){return Me(()=>{let n;return n=Sr(t,Bs(),1-Bs()),n=Zr(Nt(n,Et(1,n))),$s(nBe(e,n),-1)})}function sBe(e,t){return Me(()=>{const n=Sr(e,Bs(),1),s=Sr(t,Bs(),1);return Tt(me(e,Zr(Nt(n,s))),-1)})}function oBe(e,t){return Me(()=>{const n=Zr(st(Bs(),t));return $s(Et(t,me(e,n)),-1)})}function o6(e,t){return Me(()=>{const n=Lb(e,-1),s=Lb(t,-1),o=me(n,s);return ys(Tt(o,-1))})}const zb={meanSquaredError:o1,meanAbsoluteError:FI,meanAbsolutePercentageError:LI,meanSquaredLogarithmicError:Z4e,squaredHinge:J4e,hinge:Q4e,categoricalHinge:eBe,logcosh:tBe,categoricalCrossentropy:dp,sparseCategoricalCrossentropy:Bb,binaryCrossentropy:r1,kullbackLeiblerDivergence:sBe,poisson:oBe,cosineProximity:o6};function s$(e){if(typeof e=="string"){if(e in zb)return zb[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ye(t)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r6(e,t){return Me(()=>{const n=me(.5,Jr(t)),s=e1(si(t,n),e.dtype);return $s(Qi(e,s),-1)})}function i6(e,t){return Me(()=>e1(Qi(lp(e,-1),lp(t,-1)),"float32"))}function rBe(e,t){return Me(()=>gt(Tt(Na(Qi(e,1),Qi(t,1))),"float32"))}function iBe(e,t){return Me(()=>gt(Tt(Na(Qi(e,0),Qi(t,1))),"float32"))}function aBe(e,t){return Me(()=>{const n=rBe(e,t),s=iBe(e,t),o=st(n,s);return gt(sr(si(o,0),Nt(n,o),0),"float32")})}function lBe(e,t){return r1(e,t)}function uBe(e,t){return e.rank===t.rank&&(e=Wg(e,[e.rank-1])),t=lp(t,-1),t.dtype!==e.dtype&&(t=gt(t,e.dtype)),gt(Qi(e,t),"float32")}const cBe=o1,dBe=o1,fBe=FI,hBe=FI,pBe=LI,gBe=LI,a6=dp,mBe=o6,l6=Bb,Vb={binaryAccuracy:r6,categoricalAccuracy:i6,precision:aBe,categoricalCrossentropy:a6,sparseCategoricalCrossentropy:l6,mse:cBe,MSE:dBe,mae:fBe,MAE:hBe,mape:pBe,MAPE:gBe,cosine:mBe};function vBe(e){if(typeof e=="string"&&e in Vb)return Vb[e];if(typeof e!="string"&&e!=null)return e;throw new ye(`Unknown metric ${e}`)}function Qm(e){if(Bi(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(const n of Object.keys(zb))if(zb[n]===e){t=n;break}if(t!==void 0)return t;for(const n of Object.keys(Vb))if(Vb[n]===e){t=n;break}return t!==void 0?t:e.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bBe(e){const t={Adagrad:()=>Wc.adagrad(.01),Adadelta:()=>Wc.adadelta(1,.95,Bs()),Adam:()=>Wc.adam(.001,.9,.999,Bs()),Adamax:()=>Wc.adamax(.002,.9,.999,Bs(),0),RMSProp:()=>Wc.rmsprop(.001,.9,0,Bs()),SGD:()=>Wc.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new ye(`Unknown Optimizer ${e}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const mR=1*1024*1024;function vR(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!bx(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const s=JSON.stringify(e);s.length>mR&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${mR}.`)}}function bx(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t)if(typeof n!="string"||!bx(e[n]))return!1;return!0}else if(Array.isArray(e)){for(const t of e)if(!bx(t))return!1;return!0}else return!1;else{const t=typeof e;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yBe(e,t,n,s=console.log){const o=$Be(e),r=["Layer (type)","Output shape","Param #"];o?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(t*c)));let i;if(!o){r.push("Receives inputs"),i=[];for(const c in e.nodesByDepth)i.push(...e.nodesByDepth[c])}s("_".repeat(t)),Wb(r,n,s),s("=".repeat(t));const a=e.layers;for(let c=0;c<a.length;++c)o?CBe(a[c],n,s):xBe(a[c],n,i,s),s((c===a.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=wBe(e),u=Fb(e.nonTrainableWeights);s(`Total params: ${l+u}`),s(`Trainable params: ${l}`),s(`Non-trainable params: ${u}`),s("_".repeat(t))}function wBe(e){let t;return e.collectedTrainableWeights!=null?t=Fb(e.collectedTrainableWeights):t=Fb(e.trainableWeights),t}function $Be(e){let t=!0;const n=[],s=[];for(const o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){t=!1;break}s.push(...o)}if(t)for(const o of e.layers){let r=!1;for(const i of o.inboundNodes)if(s.indexOf(i)!==-1)if(r){t=!1;break}else r=!0;if(!t)break}return t}function Wb(e,t,n=console.log){let s="";for(let o=0;o<e.length;++o)o>0&&(s=s.slice(0,s.length-1)+" "),s+=e[o],s=s.slice(0,t[o]),s+=" ".repeat(t[o]-s.length);n(s)}function CBe(e,t,n){let s;try{s=JSON.stringify(e.outputShape)}catch{s="multiple"}const o=e.name,r=e.getClassName(),i=[`${o} (${r})`,s,e.countParams().toString()];Wb(i,t,n)}function xBe(e,t,n,s){let o;try{o=JSON.stringify(e.outputShape)}catch{o="multiple"}const r=[];for(const c of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(c)===-1))for(let d=0;d<c.inboundLayers.length;++d){const f=c.inboundLayers[d].name,h=c.nodeIndices[d],p=c.tensorIndices[d];r.push(`${f}[${h}][${p}]`)}const i=e.name,a=e.getClassName(),l=r.length===0?"":r[0],u=[`${i} (${a})`,o,e.countParams().toString(),l];Wb(u,t,s);for(let c=1;c<r.length;++c)Wb(["","","",r[c]],t,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u6(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function yx(e,t){if(e===null)return null;if(typeof e=="string")return vu(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],s=e.length;for(let o=0;o<s;++o){const r=e[o];u6(t,o,r)?n.push(r):n.push(yx(r,t))}return n}else{const n={};for(const s of Object.keys(e)){const o=e[s];if(s==="name"&&typeof o=="string")n[s]=o;else{const r=vu(s);n[r]=yx(o,r)}}return n}}function wx(e,t){if(e==null)return null;if(typeof e=="string")return ha(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],s=e.length;for(let o=0;o<s;++o){const r=e[o];u6(t,o,r)?n.push(r):n.push(wx(r,t))}return n}else{const n={};for(const s of Object.keys(e)){const o=e[s],r=ha(s);(s==="name"||s==="className")&&typeof o=="string"?n[r]=o:n[r]=wx(o,s)}return n}}/** @license See the LICENSE file. */const c6="3.13.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kBe(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return gt(t,e.dtype)}catch{throw new ye(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}class rl{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof rl)for(const n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(const n of t)this.add(n.key,n.value)}}add(t,n,s){if(this.id2Value[t.id]==null)this.id2Value[t.id]=kBe(t,n),this.name2Id[t.name]=t.id,s!=null&&(this.id2Mask[t.id]=s);else throw new ye(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Hi){if(this.id2Value[t.id]==null)throw new ye(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const n=this.name2Id[t];if(n==null)throw new ye(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof Hi){if(this.id2Value[t.id]==null)throw new ye(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const n=this.name2Id[t];if(n==null)throw new ye(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&hn(this.id2Mask)}}const o$={},bR={};function lh(e,t,n,s){const o=n==null?!1:n.training,r=Array.isArray(e),i=r?e:[e],a=i.map(p=>p.name),l=[],u=t.names();for(const p of a)u.indexOf(p)!==-1?l.push(t.getValue(p)):l.push(null);s!=null&&(s.maxNumTensors=-1/0,s.minNumTensors=1/0);const c=a.join(",")+"|"+t.names().join(",");let d,f;if(o$[c]==null){const p=SBe(i,t);d=p.sorted,f=p.recipientCounts,o$[c]=d,bR[c]=f}d=o$[c],f={},o||Object.assign(f,bR[c]);const h=new rl(t);for(let p=0;p<d.length;++p){if(s!=null){const I=ix().numTensors;I>s.maxNumTensors&&(s.maxNumTensors=I),I<s.minNumTensors&&(s.minNumTensors=I)}const g=d[p],m=g.sourceLayer;if(m instanceof Jg)continue;const v=[],b=[],$=[];let y=!1;for(const I of g.inputs){const S=h.getValue(I),T=h.getMask(I);v.push(S),b.push(T),T!=null&&(y=!0),o||(f[I.name]--,f[I.name]===0&&!t.hasKey(I)&&a.indexOf(I.name)===-1&&!S.isDisposed&&I.sourceLayer.stateful!==!0&&$.push(S))}y&&(n=n||{},n.mask=b[0]);const w=rs(m.apply(v,n));let C=null;m.supportsMasking&&(C=m.computeMask(v,b));const x=TBe(g),k=Array.isArray(x)?x:[x];for(let I=0;I<k.length;++I){h.hasKey(k[I])||h.add(k[I],w[I],Array.isArray(C)?C[0]:C);const S=a.indexOf(k[I].name);S!==-1&&(l[S]=w[I])}o||hn($)}return h.disposeMasks(),r?l:l[0]}function SBe(e,t){K(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(e.length===1){const o=yR(e[0],t);n=o.sorted,s=o.recipientMap}else{const o=new Set;for(const r of e){const{sorted:i,recipientMap:a}=yR(r,t);for(const l of i)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in a)s[l]==null&&(s[l]=new Set),a[l].forEach(u=>s[l].add(u))}}return{sorted:n,recipientCounts:IBe(s)}}function IBe(e){const t={};for(const n in e)t[n]=e[n].size;return t}function yR(e,t){const n=new Set,s=[],o={};for(const a of t.names())n.add(a);const r=[],i=[];for(r.push(e);r.length>0;){const a=r[r.length-1];if(n.has(a.name)){r.pop();continue}const l=i[i.length-1]===r.length-1;if(a.inputs.length===0||l)r.pop(),s.push(a),n.add(a.name),l&&i.pop();else{i.push(r.length-1);for(const u of a.inputs)o[u.name]==null&&(o[u.name]=new Set),o[u.name].add(a.name),!n.has(u.name)&&r.push(u)}}return{sorted:s,recipientMap:o}}function TBe(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let s=0;s<e.sourceLayer.inboundNodes.length;++s)for(const o of e.sourceLayer.inboundNodes[s].outputTensors)if(o.id===e.id){n=s;break}t=e.sourceLayer.getOutputAt(n)}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class fi extends Tn{constructor(t){super({});if(this.containerNodes=new Set,this.name=t.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=n1(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],dl(this.inputs).length!==this.inputs.length)throw new ye(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);dl(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const $=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;this.outputLayers.push($),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(w)}for(const b of this.inputs){const $=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;Bi(y===0,"input layer has >1 nodes"),Bi(w===0,"input layer has >1 tensors"),this.inputLayers.push($),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const $=this.inputLayers[b];if(!($ instanceof Jg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${$.getClassName()}.`);this.inputNames.push($.name),this.feedInputShapes.push($.batchInputShape),this.feedInputNames.push($.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},s={},o={},r={},i={},a=[],l=(b,$,y,w,C,x)=>{(w==null||C==null||x==null)&&(w=b.sourceLayer,C=b.nodeIndex,x=b.tensorIndex);const k=w.inboundNodes[C];if(y.indexOf(k)!==-1)throw new Hr(`The tensor ${b.name} at layer "${w.name}" is part of a cycle.`);if($.indexOf(k)!==-1)return;this.containerNodes.add(fi.nodeKey(w,C)),w.id in i||(i[w.id]=Object.keys(i).length),y.indexOf(k)===-1&&y.push(k);const I=k.inboundLayers.length;for(let S=0;S<I;S++){const T=k.inputTensors[S],_=k.inboundLayers[S],N=k.nodeIndices[S],O=k.tensorIndices[S];l(T,$,y,_,N,O)}for($.push(k);y.indexOf(k)>=0;)y.splice(y.indexOf(k),1);a.push(k)},u=[],c=[];for(const b of this.outputs)l(b,u,c);const d=a.slice().reverse();for(const b of d){s[b.id]=b,b.id in n||(n[b.id]=0);let $=n[b.id];const y=o[b.outboundLayer.id]==null?0:o[b.outboundLayer.id];$=Math.max($,y),o[b.outboundLayer.id]=$,r[b.outboundLayer.id]=b.outboundLayer,n[b.id]=$;for(let w=0;w<b.inboundLayers.length;w++){const C=b.inboundLayers[w],x=b.nodeIndices[w],k=C.inboundNodes[x],I=n[k.id]==null?0:n[k.id];n[k.id]=Math.max($+1,I),s[k.id]=k}}const f={};for(const b in n){const $=n[b];$ in f||(f[$]=[]),f[$].push(s[b])}const h={};for(const b in o){const $=o[b];$ in h||(h[$]=[]),h[$].push(r[b])}let p=Object.keys(h).map(b=>parseInt(b,10)).sort(Xm);this.layers=[];for(const b of p){const $=h[b];$.sort((y,w)=>{const C=i[y.id],x=i[w.id];return C<x?-1:C>x?1:0});for(const y of $)y instanceof fi&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=h,p=Object.keys(f).map(b=>parseInt(b,10)).sort(Xm);const g=this.inputs.slice(),m=[];for(const b of p)for(const $ of f[b]){const y=$.outboundLayer;if(y!=null){for(const w of $.inputTensors)if(g.indexOf(w)===-1)throw new Hr(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${y.name}". The following previous layers were accessed without issue: ${m}`);for(const w of $.outputTensors)g.push(w);m.push(y.name)}}this.nodesByDepth=f;const v=this.layers.map(b=>b.name);for(const b of v){const $=v.filter(y=>y===b).length;if($!==1)throw new Hr(`The name "${b}" is used ${$} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new s1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(s=>s.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new ye("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.layers)n.push(...s.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){const s={};let o=0;for(const i of this.layers)for(const a of i.weights){if(s[a.originalName]!=null)throw new ye(`Duplicate weight name: ${a.originalName}`);s[a.originalName]=a,o++}const r=[];for(const i in t){let a=i;if(s[i]==null){const l=i.split("/");a=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(s[a]!=null)r.push([s[a],t[i]]);else if(n)throw new ye(`Provided weight data has no target variable: ${i}`);delete s[a]}if(n){const i=[];for(const a in s)i.push(a);if(i.length>0)throw new ye(`${i.length} of ${o} weights are not set: ${i}`)}PI(r)}updatedConfig(){const t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${c6}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){const s=wx(this.updatedConfig());return n?JSON.stringify(s):s}call(t,n){return Me(()=>{t=rs(t);const s=new rl;for(let o=0;o<this.inputs.length;++o)s.add(this.inputs[o],t[o]);return lh(this.outputs,s,n)})}computeMask(t,n){return Me(()=>{t=rs(t);let s;return n==null?s=Qu(null,t.length):s=rs(n),this.runInternalGraph(t,s)[1]})}computeOutputShape(t){const n=Pb(t);if(n.length!==this.inputLayers.length)throw new ye(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";s[c]=u}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Xm);if(o.length>1)for(const a of o){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(c.id)!==-1)continue;const d=[];for(let g=0;g<u.inboundLayers.length;g++){const m=u.inboundLayers[g],v=u.nodeIndices[g],b=u.tensorIndices[g],$=`${m.name}_${v}_${b}`,y=s[$];d.push(y)}const f=c.computeOutputShape(Lo(d)),h=Pb(f),p=c.inboundNodes.indexOf(u);for(let g=0;g<h.length;g++){const m=`${c.name}_${p}_${g}`;s[m]=h[g]}}}const r=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${c}`;i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];Bi(l in s),r.push(s[l])}return Lo(r)}runInternalGraph(t,n){n==null&&(n=Qu(null,t.length));const s={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=t[l],d=n[l];s[u.id]=[c,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Xm);for(const l of o){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,f=c.inputTensors,h=c.outputTensors,p=new Array;for(const g of f)g.id in s&&p.push(s[g.id]);if(p.length===f.length){let g={},m,v,b,$;if(c.callArgs!=null&&(g=c.callArgs),p.length===1){const[y,w]=p[0];g.mask==null&&(g.mask=w),b=rs(d.call(y,g)),$=rs(d.computeMask(y,w)),m=[y],v=[w]}else m=p.map(y=>y[0]),v=p.map(y=>y[1]),g.mask==null&&(g.mask=v),b=rs(d.call(m,g)),$=rs(d.computeMask(m,v));if(d.activityRegularizer)throw new Qt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<h.length;++y){const w=h[y],C=b[y],x=$[y];s[w.id]=[C,x]}}}}const r=[],i=[],a=[];for(const l of this.outputs){Bi(l.id in s,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=s[l.id];a.push(u.shape),r.push(u),i.push(c)}return[r,i,a]}buildNodeConversionMap(t){const n={};let s;for(const o of this.layers){s=o instanceof fi?1:0;for(let r=0;r<o.inboundNodes.length;r++){const i=fi.nodeKey(o,r);this.containerNodes.has(i)&&(n[i]=s,s+=1)}}return n}getLayer(t,n){if(n!=null){if(this.layers.length<=n)throw new ye(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}else if(t==null)throw new ye("Provide either a layer name or layer index");for(const s of this.layers)if(s.name===t)return s;throw new ye(`No such layer: ${t}`)}calculateLosses(){return Me(()=>{const t=[];for(const n of this.layers)for(let s=0;s<n.inboundNodes.length;++s){const o=fi.nodeKey(n,s);this.containerNodes.has(o)&&t.push(...n.calculateLosses())}return t})}getConfig(){const t={name:this.name},n=this.buildNodeConversionMap(this.layers),s=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),u=[];for(let d=0;d<i.inboundNodes.length;d++){const f=i.inboundNodes[d],h=fi.nodeKey(i,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const g=[];for(let m=0;m<f.inboundLayers.length;m++){const v=f.inboundLayers[m],b=f.nodeIndices[m],$=f.tensorIndices[m],y=fi.nodeKey(v,b);let w=n[y];w==null&&(w=0),g.push([v.name,w,$,p])}u.push(g)}}}const c={};c.name=i.name,c.className=a,c.config=l,c.inboundNodes=u,s.push(c)}t.layers=s;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],u=fi.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,c,d])}t.inputLayers=o;const r=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],u=fi.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];r.push([a.name,c,d])}return t.outputLayers=r,t}static fromConfig(t,n,s={},o=!1){const r={},i={};function a(m,v){m.name in i?i[m.name].push(v):i[m.name]=[v]}function l(m,v){const b=[];let $;for(const y of v){const w=y[0],C=y[1],x=y[2];if($=y[3]==null?{}:y[3],!(w in r)){a(m,v);return}const k=r[w];if(k.inboundNodes.length<=C){a(m,v);return}const I=k.inboundNodes[C];b.push(I.outputTensors[x])}b.length>0&&m.apply(Lo(b),$)}function u(m){const v=m.name,b=xa(m,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(o),r[v]=b,m.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new ye(`Corrupted configuration, expected array for nodeData: ${y}`);a(b,y)})}const c=n.name,d=n.layers;for(const m of d)u(m);for(;!m4e(i);)for(const m of d){const v=r[m.name];if(v.name in i){const b=i[v.name];delete i[v.name];for(const $ of b)l(v,$)}}const f=[],h=[],p=n.inputLayers;for(const m of p){const v=m[0],b=m[1],$=m[2];Bi(v in r);const w=r[v].inboundNodes[b].outputTensors;f.push(w[$])}const g=n.outputLayers;for(const m of g){const v=m[0],b=m[1],$=m[2];Bi(v in r);const w=r[v].inboundNodes[b].outputTensors;h.push(w[$])}return new t({inputs:f,outputs:h,name:c})}get stateful(){if(this._stateful)throw new ye("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Me(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EBe(e,t,n){const s=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(o=>null);if(s===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==s)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){const o=[];return t.forEach(r=>{r in e?o.push(e[r]):o.push(null)}),o}else throw new Error(`The model has multiple (${s}) outputs, so ${n} must be either an array with ${s} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function d6(e,t){return EBe(e,t,"classWeight")}async function f6(e,t,n,s){if(t!=null||s!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const o=Me(()=>{if(e.shape.length===1)return Ou(e);if(e.shape.length===2){if(e.shape[1]>1)return lp(e,1);if(e.shape[1]===1)return ke(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await o.data());hn(o);const i=[];return r.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),Jo(i,"float32")}else return null}function _Be(e,t){return me(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const NBe=32;function h6(e,t){let n,s;const o=t;n=o.xs,s=o.ys,K(n!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const r=wR("input",e.inputNames,n),i=wR("output",e.outputNames,s),a=r[0].shape[0];K(r.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),K(i.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<r.length;l++)K(r[l].shape[0]===a,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${r[l].shape[0]}; expected  ${a} based on input ${e.inputNames[0]}.`);for(let l=0;l<i.length;l++)K(i[l].shape[0]===a,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${e.inputNames[0]}.`);return{xs:r,ys:i}}function wR(e,t,n){if(n instanceof _s)return[n];if(Array.isArray(n))return K(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const s=[];for(const o of t){if(n[o]==null)throw new ye(`The feature data generated by the dataset lacks the required ${e} key '${o}'.`);s.push(n[o])}return s}}function ABe(e){if(e.length===3)throw new Qt("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function DBe(e,t,n){const s=n.batchesPerEpoch!=null;if(K(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),K(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),K(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),K(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),K(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=n.validationData!=null;let r,i;if(o)if($R(n.validationData))K(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const m=ABe(n.validationData);r=m.xs,i=m.ys}const a=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;o?u=l.slice().concat(l.map(m=>"val_"+m)):u=l.slice();const c=n6(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=s6(c,d,n.epochs,null,null,RBe(t,n),null,o,u);f.setModel(e),e.history=h,await f.onTrainBegin(),e.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,g=await t.iterator();for(;p<n.epochs;){const m={};await f.onEpochBegin(p);let v=0,b=0;for(s||(g=await t.iterator());s?v<n.batchesPerEpoch:!0;){const $=await g.next();if(s&&$.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if($.value!=null){const{xs:y,ys:w}=h6(e,$.value),C={};C.batch=b,C.size=y[0].shape[0],await f.onBatchBegin(b,C);const x=[];if(n.classWeight!=null){const S=d6(n.classWeight,e.outputNames);for(let T=0;T<S.length;++T)x.push(await f6(w[T],null,S[T]))}const k=y.concat(w).concat(x),I=a(k);hn(k);for(let S=0;S<l.length;++S){const T=l[S],_=I[S];C[T]=_,Ji(_)}await f.onBatchEnd(b,C),t6(C),b++,v++}if(s?v>=n.batchesPerEpoch:$.done){if(o){let y;$R(n.validationData)?y=rs(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):y=rs(e.evaluate(r,i,{batchSize:n.validationBatchSize==null?NBe:n.validationBatchSize,verbose:0}));for(let w=0;w<e.metricsNames.length;++w)m[`val_${e.metricsNames[w]}`]=y[w]}break}if(e.stopTraining_)break}if(await f.onEpochEnd(p,m),p++,e.stopTraining_)break}return await f.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function RBe(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function $R(e){return typeof e.iterator=="function"}function OBe(e){return typeof e.next=="function"}async function MBe(e,t,n){n=n||{};const s=n.batches!=null,o=e.testFunction;let r=[];if(n.verbose>0)throw new Qt("Verbose mode is not implemented yet.");K(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=OBe(t)?t:await t.iterator();let a=0,l=0;for(;s?l<n.batches:!0;){const u=await i.next();if(r=Me(()=>{if(u.value){const{xs:c,ys:d}=h6(e,u.value),f=c.concat(d),h=Me(()=>o(f));if(hn(f),l===0)for(let g=0;g<h.length;++g)r.push(jt(0));const p=f[0].shape[0];for(let g=0;g<h.length;++g){const m=h[g],v=r[g];r[g]=Me(()=>st(r[g],me(p,m))),l>0&&hn(v)}hn(h),a+=p,++l}return r}),u.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<r.length;++u){const c=r[u];r[u]=Nt(r[u],a),hn(c)}return Lo(r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $x(e){K(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function uh(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(s=>Fu(s,t,n-t)):Fu(e,t,n-t)}function BI(e,t){return Me(()=>e==null?null:Array.isArray(e)?e.map(n=>BI(n,t)):UV(e,t.dtype==="int32"?t:gt(t,"int32")))}function Cx(e,t){const n=[];let s=0,o=null;for(;s<e;)o=s+t,o>=e&&(o=e),n.push([s,o]),s=o;return n}async function PBe(e,t,n,s,o,r,i,a,l,u,c,d,f,h,p){o==null&&(o=32),r==null&&(r=1),c==null&&(c=!0),f==null&&(f=0);let g=!1;if(l!=null&&u!=null&&(g=!0),p!=null&&(g=!0,h==null))throw new ye("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=e.checkNumSamples(n,o,h,"steps_per_epoch");let v;m!=null&&(v=Ti(0,m)),i==null&&(i=1);const{callbackList:b,history:$}=s6(a,i,r,f,m,h,o,g,d);b.setModel(e),e.history=$,await b.onTrainBegin(),e.stopTraining_=!1;for(let y=f;y<r;++y){await b.onEpochBegin(y);const w={};if(h!=null)throw new Qt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Qt("batch shuffling is not implemneted yet");c&&CAe(v);const C=Jo(v),x=Cx(m,o);for(let k=0;k<x.length;++k){const I={};if(await b.onBatchBegin(k,I),Me(()=>{const S=x[k][0],T=x[k][1],_=Fu(C,S,T-S);I.batch=k,I.size=T-S;const N=BI(n,_),O=t(N);for(let M=0;M<s.length;++M){const D=s[M],F=O[M];I[D]=F,Ji(F)}if(k===x.length-1&&g){const M=e.testLoop(l,u,o);for(let D=0;D<s.length;++D){const F=s[D],V=M[D];Ji(V),w["val_"+F]=V}}}),await b.onBatchEnd(k,I),t6(I),e.stopTraining_)break}C.dispose()}if(await b.onEpochEnd(y,w),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}async function FBe(e,t,n,s={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;let o,r,i,a,l,u,c,d,f;try{const h=s.batchSize==null?32:s.batchSize;$x(h);const p=!1,g=await e.standardizeUserData(t,n,s.sampleWeight,s.classWeight,p,h);o=g[0],r=g[1],f=g[2];let m=!1,v;if(s.validationData!=null&&s.validationData.length>0){if(m=!0,s.validationData.length===2)l=s.validationData[0],u=s.validationData[1];else throw s.validationData.length===3?new Qt("validationData including sample weights is not supported yet."):new ye(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const I=!0,S=await e.standardizeUserData(l,u,null,null,I,h);c=S[0],d=S[1],v=c.concat(d)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){m=!0;const I=Math.floor(o[0].shape[0]*(1-s.validationSplit)),S=o[0].shape[0];c=uh(o,I,S),i=o,o=uh(o,0,I),d=uh(r,I,S),a=r,r=uh(r,0,I),v=c.concat(d)}else s.validationSteps!=null&&(m=!0);const b=o.concat(r).concat(f);e.checkTrainableWeightsConsistency();const $=e.makeTrainFunction(),y=e.getDedupedMetricsNames();let w,C;m?(e.makeTestFunction(),w=e.testFunction,C=y.slice().concat(y.map(I=>"val_"+I))):(w=null,v=[],C=y.slice());const x=n6(s.callbacks,s.yieldEvery);return await PBe(e,$,b,y,h,s.epochs,s.verbose,x,w,v,s.shuffle,C,s.initialEpoch,null,null)}finally{e.isTraining=!1,gi(o,t),gi(r,n),gi(i,t),gi(a,n),gi(c,l),gi(d,u),f!=null&&hn(f)}}function p6(e){const t=[];e instanceof _s&&(e=[e]);for(let n=0;n<e.length;++n){const s=e[n];if(s.rank===1)t.push(Yg(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(s)}}return t}function gi(e,t){if(e==null)return;const n=[];if(t instanceof _s)n.push(t.id);else if(Array.isArray(t))t.forEach(o=>n.push(o.id));else if(t!=null)for(const o in t){const r=t[o];n.push(r.id)}const s=[];if(e instanceof _s)n.indexOf(e.id)===-1&&s.push(e);else if(Array.isArray(e))e.forEach(o=>{n.indexOf(o.id)===-1&&s.push(o)});else if(e!=null)for(const o in e){const r=e[o];n.indexOf(r.id)===-1&&s.push(r)}s.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LBe(e){return e instanceof _s}function xx(e){return Array.isArray(e)}function CR(e){return!LBe(e)&&!xx(e)}function xR(e,t,n,s=!0,o=""){if(t==null||t.length===0){if(e!=null){let i=!1;if(xx(e)&&e.length>0)i=!0;else if(CR(e)){for(const a in e)if(e.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new ye(`Error when checking model ${o} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(i=>null);let r;if(CR(e)){e=e,r=[];for(const i of t){if(e[i]==null)throw new ye(`No data provided for "${i}". Need data for each key in: ${t}`);r.push(e[i])}}else if(xx(e)){if(e=e,e.length!==t.length)throw new ye(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);r=e}else{if(e=e,t.length>1)throw new ye(`The model ${o} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);r=[e]}if(r=p6(r),n!=null)for(let i=0;i<t.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new ye(`Error when checking ${o}: expected ${t[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c>=0&&u!==c)throw new ye(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function BBe(e,t,n){const s=dl(e.map(r=>r.shape[0]));s.sort();const o=dl(t.map(r=>r.shape[0]));if(o.sort(),s.length>1)throw new ye(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(r=>r.shape))}`);if(o.length>1)throw new ye(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(s.length>0&&o.length>0&&!Mn(s,o))throw new ye(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${o[0]} target sample(s).`)}function zBe(e,t,n){const s=[o1,r1,dp];for(let o=0;o<e.length;++o){const r=e[o],i=t[o],a=n[o];if(i!=null){if(i===dp&&r.shape[r.shape.length-1]===1)throw new ye(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(i)!==-1){const l=r.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const d=l[c],f=u[c];if(f!=null&&d!==f)throw new ye(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function kR(e,t,n,s=!0,o=""){let r;if(Array.isArray(e)){if(e.length!==t.length)throw new ye(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);r=e}else{if(t.length>1)throw new ye(`The model expects ${t.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);r=[e]}if(n!=null)for(let i=0;i<t.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new ye(`Error when checking ${o}: expected ${t[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c!==u)throw new ye(`Error when checking ${o}: expected ${t[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function VBe(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(s=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(n))return t.map(s=>n);{const s=[];for(const o of t){let r=n.hasOwnProperty(o)?n[o]:[];Array.isArray(r)||(r=[r]),s.push(r)}return s}}const WBe="layers-model";class hd extends fi{constructor(t){super(t);this.isTraining=!1}summary(t,n,s=console.log){if(!this.built)throw new ye("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");yBe(this,t,n,s)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=bBe(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof Ll))throw new ye("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const i in t.loss)if(this.outputNames.indexOf(i)===-1)throw new ye(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)t.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(s$(t.loss[i]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new ye(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);n=t.loss.map(a=>s$(a))}else{const i=s$(t.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const s=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Pu("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=VBe(t.metrics,this.outputNames),r=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};Pu("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=o[i];(u=>{const c="";let d,f,h;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const m=this.internalOutputShapes[i];m[m.length-1]===1||this.lossFunctions[i]===r1?["accuracy","acc"].indexOf(p)!==-1?f=r6:["crossentropy","ce"].indexOf(p)!==-1&&(f=lBe):this.lossFunctions[i]===Bb?["accuracy","acc"].indexOf(p)!==-1?f=uBe:["crossentropy","ce"].indexOf(p)!==-1&&(f=l6):["accuracy","acc"].indexOf(p)!==-1?f=i6:["crossentropy","ce"].indexOf(p)!==-1&&(f=a6);let v;["accuracy","acc"].indexOf(p)!==-1?v="acc":["crossentropy","ce"].indexOf(p)!==-1&&(v="ce"),h=f,d=c+v}else h=vBe(p),d=c+Qm(p);let g;Pu(d,()=>{g=h}),r(i,d,g)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,n,s={}){const o=s.batchSize==null?32:s.batchSize;$x(o);const r=!0,i=this.standardizeUserDataXY(t,n,r,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,o,s.verbose,s.steps);return Lo(u)}finally{gi(i[0],t),gi(i[1],n)}}async evaluateDataset(t,n){return this.makeTestFunction(),MBe(this,t,n)}checkNumSamples(t,n,s,o="steps"){let r;if(s!=null){if(r=null,n!=null)throw new ye(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(t!=null)Array.isArray(t)?r=t[0].shape[0]:r=t.shape[0];else throw new ye(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return r}execute(t,n){if(Array.isArray(n)&&n.length===0)throw new ye("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(n),o=s?n:[n],r=this.retrieveSymbolicTensors(o),i=new rl;if(t instanceof _s&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new ye(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],t[l])}else for(const l of this.inputs){const u=t[l.name];if(u==null)throw new ye(`No value is provided for the model's input ${l.name}`);i.add(l,u)}const a=lh(r,i);return s?a:a[0]}retrieveSymbolicTensors(t){const n=Qu(null,t.length);let s=t.length;for(const o of this.layers){const r=Array.isArray(o.output)?o.output:[o.output],i=r.map(a=>a.name);for(let a=0;a<t.length;++a){const l=i.indexOf(t[a]);if(l!==-1&&(n[a]=r[l],s--),s===0)break}if(s===0)break}if(s>0){const o=[];throw n.forEach((r,i)=>{r==null&&o.push(t[i])}),new ye(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(t,n=32,s=!1){return Me(()=>{const o=this.checkNumSamples(t);if(s)throw new Qt("Verbose predictLoop() is not implemented yet.");const r=Cx(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<r.length;++a)Me(()=>{const u=r[a][0],c=r[a][1],d=uh(t,u,c),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new rl(f);return lh(this.outputs,h)}).forEach((u,c)=>i[c].push(u));return Lo(i.map(a=>Co(a,0)))})}predict(t,n={}){const s=p6(t);kR(s,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return $x(o),this.predictLoop(s,o)}finally{gi(s,t)}}predictOnBatch(t){kR(t,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,n)}standardizeUserDataXY(t,n,s=!0,o){if(this.optimizer_==null)throw new Hr("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===Bb?r.push(a.slice(0,a.length-1).concat([1])):r.push(a)}if(t=xR(t,this.feedInputNames,this.feedInputShapes,!1,"input"),n=xR(n,this.feedOutputNames,r,!1,"target"),BBe(t,n),zBe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&t[0].shape[0]%o!==0)throw new ye(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${t[0].shape[0]} sample(s).`);return[t,n]}async standardizeUserData(t,n,s,o,r=!0,i){const[a,l]=this.standardizeUserDataXY(t,n,r,i);if(s!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){const c=d6(o,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await f6(l[d],null,c[d]))}return[a,l,u]}testLoop(t,n,s,o=0,r){return Me(()=>{const i=this.checkNumSamples(n,s,r,"steps"),a=[];if(o>0)throw new Qt("Verbose mode is not implemented yet.");if(r!=null)throw new Qt("steps mode in testLoop() is not implemented yet");{const l=Cx(i,s),u=Jo(Ti(0,i));for(let c=0;c<l.length;++c){const d=l[c][0],f=l[c][1],h=Fu(u,d,f-d),p=BI(n,h),g=t(p);if(c===0)for(let m=0;m<g.length;++m)a.push(jt(0));for(let m=0;m<g.length;++m){const v=g[m];a[m]=st(a[m],me(f-d,v))}}for(let c=0;c<a.length;++c)a[c]=Nt(a[c],i)}return a})}getDedupedMetricsNames(){const t=this.metricsNames,n=[];for(let s=0;s<t.length;++s){const o=t[s];let r=o;aR(t,o)>1&&(r+=`_${aR(t.slice(0,s),o)}`),n.push(r)}return n}makeTrainFunction(){return t=>{const n=[],s=t.slice(0,this.inputs.length),o=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let g=0;g<this.inputs.length;++g)d.push({key:this.inputs[g],value:s[g]});const f=new rl(d),h=lh(this.outputs,f,{training:!0});let p;for(let g=0;g<this.lossFunctions.length;++g){let v=this.lossFunctions[g](o[g],h[g]);r[g]!=null&&(v=_Be(v,r[g]));const b=$s(v);n.push(b),g===0?p=v:p=st(p,v)}for(let g=0;g<this.metricsTensors.length;++g){let m;if(this.outputs.length>1&&g<this.outputs.length)m=n[g];else{const v=this.metricsTensors[g][0],b=this.metricsTensors[g][1];m=$s(v(o[b],h[b]))}Ji(m),i.push(m)}return p=$s(p),this.calculateLosses().forEach(g=>{p=st(p,g)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),u=!0;return[this.optimizer_.minimize(a,u,l)].concat(i)}}makeTestFunction(){this.testFunction=t=>Me(()=>{const n=[];let s;const o=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let u=0;u<this.inputs.length;++u)i.push({key:this.inputs[u],value:o[u]});const a=new rl(i),l=lh(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=$s(c(r[u],l[u]));u===0?s=d:s=st(s,d),n.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],f=$s(c(r[d],l[d]));n.push(f)}return n})}async fit(t,n,s={}){return FBe(this,t,n,s)}async fitDataset(t,n){return DBe(this,t,n)}async trainOnBatch(t,n){const s=await this.standardizeUserData(t,n),o=s[0],r=s[1],a=this.makeTrainFunction()(o.concat(r)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return hn(a),gi(s[0],t),gi(s[1],n),Lo(l)}getNamedWeights(t){const n=[],s=t!=null&&t.trainableOnly,o=s?this.trainableWeights:this.weights,r=this.getWeights(s);for(let i=0;i<o.length;++i)s&&!o[i].trainable||n.push({name:o[i].originalName,tensor:r[i]});return n}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=ix().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-ix().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=ha(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(n=>ha(n))}else{const n=Object.keys(this.loss);t={};const s=this.loss;for(const o of n)if(typeof s[o]=="string")t[o]=ha(s[o]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[ha(Qm(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>ha(Qm(t)));{const t={};for(const n in this.metrics)t[n]=ha(Qm(this.metrics[n]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=yx(t.optimizer_config),s=xa(n);let o;if(typeof t.loss=="string")o=vu(t.loss);else if(Array.isArray(t.loss))o=t.loss.map(i=>vu(i));else if(t.loss!=null){o={};for(const i in t.loss)o[i]=vu(t.loss[i])}let r;if(Array.isArray(t.metrics))r=t.metrics.map(i=>vu(i));else if(t.metrics!=null){r={};for(const i in t.metrics)r[i]=vu(t.metrics[i])}this.compile({loss:o,metrics:r,optimizer:s})}async save(t,n){if(typeof t=="string"){const u=pDe(t);if(u.length===0)throw new ye(`Cannot find any save handlers for URL '${t}'`);if(u.length>1)throw new ye(`Found more than one (${u.length}) save handlers for URL '${t}'`);t=u[0]}if(t.save==null)throw new ye("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await HD(this.getNamedWeights(n)),o=!1,r=null,a={modelTopology:this.toJSON(r,o),format:WBe,generatedBy:`TensorFlow.js tfjs-layers v${c6}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await HD(await this.optimizer.getWeights(),u);s.specs.push(...d),s.data=sz([s.data,c])}return this.userDefinedMetadata!=null&&(vR(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=s.data,a.weightSpecs=s.specs,t.save(a)}setUserDefinedMetadata(t){vR(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}hd.className="Model";et(hd);class g6 extends hd{}g6.className="Functional";et(g6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class fp extends hd{constructor(t){super({inputs:[],outputs:[]});if(t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:n1("sequential_"),t.layers!=null)for(const n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new ye(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const n=t instanceof fp||t instanceof hd;let s;if(n){if(s=t,s.outputs.length!==1)throw new ye("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new ye("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new ye("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=j4e({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(o)}if(n)this.outputs=s.outputs,this.inputs=s.inputs;else{if(t.inboundNodes.length!==1)throw new ye(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new ye("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=e6(this.outputs[0])}this.inboundNodes=[],new s1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Qu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=t.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(Wn(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new hd({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,s=console.log){this.built||this.build(),super.summary(t,n,s)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,s={}){if(!this.built)throw new Hr("The model needs to be compiled before being used.");return this.model.evaluate(t,n,s)}async evaluateDataset(t,n){if(!this.built)throw new Hr("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,s={}){if(!this.built)throw new Hr("The model needs to be compiled before being used.");return this.model.fit(t,n,s)}async fitDataset(t,n){if(!this.built)throw new Hr("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,s={},o=!1){let r,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ye("Legacy serialization format not supported yet.");r=n}else K(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,i=n;const a=new t(i);if(!(a instanceof fp))throw new Qt(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of r){const c=xa(l,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(t){if(this.model==null)throw new ye("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new ye("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const n of this.layers){const s={};s.className=n.getClassName(),s.config=n.getConfig(),t.push(s)}return{name:this.name,layers:t}}}fp.className="Sequential";et(fp);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ho extends cf{getConfig(){return{}}}class m6 extends Ho{apply(t,n=1){return N4e(t,n)}}m6.className="elu";et(m6);class v6 extends Ho{apply(t){return Yz(t)}}v6.className="selu";et(v6);class b6 extends Ho{apply(t){return Fa(t)}}b6.className="relu";et(b6);class y6 extends Ho{apply(t){return Me(()=>qy(6,Fa(t)))}}y6.className="relu6";et(y6);class w6 extends Ho{apply(t){return t}}w6.className="linear";et(w6);class $6 extends Ho{apply(t){return df(t)}}$6.className="sigmoid";et($6);class C6 extends Ho{apply(t){return D4e(t)}}C6.className="hardSigmoid";et(C6);class x6 extends Ho{apply(t){return Vg(t)}}x6.className="softplus";et(x6);class k6 extends Ho{apply(t){return A4e(t)}}k6.className="softsign";et(k6);class S6 extends Ho{apply(t){return SS(t)}}S6.className="tanh";et(S6);class zI extends Ho{apply(t,n=-1){return WS(t,n)}}zI.className="softmax";et(zI);class I6 extends Ho{apply(t,n=-1){return Rz(t,n)}}I6.className="logSoftmax";et(I6);class T6 extends Ho{apply(t,n=1){return Me(()=>me(df(me(t,n)),t))}}T6.className="swish";et(T6);class E6 extends Ho{apply(t){return Me(()=>me(t,SS(Vg(t))))}}E6.className="mish";et(E6);function bl(e){return e.getClassName()}function r$(e,t={}){return Kg(e,Lr.getMap().classNameMap,t,"activation")}function yl(e){if(e==null){const t={};return t.className="linear",t.config={},r$(t)}if(typeof e=="string"){const t={};return t.className=e,t.config={},r$(t)}else return e instanceof Ho?e:r$(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HBe(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class _6 extends cf{}class N6 extends _6{constructor(t){super();HBe(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return Me(()=>{let n=qs([1]);return this.hasL1&&(n=st(n,Tt(me(this.l1,Gs(t))))),this.hasL2&&(n=st(n,Tt(me(this.l2,Xg(t))))),ke(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,n){return new t({l1:n.l1,l2:n.l2})}}N6.className="L1L2";et(N6);const SR={l1l2:"L1L2"};function qn(e){return SI(e)}function IR(e,t={}){return Kg(e,Lr.getMap().classNameMap,t,"regularizer")}function ps(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in SR?SR[e]:e,config:{}};return IR(n)}else return e instanceof _6?e:IR(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class A6 extends Tn{constructor(t){super(t==null?{}:t);this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,n){t=sn(t);let s=Fa(t);return this.maxValue!=null&&(s=Sr(s,0,this.maxValue)),s}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},n=super.getConfig();return Object.assign(t,n),t}}A6.className="ReLU";et(A6);class D6 extends Tn{constructor(t){super(t==null?{}:t);this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const s=sn(t);return AS(s,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}D6.className="LeakyReLU";et(D6);class R6 extends Tn{constructor(t){super(t==null?{}:t);if(this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=hs(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ps(t.alphaRegularizer),this.alphaConstraint=Ws(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new ye(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=Wn(t);const n=t.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let o=1;o<t.length;++o)s[o]=t[o];this.inputSpec=[new zs({ndim:t.length,axes:s})],this.built=!0}call(t,n){return t=sn(t),BS(t,this.alpha.read())}getConfig(){const t={alphaInitializer:vs(this.alphaInitializer),alphaRegularizer:qn(this.alphaRegularizer),alphaConstraint:Vs(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(t,n),t}}R6.className="PReLU";et(R6);class O6 extends Tn{constructor(t){super(t==null?{}:t);if(this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new Qt(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const s=sn(t);return jy(s)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}O6.className="ELU";et(O6);class M6 extends Tn{constructor(t){super(t==null?{}:t);this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,n){const s=sn(t);return me(s,gt(si(s,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},n=super.getConfig();return Object.assign(t,n),t}}M6.className="ThresholdedReLU";et(M6);class P6 extends Tn{constructor(t){super(t==null?{}:t);this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new zI().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,n){const s=sn(t);return this.softmax(s,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}P6.className="Softmax";et(P6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pd(e,t,n){if(typeof e=="number")return Qu(e,t);if(e.length!==t)throw new ye(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let s=0;s<t;++s){const o=e[s];if(!I4e(o))throw new ye(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${o}`)}return e}function $i(e,t,n,s,o=1){if(e==null)return e;const r=t+(t-1)*(o-1);let i;return n==="same"?i=e:i=e-r+1,Math.floor((i+s-1)/s)}function zi(e,t,n,s){if(e==null)return null;if(s==="valid")e=e*t+vl([n-t,0]);else if(s==="same")e=e*t;else throw new ye(`Unsupport padding mode: ${s}.`);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VI(e,t){return Me(()=>(Es(t),t==="channelsFirst"?An(e,[0,2,3,1]):e))}function F6(e,t){return Me(()=>(Es(t),t==="channelsFirst"?An(e,[0,2,3,4,1]):e))}function UBe(e,t,n,s=1,o="valid",r,i=1){return Me(()=>{if(r==null&&(r=Ii()),Es(r),e.shape.length!==3)throw new ye(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new ye(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ye(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(r==="channelsFirst"&&(e=An(e,[0,2,1])),o==="causal")throw new Qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=Sz(e,t,s,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=Oi(a,n)),a})}function TR(e,t,n,s=[1,1],o="valid",r,i,a=null){return Me(()=>{if(r==null&&(r=Ii()),Es(r),e.rank!==3&&e.rank!==4)throw new ye(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new ye(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=VI(e,r);if(o==="causal")throw new Qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=G3e({x:l,filter:t,strides:s,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),r==="channelsFirst"&&(l=An(l,[0,3,1,2])),l})}function jBe(e,t,n,s=[1,1,1],o="valid",r,i){return Me(()=>{if(r==null&&(r=Ii()),Es(r),e.rank!==4&&e.rank!==5)throw new ye(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new ye(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let a=F6(e,r);if(o==="causal")throw new Qt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=uOe(a,t,s,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Oi(a,n)),r==="channelsFirst"&&(a=An(a,[0,4,1,2,3])),a})}class i1 extends Tn{constructor(t,n){super(n);if(this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",i1.verifyArgs(n),this.rank=t,Ys(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Qt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=pd(n.kernelSize,t,"kernelSize"),this.strides=pd(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,Tr(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Es(this.dataFormat),this.activation=yl(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=hs(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ws(n.biasConstraint),this.biasRegularizer=ps(n.biasRegularizer),this.activityRegularizer=ps(n.activityRegularizer),this.dilationRate=pd(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ye(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ye(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ye(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(Bi("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!II(t.kernelSize,"number",1,3))throw new ye(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:bl(this.activation),useBias:this.useBias,biasInitializer:vs(this.biasInitializer),biasRegularizer:qn(this.biasRegularizer),activityRegularizer:qn(this.activityRegularizer),biasConstraint:Vs(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}class mf extends i1{constructor(t,n){super(t,n);this.kernel=null,mf.verifyArgs(n),this.filters=n.filters,Ys(this.filters,"filters"),this.kernelInitializer=hs(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ws(n.kernelConstraint),this.kernelRegularizer=ps(n.kernelRegularizer)}build(t){t=Wn(t);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new ye(`The channel dimension of the input should be defined. Found ${t[n]}`);const s=t[n],o=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:s}}],this.built=!0}call(t,n){return Me(()=>{t=sn(t);let s;const o=this.bias==null?null:this.bias.read(),r=MV(this.activation.getClassName());if(r!=null&&this.rank===2)s=TR(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)s=UBe(t,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=TR(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=jBe(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Qt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(t){t=Wn(t);const n=[],s=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let r=0;r<s.length;++r){const i=$i(s[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);n.push(i)}let o=[t[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const t={filters:this.filters,kernelInitializer:vs(this.kernelInitializer),kernelRegularizer:qn(this.kernelRegularizer),kernelConstraint:Vs(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new ye(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class Qg extends mf{constructor(t){super(2,t);Qg.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!II(t.kernelSize,"number",1,2))throw new ye(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}Qg.className="Conv2D";et(Qg);class em extends mf{constructor(t){super(3,t);em.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new ye(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}em.className="Conv3D";et(em);class L6 extends Qg{constructor(t){super(t);if(this.inputSpec=[new zs({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ye(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Wn(t),t.length!==4)throw new ye("Input should have rank 4; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new ye("The channel dimension of the inputs should be defined. Found `None`.");const s=t[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new zs({ndim:4,axes:{[n]:s}})],this.built=!0}call(t,n){return Me(()=>{let s=sn(t);if(s.shape.length!==4)throw new ye(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=o[i],u=o[a],c=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=zi(l,f,c,this.padding),g=zi(u,h,d,this.padding),m=[r,p,g,this.filters];this.dataFormat!=="channelsLast"&&(s=An(s,[0,2,3,1]));let v=Iz(s,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=An(v,[0,3,1,2])),this.bias!=null&&(v=Oi(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(t){t=Wn(t);const n=t.slice();let s,o,r;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3):(s=3,o=1,r=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[s]=this.filters,n[o]=zi(n[o],l,i,this.padding),n[r]=zi(n[r],u,a,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}L6.className="Conv2DTranspose";et(L6);class B6 extends em{constructor(t){super(t);if(this.inputSpec=[new zs({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ye(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Wn(t),t.length!==5)throw new ye("Input should have rank 5; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new ye("The channel dimension of the inputs should be defined. Found `None`.");const s=t[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new zs({ndim:5,axes:{[n]:s}})],this.built=!0}call(t,n){return Me(()=>{let s=sn(t);if(s.shape.length!==5)throw new ye(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const u=o[l],c=o[i],d=o[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],g=this.strides[0],m=this.strides[1],v=this.strides[2],b=zi(u,g,f,this.padding),$=zi(c,m,h,this.padding),y=zi(d,v,p,this.padding),w=[r,b,$,y,this.filters];this.dataFormat!=="channelsLast"&&(s=An(s,[0,2,3,4,1]));let C=fOe(s,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=An(C,[0,4,1,2,3])),this.bias!==null&&(C=Oi(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(t){t=Wn(t);const n=t.slice();let s,o,r,i;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3,i=4):(s=4,o=1,r=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],f=this.strides[2];return n[s]=this.filters,n[o]=zi(n[o],c,a,this.padding),n[r]=zi(n[r],d,l,this.padding),n[i]=zi(n[i],f,u,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}B6.className="Conv3DTranspose";et(B6);class z6 extends mf{constructor(t,n){super(t,n);if(this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ye("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ye("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ye(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=hs(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ps(n.depthwiseRegularizer),this.depthwiseConstraint=Ws(n.depthwiseConstraint),this.pointwiseInitializer=hs(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ps(n.pointwiseRegularizer),this.pointwiseConstraint=Ws(n.pointwiseConstraint)}build(t){if(t=Wn(t),t.length<this.rank+2)throw new ye(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null||t[n]<0)throw new ye(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[n])}`);const s=t[n],o=this.kernelSize.concat([s,this.depthMultiplier]),r=[];for(let a=0;a<this.rank;++a)r.push(1);r.push(s*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new zs({ndim:this.rank+2,axes:{[n]:s}})],this.built=!0}call(t,n){return Me(()=>{t=sn(t);let s;if(this.rank===1)throw new Qt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=An(t,[0,2,3,1])),s=Xz(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=Oi(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=An(s,[0,3,1,2])),s})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=vs(this.depthwiseInitializer),t.pointwiseInitializer=vs(this.pointwiseInitializer),t.depthwiseRegularizer=qn(this.depthwiseRegularizer),t.pointwiseRegularizer=qn(this.pointwiseRegularizer),t.depthwiseConstraint=Vs(this.depthwiseConstraint),t.pointwiseConstraint=Vs(this.pointwiseConstraint),t}}z6.className="SeparableConv";class V6 extends z6{constructor(t){super(2,t)}}V6.className="SeparableConv2D";et(V6);class a1 extends mf{constructor(t){super(1,t);a1.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!II(t.kernelSize,"number",1,1))throw new ye(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}a1.className="Conv1D";et(a1);class W6 extends Tn{constructor(t){super(t);typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,n){return Me(()=>{if(t=sn(t),this.dataFormat==="channelsLast"){const s=Zm(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Zm(s,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=Zm(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Zm(s,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}W6.className="Cropping2D";et(W6);class H6 extends Tn{constructor(t){super(t);this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Es(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,x4e(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const n=t[2]==null?null:this.size[0]*t[2],s=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],n,s]}else{const n=t[1]==null?null:this.size[0]*t[1],s=t[2]==null?null:this.size[1]*t[2];return[t[0],n,s,t[3]]}}call(t,n){return Me(()=>{let s=sn(t);const o=s.shape;if(this.dataFormat==="channelsFirst"){s=An(s,[0,2,3,1]);const r=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?Ym.resizeNearestNeighbor(s,[r,i]):Ym.resizeBilinear(s,[r,i]);return An(a,[0,3,1,2])}else{const r=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?Ym.resizeNearestNeighbor(s,[r,i]):Ym.resizeBilinear(s,[r,i])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}H6.className="UpSampling2D";et(H6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GBe(e,t,n=[1,1],s="valid",o,r){return Me(()=>{o==null&&(o=Ii()),Es(o);let i=VI(e,o);if(e.rank!==4)throw new ye(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new ye(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=_S(i,t,n,s==="same"?"same":"valid","NHWC",r),o==="channelsFirst"&&(i=An(i,[0,3,1,2])),i})}class U6 extends i1{constructor(t){super(2,t);this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=hs(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ws(t.depthwiseConstraint),this.depthwiseRegularizer=ps(t.depthwiseRegularizer)}build(t){if(t=Wn(t),t.length<4)throw new ye(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(t[n]==null||t[n]<0)throw new ye(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[n]}).`);const s=t[n],o=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Me(()=>{t=sn(t);let s=GBe(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=Oi(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(t){t=Wn(t);const n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=$i(n,this.kernelSize[0],this.padding,this.strides[0]),i=$i(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],o,r,i]:[t[0],r,i,o]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=vs(this.depthwiseInitializer),t.depthwiseRegularizer=qn(this.depthwiseRegularizer),t.depthwiseConstraint=Vs(this.depthwiseRegularizer),t}}U6.className="DepthwiseConv2D";et(U6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j6(e,t,n,s){if(Array.isArray(e)){if(t!=null||n!=null)throw new ye("When inputs is an array, neither initialState or constants should be provided");s!=null&&(n=e.slice(e.length-s,e.length),e=e.slice(0,e.length-s)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(r){return r==null||Array.isArray(r)?r:[r]}return t=o(t),n=o(n),{inputs:e,initialState:t,constants:n}}function G6(e,t,n,s=!1,o,r,i=!1,a=!1){return Me(()=>{const l=t.shape.length;if(l<3)throw new ye(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Ti(2,l));if(t=An(t,u),r!=null)throw new Qt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=gt(gt(o,"bool"),"float32"),o.rank===l-1&&(o=Pr(o,-1)),o=An(o,u)),s&&(t=Xu(t,0),o!=null&&(o=Xu(o,0)));const c=[];let d,f=n;const h=t.shape[0],p=Ld(t);let g;o!=null&&(g=Ld(o));for(let v=0;v<h;++v){const b=p[v],$=Me(()=>e(b,f));if(o==null)d=$[0],f=$[1];else{const y=Me(()=>{const w=g[v],C=Et(Jr(w),w),x=st(me($[0],w),me(f[0],C)),k=f.map((I,S)=>st(me($[1][S],w),me(I,C)));return{output:x,newStates:k}});d=y.output,f=y.newStates}a&&c.push(d)}let m;return a&&(m=Zu(c,1)),[d,m,f]})}class Bl extends Tn{constructor(t){super(t);let n;if(t.cell==null)throw new ye("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new UI({cells:t.cell}):n=t.cell,n.stateSize==null)throw new ye("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new zs({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ti(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){mx(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const s=n[0];let o;if(this.returnSequences?o=[t[0],t[1],s]:o=[t[0],s],this.returnState){const r=[];for(const i of n)r.push([t[0],i]);return[o].concat(r)}else return o}computeMask(t,n){return Me(()=>{Array.isArray(n)&&(n=n[0]);const s=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(r=>null);return[s].concat(o)}else return s})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let s=0;s<t;++s)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new Qt("Constants support is not implemented in RNN yet.");mx(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,s=t.slice(2);this.inputSpec[0]=new zs({shape:[n,null,...s]});const o=[t[0]].concat(t.slice(2));this.cell.build(o);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!Mn(this.stateSpec.map(i=>i.shape[i.shape.length-1]),r))throw new ye(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(i=>new zs({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){Me(()=>{if(!this.stateful)throw new Li("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new ye("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>qs([s,o])):this.states_=[qs([s,this.cell.stateSize])];else if(t==null)hn(this.states_),this.keptStates!=null&&(hn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>qs([s,o])):this.states_[0]=qs([s,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new ye(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):hn(this.states_);for(let o=0;o<this.states_.length;++o){const r=t[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[s,i];if(!Mn(r.shape,a))throw new ye(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[o]=r}}this.states_=this.states_.map(o=>Ji(o.clone()))})}apply(t,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=j6(t,s,o,this.numConstants);t=r.inputs,s=r.initialState,o=r.constants;let i=[],a=[];if(s!=null){n.initialState=s,i=i.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new zs({shape:u.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof Hi){const u=[t].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(t,n)}call(t,n){return Me(()=>{const s=n==null?null:n.mask,o=n==null?null:n.training;let r=n==null?null:n.initialState;t=sn(t),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(t));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==i)throw new ye(`RNN Layer has ${i} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},u=G6((p,g)=>{const m=this.cell.call([p].concat(g),a);return[m[0],m.slice(1)]},t,r,this.goBackwards,s,null,this.unroll,this.returnSequences),c=u[0],d=u[1],f=u[2];this.stateful&&this.resetStates(f,o);const h=this.returnSequences?d:c;return this.returnState?[h].concat(f):h})}getInitialState(t){return Me(()=>{let n=qs(t.shape);return n=Tt(n,[1,2]),n=Yg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?px(n,[1,s]):n):this.cell.stateSize>1?[px(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===Bl.className&&(n.cell={className:this.cell.getClassName(),config:s}),Object.assign({},s,t,n)}static fromConfig(t,n,s={}){const o=n.cell,r=xa(o,s);return new t(Object.assign(n,{cell:r}))}}Bl.className="RNN";et(Bl);class l1 extends Tn{}class WI extends l1{constructor(t){super(t);this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Ys(this.units,"units"),this.activation=yl(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hs(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ps(t.kernelRegularizer),this.recurrentRegularizer=ps(t.recurrentRegularizer),this.biasRegularizer=ps(t.biasRegularizer),this.kernelConstraint=Ws(t.kernelConstraint),this.recurrentConstraint=Ws(t.recurrentConstraint),this.biasConstraint=Ws(t.biasConstraint),this.dropout=Bd([1,vl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Bd([1,vl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Wn(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Me(()=>{if(t=t,t.length!==2)throw new ye(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let s=t[1];t=t[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=wl({ones:()=>Jr(t),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=wl({ones:()=>Jr(s),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let r;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?r=qi(me(t,i),this.kernel.read()):r=qi(t,this.kernel.read()),this.bias!=null&&(r=Oi(r,this.bias.read())),a!=null&&(s=me(s,a));let l=st(r,qi(s,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:bl(this.activation),useBias:this.useBias,kernelInitializer:vs(this.kernelInitializer),recurrentInitializer:vs(this.recurrentInitializer),biasInitializer:vs(this.biasInitializer),kernelRegularizer:qn(this.kernelRegularizer),recurrentRegularizer:qn(this.recurrentRegularizer),biasRegularizer:qn(this.biasRegularizer),activityRegularizer:qn(this.activityRegularizer),kernelConstraint:Vs(this.kernelConstraint),recurrentConstraint:Vs(this.recurrentConstraint),biasConstraint:Vs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,n)}}WI.className="SimpleRNNCell";et(WI);class K6 extends Bl{constructor(t){t.cell=new WI(t);super(t)}call(t,n){return Me(()=>{this.cell.dropoutMask!=null&&(hn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return new t(n)}}K6.className="SimpleRNN";et(K6);class HI extends l1{constructor(t){super(t);if(this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new ye("GRUCell does not support reset_after parameter set to true.");this.units=t.units,Ys(this.units,"units"),this.activation=yl(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=yl(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hs(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ps(t.kernelRegularizer),this.recurrentRegularizer=ps(t.recurrentRegularizer),this.biasRegularizer=ps(t.biasRegularizer),this.kernelConstraint=Ws(t.kernelConstraint),this.recurrentConstraint=Ws(t.recurrentConstraint),this.biasConstraint=Ws(t.biasConstraint),this.dropout=Bd([1,vl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Bd([1,vl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Wn(t);const n=t[t.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Me(()=>{if(t=t,t.length!==2)throw new ye(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const s=n.training==null?!1:n.training;let o=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=wl({ones:()=>Jr(t),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=wl({ones:()=>Jr(o),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(t=me(t,r[0]));let c=qi(t,this.kernel.read());this.useBias&&(c=Oi(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=me(o,i[0]));const d=this.recurrentKernel.read(),[f,h]=$r(d,[2*this.units,this.units],d.rank-1),p=qi(o,f),[g,m,v]=$r(c,3,c.rank-1),[b,$]=$r(p,2,p.rank-1);a=this.recurrentActivation.apply(st(g,b)),l=this.recurrentActivation.apply(st(m,$));const y=qi(me(l,o),h);u=this.activation.apply(st(v,y));const w=st(me(a,o),me(st(1,ys(a)),u));return[w,w]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:bl(this.activation),recurrentActivation:bl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:vs(this.kernelInitializer),recurrentInitializer:vs(this.recurrentInitializer),biasInitializer:vs(this.biasInitializer),kernelRegularizer:qn(this.kernelRegularizer),recurrentRegularizer:qn(this.recurrentRegularizer),biasRegularizer:qn(this.biasRegularizer),activityRegularizer:qn(this.activityRegularizer),kernelConstraint:Vs(this.kernelConstraint),recurrentConstraint:Vs(this.recurrentConstraint),biasConstraint:Vs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,n)}}HI.className="GRUCell";et(HI);class q6 extends Bl{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new HI(t);super(t)}call(t,n){return Me(()=>{this.cell.dropoutMask!=null&&(hn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}q6.className="GRU";et(q6);class u1 extends l1{constructor(t){super(t);this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Ys(this.units,"units"),this.activation=yl(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=yl(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hs(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=ps(t.kernelRegularizer),this.recurrentRegularizer=ps(t.recurrentRegularizer),this.biasRegularizer=ps(t.biasRegularizer),this.kernelConstraint=Ws(t.kernelConstraint),this.recurrentConstraint=Ws(t.recurrentConstraint),this.biasConstraint=Ws(t.biasConstraint),this.dropout=Bd([1,vl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Bd([1,vl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var n;t=Wn(t);const s=t[t.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,i=this.units;o=new(n=class extends oi{apply(l,u){const c=r.apply([i]),d=new _I().apply([i]),f=r.apply([i*2]);return dR(dR(c,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,n){return Me(()=>{const s=n.training==null?!1:n.training;if(t=t,t.length!==3)throw new ye(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let o=t[1];const r=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=wl({ones:()=>Jr(t),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=wl({ones:()=>Jr(o),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(t=me(t,i[0]));let f=qi(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=me(o,a[0])),f=st(f,qi(o,this.recurrentKernel.read())),this.useBias&&(f=Oi(f,this.bias.read()));const[h,p,g,m]=$r(f,4,f.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=st(me(u,r),me(l,this.activation.apply(g))),d=this.recurrentActivation.apply(m);const v=me(d,this.activation.apply(c));return[v,v,c]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:bl(this.activation),recurrentActivation:bl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:vs(this.kernelInitializer),recurrentInitializer:vs(this.recurrentInitializer),biasInitializer:vs(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:qn(this.kernelRegularizer),recurrentRegularizer:qn(this.recurrentRegularizer),biasRegularizer:qn(this.biasRegularizer),activityRegularizer:qn(this.activityRegularizer),kernelConstraint:Vs(this.kernelConstraint),recurrentConstraint:Vs(this.recurrentConstraint),biasConstraint:Vs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,n)}}u1.className="LSTMCell";et(u1);class Y6 extends Bl{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new u1(t);super(t)}call(t,n){return Me(()=>{this.cell.dropoutMask!=null&&(hn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}Y6.className="LSTM";et(Y6);class UI extends l1{constructor(t){super(t);this.cells=t.cells}get stateSize(){const t=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?t.push(...n.stateSize):t.push(n.stateSize);return t}call(t,n){return Me(()=>{t=t;let s=t.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(s.splice(0,a.stateSize.length)):o.push(s.splice(0,1));o.reverse();const r=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];s=o[a],a===0?i=[t[0]].concat(s):i=[i[0]].concat(s),i=l.call(i,n),r.push(i.slice(1))}s=[];for(const a of r.slice().reverse())s.push(...a);return[i[0]].concat(s)})}build(t){mx(t)&&(t=t[0]),t=t;let n;this.cells.forEach((s,o)=>{Pu(`RNNCell_${o}`,()=>{s.build(t),Array.isArray(s.stateSize)?n=s.stateSize[0]:n=s.stateSize,t=[t[0],n]})}),this.built=!0}getConfig(){const t=super.getConfig(),n=r=>({className:r.getClassName(),config:r.getConfig()}),o={cells:this.cells.map(n)};return Object.assign({},t,o)}static fromConfig(t,n,s={}){const o=[];for(const r of n.cells)o.push(xa(r,s));return new t({cells:o})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const n of this.cells)t.push(...n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.cells)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.cells)n.push(...s.trainableWeights);return n.concat(t)}return t}getWeights(){const t=[];for(const n of this.cells)t.push(...n.weights);return vx(t)}setWeights(t){const n=[];for(const s of this.cells){const o=s.weights.length,r=t.splice(o);for(let i=0;i<s.weights.length;++i)n.push([s.weights[i],r[i]])}PI(n)}}UI.className="StackedRNNCells";et(UI);function wl(e){const{ones:t,rate:n,training:s=!1,count:o=1,dropoutFunc:r}=e,i=()=>r!=null?r(t(),n):jV(t(),n),a=()=>Zg(i,t,s);return!o||o<=1?Ji(a().clone()):Array(o).fill(void 0).map(a).map(u=>Ji(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var KBe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n};class X6 extends Bl{constructor(t){if(t.unroll)throw new Qt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new Qt("It is not possible at the moment to stack convolutional cells.");super(t);this.inputSpec=[new zs({ndim:5})]}call(t,n){return Me(()=>{if(this.cell.dropoutMask!=null&&(hn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ye("ConvRNN2D cell does not support constants");const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}computeOutputShape(t){let n=this.computeSingleOutputShape(t);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([t[0],...n.slice(-3)])]),n}getInitialState(t){return Me(()=>{const{stateSize:n}=this.cell,s=t.shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)],i=qs(r);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(t,n=!1){Me(()=>{if(!this.stateful)throw new Li("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)];if(s[0]==null)throw new ye("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qs(r)):this.states_=[qs(r)];else if(t==null)hn(this.states_),this.keptStates!=null&&(hn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qs(r)):this.states_[0]=qs(r);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new ye(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n?this.keptStates.push(this.states_.slice()):hn(this.states_);for(let a=0;a<this.states_.length;++a){const l=t[a],u=r;if(!Mn(l.shape,u))throw new ye(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Ji(a.clone()))})}computeSingleOutputShape(t){const{dataFormat:n,filters:s,kernelSize:o,padding:r,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",u=t[l?3:2],c=t[l?4:3],d=$i(u,o[0],r,i[0],a[0]),f=$i(c,o[1],r,i[1],a[1]);return[...t.slice(0,2),...l?[s,d,f]:[d,f,s]]}}X6.className="ConvRNN2D";class jI extends u1{constructor(t){const{filters:n,kernelSize:s,strides:o,padding:r,dataFormat:i,dilationRate:a}=t;super(Object.assign({},t,{units:n}));this.filters=n,Ys(this.filters,"filters"),this.kernelSize=pd(s,2,"kernelSize"),this.kernelSize.forEach(l=>Ys(l,"kernelSize")),this.strides=pd(o||1,2,"strides"),this.strides.forEach(l=>Ys(l,"strides")),this.padding=r||"valid",Tr(this.padding),this.dataFormat=i||"channelsLast",Es(this.dataFormat),this.dilationRate=pd(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Ys(l,"dilationRate"))}build(t){var n;t=Wn(t);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new ye(`The channel dimension of the input should be defined. Found ${t[s]}`);const o=t[s],r=4,i=this.kernelSize.concat([o,this.filters*r]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends oi{apply(f,h){const p=u.apply([c]),g=Pl([c]),m=u.apply([c*2]);return EI([p,g,m])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,n){return Me(()=>{if(t.length!==3)throw new ye(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const s=n.training||!1,o=t[0],r=t[1],i=t[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=wl({ones:()=>Jr(o),rate:this.dropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(ne,be,te)=>!be||!be[te]?ne:me(be[te],ne);let c=u(o,l,0),d=u(o,l,1),f=u(o,l,2),h=u(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=wl({ones:()=>Jr(r),rate:this.recurrentDropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let g=u(r,p,0),m=u(r,p,1),v=u(r,p,2),b=u(r,p,3);const $=3,[y,w,C,x]=$r(this.kernel.read(),a,$),[k,I,S,T]=this.useBias?$r(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,y,k,this.padding),d=this.inputConv(d,w,I,this.padding),f=this.inputConv(f,C,S,this.padding),h=this.inputConv(h,x,T,this.padding);const[_,N,O,M]=$r(this.recurrentKernel.read(),a,$);g=this.recurrentConv(g,_),m=this.recurrentConv(m,N),v=this.recurrentConv(v,O),b=this.recurrentConv(b,M);const D=this.recurrentActivation.apply(st(c,g)),F=this.recurrentActivation.apply(st(d,m)),V=st(me(F,i),me(D,this.activation.apply(st(f,v)))),U=me(this.recurrentActivation.apply(st(h,b)),this.activation.apply(V));return[U,U,V]})}getConfig(){const t=super.getConfig(),n=KBe(t,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,s)}inputConv(t,n,s,o){const r=qu(t,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?Oi(r,s,this.dataFormat):r}recurrentConv(t,n){return qu(t,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}jI.className="ConvLSTM2DCell";et(jI);class Z6 extends X6{constructor(t){const n=new jI(t);super(Object.assign({},t,{cell:n}))}static fromConfig(t,n){return new t(n)}}Z6.className="ConvLSTM2D";et(Z6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GI extends Tn{constructor(t){super(t);this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const n=t.shape,s=[];for(let o=0;o<this.noiseShape.length;++o)s.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return s}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=sn(t);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,r=this.getNoiseShape(s);return Zg(()=>jV(s,this.rate,r,this.seed),()=>s,o)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(t,n),t}dispose(){return super.dispose()}}GI.className="Dropout";et(GI);class J6 extends GI{constructor(t){super(t);this.inputSpec=[{ndim:3}]}getNoiseShape(t){const n=t.shape;return[n[0],1,n[2]]}}J6.className="SpatialDropout1D";et(J6);class Q6 extends Tn{constructor(t){super(t);if(this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let n=null;t.batchSize!=null&&(n=t.batchSize),this.batchInputShape=[n,t.inputDim]}this.units=t.units,Ys(this.units,"units"),this.activation=yl(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=hs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=hs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ws(t.kernelConstraint),this.biasConstraint=Ws(t.biasConstraint),this.kernelRegularizer=ps(t.kernelRegularizer),this.biasRegularizer=ps(t.biasRegularizer),this.activityRegularizer=ps(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=Wn(t);const n=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(t){t=Wn(t);const n=t.slice();return n[n.length-1]=this.units,n}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=sn(t),o=MV(this.activation.getClassName());let r;return o!=null?r=qi(s,this.kernel.read(),o,this.bias?this.bias.read():null):(r=qi(s,this.kernel.read()),this.bias!=null&&(r=Oi(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const t={units:this.units,activation:bl(this.activation),useBias:this.useBias,kernelInitializer:vs(this.kernelInitializer),biasInitializer:vs(this.biasInitializer),kernelRegularizer:qn(this.kernelRegularizer),biasRegularizer:qn(this.biasRegularizer),activityRegularizer:qn(this.activityRegularizer),kernelConstraint:Vs(this.kernelConstraint),biasConstraint:Vs(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}Q6.className="Dense";et(Q6);class e5 extends Tn{constructor(t){t=t||{};super(t);this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Wn(t);for(const n of t.slice(1))if(n==null)throw new ye(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],fl(t,1)]}call(t,n){return Me(()=>{this.invokeCallHook(t,n);let s=sn(t);if(this.dataFormat==="channelsFirst"&&s.rank>1){const o=[0];for(let r=2;r<s.rank;++r)o.push(r);o.push(1),s=An(s,o)}return _4e(s)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(t,n),t}}e5.className="Flatten";et(e5);class t5 extends Tn{constructor(t){super(t);this.supportsMasking=!0,this.activation=yl(t.activation)}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=sn(t);return this.activation.apply(s)})}getConfig(){const t={activation:bl(this.activation)},n=super.getConfig();return Object.assign(t,n),t}}t5.className="Activation";et(t5);class n5 extends Tn{constructor(t){super(t);this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,n){return Me(()=>(t=sn(t),T4e(t,this.n)))}getConfig(){const t={n:this.n},n=super.getConfig();return Object.assign(t,n),t}}n5.className="RepeatVector";et(n5);class s5 extends Tn{constructor(t){super(t);this.targetShape=t.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,n){const s="Total size of new array must be unchanged.",o=n.slice();let r=1,i=null;for(let l=0;l<o.length;++l){const u=o[l];if(this.isUnknown(u))if(i===null)i=l;else throw new ye("Can only specifiy one unknown dimension.");else r*=u}const a=fl(t);if(i!==null){if(r===0||a%r!==0)throw new ye(s);o[i]=a/r}else if(a!==r)throw new ye(s);return o}computeOutputShape(t){let n=!1;for(let s=0;s<t.length;++s)if(this.isUnknown(t[s])){n=!0;break}return n?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=sn(t),o=s.shape,r=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return ke(s,r)})}getConfig(){const t={targetShape:this.targetShape},n=super.getConfig();return Object.assign(t,n),t}}s5.className="Reshape";et(s5);class o5 extends Tn{constructor(t){super(t);if(t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const n=Ti(1,t.dims.length+1);if(!Mn(t.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new zs({ndim:this.dims.length+1})]}computeOutputShape(t){t=Wn(t);const n=t.slice();return this.dims.forEach((s,o)=>{n[o+1]=t[s]}),n}call(t,n){return An(sn(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},n=super.getConfig();return Object.assign(t,n),t}}o5.className="Permute";et(o5);class r5 extends Tn{constructor(t){super(t==null?{}:t);this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,t),n}computeMask(t,n){const s=sn(t),o=-1;return ax(up(s,this.maskValue),o)}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=sn(t),o=-1,r=!0,i=ax(up(s,this.maskValue),o,r);return me(s,gt(i,s.dtype))})}}r5.className="Masking";et(r5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class i5 extends Tn{constructor(t){super(t);if(this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let n=null;t.batchSize!=null&&(n=t.batchSize),t.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(rs(t.inputLength))}this.inputDim=t.inputDim,Ys(this.inputDim,"inputDim"),this.outputDim=t.outputDim,Ys(this.outputDim,"outputDim"),this.embeddingsInitializer=hs(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ps(t.embeddingsRegularizer),this.activityRegularizer=ps(t.activityRegularizer),this.embeddingsConstraint=Ws(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,n){return Me(()=>this.maskZero?(t=sn(t),up(t,kn(t))):null)}computeOutputShape(t){if(t=Wn(t),this.inputLength==null)return[...t,this.outputDim];const n=rs(this.inputLength);if(n.length!==t.length-1)throw new ye(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let s=0;for(let o=0;o<n.length;++o){const r=n[o],i=t[o+1];if(r!=null&&i!=null&&r!==i)throw new ye(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);r==null&&(n[s]=i),s++}}return[t[0],...n,this.outputDim]}call(t,n){return Me(()=>{this.invokeCallHook(t,n);let s=sn(t);s.dtype!=="int32"&&(s=e1(s,"int32"));const o=UV(this.embeddings.read(),ke(s,[s.size]));return ke(o,Wn(this.computeOutputShape(s.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:vs(this.embeddingsInitializer),embeddingsRegularizer:qn(this.embeddingsRegularizer),activityRegularizer:qn(this.activityRegularizer),embeddingsConstraint:Vs(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(t,n),t}}i5.className="Embedding";et(i5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vc extends Tn{constructor(t){super(t||{});this.supportsMasking=!0}mergeFunction(t){throw new Qt}computeElementwiseOpOutputShape(t,n){if(t==null||n==null)return null;if(t.length<n.length)return this.computeElementwiseOpOutputShape(n,t);if(n.length===0)return t;const s=t.slice(0,t.length-n.length);for(let o=0;o<n.length;++o){const r=t[t.length-n.length+o],i=n[o];if(r==null||i==null||r<0||i<0)s.push(null);else if(r===1)s.push(i);else if(i===1)s.push(r);else{if(r!==i)throw new ye("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(n));s.push(r)}}return s}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Wn(t)]),t=t,t.length<2)throw new ye(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let n=[];for(const r of t)r!=null&&r[0]!==null&&n.push(r[0]);if(n=dl(n),n.length>1)throw new ye(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let s=t[0]==null?null:t[0].slice(1);for(let r=1;r<t.length;++r){const i=t[r]==null?null:t[r].slice(1);s=this.computeElementwiseOpOutputShape(s,i)}const o=t.map(r=>r.length);t.indexOf(null)===-1&&dl(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,n){return Me(()=>{if(t=t,this.reshapeRequired){const s=[],o=t.map(r=>r.rank);if(o.indexOf(null)===-1){const r=vl(o);for(let i of t){const a=i.rank;for(let l=0;l<r-a;++l)i=Yg(i,1);s.push(i)}return this.mergeFunction(s)}else{let r=!1;for(const l of t){const u=l.rank;if(u==null){const c=l.shape,d=c[0],f=c.slice(1).concat([d]);let h=ke(l,[d].concat(fl(c.slice(1))));h=An(h,[1,0]),h=ke(h,f),s.push(h),r=!0}else if(u>1){const c=Ti(1,u).concat([0]);s.push(An(l,c)),r=!0}else s.push(l)}let i=this.mergeFunction(s);const a=i.rank;if(r){if(a==null){const l=i.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));i=ke(An(ke(i,[-1,c]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Ti(0,a-1));i=An(i,l)}}return i}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let n;t[0]==null?n=null:n=t[0].slice(1);for(let o=1;o<t.length;++o){const r=t[o]==null?null:t[o].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let s=[];for(const o of t)o!=null&&o[0]!==null&&s.push(o[0]);return s=dl(s),s.length===1?n=s.concat(n):n=[null].concat(n),n}computeMask(t,n){return Me(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ye("`mask` should be an Array");if(!Array.isArray(t))throw new ye("`inputs` should be an Array");if(n.length!==t.length)throw new ye(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:Pr(o,0));let s=n[0];for(let o=1;o<n.length-1;++o)s=Na(s,n[o]);return s})}}class a5 extends vc{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=st(n,t[s]);return n})}}a5.className="Add";et(a5);class l5 extends vc{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=me(n,t[s]);return n})}}l5.className="Multiply";et(l5);class u5 extends vc{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=st(n,t[s]);return me(1/t.length,n)})}}u5.className="Average";et(u5);class c5 extends vc{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0];for(let s=1;s<t.length;++s)n=Ml(n,t[s]);return n})}}c5.className="Maximum";et(c5);class d5 extends vc{constructor(t){super(t)}mergeFunction(t){return Me(()=>{let n=t[0];for(let s=1;s<t.length;++s)n=qy(n,t[s]);return n})}}d5.className="Minimum";et(d5);class f5 extends vc{constructor(t){super(t);this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new ye("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let n=!0;for(const o of t)if(o!=null){n=!1;break}if(n)return;const s=[];for(let o=0;o<t.length;++o){const r=t[o].slice();r.splice(this.axis,1);let i=!1;for(const a of s)if(Mn(a,r)){i=!0;break}i||s.push(r)}if(s.length>1)throw new ye("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Me(()=>EI(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new ye("A `Concatenate` layer should be called on a list of inputs.");const n=t,s=n[0].slice(),o=this.axis<0?s.length+this.axis:this.axis;for(const r of n.slice(1)){if(s[o]==null||r[o]==null){s[o]=null;break}s[o]+=r[o]}return s}computeMask(t,n){if(n==null)return null;if(!Array.isArray(n))throw new ye("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new ye("`inputs` should be an array for Concatenate");if(n.length!==t.length)throw new ye(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${t.length})`);return Me(()=>{let s=!0;if(n.forEach(i=>{if(i!=null){s=!1;return}}),s)return null;const o=[];for(let i=0;i<t.length;++i)n[i]==null?o.push(gt(Jr(t[i]),"bool")):n[i].rank<t[i].rank?o.push(Pr(n[i],-1)):o.push(n[i]);const r=Co(o,this.axis);return kz(r,-1,!1)})}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}f5.className="Concatenate";et(f5);function Vf(e,t){for(;e<0;)e+=t;return e}function qBe(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Qt("batchDot is not implemented for tensors of 4D or higher rank yet");if(K(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),K(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new Qt("batchDot is not implemented for complex64-type Tensors yet.");const s=e.shape.length,o=t.shape.length;n==null&&(n=[s-1,o-2]);const r=n;return Me(()=>{let i;if(s>o){i=s-o;const l=[];for(let u=0;u<i;++u)l.push(1);t=ke(t,t.shape.concat(l))}else if(o>s){i=o-s;const l=[];for(let u=0;u<i;++u)l.push(1);e=ke(e,e.shape.concat(l))}else i=0;let a;if(e.shape.length===2&&t.shape.length===2)r[0]===r[1]?a=Tt(me(e,t),r[0]):a=Tt(me(An(e,[1,0]),t),r[1]);else{const l=r[0]!==e.shape.length-1,u=r[1]===t.shape.length-1;a=Dn(e,t,l,u)}if(i>0){let l;s>o?l=s+o-3:l=s-1;const u=[];for(let c=l;c<l+i;++c)u.push(c);a=Wg(a,u)}return a.shape.length===1&&(a=Pr(a,1)),a})}class h5 extends vc{constructor(t){super(t);this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){K(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0],s=t[1];if(n.length>3||s.length>3)throw new Qt("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);if(n[o[0]]!==s[o[1]])throw new ye(`Dimension incompatibility: ${n[o[0]]} !== ${s[o[1]]}`)}mergeFunction(t){if(t.length!==2)throw new ye(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let n=t[0],s=t[1],o;return Array.isArray(this.axes)?o=this.axes.map((r,i)=>Vf(r,t[i].shape.length)):o=[Vf(this.axes,n.shape.length),Vf(this.axes,s.shape.length)],this.normalize&&(n=Lb(n,o[0]),s=Lb(s,o[1])),qBe(n,s,o)}interpretAxes(t,n){let s;return Array.isArray(this.axes)?s=this.axes:s=[Vf(this.axes,t.length),Vf(this.axes,n.length)],s}computeOutputShape(t){K(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0].slice(),s=t[1].slice();if(n.length>3||s.length>3)throw new Qt("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);n.splice(o[0],1),s.splice(o[1],1),s.splice(0,1);const r=n.concat(s);return r.length===1&&r.push(1),r}computeMask(t,n){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(t,n),t}}h5.className="Dot";et(h5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class p5 extends Tn{constructor(t){super(t);this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,t),n}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=sn(t);return Zg(()=>st(t1(s.shape,0,this.stddev),s),()=>s,n.training||!1)})}}p5.className="GaussianNoise";et(p5);class g5 extends Tn{constructor(t){super(t);this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Me(()=>{this.invokeCallHook(t,n);const s=sn(t);return this.rate>0&&this.rate<1?Zg(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return me(s,t1(s.shape,1,r))},()=>s,n.training||!1):s})}}g5.className="GaussianDropout";et(g5);class m5 extends Tn{constructor(t){super(t);this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||sn(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Me(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(t);return Zg(()=>{const r=sn(t),i=1.6732632423543772,a=1.0507009873554805,l=-i*a;let u=ff(Yy(s),this.rate);u=e1(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,f=st(me(r,u),me(st(u,-1),l));return st(me(f,c),d)},()=>sn(t),n.training||!1)}return t})}}m5.className="AlphaDropout";et(m5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hp(e,t,n,s,o,r=.001){let i;if(e.rank===2)i=BRe(e,t,n,s,o,r);else if(e.rank===3)i=VRe(e,t,n,s,o,r);else if(e.rank===4)i=HRe(e,t,n,s,o,r);else throw new Qt(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return i}function YBe(e,t,n,s,o=.001){return Me(()=>{const r=PS(e,s),i=r.mean,a=r.variance;return[hp(e,i,a,n,t,o),i,a]})}function XBe(e,t,n,s,o=.001){return Me(()=>{const r=PS(e,s),i=r.mean,a=r.variance,l=[];for(const p of Ti(0,e.rank))s.indexOf(p)!==-1?l.push(1):l.push(e.shape[p]);const u=ke(i,l),c=ke(a,l),d=t==null?null:ke(t,l),f=n==null?null:ke(n,l);return[hp(e,u,c,f,d,o),i,a]})}function ZBe(e,t,n,s,o=.001){return Mn(s.slice().sort(),Ti(0,e.rank-1))?YBe(e,t,n,s,o):XBe(e,t,n,s,o)}class v5 extends Tn{constructor(t){t==null&&(t={});super(t);this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=hs(t.betaInitializer||"zeros"),this.gammaInitializer=hs(t.gammaInitializer||"ones"),this.movingMeanInitializer=hs(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=hs(t.movingVarianceInitializer||"ones"),this.betaConstraint=Ws(t.betaConstraint),this.gammaConstraint=Ws(t.gammaConstraint),this.betaRegularizer=ps(t.betaRegularizer),this.gammaRegularizer=ps(t.gammaRegularizer)}build(t){t=Wn(t);const n=this.axis>=0?this.axis:this.axis+t.length,s=t[n];if(s==null)throw new ye(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new zs({ndim:t.length,axes:{[n]:s}})];const o=[s];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,n){return Me(()=>{const s=n.training==null?!1:n.training,o=sn(t),r=o.shape,i=r.length,a=Ti(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const u=Qu(1,i);u[l]=r[l];const c=a.slice();c.sort();const d=!Mn(c,Ti(0,i).slice(0,i-1)),f=()=>{if(d){const b=ke(this.movingMean.read(),u),$=ke(this.movingVariance.read(),u),y=this.center?ke(this.beta.read(),u):null,w=this.scale?ke(this.gamma.read(),u):null;return hp(o,b,$,y,w,this.epsilon)}else return hp(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return f();const[h,p,g]=ZBe(o,this.gamma.read(),this.beta.read(),a,this.epsilon),m=(b,$,y)=>{Me(()=>{const w=1-y,C=b.read(),x=me(Et(C,$),w);b.write(Et(C,x))})};return(()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,g,this.momentum)})(),h})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:vs(this.betaInitializer),gammaInitializer:vs(this.gammaInitializer),movingMeanInitializer:vs(this.movingMeanInitializer),movingVarianceInitializer:vs(this.movingVarianceInitializer),betaRegularizer:qn(this.betaRegularizer),gammaRegularizer:qn(this.gammaRegularizer),betaConstraint:Vs(this.betaConstraint),gammaConstraint:Vs(this.gammaConstraint)},n=super.getConfig();return Object.assign(t,n),t}}v5.className="BatchNormalization";et(v5);class b5 extends Tn{constructor(t){t==null&&(t={});super(t);if(this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=hs(t.betaInitializer||"zeros"),this.gammaInitializer=hs(t.gammaInitializer||"ones"),this.betaRegularizer=ps(t.betaRegularizer),this.gammaRegularizer=ps(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=Wn(t);const n=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=n);for(const r of this.axis)if(r<0||r>=n)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==dl(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(r=>t[r]),o=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(t,n){const s=sn(t),o=s.shape,r=o.length;return Me(()=>{let{mean:a,variance:l}=PS(s,this.axis,!0);const u=Qu(1,r);for(const g of this.axis)u[g]=o[g];const c=g=>g!=null&&g.shape.length!==r?ke(g,u):g;let d=c(this.gamma.read()),f=c(this.beta.read());const h=[],p=[];for(let g=0;g<r;++g)this.axis.indexOf(g)!==-1?(h.push(o[g]),p.push(1)):(h.push(1),p.push(o[g]));return a=mi(a,h),l=mi(l,h),d=mi(d,p),f=mi(f,p),hp(s,a,l,f,d,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:vs(this.betaInitializer),gammaInitializer:vs(this.gammaInitializer),betaRegularizer:qn(this.betaRegularizer),gammaRegularizer:qn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(t,n),t}}b5.className="LayerNormalization";et(b5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JBe(e,t,n){return Me(()=>{if(e.rank!==4)throw new ye(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new ye("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ii()),n!=="channelsLast"&&n!=="channelsFirst")throw new ye(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return n==="channelsFirst"?s=[[0,0],[0,0],t[0],t[1]]:s=[[0,0],t[0],t[1],[0,0]],FS(e,s)})}class y5 extends Tn{constructor(t){t==null&&(t={});super(t);if(this.dataFormat=t.dataFormat==null?Ii():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new ye(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let n,s;if(typeof t.padding[0]=="number")n=[t.padding[0],t.padding[0]],s=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new ye(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(n=t.padding[0],t.padding[1].length!==2)throw new ye(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);s=t.padding[1]}this.padding=[n,s]}this.inputSpec=[new zs({ndim:4})]}computeOutputShape(t){t=Wn(t);let n,s;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?n=t[2]+this.padding[0][0]+this.padding[0][1]:n=null,t[3]!=null&&t[3]>=0?s=t[3]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],t[1],n,s]):(t[1]!=null&&t[1]>=0?n=t[1]+this.padding[0][0]+this.padding[0][1]:n=null,t[2]!=null&&t[2]>=0?s=t[2]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],n,s,t[3]])}call(t,n){return Me(()=>JBe(sn(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}y5.className="ZeroPadding2D";et(y5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c1(e,t,n,s,o,r){return Me(()=>{Es(o),zV(r),Tr(s),n==null&&(n=[1,1]),s==null&&(s="valid"),o==null&&(o=Ii()),r==null&&(r="max"),e=VI(e,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=MS(e,t,n,a):i=kS(e,t,n,a),o==="channelsFirst"&&(i=An(i,[0,3,1,2])),i})}function w5(e,t,n,s,o,r){return Me(()=>{Es(o),zV(r),Tr(s),n==null&&(n=[1,1,1]),s==null&&(s="valid"),o==null&&(o=Ii()),r==null&&(r="max"),e=F6(e,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=bMe(e,t,n,a):i=NRe(e,t,n,a),o==="channelsFirst"&&(i=An(i,[0,4,1,2,3])),i})}class $5 extends Tn{constructor(t){t.poolSize==null&&(t.poolSize=2);super(t);if(typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new ye(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(Ys(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new ye(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);Ys(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,Tr(this.padding),this.inputSpec=[new zs({ndim:3})]}computeOutputShape(t){t=Wn(t);const n=$i(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],n,t[2]]}call(t,n){return Me(()=>{this.invokeCallHook(t,n),t=Yg(sn(t),2);const s=this.poolingFunction(sn(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Wg(s,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(t,n),t}}class C5 extends $5{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Es(r),Tr(o),c1(t,n,s,o,r,"max")}}C5.className="MaxPooling1D";et(C5);class x5 extends $5{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Es(r),Tr(o),c1(t,n,s,o,r,"avg")}}x5.className="AveragePooling1D";et(x5);class k5 extends Tn{constructor(t){t.poolSize==null&&(t.poolSize=[2,2]);super(t);if(this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new ye(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];Ys(this.poolSize,"poolSize"),Ys(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Es(this.dataFormat),Tr(this.padding),this.inputSpec=[new zs({ndim:4})]}computeOutputShape(t){t=Wn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2];return n=$i(n,this.poolSize[0],this.padding,this.strides[0]),s=$i(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,s]:[t[0],n,s,t[3]]}call(t,n){return Me(()=>(this.invokeCallHook(t,n),this.poolingFunction(sn(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class S5 extends k5{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Es(r),Tr(o),c1(t,n,s,o,r,"max")}}S5.className="MaxPooling2D";et(S5);class I5 extends k5{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Es(r),Tr(o),c1(t,n,s,o,r,"avg")}}I5.className="AveragePooling2D";et(I5);class T5 extends Tn{constructor(t){t.poolSize==null&&(t.poolSize=[2,2,2]);super(t);if(this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new ye(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];Ys(this.poolSize,"poolSize"),Ys(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Es(this.dataFormat),Tr(this.padding),this.inputSpec=[new zs({ndim:5})]}computeOutputShape(t){t=Wn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[4]:t[3];return n=$i(n,this.poolSize[0],this.padding,this.strides[0]),s=$i(s,this.poolSize[1],this.padding,this.strides[1]),o=$i(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,s,o]:[t[0],n,s,o,t[4]]}call(t,n){return Me(()=>(this.invokeCallHook(t,n),this.poolingFunction(sn(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class E5 extends T5{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Es(r),Tr(o),w5(t,n,s,o,r,"max")}}E5.className="MaxPooling3D";et(E5);class _5 extends T5{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return Es(r),Tr(o),w5(t,n,s,o,r,"avg")}}_5.className="AveragePooling3D";et(_5);class N5 extends Tn{constructor(t){super(t);this.inputSpec=[new zs({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,n){throw new Qt}}class A5 extends N5{constructor(t){super(t||{})}call(t,n){return Me(()=>{const s=sn(t);return $s(s,1)})}}A5.className="GlobalAveragePooling1D";et(A5);class D5 extends N5{constructor(t){super(t||{})}call(t,n){return Me(()=>{const s=sn(t);return Gi(s,1)})}}D5.className="GlobalMaxPooling1D";et(D5);class R5 extends Tn{constructor(t){super(t);this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Es(this.dataFormat),this.inputSpec=[new zs({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,n){throw new Qt}getConfig(){const t={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class O5 extends R5{call(t,n){return Me(()=>{const s=sn(t);return this.dataFormat==="channelsLast"?$s(s,[1,2]):$s(s,[2,3])})}}O5.className="GlobalAveragePooling2D";et(O5);class M5 extends R5{call(t,n){return Me(()=>{const s=sn(t);return this.dataFormat==="channelsLast"?Gi(s,[1,2]):Gi(s,[2,3])})}}M5.className="GlobalMaxPooling2D";et(M5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class P5 extends Tn{constructor(t){super(t);this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(t,n),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,n,s={}){const o=n.layer,r=xa(o,s);delete n.layer;const i={layer:r};return Object.assign(i,n),new t(i)}}class F5 extends P5{constructor(t){super(t);this.supportsMasking=!0}build(t){if(t=Wn(t),t.length<3)throw new ye(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=Wn(t);const n=[t[0]].concat(t.slice(2)),s=this.layer.computeOutputShape(n),o=t[1];return[s[0],o].concat(s.slice(1))}call(t,n){return Me(()=>(t=sn(t),G6((i,a)=>[sn(this.layer.call(i,n)),[]],t,[],!1,null,null,!1,!0)[1]))}}F5.className="TimeDistributed";et(F5);function QBe(e){mc(C4e,"BidirectionalMergeMode",e)}const eze="concat";class L5 extends P5{constructor(t){super(t);const n=t.layer.getConfig(),s={};s.className=t.layer.getClassName(),s.config=n,this.forwardLayer=xa(s),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=t.layer.getClassName(),o.config=n,this.backwardLayer=xa(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?eze:t.mergeMode,QBe(this.mergeMode),t.weights)throw new Qt("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const n=t.length,s=Math.floor(n/2);this.forwardLayer.setWeights(t.slice(0,s)),this.backwardLayer.setWeights(t.slice(s))}computeOutputShape(t){let n=this.forwardLayer.computeOutputShape(t);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let s,o,r;return this.returnState&&(r=n.slice(1)),s=n[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,o=[s]):this.mergeMode==null?o=[s,s.slice()]:o=[s],this.returnState?this.mergeMode==null?o.concat(r).concat(r.slice()):[s].concat(r).concat(r.slice()):Lo(o)}apply(t,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=j6(t,s,o,this.numConstants);if(t=r.inputs,s=r.initialState,o=r.constants,Array.isArray(t)&&(s=t.slice(1),t=t[0]),(s==null||s.length===0)&&o==null)return super.apply(t,n);const i=[],a=[];if(s!=null){const u=s.length;if(u%2>0)throw new ye("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=s,i.push(...s);const c=s.map(d=>new zs({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(o!=null)throw new Qt("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof Hi;for(const u of i)if(u instanceof Hi!==l)throw new ye("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[t].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(t,n)}call(t,n){return Me(()=>{const s=n.initialState;let o,r;if(s==null)o=this.forwardLayer.call(t,n),r=this.backwardLayer.call(t,n);else{const l=s.slice(0,s.length/2),u=s.slice(s.length/2);o=this.forwardLayer.call(t,Object.assign(n,{initialState:l})),r=this.backwardLayer.call(t,Object.assign(n,{initialState:u}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(r.slice(1))),o=o[0],r=r[0]),this.returnSequences&&(r=Xu(r,1));let a;return this.mergeMode==="concat"?a=EI([o,r]):this.mergeMode==="sum"?a=st(o,r):this.mergeMode==="ave"?a=me(.5,st(o,r)):this.mergeMode==="mul"?a=me(o,r):this.mergeMode==null&&(a=[o,r]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Pu(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Pu(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,n){Array.isArray(n)&&(n=n[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[n,n]:s=n:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const r=this.forwardLayer.states.map(i=>null);return Array.isArray(s)?s.concat(r).concat(r):[s].concat(r).concat(r)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,n){const s=xa(n.layer);if(delete n.layer,n.numConstants!=null)throw new Qt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=s,new t(o)}}L5.className="Bidirectional";et(L5);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tze=je();tze.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ER;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(ER||(ER={}));var _R;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(_R||(_R={}));/** @license See the LICENSE file. */var B5={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(On,e,!1)})(B5);var z5={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(On,e,!1)})(z5);var V5={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(On,e,!1)})(V5);var W5={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(On,e,!1)})(W5);var H5={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,g,m,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,g=-32;g<b;++g)d&&(h^=d.charCodeAt((g+32)%d.length)),g===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(m=m+1640531527|0,f=v[g&127]^=h+m,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,g=4*128;g>0;--g)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=m,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(On,e,!1)})(H5);var U5={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(On,e,!1)})(U5);var j5={exports:{}};(function(e){(function(t,n){var s=(0,eval)("this"),o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,w,C){var x=[];w=w==!0?{entropy:!0}:w||{};var k=v(m(w.entropy?[y,$(t)]:y==null?b():y,3),x),I=new p(x),S=function(){for(var T=I.g(r),_=l,N=0;T<u;)T=(T+N)*o,_*=o,N=I.g(1);for(;T>=c;)T/=2,_/=2,N>>>=1;return(T+N)/_};return S.int32=function(){return I.g(4)|0},S.quick=function(){return I.g(4)/4294967296},S.double=S,v($(I.S),t),(w.pass||C||function(T,_,N,O){return O&&(O.S&&g(O,I),T.state=function(){return g(I,{})}),N?(n[a]=T,_):T})(S,k,"global"in w?w.global:this==n,w.state)}n["seed"+a]=h;function p(y){var w,C=y.length,x=this,k=0,I=x.i=x.j=0,S=x.S=[];for(C||(y=[C++]);k<o;)S[k]=k++;for(k=0;k<o;k++)S[k]=S[I=d&I+y[k%C]+(w=S[k])],S[I]=w;(x.g=function(T){for(var _,N=0,O=x.i,M=x.j,D=x.S;T--;)_=D[O=d&O+1],N=N*o+D[d&(D[O]=D[M=d&M+_])+(D[M]=_)];return x.i=O,x.j=M,N})(o)}function g(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function m(y,w){var C=[],x=typeof y,k;if(w&&x=="object")for(k in y)try{C.push(m(y[k],w-1))}catch{}return C.length?C:x=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",x,k=0;k<C.length;)w[d&k]=d&(x^=w[d&k]*19)+C.charCodeAt(k++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(j5);var nze=B5.exports,sze=z5.exports,oze=V5.exports,rze=W5.exports,ize=H5.exports,aze=U5.exports,vf=j5.exports;vf.alea=nze;vf.xor128=sze;vf.xorwow=oze;vf.xorshift7=rze;vf.xor4096=ize;vf.tychei=aze;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var NR;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(NR||(NR={}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function It(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&K(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lze=rV;class d1 extends $k{constructor(){super();this.blockSize=48,this.firstUse=!0,this.data=new bB(this,Ja())}nextDataId(){return d1.nextDataId++}write(t,n,s){this.firstUse&&(this.firstUse=!1,je().get("IS_NODE")&&vr(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:t,dtype:s,refCount:1}),o}makeTensorInfo(t,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&Vp(s[0])){const r=s.map(i=>cl(i));o=this.write(r,t,n)}else o=this.write(s,t,n);return{dataId:o,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,s,o,r){this.data.set(t,{values:n,dtype:o,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:s}=this.data.get(t);if(n==="complex64"){const o=this.readSync(s.real.dataId),r=this.readSync(s.imag.dataId);return Aa(o,r)}return this.data.get(t).values}bufferSync(t){const n=this.readSync(t.dataId);let s=n;if(t.dtype==="string")try{s=n.map(o=>Od(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return gn(t.shape,t.dtype,s)}makeOutput(t,n,s){const o=this.write(t,n,s);return Ja().makeTensorFromDataId(o,n,s,this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(t);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=Fo();return t(),{kernelMs:Fo()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){It([t],"where");const n=this.readSync(t.dataId);return lze(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}d1.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G5(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const uze=e=>{const{x:t}=e.inputs,n=e.backend;It(t,"abs");let s=new Float32Array(Ue(t.shape));const o=n.data.get(t.dataId).values;return s=G5(o),n.makeOutput(s,t.shape,t.dtype)},cze={kernelName:B0,backendName:"cpu",kernelFunc:uze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(e){return(t,n,s,o,r)=>{const i=nn(t,n),a=i.length,l=Dt(i),u=Ue(i),c=uo(r,u),d=t.length,f=n.length,h=Dt(t),p=Dt(n),g=Pd(t,i),m=Pd(n,i);if(g.length+m.length===0)for(let v=0;v<c.length;++v)c[v]=e(s[v%s.length],o[v%o.length]);else for(let v=0;v<c.length;++v){const b=Hp(v,a,l),$=b.slice(-d);g.forEach(x=>$[x]=0);const y=ji($,d,h),w=b.slice(-f);m.forEach(x=>w[x]=0);const C=ji(w,f,p);c[v]=e(s[y],o[C])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qo(e){const{inputs:t,backend:n}=e,{real:s,imag:o}=t,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(s.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(s.shape,"float32",r),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const dze={kernelName:_k,backendName:"cpu",kernelFunc:qo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hb(e,t,n="float32"){if(n==="complex64"){const o=Hb(e,t,"float32"),r=Hb(e,t,"float32");return qo({inputs:{real:o,imag:r},backend:e})}const s=So(Ue(t),n);return e.makeTensorInfo(t,n,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ea(e){const{inputs:t,backend:n}=e,{x:s}=t;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const fze={kernelName:cg,backendName:"cpu",kernelFunc:ea};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ec(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.data.get(s.dataId).complexTensorInfos.real,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const hze={kernelName:Zk,backendName:"cpu",kernelFunc:ec};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $l(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return ea({inputs:{x:o},backend:n});const i=Hb(n,o.shape,o.dtype),a=$l({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=qo({inputs:{real:a,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=ec({inputs:{input:o},backend:n}),a=$l({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!CB(o.dtype,r)){const i=ea({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(r==="int32"){const i=n.data.get(o.dataId).values,a=Int32Array.from(i);return n.makeTensorInfo(o.shape,"int32",a)}if(r==="bool"){const i=n.data.get(o.dataId).values,a=pc([0],o.dtype),[l,u]=Os((c,d)=>c!==d?1:0)(o.shape,[],i,a,"bool");return n.makeTensorInfo(u,"bool",l)}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const pze={kernelName:Zp,backendName:"cpu",kernelFunc:$l};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eo(e,t,n,s){return n==null?({inputs:o,backend:r})=>{const{a:i,b:a}=o,l=r;It([i,a],e);const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=i.dtype==="string"?Ju(u):u,f=i.dtype==="string"?Ju(c):c,h=s||i.dtype,[p,g]=t(i.shape,a.shape,d,f,h);return l.makeTensorInfo(g,h,p)}:({inputs:o,backend:r})=>{const{a:i,b:a}=o,l=r;if(i.dtype==="complex64"||a.dtype==="complex64"){const u=$l({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,g=$l({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),m=l.data.get(g.dataId),v=m.complexTensorInfos.real,b=m.complexTensorInfos.imag,$=l.data.get(v.dataId).values,y=l.data.get(b.dataId).values,[w,C,x]=n(i.shape,a.shape,h,p,$,y),k=l.makeTensorInfo(x,"float32",w),I=l.makeTensorInfo(x,"float32",C),S=qo({inputs:{real:k,imag:I},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(k),l.disposeIntermediateTensorInfo(I),S}else{const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=s||i.dtype,[f,h]=t(i.shape,a.shape,u,c,d);return l.makeTensorInfo(h,d,f)}}}function KI(e){return(t,n,s,o,r,i)=>{const a=nn(t,n),l=Ue(a),u=a.length,c=Dt(a),d=uo("float32",l),f=uo("float32",l),h=Pd(t,a),p=Pd(n,a),g=Aa(s,o),m=Aa(r,i),v=t.length,b=Dt(t),$=n.length,y=Dt(n);if(h.length+p.length===0)for(let w=0;w<d.length;w++){const C=w%g.length,x=w%m.length,k=e(g[C*2],g[C*2+1],m[x*2],m[x*2+1]);d[w]=k.real,f[w]=k.imag}else for(let w=0;w<d.length;w++){const C=Hp(w,u,c),x=C.slice(-v);h.forEach(_=>x[_]=0);const k=ji(x,v,b),I=C.slice(-$);p.forEach(_=>I[_]=0);const S=ji(I,$,y),T=e(g[k*2],g[k*2+1],m[S*2],m[S*2+1]);d[w]=T.real,f[w]=T.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5=Os((e,t)=>e+t),gze=KI((e,t,n,s)=>({real:e+n,imag:t+s})),tm=eo(uf,K5,gze),mze={kernelName:uf,backendName:"cpu",kernelFunc:tm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qI(e,t,n,s,o){const r=Ue(s),i=So(o,n);for(let a=0;a<e.length;a++){const l=e[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(r>0?i[l]+=t[a]:i[l]+=1)}return i}function q5(e,t,n,s=!1){const o=e.shape[0],r=e.shape[1],i=gn([o,n],t.dtype);for(let a=0;a<o;a++)for(let l=0;l<r;l++){const u=e.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(s?i.set(1,a,u):t.size>0?i.set(i.get(a,u)+t.get(a,l),a,u):i.set(i.get(a,u)+1,a,u))}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zl(e){return(t,n,s)=>{const o=uo(n,t.length);for(let r=0;r<t.length;++r)o[r]=e(t[r],s);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hn(e,t,n){return({inputs:s,attrs:o,backend:r})=>{const{x:i}=s;if(It(i,e),i.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const a=r,l=a.data.get(i.dataId).values,u=Ue(i.shape),c=n||i.dtype,d=zo(c,u);for(let f=0;f<u;++f)d[f]=t(l[f],o);return a.makeTensorInfo(i.shape,c,d)}}function bf(e,t,n){return({inputs:s,attrs:o,backend:r})=>{const{x:i}=s;if(It(i,e),i.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const a=r,l=a.data.get(i.dataId).values,u=n||i.dtype,c=t(l,u,o);return a.makeTensorInfo(i.shape,u,c)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5=zl(e=>Math.ceil(e)),vze=bf(Jp,Y5),bze={kernelName:Jp,backendName:"cpu",kernelFunc:vze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5(e,t,n,s){const o=zo(n,Ue(t));if(s&&n!=="string"){let r=0;e.forEach(i=>{const a=Ue(i.shape);o.set(i.vals,r),r+=a})}else{let r=0;e.forEach(i=>{const a=n==="string"?Ju(i.vals):i.vals;let l=0;for(let u=0;u<i.shape[0];++u){const c=u*t[1]+r;for(let d=0;d<i.shape[1];++d)o[c+d]=a[l++]}r+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z5=Os((e,t)=>e===t?1:0),J5=eo(ey,Z5,null,"bool"),yze={kernelName:ey,backendName:"cpu",kernelFunc:J5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5=zl(e=>Math.exp(e)),eW=bf(rg,Q5,"float32"),wze={kernelName:rg,backendName:"cpu",kernelFunc:eW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tW=zl(e=>Math.expm1(e)),$ze=bf(ig,tW),Cze={kernelName:ig,backendName:"cpu",kernelFunc:$ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nW=zl(e=>Math.floor(e)),xze=bf(ag,nW),kze={kernelName:ag,backendName:"cpu",kernelFunc:xze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sW(e,t,n,s,o,r,i,a,l){const u=gn([s,r],n);for(let c=0;c<s;c++){const d=[];let f=0;for(let h=0;h<o;h++){const p=e[c*o+h];f+=p*i[h],d.push(p)}if(f<0||f>=l/r)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<r;h++)u.values[c*r+h]=t.get(...t.indexToLoc(f*r+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oW(e,t,n){const s=gn(n,e.dtype);for(let o=0;o<s.size;++o){const i=s.indexToLoc(o).slice(),a=i[0],l=i[2],u=t.locToIndex([a,l]);i[2]=t.values[u];const c=e.locToIndex(i);0<=c&&c<e.values.length&&(s.values[o]=e.values[c])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rW=Os((e,t)=>e>t?1:0),Sze=eo(oy,rW,null,"bool"),Ize={kernelName:oy,backendName:"cpu",kernelFunc:Sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iW=Os((e,t)=>e>=t?1:0),Tze=eo(ug,iW,null,"bool"),Eze={kernelName:ug,backendName:"cpu",kernelFunc:Tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aW=Os((e,t)=>e<t?1:0),_ze=eo(iy,aW,null,"bool"),Nze={kernelName:iy,backendName:"cpu",kernelFunc:_ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lW=Os((e,t)=>e<=t?1:0),Aze=eo(ay,lW,null,"bool"),Dze={kernelName:ay,backendName:"cpu",kernelFunc:Aze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uW(e,t,n){const s=(t-e)/(n-1),o=So(n,"float32");o[0]=e;for(let r=1;r<o.length;r++)o[r]=o[r-1]+s;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cW=zl(e=>Math.log(e)),Rze=bf(pg,cW),Oze={kernelName:pg,backendName:"cpu",kernelFunc:Rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dW(e,t,n,s){const o=uo(s,Ue(n));for(let r=0;r<o.length;++r){const i=r*t;let a=e[i];for(let l=0;l<t;++l){const u=e[i+l];(Number.isNaN(u)||u>a)&&(a=u)}o[r]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fW=Os((e,t)=>Math.max(e,t)),Mze=eo(mg,fW),Pze={kernelName:mg,backendName:"cpu",kernelFunc:Mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hW=Os((e,t)=>Math.min(e,t)),Fze=eo(vg,hW),Lze={kernelName:vg,backendName:"cpu",kernelFunc:Fze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YI=Os((e,t)=>e*t),Bze=KI((e,t,n,s)=>({real:e*n-t*s,imag:e*s+t*n})),f1=eo(yg,YI,Bze),zze={kernelName:yg,backendName:"cpu",kernelFunc:f1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(e,t,n){const s=Rl(-1,n);return YI([],t,s,e,n)}function Vze(e){const{inputs:t,backend:n}=e,{x:s}=t;It(s,"neg");const o=n.data.get(s.dataId).values,[r,i]=pW(o,s.shape,s.dtype);return n.makeTensorInfo(i,s.dtype,r)}const Wze={kernelName:by,backendName:"cpu",kernelFunc:Vze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gW=Os((e,t)=>e!==t?1:0),Hze=eo(yy,gW,null,"bool"),Uze={kernelName:yy,backendName:"cpu",kernelFunc:Hze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XI(e,t,n,s,o){const r=t.length,i=Ue(t),a=Dt(t),l=Dt(o),u=uo(n,Ue(o));for(let c=0;c<i;++c){const d=Hp(c,r,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[s[p]];const h=ji(f,r,l);u[h]=e[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ir(e){const{inputs:t,attrs:n,backend:s}=e,{x:o}=t,{perm:r}=n;It(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[r[d]];const l=s.data.get(o.dataId).values,u=XI(l,o.shape,o.dtype,r,a);return{dataId:s.write(u,a,o.dtype),shape:a,dtype:o.dtype}}const jze={kernelName:My,backendName:"cpu",kernelFunc:Ir};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mW(e,t,n,s){const[o,r]=Qs(e,s),i=kr(t,"int32"),a=So(Ue(o),i),l=Ue(r);for(let u=0;u<a.length;++u){const c=u*l;let d=1;for(let f=0;f<l;++f)d*=n[c+f];a[u]=d}return{outVals:a,outShape:o,outDtype:i}}function Gze(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;It(o,"prod");const a=o.shape.length,l=un(r,o.shape),u=Ts(l,a);let c=l,d=o;const f=[];u!=null&&(d=Ir({inputs:{x:o},backend:n,attrs:{perm:u}}),f.push(d),c=Rs(c.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:g,outDtype:m}=mW(d.shape,d.dtype,h,c);let v=g;return i&&(v=Is(g,l)),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(v,m,p)}const Kze={kernelName:Yk,backendName:"cpu",kernelFunc:Gze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vW(e,t,n,s){const o=e===t,r=e<t&&n<0,i=t<e&&n>1;if(o||r||i)return So(0,s);const a=Math.abs(Math.ceil((t-e)/n)),l=So(a,s);t<e&&n===1&&(n=-1),l[0]=e;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bW=zl(e=>1/Math.sqrt(e)),qze=bf(Sg,bW),Yze={kernelName:Sg,backendName:"cpu",kernelFunc:qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xze=zl(e=>1/(1+Math.exp(-e))),yW=Hn(Ng,e=>1/(1+Math.exp(-e))),Zze={kernelName:Ng,backendName:"cpu",kernelFunc:yW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wW(e,t,n,s,o){const r=wS(s,t,n),i=Ue(n),a=Dt(s);if(r){const d=$S(t,a);return o==="string"?e.slice(d,d+i):e.subarray(d,d+i)}const l=o==="string"?Ju(e):e,u=gn(s,o,l),c=gn(n,o);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),h=f.map((p,g)=>p+t[g]);c.set(u.get(...h),...f)}return o==="string"?AV(c.values):c.values}function tc(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,size:i}=s;It(o,"slice");const[a,l]=Hy(o,r,i);bS(o,a,l);const u=n.data.get(o.dataId).values,c=wW(u,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const Jze={kernelName:Ny,backendName:"cpu",kernelFunc:tc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $W(e,t,n,s,o,r,i){const a=t[0],l=r[0],u=new Array(l),c=new Array(a),d=t[1];if(l===0){if(a!==0)throw new Error(bV(a));const m=zo(n,0),v=zo(o,0);return[m,[0,d],v,u,c]}let f=!0,h=0;const p=new Array(l).fill(0);for(let m=0;m<a;++m){const v=e[m*d];if(v<0)throw new Error(yV(m,v));if(v>=l)throw new Error(wV(m,v,l));++p[v],f=f&&v>=h,h=v}let g=!0;for(let m=0;m<l;++m){const v=p[m]===0;u[m]=v,g=g&&!v,p[m]=Math.max(p[m],1),m>0&&(p[m]+=p[m-1])}if(g&&f){const m=e,v=s;for(let b=0;b<a;++b)c[b]=b;return[m,[a,d],v,u,c]}else{const m=p[l-1],v=zo(n,m*d),b=zo(o,m),$=new Array(l).fill(0);for(let y=0;y<a;++y){const w=e[y*d],C=$[w],x=(w===0?0:p[w-1])+C;$[w]++;for(let k=0;k<d;++k)v[x*d+k]=e[y*d+k];b[x]=s[y],c[y]=x}for(let y=0;y<l;++y)if($[y]===0){const C=y===0?0:p[y-1];v[C*d+0]=y;for(let x=1;x<d;++x)v[C*d+x]=0;b[C]=i}return[v,[m,d],b,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CW(e,t,n,s,o){const r=Ue(s),i=t[0],a=o.length,l=[];let u=1,c=-1;for(let m=0;m<a;++m){const v=o[m];if(v===-1){if(c!==-1)throw new Error($V(c,m));c=m,l.push(1)}else{if(v<0)throw new Error(CV(m,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(xV());const m=Math.trunc(r/u);if(u*m!==r)throw new Error(kV(s,l));l[c]=m}if(Ue(l)!==r)throw new Error(SV(s,l));const f=s.length,h=[];if(f>0){h[f-1]=1;for(let m=f-2;m>=0;--m)h[m]=h[m+1]*s[m+1]}const p=[];if(a>0){p[a-1]=1;for(let m=a-2;m>=0;--m)p[m]=p[m+1]*l[m+1]}const g=zo(n,i*a);for(let m=0;m<i;++m){let v=0;for(let b=0;b<f;++b)v+=e[m*f+b]*h[b];for(let b=0;b<a;++b)g[m*a+b]=Math.trunc(v/p[b]),v%=p[b]}return[g,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZI(e,t,n,s,o,r=!1,i=0){const a=s.length,l=[t[0],e.length/t[0]],u=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(fx());const f=t.slice();f[0]=d;const h=f.reduce(($,y)=>$*y,1),p=zo(n,h);if(a===0)return d>0&&p.fill(i),[p,f];if(d<=0)throw new Error(fx());let g=0,m=1,v=0,b=o[g];for(;;){let $=0;if(m<a){if($=o[m],b===$){++m;continue}if(b>=$)throw new Error(IV())}if(b<0||b>=d)throw new Error(TV(b,d));b>v&&p.fill(i,v*u,b*u);for(let y=g;y<m;++y){const w=s[y];if(w<0||w>=l[0])throw new Error(EV(y,s[y],l[0]));for(let C=0;C<u;C++)p[b*u+C]+=e[w*u+C]}if(r)for(let y=0;y<u;y++)p[b*u+y]/=m-g;if(g=m,++m,v=b+1,b=$,m>a)break}return v<d&&p.fill(i,v*u,d*u),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qze=zl(e=>Math.sqrt(e)),eVe=Hn(Dg,e=>Math.sqrt(e)),tVe={kernelName:Dg,backendName:"cpu",kernelFunc:eVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xW=Os((e,t)=>{const n=e-t;return n*n}),nVe=eo(Rg,xW),sVe={kernelName:Rg,backendName:"cpu",kernelFunc:nVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kW(e,t,n,s){const o=gn(e,t.dtype);for(let r=0;r<o.size;r++){const i=o.indexToLoc(r),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+s[l];o.set(t.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oVe{constructor(t,n,s,o,r,i){this.separator=cl(t),this.nGramWidths=n,this.leftPad=cl(s),this.rightPad=cl(o),this.padWidth=r,this.preserveShort=i}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const s=this.getPadWidth(n);return Math.max(0,t+2*s-n+1)}createNGrams(t,n,s,o,r,i){for(let a=0;a<r;++a){const l=this.getPadWidth(i),u=Math.max(0,l-a),c=Math.max(0,l-(r-(a+1))),d=i-(u+c),f=n+(u>0?0:a-l);let h=0;h+=u*this.leftPad.length;for(let b=0;b<d;++b)h+=t[f+b].length;h+=c*this.rightPad.length,h+=(u+c+d-1)*this.separator.length,s[o+a]=new Uint8Array(h);const g=s[o+a];let m=0;const v=b=>b.forEach($=>g[m++]=$);for(let b=0;b<u;++b)v(this.leftPad),v(this.separator);for(let b=0;b<d-1;++b)v(t[f+b]),v(this.separator);if(d>0){v(t[f+d-1]);for(let b=0;b<c;++b)v(this.separator),v(this.rightPad)}else{for(let b=0;b<c-1;++b)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(t,n){const s=t.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<o;++u){let c=n[u]>=l;if(c=c&&n[u]<=s,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${s}]`);l=n[u]}if(l!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${l}`)}const r=o-1,i=zo("int32",o);if(s===0||o===0){const l=new Array(s);for(let u=0;u<=r;++u)i[u]=0;return[l,i]}i[0]=0;for(let l=1;l<=r;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),i[l]=i[l-1]+c}const a=new Array(i[r]);for(let l=0;l<r;++l){const u=n[l];let c=i[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(t,u,a,c,h,d),c+=h}),this.preserveShort&&c===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth,h=1;this.createNGrams(t,u,a,c,h,f)}}return[a,i]}}function SW(e,t,n,s,o,r,i,a){return new oVe(n,s,o,r,i,a).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rVe(e,t,n,s){if(!e.length)return;if(t.length===0){for(let r=0;r<e.length;++r)s.push(e.subarray(r,r+1));return}if(t.length===1){const r=t[0];let i=e.indexOf(r);for(;i!==-1;){const a=e.subarray(0,i);(!n||a.length!==0)&&s.push(a),e=e.subarray(i+1),i=e.indexOf(r)}(!n||e.length!==0)&&s.push(e);return}let o=0;for(let r=0;r<e.length+1;r++)if(r===e.length||t.indexOf(e[r])!==-1){const i=e.subarray(o,r);(!n||i.length!==0)&&s.push(i),o=r+1}}function IW(e,t,n){const s=e.length,o=[];let r=0,i=0;const a=new Array(s);for(let f=0;f<s;++f){const h=o.length;rVe(e[f],t,n,o);const p=o.length-h;a[f]=p,r+=p,i=Math.max(i,p)}const l=zo("int32",r*2),u=new Array(r),c=[s,i];let d=0;for(let f=0;f<s;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,u[d]=o[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TW(e,t){const n=zo("int32",e.length);for(let s=0;s<e.length;++s)n[s]=jAe(e[s]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EW=Os((e,t)=>e-t),iVe=KI((e,t,n,s)=>({real:e-n,imag:t-s})),JI=eo(Og,EW,iVe),aVe={kernelName:Og,backendName:"cpu",kernelFunc:JI};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _W(e,t){const n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];const s=gn(n,e.dtype);for(let o=0;o<s.values.length;++o){const r=s.indexToLoc(o),i=new Array(e.rank);for(let l=0;l<i.length;l++)i[l]=r[l]%e.shape[l];const a=e.locToIndex(i);s.values[o]=e.values[a]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ch=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function NW(e,t,n=0,s=e.length-1){for(;s>n;){if(s-n>600){const a=s-n+1,l=t-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(t-l*c/a+d)),h=Math.min(s,Math.floor(t+(a-l)*c/a+d));NW(e,t,f,h)}const o=e[t];let r=n,i=s;for(Zc(e,n,t),ch(e[s],o)>0&&Zc(e,n,s);r<i;){for(Zc(e,r,i),r++,i--;ch(e[r],o)<0;)r=r+1;for(;ch(e[i],o)>0;)i=i-1}ch(e[n],o)===0?Zc(e,n,i):(i=i+1,Zc(e,i,s)),i<=t&&(n=i+1),t<=i&&(s=i-1)}}function AW(e,t,n,s,o){const r=t[t.length-1],[i,a]=[e.length/r,r],l=uo(n,i*s),u=uo("int32",i*s);for(let d=0;d<i;d++){const f=d*a,h=e.subarray(f,f+a);let p=new Array(h.length);h.forEach((b,$)=>p[$]={value:b,index:$}),s<p.length&&(NW(p,s),p=p.slice(0,s)),o&&p.sort(ch);const g=d*s,m=l.subarray(g,g+s),v=u.subarray(g,g+s);for(let b=0;b<s;b++)m[b]=p[b].value,v[b]=p[b].index}const c=t.slice();return c[c.length-1]=s,[gn(c,n,l),gn(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DW(e,t,n,s){const o=un(t,n)[0],r=[1,n[0],1];for(let p=0;p<o;p++)r[0]*=n[p];r[1]=n[o];for(let p=o+1;p<n.length;p++)r[2]*=n[p];const i={},a=new Int32Array(n[o]),l=new $o(r,s,e),u=[],c=r[0]===1&&r[2]===1;for(let p=0;p<n[o];p++){let g;if(c)g=e[p].toString();else{const m=[];for(let v=0;v<r[0];v++)for(let b=0;b<r[2];b++)m.push(l.get(v,p,b));g=m.join(",")}if(i[g]!==void 0)a[p]=i[g];else{const m=Object.keys(i).length;i[g]=m,a[p]=m,u.push(p)}}const d=r.slice();d[1]=Object.keys(i).length;const f=new $o(d,s);u.forEach((p,g)=>{for(let m=0;m<r[0];m++)for(let v=0;v<r[2];v++)f.set(l.get(m,p,v),m,g,v)});const h=n.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var lVe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",simpleAbsImpl:G5,addImpl:K5,bincountImpl:qI,bincountReduceImpl:q5,ceilImpl:Y5,concatImpl:X5,equalImpl:Z5,expImpl:Q5,expm1Impl:tW,floorImpl:nW,gatherNdImpl:sW,gatherV2Impl:oW,greaterImpl:rW,greaterEqualImpl:iW,lessImpl:aW,lessEqualImpl:lW,linSpaceImpl:uW,logImpl:cW,maxImpl:dW,maximumImpl:fW,minimumImpl:hW,multiplyImpl:YI,negImpl:pW,notEqualImpl:gW,prodImpl:mW,rangeImpl:vW,rsqrtImpl:bW,sigmoidImpl:Xze,sliceImpl:wW,sparseFillEmptyRowsImpl:$W,sparseReshapeImpl:CW,sparseSegmentReductionImpl:ZI,sqrtImpl:Qze,squaredDifferenceImpl:xW,stridedSliceImpl:kW,stringNGramsImpl:SW,stringSplitImpl:IW,stringToHashBucketFastImpl:TW,subImpl:EW,tileImpl:_W,topKImpl:AW,transposeImpl:XI,uniqueImpl:DW});/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Cz("cpu",()=>new d1,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RW=Hn(sg,e=>e>=0?e:Math.exp(e)-1),uVe={kernelName:sg,backendName:"cpu",kernelFunc:RW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{alpha:r}=s;It([o],"leakyRelu");const i=Ue(o.shape),a=n.data.get(o.dataId).values,l=uo("float32",i);for(let u=0;u<a.length;u++)l[u]=a[u]<0?r*a[u]:a[u];return n.makeTensorInfo(o.shape,"float32",l)}const cVe={kernelName:ry,backendName:"cpu",kernelFunc:OW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dVe=Os((e,t)=>e<0?t*e:e);function MW(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t;It([s,o],"prelu");const r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,[a,l]=dVe(s.shape,o.shape,r,i,"float32");return n.makeTensorInfo(l,"float32",a)}const fVe={kernelName:ky,backendName:"cpu",kernelFunc:MW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PW=Hn(Cg,e=>Math.max(0,e)),hVe={kernelName:Cg,backendName:"cpu",kernelFunc:PW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FW=Hn(xg,e=>Math.min(Math.max(0,e),6)),pVe={kernelName:xg,backendName:"cpu",kernelFunc:FW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QI(e,t,n,s,o){if(n==="linear")return ea({inputs:{x:t},backend:e});if(n==="relu")return PW({inputs:{x:t},backend:e});if(n==="elu")return RW({inputs:{x:t},backend:e});if(n==="relu6")return FW({inputs:{x:t},backend:e});if(n==="prelu")return MW({inputs:{x:t,alpha:s},backend:e});if(n==="leakyrelu")return OW({inputs:{x:t},backend:e,attrs:{alpha:o}});if(n==="sigmoid")return yW({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gs(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{shape:r}=s,i=Ue(o.shape),a=$B(r,i),l=Ue(a);K(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const gVe={kernelName:Sy,backendName:"cpu",kernelFunc:gs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LW(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r}=t,{transposeA:i,transposeB:a}=s;It([o,r],"matMul");const l=o.shape.length,u=r.shape.length,c=i?o.shape[l-2]:o.shape[l-1],d=a?r.shape[u-1]:r.shape[u-2],f=i?o.shape[l-1]:o.shape[l-2],h=a?r.shape[u-2]:r.shape[u-1],p=o.shape.slice(0,-2),g=r.shape.slice(0,-2),m=Ue(p),v=Ue(g),$=nn(o.shape.slice(0,-2),r.shape.slice(0,-2)).concat([f,h]);K(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${r.shape} and transposeA=${i} and transposeB=${a} must match.`);const y=i?[m,c,f]:[m,f,c],w=a?[v,h,d]:[v,d,h],C=gs({inputs:{x:o},backend:n,attrs:{shape:y}}),x=gs({inputs:{x:r},backend:n,attrs:{shape:w}}),k=i?C.shape[1]:C.shape[2],I=i?C.shape[2]:C.shape[1],S=a?x.shape[1]:x.shape[2],T=Math.max(m,v),_=n.data.get(C.dataId).values,N=n.data.get(x.dataId).values,O=Dt(C.shape),M=Dt(x.shape),[D,F,V]=i?[O[0],1,O[1]]:[O[0],O[1],1],[U,ne,be]=a?[1,M[1],M[0]]:[M[1],1,M[0]],te=I*S,he=gn([T,I,S],C.dtype),oe=he.values,G=n.blockSize;for(let Y=0;Y<T;Y++)for(let X=0;X<I;X+=G)for(let ae=0;ae<S;ae+=G)for(let Se=0;Se<k;Se+=G){const Le=Math.min(X+G,I),Be=Math.min(ae+G,S),Fe=Math.min(Se+G,k);for(let j=X;j<Le;j++)for(let Q=ae;Q<Be;Q++){let H=0;for(let se=Se;se<Fe;se++){const we=Math.min(Y,m-1)*D,J=Math.min(Y,v-1)*be,_e=_[we+j*F+se*V],Ie=N[se*U+Q*ne+J];H+=_e*Ie}oe[Y*te+(j*S+Q)]+=H}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo($,he.dtype,he.values)}const mVe={kernelName:U0,backendName:"cpu",kernelFunc:LW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r,bias:i,preluActivationWeights:a}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;let f,h,p;const g=[];f=LW({inputs:{a:o,b:r},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(h=tm({inputs:{a:f,b:i},backend:n}),g.push(f),f=h),c&&(p=QI(n,f,c,a,d),g.push(f),f=p);for(const v of g)n.disposeIntermediateTensorInfo(v);return f}const bVe={kernelName:Eb,backendName:"cpu",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yVe=Hn(Up,e=>Math.acos(e)),wVe={kernelName:Up,backendName:"cpu",kernelFunc:yVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ve=Hn(jp,e=>Math.acosh(e)),CVe={kernelName:jp,backendName:"cpu",kernelFunc:$Ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xVe(e){const{inputs:t,backend:n}=e,s=t;It(t,"addN");const o=s.map(a=>n.data.get(a.dataId).values),r=gn(s[0].shape,s[0].dtype),i=r.values;for(let a=0;a<s.length;a++){const l=o[a];for(let u=0;u<i.length;u++)i[u]+=l[u]}return n.makeTensorInfo(r.shape,r.dtype,r.values)}const kVe={kernelName:xk,backendName:"cpu",kernelFunc:xVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;It(o,"all");const a=un(r,o.shape);let l=a;const u=Ts(l,o.shape.length);let c=o;u!=null&&(c=Ir({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Rs(l.length,o.shape.length)),fo("all",l,c.shape.length);const[d,f]=Qs(c.shape,l),h=Ue(f),p=So(Ue(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=g[b];for(let y=0;y<h;++y){const w=g[b+y];$=$&&w}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Is(d,a),b=gs({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),b}return m}const IVe={kernelName:kk,backendName:"cpu",kernelFunc:SVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;It(o,"any");const a=un(r,o.shape);let l=a;const u=Ts(l,o.shape.length);let c=o;u!=null&&(c=Ir({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Rs(l.length,o.shape.length)),fo("any",l,c.shape.length);const[d,f]=Qs(c.shape,l),h=Ue(f),p=So(Ue(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=g[b];for(let y=0;y<h;++y){const w=g[b+y];$=$||w}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Is(d,a),b=gs({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),b}return m}const EVe={kernelName:Sk,backendName:"cpu",kernelFunc:TVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ve(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;It(o,"argMax");let i=un(r,o.shape);const a=Ts(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Ir({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Rs(i.length,l.shape.length)),i=[i[0]],fo("argMax",i,l.shape.length);const[c,d]=Qs(l.shape,i),f=Ue(c),h=So(f,"int32"),p=Ue(d),g=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const v=m*p;let b=g[v],$=0;for(let y=0;y<p;++y){const w=g[v+y];w>b&&(b=w,$=y)}h[m]=$}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(c,"int32",h)}const NVe={kernelName:z0,backendName:"cpu",kernelFunc:_Ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;It(o,"argMin");let i=un(r,o.shape);const a=Ts(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Ir({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Rs(i.length,l.shape.length)),i=[i[0]],fo("argMin",i,l.shape.length);const[c,d]=Qs(l.shape,i),f=Ue(c),h=So(f,"int32"),p=Ue(d),g=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const v=m*p;let b=g[v],$=0;for(let y=0;y<p;++y){const w=g[v+y];w<b&&(b=w,$=y)}h[m]=$}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(c,"int32",h)}const DVe={kernelName:V0,backendName:"cpu",kernelFunc:AVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RVe=Hn(Gp,e=>Math.asin(e)),OVe={kernelName:Gp,backendName:"cpu",kernelFunc:RVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MVe=Hn(Kp,e=>Math.asinh(e)),PVe={kernelName:Kp,backendName:"cpu",kernelFunc:MVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FVe=Hn(qp,e=>Math.atan(e)),LVe={kernelName:qp,backendName:"cpu",kernelFunc:FVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BVe=Os((e,t)=>Math.atan2(e,t)),zVe=eo(Xp,BVe),VVe={kernelName:Xp,backendName:"cpu",kernelFunc:zVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WVe=Hn(Yp,e=>Math.atanh(e)),HVe={kernelName:Yp,backendName:"cpu",kernelFunc:WVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(e,t,n,s,o,r){const i=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=gn(o.outShape,n),m=g.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],$=o.outShape[3];for(let y=0;y<o.batchSize;++y){const w=y*v,C=y*s[0];for(let x=0;x<o.inChannels;++x)for(let k=0;k<o.outHeight;++k){const I=k*i-f,S=Math.max(0,I),T=Math.min(o.inHeight,c+I),_=w+k*b;for(let N=0;N<o.outWidth;++N){const O=N*a-h,M=Math.max(0,O),D=Math.min(o.inWidth,d+O);let F=p,V=0,U=0;for(let be=S;be<T;be+=l){const te=C+be*s[1];for(let he=M;he<D;he+=u){const oe=te+he*s[2],G=e[oe+x];r==="max"&&G>F?F=G:r==="avg"&&(V+=G,U++)}if(isNaN(F))break}const ne=_+N*$+x;m[ne]=r==="avg"?V/U:F}}}return g}function BW(e,t,n,s,o=!1,r=!1){const i=gn(s.outShape,"int32"),a=s.strideHeight,l=s.strideWidth,u=s.dilationHeight,c=s.dilationWidth,d=s.effectiveFilterHeight,f=s.effectiveFilterWidth,h=s.padInfo.top,p=s.padInfo.left,g=gn(t,n,e);for(let m=0;m<s.batchSize;++m)for(let v=0;v<s.inChannels;++v)for(let b=0;b<s.outHeight;++b){const $=b*a-h;let y=$;for(;y<0;)y+=u;const w=Math.min(s.inHeight,d+$);for(let C=0;C<s.outWidth;++C){const x=C*l-p;let k=x;for(;k<0;)k+=c;const I=Math.min(s.inWidth,f+x);let S=Number.NEGATIVE_INFINITY,T=-1;for(let _=y;_<w;_+=u){const N=_-$;for(let O=k;O<I;O+=c){const M=O-x,D=g.get(m,_,O,v);D>S&&(S=D,o?T=r?((m*s.inHeight+_)*s.inWidth+O)*s.inChannels+v:(_*s.inWidth+O)*s.inChannels+v:T=N*f+M)}}i.set(T,m,b,C,v)}}return i}function zW(e,t,n,s,o,r){const i=o.strideDepth,a=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,g=o.padInfo.front,m=o.padInfo.top,v=o.padInfo.left,b=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,$=gn(o.outShape,n),y=$.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[2]*o.outShape[3]*o.outShape[4],x=o.outShape[3]*o.outShape[4],k=o.outShape[4];for(let I=0;I<o.batchSize;++I){const S=I*w,T=I*s[0];for(let _=0;_<o.inChannels;++_)for(let N=0;N<o.outDepth;++N){const O=N*i-g;let M=O;for(;M<0;)M+=u;const D=Math.min(o.inDepth,f+O),F=S+N*C;for(let V=0;V<o.outHeight;++V){const U=V*a-m;let ne=U;for(;ne<0;)ne+=c;const be=Math.min(o.inHeight,h+U),te=F+V*x;for(let he=0;he<o.outWidth;++he){const oe=he*l-v;let G=oe;for(;G<0;)G+=d;const Y=Math.min(o.inWidth,p+oe),X=te+he*k;let ae=b,Se=0,Le=0;for(let Fe=M;Fe<D;Fe+=u){const j=T+Fe*s[1];for(let Q=ne;Q<be;Q+=c){const H=j+Q*s[2];for(let se=G;se<Y;se+=d){const we=H+se*s[3],J=e[we+_];if(r==="max"&&J>ae?ae=J:r==="avg"&&(Se+=J,Le++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}const Be=X+_;y[Be]=r==="avg"?Se/Le:ae}}}}return $}function UVe(e,t){const n=gn(t.outShape,"int32"),s=t.strideDepth,o=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left;for(let g=0;g<t.batchSize;++g)for(let m=0;m<t.inChannels;++m)for(let v=0;v<t.outDepth;++v){const b=v*s-f;let $=b;for(;$<0;)$+=i;const y=Math.min(t.inDepth,u+b);for(let w=0;w<t.outHeight;++w){const C=w*o-h;let x=C;for(;x<0;)x+=a;const k=Math.min(t.inHeight,c+C);for(let I=0;I<t.outWidth;++I){const S=I*r-p;let T=S;for(;T<0;)T+=l;const _=Math.min(t.inWidth,d+S);let N=Number.NEGATIVE_INFINITY,O=-1;for(let M=$;M<y;M+=i){const D=M-b;for(let F=x;F<k;F+=a){const V=F-C;for(let U=T;U<_;U+=l){const ne=U-S,be=e.get(g,M,F,U,m);be>=N&&(N=be,O=D*c*d+V*c+ne)}}}n.set(O,g,v,w,I,m)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;It(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;K(Io(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ni(o.shape,r,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Mn(c.inShape,c.outShape))d=ea({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Dt(o.shape),p=eT(f,o.shape,o.dtype,h,c,"avg");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const GVe={kernelName:W0,backendName:"cpu",kernelFunc:jVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s;It(o,"avgPool3d");const c=Ma(o.shape,r,i,1,a,l,u),d=n.data.get(o.dataId).values,f=zW(d,o.shape,o.dtype,Dt(o.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const qVe={kernelName:H0,backendName:"cpu",kernelFunc:KVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YVe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=s;It([o,r],"avgPool3DGrad");const c=Ma(r.shape,i,a,1,l,u),d=c.strideDepth,f=c.strideHeight,h=c.strideWidth,p=c.filterDepth,g=c.filterHeight,m=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,$=c.dilationWidth,y=c.effectiveFilterDepth,w=c.effectiveFilterHeight,C=c.effectiveFilterWidth,x=y-1-c.padInfo.front,k=C-1-c.padInfo.left,I=w-1-c.padInfo.top,S=gn(r.shape,"float32"),T=1/(p*g*m),_=n.bufferSync(o);for(let N=0;N<c.batchSize;++N)for(let O=0;O<c.inChannels;++O)for(let M=0;M<c.inDepth;++M)for(let D=0;D<c.inHeight;++D)for(let F=0;F<c.inWidth;++F){const V=M-x,U=D-I,ne=F-k;let be=0;for(let te=0;te<y;te+=v){const he=(V+te)/d;if(!(he<0||he>=c.outDepth||Math.floor(he)!==he))for(let oe=0;oe<w;oe+=b){const G=(U+oe)/f;if(!(G<0||G>=c.outHeight||Math.floor(G)!==G))for(let Y=0;Y<C;Y+=$){const X=(ne+Y)/h;if(X<0||X>=c.outWidth||Math.floor(X)!==X)continue;be+=_.get(N,he,G,X,O)}}}S.set(be*T,N,M,D,F,O)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const XVe={kernelName:Tk,backendName:"cpu",kernelFunc:YVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZVe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r;It([o,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,c=ni(i.shape,a,l,1,u),d=c.strideHeight,f=c.strideWidth,h=c.filterHeight,p=c.filterWidth,g=c.dilationHeight,m=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,$=b-1-c.padInfo.left,y=v-1-c.padInfo.top,w=gn(i.shape,"float32"),C=1/(h*p),x=n.data.get(o.dataId).values,k=gn(o.shape,"float32",x);for(let I=0;I<c.batchSize;++I)for(let S=0;S<c.inChannels;++S)for(let T=0;T<c.inHeight;++T)for(let _=0;_<c.inWidth;++_){const N=T-y,O=_-$;let M=0;for(let D=0;D<v;D+=g){const F=(N+D)/d;if(!(F<0||F>=c.outHeight||Math.floor(F)!==F))for(let V=0;V<b;V+=m){const U=(O+V)/f;if(U<0||U>=c.outWidth||Math.floor(U)!==U)continue;M+=k.get(I,F,U,S)}}w.set(M*C,I,T,_,S)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const JVe={kernelName:Ik,backendName:"cpu",kernelFunc:ZVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,scale:r,offset:i,mean:a,variance:l}=t;K(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),K(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),K(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),It([o,a,l,r,i],"batchNorm");let{varianceEpsilon:u}=s;u==null&&(u=.001);const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=r?n.data.get(r.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),g=new Float32Array(c.length),m=p.length,v=h.length,b=f.length,$=d.length;let y=0,w=0,C=0,x=0;for(let k=0;k<c.length;++k)g[k]=p[y++]+(c[k]-d[w++])*h[C++]/Math.sqrt(f[x++]+u),y>=m&&(y=0),w>=$&&(w=0),C>=v&&(C=0),x>=b&&(x=0);return n.makeTensorInfo(o.shape,o.dtype,g)}const e6e={kernelName:ny,backendName:"cpu",kernelFunc:QVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,crops:i}=s;It([o],"batchToSpaceND");const a=r.reduce((v,b)=>v*b),l=Ug(o.shape,r,a),u=jg(l.length,r.length),c=Gg(o.shape,r,a),d=lI(i,r.length),f=uI(c,i,r.length),h=gs({inputs:{x:o},backend:n,attrs:{shape:l}}),p=Ir({inputs:{x:h},backend:n,attrs:{perm:u}}),g=gs({inputs:{x:p},backend:n,attrs:{shape:c}}),m=tc({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}const n6e={kernelName:j0,backendName:"cpu",kernelFunc:t6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i}=s,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,u=qI(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}const o6e={kernelName:Ek,backendName:"cpu",kernelFunc:s6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r6e(e){const{inputs:t,backend:n}=e,{s0:s,s1:o}=t,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=nn(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const i6e={kernelName:NB,backendName:"cpu",kernelFunc:r6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6e=Hn(Qp,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),l6e={kernelName:Qp,backendName:"cpu",kernelFunc:a6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6e=e=>{const{x:t}=e.inputs,n=e.backend,s=new Float32Array(Ue(t.shape)),o=n.data.get(t.dataId),r=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],d=l[u];s[u]=Math.hypot(c,d)}return n.makeOutput(s,t.shape,"float32")},c6e={kernelName:G0,backendName:"cpu",kernelFunc:u6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zd(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.data.get(s.dataId).complexTensorInfos.imag,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const d6e={kernelName:Wk,backendName:"cpu",kernelFunc:zd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vd(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s,r=un(o,t[0].shape)[0];let i=Ki(t.map(g=>g.shape),r);if(Ue(i)===0)return n.makeTensorInfo(i,t[0].dtype,[]);const a=t.filter(g=>Ue(g.shape)>0);if(a.length===1)return ea({inputs:{x:a[0]},backend:n});const l=a.map(g=>g.shape);if(rI(l,r),a[0].dtype==="complex64"){const g=a.map(y=>ec({inputs:{input:y},backend:n})),m=a.map(y=>zd({inputs:{input:y},backend:n})),v=Vd({inputs:g,backend:n,attrs:{axis:r}}),b=Vd({inputs:m,backend:n,attrs:{axis:r}}),$=qo({inputs:{real:v,imag:b},backend:n});return g.forEach(y=>n.disposeIntermediateTensorInfo(y)),m.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),$}const u=a.map(g=>{const m=Ue(g.shape.slice(r));return gs({inputs:{x:g},backend:n,attrs:{shape:[-1,m]}})}),c=u.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));i=Ki(u.map(g=>g.shape),1);const d=u[0].shape[0]===1,f=X5(c,i,t[0].dtype,d),h=Ki(a.map(g=>g.shape),r),p=n.makeTensorInfo(h,t[0].dtype,f);return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),p}const f6e={kernelName:K0,backendName:"cpu",kernelFunc:Vd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=s;It([o,r],"conv2d");const d=Pa(l),f=co(o.shape,r.shape,i,u,a,c,!1,d),h=f.filterHeight,p=f.filterWidth,g=f.dilationHeight,m=f.dilationWidth,v=f.padInfo.left,b=f.padInfo.top,$=f.dataFormat==="channelsLast",y=new $o(f.outShape,o.dtype),w=Dt(o.shape),C=Dt(r.shape),x=w[0],k=$?w[1]:w[2],I=$?w[2]:1,S=$?1:w[1],T=y.strides[0],_=$?y.strides[1]:y.strides[2],N=$?y.strides[2]:1,O=$?1:y.strides[1],M=n.data.get(o.dataId).values,D=n.data.get(r.dataId).values,F=y.values;for(let V=0;V<f.batchSize;++V){const U=V*x,ne=V*T;for(let be=0;be<f.outHeight;++be){const te=ne+be*_,he=be*f.strideHeight-b;for(let oe=0;oe<h;++oe){const G=he+oe*g;if(G<0||G>=f.inHeight)continue;const Y=oe*C[0],X=U+G*k;for(let ae=0;ae<f.outWidth;++ae){const Se=te+ae*N,Le=ae*f.strideWidth-v;for(let Be=0;Be<p;++Be){const Fe=Le+Be*m;if(Fe<0||Fe>=f.inWidth)continue;const j=Y+Be*C[1],Q=X+Fe*I;let H=j;for(let se=0;se<f.inChannels;++se){const we=M[Q+se*S];for(let J=0;J<f.outChannels;++J)F[Se+J*O]+=we*D[H+J];H+=f.outChannels}}}}}}return n.makeTensorInfo(y.shape,y.dtype,F)}const h6e={kernelName:q0,backendName:"cpu",kernelFunc:VW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=s;It([o,r],"conv2dBackpropFilter");const d=Pa(l),f=co(o.shape,c,i,1,a,u,!1,d),{strideHeight:h,strideWidth:p,filterHeight:g,filterWidth:m}=f,v=f.dataFormat==="channelsLast",b=new $o(f.filterShape,"float32"),$=f.padInfo.left,y=f.padInfo.top,w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,x=new $o(o.shape,o.dtype,w),k=new $o(r.shape,r.dtype,C);for(let I=0;I<g;++I){const S=Math.max(0,Math.ceil((y-I)/h)),T=Math.min(f.outHeight,(f.inHeight+y-I)/h);for(let _=0;_<m;++_){const N=Math.max(0,Math.ceil(($-_)/p)),O=Math.min(f.outWidth,(f.inWidth+$-_)/p);for(let M=0;M<f.inChannels;++M)for(let D=0;D<f.outChannels;++D){let F=0;for(let V=0;V<f.batchSize;++V)for(let U=S;U<T;++U){const ne=I+U*h-y;for(let be=N;be<O;++be){const te=_+be*p-$;v?F+=x.get(V,ne,te,M)*k.get(V,U,be,D):F+=x.get(V,M,ne,te)*k.get(V,D,U,be)}}b.set(F,I,_,M,D)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const g6e={kernelName:Nk,backendName:"cpu",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=s;It([o,r],"conv2dBackpropInput");const d=Dt(r.shape),f=Dt(o.shape);let h=Pa(u);const p=co(i,r.shape,a,1,l,c,!1,h),g=new $o(p.inShape,"float32"),m=g.values,v=n.data.get(o.dataId).values,b=n.data.get(r.dataId).values,[$,y,w]=d,{batchSize:C,filterHeight:x,filterWidth:k,inChannels:I,inHeight:S,inWidth:T,outChannels:_,outHeight:N,outWidth:O,strideHeight:M,strideWidth:D}=p;h=p.dataFormat;const F=x-1-p.padInfo.top,V=k-1-p.padInfo.left,U=h==="channelsLast",ne=g.strides[0],be=U?g.strides[1]:g.strides[2],te=U?g.strides[2]:1,he=U?1:g.strides[1],oe=f[0],G=U?f[1]:f[2],Y=U?f[2]:1,X=U?1:f[1];for(let ae=0;ae<C;++ae)for(let Se=0;Se<I;++Se)for(let Le=0;Le<S;++Le){const Be=Le-F,Fe=Math.max(0,Math.ceil(Be/M)),j=Math.min(N,(x+Be)/M);for(let Q=0;Q<T;++Q){const H=Q-V,se=Math.max(0,Math.ceil(H/D)),we=Math.min(O,(k+H)/D);let J=0;for(let Ie=Fe;Ie<j;++Ie){const fe=Ie*M-Be;for(let Te=se;Te<we;++Te){const rt=Te*D-H,Xe=oe*ae+G*Ie+Y*Te,lt=$*(x-1-fe)+y*(k-1-rt)+w*Se;for(let vt=0;vt<_;++vt){const Ye=v[Xe+X*vt],de=b[lt+vt];J+=Ye*de}}}const _e=ne*ae+be*Le+te*Q+he*Se;m[_e]=J}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const v6e={kernelName:Y0,backendName:"cpu",kernelFunc:m6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s;It([o,r],"conv3d");const u=Ol(o.shape,r.shape,i,l,a),{filterDepth:c,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:g,padInfo:m}=u,v=m.front,b=m.left,$=m.top,y=new $o(u.outShape,o.dtype),w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,x=y.values,k=Dt(o.shape),I=Dt(r.shape);for(let S=0;S<u.batchSize;++S){const T=S*k[0],_=S*y.strides[0];for(let N=0;N<u.outDepth;++N){const O=_+N*y.strides[1],M=N*u.strideDepth-v;for(let D=0;D<c;++D){const F=M+D*h;if(F<0||F>=u.inDepth)continue;const V=D*I[0],U=T+F*k[1];for(let ne=0;ne<u.outHeight;++ne){const be=O+ne*y.strides[2],te=ne*u.strideHeight-$;for(let he=0;he<d;++he){const oe=te+he*p;if(oe<0||oe>=u.inHeight)continue;const G=V+he*I[1],Y=U+oe*k[2];for(let X=0;X<u.outWidth;++X){const ae=be+X*u.outChannels,Se=X*u.strideWidth-b;for(let Le=0;Le<f;++Le){const Be=Se+Le*g;if(Be<0||Be>=u.inWidth)continue;const Fe=G+Le*I[2],j=Y+Be*u.inChannels;let Q=Fe;for(let H=0;H<u.inChannels;++H){const se=w[j+H];for(let we=0;we<u.outChannels;++we)x[ae+we]+=se*C[Q+we];Q+=u.outChannels}}}}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const y6e={kernelName:X0,backendName:"cpu",kernelFunc:b6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,filterShape:l}=s;It([o,r],"conv3dBackpropFilterV2");const u=Dt(o.shape),c=Dt(r.shape),d=Ol(o.shape,l,i,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,g=d.filterDepth,m=d.filterHeight,v=d.filterWidth,b=new $o(d.filterShape,"float32"),$=b.values,[y,w,C,x]=b.strides,k=n.data.get(r.dataId).values,[I,S,T,_]=c,N=n.data.get(o.dataId).values,[O,M,D,F]=u,V=d.padInfo.front,U=d.padInfo.left,ne=d.padInfo.top;for(let be=0;be<g;++be){const te=Math.max(0,Math.ceil((V-be)/f)),he=Math.min(d.outDepth,(d.inDepth+V-be)/f),oe=be*y;for(let G=0;G<m;++G){const Y=Math.max(0,Math.ceil((ne-G)/h)),X=Math.min(d.outHeight,(d.inHeight+ne-G)/h),ae=G*w+oe;for(let Se=0;Se<v;++Se){const Le=Math.max(0,Math.ceil((U-Se)/p)),Be=Math.min(d.outWidth,(d.inWidth+U-Se)/p),Fe=Se*C+ae;for(let j=0;j<d.inChannels;++j){const Q=j*x+Fe;for(let H=0;H<d.outChannels;++H){let se=0;for(let we=0;we<d.batchSize;++we){const J=we*O,_e=we*I;for(let Ie=te;Ie<he;++Ie){const Te=(be+Ie*f-V)*M+J,rt=Ie*S+_e;for(let Xe=Y;Xe<X;++Xe){const vt=(G+Xe*h-ne)*D+Te,Ye=Xe*T+rt;for(let de=Le;de<Be;++de){const Ge=(Se+de*p-U)*F+vt,Ne=de*_+Ye;se+=N[Ge+j]*k[Ne+H]}}}}$[Q+H]=se}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const $6e={kernelName:Ak,backendName:"cpu",kernelFunc:w6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{pad:i,strides:a,inputShape:l}=s;It([o],"conv3dBackpropInputV2");const u=Dt(o.shape),c=Dt(r.shape),d=Ol(l,r.shape,a,1,i),f=new $o(d.inShape,"float32"),h=f.values,[p,g,m,v]=f.strides,b=n.data.get(o.dataId).values,[$,y,w,C]=u,x=n.data.get(r.dataId).values,[k,I,S,T]=c,{batchSize:_,filterDepth:N,filterHeight:O,filterWidth:M,inChannels:D,inDepth:F,inHeight:V,inWidth:U,outChannels:ne,outDepth:be,outHeight:te,outWidth:he,strideDepth:oe,strideHeight:G,strideWidth:Y}=d,X=N-1-d.padInfo.front,ae=O-1-d.padInfo.top,Se=M-1-d.padInfo.left;for(let Le=0;Le<_;++Le)for(let Be=0;Be<D;++Be)for(let Fe=0;Fe<F;++Fe){const j=Fe-X,Q=Math.max(0,Math.ceil(j/oe)),H=Math.min(be,(N+j)/oe);for(let se=0;se<V;++se){const we=se-ae,J=Math.max(0,Math.ceil(we/G)),_e=Math.min(te,(O+we)/G);for(let Ie=0;Ie<U;++Ie){const fe=Ie-Se,Te=Math.max(0,Math.ceil(fe/Y)),rt=Math.min(he,(M+fe)/Y);let Xe=0;for(let lt=Q;lt<H;++lt){const vt=lt*oe-j;for(let Ye=J;Ye<_e;++Ye){const de=Ye*G-we;for(let De=Te;De<rt;++De){const Ge=De*Y-fe,Ne=$*Le+y*lt+w*Ye+C*De,ct=k*(N-1-vt)+I*(O-1-de)+S*(M-1-Ge)+T*Be;for(let wt=0;wt<ne;++wt){const on=b[Ne+wt],cn=x[ct+wt];Xe+=on*cn}}}}h[p*Le+g*Fe+m*se+v*Ie+Be]=Xe}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const x6e={kernelName:Dk,backendName:"cpu",kernelFunc:C6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k6e=Hn(eg,e=>Math.cos(e)),S6e={kernelName:eg,backendName:"cpu",kernelFunc:k6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I6e=Hn(tg,e=>Math.cosh(e)),T6e={kernelName:tg,backendName:"cpu",kernelFunc:I6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E6e(e){const{inputs:t,backend:n,attrs:s}=e,{image:o,boxes:r,boxInd:i}=t,{cropSize:a,method:l,extrapolationValue:u}=s,[c,d,f,h]=o.shape,p=r.shape[0],[g,m]=a,v=gn([p,g,m,h],"float32"),b=n.data.get(r.dataId).values,$=n.data.get(i.dataId).values,y=n.data.get(o.dataId).values,w=Dt(o.shape),C=Dt(v.shape);for(let x=0;x<p;x++){const k=x*4,I=b[k],S=b[k+1],T=b[k+2],_=b[k+3],N=$[x];if(N>=c)continue;const O=g>1?(T-I)*(d-1)/(g-1):0,M=m>1?(_-S)*(f-1)/(m-1):0;for(let D=0;D<g;D++){const F=g>1?I*(d-1)+D*O:.5*(I+T)*(d-1);if(F<0||F>d-1){for(let V=0;V<m;V++)for(let U=0;U<h;U++){const ne=U+V*C[2]+D*C[1]+x*C[0];v.values[ne]=u}continue}if(l==="bilinear"){const V=Math.floor(F),U=Math.ceil(F),ne=F-V;for(let be=0;be<m;be++){const te=m>1?S*(f-1)+be*M:.5*(S+_)*(f-1);if(te<0||te>f-1){for(let Y=0;Y<h;Y++){const X=Y+be*C[2]+D*C[1]+x*C[0];v.values[X]=u}continue}const he=Math.floor(te),oe=Math.ceil(te),G=te-he;for(let Y=0;Y<h;Y++){let X=Y+he*w[2]+V*w[1]+N*w[0];const ae=y[X];X=Y+oe*w[2]+V*w[1]+N*w[0];const Se=y[X];X=Y+he*w[2]+U*w[1]+N*w[0];const Le=y[X];X=Y+oe*w[2]+U*w[1]+N*w[0];const Be=y[X],Fe=ae+(Se-ae)*G,j=Le+(Be-Le)*G;X=Y+be*C[2]+D*C[1]+x*C[0],v.values[X]=Fe+(j-Fe)*ne}}}else for(let V=0;V<m;++V){const U=m>1?S*(f-1)+V*M:.5*(S+_)*(f-1);if(U<0||U>f-1){for(let te=0;te<h;te++){const he=te+V*C[2]+D*C[1]+x*C[0];v.values[he]=u}continue}const ne=Math.round(U),be=Math.round(F);for(let te=0;te<h;te++){const he=te+ne*w[2]+be*w[1]+N*w[0],oe=te+V*C[2]+D*C[1]+x*C[0];v.values[oe]=y[he]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const _6e={kernelName:Rk,backendName:"cpu",kernelFunc:E6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:i,reverse:a}=s;It(o,"cumsum");const l=Ts([r],o.shape.length);let u=o;l!=null&&(u=Ir({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=Rs(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=kr(u.dtype,"int32"),f=So(Ue(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],g=a?(v,b)=>v+p-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=p)for(let b=0;b<p;b++){const $=g(v,b);if(b===0)f[$]=i?0:h[$];else{const y=g(v,b-1);f[$]=i?h[y]+f[y]:h[$]+f[y]}}const m=n.makeTensorInfo(u.shape,d,f);if(l!=null){const v=pf(l),b=Ir({inputs:{x:m},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(u),b}return m}const A6e={kernelName:Z0,backendName:"cpu",kernelFunc:N6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=qI(l,u,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(r),c=q5(l,u,i,a);return n.makeTensorInfo(c.shape,r.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const R6e={kernelName:AB,backendName:"cpu",kernelFunc:D6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockSize:r,dataFormat:i}=s;K(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],d=l*r,f=u*r,h=c/(r*r),p=n.data.get(o.dataId).values,g=new Float32Array(a*d*f*h);let m=0;for(let v=0;v<a;++v)for(let b=0;b<d;++b){const $=Math.floor(b/r),y=b%r;for(let w=0;w<f;++w){const C=Math.floor(w/r),x=w%r,k=(y*r+x)*h;for(let I=0;I<h;++I){const T=I+k+c*(C+u*($+l*v));g[m++]=p[T]}}}return n.makeTensorInfo([a,d,f,h],o.dtype,g)}const M6e={kernelName:Ok,backendName:"cpu",kernelFunc:O6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=s;It([o,r],"depthwiseConv2DNative");const c=Dt(o.shape),d=Dt(r.shape);let f=l;f==null&&(f=[1,1]),K(Io(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const h=co(o.shape,r.shape,i,f,a,u,!0),{filterHeight:p,filterWidth:g,dilationHeight:m,dilationWidth:v,padInfo:b}=h,$=b.left,y=b.top,w=h.outChannels/h.inChannels,C=new $o(h.outShape,o.dtype),x=n.data.get(o.dataId).values,k=n.data.get(r.dataId).values,I=C.values;for(let S=0;S<h.batchSize;++S){const T=S*c[0],_=S*C.strides[0];for(let N=0;N<h.outHeight;++N){const O=_+N*C.strides[1],M=N*h.strideHeight-y;for(let D=0;D<p;++D){const F=M+D*m;if(F<0||F>=h.inHeight)continue;const V=D*d[0],U=T+F*c[1];for(let ne=0;ne<h.outWidth;++ne){const be=O+ne*C.strides[2],te=ne*h.strideWidth-$;for(let he=0;he<g;++he){const oe=te+he*v;if(oe<0||oe>=h.inWidth)continue;const G=V+he*d[1],Y=U+oe*h.inChannels;let X=be,ae=G;for(let Se=0;Se<h.inChannels;++Se){const Le=x[Y+Se];for(let Be=0;Be<w;++Be)I[X+Be]+=Le*k[ae+Be];X+=w,ae+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const P6e={kernelName:J0,backendName:"cpu",kernelFunc:WW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=s;It([o,r],"depthwiseConv2dNativeBackpropFilter");const d=co(o.shape,c,i,a,l,u,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:g}=d,m=new $o(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,$=d.outChannels/d.inChannels,y=n.data.get(o.dataId).values,w=new $o(o.shape,o.dtype,y),C=n.data.get(r.dataId).values,x=new $o(r.shape,r.dtype,C);for(let k=0;k<p;++k){const I=Math.max(0,Math.ceil((b-k)/f)),S=Math.min(d.outHeight,(d.inHeight+b-k)/f);for(let T=0;T<g;++T){const _=Math.max(0,Math.ceil((v-T)/h)),N=Math.min(d.outWidth,(d.inWidth+v-T)/h);for(let O=0;O<d.outChannels;++O){const M=Math.trunc(O/$),D=O%$;let F=0;for(let V=0;V<d.batchSize;++V)for(let U=I;U<S;++U){const ne=k+U*f-b;for(let be=_;be<N;++be){const te=T+be*h-v;F+=w.get(V,ne,te,M)*x.get(V,U,be,O)}}m.set(F,k,T,M,D)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const L6e={kernelName:Mk,backendName:"cpu",kernelFunc:F6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=s;It([o,r],"depthwiseConv2DNativeBackpropInput");const d=Dt(o.shape),f=Dt(r.shape),h=co(c,r.shape,i,a,l,u,!0),p=new $o(h.inShape,"float32"),g=p.values,[m,v,b]=p.strides,$=n.data.get(o.dataId).values,[y,w,C]=d,x=n.data.get(r.dataId).values,[k,I,S]=f,{batchSize:T,filterHeight:_,filterWidth:N,inChannels:O,inHeight:M,inWidth:D,outChannels:F,outHeight:V,outWidth:U,strideHeight:ne,strideWidth:be}=h,te=_-1-h.padInfo.top,he=N-1-h.padInfo.left,oe=F/O;for(let G=0;G<T;++G)for(let Y=0;Y<O;++Y)for(let X=0;X<M;++X){const ae=X-te,Se=Math.max(0,Math.ceil(ae/ne)),Le=Math.min(V,(_+ae)/ne);for(let Be=0;Be<D;++Be){const Fe=Be-he,j=Math.max(0,Math.ceil(Fe/be)),Q=Math.min(U,(N+Fe)/be);let H=0;for(let se=Se;se<Le;++se){const we=se*ne-ae;for(let J=j;J<Q;++J){const _e=J*be-Fe,Ie=y*G+w*se+C*J,fe=k*(_-1-we)+I*(N-1-_e)+S*Y;for(let Te=0;Te<oe;++Te){const rt=Y*oe+Te,Xe=$[Ie+rt],lt=x[fe+Te];H+=Xe*lt}}}g[m*G+v*X+b*Be+Y]=H}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const z6e={kernelName:Pk,backendName:"cpu",kernelFunc:B6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=Ue(s.shape),r=n.data.get(s.dataId).values,i=gn([o,o],s.dtype),a=i.values;for(let u=0;u<r.length;u++)a[u*o+u]=r[u];const l=[...s.shape,...s.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const W6e={kernelName:DB,backendName:"cpu",kernelFunc:V6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H6e={kernelName:Q0,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o}=e,{strides:r,pad:i,dilations:a}=n,l=t,u=l.data.get(s.dataId).values,c=s.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:p,inWidth:g,inChannels:m,outHeight:v,outWidth:b,padInfo:$,strideHeight:y,strideWidth:w,filterHeight:C,filterWidth:x,dilationHeight:k,dilationWidth:I,outShape:S}=zg(s.shape,o.shape,r,i,"NHWC",a),T=Ue(S),_=S.length,N=zo(s.dtype,T);for(let M=0;M<h;++M)for(let D=0;D<v;++D){const F=D*y-$.top;for(let V=0;V<b;++V){const U=V*w-$.left;for(let ne=0;ne<m;++ne){let be=Number.MIN_SAFE_INTEGER;for(let he=0;he<C;++he){const oe=F+he*k;if(oe>=0&&oe<p)for(let G=0;G<x;++G){const Y=U+G*I;if(Y>=0&&Y<g){const X=ji([M,oe,Y,ne],c,Dt(s.shape)),ae=ji([he,G,ne],f,Dt(o.shape)),Se=u[X]+d[ae];Se>be&&(be=Se)}}}const te=ji([M,D,V,ne],_,Dt(S));N[te]=be}}}return{dataId:l.write(pc(N,s.dtype),S,s.dtype),shape:S,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6e={kernelName:KC,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o,dy:r}=e,{strides:i,pad:a,dilations:l}=n,u=t,c=wi(s.shape,u.data.get(s.dataId).values),d=wi(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:g,outHeight:m,outWidth:v,padInfo:b,strideHeight:$,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:x,dilationWidth:k,outShape:I}=zg(s.shape,o.shape,i,a,"NHWC",l);K(r.rank===I.length,()=>`Error in ${KC}, dy must have the same rank as output ${I.length}, but got ${r.rank}`);const S=wi(I,u.data.get(r.dataId).values),T=SB(o.shape,o.dtype);for(let N=0;N<f;++N)for(let O=0;O<m;++O){const M=O*$-b.top;for(let D=0;D<v;++D){const F=D*y-b.left;for(let V=0;V<g;++V){let U=Number.MIN_SAFE_INTEGER,ne=0,be=0;for(let te=0;te<w;++te){const he=M+te*x;if(he>=0&&he<h)for(let oe=0;oe<C;++oe){const G=F+oe*k;if(G>=0&&G<p){const Y=c[N][he][G][V]+d[te][oe][V];Y>U&&(U=Y,ne=te,be=oe)}}}T[ne][be][V]+=S[N][O][D][V]}}}return{dataId:u.write(pc(T,s.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6e={kernelName:GC,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o,dy:r}=e,{strides:i,pad:a,dilations:l}=n,u=t,c=wi(s.shape,u.data.get(s.dataId).values),d=wi(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:g,outHeight:m,outWidth:v,padInfo:b,strideHeight:$,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:x,dilationWidth:k,outShape:I}=zg(s.shape,o.shape,i,a,"NHWC",l);K(r.rank===I.length,()=>`Error in ${GC}, dy must have the same rank as output ${I.length}, but got ${r.rank}`);const S=wi(I,u.data.get(r.dataId).values),T=SB(s.shape,s.dtype);for(let N=0;N<f;++N)for(let O=0;O<m;++O){const M=O*$-b.top;for(let D=0;D<v;++D){const F=D*y-b.left;for(let V=0;V<g;++V){let U=Number.MIN_SAFE_INTEGER,ne=M<0?0:M,be=F<0?0:F;for(let te=0;te<w;++te){const he=M+te*x;if(he>=0&&he<h)for(let oe=0;oe<C;++oe){const G=F+oe*k;if(G>=0&&G<p){const Y=c[N][he][G][V]+d[te][oe][V];Y>U&&(U=Y,ne=he,be=G)}}}T[N][ne][be][V]+=S[N][O][D][V]}}}return{dataId:u.write(pc(T,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nm(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;It(o,"sum");let a;o.dtype==="bool"?a=$l({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=ea({inputs:{x:o},backend:n});const l=a.shape.length,u=un(r,a.shape),c=Ts(u,l);let d=u,f=a;c!=null&&(f=Ir({inputs:{x:a},backend:n,attrs:{perm:c}}),d=Rs(d.length,l)),fo("sum",d,f.shape.length);const[h,p]=Qs(f.shape,d),g=kr(f.dtype,"int32");let m=Hb(n,h,g);const v=Ue(p),b=n.data.get(m.dataId).values,$=n.data.get(f.dataId).values;for(let y=0;y<b.length;++y){const w=y*v;let C=0;for(let x=0;x<v;++x)C+=$[w+x];b[y]=C}if(i){const y=Is(m.shape,u),w=m;m=gs({inputs:{x:m},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),m}const G6e={kernelName:Ay,backendName:"cpu",kernelFunc:nm};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6e(e){const{inputs:t,backend:n,attrs:s}=e,{equation:o}=s,r=t,{allDims:i,summedDims:a,idDims:l}=vI(o,r.length);yI(i.length,l,r);const{path:u,steps:c}=wI(a,l),d=c.length;let f=null,h=i.length;const p=[];for(let g=0;g<d;++g){for(const m of c[g]){const{permutationIndices:v,expandDims:b}=bI(h,l[m]);let $;$I(v)?$=r[m]:($=Ir({inputs:{x:r[m]},backend:n,attrs:{perm:v}}),p.push($));const y=$.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);Mn($.shape,y)||($=gs({inputs:{x:$},backend:n,attrs:{shape:y}}),p.push($)),f===null?f=$:(f=f1({inputs:{a:$,b:f},backend:n}),p.push(f))}g<d-1&&(u[g]>=0&&(f=nm({inputs:{x:f},backend:n,attrs:{axis:u[g]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const g of p)g!==f&&n.disposeIntermediateTensorInfo(g);return f}const q6e={kernelName:RB,backendName:"cpu",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y6e(e){const{inputs:t,backend:n}=e,{dy:s,y:o}=t;It([s,o],"eluGrad");const r=new Float32Array(Ue(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(s.dataId).values;for(let l=0;l<i.length;++l){const u=i[l];u>=1?r[l]=a[l]:r[l]=a[l]*(u+1)}return n.makeTensorInfo(o.shape,"float32",r)}const X6e={kernelName:Fk,backendName:"cpu",kernelFunc:Y6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6e=cI,J6e=dI,Q6e=fI,e5e=hI,t5e=pI,n5e=gI,s5e=Hn(og,e=>{const t=Math.sign(e),n=Math.abs(e),s=1/(1+Z6e*n);return t*(1-((((n5e*s+t5e)*s+e5e)*s+Q6e)*s+J6e)*s*Math.exp(-n*n))}),o5e={kernelName:og,backendName:"cpu",kernelFunc:s5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ub(e){const{inputs:t,backend:n,attrs:s}=e,{input:o}=t,{dim:r}=s,i=o.shape.length,a=o.shape.slice();let l=r;return r<0&&(K(-(i+1)<=r,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+r+1),a.splice(l,0,1),gs({inputs:{x:o},backend:n,attrs:{shape:a}})}const r5e={kernelName:ty,backendName:"cpu",kernelFunc:Ub};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i5e=Os((e,t)=>e/t),tT=eo(ng,i5e),kx={kernelName:ng,backendName:"cpu",kernelFunc:tT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HW(e,t,n){const s=e.shape,o=s[0],r=s[1],i=n.data.get(e.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[o,r],c=Ue(u),d=uo("float32",c),f=uo("float32",c);for(let m=0;m<o;m++){const v=tc({inputs:{x:a},backend:n,attrs:{begin:[m,0],size:[1,r]}}),b=tc({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,r]}}),$=qo({inputs:{real:v,imag:b},backend:n}),{real:y,imag:w}=a5e($,t,n),C=Aa(y,w);for(let x=0;x<r;x++){const k=mI(C,x);d[m*r+x]=k.real,f[m*r+x]=k.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo($)}const h=n.makeTensorInfo(u,"float32",d),p=n.makeTensorInfo(u,"float32",f),g=qo({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),g}function a5e(e,t,n){const s=Ue(e.shape),o=n.data.get(e.dataId),r=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(l5e(s)){const a=Sx(r,i,s,t,n),l=[e.shape[0],e.shape[1]];if(t){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",Rl(s,"float32")),f=ea({inputs:{x:d},backend:n}),h=kx.kernelFunc({inputs:{a:u,b:d},backend:n}),p=kx.kernelFunc({inputs:{a:c,b:f},backend:n}),g=n.data.get(h.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:g,imag:m}}return a}else{const a=Aa(r,i),l=u5e(a,s,t);return fV(l)}}function l5e(e){return(e&e-1)===0}function Sx(e,t,n,s,o){if(n===1)return{real:e,imag:t};const r=Aa(e,t),i=n/2,a=hV(r),l=a.real,u=a.imag,c=[l.length],d=o.makeTensorInfo(c,"float32",l),f=o.makeTensorInfo(c,"float32",u),h=qo({inputs:{real:d,imag:f},backend:o}),p=pV(r),g=p.real,m=p.imag,v=[g.length],b=o.makeTensorInfo(v,"float32",g),$=o.makeTensorInfo(v,"float32",m),y=qo({inputs:{real:b,imag:$},backend:o}),w=Sx(l,u,i,s,o),C=w.real,x=w.imag,k=[C.length],I=o.makeTensorInfo(k,"float32",C),S=o.makeTensorInfo(k,"float32",x),T=qo({inputs:{real:I,imag:S},backend:o}),_=Sx(g,m,i,s,o),N=_.real,O=_.imag,M=[N.length],D=o.makeTensorInfo(M,"float32",N),F=o.makeTensorInfo(M,"float32",O),V=qo({inputs:{real:D,imag:F},backend:o}),U=mV(n,s),ne=[U.real.length],be=o.makeTensorInfo(ne,"float32",U.real),te=o.makeTensorInfo(ne,"float32",U.imag),he=qo({inputs:{real:be,imag:te},backend:o}),oe=f1({inputs:{a:he,b:V},backend:o}),G=tm({inputs:{a:T,b:oe},backend:o}),Y=JI({inputs:{a:T,b:oe},backend:o}),X=ec({inputs:{input:G},backend:o}),ae=ec({inputs:{input:Y},backend:o}),Se=zd({inputs:{input:G},backend:o}),Le=zd({inputs:{input:Y},backend:o}),Be=Vd({inputs:[X,ae],backend:o,attrs:{axis:0}}),Fe=Vd({inputs:[Se,Le],backend:o,attrs:{axis:0}}),j=o.data.get(Be.dataId).values,Q=o.data.get(Fe.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo($),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(S),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(be),o.disposeIntermediateTensorInfo(te),o.disposeIntermediateTensorInfo(he),o.disposeIntermediateTensorInfo(oe),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(Y),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(Se),o.disposeIntermediateTensorInfo(ae),o.disposeIntermediateTensorInfo(Le),o.disposeIntermediateTensorInfo(Be),o.disposeIntermediateTensorInfo(Fe),{real:j,imag:Q}}function u5e(e,t,n){const s=new Float32Array(t*2);for(let o=0;o<t;o++){let r=0,i=0;for(let a=0;a<t;a++){const l=vV(o*a,t,n),u=mI(e,a);r+=u.real*l.real-u.imag*l.imag,i+=u.real*l.imag+u.imag*l.real}n&&(r/=t,i/=t),gV(s,r,i,o)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5e(e){const{inputs:t,backend:n}=e,{input:s}=t,o=Ue(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=gs({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),l=HW(a,!1,n),u=gs({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const d5e={kernelName:Lk,backendName:"cpu",kernelFunc:c5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nT(e){const{backend:t,attrs:n}=e,{shape:s,value:o,dtype:r}=n,i=r||Wp(o),a=zo(i,Ue(s));return h5e(a,o,i),t.makeTensorInfo(s,i,a)}const f5e={kernelName:Bk,backendName:"cpu",kernelFunc:nT};function h5e(e,t,n){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5e={kernelName:zk,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,o=n,r=uo(s.dtype,Ue(s.shape)),[i,a,l,u]=s.shape,c=o.data.get(s.dataId).values;for(let f=0;f<i;f++){const h=f*l*a*u;for(let p=0;p<a;p++){const g=p*(l*u);for(let m=0;m<l;m++){const v=m*u;for(let b=0;b<u;b++){const $=Math.round(l-m-1),y=h+g+v+b;let w=c[y];if($>=0&&$<l){const C=$*u,x=h+g+C+b;w=c[x]}r[y]=w}}}}return{dataId:o.write(r,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5e=Os((e,t)=>Math.floor(e/t)),m5e=eo(lg,g5e,null,"int32"),v5e={kernelName:lg,backendName:"cpu",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s;let g=VW({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const m=g;g=tm({inputs:{a:g,b:i},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){const m=g;g=QI(n,g,h,a,p),n.disposeIntermediateTensorInfo(m)}return g}const y5e={kernelName:_b,backendName:"cpu",kernelFunc:b5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s;let g=WW({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const m=g;g=tm({inputs:{a:g,b:i},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){const m=g;g=QI(n,g,h,a,p),n.disposeIntermediateTensorInfo(m)}return g}const $5e={kernelName:zB,backendName:"cpu",kernelFunc:w5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5e(e){const{inputs:t,backend:n}=e,{params:s,indices:o}=t,r=Ue(s.shape),i=o.shape,a=i[i.length-1],[l,u,c,d]=vS(s,o);if(u===0)return n.makeTensorInfo(l,s.dtype,[]);const f=n.data.get(o.dataId).values,h=n.bufferSync(s),p=sW(f,h,s.dtype,u,a,c,d,s.shape,r);return n.makeTensorInfo(l,s.dtype,p.values)}const x5e={kernelName:OB,backendName:"cpu",kernelFunc:C5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,indices:r}=t,{axis:i,batchDims:a}=s;It([o,r],"gatherV2");const l=un(i,o.shape)[0],u=n.data.get(r.dataId).values,c=o.shape[l];for(let y=0;y<u.length;++y){const w=u[y];K(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const f=Ue(r.shape),h=xI(o,r,l,d),p=gs({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=gs({inputs:{x:r},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),m=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],v=n.bufferSync(g),b=n.bufferSync(p),$=oW(b,v,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(h.outputShape,$.dtype,$.values)}const S5e={kernelName:sy,backendName:"cpu",kernelFunc:k5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5e(e){const{inputs:t,backend:n}=e,{input:s}=t,o=Ue(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=gs({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),l=HW(a,!0,n),u=gs({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const T5e={kernelName:Vk,backendName:"cpu",kernelFunc:I5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5e=Hn(dg,e=>Number.isFinite(e)?1:0,"bool"),_5e={kernelName:dg,backendName:"cpu",kernelFunc:E5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N5e=Hn(fg,e=>Math.abs(e)===1/0?1:0,"bool"),A5e={kernelName:fg,backendName:"cpu",kernelFunc:N5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D5e=Hn(hg,e=>Number.isNaN(e)?1:0,"bool"),R5e={kernelName:hg,backendName:"cpu",kernelFunc:D5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5e(e){const{backend:t,attrs:n}=e,{start:s,stop:o,num:r}=n,i=uW(s,o,r);return t.makeTensorInfo([i.length],"float32",i)}const M5e={kernelName:MB,backendName:"cpu",kernelFunc:O5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5e=Hn(gg,e=>Math.log1p(e)),F5e={kernelName:gg,backendName:"cpu",kernelFunc:P5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5e=Os((e,t)=>e&&t),B5e=eo(ly,L5e,null,"bool"),z5e={kernelName:ly,backendName:"cpu",kernelFunc:B5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e=Hn(uy,e=>e?0:1,"bool"),W5e={kernelName:uy,backendName:"cpu",kernelFunc:V5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5e=Os((e,t)=>e||t),U5e=eo(cy,H5e,null,"bool"),j5e={kernelName:cy,backendName:"cpu",kernelFunc:U5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{depthRadius:r,bias:i,alpha:a,beta:l}=s;It(o,"LRN");const u=o.shape[3],c=u-1,d=n.data.get(o.dataId).values,f=Ue(o.shape),h=new Float32Array(f);function p(g){const m=g%u;let v=g-m+Math.max(0,m-r);const b=g-m+Math.min(m+r,c);let $=0;for(;v<=b;v++){const y=d[v];$+=y*y}return $}for(let g=0;g<f;g++){const m=p(g),v=d[g]*Math.pow(i+a*m,-l);h[g]=v}return n.makeTensorInfo(o.shape,o.dtype,h)}const K5e={kernelName:dy,backendName:"cpu",kernelFunc:G5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,y:r,dy:i}=t,{depthRadius:a,bias:l,alpha:u,beta:c}=s;It(i,"LRNGrad");const d=Ue(i.shape),f=i.shape[3],h=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,g=n.data.get(r.dataId).values,m=new Float32Array(d),v=d;for(let b=0;b<v;b++){const $=b%f,y=b-$+Math.max(0,$-a),w=b-$+Math.min(f,$+a+1);let C=0;for(let x=y;x<w;x++)C+=Math.pow(p[x],2);C=u*C+l;for(let x=y;x<w;x++){let k=-2*u*c*p[x]*g[b]/C;b===x&&(k+=Math.pow(C,-c)),k*=h[b],m[x]+=k}}return n.makeTensorInfo(i.shape,o.dtype,m)}const Y5e={kernelName:Hk,backendName:"cpu",kernelFunc:q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reductionIndices:r,keepDims:i}=s,a=n;let l=o.shape;const u=l.length,c=un(r,l);let d=c;const f=Ts(d,u);let h=a.data.get(o.dataId).values;if(f!=null){const y=new Array(u);for(let w=0;w<y.length;w++)y[w]=l[f[w]];h=XI(h,l,o.dtype,f,y),d=Rs(d.length,u),l=y}It(o,"max"),fo("max",d,u);const[p,g]=Qs(l,d),m=Ue(g),v=dW(h,m,p,o.dtype),b=a.write(v,p,o.dtype);let $=p;return i&&($=Is(p,c)),{dataId:b,shape:$,dtype:o.dtype}}const X5e={kernelName:fy,backendName:"cpu",kernelFunc:UW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;It(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;K(Io(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ni(o.shape,r,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Mn(c.inShape,c.outShape))d=ea({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Dt(o.shape),p=eT(f,o.shape,o.dtype,h,c,"max");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const J5e={kernelName:hy,backendName:"cpu",kernelFunc:Z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s;It(o,"maxPool3d");const c=Ma(o.shape,r,i,1,a,l,u),d=n.data.get(o.dataId).values,f=zW(d,o.shape,o.dtype,Dt(o.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const eWe={kernelName:py,backendName:"cpu",kernelFunc:Q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tWe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=s;It([o,r],"maxPool3DGrad");const c=Ma(r.shape,i,a,1,l,u),d=n.bufferSync(r),f=UVe(d,c),h=c.strideDepth,p=c.strideHeight,g=c.strideWidth,m=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,$=c.effectiveFilterDepth,y=c.effectiveFilterHeight,w=c.effectiveFilterWidth,C=$-1-c.padInfo.front,x=w-1-c.padInfo.left,k=y-1-c.padInfo.top,I=gn(r.shape,"float32"),S=n.bufferSync(o);for(let T=0;T<c.batchSize;++T)for(let _=0;_<c.inChannels;++_)for(let N=0;N<c.inDepth;++N)for(let O=0;O<c.inHeight;++O)for(let M=0;M<c.inWidth;++M){const D=N-C,F=O-k,V=M-x;let U=0;for(let ne=0;ne<$;ne+=m){const be=(D+ne)/h;if(!(be<0||be>=c.outDepth||Math.floor(be)!==be))for(let te=0;te<y;te+=v){const he=(F+te)/p;if(!(he<0||he>=c.outHeight||Math.floor(he)!==he))for(let oe=0;oe<w;oe+=b){const G=(V+oe)/g;if(G<0||G>=c.outWidth||Math.floor(G)!==G)continue;const Y=$*y*w-1-f.get(T,be,he,G,_),X=ne*y*w+te*w+oe,ae=Y===X?1:0;if(ae===0)continue;U+=S.get(T,be,he,G,_)*ae}}}I.set(U,T,N,O,M,_)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const nWe={kernelName:jk,backendName:"cpu",kernelFunc:tWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sWe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r,output:i}=t,a=r;It([r,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,f=ni(a.shape,l,u,1,c,d),h=n.data.get(a.dataId).values,p=gn(f.outShape,a.dtype,BW(h,a.shape,a.dtype,f).values),g=f.strideHeight,m=f.strideWidth,v=f.dilationHeight,b=f.dilationWidth,$=f.effectiveFilterHeight,y=f.effectiveFilterWidth,w=y-1-f.padInfo.left,C=$-1-f.padInfo.top,x=gn(a.shape,"float32"),k=n.data.get(o.dataId).values,I=gn(o.shape,"float32",k);for(let S=0;S<f.batchSize;++S)for(let T=0;T<f.inChannels;++T)for(let _=0;_<f.inHeight;++_)for(let N=0;N<f.inWidth;++N){const O=_-C,M=N-w;let D=0;for(let F=0;F<$;F+=v){const V=(O+F)/g;if(!(V<0||V>=f.outHeight||Math.floor(V)!==V))for(let U=0;U<y;U+=b){const ne=(M+U)/m;if(ne<0||ne>=f.outWidth||Math.floor(ne)!==ne)continue;const be=$*y-1-p.get(S,V,ne,T),te=F*y+U,he=be===te?1:0;if(he===0)continue;D+=I.get(S,V,ne,T)*he}}x.set(D,S,_,N,T)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const oWe={kernelName:Uk,backendName:"cpu",kernelFunc:sWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rWe(e,t,n,s,o){const r=Dt(t),i=eT(e,t,n,r,o,"max"),a=BW(e,t,n,o,!0,s);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iWe={kernelName:PB,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=t,l=n;It(s,"MaxPoolWithArgmax");const u=l.data.get(s.dataId).values,c=ni(s.shape,o,r,[1,1],i),[d,f]=rWe(u,s.shape,s.dtype,a,c),h=l.write(d,c.outShape,s.dtype),p=l.write(f,c.outShape,s.dtype);return[{dataId:h,shape:c.outShape,dtype:s.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=un(r,o.shape),u=Qs(o.shape,a)[1],c=Ue(u),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(f);const h=$l({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=tT({inputs:{a:h,b:f},backend:n});d.push(p);const g=nm({inputs:{x:p},backend:n,attrs:{axis:r,keepDims:i}});return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),g}const lWe={kernelName:gy,backendName:"cpu",kernelFunc:aWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;It(o,"min");const a=un(r,o.shape);let l=a;const u=Ts(l,o.shape.length);let c=o;u!=null&&(c=Ir({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Rs(l.length,o.shape.length)),fo("min",l,c.shape.length);const[d,f]=Qs(c.shape,l),h=Ue(f),p=So(Ue(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=g[b];for(let y=0;y<h;++y){const w=g[b+y];(Number.isNaN(w)||w<$)&&($=w)}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Is(d,a),b=gs({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),b}return m}const cWe={kernelName:my,backendName:"cpu",kernelFunc:uWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,mode:i}=s;It(o,"mirrorPad");const a=r.map(($,y)=>$[0]+o.shape[y]+$[1]),l=r.map($=>$[0]),u=r.map(($,y)=>$[0]+o.shape[y]),c=i==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,h=Dt(o.shape),p=Ue(a),g=a.length,m=Dt(a),v=uo(o.dtype,p);for(let $=0;$<p;$++){let y=Hp($,g,m);for(let C=0;C<g;C++)y[C]<l[C]?y[C]=l[C]*2-y[C]-c:y[C]>=u[C]&&(y[C]=(u[C]-1)*2-y[C]+c);y=y.map((C,x)=>C-l[x]);const w=ji(y,f,h);v[$]=d[w]}return{dataId:n.write(v,a,o.dtype),shape:a,dtype:o.dtype}}const fWe={kernelName:vy,backendName:"cpu",kernelFunc:dWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hWe=Os((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),pWe=eo(bg,hWe),gWe={kernelName:bg,backendName:"cpu",kernelFunc:pWe};var jW={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(On,e,!1)})(jW);var GW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(On,e,!1)})(GW);var KW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(On,e,!1)})(KW);var qW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(On,e,!1)})(qW);var YW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,g,m,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,g=-32;g<b;++g)d&&(h^=d.charCodeAt((g+32)%d.length)),g===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(m=m+1640531527|0,f=v[g&127]^=h+m,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,g=4*128;g>0;--g)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=m,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(On,e,!1)})(YW);var XW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(On,e,!1)})(XW);var ZW={exports:{}};(function(e){(function(t,n){var s=this,o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,w,C){var x=[];w=w==!0?{entropy:!0}:w||{};var k=v(m(w.entropy?[y,$(t)]:y==null?b():y,3),x),I=new p(x),S=function(){for(var T=I.g(r),_=l,N=0;T<u;)T=(T+N)*o,_*=o,N=I.g(1);for(;T>=c;)T/=2,_/=2,N>>>=1;return(T+N)/_};return S.int32=function(){return I.g(4)|0},S.quick=function(){return I.g(4)/4294967296},S.double=S,v($(I.S),t),(w.pass||C||function(T,_,N,O){return O&&(O.S&&g(O,I),T.state=function(){return g(I,{})}),N?(n[a]=T,_):T})(S,k,"global"in w?w.global:this==n,w.state)}n["seed"+a]=h;function p(y){var w,C=y.length,x=this,k=0,I=x.i=x.j=0,S=x.S=[];for(C||(y=[C++]);k<o;)S[k]=k++;for(k=0;k<o;k++)S[k]=S[I=d&I+y[k%C]+(w=S[k])],S[I]=w;(x.g=function(T){for(var _,N=0,O=x.i,M=x.j,D=x.S;T--;)_=D[O=d&O+1],N=N*o+D[d&(D[O]=D[M=d&M+_])+(D[M]=_)];return x.i=O,x.j=M,N})(o)}function g(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function m(y,w){var C=[],x=typeof y,k;if(w&&x=="object")for(k in y)try{C.push(m(y[k],w-1))}catch{}return C.length?C:x=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",x,k=0;k<C.length;)w[d&k]=d&(x^=w[d&k]*19)+C.charCodeAt(k++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(ZW);var mWe=jW.exports,vWe=GW.exports,bWe=KW.exports,yWe=qW.exports,wWe=YW.exports,$We=XW.exports,bc=ZW.exports;bc.alea=mWe;bc.xor128=vWe;bc.xorwow=bWe;bc.xorshift7=yWe;bc.xor4096=wWe;bc.tychei=$We;var CWe=bc;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JW(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{dim:r}=s,i=o.shape.length;let a=r;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=un([a],o.shape),u=UW({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Is(u.shape,l),d=gs({inputs:{x:u},backend:n,attrs:{shape:c}}),f=JI({inputs:{a:o,b:d},backend:n}),h=eW({inputs:{x:f},backend:n}),p=nm({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),g=gs({inputs:{x:p},backend:n,attrs:{shape:c}}),m=tT({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}const xWe={kernelName:Oy,backendName:"cpu",kernelFunc:JW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kWe(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{numSamples:r,seed:i,normalized:a}=s;It(o,"multinomial");const l=a?o:JW({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,f=[u,r],h=So(Ue(f),"int32");for(let p=0;p<u;++p){const g=p*c,m=new Float32Array(c-1);m[0]=d[g];for(let $=1;$<m.length;++$)m[$]=m[$-1]+d[g+$];const v=CWe.alea(i.toString()),b=p*r;for(let $=0;$<r;++$){const y=v();h[b+$]=m.length;for(let w=0;w<m.length;w++)if(y<m[w]){h[b+$]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const SWe={kernelName:FB,backendName:"cpu",kernelFunc:kWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IWe=YS;function TWe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s;It(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,{selectedIndices:d}=IWe(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const EWe={kernelName:Gk,backendName:"cpu",kernelFunc:TWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _We=XS;function NWe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s;It(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,{selectedIndices:f,validOutputs:h}=_We(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const AWe={kernelName:Kk,backendName:"cpu",kernelFunc:NWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DWe=ZS;function RWe(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s;It(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,f=i,h=a,p=l,g=u,{selectedIndices:m,selectedScores:v}=DWe(c,d,f,h,p,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const OWe={kernelName:qk,backendName:"cpu",kernelFunc:RWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MWe(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o}=t,{depth:r,onValue:i,offValue:a}=s;It(o,"oneHot");const l=Ue(o.shape),u=new Float32Array(l*r);u.fill(a);const c=n.data.get(o.dataId).values;for(let d=0;d<l;++d)c[d]>=0&&c[d]<r&&(u[d*r+c[d]]=i);return n.makeTensorInfo([...o.shape,r],"int32",u)}const PWe={kernelName:$y,backendName:"cpu",kernelFunc:MWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jb(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const o=ec({inputs:{input:s},backend:n}),r=jb({inputs:{x:o},backend:n}),i=zd({inputs:{input:s},backend:n}),a=jb({inputs:{x:i},backend:n}),l=qo({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return nT({backend:n,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const FWe={kernelName:Ly,backendName:"cpu",kernelFunc:jb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QW(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const o=ec({inputs:{input:s},backend:n}),r=QW({inputs:{x:o},backend:n}),i=zd({inputs:{input:s},backend:n}),a=jb({inputs:{x:i},backend:n}),l=qo({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return nT({backend:n,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const LWe={kernelName:wy,backendName:"cpu",kernelFunc:QW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s;if(t.length===1)return Ub({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const r=t[0].shape,i=t[0].dtype;t.forEach(c=>{ti(r,c.shape,"All tensors passed to stack must have matching shapes"),K(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(c=>{const d=Ub({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=Vd({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const BWe={kernelName:Cy,backendName:"cpu",kernelFunc:e8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,constantValue:i}=s;It(o,"pad");const a=r.map((b,$)=>b[0]+o.shape[$]+b[1]),l=r.map(b=>b[0]),u=n.data.get(o.dataId).values,c=Ue(o.shape),d=o.shape.length,f=Dt(o.shape),h=Ue(a),p=a.length,g=Dt(a),m=uo(o.dtype,h);i!==0&&m.fill(i);for(let b=0;b<c;b++){const y=Hp(b,d,f).map((C,x)=>C+l[x]),w=ji(y,p,g);m[w]=u[b]}return{dataId:n.write(m,a,o.dtype),shape:a,dtype:o.dtype}}const t8={kernelName:xy,backendName:"cpu",kernelFunc:zWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VWe=Os((e,t)=>Math.pow(e,t)),WWe=eo(wg,VWe),HWe={kernelName:wg,backendName:"cpu",kernelFunc:WWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UWe(e){const{backend:t,attrs:n}=e,{start:s,stop:o,dtype:r,step:i}=n,a=vW(s,o,i,r);return t.makeTensorInfo([a.length],r,a)}const jWe={kernelName:Xk,backendName:"cpu",kernelFunc:UWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GWe=Hn($g,e=>1/e),KWe={kernelName:$g,backendName:"cpu",kernelFunc:GWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qWe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s;It(o,"resizeBilinear");const l=Dt(o.shape),[u,c]=a,[d,f,h,p]=o.shape,g=n.data.get(o.dataId).values,m=new Float32Array(Ue([d,u,c,p])),v=[r&&u>1?f-1:f,r&&c>1?h-1:h],b=[r&&u>1?u-1:u,r&&c>1?c-1:c];let $=0;const y=v[0]/b[0],w=v[1]/b[1];for(let C=0;C<d;C++)for(let x=0;x<u;x++){let k;i?k=y*(x+.5)-.5:k=y*x;const I=Math.max(0,Math.floor(k)),S=k-I,T=Math.min(f-1,Math.ceil(k)),_=C*l[0]+I*l[1],N=C*l[0]+T*l[1];for(let O=0;O<c;O++){let M;i?M=w*(O+.5)-.5:M=w*O;const D=Math.max(0,Math.floor(M)),F=M-D,V=Math.min(h-1,Math.ceil(M)),U=_+D*l[2],ne=N+D*l[2],be=_+V*l[2],te=N+V*l[2];for(let he=0;he<p;he++){const oe=g[U+he],G=g[ne+he],Y=g[be+he],X=g[te+he],ae=oe+(Y-oe)*F,Se=G+(X-G)*F,Le=ae+(Se-ae)*S;m[$++]=Le}}}return n.makeTensorInfo([d,u,c,p],"float32",m)}const YWe={kernelName:Ty,backendName:"cpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s;It([r,o],"resizeBilinearGrad");const a=Dt(o.shape),[l,u,c,d]=o.shape,[,f,h]=r.shape,p=new Float32Array(l*u*c*d),g=[i&&f>1?u-1:u,i&&h>1?c-1:c],m=[i&&f>1?f-1:f,i&&h>1?h-1:h],v=g[0]/m[0],b=g[1]/m[1],$=n.data.get(r.dataId).values;let y=0;for(let w=0;w<l;w++){const C=w*a[0];for(let x=0;x<f;x++){const k=x*v,I=Math.floor(k),S=Math.min(Math.ceil(k),u-1),T=C+I*a[1],_=C+S*a[1],N=k-I,O=1-N;for(let M=0;M<h;M++){const D=M*b,F=Math.floor(D),V=Math.min(Math.ceil(D),c-1),U=D-F,ne=1-U,be=T+F*a[2],te=T+V*a[2],he=_+F*a[2],oe=_+V*a[2],G=O*ne,Y=O*U,X=N*ne,ae=N*U;for(let Se=0;Se<d;Se++){const Le=$[y++];p[be+Se]+=Le*G,p[te+Se]+=Le*Y,p[he+Se]+=Le*X,p[oe+Se]+=Le*ae}}}}return n.makeTensorInfo([l,c,u,d],"float32",p)}const ZWe={kernelName:Qk,backendName:"cpu",kernelFunc:XWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JWe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s;It(o,"resizeNearestNeighbor");const l=Dt(o.shape),[u,c]=a,[d,f,h,p]=o.shape,g=n.data.get(o.dataId).values,m=new Float32Array(d*u*c*p),v=[r&&u>1?f-1:f,r&&c>1?h-1:h],b=[r&&u>1?u-1:u,r&&c>1?c-1:c],$=v[0]/b[0],y=v[1]/b[1];let w=0;for(let C=0;C<d;C++){const x=C*l[0];for(let k=0;k<u;k++){const I=i?$*(k+.5):$*k;let S=Math.min(f-1,r?Math.round(I):Math.floor(I));i&&(S=Math.max(0,S));const T=x+S*l[1];for(let _=0;_<c;_++){const N=i?y*(_+.5):y*_;let O=Math.min(h-1,r?Math.round(N):Math.floor(N));i&&(O=Math.max(0,O));const M=T+O*l[2];for(let D=0;D<p;D++){const F=g[M+D];m[w++]=F}}}}return n.makeTensorInfo([d,u,c,p],o.dtype,m)}const QWe={kernelName:Iy,backendName:"cpu",kernelFunc:JWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s;It([r,o],"resizeNearestNeighborGrad");const a=Dt(o.shape),l=Dt(r.shape),[u,c,d,f]=o.shape,[,h,p]=r.shape,g=new Float32Array(u*c*d*f),m=n.data.get(r.dataId).values,v=[i&&h>1?c-1:c,i&&p>1?d-1:d],b=[i&&h>1?h-1:h,i&&p>1?p-1:p],$=v[0]/b[0],y=v[1]/b[1],w=1/$,C=1/y,x=Math.ceil(w)*2+2,k=Math.ceil(C)*2+2;for(let I=0;I<u;I++){const S=I*a[0];for(let T=0;T<c;T++){const _=S+T*a[1],N=Math.floor(T*w),O=Math.floor(N-x/2);for(let M=0;M<d;M++){const D=_+M*a[2],F=Math.floor(M*C),V=Math.floor(F-k/2);for(let U=0;U<f;U++){let ne=0;for(let be=0;be<x;be++){const te=be+O;if(te<0||te>=h)continue;const he=S+te*l[1],oe=te*$,G=Math.min(c-1,i?Math.round(oe):Math.floor(oe));if(T===G)for(let Y=0;Y<k;Y++){const X=Y+V;if(X<0||X>=p)continue;const ae=he+X*l[2],Se=X*y,Le=Math.min(d-1,i?Math.round(Se):Math.floor(Se));M===Le&&(ne+=m[ae+U])}}g[D+U]=ne}}}}return n.makeTensorInfo(o.shape,o.dtype,g)}const t8e={kernelName:Jk,backendName:"cpu",kernelFunc:e8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dims:r}=s;It(o,"reverse");const i=o.shape.length,a=un(r,o.shape);if(i===0)return ea({inputs:{x:o},backend:n});const l=new $o(o.shape,o.dtype),u=n.bufferSync(o);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),f=d.slice();a.forEach(h=>f[h]=o.shape[h]-1-f[h]),l.set(u.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const s8e={kernelName:Ey,backendName:"cpu",kernelFunc:n8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o8e={kernelName:fS,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,{radians:o,fillValue:r,center:i}=t,a=n,l=uo(s.dtype,Ue(s.shape)),[u,c,d,f]=s.shape,[h,p]=aI(i,c,d),g=255,m=Math.sin(o),v=Math.cos(o),b=a.data.get(s.dataId).values;for(let y=0;y<u;y++){const w=y*d*c*f;for(let C=0;C<c;C++){const x=C*(d*f);for(let k=0;k<d;k++){const I=k*f;for(let S=0;S<f;S++){const T=[u,C,k,S],_=T[2],N=T[1];let O=(_-h)*v-(N-p)*m,M=(_-h)*m+(N-p)*v;O=Math.round(O+h),M=Math.round(M+p);let D=r;if(typeof r!="number"&&(S===3?D=g:D=r[S]),O>=0&&O<d&&M>=0&&M<c){const V=M*(d*f),U=O*f,ne=w+V+U+S;D=b[ne]}const F=w+x+I+S;l[F]=D}}}}return{dataId:a.write(l,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8e=Hn(kg,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),i8e={kernelName:kg,backendName:"cpu",kernelFunc:r8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8(e,t,n,s,o,r,i,a,l,u){const c=[s/o,o],d=e.values,f=t.values;if(s===0)return gn(n,t.dtype);const h=gn(c,t.dtype);h.values.fill(l);for(let p=0;p<r;p++){const g=[];let m=0;for(let v=0;v<i;v++){const b=d[p*i+v];g.push(b),m+=b*a[v]}if(m<0||m>=s/o)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let v=0;v<o;v++)u?h.values[m*o+v]+=f[p*o+v]:h.values[m*o+v]=t.rank===0?f[0]:f[p*o+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8e(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o,updates:r}=t,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Bg(r,o,i),f=!0,h=n.bufferSync(o),p=n.bufferSync(r),g=n8(h,p,i,d,u,l,a,c,0,f);return n.makeTensorInfo(i,g.dtype,g.values)}const l8e={kernelName:LB,backendName:"cpu",kernelFunc:a8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8e(e){const{inputs:t,backend:n}=e,{condition:s,t:o,e:r}=t;It([s,o,r],"select");const i=s.shape.length,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=kr(o.dtype,r.dtype),d=So(Ue(o.shape),c);let f=0;const h=i===0||i>1||o.shape.length===1?1:Ue(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let g=0;g<h;g++)a[p]===1?d[f++]=l[p]:d[f++]=u[p];return n.makeTensorInfo(o.shape,c,d)}const c8e={kernelName:_y,backendName:"cpu",kernelFunc:u8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8e=Jy,f8e=Qy,h8e=Hn(Ig,e=>e>=0?f8e*e:d8e*(Math.exp(e)-1)),p8e={kernelName:Ig,backendName:"cpu",kernelFunc:h8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8e=Hn(_g,e=>e<0?-1:e>0?1:0),m8e={kernelName:_g,backendName:"cpu",kernelFunc:g8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8e=Hn(Tg,e=>Math.sin(e)),b8e={kernelName:Tg,backendName:"cpu",kernelFunc:v8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y8e=Hn(Eg,e=>Math.sinh(e)),w8e={kernelName:Eg,backendName:"cpu",kernelFunc:y8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $8e=11920928955078125e-23,AR=Math.log($8e)+2,C8e=Hn(Ag,e=>{const t=e>-AR,n=e<AR,s=Math.exp(e);let o;return n?o=s:t?o=e:o=Math.log(1+s),o}),x8e={kernelName:Ag,backendName:"cpu",kernelFunc:C8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,paddings:i}=s;It([o],"spaceToBatchND");const a=Ue(r),l=[[0,0]];l.push(...i);for(let C=1+r.length;C<o.shape.length;++C)l.push([0,0]);const u=t8.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),c=Ug(u.shape,r,a,!1),d=jg(c.length,r.length,!1),f=Gg(u.shape,r,a,!1),g=gs({inputs:{x:u},backend:n,attrs:{shape:c}}),b=Ir({inputs:{x:g},backend:n,attrs:{perm:d}}),w=gs({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),w}const S8e={kernelName:Dy,backendName:"cpu",kernelFunc:k8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8e(e){const{inputs:t,backend:n}=e,{indices:s,values:o,denseShape:r,defaultValue:i}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values[0],[d,f,h,p,g]=$W(a,s.shape,s.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,s.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([g.length],s.dtype,new Int32Array(g))]}const T8e={kernelName:eS,backendName:"cpu",kernelFunc:I8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8e(e){const{inputs:t,backend:n}=e,{inputIndices:s,inputShape:o,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(s.dataId).values,l=Array.from(n.data.get(r.dataId).values),[u,c,d]=CW(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const _8e={kernelName:tS,backendName:"cpu",kernelFunc:E8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[u,c]=ZI(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const A8e={kernelName:nS,backendName:"cpu",kernelFunc:N8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8e(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[u,c]=ZI(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(c,s.dtype,u)}const R8e={kernelName:sS,backendName:"cpu",kernelFunc:D8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8e(e){const{inputs:t,backend:n,attrs:s}=e,{sparseIndices:o,sparseValues:r,defaultValue:i}=t,{outputShape:a}=s,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=Bg(r,o,a),h=!1,p=n.bufferSync(o),g=n.bufferSync(r),m=n.data.get(i.dataId).values[0],v=n8(p,g,a,f,c,u,l,d,m,h);return n.makeTensorInfo(a,v.dtype,v.values)}const M8e={kernelName:BB,backendName:"cpu",kernelFunc:O8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{numOrSizeSplits:r,axis:i}=s,a=un(i,o.shape)[0],l=CI(o,r,a),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map(d=>{const f=[...c];f[a]=d;const h=tc({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[a]+=d,h})}const F8e={kernelName:Ry,backendName:"cpu",kernelFunc:P8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L8e={kernelName:oS,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,s=t;It(n,"square");const o=s.data.get(n.dataId).values,r=new Float32Array(o.length);for(let a=0;a<o.length;++a){const l=o[a];r[a]=l*l}return{dataId:s.write(r,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B8e=Hn(Lg,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),z8e={kernelName:Lg,backendName:"cpu",kernelFunc:B8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=s;It(o,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:g,sliceDim0:m,isSimpleSlice:v,begin:b,end:$,strides:y}=CS(o.shape,r,i,a,l,u,c,d,f);let w;if(g)w=gs({inputs:{x:o},backend:n,attrs:{shape:p}});else if(m||v){K(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const C=yS(b,$,y),x=tc({inputs:{x:o},backend:n,attrs:{begin:b,size:C}});w=gs({inputs:{x},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(x)}else{const C=n.bufferSync(o),x=kW(h,C,y,b);w=n.makeTensorInfo(p,x.dtype,x.values)}return w}const W8e={kernelName:rS,backendName:"cpu",kernelFunc:V8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8e(e){const{inputs:t,backend:n,attrs:s}=e,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=t,f=n.data.get(c.dataId).values,h=n.data.get(d.dataId).values,[p,g]=SW(f,h,o,r,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}const U8e={kernelName:iS,backendName:"cpu",kernelFunc:H8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8e(e){const{inputs:t,backend:n,attrs:s}=e,{skipEmpty:o}=s,{input:r,delimiter:i}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values[0],[u,c,d]=IW(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const G8e={kernelName:aS,backendName:"cpu",kernelFunc:j8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8e(e){const{inputs:t,backend:n,attrs:s}=e,{numBuckets:o}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(r.dataId).values,a=TW(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const q8e={kernelName:lS,backendName:"cpu",kernelFunc:K8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y8e=Hn(Mg,e=>Math.tan(e)),X8e={kernelName:Mg,backendName:"cpu",kernelFunc:Y8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z8e=Hn(Pg,e=>Math.tanh(e)),J8e={kernelName:Pg,backendName:"cpu",kernelFunc:Z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reps:r}=s;It(o,"tile");const i=_W(n.bufferSync(o),r);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const eHe={kernelName:Fg,backendName:"cpu",kernelFunc:Q8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{k:r,sorted:i}=s;It(o,"topk");const a=n.data.get(o.dataId).values,[l,u]=AW(a,o.shape,o.dtype,r,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const nHe={kernelName:uS,backendName:"cpu",kernelFunc:tHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sHe(e){const{inputs:t,attrs:n,backend:s}=e,{image:o,transforms:r}=t,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=n,[c,d,f,h]=o.shape,[p,g]=u!=null?u:[d,f],m=[c,p,g,h],v=Dt(o.shape),b=v[0],$=v[1],y=v[2],w=uo(o.dtype,Ue(m));w.fill(l);const C=s.data.get(o.dataId).values,x=s.data.get(r.dataId).values;for(let I=0;I<c;++I){const S=r.shape[0]===1?x:x.subarray(I*8,I*8+8);for(let T=0;T<p;++T)for(let _=0;_<g;++_)for(let N=0;N<h;++N){let O;const M=S[6]*_+S[7]*T+1;if(M===0)continue;const D=(S[0]*_+S[1]*T+S[2])/M,F=(S[3]*_+S[4]*T+S[5])/M,V=DR(D,f,a),U=DR(F,d,a);switch(i){case"nearest":O=uHe(C,d,f,b,$,y,I,U,V,N,l);break;case"bilinear":O=cHe(C,d,f,b,$,y,I,U,V,N,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ne=I*b+T*$+_*y+N;w[ne]=O}return s.makeTensorInfo(m,o.dtype,w)}return{dataId:s.write(w,m,o.dtype),shape:o.shape,dtype:o.dtype}}const oHe={kernelName:cS,backendName:"cpu",kernelFunc:sHe};function DR(e,t,n){switch(n){case"reflect":return rHe(e,t);case"wrap":return iHe(e,t);case"nearest":return lHe(e,t);case"constant":default:return aHe(e)}}function rHe(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const s=2*t;n<s&&(n=s*Math.trunc(-n/s)+n),n=n<-t?n+s:-n-1}else if(n>t-1)if(t<=1)n=0;else{const s=2*t;n-=s*Math.trunc(n/s),n>=t&&(n=s-n-1)}return Hu(0,n,t-1)}function iHe(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const s=t-1;n+=t*(Math.trunc(-n/s)+1)}else if(n>t-1)if(t<=1)n=0;else{const s=t-1;n-=t*Math.trunc(n/s)}return Hu(0,n,t-1)}function aHe(e,t){return e}function lHe(e,t){return Hu(0,e,t-1)}function dh(e,t,n,s,o,r,i,a,l,u,c){const d=i*s+a*o+l*r+u;return 0<=a&&a<t&&0<=l&&l<n?e[d]:c}function uHe(e,t,n,s,o,r,i,a,l,u,c){const d=Math.round(a),f=Math.round(l);return dh(e,t,n,s,o,r,i,d,f,u,c)}function cHe(e,t,n,s,o,r,i,a,l,u,c){const d=Math.floor(a),f=Math.floor(l),h=d+1,p=f+1,g=(p-l)*dh(e,t,n,s,o,r,i,d,f,u,c)+(l-f)*dh(e,t,n,s,o,r,i,d,p,u,c),m=(p-l)*dh(e,t,n,s,o,r,i,h,f,u,c)+(l-f)*dh(e,t,n,s,o,r,i,h,p,u,c);return(h-a)*g+(a-d)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dHe(e){const{inputs:t,attrs:n,backend:s}=e,{axis:o}=n,{x:r}=t;It(r,"unique");const i=s.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:u}=DW(i,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const fHe={kernelName:dS,backendName:"cpu",kernelFunc:dHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hHe(e){const{inputs:t,backend:n,attrs:s}=e,{value:o}=t;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o.shape.length,a=o.shape[r],l=new Array(i-1);let u=0;for(let h=0;h<i;h++)h!==r&&(l[u++]=o.shape[h]);const c=new Array(i).fill(0),d=o.shape.slice();d[r]=1;const f=new Array(a);for(let h=0;h<f.length;h++){c[r]=h;const p=tc({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});f[h]=gs({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const pHe={kernelName:Py,backendName:"cpu",kernelFunc:hHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,segmentIds:r}=t,{numSegments:i}=s;It(o,"unsortedSegmentSum");const a=o.shape.length,l=r.shape.length,u=[],c=[],d=a-l;let f=r;for(let p=0;p<d;++p){const g=Ub({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=g,c.push(g)}for(let p=0;p<i;++p){const g=Rl(p,"int32"),m=n.makeTensorInfo([],"int32",g),v=J5({inputs:{a:m,b:f},backend:n}),b=$l({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),$=f1({inputs:{a:b,b:o},backend:n}),y=nm({inputs:{x:$},backend:n,attrs:{axis:0,keepDims:!1}});u.push(y),c.push(m),c.push(v),c.push(b),c.push($),c.push(y)}const h=e8({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const mHe={kernelName:Fy,backendName:"cpu",kernelFunc:gHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vHe=[bVe,cze,wVe,CVe,mze,kVe,IVe,EVe,NVe,DVe,OVe,PVe,LVe,VVe,HVe,GVe,qVe,XVe,JVe,mVe,e6e,n6e,o6e,i6e,pze,bze,l6e,dze,c6e,f6e,h6e,g6e,v6e,y6e,$6e,x6e,S6e,T6e,_6e,A6e,R6e,M6e,P6e,L6e,z6e,W6e,H6e,U6e,j6e,q6e,uVe,X6e,yze,o5e,wze,r5e,Cze,d5e,f5e,p5e,kze,v5e,y5e,$5e,x5e,S5e,Ize,Eze,fze,T5e,d6e,_5e,A5e,R5e,cVe,Nze,Dze,M5e,Oze,F5e,z5e,W5e,j5e,K5e,Y5e,X5e,Pze,J5e,eWe,nWe,oWe,iWe,lWe,cWe,Lze,fWe,gWe,SWe,zze,Wze,EWe,AWe,OWe,Uze,PWe,LWe,BWe,t8,HWe,fVe,Kze,jWe,hze,kx,KWe,hVe,pVe,gVe,YWe,ZWe,QWe,t8e,s8e,o8e,i8e,Yze,l8e,c8e,p8e,Zze,m8e,b8e,w8e,Jze,xWe,x8e,S8e,T8e,_8e,A8e,R8e,M8e,F8e,tVe,L8e,sVe,z8e,W8e,U8e,G8e,q8e,aVe,G6e,X8e,J8e,eHe,nHe,oHe,jze,fHe,pHe,mHe,FWe];for(const e of vHe)VB(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bu={},i$={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function bHe(e,t){bu[e]=t}function Ei(e,t){if(!(e in bu)){const s=wHe(e,t);if(s!==null)bu[e]=s;else return console.log("Could not get context for WebGL version",e),null}const n=bu[e];return n==null||n.isContextLost()?(delete bu[e],Ei(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),bu[e])}function yHe(e){if(typeof OffscreenCanvas!="undefined"&&e===2)return new OffscreenCanvas(300,150);if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function wHe(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t==null?yHe(e):t;return n.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete bu[e]},!1),e===1?n.getContext("webgl",i$)||n.getContext("experimental-webgl",i$):n.getContext("webgl2",i$)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var pp;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(pp||(pp={}));var wr;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(wr||(wr={}));var oo;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(oo||(oo={}));function sm(e,t){return[t,e]}function $He(e,t){return e*t}function ev(e){const t=Ue(e),n=Math.ceil(t/4);return VC(n)}function yf(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function CHe(e,t){const[n,s]=yf(e,t);return n*s*4}function sT(e,t){const n=e;let s,o,r,i,a,l,u,c,d,f;return je().getNumber("WEBGL_VERSION")===2?(s=n.R32F,o=n.R16F,r=n.RGBA16F,i=n.RGBA32F,a=n.RED,u=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(s=e.RGBA,o=e.RGBA,r=e.RGBA,i=n.RGBA,a=e.RGBA,u=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,f=e.FLOAT,l=e.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(e,t){const n=t();return je().getBool("DEBUG")&&xHe(e),n}function xHe(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+THe(e,t))}const kHe=596e-10,SHe=65504;function IHe(e){return!!(je().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||kHe<Math.abs(e)&&Math.abs(e)<SHe)}function THe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function tv(e,t){return La(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function EHe(e,t){const n=La(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(St(e,()=>e.shaderSource(n,t)),St(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function _He(e,t){const n=La(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(St(e,()=>e.shaderSource(n,t)),St(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw AHe(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const NHe=/ERROR: [0-9]+:([0-9]+):/g;function AHe(e,t){const n=NHe.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const s=+n[1],o=e.split(`
`),r=o.length.toString().length+2,i=o.map((d,f)=>dd((f+1).toString(),r)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,s-1),u=i.slice(s-1,s),c=i.slice(s);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${dd(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function DHe(e){return La(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function RHe(e,t){if(St(e,()=>e.linkProgram(t)),e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function a$(e,t){if(St(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function OHe(e,t){const n=La(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return St(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),St(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function MHe(e,t){const n=La(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return St(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),St(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function PHe(e){return La(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function FHe(e,t){const n=je().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const s=`[${e}x${t}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(e>n||t>n){const s=`[${e}x${t}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+o+".")}}function LHe(e){return La(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function RR(e,t,n,s,o,r,i){const a=e.getAttribLocation(t,n);return a===-1?!1:(St(e,()=>e.bindBuffer(e.ARRAY_BUFFER,s)),St(e,()=>e.vertexAttribPointer(a,o,e.FLOAT,!1,r,i)),St(e,()=>e.enableVertexAttribArray(a)),!0)}function BHe(e,t,n){UHe(e,n),St(e,()=>e.activeTexture(e.TEXTURE0+n)),St(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function zHe(e,t,n){return La(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function VHe(e,t,n){return e.getUniformLocation(t,n)}function WHe(e,t,n,s){St(e,()=>BHe(e,t,s)),St(e,()=>e.uniform1i(n,s))}function l$(e,t,n){St(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),St(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function OR(e,t){St(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),St(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function nv(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+HHe(e,t))}function HHe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function La(e,t,n){const s=St(e,()=>t());if(s==null)throw new Error(n);return s}function UHe(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=t+e.TEXTURE0;if(s<e.TEXTURE0||s>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Wd(e,t=2){return Ue(e.slice(0,e.length-t))}function Hd(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function u$(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Wd(e),...Hd(e)]),t}function jHe(e,t=!1){let n=je().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(n=n*2,e=e.map((o,r)=>r>=e.length-2?yB(e[r]):e[r]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=Dl(e).newShape);let s=Ue(e);if(e.length<=1&&s<=n)return[1,s];if(e.length===2&&e[0]<=n&&e[1]<=n)return e;if(e.length===3&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const o=Wd(e);let r=2,i=2;return e.length&&([r,i]=Hd(e)),s=o*(r/2)*(i/2),VC(s).map(a=>a*2)}return VC(s)}function sv(e){return e%2===0}function Gb(e,t){if(e=e.slice(-2),t=t.slice(-2),Mn(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const n=e.slice(-1)[0],s=t.slice(-1)[0];if(n===s||sv(n)&&sv(s)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&sv(e[0])&&sv(t[0])}let c$,d$;function GHe(e){if(c$==null){const t=Ei(e);c$=t.getParameter(t.MAX_TEXTURE_SIZE)}return c$}function KHe(e){if(d$==null){const t=Ei(e);d$=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,d$)}function qHe(e){if(e===0)return 0;let t;const n=Ei(e);return Ur(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:Ur(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function Ur(e,t){return e.getExtension(t)!=null}function MR(e){try{if(Ei(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function YHe(e){if(e===0)return!1;const t=Ei(e);if(e===1){if(!Ur(t,"OES_texture_float"))return!1}else if(!Ur(t,"EXT_color_buffer_float"))return!1;return Ix(t)}function XHe(e){if(e===0)return!1;const t=Ei(e);if(e===1){if(!Ur(t,"OES_texture_float")||!Ur(t,"WEBGL_color_buffer_float"))return!1}else{if(Ur(t,"EXT_color_buffer_float"))return Ix(t);const s="EXT_color_buffer_half_float";if(Ur(t,s)){const o=t.getExtension(s);return ZHe(t,o)}return!1}return Ix(t)}function Ix(e){const t=sT(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const s=1,o=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,s,o,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function ZHe(e,t){const n=sT(e,t),s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=1,r=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,r,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(s),e.deleteFramebuffer(i),a}function JHe(e){return e!==2?!1:Ei(e).fenceSync!=null}function om(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&K(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mt=je();Mt.registerFlag("HAS_WEBGL",()=>Mt.getNumber("WEBGL_VERSION")>0);Mt.registerFlag("WEBGL_VERSION",()=>MR(2)?2:MR(1)?1:0);Mt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Mt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Mt.get("WEBGL_VERSION")===2);Mt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Mt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Mt.registerFlag("WEBGL_PACK",()=>Mt.getBool("HAS_WEBGL"));Mt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_CLIP",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_REDUCE",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_CONV_IM2COL",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>GHe(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>KHe(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=Mt.getNumber("WEBGL_VERSION");return e===0?0:qHe(e)});Mt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Mt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!QB());Mt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>YHe(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Mt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Mt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Mt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>XHe(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>JHe(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Mt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Mt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});Mt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>QB()?1:-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});Mt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Mt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Mt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Mt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oo(){let e,t,n,s,o,r,i,a,l,u;return je().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",s="in",o="texture",r="outputColor",i="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",s="varying",o="texture2D",r="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:s,texture2D:o,output:r,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yc(e,t,n="index"){const s=Dt(t);return s.map((o,r)=>{const i=`int ${e[r]} = ${n} / ${o}`,a=r===s.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${o}`:`index -= ${e[r]} * ${o}`;return`${i}; ${a};`}).join("")}function h1(e,t,n="index"){const s=Dt(t);return s.map((o,r)=>{const i=`int ${e[r]} = ${n} / outShapeStrides[${r}]`,a=r===s.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * outShapeStrides[${r}]`:`index -= ${e[r]} * outShapeStrides[${r}]`;return`${i}; ${a};`}).join("")}function QHe(e,t){const n=e.length,s=e.map(r=>`${t}[${r}]`),o=new Array(n-1);o[n-2]=s[n-1];for(let r=n-3;r>=0;--r)o[r]=`(${o[r+1]} * ${s[r+1]})`;return o}function eUe(e,t,n="index"){const s=e.map((r,i)=>i),o=QHe(s,t);return o.map((r,i)=>{const a=`int ${e[i]} = ${n} / ${o[i]}`,l=i===o.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${o[i]}`:`index -= ${e[i]} * ${o[i]}`;return`${a}; ${l};`}).join("")}function oT(e){const t=Dt(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function rT(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const s8=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:o8}=hFe;function tUe(e,t,n){const s=[];if(e.forEach(h=>{const p=Ue(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?s.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(s.push(`uniform sampler2D ${h.name};`),s.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:g}=iT(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:s.push(`uniform int ${h.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${h.name}Shape;`);break}s.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{s.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const o=s.join(`
`),r=e.map(h=>nUe(h,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=t.texShape,a=Oo(),l=rUe(a);let u,c,d=lUe(a);return t.isPacked?(u=sUe(t.logicalShape,i,n.enableShapeUniforms),c=aUe(a)):(u=oUe(t.logicalShape,i,n.enableShapeUniforms),c=iUe(a)),n.packedInputs&&(d+=fUe),[d,l,c,o,u,r,n.userCode].join(`
`)}function wf(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return kUe(e,t);case 1:return IUe(e,t);case 2:return EUe(e,t);case 3:return NUe(e,t);case 4:return DUe(e,t);case 5:return RUe(e);case 6:return OUe(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function r8(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return xUe(e);case 1:return SUe(e,t);case 2:return TUe(e,t);case 3:return _Ue(e,t);default:return AUe(e,t)}}function nUe(e,t,n=!1,s){let o="";n?o+=r8(e,s):o+=wf(e,s);const r=e.shapeInfo.logicalShape,i=t.logicalShape;return r.length<=i.length&&(n?o+=MUe(e,t):o+=PUe(e,t)),o}function sUe(e,t,n){switch(e.length){case 0:return i8();case 1:return hUe(e,t,n);case 2:return $Ue(e,t,n);case 3:return gUe(e,t,n);default:return vUe(e,t,n)}}function oUe(e,t,n){switch(e.length){case 0:return i8();case 1:return pUe(e,t,n);case 2:return CUe(e,t,n);case 3:return mUe(e,t,n);case 4:return bUe(e,t,n);case 5:return yUe(e,t);case 6:return wUe(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function rUe(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function iUe(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function aUe(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function lUe(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${uUe}
    ${cUe}
    ${dUe}
  `}const uUe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,cUe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dUe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,fUe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function i8(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function hUe(e,t,n){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return s[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function pUe(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function gUe(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),r=o*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function mUe(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${h1(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const s=yc(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function vUe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),r=o*Math.ceil(e[e.length-2]/2);let i=r,a="",l="b, r, c";for(let u=2;u<e.length-1;u++)i*=e[e.length-u-1],a=`
      int b${u} = index / ${i};
      index -= b${u} * ${i};
    `+a,l=`b${u}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${a}

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${e.length}(${l});
    }
  `}function bUe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${h1(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const s=yc(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function yUe(e,t){const n=yc(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function wUe(e,t){const n=yc(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function $Ue(e,t,n){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Mn(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const o=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function CUe(e,t,n){return Mn(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function wc(e){return`offset${e}`}function xUe(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),s=Oo();return`
    vec4 ${n}() {
      return ${s.texture2D}(${t}, halfCR);
    }
  `}function kUe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${s}() {return ${n};}`;const[o,r]=e.shapeInfo.texShape;if(o===1&&r===1)return`
      float ${s}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=wc(n);if(t)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=e.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function SUe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,r=Oo();if(t)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${r.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${r.texture2D}(${n}, uv);
    }
  `}function IUe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${$f(e)}
      }
    `;const o=e.shapeInfo.texShape,r=o[0],i=o[1];if(i===1&&r===1)return`
      float ${s}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=wc(n);return i===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);
        return sampleTexture(${n}, uv);
      }
    `:r===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${r}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function TUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape,i=r[0],a=r[1],l=Oo();if(r!=null&&Mn(n,r))return t?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${l.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${s}, uv);
      }
    `;if(t)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const u=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function EUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape;if(r!=null&&Mn(n,r)){if(t)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const f=r[0],h=r[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:i,keptDims:a}=Dl(n),l=i;if(l.length<n.length){const f=Cf(e,l),h=["row","col"];return`
      ${wf(f,t)}
      float ${o}(int row, int col) {
        return ${o}(${xf(h,a)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${$f(e)}
      }
    `;const u=r[0],c=r[1],d=wc(s);return c===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${s}, uv);
    }
  `:u===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:t?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${s}, uv);
  }
`}function _Ue(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=Cf(e,f),g=["b","row","col"];return`
        ${r8(p,t)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${xf(g,h)});
        }
      `}const a=Oo();if(t)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `;const l=i[0],u=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `}function NUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=Dl(n),u=a;if(u.length<n.length){const g=Cf(e,u),m=["row","col","depth"];return`
        ${wf(g,t)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${xf(m,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${r}, ${i}, 1)));
        ${$f(e)}
      }
    `;const c=e.shapeInfo.texShape,d=c[0],f=c[1],h=e.shapeInfo.flatOffset;if(f===r&&h==null)return t?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(f===i&&h==null)return t?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${s}, uv);
    }
  `;const p=wc(s);return t?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * ${r} + col * ${i} + depth + ${p};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${s}, uv);
      }
  `}function AUe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Oo();if(t)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const r=e.shapeInfo.logicalShape,i=r.length,a=e.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],d=Math.ceil(r[i-1]/2);let f=d*Math.ceil(r[i-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<i-1;g++)h=`int b${g}, `+h,f*=r[i-g-1],p=`b${g} * ${f} + `+p;return`
    vec4 ${s}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${o.texture2D}(${n}, uv);
    }
  `}function DUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[3],i=n[2]*r,a=n[1]*i,{newShape:l,keptDims:u}=Dl(n);if(l.length<n.length){const b=Cf(e,l),$=["row","col","depth","depth2"];return`
      ${wf(b,t)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${xf($,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${r}, 1)));
        ${$f(e)}
      }
    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${s}Shape[3];`,g=`int stride1 = ${s}Shape[2] * stride2;`,m=`int stride0 = ${s}Shape[1] * stride1;`;if(h===a&&c==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(h===r&&c==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${s}, uv);
      }
    `;const v=wc(s);return t?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${g}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${v});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${r} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${v});
      return sampleTexture(${s}, uv);
    }
  `}function RUe(e){const t=e.shapeInfo.logicalShape,n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],r=t[3]*o,i=t[2]*r,a=t[1]*i,{newShape:l,keptDims:u}=Dl(t);if(l.length<t.length){const g=Cf(e,l),m=["row","col","depth","depth2","depth3"];return`
      ${wf(g)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${xf(m,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${r}, ${o})) +
          depth3;
        ${$f(e)}
      }
    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${r}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=wc(n);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${r} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function OUe(e){const t=e.shapeInfo.logicalShape,n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:r}=Dl(t);if(o.length<t.length){const m=Cf(e,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${wf(m)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${xf(v,r)});
      }
    `}const i=t[5],a=t[4]*i,l=t[3]*a,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${$f(e)}
      }
    `;const d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],p=f[1];if(p===c&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=wc(n);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function $f(e){const t=e.name,n=Ue(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function MUe(e,t){const n=e.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,a=o8(e.shapeInfo.logicalShape,t.logicalShape),l=Yn(i),u=i-r;let c;const d=["x","y","z","w","u","v"];r===0?c="":i<2&&a.length>=1?c="coords = 0;":c=a.map(b=>`coords.${d[b+u]} = 0;`).join(`
`);let f="";i<2&&r>0?f="coords":f=e.shapeInfo.logicalShape.map((b,$)=>`coords.${d[$+u]}`).join(", ");let h="return outputValue;";const g=Ue(e.shapeInfo.logicalShape)===1,v=Ue(t.logicalShape)===1;if(r===1&&!g&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!v)i===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=r-2,$=r-1;a.indexOf(b)>-1&&a.indexOf($)>-1?h="return vec4(outputValue.x);":a.indexOf(b)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf($)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${s}(${f});
      ${h}
    }
  `}function PUe(e,t){const n=e.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=t.texShape,i=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===l&&e.shapeInfo.flatOffset==null&&Mn(i,r))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Yn(l),c=o8(e.shapeInfo.logicalShape,t.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=e.shapeInfo.logicalShape.map((g,m)=>`coords.${h[m+d]}`).join(", "),`
    float ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${s}(${p});
    }
  `}function Yn(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function iT(e,t,n){const{newShape:s,keptDims:o}=Dl(t),r=t.length,i=e&&r===3&&t[0]===1,a=i?t.slice(1):s,l=!e&&r>1&&!Mn(t,n)&&s.length<r||i;return{useSqueezeShape:l,uniformShape:l?a:t,keptDims:o}}function Cf(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function xf(e,t){return t.map(n=>e[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FUe(e,t,n,s){const o=n.map((y,w)=>{const C={logicalShape:y.shape,texShape:y.isUniform?null:y.texData.texShape,isUniform:y.isUniform,isPacked:y.isUniform?!1:y.texData.isPacked,flatOffset:null};return y.texData!=null&&y.texData.slice!=null&&y.texData.slice.flatOffset>0&&(C.flatOffset=y.texData.slice.flatOffset),{name:t.variableNames[w],shapeInfo:C}}),r=o.map(y=>y.shapeInfo),i={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},a=tUe(o,i,t),l=_He(e.gl,a),u=e.createProgram(l);let c=null;const d=e.getUniformLocation(u,"NAN",!1);je().getNumber("WEBGL_VERSION")===1&&(c=e.getUniformLocation(u,"INFINITY",!1));const f=!1,h={},p={},g={};for(let y=0;y<t.variableNames.length;y++){const w=t.variableNames[y];h[w]=e.getUniformLocation(u,w,f),h[`offset${w}`]=e.getUniformLocation(u,`offset${w}`,f),t.enableShapeUniforms&&(p[`${w}Shape`]=e.getUniformLocation(u,`${w}Shape`,f),g[`${w}TexShape`]=e.getUniformLocation(u,`${w}TexShape`,f))}let m,v,b;t.enableShapeUniforms&&(m=e.getUniformLocation(u,"outShape",f),b=e.getUniformLocation(u,"outShapeStrides",f),v=e.getUniformLocation(u,"outTexShape",f));const $=[];return t.customUniforms&&t.customUniforms.forEach((y,w)=>{$[w]=e.getUniformLocation(u,y.name,f)}),{program:t,fragmentShader:l,source:a,webGLProgram:u,uniformLocations:h,customUniformLocations:$,inShapeInfos:r,outShapeInfo:i,infLoc:c,nanLoc:d,inShapesLocations:p,inTexShapesLocations:g,outShapeLocation:m,outShapeStridesLocation:b,outTexShapeLocation:v}}function PR(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,s)=>{const o=n.logicalShape,r=t[s],i=r.shape;if(!Mn(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&r.isUniform)return;const a=n.texShape,l=r.isUniform?null:r.texData.texShape;if(!Mn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function LUe(e,t,n,s,o){t.program.enableShapeUniforms||(PR(t.inShapeInfos,n),PR([t.outShapeInfo],[s]));const r=s.texData.texture,i=s.texData.texShape;s.texData.isPacked?e.setOutputPackedMatrixTexture(r.texture,i[0],i[1]):e.setOutputMatrixTexture(r.texture,i[0],i[1]),e.setProgram(t.webGLProgram),je().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((l,u)=>{const c=t.program.variableNames[u],d=t.uniformLocations[c],f=t.uniformLocations[`offset${c}`],h=t.inShapesLocations[`${c}Shape`],p=t.inTexShapesLocations[`${c}TexShape`];if(h){const{uniformShape:g}=iT(t.program.packedInputs,l.shape,l.texData.texShape);switch(g.length){case 1:e.gl.uniform1iv(h,new Int32Array(g));break;case 2:e.gl.uniform2iv(h,new Int32Array(g));break;case 3:e.gl.uniform3iv(h,new Int32Array(g));break;case 4:e.gl.uniform4iv(h,new Int32Array(g));break}}if(p&&e.gl.uniform2i(p,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(Ue(l.shape)<2)e.gl.uniform1f(d,l.uniformValues[0]);else{let g=l.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),e.gl.uniform1fv(d,g)}return}l.texData.slice!=null&&f!=null&&e.gl.uniform1i(f,l.texData.slice.flatOffset),e.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const a=t.outShapeLocation;if(a)switch(s.shape.length){case 1:e.gl.uniform1iv(a,new Int32Array(s.shape));break;case 2:e.gl.uniform2iv(a,new Int32Array(s.shape));break;case 3:e.gl.uniform3iv(a,new Int32Array(s.shape));break;case 4:e.gl.uniform4iv(a,new Int32Array(s.shape));break}if(t.outShapeStridesLocation){const l=Dt(s.shape);switch(s.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),t.program.customUniforms&&o&&t.program.customUniforms.forEach((l,u)=>{const c=t.customUniformLocations[u],d=o[u];if(l.type==="float")e.gl.uniform1fv(c,d);else if(l.type==="vec2")e.gl.uniform2fv(c,d);else if(l.type==="vec3")e.gl.uniform3fv(c,d);else if(l.type==="vec4")e.gl.uniform4fv(c,d);else if(l.type==="int")e.gl.uniform1iv(c,d);else if(l.type==="ivec2")e.gl.uniform2iv(c,d);else if(l.type==="ivec3")e.gl.uniform3iv(c,d);else if(l.type==="ivec4")e.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),e.executeProgram()}function BUe(e,t,n){let s="";t.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=iT(e.packedInputs,i.shape,l);let f="",h="",p="";if(c.length===1&&e.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!e.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!e.packedInputs){const w=Dt(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const g=i.shape.length,m=c.length===2&&Mn(i.shape,l),v=Ue(i.shape)===1,b=Pd(i.shape,n.shape),$=!e.packedInputs&&g===n.shape.length&&Mn(l,n.texData.texShape),y=e.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;s+=`${g}_${$}_${u?d:""}_${c.length}_${v}_${b}_${m}_${f}_${h}_${p}_${y}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;s+=`${i.shape}_${l}_${a}`}});const o=e.userCode;let r=e.constructor.name;return r+="_"+s+"_"+o+`${je().getNumber("WEBGL_VERSION")}`,r}function Uo(e){return je().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zUe{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Oo();this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?h1(["r","c","d"],t):yc(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VUe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Oo();this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?h1(["r","c","d"],t):yc(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WUe{constructor(t){this.variableNames=["A"],this.outTexUsage=wr.DOWNLOAD;const n=Oo();this.outputShape=t,this.userCode=`
      ${s8}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HUe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=wr.DOWNLOAD;const n=Oo();this.outputShape=t,this.userCode=`
      ${s8}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UUe{constructor(t,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Oo();this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?rT():oT(t)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${s.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${s.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jUe{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Oo();this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length);let o="",r="result";n&&(r="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?rT():oT(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${s.output} = ${r};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GUe(e){const t=Oo(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return EHe(e,n)}function KUe(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return OHe(e,t)}function qUe(e){const t=new Uint16Array([0,1,2,2,1,3]);return MHe(e,t)}function rm(e,t,n,s,o,r){FHe(t,n);const i=PHe(e),a=e.TEXTURE_2D;return St(e,()=>e.bindTexture(a,i)),St(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),St(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),St(e,()=>e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.NEAREST)),St(e,()=>e.texParameteri(a,e.TEXTURE_MAG_FILTER,e.NEAREST)),je().getNumber("WEBGL_VERSION")===1?St(e,()=>e.texImage2D(a,0,s,t,n,0,o,r,null)):St(e,()=>e.texStorage2D(a,1,s,t,n)),St(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:i,texShape:[n,t]}}function a8(e){return e.internalFormatFloat}function YUe(e,t,n,s){const[o,r]=sm(t,n);return rm(e,o,r,a8(s),s.textureFormatFloat,e.FLOAT)}function l8(e){return e.internalFormatHalfFloat}function XUe(e,t,n,s){const[o,r]=sm(t,n);return rm(e,o,r,l8(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function u8(e){return e.downloadTextureFormat}function ZUe(e,t,n,s){const[o,r]=sm(t,n);return rm(e,o,r,u8(s),e.RGBA,e.UNSIGNED_BYTE)}function c8(e){return e.internalFormatPackedFloat}function JUe(e,t,n,s){const[o,r]=yf(t,n);return rm(e,o,r,c8(s),e.RGBA,e.FLOAT)}function d8(e){return e.internalFormatPackedHalfFloat}function QUe(e,t,n,s){const[o,r]=yf(t,n);return rm(e,o,r,d8(s),e.RGBA,s.textureTypeHalfFloat)}function eje(e,t,n){return St(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),RR(e,t,"clipSpacePos",n,3,20,0)&&RR(e,t,"uv",n,2,20,12)}function tje(e,t,n,s,o,r){St(e,()=>e.bindTexture(e.TEXTURE_2D,t));let i,a,l;o instanceof Uint8Array?(i=new Uint8Array(n*s*4),a=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*s*4),a=e.FLOAT,l=r.internalFormatPackedFloat),i.set(o),je().getNumber("WEBGL_VERSION")===2?St(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,s,e.RGBA,a,i)):St(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,s,0,e.RGBA,a,i)),St(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function nje(e,t,n){St(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?je().getNumber("WEBGL_VERSION")===2?St(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):St(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):je().getNumber("WEBGL_VERSION")===2?St(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):St(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),St(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function sje(e,t,n,s){const o=e.createBuffer();St(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const a=4*4*t*n;return St(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),St(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),St(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function oje(e,t,n){const s=e,o=new Float32Array(n);return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,o),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),o}function rje(e,t,n,s){const[o,r]=sm(t,n),i=4,a=new Uint8Array($He(t*n,i));return St(e,()=>e.readPixels(0,0,o,r,s.downloadTextureFormat,e.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function ije(e,t,n,s,o,r,i,a){const l=e,u=new Float32Array(CHe(r,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function aje(e,t,n){const s=new Float32Array(t*n*4);return St(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f${constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=je().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,bHe(n,t)):this.gl=Ei(n);let s="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(je().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=tv(this.gl,r),Ur(this.gl,i))this.textureHalfFloatExtension=tv(this.gl,i);else if(je().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),Ur(this.gl,o))this.colorBufferHalfFloatExtension=tv(this.gl,o);else if(je().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",Ur(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(Ur(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=KUe(this.gl),this.indexBuffer=qUe(this.gl),this.framebuffer=LHe(this.gl),this.textureConfig=sT(this.gl,this.textureHalfFloatExtension)}get debug(){return je().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;St(t,()=>t.finish()),St(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),St(t,()=>t.deleteFramebuffer(this.framebuffer)),St(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),St(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),St(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),YUe(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),XUe(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),ZUe(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),nje(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,s,o){this.throwIfDisposed(),tje(this.gl,t,n,s,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),QUe(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),JUe(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(OR(this.gl,this.framebuffer),this.outputTexture=null),St(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,s){return this.downloadMatrixDriver(t,()=>rje(this.gl,n,s,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,s,o,r,i){return ije(this.gl,t,n,s,o,r,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return oje(this.gl,t,n)}createBufferFromTexture(t,n,s){this.bindTextureToFrameBuffer(t);const o=sje(this.gl,n,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,s;if(je().getBool("WEBGL_FENCE_API_ENABLED")){const o=t,r=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),s=()=>{const i=o.clientWaitSync(r,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=r}else je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(n,je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:n,isFencePassed:s}}downloadMatrixFromPackedTexture(t,n,s){return this.downloadMatrixDriver(t,()=>aje(this.gl,n,s))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=GUe(n));const s=DHe(n);return St(n,()=>n.attachShader(s,this.vertexShader)),St(n,()=>n.attachShader(s,t)),RHe(n,s),this.debug&&a$(n,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=eje(n,this.program,this.vertexBuffer)),s}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&St(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&a$(this.gl,this.program),St(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,s=!0){return this.throwIfDisposed(),s?zHe(this.gl,t,n):VHe(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),St(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,s){this.throwIfDisposed(),this.throwIfNoProgram(),WHe(this.gl,t,n,s)}setOutputMatrixTexture(t,n,s){this.setOutputMatrixTextureDriver(t,s,n)}setOutputPackedMatrixTexture(t,n,s){this.throwIfDisposed();const[o,r]=yf(n,s);this.setOutputMatrixTextureDriver(t,o,r)}setOutputMatrixWriteRegion(t,n,s,o){this.setOutputMatrixWriteRegionDriver(s,t,o,n)}setOutputPackedMatrixWriteRegion(t,n,s,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&a$(this.gl,this.program),nv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),St(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),St(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=tv(this.gl,je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.createQuery();return s.beginQuery(o.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,s=this.getQueryTimerExtensionWebGL2();n.endQuery(s.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await TD(()=>this.disposed||this.isQueryAvailable(t,je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const s=this.gl;return s.getQueryParameter(t,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.getQueryParameter(t,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),o=s.getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=lje(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:s}=this.itemsToPoll[n];s()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),!(this.itemsToPoll.length>1)&&TD(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),l$(this.gl,t,this.framebuffer),this.debug&&nv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(l$(this.gl,this.outputTexture,this.framebuffer),this.debug&&nv(this.gl)):OR(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const s=n();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(t,n,s){this.throwIfDisposed();const o=this.gl;l$(o,t,this.framebuffer),this.debug&&nv(o),this.outputTexture=t,St(o,()=>o.viewport(0,0,n,s)),St(o,()=>o.scissor(0,0,n,s))}setOutputMatrixWriteRegionDriver(t,n,s,o){this.throwIfDisposed(),St(this.gl,()=>this.gl.scissor(t,n,s,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function lje(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:uje,bincountImpl:f8,bincountReduceImpl:cje,ceilImpl:dje,concatImpl:fje,equalImpl:hje,expImpl:pje,expm1Impl:gje,floorImpl:mje,gatherNdImpl:vje,gatherV2Impl:bje,greaterImpl:yje,greaterEqualImpl:wje,lessImpl:$je,lessEqualImpl:Cje,linSpaceImpl:xje,logImpl:kje,maxImpl:Sje,maximumImpl:Ije,minimumImpl:Tje,multiplyImpl:Eje,negImpl:_je,notEqualImpl:Nje,prodImpl:Aje,rangeImpl:Dje,rsqrtImpl:Rje,sigmoidImpl:Oje,simpleAbsImpl:h8,sliceImpl:Mje,sparseFillEmptyRowsImpl:Pje,sparseReshapeImpl:Fje,sparseSegmentReductionImpl:p8,sqrtImpl:Lje,stridedSliceImpl:Bje,stringNGramsImpl:zje,stringSplitImpl:Vje,stringToHashBucketFastImpl:Wje,subImpl:Hje,tileImpl:Uje,topKImpl:jje,transposeImpl:aT,uniqueImpl:Gje}=lVe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function No(e,t){return t===1?[e]:g8(e,t)}function Kje(e,t){if(e===1)return"rc";let n="";for(let s=0;s<e;s++)n+=t[s],s<e-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qje{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=Uo(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=No("rc",this.rank),s=Yn(this.rank),o=this.getOutOfBoundsCondition(n),r=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){let r=`${s===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)r=`${t[t.length-1-i]},`+r;n.push(r)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let s=this.rank-2;s<this.rank;s++)n+=`${t[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${o};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m8{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length);let s="";for(let o=0;o<4;o++){let r="thisRC = rc;";o%2===1&&(r+="thisRC.z += 1;"),o>1&&(r+="thisRC.y += 1;"),s+=`
        ${r}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${Yje(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?rT():oT(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${s}

        setOutput(result);
      }
    `}}function Yje(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?eUe(["r","c","d"],"inputShape"):yc(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xje{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,n,s){const o=LR(n,s),r=BR(t,o,s);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const i=FR(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[r].shift();return this.usedTextures[r].push(l),l}let a;return o===oo.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===oo.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===oo.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===oo.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===oo.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(t,n,s,o){if(this.freeTextures==null)return;const r=LR(s,o),i=BR(n,r,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=FR(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=je().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[i],c=u.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Zje(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function FR(e,t,n,s,o){const r=Jje(t,s);let i;if(o){const[l,u]=yf(e[0],e[1]);i=l*u}else{const[l,u]=sm(e[0],e[1]);i=l*u}const a=Zje(n,r);return i*a}function Jje(e,t){switch(e){case oo.PACKED_2X2_FLOAT32:return c8(t);case oo.PACKED_2X2_FLOAT16:return d8(t);case oo.UNPACKED_FLOAT32:return a8(t);case oo.UNPACKED_FLOAT16:return l8(t);case oo.PACKED_4X1_UNSIGNED_BYTE:return u8(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function Qje(e){return je().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?oo.PACKED_2X2_FLOAT32:oo.UNPACKED_FLOAT32:e?oo.PACKED_2X2_FLOAT16:oo.UNPACKED_FLOAT16}function LR(e,t){if(e===wr.UPLOAD)return oo.PACKED_2X2_FLOAT32;if(e===wr.RENDER||e==null)return Qje(t);if(e===wr.DOWNLOAD||e===wr.PIXELS)return oo.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function BR(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class va{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ri="if (isnan(x)) return x;",eGe="return x;",zR="return abs(x);",tGe="return (x >= 0.0) ? x : (exp(x) - 1.0);",nGe=ri+`
  return (x < 0.0) ? 0.0 : x;
`,sGe=ri+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Uc="return x;",oGe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rGe="return x;",iGe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,aGe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lGe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,uGe="return 1.0 / (1.0 + exp(-1.0 * x));";class Iu{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cGe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length);const n=t.length,s=No("rc",n),o=Yn(n),r=Kje(n,s),i=s.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${r});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dGe=rV,fGe=1e-7,hGe=1e-4,ov={};function pGe(e){return e in ov||(ov[e]={}),ov[e]}const gGe=je().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),mGe=600;function vGe(){return je().global.screen==null?1024:je().global.screen.height*je().global.screen.width*window.devicePixelRatio*mGe/1024/1024}class p1 extends $k{constructor(t){super();if(this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!je().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof f$)n=t;else{const s=Ei(je().getNumber("WEBGL_VERSION"),t);n=new f$(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=Ei(je().getNumber("WEBGL_VERSION"));n=new f$(s),this.binaryCache=pGe(je().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Xje(this.gpgpu),this.numMBBeforeWarning=vGe(),this.texData=new bB(this,Ja())}nextDataId(){return p1.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(t,n,s){if((je().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||je().getBool("DEBUG"))&&this.checkNumericalProblems(t),s==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:s,values:t,usage:wr.UPLOAD,refCount:1}),o}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,s,o,r){if(je().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:s,dtype:o,values:n,usage:wr.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:s,dtype:o,complexTensorInfos:r,slice:i,shape:a,isPacked:l}=n;if(i!=null){let f;l?f=new Iu(a,Uc):f=new va(a,Uc);const h=this.runWebGLProgram(f,[{dataId:t,shape:a,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(s!=null)return this.convertAndCacheOnCPU(t);if(o==="string")return s;const u=this.activeTimers!=null;let c;u&&(c=Fo());let d;if(o==="complex64"){const f=this.readSync(r.real.dataId),h=this.readSync(r.imag.dataId);d=Aa(f,h)}else d=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=Fo()-c),this.convertAndCacheOnCPU(t,d)}async read(t){if(this.pendingRead.has(t)){const p=this.pendingRead.get(t);return new Promise(g=>p.push(g))}const n=this.texData.get(t),{values:s,shape:o,slice:r,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(r!=null){let p;l?p=new Iu(o,Uc):p=new va(o,Uc);const g=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:i}],i),m=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),m}if(s!=null)return this.convertAndCacheOnCPU(t);if(je().getBool("DEBUG")&&!je().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&je().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(i!=="complex64"&&je().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(t);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...ev(o))}this.pendingRead.set(t,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),g=p[0],m=p[1];d=Aa(g,m)}else if(u==null)d=this.getValuesFromTexture(t);else{const p=Ue(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;St(p,()=>p.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(t,d),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(p=>p(f)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Ja().removeDataId(t,this),this.pendingDeletes--),f}readToGPU(t,n={}){const s=this.texData.get(t),{values:o,shape:r,slice:i,dtype:a,isPacked:l,texture:u}=s;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;l?h=new Iu(r,Uc):h=new va(r,Uc);const p=this.runWebGLProgram(h,[{dataId:t,shape:r,dtype:a}],a),g=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),g}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(t,n.customTexShape),d=Ja().makeTensorFromDataId(c.dataId,c.shape,c.dtype),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(t){const n=this.readSync(t.dataId);let s=n;if(t.dtype==="string")try{s=n.map(o=>Od(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return gn(t.shape,t.dtype,s)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const s=t[n];if(!IHe(s))throw je().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:s,isPacked:o}=this.texData.get(t),r=Ue(n);if(je().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(t),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...ev(n)).subarray(0,r);return this.disposeIntermediateTensorInfo(f),p}const i=je().getBool("WEBGL_PACK")&&o===!0,a=i?u$(n):n,l=i?new HUe(a):new WUe(a),u=this.runWebGLProgram(l,[{shape:a,dtype:s,dataId:t}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,s=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=s,o=!0):this.activeTimers.push(s),this.activeTimers=s,t();const r=Ad(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=Ad(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(r);a.kernelMs=xAe(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:i[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Fo(),endMs:null}}endTimer(t){return je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Fo(),t)}async getQueryTime(t){if(je().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:s}=this.texData.get(t);return s!=null&&(this.disposeData(s.real.dataId,n),this.disposeData(s.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:s,texShape:o,usage:r,isPacked:i,slice:a}=this.texData.get(t),l=a&&a.origDataId||t,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,s),this.textureManager.releaseTexture(n,o,r,i)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=gGe){return je().getBool("WEBGL_CPU_FORWARD")&&t.every(s=>this.texData.get(s.dataId).texture==null&&Ue(s.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){vr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return dGe(t.shape,n)}packedUnaryOp(t,n,s){const o=new Iu(t.shape,n),r=this.compileAndRun(o,[t],s);return Ja().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const o=h8(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,o)}if(je().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,zR,t.dtype);const n=new va(t.shape,zR),s=this.compileAndRun(n,[t]);return Ja().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}makeTensorInfo(t,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&Vp(s[0])){const r=s.map(i=>cl(i));o=this.write(r,t,n)}else o=this.write(s,t,n);return this.texData.get(o).usage=null,{dataId:o,shape:t,dtype:n}}makeOutput(t,n,s){const{dataId:o}=this.makeTensorInfo(t,n,s);return Ja().makeTensorFromDataId(o,t,n,this)}unpackTensor(t){const n=new cGe(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new qje(t.shape),s=!0;return this.runWebGLProgram(n,[t],t.dtype,null,s)}packedReshape(t,n){const s=[Wd(t.shape),...Hd(t.shape)],o={dtype:t.dtype,shape:s,dataId:t.dataId},r=[Wd(n),...Hd(n)],i=new m8(r,s),a=!0,l=[s],u=this.runWebGLProgram(i,[o],t.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(t,n){const s=this.texData.get(t),{isPacked:o,shape:r,dtype:i}=s;if(n!=null){const f=Ue(r),h=n[0]*n[1]*4;K(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=u$(r);let l;o?l=new VUe(a):l=new zUe(a);const u=!0,c=[n!=null?n:ev(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:t}],i,c,u,n);return{dtype:i,shape:r,dataId:d.dataId}}runWebGLProgram(t,n,s,o,r=!1,i){const a=this.makeTensorInfo(t.outputShape,s),l=this.texData.get(a.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===pp.DENSE){const v=i!=null?i:ev(t.outputShape);l.texShape=v.map(b=>b*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),Ue(a.shape)===0)return l.values=uo(a.dtype,0),a;const u=[],c=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(v.dataId);if(b.texture==null){if(!t.packedInputs&&Ue(v.shape)<=je().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:b.values};t.packedInputs&&(b.isPacked=!0,b.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!b.isPacked!=!!t.packedInputs)v=b.isPacked?this.unpackTensor(v):this.packTensor(v),u.push(v),b=this.texData.get(v.dataId);else if(b.isPacked&&!Gb(b.shape,v.shape)){const $=v,y=v.shape;v.shape=b.shape,v=this.packedReshape(v,y),u.push(v),b=this.texData.get(v.dataId),$.shape=y}return{shape:v.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=BUe(t,c,d),h=this.getAndSaveBinary(f,()=>FUe(this.gpgpu,t,c,d)),p=this.activeTimers!=null;let g;p&&(g=this.startTimer()),LUe(this.gpgpu,h,c,d,o),u.forEach(v=>this.disposeIntermediateTensorInfo(v)),p&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)}));const m=je().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const v=Fo();v-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!je().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&r===!1){const v=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),v}return a}compileAndRun(t,n,s,o,r=!1){return s=s||n[0].dtype,this.runWebGLProgram(t,n,s,o,r)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(je().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement!="undefined"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Me(()=>{if(!je().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=je().getBool("DEBUG");je().set("DEBUG",!1);const n=this.abs(jt(1e-8)).dataSync()[0];if(je().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?fGe:hGe}uploadToGPU(t){const n=this.texData.get(t),{shape:s,dtype:o,values:r,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Fo());let d=n.texShape;if(d==null&&(d=jHe(s,l),n.texShape=d),r!=null){const f=u$(s);let h,p=d[1],g=d[0];const m=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(l||!m)&&([p,g]=yf(d[0],d[1])),l?h=new jUe(f,m):h=new UUe(f,m);const v=m?[g,p]:d,b=this.makeTensorInfo(v,o),$=this.texData.get(b.dataId);m?$.usage=wr.PIXELS:$.usage=wr.UPLOAD,$.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,g,r);const y=[[g,p]],w=!0,C=this.runWebGLProgram(h,[b],o,y,w),x=this.texData.get(C.dataId);n.texture=x.texture,n.texShape=x.texShape,n.isPacked=x.isPacked,n.usage=x.usage,this.disposeIntermediateTensorInfo(b),this.texData.delete(C.dataId),n.values=null,u&&(this.uploadWaitMs+=Fo()-c)}else{const f=this.acquireTexture(d,a,o,l);n.texture=f}}convertAndCacheOnCPU(t,n){const s=this.texData.get(t),{dtype:o}=s;return this.releaseGPUData(t),n!=null&&(s.values=bGe(n,o)),s.values}acquireTexture(t,n,s,o){if(this.numBytesInGPU+=this.computeBytes(t,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${r} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,o)}computeBytes(t,n){return t[0]*t[1]*WC(n)}}p1.nextDataId=0;function bGe(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let s=0;s<n.length;++s)n[s]=Math.round(e[s]);return n}else throw new Error(`Unknown dtype ${t}`)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ez()&&Cz("webgl",()=>new p1,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Ud{constructor(t,n,s){this.variableNames=["A","B"],this.outputShape=nn(n,s),this.enableShapeUniforms=Uo(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g1=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class im{constructor(t,n,s,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=nn(n,s);const r=this.outputShape.length;this.enableShapeUniforms=Uo(r);let i="";if(o)if(r===0||Ue(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Yn(r)} coords = getOutputCoords();
        `,r===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=No("coords",r);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= outShape[${r} - 2];
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= outShape[${r} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rr(e){const{inputs:t,backend:n}=e,{x:s}=t;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const yGe={kernelName:cg,backendName:"webgl",kernelFunc:rr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vl(e){const{inputs:t,backend:n}=e,{real:s,imag:o}=t,r=n.makeTensorInfo(s.shape,"complex64"),i=n.texData.get(r.dataId),a=rr({inputs:{x:s},backend:n}),l=rr({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:l},r}const wGe={kernelName:_k,backendName:"webgl",kernelFunc:Vl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b8="return (a < 0.) ? b * a : a;",y8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function $Ge(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{alpha:r}=s,i=n.makeTensorInfo([],"float32",Rl(r,"float32")),a=je().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new im(y8,o.shape,i.shape):new Ud(b8,o.shape,i.shape),l=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const CGe={kernelName:ry,backendName:"webgl",kernelFunc:$Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w8="return (a < 0.) ? b * a : a;",$8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function xGe(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t,r=je().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new im($8,s.shape,o.shape):new Ud(w8,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],"float32")}const kGe={kernelName:ky,backendName:"webgl",kernelFunc:xGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kf="if (isnan(x)) return x;",SGe=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,IGe=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function En({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:s}){return({inputs:o,backend:r})=>{const{x:i}=o,a=r,l=s||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),f=n(d.values,l);return a.makeTensorInfo(i.shape,l,f)}const u=je().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let c;return u?c=new Iu(i.shape,t):c=new va(i.shape,e),a.runWebGLProgram(c,[i],l)}}function ho({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:s=!1,cpuKernelImpl:o,dtype:r}){return({inputs:i,backend:a})=>{const{a:l,b:u}=i,c=a;if(s&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),g=c.texData.get(u.dataId),[m,v]=[[p.complexTensorInfos.real,g.complexTensorInfos.real],[p.complexTensorInfos.imag,g.complexTensorInfos.imag]].map($=>{const[y,w]=$,C={dataId:y.dataId,dtype:y.dtype,shape:l.shape},x={dataId:w.dataId,dtype:w.dtype,shape:u.shape},k=new Ud(e,l.shape,u.shape);return c.runWebGLProgram(k,[C,x],kr(y.dtype,w.dtype))}),b=Vl({inputs:{real:m,imag:v},backend:c});return c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(v),b}const d=r||kr(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&o!=null){const p=c.texData.get(l.dataId).values,g=c.texData.get(u.dataId).values,m=l.dtype==="string"?Ju(p):p,v=l.dtype==="string"?Ju(g):g,[b,$]=o(l.shape,u.shape,m,v,d),y=c.makeTensorInfo($,d),w=c.texData.get(y.dataId);return w.values=b,y}const f=je().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let h;return f?h=new im(t,l.shape,u.shape,n):h=new Ud(e,l.shape,u.shape),c.runWebGLProgram(h,[l,u],d)}}function m1(e,t=!1){if(e==="linear")return t?rGe:eGe;if(e==="relu")return t?aGe:nGe;if(e==="elu")return t?iGe:tGe;if(e==="relu6")return t?lGe:sGe;if(e==="prelu")return t?$8:w8;if(e==="leakyrelu")return t?y8:b8;if(e==="sigmoid")return t?uGe:oGe;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C8{constructor(t,n,s,o=!1,r=!1,i=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=Uo(this.outputShape.length);const c=o?t[1]:t[2],d=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",v="";a&&(l?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:m=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");const b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let $="rc.x",y="rc.x";t[0]<n[0]?$=`int(min(float(rc.x), ${t[0]-1}.))`:n[0]<t[0]&&(y=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${$};
          int batchB = ${y};
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${g[0]});
          result += (${p[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VR={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class WR{constructor(t,n,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=nn(n,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HR="return a * b;";function lT(e){const{inputs:t,backend:n}=e,{a:s,b:o}=t,r=kr(s.dtype,o.dtype);if(s.dtype==="complex64"){const a=n.texData.get(s.dataId),l=n.texData.get(o.dataId),u=new WR(VR.REAL,s.shape,o.shape),c=new WR(VR.IMAG,s.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=Vl({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([s,o])){const a=n.texData.get(s.dataId),l=n.texData.get(o.dataId),[u,c]=Eje(s.shape,o.shape,a.values,l.values,r),d=n.makeTensorInfo(c,r),f=n.texData.get(d.dataId);return f.values=u,d}let i;return je().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new im(HR,s.shape,o.shape):i=new Ud(HR,s.shape,o.shape),n.runWebGLProgram(i,[s,o],r)}const TGe={kernelName:yg,backendName:"webgl",kernelFunc:lT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EGe(e,t,n){const s=[Wd(e.shape),...Hd(e.shape)],o={dtype:e.dtype,shape:s,dataId:e.dataId},r=[Wd(t),...Hd(t)],i=new m8(r,s),a=!0,l=[s],u=n.runWebGLProgram(i,[o],e.dtype,l,a);return{dataId:u.dataId,shape:t,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yt(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{shape:r}=s,i=n,a=Ue(o.shape),l=$B(r,a),u=Ue(l);K(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(o.dataId);return c.isPacked&&!Gb(o.shape,l)&&!(c.texture!==null&&Gb(c.shape,l))?EGe(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const _Ge={kernelName:Sy,backendName:"webgl",kernelFunc:yt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UR{constructor(t,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=t;this.outputShape=[o,i];const a=Math.floor(s/4)*4,l=s%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Dd(d)?d.toPrecision(2):d}, ones);`}let c="";r%s>0&&(c=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NGe{constructor(t,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=t;this.outputShape=[o,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(s/4)*4,d=s%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AGe(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:e[1],s=Zy(n);t.push({inSize:n,windowSize:s,outSize:Math.ceil(n/s)})}return t}function $c(e,t,n,s){const o=AGe(e.shape);let r=e;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:l,outSize:u}=o[i];let c,d;n==="mean"?c=i===0?new UR({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u},a):new UR({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u}):c=new NGe({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u},n),d=r,r=s.runWebGLProgram(c,[r],t),d.dataId!==e.dataId&&s.disposeIntermediateTensorInfo(d)}return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DGe{constructor(t,n){this.variableNames=["A"];const s=new Array(t.length);for(let i=0;i<s.length;i++)s[i]=t[n[i]];this.outputShape=s,this.rank=s.length;const o=Yn(this.rank),r=RGe(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${r}));
    }
    `}}function RGe(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(t);for(let o=0;o<e.length;o++)s[e[o]]=n[o];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OGe{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(t.length);for(let c=0;c<s.length;c++)s[c]=t[n[c]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=Yn(this.rank),r=g8("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=r[c];const a=`vec2(${i.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${s[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${r[this.rank-1]};
      if(++${r[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v1(e,t,n){const s=je().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OGe(e.shape,t):new DGe(e.shape,t);return n.runWebGLProgram(s,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MGe(e,t,n,s){const o=t,r=e.shape.length,i=un(o,e.shape);let a=i;const l=Ts(a,r),u=l!=null;let c=e;u&&(c=v1(e,l,s),a=Rs(a.length,r)),fo("sum",a,r);const[d,f]=Qs(c.shape,a);let h=d;n&&(h=Is(d,i));const p=Ue(f),m=Ue(e.shape)/p,v=yt({inputs:{x:c},attrs:{shape:[m,p]},backend:s}),b=pS(e.dtype),$=$c(v,b,"sum",s),y=yt({inputs:{x:$},attrs:{shape:h},backend:s});return s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo($),u&&s.disposeIntermediateTensorInfo(c),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;return MGe(o,r,i,n)}const PGe={kernelName:Ay,backendName:"webgl",kernelFunc:b1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ro(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{perm:r}=s,i=n,a=o.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=o.shape[r[c]];let u;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,f=aT(d,o.shape,o.dtype,r,l);u=i.makeTensorInfo(l,o.dtype);const h=i.texData.get(u.dataId);h.values=f}else u=v1(o,r,i);return u}const FGe={kernelName:My,backendName:"webgl",kernelFunc:Ro};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x8=1e3;function Kb({a:e,b:t,transposeA:n,transposeB:s,backend:o,bias:r=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const u=e.shape.length,c=t.shape.length,d=n?e.shape[u-2]:e.shape[u-1],f=s?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],p=s?t.shape[c-2]:t.shape[c-1],g=e.shape.slice(0,-2),m=t.shape.slice(0,-2),v=Ue(g),b=Ue(m),y=nn(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,p]);K(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${s} must match.`);const w=n?[v,d,h]:[v,h,d],C=s?[b,p,f]:[b,f,p],x=yt({inputs:{x:e},backend:o,attrs:{shape:w}}),k=yt({inputs:{x:t},backend:o,attrs:{shape:C}}),I=[x,k],S=Math.max(v,b),T=n?x.shape[1]:x.shape[2],_=r!=null,N=i!=null,O=l==="leakyrelu",M=l!=null?m1(l,!0):null,D=_||N||O||M!=null;let F;if((h===1||p===1)&&T>x8&&D===!1){let U=x,ne=k;n&&(U=Ro({inputs:{x},backend:o,attrs:{perm:[0,2,1]}}),I.push(U)),s&&(ne=Ro({inputs:{x:k},backend:o,attrs:{perm:[0,2,1]}}),I.push(ne));const be=p!==1,te=p===1;let he=U;be&&(he=yt({inputs:{x:U},backend:o,attrs:{shape:[S,T,1]}}),I.push(he));const oe=p===1?2:1;let G=ne;te&&(G=yt({inputs:{x:ne},backend:o,attrs:{shape:[S,1,T]}}),I.push(G));const Y=lT({inputs:{a:he,b:G},backend:o});F=b1({inputs:{x:Y},backend:o,attrs:{axis:oe,keepDims:!0}}),I.push(Y)}else{const U=kr(e.dtype,t.dtype),ne=new C8(w,C,[S,h,p],n,s,_,M,N,O),be=[x,k];if(r!=null&&be.push(r),N&&be.push(i),O){const te=o.makeTensorInfo([],"float32",Rl(a,"float32"));be.push(te),I.push(te)}F=o.runWebGLProgram(ne,be,U)}const V=yt({inputs:{x:F},backend:o,attrs:{shape:y}});I.push(F);for(const U of I)o.disposeIntermediateTensorInfo(U);return V}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LGe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r,bias:i,preluActivationWeights:a}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;return Kb({a:o,b:r,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const BGe={kernelName:Eb,backendName:"webgl",kernelFunc:LGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jR="return abs(x);";function zGe(e){const{inputs:t,backend:n}=e,{x:s}=t;if(n.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const r=n.texData.get(s.dataId),i=h8(r.values);return n.makeTensorInfo(s.shape,s.dtype,i)}let o;return je().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Iu(s.shape,jR):o=new va(s.shape,jR),n.runWebGLProgram(o,[s],s.dtype)}const VGe={kernelName:B0,backendName:"webgl",kernelFunc:zGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WGe=ri+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,HGe=En({opSnippet:WGe}),UGe={kernelName:Up,backendName:"webgl",kernelFunc:HGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jGe=ri+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,GGe=En({opSnippet:jGe}),KGe={kernelName:jp,backendName:"webgl",kernelFunc:GGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GR="return a + b;",qGe=ho({opSnippet:GR,packedOpSnippet:GR,supportsComplex:!0,cpuKernelImpl:uje}),YGe={kernelName:uf,backendName:"webgl",kernelFunc:qGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XGe{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`float v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZGe{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`vec4 v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sb(e){const{inputs:t,backend:n}=e,s=t;if(s.length===1)return rr({inputs:{x:s[0]},backend:n});if(s.length>je().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),u=sb({inputs:s.slice(0,l),backend:n}),c=sb({inputs:s.slice(l),backend:n});return sb({inputs:[u,c],backend:n})}const o=s.map(l=>l.dtype).reduce((l,u)=>kr(l,u)),r=s.map(l=>l.shape),a=je().getBool("WEBGL_PACK")?new ZGe(s[0].shape,r):new XGe(s[0].shape,r);return n.runWebGLProgram(a,s,o)}const JGe={kernelName:xk,backendName:"webgl",kernelFunc:sb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QGe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=un(r,o.shape);let u=l;const c=Ts(u,a);let d=o;c!=null&&(d=Ro({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Rs(u.length,a)),fo("all",u,a);const[f,h]=Qs(d.shape,u),p=Ue(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=$c(g,g.dtype,"all",n);let v;if(i){const b=Is(f,l);v=yt({inputs:{x:m},backend:n,attrs:{shape:b}})}else v=yt({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(d),v}const eKe={kernelName:kk,backendName:"webgl",kernelFunc:QGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=un(r,o.shape);let u=l;const c=Ts(u,a);let d=o;c!=null&&(d=Ro({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Rs(u.length,a)),fo("any",u,a);const[f,h]=Qs(d.shape,u),p=Ue(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=$c(g,g.dtype,"any",n);let v;if(i){const b=Is(f,l);v=yt({inputs:{x:m},backend:n,attrs:{shape:b}})}else v=yt({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(d),v}const nKe={kernelName:Sk,backendName:"webgl",kernelFunc:tKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sKe{constructor(t,n,s){this.variableNames=["A"];const{windowSize:o,batchSize:r,outSize:i}=t;s||this.variableNames.push("bestIndicesA"),this.outputShape=[r,i];const a=n==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oKe{constructor(t,n,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,K(t.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const r=t[t.length-1],i=Math.ceil(r/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=Yn(l),c=No("coords",l);let d,f;if(i===1){f=l+1;const k=Yn(f);d=`
        ${k} sourceLocR = ${k}(${c.join()}, 0);
        ++${c[l-1]};
        ${k} sourceLocG = ${k}(${c.join()}, 0);
        ++${c[l-2]};
        ${k} sourceLocA = ${k}(${c.join()}, 0);
        --${c[l-1]};
        ${k} sourceLocB = ${k}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],g=h.map(k=>"int "+k),m=No("sourceLocR",f-1).concat("inIdx.r"),v=No("sourceLocG",f-1).concat("inIdx.g"),b=No("sourceLocB",f-1).concat("inIdx.b"),$=No("sourceLocA",f-1).concat("inIdx.a"),y=s==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${$.join()})));`,C=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${$.join()}) : 0.)`,x=o?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${x}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8(e,t,n,s=null){let o=t.shape[0],r=t.shape[1];s!=null&&(o=s.shape[0],r=s.shape[1]);const i=Zy(r),a={windowSize:i,inSize:r,batchSize:o,outSize:Math.ceil(r/i)},l=new sKe(a,n,s==null),u=[t];s!=null&&u.push(s);const c=e.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=k8(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function S8(e,t,n,s=null){const o=s!=null?s.shape:t.shape,r=o[o.length-1],i=Zy(r),a=new oKe(o,i,n,s==null),l=s==null?[t]:[t,s],u=e.runWebGLProgram(a,l,"int32");if(u.shape.length===t.shape.length){const c=S8(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function I8(e,t,n,s){const o=[n];if(fo("arg"+s.charAt(0).toUpperCase()+s.slice(1),o,t.shape.length),!je().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const r=[],i=e.texData.get(t.dataId),a=i!==null&&i.isPacked;let l=t;a&&(l=e.unpackTensor(t),r.push(l));const[u,c]=Qs(l.shape,o),d=Ue(c),f=yt({inputs:{x:l},backend:e,attrs:{shape:[-1,d]}});r.push(f);const h=k8(e,f,s);r.push(h);const p=yt({inputs:{x:h},backend:e,attrs:{shape:u}});return r.forEach(g=>e.disposeIntermediateTensorInfo(g)),p}return S8(e,t,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;let i=un(r,o.shape);const a=Ts(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Ro({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Rs(i.length,l.shape.length)),fo("argMax",[i[0]],l.shape.length);const c=I8(n,l,i[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const iKe={kernelName:z0,backendName:"webgl",kernelFunc:rKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;let i=un(r,o.shape);const a=Ts(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Ro({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Rs(i.length,l.shape.length)),fo("argMin",[i[0]],l.shape.length);const c=I8(n,l,i[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const lKe={kernelName:V0,backendName:"webgl",kernelFunc:aKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uKe=ri+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,cKe=En({opSnippet:uKe}),dKe={kernelName:Gp,backendName:"webgl",kernelFunc:cKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fKe=ri+"return log(x + sqrt(x * x + 1.0));",hKe=En({opSnippet:fKe}),pKe={kernelName:Kp,backendName:"webgl",kernelFunc:hKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gKe=ri+`
  return atan(x);
`,mKe=En({opSnippet:gKe}),vKe={kernelName:qp,backendName:"webgl",kernelFunc:mKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bKe=SGe+`
  return atan(a, b);
`,yKe=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+IGe+`
  return result;
`,wKe=ho({opSnippet:bKe,packedOpSnippet:yKe}),$Ke={kernelName:Xp,backendName:"webgl",kernelFunc:wKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CKe=ri+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,xKe=En({opSnippet:CKe}),kKe={kernelName:Yp,backendName:"webgl",kernelFunc:xKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gp{constructor(t,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,a=t.strideHeight,l=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const g=n==="avg",m=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,v=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let b="0.0";if(g||(b="-1.0 / 1e-20"),s){const k=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${k} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?r?m:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const $="max";let y=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(y="avgValue / count");const w=Math.floor(i/4)*4,C=i%4,x=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${$}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${x}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${x}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${x}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${x}
          }
        }
        setOutput(${y});
      }
    `}}class uT{constructor(t,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,a=t.strideDepth,l=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,g=t.effectiveFilterWidth,m=t.padInfo.front,v=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const $=n==="avg";let y="0.0";if($||(y="-1.0 / 1e-20"),s){const S=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${m}, ${v}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${S} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?r?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / count");const x=Math.floor(i/4)*4,k=i%4,I=`
      if (${$}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${m}, ${v}, ${b});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${x}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${I}
            }

            int xC = xCCorner + ${x};
            if (${k===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${k===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${k===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${I}
            }
          }
          setOutput(${C});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;om(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;K(Io(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ni(o.shape,r,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Mn(c.inShape,c.outShape))return rr({inputs:{x:o},backend:n});const d=new gp(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const IKe={kernelName:W0,backendName:"webgl",kernelFunc:SKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s,c=[1,1,1],d=Ma(o.shape,r,i,c,a,l,u),f=new uT(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const EKe={kernelName:H0,backendName:"webgl",kernelFunc:TKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ke{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=l-1-t.padInfo.top,d=u-1-t.padInfo.left,f=1/(n*s);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class NKe{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,s=t.filterHeight,o=t.filterWidth,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=d-1-t.padInfo.front,g=f-1-t.padInfo.top,m=h-1-t.padInfo.left,v=1/(n*s*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${g}, ${m});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AKe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],f=Ma(i.shape,a,l,d,u,c),h=new NKe(f);return n.runWebGLProgram(h,[o],i.dtype)}const DKe={kernelName:Tk,backendName:"webgl",kernelFunc:AKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RKe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r;om([o,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,c=ni(i.shape,a,l,1,u),d=new _Ke(c);return n.runWebGLProgram(d,[o],i.dtype)}const OKe={kernelName:Ik,backendName:"webgl",kernelFunc:RKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MKe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r}=t,{transposeA:i,transposeB:a}=s;return Kb({a:o,b:r,transposeA:i,transposeB:a,backend:n})}const PKe={kernelName:U0,backendName:"webgl",kernelFunc:MKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FKe{constructor(t,n,s,o,r,i){this.outputShape=[],this.variableNames=["x","mean","variance"],nn(t,n),nn(t,s);let a="0.0";o!=null&&(nn(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";r!=null&&(nn(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LKe{constructor(t,n,s,o,r,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],nn(t,n),nn(t,s);let a="vec4(0.0)";o!=null&&(nn(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";r!=null&&(nn(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BKe=({inputs:e,backend:t,attrs:n})=>{const{x:s,mean:o,variance:r,offset:i,scale:a}=e;K(o.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),K(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),K(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[s,o,r];let c=null;i!=null&&(c=i.shape,u.push(i));let d=null;a!=null&&(d=a.shape,u.push(a));const f=je().getBool("WEBGL_PACK_NORMALIZATION")?new LKe(s.shape,o.shape,r.shape,c,d,l):new FKe(s.shape,o.shape,r.shape,c,d,l);return t.runWebGLProgram(f,u,u[0].dtype)},zKe={kernelName:ny,backendName:"webgl",kernelFunc:BKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VKe{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=Yn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=WKe(this.rank);let o;const r=t.map((i,a)=>`sourceLoc.${Tx[a]} = start[${a}] + coords.${Tx[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${r.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${s}));
      }
    `}}const Tx=["x","y","z","w","u","v"];function WKe(e){if(e===1)return"sourceLoc";if(e<=6)return Tx.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HKe{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Yn(this.rank),s=No("coords",this.rank),o=No("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${r})`,a=`
      result.x = ${i};
      if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((c,d)=>`start[${d}]`).join()});`:t.map((c,d)=>`${o[d]} = ${s[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UKe(e,t,n,s){const o=s.texData.get(e.dataId),r=s.makeTensorInfo(n,e.dtype),i=s.texData.get(r.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let a=$S(t,Dt(e.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=s.dataRefCount.get(i.slice.origDataId)||1;return s.dataRefCount.set(i.slice.origDataId,l+1),r}function Sf(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,size:i}=s,[a,l]=Hy(o,r,i);if(bS(o,a,l),Ue(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=Mje(d.values,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,f)}const{isPacked:u}=n.texData.get(o.dataId),c=wS(o.shape,a,l);if(u||!c){const d=je().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new HKe(l):new VKe(l),f=[a];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),UKe(o,a,l,n)}const jKe={kernelName:Ny,backendName:"webgl",kernelFunc:Sf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GKe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,crops:i}=s;K(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((b,$)=>b*$),l=Ug(o.shape,r,a),u=jg(l.length,r.length),c=Gg(o.shape,r,a),d=lI(i,r.length),f=uI(c,i,r.length),h=[],p=yt({inputs:{x:o},backend:n,attrs:{shape:l}}),g=Ro({inputs:{x:p},backend:n,attrs:{perm:u}}),m=yt({inputs:{x:g},backend:n,attrs:{shape:c}}),v=Sf({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(g),h.push(m),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},KKe={kernelName:j0,backendName:"webgl",kernelFunc:GKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i}=s,a=n.readSync(o.dataId),l=n.readSync(r.dataId),u=f8(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}const YKe={kernelName:Ek,backendName:"webgl",kernelFunc:qKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XKe(e){const{inputs:t,backend:n}=e,{s0:s,s1:o}=t,r=n.readSync(s.dataId),i=n.readSync(o.dataId),a=nn(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const ZKe={kernelName:NB,backendName:"webgl",kernelFunc:XKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JKe="return float(a != b);",T8=ho({opSnippet:JKe,cpuKernelImpl:Nje,dtype:"bool"}),QKe={kernelName:yy,backendName:"webgl",kernelFunc:T8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function am(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.texData.get(s.dataId);return rr({inputs:{x:o.complexTensorInfos.real},backend:n})}const e9e={kernelName:Zk,backendName:"webgl",kernelFunc:am};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9e="return float(int(x));";function n9e(e,t){const n=new va(e.shape,t9e),s=t.runWebGLProgram(n,[e],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ex(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return rr({inputs:{x:o},backend:n});const i=qs(o.shape),a=Ex({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Vl({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=am({inputs:{input:o},backend:n}),a=Ex({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!CB(o.dtype,r)){const i=rr({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(r==="int32")return n9e(o,n);if(r==="bool"){const i=n.makeTensorInfo([],"bool",uo("bool",1)),l=T8({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const s9e={kernelName:Zp,backendName:"webgl",kernelFunc:Ex};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KR="return ceil(x);",o9e=En({opSnippet:KR,packedOpSnippet:KR,cpuKernelImpl:dje}),r9e={kernelName:Jp,backendName:"webgl",kernelFunc:o9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i9e{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a9e{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{clipValueMin:r,clipValueMax:i}=s;let a;je().getBool("WEBGL_PACK_CLIP")?a=new a9e(o.shape):a=new i9e(o.shape);const l=[[r],[i]];return n.runWebGLProgram(a,[o],o.dtype,l)}const u9e={kernelName:Qp,backendName:"webgl",kernelFunc:l9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c9e{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qR(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function d9e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=n.texData.get(s.dataId),r=new c9e(s.shape),i=[qR(s,o.complexTensorInfos.real),qR(s,o.complexTensorInfos.imag)];return n.runWebGLProgram(r,i,i[0].dtype)}const f9e={kernelName:G0,backendName:"webgl",kernelFunc:d9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h9e{constructor(t){this.outputShape=[],this.outputShape=Ki(t,1),this.variableNames=t.map((i,a)=>`T${a}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+t[i][1];const s=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];s.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,r=n[n.length-1];s.push(`else setOutput(getT${o}(yR, yC-${r}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p9e{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ki(t,n);const s=this.outputShape,o=s.length,r=Yn(o),i=No("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((g,m)=>`T${m}`);const l=new Array(t.length-1);l[0]=t[0][n];for(let g=1;g<l.length;g++)l[g]=l[g-1]+t[g][n];const u=a[n],c=a.slice(-2),d=a.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let g=1;g<l.length;g++){const m=l[g-1];f+=`
        if (${u} < ${l[g]}  && ${u} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${rv(a,u,m)}),
            vec2(${rv(c,u,m)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${rv(a,u,p)}),
          vec2(${rv(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(g=>"int "+g)}) {
        ${f}
      }

      void main() {
        ${r} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${s[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${s[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${s[o-2]} &&
            ${i[o-1]} < ${s[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function rv(e,t,n){const s=e.indexOf(t);return e.map((r,i)=>i===s?`${r} - ${n}`:r).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.texData.get(s.dataId);return rr({inputs:{x:o.complexTensorInfos.imag},backend:n})}const g9e={kernelName:Wk,backendName:"webgl",kernelFunc:y1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ed(e,t,n){const s=e[0].dtype;if(s==="complex64"){const c=e.map(g=>am({inputs:{input:g},backend:n})),d=e.map(g=>y1({inputs:{input:g},backend:n})),f=ed(c,t,n),h=ed(d,t,n),p=Vl({inputs:{real:f,imag:h},backend:n});return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),d.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}let o=n.shouldExecuteOnCPU(e);if(s==="string"&&(o=!0),o){const c=e.map(v=>{const b=Ue(v.shape.slice(t));return yt({inputs:{x:v},backend:n,attrs:{shape:[-1,b]}})}),d=c.map(v=>({vals:n.readSync(v.dataId),shape:v.shape})),f=Ki(c.map(v=>v.shape),1),h=c[0].shape[0]===1,p=fje(d,f,s,h),g=Ki(e.map(v=>v.shape),t),m=n.makeTensorInfo(g,s,p);return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}if(e.length>je().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(e.length/2),d=ed(e.slice(0,c),t,n),f=ed(e.slice(c),t,n),h=ed([d,f],t,n);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}if(je().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const c=new p9e(e.map(d=>d.shape),t);return n.runWebGLProgram(c,e,s)}const{tensors2D:r,outShape:i}=m9e(e,t,n),a=new h9e(r.map(c=>c.shape)),l=n.runWebGLProgram(a,r,s);r.forEach(c=>n.disposeIntermediateTensorInfo(c));const u=yt({inputs:{x:l},attrs:{shape:i},backend:n});return n.disposeIntermediateTensorInfo(l),u}function m9e(e,t,n){const s=Ki(e.map(r=>r.shape),t);return{tensors2D:e.map(r=>yt({inputs:{x:r},attrs:{shape:[-1,Ue(r.shape.slice(t))]},backend:n})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s,r=un(o,t[0].shape)[0],i=Ki(t.map(u=>u.shape),r);if(Ue(i)===0)return n.makeTensorInfo(i,t[0].dtype,[]);const a=t.filter(u=>Ue(u.shape)>0);if(a.length===1)return rr({inputs:{x:a[0]},backend:n});const l=a.map(u=>u.shape);return rI(l,r),ed(a,r,n)}const v9e={kernelName:K0,backendName:"webgl",kernelFunc:E8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _8{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,a=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,g=t.inChannels%4,m=t.dataFormat==="channelsLast",v=m?1:2,b=m?2:3,$=m?3:1;let y="",w="";s&&(o?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:y=`
          float activation(float x) {
            ${s}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${$}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class b9e{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,s=t.padInfo.top,o=t.padInfo.left,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,g=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${r}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${s}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y9e{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=Uo(this.outputShape.length);const{dataFormat:s}=n,o=Oo(),r=s==="channelsLast",i=r?0:1,a=r?1:2,l=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${t[1]} && pos < ${t[0]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.y + ${d};
          pos = rc.x + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${r}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8({x:e,filter:t,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const l=e.shape,u=s.texData.get(e.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,g=!1;let m;const v=[];if(!((d===1||f===1)&&c>x8)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&Mn(u.shape.slice(-3),l.slice(-3))){const y=l[0]*l[1]*(l[2]+1),w={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},C=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,K(Gb(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const x=yt({inputs:{x:t},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(x);const k=Kb({a:w,b:x,backend:s,transposeA:p,transposeB:g,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i}),I=s.texData.get(k.dataId);K(I.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=C,I.shape=n.outShape,m=rr({inputs:{x:k},backend:s}),m.shape=n.outShape,v.push(k)}else{const y=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],w=yt({inputs:{x:e},backend:s,attrs:{shape:[1,y,n.inChannels]}}),C=yt({inputs:{x:t},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),x=Kb({a:w,b:C,transposeA:p,transposeB:g,backend:s,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i});m=yt({inputs:{x},backend:s,attrs:{shape:n.outShape}}),v.push(w),v.push(C),v.push(x)}for(const y of v)s.disposeIntermediateTensorInfo(y);return m}function A8({x:e,filter:t,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",g=l*u*c,m=f*d,v=[g,m],b=!0,$=!1,y=[],w=yt({inputs:{x:e},backend:s,attrs:{shape:e.shape.slice(1)}}),C=yt({inputs:{x:t},backend:s,attrs:{shape:[1,g,Ue(t.shape)/g]}});y.push(w),y.push(C);const x=new y9e(v,n),k=[w.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],I=s.runWebGLProgram(x,[w],"float32",k),S=yt({inputs:{x:I},backend:s,attrs:{shape:[1,v[0],v[1]]}});y.push(I),y.push(S);const T=o!=null,_=r!=null,N=a==="leakyrelu",O=a?m1(a,!0):null,M=new C8(S.shape,C.shape,[1,m,n.outChannels],b,$,T,O,_,N),D=[S,C];if(o&&D.push(o),_&&D.push(r),N){const ne=s.makeTensorInfo([],"float32",Rl(i,"float32"));D.push(ne),y.push(ne)}const F=s.runWebGLProgram(M,D,"float32"),V=p?[1,f,d,n.outChannels]:[1,n.outChannels,f,d],U=yt({inputs:{x:F},backend:s,attrs:{shape:V}});y.push(F);for(const ne of y)s.disposeIntermediateTensorInfo(ne);return U}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=s,d=Pa(l),f=co(o.shape,r.shape,i,u,a,c,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=N8({x:o,filter:r,convInfo:f,backend:n});else if(je().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)h=A8({x:o,filter:r,convInfo:f,backend:n});else{const g=new _8(f);h=n.runWebGLProgram(g,[o,r],"float32")}const p=yt({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const $9e={kernelName:q0,backendName:"webgl",kernelFunc:w9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C9e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,r=t.padInfo.left,i=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              if (${i}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class x9e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,l=s-1-t.padInfo.left,u=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class k9e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,s=t.strideHeight,o=t.strideWidth,r=t.padInfo.front,i=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${r};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${i};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class S9e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,s=t.filterHeight,o=t.filterWidth,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=n-1-t.padInfo.front,u=s-1-t.padInfo.top,c=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${r}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=s,d=Pa(l),f=co(o.shape,c,i,1,a,u,!1,d),h=new C9e(f);return n.runWebGLProgram(h,[o,r],"float32")}const T9e={kernelName:Nk,backendName:"webgl",kernelFunc:I9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=s,d=Pa(u),f=co(i,r.shape,a,1,l,c,!1,d),h=new x9e(f);return n.runWebGLProgram(h,[o,r],"float32")}const _9e={kernelName:Y0,backendName:"webgl",kernelFunc:E9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s,u=Ol(o.shape,r.shape,i,l,a),c=new b9e(u);return n.runWebGLProgram(c,[o,r],"float32")}const A9e={kernelName:X0,backendName:"webgl",kernelFunc:N9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,filterShape:l}=s,u=Ol(o.shape,l,i,1,a),c=new k9e(u);return n.runWebGLProgram(c,[o,r],"float32")}const R9e={kernelName:Ak,backendName:"webgl",kernelFunc:D9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O9e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{pad:i,strides:a,inputShape:l}=s,u=Ol(l,r.shape,a,1,i),c=new S9e(u);return n.runWebGLProgram(c,[o,r],"float32")}const M9e={kernelName:Dk,backendName:"webgl",kernelFunc:O9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P9e=kf+`
  return cos(x);
`,F9e=En({opSnippet:P9e}),L9e={kernelName:eg,backendName:"webgl",kernelFunc:F9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B9e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,z9e=En({opSnippet:B9e}),V9e={kernelName:tg,backendName:"webgl",kernelFunc:z9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W9e{constructor(t,n,s,o,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,u]=t,[c]=n,[d,f]=s;this.outputShape=[c,d,f,u];const h=o==="bilinear"?1:0,[p,g]=[`${a-1}.0`,`${l-1}.0`],[m,v,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[$,y,w]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${$});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${y};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${r}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${r}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H9e=e=>{const{inputs:t,backend:n,attrs:s}=e,{image:o,boxes:r,boxInd:i}=t,{cropSize:a,method:l,extrapolationValue:u}=s,c=new W9e(o.shape,r.shape,a,l,u);return n.runWebGLProgram(c,[o,r,i],"float32")},U9e={kernelName:Rk,backendName:"webgl",kernelFunc:H9e};class YR{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;const o=t.length,r=n?"0.0":`getX(${XR(o,"coords")})`,i=t[t.length-1];let a="",l="";n?(a=s?`end != ${i-1}`:"end != 0",l=s?"end + 1":"end - 1"):(a=s?`end + pow2 < ${i}`:"end >= pow2",l=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Yn(o)} coords = getOutputCoords();
        int end = ${ZR(o,"coords")};
        float val = ${r};
        int pow2 = int(pow(2.0, index));
        if (${a}) {
          int idx = ${l};
          ${ZR(o,"coords")} = idx;
          val += getX(${XR(o,"coords")});
        }
        setOutput(val);
      }
    `}}function XR(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function ZR(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:i,reverse:a}=s,l=o.shape.length,u=Ts([r],l);let c=o;u!=null&&(c=Ro({inputs:{x:o},backend:n,attrs:{perm:u}}));const d=Rs(1,l)[0];if(d!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${o.shape.length-1} but got axis=${r}`);const f=c.shape[d];let h=rr({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const g=new YR(c.shape,!1,a),m=[[p]],v=h;h=n.runWebGLProgram(g,[h],h.dtype,m),n.disposeIntermediateTensorInfo(v)}if(i){const p=new YR(c.shape,i,a),g=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(g)}if(u!=null){const p=pf(u),g=Ro({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),g}return h}const G9e={kernelName:Z0,backendName:"webgl",kernelFunc:j9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const l=n.readSync(o.dataId),u=n.readSync(r.dataId),c=f8(l,u,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(r),c=cje(l,u,i,a);return n.makeTensorInfo(c.shape,r.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const q9e={kernelName:AB,backendName:"webgl",kernelFunc:K9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y9e{constructor(t,n,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockSize:r,dataFormat:i}=s,a=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],u=i==="NHWC"?o.shape[2]:o.shape[3],c=i==="NHWC"?o.shape[3]:o.shape[1],d=l*r,f=u*r,h=c/(r*r),p=i==="NHWC"?[a,d,f,h]:[a,h,d,f],g=new Y9e(p,r,i);return n.runWebGLProgram(g,[o],o.dtype)}const Z9e={kernelName:Ok,backendName:"webgl",kernelFunc:X9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D8{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Uo(this.outputShape.length);const i=t.filterHeight,a=t.filterWidth,l=t.outChannels/t.inChannels;let u="",c="";s&&(o?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:u=`
          float activation(float x) {
            ${s}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R8{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Uo(this.outputShape.length);const i=t.outChannels/t.inChannels,a=t.padInfo.left,l=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const b=v*2;if(h+=`
          xC = xCCorner + ${b*u};
          `,l===1){if(b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,u===1&&b>0?h+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const $=a%2===0?yB(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${$};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,u>1&&(h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                      xTexelC${b} = getX(batch, xR, xCOffset, d1);
                      xTexelC${b}Ready = 1;
                    }
                    `),h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                  `):$===1?h+=`
                    xC${b+1} = xTexelC${b};
                    `:h+=`
                    xCOffset = xC + ${$};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(h+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(h+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",g="";s&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:p=`vec4 activation(vec4 x) {
          ${s}
        }`,g="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=s;let c=l;c==null&&(c=[1,1]),K(Io(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=co(o.shape,r.shape,i,c,a,u,!0);let f;je().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new R8(d):f=new D8(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,r],"float32",h)}const Q9e={kernelName:J0,backendName:"webgl",kernelFunc:J9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e7e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,r=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class t7e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=n-1-t.padInfo.top,a=s-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=s,d=co(o.shape,c,i,a,l,u,!0),f=new e7e(d);return n.runWebGLProgram(f,[o,r],"float32")}const s7e={kernelName:Mk,backendName:"webgl",kernelFunc:n7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=s,d=co(c,r.shape,i,a,l,u,!0),f=new t7e(d);return n.runWebGLProgram(f,[o,r],"float32")}const r7e={kernelName:Pk,backendName:"webgl",kernelFunc:o7e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i7e{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=[...s.shape,...s.shape],r=Ue(s.shape),i=yt({inputs:{x:s},backend:n,attrs:{shape:[r]}}),a=new i7e(r),l=n.runWebGLProgram(a,[i],i.dtype),u=yt({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const l7e={kernelName:DB,backendName:"webgl",kernelFunc:a7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u7e{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:s,padInfo:o,strideHeight:r,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=t,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${i});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s,u=zg(o.shape,r.shape,i,a,"NHWC",l);let c;const d=new u7e(u);c=n.runWebGLProgram(d,[o,r],"float32");const f=yt({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const d7e={kernelName:Q0,backendName:"webgl",kernelFunc:c7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f7e(e){const{inputs:t,backend:n,attrs:s}=e,{equation:o}=s,r=t,{allDims:i,summedDims:a,idDims:l}=vI(o,r.length);yI(i.length,l,r);const{path:u,steps:c}=wI(a,l),d=c.length;let f=null,h=i.length;const p=[];for(let g=0;g<d;++g){for(const m of c[g]){const{permutationIndices:v,expandDims:b}=bI(h,l[m]);let $;$I(v)?$=r[m]:($=Ro({inputs:{x:r[m]},backend:n,attrs:{perm:v}}),p.push($));const y=$.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);Mn($.shape,y)||($=yt({inputs:{x:$},backend:n,attrs:{shape:y}}),p.push($)),f===null?f=$:(f=lT({inputs:{a:$,b:f},backend:n}),p.push(f))}g<d-1&&(u[g]>=0&&(f=b1({inputs:{x:f},backend:n,attrs:{axis:u[g]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const g of p)g!==f&&n.disposeIntermediateTensorInfo(g);return f}const h7e={kernelName:RB,backendName:"webgl",kernelFunc:f7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p7e="return (x >= 0.0) ? x : (exp(x) - 1.0);",g7e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,m7e=En({opSnippet:p7e,packedOpSnippet:g7e}),v7e={kernelName:sg,backendName:"webgl",kernelFunc:m7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b7e="return (b >= 1.0) ? a : a * (b + 1.0);",y7e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,w7e=e=>{const{inputs:t,backend:n}=e,{dy:s,y:o}=t,r=je().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new im(y7e,s.shape,o.shape):new Ud(b7e,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],s.dtype)},$7e={kernelName:Fk,backendName:"webgl",kernelFunc:w7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C7e=`
  return vec4(equal(a, b));
`,x7e="return float(a == b);",k7e=ho({opSnippet:x7e,packedOpSnippet:C7e,dtype:"bool",cpuKernelImpl:hje}),S7e={kernelName:ey,backendName:"webgl",kernelFunc:k7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I7e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${cI};
  float a1 = ${dI};
  float a2 = ${fI};
  float a3 = ${hI};
  float a4 = ${pI};
  float a5 = ${gI};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,T7e=En({opSnippet:I7e}),E7e={kernelName:og,backendName:"webgl",kernelFunc:T7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7e=kf+`
  return exp(x);
`,N7e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,O8=En({opSnippet:_7e,packedOpSnippet:N7e,cpuKernelImpl:pje,dtype:"float32"}),A7e={kernelName:rg,backendName:"webgl",kernelFunc:O8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _x(e){const{inputs:t,attrs:n,backend:s}=e,{dim:o}=n,{input:r}=t,i=r.shape.length,a=r.shape.slice();let l=o;return o<0&&(K(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),yt({inputs:{x:r},backend:s,attrs:{shape:a}})}const D7e={kernelName:ty,backendName:"webgl",kernelFunc:_x};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JR="return exp(x) - 1.0;",R7e=En({opSnippet:JR,packedOpSnippet:JR,cpuKernelImpl:gje}),O7e={kernelName:ig,backendName:"webgl",kernelFunc:R7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QR{constructor(t,n,s){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const r=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=s?`${o}.0`:"1.0";let a;if(t==="real")a="return real * expR - imag * expI;";else if(t==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${r};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8(e,t,n){const s=n.texData.get(e.dataId),o=Ue(e.shape),r=e.shape[e.shape.length-1],i=o/r,a=yt({inputs:{x:e},backend:n,attrs:{shape:[i,r]}}),l=a.shape,u=new QR("real",l,t),c=new QR("imag",l,t),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=Vl({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const g=yt({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7e(e){const{inputs:t,backend:n}=e,{input:s}=t;return M8(s,!1,n)}const P7e={kernelName:Lk,backendName:"webgl",kernelFunc:M7e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F7e{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lm(e){const{backend:t,attrs:n}=e,{shape:s,value:o}=n;let{dtype:r}=n;if(r=r||Wp(o),r==="string"){const i=zo(r,Ue(s));return i.fill(o),t.makeTensorInfo(s,r,i)}else{const i=new F7e(s,o),a=[[o]];return t.runWebGLProgram(i,[],r,a)}}const L7e={kernelName:Bk,backendName:"webgl",kernelFunc:lm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B7e{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z7e={kernelName:zk,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,s=t,o=new B7e(n.shape);return s.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eO="return floor(x);",V7e=En({opSnippet:eO,packedOpSnippet:eO,cpuKernelImpl:mje}),W7e={kernelName:ag,backendName:"webgl",kernelFunc:V7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H7e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,U7e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,j7e=ho({opSnippet:H7e,packedOpSnippet:U7e,dtype:"int32"}),G7e={kernelName:lg,backendName:"webgl",kernelFunc:j7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K7e{constructor(t){this.variableNames=["A"];const n=Oo(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${s}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q7e{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Oo(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${s}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7e={kernelName:PAe,backendName:"webgl",kernelFunc:X7e};let jc;function X7e(e){const{inputs:t,backend:n,attrs:s}=e;let{pixels:o}=t;const{numChannels:r}=s,i=typeof HTMLVideoElement!="undefined"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement!="undefined"&&o instanceof HTMLImageElement,[l,u]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[u,l],d=[u,l,r];(a||i)&&(jc==null&&(jc=document.createElement("canvas").getContext("2d")),jc.canvas.width=l,jc.canvas.height=u,jc.drawImage(o,0,0,l,u),o=jc.canvas);const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=wr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const h=je().getBool("WEBGL_PACK")?new q7e(d):new K7e(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s,g=Pa(c),m=co(o.shape,r.shape,l,d,u,f,!1,g);let v;const b=[];if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))v=N8({x:o,filter:r,convInfo:m,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(je().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)v=A8({x:o,filter:r,convInfo:m,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const y=i!=null,w=a!=null,C=h==="leakyrelu",x=h?m1(h,!1):null,k=new _8(m,y,x,w,C),I=[o,r];if(i&&I.push(i),a&&I.push(a),C){const S=n.makeTensorInfo([],"float32",Rl(p,"float32"));I.push(S),b.push(S)}v=n.runWebGLProgram(k,I,"float32")}const $=yt({inputs:{x:v},backend:n,attrs:{shape:m.outShape}});return b.push(v),b.forEach(y=>n.disposeIntermediateTensorInfo(y)),$}const J7e={kernelName:_b,backendName:"webgl",kernelFunc:Z7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=s,p=[];let g=c;g==null&&(g=[1,1]),K(Io(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const m=co(o.shape,r.shape,l,g,u,d,!0),v=je().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,b=f?m1(f,v):null,$=[o,r],y=i!=null,w=a!=null,C=f==="leakyrelu";if(y&&$.push(i),w&&$.push(a),C){const S=n.makeTensorInfo([],"float32",Rl(h,"float32"));$.push(S),p.push(S)}let x;v?x=new R8(m,y,b,w,C):x=new D8(m,y,b,w,C);const k=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],I=n.runWebGLProgram(x,$,"float32",k);return p.forEach(S=>n.disposeIntermediateTensorInfo(S)),I}const eqe={kernelName:zB,backendName:"webgl",kernelFunc:Q7e};class tqe{constructor(t,n,s){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=s;const o=Yn(n.length),r=Yn(s.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${o} strides = ${o}(${this.strides});
         void main() {
          ${r} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${i};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nqe(e){const{inputs:t,backend:n}=e,{params:s,indices:o}=t,r=o.shape,i=r[r.length-1],a=Ue(s.shape),[l,u,c,d]=vS(s,o),f=yt({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),h=yt({inputs:{x:s},backend:n,attrs:{shape:[Ue(s.shape)/c,c]}});if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const v=n.readSync(o.dataId),b=n.bufferSync(s),$=vje(v,b,s.dtype,u,i,c,d,s.shape,a);return n.makeTensorInfo(l,s.dtype,$.values)}const p=new tqe(i,d,[u,c]),g=n.runWebGLProgram(p,[h,f],h.dtype),m=yt({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),m}const sqe={kernelName:OB,backendName:"webgl",kernelFunc:nqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oqe{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const s=Yn(this.rank),o=rqe(t);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function rqe(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<e.length;o++)o===2?s.push("index"):s.push(`${n[o]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,indices:r}=t,{axis:i,batchDims:a}=s,l=un(i,o.shape)[0];if(je().get("DEBUG")){const b=n.readSync(r.dataId),$=o.shape[l];for(let y=0;y<b.length;++y){const w=b[y];K(w<=$-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${$-1}]`)}}const u=xI(o,r,l,a),c=Ue(r.shape),d=[],f=yt({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=yt({inputs:{x:r},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(f),d.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,r])||o.dtype==="string"){const b=n.bufferSync(h),$=n.bufferSync(f),y=bje($,b,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,y.dtype,y.values)}const g=new oqe(f.shape,p),m=n.runWebGLProgram(g,[f,h],f.dtype);d.push(m);const v=yt({inputs:{x:m},backend:n,attrs:{shape:u.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const iqe={kernelName:sy,backendName:"webgl",kernelFunc:P8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aqe="return float(a > b);",lqe=`
  return vec4(greaterThan(a, b));
`,uqe=ho({opSnippet:aqe,packedOpSnippet:lqe,cpuKernelImpl:yje,dtype:"bool"}),cqe={kernelName:oy,backendName:"webgl",kernelFunc:uqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dqe="return float(a >= b);",fqe=`
  return vec4(greaterThanEqual(a, b));
`,hqe=ho({opSnippet:dqe,packedOpSnippet:fqe,dtype:"bool",cpuKernelImpl:wje}),pqe={kernelName:ug,backendName:"webgl",kernelFunc:hqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gqe(e){const{inputs:t,backend:n}=e,{input:s}=t;return M8(s,!0,n)}const mqe={kernelName:Vk,backendName:"webgl",kernelFunc:gqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vqe="return float(!isnan(x) && !isinf(x));",bqe=En({opSnippet:vqe,dtype:"bool"}),yqe={kernelName:dg,backendName:"webgl",kernelFunc:bqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wqe="return float(isinf(x));",$qe=En({opSnippet:wqe,dtype:"bool"}),Cqe={kernelName:fg,backendName:"webgl",kernelFunc:$qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xqe="return float(isnan(x));",kqe=En({opSnippet:xqe,dtype:"bool"}),Sqe={kernelName:hg,backendName:"webgl",kernelFunc:kqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iqe="return float(a < b);",Tqe=`
  return vec4(lessThan(a, b));
`,Eqe=ho({opSnippet:Iqe,packedOpSnippet:Tqe,cpuKernelImpl:$je,dtype:"bool"}),_qe={kernelName:iy,backendName:"webgl",kernelFunc:Eqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nqe="return float(a <= b);",Aqe=`
  return vec4(lessThanEqual(a, b));
`,Dqe=ho({opSnippet:Nqe,packedOpSnippet:Aqe,cpuKernelImpl:Cje,dtype:"bool"}),Rqe={kernelName:ay,backendName:"webgl",kernelFunc:Dqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oqe(e){const{backend:t,attrs:n}=e,{start:s,stop:o,num:r}=n,i=xje(s,o,r);return t.makeTensorInfo([i.length],"float32",i)}const Mqe={kernelName:MB,backendName:"webgl",kernelFunc:Oqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pqe=kf+`
  return x < 0.0 ? 0./0. : log(x);
`,Fqe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,Lqe=En({opSnippet:Pqe,packedOpSnippet:Fqe,cpuKernelImpl:kje}),Bqe={kernelName:pg,backendName:"webgl",kernelFunc:Lqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zqe=kf+`
  return log(1.0 + x);
`,Vqe=En({opSnippet:zqe}),Wqe={kernelName:gg,backendName:"webgl",kernelFunc:Vqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hqe="return float(a >= 1.0 && b >= 1.0);",Uqe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,jqe=ho({opSnippet:Hqe,packedOpSnippet:Uqe,dtype:"bool"}),Gqe={kernelName:ly,backendName:"webgl",kernelFunc:jqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kqe="return float(!(x >= 1.0));",qqe=En({opSnippet:Kqe}),Yqe={kernelName:uy,backendName:"webgl",kernelFunc:qqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xqe="return float(a >= 1.0 || b >= 1.0);",Zqe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Jqe=ho({opSnippet:Xqe,packedOpSnippet:Zqe,dtype:"bool"}),Qqe={kernelName:cy,backendName:"webgl",kernelFunc:Jqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eYe{constructor(t,n,s,o,r){this.variableNames=["x"],this.outputShape=[];const i=n,a=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tYe{constructor(t,n,s,o,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nYe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{depthRadius:r,bias:i,alpha:a,beta:l}=s,u=je().getBool("WEBGL_PACK_NORMALIZATION")?new tYe(o.shape,r,i,a,l):new eYe(o.shape,r,i,a,l);return n.runWebGLProgram(u,[o],o.dtype)},sYe={kernelName:dy,backendName:"webgl",kernelFunc:nYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oYe{constructor(t,n,s,o,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=s,this.alpha=o,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${r})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${r});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rYe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o,y:r,dy:i}=t,{depthRadius:a,bias:l,alpha:u,beta:c}=s,d=new oYe(o.shape,a,l,u,c);return n.runWebGLProgram(d,[o,r,i],o.dtype)},iYe={kernelName:Hk,backendName:"webgl",kernelFunc:rYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aYe(e,t,n,s){const o=Ue(t),i=Ue(e.shape)/o,a=yt({inputs:{x:e},attrs:{shape:[i,o]},backend:s}),l=$c(a,e.dtype,"max",s),u=yt({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reductionIndices:r,keepDims:i}=s,a=o.shape.length,l=un(r,o.shape);let u=l;const c=Ts(u,a),d=c!=null,f=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const $=n.texData.get(h.dataId).values,y=new Array(a);for(let x=0;x<y.length;x++)y[x]=o.shape[c[x]];const w=aT($,o.shape,o.dtype,c,y);h=n.makeTensorInfo(y,o.dtype);const C=n.texData.get(h.dataId);C.values=w}else h=v1(o,c,n);u=Rs(u.length,a)}fo("max",u,a);const[p,g]=Qs(h.shape,u);let m=p;i&&(m=Is(p,l));let v;if(f){const $=n.texData.get(h.dataId).values,y=Sje($,Ue(g),m,o.dtype);v=n.makeTensorInfo(m,o.dtype);const w=n.texData.get(v.dataId);w.values=y}else v=aYe(h,g,m,n);return d&&n.disposeIntermediateTensorInfo(h),v}const lYe={kernelName:fy,backendName:"webgl",kernelFunc:F8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uYe=v8+`
  return max(a, b);
`,cYe=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+g1+`
  return result;
`,dYe=ho({opSnippet:uYe,packedOpSnippet:cYe,cpuKernelImpl:Ije}),fYe={kernelName:mg,backendName:"webgl",kernelFunc:dYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hYe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;om(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;K(Io(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ni(o.shape,r,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Mn(c.inShape,c.outShape))return rr({inputs:{x:o},backend:n});const d=new gp(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const pYe={kernelName:hy,backendName:"webgl",kernelFunc:hYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gYe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dataFormat:l,dimRoundingMode:u}=s,c=[1,1,1],d=Ma(o.shape,r,i,c,a,u,l),f=new uT(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const mYe={kernelName:py,backendName:"webgl",kernelFunc:gYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vYe{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,s=t.strideWidth,o=t.dilationHeight,r=t.effectiveFilterHeight,i=t.effectiveFilterWidth,a=r-1-t.padInfo.top,l=i-1-t.padInfo.left,u=r*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class bYe{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,s=t.strideHeight,o=t.strideWidth,r=t.dilationDepth,i=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=l-1-t.padInfo.front,f=u-1-t.padInfo.top,h=c-1-t.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${r}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yYe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],f=Ma(i.shape,a,l,d,u,c),h=new uT(f,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),g=new bYe(f),m=n.runWebGLProgram(g,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}const wYe={kernelName:jk,backendName:"webgl",kernelFunc:yYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ye(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r,output:i}=t,a=r;om([r,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,f=ni(a.shape,l,u,1,c,d),h=!0,p=new gp(f,"max",h),g=n.runWebGLProgram(p,[a],a.dtype),m=new vYe(f),v=n.runWebGLProgram(m,[o,g],a.dtype);return n.disposeIntermediateTensorInfo(g),v}const CYe={kernelName:Uk,backendName:"webgl",kernelFunc:$Ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xYe(e,t,n,s){let o=new gp(n,"max",!1);const r=s.runWebGLProgram(o,[e],"float32");o=new gp(n,"max",!0,!0,t);const i=s.runWebGLProgram(o,[e],"float32");return[r,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kYe={kernelName:PB,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=t,l=n;K(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const u=[1,1];K(Io(r,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${u}'`);const c=ni(s.shape,o,r,u,i),[d,f]=xYe(s,a,c,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SYe(e,t,n,s){const o=Ue(t),i=Ue(e.shape)/o,a=yt({inputs:{x:e},attrs:{shape:[i,o]},backend:s}),l=$c(a,"float32","mean",s),u=yt({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IYe={kernelName:gy,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{keepDims:o,axis:r}=t,i=n,a=s.shape.length,l=un(r,s.shape);let u=l;const c=Ts(u,a),d=c!=null,f=i.shouldExecuteOnCPU([s]),h=[];let p=s;if(d){if(f){const y=i.texData.get(p.dataId).values,w=new Array(a);for(let k=0;k<w.length;k++)w[k]=s.shape[c[k]];const C=aT(y,s.shape,s.dtype,c,w);p=i.makeTensorInfo(w,s.dtype);const x=i.texData.get(p.dataId);x.values=C}else p=v1(s,c,i);h.push(p),u=Rs(u.length,a)}fo("sum",u,a);const[g,m]=Qs(p.shape,u);let v=g;o&&(v=Is(g,l));const b=SYe(p,m,v,i);for(const $ of h)i.disposeIntermediateTensorInfo($);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TYe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=un(r,o.shape);let u=l;const c=Ts(u,a);let d=o;c!=null&&(d=Ro({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Rs(u.length,o.shape.length)),fo("min",u,a);const[f,h]=Qs(d.shape,u),p=Ue(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=$c(g,g.dtype,"min",n);let v;if(i){const b=Is(f,l);v=yt({inputs:{x:m},backend:n,attrs:{shape:b}})}else v=yt({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(d),v}const EYe={kernelName:my,backendName:"webgl",kernelFunc:TYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ye=v8+`
  return min(a, b);
`,NYe=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+g1+`
  return result;
`,AYe=ho({opSnippet:_Ye,packedOpSnippet:NYe,cpuKernelImpl:Tje}),DYe={kernelName:vg,backendName:"webgl",kernelFunc:AYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RYe{constructor(t,n,s){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+t[d]+c[1]);const o=t.length,r=Yn(o),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+t[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),u=s==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${r} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OYe{constructor(t,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,g)=>p[0]+t[g]+p[1]);const o=t.length,r=Yn(o),i=n.map(p=>p[0]).join(","),a=n.map((p,g)=>p[0]+t[g]).join(","),l=No("rc",o),u=No("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=s==="reflect"?0:1;let h="";if(o===1){const p=`
        ${r} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const p=`
        ${r} source = rc;
        ${r} lt = ${r}(lessThan(source, start));
        ${r} gte = ${r}(greaterThanEqual(source, end));
        ${r} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[o-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MYe=({inputs:e,backend:t,attrs:n})=>{const{x:s}=e,{paddings:o,mode:r}=n,i=je().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OYe(s.shape,o,r):new RYe(s.shape,o,r);return t.runWebGLProgram(i,[s],s.dtype)},PYe={kernelName:vy,backendName:"webgl",kernelFunc:MYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FYe=`if (b == 0.0) return NAN;
  return mod(a, b);`,LYe=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+g1+`
  return result;
`,BYe=ho({opSnippet:FYe,packedOpSnippet:LYe}),zYe={kernelName:bg,backendName:"webgl",kernelFunc:BYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VYe{constructor(t,n,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WYe=`
if (a == b) {
  return 1.0;
};
return a / b;`,HYe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,L8=ho({opSnippet:WYe,packedOpSnippet:HYe,checkOutOfBounds:!0}),UYe={kernelName:ng,backendName:"webgl",kernelFunc:L8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tO="return a - b;",B8=ho({opSnippet:tO,packedOpSnippet:tO,supportsComplex:!0,cpuKernelImpl:Hje}),jYe={kernelName:Og,backendName:"webgl",kernelFunc:B8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{dim:r}=s,i=un([r],o.shape),a=F8({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Is(a.shape,i),u=yt({inputs:{x:a},backend:n,attrs:{shape:l}}),c=B8({inputs:{a:o,b:u},backend:n}),d=O8({inputs:{x:c},backend:n}),f=b1({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=yt({inputs:{x:f},backend:n,attrs:{shape:l}}),p=L8({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const GYe={kernelName:Oy,backendName:"webgl",kernelFunc:z8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KYe(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{numSamples:r,seed:i,normalized:a}=s,l=a?o:z8({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new VYe(u,c,r),f=[[i]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const qYe={kernelName:FB,backendName:"webgl",kernelFunc:KYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YYe=ri+`
  return -x;
`,XYe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function ZYe(e){const{inputs:t,backend:n}=e,{x:s}=t;if(n.shouldExecuteOnCPU([s])){const r=n.texData.get(s.dataId),[i,a]=_je(r.values,s.shape,s.dtype);return n.makeTensorInfo(a,s.dtype,i)}let o;return je().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Iu(s.shape,XYe):o=new va(s.shape,YYe),n.runWebGLProgram(o,[s],s.dtype)}const JYe={kernelName:by,backendName:"webgl",kernelFunc:ZYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QYe=YS;function eXe(e){vr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s,u=n.readSync(o.dataId),c=n.readSync(r.dataId),{selectedIndices:d}=QYe(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const tXe={kernelName:Gk,backendName:"webgl",kernelFunc:eXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nXe=XS;function sXe(e){vr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s,c=n.readSync(o.dataId),d=n.readSync(r.dataId),{selectedIndices:f,validOutputs:h}=nXe(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const oXe={kernelName:Kk,backendName:"webgl",kernelFunc:sXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rXe=ZS;function iXe(e){vr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s,c=n.readSync(o.dataId),d=n.readSync(r.dataId),f=i,h=a,p=l,g=u,{selectedIndices:m,selectedScores:v}=rXe(c,d,f,h,p,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const aXe={kernelName:qk,backendName:"webgl",kernelFunc:iXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lXe{constructor(t,n,s,o){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uXe=e=>{const{inputs:t,backend:n,attrs:s}=e,{indices:o}=t,{depth:r,onValue:i,offValue:a}=s,l=Ue(o.shape),u=new lXe(l,r,i,a),c=yt({inputs:{x:o},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(u,[c],o.dtype);n.disposeIntermediateTensorInfo(c);const f=[...o.shape,r],h=yt({inputs:{x:d},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(d),h},cXe={kernelName:$y,backendName:"webgl",kernelFunc:uXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qb(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="complex64"){const o=am({inputs:{input:s},backend:n}),r=qb({inputs:{x:o},backend:n}),i=y1({inputs:{input:s},backend:n}),a=qb({inputs:{x:i},backend:n}),l=Vl({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return lm({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:n})}const dXe={kernelName:Ly,backendName:"webgl",kernelFunc:qb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const o=am({inputs:{input:s},backend:n}),r=V8({inputs:{x:o},backend:n}),i=y1({inputs:{input:s},backend:n}),a=qb({inputs:{x:i},backend:n}),l=Vl({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return lm({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:n})}const fXe={kernelName:wy,backendName:"webgl",kernelFunc:V8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hXe(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s;if(t.length===1)return _x({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const r=t[0].shape,i=t[0].dtype;t.forEach(c=>{ti(r,c.shape,"All tensors passed to stack must have matching shapes"),K(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(c=>{const d=_x({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=E8({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const pXe={kernelName:Cy,backendName:"webgl",kernelFunc:hXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gXe{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+t[c]+u[1]);const o=t.length,r=Yn(o),i=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+t[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${r} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mXe{constructor(t,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,m)=>g[0]+t[m]+g[1]);const o=t.length,r=Yn(o),i=n.map(g=>g[0]).join(","),a=n.map((g,m)=>g[0]+t[m]).join(","),l=No("rc",o),u=No("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${r} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${c}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let g=0,m=o===1?2:4;g<m;g++)p+=`
        ${f[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${r} source = rc - start;
          result[${g}] = getChannel(getX(${u.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W8=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,constantValue:i}=s;if(Ue(o.shape)===0){const u=r.map((c,d)=>c[0]+o.shape[d]+c[1]);return lm({backend:n,attrs:{shape:u,value:i,dtype:o.dtype}})}const a=je().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mXe(o.shape,r,i):new gXe(o.shape,r,i),l=[[i]];return n.runWebGLProgram(a,[o],o.dtype,l)},vXe={kernelName:xy,backendName:"webgl",kernelFunc:W8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bXe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,yXe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+g1+`
  return result;
`,wXe=ho({opSnippet:bXe,packedOpSnippet:yXe}),$Xe={kernelName:wg,backendName:"webgl",kernelFunc:wXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CXe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=[],u=un(r,o.shape);let c=u;const d=Ts(c,a);let f=o;d!=null&&(f=Ro({inputs:{x:o},backend:n,attrs:{perm:d}}),c=Rs(c.length,a),l.push(f)),fo("prod",c,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:g,outShape:m,outDtype:v}=Aje(f.shape,f.dtype,p,c);h=n.makeTensorInfo(m,v,g)}else{const[p,g]=Qs(f.shape,c),m=Ue(g),v=yt({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),b=pS(o.dtype),$=$c(v,b,"prod",n);h=yt({inputs:{x:$},backend:n,attrs:{shape:p}}),l.push(v),l.push($)}if(i){l.push(h);const p=Is(h.shape,u);h=yt({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const xXe={kernelName:Yk,backendName:"webgl",kernelFunc:CXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H8=e=>{const{backend:t,attrs:n}=e,{start:s,stop:o,step:r,dtype:i}=n,a=Dje(s,o,r,i);return t.makeTensorInfo([a.length],i,a)},kXe={kernelName:Xk,backendName:"webgl",kernelFunc:H8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SXe="return 1.0 / x;",IXe=En({opSnippet:SXe}),TXe={kernelName:$g,backendName:"webgl",kernelFunc:IXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXe=ri+`
  return (x < 0.0) ? 0.0 : x;
`,_Xe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,NXe=En({opSnippet:EXe,packedOpSnippet:_Xe}),AXe={kernelName:Cg,backendName:"webgl",kernelFunc:NXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DXe=ri+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,RXe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,OXe=En({opSnippet:DXe,packedOpSnippet:RXe}),MXe={kernelName:xg,backendName:"webgl",kernelFunc:OXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PXe{constructor(t,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let f;r?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FXe{constructor(t,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let f;r?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LXe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s,[l,u]=a,c=je().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new FXe(o.shape,l,u,r,i):new PXe(o.shape,l,u,r,i);return n.runWebGLProgram(c,[o],"float32")}const BXe={kernelName:Ty,backendName:"webgl",kernelFunc:LXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zXe{constructor(t,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=t,l=[s&&i>1?o-1:o,s&&a>1?r-1:r],u=[s&&i>1?i-1:i,s&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VXe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s,a=new zXe(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const WXe={kernelName:Qk,backendName:"webgl",kernelFunc:VXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HXe{constructor(t,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;r?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UXe{constructor(t,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;r?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jXe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s,[l,u]=a,c=je().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new UXe(o.shape,l,u,r,i):new HXe(o.shape,l,u,r,i);return n.runWebGLProgram(c,[o],o.dtype)}const GXe={kernelName:Iy,backendName:"webgl",kernelFunc:jXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KXe{constructor(t,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=t,l=[s&&i>1?o-1:o,s&&a>1?r-1:r],u=[s&&i>1?i-1:i,s&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qXe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s,a=new KXe(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const YXe={kernelName:Jk,backendName:"webgl",kernelFunc:qXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XXe{constructor(t,n){this.variableNames=["x"];const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=t,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&t[a]!==1?`${t[a]} - coords[${a}] - 1`:`coords[${a}]`,r=t.map((a,l)=>o(l)).join(","),i=Yn(s);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZXe{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=t;const o=No("rc",s),r=`${o[s-1]} + 1 < ${this.outputShape[s-1]}`,i=`${o[s-2]} + 1 < ${this.outputShape[s-2]}`,a=Yn(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${r}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${r}){
            result.g = ${u(o.slice())};
          }
          if(${i}) {
            result.b = ${c(o.slice())};
            if(${r}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function u(p){return p[s-1]="("+p[s-1]+" + 1)",f(p)}function c(p){return p[s-2]="("+p[s-2]+" + 1)",f(p)}function d(p){return p[s-1]="("+p[s-1]+" + 1)",p[s-2]="("+p[s-2]+" + 1)",f(p)}function f(p){const g=t.map((b,$)=>h($,p)),m=g.join(","),v=g.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${v}))`}function h(p,g){return n.indexOf(p)!==-1&&t[p]!==1?`${t[p]} - ${g[p]} - 1`:`${g[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JXe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dims:r}=s,i=o.shape.length,a=un(r,o.shape);if(i===0)return rr({inputs:{x:o},backend:n});const l=je().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZXe(o.shape,a):new XXe(o.shape,a);return n.runWebGLProgram(l,[o],o.dtype)}const QXe={kernelName:Ey,backendName:"webgl",kernelFunc:JXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eZe{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=t[1],o=t[2];this.outputShape=t;let r="";typeof n=="number"?r=`float outputValue = ${n.toFixed(2)};`:r=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${r}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tZe={kernelName:fS,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,{radians:o,fillValue:r,center:i}=t,a=n,l=new eZe(s.shape,r),[u,c]=aI(i,s.shape[1],s.shape[2]),d=[[u,c,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[s],s.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nZe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,sZe=En({opSnippet:nZe}),oZe={kernelName:kg,backendName:"webgl",kernelFunc:sZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rZe="return inversesqrt(x);",iZe=En({opSnippet:rZe,cpuKernelImpl:Rje}),aZe={kernelName:Sg,backendName:"webgl",kernelFunc:iZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U8{constructor(t,n,s,o,r,i,a=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const l=Yn(r.length),u=Yn(i.length);let c="";s===1?c="i":s===2&&(c="i, j");const d=`getIndices(${c})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const h=`getUpdates(${f})`,p=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${p};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZe(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o,updates:r}=t,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Bg(r,o,i),f=[d/u,u];if(d===0)return n.makeTensorInfo(i,o.dtype);const h=yt({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),p=yt({inputs:{x:r},backend:n,attrs:{shape:[l,u]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),m=new U8(l,a,h.shape.length,p.shape.length,c,f),v=n.runWebGLProgram(m,[p,h,g],p.dtype),b=yt({inputs:{x:v},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),b}const uZe={kernelName:LB,backendName:"webgl",kernelFunc:lZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cZe{constructor(t,n,s){this.variableNames=["c","a","b"],this.outputShape=n;let o,r;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)r="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<t&&l.push(`${a[c]}`);o=l.join(),r=u.join()}const i=Yn(s);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${r}));
        } else {
          setOutput(getB(${r}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dZe(e){const{inputs:t,backend:n}=e,{condition:s,t:o,e:r}=t,i=new cZe(s.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[s,o,r],kr(o.dtype,r.dtype))}const fZe={kernelName:_y,backendName:"webgl",kernelFunc:dZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hZe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Jy};
  float scale = ${Qy};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,pZe=En({opSnippet:hZe}),gZe={kernelName:Ig,backendName:"webgl",kernelFunc:pZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mZe=kf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,vZe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bZe=En({opSnippet:mZe,packedOpSnippet:vZe,cpuKernelImpl:Oje}),yZe={kernelName:Ng,backendName:"webgl",kernelFunc:bZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wZe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,$Ze=En({opSnippet:wZe}),CZe={kernelName:_g,backendName:"webgl",kernelFunc:$Ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xZe=kf+`
  return sin(x);
`,kZe=En({opSnippet:xZe}),SZe={kernelName:Tg,backendName:"webgl",kernelFunc:kZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IZe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,TZe=En({opSnippet:IZe}),EZe={kernelName:Eg,backendName:"webgl",kernelFunc:TZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ze=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,NZe=En({opSnippet:_Ze}),AZe={kernelName:Ag,backendName:"webgl",kernelFunc:NZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,paddings:i}=s;K(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((v,b)=>v*b),l=[[0,0]];l.push(...i);for(let v=1+r.length;v<o.shape.length;++v)l.push([0,0]);const u=[],c=W8({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=Ug(c.shape,r,a,!1),f=jg(d.length,r.length,!1),h=Gg(c.shape,r,a,!1),p=yt({inputs:{x:c},backend:n,attrs:{shape:d}}),g=Ro({inputs:{x:p},backend:n,attrs:{perm:f}}),m=yt({inputs:{x:g},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(g),u.forEach(v=>n.disposeIntermediateTensorInfo(v)),m},RZe={kernelName:Dy,backendName:"webgl",kernelFunc:DZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OZe(e){const{inputs:t,backend:n}=e,{indices:s,values:o,denseShape:r,defaultValue:i}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId),u=n.readSync(r.dataId),c=n.readSync(i.dataId)[0],[d,f,h,p,g]=Pje(a,s.shape,s.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,s.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([g.length],s.dtype,new Int32Array(g))]}const MZe={kernelName:eS,backendName:"webgl",kernelFunc:OZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PZe(e){const{inputs:t,backend:n}=e,{inputIndices:s,inputShape:o,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(s.dataId),l=Array.from(n.readSync(r.dataId)),[u,c,d]=Fje(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const FZe={kernelName:tS,backendName:"webgl",kernelFunc:PZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LZe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[u,c]=p8(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const BZe={kernelName:nS,backendName:"webgl",kernelFunc:LZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zZe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[u,c]=p8(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(c,s.dtype,u)}const VZe={kernelName:sS,backendName:"webgl",kernelFunc:zZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZe(e){const{inputs:t,backend:n,attrs:s}=e,{sparseIndices:o,sparseValues:r,defaultValue:i}=t,{outputShape:a}=s,{sliceRank:l,numUpdates:u,strides:c,outputSize:d}=Bg(r,o,a),f=!1,h=new U8(u,l,o.shape.length,r.shape.length,c,[d,1],f),p=n.runWebGLProgram(h,[r,o,i],r.dtype),g=yt({inputs:{x:p},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),g}const HZe={kernelName:BB,backendName:"webgl",kernelFunc:WZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{numOrSizeSplits:r,axis:i}=s,a=un(i,o.shape)[0],l=CI(o,r,a),u=o.shape.length,c=new Array(u).fill(0),d=o.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const p=Sf({inputs:{x:o},backend:n,attrs:{begin:c,size:h}});return c[a]+=f,p})}const jZe={kernelName:Ry,backendName:"webgl",kernelFunc:UZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nO="return sqrt(x);",GZe=En({opSnippet:nO,packedOpSnippet:nO,cpuKernelImpl:Lje}),KZe={kernelName:Dg,backendName:"webgl",kernelFunc:GZe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qZe="return x * x;",YZe=En({opSnippet:qZe}),XZe={kernelName:oS,backendName:"webgl",kernelFunc:YZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sO="return (a - b) * (a - b);",ZZe=ho({opSnippet:sO,packedOpSnippet:sO}),JZe={kernelName:Rg,backendName:"webgl",kernelFunc:ZZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZe({inputs:e,attrs:t,backend:n}){const{x:s}=e,o=ri+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,r=new va(s.shape,o);return n.runWebGLProgram(r,[s],s.dtype)}const eJe={kernelName:Lg,backendName:"webgl",kernelFunc:QZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tJe{constructor(t,n,s){this.variableNames=["x"],this.outputShape=s;const o=s.length,r=Yn(s.length),i=Yn(s.length);let a="";if(o===1)a="coords * strides + begin";else{let l=0;a=s.map((u,c)=>(l++,s.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${r} begin = ${r}(${t});
      ${r} strides = ${r}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nJe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=s,{finalShapeSparse:h,finalShape:p,isIdentity:g,sliceDim0:m,isSimpleSlice:v,begin:b,end:$,strides:y}=CS(o.shape,r,i,a,l,u,c,d,f);let w;if(g)w=yt({inputs:{x:o},backend:n,attrs:{shape:p}});else if(m||v){K(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const x=yS(b,$,y),k=Sf({inputs:{x:o},backend:n,attrs:{begin:b,size:x}});w=yt({inputs:{x:k},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(k)}else if(n.shouldExecuteOnCPU([o])){const k=n.readSync(o.dataId),I=gn(o.shape,o.dtype,k),S=Bje(h,I,y,b);w=n.makeTensorInfo(p,o.dtype,S.values)}else{const k=new tJe(b,y,h);w=n.runWebGLProgram(k,[o],o.dtype)}const C=yt({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),C}const sJe={kernelName:rS,backendName:"webgl",kernelFunc:nJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oJe(e){const{inputs:t,backend:n,attrs:s}=e,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=t,f=n.readSync(c.dataId),h=n.readSync(d.dataId),[p,g]=zje(f,h,o,r,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}const rJe={kernelName:iS,backendName:"webgl",kernelFunc:oJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iJe(e){const{inputs:t,backend:n,attrs:s}=e,{skipEmpty:o}=s,{input:r,delimiter:i}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId)[0],[u,c,d]=Vje(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const aJe={kernelName:aS,backendName:"webgl",kernelFunc:iJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJe(e){const{inputs:t,backend:n,attrs:s}=e,{numBuckets:o}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(r.dataId),a=Wje(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const uJe={kernelName:lS,backendName:"webgl",kernelFunc:lJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJe="return tan(x);",dJe=En({opSnippet:cJe}),fJe={kernelName:Mg,backendName:"webgl",kernelFunc:dJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hJe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,pJe=En({opSnippet:hJe}),gJe={kernelName:Pg,backendName:"webgl",kernelFunc:pJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mJe{constructor(t,n){this.variableNames=["A"];const s=new Array(t.length);for(let i=0;i<s.length;i++)s[i]=t[i]*n[i];this.outputShape=s,this.rank=s.length;const o=Yn(this.rank),r=vJe(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${r}));
      }
    `}}function vJe(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${n[o]}, ${e[o]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reps:r}=s;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),u=o.dtype==="string"?l.map(f=>Od(f)):l,c=gn(o.shape,o.dtype,u),d=Uje(c,r);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new mJe(o.shape,r);return n.runWebGLProgram(i,[o],o.dtype)}const bJe={kernelName:Fg,backendName:"webgl",kernelFunc:j8};class yJe{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class wJe{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tu(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function oO(e){let t=1;for(;t<e;)t*=2;return t}function $Je(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{k:r,sorted:i}=s,a=je().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=je().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([o])||c<a||r>l){const S=n.readSync(o.dataId),[T,_]=jje(S,u,o.dtype,r,i);return[n.makeTensorInfo(T.shape,T.dtype,T.values),n.makeTensorInfo(_.shape,_.dtype,_.values)]}if(r===0)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[o,lm({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(o):o,g=Ue(u)/c,m=yt({inputs:{x:h},attrs:{shape:[g,c]},backend:n});f&&tu(n,h);const v=oO(r),b=oO(c);let $=null;const y=()=>$===null?[m,m]:[m,$],w=(S,T,_)=>{const N=y(),O=new yJe(_),D=[[c],[$===null?1:0],[Number.NEGATIVE_INFINITY],[S],[T]],F=$;$=n.runWebGLProgram(O,N,"int32",D),tu(n,F)};for(let S=1;S<v;S*=2){const T=S*2;for(let _=S;_>=1;_/=2)w(T,_,[g,b])}for(let S=b;S>v;S/=2){const T=y(),_=new wJe([g,S/2]),O=[[c],[$===null?1:0],[v]],M=$;$=n.runWebGLProgram(_,T,"int32",O),tu(n,M);const D=v/2,F=D*2;for(let V=D;V>=1;V/=2)w(F,V,$.shape)}let C=$;$=Sf({inputs:{x:$},backend:n,attrs:{begin:0,size:[g,r]}}),tu(n,C);let x=P8({inputs:{x:m,indices:$},backend:n,attrs:{axis:1,batchDims:1}});tu(n,m);const k=u.slice(0,-1);k.push(r),C=$,$=yt({inputs:{x:$},attrs:{shape:k},backend:n}),tu(n,C);const I=x;return x=yt({inputs:{x},attrs:{shape:k},backend:n}),tu(n,I),[x,$]}const CJe={kernelName:uS,backendName:"webgl",kernelFunc:$Je};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xJe{constructor(t,n,s,o,r,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=s==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${r});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${r});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kJe(e){const{inputs:t,backend:n,attrs:s}=e,{image:o,transforms:r}=t,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=s,[c,d,f,h]=o.shape,[p,g]=u!=null?u:[d,f],m=[c,p,g,h],v=new xJe(d,f,i,a,l,m);return n.runWebGLProgram(v,[o,r],"float32")}const SJe={kernelName:cS,backendName:"webgl",kernelFunc:kJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJe(e){const{inputs:t,attrs:n,backend:s}=e,{axis:o}=n,{x:r}=t;om(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=s.readSync(r.dataId),{outputValues:a,outputShape:l,indices:u}=Gje(i,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const TJe={kernelName:dS,backendName:"webgl",kernelFunc:IJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJe(e){const{inputs:t,backend:n,attrs:s}=e,{value:o}=t;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o,a=i.shape.length,l=o.shape[r],u=new Array(a-1);let c=0;for(let g=0;g<a;g++)g!==r&&(u[c++]=i.shape[g]);const d=[],f=new Array(a).fill(0),h=i.shape.slice();h[r]=1;const p=new Array(l);for(let g=0;g<p.length;g++){f[r]=g;const m=Sf({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),v=yt({inputs:{x:m},backend:n,attrs:{shape:u}});p[g]=v,d.push(m)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),p}const _Je={kernelName:Py,backendName:"webgl",kernelFunc:EJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NJe{constructor(t,n){this.variableNames=["x","segmentIds"];const s=t.windowSize,o=t.batchSize,r=t.inSize,i=t.numSegments,a=i*Math.ceil(r/s);this.outputShape=[o,a];const l="0.0",u="sumValue",c=Math.floor(s/4)*4,d=s%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";r%s>0&&(h=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `);let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AJe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,segmentIds:r}=t,{numSegments:i}=s,a=o.shape.length,l=[];let u=0;const c=Ts([u],a);let d=o;c!=null&&(d=Ro({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(d),u=Rs(1,a)[0]);const f=NV(d.shape,u,i),h=Ue([d.shape[u]]),p=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const g=pS(o.dtype),m=(y,w,C,x,k)=>{const I=y.shape[0],S=y.shape[1],T=_V(S,k),_={windowSize:T,inSize:S,batchSize:I,numSegments:k},N=new NJe(_,w),O=n.compileAndRun(N,[y,C],x);if(l.push(O),O.shape[1]===k)return O;const M=H8({backend:n,attrs:{start:0,stop:k,step:1,dtype:"float32"}}),D=j8({inputs:{x:M},backend:n,attrs:{reps:[S/T]}});return l.push(M),l.push(D),m(O,w,D,x,k)},v=m(p,"unsortedSegmentSum",r,g,i),b=yt({inputs:{x:v},backend:n,attrs:{shape:f}});let $=b;if(c!=null){l.push(b);const y=pf(c);$=Ro({inputs:{x:$},backend:n,attrs:{perm:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),$}const DJe={kernelName:Fy,backendName:"webgl",kernelFunc:AJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RJe=[BGe,VGe,UGe,KGe,YGe,JGe,eKe,nKe,iKe,lKe,dKe,pKe,vKe,$Ke,kKe,IKe,EKe,DKe,OKe,PKe,zKe,KKe,YKe,ZKe,s9e,r9e,u9e,wGe,f9e,v9e,$9e,T9e,_9e,A9e,R9e,M9e,L9e,V9e,U9e,G9e,q9e,Z9e,Q9e,s7e,r7e,l7e,d7e,h7e,v7e,$7e,S7e,E7e,A7e,D7e,O7e,P7e,L7e,z7e,W7e,G7e,Y7e,J7e,eqe,sqe,iqe,cqe,pqe,yGe,mqe,g9e,yqe,Cqe,Sqe,CGe,_qe,Rqe,Mqe,Bqe,Wqe,Gqe,Yqe,Qqe,sYe,iYe,lYe,fYe,pYe,mYe,wYe,CYe,kYe,IYe,EYe,DYe,PYe,zYe,qYe,TGe,JYe,tXe,oXe,aXe,QKe,cXe,fXe,pXe,vXe,$Xe,kGe,xXe,kXe,e9e,UYe,TXe,AXe,MXe,_Ge,BXe,WXe,GXe,YXe,QXe,tZe,oZe,aZe,uZe,fZe,gZe,yZe,CZe,SZe,EZe,jKe,GYe,AZe,RZe,MZe,FZe,BZe,VZe,HZe,jZe,KZe,XZe,JZe,eJe,sJe,rJe,aJe,uJe,jYe,PGe,fJe,gJe,bJe,CJe,SJe,FGe,TJe,_Je,DJe,dXe];for(const e of RJe)VB(e);/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var G8={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,t){(function(n,s){e.exports=s()})(On,function(){for(var n=function(E,P,z){return P===void 0&&(P=0),z===void 0&&(z=1),E<P?P:E>z?z:E},s=n,o=function(E){E._clipped=!1,E._unclipped=E.slice(0);for(var P=0;P<=3;P++)P<3?((E[P]<0||E[P]>255)&&(E._clipped=!0),E[P]=s(E[P],0,255)):P===3&&(E[P]=s(E[P],0,1));return E},r={},i=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<a.length;i+=1){var l=a[i];r["[object "+l+"]"]=l.toLowerCase()}var u=function(E){return r[Object.prototype.toString.call(E)]||"object"},c=u,d=function(E,P){return P===void 0&&(P=null),E.length>=3?Array.prototype.slice.call(E):c(E[0])=="object"&&P?P.split("").filter(function(z){return E[0][z]!==void 0}).map(function(z){return E[0][z]}):E[0]},f=u,h=function(E){if(E.length<2)return null;var P=E.length-1;return f(E[P])=="string"?E[P].toLowerCase():null},p=Math.PI,g={clip_rgb:o,limit:n,type:u,unpack:d,last:h,PI:p,TWOPI:p*2,PITHIRD:p/3,DEG2RAD:p/180,RAD2DEG:180/p},m={format:{},autodetect:[]},v=g.last,b=g.clip_rgb,$=g.type,y=m,w=function(){for(var P=[],z=arguments.length;z--;)P[z]=arguments[z];var ee=this;if($(P[0])==="object"&&P[0].constructor&&P[0].constructor===this.constructor)return P[0];var pe=v(P),$e=!1;if(!pe){$e=!0,y.sorted||(y.autodetect=y.autodetect.sort(function(tt,bt){return bt.p-tt.p}),y.sorted=!0);for(var ue=0,Ee=y.autodetect;ue<Ee.length;ue+=1){var Ae=Ee[ue];if(pe=Ae.test.apply(Ae,P),pe)break}}if(y.format[pe]){var qe=y.format[pe].apply(null,$e?P:P.slice(0,-1));ee._rgb=b(qe)}else throw new Error("unknown format: "+P);ee._rgb.length===3&&ee._rgb.push(1)};w.prototype.toString=function(){return $(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var C=w,x=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(x.Color,[null].concat(E)))};x.Color=C,x.version="2.4.2";var k=x,I=g.unpack,S=Math.max,T=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=I(E,"rgb"),ee=z[0],pe=z[1],$e=z[2];ee=ee/255,pe=pe/255,$e=$e/255;var ue=1-S(ee,S(pe,$e)),Ee=ue<1?1/(1-ue):0,Ae=(1-ee-ue)*Ee,qe=(1-pe-ue)*Ee,tt=(1-$e-ue)*Ee;return[Ae,qe,tt,ue]},_=T,N=g.unpack,O=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];E=N(E,"cmyk");var z=E[0],ee=E[1],pe=E[2],$e=E[3],ue=E.length>4?E[4]:1;return $e===1?[0,0,0,ue]:[z>=1?0:255*(1-z)*(1-$e),ee>=1?0:255*(1-ee)*(1-$e),pe>=1?0:255*(1-pe)*(1-$e),ue]},M=O,D=k,F=C,V=m,U=g.unpack,ne=g.type,be=_;F.prototype.cmyk=function(){return be(this._rgb)},D.cmyk=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(F,[null].concat(E,["cmyk"])))},V.format.cmyk=M,V.autodetect.push({p:2,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=U(E,"cmyk"),ne(E)==="array"&&E.length===4)return"cmyk"}});var te=g.unpack,he=g.last,oe=function(E){return Math.round(E*100)/100},G=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=te(E,"hsla"),ee=he(E)||"lsa";return z[0]=oe(z[0]||0),z[1]=oe(z[1]*100)+"%",z[2]=oe(z[2]*100)+"%",ee==="hsla"||z.length>3&&z[3]<1?(z[3]=z.length>3?z[3]:1,ee="hsla"):z.length=3,ee+"("+z.join(",")+")"},Y=G,X=g.unpack,ae=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];E=X(E,"rgba");var z=E[0],ee=E[1],pe=E[2];z/=255,ee/=255,pe/=255;var $e=Math.min(z,ee,pe),ue=Math.max(z,ee,pe),Ee=(ue+$e)/2,Ae,qe;return ue===$e?(Ae=0,qe=Number.NaN):Ae=Ee<.5?(ue-$e)/(ue+$e):(ue-$e)/(2-ue-$e),z==ue?qe=(ee-pe)/(ue-$e):ee==ue?qe=2+(pe-z)/(ue-$e):pe==ue&&(qe=4+(z-ee)/(ue-$e)),qe*=60,qe<0&&(qe+=360),E.length>3&&E[3]!==void 0?[qe,Ae,Ee,E[3]]:[qe,Ae,Ee]},Se=ae,Le=g.unpack,Be=g.last,Fe=Y,j=Se,Q=Math.round,H=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=Le(E,"rgba"),ee=Be(E)||"rgb";return ee.substr(0,3)=="hsl"?Fe(j(z),ee):(z[0]=Q(z[0]),z[1]=Q(z[1]),z[2]=Q(z[2]),(ee==="rgba"||z.length>3&&z[3]<1)&&(z[3]=z.length>3?z[3]:1,ee="rgba"),ee+"("+z.slice(0,ee==="rgb"?3:4).join(",")+")")},se=H,we=g.unpack,J=Math.round,_e=function(){for(var E,P=[],z=arguments.length;z--;)P[z]=arguments[z];P=we(P,"hsl");var ee=P[0],pe=P[1],$e=P[2],ue,Ee,Ae;if(pe===0)ue=Ee=Ae=$e*255;else{var qe=[0,0,0],tt=[0,0,0],bt=$e<.5?$e*(1+pe):$e+pe-$e*pe,ot=2*$e-bt,kt=ee/360;qe[0]=kt+1/3,qe[1]=kt,qe[2]=kt-1/3;for(var xt=0;xt<3;xt++)qe[xt]<0&&(qe[xt]+=1),qe[xt]>1&&(qe[xt]-=1),6*qe[xt]<1?tt[xt]=ot+(bt-ot)*6*qe[xt]:2*qe[xt]<1?tt[xt]=bt:3*qe[xt]<2?tt[xt]=ot+(bt-ot)*(2/3-qe[xt])*6:tt[xt]=ot;E=[J(tt[0]*255),J(tt[1]*255),J(tt[2]*255)],ue=E[0],Ee=E[1],Ae=E[2]}return P.length>3?[ue,Ee,Ae,P[3]]:[ue,Ee,Ae,1]},Ie=_e,fe=Ie,Te=m,rt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Xe=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,lt=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,vt=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Ye=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,de=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,De=Math.round,Ge=function(E){E=E.toLowerCase().trim();var P;if(Te.format.named)try{return Te.format.named(E)}catch{}if(P=E.match(rt)){for(var z=P.slice(1,4),ee=0;ee<3;ee++)z[ee]=+z[ee];return z[3]=1,z}if(P=E.match(Xe)){for(var pe=P.slice(1,5),$e=0;$e<4;$e++)pe[$e]=+pe[$e];return pe}if(P=E.match(lt)){for(var ue=P.slice(1,4),Ee=0;Ee<3;Ee++)ue[Ee]=De(ue[Ee]*2.55);return ue[3]=1,ue}if(P=E.match(vt)){for(var Ae=P.slice(1,5),qe=0;qe<3;qe++)Ae[qe]=De(Ae[qe]*2.55);return Ae[3]=+Ae[3],Ae}if(P=E.match(Ye)){var tt=P.slice(1,4);tt[1]*=.01,tt[2]*=.01;var bt=fe(tt);return bt[3]=1,bt}if(P=E.match(de)){var ot=P.slice(1,4);ot[1]*=.01,ot[2]*=.01;var kt=fe(ot);return kt[3]=+P[4],kt}};Ge.test=function(E){return rt.test(E)||Xe.test(E)||lt.test(E)||vt.test(E)||Ye.test(E)||de.test(E)};var Ne=Ge,ct=k,wt=C,on=m,cn=g.type,Kt=se,Ln=Ne;wt.prototype.css=function(E){return Kt(this._rgb,E)},ct.css=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(wt,[null].concat(E,["css"])))},on.format.css=Ln,on.autodetect.push({p:5,test:function(E){for(var P=[],z=arguments.length-1;z-- >0;)P[z]=arguments[z+1];if(!P.length&&cn(E)==="string"&&Ln.test(E))return"css"}});var ur=C,ii=k,ze=m,pt=g.unpack;ze.format.gl=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=pt(E,"rgba");return z[0]*=255,z[1]*=255,z[2]*=255,z},ii.gl=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(ur,[null].concat(E,["gl"])))},ur.prototype.gl=function(){var E=this._rgb;return[E[0]/255,E[1]/255,E[2]/255,E[3]]};var Jt=g.unpack,cs=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=Jt(E,"rgb"),ee=z[0],pe=z[1],$e=z[2],ue=Math.min(ee,pe,$e),Ee=Math.max(ee,pe,$e),Ae=Ee-ue,qe=Ae*100/255,tt=ue/(255-Ae)*100,bt;return Ae===0?bt=Number.NaN:(ee===Ee&&(bt=(pe-$e)/Ae),pe===Ee&&(bt=2+($e-ee)/Ae),$e===Ee&&(bt=4+(ee-pe)/Ae),bt*=60,bt<0&&(bt+=360)),[bt,qe,tt]},ra=cs,Er=g.unpack,Tc=Math.floor,PU=function(){for(var E,P,z,ee,pe,$e,ue=[],Ee=arguments.length;Ee--;)ue[Ee]=arguments[Ee];ue=Er(ue,"hcg");var Ae=ue[0],qe=ue[1],tt=ue[2],bt,ot,kt;tt=tt*255;var xt=qe*255;if(qe===0)bt=ot=kt=tt;else{Ae===360&&(Ae=0),Ae>360&&(Ae-=360),Ae<0&&(Ae+=360),Ae/=60;var dn=Tc(Ae),vn=Ae-dn,_n=tt*(1-qe),Pn=_n+xt*(1-vn),po=_n+xt*vn,no=_n+xt;switch(dn){case 0:E=[no,po,_n],bt=E[0],ot=E[1],kt=E[2];break;case 1:P=[Pn,no,_n],bt=P[0],ot=P[1],kt=P[2];break;case 2:z=[_n,no,po],bt=z[0],ot=z[1],kt=z[2];break;case 3:ee=[_n,Pn,no],bt=ee[0],ot=ee[1],kt=ee[2];break;case 4:pe=[po,_n,no],bt=pe[0],ot=pe[1],kt=pe[2];break;case 5:$e=[no,_n,Pn],bt=$e[0],ot=$e[1],kt=$e[2];break}}return[bt,ot,kt,ue.length>3?ue[3]:1]},FU=PU,LU=g.unpack,BU=g.type,zU=k,XT=C,ZT=m,VU=ra;XT.prototype.hcg=function(){return VU(this._rgb)},zU.hcg=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(XT,[null].concat(E,["hcg"])))},ZT.format.hcg=FU,ZT.autodetect.push({p:1,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=LU(E,"hcg"),BU(E)==="array"&&E.length===3)return"hcg"}});var WU=g.unpack,HU=g.last,$m=Math.round,UU=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=WU(E,"rgba"),ee=z[0],pe=z[1],$e=z[2],ue=z[3],Ee=HU(E)||"auto";ue===void 0&&(ue=1),Ee==="auto"&&(Ee=ue<1?"rgba":"rgb"),ee=$m(ee),pe=$m(pe),$e=$m($e);var Ae=ee<<16|pe<<8|$e,qe="000000"+Ae.toString(16);qe=qe.substr(qe.length-6);var tt="0"+$m(ue*255).toString(16);switch(tt=tt.substr(tt.length-2),Ee.toLowerCase()){case"rgba":return"#"+qe+tt;case"argb":return"#"+tt+qe;default:return"#"+qe}},JT=UU,jU=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,GU=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,KU=function(E){if(E.match(jU)){(E.length===4||E.length===7)&&(E=E.substr(1)),E.length===3&&(E=E.split(""),E=E[0]+E[0]+E[1]+E[1]+E[2]+E[2]);var P=parseInt(E,16),z=P>>16,ee=P>>8&255,pe=P&255;return[z,ee,pe,1]}if(E.match(GU)){(E.length===5||E.length===9)&&(E=E.substr(1)),E.length===4&&(E=E.split(""),E=E[0]+E[0]+E[1]+E[1]+E[2]+E[2]+E[3]+E[3]);var $e=parseInt(E,16),ue=$e>>24&255,Ee=$e>>16&255,Ae=$e>>8&255,qe=Math.round(($e&255)/255*100)/100;return[ue,Ee,Ae,qe]}throw new Error("unknown hex color: "+E)},QT=KU,qU=k,eE=C,YU=g.type,tE=m,XU=JT;eE.prototype.hex=function(E){return XU(this._rgb,E)},qU.hex=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(eE,[null].concat(E,["hex"])))},tE.format.hex=QT,tE.autodetect.push({p:4,test:function(E){for(var P=[],z=arguments.length-1;z-- >0;)P[z]=arguments[z+1];if(!P.length&&YU(E)==="string"&&[3,4,5,6,7,8,9].indexOf(E.length)>=0)return"hex"}});var ZU=g.unpack,nE=g.TWOPI,JU=Math.min,QU=Math.sqrt,ej=Math.acos,tj=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=ZU(E,"rgb"),ee=z[0],pe=z[1],$e=z[2];ee/=255,pe/=255,$e/=255;var ue,Ee=JU(ee,pe,$e),Ae=(ee+pe+$e)/3,qe=Ae>0?1-Ee/Ae:0;return qe===0?ue=NaN:(ue=(ee-pe+(ee-$e))/2,ue/=QU((ee-pe)*(ee-pe)+(ee-$e)*(pe-$e)),ue=ej(ue),$e>pe&&(ue=nE-ue),ue/=nE),[ue*360,qe,Ae]},nj=tj,sj=g.unpack,W1=g.limit,Ec=g.TWOPI,H1=g.PITHIRD,_c=Math.cos,oj=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];E=sj(E,"hsi");var z=E[0],ee=E[1],pe=E[2],$e,ue,Ee;return isNaN(z)&&(z=0),isNaN(ee)&&(ee=0),z>360&&(z-=360),z<0&&(z+=360),z/=360,z<1/3?(Ee=(1-ee)/3,$e=(1+ee*_c(Ec*z)/_c(H1-Ec*z))/3,ue=1-(Ee+$e)):z<2/3?(z-=1/3,$e=(1-ee)/3,ue=(1+ee*_c(Ec*z)/_c(H1-Ec*z))/3,Ee=1-($e+ue)):(z-=2/3,ue=(1-ee)/3,Ee=(1+ee*_c(Ec*z)/_c(H1-Ec*z))/3,$e=1-(ue+Ee)),$e=W1(pe*$e*3),ue=W1(pe*ue*3),Ee=W1(pe*Ee*3),[$e*255,ue*255,Ee*255,E.length>3?E[3]:1]},rj=oj,ij=g.unpack,aj=g.type,lj=k,sE=C,oE=m,uj=nj;sE.prototype.hsi=function(){return uj(this._rgb)},lj.hsi=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(sE,[null].concat(E,["hsi"])))},oE.format.hsi=rj,oE.autodetect.push({p:2,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=ij(E,"hsi"),aj(E)==="array"&&E.length===3)return"hsi"}});var cj=g.unpack,dj=g.type,fj=k,rE=C,iE=m,hj=Se;rE.prototype.hsl=function(){return hj(this._rgb)},fj.hsl=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(rE,[null].concat(E,["hsl"])))},iE.format.hsl=Ie,iE.autodetect.push({p:2,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=cj(E,"hsl"),dj(E)==="array"&&E.length===3)return"hsl"}});var pj=g.unpack,gj=Math.min,mj=Math.max,vj=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];E=pj(E,"rgb");var z=E[0],ee=E[1],pe=E[2],$e=gj(z,ee,pe),ue=mj(z,ee,pe),Ee=ue-$e,Ae,qe,tt;return tt=ue/255,ue===0?(Ae=Number.NaN,qe=0):(qe=Ee/ue,z===ue&&(Ae=(ee-pe)/Ee),ee===ue&&(Ae=2+(pe-z)/Ee),pe===ue&&(Ae=4+(z-ee)/Ee),Ae*=60,Ae<0&&(Ae+=360)),[Ae,qe,tt]},bj=vj,yj=g.unpack,wj=Math.floor,$j=function(){for(var E,P,z,ee,pe,$e,ue=[],Ee=arguments.length;Ee--;)ue[Ee]=arguments[Ee];ue=yj(ue,"hsv");var Ae=ue[0],qe=ue[1],tt=ue[2],bt,ot,kt;if(tt*=255,qe===0)bt=ot=kt=tt;else{Ae===360&&(Ae=0),Ae>360&&(Ae-=360),Ae<0&&(Ae+=360),Ae/=60;var xt=wj(Ae),dn=Ae-xt,vn=tt*(1-qe),_n=tt*(1-qe*dn),Pn=tt*(1-qe*(1-dn));switch(xt){case 0:E=[tt,Pn,vn],bt=E[0],ot=E[1],kt=E[2];break;case 1:P=[_n,tt,vn],bt=P[0],ot=P[1],kt=P[2];break;case 2:z=[vn,tt,Pn],bt=z[0],ot=z[1],kt=z[2];break;case 3:ee=[vn,_n,tt],bt=ee[0],ot=ee[1],kt=ee[2];break;case 4:pe=[Pn,vn,tt],bt=pe[0],ot=pe[1],kt=pe[2];break;case 5:$e=[tt,vn,_n],bt=$e[0],ot=$e[1],kt=$e[2];break}}return[bt,ot,kt,ue.length>3?ue[3]:1]},Cj=$j,xj=g.unpack,kj=g.type,Sj=k,aE=C,lE=m,Ij=bj;aE.prototype.hsv=function(){return Ij(this._rgb)},Sj.hsv=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(aE,[null].concat(E,["hsv"])))},lE.format.hsv=Cj,lE.autodetect.push({p:2,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=xj(E,"hsv"),kj(E)==="array"&&E.length===3)return"hsv"}});var Cm={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Nc=Cm,Tj=g.unpack,uE=Math.pow,Ej=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=Tj(E,"rgb"),ee=z[0],pe=z[1],$e=z[2],ue=_j(ee,pe,$e),Ee=ue[0],Ae=ue[1],qe=ue[2],tt=116*Ae-16;return[tt<0?0:tt,500*(Ee-Ae),200*(Ae-qe)]},U1=function(E){return(E/=255)<=.04045?E/12.92:uE((E+.055)/1.055,2.4)},j1=function(E){return E>Nc.t3?uE(E,1/3):E/Nc.t2+Nc.t0},_j=function(E,P,z){E=U1(E),P=U1(P),z=U1(z);var ee=j1((.4124564*E+.3575761*P+.1804375*z)/Nc.Xn),pe=j1((.2126729*E+.7151522*P+.072175*z)/Nc.Yn),$e=j1((.0193339*E+.119192*P+.9503041*z)/Nc.Zn);return[ee,pe,$e]},cE=Ej,Ac=Cm,Nj=g.unpack,Aj=Math.pow,Dj=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];E=Nj(E,"lab");var z=E[0],ee=E[1],pe=E[2],$e,ue,Ee,Ae,qe,tt;return ue=(z+16)/116,$e=isNaN(ee)?ue:ue+ee/500,Ee=isNaN(pe)?ue:ue-pe/200,ue=Ac.Yn*K1(ue),$e=Ac.Xn*K1($e),Ee=Ac.Zn*K1(Ee),Ae=G1(3.2404542*$e-1.5371385*ue-.4985314*Ee),qe=G1(-.969266*$e+1.8760108*ue+.041556*Ee),tt=G1(.0556434*$e-.2040259*ue+1.0572252*Ee),[Ae,qe,tt,E.length>3?E[3]:1]},G1=function(E){return 255*(E<=.00304?12.92*E:1.055*Aj(E,1/2.4)-.055)},K1=function(E){return E>Ac.t1?E*E*E:Ac.t2*(E-Ac.t0)},dE=Dj,Rj=g.unpack,Oj=g.type,Mj=k,fE=C,hE=m,Pj=cE;fE.prototype.lab=function(){return Pj(this._rgb)},Mj.lab=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(fE,[null].concat(E,["lab"])))},hE.format.lab=dE,hE.autodetect.push({p:2,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=Rj(E,"lab"),Oj(E)==="array"&&E.length===3)return"lab"}});var Fj=g.unpack,Lj=g.RAD2DEG,Bj=Math.sqrt,zj=Math.atan2,Vj=Math.round,Wj=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=Fj(E,"lab"),ee=z[0],pe=z[1],$e=z[2],ue=Bj(pe*pe+$e*$e),Ee=(zj($e,pe)*Lj+360)%360;return Vj(ue*1e4)===0&&(Ee=Number.NaN),[ee,ue,Ee]},pE=Wj,Hj=g.unpack,Uj=cE,jj=pE,Gj=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=Hj(E,"rgb"),ee=z[0],pe=z[1],$e=z[2],ue=Uj(ee,pe,$e),Ee=ue[0],Ae=ue[1],qe=ue[2];return jj(Ee,Ae,qe)},Kj=Gj,qj=g.unpack,Yj=g.DEG2RAD,Xj=Math.sin,Zj=Math.cos,Jj=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=qj(E,"lch"),ee=z[0],pe=z[1],$e=z[2];return isNaN($e)&&($e=0),$e=$e*Yj,[ee,Zj($e)*pe,Xj($e)*pe]},gE=Jj,Qj=g.unpack,eG=gE,tG=dE,nG=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];E=Qj(E,"lch");var z=E[0],ee=E[1],pe=E[2],$e=eG(z,ee,pe),ue=$e[0],Ee=$e[1],Ae=$e[2],qe=tG(ue,Ee,Ae),tt=qe[0],bt=qe[1],ot=qe[2];return[tt,bt,ot,E.length>3?E[3]:1]},mE=nG,sG=g.unpack,oG=mE,rG=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=sG(E,"hcl").reverse();return oG.apply(void 0,z)},iG=rG,aG=g.unpack,lG=g.type,vE=k,xm=C,q1=m,bE=Kj;xm.prototype.lch=function(){return bE(this._rgb)},xm.prototype.hcl=function(){return bE(this._rgb).reverse()},vE.lch=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(xm,[null].concat(E,["lch"])))},vE.hcl=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(xm,[null].concat(E,["hcl"])))},q1.format.lch=mE,q1.format.hcl=iG,["lch","hcl"].forEach(function(E){return q1.autodetect.push({p:2,test:function(){for(var P=[],z=arguments.length;z--;)P[z]=arguments[z];if(P=aG(P,E),lG(P)==="array"&&P.length===3)return E}})});var uG={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},yE=uG,cG=C,wE=m,dG=g.type,_f=yE,fG=QT,hG=JT;cG.prototype.name=function(){for(var E=hG(this._rgb,"rgb"),P=0,z=Object.keys(_f);P<z.length;P+=1){var ee=z[P];if(_f[ee]===E)return ee.toLowerCase()}return E},wE.format.named=function(E){if(E=E.toLowerCase(),_f[E])return fG(_f[E]);throw new Error("unknown color name: "+E)},wE.autodetect.push({p:5,test:function(E){for(var P=[],z=arguments.length-1;z-- >0;)P[z]=arguments[z+1];if(!P.length&&dG(E)==="string"&&_f[E.toLowerCase()])return"named"}});var pG=g.unpack,gG=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=pG(E,"rgb"),ee=z[0],pe=z[1],$e=z[2];return(ee<<16)+(pe<<8)+$e},mG=gG,vG=g.type,bG=function(E){if(vG(E)=="number"&&E>=0&&E<=16777215){var P=E>>16,z=E>>8&255,ee=E&255;return[P,z,ee,1]}throw new Error("unknown num color: "+E)},yG=bG,wG=k,$E=C,CE=m,$G=g.type,CG=mG;$E.prototype.num=function(){return CG(this._rgb)},wG.num=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply($E,[null].concat(E,["num"])))},CE.format.num=yG,CE.autodetect.push({p:5,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E.length===1&&$G(E[0])==="number"&&E[0]>=0&&E[0]<=16777215)return"num"}});var xG=k,Y1=C,xE=m,kE=g.unpack,SE=g.type,IE=Math.round;Y1.prototype.rgb=function(E){return E===void 0&&(E=!0),E===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(IE)},Y1.prototype.rgba=function(E){return E===void 0&&(E=!0),this._rgb.slice(0,4).map(function(P,z){return z<3?E===!1?P:IE(P):P})},xG.rgb=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(Y1,[null].concat(E,["rgb"])))},xE.format.rgb=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=kE(E,"rgba");return z[3]===void 0&&(z[3]=1),z},xE.autodetect.push({p:3,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=kE(E,"rgba"),SE(E)==="array"&&(E.length===3||E.length===4&&SE(E[3])=="number"&&E[3]>=0&&E[3]<=1))return"rgb"}});var km=Math.log,kG=function(E){var P=E/100,z,ee,pe;return P<66?(z=255,ee=P<6?0:-155.25485562709179-.44596950469579133*(ee=P-2)+104.49216199393888*km(ee),pe=P<20?0:-254.76935184120902+.8274096064007395*(pe=P-10)+115.67994401066147*km(pe)):(z=351.97690566805693+.114206453784165*(z=P-55)-40.25366309332127*km(z),ee=325.4494125711974+.07943456536662342*(ee=P-50)-28.0852963507957*km(ee),pe=255),[z,ee,pe,1]},TE=kG,SG=TE,IG=g.unpack,TG=Math.round,EG=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];for(var z=IG(E,"rgb"),ee=z[0],pe=z[2],$e=1e3,ue=4e4,Ee=.4,Ae;ue-$e>Ee;){Ae=(ue+$e)*.5;var qe=SG(Ae);qe[2]/qe[0]>=pe/ee?ue=Ae:$e=Ae}return TG(Ae)},_G=EG,X1=k,Sm=C,Z1=m,NG=_G;Sm.prototype.temp=Sm.prototype.kelvin=Sm.prototype.temperature=function(){return NG(this._rgb)},X1.temp=X1.kelvin=X1.temperature=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(Sm,[null].concat(E,["temp"])))},Z1.format.temp=Z1.format.kelvin=Z1.format.temperature=TE;var AG=g.unpack,J1=Math.cbrt,DG=Math.pow,RG=Math.sign,OG=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=AG(E,"rgb"),ee=z[0],pe=z[1],$e=z[2],ue=[Q1(ee/255),Q1(pe/255),Q1($e/255)],Ee=ue[0],Ae=ue[1],qe=ue[2],tt=J1(.4122214708*Ee+.5363325363*Ae+.0514459929*qe),bt=J1(.2119034982*Ee+.6806995451*Ae+.1073969566*qe),ot=J1(.0883024619*Ee+.2817188376*Ae+.6299787005*qe);return[.2104542553*tt+.793617785*bt-.0040720468*ot,1.9779984951*tt-2.428592205*bt+.4505937099*ot,.0259040371*tt+.7827717662*bt-.808675766*ot]},EE=OG;function Q1(E){var P=Math.abs(E);return P<.04045?E/12.92:(RG(E)||1)*DG((P+.055)/1.055,2.4)}var MG=g.unpack,Im=Math.pow,PG=Math.sign,FG=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];E=MG(E,"lab");var z=E[0],ee=E[1],pe=E[2],$e=Im(z+.3963377774*ee+.2158037573*pe,3),ue=Im(z-.1055613458*ee-.0638541728*pe,3),Ee=Im(z-.0894841775*ee-1.291485548*pe,3);return[255*ew(4.0767416621*$e-3.3077115913*ue+.2309699292*Ee),255*ew(-1.2684380046*$e+2.6097574011*ue-.3413193965*Ee),255*ew(-.0041960863*$e-.7034186147*ue+1.707614701*Ee),E.length>3?E[3]:1]},_E=FG;function ew(E){var P=Math.abs(E);return P>.0031308?(PG(E)||1)*(1.055*Im(P,1/2.4)-.055):E*12.92}var LG=g.unpack,BG=g.type,zG=k,NE=C,AE=m,VG=EE;NE.prototype.oklab=function(){return VG(this._rgb)},zG.oklab=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(NE,[null].concat(E,["oklab"])))},AE.format.oklab=_E,AE.autodetect.push({p:3,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=LG(E,"oklab"),BG(E)==="array"&&E.length===3)return"oklab"}});var WG=g.unpack,HG=EE,UG=pE,jG=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];var z=WG(E,"rgb"),ee=z[0],pe=z[1],$e=z[2],ue=HG(ee,pe,$e),Ee=ue[0],Ae=ue[1],qe=ue[2];return UG(Ee,Ae,qe)},GG=jG,KG=g.unpack,qG=gE,YG=_E,XG=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];E=KG(E,"lch");var z=E[0],ee=E[1],pe=E[2],$e=qG(z,ee,pe),ue=$e[0],Ee=$e[1],Ae=$e[2],qe=YG(ue,Ee,Ae),tt=qe[0],bt=qe[1],ot=qe[2];return[tt,bt,ot,E.length>3?E[3]:1]},ZG=XG,JG=g.unpack,QG=g.type,eK=k,DE=C,RE=m,tK=GG;DE.prototype.oklch=function(){return tK(this._rgb)},eK.oklch=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return new(Function.prototype.bind.apply(DE,[null].concat(E,["oklch"])))},RE.format.oklch=ZG,RE.autodetect.push({p:3,test:function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];if(E=JG(E,"oklch"),QG(E)==="array"&&E.length===3)return"oklch"}});var OE=C,nK=g.type;OE.prototype.alpha=function(E,P){return P===void 0&&(P=!1),E!==void 0&&nK(E)==="number"?P?(this._rgb[3]=E,this):new OE([this._rgb[0],this._rgb[1],this._rgb[2],E],"rgb"):this._rgb[3]};var sK=C;sK.prototype.clipped=function(){return this._rgb._clipped||!1};var jl=C,oK=Cm;jl.prototype.darken=function(E){E===void 0&&(E=1);var P=this,z=P.lab();return z[0]-=oK.Kn*E,new jl(z,"lab").alpha(P.alpha(),!0)},jl.prototype.brighten=function(E){return E===void 0&&(E=1),this.darken(-E)},jl.prototype.darker=jl.prototype.darken,jl.prototype.brighter=jl.prototype.brighten;var rK=C;rK.prototype.get=function(E){var P=E.split("."),z=P[0],ee=P[1],pe=this[z]();if(ee){var $e=z.indexOf(ee)-(z.substr(0,2)==="ok"?2:0);if($e>-1)return pe[$e];throw new Error("unknown channel "+ee+" in mode "+z)}else return pe};var Dc=C,iK=g.type,aK=Math.pow,lK=1e-7,uK=20;Dc.prototype.luminance=function(E){if(E!==void 0&&iK(E)==="number"){if(E===0)return new Dc([0,0,0,this._rgb[3]],"rgb");if(E===1)return new Dc([255,255,255,this._rgb[3]],"rgb");var P=this.luminance(),z="rgb",ee=uK,pe=function(ue,Ee){var Ae=ue.interpolate(Ee,.5,z),qe=Ae.luminance();return Math.abs(E-qe)<lK||!ee--?Ae:qe>E?pe(ue,Ae):pe(Ae,Ee)},$e=(P>E?pe(new Dc([0,0,0]),this):pe(this,new Dc([255,255,255]))).rgb();return new Dc($e.concat([this._rgb[3]]))}return cK.apply(void 0,this._rgb.slice(0,3))};var cK=function(E,P,z){return E=tw(E),P=tw(P),z=tw(z),.2126*E+.7152*P+.0722*z},tw=function(E){return E/=255,E<=.03928?E/12.92:aK((E+.055)/1.055,2.4)},cr={},ME=C,PE=g.type,Tm=cr,FE=function(E,P,z){z===void 0&&(z=.5);for(var ee=[],pe=arguments.length-3;pe-- >0;)ee[pe]=arguments[pe+3];var $e=ee[0]||"lrgb";if(!Tm[$e]&&!ee.length&&($e=Object.keys(Tm)[0]),!Tm[$e])throw new Error("interpolation mode "+$e+" is not defined");return PE(E)!=="object"&&(E=new ME(E)),PE(P)!=="object"&&(P=new ME(P)),Tm[$e](E,P,z).alpha(E.alpha()+z*(P.alpha()-E.alpha()))},LE=C,dK=FE;LE.prototype.mix=LE.prototype.interpolate=function(E,P){P===void 0&&(P=.5);for(var z=[],ee=arguments.length-2;ee-- >0;)z[ee]=arguments[ee+2];return dK.apply(void 0,[this,E,P].concat(z))};var BE=C;BE.prototype.premultiply=function(E){E===void 0&&(E=!1);var P=this._rgb,z=P[3];return E?(this._rgb=[P[0]*z,P[1]*z,P[2]*z,z],this):new BE([P[0]*z,P[1]*z,P[2]*z,z],"rgb")};var nw=C,fK=Cm;nw.prototype.saturate=function(E){E===void 0&&(E=1);var P=this,z=P.lch();return z[1]+=fK.Kn*E,z[1]<0&&(z[1]=0),new nw(z,"lch").alpha(P.alpha(),!0)},nw.prototype.desaturate=function(E){return E===void 0&&(E=1),this.saturate(-E)};var zE=C,VE=g.type;zE.prototype.set=function(E,P,z){z===void 0&&(z=!1);var ee=E.split("."),pe=ee[0],$e=ee[1],ue=this[pe]();if($e){var Ee=pe.indexOf($e)-(pe.substr(0,2)==="ok"?2:0);if(Ee>-1){if(VE(P)=="string")switch(P.charAt(0)){case"+":ue[Ee]+=+P;break;case"-":ue[Ee]+=+P;break;case"*":ue[Ee]*=+P.substr(1);break;case"/":ue[Ee]/=+P.substr(1);break;default:ue[Ee]=+P}else if(VE(P)==="number")ue[Ee]=P;else throw new Error("unsupported value for Color.set");var Ae=new zE(ue,pe);return z?(this._rgb=Ae._rgb,this):Ae}throw new Error("unknown channel "+$e+" in mode "+pe)}else return ue};var hK=C,pK=function(E,P,z){var ee=E._rgb,pe=P._rgb;return new hK(ee[0]+z*(pe[0]-ee[0]),ee[1]+z*(pe[1]-ee[1]),ee[2]+z*(pe[2]-ee[2]),"rgb")};cr.rgb=pK;var gK=C,sw=Math.sqrt,Rc=Math.pow,mK=function(E,P,z){var ee=E._rgb,pe=ee[0],$e=ee[1],ue=ee[2],Ee=P._rgb,Ae=Ee[0],qe=Ee[1],tt=Ee[2];return new gK(sw(Rc(pe,2)*(1-z)+Rc(Ae,2)*z),sw(Rc($e,2)*(1-z)+Rc(qe,2)*z),sw(Rc(ue,2)*(1-z)+Rc(tt,2)*z),"rgb")};cr.lrgb=mK;var vK=C,bK=function(E,P,z){var ee=E.lab(),pe=P.lab();return new vK(ee[0]+z*(pe[0]-ee[0]),ee[1]+z*(pe[1]-ee[1]),ee[2]+z*(pe[2]-ee[2]),"lab")};cr.lab=bK;var WE=C,Oc=function(E,P,z,ee){var pe,$e,ue,Ee;ee==="hsl"?(ue=E.hsl(),Ee=P.hsl()):ee==="hsv"?(ue=E.hsv(),Ee=P.hsv()):ee==="hcg"?(ue=E.hcg(),Ee=P.hcg()):ee==="hsi"?(ue=E.hsi(),Ee=P.hsi()):ee==="lch"||ee==="hcl"?(ee="hcl",ue=E.hcl(),Ee=P.hcl()):ee==="oklch"&&(ue=E.oklch().reverse(),Ee=P.oklch().reverse());var Ae,qe,tt,bt,ot,kt;(ee.substr(0,1)==="h"||ee==="oklch")&&(pe=ue,Ae=pe[0],tt=pe[1],ot=pe[2],$e=Ee,qe=$e[0],bt=$e[1],kt=$e[2]);var xt,dn,vn,_n;return!isNaN(Ae)&&!isNaN(qe)?(qe>Ae&&qe-Ae>180?_n=qe-(Ae+360):qe<Ae&&Ae-qe>180?_n=qe+360-Ae:_n=qe-Ae,dn=Ae+z*_n):isNaN(Ae)?isNaN(qe)?dn=Number.NaN:(dn=qe,(ot==1||ot==0)&&ee!="hsv"&&(xt=bt)):(dn=Ae,(kt==1||kt==0)&&ee!="hsv"&&(xt=tt)),xt===void 0&&(xt=tt+z*(bt-tt)),vn=ot+z*(kt-ot),ee==="oklch"?new WE([vn,xt,dn],ee):new WE([dn,xt,vn],ee)},yK=Oc,HE=function(E,P,z){return yK(E,P,z,"lch")};cr.lch=HE,cr.hcl=HE;var wK=C,$K=function(E,P,z){var ee=E.num(),pe=P.num();return new wK(ee+z*(pe-ee),"num")};cr.num=$K;var CK=Oc,xK=function(E,P,z){return CK(E,P,z,"hcg")};cr.hcg=xK;var kK=Oc,SK=function(E,P,z){return kK(E,P,z,"hsi")};cr.hsi=SK;var IK=Oc,TK=function(E,P,z){return IK(E,P,z,"hsl")};cr.hsl=TK;var EK=Oc,_K=function(E,P,z){return EK(E,P,z,"hsv")};cr.hsv=_K;var NK=C,AK=function(E,P,z){var ee=E.oklab(),pe=P.oklab();return new NK(ee[0]+z*(pe[0]-ee[0]),ee[1]+z*(pe[1]-ee[1]),ee[2]+z*(pe[2]-ee[2]),"oklab")};cr.oklab=AK;var DK=Oc,RK=function(E,P,z){return DK(E,P,z,"oklch")};cr.oklch=RK;var ow=C,OK=g.clip_rgb,rw=Math.pow,iw=Math.sqrt,aw=Math.PI,UE=Math.cos,jE=Math.sin,MK=Math.atan2,PK=function(E,P,z){P===void 0&&(P="lrgb"),z===void 0&&(z=null);var ee=E.length;z||(z=Array.from(new Array(ee)).map(function(){return 1}));var pe=ee/z.reduce(function(dn,vn){return dn+vn});if(z.forEach(function(dn,vn){z[vn]*=pe}),E=E.map(function(dn){return new ow(dn)}),P==="lrgb")return FK(E,z);for(var $e=E.shift(),ue=$e.get(P),Ee=[],Ae=0,qe=0,tt=0;tt<ue.length;tt++)if(ue[tt]=(ue[tt]||0)*z[0],Ee.push(isNaN(ue[tt])?0:z[0]),P.charAt(tt)==="h"&&!isNaN(ue[tt])){var bt=ue[tt]/180*aw;Ae+=UE(bt)*z[0],qe+=jE(bt)*z[0]}var ot=$e.alpha()*z[0];E.forEach(function(dn,vn){var _n=dn.get(P);ot+=dn.alpha()*z[vn+1];for(var Pn=0;Pn<ue.length;Pn++)if(!isNaN(_n[Pn]))if(Ee[Pn]+=z[vn+1],P.charAt(Pn)==="h"){var po=_n[Pn]/180*aw;Ae+=UE(po)*z[vn+1],qe+=jE(po)*z[vn+1]}else ue[Pn]+=_n[Pn]*z[vn+1]});for(var kt=0;kt<ue.length;kt++)if(P.charAt(kt)==="h"){for(var xt=MK(qe/Ee[kt],Ae/Ee[kt])/aw*180;xt<0;)xt+=360;for(;xt>=360;)xt-=360;ue[kt]=xt}else ue[kt]=ue[kt]/Ee[kt];return ot/=ee,new ow(ue,P).alpha(ot>.99999?1:ot,!0)},FK=function(E,P){for(var z=E.length,ee=[0,0,0,0],pe=0;pe<E.length;pe++){var $e=E[pe],ue=P[pe]/z,Ee=$e._rgb;ee[0]+=rw(Ee[0],2)*ue,ee[1]+=rw(Ee[1],2)*ue,ee[2]+=rw(Ee[2],2)*ue,ee[3]+=Ee[3]*ue}return ee[0]=iw(ee[0]),ee[1]=iw(ee[1]),ee[2]=iw(ee[2]),ee[3]>.9999999&&(ee[3]=1),new ow(OK(ee))},ai=k,Mc=g.type,LK=Math.pow,lw=function(E){var P="rgb",z=ai("#ccc"),ee=0,pe=[0,1],$e=[],ue=[0,0],Ee=!1,Ae=[],qe=!1,tt=0,bt=1,ot=!1,kt={},xt=!0,dn=1,vn=function(it){if(it=it||["#fff","#000"],it&&Mc(it)==="string"&&ai.brewer&&ai.brewer[it.toLowerCase()]&&(it=ai.brewer[it.toLowerCase()]),Mc(it)==="array"){it.length===1&&(it=[it[0],it[0]]),it=it.slice(0);for(var Bt=0;Bt<it.length;Bt++)it[Bt]=ai(it[Bt]);$e.length=0;for(var pn=0;pn<it.length;pn++)$e.push(pn/(it.length-1))}return jo(),Ae=it},_n=function(it){if(Ee!=null){for(var Bt=Ee.length-1,pn=0;pn<Bt&&it>=Ee[pn];)pn++;return pn-1}return 0},Pn=function(it){return it},po=function(it){return it},no=function(it,Bt){var pn,fn;if(Bt==null&&(Bt=!1),isNaN(it)||it===null)return z;if(Bt)fn=it;else if(Ee&&Ee.length>2){var go=_n(it);fn=go/(Ee.length-2)}else bt!==tt?fn=(it-tt)/(bt-tt):fn=1;fn=po(fn),Bt||(fn=Pn(fn)),dn!==1&&(fn=LK(fn,dn)),fn=ue[0]+fn*(1-ue[0]-ue[1]),fn=Math.min(1,Math.max(0,fn));var ns=Math.floor(fn*1e4);if(xt&&kt[ns])pn=kt[ns];else{if(Mc(Ae)==="array")for(var Nn=0;Nn<$e.length;Nn++){var Bn=$e[Nn];if(fn<=Bn){pn=Ae[Nn];break}if(fn>=Bn&&Nn===$e.length-1){pn=Ae[Nn];break}if(fn>Bn&&fn<$e[Nn+1]){fn=(fn-Bn)/($e[Nn+1]-Bn),pn=ai.interpolate(Ae[Nn],Ae[Nn+1],fn,P);break}}else Mc(Ae)==="function"&&(pn=Ae(fn));xt&&(kt[ns]=pn)}return pn},jo=function(){return kt={}};vn(E);var Cn=function(it){var Bt=ai(no(it));return qe&&Bt[qe]?Bt[qe]():Bt};return Cn.classes=function(it){if(it!=null){if(Mc(it)==="array")Ee=it,pe=[it[0],it[it.length-1]];else{var Bt=ai.analyze(pe);it===0?Ee=[Bt.min,Bt.max]:Ee=ai.limits(Bt,"e",it)}return Cn}return Ee},Cn.domain=function(it){if(!arguments.length)return pe;tt=it[0],bt=it[it.length-1],$e=[];var Bt=Ae.length;if(it.length===Bt&&tt!==bt)for(var pn=0,fn=Array.from(it);pn<fn.length;pn+=1){var go=fn[pn];$e.push((go-tt)/(bt-tt))}else{for(var ns=0;ns<Bt;ns++)$e.push(ns/(Bt-1));if(it.length>2){var Nn=it.map(function(zn,Un){return Un/(it.length-1)}),Bn=it.map(function(zn){return(zn-tt)/(bt-tt)});Bn.every(function(zn,Un){return Nn[Un]===zn})||(po=function(zn){if(zn<=0||zn>=1)return zn;for(var Un=0;zn>=Bn[Un+1];)Un++;var ui=(zn-Bn[Un])/(Bn[Un+1]-Bn[Un]),Wa=Nn[Un]+ui*(Nn[Un+1]-Nn[Un]);return Wa})}}return pe=[tt,bt],Cn},Cn.mode=function(it){return arguments.length?(P=it,jo(),Cn):P},Cn.range=function(it,Bt){return vn(it),Cn},Cn.out=function(it){return qe=it,Cn},Cn.spread=function(it){return arguments.length?(ee=it,Cn):ee},Cn.correctLightness=function(it){return it==null&&(it=!0),ot=it,jo(),ot?Pn=function(Bt){for(var pn=no(0,!0).lab()[0],fn=no(1,!0).lab()[0],go=pn>fn,ns=no(Bt,!0).lab()[0],Nn=pn+(fn-pn)*Bt,Bn=ns-Nn,zn=0,Un=1,ui=20;Math.abs(Bn)>.01&&ui-- >0;)(function(){return go&&(Bn*=-1),Bn<0?(zn=Bt,Bt+=(Un-Bt)*.5):(Un=Bt,Bt+=(zn-Bt)*.5),ns=no(Bt,!0).lab()[0],Bn=ns-Nn})();return Bt}:Pn=function(Bt){return Bt},Cn},Cn.padding=function(it){return it!=null?(Mc(it)==="number"&&(it=[it,it]),ue=it,Cn):ue},Cn.colors=function(it,Bt){arguments.length<2&&(Bt="hex");var pn=[];if(arguments.length===0)pn=Ae.slice(0);else if(it===1)pn=[Cn(.5)];else if(it>1){var fn=pe[0],go=pe[1]-fn;pn=BK(0,it,!1).map(function(Un){return Cn(fn+Un/(it-1)*go)})}else{E=[];var ns=[];if(Ee&&Ee.length>2)for(var Nn=1,Bn=Ee.length,zn=1<=Bn;zn?Nn<Bn:Nn>Bn;zn?Nn++:Nn--)ns.push((Ee[Nn-1]+Ee[Nn])*.5);else ns=pe;pn=ns.map(function(Un){return Cn(Un)})}return ai[Bt]&&(pn=pn.map(function(Un){return Un[Bt]()})),pn},Cn.cache=function(it){return it!=null?(xt=it,Cn):xt},Cn.gamma=function(it){return it!=null?(dn=it,Cn):dn},Cn.nodata=function(it){return it!=null?(z=ai(it),Cn):z},Cn};function BK(E,P,z){for(var ee=[],pe=E<P,$e=z?pe?P+1:P-1:P,ue=E;pe?ue<$e:ue>$e;pe?ue++:ue--)ee.push(ue);return ee}var Nf=C,zK=lw,VK=function(E){for(var P=[1,1],z=1;z<E;z++){for(var ee=[1],pe=1;pe<=P.length;pe++)ee[pe]=(P[pe]||0)+P[pe-1];P=ee}return P},WK=function(E){var P,z,ee,pe,$e,ue,Ee;if(E=E.map(function(ot){return new Nf(ot)}),E.length===2)P=E.map(function(ot){return ot.lab()}),$e=P[0],ue=P[1],pe=function(ot){var kt=[0,1,2].map(function(xt){return $e[xt]+ot*(ue[xt]-$e[xt])});return new Nf(kt,"lab")};else if(E.length===3)z=E.map(function(ot){return ot.lab()}),$e=z[0],ue=z[1],Ee=z[2],pe=function(ot){var kt=[0,1,2].map(function(xt){return(1-ot)*(1-ot)*$e[xt]+2*(1-ot)*ot*ue[xt]+ot*ot*Ee[xt]});return new Nf(kt,"lab")};else if(E.length===4){var Ae;ee=E.map(function(ot){return ot.lab()}),$e=ee[0],ue=ee[1],Ee=ee[2],Ae=ee[3],pe=function(ot){var kt=[0,1,2].map(function(xt){return(1-ot)*(1-ot)*(1-ot)*$e[xt]+3*(1-ot)*(1-ot)*ot*ue[xt]+3*(1-ot)*ot*ot*Ee[xt]+ot*ot*ot*Ae[xt]});return new Nf(kt,"lab")}}else if(E.length>=5){var qe,tt,bt;qe=E.map(function(ot){return ot.lab()}),bt=E.length-1,tt=VK(bt),pe=function(ot){var kt=1-ot,xt=[0,1,2].map(function(dn){return qe.reduce(function(vn,_n,Pn){return vn+tt[Pn]*Math.pow(kt,bt-Pn)*Math.pow(ot,Pn)*_n[dn]},0)});return new Nf(xt,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return pe},HK=function(E){var P=WK(E);return P.scale=function(){return zK(P)},P},uw=k,li=function(E,P,z){if(!li[z])throw new Error("unknown blend mode "+z);return li[z](E,P)},za=function(E){return function(P,z){var ee=uw(z).rgb(),pe=uw(P).rgb();return uw.rgb(E(ee,pe))}},Va=function(E){return function(P,z){var ee=[];return ee[0]=E(P[0],z[0]),ee[1]=E(P[1],z[1]),ee[2]=E(P[2],z[2]),ee}},UK=function(E){return E},jK=function(E,P){return E*P/255},GK=function(E,P){return E>P?P:E},KK=function(E,P){return E>P?E:P},qK=function(E,P){return 255*(1-(1-E/255)*(1-P/255))},YK=function(E,P){return P<128?2*E*P/255:255*(1-2*(1-E/255)*(1-P/255))},XK=function(E,P){return 255*(1-(1-P/255)/(E/255))},ZK=function(E,P){return E===255?255:(E=255*(P/255)/(1-E/255),E>255?255:E)};li.normal=za(Va(UK)),li.multiply=za(Va(jK)),li.screen=za(Va(qK)),li.overlay=za(Va(YK)),li.darken=za(Va(GK)),li.lighten=za(Va(KK)),li.dodge=za(Va(ZK)),li.burn=za(Va(XK));for(var JK=li,cw=g.type,QK=g.clip_rgb,e9=g.TWOPI,t9=Math.pow,n9=Math.sin,s9=Math.cos,GE=k,o9=function(E,P,z,ee,pe){E===void 0&&(E=300),P===void 0&&(P=-1.5),z===void 0&&(z=1),ee===void 0&&(ee=1),pe===void 0&&(pe=[0,1]);var $e=0,ue;cw(pe)==="array"?ue=pe[1]-pe[0]:(ue=0,pe=[pe,pe]);var Ee=function(Ae){var qe=e9*((E+120)/360+P*Ae),tt=t9(pe[0]+ue*Ae,ee),bt=$e!==0?z[0]+Ae*$e:z,ot=bt*tt*(1-tt)/2,kt=s9(qe),xt=n9(qe),dn=tt+ot*(-.14861*kt+1.78277*xt),vn=tt+ot*(-.29227*kt-.90649*xt),_n=tt+ot*(1.97294*kt);return GE(QK([dn*255,vn*255,_n*255,1]))};return Ee.start=function(Ae){return Ae==null?E:(E=Ae,Ee)},Ee.rotations=function(Ae){return Ae==null?P:(P=Ae,Ee)},Ee.gamma=function(Ae){return Ae==null?ee:(ee=Ae,Ee)},Ee.hue=function(Ae){return Ae==null?z:(z=Ae,cw(z)==="array"?($e=z[1]-z[0],$e===0&&(z=z[1])):$e=0,Ee)},Ee.lightness=function(Ae){return Ae==null?pe:(cw(Ae)==="array"?(pe=Ae,ue=Ae[1]-Ae[0]):(pe=[Ae,Ae],ue=0),Ee)},Ee.scale=function(){return GE.scale(Ee)},Ee.hue(z),Ee},r9=C,i9="0123456789abcdef",a9=Math.floor,l9=Math.random,u9=function(){for(var E="#",P=0;P<6;P++)E+=i9.charAt(a9(l9()*16));return new r9(E,"hex")},dw=u,KE=Math.log,c9=Math.pow,d9=Math.floor,f9=Math.abs,qE=function(E,P){P===void 0&&(P=null);var z={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return dw(E)==="object"&&(E=Object.values(E)),E.forEach(function(ee){P&&dw(ee)==="object"&&(ee=ee[P]),ee!=null&&!isNaN(ee)&&(z.values.push(ee),z.sum+=ee,ee<z.min&&(z.min=ee),ee>z.max&&(z.max=ee),z.count+=1)}),z.domain=[z.min,z.max],z.limits=function(ee,pe){return YE(z,ee,pe)},z},YE=function(E,P,z){P===void 0&&(P="equal"),z===void 0&&(z=7),dw(E)=="array"&&(E=qE(E));var ee=E.min,pe=E.max,$e=E.values.sort(function(hw,pw){return hw-pw});if(z===1)return[ee,pe];var ue=[];if(P.substr(0,1)==="c"&&(ue.push(ee),ue.push(pe)),P.substr(0,1)==="e"){ue.push(ee);for(var Ee=1;Ee<z;Ee++)ue.push(ee+Ee/z*(pe-ee));ue.push(pe)}else if(P.substr(0,1)==="l"){if(ee<=0)throw new Error("Logarithmic scales are only possible for values > 0");var Ae=Math.LOG10E*KE(ee),qe=Math.LOG10E*KE(pe);ue.push(ee);for(var tt=1;tt<z;tt++)ue.push(c9(10,Ae+tt/z*(qe-Ae)));ue.push(pe)}else if(P.substr(0,1)==="q"){ue.push(ee);for(var bt=1;bt<z;bt++){var ot=($e.length-1)*bt/z,kt=d9(ot);if(kt===ot)ue.push($e[kt]);else{var xt=ot-kt;ue.push($e[kt]*(1-xt)+$e[kt+1]*xt)}}ue.push(pe)}else if(P.substr(0,1)==="k"){var dn,vn=$e.length,_n=new Array(vn),Pn=new Array(z),po=!0,no=0,jo=null;jo=[],jo.push(ee);for(var Cn=1;Cn<z;Cn++)jo.push(ee+Cn/z*(pe-ee));for(jo.push(pe);po;){for(var it=0;it<z;it++)Pn[it]=0;for(var Bt=0;Bt<vn;Bt++)for(var pn=$e[Bt],fn=Number.MAX_VALUE,go=void 0,ns=0;ns<z;ns++){var Nn=f9(jo[ns]-pn);Nn<fn&&(fn=Nn,go=ns),Pn[go]++,_n[Bt]=go}for(var Bn=new Array(z),zn=0;zn<z;zn++)Bn[zn]=null;for(var Un=0;Un<vn;Un++)dn=_n[Un],Bn[dn]===null?Bn[dn]=$e[Un]:Bn[dn]+=$e[Un];for(var ui=0;ui<z;ui++)Bn[ui]*=1/Pn[ui];po=!1;for(var Wa=0;Wa<z;Wa++)if(Bn[Wa]!==jo[Wa]){po=!0;break}jo=Bn,no++,no>200&&(po=!1)}for(var Ha={},Pc=0;Pc<z;Pc++)Ha[Pc]=[];for(var Fc=0;Fc<vn;Fc++)dn=_n[Fc],Ha[dn].push($e[Fc]);for(var aa=[],Gl=0;Gl<z;Gl++)aa.push(Ha[Gl][0]),aa.push(Ha[Gl][Ha[Gl].length-1]);aa=aa.sort(function(hw,pw){return hw-pw}),ue.push(aa[0]);for(var Af=1;Af<aa.length;Af+=2){var Kl=aa[Af];!isNaN(Kl)&&ue.indexOf(Kl)===-1&&ue.push(Kl)}}return ue},XE={analyze:qE,limits:YE},ZE=C,h9=function(E,P){E=new ZE(E),P=new ZE(P);var z=E.luminance(),ee=P.luminance();return z>ee?(z+.05)/(ee+.05):(ee+.05)/(z+.05)},JE=C,ia=Math.sqrt,Ms=Math.pow,p9=Math.min,g9=Math.max,QE=Math.atan2,e_=Math.abs,Em=Math.cos,t_=Math.sin,m9=Math.exp,n_=Math.PI,v9=function(E,P,z,ee,pe){z===void 0&&(z=1),ee===void 0&&(ee=1),pe===void 0&&(pe=1);var $e=function(Kl){return 360*Kl/(2*n_)},ue=function(Kl){return 2*n_*Kl/360};E=new JE(E),P=new JE(P);var Ee=Array.from(E.lab()),Ae=Ee[0],qe=Ee[1],tt=Ee[2],bt=Array.from(P.lab()),ot=bt[0],kt=bt[1],xt=bt[2],dn=(Ae+ot)/2,vn=ia(Ms(qe,2)+Ms(tt,2)),_n=ia(Ms(kt,2)+Ms(xt,2)),Pn=(vn+_n)/2,po=.5*(1-ia(Ms(Pn,7)/(Ms(Pn,7)+Ms(25,7)))),no=qe*(1+po),jo=kt*(1+po),Cn=ia(Ms(no,2)+Ms(tt,2)),it=ia(Ms(jo,2)+Ms(xt,2)),Bt=(Cn+it)/2,pn=$e(QE(tt,no)),fn=$e(QE(xt,jo)),go=pn>=0?pn:pn+360,ns=fn>=0?fn:fn+360,Nn=e_(go-ns)>180?(go+ns+360)/2:(go+ns)/2,Bn=1-.17*Em(ue(Nn-30))+.24*Em(ue(2*Nn))+.32*Em(ue(3*Nn+6))-.2*Em(ue(4*Nn-63)),zn=ns-go;zn=e_(zn)<=180?zn:ns<=go?zn+360:zn-360,zn=2*ia(Cn*it)*t_(ue(zn)/2);var Un=ot-Ae,ui=it-Cn,Wa=1+.015*Ms(dn-50,2)/ia(20+Ms(dn-50,2)),Ha=1+.045*Bt,Pc=1+.015*Bt*Bn,Fc=30*m9(-Ms((Nn-275)/25,2)),aa=2*ia(Ms(Bt,7)/(Ms(Bt,7)+Ms(25,7))),Gl=-aa*t_(2*ue(Fc)),Af=ia(Ms(Un/(z*Wa),2)+Ms(ui/(ee*Ha),2)+Ms(zn/(pe*Pc),2)+Gl*(ui/(ee*Ha))*(zn/(pe*Pc)));return g9(0,p9(100,Af))},s_=C,b9=function(E,P,z){z===void 0&&(z="lab"),E=new s_(E),P=new s_(P);var ee=E.get(z),pe=P.get(z),$e=0;for(var ue in ee){var Ee=(ee[ue]||0)-(pe[ue]||0);$e+=Ee*Ee}return Math.sqrt($e)},y9=C,w9=function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];try{return new(Function.prototype.bind.apply(y9,[null].concat(E))),!0}catch{return!1}},o_=k,r_=lw,$9={cool:function(){return r_([o_.hsl(180,1,.9),o_.hsl(250,.7,.4)])},hot:function(){return r_(["#000","#f00","#ff0","#fff"]).mode("rgb")}},_m={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},fw=0,i_=Object.keys(_m);fw<i_.length;fw+=1){var a_=i_[fw];_m[a_.toLowerCase()]=_m[a_]}var C9=_m,to=k;to.average=PK,to.bezier=HK,to.blend=JK,to.cubehelix=o9,to.mix=to.interpolate=FE,to.random=u9,to.scale=lw,to.analyze=XE.analyze,to.contrast=h9,to.deltaE=v9,to.distance=b9,to.limits=XE.limits,to.valid=w9,to.scales=$9,to.colors=yE,to.brewer=C9;var x9=to;return x9})})(G8);var kct=G8.exports;function Sct(e){return yAe((t,n)=>{t.props||(t.props=Object.create(null)),t.props[n]=e})}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const K8=function(){return typeof window=="undefined"?function(e){return e()}:window.requestAnimationFrame}();function q8(e,t,n){const s=n||(i=>Array.prototype.slice.call(i));let o=!1,r=[];return function(...i){r=s(i),o||(o=!0,K8.call(window,()=>{o=!1,e.apply(t,r)}))}}function OJe(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const cT=e=>e==="start"?"left":e==="end"?"right":"center",Eo=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,MJe=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function ua(){}const PJe=function(){let e=0;return function(){return e++}}();function Rn(e){return e===null||typeof e=="undefined"}function Vn(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.substr(0,7)==="[object"&&t.substr(-6)==="Array]"}function ln(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const ws=e=>(typeof e=="number"||e instanceof Number)&&isFinite(+e);function Dr(e,t){return ws(e)?e:t}function Gt(e,t){return typeof e=="undefined"?t:e}const FJe=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:e/t,Y8=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Zn(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function jn(e,t,n,s){let o,r,i;if(Vn(e))if(r=e.length,s)for(o=r-1;o>=0;o--)t.call(n,e[o],o);else for(o=0;o<r;o++)t.call(n,e[o],o);else if(ln(e))for(i=Object.keys(e),r=i.length,o=0;o<r;o++)t.call(n,e[i[o]],i[o])}function Yb(e,t){let n,s,o,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(o=e[n],r=t[n],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function Xb(e){if(Vn(e))return e.map(Xb);if(ln(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let o=0;for(;o<s;++o)t[n[o]]=Xb(e[n[o]]);return t}return e}function X8(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function LJe(e,t,n,s){if(!X8(e))return;const o=t[e],r=n[e];ln(o)&&ln(r)?mp(o,r,s):t[e]=Xb(r)}function mp(e,t,n){const s=Vn(t)?t:[t],o=s.length;if(!ln(e))return e;n=n||{};const r=n.merger||LJe;for(let i=0;i<o;++i){if(t=s[i],!ln(t))continue;const a=Object.keys(t);for(let l=0,u=a.length;l<u;++l)r(a[l],e,t,n)}return e}function _h(e,t){return mp(e,t,{merger:BJe})}function BJe(e,t,n){if(!X8(e))return;const s=t[e],o=n[e];ln(s)&&ln(o)?_h(s,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Xb(o))}const zJe="",VJe=".";function rO(e,t){const n=e.indexOf(VJe,t);return n===-1?e.length:n}function nc(e,t){if(t===zJe)return e;let n=0,s=rO(t,n);for(;e&&s>n;)e=e[t.substr(n,s-n)],n=s+1,s=rO(t,n);return e}function dT(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Us=e=>typeof e!="undefined",Cl=e=>typeof e=="function",iO=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function WJe(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Fn=Math.PI,ts=2*Fn,HJe=ts+Fn,Zb=Number.POSITIVE_INFINITY,Z8=Fn/180,Cs=Fn/2,Wf=Fn/4,aO=Fn*2/3,Br=Math.log10,Yi=Math.sign;function lO(e){const t=Math.round(e);e=Nh(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Br(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function UJe(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((o,r)=>o-r).pop(),t}function vp(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Nh(e,t,n){return Math.abs(e-t)<n}function jJe(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function J8(e,t,n){let s,o,r;for(s=0,o=e.length;s<o;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function ro(e){return e*(Fn/180)}function fT(e){return e*(180/Fn)}function uO(e){if(!ws(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Q8(e,t){const n=t.x-e.x,s=t.y-e.y,o=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Fn&&(r+=ts),{angle:r,distance:o}}function bp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function GJe(e,t){return(e-t+HJe)%ts-Fn}function hr(e){return(e%ts+ts)%ts}function yp(e,t,n,s){const o=hr(e),r=hr(t),i=hr(n),a=hr(r-o),l=hr(i-o),u=hr(o-r),c=hr(o-i);return o===r||o===i||s&&r===i||a>l&&u<c}function io(e,t,n){return Math.max(t,Math.min(n,e))}function KJe(e){return io(e,-32768,32767)}function ba(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}const iv=e=>e===0||e===1,cO=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ts/n)),dO=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ts/n)+1,Ah={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Cs)+1,easeOutSine:e=>Math.sin(e*Cs),easeInOutSine:e=>-.5*(Math.cos(Fn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>iv(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>iv(e)?e:cO(e,.075,.3),easeOutElastic:e=>iv(e)?e:dO(e,.075,.3),easeInOutElastic(e){return iv(e)?e:e<.5?.5*cO(e*2,.1125,.45):.5+.5*dO(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ah.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ah.easeInBounce(e*2)*.5:Ah.easeOutBounce(e*2-1)*.5+.5};/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const Ar={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nx="0123456789ABCDEF",qJe=e=>Nx[e&15],YJe=e=>Nx[(e&240)>>4]+Nx[e&15],av=e=>(e&240)>>4===(e&15);function XJe(e){return av(e.r)&&av(e.g)&&av(e.b)&&av(e.a)}function ZJe(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Ar[e[1]]*17,g:255&Ar[e[2]]*17,b:255&Ar[e[3]]*17,a:t===5?Ar[e[4]]*17:255}:(t===7||t===9)&&(n={r:Ar[e[1]]<<4|Ar[e[2]],g:Ar[e[3]]<<4|Ar[e[4]],b:Ar[e[5]]<<4|Ar[e[6]],a:t===9?Ar[e[7]]<<4|Ar[e[8]]:255})),n}function JJe(e){var t=XJe(e)?qJe:YJe;return e&&"#"+t(e.r)+t(e.g)+t(e.b)+(e.a<255?t(e.a):"")}function um(e){return e+.5|0}const w1=(e,t,n)=>Math.max(Math.min(e,n),t);function fh(e){return w1(um(e*2.55),0,255)}function wp(e){return w1(um(e*255),0,255)}function hT(e){return w1(um(e/2.55)/100,0,1)}function fO(e){return w1(um(e*100),0,100)}const QJe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function eQe(e){const t=QJe.exec(e);let n=255,s,o,r;if(!!t){if(t[7]!==s){const i=+t[7];n=255&(t[8]?fh(i):i*255)}return s=+t[1],o=+t[3],r=+t[5],s=255&(t[2]?fh(s):s),o=255&(t[4]?fh(o):o),r=255&(t[6]?fh(r):r),{r:s,g:o,b:r,a:n}}}function tQe(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${hT(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const nQe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function eH(e,t,n){const s=t*Math.min(n,1-n),o=(r,i=(r+e/30)%12)=>n-s*Math.max(Math.min(i-3,9-i,1),-1);return[o(0),o(8),o(4)]}function sQe(e,t,n){const s=(o,r=(o+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function oQe(e,t,n){const s=eH(e,1,.5);let o;for(t+n>1&&(o=1/(t+n),t*=o,n*=o),o=0;o<3;o++)s[o]*=1-t-n,s[o]+=t;return s}function pT(e){const n=e.r/255,s=e.g/255,o=e.b/255,r=Math.max(n,s,o),i=Math.min(n,s,o),a=(r+i)/2;let l,u,c;return r!==i&&(c=r-i,u=a>.5?c/(2-r-i):c/(r+i),l=r===n?(s-o)/c+(s<o?6:0):r===s?(o-n)/c+2:(n-s)/c+4,l=l*60+.5),[l|0,u||0,a]}function gT(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(wp)}function mT(e,t,n){return gT(eH,e,t,n)}function rQe(e,t,n){return gT(oQe,e,t,n)}function iQe(e,t,n){return gT(sQe,e,t,n)}function tH(e){return(e%360+360)%360}function aQe(e){const t=nQe.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?fh(+t[5]):wp(+t[5]));const o=tH(+t[2]),r=+t[3]/100,i=+t[4]/100;return t[1]==="hwb"?s=rQe(o,r,i):t[1]==="hsv"?s=iQe(o,r,i):s=mT(o,r,i),{r:s[0],g:s[1],b:s[2],a:n}}function lQe(e,t){var n=pT(e);n[0]=tH(n[0]+t),n=mT(n),e.r=n[0],e.g=n[1],e.b=n[2]}function uQe(e){if(!e)return;const t=pT(e),n=t[0],s=fO(t[1]),o=fO(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${o}%, ${hT(e.a)})`:`hsl(${n}, ${s}%, ${o}%)`}const hO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cQe(){const e={},t=Object.keys(pO),n=Object.keys(hO);let s,o,r,i,a;for(s=0;s<t.length;s++){for(i=a=t[s],o=0;o<n.length;o++)r=n[o],a=a.replace(r,hO[r]);r=parseInt(pO[i],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let lv;function dQe(e){lv||(lv=cQe(),lv.transparent=[0,0,0,0]);const t=lv[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}function uv(e,t,n){if(e){let s=pT(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=mT(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function nH(e,t){return e&&Object.assign(t||{},e)}function gO(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=wp(e[3]))):(t=nH(e,{r:0,g:0,b:0,a:1}),t.a=wp(t.a)),t}function fQe(e){return e.charAt(0)==="r"?eQe(e):aQe(e)}class Jb{constructor(t){if(t instanceof Jb)return t;const n=typeof t;let s;n==="object"?s=gO(t):n==="string"&&(s=ZJe(t)||dQe(t)||fQe(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=nH(this._rgb);return t&&(t.a=hT(t.a)),t}set rgb(t){this._rgb=gO(t)}rgbString(){return this._valid?tQe(this._rgb):this._rgb}hexString(){return this._valid?JJe(this._rgb):this._rgb}hslString(){return this._valid?uQe(this._rgb):this._rgb}mix(t,n){const s=this;if(t){const o=s.rgb,r=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,u=o.a-r.a,c=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;i=1-c,o.r=255&c*o.r+i*r.r+.5,o.g=255&c*o.g+i*r.g+.5,o.b=255&c*o.b+i*r.b+.5,o.a=a*o.a+(1-a)*r.a,s.rgb=o}return s}clone(){return new Jb(this.rgb)}alpha(t){return this._rgb.a=wp(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=um(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return uv(this._rgb,2,t),this}darken(t){return uv(this._rgb,2,-t),this}saturate(t){return uv(this._rgb,1,t),this}desaturate(t){return uv(this._rgb,1,-t),this}rotate(t){return lQe(this._rgb,t),this}}function sH(e){return new Jb(e)}const oH=e=>e instanceof CanvasGradient||e instanceof CanvasPattern;function mO(e){return oH(e)?e:sH(e)}function h$(e){return oH(e)?e:sH(e).saturate(.5).darken(.1).hexString()}const sc=Object.create(null),Ax=Object.create(null);function Dh(e,t){if(!t)return e;const n=t.split(".");for(let s=0,o=n.length;s<o;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function p$(e,t,n){return typeof t=="string"?mp(Dh(e,t),n):mp(Dh(e,""),t)}class hQe{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>h$(s.backgroundColor),this.hoverBorderColor=(n,s)=>h$(s.borderColor),this.hoverColor=(n,s)=>h$(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,n){return p$(this,t,n)}get(t){return Dh(this,t)}describe(t,n){return p$(Ax,t,n)}override(t,n){return p$(sc,t,n)}route(t,n,s,o){const r=Dh(this,t),i=Dh(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=i[o];return ln(l)?Object.assign({},u,l):Gt(l,u)},set(l){this[a]=l}}})}}var wn=new hQe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function pQe(e){return!e||Rn(e.size)||Rn(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Qb(e,t,n,s,o){let r=t[o];return r||(r=t[o]=e.measureText(o).width,n.push(o)),r>s&&(s=r),s}function gQe(e,t,n,s){s=s||{};let o=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(o=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let i=0;const a=n.length;let l,u,c,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&Vn(d)!==!0)i=Qb(e,o,r,i,d);else if(Vn(d))for(u=0,c=d.length;u<c;u++)f=d[u],f!=null&&!Vn(f)&&(i=Qb(e,o,r,i,f));e.restore();const h=r.length/2;if(h>n.length){for(l=0;l<h;l++)delete o[r[l]];r.splice(0,h)}return i}function nu(e,t,n){const s=e.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((t-o)*s)/s+o}function vO(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function $p(e,t,n,s){let o,r,i,a,l;const u=t.pointStyle,c=t.rotation,d=t.radius;let f=(c||0)*Z8;if(u&&typeof u=="object"&&(o=u.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(f),e.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),e.restore();return}if(!(isNaN(d)||d<=0)){switch(e.beginPath(),u){default:e.arc(n,s,d,0,ts),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(f)*d,s-Math.cos(f)*d),f+=aO,e.lineTo(n+Math.sin(f)*d,s-Math.cos(f)*d),f+=aO,e.lineTo(n+Math.sin(f)*d,s-Math.cos(f)*d),e.closePath();break;case"rectRounded":l=d*.516,a=d-l,r=Math.cos(f+Wf)*a,i=Math.sin(f+Wf)*a,e.arc(n-r,s-i,l,f-Fn,f-Cs),e.arc(n+i,s-r,l,f-Cs,f),e.arc(n+r,s+i,l,f,f+Cs),e.arc(n-i,s+r,l,f+Cs,f+Fn),e.closePath();break;case"rect":if(!c){a=Math.SQRT1_2*d,e.rect(n-a,s-a,2*a,2*a);break}f+=Wf;case"rectRot":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+i,s-r),e.lineTo(n+r,s+i),e.lineTo(n-i,s+r),e.closePath();break;case"crossRot":f+=Wf;case"cross":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r);break;case"star":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r),f+=Wf,r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r);break;case"line":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(f)*d,s+Math.sin(f)*d);break}e.fill(),t.borderWidth>0&&e.stroke()}}function oc(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function cm(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function dm(e){e.restore()}function mQe(e,t,n,s,o){if(!t)return e.lineTo(n.x,n.y);if(o==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else o==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function vQe(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function rc(e,t,n,s,o,r={}){const i=Vn(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,u;for(e.save(),e.font=o.string,bQe(e,r),l=0;l<i.length;++l)u=i[l],a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Rn(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(u,n,s,r.maxWidth)),e.fillText(u,n,s,r.maxWidth),yQe(e,n,s,u,r),s+=o.lineHeight;e.restore()}function bQe(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Rn(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function yQe(e,t,n,s,o){if(o.strikethrough||o.underline){const r=e.measureText(s),i=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,u=n+r.actualBoundingBoxDescent,c=o.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(i,c),e.lineTo(a,c),e.stroke()}}function Cp(e,t){const{x:n,y:s,w:o,h:r,radius:i}=t;e.arc(n+i.topLeft,s+i.topLeft,i.topLeft,-Cs,Fn,!0),e.lineTo(n,s+r-i.bottomLeft),e.arc(n+i.bottomLeft,s+r-i.bottomLeft,i.bottomLeft,Fn,Cs,!0),e.lineTo(n+o-i.bottomRight,s+r),e.arc(n+o-i.bottomRight,s+r-i.bottomRight,i.bottomRight,Cs,0,!0),e.lineTo(n+o,s+i.topRight),e.arc(n+o-i.topRight,s+i.topRight,i.topRight,0,-Cs,!0),e.lineTo(n+i.topLeft,s)}const wQe=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),$Qe=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function CQe(e,t){const n=(""+e).match(wQe);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const xQe=e=>+e||0;function vT(e,t){const n={},s=ln(t),o=s?Object.keys(t):t,r=ln(e)?s?i=>Gt(e[i],e[t[i]]):i=>e[i]:()=>e;for(const i of o)n[i]=xQe(r(i));return n}function rH(e){return vT(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Lu(e){return vT(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Js(e){const t=rH(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ds(e,t){e=e||{},t=t||wn.font;let n=Gt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Gt(e.style,t.style);s&&!(""+s).match($Qe)&&(console.warn('Invalid font style specified: "'+s+'"'),s="");const o={family:Gt(e.family,t.family),lineHeight:CQe(Gt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Gt(e.weight,t.weight),string:""};return o.string=pQe(o),o}function hh(e,t,n,s){let o=!0,r,i,a;for(r=0,i=e.length;r<i;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),o=!1),n!==void 0&&Vn(a)&&(a=a[n%a.length],o=!1),a!==void 0))return s&&!o&&(s.cacheable=!1),a}function kQe(e,t,n){const{min:s,max:o}=e,r=Y8(t,(o-s)/2),i=(a,l)=>n&&a===0?0:a+l;return{min:i(s,-Math.abs(r)),max:i(o,r)}}function Wl(e,t){return Object.assign(Object.create(e),t)}function bT(e,t,n){n=n||(i=>e[i]<t);let s=e.length-1,o=0,r;for(;s-o>1;)r=o+s>>1,n(r)?o=r:s=r;return{lo:o,hi:s}}const ya=(e,t,n)=>bT(e,n,s=>e[s][t]<n),SQe=(e,t,n)=>bT(e,n,s=>e[s][t]>=n);function IQe(e,t,n){let s=0,o=e.length;for(;s<o&&e[s]<t;)s++;for(;o>s&&e[o-1]>n;)o--;return s>0||o<e.length?e.slice(s,o):e}const iH=["push","pop","shift","splice","unshift"];function TQe(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),iH.forEach(n=>{const s="_onData"+dT(n),o=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const i=o.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),i}})})}function bO(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,o=s.indexOf(t);o!==-1&&s.splice(o,1),!(s.length>0)&&(iH.forEach(r=>{delete e[r]}),delete e._chartjs)}function aH(e){const t=new Set;let n,s;for(n=0,s=e.length;n<s;++n)t.add(e[n]);return t.size===s?e:Array.from(t)}function yT(e,t=[""],n=e,s,o=()=>e[0]){Us(s)||(s=dH("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:s,_getTarget:o,override:i=>yT([i,...e],t,n,s)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete i._keys,delete e[0][a],!0},get(i,a){return uH(i,a,()=>MQe(a,t,e,i))},getOwnPropertyDescriptor(i,a){return Reflect.getOwnPropertyDescriptor(i._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(i,a){return wO(i).includes(a)},ownKeys(i){return wO(i)},set(i,a,l){const u=i._storage||(i._storage=o());return i[a]=u[a]=l,delete i._keys,!0}})}function jd(e,t,n,s){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:lH(e,s),setContext:r=>jd(e,r,n,s),override:r=>jd(e.override(r),t,n,s)};return new Proxy(o,{deleteProperty(r,i){return delete r[i],delete e[i],!0},get(r,i,a){return uH(r,i,()=>_Qe(r,i,a))},getOwnPropertyDescriptor(r,i){return r._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,i){return Reflect.has(e,i)},ownKeys(){return Reflect.ownKeys(e)},set(r,i,a){return e[i]=a,delete r[i],!0}})}function lH(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:n,indexable:s,isScriptable:Cl(n)?n:()=>n,isIndexable:Cl(s)?s:()=>s}}const EQe=(e,t)=>e?e+dT(t):t,wT=(e,t)=>ln(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function uH(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const s=n();return e[t]=s,s}function _Qe(e,t,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:i}=e;let a=s[t];return Cl(a)&&i.isScriptable(t)&&(a=NQe(t,a,e,n)),Vn(a)&&a.length&&(a=AQe(t,a,e,i.isIndexable)),wT(t,a)&&(a=jd(a,o,r&&r[t],i)),a}function NQe(e,t,n,s){const{_proxy:o,_context:r,_subProxy:i,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(r,i||s),a.delete(e),wT(e,t)&&(t=$T(o._scopes,o,e,t)),t}function AQe(e,t,n,s){const{_proxy:o,_context:r,_subProxy:i,_descriptors:a}=n;if(Us(r.index)&&s(e))t=t[r.index%t.length];else if(ln(t[0])){const l=t,u=o._scopes.filter(c=>c!==l);t=[];for(const c of l){const d=$T(u,o,e,c);t.push(jd(d,r,i&&i[e],a))}}return t}function cH(e,t,n){return Cl(e)?e(t,n):e}const DQe=(e,t)=>e===!0?t:typeof e=="string"?nc(t,e):void 0;function RQe(e,t,n,s,o){for(const r of t){const i=DQe(n,r);if(i){e.add(i);const a=cH(i._fallback,n,o);if(Us(a)&&a!==n&&a!==s)return a}else if(i===!1&&Us(s)&&n!==s)return null}return!1}function $T(e,t,n,s){const o=t._rootScopes,r=cH(t._fallback,n,s),i=[...e,...o],a=new Set;a.add(s);let l=yO(a,i,n,r||n,s);return l===null||Us(r)&&r!==n&&(l=yO(a,i,r,l,s),l===null)?!1:yT(Array.from(a),[""],o,r,()=>OQe(t,n,s))}function yO(e,t,n,s,o){for(;n;)n=RQe(e,t,n,s,o);return n}function OQe(e,t,n){const s=e._getTarget();t in s||(s[t]={});const o=s[t];return Vn(o)&&ln(n)?n:o}function MQe(e,t,n,s){let o;for(const r of t)if(o=dH(EQe(r,e),n),Us(o))return wT(e,o)?$T(n,s,e,o):o}function dH(e,t){for(const n of t){if(!n)continue;const s=n[e];if(Us(s))return s}}function wO(e){let t=e._keys;return t||(t=e._keys=PQe(e._scopes)),t}function PQe(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(o=>!o.startsWith("_")))t.add(s);return Array.from(t)}const FQe=Number.EPSILON||1e-14,Gd=(e,t)=>t<e.length&&!e[t].skip&&e[t],fH=e=>e==="x"?"y":"x";function LQe(e,t,n,s){const o=e.skip?t:e,r=t,i=n.skip?t:n,a=bp(r,o),l=bp(i,r);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const d=s*u,f=s*c;return{previous:{x:r.x-d*(i.x-o.x),y:r.y-d*(i.y-o.y)},next:{x:r.x+f*(i.x-o.x),y:r.y+f*(i.y-o.y)}}}function BQe(e,t,n){const s=e.length;let o,r,i,a,l,u=Gd(e,0);for(let c=0;c<s-1;++c)if(l=u,u=Gd(e,c+1),!(!l||!u)){if(Nh(t[c],0,FQe)){n[c]=n[c+1]=0;continue}o=n[c]/t[c],r=n[c+1]/t[c],a=Math.pow(o,2)+Math.pow(r,2),!(a<=9)&&(i=3/Math.sqrt(a),n[c]=o*i*t[c],n[c+1]=r*i*t[c])}}function zQe(e,t,n="x"){const s=fH(n),o=e.length;let r,i,a,l=Gd(e,0);for(let u=0;u<o;++u){if(i=a,a=l,l=Gd(e,u+1),!a)continue;const c=a[n],d=a[s];i&&(r=(c-i[n])/3,a[`cp1${n}`]=c-r,a[`cp1${s}`]=d-r*t[u]),l&&(r=(l[n]-c)/3,a[`cp2${n}`]=c+r,a[`cp2${s}`]=d+r*t[u])}}function VQe(e,t="x"){const n=fH(t),s=e.length,o=Array(s).fill(0),r=Array(s);let i,a,l,u=Gd(e,0);for(i=0;i<s;++i)if(a=l,l=u,u=Gd(e,i+1),!!l){if(u){const c=u[t]-l[t];o[i]=c!==0?(u[n]-l[n])/c:0}r[i]=a?u?Yi(o[i-1])!==Yi(o[i])?0:(o[i-1]+o[i])/2:o[i-1]:o[i]}BQe(e,o,r),zQe(e,r,t)}function cv(e,t,n){return Math.max(Math.min(e,n),t)}function WQe(e,t){let n,s,o,r,i,a=oc(e[0],t);for(n=0,s=e.length;n<s;++n)i=r,r=a,a=n<s-1&&oc(e[n+1],t),!!r&&(o=e[n],i&&(o.cp1x=cv(o.cp1x,t.left,t.right),o.cp1y=cv(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=cv(o.cp2x,t.left,t.right),o.cp2y=cv(o.cp2y,t.top,t.bottom)))}function HQe(e,t,n,s,o){let r,i,a,l;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")VQe(e,o);else{let u=s?e[e.length-1]:e[0];for(r=0,i=e.length;r<i;++r)a=e[r],l=LQe(u,a,e[Math.min(r+1,i-(s?0:1))%i],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}t.capBezierPoints&&WQe(e,n)}function hH(){return typeof window!="undefined"&&typeof document!="undefined"}function CT(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function e0(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const $1=e=>window.getComputedStyle(e,null);function UQe(e,t){return $1(e).getPropertyValue(t)}const jQe=["top","right","bottom","left"];function Bu(e,t,n){const s={};n=n?"-"+n:"";for(let o=0;o<4;o++){const r=jQe[o];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const GQe=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function KQe(e,t){const n=e.native||e,s=n.touches,o=s&&s.length?s[0]:n,{offsetX:r,offsetY:i}=o;let a=!1,l,u;if(GQe(r,i,n.target))l=r,u=i;else{const c=t.getBoundingClientRect();l=o.clientX-c.left,u=o.clientY-c.top,a=!0}return{x:l,y:u,box:a}}function pH(e,t){const{canvas:n,currentDevicePixelRatio:s}=t,o=$1(n),r=o.boxSizing==="border-box",i=Bu(o,"padding"),a=Bu(o,"border","width"),{x:l,y:u,box:c}=KQe(e,n),d=i.left+(c&&a.left),f=i.top+(c&&a.top);let{width:h,height:p}=t;return r&&(h-=i.width+a.width,p-=i.height+a.height),{x:Math.round((l-d)/h*n.width/s),y:Math.round((u-f)/p*n.height/s)}}function qQe(e,t,n){let s,o;if(t===void 0||n===void 0){const r=CT(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const i=r.getBoundingClientRect(),a=$1(r),l=Bu(a,"border","width"),u=Bu(a,"padding");t=i.width-u.width-l.width,n=i.height-u.height-l.height,s=e0(a.maxWidth,r,"clientWidth"),o=e0(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Zb,maxHeight:o||Zb}}const g$=e=>Math.round(e*10)/10;function YQe(e,t,n,s){const o=$1(e),r=Bu(o,"margin"),i=e0(o.maxWidth,e,"clientWidth")||Zb,a=e0(o.maxHeight,e,"clientHeight")||Zb,l=qQe(e,t,n);let{width:u,height:c}=l;if(o.boxSizing==="content-box"){const d=Bu(o,"border","width"),f=Bu(o,"padding");u-=f.width+d.width,c-=f.height+d.height}return u=Math.max(0,u-r.width),c=Math.max(0,s?Math.floor(u/s):c-r.height),u=g$(Math.min(u,i,l.maxWidth)),c=g$(Math.min(c,a,l.maxHeight)),u&&!c&&(c=g$(u/2)),{width:u,height:c}}function $O(e,t,n){const s=t||1,o=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=o/s,e.width=r/s;const i=e.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height=`${e.height}px`,i.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||i.height!==o||i.width!==r?(e.currentDevicePixelRatio=s,i.height=o,i.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const XQe=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function CO(e,t){const n=UQe(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function du(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function ZQe(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function JQe(e,t,n,s){const o={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},i=du(e,o,n),a=du(o,r,n),l=du(r,t,n),u=du(i,a,n),c=du(a,l,n);return du(u,c,n)}const xO=new Map;function QQe(e,t){t=t||{};const n=e+JSON.stringify(t);let s=xO.get(n);return s||(s=new Intl.NumberFormat(e,t),xO.set(n,s)),s}function fm(e,t,n){return QQe(t,n).format(e)}const eet=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},tet=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function gd(e,t,n){return e?eet(t,n):tet()}function gH(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function mH(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function vH(e){return e==="angle"?{between:yp,compare:GJe,normalize:hr}:{between:ba,compare:(t,n)=>t-n,normalize:t=>t}}function kO({start:e,end:t,count:n,loop:s,style:o}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:o}}function net(e,t,n){const{property:s,start:o,end:r}=n,{between:i,normalize:a}=vH(s),l=t.length;let{start:u,end:c,loop:d}=e,f,h;if(d){for(u+=l,c+=l,f=0,h=l;f<h&&i(a(t[u%l][s]),o,r);++f)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:d,style:e.style}}function bH(e,t,n){if(!n)return[e];const{property:s,start:o,end:r}=n,i=t.length,{compare:a,between:l,normalize:u}=vH(s),{start:c,end:d,loop:f,style:h}=net(e,t,n),p=[];let g=!1,m=null,v,b,$;const y=()=>l(o,$,v)&&a(o,$)!==0,w=()=>a(r,v)===0||l(r,$,v),C=()=>g||y(),x=()=>!g||w();for(let k=c,I=c;k<=d;++k)b=t[k%i],!b.skip&&(v=u(b[s]),v!==$&&(g=l(v,o,r),m===null&&C()&&(m=a(v,o)===0?k:I),m!==null&&x()&&(p.push(kO({start:m,end:k,loop:f,count:i,style:h})),m=null),I=k,$=v));return m!==null&&p.push(kO({start:m,end:d,loop:f,count:i,style:h})),p}function yH(e,t){const n=[],s=e.segments;for(let o=0;o<s.length;o++){const r=bH(s[o],e.points,t);r.length&&n.push(...r)}return n}function set(e,t,n,s){let o=0,r=t-1;if(n&&!s)for(;o<t&&!e[o].skip;)o++;for(;o<t&&e[o].skip;)o++;for(o%=t,n&&(r+=o);r>o&&e[r%t].skip;)r--;return r%=t,{start:o,end:r}}function oet(e,t,n,s){const o=e.length,r=[];let i=t,a=e[t],l;for(l=t+1;l<=n;++l){const u=e[l%o];u.skip||u.stop?a.skip||(s=!1,r.push({start:t%o,end:(l-1)%o,loop:s}),t=i=u.stop?l:null):(i=l,a.skip&&(t=l)),a=u}return i!==null&&r.push({start:t%o,end:i%o,loop:s}),r}function ret(e,t){const n=e.points,s=e.options.spanGaps,o=n.length;if(!o)return[];const r=!!e._loop,{start:i,end:a}=set(n,o,r,s);if(s===!0)return SO(e,[{start:i,end:a,loop:r}],n,t);const l=a<i?a+o:a,u=!!e._fullLoop&&i===0&&a===o-1;return SO(e,oet(n,i,l,u),n,t)}function SO(e,t,n,s){return!s||!s.setContext||!n?t:iet(e,t,n,s)}function iet(e,t,n,s){const o=e._chart.getContext(),r=IO(e.options),{_datasetIndex:i,options:{spanGaps:a}}=e,l=n.length,u=[];let c=r,d=t[0].start,f=d;function h(p,g,m,v){const b=a?-1:1;if(p!==g){for(p+=l;n[p%l].skip;)p-=b;for(;n[g%l].skip;)g+=b;p%l!==g%l&&(u.push({start:p%l,end:g%l,loop:m,style:v}),c=v,d=g%l)}}for(const p of t){d=a?d:p.start;let g=n[d%l],m;for(f=d+1;f<=p.end;f++){const v=n[f%l];m=IO(s.setContext(Wl(o,{type:"segment",p0:g,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:i}))),aet(m,c)&&h(d,f-1,p.loop,c),g=v,c=m}d<f-1&&h(d,f-1,p.loop,c)}return u}function IO(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function aet(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class uet{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,o){const r=n.listeners[o],i=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:i,currentStep:Math.min(s-n.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=K8.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,o)=>{if(!s.running||!s.items.length)return;const r=s.items;let i=r.length-1,a=!1,l;for(;i>=0;--i)l=r[i],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[i]=r[r.length-1],r.pop());a&&(o.draw(),this._notify(o,s,t,"progress")),r.length||(s.running=!1,this._notify(o,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,o)=>Math.max(s,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let o=s.length-1;for(;o>=0;--o)s[o].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var da=new uet;const TO="transparent",cet={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=mO(e||TO),o=s.valid&&mO(t||TO);return o&&o.valid?o.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class det{constructor(t,n,s,o){const r=n[s];o=hh([t.to,o,r,t.from]);const i=hh([t.from,r,o]);this._active=!0,this._fn=t.fn||cet[t.type||typeof i],this._easing=Ah[t.easing]||Ah.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=i,this._to=o,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const o=this._target[this._prop],r=s-this._start,i=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(i,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=hh([t.to,n,o,t.from]),this._from=hh([t.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,o=this._prop,r=this._from,i=this._loop,a=this._to;let l;if(this._active=r!==a&&(i||n<s),!this._active){this._target[o]=a,this._notify(!0);return}if(n<0){this._target[o]=r;return}l=n/s%2,l=i&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[o]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let o=0;o<s.length;o++)s[o][n]()}}const fet=["x","y","borderWidth","radius","tension"],het=["color","borderColor","backgroundColor"];wn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const pet=Object.keys(wn.animation);wn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"});wn.set("animations",{colors:{type:"color",properties:het},numbers:{type:"number",properties:fet}});wn.describe("animations",{_fallback:"animation"});wn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}});class xT{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ln(t))return;const n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!ln(o))return;const r={};for(const i of pet)r[i]=o[i];(Vn(o.properties)&&o.properties||[s]).forEach(i=>{(i===s||!n.has(i))&&n.set(i,r)})})}_animateOptions(t,n){const s=n.options,o=met(t,s);if(!o)return[];const r=this._createAnimations(o,s);return s.$shared&&get(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,o=[],r=t.$animations||(t.$animations={}),i=Object.keys(n),a=Date.now();let l;for(l=i.length-1;l>=0;--l){const u=i[l];if(u.charAt(0)==="$")continue;if(u==="options"){o.push(...this._animateOptions(t,n));continue}const c=n[u];let d=r[u];const f=s.get(u);if(d)if(f&&d.active()){d.update(f,c,a);continue}else d.cancel();if(!f||!f.duration){t[u]=c;continue}r[u]=d=new det(f,t,u,c),o.push(d)}return o}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return da.add(this._chart,s),!0}}function get(e,t){const n=[],s=Object.keys(t);for(let o=0;o<s.length;o++){const r=e[s[o]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function met(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function EO(e,t){const n=e&&e.options||{},s=n.reverse,o=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:o,end:s?o:r}}function vet(e,t,n){if(n===!1)return!1;const s=EO(e,n),o=EO(t,n);return{top:o.end,right:s.end,bottom:o.start,left:s.start}}function bet(e){let t,n,s,o;return ln(e)?(t=e.top,n=e.right,s=e.bottom,o=e.left):t=n=s=o=e,{top:t,right:n,bottom:s,left:o,disabled:e===!1}}function wH(e,t){const n=[],s=e._getSortedDatasetMetas(t);let o,r;for(o=0,r=s.length;o<r;++o)n.push(s[o].index);return n}function _O(e,t,n,s={}){const o=e.keys,r=s.mode==="single";let i,a,l,u;if(t!==null){for(i=0,a=o.length;i<a;++i){if(l=+o[i],l===n){if(s.all)continue;break}u=e.values[l],ws(u)&&(r||t===0||Yi(t)===Yi(u))&&(t+=u)}return t}}function yet(e){const t=Object.keys(e),n=new Array(t.length);let s,o,r;for(s=0,o=t.length;s<o;++s)r=t[s],n[s]={x:r,y:e[r]};return n}function NO(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function wet(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function $et(e){const{min:t,max:n,minDefined:s,maxDefined:o}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function Cet(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function AO(e,t,n,s){for(const o of t.getMatchingVisibleMetas(s).reverse()){const r=e[o.index];if(n&&r>0||!n&&r<0)return o.index}return null}function DO(e,t){const{chart:n,_cachedMeta:s}=e,o=n._stacks||(n._stacks={}),{iScale:r,vScale:i,index:a}=s,l=r.axis,u=i.axis,c=wet(r,i,s),d=t.length;let f;for(let h=0;h<d;++h){const p=t[h],{[l]:g,[u]:m}=p,v=p._stacks||(p._stacks={});f=v[u]=Cet(o,c,g),f[a]=m,f._top=AO(f,i,!0,s.type),f._bottom=AO(f,i,!1,s.type)}}function m$(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function xet(e,t){return Wl(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ket(e,t,n){return Wl(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Hf(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(!!s){t=t||e._parsed;for(const o of t){const r=o._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n]}}}const v$=e=>e==="reset"||e==="none",RO=(e,t)=>t?e:Object.assign({},e),Iet=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:wH(n,!0),values:null};class sa{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=NO(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Hf(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),o=(d,f,h,p)=>d==="x"?f:d==="r"?p:h,r=n.xAxisID=Gt(s.xAxisID,m$(t,"x")),i=n.yAxisID=Gt(s.yAxisID,m$(t,"y")),a=n.rAxisID=Gt(s.rAxisID,m$(t,"r")),l=n.indexAxis,u=n.iAxisID=o(l,r,i,a),c=n.vAxisID=o(l,i,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(i),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&bO(this._data,this),t._stacked&&Hf(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(ln(n))this._data=yet(n);else if(s!==n){if(s){bO(s,this);const o=this._cachedMeta;Hf(o),o._parsed=[]}n&&Object.isExtensible(n)&&TQe(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let o=!1;this._dataCheck();const r=n._stacked;n._stacked=NO(n.vScale,n),n.stack!==s.stack&&(o=!0,Hf(n),n.stack=s.stack),this._resyncElements(t),(o||r!==n._stacked)&&DO(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:o}=this,{iScale:r,_stacked:i}=s,a=r.axis;let l=t===0&&n===o.length?!0:s._sorted,u=t>0&&s._parsed[t-1],c,d,f;if(this._parsing===!1)s._parsed=o,s._sorted=!0,f=o;else{Vn(o[t])?f=this.parseArrayData(s,o,t,n):ln(o[t])?f=this.parseObjectData(s,o,t,n):f=this.parsePrimitiveData(s,o,t,n);const h=()=>d[a]===null||u&&d[a]<u[a];for(c=0;c<n;++c)s._parsed[c+t]=d=f[c],l&&(h()&&(l=!1),u=d);s._sorted=l}i&&DO(this,f)}parsePrimitiveData(t,n,s,o){const{iScale:r,vScale:i}=t,a=r.axis,l=i.axis,u=r.getLabels(),c=r===i,d=new Array(o);let f,h,p;for(f=0,h=o;f<h;++f)p=f+s,d[f]={[a]:c||r.parse(u[p],p),[l]:i.parse(n[p],p)};return d}parseArrayData(t,n,s,o){const{xScale:r,yScale:i}=t,a=new Array(o);let l,u,c,d;for(l=0,u=o;l<u;++l)c=l+s,d=n[c],a[l]={x:r.parse(d[0],c),y:i.parse(d[1],c)};return a}parseObjectData(t,n,s,o){const{xScale:r,yScale:i}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(o);let c,d,f,h;for(c=0,d=o;c<d;++c)f=c+s,h=n[f],u[c]={x:r.parse(nc(h,a),f),y:i.parse(nc(h,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const o=this.chart,r=this._cachedMeta,i=n[t.axis],a={keys:wH(o,!0),values:n._stacks[t.axis]};return _O(a,i,r.index,{mode:s})}updateRangeFromParsed(t,n,s,o){const r=s[n.axis];let i=r===null?NaN:r;const a=o&&s._stacks[n.axis];o&&a&&(o.values=a,i=_O(o,r,this._cachedMeta.index)),t.min=Math.min(t.min,i),t.max=Math.max(t.max,i)}getMinMax(t,n){const s=this._cachedMeta,o=s._parsed,r=s._sorted&&t===s.iScale,i=o.length,a=this._getOtherScale(t),l=Iet(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=$et(a);let f,h;function p(){h=o[f];const g=h[a.axis];return!ws(h[t.axis])||c>g||d<g}for(f=0;f<i&&!(!p()&&(this.updateRangeFromParsed(u,t,h,l),r));++f);if(r){for(f=i-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,h,l);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let o,r,i;for(o=0,r=n.length;o<r;++o)i=n[o][t.axis],ws(i)&&s.push(i);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,o=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:o?""+o.getLabelForValue(r[o.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=bet(Gt(this.options.clip,vet(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,o=s.data||[],r=n.chartArea,i=[],a=this._drawStart||0,l=this._drawCount||o.length-a,u=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(t,r,a,l),c=a;c<a+l;++c){const d=o[c];d.hidden||(d.active&&u?i.push(d):d.draw(t,r))}for(c=0;c<i.length;++c)i[c].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const o=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const i=this._cachedMeta.data[t];r=i.$context||(i.$context=ket(this.getContext(),t,i)),r.parsed=this.getParsed(t),r.raw=o.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=xet(this.chart.getContext(),this.index)),r.dataset=o,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const o=n==="active",r=this._cachedDataOpts,i=t+"-"+n,a=r[i],l=this.enableOptionSharing&&Us(s);if(a)return RO(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,t),d=o?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),c),h=Object.keys(wn.elements[t]),p=()=>this.getContext(s,o),g=u.resolveNamedOptions(f,h,p,d);return g.$shared&&(g.$shared=l,r[i]=Object.freeze(RO(g,l))),g}_resolveAnimations(t,n,s){const o=this.chart,r=this._cachedDataOpts,i=`animation-${n}`,a=r[i];if(a)return a;let l;if(o.options.animation!==!1){const c=this.chart.config,d=c.datasetAnimationScopeKeys(this._type,n),f=c.getOptionScopes(this.getDataset(),d);l=c.createResolver(f,this.getContext(t,s,n))}const u=new xT(o,l&&l.animations);return l&&l._cacheable&&(r[i]=Object.freeze(u)),u}getSharedOptions(t){if(!!t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||v$(t)||this.chart._animationsDisabled}updateElement(t,n,s,o){v$(o)?Object.assign(t,s):this._resolveAnimations(n,o).update(t,s)}updateSharedOptions(t,n,s){t&&!v$(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,o){t.active=o;const r=this.getStyle(n,o);this._resolveAnimations(n,s,o).update(t,{options:!o&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const o=s.length,r=n.length,i=Math.min(r,o);i&&this.parse(0,i),r>o?this._insertElements(o,r-o,t):r<o&&this._removeElements(r,o-r)}_insertElements(t,n,s=!0){const o=this._cachedMeta,r=o.data,i=t+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=i;a--)u[a]=u[a-n]};for(l(r),a=t;a<i;++a)r[a]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,o){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const o=s._parsed.splice(t,n);s._stacked&&Hf(s,o)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,o]=t;this[n](s,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}sa.defaults={};sa.prototype.datasetElementType=null;sa.prototype.dataElementType=null;function Tet(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let o=0,r=n.length;o<r;o++)s=s.concat(n[o].controller.getAllParsedValues(e));e._cache.$bar=aH(s.sort((o,r)=>o-r))}return e._cache.$bar}function Eet(e){const t=e.iScale,n=Tet(t,e.type);let s=t._length,o,r,i,a;const l=()=>{i===32767||i===-32768||(Us(a)&&(s=Math.min(s,Math.abs(i-a)||s)),a=i)};for(o=0,r=n.length;o<r;++o)i=t.getPixelForValue(n[o]),l();for(a=void 0,o=0,r=t.ticks.length;o<r;++o)i=t.getPixelForTick(o),l();return s}function _et(e,t,n,s){const o=n.barThickness;let r,i;return Rn(o)?(r=t.min*n.categoryPercentage,i=n.barPercentage):(r=o*s,i=1),{chunk:r/s,ratio:i,start:t.pixels[e]-r/2}}function Net(e,t,n,s){const o=t.pixels,r=o[e];let i=e>0?o[e-1]:null,a=e<o.length-1?o[e+1]:null;const l=n.categoryPercentage;i===null&&(i=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-i);const u=r-(r-Math.min(i,a))/2*l;return{chunk:Math.abs(a-i)/2*l/s,ratio:n.barPercentage,start:u}}function Aet(e,t,n,s){const o=n.parse(e[0],s),r=n.parse(e[1],s),i=Math.min(o,r),a=Math.max(o,r);let l=i,u=a;Math.abs(i)>Math.abs(a)&&(l=a,u=i),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:o,end:r,min:i,max:a}}function $H(e,t,n,s){return Vn(e)?Aet(e,t,n,s):t[n.axis]=n.parse(e,s),t}function OO(e,t,n,s){const o=e.iScale,r=e.vScale,i=o.getLabels(),a=o===r,l=[];let u,c,d,f;for(u=n,c=n+s;u<c;++u)f=t[u],d={},d[o.axis]=a||o.parse(i[u],u),l.push($H(f,d,r,u));return l}function b$(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Det(e,t,n){return e!==0?Yi(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Ret(e){let t,n,s,o,r;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(o="end",r="start"):(o="start",r="end"),{start:n,end:s,reverse:t,top:o,bottom:r}}function Oet(e,t,n,s){let o=t.borderSkipped;const r={};if(!o){e.borderSkipped=r;return}const{start:i,end:a,reverse:l,top:u,bottom:c}=Ret(e);o==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?o=u:(n._bottom||0)===s?o=c:(r[MO(c,i,a,l)]=!0,o=u)),r[MO(o,i,a,l)]=!0,e.borderSkipped=r}function MO(e,t,n,s){return s?(e=Met(e,t,n),e=PO(e,n,t)):e=PO(e,t,n),e}function Met(e,t,n){return e===t?n:e===n?t:e}function PO(e,t,n){return e==="start"?t:e==="end"?n:e}function Pet(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class C1 extends sa{parsePrimitiveData(t,n,s,o){return OO(t,n,s,o)}parseArrayData(t,n,s,o){return OO(t,n,s,o)}parseObjectData(t,n,s,o){const{iScale:r,vScale:i}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=r.axis==="x"?a:l,c=i.axis==="x"?a:l,d=[];let f,h,p,g;for(f=s,h=s+o;f<h;++f)g=n[f],p={},p[r.axis]=r.parse(nc(g,u),f),d.push($H(nc(g,c),p,i,f));return d}updateRangeFromParsed(t,n,s,o){super.updateRangeFromParsed(t,n,s,o);const r=s._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:o}=n,r=this.getParsed(t),i=r._custom,a=b$(i)?"["+i.start+", "+i.end+"]":""+o.getLabelForValue(r[o.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,o){const r=o==="reset",{index:i,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),c=this._getRuler(),d=this.resolveDataElementOptions(n,o),f=this.getSharedOptions(d),h=this.includeOptions(o,f);this.updateSharedOptions(f,o,d);for(let p=n;p<n+s;p++){const g=this.getParsed(p),m=r||Rn(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,c),b=(g._stacks||{})[a.axis],$={horizontal:u,base:m.base,enableBorderRadius:!b||b$(g._custom)||i===b._top||i===b._bottom,x:u?m.head:v.center,y:u?v.center:m.head,height:u?v.size:Math.abs(m.size),width:u?Math.abs(m.size):v.size};h&&($.options=f||this.resolveDataElementOptions(p,t[p].active?"active":o));const y=$.options||t[p].options;Oet($,y,b,i),Pet($,y,c.ratio),this.updateElement(t[p],p,$,o)}}_getStacks(t,n){const o=this._cachedMeta.iScale,r=o.getMatchingVisibleMetas(this._type),i=o.options.stacked,a=r.length,l=[];let u,c;for(u=0;u<a;++u)if(c=r[u],!!c.controller.options.grouped){if(typeof n!="undefined"){const d=c.controller.getParsed(n)[c.controller._cachedMeta.vScale.axis];if(Rn(d)||isNaN(d))continue}if((i===!1||l.indexOf(c.stack)===-1||i===void 0&&c.stack===void 0)&&l.push(c.stack),c.index===t)break}return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,s){const o=this._getStacks(t,s),r=n!==void 0?o.indexOf(n):-1;return r===-1?o.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,o=[];let r,i;for(r=0,i=n.data.length;r<i;++r)o.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||Eet(n),pixels:o,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s},options:{base:o,minBarLength:r}}=this,i=o||0,a=this.getParsed(t),l=a._custom,u=b$(l);let c=a[n.axis],d=0,f=s?this.applyStack(n,a,s):c,h,p;f!==c&&(d=f-c,f=c),u&&(c=l.barStart,f=l.barEnd-l.barStart,c!==0&&Yi(c)!==Yi(l.barEnd)&&(d=0),d+=c);const g=!Rn(o)&&!u?o:d;let m=n.getPixelForValue(g);if(this.chart.getDataVisibility(t)?h=n.getPixelForValue(d+f):h=m,p=h-m,Math.abs(p)<r&&(p=Det(p,n,i)*r,c===i&&(m-=p/2),h=m+p),m===n.getPixelForValue(i)){const v=Yi(p)*n.getLineWidthForValue(i)/2;m+=v,p-=v}return{size:p,base:m,head:h,center:h+p/2}}_calculateBarIndexPixels(t,n){const s=n.scale,o=this.options,r=o.skipNull,i=Gt(o.maxBarThickness,1/0);let a,l;if(n.grouped){const u=r?this._getStackCount(t):n.stackCount,c=o.barThickness==="flex"?Net(t,n,o,u):_et(t,n,o,u),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=c.start+c.chunk*d+c.chunk/2,l=Math.min(i,c.chunk*c.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(i,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,o=s.length;let r=0;for(;r<o;++r)this.getParsed(r)[n.axis]!==null&&s[r].draw(this._ctx)}}C1.id="bar";C1.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};C1.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class x1 extends sa{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,s,o){const r=super.parsePrimitiveData(t,n,s,o);for(let i=0;i<r.length;i++)r[i]._custom=this.resolveDataElementOptions(i+s).radius;return r}parseArrayData(t,n,s,o){const r=super.parseArrayData(t,n,s,o);for(let i=0;i<r.length;i++){const a=n[s+i];r[i]._custom=Gt(a[2],this.resolveDataElementOptions(i+s).radius)}return r}parseObjectData(t,n,s,o){const r=super.parseObjectData(t,n,s,o);for(let i=0;i<r.length;i++){const a=n[s+i];r[i]._custom=Gt(a&&a.r&&+a.r,this.resolveDataElementOptions(i+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let s=t.length-1;s>=0;--s)n=Math.max(n,t[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,{xScale:s,yScale:o}=n,r=this.getParsed(t),i=s.getLabelForValue(r.x),a=o.getLabelForValue(r.y),l=r._custom;return{label:n.label,value:"("+i+", "+a+(l?", "+l:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,s,o){const r=o==="reset",{iScale:i,vScale:a}=this._cachedMeta,l=this.resolveDataElementOptions(n,o),u=this.getSharedOptions(l),c=this.includeOptions(o,u),d=i.axis,f=a.axis;for(let h=n;h<n+s;h++){const p=t[h],g=!r&&this.getParsed(h),m={},v=m[d]=r?i.getPixelForDecimal(.5):i.getPixelForValue(g[d]),b=m[f]=r?a.getBasePixel():a.getPixelForValue(g[f]);m.skip=isNaN(v)||isNaN(b),c&&(m.options=this.resolveDataElementOptions(h,p.active?"active":o),r&&(m.options.radius=0)),this.updateElement(p,h,m,o)}this.updateSharedOptions(u,o,l)}resolveDataElementOptions(t,n){const s=this.getParsed(t);let o=super.resolveDataElementOptions(t,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const r=o.radius;return n!=="active"&&(o.radius=0),o.radius+=Gt(s&&s._custom,r),o}}x1.id="bubble";x1.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};x1.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function Fet(e,t,n){let s=1,o=1,r=0,i=0;if(t<ts){const a=e,l=a+t,u=Math.cos(a),c=Math.sin(a),d=Math.cos(l),f=Math.sin(l),h=($,y,w)=>yp($,a,l,!0)?1:Math.max(y,y*n,w,w*n),p=($,y,w)=>yp($,a,l,!0)?-1:Math.min(y,y*n,w,w*n),g=h(0,u,d),m=h(Cs,c,f),v=p(Fn,u,d),b=p(Fn+Cs,c,f);s=(g-v)/2,o=(m-b)/2,r=-(g+v)/2,i=-(m+b)/2}return{ratioX:s,ratioY:o,offsetX:r,offsetY:i}}class If extends sa{constructor(t,n){super(t,n);this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=s;else{let r=l=>+s[l];if(ln(s[t])){const{key:l="value"}=this._parsing;r=u=>+nc(s[u],l)}let i,a;for(i=t,a=t+n;i<a;++i)o._parsed[i]=r(i)}}_getRotation(){return ro(this.options.rotation-90)}_getCircumference(){return ro(this.options.circumference)}_getRotationExtents(){let t=ts,n=-ts;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){const o=this.chart.getDatasetMeta(s).controller,r=o._getRotation(),i=o._getCircumference();t=Math.min(t,r),n=Math.max(n,r+i)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,o=this._cachedMeta,r=o.data,i=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-i)/2,0),l=Math.min(FJe(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:p,offsetY:g}=Fet(d,c,l),m=(s.width-i)/f,v=(s.height-i)/h,b=Math.max(Math.min(m,v)/2,0),$=Y8(this.options.radius,b),y=Math.max($*l,0),w=($-y)/this._getVisibleDatasetWeightTotal();this.offsetX=p*$,this.offsetY=g*$,o.total=this.calculateTotal(),this.outerRadius=$-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,o=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*r/ts)}updateElements(t,n,s,o){const r=o==="reset",i=this.chart,a=i.chartArea,u=i.options.animation,c=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&u.animateScale,h=f?0:this.innerRadius,p=f?0:this.outerRadius,g=this.resolveDataElementOptions(n,o),m=this.getSharedOptions(g),v=this.includeOptions(o,m);let b=this._getRotation(),$;for($=0;$<n;++$)b+=this._circumference($,r);for($=n;$<n+s;++$){const y=this._circumference($,r),w=t[$],C={x:c+this.offsetX,y:d+this.offsetY,startAngle:b,endAngle:b+y,circumference:y,outerRadius:p,innerRadius:h};v&&(C.options=m||this.resolveDataElementOptions($,w.active?"active":o)),b+=y,this.updateElement(w,$,C,o)}this.updateSharedOptions(m,o,g)}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,o;for(o=0;o<n.length;o++){const r=t._parsed[o];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?ts*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=fm(n._parsed[t],s.options.locale);return{label:o[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let o,r,i,a,l;if(!t){for(o=0,r=s.data.datasets.length;o<r;++o)if(s.isDatasetVisible(o)){i=s.getDatasetMeta(o),t=i.data,a=i.controller;break}}if(!t)return 0;for(o=0,r=t.length;o<r;++o)l=a.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,o=t.length;s<o;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(Gt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}If.id="doughnut";If.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};If.descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"};If.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((s,o)=>{const i=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){let t=e.label;const n=": "+e.formattedValue;return Vn(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class hm extends sa{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:o=[],_dataset:r}=n,i=this.chart._animationsDisabled;let{start:a,count:l}=Let(n,o,i);this._drawStart=a,this._drawCount=l,Bet(n)&&(a=0,l=o.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=o;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!i,options:u},t),this.updateElements(o,a,l,t)}updateElements(t,n,s,o){const r=o==="reset",{iScale:i,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(n,o),d=this.getSharedOptions(c),f=this.includeOptions(o,d),h=i.axis,p=a.axis,{spanGaps:g,segment:m}=this.options,v=vp(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||o==="none";let $=n>0&&this.getParsed(n-1);for(let y=n;y<n+s;++y){const w=t[y],C=this.getParsed(y),x=b?w:{},k=Rn(C[p]),I=x[h]=i.getPixelForValue(C[h],y),S=x[p]=r||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[p],y);x.skip=isNaN(I)||isNaN(S)||k,x.stop=y>0&&C[h]-$[h]>v,m&&(x.parsed=C,x.raw=u.data[y]),f&&(x.options=d||this.resolveDataElementOptions(y,w.active?"active":o)),b||this.updateElement(w,y,x,o),$=C}this.updateSharedOptions(d,o,c)}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,o=t.data||[];if(!o.length)return s;const r=o[0].size(this.resolveDataElementOptions(0)),i=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(s,r,i)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}hm.id="line";hm.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};hm.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function Let(e,t,n){const s=t.length;let o=0,r=s;if(e._sorted){const{iScale:i,_parsed:a}=e,l=i.axis,{min:u,max:c,minDefined:d,maxDefined:f}=i.getUserBounds();d&&(o=io(Math.min(ya(a,i.axis,u).lo,n?s:ya(t,l,i.getPixelForValue(u)).lo),0,s-1)),f?r=io(Math.max(ya(a,i.axis,c).hi+1,n?0:ya(t,l,i.getPixelForValue(c)).hi+1),o,s)-o:r=s-o}return{start:o,count:r}}function Bet(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,o={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=o,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,o),r}class k1 extends sa{constructor(t,n){super(t,n);this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=fm(n._parsed[t].r,s.options.locale);return{label:o[t]||"",value:r}}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}_updateRadius(){const t=this.chart,n=t.chartArea,s=t.options,o=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(o/2,0),i=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-i)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,s,o){const r=o==="reset",i=this.chart,a=this.getDataset(),u=i.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,f=c.yCenter,h=c.getIndexAngle(0)-.5*Fn;let p=h,g;const m=360/this.countVisibleElements();for(g=0;g<n;++g)p+=this._computeAngle(g,o,m);for(g=n;g<n+s;g++){const v=t[g];let b=p,$=p+this._computeAngle(g,o,m),y=i.getDataVisibility(g)?c.getDistanceFromCenterForValue(a.data[g]):0;p=$,r&&(u.animateScale&&(y=0),u.animateRotate&&(b=$=h));const w={x:d,y:f,innerRadius:0,outerRadius:y,startAngle:b,endAngle:$,options:this.resolveDataElementOptions(g,v.active?"active":o)};this.updateElement(v,g,w,o)}}countVisibleElements(){const t=this.getDataset(),n=this._cachedMeta;let s=0;return n.data.forEach((o,r)=>{!isNaN(t.data[r])&&this.chart.getDataVisibility(r)&&s++}),s}_computeAngle(t,n,s){return this.chart.getDataVisibility(t)?ro(this.resolveDataElementOptions(t,n).angle||s):0}}k1.id="polarArea";k1.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};k1.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((s,o)=>{const i=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class kT extends If{}kT.id="pie";kT.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class S1 extends sa{getLabelAndValue(t){const n=this._cachedMeta.vScale,s=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(s[n.axis])}}update(t){const n=this._cachedMeta,s=n.dataset,o=n.data||[],r=n.iScale.getLabels();if(s.points=o,t!=="resize"){const i=this.resolveDatasetElementOptions(t);this.options.showLine||(i.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===o.length,options:i};this.updateElement(s,void 0,a,t)}this.updateElements(o,0,o.length,t)}updateElements(t,n,s,o){const r=this.getDataset(),i=this._cachedMeta.rScale,a=o==="reset";for(let l=n;l<n+s;l++){const u=t[l],c=this.resolveDataElementOptions(l,u.active?"active":o),d=i.getPointPositionForValue(l,r.data[l]),f=a?i.xCenter:d.x,h=a?i.yCenter:d.y,p={x:f,y:h,angle:d.angle,skip:isNaN(f)||isNaN(h),options:c};this.updateElement(u,l,p,o)}}}S1.id="radar";S1.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};S1.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class I1 extends hm{}I1.id="scatter";I1.defaults={showLine:!1,fill:!1};I1.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var zet=Object.freeze({__proto__:null,BarController:C1,BubbleController:x1,DoughnutController:If,LineController:hm,PolarAreaController:k1,PieController:kT,RadarController:S1,ScatterController:I1});function su(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Dx{constructor(t){this.options=t||{}}formats(){return su()}parse(t,n){return su()}format(t,n){return su()}add(t,n,s){return su()}diff(t,n,s){return su()}startOf(t,n,s){return su()}endOf(t,n){return su()}}Dx.override=function(e){Object.assign(Dx.prototype,e)};var Vet={_date:Dx};function ph(e,t){return"native"in e?{x:e.x,y:e.y}:pH(e,t)}function Wet(e,t){const n=e.getSortedVisibleDatasetMetas();let s,o,r;for(let i=0,a=n.length;i<a;++i){({index:s,data:o}=n[i]);for(let l=0,u=o.length;l<u;++l)r=o[l],r.skip||t(r,s,l)}}function Het(e,t,n,s){const{controller:o,data:r,_sorted:i}=e,a=o._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&i&&r.length){const l=a._reversePixels?SQe:ya;if(s){if(o._sharedOptions){const u=r[0],c=typeof u.getRange=="function"&&u.getRange(t);if(c){const d=l(r,t,n-c),f=l(r,t,n+c);return{lo:d.lo,hi:f.hi}}}}else return l(r,t,n)}return{lo:0,hi:r.length-1}}function ST(e,t,n,s,o){const r=e.getSortedVisibleDatasetMetas(),i=n[t];for(let a=0,l=r.length;a<l;++a){const{index:u,data:c}=r[a],{lo:d,hi:f}=Het(r[a],t,i,o);for(let h=d;h<=f;++h){const p=c[h];p.skip||s(p,u,h)}}}function Uet(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,o){const r=t?Math.abs(s.x-o.x):0,i=n?Math.abs(s.y-o.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(i,2))}}function y$(e,t,n,s){const o=[];return oc(t,e.chartArea,e._minPadding)&&ST(e,n,t,function(i,a,l){i.inRange(t.x,t.y,s)&&o.push({element:i,datasetIndex:a,index:l})},!0),o}function jet(e,t,n,s){let o=[];function r(i,a,l){const{startAngle:u,endAngle:c}=i.getProps(["startAngle","endAngle"],s),{angle:d}=Q8(i,{x:t.x,y:t.y});yp(d,u,c)&&o.push({element:i,datasetIndex:a,index:l})}return ST(e,n,t,r),o}function Get(e,t,n,s,o){let r=[];const i=Uet(n);let a=Number.POSITIVE_INFINITY;function l(u,c,d){const f=u.inRange(t.x,t.y,o);if(s&&!f)return;const h=u.getCenterPoint(o);if(!oc(h,e.chartArea,e._minPadding)&&!f)return;const g=i(t,h);g<a?(r=[{element:u,datasetIndex:c,index:d}],a=g):g===a&&r.push({element:u,datasetIndex:c,index:d})}return ST(e,n,t,l),r}function w$(e,t,n,s,o){return oc(t,e.chartArea,e._minPadding)?n==="r"&&!s?jet(e,t,n,o):Get(e,t,n,s,o):[]}function FO(e,t,n,s){const o=ph(t,e),r=[],i=n.axis,a=i==="x"?"inXRange":"inYRange";let l=!1;return Wet(e,(u,c,d)=>{u[a](o[i],s)&&r.push({element:u,datasetIndex:c,index:d}),u.inRange(o.x,o.y,s)&&(l=!0)}),n.intersect&&!l?[]:r}var Ket={modes:{index(e,t,n,s){const o=ph(t,e),r=n.axis||"x",i=n.intersect?y$(e,o,r,s):w$(e,o,r,!1,s),a=[];return i.length?(e.getSortedVisibleDatasetMetas().forEach(l=>{const u=i[0].index,c=l.data[u];c&&!c.skip&&a.push({element:c,datasetIndex:l.index,index:u})}),a):[]},dataset(e,t,n,s){const o=ph(t,e),r=n.axis||"xy";let i=n.intersect?y$(e,o,r,s):w$(e,o,r,!1,s);if(i.length>0){const a=i[0].datasetIndex,l=e.getDatasetMeta(a).data;i=[];for(let u=0;u<l.length;++u)i.push({element:l[u],datasetIndex:a,index:u})}return i},point(e,t,n,s){const o=ph(t,e),r=n.axis||"xy";return y$(e,o,r,s)},nearest(e,t,n,s){const o=ph(t,e),r=n.axis||"xy";return w$(e,o,r,n.intersect,s)},x(e,t,n,s){return FO(e,t,{axis:"x",intersect:n.intersect},s)},y(e,t,n,s){return FO(e,t,{axis:"y",intersect:n.intersect},s)}}};const CH=["left","top","right","bottom"];function Uf(e,t){return e.filter(n=>n.pos===t)}function LO(e,t){return e.filter(n=>CH.indexOf(n.pos)===-1&&n.box.axis===t)}function jf(e,t){return e.sort((n,s)=>{const o=t?s:n,r=t?n:s;return o.weight===r.weight?o.index-r.index:o.weight-r.weight})}function qet(e){const t=[];let n,s,o,r,i,a;for(n=0,s=(e||[]).length;n<s;++n)o=e[n],{position:r,options:{stack:i,stackWeight:a=1}}=o,t.push({index:n,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:i&&r+i,stackWeight:a});return t}function Yet(e){const t={};for(const n of e){const{stack:s,pos:o,stackWeight:r}=n;if(!s||!CH.includes(o))continue;const i=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=r}return t}function Xet(e,t){const n=Yet(e),{vBoxMaxWidth:s,hBoxMaxHeight:o}=t;let r,i,a;for(r=0,i=e.length;r<i;++r){a=e[r];const{fullSize:l}=a.box,u=n[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*s:l&&t.availableWidth,a.height=o):(a.width=s,a.height=c?c*o:l&&t.availableHeight)}return n}function Zet(e){const t=qet(e),n=jf(t.filter(u=>u.box.fullSize),!0),s=jf(Uf(t,"left"),!0),o=jf(Uf(t,"right")),r=jf(Uf(t,"top"),!0),i=jf(Uf(t,"bottom")),a=LO(t,"x"),l=LO(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:o.concat(l).concat(i).concat(a),chartArea:Uf(t,"chartArea"),vertical:s.concat(o).concat(l),horizontal:r.concat(i).concat(a)}}function BO(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function xH(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Jet(e,t,n,s){const{pos:o,box:r}=n,i=e.maxPadding;if(!ln(o)){n.size&&(e[o]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[o]+=n.size}r.getPadding&&xH(i,r.getPadding());const a=Math.max(0,t.outerWidth-BO(i,e,"left","right")),l=Math.max(0,t.outerHeight-BO(i,e,"top","bottom")),u=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function Qet(e){const t=e.maxPadding;function n(s){const o=Math.max(t[s]-e[s],0);return e[s]+=o,o}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function ett(e,t){const n=t.maxPadding;function s(o){const r={left:0,top:0,right:0,bottom:0};return o.forEach(i=>{r[i]=Math.max(t[i],n[i])}),r}return s(e?["left","right"]:["top","bottom"])}function gh(e,t,n,s){const o=[];let r,i,a,l,u,c;for(r=0,i=e.length,u=0;r<i;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,ett(a.horizontal,t));const{same:d,other:f}=Jet(t,n,a,s);u|=d&&o.length,c=c||f,l.fullSize||o.push(a)}return u&&gh(o,t,n,s)||c}function dv(e,t,n,s,o){e.top=n,e.left=t,e.right=t+s,e.bottom=n+o,e.width=s,e.height=o}function zO(e,t,n,s){const o=n.padding;let{x:r,y:i}=t;for(const a of e){const l=a.box,u=s[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*c,f=u.size||l.height;Us(u.start)&&(i=u.start),l.fullSize?dv(l,o.left,i,n.outerWidth-o.right-o.left,f):dv(l,t.left+u.placed,i,d,f),u.start=i,u.placed+=d,i=l.bottom}else{const d=t.h*c,f=u.size||l.width;Us(u.start)&&(r=u.start),l.fullSize?dv(l,r,o.top,f,n.outerHeight-o.bottom-o.top):dv(l,r,t.top+u.placed,f,d),u.start=r,u.placed+=d,r=l.right}}t.x=r,t.y=i}wn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ao={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const o=Js(e.options.layout.padding),r=Math.max(t-o.width,0),i=Math.max(n-o.height,0),a=Zet(e.boxes),l=a.vertical,u=a.horizontal;jn(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const c=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:o,availableWidth:r,availableHeight:i,vBoxMaxWidth:r/2/c,hBoxMaxHeight:i/2}),f=Object.assign({},o);xH(f,Js(s));const h=Object.assign({maxPadding:f,w:r,h:i,x:o.left,y:o.top},o),p=Xet(l.concat(u),d);gh(a.fullSize,h,d,p),gh(l,h,d,p),gh(u,h,d,p)&&gh(l,h,d,p),Qet(h),zO(a.leftAndTop,h,d,p),h.x+=h.w,h.y+=h.h,zO(a.rightAndBottom,h,d,p),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},jn(a.chartArea,g=>{const m=g.box;Object.assign(m,e.chartArea),m.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class kH{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,o){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,o?Math.floor(n/o):s)}}isAttached(t){return!0}updateConfig(t){}}class ttt extends kH{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ob="$chartjs",ntt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},VO=e=>e===null||e==="";function stt(e,t){const n=e.style,s=e.getAttribute("height"),o=e.getAttribute("width");if(e[ob]={initial:{height:s,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",VO(o)){const r=CO(e,"width");r!==void 0&&(e.width=r)}if(VO(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=CO(e,"height");r!==void 0&&(e.height=r)}return e}const SH=XQe?{passive:!0}:!1;function ott(e,t,n){e.addEventListener(t,n,SH)}function rtt(e,t,n){e.canvas.removeEventListener(t,n,SH)}function itt(e,t){const n=ntt[e.type]||e.type,{x:s,y:o}=pH(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:o!==void 0?o:null}}function t0(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function att(e,t,n){const s=e.canvas,o=new MutationObserver(r=>{let i=!1;for(const a of r)i=i||t0(a.addedNodes,s),i=i&&!t0(a.removedNodes,s);i&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function ltt(e,t,n){const s=e.canvas,o=new MutationObserver(r=>{let i=!1;for(const a of r)i=i||t0(a.removedNodes,s),i=i&&!t0(a.addedNodes,s);i&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const xp=new Map;let WO=0;function IH(){const e=window.devicePixelRatio;e!==WO&&(WO=e,xp.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function utt(e,t){xp.size||window.addEventListener("resize",IH),xp.set(e,t)}function ctt(e){xp.delete(e),xp.size||window.removeEventListener("resize",IH)}function dtt(e,t,n){const s=e.canvas,o=s&&CT(s);if(!o)return;const r=q8((a,l)=>{const u=o.clientWidth;n(a,l),u<o.clientWidth&&n()},window),i=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||r(u,c)});return i.observe(o),utt(e,r),i}function $$(e,t,n){n&&n.disconnect(),t==="resize"&&ctt(e)}function ftt(e,t,n){const s=e.canvas,o=q8(r=>{e.ctx!==null&&n(itt(r,e))},e,r=>{const i=r[0];return[i,i.offsetX,i.offsetY]});return ott(s,t,o),o}class htt extends kH{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(stt(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[ob])return!1;const s=n[ob].initial;["height","width"].forEach(r=>{const i=s[r];Rn(i)?n.removeAttribute(r):n.setAttribute(r,i)});const o=s.style||{};return Object.keys(o).forEach(r=>{n.style[r]=o[r]}),n.width=n.width,delete n[ob],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const o=t.$proxies||(t.$proxies={}),i={attach:att,detach:ltt,resize:dtt}[n]||ftt;o[n]=i(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),o=s[n];if(!o)return;({attach:$$,detach:$$,resize:$$}[n]||rtt)(t,n,o),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,o){return YQe(t,n,s,o)}isAttached(t){const n=CT(t);return!!(n&&n.isConnected)}}function ptt(e){return!hH()||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas?ttt:htt}class To{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return vp(this.x)&&vp(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const o={};return t.forEach(r=>{o[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),o}}To.defaults={};To.defaultRoutes=void 0;const TH={values(e){return Vn(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let o,r=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(o="scientific"),r=gtt(e,n)}const i=Br(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),fm(e,s,l)},logarithmic(e,t,n){if(e===0)return"0";const s=e/Math.pow(10,Math.floor(Br(e)));return s===1||s===2||s===5?TH.numeric.call(this,e,t,n):""}};function gtt(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var T1={formatters:TH};wn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:T1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});wn.route("scale.ticks","color","","color");wn.route("scale.grid","color","","borderColor");wn.route("scale.grid","borderColor","","borderColor");wn.route("scale.title","color","","color");wn.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"});wn.describe("scales",{_fallback:"scale"});wn.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"});function mtt(e,t){const n=e.options.ticks,s=n.maxTicksLimit||vtt(e),o=n.major.enabled?ytt(t):[],r=o.length,i=o[0],a=o[r-1],l=[];if(r>s)return wtt(t,l,o,r/s),l;const u=btt(o,t,s);if(r>0){let c,d;const f=r>1?Math.round((a-i)/(r-1)):null;for(fv(t,l,u,Rn(f)?0:i-f,i),c=0,d=r-1;c<d;c++)fv(t,l,u,o[c],o[c+1]);return fv(t,l,u,a,Rn(f)?t.length:a+f),l}return fv(t,l,u),l}function vtt(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),o=e._maxLength/n;return Math.floor(Math.min(s,o))}function btt(e,t,n){const s=$tt(e),o=t.length/n;if(!s)return Math.max(o,1);const r=UJe(s);for(let i=0,a=r.length-1;i<a;i++){const l=r[i];if(l>o)return l}return Math.max(o,1)}function ytt(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function wtt(e,t,n,s){let o=0,r=n[0],i;for(s=Math.ceil(s),i=0;i<e.length;i++)i===r&&(t.push(e[i]),o++,r=n[o*s])}function fv(e,t,n,s,o){const r=Gt(s,0),i=Math.min(Gt(o,e.length),e.length);let a=0,l,u,c;for(n=Math.ceil(n),o&&(l=o-s,n=l/Math.floor(l/n)),c=r;c<0;)a++,c=Math.round(r+a*n);for(u=Math.max(r,0);u<i;u++)u===c&&(t.push(e[u]),a++,c=Math.round(r+a*n))}function $tt(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const Ctt=e=>e==="left"?"right":e==="right"?"left":e,HO=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n;function UO(e,t){const n=[],s=e.length/t,o=e.length;let r=0;for(;r<o;r+=s)n.push(e[Math.floor(r)]);return n}function xtt(e,t,n){const s=e.ticks.length,o=Math.min(t,s-1),r=e._startPixel,i=e._endPixel,a=1e-6;let l=e.getPixelForTick(o),u;if(!(n&&(s===1?u=Math.max(l-r,i-l):t===0?u=(e.getPixelForTick(1)-l)/2:u=(l-e.getPixelForTick(o-1))/2,l+=o<t?u:-u,l<r-a||l>i+a)))return l}function ktt(e,t){jn(e,n=>{const s=n.gc,o=s.length/2;let r;if(o>t){for(r=0;r<o;++r)delete n.data[s[r]];s.splice(0,o)}})}function Gf(e){return e.drawTicks?e.tickLength:0}function jO(e,t){if(!e.display)return 0;const n=Ds(e.font,t),s=Js(e.padding);return(Vn(e.text)?e.text.length:1)*n.lineHeight+s.height}function Stt(e,t){return Wl(e,{scale:t,type:"scale"})}function Itt(e,t,n){return Wl(e,{tick:n,index:t,type:"tick"})}function Ttt(e,t,n){let s=cT(e);return(n&&t!=="right"||!n&&t==="right")&&(s=Ctt(s)),s}function Ett(e,t,n,s){const{top:o,left:r,bottom:i,right:a,chart:l}=e,{chartArea:u,scales:c}=l;let d=0,f,h,p;const g=i-o,m=a-r;if(e.isHorizontal()){if(h=Eo(s,r,a),ln(n)){const v=Object.keys(n)[0],b=n[v];p=c[v].getPixelForValue(b)+g-t}else n==="center"?p=(u.bottom+u.top)/2+g-t:p=HO(e,n,t);f=a-r}else{if(ln(n)){const v=Object.keys(n)[0],b=n[v];h=c[v].getPixelForValue(b)-m+t}else n==="center"?h=(u.left+u.right)/2-m+t:h=HO(e,n,t);p=Eo(s,i,o),d=n==="left"?-Cs:Cs}return{titleX:h,titleY:p,maxWidth:f,rotation:d}}class Cc extends To{constructor(t){super();this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:o}=this;return t=Dr(t,Number.POSITIVE_INFINITY),n=Dr(n,Number.NEGATIVE_INFINITY),s=Dr(s,Number.POSITIVE_INFINITY),o=Dr(o,Number.NEGATIVE_INFINITY),{min:Dr(t,s),max:Dr(n,o),minDefined:ws(t),maxDefined:ws(n)}}getMinMax(t){let{min:n,max:s,minDefined:o,maxDefined:r}=this.getUserBounds(),i;if(o&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)i=a[l].controller.getMinMax(this,t),o||(n=Math.min(n,i.min)),r||(s=Math.max(s,i.max));return n=r&&n>s?s:n,s=o&&n>s?n:s,{min:Dr(n,Dr(s,n)),max:Dr(s,Dr(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zn(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:o,grace:r,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=kQe(this,r,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?UO(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||i.source==="auto")&&(this.ticks=mtt(this,this.ticks),this._labelSizes=null),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zn(this.options.afterUpdate,[this])}beforeSetDimensions(){Zn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Zn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,o,r;for(s=0,o=t.length;s<o;s++)r=t[s],r.label=Zn(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Zn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=this.ticks.length,o=n.minRotation||0,r=n.maxRotation;let i=o,a,l,u;if(!this._isVisible()||!n.display||o>=r||s<=1||!this.isHorizontal()){this.labelRotation=o;return}const c=this._getLabelSizes(),d=c.widest.width,f=c.highest.height,h=io(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:h/(s-1),d+6>a&&(a=h/(s-(t.offset?.5:1)),l=this.maxHeight-Gf(t.grid)-n.padding-jO(t.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),i=fT(Math.min(Math.asin(io((c.highest.height+6)/a,-1,1)),Math.asin(io(l/u,-1,1))-Math.asin(io(f/u,-1,1)))),i=Math.max(o,Math.min(r,i))),this.labelRotation=i}afterCalculateLabelRotation(){Zn(this.options.afterCalculateLabelRotation,[this])}beforeFit(){Zn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:o,grid:r}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const l=jO(o,n.options.font);if(a?(t.width=this.maxWidth,t.height=Gf(r)+l):(t.height=this.maxHeight,t.width=Gf(r)+l),s.display&&this.ticks.length){const{first:u,last:c,widest:d,highest:f}=this._getLabelSizes(),h=s.padding*2,p=ro(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const v=s.mirror?0:m*d.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+v+h)}else{const v=s.mirror?0:g*d.width+m*f.height;t.width=Math.min(this.maxWidth,t.width+v+h)}this._calculatePadding(u,c,m,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,o){const{ticks:{align:r,padding:i},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?u?(f=o*t.width,h=s*n.height):(f=s*t.height,h=o*n.width):r==="start"?h=n.width:r==="end"?f=t.width:(f=t.width/2,h=n.width/2),this.paddingLeft=Math.max((f-c+i)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-d+i)*this.width/(this.width-d),0)}else{let c=n.height/2,d=t.height/2;r==="start"?(c=0,d=t.height):r==="end"&&(c=n.height,d=0),this.paddingTop=c+i,this.paddingBottom=d+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)Rn(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=UO(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length)}return t}_computeLabelSizes(t,n){const{ctx:s,_longestTextCache:o}=this,r=[],i=[];let a=0,l=0,u,c,d,f,h,p,g,m,v,b,$;for(u=0;u<n;++u){if(f=t[u].label,h=this._resolveTickFontOptions(u),s.font=p=h.string,g=o[p]=o[p]||{data:{},gc:[]},m=h.lineHeight,v=b=0,!Rn(f)&&!Vn(f))v=Qb(s,g.data,g.gc,v,f),b=m;else if(Vn(f))for(c=0,d=f.length;c<d;++c)$=f[c],!Rn($)&&!Vn($)&&(v=Qb(s,g.data,g.gc,v,$),b+=m);r.push(v),i.push(b),a=Math.max(v,a),l=Math.max(b,l)}ktt(o,n);const y=r.indexOf(a),w=i.indexOf(l),C=x=>({width:r[x]||0,height:i[x]||0});return{first:C(0),last:C(n-1),widest:C(y),highest:C(w),widths:r,heights:i}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return KJe(this._alignToPixels?nu(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=Itt(this.getContext(),t,s))}return this.$context||(this.$context=Stt(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=ro(this.labelRotation),s=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),r=this._getLabelSizes(),i=t.autoSkipPadding||0,a=r?r.widest.width+i:0,l=r?r.highest.height+i:0;return this.isHorizontal()?l*s>a*o?a/s:l/o:l*o<a*s?l/s:a/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,o=this.options,{grid:r,position:i}=o,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),d=Gf(r),f=[],h=r.setContext(this.getContext()),p=h.drawBorder?h.borderWidth:0,g=p/2,m=function(M){return nu(s,M,p)};let v,b,$,y,w,C,x,k,I,S,T,_;if(i==="top")v=m(this.bottom),C=this.bottom-d,k=v-g,S=m(t.top)+g,_=t.bottom;else if(i==="bottom")v=m(this.top),S=t.top,_=m(t.bottom)-g,C=v+g,k=this.top+d;else if(i==="left")v=m(this.right),w=this.right-d,x=v-g,I=m(t.left)+g,T=t.right;else if(i==="right")v=m(this.left),I=t.left,T=m(t.right)-g,w=v+g,x=this.left+d;else if(n==="x"){if(i==="center")v=m((t.top+t.bottom)/2+.5);else if(ln(i)){const M=Object.keys(i)[0],D=i[M];v=m(this.chart.scales[M].getPixelForValue(D))}S=t.top,_=t.bottom,C=v+g,k=C+d}else if(n==="y"){if(i==="center")v=m((t.left+t.right)/2);else if(ln(i)){const M=Object.keys(i)[0],D=i[M];v=m(this.chart.scales[M].getPixelForValue(D))}w=v-g,x=w-d,I=t.left,T=t.right}const N=Gt(o.ticks.maxTicksLimit,c),O=Math.max(1,Math.ceil(c/N));for(b=0;b<c;b+=O){const M=r.setContext(this.getContext(b)),D=M.lineWidth,F=M.color,V=r.borderDash||[],U=M.borderDashOffset,ne=M.tickWidth,be=M.tickColor,te=M.tickBorderDash||[],he=M.tickBorderDashOffset;$=xtt(this,b,a),$!==void 0&&(y=nu(s,$,D),l?w=x=I=T=y:C=k=S=_=y,f.push({tx1:w,ty1:C,tx2:x,ty2:k,x1:I,y1:S,x2:T,y2:_,width:D,color:F,borderDash:V,borderDashOffset:U,tickWidth:ne,tickColor:be,tickBorderDash:te,tickBorderDashOffset:he}))}return this._ticksLength=c,this._borderValue=v,f}_computeLabelItems(t){const n=this.axis,s=this.options,{position:o,ticks:r}=s,i=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:d}=r,f=Gf(s.grid),h=f+c,p=d?-c:h,g=-ro(this.labelRotation),m=[];let v,b,$,y,w,C,x,k,I,S,T,_,N="middle";if(o==="top")C=this.bottom-p,x=this._getXAxisLabelAlignment();else if(o==="bottom")C=this.top+p,x=this._getXAxisLabelAlignment();else if(o==="left"){const M=this._getYAxisLabelAlignment(f);x=M.textAlign,w=M.x}else if(o==="right"){const M=this._getYAxisLabelAlignment(f);x=M.textAlign,w=M.x}else if(n==="x"){if(o==="center")C=(t.top+t.bottom)/2+h;else if(ln(o)){const M=Object.keys(o)[0],D=o[M];C=this.chart.scales[M].getPixelForValue(D)+h}x=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")w=(t.left+t.right)/2-h;else if(ln(o)){const M=Object.keys(o)[0],D=o[M];w=this.chart.scales[M].getPixelForValue(D)}x=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?N="top":l==="end"&&(N="bottom"));const O=this._getLabelSizes();for(v=0,b=a.length;v<b;++v){$=a[v],y=$.label;const M=r.setContext(this.getContext(v));k=this.getPixelForTick(v)+r.labelOffset,I=this._resolveTickFontOptions(v),S=I.lineHeight,T=Vn(y)?y.length:1;const D=T/2,F=M.color,V=M.textStrokeColor,U=M.textStrokeWidth;i?(w=k,o==="top"?u==="near"||g!==0?_=-T*S+S/2:u==="center"?_=-O.highest.height/2-D*S+S:_=-O.highest.height+S/2:u==="near"||g!==0?_=S/2:u==="center"?_=O.highest.height/2-D*S:_=O.highest.height-T*S,d&&(_*=-1)):(C=k,_=(1-T)*S/2);let ne;if(M.showLabelBackdrop){const be=Js(M.backdropPadding),te=O.heights[v],he=O.widths[v];let oe=C+_-be.top,G=w-be.left;switch(N){case"middle":oe-=te/2;break;case"bottom":oe-=te;break}switch(x){case"center":G-=he/2;break;case"right":G-=he;break}ne={left:G,top:oe,width:he+be.width,height:te+be.height,color:M.backdropColor}}m.push({rotation:g,label:y,font:I,color:F,strokeColor:V,strokeWidth:U,textOffset:_,textAlign:x,textBaseline:N,translation:[w,C],backdrop:ne})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-ro(this.labelRotation))return t==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"&&(o="right"),o}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:o,padding:r}}=this.options,i=this._getLabelSizes(),a=t+r,l=i.widest.width;let u,c;return n==="left"?o?(c=this.right+r,s==="near"?u="left":s==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,s==="near"?u="right":s==="center"?(u="center",c-=l/2):(u="left",c=this.left)):n==="right"?o?(c=this.left+r,s==="near"?u="right":s==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,s==="near"?u="left":s==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:o,width:r,height:i}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,o,r,i),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(r=>r.value===t);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,i;const a=(l,u,c)=>{!c.width||!c.color||(s.save(),s.lineWidth=c.width,s.strokeStyle=c.color,s.setLineDash(c.borderDash||[]),s.lineDashOffset=c.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(r=0,i=o.length;r<i;++r){const l=o[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{grid:s}}=this,o=s.setContext(this.getContext()),r=s.drawBorder?o.borderWidth:0;if(!r)return;const i=s.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,u,c,d;this.isHorizontal()?(l=nu(t,this.left,r)-r/2,u=nu(t,this.right,i)+i/2,c=d=a):(c=nu(t,this.top,r)-r/2,d=nu(t,this.bottom,i)+i/2,l=u=a),n.save(),n.lineWidth=o.borderWidth,n.strokeStyle=o.borderColor,n.beginPath(),n.moveTo(l,c),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,o=this._computeLabelArea();o&&cm(s,o);const r=this._labelItems||(this._labelItems=this._computeLabelItems(t));let i,a;for(i=0,a=r.length;i<a;++i){const l=r[i],u=l.font,c=l.label;l.backdrop&&(s.fillStyle=l.backdrop.color,s.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let d=l.textOffset;rc(s,c,0,d,u,l)}o&&dm(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:o}}=this;if(!s.display)return;const r=Ds(s.font),i=Js(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ln(n)?(l+=i.bottom,Vn(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=i.top;const{titleX:u,titleY:c,maxWidth:d,rotation:f}=Ett(this,l,n,a);rc(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:Ttt(a,n,o),textBaseline:"middle",translation:[u,c]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Gt(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==Cc.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s+1,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",o=[];let r,i;for(r=0,i=n.length;r<i;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&o.push(a)}return o}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Ds(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class hv{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;Att(n)&&(s=this.register(n));const o=this.items,r=t.id,i=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in o||(o[r]=t,_tt(t,i,s),this.override&&wn.override(t.id,t.overrides)),i}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,o=this.scope;s in n&&delete n[s],o&&s in wn[o]&&(delete wn[o][s],this.override&&delete sc[s])}}function _tt(e,t,n){const s=mp(Object.create(null),[n?wn.get(n):{},wn.get(t),e.defaults]);wn.set(t,s),e.defaultRoutes&&Ntt(t,e.defaultRoutes),e.descriptors&&wn.describe(t,e.descriptors)}function Ntt(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),o=s.pop(),r=[e].concat(s).join("."),i=t[n].split("."),a=i.pop(),l=i.join(".");wn.route(r,o,l,a)})}function Att(e){return"id"in e&&"defaults"in e}class Dtt{constructor(){this.controllers=new hv(sa,"datasets",!0),this.elements=new hv(To,"elements"),this.plugins=new hv(Object,"plugins"),this.scales=new hv(Cc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(o=>{const r=s||this._getRegistryForType(o);s||r.isForType(o)||r===this.plugins&&o.id?this._exec(t,r,o):jn(o,i=>{const a=s||this._getRegistryForType(i);this._exec(t,a,i)})})}_exec(t,n,s){const o=dT(t);Zn(s["before"+o],[],s),n[t](s),Zn(s["after"+o],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const o=n.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return o}}var wa=new Dtt;class Rtt{constructor(){this._init=[]}notify(t,n,s,o){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=o?this._descriptors(t).filter(o):this._descriptors(t),i=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),i}_notify(t,n,s,o){o=o||{};for(const r of t){const i=r.plugin,a=i[s],l=[n,o,r.options];if(Zn(a,l,i)===!1&&o.cancelable)return!1}return!0}invalidate(){Rn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,o=Gt(s.options&&s.options.plugins,{}),r=Ott(s);return o===!1&&!n?[]:Ptt(t,r,o,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,o=(r,i)=>r.filter(a=>!i.some(l=>a.plugin.id===l.plugin.id));this._notify(o(n,s),t,"stop"),this._notify(o(s,n),t,"start")}}function Ott(e){const t=[],n=Object.keys(wa.plugins.items);for(let o=0;o<n.length;o++)t.push(wa.getPlugin(n[o]));const s=e.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];t.indexOf(r)===-1&&t.push(r)}return t}function Mtt(e,t){return!t&&e===!1?null:e===!0?{}:e}function Ptt(e,t,n,s){const o=[],r=e.getContext();for(let i=0;i<t.length;i++){const a=t[i],l=a.id,u=Mtt(n[l],s);u!==null&&o.push({plugin:a,options:Ftt(e.config,a,u,r)})}return o}function Ftt(e,t,n,s){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Rx(e,t){const n=wn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Ltt(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Btt(e,t){return e===t?"_index_":"_value_"}function ztt(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Ox(e,t){return e==="x"||e==="y"?e:t.axis||ztt(t.position)||e.charAt(0).toLowerCase()}function Vtt(e,t){const n=sc[e.type]||{scales:{}},s=t.scales||{},o=Rx(e.type,t),r=Object.create(null),i=Object.create(null);return Object.keys(s).forEach(a=>{const l=s[a];if(!ln(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=Ox(a,l),c=Btt(u,o),d=n.scales||{};r[u]=r[u]||a,i[a]=_h(Object.create(null),[{axis:u},l,d[u],d[c]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,u=a.indexAxis||Rx(l,t),d=(sc[l]||{}).scales||{};Object.keys(d).forEach(f=>{const h=Ltt(f,u),p=a[h+"AxisID"]||r[h]||h;i[p]=i[p]||Object.create(null),_h(i[p],[{axis:h},s[p],d[f]])})}),Object.keys(i).forEach(a=>{const l=i[a];_h(l,[wn.scales[l.type],wn.scale])}),i}function EH(e){const t=e.options||(e.options={});t.plugins=Gt(t.plugins,{}),t.scales=Vtt(e,t)}function _H(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Wtt(e){return e=e||{},e.data=_H(e.data),EH(e),e}const GO=new Map,NH=new Set;function pv(e,t){let n=GO.get(e);return n||(n=t(),GO.set(e,n),NH.add(n)),n}const Kf=(e,t,n)=>{const s=nc(t,n);s!==void 0&&e.add(s)};class Htt{constructor(t){this._config=Wtt(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=_H(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),EH(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return pv(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return pv(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return pv(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return pv(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let o=s.get(t);return(!o||n)&&(o=new Map,s.set(t,o)),o}getOptionScopes(t,n,s){const{options:o,type:r}=this,i=this._cachedScopes(t,s),a=i.get(n);if(a)return a;const l=new Set;n.forEach(c=>{t&&(l.add(t),c.forEach(d=>Kf(l,t,d))),c.forEach(d=>Kf(l,o,d)),c.forEach(d=>Kf(l,sc[r]||{},d)),c.forEach(d=>Kf(l,wn,d)),c.forEach(d=>Kf(l,Ax,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),NH.has(n)&&i.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,sc[n]||{},wn.datasets[n]||{},{type:n},wn,Ax]}resolveNamedOptions(t,n,s,o=[""]){const r={$shared:!0},{resolver:i,subPrefixes:a}=KO(this._resolverCache,t,o);let l=i;if(jtt(i,n)){r.$shared=!1,s=Cl(s)?s():s;const u=this.createResolver(t,s,a);l=jd(i,s,u)}for(const u of n)r[u]=l[u];return r}createResolver(t,n,s=[""],o){const{resolver:r}=KO(this._resolverCache,t,s);return ln(n)?jd(r,n,void 0,o):r}}function KO(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const o=n.join();let r=s.get(o);return r||(r={resolver:yT(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(o,r)),r}const Utt=e=>ln(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||Cl(e[n]),!1);function jtt(e,t){const{isScriptable:n,isIndexable:s}=lH(e);for(const o of t){const r=n(o),i=s(o),a=(i||r)&&e[o];if(r&&(Cl(a)||Utt(a))||i&&Vn(a))return!0}return!1}var Gtt="3.7.1";const Ktt=["top","bottom","left","right","chartArea"];function qO(e,t){return e==="top"||e==="bottom"||Ktt.indexOf(e)===-1&&t==="x"}function YO(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function XO(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Zn(n&&n.onComplete,[e],t)}function qtt(e){const t=e.chart,n=t.options.animation;Zn(n&&n.onProgress,[e],t)}function AH(e){return hH()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const n0={},DH=e=>{const t=AH(e);return Object.values(n0).filter(n=>n.canvas===t).pop()};function Ytt(e,t,n){const s=Object.keys(e);for(const o of s){const r=+o;if(r>=t){const i=e[o];delete e[o],(n>0||r>t)&&(e[r+n]=i)}}}function Xtt(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}class Tu{constructor(t,n){const s=this.config=new Htt(n),o=AH(t),r=DH(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const i=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||ptt(o)),this.platform.updateConfig(s);const a=this.platform.acquireContext(o,i.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=PJe(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Rtt,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=OJe(d=>this.update(d),i.resizeDelay||0),this._dataChanges=[],n0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}da.listen(this,"complete",XO),da.listen(this,"progress",qtt),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:o,_aspectRatio:r}=this;return Rn(t)?n&&r?r:o?s/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$O(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vO(this.canvas,this.ctx),this}stop(){return da.stop(this),this}resize(t,n){da.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,o=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(o,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,!!$O(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),Zn(s.onResize,[this,i],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};jn(n,(s,o)=>{s.id=o})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,o=Object.keys(s).reduce((i,a)=>(i[a]=!1,i),{});let r=[];n&&(r=r.concat(Object.keys(n).map(i=>{const a=n[i],l=Ox(i,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),jn(r,i=>{const a=i.options,l=a.id,u=Ox(l,a),c=Gt(a.type,i.dtype);(a.position===void 0||qO(a.position,u)!==qO(i.dposition))&&(a.position=i.dposition),o[l]=!0;let d=null;if(l in s&&s[l].type===c)d=s[l];else{const f=wa.getScale(c);d=new f({id:l,type:c,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),jn(o,(i,a)=>{i||delete s[a]}),jn(s,i=>{Ao.configure(this,i,i.options),Ao.addBox(this,i)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((o,r)=>o.index-r.index),s>n){for(let o=n;o<s;++o)this._destroyDatasetMeta(o);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(YO("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,o)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,o;for(this._removeUnreferencedMetasets(),s=0,o=n.length;s<o;s++){const r=n[s];let i=this.getDatasetMeta(s);const a=r.type||this.config.type;if(i.type&&i.type!==a&&(this._destroyDatasetMeta(s),i=this.getDatasetMeta(s)),i.type=a,i.indexAxis=r.indexAxis||Rx(a,this.options),i.order=r.order||0,i.index=s,i.label=""+r.label,i.visible=this.isDatasetVisible(s),i.controller)i.controller.updateIndex(s),i.controller.linkScales();else{const l=wa.getController(a),{datasetElementType:u,dataElementType:c}=wn.datasets[a];Object.assign(l.prototype,{dataElementType:wa.getElement(c),datasetElementType:u&&wa.getElement(u)}),i.controller=new l(this,s),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){jn(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:d}=this.getDatasetMeta(u),f=!o&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),i=Math.max(+d.getMaxOverflow(),i)}i=this._minPadding=s.layout.autoPadding?i:0,this._updateLayout(i),o||jn(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(YO("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){jn(this.scales,t=>{Ao.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!iO(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:o,count:r}of n){const i=s==="_removeElements"?-r:r;Ytt(t,o,i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(i=>i[0]===r).map((i,a)=>a+","+i.splice(1).join(","))),o=s(0);for(let r=1;r<n;r++)if(!iO(o,s(r)))return;return Array.from(o).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ao.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],jn(this.boxes,o=>{s&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,r)=>{o._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Cl(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),o={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(s.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(da.has(this)?this.attached&&!da.running(this)&&da.start(this):(this.draw(),XO({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:o}=this._resizeBeforeDraw;this._resize(s,o),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let o,r;for(o=0,r=n.length;o<r;++o){const i=n[o];(!t||i.visible)&&s.push(i)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s=t._clip,o=!s.disabled,r=this.chartArea,i={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&cm(n,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),o&&dm(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}getElementsAtEventForMode(t,n,s,o){const r=Ket.modes[n];return typeof r=="function"?r(this,t,s,o):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let o=s.filter(r=>r&&r._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(o)),o}getContext(){return this.$context||(this.$context=Wl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const o=s?"show":"hide",r=this.getDatasetMeta(t),i=r.controller._resolveAnimations(void 0,o);Us(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),i.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?o:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),da.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),vO(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete n0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,i)=>{n.addEventListener(this,r,i),t[r]=i},o=(r,i,a)=>{r.offsetX=i,r.offsetY=a,this._eventHandler(r)};jn(this.options.events,r=>s(r,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),t[l]=u},o=(l,u)=>{t[l]&&(n.removeEventListener(this,l,u),delete t[l])},r=(l,u)=>{this.canvas&&this.resize(l,u)};let i;const a=()=>{o("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",i)};i=()=>{this.attached=!1,o("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():i()}unbindEvents(){jn(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},jn(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const o=s?"set":"remove";let r,i,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+o+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){i=t[a];const u=i&&this.getDatasetMeta(i.datasetIndex).controller;u&&u[o+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:i})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[i],index:i}});!Yb(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}_updateHoverStyles(t,n,s){const o=this.options.hover,r=(l,u)=>l.filter(c=>!u.some(d=>c.datasetIndex===d.datasetIndex&&c.index===d.index)),i=r(n,t),a=s?t:r(t,n);i.length&&this.updateHoverStyle(i,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:oc(t,this.chartArea,this._minPadding)},o=i=>(i.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,o)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,o),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:o=[],options:r}=this,i=n,a=this._getActiveElements(t,o,s,i),l=WJe(t),u=Xtt(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Zn(r.onHover,[t,a,this],this),l&&Zn(r.onClick,[t,a,this],this));const c=!Yb(a,o);return(c||n)&&(this._active=a,this._updateHoverStyles(a,o,n)),this._lastEvent=u,c}_getActiveElements(t,n,s,o){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,o)}}const ZO=()=>jn(Tu.instances,e=>e._plugins.invalidate()),Ga=!0;Object.defineProperties(Tu,{defaults:{enumerable:Ga,value:wn},instances:{enumerable:Ga,value:n0},overrides:{enumerable:Ga,value:sc},registry:{enumerable:Ga,value:wa},version:{enumerable:Ga,value:Gtt},getChart:{enumerable:Ga,value:DH},register:{enumerable:Ga,value:(...e)=>{wa.add(...e),ZO()}},unregister:{enumerable:Ga,value:(...e)=>{wa.remove(...e),ZO()}}});function RH(e,t,n){const{startAngle:s,pixelMargin:o,x:r,y:i,outerRadius:a,innerRadius:l}=t;let u=o/a;e.beginPath(),e.arc(r,i,a,s-u,n+u),l>o?(u=o/l,e.arc(r,i,l,n+u,s-u,!0)):e.arc(r,i,o,n+Cs,s-Cs),e.closePath(),e.clip()}function Ztt(e){return vT(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Jtt(e,t,n,s){const o=Ztt(e.options.borderRadius),r=(n-t)/2,i=Math.min(r,s*t/2),a=l=>{const u=(n-Math.min(r,l))*s/2;return io(l,0,Math.min(r,u))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:io(o.innerStart,0,i),innerEnd:io(o.innerEnd,0,i)}}function Gc(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Mx(e,t,n,s,o){const{x:r,y:i,startAngle:a,pixelMargin:l,innerRadius:u}=t,c=Math.max(t.outerRadius+s+n-l,0),d=u>0?u+s+n+l:0;let f=0;const h=o-a;if(s){const D=u>0?u-s:0,F=c>0?c-s:0,V=(D+F)/2,U=V!==0?h*V/(V+s):h;f=(h-U)/2}const p=Math.max(.001,h*c-n/Fn)/c,g=(h-p)/2,m=a+g+f,v=o-g-f,{outerStart:b,outerEnd:$,innerStart:y,innerEnd:w}=Jtt(t,d,c,v-m),C=c-b,x=c-$,k=m+b/C,I=v-$/x,S=d+y,T=d+w,_=m+y/S,N=v-w/T;if(e.beginPath(),e.arc(r,i,c,k,I),$>0){const D=Gc(x,I,r,i);e.arc(D.x,D.y,$,I,v+Cs)}const O=Gc(T,v,r,i);if(e.lineTo(O.x,O.y),w>0){const D=Gc(T,N,r,i);e.arc(D.x,D.y,w,v+Cs,N+Math.PI)}if(e.arc(r,i,d,v-w/d,m+y/d,!0),y>0){const D=Gc(S,_,r,i);e.arc(D.x,D.y,y,_+Math.PI,m-Cs)}const M=Gc(C,m,r,i);if(e.lineTo(M.x,M.y),b>0){const D=Gc(C,k,r,i);e.arc(D.x,D.y,b,m-Cs,k)}e.closePath()}function Qtt(e,t,n,s){const{fullCircles:o,startAngle:r,circumference:i}=t;let a=t.endAngle;if(o){Mx(e,t,n,s,r+ts);for(let l=0;l<o;++l)e.fill();isNaN(i)||(a=r+i%ts,i%ts===0&&(a+=ts))}return Mx(e,t,n,s,a),e.fill(),a}function ent(e,t,n){const{x:s,y:o,startAngle:r,pixelMargin:i,fullCircles:a}=t,l=Math.max(t.outerRadius-i,0),u=t.innerRadius+i;let c;for(n&&RH(e,t,r+ts),e.beginPath(),e.arc(s,o,u,r+ts,r,!0),c=0;c<a;++c)e.stroke();for(e.beginPath(),e.arc(s,o,l,r,r+ts),c=0;c<a;++c)e.stroke()}function tnt(e,t,n,s,o){const{options:r}=t,{borderWidth:i,borderJoinStyle:a}=r,l=r.borderAlign==="inner";!i||(l?(e.lineWidth=i*2,e.lineJoin=a||"round"):(e.lineWidth=i,e.lineJoin=a||"bevel"),t.fullCircles&&ent(e,t,l),l&&RH(e,t,o),Mx(e,t,n,s,o),e.stroke())}class E1 extends To{constructor(t){super();this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const o=this.getProps(["x","y"],s),{angle:r,distance:i}=Q8(o,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=this.options.spacing/2,p=Gt(d,l-a)>=ts||yp(r,a,l),g=ba(i,u+f,c+f);return p&&g}getCenterPoint(t){const{x:n,y:s,startAngle:o,endAngle:r,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:l,spacing:u}=this.options,c=(o+r)/2,d=(i+a+u+l)/2;return{x:n+Math.cos(c)*d,y:s+Math.sin(c)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,o=(n.offset||0)/2,r=(n.spacing||0)/2;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>ts?Math.floor(s/ts):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let i=0;if(o){i=o/2;const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*i,Math.sin(l)*i),this.circumference>=Fn&&(i=o)}t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor;const a=Qtt(t,this,i,r);tnt(t,this,i,r,a),t.restore()}}E1.id="arc";E1.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};E1.defaultRoutes={backgroundColor:"backgroundColor"};function OH(e,t,n=t){e.lineCap=Gt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Gt(n.borderDash,t.borderDash)),e.lineDashOffset=Gt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Gt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Gt(n.borderWidth,t.borderWidth),e.strokeStyle=Gt(n.borderColor,t.borderColor)}function nnt(e,t,n){e.lineTo(n.x,n.y)}function snt(e){return e.stepped?mQe:e.tension||e.cubicInterpolationMode==="monotone"?vQe:nnt}function MH(e,t,n={}){const s=e.length,{start:o=0,end:r=s-1}=n,{start:i,end:a}=t,l=Math.max(o,i),u=Math.min(r,a),c=o<i&&r<i||o>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:u<l&&!c?s+u-l:u-l}}function ont(e,t,n,s){const{points:o,options:r}=t,{count:i,start:a,loop:l,ilen:u}=MH(o,n,s),c=snt(r);let{move:d=!0,reverse:f}=s||{},h,p,g;for(h=0;h<=u;++h)p=o[(a+(f?u-h:h))%i],!p.skip&&(d?(e.moveTo(p.x,p.y),d=!1):c(e,g,p,f,r.stepped),g=p);return l&&(p=o[(a+(f?u:0))%i],c(e,g,p,f,r.stepped)),!!l}function rnt(e,t,n,s){const o=t.points,{count:r,start:i,ilen:a}=MH(o,n,s),{move:l=!0,reverse:u}=s||{};let c=0,d=0,f,h,p,g,m,v;const b=y=>(i+(u?a-y:y))%r,$=()=>{g!==m&&(e.lineTo(c,m),e.lineTo(c,g),e.lineTo(c,v))};for(l&&(h=o[b(0)],e.moveTo(h.x,h.y)),f=0;f<=a;++f){if(h=o[b(f)],h.skip)continue;const y=h.x,w=h.y,C=y|0;C===p?(w<g?g=w:w>m&&(m=w),c=(d*c+y)/++d):($(),e.lineTo(y,w),p=C,d=0,g=m=w),v=w}$()}function Px(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?rnt:ont}function int(e){return e.stepped?ZQe:e.tension||e.cubicInterpolationMode==="monotone"?JQe:du}function ant(e,t,n,s){let o=t._path;o||(o=t._path=new Path2D,t.path(o,n,s)&&o.closePath()),OH(e,t.options),e.stroke(o)}function lnt(e,t,n,s){const{segments:o,options:r}=t,i=Px(t);for(const a of o)OH(e,r,a.style),e.beginPath(),i(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const unt=typeof Path2D=="function";function cnt(e,t,n,s){unt&&!t.options.segment?ant(e,t,n,s):lnt(e,t,n,s)}class Hl extends To{constructor(t){super();this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const o=s.spanGaps?this._loop:this._fullLoop;HQe(this._points,s,t,o,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ret(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,o=t[n],r=this.points,i=yH(this,{property:n,start:o,end:o});if(!i.length)return;const a=[],l=int(s);let u,c;for(u=0,c=i.length;u<c;++u){const{start:d,end:f}=i[u],h=r[d],p=r[f];if(h===p){a.push(h);continue}const g=Math.abs((o-h[n])/(p[n]-h[n])),m=l(h,p,g,s.stepped);m[n]=t[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,n,s){return Px(this)(t,this,n,s)}path(t,n,s){const o=this.segments,r=Px(this);let i=this._loop;n=n||0,s=s||this.points.length-n;for(const a of o)i&=r(t,this,a,{start:n,end:n+s-1});return!!i}draw(t,n,s,o){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),cnt(t,this,s,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Hl.id="line";Hl.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};Hl.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};Hl.descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};function JO(e,t,n,s){const o=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<o.radius+o.hitRadius}class _1 extends To{constructor(t){super();this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const o=this.options,{x:r,y:i}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(n-i,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,n){return JO(this,t,"x",n)}inYRange(t,n){return JO(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!oc(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,$p(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}_1.id="point";_1.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};_1.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function PH(e,t){const{x:n,y:s,base:o,width:r,height:i}=e.getProps(["x","y","base","width","height"],t);let a,l,u,c,d;return e.horizontal?(d=i/2,a=Math.min(n,o),l=Math.max(n,o),u=s-d,c=s+d):(d=r/2,a=n-d,l=n+d,u=Math.min(s,o),c=Math.max(s,o)),{left:a,top:u,right:l,bottom:c}}function il(e,t,n,s){return e?0:io(t,n,s)}function dnt(e,t,n){const s=e.options.borderWidth,o=e.borderSkipped,r=rH(s);return{t:il(o.top,r.top,0,n),r:il(o.right,r.right,0,t),b:il(o.bottom,r.bottom,0,n),l:il(o.left,r.left,0,t)}}function fnt(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,r=Lu(o),i=Math.min(t,n),a=e.borderSkipped,l=s||ln(o);return{topLeft:il(!l||a.top||a.left,r.topLeft,0,i),topRight:il(!l||a.top||a.right,r.topRight,0,i),bottomLeft:il(!l||a.bottom||a.left,r.bottomLeft,0,i),bottomRight:il(!l||a.bottom||a.right,r.bottomRight,0,i)}}function hnt(e){const t=PH(e),n=t.right-t.left,s=t.bottom-t.top,o=dnt(e,n/2,s/2),r=fnt(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:r},inner:{x:t.left+o.l,y:t.top+o.t,w:n-o.l-o.r,h:s-o.t-o.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,r.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(o.b,o.r))}}}}function C$(e,t,n,s){const o=t===null,r=n===null,a=e&&!(o&&r)&&PH(e,s);return a&&(o||ba(t,a.left,a.right))&&(r||ba(n,a.top,a.bottom))}function pnt(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function gnt(e,t){e.rect(t.x,t.y,t.w,t.h)}function x$(e,t,n={}){const s=e.x!==n.x?-t:0,o=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-s,i=(e.y+e.h!==n.y+n.h?t:0)-o;return{x:e.x+s,y:e.y+o,w:e.w+r,h:e.h+i,radius:e.radius}}class N1 extends To{constructor(t){super();this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:o}}=this,{inner:r,outer:i}=hnt(this),a=pnt(i.radius)?Cp:gnt;t.save(),(i.w!==r.w||i.h!==r.h)&&(t.beginPath(),a(t,x$(i,n,r)),t.clip(),a(t,x$(r,-n,i)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,x$(r,n)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,n,s){return C$(this,t,n,s)}inXRange(t,n){return C$(this,t,null,n)}inYRange(t,n){return C$(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:o,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+o)/2:n,y:r?s:(s+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}N1.id="bar";N1.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};N1.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var mnt=Object.freeze({__proto__:null,ArcElement:E1,LineElement:Hl,PointElement:_1,BarElement:N1});function vnt(e,t,n,s,o){const r=o.samples||s;if(r>=n)return e.slice(t,t+n);const i=[],a=(n-2)/(r-2);let l=0;const u=t+n-1;let c=t,d,f,h,p,g;for(i[l++]=e[c],d=0;d<r-2;d++){let m=0,v=0,b;const $=Math.floor((d+1)*a)+1+t,y=Math.min(Math.floor((d+2)*a)+1,n)+t,w=y-$;for(b=$;b<y;b++)m+=e[b].x,v+=e[b].y;m/=w,v/=w;const C=Math.floor(d*a)+1+t,x=Math.min(Math.floor((d+1)*a)+1,n)+t,{x:k,y:I}=e[c];for(h=p=-1,b=C;b<x;b++)p=.5*Math.abs((k-m)*(e[b].y-I)-(k-e[b].x)*(v-I)),p>h&&(h=p,f=e[b],g=b);i[l++]=f,c=g}return i[l++]=e[u],i}function bnt(e,t,n,s){let o=0,r=0,i,a,l,u,c,d,f,h,p,g;const m=[],v=t+n-1,b=e[t].x,y=e[v].x-b;for(i=t;i<t+n;++i){a=e[i],l=(a.x-b)/y*s,u=a.y;const w=l|0;if(w===c)u<p?(p=u,d=i):u>g&&(g=u,f=i),o=(r*o+a.x)/++r;else{const C=i-1;if(!Rn(d)&&!Rn(f)){const x=Math.min(d,f),k=Math.max(d,f);x!==h&&x!==C&&m.push(zt(ut({},e[x]),{x:o})),k!==h&&k!==C&&m.push(zt(ut({},e[k]),{x:o}))}i>0&&C!==h&&m.push(e[C]),m.push(a),c=w,r=0,p=g=u,d=f=h=i}}return m}function FH(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function QO(e){e.data.datasets.forEach(t=>{FH(t)})}function ynt(e,t){const n=t.length;let s=0,o;const{iScale:r}=e,{min:i,max:a,minDefined:l,maxDefined:u}=r.getUserBounds();return l&&(s=io(ya(t,r.axis,i).lo,0,n-1)),u?o=io(ya(t,r.axis,a).hi+1,s,n)-s:o=n-s,{start:s,count:o}}var wnt={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){QO(e);return}const s=e.width;e.data.datasets.forEach((o,r)=>{const{_data:i,indexAxis:a}=o,l=e.getDatasetMeta(r),u=i||o.data;if(hh([a,e.options.indexAxis])==="y"||l.type!=="line")return;const c=e.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||e.options.parsing)return;let{start:d,count:f}=ynt(l,u);const h=n.threshold||4*s;if(f<=h){FH(o);return}Rn(i)&&(o._data=u,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(n.algorithm){case"lttb":p=vnt(u,d,f,s,n);break;case"min-max":p=bnt(u,d,f,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}o._decimated=p})},destroy(e){QO(e)}};function $nt(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Cnt(e){const t=e.options,n=t.fill;let s=Gt(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function xnt(e,t,n){const s=Cnt(e);if(ln(s))return isNaN(s.value)?!1:s;let o=parseFloat(s);return ws(o)&&Math.floor(o)===o?((s[0]==="-"||s[0]==="+")&&(o=t+o),o===t||o<0||o>=n?!1:o):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function knt(e){const{scale:t={},fill:n}=e;let s=null,o;return n==="start"?s=t.bottom:n==="end"?s=t.top:ln(n)?s=t.getPixelForValue(n.value):t.getBasePixel&&(s=t.getBasePixel()),ws(s)?(o=t.isHorizontal(),{x:o?s:null,y:o?null:s}):null}class LH{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:o,y:r,radius:i}=this;return n=n||{start:0,end:ts},t.arc(o,r,i,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:o}=this,r=t.angle;return{x:n+Math.cos(r)*o,y:s+Math.sin(r)*o,angle:r}}}function Snt(e){const{scale:t,fill:n}=e,s=t.options,o=t.getLabels().length,r=[],i=s.reverse?t.max:t.min,a=s.reverse?t.min:t.max;let l,u,c;if(n==="start"?c=i:n==="end"?c=a:ln(n)?c=n.value:c=t.getBaseValue(),s.grid.circular)return u=t.getPointPositionForValue(0,i),new LH({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(c)});for(l=0;l<o;++l)r.push(t.getPointPositionForValue(l,c));return r}function Int(e){return(e.scale||{}).getPointPositionForValue?Snt(e):knt(e)}function IT(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function Tnt(e,t){const{x:n=null,y:s=null}=e||{},o=t.points,r=[];return t.segments.forEach(({start:i,end:a})=>{a=IT(i,a,o);const l=o[i],u=o[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:u.x,y:s})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:u.y}))}),r}function Ent(e){const{scale:t,index:n,line:s}=e,o=[],r=s.segments,i=s.points,a=_nt(t,n);a.push(BH({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const u=r[l];for(let c=u.start;c<=u.end;c++)Nnt(o,i[c],a)}return new Hl({points:o,options:{}})}function _nt(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let o=0;o<s.length;o++){const r=s[o];if(r.index===t)break;r.hidden||n.unshift(r.dataset)}return n}function Nnt(e,t,n){const s=[];for(let o=0;o<n.length;o++){const r=n[o],{first:i,last:a,point:l}=Ant(r,t,"x");if(!(!l||i&&a)){if(i)s.unshift(l);else if(e.push(l),!a)break}}e.push(...s)}function Ant(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const o=s[n],r=e.segments,i=e.points;let a=!1,l=!1;for(let u=0;u<r.length;u++){const c=r[u],d=i[c.start][n],f=i[c.end][n];if(ba(o,d,f)){a=o===d,l=o===f;break}}return{first:a,last:l,point:s}}function Dnt(e){const{chart:t,fill:n,line:s}=e;if(ws(n))return $nt(t,n);if(n==="stack")return Ent(e);if(n==="shape")return!0;const o=Int(e);return o instanceof LH?o:BH(o,s)}function BH(e,t){let n=[],s=!1;return Vn(e)?(s=!0,n=e):n=Tnt(e,t),n.length?new Hl({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function Rnt(e,t,n){let o=e[t].fill;const r=[t];let i;if(!n)return o;for(;o!==!1&&r.indexOf(o)===-1;){if(!ws(o))return o;if(i=e[o],!i)return!1;if(i.visible)return o;r.push(o),o=i.fill}return!1}function eM(e,t,n){const{segments:s,points:o}=t;let r=!0,i=!1;e.beginPath();for(const a of s){const{start:l,end:u}=a,c=o[l],d=o[IT(l,u,o)];r?(e.moveTo(c.x,c.y),r=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,a,{move:i}),i?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Fx(e,t,n,s){if(s)return;let o=t[e],r=n[e];return e==="angle"&&(o=hr(o),r=hr(r)),{property:e,start:o,end:r}}function tM(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function Ont(e,t,n){const s=e.segments,o=e.points,r=t.points,i=[];for(const a of s){let{start:l,end:u}=a;u=IT(l,u,o);const c=Fx(n,o[l],o[u],a.loop);if(!t.segments){i.push({source:a,target:c,start:o[l],end:o[u]});continue}const d=yH(t,c);for(const f of d){const h=Fx(n,r[f.start],r[f.end],f.loop),p=bH(a,o,h);for(const g of p)i.push({source:g,target:f,start:{[n]:tM(c,h,"start",Math.max)},end:{[n]:tM(c,h,"end",Math.min)}})}}return i}function Mnt(e,t,n){const{top:s,bottom:o}=t.chart.chartArea,{property:r,start:i,end:a}=n||{};r==="x"&&(e.beginPath(),e.rect(i,s,a-i,o-s),e.clip())}function nM(e,t,n,s){const o=t.interpolate(n,s);o&&e.lineTo(o.x,o.y)}function sM(e,t){const{line:n,target:s,property:o,color:r,scale:i}=t,a=Ont(n,s,o);for(const{source:l,target:u,start:c,end:d}of a){const{style:{backgroundColor:f=r}={}}=l,h=s!==!0;e.save(),e.fillStyle=f,Mnt(e,i,h&&Fx(o,c,d)),e.beginPath();const p=!!n.pathSegment(e,l);let g;if(h){p?e.closePath():nM(e,s,d,o);const m=!!s.pathSegment(e,u,{move:p,reverse:!0});g=p&&m,g||nM(e,s,c,o)}e.closePath(),e.fill(g?"evenodd":"nonzero"),e.restore()}}function Pnt(e,t){const{line:n,target:s,above:o,below:r,area:i,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),l==="x"&&r!==o&&(eM(e,s,i.top),sM(e,{line:n,target:s,color:o,scale:a,property:l}),e.restore(),e.save(),eM(e,s,i.bottom)),sM(e,{line:n,target:s,color:r,scale:a,property:l}),e.restore()}function k$(e,t,n){const s=Dnt(t),{line:o,scale:r,axis:i}=t,a=o.options,l=a.fill,u=a.backgroundColor,{above:c=u,below:d=u}=l||{};s&&o.points.length&&(cm(e,n),Pnt(e,{line:o,target:s,above:c,below:d,area:n,scale:r,axis:i}),dm(e))}var Fnt={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,o=[];let r,i,a,l;for(i=0;i<s;++i)r=e.getDatasetMeta(i),a=r.dataset,l=null,a&&a.options&&a instanceof Hl&&(l={visible:e.isDatasetVisible(i),index:i,fill:xnt(a,i,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,o.push(l);for(i=0;i<s;++i)l=o[i],!(!l||l.fill===!1)&&(l.fill=Rnt(o,i,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",o=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let i=o.length-1;i>=0;--i){const a=o[i].$filler;!a||(a.line.updateControlPoints(r,a.axis),s&&k$(e.ctx,a,r))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let o=s.length-1;o>=0;--o){const r=s[o].$filler;r&&k$(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!s||s.fill===!1||n.drawTime!=="beforeDatasetDraw"||k$(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const oM=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},Lnt=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class rM extends To{constructor(t){super();this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Zn(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,o)=>t.sort(s,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,o=Ds(s.font),r=o.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=oM(s,r);let u,c;n.font=o.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(i,r,a,l)+10):(c=this.maxHeight,u=this._fitCols(i,r,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,o){const{ctx:r,maxWidth:i,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=o+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,h=-c;return this.legendItems.forEach((p,g)=>{const m=s+n/2+r.measureText(p.text).width;(g===0||u[u.length-1]+m+2*a>i)&&(d+=c,u[u.length-(g>0?0:1)]=0,h+=c,f++),l[g]={left:0,top:h,row:f,width:m,height:o},u[u.length-1]+=m+a}),d}_fitCols(t,n,s,o){const{ctx:r,maxHeight:i,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=i-t;let d=a,f=0,h=0,p=0,g=0;return this.legendItems.forEach((m,v)=>{const b=s+n/2+r.measureText(m.text).width;v>0&&h+o+2*a>c&&(d+=f+a,u.push({width:f,height:h}),p+=f+a,g++,f=h=0),l[v]={left:p,top:h,col:g,width:b,height:o},f=Math.max(f,b),h+=o+a}),d+=f,u.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:o},rtl:r}}=this,i=gd(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Eo(s,this.left+o,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Eo(s,this.left+o,this.right-this.lineWidths[a])),u.top+=this.top+t+o,u.left=i.leftForLtr(i.x(l),u.width),l+=u.width+o}else{let a=0,l=Eo(s,this.top+t+o,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Eo(s,this.top+t+o,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+o,u.left=i.leftForLtr(i.x(u.left),u.width),l+=u.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;cm(t,this),this._draw(),dm(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:o}=this,{align:r,labels:i}=t,a=wn.color,l=gd(t.rtl,this.left,this.width),u=Ds(i.font),{color:c,padding:d}=i,f=u.size,h=f/2;let p;this.drawTitle(),o.textAlign=l.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=u.string;const{boxWidth:g,boxHeight:m,itemHeight:v}=oM(i,f),b=function(x,k,I){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;o.save();const S=Gt(I.lineWidth,1);if(o.fillStyle=Gt(I.fillStyle,a),o.lineCap=Gt(I.lineCap,"butt"),o.lineDashOffset=Gt(I.lineDashOffset,0),o.lineJoin=Gt(I.lineJoin,"miter"),o.lineWidth=S,o.strokeStyle=Gt(I.strokeStyle,a),o.setLineDash(Gt(I.lineDash,[])),i.usePointStyle){const T={radius:g*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:S},_=l.xPlus(x,g/2),N=k+h;$p(o,T,_,N)}else{const T=k+Math.max((f-m)/2,0),_=l.leftForLtr(x,g),N=Lu(I.borderRadius);o.beginPath(),Object.values(N).some(O=>O!==0)?Cp(o,{x:_,y:T,w:g,h:m,radius:N}):o.rect(_,T,g,m),o.fill(),S!==0&&o.stroke()}o.restore()},$=function(x,k,I){rc(o,I.text,x,k+v/2,u,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?p={x:Eo(r,this.left+d,this.right-s[0]),y:this.top+d+w,line:0}:p={x:this.left+d,y:Eo(r,this.top+w+d,this.bottom-n[0].height),line:0},gH(this.ctx,t.textDirection);const C=v+d;this.legendItems.forEach((x,k)=>{o.strokeStyle=x.fontColor||c,o.fillStyle=x.fontColor||c;const I=o.measureText(x.text).width,S=l.textAlign(x.textAlign||(x.textAlign=i.textAlign)),T=g+h+I;let _=p.x,N=p.y;l.setWidth(this.width),y?k>0&&_+T+d>this.right&&(N=p.y+=C,p.line++,_=p.x=Eo(r,this.left+d,this.right-s[p.line])):k>0&&N+C>this.bottom&&(_=p.x=_+n[p.line].width+d,p.line++,N=p.y=Eo(r,this.top+w+d,this.bottom-n[p.line].height));const O=l.x(_);b(O,N,x),_=MJe(S,_+g+h,y?_+T:this.right,t.rtl),$(l.x(_),N,x),y?p.x+=T+d:p.y+=C}),mH(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Ds(n.font),o=Js(n.padding);if(!n.display)return;const r=gd(t.rtl,this.left,this.width),i=this.ctx,a=n.position,l=s.size/2,u=o.top+l;let c,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+u,d=Eo(t.align,d,this.right-f);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);c=u+Eo(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const h=Eo(a,d,d+f);i.textAlign=r.textAlign(cT(a)),i.textBaseline="middle",i.strokeStyle=n.color,i.fillStyle=n.color,i.font=s.string,rc(i,n.text,h,c,s)}_computeTitleHeight(){const t=this.options.title,n=Ds(t.font),s=Js(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,o,r;if(ba(t,this.left,this.right)&&ba(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(o=r[s],ba(t,o.left,o.left+o.width)&&ba(n,o.top,o.top+o.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!Bnt(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"){const o=this._hoveredItem,r=Lnt(o,s);o&&!r&&Zn(n.onLeave,[t,o,this],this),this._hoveredItem=s,s&&!r&&Zn(n.onHover,[t,s,this],this)}else s&&Zn(n.onClick,[t,s,this],this)}}function Bnt(e,t){return!!(e==="mousemove"&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var znt={id:"legend",_element:rM,start(e,t,n){const s=e.legend=new rM({ctx:e.ctx,options:n,chart:e});Ao.configure(e,s,n),Ao.addBox(e,s)},stop(e){Ao.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Ao.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,o=n.chart;o.isDatasetVisible(s)?(o.hide(s),t.hidden=!0):(o.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:o,color:r}}=e.legend.options;return e._getSortedDatasetMetas().map(i=>{const a=i.controller.getStyle(n?0:void 0),l=Js(a.borderWidth);return{text:t[i.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!i.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:s||a.pointStyle,rotation:a.rotation,textAlign:o||a.textAlign,borderRadius:0,datasetIndex:i.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class TT extends To{constructor(t){super();this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const o=Vn(s.text)?s.text.length:1;this._padding=Js(s.padding);const r=o*Ds(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:o,right:r,options:i}=this,a=i.align;let l=0,u,c,d;return this.isHorizontal()?(c=Eo(a,s,r),d=n+t,u=r-s):(i.position==="left"?(c=s+t,d=Eo(a,o,n),l=Fn*-.5):(c=r-t,d=Eo(a,n,o),l=Fn*.5),u=o-n),{titleX:c,titleY:d,maxWidth:u,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Ds(n.font),r=s.lineHeight/2+this._padding.top,{titleX:i,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(r);rc(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:u,textAlign:cT(n.align),textBaseline:"middle",translation:[i,a]})}}function Vnt(e,t){const n=new TT({ctx:e.ctx,options:t,chart:e});Ao.configure(e,n,t),Ao.addBox(e,n),e.titleBlock=n}var Wnt={id:"title",_element:TT,start(e,t,n){Vnt(e,n)},stop(e){const t=e.titleBlock;Ao.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Ao.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gv=new WeakMap;var Hnt={id:"subtitle",start(e,t,n){const s=new TT({ctx:e.ctx,options:n,chart:e});Ao.configure(e,s,n),Ao.addBox(e,s),gv.set(e,s)},stop(e){Ao.removeBox(e,gv.get(e)),gv.delete(e)},beforeUpdate(e,t,n){const s=gv.get(e);Ao.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Rh={average(e){if(!e.length)return!1;let t,n,s=0,o=0,r=0;for(t=0,n=e.length;t<n;++t){const i=e[t].element;if(i&&i.hasValue()){const a=i.tooltipPosition();s+=a.x,o+=a.y,++r}}return{x:s/r,y:o/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,o=Number.POSITIVE_INFINITY,r,i,a;for(r=0,i=e.length;r<i;++r){const l=e[r].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=bp(t,u);c<o&&(o=c,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Pi(e,t){return t&&(Vn(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function fa(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Unt(e,t){const{element:n,datasetIndex:s,index:o}=t,r=e.getDatasetMeta(s).controller,{label:i,value:a}=r.getLabelAndValue(o);return{chart:e,label:i,parsed:r.getParsed(o),raw:e.data.datasets[s].data[o],formattedValue:a,dataset:r.getDataset(),dataIndex:o,datasetIndex:s,element:n}}function iM(e,t){const n=e.chart.ctx,{body:s,footer:o,title:r}=e,{boxWidth:i,boxHeight:a}=t,l=Ds(t.bodyFont),u=Ds(t.titleFont),c=Ds(t.footerFont),d=r.length,f=o.length,h=s.length,p=Js(t.padding);let g=p.height,m=0,v=s.reduce((y,w)=>y+w.before.length+w.lines.length+w.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){const y=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=h*y+(v-h)*l.lineHeight+(v-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*c.lineHeight+(f-1)*t.footerSpacing);let b=0;const $=function(y){m=Math.max(m,n.measureText(y).width+b)};return n.save(),n.font=u.string,jn(e.title,$),n.font=l.string,jn(e.beforeBody.concat(e.afterBody),$),b=t.displayColors?i+2+t.boxPadding:0,jn(s,y=>{jn(y.before,$),jn(y.lines,$),jn(y.after,$)}),b=0,n.font=c.string,jn(e.footer,$),n.restore(),m+=p.width,{width:m,height:g}}function jnt(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function Gnt(e,t,n,s){const{x:o,width:r}=s,i=n.caretSize+n.caretPadding;if(e==="left"&&o+r+i>t.width||e==="right"&&o-r-i<0)return!0}function Knt(e,t,n,s){const{x:o,width:r}=n,{width:i,chartArea:{left:a,right:l}}=e;let u="center";return s==="center"?u=o<=(a+l)/2?"left":"right":o<=r/2?u="left":o>=i-r/2&&(u="right"),Gnt(u,e,t,n)&&(u="center"),u}function aM(e,t,n){const s=n.yAlign||t.yAlign||jnt(e,n);return{xAlign:n.xAlign||t.xAlign||Knt(e,t,n,s),yAlign:s}}function qnt(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function Ynt(e,t,n){let{y:s,height:o}=e;return t==="top"?s+=n:t==="bottom"?s-=o+n:s-=o/2,s}function lM(e,t,n,s){const{caretSize:o,caretPadding:r,cornerRadius:i}=e,{xAlign:a,yAlign:l}=n,u=o+r,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:h}=Lu(i);let p=qnt(t,a);const g=Ynt(t,l,u);return l==="center"?a==="left"?p+=u:a==="right"&&(p-=u):a==="left"?p-=Math.max(c,f)+o:a==="right"&&(p+=Math.max(d,h)+o),{x:io(p,0,s.width-t.width),y:io(g,0,s.height-t.height)}}function mv(e,t,n){const s=Js(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function uM(e){return Pi([],fa(e))}function Xnt(e,t,n){return Wl(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function cM(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class Lx extends To{constructor(t){super();this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&n.options.animation&&s.animations,r=new xT(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Xnt(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,o=s.beforeTitle.apply(this,[t]),r=s.title.apply(this,[t]),i=s.afterTitle.apply(this,[t]);let a=[];return a=Pi(a,fa(o)),a=Pi(a,fa(r)),a=Pi(a,fa(i)),a}getBeforeBody(t,n){return uM(n.callbacks.beforeBody.apply(this,[t]))}getBody(t,n){const{callbacks:s}=n,o=[];return jn(t,r=>{const i={before:[],lines:[],after:[]},a=cM(s,r);Pi(i.before,fa(a.beforeLabel.call(this,r))),Pi(i.lines,a.label.call(this,r)),Pi(i.after,fa(a.afterLabel.call(this,r))),o.push(i)}),o}getAfterBody(t,n){return uM(n.callbacks.afterBody.apply(this,[t]))}getFooter(t,n){const{callbacks:s}=n,o=s.beforeFooter.apply(this,[t]),r=s.footer.apply(this,[t]),i=s.afterFooter.apply(this,[t]);let a=[];return a=Pi(a,fa(o)),a=Pi(a,fa(r)),a=Pi(a,fa(i)),a}_createItems(t){const n=this._active,s=this.chart.data,o=[],r=[],i=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(Unt(this.chart,n[l]));return t.filter&&(a=a.filter((c,d,f)=>t.filter(c,d,f,s))),t.itemSort&&(a=a.sort((c,d)=>t.itemSort(c,d,s))),jn(a,c=>{const d=cM(t.callbacks,c);o.push(d.labelColor.call(this,c)),r.push(d.labelPointStyle.call(this,c)),i.push(d.labelTextColor.call(this,c))}),this.labelColors=o,this.labelPointStyles=r,this.labelTextColors=i,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),o=this._active;let r,i=[];if(!o.length)this.opacity!==0&&(r={opacity:0});else{const a=Rh[s.position].call(this,o,this._eventPosition);i=this._createItems(s),this.title=this.getTitle(i,s),this.beforeBody=this.getBeforeBody(i,s),this.body=this.getBody(i,s),this.afterBody=this.getAfterBody(i,s),this.footer=this.getFooter(i,s);const l=this._size=iM(this,s),u=Object.assign({},a,l),c=aM(this.chart,s,u),d=lM(s,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=i,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,o){const r=this.getCaretPosition(t,s,o);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:o,yAlign:r}=this,{caretSize:i,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:d}=Lu(a),{x:f,y:h}=t,{width:p,height:g}=n;let m,v,b,$,y,w;return r==="center"?(y=h+g/2,o==="left"?(m=f,v=m-i,$=y+i,w=y-i):(m=f+p,v=m+i,$=y-i,w=y+i),b=m):(o==="left"?v=f+Math.max(l,c)+i:o==="right"?v=f+p-Math.max(u,d)-i:v=this.caretX,r==="top"?($=h,y=$-i,m=v-i,b=v+i):($=h+g,y=$+i,m=v+i,b=v-i),w=$),{x1:m,x2:v,x3:b,y1:$,y2:y,y3:w}}drawTitle(t,n,s){const o=this.title,r=o.length;let i,a,l;if(r){const u=gd(s.rtl,this.x,this.width);for(t.x=mv(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",i=Ds(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=i.string,l=0;l<r;++l)n.fillText(o[l],u.x(t.x),t.y+i.lineHeight/2),t.y+=i.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,o,r){const i=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u,boxPadding:c}=r,d=Ds(r.bodyFont),f=mv(this,"left",r),h=o.x(f),p=l<d.lineHeight?(d.lineHeight-l)/2:0,g=n.y+p;if(r.usePointStyle){const m={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=o.leftForLtr(h,u)+u/2,b=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,$p(t,m,v,b),t.strokeStyle=i.borderColor,t.fillStyle=i.backgroundColor,$p(t,m,v,b)}else{t.lineWidth=i.borderWidth||1,t.strokeStyle=i.borderColor,t.setLineDash(i.borderDash||[]),t.lineDashOffset=i.borderDashOffset||0;const m=o.leftForLtr(h,u-c),v=o.leftForLtr(o.xPlus(h,1),u-c-2),b=Lu(i.borderRadius);Object.values(b).some($=>$!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Cp(t,{x:m,y:g,w:u,h:l,radius:b}),t.fill(),t.stroke(),t.fillStyle=i.backgroundColor,t.beginPath(),Cp(t,{x:v,y:g+1,w:u-2,h:l-2,radius:b}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,u,l),t.strokeRect(m,g,u,l),t.fillStyle=i.backgroundColor,t.fillRect(v,g+1,u-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:o}=this,{bodySpacing:r,bodyAlign:i,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=s,d=Ds(s.bodyFont);let f=d.lineHeight,h=0;const p=gd(s.rtl,this.x,this.width),g=function(k){n.fillText(k,p.x(t.x+h),t.y+f/2),t.y+=f+r},m=p.textAlign(i);let v,b,$,y,w,C,x;for(n.textAlign=i,n.textBaseline="middle",n.font=d.string,t.x=mv(this,m,s),n.fillStyle=s.bodyColor,jn(this.beforeBody,g),h=a&&m!=="right"?i==="center"?u/2+c:u+2+c:0,y=0,C=o.length;y<C;++y){for(v=o[y],b=this.labelTextColors[y],n.fillStyle=b,jn(v.before,g),$=v.lines,a&&$.length&&(this._drawColorBox(n,t,y,p,s),f=Math.max(d.lineHeight,l)),w=0,x=$.length;w<x;++w)g($[w]),f=d.lineHeight;jn(v.after,g)}h=0,f=d.lineHeight,jn(this.afterBody,g),t.y-=r}drawFooter(t,n,s){const o=this.footer,r=o.length;let i,a;if(r){const l=gd(s.rtl,this.x,this.width);for(t.x=mv(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",i=Ds(s.footerFont),n.fillStyle=s.footerColor,n.font=i.string,a=0;a<r;++a)n.fillText(o[a],l.x(t.x),t.y+i.lineHeight/2),t.y+=i.lineHeight+s.footerSpacing}}drawBackground(t,n,s,o){const{xAlign:r,yAlign:i}=this,{x:a,y:l}=t,{width:u,height:c}=s,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=Lu(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(a+d,l),i==="top"&&this.drawCaret(t,n,s,o),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),i==="center"&&r==="right"&&this.drawCaret(t,n,s,o),n.lineTo(a+u,l+c-p),n.quadraticCurveTo(a+u,l+c,a+u-p,l+c),i==="bottom"&&this.drawCaret(t,n,s,o),n.lineTo(a+h,l+c),n.quadraticCurveTo(a,l+c,a,l+c-h),i==="center"&&r==="left"&&this.drawCaret(t,n,s,o),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,o=s&&s.x,r=s&&s.y;if(o||r){const i=Rh[t.position].call(this,this._active,this._eventPosition);if(!i)return;const a=this._size=iM(this,t),l=Object.assign({},i,this._size),u=aM(n,t,l),c=lM(t,l,u,n);(o._to!==c.x||r._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,c))}}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const i=Js(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,o,n),gH(t,n.textDirection),r.y+=i.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),mH(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,o=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),r=!Yb(s,o),i=this._positionChanged(o,n);(r||i)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,r=this._active||[],i=this._getActiveElements(t,r,n,s),a=this._positionChanged(i,t),l=n||!Yb(i,r)||a;return l&&(this._active=i,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,o){const r=this.options;if(t.type==="mouseout")return[];if(!o)return n;const i=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&i.reverse(),i}_positionChanged(t,n){const{caretX:s,caretY:o,options:r}=this,i=Rh[r.position].call(this,t,n);return i!==!1&&(s!==i.x||o!==i.y)}}Lx.positioners=Rh;var Znt={id:"tooltip",_element:Lx,positioners:Rh,afterInit(e,t,n){n&&(e.tooltip=new Lx({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip,n={tooltip:t};e.notifyPlugins("beforeTooltipDraw",n)!==!1&&(t&&t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n))},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:ua,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ua,beforeBody:ua,beforeLabel:ua,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Rn(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ua,afterBody:ua,beforeFooter:ua,footer:ua,afterFooter:ua}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Jnt=Object.freeze({__proto__:null,Decimation:wnt,Filler:Fnt,Legend:znt,SubTitle:Hnt,Title:Wnt,Tooltip:Znt});const Qnt=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function est(e,t,n,s){const o=e.indexOf(t);if(o===-1)return Qnt(e,t,n,s);const r=e.lastIndexOf(t);return o!==r?n:o}const tst=(e,t)=>e===null?null:io(Math.round(e),0,t);class s0 extends Cc{constructor(t){super(t);this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:o,label:r}of n)s[o]===r&&s.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Rn(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:est(s,t,Gt(n,t),this._addedLabels),tst(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(o=this.getLabels().length-1)),this.min=s,this.max=o}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,o=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let i=t;i<=n;i++)o.push({value:i});return o}getLabelForValue(t){const n=this.getLabels();return t>=0&&t<n.length?n[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}s0.id="category";s0.defaults={ticks:{callback:s0.prototype.getLabelForValue}};function nst(e,t){const n=[],{bounds:o,step:r,min:i,max:a,precision:l,count:u,maxTicks:c,maxDigits:d,includeBounds:f}=e,h=r||1,p=c-1,{min:g,max:m}=t,v=!Rn(i),b=!Rn(a),$=!Rn(u),y=(m-g)/(d+1);let w=lO((m-g)/p/h)*h,C,x,k,I;if(w<1e-14&&!v&&!b)return[{value:g},{value:m}];I=Math.ceil(m/w)-Math.floor(g/w),I>p&&(w=lO(I*w/p/h)*h),Rn(l)||(C=Math.pow(10,l),w=Math.ceil(w*C)/C),o==="ticks"?(x=Math.floor(g/w)*w,k=Math.ceil(m/w)*w):(x=g,k=m),v&&b&&r&&jJe((a-i)/r,w/1e3)?(I=Math.round(Math.min((a-i)/w,c)),w=(a-i)/I,x=i,k=a):$?(x=v?i:x,k=b?a:k,I=u-1,w=(k-x)/I):(I=(k-x)/w,Nh(I,Math.round(I),w/1e3)?I=Math.round(I):I=Math.ceil(I));const S=Math.max(uO(w),uO(x));C=Math.pow(10,Rn(l)?S:l),x=Math.round(x*C)/C,k=Math.round(k*C)/C;let T=0;for(v&&(f&&x!==i?(n.push({value:i}),x<i&&T++,Nh(Math.round((x+T*w)*C)/C,i,dM(i,y,e))&&T++):x<i&&T++);T<I;++T)n.push({value:Math.round((x+T*w)*C)/C});return b&&f&&k!==a?n.length&&Nh(n[n.length-1].value,a,dM(a,y,e))?n[n.length-1].value=a:n.push({value:a}):(!b||k===a)&&n.push({value:k}),n}function dM(e,t,{horizontal:n,minRotation:s}){const o=ro(s),r=(n?Math.sin(o):Math.cos(o))||.001,i=.75*t*(""+e).length;return Math.min(t/r,i)}class o0 extends Cc{constructor(t){super(t);this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Rn(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:o,max:r}=this;const i=l=>o=n?o:l,a=l=>r=s?r:l;if(t){const l=Yi(o),u=Yi(r);l<0&&u<0?a(0):l>0&&u>0&&i(0)}if(o===r){let l=1;(r>=Number.MAX_SAFE_INTEGER||o<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(r*.05)),a(r+l),t||i(o-l)}this.min=o,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,o;return s?(o=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const o={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,i=nst(o,r);return t.bounds==="ticks"&&J8(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const o=(s-n)/Math.max(t.length-1,1)/2;n-=o,s+=o}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return fm(t,this.chart.options.locale,this.options.ticks.format)}}class ET extends o0{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=ws(t)?t:0,this.max=ws(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=ro(this.options.ticks.minRotation),o=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ET.id="linear";ET.defaults={ticks:{callback:T1.formatters.numeric}};function fM(e){return e/Math.pow(10,Math.floor(Br(e)))===1}function sst(e,t){const n=Math.floor(Br(t.max)),s=Math.ceil(t.max/Math.pow(10,n)),o=[];let r=Dr(e.min,Math.pow(10,Math.floor(Br(t.min)))),i=Math.floor(Br(r)),a=Math.floor(r/Math.pow(10,i)),l=i<0?Math.pow(10,Math.abs(i)):1;do o.push({value:r,major:fM(r)}),++a,a===10&&(a=1,++i,l=i>=0?1:l),r=Math.round(a*Math.pow(10,i)*l)/l;while(i<n||i===n&&a<s);const u=Dr(e.max,r);return o.push({value:u,major:fM(r)}),o}class _T extends Cc{constructor(t){super(t);this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=o0.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return ws(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=ws(t)?Math.max(0,t):null,this.max=ws(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,o=this.max;const r=l=>s=t?s:l,i=l=>o=n?o:l,a=(l,u)=>Math.pow(10,Math.floor(Br(l))+u);s===o&&(s<=0?(r(1),i(10)):(r(a(s,-1)),i(a(o,1)))),s<=0&&r(a(o,-1)),o<=0&&i(a(s,1)),this._zero&&this.min!==this._suggestedMin&&s===a(this.min,0)&&r(a(s,-1)),this.min=s,this.max=o}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=sst(n,this);return t.bounds==="ticks"&&J8(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":fm(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Br(t),this._valueRange=Br(this.max)-Br(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Br(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}_T.id="logarithmic";_T.defaults={ticks:{callback:T1.formatters.logarithmic,major:{enabled:!0}}};function Bx(e){const t=e.ticks;if(t.display&&e.display){const n=Js(t.backdropPadding);return Gt(t.font&&t.font.size,wn.font.size)+n.height}return 0}function ost(e,t,n){return n=Vn(n)?n:[n],{w:gQe(e,t.string,n),h:n.length*t.lineHeight}}function hM(e,t,n,s,o){return e===s||e===o?{start:t-n/2,end:t+n/2}:e<s||e>o?{start:t-n,end:t}:{start:t,end:t+n}}function rst(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],o=[],r=e._pointLabels.length,i=e.options.pointLabels,a=i.centerPointLabels?Fn/r:0;for(let l=0;l<r;l++){const u=i.setContext(e.getPointLabelContext(l));o[l]=u.padding;const c=e.getPointPosition(l,e.drawingArea+o[l],a),d=Ds(u.font),f=ost(e.ctx,d,e._pointLabels[l]);s[l]=f;const h=hr(e.getIndexAngle(l)+a),p=Math.round(fT(h)),g=hM(p,c.x,f.w,0,180),m=hM(p,c.y,f.h,90,270);ist(n,t,h,g,m)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=ast(e,s,o)}function ist(e,t,n,s,o){const r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),o.start<t.t?(l=(t.t-o.start)/i,e.t=Math.min(e.t,t.t-l)):o.end>t.b&&(l=(o.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function ast(e,t,n){const s=[],o=e._pointLabels.length,r=e.options,i=Bx(r)/2,a=e.drawingArea,l=r.pointLabels.centerPointLabels?Fn/o:0;for(let u=0;u<o;u++){const c=e.getPointPosition(u,a+i+n[u],l),d=Math.round(fT(hr(c.angle+Cs))),f=t[u],h=cst(c.y,f.h,d),p=lst(d),g=ust(c.x,f.w,p);s.push({x:c.x,y:h,textAlign:p,left:g,top:h,right:g+f.w,bottom:h+f.h})}return s}function lst(e){return e===0||e===180?"center":e<180?"left":"right"}function ust(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function cst(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function dst(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let o=t-1;o>=0;o--){const r=s.setContext(e.getPointLabelContext(o)),i=Ds(r.font),{x:a,y:l,textAlign:u,left:c,top:d,right:f,bottom:h}=e._pointLabelItems[o],{backdropColor:p}=r;if(!Rn(p)){const g=Js(r.backdropPadding);n.fillStyle=p,n.fillRect(c-g.left,d-g.top,f-c+g.width,h-d+g.height)}rc(n,e._pointLabels[o],a,l+i.lineHeight/2,i,{color:r.color,textAlign:u,textBaseline:"middle"})}}function zH(e,t,n,s){const{ctx:o}=e;if(n)o.arc(e.xCenter,e.yCenter,t,0,ts);else{let r=e.getPointPosition(0,t);o.moveTo(r.x,r.y);for(let i=1;i<s;i++)r=e.getPointPosition(i,t),o.lineTo(r.x,r.y)}}function fst(e,t,n,s){const o=e.ctx,r=t.circular,{color:i,lineWidth:a}=t;!r&&!s||!i||!a||n<0||(o.save(),o.strokeStyle=i,o.lineWidth=a,o.setLineDash(t.borderDash),o.lineDashOffset=t.borderDashOffset,o.beginPath(),zH(e,n,r,s),o.closePath(),o.stroke(),o.restore())}function hst(e,t,n){return Wl(e,{label:n,index:t,type:"pointLabel"})}class pm extends o0{constructor(t){super(t);this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Js(Bx(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=ws(t)&&!isNaN(t)?t:0,this.max=ws(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Bx(this.options))}generateTickLabels(t){o0.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const o=Zn(this.options.pointLabels.callback,[n,s],this);return o||o===0?o:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?rst(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,o){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,o))}getIndexAngle(t){const n=ts/(this._pointLabels.length||1),s=this.options.startAngle||0;return hr(t*n+ro(s))}getDistanceFromCenterForValue(t){if(Rn(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(Rn(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return hst(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const o=this.getIndexAngle(t)-Cs+s;return{x:Math.cos(o)*n+this.xCenter,y:Math.sin(o)*n+this.yCenter,angle:o}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:o,bottom:r}=this._pointLabelItems[t];return{left:n,top:s,right:o,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),zH(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:o}=n,r=this._pointLabels.length;let i,a,l;if(n.pointLabels.display&&dst(this,r),o.display&&this.ticks.forEach((u,c)=>{if(c!==0){a=this.getDistanceFromCenterForValue(u.value);const d=o.setContext(this.getContext(c-1));fst(this,d,a,r)}}),s.display){for(t.save(),i=r-1;i>=0;i--){const u=s.setContext(this.getPointLabelContext(i)),{color:c,lineWidth:d}=u;!d||!c||(t.lineWidth=d,t.strokeStyle=c,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,a=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(i,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const o=this.getIndexAngle(0);let r,i;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const u=s.setContext(this.getContext(l)),c=Ds(u.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){t.font=c.string,i=t.measureText(a.label).width,t.fillStyle=u.backdropColor;const d=Js(u.backdropPadding);t.fillRect(-i/2-d.left,-r-c.size/2-d.top,i+d.width,c.size+d.height)}rc(t,a.label,0,-r,c,{color:u.color})}),t.restore()}drawTitle(){}}pm.id="radialLinear";pm.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:T1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};pm.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};pm.descriptors={angleLines:{_fallback:"grid"}};const A1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yo=Object.keys(A1);function pst(e,t){return e-t}function pM(e,t){if(Rn(t))return null;const n=e._adapter,{parser:s,round:o,isoWeekday:r}=e._parseOpts;let i=t;return typeof s=="function"&&(i=s(i)),ws(i)||(i=typeof s=="string"?n.parse(i,s):n.parse(i)),i===null?null:(o&&(i=o==="week"&&(vp(r)||r===!0)?n.startOf(i,"isoWeek",r):n.startOf(i,o)),+i)}function gM(e,t,n,s){const o=Yo.length;for(let r=Yo.indexOf(e);r<o-1;++r){const i=A1[Yo[r]],a=i.steps?i.steps:Number.MAX_SAFE_INTEGER;if(i.common&&Math.ceil((n-t)/(a*i.size))<=s)return Yo[r]}return Yo[o-1]}function gst(e,t,n,s,o){for(let r=Yo.length-1;r>=Yo.indexOf(n);r--){const i=Yo[r];if(A1[i].common&&e._adapter.diff(o,s,i)>=t-1)return i}return Yo[n?Yo.indexOf(n):0]}function mst(e){for(let t=Yo.indexOf(e)+1,n=Yo.length;t<n;++t)if(A1[Yo[t]].common)return Yo[t]}function mM(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:o}=bT(n,t),r=n[s]>=t?n[s]:n[o];e[r]=!0}}function vst(e,t,n,s){const o=e._adapter,r=+o.startOf(t[0].value,s),i=t[t.length-1].value;let a,l;for(a=r;a<=i;a=+o.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function vM(e,t,n){const s=[],o={},r=t.length;let i,a;for(i=0;i<r;++i)a=t[i],o[a]=i,s.push({value:a,major:!1});return r===0||!n?s:vst(e,s,o,n)}class gm extends Cc{constructor(t){super(t);this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n){const s=t.time||(t.time={}),o=this._adapter=new Vet._date(t.adapters.date);_h(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:pM(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:o,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();function l(u){!i&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!i||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=ws(o)&&!isNaN(o)?o:+n.startOf(Date.now(),s),r=ws(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(o,r-1),this.max=Math.max(o+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const r=this.min,i=this.max,a=IQe(o,r,i);return this._unit=n.unit||(s.autoSkip?gM(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):gst(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:mst(this._unit),this.initOffsets(o),t.reverse&&a.reverse(),vM(this,a,this._majorUnit)}initOffsets(t){let n=0,s=0,o,r;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?n=1-o:n=(this.getDecimalForValue(t[1])-o)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const i=t.length<3?.5:.25;n=io(n,0,i),s=io(s,0,i),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,o=this.options,r=o.time,i=r.unit||gM(r.minUnit,n,s,this._getLabelCapacity(n)),a=Gt(r.stepSize,1),l=i==="week"?r.isoWeekday:!1,u=vp(l)||l===!0,c={};let d=n,f,h;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":i),t.diff(s,n,i)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+i);const p=o.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<s;f=+t.add(f,a,i),h++)mM(c,f,p);return(f===s||o.bounds==="ticks"||h===1)&&mM(c,f,p),Object.keys(c).sort((g,m)=>g-m).map(g=>+g)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}_tickFormatFunction(t,n,s,o){const r=this.options,i=r.time.displayFormats,a=this._unit,l=this._majorUnit,u=a&&i[a],c=l&&i[l],d=s[n],f=l&&c&&d&&d.major,h=this._adapter.format(t,o||(f?c:u)),p=r.ticks.callback;return p?Zn(p,[h,n,s],this):h}generateTickLabels(t){let n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n],o.label=this._tickFormatFunction(o.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,o=ro(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(o),i=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*i,h:s*i+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,o=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,vM(this,[t],this._majorUnit),o),i=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,s=o.length;n<s;++n)t=t.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const o=this.getLabels();for(n=0,s=o.length;n<s;++n)t.push(pM(this,o[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return aH(t.sort(pst))}}gm.id="time";gm.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function vv(e,t,n){let s=0,o=e.length-1,r,i,a,l;n?(t>=e[s].pos&&t<=e[o].pos&&({lo:s,hi:o}=ya(e,"pos",t)),{pos:r,time:a}=e[s],{pos:i,time:l}=e[o]):(t>=e[s].time&&t<=e[o].time&&({lo:s,hi:o}=ya(e,"time",t)),{time:r,pos:a}=e[s],{time:i,pos:l}=e[o]);const u=i-r;return u?a+(l-a)*(t-r)/u:a}class NT extends gm{constructor(t){super(t);this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=vv(n,this.min),this._tableRange=vv(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,o=[],r=[];let i,a,l,u,c;for(i=0,a=t.length;i<a;++i)u=t[i],u>=n&&u<=s&&o.push(u);if(o.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(i=0,a=o.length;i<a;++i)c=o[i+1],l=o[i-1],u=o[i],Math.round((c+l)/2)!==u&&r.push({time:u,pos:i/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(vv(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return vv(this._table,s*this._tableRange+this._minPos,!0)}}NT.id="timeseries";NT.defaults=gm.defaults;var bst=Object.freeze({__proto__:null,CategoryScale:s0,LinearScale:ET,LogarithmicScale:_T,RadialLinearScale:pm,TimeScale:gm,TimeSeriesScale:NT});const Ict=[zet,mnt,Jnt,bst];var yst=typeof global=="object"&&global&&global.Object===Object&&global,VH=yst,wst=typeof self=="object"&&self&&self.Object===Object&&self,$st=VH||wst||Function("return this")(),oa=$st,Cst=oa.Symbol,xl=Cst,WH=Object.prototype,xst=WH.hasOwnProperty,kst=WH.toString,qf=xl?xl.toStringTag:void 0;function Sst(e){var t=xst.call(e,qf),n=e[qf];try{e[qf]=void 0;var s=!0}catch{}var o=kst.call(e);return s&&(t?e[qf]=n:delete e[qf]),o}var Ist=Object.prototype,Tst=Ist.toString;function Est(e){return Tst.call(e)}var _st="[object Null]",Nst="[object Undefined]",bM=xl?xl.toStringTag:void 0;function mm(e){return e==null?e===void 0?Nst:_st:bM&&bM in Object(e)?Sst(e):Est(e)}function ic(e){return e!=null&&typeof e=="object"}var Ast=Array.isArray,Kd=Ast;function vm(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Dst="[object AsyncFunction]",Rst="[object Function]",Ost="[object GeneratorFunction]",Mst="[object Proxy]";function HH(e){if(!vm(e))return!1;var t=mm(e);return t==Rst||t==Ost||t==Dst||t==Mst}var Pst=oa["__core-js_shared__"],S$=Pst,yM=function(){var e=/[^.]+$/.exec(S$&&S$.keys&&S$.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Fst(e){return!!yM&&yM in e}var Lst=Function.prototype,Bst=Lst.toString;function xc(e){if(e!=null){try{return Bst.call(e)}catch{}try{return e+""}catch{}}return""}var zst=/[\\^$.*+?()[\]{}|]/g,Vst=/^\[object .+?Constructor\]$/,Wst=Function.prototype,Hst=Object.prototype,Ust=Wst.toString,jst=Hst.hasOwnProperty,Gst=RegExp("^"+Ust.call(jst).replace(zst,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kst(e){if(!vm(e)||Fst(e))return!1;var t=HH(e)?Gst:Vst;return t.test(xc(e))}function qst(e,t){return e==null?void 0:e[t]}function kc(e,t){var n=qst(e,t);return Kst(n)?n:void 0}var Yst=kc(oa,"WeakMap"),zx=Yst,wM=Object.create,Xst=function(){function e(){}return function(t){if(!vm(t))return{};if(wM)return wM(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Zst=Xst;function Jst(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var Qst=function(){try{var e=kc(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$M=Qst;function eot(e,t){for(var n=-1,s=e==null?0:e.length;++n<s&&t(e[n],n,e)!==!1;);return e}var tot=9007199254740991,not=/^(?:0|[1-9]\d*)$/;function sot(e,t){var n=typeof e;return t=t==null?tot:t,!!t&&(n=="number"||n!="symbol"&&not.test(e))&&e>-1&&e%1==0&&e<t}function UH(e,t,n){t=="__proto__"&&$M?$M(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function AT(e,t){return e===t||e!==e&&t!==t}var oot=Object.prototype,rot=oot.hasOwnProperty;function jH(e,t,n){var s=e[t];(!(rot.call(e,t)&&AT(s,n))||n===void 0&&!(t in e))&&UH(e,t,n)}function D1(e,t,n,s){var o=!n;n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),o?UH(n,a,l):jH(n,a,l)}return n}var iot=9007199254740991;function GH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=iot}function DT(e){return e!=null&&GH(e.length)&&!HH(e)}var aot=Object.prototype;function R1(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||aot;return e===n}function lot(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var uot="[object Arguments]";function CM(e){return ic(e)&&mm(e)==uot}var KH=Object.prototype,cot=KH.hasOwnProperty,dot=KH.propertyIsEnumerable,fot=CM(function(){return arguments}())?CM:function(e){return ic(e)&&cot.call(e,"callee")&&!dot.call(e,"callee")},qH=fot;function hot(){return!1}var YH=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xM=YH&&typeof module=="object"&&module&&!module.nodeType&&module,pot=xM&&xM.exports===YH,kM=pot?oa.Buffer:void 0,got=kM?kM.isBuffer:void 0,mot=got||hot,kp=mot,vot="[object Arguments]",bot="[object Array]",yot="[object Boolean]",wot="[object Date]",$ot="[object Error]",Cot="[object Function]",xot="[object Map]",kot="[object Number]",Sot="[object Object]",Iot="[object RegExp]",Tot="[object Set]",Eot="[object String]",_ot="[object WeakMap]",Not="[object ArrayBuffer]",Aot="[object DataView]",Dot="[object Float32Array]",Rot="[object Float64Array]",Oot="[object Int8Array]",Mot="[object Int16Array]",Pot="[object Int32Array]",Fot="[object Uint8Array]",Lot="[object Uint8ClampedArray]",Bot="[object Uint16Array]",zot="[object Uint32Array]",fs={};fs[Dot]=fs[Rot]=fs[Oot]=fs[Mot]=fs[Pot]=fs[Fot]=fs[Lot]=fs[Bot]=fs[zot]=!0;fs[vot]=fs[bot]=fs[Not]=fs[yot]=fs[Aot]=fs[wot]=fs[$ot]=fs[Cot]=fs[xot]=fs[kot]=fs[Sot]=fs[Iot]=fs[Tot]=fs[Eot]=fs[_ot]=!1;function Vot(e){return ic(e)&&GH(e.length)&&!!fs[mm(e)]}function RT(e){return function(t){return e(t)}}var XH=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oh=XH&&typeof module=="object"&&module&&!module.nodeType&&module,Wot=Oh&&Oh.exports===XH,I$=Wot&&VH.process,Hot=function(){try{var e=Oh&&Oh.require&&Oh.require("util").types;return e||I$&&I$.binding&&I$.binding("util")}catch{}}(),qd=Hot,SM=qd&&qd.isTypedArray,Uot=SM?RT(SM):Vot,OT=Uot,jot=Object.prototype,Got=jot.hasOwnProperty;function ZH(e,t){var n=Kd(e),s=!n&&qH(e),o=!n&&!s&&kp(e),r=!n&&!s&&!o&&OT(e),i=n||s||o||r,a=i?lot(e.length,String):[],l=a.length;for(var u in e)(t||Got.call(e,u))&&!(i&&(u=="length"||o&&(u=="offset"||u=="parent")||r&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||sot(u,l)))&&a.push(u);return a}function JH(e,t){return function(n){return e(t(n))}}var Kot=JH(Object.keys,Object),qot=Kot,Yot=Object.prototype,Xot=Yot.hasOwnProperty;function QH(e){if(!R1(e))return qot(e);var t=[];for(var n in Object(e))Xot.call(e,n)&&n!="constructor"&&t.push(n);return t}function MT(e){return DT(e)?ZH(e):QH(e)}function Zot(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Jot=Object.prototype,Qot=Jot.hasOwnProperty;function ert(e){if(!vm(e))return Zot(e);var t=R1(e),n=[];for(var s in e)s=="constructor"&&(t||!Qot.call(e,s))||n.push(s);return n}function PT(e){return DT(e)?ZH(e,!0):ert(e)}var trt=kc(Object,"create"),Sp=trt;function nrt(){this.__data__=Sp?Sp(null):{},this.size=0}function srt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ort="__lodash_hash_undefined__",rrt=Object.prototype,irt=rrt.hasOwnProperty;function art(e){var t=this.__data__;if(Sp){var n=t[e];return n===ort?void 0:n}return irt.call(t,e)?t[e]:void 0}var lrt=Object.prototype,urt=lrt.hasOwnProperty;function crt(e){var t=this.__data__;return Sp?t[e]!==void 0:urt.call(t,e)}var drt="__lodash_hash_undefined__";function frt(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Sp&&t===void 0?drt:t,this}function ac(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}ac.prototype.clear=nrt;ac.prototype.delete=srt;ac.prototype.get=art;ac.prototype.has=crt;ac.prototype.set=frt;function hrt(){this.__data__=[],this.size=0}function O1(e,t){for(var n=e.length;n--;)if(AT(e[n][0],t))return n;return-1}var prt=Array.prototype,grt=prt.splice;function mrt(e){var t=this.__data__,n=O1(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():grt.call(t,n,1),--this.size,!0}function vrt(e){var t=this.__data__,n=O1(t,e);return n<0?void 0:t[n][1]}function brt(e){return O1(this.__data__,e)>-1}function yrt(e,t){var n=this.__data__,s=O1(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}function Ba(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Ba.prototype.clear=hrt;Ba.prototype.delete=mrt;Ba.prototype.get=vrt;Ba.prototype.has=brt;Ba.prototype.set=yrt;var wrt=kc(oa,"Map"),Ip=wrt;function $rt(){this.size=0,this.__data__={hash:new ac,map:new(Ip||Ba),string:new ac}}function Crt(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function M1(e,t){var n=e.__data__;return Crt(t)?n[typeof t=="string"?"string":"hash"]:n.map}function xrt(e){var t=M1(this,e).delete(e);return this.size-=t?1:0,t}function krt(e){return M1(this,e).get(e)}function Srt(e){return M1(this,e).has(e)}function Irt(e,t){var n=M1(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}function Sc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Sc.prototype.clear=$rt;Sc.prototype.delete=xrt;Sc.prototype.get=krt;Sc.prototype.has=Srt;Sc.prototype.set=Irt;function eU(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}var Trt=JH(Object.getPrototypeOf,Object),tU=Trt;function Ert(){this.__data__=new Ba,this.size=0}function _rt(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Nrt(e){return this.__data__.get(e)}function Art(e){return this.__data__.has(e)}var Drt=200;function Rrt(e,t){var n=this.__data__;if(n instanceof Ba){var s=n.__data__;if(!Ip||s.length<Drt-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new Sc(s)}return n.set(e,t),this.size=n.size,this}function ka(e){var t=this.__data__=new Ba(e);this.size=t.size}ka.prototype.clear=Ert;ka.prototype.delete=_rt;ka.prototype.get=Nrt;ka.prototype.has=Art;ka.prototype.set=Rrt;function Ort(e,t){return e&&D1(t,MT(t),e)}function Mrt(e,t){return e&&D1(t,PT(t),e)}var nU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,IM=nU&&typeof module=="object"&&module&&!module.nodeType&&module,Prt=IM&&IM.exports===nU,TM=Prt?oa.Buffer:void 0,EM=TM?TM.allocUnsafe:void 0;function Frt(e,t){if(t)return e.slice();var n=e.length,s=EM?EM(n):new e.constructor(n);return e.copy(s),s}function Lrt(e,t){for(var n=-1,s=e==null?0:e.length,o=0,r=[];++n<s;){var i=e[n];t(i,n,e)&&(r[o++]=i)}return r}function sU(){return[]}var Brt=Object.prototype,zrt=Brt.propertyIsEnumerable,_M=Object.getOwnPropertySymbols,Vrt=_M?function(e){return e==null?[]:(e=Object(e),Lrt(_M(e),function(t){return zrt.call(e,t)}))}:sU,FT=Vrt;function Wrt(e,t){return D1(e,FT(e),t)}var Hrt=Object.getOwnPropertySymbols,Urt=Hrt?function(e){for(var t=[];e;)eU(t,FT(e)),e=tU(e);return t}:sU,oU=Urt;function jrt(e,t){return D1(e,oU(e),t)}function rU(e,t,n){var s=t(e);return Kd(e)?s:eU(s,n(e))}function Vx(e){return rU(e,MT,FT)}function Grt(e){return rU(e,PT,oU)}var Krt=kc(oa,"DataView"),Wx=Krt,qrt=kc(oa,"Promise"),Hx=qrt,Yrt=kc(oa,"Set"),Ux=Yrt,NM="[object Map]",Xrt="[object Object]",AM="[object Promise]",DM="[object Set]",RM="[object WeakMap]",OM="[object DataView]",Zrt=xc(Wx),Jrt=xc(Ip),Qrt=xc(Hx),eit=xc(Ux),tit=xc(zx),fu=mm;(Wx&&fu(new Wx(new ArrayBuffer(1)))!=OM||Ip&&fu(new Ip)!=NM||Hx&&fu(Hx.resolve())!=AM||Ux&&fu(new Ux)!=DM||zx&&fu(new zx)!=RM)&&(fu=function(e){var t=mm(e),n=t==Xrt?e.constructor:void 0,s=n?xc(n):"";if(s)switch(s){case Zrt:return OM;case Jrt:return NM;case Qrt:return AM;case eit:return DM;case tit:return RM}return t});var Yd=fu,nit=Object.prototype,sit=nit.hasOwnProperty;function oit(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&sit.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var rit=oa.Uint8Array,r0=rit;function LT(e){var t=new e.constructor(e.byteLength);return new r0(t).set(new r0(e)),t}function iit(e,t){var n=t?LT(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var ait=/\w*$/;function lit(e){var t=new e.constructor(e.source,ait.exec(e));return t.lastIndex=e.lastIndex,t}var MM=xl?xl.prototype:void 0,PM=MM?MM.valueOf:void 0;function uit(e){return PM?Object(PM.call(e)):{}}function cit(e,t){var n=t?LT(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var dit="[object Boolean]",fit="[object Date]",hit="[object Map]",pit="[object Number]",git="[object RegExp]",mit="[object Set]",vit="[object String]",bit="[object Symbol]",yit="[object ArrayBuffer]",wit="[object DataView]",$it="[object Float32Array]",Cit="[object Float64Array]",xit="[object Int8Array]",kit="[object Int16Array]",Sit="[object Int32Array]",Iit="[object Uint8Array]",Tit="[object Uint8ClampedArray]",Eit="[object Uint16Array]",_it="[object Uint32Array]";function Nit(e,t,n){var s=e.constructor;switch(t){case yit:return LT(e);case dit:case fit:return new s(+e);case wit:return iit(e,n);case $it:case Cit:case xit:case kit:case Sit:case Iit:case Tit:case Eit:case _it:return cit(e,n);case hit:return new s;case pit:case vit:return new s(e);case git:return lit(e);case mit:return new s;case bit:return uit(e)}}function Ait(e){return typeof e.constructor=="function"&&!R1(e)?Zst(tU(e)):{}}var Dit="[object Map]";function Rit(e){return ic(e)&&Yd(e)==Dit}var FM=qd&&qd.isMap,Oit=FM?RT(FM):Rit,Mit=Oit,Pit="[object Set]";function Fit(e){return ic(e)&&Yd(e)==Pit}var LM=qd&&qd.isSet,Lit=LM?RT(LM):Fit,Bit=Lit,zit=1,Vit=2,Wit=4,iU="[object Arguments]",Hit="[object Array]",Uit="[object Boolean]",jit="[object Date]",Git="[object Error]",aU="[object Function]",Kit="[object GeneratorFunction]",qit="[object Map]",Yit="[object Number]",lU="[object Object]",Xit="[object RegExp]",Zit="[object Set]",Jit="[object String]",Qit="[object Symbol]",eat="[object WeakMap]",tat="[object ArrayBuffer]",nat="[object DataView]",sat="[object Float32Array]",oat="[object Float64Array]",rat="[object Int8Array]",iat="[object Int16Array]",aat="[object Int32Array]",lat="[object Uint8Array]",uat="[object Uint8ClampedArray]",cat="[object Uint16Array]",dat="[object Uint32Array]",os={};os[iU]=os[Hit]=os[tat]=os[nat]=os[Uit]=os[jit]=os[sat]=os[oat]=os[rat]=os[iat]=os[aat]=os[qit]=os[Yit]=os[lU]=os[Xit]=os[Zit]=os[Jit]=os[Qit]=os[lat]=os[uat]=os[cat]=os[dat]=!0;os[Git]=os[aU]=os[eat]=!1;function rb(e,t,n,s,o,r){var i,a=t&zit,l=t&Vit,u=t&Wit;if(n&&(i=o?n(e,s,o,r):n(e)),i!==void 0)return i;if(!vm(e))return e;var c=Kd(e);if(c){if(i=oit(e),!a)return Jst(e,i)}else{var d=Yd(e),f=d==aU||d==Kit;if(kp(e))return Frt(e,a);if(d==lU||d==iU||f&&!o){if(i=l||f?{}:Ait(e),!a)return l?jrt(e,Mrt(i,e)):Wrt(e,Ort(i,e))}else{if(!os[d])return o?e:{};i=Nit(e,d,a)}}r||(r=new ka);var h=r.get(e);if(h)return h;r.set(e,i),Bit(e)?e.forEach(function(m){i.add(rb(m,t,n,m,e,r))}):Mit(e)&&e.forEach(function(m,v){i.set(v,rb(m,t,n,v,e,r))});var p=u?l?Grt:Vx:l?PT:MT,g=c?void 0:p(e);return eot(g||e,function(m,v){g&&(v=m,m=e[v]),jH(i,v,rb(m,t,n,v,e,r))}),i}var fat=1,hat=4;function Yf(e){return rb(e,fat|hat)}var pat="__lodash_hash_undefined__";function gat(e){return this.__data__.set(e,pat),this}function mat(e){return this.__data__.has(e)}function i0(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Sc;++t<n;)this.add(e[t])}i0.prototype.add=i0.prototype.push=gat;i0.prototype.has=mat;function vat(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}function bat(e,t){return e.has(t)}var yat=1,wat=2;function uU(e,t,n,s,o,r){var i=n&yat,a=e.length,l=t.length;if(a!=l&&!(i&&l>a))return!1;var u=r.get(e),c=r.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=n&wat?new i0:void 0;for(r.set(e,t),r.set(t,e);++d<a;){var p=e[d],g=t[d];if(s)var m=i?s(g,p,d,t,e,r):s(p,g,d,e,t,r);if(m!==void 0){if(m)continue;f=!1;break}if(h){if(!vat(t,function(v,b){if(!bat(h,b)&&(p===v||o(p,v,n,s,r)))return h.push(b)})){f=!1;break}}else if(!(p===g||o(p,g,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}function $at(e){var t=-1,n=Array(e.size);return e.forEach(function(s,o){n[++t]=[o,s]}),n}function Cat(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var xat=1,kat=2,Sat="[object Boolean]",Iat="[object Date]",Tat="[object Error]",Eat="[object Map]",_at="[object Number]",Nat="[object RegExp]",Aat="[object Set]",Dat="[object String]",Rat="[object Symbol]",Oat="[object ArrayBuffer]",Mat="[object DataView]",BM=xl?xl.prototype:void 0,T$=BM?BM.valueOf:void 0;function Pat(e,t,n,s,o,r,i){switch(n){case Mat:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Oat:return!(e.byteLength!=t.byteLength||!r(new r0(e),new r0(t)));case Sat:case Iat:case _at:return AT(+e,+t);case Tat:return e.name==t.name&&e.message==t.message;case Nat:case Dat:return e==t+"";case Eat:var a=$at;case Aat:var l=s&xat;if(a||(a=Cat),e.size!=t.size&&!l)return!1;var u=i.get(e);if(u)return u==t;s|=kat,i.set(e,t);var c=uU(a(e),a(t),s,o,r,i);return i.delete(e),c;case Rat:if(T$)return T$.call(e)==T$.call(t)}return!1}var Fat=1,Lat=Object.prototype,Bat=Lat.hasOwnProperty;function zat(e,t,n,s,o,r){var i=n&Fat,a=Vx(e),l=a.length,u=Vx(t),c=u.length;if(l!=c&&!i)return!1;for(var d=l;d--;){var f=a[d];if(!(i?f in t:Bat.call(t,f)))return!1}var h=r.get(e),p=r.get(t);if(h&&p)return h==t&&p==e;var g=!0;r.set(e,t),r.set(t,e);for(var m=i;++d<l;){f=a[d];var v=e[f],b=t[f];if(s)var $=i?s(b,v,f,t,e,r):s(v,b,f,e,t,r);if(!($===void 0?v===b||o(v,b,n,s,r):$)){g=!1;break}m||(m=f=="constructor")}if(g&&!m){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w)&&(g=!1)}return r.delete(e),r.delete(t),g}var Vat=1,zM="[object Arguments]",VM="[object Array]",bv="[object Object]",Wat=Object.prototype,WM=Wat.hasOwnProperty;function Hat(e,t,n,s,o,r){var i=Kd(e),a=Kd(t),l=i?VM:Yd(e),u=a?VM:Yd(t);l=l==zM?bv:l,u=u==zM?bv:u;var c=l==bv,d=u==bv,f=l==u;if(f&&kp(e)){if(!kp(t))return!1;i=!0,c=!1}if(f&&!c)return r||(r=new ka),i||OT(e)?uU(e,t,n,s,o,r):Pat(e,t,l,n,s,o,r);if(!(n&Vat)){var h=c&&WM.call(e,"__wrapped__"),p=d&&WM.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return r||(r=new ka),o(g,m,n,s,r)}}return f?(r||(r=new ka),zat(e,t,n,s,o,r)):!1}function cU(e,t,n,s,o){return e===t?!0:e==null||t==null||!ic(e)&&!ic(t)?e!==e&&t!==t:Hat(e,t,n,s,cU,o)}var Uat="[object Map]",jat="[object Set]",Gat=Object.prototype,Kat=Gat.hasOwnProperty;function qat(e){if(e==null)return!0;if(DT(e)&&(Kd(e)||typeof e=="string"||typeof e.splice=="function"||kp(e)||OT(e)||qH(e)))return!e.length;var t=Yd(e);if(t==Uat||t==jat)return!e.size;if(R1(e))return!QH(e).length;for(var n in e)if(Kat.call(e,n))return!1;return!0}function HM(e,t){return cU(e,t)}var Yat=Object.defineProperty,Xat=Object.defineProperties,Zat=Object.getOwnPropertyDescriptors,UM=Object.getOwnPropertySymbols,Jat=Object.prototype.hasOwnProperty,Qat=Object.prototype.propertyIsEnumerable,jM=(e,t,n)=>t in e?Yat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,elt=(e,t)=>{for(var n in t||(t={}))Jat.call(t,n)&&jM(e,n,t[n]);if(UM)for(var n of UM(t))Qat.call(t,n)&&jM(e,n,t[n]);return e},tlt=(e,t)=>Xat(e,Zat(t));function nlt(e){return(e.match(/[a-zA-Z0-9]+/g)||[]).map(t=>`${t.charAt(0).toUpperCase()}${t.slice(1)}`).join("")}var Ul=(e,t)=>{const n={chartData:{type:Object,required:!0},options:{type:Object,required:!1},chartId:{default:e,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:()=>[]},onLabelsUpdate:{type:Function},onChartUpdate:{type:Function},onChartDestroy:{type:Function},onChartRender:{type:Function}},s=nlt(e);return ge({name:s,props:n,emits:{"labels:update":()=>!0,"chart:update":o=>!0,"chart:destroy":()=>!0,"chart:render":o=>!0},setup(o,{emit:r,expose:i}){const a=L(null),l=`${o.chartId}`;let u=vo(null);Oe(()=>o.chartData,c,{deep:!0}),Oe(()=>o.options,m=>{u.value&&m&&(u.value.options=Yf(m),p())},{deep:!0});function c(m){if(u.value){let v=u.value;HM(m.labels,u.value.data.labels)||(v.data.labels=m.labels,f()),HM(m.datasets,u.value.data.datasets)||m.datasets.forEach((b,$)=>{var y,w;if(qat(b))v.data.datasets=[];else{const C=Yf(v.data),x=Object.keys((w=(y=C.datasets)==null?void 0:y[$])!=null?w:{}),k=Object.keys(b);x.filter(S=>S!=="_meta"&&k.indexOf(S)===-1).forEach(S=>{v.data.datasets[$]&&delete v.data.datasets[$][S]});for(const S in b){const T=Yf(b[S]);v.data.datasets[$]||(v.data.datasets[$]={}),b.hasOwnProperty(S)&&T!=null&&v&&(v.data.datasets[$][S]=T)}}}),p()}else u.value&&g(),d()}function d(){a.value?(u.value=new Tu(a.value,{data:Yf(o.chartData),type:t,options:Yf(o.options),plugins:o.plugins}),h()):console.error(`Error on component ${s}, canvas cannot be rendered. Check if the render appends server-side`)}function f(){r("labels:update"),o.onLabelsUpdate&&o.onLabelsUpdate()}function h(){u.value&&(r("chart:render",u.value),o.onChartRender&&o.onChartRender(u.value))}function p(){u.value&&(u.value.update(),r("chart:update",u.value),o.onChartUpdate&&o.onChartUpdate(u.value))}function g(){u.value&&u.value.destroy(),r("chart:destroy"),o.onChartDestroy&&o.onChartDestroy()}return Rt(d),ls(()=>{u.value&&u.value.destroy()}),i({canvasRef:a,renderChart:d,chartInstance:u,canvasId:l,update:p}),()=>He("div",{style:tlt(elt({maxWidth:"100%"},o.styles),{position:"relative"}),class:o.cssClasses},[He("canvas",{style:{maxWidth:"100%",maxHeight:"100%"},id:l,width:o.width,height:o.height,ref:a})])}})};Ul("bar-chart","bar");var Tct=Ul("doughnut-chart","doughnut");Ul("line-chart","line");Ul("pie-chart","pie");Ul("polar-chart","polarArea");Ul("radar-chart","radar");Ul("bubble-chart","bubble");var Ect=Ul("scatter-chart","scatter");/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const dU=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Tf=e=>dU?Symbol(e):"_vr_"+e,slt=Tf("rvlm"),GM=Tf("rvd"),BT=Tf("r"),fU=Tf("rl"),jx=Tf("rvl"),td=typeof window!="undefined";function olt(e){return e.__esModule||dU&&e[Symbol.toStringTag]==="Module"}const Xn=Object.assign;function E$(e,t){const n={};for(const s in t){const o=t[s];n[s]=Array.isArray(o)?o.map(e):e(o)}return n}const Mh=()=>{},rlt=/\/$/,ilt=e=>e.replace(rlt,"");function _$(e,t,n="/"){let s,o={},r="",i="";const a=t.indexOf("?"),l=t.indexOf("#",a>-1?a:0);return a>-1&&(s=t.slice(0,a),r=t.slice(a+1,l>-1?l:t.length),o=e(r)),l>-1&&(s=s||t.slice(0,l),i=t.slice(l,t.length)),s=clt(s!=null?s:t,n),{fullPath:s+(r&&"?")+r+i,path:s,query:o,hash:i}}function alt(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function KM(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function llt(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&Xd(t.matched[s],n.matched[o])&&hU(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Xd(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function hU(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ult(e[n],t[n]))return!1;return!0}function ult(e,t){return Array.isArray(e)?qM(e,t):Array.isArray(t)?qM(t,e):e===t}function qM(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function clt(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/");let o=n.length-1,r,i;for(r=0;r<s.length;r++)if(i=s[r],!(o===1||i==="."))if(i==="..")o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(r-(r===s.length?1:0)).join("/")}var Tp;(function(e){e.pop="pop",e.push="push"})(Tp||(Tp={}));var Ph;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ph||(Ph={}));function dlt(e){if(!e)if(td){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ilt(e)}const flt=/^[^#]+#/;function hlt(e,t){return e.replace(flt,"#")+t}function plt(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const P1=()=>({left:window.pageXOffset,top:window.pageYOffset});function glt(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=plt(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function YM(e,t){return(history.state?history.state.position-t:-1)+e}const Gx=new Map;function mlt(e,t){Gx.set(e,t)}function vlt(e){const t=Gx.get(e);return Gx.delete(e),t}let blt=()=>location.protocol+"//"+location.host;function pU(e,t){const{pathname:n,search:s,hash:o}=t,r=e.indexOf("#");if(r>-1){let a=o.includes(e.slice(r))?e.slice(r).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),KM(l,"")}return KM(n,e)+s+o}function ylt(e,t,n,s){let o=[],r=[],i=null;const a=({state:f})=>{const h=pU(e,location),p=n.value,g=t.value;let m=0;if(f){if(n.value=h,t.value=f,i&&i===p){i=null;return}m=g?f.position-g.position:0}else s(h);o.forEach(v=>{v(n.value,p,{delta:m,type:Tp.pop,direction:m?m>0?Ph.forward:Ph.back:Ph.unknown})})};function l(){i=n.value}function u(f){o.push(f);const h=()=>{const p=o.indexOf(f);p>-1&&o.splice(p,1)};return r.push(h),h}function c(){const{history:f}=window;!f.state||f.replaceState(Xn({},f.state,{scroll:P1()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:d}}function XM(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?P1():null}}function wlt(e){const{history:t,location:n}=window,s={value:pU(e,n)},o={value:t.state};o.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:blt()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),o.value=u}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function i(l,u){const c=Xn({},t.state,XM(o.value.back,l,o.value.forward,!0),u,{position:o.value.position});r(l,c,!0),s.value=l}function a(l,u){const c=Xn({},o.value,t.state,{forward:l,scroll:P1()});r(c.current,c,!0);const d=Xn({},XM(s.value,l,null),{position:c.position+1},u);r(l,d,!1),s.value=l}return{location:s,state:o,push:a,replace:i}}function _ct(e){e=dlt(e);const t=wlt(e),n=ylt(e,t.state,t.location,t.replace);function s(r,i=!0){i||n.pauseListeners(),history.go(r)}const o=Xn({location:"",base:e,go:s,createHref:hlt.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function $lt(e){return typeof e=="string"||e&&typeof e=="object"}function gU(e){return typeof e=="string"||typeof e=="symbol"}const Ka={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},mU=Tf("nf");var ZM;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ZM||(ZM={}));function Zd(e,t){return Xn(new Error,{type:e,[mU]:!0},t)}function ou(e,t){return e instanceof Error&&mU in e&&(t==null||!!(e.type&t))}const JM="[^/]+?",Clt={sensitive:!1,strict:!1,start:!0,end:!0},xlt=/[.+*?^${}()[\]/\\]/g;function klt(e,t){const n=Xn({},Clt,t),s=[];let o=n.start?"^":"";const r=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(o+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(o+="/"),o+=f.value.replace(xlt,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:g,optional:m,regexp:v}=f;r.push({name:p,repeatable:g,optional:m});const b=v||JM;if(b!==JM){h+=10;try{new RegExp(`(${b})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+y.message)}}let $=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||($=m&&u.length<2?`(?:/${$})`:"/"+$),m&&($+="?"),o+=$,h+=20,m&&(h+=-8),g&&(h+=-20),b===".*"&&(h+=-50)}c.push(h)}s.push(c)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function a(u){const c=u.match(i),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",p=r[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:m}=h,v=p in u?u[p]:"";if(Array.isArray(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Array.isArray(v)?v.join("/"):v;if(!b)if(m)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c}return{re:i,score:s,keys:r,parse:a,stringify:l}}function Slt(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Ilt(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const r=Slt(s[n],o[n]);if(r)return r;n++}return o.length-s.length}const Tlt={type:0,value:""},Elt=/[a-zA-Z0-9_]/;function _lt(e){if(!e)return[[]];if(e==="/")return[[Tlt]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,s=n;const o=[];let r;function i(){r&&o.push(r),r=[]}let a=0,l,u="",c="";function d(){!u||(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),i()):l===":"?(d(),n=1):f();break;case 4:f(),n=s;break;case 1:l==="("?n=2:Elt.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),i(),o}function Nlt(e,t,n){const s=klt(_lt(e.path),n),o=Xn(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Alt(e,t){const n=[],s=new Map;t=e3({strict:!1,end:!0,sensitive:!1},t);function o(c){return s.get(c)}function r(c,d,f){const h=!f,p=Rlt(c);p.aliasOf=f&&f.record;const g=e3(t,c),m=[p];if("alias"in c){const $=typeof c.alias=="string"?[c.alias]:c.alias;for(const y of $)m.push(Xn({},p,{components:f?f.record.components:p.components,path:y,aliasOf:f?f.record:p}))}let v,b;for(const $ of m){const{path:y}=$;if(d&&y[0]!=="/"){const w=d.record.path,C=w[w.length-1]==="/"?"":"/";$.path=d.record.path+(y&&C+y)}if(v=Nlt($,d,g),f?f.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),h&&c.name&&!QM(v)&&i(c.name)),"children"in p){const w=p.children;for(let C=0;C<w.length;C++)r(w[C],v,f&&f.children[C])}f=f||v,l(v)}return b?()=>{i(b)}:Mh}function i(c){if(gU(c)){const d=s.get(c);d&&(s.delete(c),n.splice(n.indexOf(d),1),d.children.forEach(i),d.alias.forEach(i))}else{const d=n.indexOf(c);d>-1&&(n.splice(d,1),c.record.name&&s.delete(c.record.name),c.children.forEach(i),c.alias.forEach(i))}}function a(){return n}function l(c){let d=0;for(;d<n.length&&Ilt(c,n[d])>=0;)d++;n.splice(d,0,c),c.record.name&&!QM(c)&&s.set(c.record.name,c)}function u(c,d){let f,h={},p,g;if("name"in c&&c.name){if(f=s.get(c.name),!f)throw Zd(1,{location:c});g=f.record.name,h=Xn(Dlt(d.params,f.keys.filter(b=>!b.optional).map(b=>b.name)),c.params),p=f.stringify(h)}else if("path"in c)p=c.path,f=n.find(b=>b.re.test(p)),f&&(h=f.parse(p),g=f.record.name);else{if(f=d.name?s.get(d.name):n.find(b=>b.re.test(d.path)),!f)throw Zd(1,{location:c,currentLocation:d});g=f.record.name,h=Xn({},d.params,c.params),p=f.stringify(h)}const m=[];let v=f;for(;v;)m.unshift(v.record),v=v.parent;return{name:g,path:p,params:h,matched:m,meta:Mlt(m)}}return e.forEach(c=>r(c)),{addRoute:r,resolve:u,removeRoute:i,getRoutes:a,getRecordMatcher:o}}function Dlt(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Rlt(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Olt(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function Olt(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="boolean"?n:n[s];return t}function QM(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Mlt(e){return e.reduce((t,n)=>Xn(t,n.meta),{})}function e3(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const vU=/#/g,Plt=/&/g,Flt=/\//g,Llt=/=/g,Blt=/\?/g,bU=/\+/g,zlt=/%5B/g,Vlt=/%5D/g,yU=/%5E/g,Wlt=/%60/g,wU=/%7B/g,Hlt=/%7C/g,$U=/%7D/g,Ult=/%20/g;function zT(e){return encodeURI(""+e).replace(Hlt,"|").replace(zlt,"[").replace(Vlt,"]")}function jlt(e){return zT(e).replace(wU,"{").replace($U,"}").replace(yU,"^")}function Kx(e){return zT(e).replace(bU,"%2B").replace(Ult,"+").replace(vU,"%23").replace(Plt,"%26").replace(Wlt,"`").replace(wU,"{").replace($U,"}").replace(yU,"^")}function Glt(e){return Kx(e).replace(Llt,"%3D")}function Klt(e){return zT(e).replace(vU,"%23").replace(Blt,"%3F")}function qlt(e){return e==null?"":Klt(e).replace(Flt,"%2F")}function a0(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Ylt(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<s.length;++o){const r=s[o].replace(bU," "),i=r.indexOf("="),a=a0(i<0?r:r.slice(0,i)),l=i<0?null:a0(r.slice(i+1));if(a in t){let u=t[a];Array.isArray(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function t3(e){let t="";for(let n in e){const s=e[n];if(n=Glt(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(s)?s.map(r=>r&&Kx(r)):[s&&Kx(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Xlt(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Array.isArray(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}function Xf(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Qa(e,t,n,s,o){const r=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((i,a)=>{const l=d=>{d===!1?a(Zd(4,{from:n,to:t})):d instanceof Error?a(d):$lt(d)?a(Zd(2,{from:t,to:d})):(r&&s.enterCallbacks[o]===r&&typeof d=="function"&&r.push(d),i())},u=e.call(s&&s.instances[o],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(d=>a(d))})}function N$(e,t,n,s){const o=[];for(const r of e)for(const i in r.components){let a=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(Zlt(a)){const u=(a.__vccOpts||a)[t];u&&o.push(Qa(u,n,s,r,i))}else{let l=a();o.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${i}" at "${r.path}"`));const c=olt(u)?u.default:u;r.components[i]=c;const f=(c.__vccOpts||c)[t];return f&&Qa(f,n,s,r,i)()}))}}return o}function Zlt(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function n3(e){const t=Ze(BT),n=Ze(fU),s=R(()=>t.resolve(Ke(e.to))),o=R(()=>{const{matched:l}=s.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(Xd.bind(null,c));if(f>-1)return f;const h=s3(l[u-2]);return u>1&&s3(c)===h&&d[d.length-1].path!==h?d.findIndex(Xd.bind(null,l[u-2])):f}),r=R(()=>o.value>-1&&tut(n.params,s.value.params)),i=R(()=>o.value>-1&&o.value===n.matched.length-1&&hU(n.params,s.value.params));function a(l={}){return eut(l)?t[Ke(e.replace)?"replace":"push"](Ke(e.to)).catch(Mh):Promise.resolve()}return{route:s,href:R(()=>s.value.href),isActive:r,isExactActive:i,navigate:a}}const Jlt=ge({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:n3,setup(e,{slots:t}){const n=Sn(n3(e)),{options:s}=Ze(BT),o=R(()=>({[o3(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[o3(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:He("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),Qlt=Jlt;function eut(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function tut(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!Array.isArray(o)||o.length!==s.length||s.some((r,i)=>r!==o[i]))return!1}return!0}function s3(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const o3=(e,t,n)=>e!=null?e:t!=null?t:n,nut=ge({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const s=Ze(jx),o=R(()=>e.route||s.value),r=Ze(GM,0),i=R(()=>o.value.matched[r]);Vt(GM,r+1),Vt(slt,i),Vt(jx,o);const a=L();return Oe(()=>[a.value,i.value,e.name],([l,u,c],[d,f,h])=>{u&&(u.instances[c]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Xd(u,f)||!d)&&(u.enterCallbacks[c]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=o.value,u=i.value,c=u&&u.components[e.name],d=e.name;if(!c)return r3(n.default,{Component:c,route:l});const f=u.props[e.name],h=f?f===!0?l.params:typeof f=="function"?f(l):f:null,g=He(c,Xn({},h,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(u.instances[d]=null)},ref:a}));return r3(n.default,{Component:g,route:l})||g}}});function r3(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const sut=nut;function Nct(e){const t=Alt(e.routes,e),n=e.parseQuery||Ylt,s=e.stringifyQuery||t3,o=e.history,r=Xf(),i=Xf(),a=Xf(),l=vo(Ka);let u=Ka;td&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=E$.bind(null,G=>""+G),d=E$.bind(null,qlt),f=E$.bind(null,a0);function h(G,Y){let X,ae;return gU(G)?(X=t.getRecordMatcher(G),ae=Y):ae=G,t.addRoute(ae,X)}function p(G){const Y=t.getRecordMatcher(G);Y&&t.removeRoute(Y)}function g(){return t.getRoutes().map(G=>G.record)}function m(G){return!!t.getRecordMatcher(G)}function v(G,Y){if(Y=Xn({},Y||l.value),typeof G=="string"){const Fe=_$(n,G,Y.path),j=t.resolve({path:Fe.path},Y),Q=o.createHref(Fe.fullPath);return Xn(Fe,j,{params:f(j.params),hash:a0(Fe.hash),redirectedFrom:void 0,href:Q})}let X;if("path"in G)X=Xn({},G,{path:_$(n,G.path,Y.path).path});else{const Fe=Xn({},G.params);for(const j in Fe)Fe[j]==null&&delete Fe[j];X=Xn({},G,{params:d(G.params)}),Y.params=d(Y.params)}const ae=t.resolve(X,Y),Se=G.hash||"";ae.params=c(f(ae.params));const Le=alt(s,Xn({},G,{hash:jlt(Se),path:ae.path})),Be=o.createHref(Le);return Xn({fullPath:Le,hash:Se,query:s===t3?Xlt(G.query):G.query||{}},ae,{redirectedFrom:void 0,href:Be})}function b(G){return typeof G=="string"?_$(n,G,l.value.path):Xn({},G)}function $(G,Y){if(u!==G)return Zd(8,{from:Y,to:G})}function y(G){return x(G)}function w(G){return y(Xn(b(G),{replace:!0}))}function C(G){const Y=G.matched[G.matched.length-1];if(Y&&Y.redirect){const{redirect:X}=Y;let ae=typeof X=="function"?X(G):X;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=b(ae):{path:ae},ae.params={}),Xn({query:G.query,hash:G.hash,params:G.params},ae)}}function x(G,Y){const X=u=v(G),ae=l.value,Se=G.state,Le=G.force,Be=G.replace===!0,Fe=C(X);if(Fe)return x(Xn(b(Fe),{state:Se,force:Le,replace:Be}),Y||X);const j=X;j.redirectedFrom=Y;let Q;return!Le&&llt(s,ae,X)&&(Q=Zd(16,{to:j,from:ae}),ne(ae,ae,!0,!1)),(Q?Promise.resolve(Q):I(j,ae)).catch(H=>ou(H)?H:F(H,j,ae)).then(H=>{if(H){if(ou(H,2))return x(Xn(b(H.to),{state:Se,force:Le,replace:Be}),Y||j)}else H=T(j,ae,!0,Be,Se);return S(j,ae,H),H})}function k(G,Y){const X=$(G,Y);return X?Promise.reject(X):Promise.resolve()}function I(G,Y){let X;const[ae,Se,Le]=out(G,Y);X=N$(ae.reverse(),"beforeRouteLeave",G,Y);for(const Fe of ae)Fe.leaveGuards.forEach(j=>{X.push(Qa(j,G,Y))});const Be=k.bind(null,G,Y);return X.push(Be),Kc(X).then(()=>{X=[];for(const Fe of r.list())X.push(Qa(Fe,G,Y));return X.push(Be),Kc(X)}).then(()=>{X=N$(Se,"beforeRouteUpdate",G,Y);for(const Fe of Se)Fe.updateGuards.forEach(j=>{X.push(Qa(j,G,Y))});return X.push(Be),Kc(X)}).then(()=>{X=[];for(const Fe of G.matched)if(Fe.beforeEnter&&!Y.matched.includes(Fe))if(Array.isArray(Fe.beforeEnter))for(const j of Fe.beforeEnter)X.push(Qa(j,G,Y));else X.push(Qa(Fe.beforeEnter,G,Y));return X.push(Be),Kc(X)}).then(()=>(G.matched.forEach(Fe=>Fe.enterCallbacks={}),X=N$(Le,"beforeRouteEnter",G,Y),X.push(Be),Kc(X))).then(()=>{X=[];for(const Fe of i.list())X.push(Qa(Fe,G,Y));return X.push(Be),Kc(X)}).catch(Fe=>ou(Fe,8)?Fe:Promise.reject(Fe))}function S(G,Y,X){for(const ae of a.list())ae(G,Y,X)}function T(G,Y,X,ae,Se){const Le=$(G,Y);if(Le)return Le;const Be=Y===Ka,Fe=td?history.state:{};X&&(ae||Be?o.replace(G.fullPath,Xn({scroll:Be&&Fe&&Fe.scroll},Se)):o.push(G.fullPath,Se)),l.value=G,ne(G,Y,X,Be),U()}let _;function N(){_=o.listen((G,Y,X)=>{const ae=v(G),Se=C(ae);if(Se){x(Xn(Se,{replace:!0}),ae).catch(Mh);return}u=ae;const Le=l.value;td&&mlt(YM(Le.fullPath,X.delta),P1()),I(ae,Le).catch(Be=>ou(Be,12)?Be:ou(Be,2)?(x(Be.to,ae).then(Fe=>{ou(Fe,20)&&!X.delta&&X.type===Tp.pop&&o.go(-1,!1)}).catch(Mh),Promise.reject()):(X.delta&&o.go(-X.delta,!1),F(Be,ae,Le))).then(Be=>{Be=Be||T(ae,Le,!1),Be&&(X.delta?o.go(-X.delta,!1):X.type===Tp.pop&&ou(Be,20)&&o.go(-1,!1)),S(ae,Le,Be)}).catch(Mh)})}let O=Xf(),M=Xf(),D;function F(G,Y,X){U(G);const ae=M.list();return ae.length?ae.forEach(Se=>Se(G,Y,X)):console.error(G),Promise.reject(G)}function V(){return D&&l.value!==Ka?Promise.resolve():new Promise((G,Y)=>{O.add([G,Y])})}function U(G){D||(D=!0,N(),O.list().forEach(([Y,X])=>G?X(G):Y()),O.reset())}function ne(G,Y,X,ae){const{scrollBehavior:Se}=e;if(!td||!Se)return Promise.resolve();const Le=!X&&vlt(YM(G.fullPath,0))||(ae||!X)&&history.state&&history.state.scroll||null;return dt().then(()=>Se(G,Y,Le)).then(Be=>Be&&glt(Be)).catch(Be=>F(Be,G,Y))}const be=G=>o.go(G);let te;const he=new Set;return{currentRoute:l,addRoute:h,removeRoute:p,hasRoute:m,getRoutes:g,resolve:v,options:e,push:y,replace:w,go:be,back:()=>be(-1),forward:()=>be(1),beforeEach:r.add,beforeResolve:i.add,afterEach:a.add,onError:M.add,isReady:V,install(G){const Y=this;G.component("RouterLink",Qlt),G.component("RouterView",sut),G.config.globalProperties.$router=Y,Object.defineProperty(G.config.globalProperties,"$route",{enumerable:!0,get:()=>Ke(l)}),td&&!te&&l.value===Ka&&(te=!0,y(o.location).catch(Se=>{}));const X={};for(const Se in Ka)X[Se]=R(()=>l.value[Se]);G.provide(BT,Y),G.provide(fU,Sn(X)),G.provide(jx,l);const ae=G.unmount;he.add(G),G.unmount=function(){he.delete(G),he.size<1&&(u=Ka,_&&_(),l.value=Ka,te=!1,D=!1),ae()}}}}function Kc(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function out(e,t){const n=[],s=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let i=0;i<r;i++){const a=t.matched[i];a&&(e.matched.find(u=>Xd(u,a))?s.push(a):n.push(a));const l=e.matched[i];l&&(t.matched.find(u=>Xd(u,l))||o.push(l))}return[n,s,o]}/*!
* chartjs-plugin-annotation v1.4.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2022 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const CU=["click","dblclick"],qx=["enter","leave"],VT=CU.concat(qx);function rut(e,t,n){t.listened=!1,t.moveListened=!1,VT.forEach(s=>{typeof n[s]=="function"?(t.listened=!0,t.listeners[s]=n[s]):Us(t.listeners[s])&&delete t.listeners[s]}),qx.forEach(s=>{typeof n[s]=="function"&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(s=>{t.listened||CU.forEach(o=>{typeof s[o]=="function"&&(t.listened=!0)}),t.moveListened||qx.forEach(o=>{typeof s[o]=="function"&&(t.listened=!0,t.moveListened=!0)})})}function iut(e,t,n){if(e.listened)switch(t.type){case"mousemove":case"mouseout":aut(e,t);break;case"click":uut(e,t,n);break}}function aut(e,t){if(!e.moveListened)return;let n;t.type==="mousemove"&&(n=xU(e.elements,t));const s=e.hovered;e.hovered=n,lut(e,{previous:s,element:n},t)}function lut(e,t,n){const{previous:s,element:o}=t;s&&s!==o&&Fh(s.options.leave||e.listeners.leave,s,n),o&&o!==s&&Fh(o.options.enter||e.listeners.enter,o,n)}function uut(e,t,n){const s=e.listeners,o=xU(e.elements,t);if(o){const r=o.options,i=r.dblclick||s.dblclick,a=r.click||s.click;o.clickTimeout?(clearTimeout(o.clickTimeout),delete o.clickTimeout,Fh(i,o,t)):i?o.clickTimeout=setTimeout(()=>{delete o.clickTimeout,Fh(a,o,t)},n.dblClickSpeed):Fh(a,o,t)}}function Fh(e,t,n){Zn(e,[t.$context,n])}function xU(e,t){let n=Number.POSITIVE_INFINITY;return e.filter(s=>s.options.display&&s.inRange(t.x,t.y)).reduce((s,o)=>{const r=o.getCenterPoint(),i=bp(t,r);return i<n?(s=[o],n=i):i===n&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)[0]}function cut(e,t,n){const s=gut(t,n);let o=i3(t,s,"min","suggestedMin");o=i3(t,s,"max","suggestedMax")||o,o&&typeof t.handleTickRangeOptions=="function"&&t.handleTickRangeOptions()}function dut(e,t){for(const n of e)hut(n,t)}function i3(e,t,n,s){if(ws(t[n])&&!fut(e.options,n,s)){const o=e[n]!==t[n];return e[n]=t[n],o}}function fut(e,t,n){return Us(e[t])||Us(e[n])}function hut(e,t){for(const n of["scaleID","xScaleID","yScaleID"])e[n]&&!t[e[n]]&&put(e,n)&&console.warn(`No scale found with id '${e[n]}' for annotation '${e.id}'`)}function put(e,t){if(t==="scaleID")return!0;const n=t.charAt(0);for(const s of["Min","Max","Value"])if(Us(e[n+s]))return!0;return!1}function gut(e,t){const n=e.axis,s=e.id,o=n+"ScaleID",r={min:Gt(e.min,Number.NEGATIVE_INFINITY),max:Gt(e.max,Number.POSITIVE_INFINITY)};for(const i of t)i.scaleID===s?a3(i,e,["value","endValue"],r):i[o]===s&&a3(i,e,[n+"Min",n+"Max",n+"Value"],r);return r}function a3(e,t,n,s){for(const o of n){const r=e[o];if(Us(r)){const i=t.parse(r);s.min=Math.min(s.min,i),s.max=Math.max(s.max,i)}}}const yv=.001,WT=(e,t,n)=>Math.min(n,Math.max(t,e));function mut(e,t,n){for(const s of Object.keys(e))e[s]=WT(e[s],t,n);return e}function vut(e,t,n,s){if(!e||!t||n<=0)return!1;const o=s/2||0;return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(n+o,2)}function kU(e,t,{x:n,y:s,width:o,height:r},i){const a=i/2;return e>=n-a-yv&&e<=n+o+a+yv&&t>=s-a-yv&&t<=s+r+a+yv}function SU(e,t){const{x:n,y:s}=e.getProps(["x","y"],t);return{x:n,y:s}}const but=(e,t)=>t>e||e.length>t.length&&e.substr(0,t.length)===t;function yut(e,t,n,s=!0){const o=n.split(".");let r=0;for(const i of t.split(".")){const a=o[r++];if(parseInt(i,10)<parseInt(a,10))break;if(but(a,i)){if(s)throw new Error(`${e} v${n} is not supported. v${t} or newer is required.`);return!1}}return!0}const IU=e=>typeof e=="string"&&e.endsWith("%"),TU=e=>WT(parseFloat(e)/100,0,1);function HT(e,t){return t==="start"?0:t==="end"?e:IU(t)?TU(t)*e:e/2}function Jd(e,t){return typeof t=="number"?t:IU(t)?TU(t)*e:e}function wut(e,t){const{x:n,width:s}=e,o=t.textAlign;return o==="center"?n+s/2:o==="end"||o==="right"?n+s:n}function EU(e){return ln(e)?{x:Gt(e.x,"center"),y:Gt(e.y,"center")}:(e=Gt(e,"center"),{x:e,y:e})}function _U(e){return e&&(Us(e.xValue)||Us(e.yValue))}const A$=new Map;function UT(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function l0(e,t,n){if(n){const s=t.getCenterPoint();e.translate(s.x,s.y),e.rotate(ro(n)),e.translate(-s.x,-s.y)}}function Ic(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle,e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle,e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function Ef(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function jT(e,t){const n=t.content;if(UT(n))return{width:Jd(n.width,t.width),height:Jd(n.height,t.height)};const s=Ds(t.font),o=t.textStrokeWidth,r=Vn(n)?n:[n],i=r.join()+s.string+o+(e._measureText?"-spriting":"");if(!A$.has(i)){e.save(),e.font=s.string;const a=r.length;let l=0;for(let c=0;c<a;c++){const d=r[c];l=Math.max(l,e.measureText(d).width+o)}e.restore();const u=a*s.lineHeight+o;A$.set(i,{width:l,height:u})}return A$.get(i)}function GT(e,t,n){const{x:s,y:o,width:r,height:i}=t;e.save(),Ef(e,n);const a=Ic(e,n);e.fillStyle=n.backgroundColor,e.beginPath(),Cp(e,{x:s,y:o,w:r,h:i,radius:mut(Lu(Gt(n.cornerRadius,n.borderRadius)),0,Math.min(r,i)/2)}),e.closePath(),e.fill(),a&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}function KT(e,t,n){const s=n.content;if(UT(s)){e.drawImage(s,t.x,t.y,t.width,t.height);return}const o=Vn(s)?s:[s],r=Ds(n.font),i=r.lineHeight,a=wut(t,n),l=t.y+i/2+n.textStrokeWidth/2;e.save(),e.font=r.string,e.textBaseline="middle",e.textAlign=n.textAlign,$ut(e,n)&&o.forEach((u,c)=>e.strokeText(u,a,l+c*i)),e.fillStyle=n.color,o.forEach((u,c)=>e.fillText(u,a,l+c*i)),e.restore()}function $ut(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function Ep(e){const{x:t,y:n,width:s,height:o}=e;return{x:t+s/2,y:n+o/2}}function bm(e,t,n){const s=Math.cos(n),o=Math.sin(n),r=t.x,i=t.y;return{x:r+s*(e.x-r)-o*(e.y-i),y:i+o*(e.x-r)+s*(e.y-i)}}function Vi(e,t,n){return t=typeof t=="number"?t:e.parse(t),ws(t)?e.getPixelForValue(t):n}function l3(e,t){if(e){const n=Vi(e,t.min,t.start),s=Vi(e,t.max,t.end);return{start:Math.min(n,s),end:Math.max(n,s)}}return{start:t.start,end:t.end}}function NU(e,t){const{chartArea:n,scales:s}=e,o=s[t.xScaleID],r=s[t.yScaleID];let i=n.width/2,a=n.height/2;return o&&(i=Vi(o,t.xValue,i)),r&&(a=Vi(r,t.yValue,a)),{x:i,y:a}}function F1(e,t){const n=e.scales[t.xScaleID],s=e.scales[t.yScaleID];let{top:o,left:r,bottom:i,right:a}=e.chartArea;if(!n&&!s)return{};const l=l3(n,{min:t.xMin,max:t.xMax,start:r,end:a});r=l.start,a=l.end;const u=l3(s,{min:t.yMin,max:t.yMax,start:o,end:i});return o=u.start,i=u.end,{x:r,y:o,x2:a,y2:i,width:a-r,height:i-o}}function Cut(e,t){const n=NU(e,t);return{x:n.x+t.xAdjust,y:n.y+t.yAdjust,width:t.radius*2,height:t.radius*2}}function AU(e,t){if(!_U(t)){const n=F1(e,t),s=Ep(n);let o=t.radius;return(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,t.radius=o),{x:s.x+t.xAdjust,y:s.y+t.yAdjust,width:o*2,height:o*2}}return Cut(e,t)}class ym extends To{inRange(t,n,s){const{x:o,y:r}=bm({x:t,y:n},this.getCenterPoint(s),ro(-this.options.rotation));return kU(o,r,this.getProps(["x","y","width","height"],s),this.options.borderWidth)}getCenterPoint(t){return Ep(this.getProps(["x","y","width","height"],t))}draw(t){t.save(),l0(t,this,this.options.rotation),GT(t,this,this.options),t.restore()}drawLabel(t){const{x:n,y:s,width:o,height:r,options:i}=this,{label:a,borderWidth:l}=i,u=l/2,c=EU(a.position),d=Js(a.padding),f=jT(t,a),h={x:xut(this,f,c,d),y:kut(this,f,c,d),width:f.width,height:f.height};t.save(),l0(t,this,a.rotation),t.beginPath(),t.rect(n+u+d.left,s+u+d.top,o-l-d.width,r-l-d.height),t.clip(),KT(t,h,a),t.restore()}resolveElementProperties(t,n){return F1(t,n)}}ym.id="boxAnnotation";ym.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,cornerRadius:void 0,display:!0,label:{borderWidth:void 0,color:"black",content:null,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,xAdjust:0,yAdjust:0,width:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};ym.defaultRoutes={borderColor:"color",backgroundColor:"color"};ym.descriptors={label:{_fallback:!0}};function xut(e,t,n,s){const{x:o,x2:r,width:i,options:a}=e,{xAdjust:l,borderWidth:u}=a.label;return DU({start:o,end:r,size:i},{position:n.x,padding:{start:s.left,end:s.right},adjust:l,borderWidth:u,size:t.width})}function kut(e,t,n,s){const{y:o,y2:r,height:i,options:a}=e,{yAdjust:l,borderWidth:u}=a.label;return DU({start:o,end:r,size:i},{position:n.y,padding:{start:s.top,end:s.bottom},adjust:l,borderWidth:u,size:t.height})}function DU(e,t){const{start:n,end:s}=e,{position:o,padding:{start:r,end:i},adjust:a,borderWidth:l}=t,u=s-l-n-r-i-t.size;return n+l/2+a+r+HT(u,o)}const qT=(e,t,n)=>({x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}),Yx=(e,t,n)=>qT(t,n,Math.abs((e-t.y)/(n.y-t.y))).x,u3=(e,t,n)=>qT(t,n,Math.abs((e-t.x)/(n.x-t.x))).y,Zf=e=>e*e,Jf=.001;function c3({x:e,y:t,x2:n,y2:s},{top:o,right:r,bottom:i,left:a}){return!(e<a&&n<a||e>r&&n>r||t<o&&s<o||t>i&&s>i)}function d3({x:e,y:t},n,{top:s,right:o,bottom:r,left:i}){return e<i&&(t=u3(i,{x:e,y:t},n),e=i),e>o&&(t=u3(o,{x:e,y:t},n),e=o),t<s&&(e=Yx(s,{x:e,y:t},n),t=s),t>r&&(e=Yx(r,{x:e,y:t},n),t=r),{x:e,y:t}}function Sut(e,t,n){const{x:s,y:o}=d3(e,t,n),{x:r,y:i}=d3(t,e,n);return{x:s,y:o,x2:r,y2:i,width:Math.abs(r-s),height:Math.abs(i-o)}}class wm extends To{intersects(t,n,s=Jf,o){const{x:r,y:i,x2:a,y2:l}=this.getProps(["x","y","x2","y2"],o),u=a-r,c=l-i,d=Zf(u)+Zf(c),f=d===0?-1:((t-r)*u+(n-i)*c)/d;let h,p;return f<0?(h=r,p=i):f>1?(h=a,p=l):(h=r+f*u,p=i+f*c),Zf(t-h)+Zf(n-p)<=s}labelIsVisible(t,n){const s=this.options.label;return!s||!s.enabled?!1:!n||c3(this.getProps(["x","y","x2","y2"],t),n)}isOnLabel(t,n,s){if(!this.labelIsVisible(s))return!1;const{labelX:o,labelY:r,labelWidth:i,labelHeight:a,labelRotation:l}=this.getProps(["labelX","labelY","labelWidth","labelHeight","labelRotation"],s),{x:u,y:c}=bm({x:t,y:n},{x:o,y:r},-l),d=this.options.label.borderWidth/2||0,f=i/2+d,h=a/2+d;return u>=o-f-Jf&&u<=o+f+Jf&&c>=r-h-Jf&&c<=r+h+Jf}inRange(t,n,s){const o=Zf(this.options.borderWidth/2);return this.intersects(t,n,o,s)||this.isOnLabel(t,n,s)}getCenterPoint(){return{x:(this.x2+this.x)/2,y:(this.y2+this.y)/2}}draw(t){const{x:n,y:s,x2:o,y2:r,options:i}=this;if(t.save(),!Ic(t,i))return t.restore();Ef(t,i);const a=Math.atan2(r-s,o-n),l=Math.sqrt(Math.pow(o-n,2)+Math.pow(r-s,2)),{startOpts:u,endOpts:c,startAdjust:d,endAdjust:f}=Rut(this);t.translate(n,s),t.rotate(a),t.beginPath(),t.moveTo(0+d,0),t.lineTo(l-f,0),t.shadowColor=i.borderShadowColor,t.stroke(),m3(t,0,d,u),m3(t,l,-f,c),t.restore()}drawLabel(t,n){if(!this.labelIsVisible(!1,n))return;const{labelX:s,labelY:o,labelWidth:r,labelHeight:i,labelRotation:a,labelPadding:l,labelTextSize:u,options:{label:c}}=this;t.save(),t.translate(s,o),t.rotate(a);const d={x:-(r/2),y:-(i/2),width:r,height:i};GT(t,d,c);const f={x:-(r/2)+l.left+c.borderWidth/2,y:-(i/2)+l.top+c.borderWidth/2,width:u.width,height:u.height};KT(t,f,c),t.restore()}resolveElementProperties(t,n){const s=t.scales[n.scaleID];let{top:o,left:r,bottom:i,right:a}=t.chartArea,l,u;if(s)l=Vi(s,n.value,NaN),u=Vi(s,n.endValue,l),s.isHorizontal()?(r=l,a=u):(o=l,i=u);else{const h=t.scales[n.xScaleID],p=t.scales[n.yScaleID];h&&(r=Vi(h,n.xMin,r),a=Vi(h,n.xMax,a)),p&&(o=Vi(p,n.yMin,o),i=Vi(p,n.yMax,i))}const d=c3({x:r,y:o,x2:a,y2:i},t.chartArea)?Sut({x:r,y:o},{x:a,y:i},t.chartArea):{x:r,y:o,x2:a,y2:i,width:Math.abs(a-r),height:Math.abs(i-o)},f=n.label;return f&&f.content?Iut(d,t,f):d}}wm.id="lineAnnotation";const f3={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,enabled:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};wm.defaults={adjustScaleRange:!0,arrowHeads:{enabled:!1,end:Object.assign({},f3),fill:!1,length:12,start:Object.assign({},f3),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,display:!0,endValue:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,color:"#fff",content:null,cornerRadius:void 0,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xPadding:void 0,yAdjust:0,yPadding:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};wm.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};wm.defaultRoutes={borderColor:"color"};function Iut(e,t,n){const{padding:s,xPadding:o,yPadding:r,borderWidth:i}=n,a=Eut(s,o,r),l=jT(t.ctx,n),u=l.width+a.width+i,c=l.height+a.height+i,d=_ut(e,n,{width:u,height:c,padding:a},t.chartArea);return e.labelX=d.x,e.labelY=d.y,e.labelWidth=d.width,e.labelHeight=d.height,e.labelRotation=d.rotation,e.labelPadding=a,e.labelTextSize=l,e}function Tut(e){const{x:t,y:n,x2:s,y2:o}=e,r=Math.atan2(o-n,s-t);return r>Fn/2?r-Fn:r<Fn/-2?r+Fn:r}function Eut(e,t,n){let s=e;return(t||n)&&(s={x:t||6,y:n||6}),Js(s)}function _ut(e,t,n,s){const{width:o,height:r,padding:i}=n,{xAdjust:a,yAdjust:l}=t,u={x:e.x,y:e.y},c={x:e.x2,y:e.y2},d=t.rotation==="auto"?Tut(e):ro(t.rotation),f=Nut(o,r,d),h=Aut(e,t,{labelSize:f,padding:i},s),p=qT(u,c,h),g={size:f.w,min:s.left,max:s.right,padding:i.left},m={size:f.h,min:s.top,max:s.bottom,padding:i.top};return{x:p3(p.x,g)+a,y:p3(p.y,m)+l,width:o,height:r,rotation:d}}function Nut(e,t,n){const s=Math.cos(n),o=Math.sin(n);return{w:Math.abs(e*s)+Math.abs(t*o),h:Math.abs(e*o)+Math.abs(t*s)}}function Aut(e,t,n,s){let o;const r=Dut(e,s);return t.position==="start"?o=h3({w:e.x2-e.x,h:e.y2-e.y},n,t,r):t.position==="end"?o=1-h3({w:e.x-e.x2,h:e.y-e.y2},n,t,r):o=HT(1,t.position),o}function h3(e,t,n,s){const{labelSize:o,padding:r}=t,i=e.w*s.dx,a=e.h*s.dy,l=i>0&&(o.w/2+r.left-s.x)/i,u=a>0&&(o.h/2+r.top-s.y)/a;return WT(Math.max(l,u),0,.25)}function Dut(e,t){const{x:n,x2:s,y:o,y2:r}=e,i=Math.min(o,r)-t.top,a=Math.min(n,s)-t.left,l=t.bottom-Math.max(o,r),u=t.right-Math.max(n,s);return{x:Math.min(a,u),y:Math.min(i,l),dx:a<=u?1:-1,dy:i<=l?1:-1}}function p3(e,t){const{size:n,min:s,max:o,padding:r}=t,i=n/2;return n>o-s?(o+s)/2:(s>=e-r-i&&(e=s+r+i),o<=e+r+i&&(e=o-r-i),e)}function Rut(e){const t=e.options,n=t.arrowHeads&&t.arrowHeads.start,s=t.arrowHeads&&t.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:g3(e,n),endAdjust:g3(e,s)}}function g3(e,t){if(!t||!t.enabled)return 0;const{length:n,width:s}=t,o=e.options.borderWidth/2,r={x:n,y:s+o};return Math.abs(Yx(0,r,{x:0,y:o}))}function m3(e,t,n,s){if(!s||!s.enabled)return;const{length:o,width:r,fill:i,backgroundColor:a,borderColor:l}=s,u=Math.abs(t-o)+n;e.beginPath(),Ef(e,s),Ic(e,s),e.moveTo(u,-r),e.lineTo(t+n,0),e.lineTo(u,r),i===!0?(e.fillStyle=a||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=s.borderShadowColor,e.stroke()}class L1 extends To{inRange(t,n,s){return Out({x:t,y:n},this.getProps(["width","height"],s),this.options.rotation,this.options.borderWidth)}getCenterPoint(t){return Ep(this.getProps(["x","y","width","height"],t))}draw(t){const{width:n,height:s,options:o}=this,r=this.getCenterPoint();t.save(),l0(t,this,o.rotation),Ef(t,this.options),t.beginPath(),t.fillStyle=o.backgroundColor;const i=Ic(t,o);t.ellipse(r.x,r.y,s/2,n/2,Fn/2,0,2*Fn),t.fill(),i&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,n){return F1(t,n)}}L1.id="ellipseAnnotation";L1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};L1.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Out(e,t,n,s){const{width:o,height:r}=t,i=t.getCenterPoint(!0),a=o/2,l=r/2;if(a<=0||l<=0)return!1;const u=ro(n||0),c=s/2||0,d=Math.cos(u),f=Math.sin(u),h=Math.pow(d*(e.x-i.x)+f*(e.y-i.y),2),p=Math.pow(f*(e.x-i.x)-d*(e.y-i.y),2);return h/Math.pow(a+c,2)+p/Math.pow(l+c,2)<=1.0001}class B1 extends To{inRange(t,n,s){const{x:o,y:r}=bm({x:t,y:n},this.getCenterPoint(s),ro(-this.options.rotation));return kU(o,r,this.getProps(["x","y","width","height"],s),this.options.borderWidth)}getCenterPoint(t){return Ep(this.getProps(["x","y","width","height"],t))}draw(t){if(!this.options.content)return;const{labelX:n,labelY:s,labelWidth:o,labelHeight:r,options:i}=this;t.save(),l0(t,this,i.rotation),Put(t,this),GT(t,this,i),KT(t,{x:n,y:s,width:o,height:r},i),t.restore()}resolveElementProperties(t,n){const s=_U(n)?NU(t,n):Ep(F1(t,n)),o=Js(n.padding),r=jT(t.ctx,n),i=Mut(s,r,n,o),a=n.borderWidth/2,l=zt(ut({pointX:s.x,pointY:s.y},i),{labelX:i.x+o.left+a,labelY:i.y+o.top+a,labelWidth:r.width,labelHeight:r.height});return l.calloutPosition=n.callout.enabled&&Vut(l,n.callout,n.rotation),l}}B1.id="labelAnnotation";B1.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,enabled:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};B1.defaultRoutes={borderColor:"color"};function Mut(e,t,n,s){const o=t.width+s.width+n.borderWidth,r=t.height+s.height+n.borderWidth,i=EU(n.position);return{x:v3(e.x,o,n.xAdjust,i.x),y:v3(e.y,r,n.yAdjust,i.y),width:o,height:r}}function v3(e,t,n=0,s){return e-HT(t,s)+n}function Put(e,t){const{pointX:n,pointY:s,calloutPosition:o,options:r}=t;if(!o||t.inRange(n,s))return;const i=r.callout;if(e.save(),e.beginPath(),!Ic(e,i))return e.restore();const{separatorStart:l,separatorEnd:u}=Fut(t,o),{sideStart:c,sideEnd:d}=But(t,o,l);(i.margin>0||r.borderWidth===0)&&(e.moveTo(l.x,l.y),e.lineTo(u.x,u.y)),e.moveTo(c.x,c.y),e.lineTo(d.x,d.y);const f=bm({x:n,y:s},t.getCenterPoint(),ro(-r.rotation));e.lineTo(f.x,f.y),e.stroke(),e.restore()}function Fut(e,t){const{x:n,y:s,width:o,height:r}=e,i=Lut(e,t);let a,l;return t==="left"||t==="right"?(a={x:n+i,y:s},l={x:a.x,y:a.y+r}):(a={x:n,y:s+i},l={x:a.x+o,y:a.y}),{separatorStart:a,separatorEnd:l}}function Lut(e,t){const{width:n,height:s,options:o}=e,r=o.callout.margin+o.borderWidth/2;return t==="right"?n+r:t==="bottom"?s+r:-r}function But(e,t,n){const{y:s,width:o,height:r,options:i}=e,a=i.callout.start,l=zut(t,i.callout);let u,c;return t==="left"||t==="right"?(u={x:n.x,y:s+Jd(r,a)},c={x:u.x+l,y:u.y}):(u={x:n.x+Jd(o,a),y:n.y},c={x:u.x,y:u.y+l}),{sideStart:u,sideEnd:c}}function zut(e,t){const n=t.side;return e==="left"||e==="top"?-n:n}function Vut(e,t,n){const s=t.position;return s==="left"||s==="right"||s==="top"||s==="bottom"?s:Hut(e,t,n)}const Wut=["left","bottom","top","right"];function Hut(e,t,n){const{x:s,y:o,width:r,height:i,pointX:a,pointY:l}=e,u={x:s+r/2,y:o+i/2},c=t.start,d=Jd(r,c),f=Jd(i,c),h=[s,s+d,s+d,s+r],p=[o+f,o+i,o,o+f],g=[];for(let m=0;m<4;m++){const v=bm({x:h[m],y:p[m]},u,ro(n));g.push({position:Wut[m],distance:bp(v,{x:a,y:l})})}return g.sort((m,v)=>m.distance-v.distance)[0].position}class z1 extends To{inRange(t,n,s){const{width:o}=this.getProps(["width"],s);return vut({x:t,y:n},this.getCenterPoint(s),o/2,this.options.borderWidth)}getCenterPoint(t){return SU(this,t)}draw(t){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;t.save(),t.fillStyle=n.backgroundColor,Ef(t,n);const o=Ic(t,n);n.borderWidth=0,$p(t,n,this.x,this.y),o&&!UT(n.pointStyle)&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore(),n.borderWidth=s}resolveElementProperties(t,n){return AU(t,n)}}z1.id="pointAnnotation";z1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};z1.defaultRoutes={borderColor:"color",backgroundColor:"color"};class V1 extends To{inRange(t,n,s){return this.options.radius>=.1&&this.elements.length>1&&Uut(this.elements,t,n,s)}getCenterPoint(t){return SU(this,t)}draw(t){const{elements:n,options:s}=this;t.save(),t.beginPath(),t.fillStyle=s.backgroundColor,Ef(t,s);const o=Ic(t,s);let r=!0;for(const i of n)r?(t.moveTo(i.x,i.y),r=!1):t.lineTo(i.x,i.y);t.closePath(),t.fill(),o&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,n){const{x:s,y:o,width:r,height:i}=AU(t,n),{sides:a,radius:l,rotation:u,borderWidth:c}=n,d=c/2,f=[],h=2*Fn/a;let p=u*Z8;for(let g=0;g<a;g++,p+=h){const m=Math.sin(p),v=Math.cos(p);f.push({type:"point",optionScope:"point",properties:{x:s+m*l,y:o-v*l,bX:s+m*(l+d),bY:o-v*(l+d)}})}return{x:s,y:o,width:r,height:i,elements:f,initProperties:{x:s,y:o}}}}V1.id="polygonAnnotation";V1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};V1.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Uut(e,t,n,s){let o=!1,r=e[e.length-1].getProps(["bX","bY"],s);for(const i of e){const a=i.getProps(["bX","bY"],s);a.bY>n!=r.bY>n&&t<(r.bX-a.bX)*(n-a.bY)/(r.bY-a.bY)+a.bX&&(o=!o),r=a}return o}const hl={box:ym,ellipse:L1,label:B1,line:wm,point:z1,polygon:V1};Object.keys(hl).forEach(e=>{wn.describe(`elements.${hl[e].id}`,{_fallback:"plugins.annotation"})});const jut={update:Object.assign};function YT(e="line"){return hl[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function Gut(e,t,n,s){const o=qut(e,n.animations,s),r=t.annotations,i=Zut(t.elements,r);for(let a=0;a<r.length;a++){const l=r[a],u=RU(i,a,l.type),c=l.setContext(Xut(e,u,l)),d=u.resolveElementProperties(e,c);d.skip=Kut(d),"elements"in d&&(Yut(u,d,c,o),delete d.elements),Us(u.x)||Object.assign(u,d),d.options=OU(c),o.update(u,d)}}function Kut(e){return isNaN(e.x)||isNaN(e.y)}function qut(e,t,n){return n==="reset"||n==="none"||n==="resize"?jut:new xT(e,t)}function Yut(e,{elements:t,initProperties:n},s,o){const r=e.elements||(e.elements=[]);r.length=t.length;for(let i=0;i<t.length;i++){const a=t[i],l=a.properties,u=RU(r,i,a.type,n),c=s[a.optionScope].override(a);l.options=OU(c),o.update(u,l)}}function RU(e,t,n,s){const o=hl[YT(n)];let r=e[t];return(!r||!(r instanceof o))&&(r=e[t]=new o,ln(s)&&Object.assign(r,s)),r}function OU(e){const t=hl[YT(e.type)],n={};n.id=e.id,n.type=e.type,n.drawTime=e.drawTime,Object.assign(n,Xx(e,t.defaults),Xx(e,t.defaultRoutes));for(const s of VT)n[s]=e[s];return n}function Xx(e,t){const n={};for(const s of Object.keys(t)){const o=t[s],r=e[s];n[s]=ln(o)?Xx(r,o):r}return n}function Xut(e,t,n){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,id:n.id,type:"annotation"}))}function Zut(e,t){const n=t.length,s=e.length;if(s<n){const o=n-s;e.splice(s,0,...new Array(o))}else s>n&&e.splice(n,s-n);return e}var Jut="chartjs-plugin-annotation",Qut="1.4.0";const Xa=new Map;var Act={id:"annotation",version:Qut,afterRegister(){Tu.register(hl),yut("chart.js","3.7",Tu.version,!1)||(console.warn(`${Jut} has known issues with chart.js versions prior to 3.7, please consider upgrading.`),Tu.defaults.set("elements.lineAnnotation",{callout:{},font:{},padding:6}))},afterUnregister(){Tu.unregister(hl)},beforeInit(e){Xa.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1})},beforeUpdate(e,t,n){const s=Xa.get(e),o=s.annotations=[];let r=n.annotations;ln(r)?Object.keys(r).forEach(i=>{const a=r[i];ln(a)&&(a.id=i,o.push(a))}):Vn(r)&&o.push(...r),dut(o,e.scales)},afterDataLimits(e,t){const n=Xa.get(e);cut(e,t.scale,n.annotations.filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(e,t,n){const s=Xa.get(e);rut(e,s,n),Gut(e,s,n,t.mode),s.visibleElements=s.elements.filter(o=>!o.skip&&o.options.display)},beforeDatasetsDraw(e,t,n){wv(e,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(e,t,n){wv(e,"afterDatasetsDraw",n.clip)},beforeDraw(e,t,n){wv(e,"beforeDraw",n.clip)},afterDraw(e,t,n){wv(e,"afterDraw",n.clip)},beforeEvent(e,t,n){const s=Xa.get(e);iut(s,t.event,n)},destroy(e){Xa.delete(e)},_getState(e){return Xa.get(e)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","pointX","pointY","labelX","labelY","labelWidth","labelHeight","radius"],type:"number"}},clip:!0,dblClickSpeed:350,drawTime:"afterDatasetsDraw",label:{drawTime:null}},descriptors:{_indexable:!1,_scriptable:e=>!VT.includes(e),annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${hl[YT(t.type)].id}`}},additionalOptionScopes:[""]};function wv(e,t,n){const{ctx:s,chartArea:o}=e,{visibleElements:r}=Xa.get(e);n&&cm(s,o),MU(s,r,t),ect(s,r,t),n&&dm(s),r.forEach(i=>{if(!("drawLabel"in i))return;const a=i.options.label;a&&a.enabled&&a.content&&(a.drawTime||i.options.drawTime)===t&&i.drawLabel(s,o)})}function MU(e,t,n){for(const s of t)s.options.drawTime===n&&s.draw(e)}function ect(e,t,n){for(const s of t)Vn(s.elements)&&MU(e,s.elements,n)}export{Tu as C,Tct as D,SNe as E,at as F,rct as O,Sct as P,Ect as S,bAe as V,W as a,le as b,B as c,ge as d,kct as e,Zt as f,ce as g,qt as h,Pe as i,sct as j,q as k,ve as l,Nct as m,nt as n,A as o,nct as p,_ct as q,ie as r,$ct as s,Jo as t,Ict as u,Act as v,re as w,iY as x,oct as y};
